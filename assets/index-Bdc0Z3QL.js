var Bp=(G,_)=>()=>(_||G((_={exports:{}}).exports,_),_.exports);var kp=Bp((exports,module)=>{(function(){const _=document.createElement("link").relList;if(_&&_.supports&&_.supports("modulepreload"))return;for(const Q of document.querySelectorAll('link[rel="modulepreload"]'))Z(Q);new MutationObserver(Q=>{for(const ee of Q)if(ee.type==="childList")for(const te of ee.addedNodes)te.tagName==="LINK"&&te.rel==="modulepreload"&&Z(te)}).observe(document,{childList:!0,subtree:!0});function J(Q){const ee={};return Q.integrity&&(ee.integrity=Q.integrity),Q.referrerPolicy&&(ee.referrerPolicy=Q.referrerPolicy),Q.crossOrigin==="use-credentials"?ee.credentials="include":Q.crossOrigin==="anonymous"?ee.credentials="omit":ee.credentials="same-origin",ee}function Z(Q){if(Q.ep)return;Q.ep=!0;const ee=J(Q);fetch(Q.href,ee)}})();function getDefaultExportFromCjs(G){return G&&G.__esModule&&Object.prototype.hasOwnProperty.call(G,"default")?G.default:G}var jsxRuntime={exports:{}},reactJsxRuntime_production={};var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var G=Symbol.for("react.transitional.element"),_=Symbol.for("react.fragment");function J(Z,Q,ee){var te=null;if(ee!==void 0&&(te=""+ee),Q.key!==void 0&&(te=""+Q.key),"key"in Q){ee={};for(var ne in Q)ne!=="key"&&(ee[ne]=Q[ne])}else ee=Q;return Q=ee.ref,{$$typeof:G,type:Z,key:te,ref:Q!==void 0?Q:null,props:ee}}return reactJsxRuntime_production.Fragment=_,reactJsxRuntime_production.jsx=J,reactJsxRuntime_production.jsxs=J,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var G=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),J=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),ee=Symbol.for("react.consumer"),te=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),re=Symbol.for("react.memo"),oe=Symbol.for("react.lazy"),se=Symbol.for("react.activity"),ae=Symbol.iterator;function ce(ze){return ze===null||typeof ze!="object"?null:(ze=ae&&ze[ae]||ze["@@iterator"],typeof ze=="function"?ze:null)}var ue={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},de=Object.assign,me={};function fe(ze,qe,et){this.props=ze,this.context=qe,this.refs=me,this.updater=et||ue}fe.prototype.isReactComponent={},fe.prototype.setState=function(ze,qe){if(typeof ze!="object"&&typeof ze!="function"&&ze!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ze,qe,"setState")},fe.prototype.forceUpdate=function(ze){this.updater.enqueueForceUpdate(this,ze,"forceUpdate")};function _e(){}_e.prototype=fe.prototype;function ye(ze,qe,et){this.props=ze,this.context=qe,this.refs=me,this.updater=et||ue}var be=ye.prototype=new _e;be.constructor=ye,de(be,fe.prototype),be.isPureReactComponent=!0;var Se=Array.isArray;function Ce(){}var Me={H:null,A:null,T:null,S:null},Re=Object.prototype.hasOwnProperty;function Te(ze,qe,et){var ot=et.ref;return{$$typeof:G,type:ze,key:qe,ref:ot!==void 0?ot:null,props:et}}function Ee(ze,qe){return Te(ze.type,qe,ze.props)}function De(ze){return typeof ze=="object"&&ze!==null&&ze.$$typeof===G}function Le(ze){var qe={"=":"=0",":":"=2"};return"$"+ze.replace(/[=:]/g,function(et){return qe[et]})}var Ue=/\/+/g;function Ge(ze,qe){return typeof ze=="object"&&ze!==null&&ze.key!=null?Le(""+ze.key):qe.toString(36)}function Ye(ze){switch(ze.status){case"fulfilled":return ze.value;case"rejected":throw ze.reason;default:switch(typeof ze.status=="string"?ze.then(Ce,Ce):(ze.status="pending",ze.then(function(qe){ze.status==="pending"&&(ze.status="fulfilled",ze.value=qe)},function(qe){ze.status==="pending"&&(ze.status="rejected",ze.reason=qe)})),ze.status){case"fulfilled":return ze.value;case"rejected":throw ze.reason}}throw ze}function ke(ze,qe,et,ot,St){var it=typeof ze;(it==="undefined"||it==="boolean")&&(ze=null);var lt=!1;if(ze===null)lt=!0;else switch(it){case"bigint":case"string":case"number":lt=!0;break;case"object":switch(ze.$$typeof){case G:case _:lt=!0;break;case oe:return lt=ze._init,ke(lt(ze._payload),qe,et,ot,St)}}if(lt)return St=St(ze),lt=ot===""?"."+Ge(ze,0):ot,Se(St)?(et="",lt!=null&&(et=lt.replace(Ue,"$&/")+"/"),ke(St,qe,et,"",function(Jt){return Jt})):St!=null&&(De(St)&&(St=Ee(St,et+(St.key==null||ze&&ze.key===St.key?"":(""+St.key).replace(Ue,"$&/")+"/")+lt)),qe.push(St)),1;lt=0;var gt=ot===""?".":ot+":";if(Se(ze))for(var kt=0;kt<ze.length;kt++)ot=ze[kt],it=gt+Ge(ot,kt),lt+=ke(ot,qe,et,it,St);else if(kt=ce(ze),typeof kt=="function")for(ze=kt.call(ze),kt=0;!(ot=ze.next()).done;)ot=ot.value,it=gt+Ge(ot,kt++),lt+=ke(ot,qe,et,it,St);else if(it==="object"){if(typeof ze.then=="function")return ke(Ye(ze),qe,et,ot,St);throw qe=String(ze),Error("Objects are not valid as a React child (found: "+(qe==="[object Object]"?"object with keys {"+Object.keys(ze).join(", ")+"}":qe)+"). If you meant to render a collection of children, use an array instead.")}return lt}function Fe(ze,qe,et){if(ze==null)return ze;var ot=[],St=0;return ke(ze,ot,"","",function(it){return qe.call(et,it,St++)}),ot}function Ve(ze){if(ze._status===-1){var qe=ze._result;qe=qe(),qe.then(function(et){(ze._status===0||ze._status===-1)&&(ze._status=1,ze._result=et)},function(et){(ze._status===0||ze._status===-1)&&(ze._status=2,ze._result=et)}),ze._status===-1&&(ze._status=0,ze._result=qe)}if(ze._status===1)return ze._result.default;throw ze._result}var $e=typeof reportError=="function"?reportError:function(ze){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var qe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ze=="object"&&ze!==null&&typeof ze.message=="string"?String(ze.message):String(ze),error:ze});if(!window.dispatchEvent(qe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ze);return}console.error(ze)},Xe={map:Fe,forEach:function(ze,qe,et){Fe(ze,function(){qe.apply(this,arguments)},et)},count:function(ze){var qe=0;return Fe(ze,function(){qe++}),qe},toArray:function(ze){return Fe(ze,function(qe){return qe})||[]},only:function(ze){if(!De(ze))throw Error("React.Children.only expected to receive a single React element child.");return ze}};return react_production.Activity=se,react_production.Children=Xe,react_production.Component=fe,react_production.Fragment=J,react_production.Profiler=Q,react_production.PureComponent=ye,react_production.StrictMode=Z,react_production.Suspense=ie,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Me,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(ze){return Me.H.useMemoCache(ze)}},react_production.cache=function(ze){return function(){return ze.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(ze,qe,et){if(ze==null)throw Error("The argument must be a React element, but you passed "+ze+".");var ot=de({},ze.props),St=ze.key;if(qe!=null)for(it in qe.key!==void 0&&(St=""+qe.key),qe)!Re.call(qe,it)||it==="key"||it==="__self"||it==="__source"||it==="ref"&&qe.ref===void 0||(ot[it]=qe[it]);var it=arguments.length-2;if(it===1)ot.children=et;else if(1<it){for(var lt=Array(it),gt=0;gt<it;gt++)lt[gt]=arguments[gt+2];ot.children=lt}return Te(ze.type,St,ot)},react_production.createContext=function(ze){return ze={$$typeof:te,_currentValue:ze,_currentValue2:ze,_threadCount:0,Provider:null,Consumer:null},ze.Provider=ze,ze.Consumer={$$typeof:ee,_context:ze},ze},react_production.createElement=function(ze,qe,et){var ot,St={},it=null;if(qe!=null)for(ot in qe.key!==void 0&&(it=""+qe.key),qe)Re.call(qe,ot)&&ot!=="key"&&ot!=="__self"&&ot!=="__source"&&(St[ot]=qe[ot]);var lt=arguments.length-2;if(lt===1)St.children=et;else if(1<lt){for(var gt=Array(lt),kt=0;kt<lt;kt++)gt[kt]=arguments[kt+2];St.children=gt}if(ze&&ze.defaultProps)for(ot in lt=ze.defaultProps,lt)St[ot]===void 0&&(St[ot]=lt[ot]);return Te(ze,it,St)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(ze){return{$$typeof:ne,render:ze}},react_production.isValidElement=De,react_production.lazy=function(ze){return{$$typeof:oe,_payload:{_status:-1,_result:ze},_init:Ve}},react_production.memo=function(ze,qe){return{$$typeof:re,type:ze,compare:qe===void 0?null:qe}},react_production.startTransition=function(ze){var qe=Me.T,et={};Me.T=et;try{var ot=ze(),St=Me.S;St!==null&&St(et,ot),typeof ot=="object"&&ot!==null&&typeof ot.then=="function"&&ot.then(Ce,$e)}catch(it){$e(it)}finally{qe!==null&&et.types!==null&&(qe.types=et.types),Me.T=qe}},react_production.unstable_useCacheRefresh=function(){return Me.H.useCacheRefresh()},react_production.use=function(ze){return Me.H.use(ze)},react_production.useActionState=function(ze,qe,et){return Me.H.useActionState(ze,qe,et)},react_production.useCallback=function(ze,qe){return Me.H.useCallback(ze,qe)},react_production.useContext=function(ze){return Me.H.useContext(ze)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(ze,qe){return Me.H.useDeferredValue(ze,qe)},react_production.useEffect=function(ze,qe){return Me.H.useEffect(ze,qe)},react_production.useEffectEvent=function(ze){return Me.H.useEffectEvent(ze)},react_production.useId=function(){return Me.H.useId()},react_production.useImperativeHandle=function(ze,qe,et){return Me.H.useImperativeHandle(ze,qe,et)},react_production.useInsertionEffect=function(ze,qe){return Me.H.useInsertionEffect(ze,qe)},react_production.useLayoutEffect=function(ze,qe){return Me.H.useLayoutEffect(ze,qe)},react_production.useMemo=function(ze,qe){return Me.H.useMemo(ze,qe)},react_production.useOptimistic=function(ze,qe){return Me.H.useOptimistic(ze,qe)},react_production.useReducer=function(ze,qe,et){return Me.H.useReducer(ze,qe,et)},react_production.useRef=function(ze){return Me.H.useRef(ze)},react_production.useState=function(ze){return Me.H.useState(ze)},react_production.useSyncExternalStore=function(ze,qe,et){return Me.H.useSyncExternalStore(ze,qe,et)},react_production.useTransition=function(){return Me.H.useTransition()},react_production.version="19.2.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={exports:{}},reactDomClient_production={},scheduler$2={exports:{}},scheduler_production$2={};var hasRequiredScheduler_production$2;function requireScheduler_production$2(){return hasRequiredScheduler_production$2||(hasRequiredScheduler_production$2=1,(function(G){function _(ke,Fe){var Ve=ke.length;ke.push(Fe);e:for(;0<Ve;){var $e=Ve-1>>>1,Xe=ke[$e];if(0<Q(Xe,Fe))ke[$e]=Fe,ke[Ve]=Xe,Ve=$e;else break e}}function J(ke){return ke.length===0?null:ke[0]}function Z(ke){if(ke.length===0)return null;var Fe=ke[0],Ve=ke.pop();if(Ve!==Fe){ke[0]=Ve;e:for(var $e=0,Xe=ke.length,ze=Xe>>>1;$e<ze;){var qe=2*($e+1)-1,et=ke[qe],ot=qe+1,St=ke[ot];if(0>Q(et,Ve))ot<Xe&&0>Q(St,et)?(ke[$e]=St,ke[ot]=Ve,$e=ot):(ke[$e]=et,ke[qe]=Ve,$e=qe);else if(ot<Xe&&0>Q(St,Ve))ke[$e]=St,ke[ot]=Ve,$e=ot;else break e}}return Fe}function Q(ke,Fe){var Ve=ke.sortIndex-Fe.sortIndex;return Ve!==0?Ve:ke.id-Fe.id}if(G.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var ee=performance;G.unstable_now=function(){return ee.now()}}else{var te=Date,ne=te.now();G.unstable_now=function(){return te.now()-ne}}var ie=[],re=[],oe=1,se=null,ae=3,ce=!1,ue=!1,de=!1,me=!1,fe=typeof setTimeout=="function"?setTimeout:null,_e=typeof clearTimeout=="function"?clearTimeout:null,ye=typeof setImmediate<"u"?setImmediate:null;function be(ke){for(var Fe=J(re);Fe!==null;){if(Fe.callback===null)Z(re);else if(Fe.startTime<=ke)Z(re),Fe.sortIndex=Fe.expirationTime,_(ie,Fe);else break;Fe=J(re)}}function Se(ke){if(de=!1,be(ke),!ue)if(J(ie)!==null)ue=!0,Ce||(Ce=!0,Le());else{var Fe=J(re);Fe!==null&&Ye(Se,Fe.startTime-ke)}}var Ce=!1,Me=-1,Re=5,Te=-1;function Ee(){return me?!0:!(G.unstable_now()-Te<Re)}function De(){if(me=!1,Ce){var ke=G.unstable_now();Te=ke;var Fe=!0;try{e:{ue=!1,de&&(de=!1,_e(Me),Me=-1),ce=!0;var Ve=ae;try{t:{for(be(ke),se=J(ie);se!==null&&!(se.expirationTime>ke&&Ee());){var $e=se.callback;if(typeof $e=="function"){se.callback=null,ae=se.priorityLevel;var Xe=$e(se.expirationTime<=ke);if(ke=G.unstable_now(),typeof Xe=="function"){se.callback=Xe,be(ke),Fe=!0;break t}se===J(ie)&&Z(ie),be(ke)}else Z(ie);se=J(ie)}if(se!==null)Fe=!0;else{var ze=J(re);ze!==null&&Ye(Se,ze.startTime-ke),Fe=!1}}break e}finally{se=null,ae=Ve,ce=!1}Fe=void 0}}finally{Fe?Le():Ce=!1}}}var Le;if(typeof ye=="function")Le=function(){ye(De)};else if(typeof MessageChannel<"u"){var Ue=new MessageChannel,Ge=Ue.port2;Ue.port1.onmessage=De,Le=function(){Ge.postMessage(null)}}else Le=function(){fe(De,0)};function Ye(ke,Fe){Me=fe(function(){ke(G.unstable_now())},Fe)}G.unstable_IdlePriority=5,G.unstable_ImmediatePriority=1,G.unstable_LowPriority=4,G.unstable_NormalPriority=3,G.unstable_Profiling=null,G.unstable_UserBlockingPriority=2,G.unstable_cancelCallback=function(ke){ke.callback=null},G.unstable_forceFrameRate=function(ke){0>ke||125<ke?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Re=0<ke?Math.floor(1e3/ke):5},G.unstable_getCurrentPriorityLevel=function(){return ae},G.unstable_next=function(ke){switch(ae){case 1:case 2:case 3:var Fe=3;break;default:Fe=ae}var Ve=ae;ae=Fe;try{return ke()}finally{ae=Ve}},G.unstable_requestPaint=function(){me=!0},G.unstable_runWithPriority=function(ke,Fe){switch(ke){case 1:case 2:case 3:case 4:case 5:break;default:ke=3}var Ve=ae;ae=ke;try{return Fe()}finally{ae=Ve}},G.unstable_scheduleCallback=function(ke,Fe,Ve){var $e=G.unstable_now();switch(typeof Ve=="object"&&Ve!==null?(Ve=Ve.delay,Ve=typeof Ve=="number"&&0<Ve?$e+Ve:$e):Ve=$e,ke){case 1:var Xe=-1;break;case 2:Xe=250;break;case 5:Xe=1073741823;break;case 4:Xe=1e4;break;default:Xe=5e3}return Xe=Ve+Xe,ke={id:oe++,callback:Fe,priorityLevel:ke,startTime:Ve,expirationTime:Xe,sortIndex:-1},Ve>$e?(ke.sortIndex=Ve,_(re,ke),J(ie)===null&&ke===J(re)&&(de?(_e(Me),Me=-1):de=!0,Ye(Se,Ve-$e))):(ke.sortIndex=Xe,_(ie,ke),ue||ce||(ue=!0,Ce||(Ce=!0,Le()))),ke},G.unstable_shouldYield=Ee,G.unstable_wrapCallback=function(ke){var Fe=ae;return function(){var Ve=ae;ae=Fe;try{return ke.apply(this,arguments)}finally{ae=Ve}}}})(scheduler_production$2)),scheduler_production$2}var hasRequiredScheduler$2;function requireScheduler$2(){return hasRequiredScheduler$2||(hasRequiredScheduler$2=1,scheduler$2.exports=requireScheduler_production$2()),scheduler$2.exports}var reactDom={exports:{}},reactDom_production={};var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var G=requireReact();function _(ie){var re="https://react.dev/errors/"+ie;if(1<arguments.length){re+="?args[]="+encodeURIComponent(arguments[1]);for(var oe=2;oe<arguments.length;oe++)re+="&args[]="+encodeURIComponent(arguments[oe])}return"Minified React error #"+ie+"; visit "+re+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function J(){}var Z={d:{f:J,r:function(){throw Error(_(522))},D:J,C:J,L:J,m:J,X:J,S:J,M:J},p:0,findDOMNode:null},Q=Symbol.for("react.portal");function ee(ie,re,oe){var se=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Q,key:se==null?null:""+se,children:ie,containerInfo:re,implementation:oe}}var te=G.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function ne(ie,re){if(ie==="font")return"";if(typeof re=="string")return re==="use-credentials"?re:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Z,reactDom_production.createPortal=function(ie,re){var oe=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!re||re.nodeType!==1&&re.nodeType!==9&&re.nodeType!==11)throw Error(_(299));return ee(ie,re,null,oe)},reactDom_production.flushSync=function(ie){var re=te.T,oe=Z.p;try{if(te.T=null,Z.p=2,ie)return ie()}finally{te.T=re,Z.p=oe,Z.d.f()}},reactDom_production.preconnect=function(ie,re){typeof ie=="string"&&(re?(re=re.crossOrigin,re=typeof re=="string"?re==="use-credentials"?re:"":void 0):re=null,Z.d.C(ie,re))},reactDom_production.prefetchDNS=function(ie){typeof ie=="string"&&Z.d.D(ie)},reactDom_production.preinit=function(ie,re){if(typeof ie=="string"&&re&&typeof re.as=="string"){var oe=re.as,se=ne(oe,re.crossOrigin),ae=typeof re.integrity=="string"?re.integrity:void 0,ce=typeof re.fetchPriority=="string"?re.fetchPriority:void 0;oe==="style"?Z.d.S(ie,typeof re.precedence=="string"?re.precedence:void 0,{crossOrigin:se,integrity:ae,fetchPriority:ce}):oe==="script"&&Z.d.X(ie,{crossOrigin:se,integrity:ae,fetchPriority:ce,nonce:typeof re.nonce=="string"?re.nonce:void 0})}},reactDom_production.preinitModule=function(ie,re){if(typeof ie=="string")if(typeof re=="object"&&re!==null){if(re.as==null||re.as==="script"){var oe=ne(re.as,re.crossOrigin);Z.d.M(ie,{crossOrigin:oe,integrity:typeof re.integrity=="string"?re.integrity:void 0,nonce:typeof re.nonce=="string"?re.nonce:void 0})}}else re==null&&Z.d.M(ie)},reactDom_production.preload=function(ie,re){if(typeof ie=="string"&&typeof re=="object"&&re!==null&&typeof re.as=="string"){var oe=re.as,se=ne(oe,re.crossOrigin);Z.d.L(ie,oe,{crossOrigin:se,integrity:typeof re.integrity=="string"?re.integrity:void 0,nonce:typeof re.nonce=="string"?re.nonce:void 0,type:typeof re.type=="string"?re.type:void 0,fetchPriority:typeof re.fetchPriority=="string"?re.fetchPriority:void 0,referrerPolicy:typeof re.referrerPolicy=="string"?re.referrerPolicy:void 0,imageSrcSet:typeof re.imageSrcSet=="string"?re.imageSrcSet:void 0,imageSizes:typeof re.imageSizes=="string"?re.imageSizes:void 0,media:typeof re.media=="string"?re.media:void 0})}},reactDom_production.preloadModule=function(ie,re){if(typeof ie=="string")if(re){var oe=ne(re.as,re.crossOrigin);Z.d.m(ie,{as:typeof re.as=="string"&&re.as!=="script"?re.as:void 0,crossOrigin:oe,integrity:typeof re.integrity=="string"?re.integrity:void 0})}else Z.d.m(ie)},reactDom_production.requestFormReset=function(ie){Z.d.r(ie)},reactDom_production.unstable_batchedUpdates=function(ie,re){return ie(re)},reactDom_production.useFormState=function(ie,re,oe){return te.H.useFormState(ie,re,oe)},reactDom_production.useFormStatus=function(){return te.H.useHostTransitionStatus()},reactDom_production.version="19.2.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function G(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(G)}catch(_){console.error(_)}}return G(),reactDom.exports=requireReactDom_production(),reactDom.exports}var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var G=requireScheduler$2(),_=requireReact(),J=requireReactDom();function Z(le){var he="https://react.dev/errors/"+le;if(1<arguments.length){he+="?args[]="+encodeURIComponent(arguments[1]);for(var ve=2;ve<arguments.length;ve++)he+="&args[]="+encodeURIComponent(arguments[ve])}return"Minified React error #"+le+"; visit "+he+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Q(le){return!(!le||le.nodeType!==1&&le.nodeType!==9&&le.nodeType!==11)}function ee(le){var he=le,ve=le;if(le.alternate)for(;he.return;)he=he.return;else{le=he;do he=le,(he.flags&4098)!==0&&(ve=he.return),le=he.return;while(le)}return he.tag===3?ve:null}function te(le){if(le.tag===13){var he=le.memoizedState;if(he===null&&(le=le.alternate,le!==null&&(he=le.memoizedState)),he!==null)return he.dehydrated}return null}function ne(le){if(le.tag===31){var he=le.memoizedState;if(he===null&&(le=le.alternate,le!==null&&(he=le.memoizedState)),he!==null)return he.dehydrated}return null}function ie(le){if(ee(le)!==le)throw Error(Z(188))}function re(le){var he=le.alternate;if(!he){if(he=ee(le),he===null)throw Error(Z(188));return he!==le?null:le}for(var ve=le,xe=he;;){var we=ve.return;if(we===null)break;var Oe=we.alternate;if(Oe===null){if(xe=we.return,xe!==null){ve=xe;continue}break}if(we.child===Oe.child){for(Oe=we.child;Oe;){if(Oe===ve)return ie(we),le;if(Oe===xe)return ie(we),he;Oe=Oe.sibling}throw Error(Z(188))}if(ve.return!==xe.return)ve=we,xe=Oe;else{for(var Ie=!1,We=we.child;We;){if(We===ve){Ie=!0,ve=we,xe=Oe;break}if(We===xe){Ie=!0,xe=we,ve=Oe;break}We=We.sibling}if(!Ie){for(We=Oe.child;We;){if(We===ve){Ie=!0,ve=Oe,xe=we;break}if(We===xe){Ie=!0,xe=Oe,ve=we;break}We=We.sibling}if(!Ie)throw Error(Z(189))}}if(ve.alternate!==xe)throw Error(Z(190))}if(ve.tag!==3)throw Error(Z(188));return ve.stateNode.current===ve?le:he}function oe(le){var he=le.tag;if(he===5||he===26||he===27||he===6)return le;for(le=le.child;le!==null;){if(he=oe(le),he!==null)return he;le=le.sibling}return null}var se=Object.assign,ae=Symbol.for("react.element"),ce=Symbol.for("react.transitional.element"),ue=Symbol.for("react.portal"),de=Symbol.for("react.fragment"),me=Symbol.for("react.strict_mode"),fe=Symbol.for("react.profiler"),_e=Symbol.for("react.consumer"),ye=Symbol.for("react.context"),be=Symbol.for("react.forward_ref"),Se=Symbol.for("react.suspense"),Ce=Symbol.for("react.suspense_list"),Me=Symbol.for("react.memo"),Re=Symbol.for("react.lazy"),Te=Symbol.for("react.activity"),Ee=Symbol.for("react.memo_cache_sentinel"),De=Symbol.iterator;function Le(le){return le===null||typeof le!="object"?null:(le=De&&le[De]||le["@@iterator"],typeof le=="function"?le:null)}var Ue=Symbol.for("react.client.reference");function Ge(le){if(le==null)return null;if(typeof le=="function")return le.$$typeof===Ue?null:le.displayName||le.name||null;if(typeof le=="string")return le;switch(le){case de:return"Fragment";case fe:return"Profiler";case me:return"StrictMode";case Se:return"Suspense";case Ce:return"SuspenseList";case Te:return"Activity"}if(typeof le=="object")switch(le.$$typeof){case ue:return"Portal";case ye:return le.displayName||"Context";case _e:return(le._context.displayName||"Context")+".Consumer";case be:var he=le.render;return le=le.displayName,le||(le=he.displayName||he.name||"",le=le!==""?"ForwardRef("+le+")":"ForwardRef"),le;case Me:return he=le.displayName||null,he!==null?he:Ge(le.type)||"Memo";case Re:he=le._payload,le=le._init;try{return Ge(le(he))}catch{}}return null}var Ye=Array.isArray,ke=_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Fe=J.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ve={pending:!1,data:null,method:null,action:null},$e=[],Xe=-1;function ze(le){return{current:le}}function qe(le){0>Xe||(le.current=$e[Xe],$e[Xe]=null,Xe--)}function et(le,he){Xe++,$e[Xe]=le.current,le.current=he}var ot=ze(null),St=ze(null),it=ze(null),lt=ze(null);function gt(le,he){switch(et(it,he),et(St,le),et(ot,null),he.nodeType){case 9:case 11:le=(le=he.documentElement)&&(le=le.namespaceURI)?u0(le):0;break;default:if(le=he.tagName,he=he.namespaceURI)he=u0(he),le=h0(he,le);else switch(le){case"svg":le=1;break;case"math":le=2;break;default:le=0}}qe(ot),et(ot,le)}function kt(){qe(ot),qe(St),qe(it)}function Jt(le){le.memoizedState!==null&&et(lt,le);var he=ot.current,ve=h0(he,le.type);he!==ve&&(et(St,le),et(ot,ve))}function li(le){St.current===le&&(qe(ot),qe(St)),lt.current===le&&(qe(lt),Hh._currentValue=Ve)}var si,qt;function vt(le){if(si===void 0)try{throw Error()}catch(ve){var he=ve.stack.trim().match(/\n( *(at )?)/);si=he&&he[1]||"",qt=-1<ve.stack.indexOf(`
    at`)?" (<anonymous>)":-1<ve.stack.indexOf("@")?"@unknown:0:0":""}return`
`+si+le+qt}var Ke=!1;function Tt(le,he){if(!le||Ke)return"";Ke=!0;var ve=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var xe={DetermineComponentFrameRoot:function(){try{if(he){var $t=function(){throw Error()};if(Object.defineProperty($t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($t,[])}catch(Bt){var Ot=Bt}Reflect.construct(le,[],$t)}else{try{$t.call()}catch(Bt){Ot=Bt}le.call($t.prototype)}}else{try{throw Error()}catch(Bt){Ot=Bt}($t=le())&&typeof $t.catch=="function"&&$t.catch(function(){})}}catch(Bt){if(Bt&&Ot&&typeof Bt.stack=="string")return[Bt.stack,Ot.stack]}return[null,null]}};xe.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var we=Object.getOwnPropertyDescriptor(xe.DetermineComponentFrameRoot,"name");we&&we.configurable&&Object.defineProperty(xe.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Oe=xe.DetermineComponentFrameRoot(),Ie=Oe[0],We=Oe[1];if(Ie&&We){var at=Ie.split(`
`),Mt=We.split(`
`);for(we=xe=0;xe<at.length&&!at[xe].includes("DetermineComponentFrameRoot");)xe++;for(;we<Mt.length&&!Mt[we].includes("DetermineComponentFrameRoot");)we++;if(xe===at.length||we===Mt.length)for(xe=at.length-1,we=Mt.length-1;1<=xe&&0<=we&&at[xe]!==Mt[we];)we--;for(;1<=xe&&0<=we;xe--,we--)if(at[xe]!==Mt[we]){if(xe!==1||we!==1)do if(xe--,we--,0>we||at[xe]!==Mt[we]){var Vt=`
`+at[xe].replace(" at new "," at ");return le.displayName&&Vt.includes("<anonymous>")&&(Vt=Vt.replace("<anonymous>",le.displayName)),Vt}while(1<=xe&&0<=we);break}}}finally{Ke=!1,Error.prepareStackTrace=ve}return(ve=le?le.displayName||le.name:"")?vt(ve):""}function Ut(le,he){switch(le.tag){case 26:case 27:case 5:return vt(le.type);case 16:return vt("Lazy");case 13:return le.child!==he&&he!==null?vt("Suspense Fallback"):vt("Suspense");case 19:return vt("SuspenseList");case 0:case 15:return Tt(le.type,!1);case 11:return Tt(le.type.render,!1);case 1:return Tt(le.type,!0);case 31:return vt("Activity");default:return""}}function Lt(le){try{var he="",ve=null;do he+=Ut(le,ve),ve=le,le=le.return;while(le);return he}catch(xe){return`
Error generating stack: `+xe.message+`
`+xe.stack}}var jt=Object.prototype.hasOwnProperty,ri=G.unstable_scheduleCallback,ti=G.unstable_cancelCallback,di=G.unstable_shouldYield,Qe=G.unstable_requestPaint,He=G.unstable_now,_t=G.unstable_getCurrentPriorityLevel,dt=G.unstable_ImmediatePriority,At=G.unstable_UserBlockingPriority,Nt=G.unstable_NormalPriority,fi=G.unstable_LowPriority,Kt=G.unstable_IdlePriority,It=G.log,Yt=G.unstable_setDisableYieldValue,Rt=null,Pt=null;function mt(le){if(typeof It=="function"&&Yt(le),Pt&&typeof Pt.setStrictMode=="function")try{Pt.setStrictMode(Rt,le)}catch{}}var tt=Math.clz32?Math.clz32:rt,Ze=Math.log,Zt=Math.LN2;function rt(le){return le>>>=0,le===0?32:31-(Ze(le)/Zt|0)|0}var Qt=256,zt=262144,ei=4194304;function Wt(le){var he=le&42;if(he!==0)return he;switch(le&-le){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return le&261888;case 262144:case 524288:case 1048576:case 2097152:return le&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return le&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return le}}function Ft(le,he,ve){var xe=le.pendingLanes;if(xe===0)return 0;var we=0,Oe=le.suspendedLanes,Ie=le.pingedLanes;le=le.warmLanes;var We=xe&134217727;return We!==0?(xe=We&~Oe,xe!==0?we=Wt(xe):(Ie&=We,Ie!==0?we=Wt(Ie):ve||(ve=We&~le,ve!==0&&(we=Wt(ve))))):(We=xe&~Oe,We!==0?we=Wt(We):Ie!==0?we=Wt(Ie):ve||(ve=xe&~le,ve!==0&&(we=Wt(ve)))),we===0?0:he!==0&&he!==we&&(he&Oe)===0&&(Oe=we&-we,ve=he&-he,Oe>=ve||Oe===32&&(ve&4194048)!==0)?he:we}function hi(le,he){return(le.pendingLanes&~(le.suspendedLanes&~le.pingedLanes)&he)===0}function pi(le,he){switch(le){case 1:case 2:case 4:case 8:case 64:return he+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return he+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Di(){var le=ei;return ei<<=1,(ei&62914560)===0&&(ei=4194304),le}function Si(le){for(var he=[],ve=0;31>ve;ve++)he.push(le);return he}function Ii(le,he){le.pendingLanes|=he,he!==268435456&&(le.suspendedLanes=0,le.pingedLanes=0,le.warmLanes=0)}function vn(le,he,ve,xe,we,Oe){var Ie=le.pendingLanes;le.pendingLanes=ve,le.suspendedLanes=0,le.pingedLanes=0,le.warmLanes=0,le.expiredLanes&=ve,le.entangledLanes&=ve,le.errorRecoveryDisabledLanes&=ve,le.shellSuspendCounter=0;var We=le.entanglements,at=le.expirationTimes,Mt=le.hiddenUpdates;for(ve=Ie&~ve;0<ve;){var Vt=31-tt(ve),$t=1<<Vt;We[Vt]=0,at[Vt]=-1;var Ot=Mt[Vt];if(Ot!==null)for(Mt[Vt]=null,Vt=0;Vt<Ot.length;Vt++){var Bt=Ot[Vt];Bt!==null&&(Bt.lane&=-536870913)}ve&=~$t}xe!==0&&Tr(le,xe,0),Oe!==0&&we===0&&le.tag!==0&&(le.suspendedLanes|=Oe&~(Ie&~he))}function Tr(le,he,ve){le.pendingLanes|=he,le.suspendedLanes&=~he;var xe=31-tt(he);le.entangledLanes|=he,le.entanglements[xe]=le.entanglements[xe]|1073741824|ve&261930}function Ln(le,he){var ve=le.entangledLanes|=he;for(le=le.entanglements;ve;){var xe=31-tt(ve),we=1<<xe;we&he|le[xe]&he&&(le[xe]|=he),ve&=~we}}function wr(le,he){var ve=he&-he;return ve=(ve&42)!==0?1:_n(ve),(ve&(le.suspendedLanes|he))!==0?0:ve}function _n(le){switch(le){case 2:le=1;break;case 8:le=4;break;case 32:le=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:le=128;break;case 268435456:le=134217728;break;default:le=0}return le}function Ur(le){return le&=-le,2<le?8<le?(le&134217727)!==0?32:268435456:8:2}function Bn(){var le=Fe.p;return le!==0?le:(le=window.event,le===void 0?32:L0(le.type))}function $n(le,he){var ve=Fe.p;try{return Fe.p=le,he()}finally{Fe.p=ve}}var En=Math.random().toString(36).slice(2),ki="__reactFiber$"+En,On="__reactProps$"+En,Ir="__reactContainer$"+En,ks="__reactEvents$"+En,ra="__reactListeners$"+En,Al="__reactHandles$"+En,sa="__reactResources$"+En,ct="__reactMarker$"+En;function Et(le){delete le[ki],delete le[On],delete le[ks],delete le[ra],delete le[Al]}function Ht(le){var he=le[ki];if(he)return he;for(var ve=le.parentNode;ve;){if(he=ve[Ir]||ve[ki]){if(ve=he.alternate,he.child!==null||ve!==null&&ve.child!==null)for(le=_0(le);le!==null;){if(ve=le[ki])return ve;le=_0(le)}return he}le=ve,ve=le.parentNode}return null}function je(le){if(le=le[ki]||le[Ir]){var he=le.tag;if(he===5||he===6||he===13||he===31||he===26||he===27||he===3)return le}return null}function nt(le){var he=le.tag;if(he===5||he===26||he===27||he===6)return le.stateNode;throw Error(Z(33))}function pt(le){var he=le[sa];return he||(he=le[sa]={hoistableStyles:new Map,hoistableScripts:new Map}),he}function ft(le){le[ct]=!0}var ut=new Set,ii={};function ci(le,he){ui(le,he),ui(le+"Capture",he)}function ui(le,he){for(ii[le]=he,le=0;le<he.length;le++)ut.add(he[le])}var ai=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vi={},Ti={};function bi(le){return jt.call(Ti,le)?!0:jt.call(vi,le)?!1:ai.test(le)?Ti[le]=!0:(vi[le]=!0,!1)}function Ui(le,he,ve){if(bi(he))if(ve===null)le.removeAttribute(he);else{switch(typeof ve){case"undefined":case"function":case"symbol":le.removeAttribute(he);return;case"boolean":var xe=he.toLowerCase().slice(0,5);if(xe!=="data-"&&xe!=="aria-"){le.removeAttribute(he);return}}le.setAttribute(he,""+ve)}}function Ji(le,he,ve){if(ve===null)le.removeAttribute(he);else{switch(typeof ve){case"undefined":case"function":case"symbol":case"boolean":le.removeAttribute(he);return}le.setAttribute(he,""+ve)}}function Ki(le,he,ve,xe){if(xe===null)le.removeAttribute(ve);else{switch(typeof xe){case"undefined":case"function":case"symbol":case"boolean":le.removeAttribute(ve);return}le.setAttributeNS(he,ve,""+xe)}}function Hi(le){switch(typeof le){case"bigint":case"boolean":case"number":case"string":case"undefined":return le;case"object":return le;default:return""}}function on(le){var he=le.type;return(le=le.nodeName)&&le.toLowerCase()==="input"&&(he==="checkbox"||he==="radio")}function Ei(le,he,ve){var xe=Object.getOwnPropertyDescriptor(le.constructor.prototype,he);if(!le.hasOwnProperty(he)&&typeof xe<"u"&&typeof xe.get=="function"&&typeof xe.set=="function"){var we=xe.get,Oe=xe.set;return Object.defineProperty(le,he,{configurable:!0,get:function(){return we.call(this)},set:function(Ie){ve=""+Ie,Oe.call(this,Ie)}}),Object.defineProperty(le,he,{enumerable:xe.enumerable}),{getValue:function(){return ve},setValue:function(Ie){ve=""+Ie},stopTracking:function(){le._valueTracker=null,delete le[he]}}}}function pn(le){if(!le._valueTracker){var he=on(le)?"checked":"value";le._valueTracker=Ei(le,he,""+le[he])}}function Yi(le){if(!le)return!1;var he=le._valueTracker;if(!he)return!0;var ve=he.getValue(),xe="";return le&&(xe=on(le)?le.checked?"true":"false":le.value),le=xe,le!==ve?(he.setValue(le),!0):!1}function Wn(le){if(le=le||(typeof document<"u"?document:void 0),typeof le>"u")return null;try{return le.activeElement||le.body}catch{return le.body}}var aa=/[\n"\\]/g;function yn(le){return le.replace(aa,function(he){return"\\"+he.charCodeAt(0).toString(16)+" "})}function Us(le,he,ve,xe,we,Oe,Ie,We){le.name="",Ie!=null&&typeof Ie!="function"&&typeof Ie!="symbol"&&typeof Ie!="boolean"?le.type=Ie:le.removeAttribute("type"),he!=null?Ie==="number"?(he===0&&le.value===""||le.value!=he)&&(le.value=""+Hi(he)):le.value!==""+Hi(he)&&(le.value=""+Hi(he)):Ie!=="submit"&&Ie!=="reset"||le.removeAttribute("value"),he!=null?Qn(le,Ie,Hi(he)):ve!=null?Qn(le,Ie,Hi(ve)):xe!=null&&le.removeAttribute("value"),we==null&&Oe!=null&&(le.defaultChecked=!!Oe),we!=null&&(le.checked=we&&typeof we!="function"&&typeof we!="symbol"),We!=null&&typeof We!="function"&&typeof We!="symbol"&&typeof We!="boolean"?le.name=""+Hi(We):le.removeAttribute("name")}function bn(le,he,ve,xe,we,Oe,Ie,We){if(Oe!=null&&typeof Oe!="function"&&typeof Oe!="symbol"&&typeof Oe!="boolean"&&(le.type=Oe),he!=null||ve!=null){if(!(Oe!=="submit"&&Oe!=="reset"||he!=null)){pn(le);return}ve=ve!=null?""+Hi(ve):"",he=he!=null?""+Hi(he):ve,We||he===le.value||(le.value=he),le.defaultValue=he}xe=xe??we,xe=typeof xe!="function"&&typeof xe!="symbol"&&!!xe,le.checked=We?le.checked:!!xe,le.defaultChecked=!!xe,Ie!=null&&typeof Ie!="function"&&typeof Ie!="symbol"&&typeof Ie!="boolean"&&(le.name=Ie),pn(le)}function Qn(le,he,ve){he==="number"&&Wn(le.ownerDocument)===le||le.defaultValue===""+ve||(le.defaultValue=""+ve)}function er(le,he,ve,xe){if(le=le.options,he){he={};for(var we=0;we<ve.length;we++)he["$"+ve[we]]=!0;for(ve=0;ve<le.length;ve++)we=he.hasOwnProperty("$"+le[ve].value),le[ve].selected!==we&&(le[ve].selected=we),we&&xe&&(le[ve].defaultSelected=!0)}else{for(ve=""+Hi(ve),he=null,we=0;we<le.length;we++){if(le[we].value===ve){le[we].selected=!0,xe&&(le[we].defaultSelected=!0);return}he!==null||le[we].disabled||(he=le[we])}he!==null&&(he.selected=!0)}}function tr(le,he,ve){if(he!=null&&(he=""+Hi(he),he!==le.value&&(le.value=he),ve==null)){le.defaultValue!==he&&(le.defaultValue=he);return}le.defaultValue=ve!=null?""+Hi(ve):""}function kn(le,he,ve,xe){if(he==null){if(xe!=null){if(ve!=null)throw Error(Z(92));if(Ye(xe)){if(1<xe.length)throw Error(Z(93));xe=xe[0]}ve=xe}ve==null&&(ve=""),he=ve}ve=Hi(he),le.defaultValue=ve,xe=le.textContent,xe===ve&&xe!==""&&xe!==null&&(le.value=xe),pn(le)}function Cs(le,he){if(he){var ve=le.firstChild;if(ve&&ve===le.lastChild&&ve.nodeType===3){ve.nodeValue=he;return}}le.textContent=he}var ms=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sl(le,he,ve){var xe=he.indexOf("--")===0;ve==null||typeof ve=="boolean"||ve===""?xe?le.setProperty(he,""):he==="float"?le.cssFloat="":le[he]="":xe?le.setProperty(he,ve):typeof ve!="number"||ve===0||ms.has(he)?he==="float"?le.cssFloat=ve:le[he]=(""+ve).trim():le[he]=ve+"px"}function Su(le,he,ve){if(he!=null&&typeof he!="object")throw Error(Z(62));if(le=le.style,ve!=null){for(var xe in ve)!ve.hasOwnProperty(xe)||he!=null&&he.hasOwnProperty(xe)||(xe.indexOf("--")===0?le.setProperty(xe,""):xe==="float"?le.cssFloat="":le[xe]="");for(var we in he)xe=he[we],he.hasOwnProperty(we)&&ve[we]!==xe&&Sl(le,we,xe)}else for(var Oe in he)he.hasOwnProperty(Oe)&&Sl(le,Oe,he[Oe])}function Cl(le){if(le.indexOf("-")===-1)return!1;switch(le){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $h=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ml(le){return Wh.test(""+le)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":le}function Is(){}var El=null;function pc(le){return le=le.target||le.srcElement||window,le.correspondingUseElement&&(le=le.correspondingUseElement),le.nodeType===3?le.parentNode:le}var co=null,Pa=null;function Cu(le){var he=je(le);if(he&&(le=he.stateNode)){var ve=le[On]||null;e:switch(le=he.stateNode,he.type){case"input":if(Us(le,ve.value,ve.defaultValue,ve.defaultValue,ve.checked,ve.defaultChecked,ve.type,ve.name),he=ve.name,ve.type==="radio"&&he!=null){for(ve=le;ve.parentNode;)ve=ve.parentNode;for(ve=ve.querySelectorAll('input[name="'+yn(""+he)+'"][type="radio"]'),he=0;he<ve.length;he++){var xe=ve[he];if(xe!==le&&xe.form===le.form){var we=xe[On]||null;if(!we)throw Error(Z(90));Us(xe,we.value,we.defaultValue,we.defaultValue,we.checked,we.defaultChecked,we.type,we.name)}}for(he=0;he<ve.length;he++)xe=ve[he],xe.form===le.form&&Yi(xe)}break e;case"textarea":tr(le,ve.value,ve.defaultValue);break e;case"select":he=ve.value,he!=null&&er(le,!!ve.multiple,he,!1)}}}var mc=!1;function Mu(le,he,ve){if(mc)return le(he,ve);mc=!0;try{var xe=le(he);return xe}finally{if(mc=!1,(co!==null||Pa!==null)&&(Je(),co&&(he=co,le=Pa,Pa=co=null,Cu(he),le)))for(he=0;he<le.length;he++)Cu(le[he])}}function uo(le,he){var ve=le.stateNode;if(ve===null)return null;var xe=ve[On]||null;if(xe===null)return null;ve=xe[he];e:switch(he){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(xe=!xe.disabled)||(le=le.type,xe=!(le==="button"||le==="input"||le==="select"||le==="textarea")),le=!xe;break e;default:le=!1}if(le)return null;if(ve&&typeof ve!="function")throw Error(Z(231,he,typeof ve));return ve}var zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gc=!1;if(zs)try{var Tl={};Object.defineProperty(Tl,"passive",{get:function(){gc=!0}}),window.addEventListener("test",Tl,Tl),window.removeEventListener("test",Tl,Tl)}catch{gc=!1}var Ra=null,vc=null,Oa=null;function _c(){if(Oa)return Oa;var le,he=vc,ve=he.length,xe,we="value"in Ra?Ra.value:Ra.textContent,Oe=we.length;for(le=0;le<ve&&he[le]===we[le];le++);var Ie=ve-le;for(xe=1;xe<=Ie&&he[ve-xe]===we[Oe-xe];xe++);return Oa=we.slice(le,1<xe?1-xe:void 0)}function ho(le){var he=le.keyCode;return"charCode"in le?(le=le.charCode,le===0&&he===13&&(le=13)):le=he,le===10&&(le=13),32<=le||le===13?le:0}function wl(){return!0}function Eu(){return!1}function vr(le){function he(ve,xe,we,Oe,Ie){this._reactName=ve,this._targetInst=we,this.type=xe,this.nativeEvent=Oe,this.target=Ie,this.currentTarget=null;for(var We in le)le.hasOwnProperty(We)&&(ve=le[We],this[We]=ve?ve(Oe):Oe[We]);return this.isDefaultPrevented=(Oe.defaultPrevented!=null?Oe.defaultPrevented:Oe.returnValue===!1)?wl:Eu,this.isPropagationStopped=Eu,this}return se(he.prototype,{preventDefault:function(){this.defaultPrevented=!0;var ve=this.nativeEvent;ve&&(ve.preventDefault?ve.preventDefault():typeof ve.returnValue!="unknown"&&(ve.returnValue=!1),this.isDefaultPrevented=wl)},stopPropagation:function(){var ve=this.nativeEvent;ve&&(ve.stopPropagation?ve.stopPropagation():typeof ve.cancelBubble!="unknown"&&(ve.cancelBubble=!0),this.isPropagationStopped=wl)},persist:function(){},isPersistent:wl}),he}var Na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(le){return le.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pl=vr(Na),Ms=se({},Na,{view:0,detail:0}),yc=vr(Ms),bc,Rl,Io,Ol=se({},Ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dl,button:0,buttons:0,relatedTarget:function(le){return le.relatedTarget===void 0?le.fromElement===le.srcElement?le.toElement:le.fromElement:le.relatedTarget},movementX:function(le){return"movementX"in le?le.movementX:(le!==Io&&(Io&&le.type==="mousemove"?(bc=le.screenX-Io.screenX,Rl=le.screenY-Io.screenY):Rl=bc=0,Io=le),bc)},movementY:function(le){return"movementY"in le?le.movementY:Rl}}),Jh=vr(Ol),ur=se({},Ol,{dataTransfer:0}),Kh=vr(ur),Zh=se({},Ms,{relatedTarget:0}),xc=vr(Zh),Qh=se({},Na,{animationName:0,elapsedTime:0,pseudoElement:0}),ed=vr(Qh),Nl=se({},Na,{clipboardData:function(le){return"clipboardData"in le?le.clipboardData:window.clipboardData}}),Tu=vr(Nl),td=se({},Na,{data:0}),wu=vr(td),id={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ru={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nd(le){var he=this.nativeEvent;return he.getModifierState?he.getModifierState(le):(le=Ru[le])?!!he[le]:!1}function Dl(){return nd}var Ou=se({},Ms,{key:function(le){if(le.key){var he=id[le.key]||le.key;if(he!=="Unidentified")return he}return le.type==="keypress"?(le=ho(le),le===13?"Enter":String.fromCharCode(le)):le.type==="keydown"||le.type==="keyup"?Pu[le.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dl,charCode:function(le){return le.type==="keypress"?ho(le):0},keyCode:function(le){return le.type==="keydown"||le.type==="keyup"?le.keyCode:0},which:function(le){return le.type==="keypress"?ho(le):le.type==="keydown"||le.type==="keyup"?le.keyCode:0}}),Nu=vr(Ou),rd=se({},Ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ac=vr(rd),sd=se({},Ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dl}),oa=vr(sd),Du=se({},Na,{propertyName:0,elapsedTime:0,pseudoElement:0}),pf=vr(Du),ad=se({},Ol,{deltaX:function(le){return"deltaX"in le?le.deltaX:"wheelDeltaX"in le?-le.wheelDeltaX:0},deltaY:function(le){return"deltaY"in le?le.deltaY:"wheelDeltaY"in le?-le.wheelDeltaY:"wheelDelta"in le?-le.wheelDelta:0},deltaZ:0,deltaMode:0}),Da=vr(ad),la=se({},Na,{newState:0,oldState:0}),Lu=vr(la),Bu=[9,13,27,32],fo=zs&&"CompositionEvent"in window,La=null;zs&&"documentMode"in document&&(La=document.documentMode);var po=zs&&"TextEvent"in window&&!La,hr=zs&&(!fo||La&&8<La&&11>=La),Ll=" ",ku=!1;function Cc(le,he){switch(le){case"keyup":return Bu.indexOf(he.keyCode)!==-1;case"keydown":return he.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zo(le){return le=le.detail,typeof le=="object"&&"data"in le?le.data:null}var Ba=!1;function Mc(le,he){switch(le){case"compositionend":return zo(he);case"keypress":return he.which!==32?null:(ku=!0,Ll);case"textInput":return le=he.data,le===Ll&&ku?null:le;default:return null}}function od(le,he){if(Ba)return le==="compositionend"||!fo&&Cc(le,he)?(le=_c(),Oa=vc=Ra=null,Ba=!1,le):null;switch(le){case"paste":return null;case"keypress":if(!(he.ctrlKey||he.altKey||he.metaKey)||he.ctrlKey&&he.altKey){if(he.char&&1<he.char.length)return he.char;if(he.which)return String.fromCharCode(he.which)}return null;case"compositionend":return hr&&he.locale!=="ko"?null:he.data;default:return null}}var Jr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uu(le){var he=le&&le.nodeName&&le.nodeName.toLowerCase();return he==="input"?!!Jr[le.type]:he==="textarea"}function Ec(le,he,ve,xe){co?Pa?Pa.push(xe):Pa=[xe]:co=xe,he=Zd(he,"onChange"),0<he.length&&(ve=new Pl("onChange","change",null,ve,xe),le.push({event:ve,listeners:he}))}var Fo=null,Vo=null;function Iu(le){r0(le,0)}function jo(le){var he=nt(le);if(Yi(he))return le}function zu(le,he){if(le==="change")return he}var Bl=!1;if(zs){var mo;if(zs){var Tn="oninput"in document;if(!Tn){var ld=document.createElement("div");ld.setAttribute("oninput","return;"),Tn=typeof ld.oninput=="function"}mo=Tn}else mo=!1;Bl=mo&&(!document.documentMode||9<document.documentMode)}function cd(){Fo&&(Fo.detachEvent("onpropertychange",Fu),Vo=Fo=null)}function Fu(le){if(le.propertyName==="value"&&jo(Vo)){var he=[];Ec(he,Vo,le,pc(le)),Mu(Iu,he)}}function kl(le,he,ve){le==="focusin"?(cd(),Fo=he,Vo=ve,Fo.attachEvent("onpropertychange",Fu)):le==="focusout"&&cd()}function ka(le){if(le==="selectionchange"||le==="keyup"||le==="keydown")return jo(Vo)}function ud(le,he){if(le==="click")return jo(he)}function hd(le,he){if(le==="input"||le==="change")return jo(he)}function go(le,he){return le===he&&(le!==0||1/le===1/he)||le!==le&&he!==he}var wn=typeof Object.is=="function"?Object.is:go;function Go(le,he){if(wn(le,he))return!0;if(typeof le!="object"||le===null||typeof he!="object"||he===null)return!1;var ve=Object.keys(le),xe=Object.keys(he);if(ve.length!==xe.length)return!1;for(xe=0;xe<ve.length;xe++){var we=ve[xe];if(!jt.call(he,we)||!wn(le[we],he[we]))return!1}return!0}function Vu(le){for(;le&&le.firstChild;)le=le.firstChild;return le}function ju(le,he){var ve=Vu(le);le=0;for(var xe;ve;){if(ve.nodeType===3){if(xe=le+ve.textContent.length,le<=he&&xe>=he)return{node:ve,offset:he-le};le=xe}e:{for(;ve;){if(ve.nextSibling){ve=ve.nextSibling;break e}ve=ve.parentNode}ve=void 0}ve=Vu(ve)}}function wc(le,he){return le&&he?le===he?!0:le&&le.nodeType===3?!1:he&&he.nodeType===3?wc(le,he.parentNode):"contains"in le?le.contains(he):le.compareDocumentPosition?!!(le.compareDocumentPosition(he)&16):!1:!1}function Pc(le){le=le!=null&&le.ownerDocument!=null&&le.ownerDocument.defaultView!=null?le.ownerDocument.defaultView:window;for(var he=Wn(le.document);he instanceof le.HTMLIFrameElement;){try{var ve=typeof he.contentWindow.location.href=="string"}catch{ve=!1}if(ve)le=he.contentWindow;else break;he=Wn(le.document)}return he}function Ho(le){var he=le&&le.nodeName&&le.nodeName.toLowerCase();return he&&(he==="input"&&(le.type==="text"||le.type==="search"||le.type==="tel"||le.type==="url"||le.type==="password")||he==="textarea"||le.contentEditable==="true")}var dd=zs&&"documentMode"in document&&11>=document.documentMode,Yo=null,Rc=null,Xo=null,Kr=!1;function Oc(le,he,ve){var xe=ve.window===ve?ve.document:ve.nodeType===9?ve:ve.ownerDocument;Kr||Yo==null||Yo!==Wn(xe)||(xe=Yo,"selectionStart"in xe&&Ho(xe)?xe={start:xe.selectionStart,end:xe.selectionEnd}:(xe=(xe.ownerDocument&&xe.ownerDocument.defaultView||window).getSelection(),xe={anchorNode:xe.anchorNode,anchorOffset:xe.anchorOffset,focusNode:xe.focusNode,focusOffset:xe.focusOffset}),Xo&&Go(Xo,xe)||(Xo=xe,xe=Zd(Rc,"onSelect"),0<xe.length&&(he=new Pl("onSelect","select",null,he,ve),le.push({event:he,listeners:xe}),he.target=Yo)))}function Ua(le,he){var ve={};return ve[le.toLowerCase()]=he.toLowerCase(),ve["Webkit"+le]="webkit"+he,ve["Moz"+le]="moz"+he,ve}var qo={animationend:Ua("Animation","AnimationEnd"),animationiteration:Ua("Animation","AnimationIteration"),animationstart:Ua("Animation","AnimationStart"),transitionrun:Ua("Transition","TransitionRun"),transitionstart:Ua("Transition","TransitionStart"),transitioncancel:Ua("Transition","TransitionCancel"),transitionend:Ua("Transition","TransitionEnd")},Ul={},Pr={};zs&&(Pr=document.createElement("div").style,"AnimationEvent"in window||(delete qo.animationend.animation,delete qo.animationiteration.animation,delete qo.animationstart.animation),"TransitionEvent"in window||delete qo.transitionend.transition);function Ia(le){if(Ul[le])return Ul[le];if(!qo[le])return le;var he=qo[le],ve;for(ve in he)if(he.hasOwnProperty(ve)&&ve in Pr)return Ul[le]=he[ve];return le}var zr=Ia("animationend"),Gu=Ia("animationiteration"),Fs=Ia("animationstart"),$o=Ia("transitionrun"),za=Ia("transitionstart"),Hu=Ia("transitioncancel"),Nc=Ia("transitionend"),ca=new Map,Lc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lc.push("scrollEnd");function yr(le,he){ca.set(le,he),ci(he,[le])}var Fa=typeof reportError=="function"?reportError:function(le){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var he=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof le=="object"&&le!==null&&typeof le.message=="string"?String(le.message):String(le),error:le});if(!window.dispatchEvent(he))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",le);return}console.error(le)},sr=[],vo=0,Bc=0;function Va(){for(var le=vo,he=Bc=vo=0;he<le;){var ve=sr[he];sr[he++]=null;var xe=sr[he];sr[he++]=null;var we=sr[he];sr[he++]=null;var Oe=sr[he];if(sr[he++]=null,xe!==null&&we!==null){var Ie=xe.pending;Ie===null?we.next=we:(we.next=Ie.next,Ie.next=we),xe.pending=we}Oe!==0&&kc(ve,we,Oe)}}function Il(le,he,ve,xe){sr[vo++]=le,sr[vo++]=he,sr[vo++]=ve,sr[vo++]=xe,Bc|=xe,le.lanes|=xe,le=le.alternate,le!==null&&(le.lanes|=xe)}function Wo(le,he,ve,xe){return Il(le,he,ve,xe),Jo(le)}function ja(le,he){return Il(le,null,null,he),Jo(le)}function kc(le,he,ve){le.lanes|=ve;var xe=le.alternate;xe!==null&&(xe.lanes|=ve);for(var we=!1,Oe=le.return;Oe!==null;)Oe.childLanes|=ve,xe=Oe.alternate,xe!==null&&(xe.childLanes|=ve),Oe.tag===22&&(le=Oe.stateNode,le===null||le._visibility&1||(we=!0)),le=Oe,Oe=Oe.return;return le.tag===3?(Oe=le.stateNode,we&&he!==null&&(we=31-tt(ve),le=Oe.hiddenUpdates,xe=le[we],xe===null?le[we]=[he]:xe.push(he),he.lane=ve|536870912),Oe):null}function Jo(le){if(50<Lo)throw Lo=0,Bo=null,Error(Z(185));for(var he=le.return;he!==null;)le=he,he=le.return;return le.tag===3?le.stateNode:null}var Ga={};function fd(le,he,ve,xe){this.tag=le,this.key=ve,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=he,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=xe,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(le,he,ve,xe){return new fd(le,he,ve,xe)}function Or(le){return le=le.prototype,!(!le||!le.isReactComponent)}function Vs(le,he){var ve=le.alternate;return ve===null?(ve=Rr(le.tag,he,le.key,le.mode),ve.elementType=le.elementType,ve.type=le.type,ve.stateNode=le.stateNode,ve.alternate=le,le.alternate=ve):(ve.pendingProps=he,ve.type=le.type,ve.flags=0,ve.subtreeFlags=0,ve.deletions=null),ve.flags=le.flags&65011712,ve.childLanes=le.childLanes,ve.lanes=le.lanes,ve.child=le.child,ve.memoizedProps=le.memoizedProps,ve.memoizedState=le.memoizedState,ve.updateQueue=le.updateQueue,he=le.dependencies,ve.dependencies=he===null?null:{lanes:he.lanes,firstContext:he.firstContext},ve.sibling=le.sibling,ve.index=le.index,ve.ref=le.ref,ve.refCleanup=le.refCleanup,ve}function br(le,he){le.flags&=65011714;var ve=le.alternate;return ve===null?(le.childLanes=0,le.lanes=he,le.child=null,le.subtreeFlags=0,le.memoizedProps=null,le.memoizedState=null,le.updateQueue=null,le.dependencies=null,le.stateNode=null):(le.childLanes=ve.childLanes,le.lanes=ve.lanes,le.child=ve.child,le.subtreeFlags=0,le.deletions=null,le.memoizedProps=ve.memoizedProps,le.memoizedState=ve.memoizedState,le.updateQueue=ve.updateQueue,le.type=ve.type,he=ve.dependencies,le.dependencies=he===null?null:{lanes:he.lanes,firstContext:he.firstContext}),le}function zl(le,he,ve,xe,we,Oe){var Ie=0;if(xe=le,typeof le=="function")Or(le)&&(Ie=1);else if(typeof le=="string")Ie=Sp(le,ve,ot.current)?26:le==="html"||le==="head"||le==="body"?27:5;else e:switch(le){case Te:return le=Rr(31,ve,he,we),le.elementType=Te,le.lanes=Oe,le;case de:return ua(ve.children,we,Oe,he);case me:Ie=8,we|=24;break;case fe:return le=Rr(12,ve,he,we|2),le.elementType=fe,le.lanes=Oe,le;case Se:return le=Rr(13,ve,he,we),le.elementType=Se,le.lanes=Oe,le;case Ce:return le=Rr(19,ve,he,we),le.elementType=Ce,le.lanes=Oe,le;default:if(typeof le=="object"&&le!==null)switch(le.$$typeof){case ye:Ie=10;break e;case _e:Ie=9;break e;case be:Ie=11;break e;case Me:Ie=14;break e;case Re:Ie=16,xe=null;break e}Ie=29,ve=Error(Z(130,le===null?"null":typeof le,"")),xe=null}return he=Rr(Ie,ve,he,we),he.elementType=le,he.type=xe,he.lanes=Oe,he}function ua(le,he,ve,xe){return le=Rr(7,le,xe,he),le.lanes=ve,le}function Uc(le,he,ve){return le=Rr(6,le,null,he),le.lanes=ve,le}function pd(le){var he=Rr(18,null,null,0);return he.stateNode=le,he}function Es(le,he,ve){return he=Rr(4,le.children!==null?le.children:[],le.key,he),he.lanes=ve,he.stateNode={containerInfo:le.containerInfo,pendingChildren:null,implementation:le.implementation},he}var Yu=new WeakMap;function Fr(le,he){if(typeof le=="object"&&le!==null){var ve=Yu.get(le);return ve!==void 0?ve:(he={value:le,source:he,stack:Lt(he)},Yu.set(le,he),he)}return{value:le,source:he,stack:Lt(he)}}var Ts=[],_o=0,Fl=null,Ko=0,Zr=[],Vr=0,js=null,Gs=1,Hs="";function ha(le,he){Ts[_o++]=Ko,Ts[_o++]=Fl,Fl=le,Ko=he}function Xu(le,he,ve){Zr[Vr++]=Gs,Zr[Vr++]=Hs,Zr[Vr++]=js,js=le;var xe=Gs;le=Hs;var we=32-tt(xe)-1;xe&=~(1<<we),ve+=1;var Oe=32-tt(he)+we;if(30<Oe){var Ie=we-we%5;Oe=(xe&(1<<Ie)-1).toString(32),xe>>=Ie,we-=Ie,Gs=1<<32-tt(he)+we|ve<<we|xe,Hs=Oe+le}else Gs=1<<Oe|ve<<we|xe,Hs=le}function Ic(le){le.return!==null&&(ha(le,1),Xu(le,1,0))}function Ha(le){for(;le===Fl;)Fl=Ts[--_o],Ts[_o]=null,Ko=Ts[--_o],Ts[_o]=null;for(;le===js;)js=Zr[--Vr],Zr[Vr]=null,Hs=Zr[--Vr],Zr[Vr]=null,Gs=Zr[--Vr],Zr[Vr]=null}function Vl(le,he){Zr[Vr++]=Gs,Zr[Vr++]=Hs,Zr[Vr++]=js,Gs=he.id,Hs=he.overflow,js=le}var ar=null,An=null,$i=!1,da=null,or=!1,zc=Error(Z(519));function Xi(le){var he=Error(Z(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw jl(Fr(he,le)),zc}function Fc(le){var he=le.stateNode,ve=le.type,xe=le.memoizedProps;switch(he[ki]=le,he[On]=xe,ve){case"dialog":Wi("cancel",he),Wi("close",he);break;case"iframe":case"object":case"embed":Wi("load",he);break;case"video":case"audio":for(ve=0;ve<zh.length;ve++)Wi(zh[ve],he);break;case"source":Wi("error",he);break;case"img":case"image":case"link":Wi("error",he),Wi("load",he);break;case"details":Wi("toggle",he);break;case"input":Wi("invalid",he),bn(he,xe.value,xe.defaultValue,xe.checked,xe.defaultChecked,xe.type,xe.name,!0);break;case"select":Wi("invalid",he);break;case"textarea":Wi("invalid",he),kn(he,xe.value,xe.defaultValue,xe.children)}ve=xe.children,typeof ve!="string"&&typeof ve!="number"&&typeof ve!="bigint"||he.textContent===""+ve||xe.suppressHydrationWarning===!0||l0(he.textContent,ve)?(xe.popover!=null&&(Wi("beforetoggle",he),Wi("toggle",he)),xe.onScroll!=null&&Wi("scroll",he),xe.onScrollEnd!=null&&Wi("scrollend",he),xe.onClick!=null&&(he.onclick=Is),he=!0):he=!1,he||Xi(le,!0)}function md(le){for(ar=le.return;ar;)switch(ar.tag){case 5:case 31:case 13:or=!1;return;case 27:case 3:or=!0;return;default:ar=ar.return}}function yo(le){if(le!==ar)return!1;if(!$i)return md(le),$i=!0,!1;var he=le.tag,ve;if((ve=he!==3&&he!==27)&&((ve=he===5)&&(ve=le.type,ve=!(ve!=="form"&&ve!=="button")||Lf(le.type,le.memoizedProps)),ve=!ve),ve&&An&&Xi(le),md(le),he===13){if(le=le.memoizedState,le=le!==null?le.dehydrated:null,!le)throw Error(Z(317));An=v0(le)}else if(he===31){if(le=le.memoizedState,le=le!==null?le.dehydrated:null,!le)throw Error(Z(317));An=v0(le)}else he===27?(he=An,gl(le.type)?(le=zf,zf=null,An=le):An=he):An=ar?ta(le.stateNode.nextSibling):null;return!0}function bo(){An=ar=null,$i=!1}function qu(){var le=da;return le!==null&&(Er===null?Er=le:Er.push.apply(Er,le),da=null),le}function jl(le){da===null?da=[le]:da.push(le)}var $u=ze(null),fa=null,xr=null;function pa(le,he,ve){et($u,he._currentValue),he._currentValue=ve}function gs(le){le._currentValue=$u.current,qe($u)}function ma(le,he,ve){for(;le!==null;){var xe=le.alternate;if((le.childLanes&he)!==he?(le.childLanes|=he,xe!==null&&(xe.childLanes|=he)):xe!==null&&(xe.childLanes&he)!==he&&(xe.childLanes|=he),le===ve)break;le=le.return}}function Vc(le,he,ve,xe){var we=le.child;for(we!==null&&(we.return=le);we!==null;){var Oe=we.dependencies;if(Oe!==null){var Ie=we.child;Oe=Oe.firstContext;e:for(;Oe!==null;){var We=Oe;Oe=we;for(var at=0;at<he.length;at++)if(We.context===he[at]){Oe.lanes|=ve,We=Oe.alternate,We!==null&&(We.lanes|=ve),ma(Oe.return,ve,le),xe||(Ie=null);break e}Oe=We.next}}else if(we.tag===18){if(Ie=we.return,Ie===null)throw Error(Z(341));Ie.lanes|=ve,Oe=Ie.alternate,Oe!==null&&(Oe.lanes|=ve),ma(Ie,ve,le),Ie=null}else Ie=we.child;if(Ie!==null)Ie.return=we;else for(Ie=we;Ie!==null;){if(Ie===le){Ie=null;break}if(we=Ie.sibling,we!==null){we.return=Ie.return,Ie=we;break}Ie=Ie.return}we=Ie}}function Ya(le,he,ve,xe){le=null;for(var we=he,Oe=!1;we!==null;){if(!Oe){if((we.flags&524288)!==0)Oe=!0;else if((we.flags&262144)!==0)break}if(we.tag===10){var Ie=we.alternate;if(Ie===null)throw Error(Z(387));if(Ie=Ie.memoizedProps,Ie!==null){var We=we.type;wn(we.pendingProps.value,Ie.value)||(le!==null?le.push(We):le=[We])}}else if(we===lt.current){if(Ie=we.alternate,Ie===null)throw Error(Z(387));Ie.memoizedState.memoizedState!==we.memoizedState.memoizedState&&(le!==null?le.push(Hh):le=[Hh])}we=we.return}le!==null&&Vc(he,le,ve,xe),he.flags|=262144}function Zo(le){for(le=le.firstContext;le!==null;){if(!wn(le.context._currentValue,le.memoizedValue))return!0;le=le.next}return!1}function xo(le){fa=le,xr=null,le=le.dependencies,le!==null&&(le.firstContext=null)}function lr(le){return Wu(fa,le)}function Gl(le,he){return fa===null&&xo(le),Wu(le,he)}function Wu(le,he){var ve=he._currentValue;if(he={context:he,memoizedValue:ve,next:null},xr===null){if(le===null)throw Error(Z(308));xr=he,le.dependencies={lanes:0,firstContext:he},le.flags|=524288}else xr=xr.next=he;return ve}var gd=typeof AbortController<"u"?AbortController:function(){var le=[],he=this.signal={aborted:!1,addEventListener:function(ve,xe){le.push(xe)}};this.abort=function(){he.aborted=!0,le.forEach(function(ve){return ve()})}},vd=G.unstable_scheduleCallback,Ju=G.unstable_NormalPriority,Ci={$$typeof:ye,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ku(){return{controller:new gd,data:new Map,refCount:0}}function dr(le){le.refCount--,le.refCount===0&&vd(Ju,function(){le.controller.abort()})}var Ao=null,Zu=0,ga=0,ws=null;function Qo(le,he){if(Ao===null){var ve=Ao=[];Zu=0,ga=Mf(),ws={status:"pending",value:void 0,then:function(xe){ve.push(xe)}}}return Zu++,he.then(Qu,Qu),he}function Qu(){if(--Zu===0&&Ao!==null){ws!==null&&(ws.status="fulfilled");var le=Ao;Ao=null,ga=0,ws=null;for(var he=0;he<le.length;he++)(0,le[he])()}}function eh(le,he){var ve=[],xe={status:"pending",value:null,reason:null,then:function(we){ve.push(we)}};return le.then(function(){xe.status="fulfilled",xe.value=he;for(var we=0;we<ve.length;we++)(0,ve[we])(he)},function(we){for(xe.status="rejected",xe.reason=we,we=0;we<ve.length;we++)(0,ve[we])(void 0)}),xe}var _d=ke.S;ke.S=function(le,he){fl=He(),typeof he=="object"&&he!==null&&typeof he.then=="function"&&Qo(le,he),_d!==null&&_d(le,he)};var Xa=ze(null);function Ys(){var le=Xa.current;return le!==null?le:cn.pooledCache}function el(le,he){he===null?et(Xa,Xa.current):et(Xa,he.pool)}function Gc(){var le=Ys();return le===null?null:{parent:Ci._currentValue,pool:le}}var qa=Error(Z(460)),Hl=Error(Z(474)),Ps=Error(Z(542)),Yl={then:function(){}};function yd(le){return le=le.status,le==="fulfilled"||le==="rejected"}function th(le,he,ve){switch(ve=le[ve],ve===void 0?le.push(he):ve!==he&&(he.then(Is,Is),he=ve),he.status){case"fulfilled":return he.value;case"rejected":throw le=he.reason,ih(le),le;default:if(typeof he.status=="string")he.then(Is,Is);else{if(le=cn,le!==null&&100<le.shellSuspendCounter)throw Error(Z(482));le=he,le.status="pending",le.then(function(xe){if(he.status==="pending"){var we=he;we.status="fulfilled",we.value=xe}},function(xe){if(he.status==="pending"){var we=he;we.status="rejected",we.reason=xe}})}switch(he.status){case"fulfilled":return he.value;case"rejected":throw le=he.reason,ih(le),le}throw Pi=he,qa}}function So(le){try{var he=le._init;return he(le._payload)}catch(ve){throw ve!==null&&typeof ve=="object"&&typeof ve.then=="function"?(Pi=ve,qa):ve}}var Pi=null;function Hc(){if(Pi===null)throw Error(Z(459));var le=Pi;return Pi=null,le}function ih(le){if(le===qa||le===Ps)throw Error(Z(483))}var $a=null,Wa=0;function Yc(le){var he=Wa;return Wa+=1,$a===null&&($a=[]),th($a,le,he)}function Xl(le,he){he=he.props.ref,le.ref=he!==void 0?he:null}function ql(le,he){throw he.$$typeof===ae?Error(Z(525)):(le=Object.prototype.toString.call(he),Error(Z(31,le==="[object Object]"?"object with keys {"+Object.keys(he).join(", ")+"}":le)))}function tl(le){function he(bt,ht){if(le){var Ct=bt.deletions;Ct===null?(bt.deletions=[ht],bt.flags|=16):Ct.push(ht)}}function ve(bt,ht){if(!le)return null;for(;ht!==null;)he(bt,ht),ht=ht.sibling;return null}function xe(bt){for(var ht=new Map;bt!==null;)bt.key!==null?ht.set(bt.key,bt):ht.set(bt.index,bt),bt=bt.sibling;return ht}function we(bt,ht){return bt=Vs(bt,ht),bt.index=0,bt.sibling=null,bt}function Oe(bt,ht,Ct){return bt.index=Ct,le?(Ct=bt.alternate,Ct!==null?(Ct=Ct.index,Ct<ht?(bt.flags|=67108866,ht):Ct):(bt.flags|=67108866,ht)):(bt.flags|=1048576,ht)}function Ie(bt){return le&&bt.alternate===null&&(bt.flags|=67108866),bt}function We(bt,ht,Ct,Xt){return ht===null||ht.tag!==6?(ht=Uc(Ct,bt.mode,Xt),ht.return=bt,ht):(ht=we(ht,Ct),ht.return=bt,ht)}function at(bt,ht,Ct,Xt){var wi=Ct.type;return wi===de?Vt(bt,ht,Ct.props.children,Xt,Ct.key):ht!==null&&(ht.elementType===wi||typeof wi=="object"&&wi!==null&&wi.$$typeof===Re&&So(wi)===ht.type)?(ht=we(ht,Ct.props),Xl(ht,Ct),ht.return=bt,ht):(ht=zl(Ct.type,Ct.key,Ct.props,null,bt.mode,Xt),Xl(ht,Ct),ht.return=bt,ht)}function Mt(bt,ht,Ct,Xt){return ht===null||ht.tag!==4||ht.stateNode.containerInfo!==Ct.containerInfo||ht.stateNode.implementation!==Ct.implementation?(ht=Es(Ct,bt.mode,Xt),ht.return=bt,ht):(ht=we(ht,Ct.children||[]),ht.return=bt,ht)}function Vt(bt,ht,Ct,Xt,wi){return ht===null||ht.tag!==7?(ht=ua(Ct,bt.mode,Xt,wi),ht.return=bt,ht):(ht=we(ht,Ct),ht.return=bt,ht)}function $t(bt,ht,Ct){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return ht=Uc(""+ht,bt.mode,Ct),ht.return=bt,ht;if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case ce:return Ct=zl(ht.type,ht.key,ht.props,null,bt.mode,Ct),Xl(Ct,ht),Ct.return=bt,Ct;case ue:return ht=Es(ht,bt.mode,Ct),ht.return=bt,ht;case Re:return ht=So(ht),$t(bt,ht,Ct)}if(Ye(ht)||Le(ht))return ht=ua(ht,bt.mode,Ct,null),ht.return=bt,ht;if(typeof ht.then=="function")return $t(bt,Yc(ht),Ct);if(ht.$$typeof===ye)return $t(bt,Gl(bt,ht),Ct);ql(bt,ht)}return null}function Ot(bt,ht,Ct,Xt){var wi=ht!==null?ht.key:null;if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number"||typeof Ct=="bigint")return wi!==null?null:We(bt,ht,""+Ct,Xt);if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case ce:return Ct.key===wi?at(bt,ht,Ct,Xt):null;case ue:return Ct.key===wi?Mt(bt,ht,Ct,Xt):null;case Re:return Ct=So(Ct),Ot(bt,ht,Ct,Xt)}if(Ye(Ct)||Le(Ct))return wi!==null?null:Vt(bt,ht,Ct,Xt,null);if(typeof Ct.then=="function")return Ot(bt,ht,Yc(Ct),Xt);if(Ct.$$typeof===ye)return Ot(bt,ht,Gl(bt,Ct),Xt);ql(bt,Ct)}return null}function Bt(bt,ht,Ct,Xt,wi){if(typeof Xt=="string"&&Xt!==""||typeof Xt=="number"||typeof Xt=="bigint")return bt=bt.get(Ct)||null,We(ht,bt,""+Xt,wi);if(typeof Xt=="object"&&Xt!==null){switch(Xt.$$typeof){case ce:return bt=bt.get(Xt.key===null?Ct:Xt.key)||null,at(ht,bt,Xt,wi);case ue:return bt=bt.get(Xt.key===null?Ct:Xt.key)||null,Mt(ht,bt,Xt,wi);case Re:return Xt=So(Xt),Bt(bt,ht,Ct,Xt,wi)}if(Ye(Xt)||Le(Xt))return bt=bt.get(Ct)||null,Vt(ht,bt,Xt,wi,null);if(typeof Xt.then=="function")return Bt(bt,ht,Ct,Yc(Xt),wi);if(Xt.$$typeof===ye)return Bt(bt,ht,Ct,Gl(ht,Xt),wi);ql(ht,Xt)}return null}function yi(bt,ht,Ct,Xt){for(var wi=null,hn=null,xi=ht,ji=ht=0,en=null;xi!==null&&ji<Ct.length;ji++){xi.index>ji?(en=xi,xi=null):en=xi.sibling;var dn=Ot(bt,xi,Ct[ji],Xt);if(dn===null){xi===null&&(xi=en);break}le&&xi&&dn.alternate===null&&he(bt,xi),ht=Oe(dn,ht,ji),hn===null?wi=dn:hn.sibling=dn,hn=dn,xi=en}if(ji===Ct.length)return ve(bt,xi),$i&&ha(bt,ji),wi;if(xi===null){for(;ji<Ct.length;ji++)xi=$t(bt,Ct[ji],Xt),xi!==null&&(ht=Oe(xi,ht,ji),hn===null?wi=xi:hn.sibling=xi,hn=xi);return $i&&ha(bt,ji),wi}for(xi=xe(xi);ji<Ct.length;ji++)en=Bt(xi,bt,ji,Ct[ji],Xt),en!==null&&(le&&en.alternate!==null&&xi.delete(en.key===null?ji:en.key),ht=Oe(en,ht,ji),hn===null?wi=en:hn.sibling=en,hn=en);return le&&xi.forEach(function(xl){return he(bt,xl)}),$i&&ha(bt,ji),wi}function Ri(bt,ht,Ct,Xt){if(Ct==null)throw Error(Z(151));for(var wi=null,hn=null,xi=ht,ji=ht=0,en=null,dn=Ct.next();xi!==null&&!dn.done;ji++,dn=Ct.next()){xi.index>ji?(en=xi,xi=null):en=xi.sibling;var xl=Ot(bt,xi,dn.value,Xt);if(xl===null){xi===null&&(xi=en);break}le&&xi&&xl.alternate===null&&he(bt,xi),ht=Oe(xl,ht,ji),hn===null?wi=xl:hn.sibling=xl,hn=xl,xi=en}if(dn.done)return ve(bt,xi),$i&&ha(bt,ji),wi;if(xi===null){for(;!dn.done;ji++,dn=Ct.next())dn=$t(bt,dn.value,Xt),dn!==null&&(ht=Oe(dn,ht,ji),hn===null?wi=dn:hn.sibling=dn,hn=dn);return $i&&ha(bt,ji),wi}for(xi=xe(xi);!dn.done;ji++,dn=Ct.next())dn=Bt(xi,bt,ji,dn.value,Xt),dn!==null&&(le&&dn.alternate!==null&&xi.delete(dn.key===null?ji:dn.key),ht=Oe(dn,ht,ji),hn===null?wi=dn:hn.sibling=dn,hn=dn);return le&&xi.forEach(function(Lp){return he(bt,Lp)}),$i&&ha(bt,ji),wi}function Mn(bt,ht,Ct,Xt){if(typeof Ct=="object"&&Ct!==null&&Ct.type===de&&Ct.key===null&&(Ct=Ct.props.children),typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case ce:e:{for(var wi=Ct.key;ht!==null;){if(ht.key===wi){if(wi=Ct.type,wi===de){if(ht.tag===7){ve(bt,ht.sibling),Xt=we(ht,Ct.props.children),Xt.return=bt,bt=Xt;break e}}else if(ht.elementType===wi||typeof wi=="object"&&wi!==null&&wi.$$typeof===Re&&So(wi)===ht.type){ve(bt,ht.sibling),Xt=we(ht,Ct.props),Xl(Xt,Ct),Xt.return=bt,bt=Xt;break e}ve(bt,ht);break}else he(bt,ht);ht=ht.sibling}Ct.type===de?(Xt=ua(Ct.props.children,bt.mode,Xt,Ct.key),Xt.return=bt,bt=Xt):(Xt=zl(Ct.type,Ct.key,Ct.props,null,bt.mode,Xt),Xl(Xt,Ct),Xt.return=bt,bt=Xt)}return Ie(bt);case ue:e:{for(wi=Ct.key;ht!==null;){if(ht.key===wi)if(ht.tag===4&&ht.stateNode.containerInfo===Ct.containerInfo&&ht.stateNode.implementation===Ct.implementation){ve(bt,ht.sibling),Xt=we(ht,Ct.children||[]),Xt.return=bt,bt=Xt;break e}else{ve(bt,ht);break}else he(bt,ht);ht=ht.sibling}Xt=Es(Ct,bt.mode,Xt),Xt.return=bt,bt=Xt}return Ie(bt);case Re:return Ct=So(Ct),Mn(bt,ht,Ct,Xt)}if(Ye(Ct))return yi(bt,ht,Ct,Xt);if(Le(Ct)){if(wi=Le(Ct),typeof wi!="function")throw Error(Z(150));return Ct=wi.call(Ct),Ri(bt,ht,Ct,Xt)}if(typeof Ct.then=="function")return Mn(bt,ht,Yc(Ct),Xt);if(Ct.$$typeof===ye)return Mn(bt,ht,Gl(bt,Ct),Xt);ql(bt,Ct)}return typeof Ct=="string"&&Ct!==""||typeof Ct=="number"||typeof Ct=="bigint"?(Ct=""+Ct,ht!==null&&ht.tag===6?(ve(bt,ht.sibling),Xt=we(ht,Ct),Xt.return=bt,bt=Xt):(ve(bt,ht),Xt=Uc(Ct,bt.mode,Xt),Xt.return=bt,bt=Xt),Ie(bt)):ve(bt,ht)}return function(bt,ht,Ct,Xt){try{Wa=0;var wi=Mn(bt,ht,Ct,Xt);return $a=null,wi}catch(xi){if(xi===qa||xi===Ps)throw xi;var hn=Rr(29,xi,null,bt.mode);return hn.lanes=Xt,hn.return=bt,hn}finally{}}}var Co=tl(!0),bd=tl(!1),Ja=!1;function nh(le){le.updateQueue={baseState:le.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rh(le,he){le=le.updateQueue,he.updateQueue===le&&(he.updateQueue={baseState:le.baseState,firstBaseUpdate:le.firstBaseUpdate,lastBaseUpdate:le.lastBaseUpdate,shared:le.shared,callbacks:null})}function Xs(le){return{lane:le,tag:0,payload:null,callback:null,next:null}}function va(le,he,ve){var xe=le.updateQueue;if(xe===null)return null;if(xe=xe.shared,(Zi&2)!==0){var we=xe.pending;return we===null?he.next=he:(he.next=we.next,we.next=he),xe.pending=he,he=Jo(le),kc(le,null,ve),he}return Il(le,xe,he,ve),Jo(le)}function Ka(le,he,ve){if(he=he.updateQueue,he!==null&&(he=he.shared,(ve&4194048)!==0)){var xe=he.lanes;xe&=le.pendingLanes,ve|=xe,he.lanes=ve,Ln(le,ve)}}function Xc(le,he){var ve=le.updateQueue,xe=le.alternate;if(xe!==null&&(xe=xe.updateQueue,ve===xe)){var we=null,Oe=null;if(ve=ve.firstBaseUpdate,ve!==null){do{var Ie={lane:ve.lane,tag:ve.tag,payload:ve.payload,callback:null,next:null};Oe===null?we=Oe=Ie:Oe=Oe.next=Ie,ve=ve.next}while(ve!==null);Oe===null?we=Oe=he:Oe=Oe.next=he}else we=Oe=he;ve={baseState:xe.baseState,firstBaseUpdate:we,lastBaseUpdate:Oe,shared:xe.shared,callbacks:xe.callbacks},le.updateQueue=ve;return}le=ve.lastBaseUpdate,le===null?ve.firstBaseUpdate=he:le.next=he,ve.lastBaseUpdate=he}var sh=!1;function $l(){if(sh){var le=ws;if(le!==null)throw le}}function Mo(le,he,ve,xe){sh=!1;var we=le.updateQueue;Ja=!1;var Oe=we.firstBaseUpdate,Ie=we.lastBaseUpdate,We=we.shared.pending;if(We!==null){we.shared.pending=null;var at=We,Mt=at.next;at.next=null,Ie===null?Oe=Mt:Ie.next=Mt,Ie=at;var Vt=le.alternate;Vt!==null&&(Vt=Vt.updateQueue,We=Vt.lastBaseUpdate,We!==Ie&&(We===null?Vt.firstBaseUpdate=Mt:We.next=Mt,Vt.lastBaseUpdate=at))}if(Oe!==null){var $t=we.baseState;Ie=0,Vt=Mt=at=null,We=Oe;do{var Ot=We.lane&-536870913,Bt=Ot!==We.lane;if(Bt?(qi&Ot)===Ot:(xe&Ot)===Ot){Ot!==0&&Ot===ga&&(sh=!0),Vt!==null&&(Vt=Vt.next={lane:0,tag:We.tag,payload:We.payload,callback:null,next:null});e:{var yi=le,Ri=We;Ot=he;var Mn=ve;switch(Ri.tag){case 1:if(yi=Ri.payload,typeof yi=="function"){$t=yi.call(Mn,$t,Ot);break e}$t=yi;break e;case 3:yi.flags=yi.flags&-65537|128;case 0:if(yi=Ri.payload,Ot=typeof yi=="function"?yi.call(Mn,$t,Ot):yi,Ot==null)break e;$t=se({},$t,Ot);break e;case 2:Ja=!0}}Ot=We.callback,Ot!==null&&(le.flags|=64,Bt&&(le.flags|=8192),Bt=we.callbacks,Bt===null?we.callbacks=[Ot]:Bt.push(Ot))}else Bt={lane:Ot,tag:We.tag,payload:We.payload,callback:We.callback,next:null},Vt===null?(Mt=Vt=Bt,at=$t):Vt=Vt.next=Bt,Ie|=Ot;if(We=We.next,We===null){if(We=we.shared.pending,We===null)break;Bt=We,We=Bt.next,Bt.next=null,we.lastBaseUpdate=Bt,we.shared.pending=null}}while(!0);Vt===null&&(at=$t),we.baseState=at,we.firstBaseUpdate=Mt,we.lastBaseUpdate=Vt,Oe===null&&(we.shared.lanes=0),hs|=Ie,le.lanes=Ie,le.memoizedState=$t}}function qs(le,he){if(typeof le!="function")throw Error(Z(191,le));le.call(he)}function fr(le,he){var ve=le.callbacks;if(ve!==null)for(le.callbacks=null,le=0;le<ve.length;le++)qs(ve[le],he)}var Qr=ze(null),Nr=ze(0);function ah(le,he){le=qn,et(Nr,le),et(Qr,he),qn=le|he.baseLanes}function oh(){et(Nr,qn),et(Qr,Qr.current)}function Ar(){qn=Nr.current,qe(Qr),qe(Nr)}var ir=ze(null),vs=null;function Za(le){var he=le.alternate;et(Un,Un.current&1),et(ir,le),vs===null&&(he===null||Qr.current!==null||he.memoizedState!==null)&&(vs=le)}function lh(le){et(Un,Un.current),et(ir,le),vs===null&&(vs=le)}function xd(le){le.tag===22?(et(Un,Un.current),et(ir,le),vs===null&&(vs=le)):_a()}function _a(){et(Un,Un.current),et(ir,ir.current)}function es(le){qe(ir),vs===le&&(vs=null),qe(Un)}var Un=ze(0);function qc(le){for(var he=le;he!==null;){if(he.tag===13){var ve=he.memoizedState;if(ve!==null&&(ve=ve.dehydrated,ve===null||Uf(ve)||If(ve)))return he}else if(he.tag===19&&(he.memoizedProps.revealOrder==="forwards"||he.memoizedProps.revealOrder==="backwards"||he.memoizedProps.revealOrder==="unstable_legacy-backwards"||he.memoizedProps.revealOrder==="together")){if((he.flags&128)!==0)return he}else if(he.child!==null){he.child.return=he,he=he.child;continue}if(he===le)break;for(;he.sibling===null;){if(he.return===null||he.return===le)return null;he=he.return}he.sibling.return=he.return,he=he.sibling}return null}var jr=0,Oi=null,mn=null,Jn=null,$c=!1,$s=!1,Eo=!1,Wc=0,Wl=0,Ws=null,mf=0;function In(){throw Error(Z(321))}function uh(le,he){if(he===null)return!1;for(var ve=0;ve<he.length&&ve<le.length;ve++)if(!wn(le[ve],he[ve]))return!1;return!0}function hh(le,he,ve,xe,we,Oe){return jr=Oe,Oi=he,he.memoizedState=null,he.updateQueue=null,he.lanes=0,ke.H=le===null||le.memoizedState===null?Vd:rl,Eo=!1,Oe=ve(xe,we),Eo=!1,$s&&(Oe=Sd(he,ve,xe,we)),Ad(le),Oe}function Ad(le){ke.H=ec;var he=mn!==null&&mn.next!==null;if(jr=0,Jn=mn=Oi=null,$c=!1,Wl=0,Ws=null,he)throw Error(Z(300));le===null||Pn||(le=le.dependencies,le!==null&&Zo(le)&&(Pn=!0))}function Sd(le,he,ve,xe){Oi=le;var we=0;do{if($s&&(Ws=null),Wl=0,$s=!1,25<=we)throw Error(Z(301));if(we+=1,Jn=mn=null,le.updateQueue!=null){var Oe=le.updateQueue;Oe.lastEffect=null,Oe.events=null,Oe.stores=null,Oe.memoCache!=null&&(Oe.memoCache.index=0)}ke.H=tc,Oe=he(ve,xe)}while($s);return Oe}function gf(){var le=ke.H,he=le.useState()[0];return he=typeof he.then=="function"?Kl(he):he,le=le.useState()[0],(mn!==null?mn.memoizedState:null)!==le&&(Oi.flags|=1024),he}function dh(){var le=Wc!==0;return Wc=0,le}function fh(le,he,ve){he.updateQueue=le.updateQueue,he.flags&=-2053,le.lanes&=~ve}function ph(le){if($c){for(le=le.memoizedState;le!==null;){var he=le.queue;he!==null&&(he.pending=null),le=le.next}$c=!1}jr=0,Jn=mn=Oi=null,$s=!1,Wl=Wc=0,Ws=null}function Dr(){var le={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jn===null?Oi.memoizedState=Jn=le:Jn=Jn.next=le,Jn}function Gn(){if(mn===null){var le=Oi.alternate;le=le!==null?le.memoizedState:null}else le=mn.next;var he=Jn===null?Oi.memoizedState:Jn.next;if(he!==null)Jn=he,mn=le;else{if(le===null)throw Oi.alternate===null?Error(Z(467)):Error(Z(310));mn=le,le={memoizedState:mn.memoizedState,baseState:mn.baseState,baseQueue:mn.baseQueue,queue:mn.queue,next:null},Jn===null?Oi.memoizedState=Jn=le:Jn=Jn.next=le}return Jn}function Jl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kl(le){var he=Wl;return Wl+=1,Ws===null&&(Ws=[]),le=th(Ws,le,he),he=Oi,(Jn===null?he.memoizedState:Jn.next)===null&&(he=he.alternate,ke.H=he===null||he.memoizedState===null?Vd:rl),le}function Jc(le){if(le!==null&&typeof le=="object"){if(typeof le.then=="function")return Kl(le);if(le.$$typeof===ye)return lr(le)}throw Error(Z(438,String(le)))}function mh(le){var he=null,ve=Oi.updateQueue;if(ve!==null&&(he=ve.memoCache),he==null){var xe=Oi.alternate;xe!==null&&(xe=xe.updateQueue,xe!==null&&(xe=xe.memoCache,xe!=null&&(he={data:xe.data.map(function(we){return we.slice()}),index:0})))}if(he==null&&(he={data:[],index:0}),ve===null&&(ve=Jl(),Oi.updateQueue=ve),ve.memoCache=he,ve=he.data[he.index],ve===void 0)for(ve=he.data[he.index]=Array(le),xe=0;xe<le;xe++)ve[xe]=Ee;return he.index++,ve}function ya(le,he){return typeof he=="function"?he(le):he}function Kc(le){var he=Gn();return gh(he,mn,le)}function gh(le,he,ve){var xe=le.queue;if(xe===null)throw Error(Z(311));xe.lastRenderedReducer=ve;var we=le.baseQueue,Oe=xe.pending;if(Oe!==null){if(we!==null){var Ie=we.next;we.next=Oe.next,Oe.next=Ie}he.baseQueue=we=Oe,xe.pending=null}if(Oe=le.baseState,we===null)le.memoizedState=Oe;else{he=we.next;var We=Ie=null,at=null,Mt=he,Vt=!1;do{var $t=Mt.lane&-536870913;if($t!==Mt.lane?(qi&$t)===$t:(jr&$t)===$t){var Ot=Mt.revertLane;if(Ot===0)at!==null&&(at=at.next={lane:0,revertLane:0,gesture:null,action:Mt.action,hasEagerState:Mt.hasEagerState,eagerState:Mt.eagerState,next:null}),$t===ga&&(Vt=!0);else if((jr&Ot)===Ot){Mt=Mt.next,Ot===ga&&(Vt=!0);continue}else $t={lane:0,revertLane:Mt.revertLane,gesture:null,action:Mt.action,hasEagerState:Mt.hasEagerState,eagerState:Mt.eagerState,next:null},at===null?(We=at=$t,Ie=Oe):at=at.next=$t,Oi.lanes|=Ot,hs|=Ot;$t=Mt.action,Eo&&ve(Oe,$t),Oe=Mt.hasEagerState?Mt.eagerState:ve(Oe,$t)}else Ot={lane:$t,revertLane:Mt.revertLane,gesture:Mt.gesture,action:Mt.action,hasEagerState:Mt.hasEagerState,eagerState:Mt.eagerState,next:null},at===null?(We=at=Ot,Ie=Oe):at=at.next=Ot,Oi.lanes|=$t,hs|=$t;Mt=Mt.next}while(Mt!==null&&Mt!==he);if(at===null?Ie=Oe:at.next=We,!wn(Oe,le.memoizedState)&&(Pn=!0,Vt&&(ve=ws,ve!==null)))throw ve;le.memoizedState=Oe,le.baseState=Ie,le.baseQueue=at,xe.lastRenderedState=Oe}return we===null&&(xe.lanes=0),[le.memoizedState,xe.dispatch]}function Zc(le){var he=Gn(),ve=he.queue;if(ve===null)throw Error(Z(311));ve.lastRenderedReducer=le;var xe=ve.dispatch,we=ve.pending,Oe=he.memoizedState;if(we!==null){ve.pending=null;var Ie=we=we.next;do Oe=le(Oe,Ie.action),Ie=Ie.next;while(Ie!==we);wn(Oe,he.memoizedState)||(Pn=!0),he.memoizedState=Oe,he.baseQueue===null&&(he.baseState=Oe),ve.lastRenderedState=Oe}return[Oe,xe]}function vh(le,he,ve){var xe=Oi,we=Gn(),Oe=$i;if(Oe){if(ve===void 0)throw Error(Z(407));ve=ve()}else ve=he();var Ie=!wn((mn||we).memoizedState,ve);if(Ie&&(we.memoizedState=ve,Pn=!0),we=we.queue,Ah(yh.bind(null,xe,we,le),[le]),we.getSnapshot!==he||Ie||Jn!==null&&Jn.memoizedState.tag&1){if(xe.flags|=2048,il(9,{destroy:void 0},_h.bind(null,xe,we,ve,he),null),cn===null)throw Error(Z(349));Oe||(jr&127)!==0||Cd(xe,he,ve)}return ve}function Cd(le,he,ve){le.flags|=16384,le={getSnapshot:he,value:ve},he=Oi.updateQueue,he===null?(he=Jl(),Oi.updateQueue=he,he.stores=[le]):(ve=he.stores,ve===null?he.stores=[le]:ve.push(le))}function _h(le,he,ve,xe){he.value=ve,he.getSnapshot=xe,bh(he)&&Qc(le)}function yh(le,he,ve){return ve(function(){bh(he)&&Qc(le)})}function bh(le){var he=le.getSnapshot;le=le.value;try{var ve=he();return!wn(le,ve)}catch{return!0}}function Qc(le){var he=ja(le,2);he!==null&&ge(he,le,2)}function Zl(le){var he=Dr();if(typeof le=="function"){var ve=le;if(le=ve(),Eo){mt(!0);try{ve()}finally{mt(!1)}}}return he.memoizedState=he.baseState=le,he.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:le},he}function Md(le,he,ve,xe){return le.baseState=ve,gh(le,mn,typeof xe=="function"?xe:ya)}function vf(le,he,ve,xe,we){if(ba(le))throw Error(Z(485));if(le=he.action,le!==null){var Oe={payload:we,action:le,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Ie){Oe.listeners.push(Ie)}};ke.T!==null?ve(!0):Oe.isTransition=!1,xe(Oe),ve=he.pending,ve===null?(Oe.next=he.pending=Oe,Ed(he,Oe)):(Oe.next=ve.next,he.pending=ve.next=Oe)}}function Ed(le,he){var ve=he.action,xe=he.payload,we=le.state;if(he.isTransition){var Oe=ke.T,Ie={};ke.T=Ie;try{var We=ve(we,xe),at=ke.S;at!==null&&at(Ie,We),Td(le,he,We)}catch(Mt){eu(le,he,Mt)}finally{Oe!==null&&Ie.types!==null&&(Oe.types=Ie.types),ke.T=Oe}}else try{Oe=ve(we,xe),Td(le,he,Oe)}catch(Mt){eu(le,he,Mt)}}function Td(le,he,ve){ve!==null&&typeof ve=="object"&&typeof ve.then=="function"?ve.then(function(xe){xh(le,he,xe)},function(xe){return eu(le,he,xe)}):xh(le,he,ve)}function xh(le,he,ve){he.status="fulfilled",he.value=ve,wd(he),le.state=ve,he=le.pending,he!==null&&(ve=he.next,ve===he?le.pending=null:(ve=ve.next,he.next=ve,Ed(le,ve)))}function eu(le,he,ve){var xe=le.pending;if(le.pending=null,xe!==null){xe=xe.next;do he.status="rejected",he.reason=ve,wd(he),he=he.next;while(he!==xe)}le.action=null}function wd(le){le=le.listeners;for(var he=0;he<le.length;he++)(0,le[he])()}function Pd(le,he){return he}function Rd(le,he){if($i){var ve=cn.formState;if(ve!==null){e:{var xe=Oi;if($i){if(An){t:{for(var we=An,Oe=or;we.nodeType!==8;){if(!Oe){we=null;break t}if(we=ta(we.nextSibling),we===null){we=null;break t}}Oe=we.data,we=Oe==="F!"||Oe==="F"?we:null}if(we){An=ta(we.nextSibling),xe=we.data==="F!";break e}}Xi(xe)}xe=!1}xe&&(he=ve[0])}}return ve=Dr(),ve.memoizedState=ve.baseState=he,xe={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pd,lastRenderedState:he},ve.queue=xe,ve=Fd.bind(null,Oi,xe),xe.dispatch=ve,xe=Zl(!1),Oe=Ql.bind(null,Oi,!1,xe.queue),xe=Dr(),we={state:he,dispatch:null,action:le,pending:null},xe.queue=we,ve=vf.bind(null,Oi,we,Oe,ve),we.dispatch=ve,xe.memoizedState=le,[he,ve,!1]}function Od(le){var he=Gn();return Nd(he,mn,le)}function Nd(le,he,ve){if(he=gh(le,he,Pd)[0],le=Kc(ya)[0],typeof he=="object"&&he!==null&&typeof he.then=="function")try{var xe=Kl(he)}catch(Ie){throw Ie===qa?Ps:Ie}else xe=he;he=Gn();var we=he.queue,Oe=we.dispatch;return ve!==he.memoizedState&&(Oi.flags|=2048,il(9,{destroy:void 0},_f.bind(null,we,ve),null)),[xe,Oe,le]}function _f(le,he){le.action=he}function Dd(le){var he=Gn(),ve=mn;if(ve!==null)return Nd(he,ve,le);Gn(),he=he.memoizedState,ve=Gn();var xe=ve.queue.dispatch;return ve.memoizedState=le,[he,xe,!1]}function il(le,he,ve,xe){return le={tag:le,create:ve,deps:xe,inst:he,next:null},he=Oi.updateQueue,he===null&&(he=Jl(),Oi.updateQueue=he),ve=he.lastEffect,ve===null?he.lastEffect=le.next=le:(xe=ve.next,ve.next=le,le.next=xe,he.lastEffect=le),le}function Ld(){return Gn().memoizedState}function tu(le,he,ve,xe){var we=Dr();Oi.flags|=le,we.memoizedState=il(1|he,{destroy:void 0},ve,xe===void 0?null:xe)}function iu(le,he,ve,xe){var we=Gn();xe=xe===void 0?null:xe;var Oe=we.memoizedState.inst;mn!==null&&xe!==null&&uh(xe,mn.memoizedState.deps)?we.memoizedState=il(he,Oe,ve,xe):(Oi.flags|=le,we.memoizedState=il(1|he,Oe,ve,xe))}function Bd(le,he){tu(8390656,8,le,he)}function Ah(le,he){iu(2048,8,le,he)}function kd(le){Oi.flags|=4;var he=Oi.updateQueue;if(he===null)he=Jl(),Oi.updateQueue=he,he.events=[le];else{var ve=he.events;ve===null?he.events=[le]:ve.push(le)}}function Ud(le){var he=Gn().memoizedState;return kd({ref:he,nextImpl:le}),function(){if((Zi&2)!==0)throw Error(Z(440));return he.impl.apply(void 0,arguments)}}function Id(le,he){return iu(4,2,le,he)}function ns(le,he){return iu(4,4,le,he)}function Sh(le,he){if(typeof he=="function"){le=le();var ve=he(le);return function(){typeof ve=="function"?ve():he(null)}}if(he!=null)return le=le(),he.current=le,function(){he.current=null}}function nu(le,he,ve){ve=ve!=null?ve.concat([le]):null,iu(4,4,Sh.bind(null,he,le),ve)}function ru(){}function Ch(le,he){var ve=Gn();he=he===void 0?null:he;var xe=ve.memoizedState;return he!==null&&uh(he,xe[1])?xe[0]:(ve.memoizedState=[le,he],le)}function Mh(le,he){var ve=Gn();he=he===void 0?null:he;var xe=ve.memoizedState;if(he!==null&&uh(he,xe[1]))return xe[0];if(xe=le(),Eo){mt(!0);try{le()}finally{mt(!1)}}return ve.memoizedState=[xe,he],xe}function Eh(le,he,ve){return ve===void 0||(jr&1073741824)!==0&&(qi&261930)===0?le.memoizedState=he:(le.memoizedState=ve,le=pe(),Oi.lanes|=le,hs|=le,ve)}function Th(le,he,ve,xe){return wn(ve,he)?ve:Qr.current!==null?(le=Eh(le,ve,xe),wn(le,he)||(Pn=!0),le):(jr&42)===0||(jr&1073741824)!==0&&(qi&261930)===0?(Pn=!0,le.memoizedState=ve):(le=pe(),Oi.lanes|=le,hs|=le,he)}function wh(le,he,ve,xe,we){var Oe=Fe.p;Fe.p=Oe!==0&&8>Oe?Oe:8;var Ie=ke.T,We={};ke.T=We,Ql(le,!1,he,ve);try{var at=we(),Mt=ke.S;if(Mt!==null&&Mt(We,at),at!==null&&typeof at=="object"&&typeof at.then=="function"){var Vt=eh(at,xe);nl(le,he,Vt,Br(le))}else nl(le,he,xe,Br(le))}catch($t){nl(le,he,{then:function(){},status:"rejected",reason:$t},Br())}finally{Fe.p=Oe,Ie!==null&&We.types!==null&&(Ie.types=We.types),ke.T=Ie}}function yf(){}function Ph(le,he,ve,xe){if(le.tag!==5)throw Error(Z(476));var we=zd(le).queue;wh(le,we,he,Ve,ve===null?yf:function(){return Rh(le),ve(xe)})}function zd(le){var he=le.memoizedState;if(he!==null)return he;he={memoizedState:Ve,baseState:Ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:Ve},next:null};var ve={};return he.next={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:ve},next:null},le.memoizedState=he,le=le.alternate,le!==null&&(le.memoizedState=he),he}function Rh(le){var he=zd(le);he.next===null&&(he=le.alternate.memoizedState),nl(le,he.next.queue,{},Br())}function Oh(){return lr(Hh)}function pr(){return Gn().memoizedState}function Nh(){return Gn().memoizedState}function bf(le){for(var he=le.return;he!==null;){switch(he.tag){case 24:case 3:var ve=Br();le=Xs(ve);var xe=va(he,le,ve);xe!==null&&(ge(xe,he,ve),Ka(xe,he,ve)),he={cache:Ku()},le.payload=he;return}he=he.return}}function xf(le,he,ve){var xe=Br();ve={lane:xe,revertLane:0,gesture:null,action:ve,hasEagerState:!1,eagerState:null,next:null},ba(le)?To(he,ve):(ve=Wo(le,he,ve,xe),ve!==null&&(ge(ve,le,xe),Gr(ve,he,xe)))}function Fd(le,he,ve){var xe=Br();nl(le,he,ve,xe)}function nl(le,he,ve,xe){var we={lane:xe,revertLane:0,gesture:null,action:ve,hasEagerState:!1,eagerState:null,next:null};if(ba(le))To(he,we);else{var Oe=le.alternate;if(le.lanes===0&&(Oe===null||Oe.lanes===0)&&(Oe=he.lastRenderedReducer,Oe!==null))try{var Ie=he.lastRenderedState,We=Oe(Ie,ve);if(we.hasEagerState=!0,we.eagerState=We,wn(We,Ie))return Il(le,he,we,0),cn===null&&Va(),!1}catch{}finally{}if(ve=Wo(le,he,we,xe),ve!==null)return ge(ve,le,xe),Gr(ve,he,xe),!0}return!1}function Ql(le,he,ve,xe){if(xe={lane:2,revertLane:Mf(),gesture:null,action:xe,hasEagerState:!1,eagerState:null,next:null},ba(le)){if(he)throw Error(Z(479))}else he=Wo(le,ve,xe,2),he!==null&&ge(he,le,2)}function ba(le){var he=le.alternate;return le===Oi||he!==null&&he===Oi}function To(le,he){$s=$c=!0;var ve=le.pending;ve===null?he.next=he:(he.next=ve.next,ve.next=he),le.pending=he}function Gr(le,he,ve){if((ve&4194048)!==0){var xe=he.lanes;xe&=le.pendingLanes,ve|=xe,he.lanes=ve,Ln(le,ve)}}var ec={readContext:lr,use:Jc,useCallback:In,useContext:In,useEffect:In,useImperativeHandle:In,useLayoutEffect:In,useInsertionEffect:In,useMemo:In,useReducer:In,useRef:In,useState:In,useDebugValue:In,useDeferredValue:In,useTransition:In,useSyncExternalStore:In,useId:In,useHostTransitionStatus:In,useFormState:In,useActionState:In,useOptimistic:In,useMemoCache:In,useCacheRefresh:In};ec.useEffectEvent=In;var Vd={readContext:lr,use:Jc,useCallback:function(le,he){return Dr().memoizedState=[le,he===void 0?null:he],le},useContext:lr,useEffect:Bd,useImperativeHandle:function(le,he,ve){ve=ve!=null?ve.concat([le]):null,tu(4194308,4,Sh.bind(null,he,le),ve)},useLayoutEffect:function(le,he){return tu(4194308,4,le,he)},useInsertionEffect:function(le,he){tu(4,2,le,he)},useMemo:function(le,he){var ve=Dr();he=he===void 0?null:he;var xe=le();if(Eo){mt(!0);try{le()}finally{mt(!1)}}return ve.memoizedState=[xe,he],xe},useReducer:function(le,he,ve){var xe=Dr();if(ve!==void 0){var we=ve(he);if(Eo){mt(!0);try{ve(he)}finally{mt(!1)}}}else we=he;return xe.memoizedState=xe.baseState=we,le={pending:null,lanes:0,dispatch:null,lastRenderedReducer:le,lastRenderedState:we},xe.queue=le,le=le.dispatch=xf.bind(null,Oi,le),[xe.memoizedState,le]},useRef:function(le){var he=Dr();return le={current:le},he.memoizedState=le},useState:function(le){le=Zl(le);var he=le.queue,ve=Fd.bind(null,Oi,he);return he.dispatch=ve,[le.memoizedState,ve]},useDebugValue:ru,useDeferredValue:function(le,he){var ve=Dr();return Eh(ve,le,he)},useTransition:function(){var le=Zl(!1);return le=wh.bind(null,Oi,le.queue,!0,!1),Dr().memoizedState=le,[!1,le]},useSyncExternalStore:function(le,he,ve){var xe=Oi,we=Dr();if($i){if(ve===void 0)throw Error(Z(407));ve=ve()}else{if(ve=he(),cn===null)throw Error(Z(349));(qi&127)!==0||Cd(xe,he,ve)}we.memoizedState=ve;var Oe={value:ve,getSnapshot:he};return we.queue=Oe,Bd(yh.bind(null,xe,Oe,le),[le]),xe.flags|=2048,il(9,{destroy:void 0},_h.bind(null,xe,Oe,ve,he),null),ve},useId:function(){var le=Dr(),he=cn.identifierPrefix;if($i){var ve=Hs,xe=Gs;ve=(xe&~(1<<32-tt(xe)-1)).toString(32)+ve,he="_"+he+"R_"+ve,ve=Wc++,0<ve&&(he+="H"+ve.toString(32)),he+="_"}else ve=mf++,he="_"+he+"r_"+ve.toString(32)+"_";return le.memoizedState=he},useHostTransitionStatus:Oh,useFormState:Rd,useActionState:Rd,useOptimistic:function(le){var he=Dr();he.memoizedState=he.baseState=le;var ve={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return he.queue=ve,he=Ql.bind(null,Oi,!0,ve),ve.dispatch=he,[le,he]},useMemoCache:mh,useCacheRefresh:function(){return Dr().memoizedState=bf.bind(null,Oi)},useEffectEvent:function(le){var he=Dr(),ve={impl:le};return he.memoizedState=ve,function(){if((Zi&2)!==0)throw Error(Z(440));return ve.impl.apply(void 0,arguments)}}},rl={readContext:lr,use:Jc,useCallback:Ch,useContext:lr,useEffect:Ah,useImperativeHandle:nu,useInsertionEffect:Id,useLayoutEffect:ns,useMemo:Mh,useReducer:Kc,useRef:Ld,useState:function(){return Kc(ya)},useDebugValue:ru,useDeferredValue:function(le,he){var ve=Gn();return Th(ve,mn.memoizedState,le,he)},useTransition:function(){var le=Kc(ya)[0],he=Gn().memoizedState;return[typeof le=="boolean"?le:Kl(le),he]},useSyncExternalStore:vh,useId:pr,useHostTransitionStatus:Oh,useFormState:Od,useActionState:Od,useOptimistic:function(le,he){var ve=Gn();return Md(ve,mn,le,he)},useMemoCache:mh,useCacheRefresh:Nh};rl.useEffectEvent=Ud;var tc={readContext:lr,use:Jc,useCallback:Ch,useContext:lr,useEffect:Ah,useImperativeHandle:nu,useInsertionEffect:Id,useLayoutEffect:ns,useMemo:Mh,useReducer:Zc,useRef:Ld,useState:function(){return Zc(ya)},useDebugValue:ru,useDeferredValue:function(le,he){var ve=Gn();return mn===null?Eh(ve,le,he):Th(ve,mn.memoizedState,le,he)},useTransition:function(){var le=Zc(ya)[0],he=Gn().memoizedState;return[typeof le=="boolean"?le:Kl(le),he]},useSyncExternalStore:vh,useId:pr,useHostTransitionStatus:Oh,useFormState:Dd,useActionState:Dd,useOptimistic:function(le,he){var ve=Gn();return mn!==null?Md(ve,mn,le,he):(ve.baseState=le,[le,ve.queue.dispatch])},useMemoCache:mh,useCacheRefresh:Nh};tc.useEffectEvent=Ud;function sl(le,he,ve,xe){he=le.memoizedState,ve=ve(xe,he),ve=ve==null?he:se({},he,ve),le.memoizedState=ve,le.lanes===0&&(le.updateQueue.baseState=ve)}var ic={enqueueSetState:function(le,he,ve){le=le._reactInternals;var xe=Br(),we=Xs(xe);we.payload=he,ve!=null&&(we.callback=ve),he=va(le,we,xe),he!==null&&(ge(he,le,xe),Ka(he,le,xe))},enqueueReplaceState:function(le,he,ve){le=le._reactInternals;var xe=Br(),we=Xs(xe);we.tag=1,we.payload=he,ve!=null&&(we.callback=ve),he=va(le,we,xe),he!==null&&(ge(he,le,xe),Ka(he,le,xe))},enqueueForceUpdate:function(le,he){le=le._reactInternals;var ve=Br(),xe=Xs(ve);xe.tag=2,he!=null&&(xe.callback=he),he=va(le,xe,ve),he!==null&&(ge(he,le,ve),Ka(he,le,ve))}};function jd(le,he,ve,xe,we,Oe,Ie){return le=le.stateNode,typeof le.shouldComponentUpdate=="function"?le.shouldComponentUpdate(xe,Oe,Ie):he.prototype&&he.prototype.isPureReactComponent?!Go(ve,xe)||!Go(we,Oe):!0}function Gd(le,he,ve,xe){le=he.state,typeof he.componentWillReceiveProps=="function"&&he.componentWillReceiveProps(ve,xe),typeof he.UNSAFE_componentWillReceiveProps=="function"&&he.UNSAFE_componentWillReceiveProps(ve,xe),he.state!==le&&ic.enqueueReplaceState(he,he.state,null)}function mr(le,he){var ve=he;if("ref"in he){ve={};for(var xe in he)xe!=="ref"&&(ve[xe]=he[xe])}if(le=le.defaultProps){ve===he&&(ve=se({},ve));for(var we in le)ve[we]===void 0&&(ve[we]=le[we])}return ve}function Dh(le){Fa(le)}function Hd(le){console.error(le)}function su(le){Fa(le)}function au(le,he){try{var ve=le.onUncaughtError;ve(he.value,{componentStack:he.stack})}catch(xe){setTimeout(function(){throw xe})}}function Yd(le,he,ve){try{var xe=le.onCaughtError;xe(ve.value,{componentStack:ve.stack,errorBoundary:he.tag===1?he.stateNode:null})}catch(we){setTimeout(function(){throw we})}}function Lh(le,he,ve){return ve=Xs(ve),ve.tag=3,ve.payload={element:null},ve.callback=function(){au(le,he)},ve}function al(le){return le=Xs(le),le.tag=3,le}function Hr(le,he,ve,xe){var we=ve.type.getDerivedStateFromError;if(typeof we=="function"){var Oe=xe.value;le.payload=function(){return we(Oe)},le.callback=function(){Yd(he,ve,xe)}}var Ie=ve.stateNode;Ie!==null&&typeof Ie.componentDidCatch=="function"&&(le.callback=function(){Yd(he,ve,xe),typeof we!="function"&&(ea===null?ea=new Set([this]):ea.add(this));var We=xe.stack;this.componentDidCatch(xe.value,{componentStack:We!==null?We:""})})}function rs(le,he,ve,xe,we){if(ve.flags|=32768,xe!==null&&typeof xe=="object"&&typeof xe.then=="function"){if(he=ve.alternate,he!==null&&Ya(he,ve,we,!0),ve=ir.current,ve!==null){switch(ve.tag){case 31:case 13:return vs===null?Li():ve.alternate===null&&un===0&&(un=3),ve.flags&=-257,ve.flags|=65536,ve.lanes=we,xe===Yl?ve.flags|=16384:(he=ve.updateQueue,he===null?ve.updateQueue=new Set([xe]):he.add(xe),Af(le,xe,we)),!1;case 22:return ve.flags|=65536,xe===Yl?ve.flags|=16384:(he=ve.updateQueue,he===null?(he={transitions:null,markerInstances:null,retryQueue:new Set([xe])},ve.updateQueue=he):(ve=he.retryQueue,ve===null?he.retryQueue=new Set([xe]):ve.add(xe)),Af(le,xe,we)),!1}throw Error(Z(435,ve.tag))}return Af(le,xe,we),Li(),!1}if($i)return he=ir.current,he!==null?((he.flags&65536)===0&&(he.flags|=256),he.flags|=65536,he.lanes=we,xe!==zc&&(le=Error(Z(422),{cause:xe}),jl(Fr(le,ve)))):(xe!==zc&&(he=Error(Z(423),{cause:xe}),jl(Fr(he,ve))),le=le.current.alternate,le.flags|=65536,we&=-we,le.lanes|=we,xe=Fr(xe,ve),we=Lh(le.stateNode,xe,we),Xc(le,we),un!==4&&(un=2)),!1;var Oe=Error(Z(520),{cause:xe});if(Oe=Fr(Oe,ve),Ls===null?Ls=[Oe]:Ls.push(Oe),un!==4&&(un=2),he===null)return!0;xe=Fr(xe,ve),ve=he;do{switch(ve.tag){case 3:return ve.flags|=65536,le=we&-we,ve.lanes|=le,le=Lh(ve.stateNode,xe,le),Xc(ve,le),!1;case 1:if(he=ve.type,Oe=ve.stateNode,(ve.flags&128)===0&&(typeof he.getDerivedStateFromError=="function"||Oe!==null&&typeof Oe.componentDidCatch=="function"&&(ea===null||!ea.has(Oe))))return ve.flags|=65536,we&=-we,ve.lanes|=we,we=al(we),Hr(we,le,ve,xe),Xc(ve,we),!1}ve=ve.return}while(ve!==null);return!1}var ou=Error(Z(461)),Pn=!1;function zn(le,he,ve,xe){he.child=le===null?bd(he,null,ve,xe):Co(he,le.child,ve,xe)}function nc(le,he,ve,xe,we){ve=ve.render;var Oe=he.ref;if("ref"in xe){var Ie={};for(var We in xe)We!=="ref"&&(Ie[We]=xe[We])}else Ie=xe;return xo(he),xe=hh(le,he,ve,Ie,Oe,we),We=dh(),le!==null&&!Pn?(fh(le,he,we),Ns(le,he,we)):($i&&We&&Ic(he),he.flags|=1,zn(le,he,xe,we),he.child)}function rc(le,he,ve,xe,we){if(le===null){var Oe=ve.type;return typeof Oe=="function"&&!Or(Oe)&&Oe.defaultProps===void 0&&ve.compare===null?(he.tag=15,he.type=Oe,ss(le,he,Oe,xe,we)):(le=zl(ve.type,null,xe,he,he.mode,we),le.ref=he.ref,le.return=he,he.child=le)}if(Oe=le.child,!eo(le,we)){var Ie=Oe.memoizedProps;if(ve=ve.compare,ve=ve!==null?ve:Go,ve(Ie,xe)&&le.ref===he.ref)return Ns(le,he,we)}return he.flags|=1,le=Vs(Oe,xe),le.ref=he.ref,le.return=he,he.child=le}function ss(le,he,ve,xe,we){if(le!==null){var Oe=le.memoizedProps;if(Go(Oe,xe)&&le.ref===he.ref)if(Pn=!1,he.pendingProps=xe=Oe,eo(le,we))(le.flags&131072)!==0&&(Pn=!0);else return he.lanes=le.lanes,Ns(le,he,we)}return ol(le,he,ve,xe,we)}function as(le,he,ve,xe){var we=xe.children,Oe=le!==null?le.memoizedState:null;if(le===null&&he.stateNode===null&&(he.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),xe.mode==="hidden"){if((he.flags&128)!==0){if(Oe=Oe!==null?Oe.baseLanes|ve:ve,le!==null){for(xe=he.child=le.child,we=0;xe!==null;)we=we|xe.lanes|xe.childLanes,xe=xe.sibling;xe=we&~Oe}else xe=0,he.child=null;return Js(le,he,Oe,ve,xe)}if((ve&536870912)!==0)he.memoizedState={baseLanes:0,cachePool:null},le!==null&&el(he,Oe!==null?Oe.cachePool:null),Oe!==null?ah(he,Oe):oh(),xd(he);else return xe=he.lanes=536870912,Js(le,he,Oe!==null?Oe.baseLanes|ve:ve,ve,xe)}else Oe!==null?(el(he,Oe.cachePool),ah(he,Oe),_a(),he.memoizedState=null):(le!==null&&el(he,null),oh(),_a());return zn(le,he,we,ve),he.child}function Rs(le,he){return le!==null&&le.tag===22||he.stateNode!==null||(he.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),he.sibling}function Js(le,he,ve,xe,we){var Oe=Ys();return Oe=Oe===null?null:{parent:Ci._currentValue,pool:Oe},he.memoizedState={baseLanes:ve,cachePool:Oe},le!==null&&el(he,null),oh(),xd(he),le!==null&&Ya(le,he,xe,!0),he.childLanes=we,null}function _s(le,he){return he=ll({mode:he.mode,children:he.children},le.mode),he.ref=le.ref,le.child=he,he.return=le,he}function cr(le,he,ve){return Co(he,le.child,null,ve),le=_s(he,he.pendingProps),le.flags|=2,es(he),he.memoizedState=null,le}function sc(le,he,ve){var xe=he.pendingProps,we=(he.flags&128)!==0;if(he.flags&=-129,le===null){if($i){if(xe.mode==="hidden")return le=_s(he,xe),he.lanes=536870912,Rs(null,le);if(lh(he),(le=An)?(le=g0(le,or),le=le!==null&&le.data==="&"?le:null,le!==null&&(he.memoizedState={dehydrated:le,treeContext:js!==null?{id:Gs,overflow:Hs}:null,retryLane:536870912,hydrationErrors:null},ve=pd(le),ve.return=he,he.child=ve,ar=he,An=null)):le=null,le===null)throw Xi(he);return he.lanes=536870912,null}return _s(he,xe)}var Oe=le.memoizedState;if(Oe!==null){var Ie=Oe.dehydrated;if(lh(he),we)if(he.flags&256)he.flags&=-257,he=cr(le,he,ve);else if(he.memoizedState!==null)he.child=le.child,he.flags|=128,he=null;else throw Error(Z(558));else if(Pn||Ya(le,he,ve,!1),we=(ve&le.childLanes)!==0,Pn||we){if(xe=cn,xe!==null&&(Ie=wr(xe,ve),Ie!==0&&Ie!==Oe.retryLane))throw Oe.retryLane=Ie,ja(le,Ie),ge(xe,le,Ie),ou;Li(),he=cr(le,he,ve)}else le=Oe.treeContext,An=ta(Ie.nextSibling),ar=he,$i=!0,da=null,or=!1,le!==null&&Vl(he,le),he=_s(he,xe),he.flags|=4096;return he}return le=Vs(le.child,{mode:xe.mode,children:xe.children}),le.ref=he.ref,he.child=le,le.return=he,le}function Os(le,he){var ve=he.ref;if(ve===null)le!==null&&le.ref!==null&&(he.flags|=4194816);else{if(typeof ve!="function"&&typeof ve!="object")throw Error(Z(284));(le===null||le.ref!==ve)&&(he.flags|=4194816)}}function ol(le,he,ve,xe,we){return xo(he),ve=hh(le,he,ve,xe,void 0,we),xe=dh(),le!==null&&!Pn?(fh(le,he,we),Ns(le,he,we)):($i&&xe&&Ic(he),he.flags|=1,zn(le,he,ve,we),he.child)}function Sr(le,he,ve,xe,we,Oe){return xo(he),he.updateQueue=null,ve=Sd(he,xe,ve,we),Ad(le),xe=dh(),le!==null&&!Pn?(fh(le,he,Oe),Ns(le,he,Oe)):($i&&xe&&Ic(he),he.flags|=1,zn(le,he,ve,Oe),he.child)}function gr(le,he,ve,xe,we){if(xo(he),he.stateNode===null){var Oe=Ga,Ie=ve.contextType;typeof Ie=="object"&&Ie!==null&&(Oe=lr(Ie)),Oe=new ve(xe,Oe),he.memoizedState=Oe.state!==null&&Oe.state!==void 0?Oe.state:null,Oe.updater=ic,he.stateNode=Oe,Oe._reactInternals=he,Oe=he.stateNode,Oe.props=xe,Oe.state=he.memoizedState,Oe.refs={},nh(he),Ie=ve.contextType,Oe.context=typeof Ie=="object"&&Ie!==null?lr(Ie):Ga,Oe.state=he.memoizedState,Ie=ve.getDerivedStateFromProps,typeof Ie=="function"&&(sl(he,ve,Ie,xe),Oe.state=he.memoizedState),typeof ve.getDerivedStateFromProps=="function"||typeof Oe.getSnapshotBeforeUpdate=="function"||typeof Oe.UNSAFE_componentWillMount!="function"&&typeof Oe.componentWillMount!="function"||(Ie=Oe.state,typeof Oe.componentWillMount=="function"&&Oe.componentWillMount(),typeof Oe.UNSAFE_componentWillMount=="function"&&Oe.UNSAFE_componentWillMount(),Ie!==Oe.state&&ic.enqueueReplaceState(Oe,Oe.state,null),Mo(he,xe,Oe,we),$l(),Oe.state=he.memoizedState),typeof Oe.componentDidMount=="function"&&(he.flags|=4194308),xe=!0}else if(le===null){Oe=he.stateNode;var We=he.memoizedProps,at=mr(ve,We);Oe.props=at;var Mt=Oe.context,Vt=ve.contextType;Ie=Ga,typeof Vt=="object"&&Vt!==null&&(Ie=lr(Vt));var $t=ve.getDerivedStateFromProps;Vt=typeof $t=="function"||typeof Oe.getSnapshotBeforeUpdate=="function",We=he.pendingProps!==We,Vt||typeof Oe.UNSAFE_componentWillReceiveProps!="function"&&typeof Oe.componentWillReceiveProps!="function"||(We||Mt!==Ie)&&Gd(he,Oe,xe,Ie),Ja=!1;var Ot=he.memoizedState;Oe.state=Ot,Mo(he,xe,Oe,we),$l(),Mt=he.memoizedState,We||Ot!==Mt||Ja?(typeof $t=="function"&&(sl(he,ve,$t,xe),Mt=he.memoizedState),(at=Ja||jd(he,ve,at,xe,Ot,Mt,Ie))?(Vt||typeof Oe.UNSAFE_componentWillMount!="function"&&typeof Oe.componentWillMount!="function"||(typeof Oe.componentWillMount=="function"&&Oe.componentWillMount(),typeof Oe.UNSAFE_componentWillMount=="function"&&Oe.UNSAFE_componentWillMount()),typeof Oe.componentDidMount=="function"&&(he.flags|=4194308)):(typeof Oe.componentDidMount=="function"&&(he.flags|=4194308),he.memoizedProps=xe,he.memoizedState=Mt),Oe.props=xe,Oe.state=Mt,Oe.context=Ie,xe=at):(typeof Oe.componentDidMount=="function"&&(he.flags|=4194308),xe=!1)}else{Oe=he.stateNode,rh(le,he),Ie=he.memoizedProps,Vt=mr(ve,Ie),Oe.props=Vt,$t=he.pendingProps,Ot=Oe.context,Mt=ve.contextType,at=Ga,typeof Mt=="object"&&Mt!==null&&(at=lr(Mt)),We=ve.getDerivedStateFromProps,(Mt=typeof We=="function"||typeof Oe.getSnapshotBeforeUpdate=="function")||typeof Oe.UNSAFE_componentWillReceiveProps!="function"&&typeof Oe.componentWillReceiveProps!="function"||(Ie!==$t||Ot!==at)&&Gd(he,Oe,xe,at),Ja=!1,Ot=he.memoizedState,Oe.state=Ot,Mo(he,xe,Oe,we),$l();var Bt=he.memoizedState;Ie!==$t||Ot!==Bt||Ja||le!==null&&le.dependencies!==null&&Zo(le.dependencies)?(typeof We=="function"&&(sl(he,ve,We,xe),Bt=he.memoizedState),(Vt=Ja||jd(he,ve,Vt,xe,Ot,Bt,at)||le!==null&&le.dependencies!==null&&Zo(le.dependencies))?(Mt||typeof Oe.UNSAFE_componentWillUpdate!="function"&&typeof Oe.componentWillUpdate!="function"||(typeof Oe.componentWillUpdate=="function"&&Oe.componentWillUpdate(xe,Bt,at),typeof Oe.UNSAFE_componentWillUpdate=="function"&&Oe.UNSAFE_componentWillUpdate(xe,Bt,at)),typeof Oe.componentDidUpdate=="function"&&(he.flags|=4),typeof Oe.getSnapshotBeforeUpdate=="function"&&(he.flags|=1024)):(typeof Oe.componentDidUpdate!="function"||Ie===le.memoizedProps&&Ot===le.memoizedState||(he.flags|=4),typeof Oe.getSnapshotBeforeUpdate!="function"||Ie===le.memoizedProps&&Ot===le.memoizedState||(he.flags|=1024),he.memoizedProps=xe,he.memoizedState=Bt),Oe.props=xe,Oe.state=Bt,Oe.context=at,xe=Vt):(typeof Oe.componentDidUpdate!="function"||Ie===le.memoizedProps&&Ot===le.memoizedState||(he.flags|=4),typeof Oe.getSnapshotBeforeUpdate!="function"||Ie===le.memoizedProps&&Ot===le.memoizedState||(he.flags|=1024),xe=!1)}return Oe=xe,Os(le,he),xe=(he.flags&128)!==0,Oe||xe?(Oe=he.stateNode,ve=xe&&typeof ve.getDerivedStateFromError!="function"?null:Oe.render(),he.flags|=1,le!==null&&xe?(he.child=Co(he,le.child,null,we),he.child=Co(he,null,ve,we)):zn(le,he,ve,we),he.memoizedState=Oe.state,le=he.child):le=Ns(le,he,we),le}function tn(le,he,ve,xe){return bo(),he.flags|=256,zn(le,he,ve,xe),he.child}var os={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ys(le){return{baseLanes:le,cachePool:Gc()}}function ac(le,he,ve){return le=le!==null?le.childLanes&~ve:0,he&&(le|=Qi),le}function ls(le,he,ve){var xe=he.pendingProps,we=!1,Oe=(he.flags&128)!==0,Ie;if((Ie=Oe)||(Ie=le!==null&&le.memoizedState===null?!1:(Un.current&2)!==0),Ie&&(we=!0,he.flags&=-129),Ie=(he.flags&32)!==0,he.flags&=-33,le===null){if($i){if(we?Za(he):_a(),(le=An)?(le=g0(le,or),le=le!==null&&le.data!=="&"?le:null,le!==null&&(he.memoizedState={dehydrated:le,treeContext:js!==null?{id:Gs,overflow:Hs}:null,retryLane:536870912,hydrationErrors:null},ve=pd(le),ve.return=he,he.child=ve,ar=he,An=null)):le=null,le===null)throw Xi(he);return If(le)?he.lanes=32:he.lanes=536870912,null}var We=xe.children;return xe=xe.fallback,we?(_a(),we=he.mode,We=ll({mode:"hidden",children:We},we),xe=ua(xe,we,ve,null),We.return=he,xe.return=he,We.sibling=xe,he.child=We,xe=he.child,xe.memoizedState=ys(ve),xe.childLanes=ac(le,Ie,ve),he.memoizedState=os,Rs(null,xe)):(Za(he),Qa(he,We))}var at=le.memoizedState;if(at!==null&&(We=at.dehydrated,We!==null)){if(Oe)he.flags&256?(Za(he),he.flags&=-257,he=cl(le,he,ve)):he.memoizedState!==null?(_a(),he.child=le.child,he.flags|=128,he=null):(_a(),We=xe.fallback,we=he.mode,xe=ll({mode:"visible",children:xe.children},we),We=ua(We,we,ve,null),We.flags|=2,xe.return=he,We.return=he,xe.sibling=We,he.child=xe,Co(he,le.child,null,ve),xe=he.child,xe.memoizedState=ys(ve),xe.childLanes=ac(le,Ie,ve),he.memoizedState=os,he=Rs(null,xe));else if(Za(he),If(We)){if(Ie=We.nextSibling&&We.nextSibling.dataset,Ie)var Mt=Ie.dgst;Ie=Mt,xe=Error(Z(419)),xe.stack="",xe.digest=Ie,jl({value:xe,source:null,stack:null}),he=cl(le,he,ve)}else if(Pn||Ya(le,he,ve,!1),Ie=(ve&le.childLanes)!==0,Pn||Ie){if(Ie=cn,Ie!==null&&(xe=wr(Ie,ve),xe!==0&&xe!==at.retryLane))throw at.retryLane=xe,ja(le,xe),ge(Ie,le,xe),ou;Uf(We)||Li(),he=cl(le,he,ve)}else Uf(We)?(he.flags|=192,he.child=le.child,he=null):(le=at.treeContext,An=ta(We.nextSibling),ar=he,$i=!0,da=null,or=!1,le!==null&&Vl(he,le),he=Qa(he,xe.children),he.flags|=4096);return he}return we?(_a(),We=xe.fallback,we=he.mode,at=le.child,Mt=at.sibling,xe=Vs(at,{mode:"hidden",children:xe.children}),xe.subtreeFlags=at.subtreeFlags&65011712,Mt!==null?We=Vs(Mt,We):(We=ua(We,we,ve,null),We.flags|=2),We.return=he,xe.return=he,xe.sibling=We,he.child=xe,Rs(null,xe),xe=he.child,We=le.child.memoizedState,We===null?We=ys(ve):(we=We.cachePool,we!==null?(at=Ci._currentValue,we=we.parent!==at?{parent:at,pool:at}:we):we=Gc(),We={baseLanes:We.baseLanes|ve,cachePool:we}),xe.memoizedState=We,xe.childLanes=ac(le,Ie,ve),he.memoizedState=os,Rs(le.child,xe)):(Za(he),ve=le.child,le=ve.sibling,ve=Vs(ve,{mode:"visible",children:xe.children}),ve.return=he,ve.sibling=null,le!==null&&(Ie=he.deletions,Ie===null?(he.deletions=[le],he.flags|=16):Ie.push(le)),he.child=ve,he.memoizedState=null,ve)}function Qa(le,he){return he=ll({mode:"visible",children:he},le.mode),he.return=le,le.child=he}function ll(le,he){return le=Rr(22,le,null,he),le.lanes=0,le}function cl(le,he,ve){return Co(he,le.child,null,ve),le=Qa(he,he.pendingProps.children),le.flags|=2,he.memoizedState=null,le}function wo(le,he,ve){le.lanes|=he;var xe=le.alternate;xe!==null&&(xe.lanes|=he),ma(le.return,he,ve)}function oc(le,he,ve,xe,we,Oe){var Ie=le.memoizedState;Ie===null?le.memoizedState={isBackwards:he,rendering:null,renderingStartTime:0,last:xe,tail:ve,tailMode:we,treeForkCount:Oe}:(Ie.isBackwards=he,Ie.rendering=null,Ie.renderingStartTime=0,Ie.last=xe,Ie.tail=ve,Ie.tailMode=we,Ie.treeForkCount=Oe)}function lc(le,he,ve){var xe=he.pendingProps,we=xe.revealOrder,Oe=xe.tail;xe=xe.children;var Ie=Un.current,We=(Ie&2)!==0;if(We?(Ie=Ie&1|2,he.flags|=128):Ie&=1,et(Un,Ie),zn(le,he,xe,ve),xe=$i?Ko:0,!We&&le!==null&&(le.flags&128)!==0)e:for(le=he.child;le!==null;){if(le.tag===13)le.memoizedState!==null&&wo(le,ve,he);else if(le.tag===19)wo(le,ve,he);else if(le.child!==null){le.child.return=le,le=le.child;continue}if(le===he)break e;for(;le.sibling===null;){if(le.return===null||le.return===he)break e;le=le.return}le.sibling.return=le.return,le=le.sibling}switch(we){case"forwards":for(ve=he.child,we=null;ve!==null;)le=ve.alternate,le!==null&&qc(le)===null&&(we=ve),ve=ve.sibling;ve=we,ve===null?(we=he.child,he.child=null):(we=ve.sibling,ve.sibling=null),oc(he,!1,we,ve,Oe,xe);break;case"backwards":case"unstable_legacy-backwards":for(ve=null,we=he.child,he.child=null;we!==null;){if(le=we.alternate,le!==null&&qc(le)===null){he.child=we;break}le=we.sibling,we.sibling=ve,ve=we,we=le}oc(he,!0,ve,null,Oe,xe);break;case"together":oc(he,!1,null,null,void 0,xe);break;default:he.memoizedState=null}return he.child}function Ns(le,he,ve){if(le!==null&&(he.dependencies=le.dependencies),hs|=he.lanes,(ve&he.childLanes)===0)if(le!==null){if(Ya(le,he,ve,!1),(ve&he.childLanes)===0)return null}else return null;if(le!==null&&he.child!==le.child)throw Error(Z(153));if(he.child!==null){for(le=he.child,ve=Vs(le,le.pendingProps),he.child=ve,ve.return=he;le.sibling!==null;)le=le.sibling,ve=ve.sibling=Vs(le,le.pendingProps),ve.return=he;ve.sibling=null}return he.child}function eo(le,he){return(le.lanes&he)!==0?!0:(le=le.dependencies,!!(le!==null&&Zo(le)))}function cc(le,he,ve){switch(he.tag){case 3:gt(he,he.stateNode.containerInfo),pa(he,Ci,le.memoizedState.cache),bo();break;case 27:case 5:Jt(he);break;case 4:gt(he,he.stateNode.containerInfo);break;case 10:pa(he,he.type,he.memoizedProps.value);break;case 31:if(he.memoizedState!==null)return he.flags|=128,lh(he),null;break;case 13:var xe=he.memoizedState;if(xe!==null)return xe.dehydrated!==null?(Za(he),he.flags|=128,null):(ve&he.child.childLanes)!==0?ls(le,he,ve):(Za(he),le=Ns(le,he,ve),le!==null?le.sibling:null);Za(he);break;case 19:var we=(le.flags&128)!==0;if(xe=(ve&he.childLanes)!==0,xe||(Ya(le,he,ve,!1),xe=(ve&he.childLanes)!==0),we){if(xe)return lc(le,he,ve);he.flags|=128}if(we=he.memoizedState,we!==null&&(we.rendering=null,we.tail=null,we.lastEffect=null),et(Un,Un.current),xe)break;return null;case 22:return he.lanes=0,as(le,he,ve,he.pendingProps);case 24:pa(he,Ci,le.memoizedState.cache)}return Ns(le,he,ve)}function lu(le,he,ve){if(le!==null)if(le.memoizedProps!==he.pendingProps)Pn=!0;else{if(!eo(le,ve)&&(he.flags&128)===0)return Pn=!1,cc(le,he,ve);Pn=(le.flags&131072)!==0}else Pn=!1,$i&&(he.flags&1048576)!==0&&Xu(he,Ko,he.index);switch(he.lanes=0,he.tag){case 16:e:{var xe=he.pendingProps;if(le=So(he.elementType),he.type=le,typeof le=="function")Or(le)?(xe=mr(le,xe),he.tag=1,he=gr(null,he,le,xe,ve)):(he.tag=0,he=ol(null,he,le,xe,ve));else{if(le!=null){var we=le.$$typeof;if(we===be){he.tag=11,he=nc(null,he,le,xe,ve);break e}else if(we===Me){he.tag=14,he=rc(null,he,le,xe,ve);break e}}throw he=Ge(le)||le,Error(Z(306,he,""))}}return he;case 0:return ol(le,he,he.type,he.pendingProps,ve);case 1:return xe=he.type,we=mr(xe,he.pendingProps),gr(le,he,xe,we,ve);case 3:e:{if(gt(he,he.stateNode.containerInfo),le===null)throw Error(Z(387));xe=he.pendingProps;var Oe=he.memoizedState;we=Oe.element,rh(le,he),Mo(he,xe,null,ve);var Ie=he.memoizedState;if(xe=Ie.cache,pa(he,Ci,xe),xe!==Oe.cache&&Vc(he,[Ci],ve,!0),$l(),xe=Ie.element,Oe.isDehydrated)if(Oe={element:xe,isDehydrated:!1,cache:Ie.cache},he.updateQueue.baseState=Oe,he.memoizedState=Oe,he.flags&256){he=tn(le,he,xe,ve);break e}else if(xe!==we){we=Fr(Error(Z(424)),he),jl(we),he=tn(le,he,xe,ve);break e}else{switch(le=he.stateNode.containerInfo,le.nodeType){case 9:le=le.body;break;default:le=le.nodeName==="HTML"?le.ownerDocument.body:le}for(An=ta(le.firstChild),ar=he,$i=!0,da=null,or=!0,ve=bd(he,null,xe,ve),he.child=ve;ve;)ve.flags=ve.flags&-3|4096,ve=ve.sibling}else{if(bo(),xe===we){he=Ns(le,he,ve);break e}zn(le,he,xe,ve)}he=he.child}return he;case 26:return Os(le,he),le===null?(ve=A0(he.type,null,he.pendingProps,null))?he.memoizedState=ve:$i||(ve=he.type,le=he.pendingProps,xe=Qd(it.current).createElement(ve),xe[ki]=he,xe[On]=le,kr(xe,ve,le),ft(xe),he.stateNode=xe):he.memoizedState=A0(he.type,le.memoizedProps,he.pendingProps,le.memoizedState),null;case 27:return Jt(he),le===null&&$i&&(xe=he.stateNode=y0(he.type,he.pendingProps,it.current),ar=he,or=!0,we=An,gl(he.type)?(zf=we,An=ta(xe.firstChild)):An=we),zn(le,he,he.pendingProps.children,ve),Os(le,he),le===null&&(he.flags|=4194304),he.child;case 5:return le===null&&$i&&((we=xe=An)&&(xe=up(xe,he.type,he.pendingProps,or),xe!==null?(he.stateNode=xe,ar=he,An=ta(xe.firstChild),or=!1,we=!0):we=!1),we||Xi(he)),Jt(he),we=he.type,Oe=he.pendingProps,Ie=le!==null?le.memoizedProps:null,xe=Oe.children,Lf(we,Oe)?xe=null:Ie!==null&&Lf(we,Ie)&&(he.flags|=32),he.memoizedState!==null&&(we=hh(le,he,gf,null,null,ve),Hh._currentValue=we),Os(le,he),zn(le,he,xe,ve),he.child;case 6:return le===null&&$i&&((le=ve=An)&&(ve=hp(ve,he.pendingProps,or),ve!==null?(he.stateNode=ve,ar=he,An=null,le=!0):le=!1),le||Xi(he)),null;case 13:return ls(le,he,ve);case 4:return gt(he,he.stateNode.containerInfo),xe=he.pendingProps,le===null?he.child=Co(he,null,xe,ve):zn(le,he,xe,ve),he.child;case 11:return nc(le,he,he.type,he.pendingProps,ve);case 7:return zn(le,he,he.pendingProps,ve),he.child;case 8:return zn(le,he,he.pendingProps.children,ve),he.child;case 12:return zn(le,he,he.pendingProps.children,ve),he.child;case 10:return xe=he.pendingProps,pa(he,he.type,xe.value),zn(le,he,xe.children,ve),he.child;case 9:return we=he.type._context,xe=he.pendingProps.children,xo(he),we=lr(we),xe=xe(we),he.flags|=1,zn(le,he,xe,ve),he.child;case 14:return rc(le,he,he.type,he.pendingProps,ve);case 15:return ss(le,he,he.type,he.pendingProps,ve);case 19:return lc(le,he,ve);case 31:return sc(le,he,ve);case 22:return as(le,he,ve,he.pendingProps);case 24:return xo(he),xe=lr(Ci),le===null?(we=Ys(),we===null&&(we=cn,Oe=Ku(),we.pooledCache=Oe,Oe.refCount++,Oe!==null&&(we.pooledCacheLanes|=ve),we=Oe),he.memoizedState={parent:xe,cache:we},nh(he),pa(he,Ci,we)):((le.lanes&ve)!==0&&(rh(le,he),Mo(he,null,null,ve),$l()),we=le.memoizedState,Oe=he.memoizedState,we.parent!==xe?(we={parent:xe,cache:xe},he.memoizedState=we,he.lanes===0&&(he.memoizedState=he.updateQueue.baseState=we),pa(he,Ci,xe)):(xe=Oe.cache,pa(he,Ci,xe),xe!==we.cache&&Vc(he,[Ci],ve,!0))),zn(le,he,he.pendingProps.children,ve),he.child;case 29:throw he.pendingProps}throw Error(Z(156,he.tag))}function Yr(le){le.flags|=4}function io(le,he,ve,xe,we){if((he=(le.mode&32)!==0)&&(he=!1),he){if(le.flags|=16777216,(we&335544128)===we)if(le.stateNode.complete)le.flags|=8192;else if(oi())le.flags|=8192;else throw Pi=Yl,Hl}else le.flags&=-16777217}function xa(le,he){if(he.type!=="stylesheet"||(he.state.loading&4)!==0)le.flags&=-16777217;else if(le.flags|=16777216,!T0(he))if(oi())le.flags|=8192;else throw Pi=Yl,Hl}function ul(le,he){he!==null&&(le.flags|=4),le.flags&16384&&(he=le.tag!==22?Di():536870912,le.lanes|=he,ds|=he)}function uc(le,he){if(!$i)switch(le.tailMode){case"hidden":he=le.tail;for(var ve=null;he!==null;)he.alternate!==null&&(ve=he),he=he.sibling;ve===null?le.tail=null:ve.sibling=null;break;case"collapsed":ve=le.tail;for(var xe=null;ve!==null;)ve.alternate!==null&&(xe=ve),ve=ve.sibling;xe===null?he||le.tail===null?le.tail=null:le.tail.sibling=null:xe.sibling=null}}function fn(le){var he=le.alternate!==null&&le.alternate.child===le.child,ve=0,xe=0;if(he)for(var we=le.child;we!==null;)ve|=we.lanes|we.childLanes,xe|=we.subtreeFlags&65011712,xe|=we.flags&65011712,we.return=le,we=we.sibling;else for(we=le.child;we!==null;)ve|=we.lanes|we.childLanes,xe|=we.subtreeFlags,xe|=we.flags,we.return=le,we=we.sibling;return le.subtreeFlags|=xe,le.childLanes=ve,he}function Bh(le,he,ve){var xe=he.pendingProps;switch(Ha(he),he.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(he),null;case 1:return fn(he),null;case 3:return ve=he.stateNode,xe=null,le!==null&&(xe=le.memoizedState.cache),he.memoizedState.cache!==xe&&(he.flags|=2048),gs(Ci),kt(),ve.pendingContext&&(ve.context=ve.pendingContext,ve.pendingContext=null),(le===null||le.child===null)&&(yo(he)?Yr(he):le===null||le.memoizedState.isDehydrated&&(he.flags&256)===0||(he.flags|=1024,qu())),fn(he),null;case 26:var we=he.type,Oe=he.memoizedState;return le===null?(Yr(he),Oe!==null?(fn(he),xa(he,Oe)):(fn(he),io(he,we,null,xe,ve))):Oe?Oe!==le.memoizedState?(Yr(he),fn(he),xa(he,Oe)):(fn(he),he.flags&=-16777217):(le=le.memoizedProps,le!==xe&&Yr(he),fn(he),io(he,we,le,xe,ve)),null;case 27:if(li(he),ve=it.current,we=he.type,le!==null&&he.stateNode!=null)le.memoizedProps!==xe&&Yr(he);else{if(!xe){if(he.stateNode===null)throw Error(Z(166));return fn(he),null}le=ot.current,yo(he)?Fc(he):(le=y0(we,xe,ve),he.stateNode=le,Yr(he))}return fn(he),null;case 5:if(li(he),we=he.type,le!==null&&he.stateNode!=null)le.memoizedProps!==xe&&Yr(he);else{if(!xe){if(he.stateNode===null)throw Error(Z(166));return fn(he),null}if(Oe=ot.current,yo(he))Fc(he);else{var Ie=Qd(it.current);switch(Oe){case 1:Oe=Ie.createElementNS("http://www.w3.org/2000/svg",we);break;case 2:Oe=Ie.createElementNS("http://www.w3.org/1998/Math/MathML",we);break;default:switch(we){case"svg":Oe=Ie.createElementNS("http://www.w3.org/2000/svg",we);break;case"math":Oe=Ie.createElementNS("http://www.w3.org/1998/Math/MathML",we);break;case"script":Oe=Ie.createElement("div"),Oe.innerHTML="<script><\/script>",Oe=Oe.removeChild(Oe.firstChild);break;case"select":Oe=typeof xe.is=="string"?Ie.createElement("select",{is:xe.is}):Ie.createElement("select"),xe.multiple?Oe.multiple=!0:xe.size&&(Oe.size=xe.size);break;default:Oe=typeof xe.is=="string"?Ie.createElement(we,{is:xe.is}):Ie.createElement(we)}}Oe[ki]=he,Oe[On]=xe;e:for(Ie=he.child;Ie!==null;){if(Ie.tag===5||Ie.tag===6)Oe.appendChild(Ie.stateNode);else if(Ie.tag!==4&&Ie.tag!==27&&Ie.child!==null){Ie.child.return=Ie,Ie=Ie.child;continue}if(Ie===he)break e;for(;Ie.sibling===null;){if(Ie.return===null||Ie.return===he)break e;Ie=Ie.return}Ie.sibling.return=Ie.return,Ie=Ie.sibling}he.stateNode=Oe;e:switch(kr(Oe,we,xe),we){case"button":case"input":case"select":case"textarea":xe=!!xe.autoFocus;break e;case"img":xe=!0;break e;default:xe=!1}xe&&Yr(he)}}return fn(he),io(he,he.type,le===null?null:le.memoizedProps,he.pendingProps,ve),null;case 6:if(le&&he.stateNode!=null)le.memoizedProps!==xe&&Yr(he);else{if(typeof xe!="string"&&he.stateNode===null)throw Error(Z(166));if(le=it.current,yo(he)){if(le=he.stateNode,ve=he.memoizedProps,xe=null,we=ar,we!==null)switch(we.tag){case 27:case 5:xe=we.memoizedProps}le[ki]=he,le=!!(le.nodeValue===ve||xe!==null&&xe.suppressHydrationWarning===!0||l0(le.nodeValue,ve)),le||Xi(he,!0)}else le=Qd(le).createTextNode(xe),le[ki]=he,he.stateNode=le}return fn(he),null;case 31:if(ve=he.memoizedState,le===null||le.memoizedState!==null){if(xe=yo(he),ve!==null){if(le===null){if(!xe)throw Error(Z(318));if(le=he.memoizedState,le=le!==null?le.dehydrated:null,!le)throw Error(Z(557));le[ki]=he}else bo(),(he.flags&128)===0&&(he.memoizedState=null),he.flags|=4;fn(he),le=!1}else ve=qu(),le!==null&&le.memoizedState!==null&&(le.memoizedState.hydrationErrors=ve),le=!0;if(!le)return he.flags&256?(es(he),he):(es(he),null);if((he.flags&128)!==0)throw Error(Z(558))}return fn(he),null;case 13:if(xe=he.memoizedState,le===null||le.memoizedState!==null&&le.memoizedState.dehydrated!==null){if(we=yo(he),xe!==null&&xe.dehydrated!==null){if(le===null){if(!we)throw Error(Z(318));if(we=he.memoizedState,we=we!==null?we.dehydrated:null,!we)throw Error(Z(317));we[ki]=he}else bo(),(he.flags&128)===0&&(he.memoizedState=null),he.flags|=4;fn(he),we=!1}else we=qu(),le!==null&&le.memoizedState!==null&&(le.memoizedState.hydrationErrors=we),we=!0;if(!we)return he.flags&256?(es(he),he):(es(he),null)}return es(he),(he.flags&128)!==0?(he.lanes=ve,he):(ve=xe!==null,le=le!==null&&le.memoizedState!==null,ve&&(xe=he.child,we=null,xe.alternate!==null&&xe.alternate.memoizedState!==null&&xe.alternate.memoizedState.cachePool!==null&&(we=xe.alternate.memoizedState.cachePool.pool),Oe=null,xe.memoizedState!==null&&xe.memoizedState.cachePool!==null&&(Oe=xe.memoizedState.cachePool.pool),Oe!==we&&(xe.flags|=2048)),ve!==le&&ve&&(he.child.flags|=8192),ul(he,he.updateQueue),fn(he),null);case 4:return kt(),le===null&&Pf(he.stateNode.containerInfo),fn(he),null;case 10:return gs(he.type),fn(he),null;case 19:if(qe(Un),xe=he.memoizedState,xe===null)return fn(he),null;if(we=(he.flags&128)!==0,Oe=xe.rendering,Oe===null)if(we)uc(xe,!1);else{if(un!==0||le!==null&&(le.flags&128)!==0)for(le=he.child;le!==null;){if(Oe=qc(le),Oe!==null){for(he.flags|=128,uc(xe,!1),le=Oe.updateQueue,he.updateQueue=le,ul(he,le),he.subtreeFlags=0,le=ve,ve=he.child;ve!==null;)br(ve,le),ve=ve.sibling;return et(Un,Un.current&1|2),$i&&ha(he,xe.treeForkCount),he.child}le=le.sibling}xe.tail!==null&&He()>fs&&(he.flags|=128,we=!0,uc(xe,!1),he.lanes=4194304)}else{if(!we)if(le=qc(Oe),le!==null){if(he.flags|=128,we=!0,le=le.updateQueue,he.updateQueue=le,ul(he,le),uc(xe,!0),xe.tail===null&&xe.tailMode==="hidden"&&!Oe.alternate&&!$i)return fn(he),null}else 2*He()-xe.renderingStartTime>fs&&ve!==536870912&&(he.flags|=128,we=!0,uc(xe,!1),he.lanes=4194304);xe.isBackwards?(Oe.sibling=he.child,he.child=Oe):(le=xe.last,le!==null?le.sibling=Oe:he.child=Oe,xe.last=Oe)}return xe.tail!==null?(le=xe.tail,xe.rendering=le,xe.tail=le.sibling,xe.renderingStartTime=He(),le.sibling=null,ve=Un.current,et(Un,we?ve&1|2:ve&1),$i&&ha(he,xe.treeForkCount),le):(fn(he),null);case 22:case 23:return es(he),Ar(),xe=he.memoizedState!==null,le!==null?le.memoizedState!==null!==xe&&(he.flags|=8192):xe&&(he.flags|=8192),xe?(ve&536870912)!==0&&(he.flags&128)===0&&(fn(he),he.subtreeFlags&6&&(he.flags|=8192)):fn(he),ve=he.updateQueue,ve!==null&&ul(he,ve.retryQueue),ve=null,le!==null&&le.memoizedState!==null&&le.memoizedState.cachePool!==null&&(ve=le.memoizedState.cachePool.pool),xe=null,he.memoizedState!==null&&he.memoizedState.cachePool!==null&&(xe=he.memoizedState.cachePool.pool),xe!==ve&&(he.flags|=2048),le!==null&&qe(Xa),null;case 24:return ve=null,le!==null&&(ve=le.memoizedState.cache),he.memoizedState.cache!==ve&&(he.flags|=2048),gs(Ci),fn(he),null;case 25:return null;case 30:return null}throw Error(Z(156,he.tag))}function cu(le,he){switch(Ha(he),he.tag){case 1:return le=he.flags,le&65536?(he.flags=le&-65537|128,he):null;case 3:return gs(Ci),kt(),le=he.flags,(le&65536)!==0&&(le&128)===0?(he.flags=le&-65537|128,he):null;case 26:case 27:case 5:return li(he),null;case 31:if(he.memoizedState!==null){if(es(he),he.alternate===null)throw Error(Z(340));bo()}return le=he.flags,le&65536?(he.flags=le&-65537|128,he):null;case 13:if(es(he),le=he.memoizedState,le!==null&&le.dehydrated!==null){if(he.alternate===null)throw Error(Z(340));bo()}return le=he.flags,le&65536?(he.flags=le&-65537|128,he):null;case 19:return qe(Un),null;case 4:return kt(),null;case 10:return gs(he.type),null;case 22:case 23:return es(he),Ar(),le!==null&&qe(Xa),le=he.flags,le&65536?(he.flags=le&-65537|128,he):null;case 24:return gs(Ci),null;case 25:return null;default:return null}}function Po(le,he){switch(Ha(he),he.tag){case 3:gs(Ci),kt();break;case 26:case 27:case 5:li(he);break;case 4:kt();break;case 31:he.memoizedState!==null&&es(he);break;case 13:es(he);break;case 19:qe(Un);break;case 10:gs(he.type);break;case 22:case 23:es(he),Ar(),le!==null&&qe(Xa);break;case 24:gs(Ci)}}function Ks(le,he){try{var ve=he.updateQueue,xe=ve!==null?ve.lastEffect:null;if(xe!==null){var we=xe.next;ve=we;do{if((ve.tag&le)===le){xe=void 0;var Oe=ve.create,Ie=ve.inst;xe=Oe(),Ie.destroy=xe}ve=ve.next}while(ve!==we)}}catch(We){xn(he,he.return,We)}}function bs(le,he,ve){try{var xe=he.updateQueue,we=xe!==null?xe.lastEffect:null;if(we!==null){var Oe=we.next;xe=Oe;do{if((xe.tag&le)===le){var Ie=xe.inst,We=Ie.destroy;if(We!==void 0){Ie.destroy=void 0,we=he;var at=ve,Mt=We;try{Mt()}catch(Vt){xn(we,at,Vt)}}}xe=xe.next}while(xe!==Oe)}}catch(Vt){xn(he,he.return,Vt)}}function ro(le){var he=le.updateQueue;if(he!==null){var ve=le.stateNode;try{fr(he,ve)}catch(xe){xn(le,le.return,xe)}}}function kh(le,he,ve){ve.props=mr(le.type,le.memoizedProps),ve.state=le.memoizedState;try{ve.componentWillUnmount()}catch(xe){xn(le,he,xe)}}function Zs(le,he){try{var ve=le.ref;if(ve!==null){switch(le.tag){case 26:case 27:case 5:var xe=le.stateNode;break;case 30:xe=le.stateNode;break;default:xe=le.stateNode}typeof ve=="function"?le.refCleanup=ve(xe):ve.current=xe}}catch(we){xn(le,he,we)}}function cs(le,he){var ve=le.ref,xe=le.refCleanup;if(ve!==null)if(typeof xe=="function")try{xe()}catch(we){xn(le,he,we)}finally{le.refCleanup=null,le=le.alternate,le!=null&&(le.refCleanup=null)}else if(typeof ve=="function")try{ve(null)}catch(we){xn(le,he,we)}else ve.current=null}function us(le){var he=le.type,ve=le.memoizedProps,xe=le.stateNode;try{e:switch(he){case"button":case"input":case"select":case"textarea":ve.autoFocus&&xe.focus();break e;case"img":ve.src?xe.src=ve.src:ve.srcSet&&(xe.srcset=ve.srcSet)}}catch(we){xn(le,le.return,we)}}function xs(le,he,ve){try{var xe=le.stateNode;np(xe,le.type,ve,he),xe[On]=he}catch(we){xn(le,le.return,we)}}function Kn(le){return le.tag===5||le.tag===3||le.tag===26||le.tag===27&&gl(le.type)||le.tag===4}function Qs(le){e:for(;;){for(;le.sibling===null;){if(le.return===null||Kn(le.return))return null;le=le.return}for(le.sibling.return=le.return,le=le.sibling;le.tag!==5&&le.tag!==6&&le.tag!==18;){if(le.tag===27&&gl(le.type)||le.flags&2||le.child===null||le.tag===4)continue e;le.child.return=le,le=le.child}if(!(le.flags&2))return le.stateNode}}function zi(le,he,ve){var xe=le.tag;if(xe===5||xe===6)le=le.stateNode,he?(ve.nodeType===9?ve.body:ve.nodeName==="HTML"?ve.ownerDocument.body:ve).insertBefore(le,he):(he=ve.nodeType===9?ve.body:ve.nodeName==="HTML"?ve.ownerDocument.body:ve,he.appendChild(le),ve=ve._reactRootContainer,ve!=null||he.onclick!==null||(he.onclick=Is));else if(xe!==4&&(xe===27&&gl(le.type)&&(ve=le.stateNode,he=null),le=le.child,le!==null))for(zi(le,he,ve),le=le.sibling;le!==null;)zi(le,he,ve),le=le.sibling}function an(le,he,ve){var xe=le.tag;if(xe===5||xe===6)le=le.stateNode,he?ve.insertBefore(le,he):ve.appendChild(le);else if(xe!==4&&(xe===27&&gl(le.type)&&(ve=le.stateNode),le=le.child,le!==null))for(an(le,he,ve),le=le.sibling;le!==null;)an(le,he,ve),le=le.sibling}function Hn(le){var he=le.stateNode,ve=le.memoizedProps;try{for(var xe=le.type,we=he.attributes;we.length;)he.removeAttributeNode(we[0]);kr(he,xe,ve),he[ki]=le,he[On]=ve}catch(Oe){xn(le,le.return,Oe)}}var As=!1,Rn=!1,Aa=!1,hc=typeof WeakSet=="function"?WeakSet:Set,Fn=null;function hl(le,he){if(le=le.containerInfo,Nf=of,le=Pc(le),Ho(le)){if("selectionStart"in le)var ve={start:le.selectionStart,end:le.selectionEnd};else e:{ve=(ve=le.ownerDocument)&&ve.defaultView||window;var xe=ve.getSelection&&ve.getSelection();if(xe&&xe.rangeCount!==0){ve=xe.anchorNode;var we=xe.anchorOffset,Oe=xe.focusNode;xe=xe.focusOffset;try{ve.nodeType,Oe.nodeType}catch{ve=null;break e}var Ie=0,We=-1,at=-1,Mt=0,Vt=0,$t=le,Ot=null;t:for(;;){for(var Bt;$t!==ve||we!==0&&$t.nodeType!==3||(We=Ie+we),$t!==Oe||xe!==0&&$t.nodeType!==3||(at=Ie+xe),$t.nodeType===3&&(Ie+=$t.nodeValue.length),(Bt=$t.firstChild)!==null;)Ot=$t,$t=Bt;for(;;){if($t===le)break t;if(Ot===ve&&++Mt===we&&(We=Ie),Ot===Oe&&++Vt===xe&&(at=Ie),(Bt=$t.nextSibling)!==null)break;$t=Ot,Ot=$t.parentNode}$t=Bt}ve=We===-1||at===-1?null:{start:We,end:at}}else ve=null}ve=ve||{start:0,end:0}}else ve=null;for(Df={focusedElem:le,selectionRange:ve},of=!1,Fn=he;Fn!==null;)if(he=Fn,le=he.child,(he.subtreeFlags&1028)!==0&&le!==null)le.return=he,Fn=le;else for(;Fn!==null;){switch(he=Fn,Oe=he.alternate,le=he.flags,he.tag){case 0:if((le&4)!==0&&(le=he.updateQueue,le=le!==null?le.events:null,le!==null))for(ve=0;ve<le.length;ve++)we=le[ve],we.ref.impl=we.nextImpl;break;case 11:case 15:break;case 1:if((le&1024)!==0&&Oe!==null){le=void 0,ve=he,we=Oe.memoizedProps,Oe=Oe.memoizedState,xe=ve.stateNode;try{var yi=mr(ve.type,we);le=xe.getSnapshotBeforeUpdate(yi,Oe),xe.__reactInternalSnapshotBeforeUpdate=le}catch(Ri){xn(ve,ve.return,Ri)}}break;case 3:if((le&1024)!==0){if(le=he.stateNode.containerInfo,ve=le.nodeType,ve===9)kf(le);else if(ve===1)switch(le.nodeName){case"HEAD":case"HTML":case"BODY":kf(le);break;default:le.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((le&1024)!==0)throw Error(Z(163))}if(le=he.sibling,le!==null){le.return=he.return,Fn=le;break}Fn=he.return}}function Xd(le,he,ve){var xe=ve.flags;switch(ve.tag){case 0:case 11:case 15:Sa(le,ve),xe&4&&Ks(5,ve);break;case 1:if(Sa(le,ve),xe&4)if(le=ve.stateNode,he===null)try{le.componentDidMount()}catch(Ie){xn(ve,ve.return,Ie)}else{var we=mr(ve.type,he.memoizedProps);he=he.memoizedState;try{le.componentDidUpdate(we,he,le.__reactInternalSnapshotBeforeUpdate)}catch(Ie){xn(ve,ve.return,Ie)}}xe&64&&ro(ve),xe&512&&Zs(ve,ve.return);break;case 3:if(Sa(le,ve),xe&64&&(le=ve.updateQueue,le!==null)){if(he=null,ve.child!==null)switch(ve.child.tag){case 27:case 5:he=ve.child.stateNode;break;case 1:he=ve.child.stateNode}try{fr(le,he)}catch(Ie){xn(ve,ve.return,Ie)}}break;case 27:he===null&&xe&4&&Hn(ve);case 26:case 5:Sa(le,ve),he===null&&xe&4&&us(ve),xe&512&&Zs(ve,ve.return);break;case 12:Sa(le,ve);break;case 31:Sa(le,ve),xe&4&&hu(le,ve);break;case 13:Sa(le,ve),xe&4&&Uh(le,ve),xe&64&&(le=ve.memoizedState,le!==null&&(le=le.dehydrated,le!==null&&(ve=Y0.bind(null,ve),dp(le,ve))));break;case 22:if(xe=ve.memoizedState!==null||As,!xe){he=he!==null&&he.memoizedState!==null||Rn,we=As;var Oe=Rn;As=xe,(Rn=he)&&!Oe?ln(le,ve,(ve.subtreeFlags&8772)!==0):Sa(le,ve),As=we,Rn=Oe}break;case 30:break;default:Sa(le,ve)}}function uu(le){var he=le.alternate;he!==null&&(le.alternate=null,uu(he)),le.child=null,le.deletions=null,le.sibling=null,le.tag===5&&(he=le.stateNode,he!==null&&Et(he)),le.stateNode=null,le.return=null,le.dependencies=null,le.memoizedProps=null,le.memoizedState=null,le.pendingProps=null,le.stateNode=null,le.updateQueue=null}var nn=null,Zn=!1;function Cr(le,he,ve){for(ve=ve.child;ve!==null;)so(le,he,ve),ve=ve.sibling}function so(le,he,ve){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(Rt,ve)}catch{}switch(ve.tag){case 26:Rn||cs(ve,he),Cr(le,he,ve),ve.memoizedState?ve.memoizedState.count--:ve.stateNode&&(ve=ve.stateNode,ve.parentNode.removeChild(ve));break;case 27:Rn||cs(ve,he);var xe=nn,we=Zn;gl(ve.type)&&(nn=ve.stateNode,Zn=!1),Cr(le,he,ve),Vh(ve.stateNode),nn=xe,Zn=we;break;case 5:Rn||cs(ve,he);case 6:if(xe=nn,we=Zn,nn=null,Cr(le,he,ve),nn=xe,Zn=we,nn!==null)if(Zn)try{(nn.nodeType===9?nn.body:nn.nodeName==="HTML"?nn.ownerDocument.body:nn).removeChild(ve.stateNode)}catch(Oe){xn(ve,he,Oe)}else try{nn.removeChild(ve.stateNode)}catch(Oe){xn(ve,he,Oe)}break;case 18:nn!==null&&(Zn?(le=nn,p0(le.nodeType===9?le.body:le.nodeName==="HTML"?le.ownerDocument.body:le,ve.stateNode),Au(le)):p0(nn,ve.stateNode));break;case 4:xe=nn,we=Zn,nn=ve.stateNode.containerInfo,Zn=!0,Cr(le,he,ve),nn=xe,Zn=we;break;case 0:case 11:case 14:case 15:bs(2,ve,he),Rn||bs(4,ve,he),Cr(le,he,ve);break;case 1:Rn||(cs(ve,he),xe=ve.stateNode,typeof xe.componentWillUnmount=="function"&&kh(ve,he,xe)),Cr(le,he,ve);break;case 21:Cr(le,he,ve);break;case 22:Rn=(xe=Rn)||ve.memoizedState!==null,Cr(le,he,ve),Rn=xe;break;default:Cr(le,he,ve)}}function hu(le,he){if(he.memoizedState===null&&(le=he.alternate,le!==null&&(le=le.memoizedState,le!==null))){le=le.dehydrated;try{Au(le)}catch(ve){xn(he,he.return,ve)}}}function Uh(le,he){if(he.memoizedState===null&&(le=he.alternate,le!==null&&(le=le.memoizedState,le!==null&&(le=le.dehydrated,le!==null))))try{Au(le)}catch(ve){xn(he,he.return,ve)}}function qd(le){switch(le.tag){case 31:case 13:case 19:var he=le.stateNode;return he===null&&(he=le.stateNode=new hc),he;case 22:return le=le.stateNode,he=le._retryCache,he===null&&(he=le._retryCache=new hc),he;default:throw Error(Z(435,le.tag))}}function Yn(le,he){var ve=qd(le);he.forEach(function(xe){if(!ve.has(xe)){ve.add(xe);var we=X0.bind(null,le,xe);xe.then(we,we)}})}function Mr(le,he){var ve=he.deletions;if(ve!==null)for(var xe=0;xe<ve.length;xe++){var we=ve[xe],Oe=le,Ie=he,We=Ie;e:for(;We!==null;){switch(We.tag){case 27:if(gl(We.type)){nn=We.stateNode,Zn=!1;break e}break;case 5:nn=We.stateNode,Zn=!1;break e;case 3:case 4:nn=We.stateNode.containerInfo,Zn=!0;break e}We=We.return}if(nn===null)throw Error(Z(160));so(Oe,Ie,we),nn=null,Zn=!1,Oe=we.alternate,Oe!==null&&(Oe.return=null),we.return=null}if(he.subtreeFlags&13886)for(he=he.child;he!==null;)ao(he,le),he=he.sibling}var Xr=null;function ao(le,he){var ve=le.alternate,xe=le.flags;switch(le.tag){case 0:case 11:case 14:case 15:Mr(he,le),Vn(le),xe&4&&(bs(3,le,le.return),Ks(3,le),bs(5,le,le.return));break;case 1:Mr(he,le),Vn(le),xe&512&&(Rn||ve===null||cs(ve,ve.return)),xe&64&&As&&(le=le.updateQueue,le!==null&&(xe=le.callbacks,xe!==null&&(ve=le.shared.hiddenCallbacks,le.shared.hiddenCallbacks=ve===null?xe:ve.concat(xe))));break;case 26:var we=Xr;if(Mr(he,le),Vn(le),xe&512&&(Rn||ve===null||cs(ve,ve.return)),xe&4){var Oe=ve!==null?ve.memoizedState:null;if(xe=le.memoizedState,ve===null)if(xe===null)if(le.stateNode===null){e:{xe=le.type,ve=le.memoizedProps,we=we.ownerDocument||we;t:switch(xe){case"title":Oe=we.getElementsByTagName("title")[0],(!Oe||Oe[ct]||Oe[ki]||Oe.namespaceURI==="http://www.w3.org/2000/svg"||Oe.hasAttribute("itemprop"))&&(Oe=we.createElement(xe),we.head.insertBefore(Oe,we.querySelector("head > title"))),kr(Oe,xe,ve),Oe[ki]=le,ft(Oe),xe=Oe;break e;case"link":var Ie=M0("link","href",we).get(xe+(ve.href||""));if(Ie){for(var We=0;We<Ie.length;We++)if(Oe=Ie[We],Oe.getAttribute("href")===(ve.href==null||ve.href===""?null:ve.href)&&Oe.getAttribute("rel")===(ve.rel==null?null:ve.rel)&&Oe.getAttribute("title")===(ve.title==null?null:ve.title)&&Oe.getAttribute("crossorigin")===(ve.crossOrigin==null?null:ve.crossOrigin)){Ie.splice(We,1);break t}}Oe=we.createElement(xe),kr(Oe,xe,ve),we.head.appendChild(Oe);break;case"meta":if(Ie=M0("meta","content",we).get(xe+(ve.content||""))){for(We=0;We<Ie.length;We++)if(Oe=Ie[We],Oe.getAttribute("content")===(ve.content==null?null:""+ve.content)&&Oe.getAttribute("name")===(ve.name==null?null:ve.name)&&Oe.getAttribute("property")===(ve.property==null?null:ve.property)&&Oe.getAttribute("http-equiv")===(ve.httpEquiv==null?null:ve.httpEquiv)&&Oe.getAttribute("charset")===(ve.charSet==null?null:ve.charSet)){Ie.splice(We,1);break t}}Oe=we.createElement(xe),kr(Oe,xe,ve),we.head.appendChild(Oe);break;default:throw Error(Z(468,xe))}Oe[ki]=le,ft(Oe),xe=Oe}le.stateNode=xe}else E0(we,le.type,le.stateNode);else le.stateNode=C0(we,xe,le.memoizedProps);else Oe!==xe?(Oe===null?ve.stateNode!==null&&(ve=ve.stateNode,ve.parentNode.removeChild(ve)):Oe.count--,xe===null?E0(we,le.type,le.stateNode):C0(we,xe,le.memoizedProps)):xe===null&&le.stateNode!==null&&xs(le,le.memoizedProps,ve.memoizedProps)}break;case 27:Mr(he,le),Vn(le),xe&512&&(Rn||ve===null||cs(ve,ve.return)),ve!==null&&xe&4&&xs(le,le.memoizedProps,ve.memoizedProps);break;case 5:if(Mr(he,le),Vn(le),xe&512&&(Rn||ve===null||cs(ve,ve.return)),le.flags&32){we=le.stateNode;try{Cs(we,"")}catch(yi){xn(le,le.return,yi)}}xe&4&&le.stateNode!=null&&(we=le.memoizedProps,xs(le,we,ve!==null?ve.memoizedProps:we)),xe&1024&&(Aa=!0);break;case 6:if(Mr(he,le),Vn(le),xe&4){if(le.stateNode===null)throw Error(Z(162));xe=le.memoizedProps,ve=le.stateNode;try{ve.nodeValue=xe}catch(yi){xn(le,le.return,yi)}}break;case 3:if(nf=null,we=Xr,Xr=ef(he.containerInfo),Mr(he,le),Xr=we,Vn(le),xe&4&&ve!==null&&ve.memoizedState.isDehydrated)try{Au(he.containerInfo)}catch(yi){xn(le,le.return,yi)}Aa&&(Aa=!1,$d(le));break;case 4:xe=Xr,Xr=ef(le.stateNode.containerInfo),Mr(he,le),Vn(le),Xr=xe;break;case 12:Mr(he,le),Vn(le);break;case 31:Mr(he,le),Vn(le),xe&4&&(xe=le.updateQueue,xe!==null&&(le.updateQueue=null,Yn(le,xe)));break;case 13:Mr(he,le),Vn(le),le.child.flags&8192&&le.memoizedState!==null!=(ve!==null&&ve.memoizedState!==null)&&(Ea=He()),xe&4&&(xe=le.updateQueue,xe!==null&&(le.updateQueue=null,Yn(le,xe)));break;case 22:we=le.memoizedState!==null;var at=ve!==null&&ve.memoizedState!==null,Mt=As,Vt=Rn;if(As=Mt||we,Rn=Vt||at,Mr(he,le),Rn=Vt,As=Mt,Vn(le),xe&8192)e:for(he=le.stateNode,he._visibility=we?he._visibility&-2:he._visibility|1,we&&(ve===null||at||As||Rn||Ro(le)),ve=null,he=le;;){if(he.tag===5||he.tag===26){if(ve===null){at=ve=he;try{if(Oe=at.stateNode,we)Ie=Oe.style,typeof Ie.setProperty=="function"?Ie.setProperty("display","none","important"):Ie.display="none";else{We=at.stateNode;var $t=at.memoizedProps.style,Ot=$t!=null&&$t.hasOwnProperty("display")?$t.display:null;We.style.display=Ot==null||typeof Ot=="boolean"?"":(""+Ot).trim()}}catch(yi){xn(at,at.return,yi)}}}else if(he.tag===6){if(ve===null){at=he;try{at.stateNode.nodeValue=we?"":at.memoizedProps}catch(yi){xn(at,at.return,yi)}}}else if(he.tag===18){if(ve===null){at=he;try{var Bt=at.stateNode;we?m0(Bt,!0):m0(at.stateNode,!1)}catch(yi){xn(at,at.return,yi)}}}else if((he.tag!==22&&he.tag!==23||he.memoizedState===null||he===le)&&he.child!==null){he.child.return=he,he=he.child;continue}if(he===le)break e;for(;he.sibling===null;){if(he.return===null||he.return===le)break e;ve===he&&(ve=null),he=he.return}ve===he&&(ve=null),he.sibling.return=he.return,he=he.sibling}xe&4&&(xe=le.updateQueue,xe!==null&&(ve=xe.retryQueue,ve!==null&&(xe.retryQueue=null,Yn(le,ve))));break;case 19:Mr(he,le),Vn(le),xe&4&&(xe=le.updateQueue,xe!==null&&(le.updateQueue=null,Yn(le,xe)));break;case 30:break;case 21:break;default:Mr(he,le),Vn(le)}}function Vn(le){var he=le.flags;if(he&2){try{for(var ve,xe=le.return;xe!==null;){if(Kn(xe)){ve=xe;break}xe=xe.return}if(ve==null)throw Error(Z(160));switch(ve.tag){case 27:var we=ve.stateNode,Oe=Qs(le);an(le,Oe,we);break;case 5:var Ie=ve.stateNode;ve.flags&32&&(Cs(Ie,""),ve.flags&=-33);var We=Qs(le);an(le,We,Ie);break;case 3:case 4:var at=ve.stateNode.containerInfo,Mt=Qs(le);zi(le,Mt,at);break;default:throw Error(Z(161))}}catch(Vt){xn(le,le.return,Vt)}le.flags&=-3}he&4096&&(le.flags&=-4097)}function $d(le){if(le.subtreeFlags&1024)for(le=le.child;le!==null;){var he=le;$d(he),he.tag===5&&he.flags&1024&&he.stateNode.reset(),le=le.sibling}}function Sa(le,he){if(he.subtreeFlags&8772)for(he=he.child;he!==null;)Xd(le,he.alternate,he),he=he.sibling}function Ro(le){for(le=le.child;le!==null;){var he=le;switch(he.tag){case 0:case 11:case 14:case 15:bs(4,he,he.return),Ro(he);break;case 1:cs(he,he.return);var ve=he.stateNode;typeof ve.componentWillUnmount=="function"&&kh(he,he.return,ve),Ro(he);break;case 27:Vh(he.stateNode);case 26:case 5:cs(he,he.return),Ro(he);break;case 22:he.memoizedState===null&&Ro(he);break;case 30:Ro(he);break;default:Ro(he)}le=le.sibling}}function ln(le,he,ve){for(ve=ve&&(he.subtreeFlags&8772)!==0,he=he.child;he!==null;){var xe=he.alternate,we=le,Oe=he,Ie=Oe.flags;switch(Oe.tag){case 0:case 11:case 15:ln(we,Oe,ve),Ks(4,Oe);break;case 1:if(ln(we,Oe,ve),xe=Oe,we=xe.stateNode,typeof we.componentDidMount=="function")try{we.componentDidMount()}catch(Mt){xn(xe,xe.return,Mt)}if(xe=Oe,we=xe.updateQueue,we!==null){var We=xe.stateNode;try{var at=we.shared.hiddenCallbacks;if(at!==null)for(we.shared.hiddenCallbacks=null,we=0;we<at.length;we++)qs(at[we],We)}catch(Mt){xn(xe,xe.return,Mt)}}ve&&Ie&64&&ro(Oe),Zs(Oe,Oe.return);break;case 27:Hn(Oe);case 26:case 5:ln(we,Oe,ve),ve&&xe===null&&Ie&4&&us(Oe),Zs(Oe,Oe.return);break;case 12:ln(we,Oe,ve);break;case 31:ln(we,Oe,ve),ve&&Ie&4&&hu(we,Oe);break;case 13:ln(we,Oe,ve),ve&&Ie&4&&Uh(we,Oe);break;case 22:Oe.memoizedState===null&&ln(we,Oe,ve),Zs(Oe,Oe.return);break;case 30:break;default:ln(we,Oe,ve)}he=he.sibling}}function du(le,he){var ve=null;le!==null&&le.memoizedState!==null&&le.memoizedState.cachePool!==null&&(ve=le.memoizedState.cachePool.pool),le=null,he.memoizedState!==null&&he.memoizedState.cachePool!==null&&(le=he.memoizedState.cachePool.pool),le!==ve&&(le!=null&&le.refCount++,ve!=null&&dr(ve))}function Ca(le,he){le=null,he.alternate!==null&&(le=he.alternate.memoizedState.cache),he=he.memoizedState.cache,he!==le&&(he.refCount++,le!=null&&dr(le))}function nr(le,he,ve,xe){if(he.subtreeFlags&10256)for(he=he.child;he!==null;)Nn(le,he,ve,xe),he=he.sibling}function Nn(le,he,ve,xe){var we=he.flags;switch(he.tag){case 0:case 11:case 15:nr(le,he,ve,xe),we&2048&&Ks(9,he);break;case 1:nr(le,he,ve,xe);break;case 3:nr(le,he,ve,xe),we&2048&&(le=null,he.alternate!==null&&(le=he.alternate.memoizedState.cache),he=he.memoizedState.cache,he!==le&&(he.refCount++,le!=null&&dr(le)));break;case 12:if(we&2048){nr(le,he,ve,xe),le=he.stateNode;try{var Oe=he.memoizedProps,Ie=Oe.id,We=Oe.onPostCommit;typeof We=="function"&&We(Ie,he.alternate===null?"mount":"update",le.passiveEffectDuration,-0)}catch(at){xn(he,he.return,at)}}else nr(le,he,ve,xe);break;case 31:nr(le,he,ve,xe);break;case 13:nr(le,he,ve,xe);break;case 23:break;case 22:Oe=he.stateNode,Ie=he.alternate,he.memoizedState!==null?Oe._visibility&2?nr(le,he,ve,xe):dl(le,he):Oe._visibility&2?nr(le,he,ve,xe):(Oe._visibility|=2,oo(le,he,ve,xe,(he.subtreeFlags&10256)!==0||!1)),we&2048&&du(Ie,he);break;case 24:nr(le,he,ve,xe),we&2048&&Ca(he.alternate,he);break;default:nr(le,he,ve,xe)}}function oo(le,he,ve,xe,we){for(we=we&&((he.subtreeFlags&10256)!==0||!1),he=he.child;he!==null;){var Oe=le,Ie=he,We=ve,at=xe,Mt=Ie.flags;switch(Ie.tag){case 0:case 11:case 15:oo(Oe,Ie,We,at,we),Ks(8,Ie);break;case 23:break;case 22:var Vt=Ie.stateNode;Ie.memoizedState!==null?Vt._visibility&2?oo(Oe,Ie,We,at,we):dl(Oe,Ie):(Vt._visibility|=2,oo(Oe,Ie,We,at,we)),we&&Mt&2048&&du(Ie.alternate,Ie);break;case 24:oo(Oe,Ie,We,at,we),we&&Mt&2048&&Ca(Ie.alternate,Ie);break;default:oo(Oe,Ie,We,at,we)}he=he.sibling}}function dl(le,he){if(he.subtreeFlags&10256)for(he=he.child;he!==null;){var ve=le,xe=he,we=xe.flags;switch(xe.tag){case 22:dl(ve,xe),we&2048&&du(xe.alternate,xe);break;case 24:dl(ve,xe),we&2048&&Ca(xe.alternate,xe);break;default:dl(ve,xe)}he=he.sibling}}var jn=8192;function Oo(le,he,ve){if(le.subtreeFlags&jn)for(le=le.child;le!==null;)Xn(le,he,ve),le=le.sibling}function Xn(le,he,ve){switch(le.tag){case 26:Oo(le,he,ve),le.flags&jn&&le.memoizedState!==null&&Cp(ve,Xr,le.memoizedState,le.memoizedProps);break;case 5:Oo(le,he,ve);break;case 3:case 4:var xe=Xr;Xr=ef(le.stateNode.containerInfo),Oo(le,he,ve),Xr=xe;break;case 22:le.memoizedState===null&&(xe=le.alternate,xe!==null&&xe.memoizedState!==null?(xe=jn,jn=16777216,Oo(le,he,ve),jn=xe):Oo(le,he,ve));break;default:Oo(le,he,ve)}}function qr(le){var he=le.alternate;if(he!==null&&(le=he.child,le!==null)){he.child=null;do he=le.sibling,le.sibling=null,le=he;while(le!==null)}}function Lr(le){var he=le.deletions;if((le.flags&16)!==0){if(he!==null)for(var ve=0;ve<he.length;ve++){var xe=he[ve];Fn=xe,dc(xe,le)}qr(le)}if(le.subtreeFlags&10256)for(le=le.child;le!==null;)No(le),le=le.sibling}function No(le){switch(le.tag){case 0:case 11:case 15:Lr(le),le.flags&2048&&bs(9,le,le.return);break;case 3:Lr(le);break;case 12:Lr(le);break;case 22:var he=le.stateNode;le.memoizedState!==null&&he._visibility&2&&(le.return===null||le.return.tag!==13)?(he._visibility&=-3,fu(le)):Lr(le);break;default:Lr(le)}}function fu(le){var he=le.deletions;if((le.flags&16)!==0){if(he!==null)for(var ve=0;ve<he.length;ve++){var xe=he[ve];Fn=xe,dc(xe,le)}qr(le)}for(le=le.child;le!==null;){switch(he=le,he.tag){case 0:case 11:case 15:bs(8,he,he.return),fu(he);break;case 22:ve=he.stateNode,ve._visibility&2&&(ve._visibility&=-3,fu(he));break;default:fu(he)}le=le.sibling}}function dc(le,he){for(;Fn!==null;){var ve=Fn;switch(ve.tag){case 0:case 11:case 15:bs(8,ve,he);break;case 23:case 22:if(ve.memoizedState!==null&&ve.memoizedState.cachePool!==null){var xe=ve.memoizedState.cachePool.pool;xe!=null&&xe.refCount++}break;case 24:dr(ve.memoizedState.cache)}if(xe=ve.child,xe!==null)xe.return=ve,Fn=xe;else e:for(ve=le;Fn!==null;){xe=Fn;var we=xe.sibling,Oe=xe.return;if(uu(xe),xe===ve){Fn=null;break e}if(we!==null){we.return=Oe,Fn=we;break e}Fn=Oe}}}var pu={getCacheForType:function(le){var he=lr(Ci),ve=he.data.get(le);return ve===void 0&&(ve=le(),he.data.set(le,ve)),ve},cacheSignal:function(){return lr(Ci).controller.signal}},mu=typeof WeakMap=="function"?WeakMap:Map,Zi=0,cn=null,Fi=null,qi=0,Mi=0,Gi=null,Bi=!1,Vi=!1,gn=!1,qn=0,un=0,hs=0,Ma=0,Ds=0,Qi=0,ds=0,Ls=null,Er=null,$r=!1,Ea=0,fl=0,fs=1/0,pl=null,ea=null,Dn=0,Bs=null,ps=null,Ss=0,Ta=0,Do=null,gu=null,Lo=0,Bo=null;function Br(){return(Zi&2)!==0&&qi!==0?qi&-qi:ke.T!==null?Mf():Bn()}function pe(){if(Qi===0)if((qi&536870912)===0||$i){var le=zt;zt<<=1,(zt&3932160)===0&&(zt=262144),Qi=le}else Qi=536870912;return le=ir.current,le!==null&&(le.flags|=32),Qi}function ge(le,he,ve){(le===cn&&(Mi===2||Mi===9)||le.cancelPendingCommit!==null)&&(xt(le,0),Be(le,qi,Qi,!1)),Ii(le,ve),((Zi&2)===0||le!==cn)&&(le===cn&&((Zi&2)===0&&(Ma|=ve),un===4&&Be(le,qi,Qi,!1)),lo(le))}function Ae(le,he,ve){if((Zi&6)!==0)throw Error(Z(327));var xe=!ve&&(he&127)===0&&(he&le.expiredLanes)===0||hi(le,he),we=xe?ko(le,he):Wr(le,he,!0),Oe=xe;do{if(we===0){Vi&&!xe&&Be(le,he,0,!1);break}else{if(ve=le.current.alternate,Oe&&!Ne(ve)){we=Wr(le,he,!1),Oe=!1;continue}if(we===2){if(Oe=he,le.errorRecoveryDisabledLanes&Oe)var Ie=0;else Ie=le.pendingLanes&-536870913,Ie=Ie!==0?Ie:Ie&536870912?536870912:0;if(Ie!==0){he=Ie;e:{var We=le;we=Ls;var at=We.current.memoizedState.isDehydrated;if(at&&(xt(We,Ie).flags|=256),Ie=Wr(We,Ie,!1),Ie!==2){if(gn&&!at){We.errorRecoveryDisabledLanes|=Oe,Ma|=Oe,we=4;break e}Oe=Er,Er=we,Oe!==null&&(Er===null?Er=Oe:Er.push.apply(Er,Oe))}we=Ie}if(Oe=!1,we!==2)continue}}if(we===1){xt(le,0),Be(le,he,0,!0);break}e:{switch(xe=le,Oe=we,Oe){case 0:case 1:throw Error(Z(345));case 4:if((he&4194048)!==he)break;case 6:Be(xe,he,Qi,!Bi);break e;case 2:Er=null;break;case 3:case 5:break;default:throw Error(Z(329))}if((he&62914560)===he&&(we=Ea+300-He(),10<we)){if(Be(xe,he,Qi,!Bi),Ft(xe,0,!0)!==0)break e;Ss=he,xe.timeoutHandle=d0(Pe.bind(null,xe,ve,Er,pl,$r,he,Qi,Ma,ds,Bi,Oe,"Throttled",-0,0),we);break e}Pe(xe,ve,Er,pl,$r,he,Qi,Ma,ds,Bi,Oe,null,-0,0)}}break}while(!0);lo(le)}function Pe(le,he,ve,xe,we,Oe,Ie,We,at,Mt,Vt,$t,Ot,Bt){if(le.timeoutHandle=-1,$t=he.subtreeFlags,$t&8192||($t&16785408)===16785408){$t={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Is},Xn(he,Oe,$t);var yi=(Oe&62914560)===Oe?Ea-He():(Oe&4194048)===Oe?fl-He():0;if(yi=Mp($t,yi),yi!==null){Ss=Oe,le.cancelPendingCommit=yi(Ni.bind(null,le,he,Oe,ve,xe,we,Ie,We,at,Vt,$t,null,Ot,Bt)),Be(le,Oe,Ie,!Mt);return}}Ni(le,he,Oe,ve,xe,we,Ie,We,at)}function Ne(le){for(var he=le;;){var ve=he.tag;if((ve===0||ve===11||ve===15)&&he.flags&16384&&(ve=he.updateQueue,ve!==null&&(ve=ve.stores,ve!==null)))for(var xe=0;xe<ve.length;xe++){var we=ve[xe],Oe=we.getSnapshot;we=we.value;try{if(!wn(Oe(),we))return!1}catch{return!1}}if(ve=he.child,he.subtreeFlags&16384&&ve!==null)ve.return=he,he=ve;else{if(he===le)break;for(;he.sibling===null;){if(he.return===null||he.return===le)return!0;he=he.return}he.sibling.return=he.return,he=he.sibling}}return!0}function Be(le,he,ve,xe){he&=~Ds,he&=~Ma,le.suspendedLanes|=he,le.pingedLanes&=~he,xe&&(le.warmLanes|=he),xe=le.expirationTimes;for(var we=he;0<we;){var Oe=31-tt(we),Ie=1<<Oe;xe[Oe]=-1,we&=~Ie}ve!==0&&Tr(le,ve,he)}function Je(){return(Zi&6)===0?(Ih(0),!1):!0}function st(){if(Fi!==null){if(Mi===0)var le=Fi.return;else le=Fi,xr=fa=null,ph(le),$a=null,Wa=0,le=Fi;for(;le!==null;)Po(le.alternate,le),le=le.return;Fi=null}}function xt(le,he){var ve=le.timeoutHandle;ve!==-1&&(le.timeoutHandle=-1,ap(ve)),ve=le.cancelPendingCommit,ve!==null&&(le.cancelPendingCommit=null,ve()),Ss=0,st(),cn=le,Fi=ve=Vs(le.current,null),qi=he,Mi=0,Gi=null,Bi=!1,Vi=hi(le,he),gn=!1,ds=Qi=Ds=Ma=hs=un=0,Er=Ls=null,$r=!1,(he&8)!==0&&(he|=he&32);var xe=le.entangledLanes;if(xe!==0)for(le=le.entanglements,xe&=he;0<xe;){var we=31-tt(xe),Oe=1<<we;he|=le[we],xe&=~Oe}return qn=he,Va(),ve}function Gt(le,he){Oi=null,ke.H=ec,he===qa||he===Ps?(he=Hc(),Mi=3):he===Hl?(he=Hc(),Mi=4):Mi=he===ou?8:he!==null&&typeof he=="object"&&typeof he.then=="function"?6:1,Gi=he,Fi===null&&(un=1,au(le,Fr(he,le.current)))}function oi(){var le=ir.current;return le===null?!0:(qi&4194048)===qi?vs===null:(qi&62914560)===qi||(qi&536870912)!==0?le===vs:!1}function mi(){var le=ke.H;return ke.H=ec,le===null?ec:le}function gi(){var le=ke.A;return ke.A=pu,le}function Li(){un=4,Bi||(qi&4194048)!==qi&&ir.current!==null||(Vi=!0),(hs&134217727)===0&&(Ma&134217727)===0||cn===null||Be(cn,qi,Qi,!1)}function Wr(le,he,ve){var xe=Zi;Zi|=2;var we=mi(),Oe=gi();(cn!==le||qi!==he)&&(pl=null,xt(le,he)),he=!1;var Ie=un;e:do try{if(Mi!==0&&Fi!==null){var We=Fi,at=Gi;switch(Mi){case 8:st(),Ie=6;break e;case 3:case 2:case 9:case 6:ir.current===null&&(he=!0);var Mt=Mi;if(Mi=0,Gi=null,ni(le,We,at,Mt),ve&&Vi){Ie=0;break e}break;default:Mt=Mi,Mi=0,Gi=null,ni(le,We,at,Mt)}}fc(),Ie=un;break}catch(Vt){Gt(le,Vt)}while(!0);return he&&le.shellSuspendCounter++,xr=fa=null,Zi=xe,ke.H=we,ke.A=Oe,Fi===null&&(cn=null,qi=0,Va()),Ie}function fc(){for(;Fi!==null;)yt(Fi)}function ko(le,he){var ve=Zi;Zi|=2;var xe=mi(),we=gi();cn!==le||qi!==he?(pl=null,fs=He()+500,xt(le,he)):Vi=hi(le,he);e:do try{if(Mi!==0&&Fi!==null){he=Fi;var Oe=Gi;t:switch(Mi){case 1:Mi=0,Gi=null,ni(le,he,Oe,1);break;case 2:case 9:if(yd(Oe)){Mi=0,Gi=null,Dt(he);break}he=function(){Mi!==2&&Mi!==9||cn!==le||(Mi=7),lo(le)},Oe.then(he,he);break e;case 3:Mi=7;break e;case 4:Mi=5;break e;case 7:yd(Oe)?(Mi=0,Gi=null,Dt(he)):(Mi=0,Gi=null,ni(le,he,Oe,7));break;case 5:var Ie=null;switch(Fi.tag){case 26:Ie=Fi.memoizedState;case 5:case 27:var We=Fi;if(Ie?T0(Ie):We.stateNode.complete){Mi=0,Gi=null;var at=We.sibling;if(at!==null)Fi=at;else{var Mt=We.return;Mt!==null?(Fi=Mt,Ai(Mt)):Fi=null}break t}}Mi=0,Gi=null,ni(le,he,Oe,5);break;case 6:Mi=0,Gi=null,ni(le,he,Oe,6);break;case 8:st(),un=6;break e;default:throw Error(Z(462))}}wt();break}catch(Vt){Gt(le,Vt)}while(!0);return xr=fa=null,ke.H=xe,ke.A=we,Zi=ve,Fi!==null?0:(cn=null,qi=0,Va(),un)}function wt(){for(;Fi!==null&&!di();)yt(Fi)}function yt(le){var he=lu(le.alternate,le,qn);le.memoizedProps=le.pendingProps,he===null?Ai(le):Fi=he}function Dt(le){var he=le,ve=he.alternate;switch(he.tag){case 15:case 0:he=Sr(ve,he,he.pendingProps,he.type,void 0,qi);break;case 11:he=Sr(ve,he,he.pendingProps,he.type.render,he.ref,qi);break;case 5:ph(he);default:Po(ve,he),he=Fi=br(he,qn),he=lu(ve,he,qn)}le.memoizedProps=le.pendingProps,he===null?Ai(le):Fi=he}function ni(le,he,ve,xe){xr=fa=null,ph(he),$a=null,Wa=0;var we=he.return;try{if(rs(le,we,he,ve,qi)){un=1,au(le,Fr(ve,le.current)),Fi=null;return}}catch(Oe){if(we!==null)throw Fi=we,Oe;un=1,au(le,Fr(ve,le.current)),Fi=null;return}he.flags&32768?($i||xe===1?le=!0:Vi||(qi&536870912)!==0?le=!1:(Bi=le=!0,(xe===2||xe===9||xe===3||xe===6)&&(xe=ir.current,xe!==null&&xe.tag===13&&(xe.flags|=16384))),Sn(he,le)):Ai(he)}function Ai(le){var he=le;do{if((he.flags&32768)!==0){Sn(he,Bi);return}le=he.return;var ve=Bh(he.alternate,he,qn);if(ve!==null){Fi=ve;return}if(he=he.sibling,he!==null){Fi=he;return}Fi=he=le}while(he!==null);un===0&&(un=5)}function Sn(le,he){do{var ve=cu(le.alternate,le);if(ve!==null){ve.flags&=32767,Fi=ve;return}if(ve=le.return,ve!==null&&(ve.flags|=32768,ve.subtreeFlags=0,ve.deletions=null),!he&&(le=le.sibling,le!==null)){Fi=le;return}Fi=le=ve}while(le!==null);un=6,Fi=null}function Ni(le,he,ve,xe,we,Oe,Ie,We,at){le.cancelPendingCommit=null;do vu();while(Dn!==0);if((Zi&6)!==0)throw Error(Z(327));if(he!==null){if(he===le.current)throw Error(Z(177));if(Oe=he.lanes|he.childLanes,Oe|=Bc,vn(le,ve,Oe,Ie,We,at),le===cn&&(Fi=cn=null,qi=0),ps=he,Bs=le,Ss=ve,Ta=Oe,Do=we,gu=xe,(he.subtreeFlags&10256)!==0||(he.flags&10256)!==0?(le.callbackNode=null,le.callbackPriority=0,q0(Nt,function(){return Wf(),null})):(le.callbackNode=null,le.callbackPriority=0),xe=(he.flags&13878)!==0,(he.subtreeFlags&13878)!==0||xe){xe=ke.T,ke.T=null,we=Fe.p,Fe.p=2,Ie=Zi,Zi|=4;try{hl(le,he,ve)}finally{Zi=Ie,Fe.p=we,ke.T=xe}}Dn=1,rn(),rr(),sn()}}function rn(){if(Dn===1){Dn=0;var le=Bs,he=ps,ve=(he.flags&13878)!==0;if((he.subtreeFlags&13878)!==0||ve){ve=ke.T,ke.T=null;var xe=Fe.p;Fe.p=2;var we=Zi;Zi|=4;try{ao(he,le);var Oe=Df,Ie=Pc(le.containerInfo),We=Oe.focusedElem,at=Oe.selectionRange;if(Ie!==We&&We&&We.ownerDocument&&wc(We.ownerDocument.documentElement,We)){if(at!==null&&Ho(We)){var Mt=at.start,Vt=at.end;if(Vt===void 0&&(Vt=Mt),"selectionStart"in We)We.selectionStart=Mt,We.selectionEnd=Math.min(Vt,We.value.length);else{var $t=We.ownerDocument||document,Ot=$t&&$t.defaultView||window;if(Ot.getSelection){var Bt=Ot.getSelection(),yi=We.textContent.length,Ri=Math.min(at.start,yi),Mn=at.end===void 0?Ri:Math.min(at.end,yi);!Bt.extend&&Ri>Mn&&(Ie=Mn,Mn=Ri,Ri=Ie);var bt=ju(We,Ri),ht=ju(We,Mn);if(bt&&ht&&(Bt.rangeCount!==1||Bt.anchorNode!==bt.node||Bt.anchorOffset!==bt.offset||Bt.focusNode!==ht.node||Bt.focusOffset!==ht.offset)){var Ct=$t.createRange();Ct.setStart(bt.node,bt.offset),Bt.removeAllRanges(),Ri>Mn?(Bt.addRange(Ct),Bt.extend(ht.node,ht.offset)):(Ct.setEnd(ht.node,ht.offset),Bt.addRange(Ct))}}}}for($t=[],Bt=We;Bt=Bt.parentNode;)Bt.nodeType===1&&$t.push({element:Bt,left:Bt.scrollLeft,top:Bt.scrollTop});for(typeof We.focus=="function"&&We.focus(),We=0;We<$t.length;We++){var Xt=$t[We];Xt.element.scrollLeft=Xt.left,Xt.element.scrollTop=Xt.top}}of=!!Nf,Df=Nf=null}finally{Zi=we,Fe.p=xe,ke.T=ve}}le.current=he,Dn=2}}function rr(){if(Dn===2){Dn=0;var le=Bs,he=ps,ve=(he.flags&8772)!==0;if((he.subtreeFlags&8772)!==0||ve){ve=ke.T,ke.T=null;var xe=Fe.p;Fe.p=2;var we=Zi;Zi|=4;try{Xd(le,he.alternate,he)}finally{Zi=we,Fe.p=xe,ke.T=ve}}Dn=3}}function sn(){if(Dn===4||Dn===3){Dn=0,Qe();var le=Bs,he=ps,ve=Ss,xe=gu;(he.subtreeFlags&10256)!==0||(he.flags&10256)!==0?Dn=5:(Dn=0,ps=Bs=null,wa(le,le.pendingLanes));var we=le.pendingLanes;if(we===0&&(ea=null),Ur(ve),he=he.stateNode,Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(Rt,he,void 0,(he.current.flags&128)===128)}catch{}if(xe!==null){he=ke.T,we=Fe.p,Fe.p=2,ke.T=null;try{for(var Oe=le.onRecoverableError,Ie=0;Ie<xe.length;Ie++){var We=xe[Ie];Oe(We.value,{componentStack:We.stack})}}finally{ke.T=he,Fe.p=we}}(Ss&3)!==0&&vu(),lo(le),we=le.pendingLanes,(ve&261930)!==0&&(we&42)!==0?le===Bo?Lo++:(Lo=0,Bo=le):Lo=0,Ih(0)}}function wa(le,he){(le.pooledCacheLanes&=he)===0&&(he=le.pooledCache,he!=null&&(le.pooledCache=null,dr(he)))}function vu(){return rn(),rr(),sn(),Wf()}function Wf(){if(Dn!==5)return!1;var le=Bs,he=Ta;Ta=0;var ve=Ur(Ss),xe=ke.T,we=Fe.p;try{Fe.p=32>ve?32:ve,ke.T=null,ve=Do,Do=null;var Oe=Bs,Ie=Ss;if(Dn=0,ps=Bs=null,Ss=0,(Zi&6)!==0)throw Error(Z(331));var We=Zi;if(Zi|=4,No(Oe.current),Nn(Oe,Oe.current,Ie,ve),Zi=We,Ih(0,!1),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(Rt,Oe)}catch{}return!0}finally{Fe.p=we,ke.T=xe,wa(le,he)}}function Jf(le,he,ve){he=Fr(ve,he),he=Lh(le.stateNode,he,2),le=va(le,he,2),le!==null&&(Ii(le,2),lo(le))}function xn(le,he,ve){if(le.tag===3)Jf(le,le,ve);else for(;he!==null;){if(he.tag===3){Jf(he,le,ve);break}else if(he.tag===1){var xe=he.stateNode;if(typeof he.type.getDerivedStateFromError=="function"||typeof xe.componentDidCatch=="function"&&(ea===null||!ea.has(xe))){le=Fr(ve,le),ve=al(2),xe=va(he,ve,2),xe!==null&&(Hr(ve,xe,he,le),Ii(xe,2),lo(xe));break}}he=he.return}}function Af(le,he,ve){var xe=le.pingCache;if(xe===null){xe=le.pingCache=new mu;var we=new Set;xe.set(he,we)}else we=xe.get(he),we===void 0&&(we=new Set,xe.set(he,we));we.has(ve)||(gn=!0,we.add(ve),le=H0.bind(null,le,he,ve),he.then(le,le))}function H0(le,he,ve){var xe=le.pingCache;xe!==null&&xe.delete(he),le.pingedLanes|=le.suspendedLanes&ve,le.warmLanes&=~ve,cn===le&&(qi&ve)===ve&&(un===4||un===3&&(qi&62914560)===qi&&300>He()-Ea?(Zi&2)===0&&xt(le,0):Ds|=ve,ds===qi&&(ds=0)),lo(le)}function Kf(le,he){he===0&&(he=Di()),le=ja(le,he),le!==null&&(Ii(le,he),lo(le))}function Y0(le){var he=le.memoizedState,ve=0;he!==null&&(ve=he.retryLane),Kf(le,ve)}function X0(le,he){var ve=0;switch(le.tag){case 31:case 13:var xe=le.stateNode,we=le.memoizedState;we!==null&&(ve=we.retryLane);break;case 19:xe=le.stateNode;break;case 22:xe=le.stateNode._retryCache;break;default:throw Error(Z(314))}xe!==null&&xe.delete(he),Kf(le,ve)}function q0(le,he){return ri(le,he)}var Wd=null,_u=null,Sf=!1,Jd=!1,Cf=!1,ml=0;function lo(le){le!==_u&&le.next===null&&(_u===null?Wd=_u=le:_u=_u.next=le),Jd=!0,Sf||(Sf=!0,W0())}function Ih(le,he){if(!Cf&&Jd){Cf=!0;do for(var ve=!1,xe=Wd;xe!==null;){if(le!==0){var we=xe.pendingLanes;if(we===0)var Oe=0;else{var Ie=xe.suspendedLanes,We=xe.pingedLanes;Oe=(1<<31-tt(42|le)+1)-1,Oe&=we&~(Ie&~We),Oe=Oe&201326741?Oe&201326741|1:Oe?Oe|2:0}Oe!==0&&(ve=!0,t0(xe,Oe))}else Oe=qi,Oe=Ft(xe,xe===cn?Oe:0,xe.cancelPendingCommit!==null||xe.timeoutHandle!==-1),(Oe&3)===0||hi(xe,Oe)||(ve=!0,t0(xe,Oe));xe=xe.next}while(ve);Cf=!1}}function $0(){Zf()}function Zf(){Jd=Sf=!1;var le=0;ml!==0&&sp()&&(le=ml);for(var he=He(),ve=null,xe=Wd;xe!==null;){var we=xe.next,Oe=Qf(xe,he);Oe===0?(xe.next=null,ve===null?Wd=we:ve.next=we,we===null&&(_u=ve)):(ve=xe,(le!==0||(Oe&3)!==0)&&(Jd=!0)),xe=we}Dn!==0&&Dn!==5||Ih(le),ml!==0&&(ml=0)}function Qf(le,he){for(var ve=le.suspendedLanes,xe=le.pingedLanes,we=le.expirationTimes,Oe=le.pendingLanes&-62914561;0<Oe;){var Ie=31-tt(Oe),We=1<<Ie,at=we[Ie];at===-1?((We&ve)===0||(We&xe)!==0)&&(we[Ie]=pi(We,he)):at<=he&&(le.expiredLanes|=We),Oe&=~We}if(he=cn,ve=qi,ve=Ft(le,le===he?ve:0,le.cancelPendingCommit!==null||le.timeoutHandle!==-1),xe=le.callbackNode,ve===0||le===he&&(Mi===2||Mi===9)||le.cancelPendingCommit!==null)return xe!==null&&xe!==null&&ti(xe),le.callbackNode=null,le.callbackPriority=0;if((ve&3)===0||hi(le,ve)){if(he=ve&-ve,he===le.callbackPriority)return he;switch(xe!==null&&ti(xe),Ur(ve)){case 2:case 8:ve=At;break;case 32:ve=Nt;break;case 268435456:ve=Kt;break;default:ve=Nt}return xe=e0.bind(null,le),ve=ri(ve,xe),le.callbackPriority=he,le.callbackNode=ve,he}return xe!==null&&xe!==null&&ti(xe),le.callbackPriority=2,le.callbackNode=null,2}function e0(le,he){if(Dn!==0&&Dn!==5)return le.callbackNode=null,le.callbackPriority=0,null;var ve=le.callbackNode;if(vu()&&le.callbackNode!==ve)return null;var xe=qi;return xe=Ft(le,le===cn?xe:0,le.cancelPendingCommit!==null||le.timeoutHandle!==-1),xe===0?null:(Ae(le,xe,he),Qf(le,He()),le.callbackNode!=null&&le.callbackNode===ve?e0.bind(null,le):null)}function t0(le,he){if(vu())return null;Ae(le,he,!0)}function W0(){lp(function(){(Zi&6)!==0?ri(dt,$0):Zf()})}function Mf(){if(ml===0){var le=ga;le===0&&(le=Qt,Qt<<=1,(Qt&261888)===0&&(Qt=256)),ml=le}return ml}function i0(le){return le==null||typeof le=="symbol"||typeof le=="boolean"?null:typeof le=="function"?le:Ml(""+le)}function n0(le,he){var ve=he.ownerDocument.createElement("input");return ve.name=he.name,ve.value=he.value,le.id&&ve.setAttribute("form",le.id),he.parentNode.insertBefore(ve,he),le=new FormData(le),ve.parentNode.removeChild(ve),le}function J0(le,he,ve,xe,we){if(he==="submit"&&ve&&ve.stateNode===we){var Oe=i0((we[On]||null).action),Ie=xe.submitter;Ie&&(he=(he=Ie[On]||null)?i0(he.formAction):Ie.getAttribute("formAction"),he!==null&&(Oe=he,Ie=null));var We=new Pl("action","action",null,xe,we);le.push({event:We,listeners:[{instance:null,listener:function(){if(xe.defaultPrevented){if(ml!==0){var at=Ie?n0(we,Ie):new FormData(we);Ph(ve,{pending:!0,data:at,method:we.method,action:Oe},null,at)}}else typeof Oe=="function"&&(We.preventDefault(),at=Ie?n0(we,Ie):new FormData(we),Ph(ve,{pending:!0,data:at,method:we.method,action:Oe},Oe,at))},currentTarget:we}]})}}for(var Ef=0;Ef<Lc.length;Ef++){var Tf=Lc[Ef],K0=Tf.toLowerCase(),Z0=Tf[0].toUpperCase()+Tf.slice(1);yr(K0,"on"+Z0)}yr(zr,"onAnimationEnd"),yr(Gu,"onAnimationIteration"),yr(Fs,"onAnimationStart"),yr("dblclick","onDoubleClick"),yr("focusin","onFocus"),yr("focusout","onBlur"),yr($o,"onTransitionRun"),yr(za,"onTransitionStart"),yr(Hu,"onTransitionCancel"),yr(Nc,"onTransitionEnd"),ui("onMouseEnter",["mouseout","mouseover"]),ui("onMouseLeave",["mouseout","mouseover"]),ui("onPointerEnter",["pointerout","pointerover"]),ui("onPointerLeave",["pointerout","pointerover"]),ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ci("onBeforeInput",["compositionend","keypress","textInput","paste"]),ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zh));function r0(le,he){he=(he&4)!==0;for(var ve=0;ve<le.length;ve++){var xe=le[ve],we=xe.event;xe=xe.listeners;e:{var Oe=void 0;if(he)for(var Ie=xe.length-1;0<=Ie;Ie--){var We=xe[Ie],at=We.instance,Mt=We.currentTarget;if(We=We.listener,at!==Oe&&we.isPropagationStopped())break e;Oe=We,we.currentTarget=Mt;try{Oe(we)}catch(Vt){Fa(Vt)}we.currentTarget=null,Oe=at}else for(Ie=0;Ie<xe.length;Ie++){if(We=xe[Ie],at=We.instance,Mt=We.currentTarget,We=We.listener,at!==Oe&&we.isPropagationStopped())break e;Oe=We,we.currentTarget=Mt;try{Oe(we)}catch(Vt){Fa(Vt)}we.currentTarget=null,Oe=at}}}}function Wi(le,he){var ve=he[ks];ve===void 0&&(ve=he[ks]=new Set);var xe=le+"__bubble";ve.has(xe)||(s0(he,le,2,!1),ve.add(xe))}function wf(le,he,ve){var xe=0;he&&(xe|=4),s0(ve,le,xe,he)}var Kd="_reactListening"+Math.random().toString(36).slice(2);function Pf(le){if(!le[Kd]){le[Kd]=!0,ut.forEach(function(ve){ve!=="selectionchange"&&(Q0.has(ve)||wf(ve,!1,le),wf(ve,!0,le))});var he=le.nodeType===9?le:le.ownerDocument;he===null||he[Kd]||(he[Kd]=!0,wf("selectionchange",!1,he))}}function s0(le,he,ve,xe){switch(L0(he)){case 2:var we=wp;break;case 8:we=Pp;break;default:we=Hf}ve=we.bind(null,he,ve,le),we=void 0,!gc||he!=="touchstart"&&he!=="touchmove"&&he!=="wheel"||(we=!0),xe?we!==void 0?le.addEventListener(he,ve,{capture:!0,passive:we}):le.addEventListener(he,ve,!0):we!==void 0?le.addEventListener(he,ve,{passive:we}):le.addEventListener(he,ve,!1)}function Rf(le,he,ve,xe,we){var Oe=xe;if((he&1)===0&&(he&2)===0&&xe!==null)e:for(;;){if(xe===null)return;var Ie=xe.tag;if(Ie===3||Ie===4){var We=xe.stateNode.containerInfo;if(We===we)break;if(Ie===4)for(Ie=xe.return;Ie!==null;){var at=Ie.tag;if((at===3||at===4)&&Ie.stateNode.containerInfo===we)return;Ie=Ie.return}for(;We!==null;){if(Ie=Ht(We),Ie===null)return;if(at=Ie.tag,at===5||at===6||at===26||at===27){xe=Oe=Ie;continue e}We=We.parentNode}}xe=xe.return}Mu(function(){var Mt=Oe,Vt=pc(ve),$t=[];e:{var Ot=ca.get(le);if(Ot!==void 0){var Bt=Pl,yi=le;switch(le){case"keypress":if(ho(ve)===0)break e;case"keydown":case"keyup":Bt=Nu;break;case"focusin":yi="focus",Bt=xc;break;case"focusout":yi="blur",Bt=xc;break;case"beforeblur":case"afterblur":Bt=xc;break;case"click":if(ve.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Bt=Jh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Bt=Kh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Bt=oa;break;case zr:case Gu:case Fs:Bt=ed;break;case Nc:Bt=pf;break;case"scroll":case"scrollend":Bt=yc;break;case"wheel":Bt=Da;break;case"copy":case"cut":case"paste":Bt=Tu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Bt=Ac;break;case"toggle":case"beforetoggle":Bt=Lu}var Ri=(he&4)!==0,Mn=!Ri&&(le==="scroll"||le==="scrollend"),bt=Ri?Ot!==null?Ot+"Capture":null:Ot;Ri=[];for(var ht=Mt,Ct;ht!==null;){var Xt=ht;if(Ct=Xt.stateNode,Xt=Xt.tag,Xt!==5&&Xt!==26&&Xt!==27||Ct===null||bt===null||(Xt=uo(ht,bt),Xt!=null&&Ri.push(Fh(ht,Xt,Ct))),Mn)break;ht=ht.return}0<Ri.length&&(Ot=new Bt(Ot,yi,null,ve,Vt),$t.push({event:Ot,listeners:Ri}))}}if((he&7)===0){e:{if(Ot=le==="mouseover"||le==="pointerover",Bt=le==="mouseout"||le==="pointerout",Ot&&ve!==El&&(yi=ve.relatedTarget||ve.fromElement)&&(Ht(yi)||yi[Ir]))break e;if((Bt||Ot)&&(Ot=Vt.window===Vt?Vt:(Ot=Vt.ownerDocument)?Ot.defaultView||Ot.parentWindow:window,Bt?(yi=ve.relatedTarget||ve.toElement,Bt=Mt,yi=yi?Ht(yi):null,yi!==null&&(Mn=ee(yi),Ri=yi.tag,yi!==Mn||Ri!==5&&Ri!==27&&Ri!==6)&&(yi=null)):(Bt=null,yi=Mt),Bt!==yi)){if(Ri=Jh,Xt="onMouseLeave",bt="onMouseEnter",ht="mouse",(le==="pointerout"||le==="pointerover")&&(Ri=Ac,Xt="onPointerLeave",bt="onPointerEnter",ht="pointer"),Mn=Bt==null?Ot:nt(Bt),Ct=yi==null?Ot:nt(yi),Ot=new Ri(Xt,ht+"leave",Bt,ve,Vt),Ot.target=Mn,Ot.relatedTarget=Ct,Xt=null,Ht(Vt)===Mt&&(Ri=new Ri(bt,ht+"enter",yi,ve,Vt),Ri.target=Ct,Ri.relatedTarget=Mn,Xt=Ri),Mn=Xt,Bt&&yi)t:{for(Ri=ep,bt=Bt,ht=yi,Ct=0,Xt=bt;Xt;Xt=Ri(Xt))Ct++;Xt=0;for(var wi=ht;wi;wi=Ri(wi))Xt++;for(;0<Ct-Xt;)bt=Ri(bt),Ct--;for(;0<Xt-Ct;)ht=Ri(ht),Xt--;for(;Ct--;){if(bt===ht||ht!==null&&bt===ht.alternate){Ri=bt;break t}bt=Ri(bt),ht=Ri(ht)}Ri=null}else Ri=null;Bt!==null&&a0($t,Ot,Bt,Ri,!1),yi!==null&&Mn!==null&&a0($t,Mn,yi,Ri,!0)}}e:{if(Ot=Mt?nt(Mt):window,Bt=Ot.nodeName&&Ot.nodeName.toLowerCase(),Bt==="select"||Bt==="input"&&Ot.type==="file")var hn=zu;else if(Uu(Ot))if(Bl)hn=hd;else{hn=ka;var xi=kl}else Bt=Ot.nodeName,!Bt||Bt.toLowerCase()!=="input"||Ot.type!=="checkbox"&&Ot.type!=="radio"?Mt&&Cl(Mt.elementType)&&(hn=zu):hn=ud;if(hn&&(hn=hn(le,Mt))){Ec($t,hn,ve,Vt);break e}xi&&xi(le,Ot,Mt),le==="focusout"&&Mt&&Ot.type==="number"&&Mt.memoizedProps.value!=null&&Qn(Ot,"number",Ot.value)}switch(xi=Mt?nt(Mt):window,le){case"focusin":(Uu(xi)||xi.contentEditable==="true")&&(Yo=xi,Rc=Mt,Xo=null);break;case"focusout":Xo=Rc=Yo=null;break;case"mousedown":Kr=!0;break;case"contextmenu":case"mouseup":case"dragend":Kr=!1,Oc($t,ve,Vt);break;case"selectionchange":if(dd)break;case"keydown":case"keyup":Oc($t,ve,Vt)}var ji;if(fo)e:{switch(le){case"compositionstart":var en="onCompositionStart";break e;case"compositionend":en="onCompositionEnd";break e;case"compositionupdate":en="onCompositionUpdate";break e}en=void 0}else Ba?Cc(le,ve)&&(en="onCompositionEnd"):le==="keydown"&&ve.keyCode===229&&(en="onCompositionStart");en&&(hr&&ve.locale!=="ko"&&(Ba||en!=="onCompositionStart"?en==="onCompositionEnd"&&Ba&&(ji=_c()):(Ra=Vt,vc="value"in Ra?Ra.value:Ra.textContent,Ba=!0)),xi=Zd(Mt,en),0<xi.length&&(en=new wu(en,le,null,ve,Vt),$t.push({event:en,listeners:xi}),ji?en.data=ji:(ji=zo(ve),ji!==null&&(en.data=ji)))),(ji=po?Mc(le,ve):od(le,ve))&&(en=Zd(Mt,"onBeforeInput"),0<en.length&&(xi=new wu("onBeforeInput","beforeinput",null,ve,Vt),$t.push({event:xi,listeners:en}),xi.data=ji)),J0($t,le,Mt,ve,Vt)}r0($t,he)})}function Fh(le,he,ve){return{instance:le,listener:he,currentTarget:ve}}function Zd(le,he){for(var ve=he+"Capture",xe=[];le!==null;){var we=le,Oe=we.stateNode;if(we=we.tag,we!==5&&we!==26&&we!==27||Oe===null||(we=uo(le,ve),we!=null&&xe.unshift(Fh(le,we,Oe)),we=uo(le,he),we!=null&&xe.push(Fh(le,we,Oe))),le.tag===3)return xe;le=le.return}return[]}function ep(le){if(le===null)return null;do le=le.return;while(le&&le.tag!==5&&le.tag!==27);return le||null}function a0(le,he,ve,xe,we){for(var Oe=he._reactName,Ie=[];ve!==null&&ve!==xe;){var We=ve,at=We.alternate,Mt=We.stateNode;if(We=We.tag,at!==null&&at===xe)break;We!==5&&We!==26&&We!==27||Mt===null||(at=Mt,we?(Mt=uo(ve,Oe),Mt!=null&&Ie.unshift(Fh(ve,Mt,at))):we||(Mt=uo(ve,Oe),Mt!=null&&Ie.push(Fh(ve,Mt,at)))),ve=ve.return}Ie.length!==0&&le.push({event:he,listeners:Ie})}var tp=/\r\n?/g,ip=/\u0000|\uFFFD/g;function o0(le){return(typeof le=="string"?le:""+le).replace(tp,`
`).replace(ip,"")}function l0(le,he){return he=o0(he),o0(le)===he}function Cn(le,he,ve,xe,we,Oe){switch(ve){case"children":typeof xe=="string"?he==="body"||he==="textarea"&&xe===""||Cs(le,xe):(typeof xe=="number"||typeof xe=="bigint")&&he!=="body"&&Cs(le,""+xe);break;case"className":Ji(le,"class",xe);break;case"tabIndex":Ji(le,"tabindex",xe);break;case"dir":case"role":case"viewBox":case"width":case"height":Ji(le,ve,xe);break;case"style":Su(le,xe,Oe);break;case"data":if(he!=="object"){Ji(le,"data",xe);break}case"src":case"href":if(xe===""&&(he!=="a"||ve!=="href")){le.removeAttribute(ve);break}if(xe==null||typeof xe=="function"||typeof xe=="symbol"||typeof xe=="boolean"){le.removeAttribute(ve);break}xe=Ml(""+xe),le.setAttribute(ve,xe);break;case"action":case"formAction":if(typeof xe=="function"){le.setAttribute(ve,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Oe=="function"&&(ve==="formAction"?(he!=="input"&&Cn(le,he,"name",we.name,we,null),Cn(le,he,"formEncType",we.formEncType,we,null),Cn(le,he,"formMethod",we.formMethod,we,null),Cn(le,he,"formTarget",we.formTarget,we,null)):(Cn(le,he,"encType",we.encType,we,null),Cn(le,he,"method",we.method,we,null),Cn(le,he,"target",we.target,we,null)));if(xe==null||typeof xe=="symbol"||typeof xe=="boolean"){le.removeAttribute(ve);break}xe=Ml(""+xe),le.setAttribute(ve,xe);break;case"onClick":xe!=null&&(le.onclick=Is);break;case"onScroll":xe!=null&&Wi("scroll",le);break;case"onScrollEnd":xe!=null&&Wi("scrollend",le);break;case"dangerouslySetInnerHTML":if(xe!=null){if(typeof xe!="object"||!("__html"in xe))throw Error(Z(61));if(ve=xe.__html,ve!=null){if(we.children!=null)throw Error(Z(60));le.innerHTML=ve}}break;case"multiple":le.multiple=xe&&typeof xe!="function"&&typeof xe!="symbol";break;case"muted":le.muted=xe&&typeof xe!="function"&&typeof xe!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(xe==null||typeof xe=="function"||typeof xe=="boolean"||typeof xe=="symbol"){le.removeAttribute("xlink:href");break}ve=Ml(""+xe),le.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",ve);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":xe!=null&&typeof xe!="function"&&typeof xe!="symbol"?le.setAttribute(ve,""+xe):le.removeAttribute(ve);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":xe&&typeof xe!="function"&&typeof xe!="symbol"?le.setAttribute(ve,""):le.removeAttribute(ve);break;case"capture":case"download":xe===!0?le.setAttribute(ve,""):xe!==!1&&xe!=null&&typeof xe!="function"&&typeof xe!="symbol"?le.setAttribute(ve,xe):le.removeAttribute(ve);break;case"cols":case"rows":case"size":case"span":xe!=null&&typeof xe!="function"&&typeof xe!="symbol"&&!isNaN(xe)&&1<=xe?le.setAttribute(ve,xe):le.removeAttribute(ve);break;case"rowSpan":case"start":xe==null||typeof xe=="function"||typeof xe=="symbol"||isNaN(xe)?le.removeAttribute(ve):le.setAttribute(ve,xe);break;case"popover":Wi("beforetoggle",le),Wi("toggle",le),Ui(le,"popover",xe);break;case"xlinkActuate":Ki(le,"http://www.w3.org/1999/xlink","xlink:actuate",xe);break;case"xlinkArcrole":Ki(le,"http://www.w3.org/1999/xlink","xlink:arcrole",xe);break;case"xlinkRole":Ki(le,"http://www.w3.org/1999/xlink","xlink:role",xe);break;case"xlinkShow":Ki(le,"http://www.w3.org/1999/xlink","xlink:show",xe);break;case"xlinkTitle":Ki(le,"http://www.w3.org/1999/xlink","xlink:title",xe);break;case"xlinkType":Ki(le,"http://www.w3.org/1999/xlink","xlink:type",xe);break;case"xmlBase":Ki(le,"http://www.w3.org/XML/1998/namespace","xml:base",xe);break;case"xmlLang":Ki(le,"http://www.w3.org/XML/1998/namespace","xml:lang",xe);break;case"xmlSpace":Ki(le,"http://www.w3.org/XML/1998/namespace","xml:space",xe);break;case"is":Ui(le,"is",xe);break;case"innerText":case"textContent":break;default:(!(2<ve.length)||ve[0]!=="o"&&ve[0]!=="O"||ve[1]!=="n"&&ve[1]!=="N")&&(ve=$h.get(ve)||ve,Ui(le,ve,xe))}}function Of(le,he,ve,xe,we,Oe){switch(ve){case"style":Su(le,xe,Oe);break;case"dangerouslySetInnerHTML":if(xe!=null){if(typeof xe!="object"||!("__html"in xe))throw Error(Z(61));if(ve=xe.__html,ve!=null){if(we.children!=null)throw Error(Z(60));le.innerHTML=ve}}break;case"children":typeof xe=="string"?Cs(le,xe):(typeof xe=="number"||typeof xe=="bigint")&&Cs(le,""+xe);break;case"onScroll":xe!=null&&Wi("scroll",le);break;case"onScrollEnd":xe!=null&&Wi("scrollend",le);break;case"onClick":xe!=null&&(le.onclick=Is);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ii.hasOwnProperty(ve))e:{if(ve[0]==="o"&&ve[1]==="n"&&(we=ve.endsWith("Capture"),he=ve.slice(2,we?ve.length-7:void 0),Oe=le[On]||null,Oe=Oe!=null?Oe[ve]:null,typeof Oe=="function"&&le.removeEventListener(he,Oe,we),typeof xe=="function")){typeof Oe!="function"&&Oe!==null&&(ve in le?le[ve]=null:le.hasAttribute(ve)&&le.removeAttribute(ve)),le.addEventListener(he,xe,we);break e}ve in le?le[ve]=xe:xe===!0?le.setAttribute(ve,""):Ui(le,ve,xe)}}}function kr(le,he,ve){switch(he){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Wi("error",le),Wi("load",le);var xe=!1,we=!1,Oe;for(Oe in ve)if(ve.hasOwnProperty(Oe)){var Ie=ve[Oe];if(Ie!=null)switch(Oe){case"src":xe=!0;break;case"srcSet":we=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(Z(137,he));default:Cn(le,he,Oe,Ie,ve,null)}}we&&Cn(le,he,"srcSet",ve.srcSet,ve,null),xe&&Cn(le,he,"src",ve.src,ve,null);return;case"input":Wi("invalid",le);var We=Oe=Ie=we=null,at=null,Mt=null;for(xe in ve)if(ve.hasOwnProperty(xe)){var Vt=ve[xe];if(Vt!=null)switch(xe){case"name":we=Vt;break;case"type":Ie=Vt;break;case"checked":at=Vt;break;case"defaultChecked":Mt=Vt;break;case"value":Oe=Vt;break;case"defaultValue":We=Vt;break;case"children":case"dangerouslySetInnerHTML":if(Vt!=null)throw Error(Z(137,he));break;default:Cn(le,he,xe,Vt,ve,null)}}bn(le,Oe,We,at,Mt,Ie,we,!1);return;case"select":Wi("invalid",le),xe=Ie=Oe=null;for(we in ve)if(ve.hasOwnProperty(we)&&(We=ve[we],We!=null))switch(we){case"value":Oe=We;break;case"defaultValue":Ie=We;break;case"multiple":xe=We;default:Cn(le,he,we,We,ve,null)}he=Oe,ve=Ie,le.multiple=!!xe,he!=null?er(le,!!xe,he,!1):ve!=null&&er(le,!!xe,ve,!0);return;case"textarea":Wi("invalid",le),Oe=we=xe=null;for(Ie in ve)if(ve.hasOwnProperty(Ie)&&(We=ve[Ie],We!=null))switch(Ie){case"value":xe=We;break;case"defaultValue":we=We;break;case"children":Oe=We;break;case"dangerouslySetInnerHTML":if(We!=null)throw Error(Z(91));break;default:Cn(le,he,Ie,We,ve,null)}kn(le,xe,we,Oe);return;case"option":for(at in ve)if(ve.hasOwnProperty(at)&&(xe=ve[at],xe!=null))switch(at){case"selected":le.selected=xe&&typeof xe!="function"&&typeof xe!="symbol";break;default:Cn(le,he,at,xe,ve,null)}return;case"dialog":Wi("beforetoggle",le),Wi("toggle",le),Wi("cancel",le),Wi("close",le);break;case"iframe":case"object":Wi("load",le);break;case"video":case"audio":for(xe=0;xe<zh.length;xe++)Wi(zh[xe],le);break;case"image":Wi("error",le),Wi("load",le);break;case"details":Wi("toggle",le);break;case"embed":case"source":case"link":Wi("error",le),Wi("load",le);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Mt in ve)if(ve.hasOwnProperty(Mt)&&(xe=ve[Mt],xe!=null))switch(Mt){case"children":case"dangerouslySetInnerHTML":throw Error(Z(137,he));default:Cn(le,he,Mt,xe,ve,null)}return;default:if(Cl(he)){for(Vt in ve)ve.hasOwnProperty(Vt)&&(xe=ve[Vt],xe!==void 0&&Of(le,he,Vt,xe,ve,void 0));return}}for(We in ve)ve.hasOwnProperty(We)&&(xe=ve[We],xe!=null&&Cn(le,he,We,xe,ve,null))}function np(le,he,ve,xe){switch(he){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var we=null,Oe=null,Ie=null,We=null,at=null,Mt=null,Vt=null;for(Bt in ve){var $t=ve[Bt];if(ve.hasOwnProperty(Bt)&&$t!=null)switch(Bt){case"checked":break;case"value":break;case"defaultValue":at=$t;default:xe.hasOwnProperty(Bt)||Cn(le,he,Bt,null,xe,$t)}}for(var Ot in xe){var Bt=xe[Ot];if($t=ve[Ot],xe.hasOwnProperty(Ot)&&(Bt!=null||$t!=null))switch(Ot){case"type":Oe=Bt;break;case"name":we=Bt;break;case"checked":Mt=Bt;break;case"defaultChecked":Vt=Bt;break;case"value":Ie=Bt;break;case"defaultValue":We=Bt;break;case"children":case"dangerouslySetInnerHTML":if(Bt!=null)throw Error(Z(137,he));break;default:Bt!==$t&&Cn(le,he,Ot,Bt,xe,$t)}}Us(le,Ie,We,at,Mt,Vt,Oe,we);return;case"select":Bt=Ie=We=Ot=null;for(Oe in ve)if(at=ve[Oe],ve.hasOwnProperty(Oe)&&at!=null)switch(Oe){case"value":break;case"multiple":Bt=at;default:xe.hasOwnProperty(Oe)||Cn(le,he,Oe,null,xe,at)}for(we in xe)if(Oe=xe[we],at=ve[we],xe.hasOwnProperty(we)&&(Oe!=null||at!=null))switch(we){case"value":Ot=Oe;break;case"defaultValue":We=Oe;break;case"multiple":Ie=Oe;default:Oe!==at&&Cn(le,he,we,Oe,xe,at)}he=We,ve=Ie,xe=Bt,Ot!=null?er(le,!!ve,Ot,!1):!!xe!=!!ve&&(he!=null?er(le,!!ve,he,!0):er(le,!!ve,ve?[]:"",!1));return;case"textarea":Bt=Ot=null;for(We in ve)if(we=ve[We],ve.hasOwnProperty(We)&&we!=null&&!xe.hasOwnProperty(We))switch(We){case"value":break;case"children":break;default:Cn(le,he,We,null,xe,we)}for(Ie in xe)if(we=xe[Ie],Oe=ve[Ie],xe.hasOwnProperty(Ie)&&(we!=null||Oe!=null))switch(Ie){case"value":Ot=we;break;case"defaultValue":Bt=we;break;case"children":break;case"dangerouslySetInnerHTML":if(we!=null)throw Error(Z(91));break;default:we!==Oe&&Cn(le,he,Ie,we,xe,Oe)}tr(le,Ot,Bt);return;case"option":for(var yi in ve)if(Ot=ve[yi],ve.hasOwnProperty(yi)&&Ot!=null&&!xe.hasOwnProperty(yi))switch(yi){case"selected":le.selected=!1;break;default:Cn(le,he,yi,null,xe,Ot)}for(at in xe)if(Ot=xe[at],Bt=ve[at],xe.hasOwnProperty(at)&&Ot!==Bt&&(Ot!=null||Bt!=null))switch(at){case"selected":le.selected=Ot&&typeof Ot!="function"&&typeof Ot!="symbol";break;default:Cn(le,he,at,Ot,xe,Bt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ri in ve)Ot=ve[Ri],ve.hasOwnProperty(Ri)&&Ot!=null&&!xe.hasOwnProperty(Ri)&&Cn(le,he,Ri,null,xe,Ot);for(Mt in xe)if(Ot=xe[Mt],Bt=ve[Mt],xe.hasOwnProperty(Mt)&&Ot!==Bt&&(Ot!=null||Bt!=null))switch(Mt){case"children":case"dangerouslySetInnerHTML":if(Ot!=null)throw Error(Z(137,he));break;default:Cn(le,he,Mt,Ot,xe,Bt)}return;default:if(Cl(he)){for(var Mn in ve)Ot=ve[Mn],ve.hasOwnProperty(Mn)&&Ot!==void 0&&!xe.hasOwnProperty(Mn)&&Of(le,he,Mn,void 0,xe,Ot);for(Vt in xe)Ot=xe[Vt],Bt=ve[Vt],!xe.hasOwnProperty(Vt)||Ot===Bt||Ot===void 0&&Bt===void 0||Of(le,he,Vt,Ot,xe,Bt);return}}for(var bt in ve)Ot=ve[bt],ve.hasOwnProperty(bt)&&Ot!=null&&!xe.hasOwnProperty(bt)&&Cn(le,he,bt,null,xe,Ot);for($t in xe)Ot=xe[$t],Bt=ve[$t],!xe.hasOwnProperty($t)||Ot===Bt||Ot==null&&Bt==null||Cn(le,he,$t,Ot,xe,Bt)}function c0(le){switch(le){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function rp(){if(typeof performance.getEntriesByType=="function"){for(var le=0,he=0,ve=performance.getEntriesByType("resource"),xe=0;xe<ve.length;xe++){var we=ve[xe],Oe=we.transferSize,Ie=we.initiatorType,We=we.duration;if(Oe&&We&&c0(Ie)){for(Ie=0,We=we.responseEnd,xe+=1;xe<ve.length;xe++){var at=ve[xe],Mt=at.startTime;if(Mt>We)break;var Vt=at.transferSize,$t=at.initiatorType;Vt&&c0($t)&&(at=at.responseEnd,Ie+=Vt*(at<We?1:(We-Mt)/(at-Mt)))}if(--xe,he+=8*(Oe+Ie)/(we.duration/1e3),le++,10<le)break}}if(0<le)return he/le/1e6}return navigator.connection&&(le=navigator.connection.downlink,typeof le=="number")?le:5}var Nf=null,Df=null;function Qd(le){return le.nodeType===9?le:le.ownerDocument}function u0(le){switch(le){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function h0(le,he){if(le===0)switch(he){case"svg":return 1;case"math":return 2;default:return 0}return le===1&&he==="foreignObject"?0:le}function Lf(le,he){return le==="textarea"||le==="noscript"||typeof he.children=="string"||typeof he.children=="number"||typeof he.children=="bigint"||typeof he.dangerouslySetInnerHTML=="object"&&he.dangerouslySetInnerHTML!==null&&he.dangerouslySetInnerHTML.__html!=null}var Bf=null;function sp(){var le=window.event;return le&&le.type==="popstate"?le===Bf?!1:(Bf=le,!0):(Bf=null,!1)}var d0=typeof setTimeout=="function"?setTimeout:void 0,ap=typeof clearTimeout=="function"?clearTimeout:void 0,f0=typeof Promise=="function"?Promise:void 0,lp=typeof queueMicrotask=="function"?queueMicrotask:typeof f0<"u"?function(le){return f0.resolve(null).then(le).catch(cp)}:d0;function cp(le){setTimeout(function(){throw le})}function gl(le){return le==="head"}function p0(le,he){var ve=he,xe=0;do{var we=ve.nextSibling;if(le.removeChild(ve),we&&we.nodeType===8)if(ve=we.data,ve==="/$"||ve==="/&"){if(xe===0){le.removeChild(we),Au(he);return}xe--}else if(ve==="$"||ve==="$?"||ve==="$~"||ve==="$!"||ve==="&")xe++;else if(ve==="html")Vh(le.ownerDocument.documentElement);else if(ve==="head"){ve=le.ownerDocument.head,Vh(ve);for(var Oe=ve.firstChild;Oe;){var Ie=Oe.nextSibling,We=Oe.nodeName;Oe[ct]||We==="SCRIPT"||We==="STYLE"||We==="LINK"&&Oe.rel.toLowerCase()==="stylesheet"||ve.removeChild(Oe),Oe=Ie}}else ve==="body"&&Vh(le.ownerDocument.body);ve=we}while(ve);Au(he)}function m0(le,he){var ve=le;le=0;do{var xe=ve.nextSibling;if(ve.nodeType===1?he?(ve._stashedDisplay=ve.style.display,ve.style.display="none"):(ve.style.display=ve._stashedDisplay||"",ve.getAttribute("style")===""&&ve.removeAttribute("style")):ve.nodeType===3&&(he?(ve._stashedText=ve.nodeValue,ve.nodeValue=""):ve.nodeValue=ve._stashedText||""),xe&&xe.nodeType===8)if(ve=xe.data,ve==="/$"){if(le===0)break;le--}else ve!=="$"&&ve!=="$?"&&ve!=="$~"&&ve!=="$!"||le++;ve=xe}while(ve)}function kf(le){var he=le.firstChild;for(he&&he.nodeType===10&&(he=he.nextSibling);he;){var ve=he;switch(he=he.nextSibling,ve.nodeName){case"HTML":case"HEAD":case"BODY":kf(ve),Et(ve);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(ve.rel.toLowerCase()==="stylesheet")continue}le.removeChild(ve)}}function up(le,he,ve,xe){for(;le.nodeType===1;){var we=ve;if(le.nodeName.toLowerCase()!==he.toLowerCase()){if(!xe&&(le.nodeName!=="INPUT"||le.type!=="hidden"))break}else if(xe){if(!le[ct])switch(he){case"meta":if(!le.hasAttribute("itemprop"))break;return le;case"link":if(Oe=le.getAttribute("rel"),Oe==="stylesheet"&&le.hasAttribute("data-precedence"))break;if(Oe!==we.rel||le.getAttribute("href")!==(we.href==null||we.href===""?null:we.href)||le.getAttribute("crossorigin")!==(we.crossOrigin==null?null:we.crossOrigin)||le.getAttribute("title")!==(we.title==null?null:we.title))break;return le;case"style":if(le.hasAttribute("data-precedence"))break;return le;case"script":if(Oe=le.getAttribute("src"),(Oe!==(we.src==null?null:we.src)||le.getAttribute("type")!==(we.type==null?null:we.type)||le.getAttribute("crossorigin")!==(we.crossOrigin==null?null:we.crossOrigin))&&Oe&&le.hasAttribute("async")&&!le.hasAttribute("itemprop"))break;return le;default:return le}}else if(he==="input"&&le.type==="hidden"){var Oe=we.name==null?null:""+we.name;if(we.type==="hidden"&&le.getAttribute("name")===Oe)return le}else return le;if(le=ta(le.nextSibling),le===null)break}return null}function hp(le,he,ve){if(he==="")return null;for(;le.nodeType!==3;)if((le.nodeType!==1||le.nodeName!=="INPUT"||le.type!=="hidden")&&!ve||(le=ta(le.nextSibling),le===null))return null;return le}function g0(le,he){for(;le.nodeType!==8;)if((le.nodeType!==1||le.nodeName!=="INPUT"||le.type!=="hidden")&&!he||(le=ta(le.nextSibling),le===null))return null;return le}function Uf(le){return le.data==="$?"||le.data==="$~"}function If(le){return le.data==="$!"||le.data==="$?"&&le.ownerDocument.readyState!=="loading"}function dp(le,he){var ve=le.ownerDocument;if(le.data==="$~")le._reactRetry=he;else if(le.data!=="$?"||ve.readyState!=="loading")he();else{var xe=function(){he(),ve.removeEventListener("DOMContentLoaded",xe)};ve.addEventListener("DOMContentLoaded",xe),le._reactRetry=xe}}function ta(le){for(;le!=null;le=le.nextSibling){var he=le.nodeType;if(he===1||he===3)break;if(he===8){if(he=le.data,he==="$"||he==="$!"||he==="$?"||he==="$~"||he==="&"||he==="F!"||he==="F")break;if(he==="/$"||he==="/&")return null}}return le}var zf=null;function v0(le){le=le.nextSibling;for(var he=0;le;){if(le.nodeType===8){var ve=le.data;if(ve==="/$"||ve==="/&"){if(he===0)return ta(le.nextSibling);he--}else ve!=="$"&&ve!=="$!"&&ve!=="$?"&&ve!=="$~"&&ve!=="&"||he++}le=le.nextSibling}return null}function _0(le){le=le.previousSibling;for(var he=0;le;){if(le.nodeType===8){var ve=le.data;if(ve==="$"||ve==="$!"||ve==="$?"||ve==="$~"||ve==="&"){if(he===0)return le;he--}else ve!=="/$"&&ve!=="/&"||he++}le=le.previousSibling}return null}function y0(le,he,ve){switch(he=Qd(ve),le){case"html":if(le=he.documentElement,!le)throw Error(Z(452));return le;case"head":if(le=he.head,!le)throw Error(Z(453));return le;case"body":if(le=he.body,!le)throw Error(Z(454));return le;default:throw Error(Z(451))}}function Vh(le){for(var he=le.attributes;he.length;)le.removeAttributeNode(he[0]);Et(le)}var na=new Map,b0=new Set;function ef(le){return typeof le.getRootNode=="function"?le.getRootNode():le.nodeType===9?le:le.ownerDocument}var Uo=Fe.d;Fe.d={f:fp,r:pp,D:mp,C:gp,L:vp,m:_p,X:bp,S:yp,M:xp};function fp(){var le=Uo.f(),he=Je();return le||he}function pp(le){var he=je(le);he!==null&&he.tag===5&&he.type==="form"?Rh(he):Uo.r(le)}var yu=typeof document>"u"?null:document;function x0(le,he,ve){var xe=yu;if(xe&&typeof he=="string"&&he){var we=yn(he);we='link[rel="'+le+'"][href="'+we+'"]',typeof ve=="string"&&(we+='[crossorigin="'+ve+'"]'),b0.has(we)||(b0.add(we),le={rel:le,crossOrigin:ve,href:he},xe.querySelector(we)===null&&(he=xe.createElement("link"),kr(he,"link",le),ft(he),xe.head.appendChild(he)))}}function mp(le){Uo.D(le),x0("dns-prefetch",le,null)}function gp(le,he){Uo.C(le,he),x0("preconnect",le,he)}function vp(le,he,ve){Uo.L(le,he,ve);var xe=yu;if(xe&&le&&he){var we='link[rel="preload"][as="'+yn(he)+'"]';he==="image"&&ve&&ve.imageSrcSet?(we+='[imagesrcset="'+yn(ve.imageSrcSet)+'"]',typeof ve.imageSizes=="string"&&(we+='[imagesizes="'+yn(ve.imageSizes)+'"]')):we+='[href="'+yn(le)+'"]';var Oe=we;switch(he){case"style":Oe=bu(le);break;case"script":Oe=xu(le)}na.has(Oe)||(le=se({rel:"preload",href:he==="image"&&ve&&ve.imageSrcSet?void 0:le,as:he},ve),na.set(Oe,le),xe.querySelector(we)!==null||he==="style"&&xe.querySelector(jh(Oe))||he==="script"&&xe.querySelector(Gh(Oe))||(he=xe.createElement("link"),kr(he,"link",le),ft(he),xe.head.appendChild(he)))}}function _p(le,he){Uo.m(le,he);var ve=yu;if(ve&&le){var xe=he&&typeof he.as=="string"?he.as:"script",we='link[rel="modulepreload"][as="'+yn(xe)+'"][href="'+yn(le)+'"]',Oe=we;switch(xe){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Oe=xu(le)}if(!na.has(Oe)&&(le=se({rel:"modulepreload",href:le},he),na.set(Oe,le),ve.querySelector(we)===null)){switch(xe){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(ve.querySelector(Gh(Oe)))return}xe=ve.createElement("link"),kr(xe,"link",le),ft(xe),ve.head.appendChild(xe)}}}function yp(le,he,ve){Uo.S(le,he,ve);var xe=yu;if(xe&&le){var we=pt(xe).hoistableStyles,Oe=bu(le);he=he||"default";var Ie=we.get(Oe);if(!Ie){var We={loading:0,preload:null};if(Ie=xe.querySelector(jh(Oe)))We.loading=5;else{le=se({rel:"stylesheet",href:le,"data-precedence":he},ve),(ve=na.get(Oe))&&Ff(le,ve);var at=Ie=xe.createElement("link");ft(at),kr(at,"link",le),at._p=new Promise(function(Mt,Vt){at.onload=Mt,at.onerror=Vt}),at.addEventListener("load",function(){We.loading|=1}),at.addEventListener("error",function(){We.loading|=2}),We.loading|=4,tf(Ie,he,xe)}Ie={type:"stylesheet",instance:Ie,count:1,state:We},we.set(Oe,Ie)}}}function bp(le,he){Uo.X(le,he);var ve=yu;if(ve&&le){var xe=pt(ve).hoistableScripts,we=xu(le),Oe=xe.get(we);Oe||(Oe=ve.querySelector(Gh(we)),Oe||(le=se({src:le,async:!0},he),(he=na.get(we))&&Vf(le,he),Oe=ve.createElement("script"),ft(Oe),kr(Oe,"link",le),ve.head.appendChild(Oe)),Oe={type:"script",instance:Oe,count:1,state:null},xe.set(we,Oe))}}function xp(le,he){Uo.M(le,he);var ve=yu;if(ve&&le){var xe=pt(ve).hoistableScripts,we=xu(le),Oe=xe.get(we);Oe||(Oe=ve.querySelector(Gh(we)),Oe||(le=se({src:le,async:!0,type:"module"},he),(he=na.get(we))&&Vf(le,he),Oe=ve.createElement("script"),ft(Oe),kr(Oe,"link",le),ve.head.appendChild(Oe)),Oe={type:"script",instance:Oe,count:1,state:null},xe.set(we,Oe))}}function A0(le,he,ve,xe){var we=(we=it.current)?ef(we):null;if(!we)throw Error(Z(446));switch(le){case"meta":case"title":return null;case"style":return typeof ve.precedence=="string"&&typeof ve.href=="string"?(he=bu(ve.href),ve=pt(we).hoistableStyles,xe=ve.get(he),xe||(xe={type:"style",instance:null,count:0,state:null},ve.set(he,xe)),xe):{type:"void",instance:null,count:0,state:null};case"link":if(ve.rel==="stylesheet"&&typeof ve.href=="string"&&typeof ve.precedence=="string"){le=bu(ve.href);var Oe=pt(we).hoistableStyles,Ie=Oe.get(le);if(Ie||(we=we.ownerDocument||we,Ie={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Oe.set(le,Ie),(Oe=we.querySelector(jh(le)))&&!Oe._p&&(Ie.instance=Oe,Ie.state.loading=5),na.has(le)||(ve={rel:"preload",as:"style",href:ve.href,crossOrigin:ve.crossOrigin,integrity:ve.integrity,media:ve.media,hrefLang:ve.hrefLang,referrerPolicy:ve.referrerPolicy},na.set(le,ve),Oe||Ap(we,le,ve,Ie.state))),he&&xe===null)throw Error(Z(528,""));return Ie}if(he&&xe!==null)throw Error(Z(529,""));return null;case"script":return he=ve.async,ve=ve.src,typeof ve=="string"&&he&&typeof he!="function"&&typeof he!="symbol"?(he=xu(ve),ve=pt(we).hoistableScripts,xe=ve.get(he),xe||(xe={type:"script",instance:null,count:0,state:null},ve.set(he,xe)),xe):{type:"void",instance:null,count:0,state:null};default:throw Error(Z(444,le))}}function bu(le){return'href="'+yn(le)+'"'}function jh(le){return'link[rel="stylesheet"]['+le+"]"}function S0(le){return se({},le,{"data-precedence":le.precedence,precedence:null})}function Ap(le,he,ve,xe){le.querySelector('link[rel="preload"][as="style"]['+he+"]")?xe.loading=1:(he=le.createElement("link"),xe.preload=he,he.addEventListener("load",function(){return xe.loading|=1}),he.addEventListener("error",function(){return xe.loading|=2}),kr(he,"link",ve),ft(he),le.head.appendChild(he))}function xu(le){return'[src="'+yn(le)+'"]'}function Gh(le){return"script[async]"+le}function C0(le,he,ve){if(he.count++,he.instance===null)switch(he.type){case"style":var xe=le.querySelector('style[data-href~="'+yn(ve.href)+'"]');if(xe)return he.instance=xe,ft(xe),xe;var we=se({},ve,{"data-href":ve.href,"data-precedence":ve.precedence,href:null,precedence:null});return xe=(le.ownerDocument||le).createElement("style"),ft(xe),kr(xe,"style",we),tf(xe,ve.precedence,le),he.instance=xe;case"stylesheet":we=bu(ve.href);var Oe=le.querySelector(jh(we));if(Oe)return he.state.loading|=4,he.instance=Oe,ft(Oe),Oe;xe=S0(ve),(we=na.get(we))&&Ff(xe,we),Oe=(le.ownerDocument||le).createElement("link"),ft(Oe);var Ie=Oe;return Ie._p=new Promise(function(We,at){Ie.onload=We,Ie.onerror=at}),kr(Oe,"link",xe),he.state.loading|=4,tf(Oe,ve.precedence,le),he.instance=Oe;case"script":return Oe=xu(ve.src),(we=le.querySelector(Gh(Oe)))?(he.instance=we,ft(we),we):(xe=ve,(we=na.get(Oe))&&(xe=se({},ve),Vf(xe,we)),le=le.ownerDocument||le,we=le.createElement("script"),ft(we),kr(we,"link",xe),le.head.appendChild(we),he.instance=we);case"void":return null;default:throw Error(Z(443,he.type))}else he.type==="stylesheet"&&(he.state.loading&4)===0&&(xe=he.instance,he.state.loading|=4,tf(xe,ve.precedence,le));return he.instance}function tf(le,he,ve){for(var xe=ve.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),we=xe.length?xe[xe.length-1]:null,Oe=we,Ie=0;Ie<xe.length;Ie++){var We=xe[Ie];if(We.dataset.precedence===he)Oe=We;else if(Oe!==we)break}Oe?Oe.parentNode.insertBefore(le,Oe.nextSibling):(he=ve.nodeType===9?ve.head:ve,he.insertBefore(le,he.firstChild))}function Ff(le,he){le.crossOrigin==null&&(le.crossOrigin=he.crossOrigin),le.referrerPolicy==null&&(le.referrerPolicy=he.referrerPolicy),le.title==null&&(le.title=he.title)}function Vf(le,he){le.crossOrigin==null&&(le.crossOrigin=he.crossOrigin),le.referrerPolicy==null&&(le.referrerPolicy=he.referrerPolicy),le.integrity==null&&(le.integrity=he.integrity)}var nf=null;function M0(le,he,ve){if(nf===null){var xe=new Map,we=nf=new Map;we.set(ve,xe)}else we=nf,xe=we.get(ve),xe||(xe=new Map,we.set(ve,xe));if(xe.has(le))return xe;for(xe.set(le,null),ve=ve.getElementsByTagName(le),we=0;we<ve.length;we++){var Oe=ve[we];if(!(Oe[ct]||Oe[ki]||le==="link"&&Oe.getAttribute("rel")==="stylesheet")&&Oe.namespaceURI!=="http://www.w3.org/2000/svg"){var Ie=Oe.getAttribute(he)||"";Ie=le+Ie;var We=xe.get(Ie);We?We.push(Oe):xe.set(Ie,[Oe])}}return xe}function E0(le,he,ve){le=le.ownerDocument||le,le.head.insertBefore(ve,he==="title"?le.querySelector("head > title"):null)}function Sp(le,he,ve){if(ve===1||he.itemProp!=null)return!1;switch(le){case"meta":case"title":return!0;case"style":if(typeof he.precedence!="string"||typeof he.href!="string"||he.href==="")break;return!0;case"link":if(typeof he.rel!="string"||typeof he.href!="string"||he.href===""||he.onLoad||he.onError)break;switch(he.rel){case"stylesheet":return le=he.disabled,typeof he.precedence=="string"&&le==null;default:return!0}case"script":if(he.async&&typeof he.async!="function"&&typeof he.async!="symbol"&&!he.onLoad&&!he.onError&&he.src&&typeof he.src=="string")return!0}return!1}function T0(le){return!(le.type==="stylesheet"&&(le.state.loading&3)===0)}function Cp(le,he,ve,xe){if(ve.type==="stylesheet"&&(typeof xe.media!="string"||matchMedia(xe.media).matches!==!1)&&(ve.state.loading&4)===0){if(ve.instance===null){var we=bu(xe.href),Oe=he.querySelector(jh(we));if(Oe){he=Oe._p,he!==null&&typeof he=="object"&&typeof he.then=="function"&&(le.count++,le=rf.bind(le),he.then(le,le)),ve.state.loading|=4,ve.instance=Oe,ft(Oe);return}Oe=he.ownerDocument||he,xe=S0(xe),(we=na.get(we))&&Ff(xe,we),Oe=Oe.createElement("link"),ft(Oe);var Ie=Oe;Ie._p=new Promise(function(We,at){Ie.onload=We,Ie.onerror=at}),kr(Oe,"link",xe),ve.instance=Oe}le.stylesheets===null&&(le.stylesheets=new Map),le.stylesheets.set(ve,he),(he=ve.state.preload)&&(ve.state.loading&3)===0&&(le.count++,ve=rf.bind(le),he.addEventListener("load",ve),he.addEventListener("error",ve))}}var jf=0;function Mp(le,he){return le.stylesheets&&le.count===0&&af(le,le.stylesheets),0<le.count||0<le.imgCount?function(ve){var xe=setTimeout(function(){if(le.stylesheets&&af(le,le.stylesheets),le.unsuspend){var Oe=le.unsuspend;le.unsuspend=null,Oe()}},6e4+he);0<le.imgBytes&&jf===0&&(jf=62500*rp());var we=setTimeout(function(){if(le.waitingForImages=!1,le.count===0&&(le.stylesheets&&af(le,le.stylesheets),le.unsuspend)){var Oe=le.unsuspend;le.unsuspend=null,Oe()}},(le.imgBytes>jf?50:800)+he);return le.unsuspend=ve,function(){le.unsuspend=null,clearTimeout(xe),clearTimeout(we)}}:null}function rf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)af(this,this.stylesheets);else if(this.unsuspend){var le=this.unsuspend;this.unsuspend=null,le()}}}var sf=null;function af(le,he){le.stylesheets=null,le.unsuspend!==null&&(le.count++,sf=new Map,he.forEach(Ep,le),sf=null,rf.call(le))}function Ep(le,he){if(!(he.state.loading&4)){var ve=sf.get(le);if(ve)var xe=ve.get(null);else{ve=new Map,sf.set(le,ve);for(var we=le.querySelectorAll("link[data-precedence],style[data-precedence]"),Oe=0;Oe<we.length;Oe++){var Ie=we[Oe];(Ie.nodeName==="LINK"||Ie.getAttribute("media")!=="not all")&&(ve.set(Ie.dataset.precedence,Ie),xe=Ie)}xe&&ve.set(null,xe)}we=he.instance,Ie=we.getAttribute("data-precedence"),Oe=ve.get(Ie)||xe,Oe===xe&&ve.set(null,we),ve.set(Ie,we),this.count++,xe=rf.bind(this),we.addEventListener("load",xe),we.addEventListener("error",xe),Oe?Oe.parentNode.insertBefore(we,Oe.nextSibling):(le=le.nodeType===9?le.head:le,le.insertBefore(we,le.firstChild)),he.state.loading|=4}}var Hh={$$typeof:ye,Provider:null,Consumer:null,_currentValue:Ve,_currentValue2:Ve,_threadCount:0};function Tp(le,he,ve,xe,we,Oe,Ie,We,at){this.tag=1,this.containerInfo=le,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Si(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Si(0),this.hiddenUpdates=Si(null),this.identifierPrefix=xe,this.onUncaughtError=we,this.onCaughtError=Oe,this.onRecoverableError=Ie,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=at,this.incompleteTransitions=new Map}function w0(le,he,ve,xe,we,Oe,Ie,We,at,Mt,Vt,$t){return le=new Tp(le,he,ve,Ie,at,Mt,Vt,$t,We),he=1,Oe===!0&&(he|=24),Oe=Rr(3,null,null,he),le.current=Oe,Oe.stateNode=le,he=Ku(),he.refCount++,le.pooledCache=he,he.refCount++,Oe.memoizedState={element:xe,isDehydrated:ve,cache:he},nh(Oe),le}function P0(le){return le?(le=Ga,le):Ga}function R0(le,he,ve,xe,we,Oe){we=P0(we),xe.context===null?xe.context=we:xe.pendingContext=we,xe=Xs(he),xe.payload={element:ve},Oe=Oe===void 0?null:Oe,Oe!==null&&(xe.callback=Oe),ve=va(le,xe,he),ve!==null&&(ge(ve,le,he),Ka(ve,le,he))}function O0(le,he){if(le=le.memoizedState,le!==null&&le.dehydrated!==null){var ve=le.retryLane;le.retryLane=ve!==0&&ve<he?ve:he}}function Gf(le,he){O0(le,he),(le=le.alternate)&&O0(le,he)}function N0(le){if(le.tag===13||le.tag===31){var he=ja(le,67108864);he!==null&&ge(he,le,67108864),Gf(le,67108864)}}function D0(le){if(le.tag===13||le.tag===31){var he=Br();he=_n(he);var ve=ja(le,he);ve!==null&&ge(ve,le,he),Gf(le,he)}}var of=!0;function wp(le,he,ve,xe){var we=ke.T;ke.T=null;var Oe=Fe.p;try{Fe.p=2,Hf(le,he,ve,xe)}finally{Fe.p=Oe,ke.T=we}}function Pp(le,he,ve,xe){var we=ke.T;ke.T=null;var Oe=Fe.p;try{Fe.p=8,Hf(le,he,ve,xe)}finally{Fe.p=Oe,ke.T=we}}function Hf(le,he,ve,xe){if(of){var we=Yf(xe);if(we===null)Rf(le,he,xe,lf,ve),B0(le,xe);else if(Op(we,le,he,ve,xe))xe.stopPropagation();else if(B0(le,xe),he&4&&-1<Rp.indexOf(le)){for(;we!==null;){var Oe=je(we);if(Oe!==null)switch(Oe.tag){case 3:if(Oe=Oe.stateNode,Oe.current.memoizedState.isDehydrated){var Ie=Wt(Oe.pendingLanes);if(Ie!==0){var We=Oe;for(We.pendingLanes|=2,We.entangledLanes|=2;Ie;){var at=1<<31-tt(Ie);We.entanglements[1]|=at,Ie&=~at}lo(Oe),(Zi&6)===0&&(fs=He()+500,Ih(0))}}break;case 31:case 13:We=ja(Oe,2),We!==null&&ge(We,Oe,2),Je(),Gf(Oe,2)}if(Oe=Yf(xe),Oe===null&&Rf(le,he,xe,lf,ve),Oe===we)break;we=Oe}we!==null&&xe.stopPropagation()}else Rf(le,he,xe,null,ve)}}function Yf(le){return le=pc(le),Xf(le)}var lf=null;function Xf(le){if(lf=null,le=Ht(le),le!==null){var he=ee(le);if(he===null)le=null;else{var ve=he.tag;if(ve===13){if(le=te(he),le!==null)return le;le=null}else if(ve===31){if(le=ne(he),le!==null)return le;le=null}else if(ve===3){if(he.stateNode.current.memoizedState.isDehydrated)return he.tag===3?he.stateNode.containerInfo:null;le=null}else he!==le&&(le=null)}}return lf=le,null}function L0(le){switch(le){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_t()){case dt:return 2;case At:return 8;case Nt:case fi:return 32;case Kt:return 268435456;default:return 32}default:return 32}}var qf=!1,vl=null,_l=null,yl=null,Yh=new Map,Xh=new Map,bl=[],Rp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function B0(le,he){switch(le){case"focusin":case"focusout":vl=null;break;case"dragenter":case"dragleave":_l=null;break;case"mouseover":case"mouseout":yl=null;break;case"pointerover":case"pointerout":Yh.delete(he.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xh.delete(he.pointerId)}}function qh(le,he,ve,xe,we,Oe){return le===null||le.nativeEvent!==Oe?(le={blockedOn:he,domEventName:ve,eventSystemFlags:xe,nativeEvent:Oe,targetContainers:[we]},he!==null&&(he=je(he),he!==null&&N0(he)),le):(le.eventSystemFlags|=xe,he=le.targetContainers,we!==null&&he.indexOf(we)===-1&&he.push(we),le)}function Op(le,he,ve,xe,we){switch(he){case"focusin":return vl=qh(vl,le,he,ve,xe,we),!0;case"dragenter":return _l=qh(_l,le,he,ve,xe,we),!0;case"mouseover":return yl=qh(yl,le,he,ve,xe,we),!0;case"pointerover":var Oe=we.pointerId;return Yh.set(Oe,qh(Yh.get(Oe)||null,le,he,ve,xe,we)),!0;case"gotpointercapture":return Oe=we.pointerId,Xh.set(Oe,qh(Xh.get(Oe)||null,le,he,ve,xe,we)),!0}return!1}function k0(le){var he=Ht(le.target);if(he!==null){var ve=ee(he);if(ve!==null){if(he=ve.tag,he===13){if(he=te(ve),he!==null){le.blockedOn=he,$n(le.priority,function(){D0(ve)});return}}else if(he===31){if(he=ne(ve),he!==null){le.blockedOn=he,$n(le.priority,function(){D0(ve)});return}}else if(he===3&&ve.stateNode.current.memoizedState.isDehydrated){le.blockedOn=ve.tag===3?ve.stateNode.containerInfo:null;return}}}le.blockedOn=null}function cf(le){if(le.blockedOn!==null)return!1;for(var he=le.targetContainers;0<he.length;){var ve=Yf(le.nativeEvent);if(ve===null){ve=le.nativeEvent;var xe=new ve.constructor(ve.type,ve);El=xe,ve.target.dispatchEvent(xe),El=null}else return he=je(ve),he!==null&&N0(he),le.blockedOn=ve,!1;he.shift()}return!0}function U0(le,he,ve){cf(le)&&ve.delete(he)}function Np(){qf=!1,vl!==null&&cf(vl)&&(vl=null),_l!==null&&cf(_l)&&(_l=null),yl!==null&&cf(yl)&&(yl=null),Yh.forEach(U0),Xh.forEach(U0)}function uf(le,he){le.blockedOn===he&&(le.blockedOn=null,qf||(qf=!0,G.unstable_scheduleCallback(G.unstable_NormalPriority,Np)))}var hf=null;function I0(le){hf!==le&&(hf=le,G.unstable_scheduleCallback(G.unstable_NormalPriority,function(){hf===le&&(hf=null);for(var he=0;he<le.length;he+=3){var ve=le[he],xe=le[he+1],we=le[he+2];if(typeof xe!="function"){if(Xf(xe||ve)===null)continue;break}var Oe=je(ve);Oe!==null&&(le.splice(he,3),he-=3,Ph(Oe,{pending:!0,data:we,method:ve.method,action:xe},xe,we))}}))}function Au(le){function he(at){return uf(at,le)}vl!==null&&uf(vl,le),_l!==null&&uf(_l,le),yl!==null&&uf(yl,le),Yh.forEach(he),Xh.forEach(he);for(var ve=0;ve<bl.length;ve++){var xe=bl[ve];xe.blockedOn===le&&(xe.blockedOn=null)}for(;0<bl.length&&(ve=bl[0],ve.blockedOn===null);)k0(ve),ve.blockedOn===null&&bl.shift();if(ve=(le.ownerDocument||le).$$reactFormReplay,ve!=null)for(xe=0;xe<ve.length;xe+=3){var we=ve[xe],Oe=ve[xe+1],Ie=we[On]||null;if(typeof Oe=="function")Ie||I0(ve);else if(Ie){var We=null;if(Oe&&Oe.hasAttribute("formAction")){if(we=Oe,Ie=Oe[On]||null)We=Ie.formAction;else if(Xf(we)!==null)continue}else We=Ie.action;typeof We=="function"?ve[xe+1]=We:(ve.splice(xe,3),xe-=3),I0(ve)}}}function z0(){function le(Oe){Oe.canIntercept&&Oe.info==="react-transition"&&Oe.intercept({handler:function(){return new Promise(function(Ie){return we=Ie})},focusReset:"manual",scroll:"manual"})}function he(){we!==null&&(we(),we=null),xe||setTimeout(ve,20)}function ve(){if(!xe&&!navigation.transition){var Oe=navigation.currentEntry;Oe&&Oe.url!=null&&navigation.navigate(Oe.url,{state:Oe.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var xe=!1,we=null;return navigation.addEventListener("navigate",le),navigation.addEventListener("navigatesuccess",he),navigation.addEventListener("navigateerror",he),setTimeout(ve,100),function(){xe=!0,navigation.removeEventListener("navigate",le),navigation.removeEventListener("navigatesuccess",he),navigation.removeEventListener("navigateerror",he),we!==null&&(we(),we=null)}}}function $f(le){this._internalRoot=le}df.prototype.render=$f.prototype.render=function(le){var he=this._internalRoot;if(he===null)throw Error(Z(409));var ve=he.current,xe=Br();R0(ve,xe,le,he,null,null)},df.prototype.unmount=$f.prototype.unmount=function(){var le=this._internalRoot;if(le!==null){this._internalRoot=null;var he=le.containerInfo;R0(le.current,2,null,le,null,null),Je(),he[Ir]=null}};function df(le){this._internalRoot=le}df.prototype.unstable_scheduleHydration=function(le){if(le){var he=Bn();le={blockedOn:null,target:le,priority:he};for(var ve=0;ve<bl.length&&he!==0&&he<bl[ve].priority;ve++);bl.splice(ve,0,le),ve===0&&k0(le)}};var F0=_.version;if(F0!=="19.2.0")throw Error(Z(527,F0,"19.2.0"));Fe.findDOMNode=function(le){var he=le._reactInternals;if(he===void 0)throw typeof le.render=="function"?Error(Z(188)):(le=Object.keys(le).join(","),Error(Z(268,le)));return le=re(he),le=le!==null?oe(le):null,le=le===null?null:le.stateNode,le};var Dp={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ke,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ff=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ff.isDisabled&&ff.supportsFiber)try{Rt=ff.inject(Dp),Pt=ff}catch{}}return reactDomClient_production.createRoot=function(le,he){if(!Q(le))throw Error(Z(299));var ve=!1,xe="",we=Dh,Oe=Hd,Ie=su;return he!=null&&(he.unstable_strictMode===!0&&(ve=!0),he.identifierPrefix!==void 0&&(xe=he.identifierPrefix),he.onUncaughtError!==void 0&&(we=he.onUncaughtError),he.onCaughtError!==void 0&&(Oe=he.onCaughtError),he.onRecoverableError!==void 0&&(Ie=he.onRecoverableError)),he=w0(le,1,!1,null,null,ve,xe,null,we,Oe,Ie,z0),le[Ir]=he.current,Pf(le),new $f(he)},reactDomClient_production.hydrateRoot=function(le,he,ve){if(!Q(le))throw Error(Z(299));var xe=!1,we="",Oe=Dh,Ie=Hd,We=su,at=null;return ve!=null&&(ve.unstable_strictMode===!0&&(xe=!0),ve.identifierPrefix!==void 0&&(we=ve.identifierPrefix),ve.onUncaughtError!==void 0&&(Oe=ve.onUncaughtError),ve.onCaughtError!==void 0&&(Ie=ve.onCaughtError),ve.onRecoverableError!==void 0&&(We=ve.onRecoverableError),ve.formState!==void 0&&(at=ve.formState)),he=w0(le,1,!0,he,ve??null,xe,we,at,Oe,Ie,We,z0),he.context=P0(null),ve=he.current,xe=Br(),xe=_n(xe),we=Xs(xe),we.callback=null,va(ve,we,xe),ve=xe,he.current.lanes=ve,Ii(he,ve),lo(he),le[Ir]=he.current,Pf(le),new df(he)},reactDomClient_production.version="19.2.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function G(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(G)}catch(_){console.error(_)}}return G(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();class SourceLocation{constructor(_,J,Z){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=_,this.start=J,this.end=Z}static range(_,J){return J?!_||!_.loc||!J.loc||_.loc.lexer!==J.loc.lexer?null:new SourceLocation(_.loc.lexer,_.loc.start,J.loc.end):_&&_.loc}}class Token{constructor(_,J){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=_,this.loc=J}range(_,J){return new Token(J,SourceLocation.range(this,_))}}class ParseError{constructor(_,J){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var Z="KaTeX parse error: "+_,Q,ee,te=J&&J.loc;if(te&&te.start<=te.end){var ne=te.lexer.input;Q=te.start,ee=te.end,Q===ne.length?Z+=" at end of input: ":Z+=" at position "+(Q+1)+": ";var ie=ne.slice(Q,ee).replace(/[^]/g,"$&"),re;Q>15?re=""+ne.slice(Q-15,Q):re=ne.slice(0,Q);var oe;ee+15<ne.length?oe=ne.slice(ee,ee+15)+"":oe=ne.slice(ee),Z+=re+ie+oe}var se=new Error(Z);return se.name="ParseError",se.__proto__=ParseError.prototype,se.position=Q,Q!=null&&ee!=null&&(se.length=ee-Q),se.rawMessage=_,se}}ParseError.prototype.__proto__=Error.prototype;var deflt=function(_,J){return _===void 0?J:_},uppercase=/([A-Z])/g,hyphenate=function(_){return _.replace(uppercase,"-$1").toLowerCase()},ESCAPE_LOOKUP={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},ESCAPE_REGEX=/[&><"']/g;function escape(G){return String(G).replace(ESCAPE_REGEX,_=>ESCAPE_LOOKUP[_])}var getBaseElem=function G(_){return _.type==="ordgroup"||_.type==="color"?_.body.length===1?G(_.body[0]):_:_.type==="font"?G(_.body):_},isCharacterBox=function(_){var J=getBaseElem(_);return J.type==="mathord"||J.type==="textord"||J.type==="atom"},assert=function(_){if(!_)throw new Error("Expected non-null, but got "+String(_));return _},protocolFromUrl=function(_){var J=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(_);return J?J[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(J[1])?null:J[1].toLowerCase():"_relative"},utils={deflt,escape,hyphenate,getBaseElem,isCharacterBox,protocolFromUrl};class Style{constructor(_,J,Z){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=_,this.size=J,this.cramped=Z}sup(){return styles[sup[this.id]]}sub(){return styles[sub[this.id]]}fracNum(){return styles[fracNum[this.id]]}fracDen(){return styles[fracDen[this.id]]}cramp(){return styles[cramp[this.id]]}text(){return styles[text$1[this.id]]}isTight(){return this.size>=2}}var D$2=0,Dc=1,T$1=2,Tc=3,S$1=4,Sc=5,SS=6,SSc=7,styles=[new Style(D$2,0,!1),new Style(Dc,0,!0),new Style(T$1,1,!1),new Style(Tc,1,!0),new Style(S$1,2,!1),new Style(Sc,2,!0),new Style(SS,3,!1),new Style(SSc,3,!0)],sup=[S$1,Sc,S$1,Sc,SS,SSc,SS,SSc],sub=[Sc,Sc,Sc,Sc,SSc,SSc,SSc,SSc],fracNum=[T$1,Tc,S$1,Sc,SS,SSc,SS,SSc],fracDen=[Tc,Tc,Sc,Sc,SSc,SSc,SSc,SSc],cramp=[Dc,Dc,Tc,Tc,Sc,Sc,SSc,SSc],text$1=[D$2,Dc,T$1,Tc,T$1,Tc,T$1,Tc],Style$1={DISPLAY:styles[D$2],TEXT:styles[T$1],SCRIPT:styles[S$1],SCRIPTSCRIPT:styles[SS]},scriptData=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function scriptFromCodepoint(G){for(var _=0;_<scriptData.length;_++)for(var J=scriptData[_],Z=0;Z<J.blocks.length;Z++){var Q=J.blocks[Z];if(G>=Q[0]&&G<=Q[1])return J.name}return null}var allBlocks=[];scriptData.forEach(G=>G.blocks.forEach(_=>allBlocks.push(..._)));function supportedCodepoint(G){for(var _=0;_<allBlocks.length;_+=2)if(G>=allBlocks[_]&&G<=allBlocks[_+1])return!0;return!1}var hLinePad=80,sqrtMain=function(_,J){return"M95,"+(622+_+J)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+_/2.075+" -"+_+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+_)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+_)+" "+J+"h400000v"+(40+_)+"h-400000z"},sqrtSize1=function(_,J){return"M263,"+(601+_+J)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+_/2.084+" -"+_+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+_)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+_)+" "+J+"h400000v"+(40+_)+"h-400000z"},sqrtSize2=function(_,J){return"M983 "+(10+_+J)+`
l`+_/3.13+" -"+_+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+_)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+_)+" "+J+"h400000v"+(40+_)+"h-400000z"},sqrtSize3=function(_,J){return"M424,"+(2398+_+J)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+_/4.223+" -"+_+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+_)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+_)+" "+J+`
h400000v`+(40+_)+"h-400000z"},sqrtSize4=function(_,J){return"M473,"+(2713+_+J)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+_/5.298+" -"+_+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+_)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+_)+" "+J+"h400000v"+(40+_)+"H1017.7z"},phasePath=function(_){var J=_/2;return"M400000 "+_+" H0 L"+J+" 0 l65 45 L145 "+(_-80)+" H400000z"},sqrtTall=function(_,J,Z){var Q=Z-54-J-_;return"M702 "+(_+J)+"H400000"+(40+_)+`
H742v`+Q+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+J+"H400000v"+(40+_)+"H742z"},sqrtPath=function(_,J,Z){J=1e3*J;var Q="";switch(_){case"sqrtMain":Q=sqrtMain(J,hLinePad);break;case"sqrtSize1":Q=sqrtSize1(J,hLinePad);break;case"sqrtSize2":Q=sqrtSize2(J,hLinePad);break;case"sqrtSize3":Q=sqrtSize3(J,hLinePad);break;case"sqrtSize4":Q=sqrtSize4(J,hLinePad);break;case"sqrtTall":Q=sqrtTall(J,hLinePad,Z)}return Q},innerPath=function(_,J){switch(_){case"":return"M291 0 H417 V"+J+" H291z M291 0 H417 V"+J+" H291z";case"":return"M145 0 H188 V"+J+" H145z M145 0 H188 V"+J+" H145z";case"":return"M145 0 H188 V"+J+" H145z M145 0 H188 V"+J+" H145z"+("M367 0 H410 V"+J+" H367z M367 0 H410 V"+J+" H367z");case"":return"M457 0 H583 V"+J+" H457z M457 0 H583 V"+J+" H457z";case"":return"M319 0 H403 V"+J+" H319z M319 0 H403 V"+J+" H319z";case"":return"M263 0 H347 V"+J+" H263z M263 0 H347 V"+J+" H263z";case"":return"M384 0 H504 V"+J+" H384z M384 0 H504 V"+J+" H384z";case"":return"M312 0 H355 V"+J+" H312z M312 0 H355 V"+J+" H312z";case"":return"M257 0 H300 V"+J+" H257z M257 0 H300 V"+J+" H257z"+("M478 0 H521 V"+J+" H478z M478 0 H521 V"+J+" H478z");default:return""}},path={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},tallDelim=function(_,J){switch(_){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+J+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+J+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+J+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+J+" v1759 h84z";case"vert":return"M145 15 v585 v"+J+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-J+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+J+" v585 h43z";case"doublevert":return"M145 15 v585 v"+J+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-J+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+J+` v585 h43z
M367 15 v585 v`+J+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-J+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+J+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+J+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+J+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+J+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+J+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+J+` v602 h84z
M403 1759 V0 H319 V1759 v`+J+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+J+` v602 h84z
M347 1759 V0 h-84 V1759 v`+J+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(J+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(J+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(J+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(J+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class DocumentFragment{constructor(_){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=_,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(_){return this.classes.includes(_)}toNode(){for(var _=document.createDocumentFragment(),J=0;J<this.children.length;J++)_.appendChild(this.children[J].toNode());return _}toMarkup(){for(var _="",J=0;J<this.children.length;J++)_+=this.children[J].toMarkup();return _}toText(){var _=J=>J.toText();return this.children.map(_).join("")}}var fontMetricsData={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},extraCharacterMap={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function getCharacterMetrics(G,_,J){if(!fontMetricsData[_])throw new Error("Font metrics not found for font: "+_+".");var Z=G.charCodeAt(0),Q=fontMetricsData[_][Z];if(!Q&&G[0]in extraCharacterMap&&(Z=extraCharacterMap[G[0]].charCodeAt(0),Q=fontMetricsData[_][Z]),!Q&&J==="text"&&supportedCodepoint(Z)&&(Q=fontMetricsData[_][77]),Q)return{depth:Q[0],height:Q[1],italic:Q[2],skew:Q[3],width:Q[4]}}var ptPerUnit={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},relativeUnit={ex:!0,em:!0,mu:!0},validUnit=function(_){return typeof _!="string"&&(_=_.unit),_ in ptPerUnit||_ in relativeUnit||_==="ex"},calculateSize=function(_,J){var Z;if(_.unit in ptPerUnit)Z=ptPerUnit[_.unit]/J.fontMetrics().ptPerEm/J.sizeMultiplier;else if(_.unit==="mu")Z=J.fontMetrics().cssEmPerMu;else{var Q;if(J.style.isTight()?Q=J.havingStyle(J.style.text()):Q=J,_.unit==="ex")Z=Q.fontMetrics().xHeight;else if(_.unit==="em")Z=Q.fontMetrics().quad;else throw new ParseError("Invalid unit: '"+_.unit+"'");Q!==J&&(Z*=Q.sizeMultiplier/J.sizeMultiplier)}return Math.min(_.number*Z,J.maxSize)},makeEm=function(_){return+_.toFixed(4)+"em"},createClass=function(_){return _.filter(J=>J).join(" ")},initNode=function(_,J,Z){if(this.classes=_||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=Z||{},J){J.style.isTight()&&this.classes.push("mtight");var Q=J.getColor();Q&&(this.style.color=Q)}},toNode=function(_){var J=document.createElement(_);J.className=createClass(this.classes);for(var Z in this.style)this.style.hasOwnProperty(Z)&&(J.style[Z]=this.style[Z]);for(var Q in this.attributes)this.attributes.hasOwnProperty(Q)&&J.setAttribute(Q,this.attributes[Q]);for(var ee=0;ee<this.children.length;ee++)J.appendChild(this.children[ee].toNode());return J},invalidAttributeNameRegex=/[\s"'>/=\x00-\x1f]/,toMarkup=function(_){var J="<"+_;this.classes.length&&(J+=' class="'+utils.escape(createClass(this.classes))+'"');var Z="";for(var Q in this.style)this.style.hasOwnProperty(Q)&&(Z+=utils.hyphenate(Q)+":"+this.style[Q]+";");Z&&(J+=' style="'+utils.escape(Z)+'"');for(var ee in this.attributes)if(this.attributes.hasOwnProperty(ee)){if(invalidAttributeNameRegex.test(ee))throw new ParseError("Invalid attribute name '"+ee+"'");J+=" "+ee+'="'+utils.escape(this.attributes[ee])+'"'}J+=">";for(var te=0;te<this.children.length;te++)J+=this.children[te].toMarkup();return J+="</"+_+">",J};class Span{constructor(_,J,Z,Q){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,initNode.call(this,_,Z,Q),this.children=J||[]}setAttribute(_,J){this.attributes[_]=J}hasClass(_){return this.classes.includes(_)}toNode(){return toNode.call(this,"span")}toMarkup(){return toMarkup.call(this,"span")}}class Anchor{constructor(_,J,Z,Q){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,initNode.call(this,J,Q),this.children=Z||[],this.setAttribute("href",_)}setAttribute(_,J){this.attributes[_]=J}hasClass(_){return this.classes.includes(_)}toNode(){return toNode.call(this,"a")}toMarkup(){return toMarkup.call(this,"a")}}class Img{constructor(_,J,Z){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=J,this.src=_,this.classes=["mord"],this.style=Z}hasClass(_){return this.classes.includes(_)}toNode(){var _=document.createElement("img");_.src=this.src,_.alt=this.alt,_.className="mord";for(var J in this.style)this.style.hasOwnProperty(J)&&(_.style[J]=this.style[J]);return _}toMarkup(){var _='<img src="'+utils.escape(this.src)+'"'+(' alt="'+utils.escape(this.alt)+'"'),J="";for(var Z in this.style)this.style.hasOwnProperty(Z)&&(J+=utils.hyphenate(Z)+":"+this.style[Z]+";");return J&&(_+=' style="'+utils.escape(J)+'"'),_+="'/>",_}}var iCombinations={:"",:"",:"",:""};class SymbolNode{constructor(_,J,Z,Q,ee,te,ne,ie){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=_,this.height=J||0,this.depth=Z||0,this.italic=Q||0,this.skew=ee||0,this.width=te||0,this.classes=ne||[],this.style=ie||{},this.maxFontSize=0;var re=scriptFromCodepoint(this.text.charCodeAt(0));re&&this.classes.push(re+"_fallback"),/[]/.test(this.text)&&(this.text=iCombinations[this.text])}hasClass(_){return this.classes.includes(_)}toNode(){var _=document.createTextNode(this.text),J=null;this.italic>0&&(J=document.createElement("span"),J.style.marginRight=makeEm(this.italic)),this.classes.length>0&&(J=J||document.createElement("span"),J.className=createClass(this.classes));for(var Z in this.style)this.style.hasOwnProperty(Z)&&(J=J||document.createElement("span"),J.style[Z]=this.style[Z]);return J?(J.appendChild(_),J):_}toMarkup(){var _=!1,J="<span";this.classes.length&&(_=!0,J+=' class="',J+=utils.escape(createClass(this.classes)),J+='"');var Z="";this.italic>0&&(Z+="margin-right:"+this.italic+"em;");for(var Q in this.style)this.style.hasOwnProperty(Q)&&(Z+=utils.hyphenate(Q)+":"+this.style[Q]+";");Z&&(_=!0,J+=' style="'+utils.escape(Z)+'"');var ee=utils.escape(this.text);return _?(J+=">",J+=ee,J+="</span>",J):ee}}class SvgNode{constructor(_,J){this.children=void 0,this.attributes=void 0,this.children=_||[],this.attributes=J||{}}toNode(){var _="http://www.w3.org/2000/svg",J=document.createElementNS(_,"svg");for(var Z in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,Z)&&J.setAttribute(Z,this.attributes[Z]);for(var Q=0;Q<this.children.length;Q++)J.appendChild(this.children[Q].toNode());return J}toMarkup(){var _='<svg xmlns="http://www.w3.org/2000/svg"';for(var J in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,J)&&(_+=" "+J+'="'+utils.escape(this.attributes[J])+'"');_+=">";for(var Z=0;Z<this.children.length;Z++)_+=this.children[Z].toMarkup();return _+="</svg>",_}}class PathNode{constructor(_,J){this.pathName=void 0,this.alternate=void 0,this.pathName=_,this.alternate=J}toNode(){var _="http://www.w3.org/2000/svg",J=document.createElementNS(_,"path");return this.alternate?J.setAttribute("d",this.alternate):J.setAttribute("d",path[this.pathName]),J}toMarkup(){return this.alternate?'<path d="'+utils.escape(this.alternate)+'"/>':'<path d="'+utils.escape(path[this.pathName])+'"/>'}}class LineNode{constructor(_){this.attributes=void 0,this.attributes=_||{}}toNode(){var _="http://www.w3.org/2000/svg",J=document.createElementNS(_,"line");for(var Z in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,Z)&&J.setAttribute(Z,this.attributes[Z]);return J}toMarkup(){var _="<line";for(var J in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,J)&&(_+=" "+J+'="'+utils.escape(this.attributes[J])+'"');return _+="/>",_}}function assertSymbolDomNode(G){if(G instanceof SymbolNode)return G;throw new Error("Expected symbolNode but got "+String(G)+".")}function assertSpan(G){if(G instanceof Span)return G;throw new Error("Expected span<HtmlDomNode> but got "+String(G)+".")}var NON_ATOMS={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},symbols={math:{},text:{}};function defineSymbol(G,_,J,Z,Q,ee){symbols[G][Q]={font:_,group:J,replace:Z},ee&&Z&&(symbols[G][Z]=symbols[G][Q])}var math$2="math",text="text",main="main",ams="ams",accent="accent-token",bin="bin",close="close",inner="inner",mathord="mathord",op="op-token",open="open",punct="punct",rel="rel",spacing="spacing",textord="textord";defineSymbol(math$2,main,rel,"","\\equiv",!0);defineSymbol(math$2,main,rel,"","\\prec",!0);defineSymbol(math$2,main,rel,"","\\succ",!0);defineSymbol(math$2,main,rel,"","\\sim",!0);defineSymbol(math$2,main,rel,"","\\perp");defineSymbol(math$2,main,rel,"","\\preceq",!0);defineSymbol(math$2,main,rel,"","\\succeq",!0);defineSymbol(math$2,main,rel,"","\\simeq",!0);defineSymbol(math$2,main,rel,"","\\mid",!0);defineSymbol(math$2,main,rel,"","\\ll",!0);defineSymbol(math$2,main,rel,"","\\gg",!0);defineSymbol(math$2,main,rel,"","\\asymp",!0);defineSymbol(math$2,main,rel,"","\\parallel");defineSymbol(math$2,main,rel,"","\\bowtie",!0);defineSymbol(math$2,main,rel,"","\\smile",!0);defineSymbol(math$2,main,rel,"","\\sqsubseteq",!0);defineSymbol(math$2,main,rel,"","\\sqsupseteq",!0);defineSymbol(math$2,main,rel,"","\\doteq",!0);defineSymbol(math$2,main,rel,"","\\frown",!0);defineSymbol(math$2,main,rel,"","\\ni",!0);defineSymbol(math$2,main,rel,"","\\propto",!0);defineSymbol(math$2,main,rel,"","\\vdash",!0);defineSymbol(math$2,main,rel,"","\\dashv",!0);defineSymbol(math$2,main,rel,"","\\owns");defineSymbol(math$2,main,punct,".","\\ldotp");defineSymbol(math$2,main,punct,"","\\cdotp");defineSymbol(math$2,main,textord,"#","\\#");defineSymbol(text,main,textord,"#","\\#");defineSymbol(math$2,main,textord,"&","\\&");defineSymbol(text,main,textord,"&","\\&");defineSymbol(math$2,main,textord,"","\\aleph",!0);defineSymbol(math$2,main,textord,"","\\forall",!0);defineSymbol(math$2,main,textord,"","\\hbar",!0);defineSymbol(math$2,main,textord,"","\\exists",!0);defineSymbol(math$2,main,textord,"","\\nabla",!0);defineSymbol(math$2,main,textord,"","\\flat",!0);defineSymbol(math$2,main,textord,"","\\ell",!0);defineSymbol(math$2,main,textord,"","\\natural",!0);defineSymbol(math$2,main,textord,"","\\clubsuit",!0);defineSymbol(math$2,main,textord,"","\\wp",!0);defineSymbol(math$2,main,textord,"","\\sharp",!0);defineSymbol(math$2,main,textord,"","\\diamondsuit",!0);defineSymbol(math$2,main,textord,"","\\Re",!0);defineSymbol(math$2,main,textord,"","\\heartsuit",!0);defineSymbol(math$2,main,textord,"","\\Im",!0);defineSymbol(math$2,main,textord,"","\\spadesuit",!0);defineSymbol(math$2,main,textord,"","\\S",!0);defineSymbol(text,main,textord,"","\\S");defineSymbol(math$2,main,textord,"","\\P",!0);defineSymbol(text,main,textord,"","\\P");defineSymbol(math$2,main,textord,"","\\dag");defineSymbol(text,main,textord,"","\\dag");defineSymbol(text,main,textord,"","\\textdagger");defineSymbol(math$2,main,textord,"","\\ddag");defineSymbol(text,main,textord,"","\\ddag");defineSymbol(text,main,textord,"","\\textdaggerdbl");defineSymbol(math$2,main,close,"","\\rmoustache",!0);defineSymbol(math$2,main,open,"","\\lmoustache",!0);defineSymbol(math$2,main,close,"","\\rgroup",!0);defineSymbol(math$2,main,open,"","\\lgroup",!0);defineSymbol(math$2,main,bin,"","\\mp",!0);defineSymbol(math$2,main,bin,"","\\ominus",!0);defineSymbol(math$2,main,bin,"","\\uplus",!0);defineSymbol(math$2,main,bin,"","\\sqcap",!0);defineSymbol(math$2,main,bin,"","\\ast");defineSymbol(math$2,main,bin,"","\\sqcup",!0);defineSymbol(math$2,main,bin,"","\\bigcirc",!0);defineSymbol(math$2,main,bin,"","\\bullet",!0);defineSymbol(math$2,main,bin,"","\\ddagger");defineSymbol(math$2,main,bin,"","\\wr",!0);defineSymbol(math$2,main,bin,"","\\amalg");defineSymbol(math$2,main,bin,"&","\\And");defineSymbol(math$2,main,rel,"","\\longleftarrow",!0);defineSymbol(math$2,main,rel,"","\\Leftarrow",!0);defineSymbol(math$2,main,rel,"","\\Longleftarrow",!0);defineSymbol(math$2,main,rel,"","\\longrightarrow",!0);defineSymbol(math$2,main,rel,"","\\Rightarrow",!0);defineSymbol(math$2,main,rel,"","\\Longrightarrow",!0);defineSymbol(math$2,main,rel,"","\\leftrightarrow",!0);defineSymbol(math$2,main,rel,"","\\longleftrightarrow",!0);defineSymbol(math$2,main,rel,"","\\Leftrightarrow",!0);defineSymbol(math$2,main,rel,"","\\Longleftrightarrow",!0);defineSymbol(math$2,main,rel,"","\\mapsto",!0);defineSymbol(math$2,main,rel,"","\\longmapsto",!0);defineSymbol(math$2,main,rel,"","\\nearrow",!0);defineSymbol(math$2,main,rel,"","\\hookleftarrow",!0);defineSymbol(math$2,main,rel,"","\\hookrightarrow",!0);defineSymbol(math$2,main,rel,"","\\searrow",!0);defineSymbol(math$2,main,rel,"","\\leftharpoonup",!0);defineSymbol(math$2,main,rel,"","\\rightharpoonup",!0);defineSymbol(math$2,main,rel,"","\\swarrow",!0);defineSymbol(math$2,main,rel,"","\\leftharpoondown",!0);defineSymbol(math$2,main,rel,"","\\rightharpoondown",!0);defineSymbol(math$2,main,rel,"","\\nwarrow",!0);defineSymbol(math$2,main,rel,"","\\rightleftharpoons",!0);defineSymbol(math$2,ams,rel,"","\\nless",!0);defineSymbol(math$2,ams,rel,"","\\@nleqslant");defineSymbol(math$2,ams,rel,"","\\@nleqq");defineSymbol(math$2,ams,rel,"","\\lneq",!0);defineSymbol(math$2,ams,rel,"","\\lneqq",!0);defineSymbol(math$2,ams,rel,"","\\@lvertneqq");defineSymbol(math$2,ams,rel,"","\\lnsim",!0);defineSymbol(math$2,ams,rel,"","\\lnapprox",!0);defineSymbol(math$2,ams,rel,"","\\nprec",!0);defineSymbol(math$2,ams,rel,"","\\npreceq",!0);defineSymbol(math$2,ams,rel,"","\\precnsim",!0);defineSymbol(math$2,ams,rel,"","\\precnapprox",!0);defineSymbol(math$2,ams,rel,"","\\nsim",!0);defineSymbol(math$2,ams,rel,"","\\@nshortmid");defineSymbol(math$2,ams,rel,"","\\nmid",!0);defineSymbol(math$2,ams,rel,"","\\nvdash",!0);defineSymbol(math$2,ams,rel,"","\\nvDash",!0);defineSymbol(math$2,ams,rel,"","\\ntriangleleft");defineSymbol(math$2,ams,rel,"","\\ntrianglelefteq",!0);defineSymbol(math$2,ams,rel,"","\\subsetneq",!0);defineSymbol(math$2,ams,rel,"","\\@varsubsetneq");defineSymbol(math$2,ams,rel,"","\\subsetneqq",!0);defineSymbol(math$2,ams,rel,"","\\@varsubsetneqq");defineSymbol(math$2,ams,rel,"","\\ngtr",!0);defineSymbol(math$2,ams,rel,"","\\@ngeqslant");defineSymbol(math$2,ams,rel,"","\\@ngeqq");defineSymbol(math$2,ams,rel,"","\\gneq",!0);defineSymbol(math$2,ams,rel,"","\\gneqq",!0);defineSymbol(math$2,ams,rel,"","\\@gvertneqq");defineSymbol(math$2,ams,rel,"","\\gnsim",!0);defineSymbol(math$2,ams,rel,"","\\gnapprox",!0);defineSymbol(math$2,ams,rel,"","\\nsucc",!0);defineSymbol(math$2,ams,rel,"","\\nsucceq",!0);defineSymbol(math$2,ams,rel,"","\\succnsim",!0);defineSymbol(math$2,ams,rel,"","\\succnapprox",!0);defineSymbol(math$2,ams,rel,"","\\ncong",!0);defineSymbol(math$2,ams,rel,"","\\@nshortparallel");defineSymbol(math$2,ams,rel,"","\\nparallel",!0);defineSymbol(math$2,ams,rel,"","\\nVDash",!0);defineSymbol(math$2,ams,rel,"","\\ntriangleright");defineSymbol(math$2,ams,rel,"","\\ntrianglerighteq",!0);defineSymbol(math$2,ams,rel,"","\\@nsupseteqq");defineSymbol(math$2,ams,rel,"","\\supsetneq",!0);defineSymbol(math$2,ams,rel,"","\\@varsupsetneq");defineSymbol(math$2,ams,rel,"","\\supsetneqq",!0);defineSymbol(math$2,ams,rel,"","\\@varsupsetneqq");defineSymbol(math$2,ams,rel,"","\\nVdash",!0);defineSymbol(math$2,ams,rel,"","\\precneqq",!0);defineSymbol(math$2,ams,rel,"","\\succneqq",!0);defineSymbol(math$2,ams,rel,"","\\@nsubseteqq");defineSymbol(math$2,ams,bin,"","\\unlhd");defineSymbol(math$2,ams,bin,"","\\unrhd");defineSymbol(math$2,ams,rel,"","\\nleftarrow",!0);defineSymbol(math$2,ams,rel,"","\\nrightarrow",!0);defineSymbol(math$2,ams,rel,"","\\nLeftarrow",!0);defineSymbol(math$2,ams,rel,"","\\nRightarrow",!0);defineSymbol(math$2,ams,rel,"","\\nleftrightarrow",!0);defineSymbol(math$2,ams,rel,"","\\nLeftrightarrow",!0);defineSymbol(math$2,ams,rel,"","\\vartriangle");defineSymbol(math$2,ams,textord,"","\\hslash");defineSymbol(math$2,ams,textord,"","\\triangledown");defineSymbol(math$2,ams,textord,"","\\lozenge");defineSymbol(math$2,ams,textord,"","\\circledS");defineSymbol(math$2,ams,textord,"","\\circledR");defineSymbol(text,ams,textord,"","\\circledR");defineSymbol(math$2,ams,textord,"","\\measuredangle",!0);defineSymbol(math$2,ams,textord,"","\\nexists");defineSymbol(math$2,ams,textord,"","\\mho");defineSymbol(math$2,ams,textord,"","\\Finv",!0);defineSymbol(math$2,ams,textord,"","\\Game",!0);defineSymbol(math$2,ams,textord,"","\\backprime");defineSymbol(math$2,ams,textord,"","\\blacktriangle");defineSymbol(math$2,ams,textord,"","\\blacktriangledown");defineSymbol(math$2,ams,textord,"","\\blacksquare");defineSymbol(math$2,ams,textord,"","\\blacklozenge");defineSymbol(math$2,ams,textord,"","\\bigstar");defineSymbol(math$2,ams,textord,"","\\sphericalangle",!0);defineSymbol(math$2,ams,textord,"","\\complement",!0);defineSymbol(math$2,ams,textord,"","\\eth",!0);defineSymbol(text,main,textord,"","");defineSymbol(math$2,ams,textord,"","\\diagup");defineSymbol(math$2,ams,textord,"","\\diagdown");defineSymbol(math$2,ams,textord,"","\\square");defineSymbol(math$2,ams,textord,"","\\Box");defineSymbol(math$2,ams,textord,"","\\Diamond");defineSymbol(math$2,ams,textord,"","\\yen",!0);defineSymbol(text,ams,textord,"","\\yen",!0);defineSymbol(math$2,ams,textord,"","\\checkmark",!0);defineSymbol(text,ams,textord,"","\\checkmark");defineSymbol(math$2,ams,textord,"","\\beth",!0);defineSymbol(math$2,ams,textord,"","\\daleth",!0);defineSymbol(math$2,ams,textord,"","\\gimel",!0);defineSymbol(math$2,ams,textord,"","\\digamma",!0);defineSymbol(math$2,ams,textord,"","\\varkappa");defineSymbol(math$2,ams,open,"","\\@ulcorner",!0);defineSymbol(math$2,ams,close,"","\\@urcorner",!0);defineSymbol(math$2,ams,open,"","\\@llcorner",!0);defineSymbol(math$2,ams,close,"","\\@lrcorner",!0);defineSymbol(math$2,ams,rel,"","\\leqq",!0);defineSymbol(math$2,ams,rel,"","\\leqslant",!0);defineSymbol(math$2,ams,rel,"","\\eqslantless",!0);defineSymbol(math$2,ams,rel,"","\\lesssim",!0);defineSymbol(math$2,ams,rel,"","\\lessapprox",!0);defineSymbol(math$2,ams,rel,"","\\approxeq",!0);defineSymbol(math$2,ams,bin,"","\\lessdot");defineSymbol(math$2,ams,rel,"","\\lll",!0);defineSymbol(math$2,ams,rel,"","\\lessgtr",!0);defineSymbol(math$2,ams,rel,"","\\lesseqgtr",!0);defineSymbol(math$2,ams,rel,"","\\lesseqqgtr",!0);defineSymbol(math$2,ams,rel,"","\\doteqdot");defineSymbol(math$2,ams,rel,"","\\risingdotseq",!0);defineSymbol(math$2,ams,rel,"","\\fallingdotseq",!0);defineSymbol(math$2,ams,rel,"","\\backsim",!0);defineSymbol(math$2,ams,rel,"","\\backsimeq",!0);defineSymbol(math$2,ams,rel,"","\\subseteqq",!0);defineSymbol(math$2,ams,rel,"","\\Subset",!0);defineSymbol(math$2,ams,rel,"","\\sqsubset",!0);defineSymbol(math$2,ams,rel,"","\\preccurlyeq",!0);defineSymbol(math$2,ams,rel,"","\\curlyeqprec",!0);defineSymbol(math$2,ams,rel,"","\\precsim",!0);defineSymbol(math$2,ams,rel,"","\\precapprox",!0);defineSymbol(math$2,ams,rel,"","\\vartriangleleft");defineSymbol(math$2,ams,rel,"","\\trianglelefteq");defineSymbol(math$2,ams,rel,"","\\vDash",!0);defineSymbol(math$2,ams,rel,"","\\Vvdash",!0);defineSymbol(math$2,ams,rel,"","\\smallsmile");defineSymbol(math$2,ams,rel,"","\\smallfrown");defineSymbol(math$2,ams,rel,"","\\bumpeq",!0);defineSymbol(math$2,ams,rel,"","\\Bumpeq",!0);defineSymbol(math$2,ams,rel,"","\\geqq",!0);defineSymbol(math$2,ams,rel,"","\\geqslant",!0);defineSymbol(math$2,ams,rel,"","\\eqslantgtr",!0);defineSymbol(math$2,ams,rel,"","\\gtrsim",!0);defineSymbol(math$2,ams,rel,"","\\gtrapprox",!0);defineSymbol(math$2,ams,bin,"","\\gtrdot");defineSymbol(math$2,ams,rel,"","\\ggg",!0);defineSymbol(math$2,ams,rel,"","\\gtrless",!0);defineSymbol(math$2,ams,rel,"","\\gtreqless",!0);defineSymbol(math$2,ams,rel,"","\\gtreqqless",!0);defineSymbol(math$2,ams,rel,"","\\eqcirc",!0);defineSymbol(math$2,ams,rel,"","\\circeq",!0);defineSymbol(math$2,ams,rel,"","\\triangleq",!0);defineSymbol(math$2,ams,rel,"","\\thicksim");defineSymbol(math$2,ams,rel,"","\\thickapprox");defineSymbol(math$2,ams,rel,"","\\supseteqq",!0);defineSymbol(math$2,ams,rel,"","\\Supset",!0);defineSymbol(math$2,ams,rel,"","\\sqsupset",!0);defineSymbol(math$2,ams,rel,"","\\succcurlyeq",!0);defineSymbol(math$2,ams,rel,"","\\curlyeqsucc",!0);defineSymbol(math$2,ams,rel,"","\\succsim",!0);defineSymbol(math$2,ams,rel,"","\\succapprox",!0);defineSymbol(math$2,ams,rel,"","\\vartriangleright");defineSymbol(math$2,ams,rel,"","\\trianglerighteq");defineSymbol(math$2,ams,rel,"","\\Vdash",!0);defineSymbol(math$2,ams,rel,"","\\shortmid");defineSymbol(math$2,ams,rel,"","\\shortparallel");defineSymbol(math$2,ams,rel,"","\\between",!0);defineSymbol(math$2,ams,rel,"","\\pitchfork",!0);defineSymbol(math$2,ams,rel,"","\\varpropto");defineSymbol(math$2,ams,rel,"","\\blacktriangleleft");defineSymbol(math$2,ams,rel,"","\\therefore",!0);defineSymbol(math$2,ams,rel,"","\\backepsilon");defineSymbol(math$2,ams,rel,"","\\blacktriangleright");defineSymbol(math$2,ams,rel,"","\\because",!0);defineSymbol(math$2,ams,rel,"","\\llless");defineSymbol(math$2,ams,rel,"","\\gggtr");defineSymbol(math$2,ams,bin,"","\\lhd");defineSymbol(math$2,ams,bin,"","\\rhd");defineSymbol(math$2,ams,rel,"","\\eqsim",!0);defineSymbol(math$2,main,rel,"","\\Join");defineSymbol(math$2,ams,rel,"","\\Doteq",!0);defineSymbol(math$2,ams,bin,"","\\dotplus",!0);defineSymbol(math$2,ams,bin,"","\\smallsetminus");defineSymbol(math$2,ams,bin,"","\\Cap",!0);defineSymbol(math$2,ams,bin,"","\\Cup",!0);defineSymbol(math$2,ams,bin,"","\\doublebarwedge",!0);defineSymbol(math$2,ams,bin,"","\\boxminus",!0);defineSymbol(math$2,ams,bin,"","\\boxplus",!0);defineSymbol(math$2,ams,bin,"","\\divideontimes",!0);defineSymbol(math$2,ams,bin,"","\\ltimes",!0);defineSymbol(math$2,ams,bin,"","\\rtimes",!0);defineSymbol(math$2,ams,bin,"","\\leftthreetimes",!0);defineSymbol(math$2,ams,bin,"","\\rightthreetimes",!0);defineSymbol(math$2,ams,bin,"","\\curlywedge",!0);defineSymbol(math$2,ams,bin,"","\\curlyvee",!0);defineSymbol(math$2,ams,bin,"","\\circleddash",!0);defineSymbol(math$2,ams,bin,"","\\circledast",!0);defineSymbol(math$2,ams,bin,"","\\centerdot");defineSymbol(math$2,ams,bin,"","\\intercal",!0);defineSymbol(math$2,ams,bin,"","\\doublecap");defineSymbol(math$2,ams,bin,"","\\doublecup");defineSymbol(math$2,ams,bin,"","\\boxtimes",!0);defineSymbol(math$2,ams,rel,"","\\dashrightarrow",!0);defineSymbol(math$2,ams,rel,"","\\dashleftarrow",!0);defineSymbol(math$2,ams,rel,"","\\leftleftarrows",!0);defineSymbol(math$2,ams,rel,"","\\leftrightarrows",!0);defineSymbol(math$2,ams,rel,"","\\Lleftarrow",!0);defineSymbol(math$2,ams,rel,"","\\twoheadleftarrow",!0);defineSymbol(math$2,ams,rel,"","\\leftarrowtail",!0);defineSymbol(math$2,ams,rel,"","\\looparrowleft",!0);defineSymbol(math$2,ams,rel,"","\\leftrightharpoons",!0);defineSymbol(math$2,ams,rel,"","\\curvearrowleft",!0);defineSymbol(math$2,ams,rel,"","\\circlearrowleft",!0);defineSymbol(math$2,ams,rel,"","\\Lsh",!0);defineSymbol(math$2,ams,rel,"","\\upuparrows",!0);defineSymbol(math$2,ams,rel,"","\\upharpoonleft",!0);defineSymbol(math$2,ams,rel,"","\\downharpoonleft",!0);defineSymbol(math$2,main,rel,"","\\origof",!0);defineSymbol(math$2,main,rel,"","\\imageof",!0);defineSymbol(math$2,ams,rel,"","\\multimap",!0);defineSymbol(math$2,ams,rel,"","\\leftrightsquigarrow",!0);defineSymbol(math$2,ams,rel,"","\\rightrightarrows",!0);defineSymbol(math$2,ams,rel,"","\\rightleftarrows",!0);defineSymbol(math$2,ams,rel,"","\\twoheadrightarrow",!0);defineSymbol(math$2,ams,rel,"","\\rightarrowtail",!0);defineSymbol(math$2,ams,rel,"","\\looparrowright",!0);defineSymbol(math$2,ams,rel,"","\\curvearrowright",!0);defineSymbol(math$2,ams,rel,"","\\circlearrowright",!0);defineSymbol(math$2,ams,rel,"","\\Rsh",!0);defineSymbol(math$2,ams,rel,"","\\downdownarrows",!0);defineSymbol(math$2,ams,rel,"","\\upharpoonright",!0);defineSymbol(math$2,ams,rel,"","\\downharpoonright",!0);defineSymbol(math$2,ams,rel,"","\\rightsquigarrow",!0);defineSymbol(math$2,ams,rel,"","\\leadsto");defineSymbol(math$2,ams,rel,"","\\Rrightarrow",!0);defineSymbol(math$2,ams,rel,"","\\restriction");defineSymbol(math$2,main,textord,"","`");defineSymbol(math$2,main,textord,"$","\\$");defineSymbol(text,main,textord,"$","\\$");defineSymbol(text,main,textord,"$","\\textdollar");defineSymbol(math$2,main,textord,"%","\\%");defineSymbol(text,main,textord,"%","\\%");defineSymbol(math$2,main,textord,"_","\\_");defineSymbol(text,main,textord,"_","\\_");defineSymbol(text,main,textord,"_","\\textunderscore");defineSymbol(math$2,main,textord,"","\\angle",!0);defineSymbol(math$2,main,textord,"","\\infty",!0);defineSymbol(math$2,main,textord,"","\\prime");defineSymbol(math$2,main,textord,"","\\triangle");defineSymbol(math$2,main,textord,"","\\Gamma",!0);defineSymbol(math$2,main,textord,"","\\Delta",!0);defineSymbol(math$2,main,textord,"","\\Theta",!0);defineSymbol(math$2,main,textord,"","\\Lambda",!0);defineSymbol(math$2,main,textord,"","\\Xi",!0);defineSymbol(math$2,main,textord,"","\\Pi",!0);defineSymbol(math$2,main,textord,"","\\Sigma",!0);defineSymbol(math$2,main,textord,"","\\Upsilon",!0);defineSymbol(math$2,main,textord,"","\\Phi",!0);defineSymbol(math$2,main,textord,"","\\Psi",!0);defineSymbol(math$2,main,textord,"","\\Omega",!0);defineSymbol(math$2,main,textord,"A","");defineSymbol(math$2,main,textord,"B","");defineSymbol(math$2,main,textord,"E","");defineSymbol(math$2,main,textord,"Z","");defineSymbol(math$2,main,textord,"H","");defineSymbol(math$2,main,textord,"I","");defineSymbol(math$2,main,textord,"K","");defineSymbol(math$2,main,textord,"M","");defineSymbol(math$2,main,textord,"N","");defineSymbol(math$2,main,textord,"O","");defineSymbol(math$2,main,textord,"P","");defineSymbol(math$2,main,textord,"T","");defineSymbol(math$2,main,textord,"X","");defineSymbol(math$2,main,textord,"","\\neg",!0);defineSymbol(math$2,main,textord,"","\\lnot");defineSymbol(math$2,main,textord,"","\\top");defineSymbol(math$2,main,textord,"","\\bot");defineSymbol(math$2,main,textord,"","\\emptyset");defineSymbol(math$2,ams,textord,"","\\varnothing");defineSymbol(math$2,main,mathord,"","\\alpha",!0);defineSymbol(math$2,main,mathord,"","\\beta",!0);defineSymbol(math$2,main,mathord,"","\\gamma",!0);defineSymbol(math$2,main,mathord,"","\\delta",!0);defineSymbol(math$2,main,mathord,"","\\epsilon",!0);defineSymbol(math$2,main,mathord,"","\\zeta",!0);defineSymbol(math$2,main,mathord,"","\\eta",!0);defineSymbol(math$2,main,mathord,"","\\theta",!0);defineSymbol(math$2,main,mathord,"","\\iota",!0);defineSymbol(math$2,main,mathord,"","\\kappa",!0);defineSymbol(math$2,main,mathord,"","\\lambda",!0);defineSymbol(math$2,main,mathord,"","\\mu",!0);defineSymbol(math$2,main,mathord,"","\\nu",!0);defineSymbol(math$2,main,mathord,"","\\xi",!0);defineSymbol(math$2,main,mathord,"","\\omicron",!0);defineSymbol(math$2,main,mathord,"","\\pi",!0);defineSymbol(math$2,main,mathord,"","\\rho",!0);defineSymbol(math$2,main,mathord,"","\\sigma",!0);defineSymbol(math$2,main,mathord,"","\\tau",!0);defineSymbol(math$2,main,mathord,"","\\upsilon",!0);defineSymbol(math$2,main,mathord,"","\\phi",!0);defineSymbol(math$2,main,mathord,"","\\chi",!0);defineSymbol(math$2,main,mathord,"","\\psi",!0);defineSymbol(math$2,main,mathord,"","\\omega",!0);defineSymbol(math$2,main,mathord,"","\\varepsilon",!0);defineSymbol(math$2,main,mathord,"","\\vartheta",!0);defineSymbol(math$2,main,mathord,"","\\varpi",!0);defineSymbol(math$2,main,mathord,"","\\varrho",!0);defineSymbol(math$2,main,mathord,"","\\varsigma",!0);defineSymbol(math$2,main,mathord,"","\\varphi",!0);defineSymbol(math$2,main,bin,"","*",!0);defineSymbol(math$2,main,bin,"+","+");defineSymbol(math$2,main,bin,"","-",!0);defineSymbol(math$2,main,bin,"","\\cdot",!0);defineSymbol(math$2,main,bin,"","\\circ",!0);defineSymbol(math$2,main,bin,"","\\div",!0);defineSymbol(math$2,main,bin,"","\\pm",!0);defineSymbol(math$2,main,bin,"","\\times",!0);defineSymbol(math$2,main,bin,"","\\cap",!0);defineSymbol(math$2,main,bin,"","\\cup",!0);defineSymbol(math$2,main,bin,"","\\setminus",!0);defineSymbol(math$2,main,bin,"","\\land");defineSymbol(math$2,main,bin,"","\\lor");defineSymbol(math$2,main,bin,"","\\wedge",!0);defineSymbol(math$2,main,bin,"","\\vee",!0);defineSymbol(math$2,main,textord,"","\\surd");defineSymbol(math$2,main,open,"","\\langle",!0);defineSymbol(math$2,main,open,"","\\lvert");defineSymbol(math$2,main,open,"","\\lVert");defineSymbol(math$2,main,close,"?","?");defineSymbol(math$2,main,close,"!","!");defineSymbol(math$2,main,close,"","\\rangle",!0);defineSymbol(math$2,main,close,"","\\rvert");defineSymbol(math$2,main,close,"","\\rVert");defineSymbol(math$2,main,rel,"=","=");defineSymbol(math$2,main,rel,":",":");defineSymbol(math$2,main,rel,"","\\approx",!0);defineSymbol(math$2,main,rel,"","\\cong",!0);defineSymbol(math$2,main,rel,"","\\ge");defineSymbol(math$2,main,rel,"","\\geq",!0);defineSymbol(math$2,main,rel,"","\\gets");defineSymbol(math$2,main,rel,">","\\gt",!0);defineSymbol(math$2,main,rel,"","\\in",!0);defineSymbol(math$2,main,rel,"","\\@not");defineSymbol(math$2,main,rel,"","\\subset",!0);defineSymbol(math$2,main,rel,"","\\supset",!0);defineSymbol(math$2,main,rel,"","\\subseteq",!0);defineSymbol(math$2,main,rel,"","\\supseteq",!0);defineSymbol(math$2,ams,rel,"","\\nsubseteq",!0);defineSymbol(math$2,ams,rel,"","\\nsupseteq",!0);defineSymbol(math$2,main,rel,"","\\models");defineSymbol(math$2,main,rel,"","\\leftarrow",!0);defineSymbol(math$2,main,rel,"","\\le");defineSymbol(math$2,main,rel,"","\\leq",!0);defineSymbol(math$2,main,rel,"<","\\lt",!0);defineSymbol(math$2,main,rel,"","\\rightarrow",!0);defineSymbol(math$2,main,rel,"","\\to");defineSymbol(math$2,ams,rel,"","\\ngeq",!0);defineSymbol(math$2,ams,rel,"","\\nleq",!0);defineSymbol(math$2,main,spacing,"","\\ ");defineSymbol(math$2,main,spacing,"","\\space");defineSymbol(math$2,main,spacing,"","\\nobreakspace");defineSymbol(text,main,spacing,"","\\ ");defineSymbol(text,main,spacing,""," ");defineSymbol(text,main,spacing,"","\\space");defineSymbol(text,main,spacing,"","\\nobreakspace");defineSymbol(math$2,main,spacing,null,"\\nobreak");defineSymbol(math$2,main,spacing,null,"\\allowbreak");defineSymbol(math$2,main,punct,",",",");defineSymbol(math$2,main,punct,";",";");defineSymbol(math$2,ams,bin,"","\\barwedge",!0);defineSymbol(math$2,ams,bin,"","\\veebar",!0);defineSymbol(math$2,main,bin,"","\\odot",!0);defineSymbol(math$2,main,bin,"","\\oplus",!0);defineSymbol(math$2,main,bin,"","\\otimes",!0);defineSymbol(math$2,main,textord,"","\\partial",!0);defineSymbol(math$2,main,bin,"","\\oslash",!0);defineSymbol(math$2,ams,bin,"","\\circledcirc",!0);defineSymbol(math$2,ams,bin,"","\\boxdot",!0);defineSymbol(math$2,main,bin,"","\\bigtriangleup");defineSymbol(math$2,main,bin,"","\\bigtriangledown");defineSymbol(math$2,main,bin,"","\\dagger");defineSymbol(math$2,main,bin,"","\\diamond");defineSymbol(math$2,main,bin,"","\\star");defineSymbol(math$2,main,bin,"","\\triangleleft");defineSymbol(math$2,main,bin,"","\\triangleright");defineSymbol(math$2,main,open,"{","\\{");defineSymbol(text,main,textord,"{","\\{");defineSymbol(text,main,textord,"{","\\textbraceleft");defineSymbol(math$2,main,close,"}","\\}");defineSymbol(text,main,textord,"}","\\}");defineSymbol(text,main,textord,"}","\\textbraceright");defineSymbol(math$2,main,open,"{","\\lbrace");defineSymbol(math$2,main,close,"}","\\rbrace");defineSymbol(math$2,main,open,"[","\\lbrack",!0);defineSymbol(text,main,textord,"[","\\lbrack",!0);defineSymbol(math$2,main,close,"]","\\rbrack",!0);defineSymbol(text,main,textord,"]","\\rbrack",!0);defineSymbol(math$2,main,open,"(","\\lparen",!0);defineSymbol(math$2,main,close,")","\\rparen",!0);defineSymbol(text,main,textord,"<","\\textless",!0);defineSymbol(text,main,textord,">","\\textgreater",!0);defineSymbol(math$2,main,open,"","\\lfloor",!0);defineSymbol(math$2,main,close,"","\\rfloor",!0);defineSymbol(math$2,main,open,"","\\lceil",!0);defineSymbol(math$2,main,close,"","\\rceil",!0);defineSymbol(math$2,main,textord,"\\","\\backslash");defineSymbol(math$2,main,textord,"","|");defineSymbol(math$2,main,textord,"","\\vert");defineSymbol(text,main,textord,"|","\\textbar",!0);defineSymbol(math$2,main,textord,"","\\|");defineSymbol(math$2,main,textord,"","\\Vert");defineSymbol(text,main,textord,"","\\textbardbl");defineSymbol(text,main,textord,"~","\\textasciitilde");defineSymbol(text,main,textord,"\\","\\textbackslash");defineSymbol(text,main,textord,"^","\\textasciicircum");defineSymbol(math$2,main,rel,"","\\uparrow",!0);defineSymbol(math$2,main,rel,"","\\Uparrow",!0);defineSymbol(math$2,main,rel,"","\\downarrow",!0);defineSymbol(math$2,main,rel,"","\\Downarrow",!0);defineSymbol(math$2,main,rel,"","\\updownarrow",!0);defineSymbol(math$2,main,rel,"","\\Updownarrow",!0);defineSymbol(math$2,main,op,"","\\coprod");defineSymbol(math$2,main,op,"","\\bigvee");defineSymbol(math$2,main,op,"","\\bigwedge");defineSymbol(math$2,main,op,"","\\biguplus");defineSymbol(math$2,main,op,"","\\bigcap");defineSymbol(math$2,main,op,"","\\bigcup");defineSymbol(math$2,main,op,"","\\int");defineSymbol(math$2,main,op,"","\\intop");defineSymbol(math$2,main,op,"","\\iint");defineSymbol(math$2,main,op,"","\\iiint");defineSymbol(math$2,main,op,"","\\prod");defineSymbol(math$2,main,op,"","\\sum");defineSymbol(math$2,main,op,"","\\bigotimes");defineSymbol(math$2,main,op,"","\\bigoplus");defineSymbol(math$2,main,op,"","\\bigodot");defineSymbol(math$2,main,op,"","\\oint");defineSymbol(math$2,main,op,"","\\oiint");defineSymbol(math$2,main,op,"","\\oiiint");defineSymbol(math$2,main,op,"","\\bigsqcup");defineSymbol(math$2,main,op,"","\\smallint");defineSymbol(text,main,inner,"","\\textellipsis");defineSymbol(math$2,main,inner,"","\\mathellipsis");defineSymbol(text,main,inner,"","\\ldots",!0);defineSymbol(math$2,main,inner,"","\\ldots",!0);defineSymbol(math$2,main,inner,"","\\@cdots",!0);defineSymbol(math$2,main,inner,"","\\ddots",!0);defineSymbol(math$2,main,textord,"","\\varvdots");defineSymbol(text,main,textord,"","\\varvdots");defineSymbol(math$2,main,accent,"","\\acute");defineSymbol(math$2,main,accent,"","\\grave");defineSymbol(math$2,main,accent,"","\\ddot");defineSymbol(math$2,main,accent,"~","\\tilde");defineSymbol(math$2,main,accent,"","\\bar");defineSymbol(math$2,main,accent,"","\\breve");defineSymbol(math$2,main,accent,"","\\check");defineSymbol(math$2,main,accent,"^","\\hat");defineSymbol(math$2,main,accent,"","\\vec");defineSymbol(math$2,main,accent,"","\\dot");defineSymbol(math$2,main,accent,"","\\mathring");defineSymbol(math$2,main,mathord,"","\\@imath");defineSymbol(math$2,main,mathord,"","\\@jmath");defineSymbol(math$2,main,textord,"","");defineSymbol(math$2,main,textord,"","");defineSymbol(text,main,textord,"","\\i",!0);defineSymbol(text,main,textord,"","\\j",!0);defineSymbol(text,main,textord,"","\\ss",!0);defineSymbol(text,main,textord,"","\\ae",!0);defineSymbol(text,main,textord,"","\\oe",!0);defineSymbol(text,main,textord,"","\\o",!0);defineSymbol(text,main,textord,"","\\AE",!0);defineSymbol(text,main,textord,"","\\OE",!0);defineSymbol(text,main,textord,"","\\O",!0);defineSymbol(text,main,accent,"","\\'");defineSymbol(text,main,accent,"","\\`");defineSymbol(text,main,accent,"","\\^");defineSymbol(text,main,accent,"","\\~");defineSymbol(text,main,accent,"","\\=");defineSymbol(text,main,accent,"","\\u");defineSymbol(text,main,accent,"","\\.");defineSymbol(text,main,accent,"","\\c");defineSymbol(text,main,accent,"","\\r");defineSymbol(text,main,accent,"","\\v");defineSymbol(text,main,accent,"",'\\"');defineSymbol(text,main,accent,"","\\H");defineSymbol(text,main,accent,"","\\textcircled");var ligatures={"--":!0,"---":!0,"``":!0,"''":!0};defineSymbol(text,main,textord,"","--",!0);defineSymbol(text,main,textord,"","\\textendash");defineSymbol(text,main,textord,"","---",!0);defineSymbol(text,main,textord,"","\\textemdash");defineSymbol(text,main,textord,"","`",!0);defineSymbol(text,main,textord,"","\\textquoteleft");defineSymbol(text,main,textord,"","'",!0);defineSymbol(text,main,textord,"","\\textquoteright");defineSymbol(text,main,textord,"","``",!0);defineSymbol(text,main,textord,"","\\textquotedblleft");defineSymbol(text,main,textord,"","''",!0);defineSymbol(text,main,textord,"","\\textquotedblright");defineSymbol(math$2,main,textord,"","\\degree",!0);defineSymbol(text,main,textord,"","\\degree");defineSymbol(text,main,textord,"","\\textdegree",!0);defineSymbol(math$2,main,textord,"","\\pounds");defineSymbol(math$2,main,textord,"","\\mathsterling",!0);defineSymbol(text,main,textord,"","\\pounds");defineSymbol(text,main,textord,"","\\textsterling",!0);defineSymbol(math$2,ams,textord,"","\\maltese");defineSymbol(text,ams,textord,"","\\maltese");var mathTextSymbols='0123456789/@."';for(var i$4=0;i$4<mathTextSymbols.length;i$4++){var ch=mathTextSymbols.charAt(i$4);defineSymbol(math$2,main,textord,ch,ch)}var textSymbols='0123456789!@*()-=+";:?/.,';for(var _i=0;_i<textSymbols.length;_i++){var _ch=textSymbols.charAt(_i);defineSymbol(text,main,textord,_ch,_ch)}var letters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var _i2=0;_i2<letters.length;_i2++){var _ch2=letters.charAt(_i2);defineSymbol(math$2,main,mathord,_ch2,_ch2),defineSymbol(text,main,textord,_ch2,_ch2)}defineSymbol(math$2,ams,textord,"C","");defineSymbol(text,ams,textord,"C","");defineSymbol(math$2,ams,textord,"H","");defineSymbol(text,ams,textord,"H","");defineSymbol(math$2,ams,textord,"N","");defineSymbol(text,ams,textord,"N","");defineSymbol(math$2,ams,textord,"P","");defineSymbol(text,ams,textord,"P","");defineSymbol(math$2,ams,textord,"Q","");defineSymbol(text,ams,textord,"Q","");defineSymbol(math$2,ams,textord,"R","");defineSymbol(text,ams,textord,"R","");defineSymbol(math$2,ams,textord,"Z","");defineSymbol(text,ams,textord,"Z","");defineSymbol(math$2,main,mathord,"h","");defineSymbol(text,main,mathord,"h","");var wideChar="";for(var _i3=0;_i3<letters.length;_i3++){var _ch3=letters.charAt(_i3);wideChar=String.fromCharCode(55349,56320+_i3),defineSymbol(math$2,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56372+_i3),defineSymbol(math$2,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56424+_i3),defineSymbol(math$2,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56580+_i3),defineSymbol(math$2,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56684+_i3),defineSymbol(math$2,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56736+_i3),defineSymbol(math$2,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56788+_i3),defineSymbol(math$2,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56840+_i3),defineSymbol(math$2,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56944+_i3),defineSymbol(math$2,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),_i3<26&&(wideChar=String.fromCharCode(55349,56632+_i3),defineSymbol(math$2,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56476+_i3),defineSymbol(math$2,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar))}wideChar="";defineSymbol(math$2,main,mathord,"k",wideChar);defineSymbol(text,main,textord,"k",wideChar);for(var _i4=0;_i4<10;_i4++){var _ch4=_i4.toString();wideChar=String.fromCharCode(55349,57294+_i4),defineSymbol(math$2,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57314+_i4),defineSymbol(math$2,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57324+_i4),defineSymbol(math$2,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57334+_i4),defineSymbol(math$2,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar)}var extraLatin="";for(var _i5=0;_i5<extraLatin.length;_i5++){var _ch5=extraLatin.charAt(_i5);defineSymbol(math$2,main,mathord,_ch5,_ch5),defineSymbol(text,main,textord,_ch5,_ch5)}var wideLatinLetterData=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],wideNumeralData=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],wideCharacterFont=function(_,J){var Z=_.charCodeAt(0),Q=_.charCodeAt(1),ee=(Z-55296)*1024+(Q-56320)+65536,te=J==="math"?0:1;if(119808<=ee&&ee<120484){var ne=Math.floor((ee-119808)/26);return[wideLatinLetterData[ne][2],wideLatinLetterData[ne][te]]}else if(120782<=ee&&ee<=120831){var ie=Math.floor((ee-120782)/10);return[wideNumeralData[ie][2],wideNumeralData[ie][te]]}else{if(ee===120485||ee===120486)return[wideLatinLetterData[0][2],wideLatinLetterData[0][te]];if(120486<ee&&ee<120782)return["",""];throw new ParseError("Unsupported character: "+_)}},lookupSymbol=function(_,J,Z){return symbols[Z][_]&&symbols[Z][_].replace&&(_=symbols[Z][_].replace),{value:_,metrics:getCharacterMetrics(_,J,Z)}},makeSymbol=function(_,J,Z,Q,ee){var te=lookupSymbol(_,J,Z),ne=te.metrics;_=te.value;var ie;if(ne){var re=ne.italic;(Z==="text"||Q&&Q.font==="mathit")&&(re=0),ie=new SymbolNode(_,ne.height,ne.depth,re,ne.skew,ne.width,ee)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+_+"' in style '"+J+"' and mode '"+Z+"'")),ie=new SymbolNode(_,0,0,0,0,0,ee);if(Q){ie.maxFontSize=Q.sizeMultiplier,Q.style.isTight()&&ie.classes.push("mtight");var oe=Q.getColor();oe&&(ie.style.color=oe)}return ie},mathsym=function(_,J,Z,Q){return Q===void 0&&(Q=[]),Z.font==="boldsymbol"&&lookupSymbol(_,"Main-Bold",J).metrics?makeSymbol(_,"Main-Bold",J,Z,Q.concat(["mathbf"])):_==="\\"||symbols[J][_].font==="main"?makeSymbol(_,"Main-Regular",J,Z,Q):makeSymbol(_,"AMS-Regular",J,Z,Q.concat(["amsrm"]))},boldsymbol=function(_,J,Z,Q,ee){return ee!=="textord"&&lookupSymbol(_,"Math-BoldItalic",J).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},makeOrd=function(_,J,Z){var Q=_.mode,ee=_.text,te=["mord"],ne=Q==="math"||Q==="text"&&J.font,ie=ne?J.font:J.fontFamily,re="",oe="";if(ee.charCodeAt(0)===55349&&([re,oe]=wideCharacterFont(ee,Q)),re.length>0)return makeSymbol(ee,re,Q,J,te.concat(oe));if(ie){var se,ae;if(ie==="boldsymbol"){var ce=boldsymbol(ee,Q,J,te,Z);se=ce.fontName,ae=[ce.fontClass]}else ne?(se=fontMap[ie].fontName,ae=[ie]):(se=retrieveTextFontName(ie,J.fontWeight,J.fontShape),ae=[ie,J.fontWeight,J.fontShape]);if(lookupSymbol(ee,se,Q).metrics)return makeSymbol(ee,se,Q,J,te.concat(ae));if(ligatures.hasOwnProperty(ee)&&se.slice(0,10)==="Typewriter"){for(var ue=[],de=0;de<ee.length;de++)ue.push(makeSymbol(ee[de],se,Q,J,te.concat(ae)));return makeFragment(ue)}}if(Z==="mathord")return makeSymbol(ee,"Math-Italic",Q,J,te.concat(["mathnormal"]));if(Z==="textord"){var me=symbols[Q][ee]&&symbols[Q][ee].font;if(me==="ams"){var fe=retrieveTextFontName("amsrm",J.fontWeight,J.fontShape);return makeSymbol(ee,fe,Q,J,te.concat("amsrm",J.fontWeight,J.fontShape))}else if(me==="main"||!me){var _e=retrieveTextFontName("textrm",J.fontWeight,J.fontShape);return makeSymbol(ee,_e,Q,J,te.concat(J.fontWeight,J.fontShape))}else{var ye=retrieveTextFontName(me,J.fontWeight,J.fontShape);return makeSymbol(ee,ye,Q,J,te.concat(ye,J.fontWeight,J.fontShape))}}else throw new Error("unexpected type: "+Z+" in makeOrd")},canCombine=(G,_)=>{if(createClass(G.classes)!==createClass(_.classes)||G.skew!==_.skew||G.maxFontSize!==_.maxFontSize)return!1;if(G.classes.length===1){var J=G.classes[0];if(J==="mbin"||J==="mord")return!1}for(var Z in G.style)if(G.style.hasOwnProperty(Z)&&G.style[Z]!==_.style[Z])return!1;for(var Q in _.style)if(_.style.hasOwnProperty(Q)&&G.style[Q]!==_.style[Q])return!1;return!0},tryCombineChars=G=>{for(var _=0;_<G.length-1;_++){var J=G[_],Z=G[_+1];J instanceof SymbolNode&&Z instanceof SymbolNode&&canCombine(J,Z)&&(J.text+=Z.text,J.height=Math.max(J.height,Z.height),J.depth=Math.max(J.depth,Z.depth),J.italic=Z.italic,G.splice(_+1,1),_--)}return G},sizeElementFromChildren=function(_){for(var J=0,Z=0,Q=0,ee=0;ee<_.children.length;ee++){var te=_.children[ee];te.height>J&&(J=te.height),te.depth>Z&&(Z=te.depth),te.maxFontSize>Q&&(Q=te.maxFontSize)}_.height=J,_.depth=Z,_.maxFontSize=Q},makeSpan$2=function(_,J,Z,Q){var ee=new Span(_,J,Z,Q);return sizeElementFromChildren(ee),ee},makeSvgSpan=(G,_,J,Z)=>new Span(G,_,J,Z),makeLineSpan=function(_,J,Z){var Q=makeSpan$2([_],[],J);return Q.height=Math.max(Z||J.fontMetrics().defaultRuleThickness,J.minRuleThickness),Q.style.borderBottomWidth=makeEm(Q.height),Q.maxFontSize=1,Q},makeAnchor=function(_,J,Z,Q){var ee=new Anchor(_,J,Z,Q);return sizeElementFromChildren(ee),ee},makeFragment=function(_){var J=new DocumentFragment(_);return sizeElementFromChildren(J),J},wrapFragment=function(_,J){return _ instanceof DocumentFragment?makeSpan$2([],[_],J):_},getVListChildrenAndDepth=function(_){if(_.positionType==="individualShift"){for(var J=_.children,Z=[J[0]],Q=-J[0].shift-J[0].elem.depth,ee=Q,te=1;te<J.length;te++){var ne=-J[te].shift-ee-J[te].elem.depth,ie=ne-(J[te-1].elem.height+J[te-1].elem.depth);ee=ee+ne,Z.push({type:"kern",size:ie}),Z.push(J[te])}return{children:Z,depth:Q}}var re;if(_.positionType==="top"){for(var oe=_.positionData,se=0;se<_.children.length;se++){var ae=_.children[se];oe-=ae.type==="kern"?ae.size:ae.elem.height+ae.elem.depth}re=oe}else if(_.positionType==="bottom")re=-_.positionData;else{var ce=_.children[0];if(ce.type!=="elem")throw new Error('First child must have type "elem".');if(_.positionType==="shift")re=-ce.elem.depth-_.positionData;else if(_.positionType==="firstBaseline")re=-ce.elem.depth;else throw new Error("Invalid positionType "+_.positionType+".")}return{children:_.children,depth:re}},makeVList=function(_,J){for(var{children:Z,depth:Q}=getVListChildrenAndDepth(_),ee=0,te=0;te<Z.length;te++){var ne=Z[te];if(ne.type==="elem"){var ie=ne.elem;ee=Math.max(ee,ie.maxFontSize,ie.height)}}ee+=2;var re=makeSpan$2(["pstrut"],[]);re.style.height=makeEm(ee);for(var oe=[],se=Q,ae=Q,ce=Q,ue=0;ue<Z.length;ue++){var de=Z[ue];if(de.type==="kern")ce+=de.size;else{var me=de.elem,fe=de.wrapperClasses||[],_e=de.wrapperStyle||{},ye=makeSpan$2(fe,[re,me],void 0,_e);ye.style.top=makeEm(-ee-ce-me.depth),de.marginLeft&&(ye.style.marginLeft=de.marginLeft),de.marginRight&&(ye.style.marginRight=de.marginRight),oe.push(ye),ce+=me.height+me.depth}se=Math.min(se,ce),ae=Math.max(ae,ce)}var be=makeSpan$2(["vlist"],oe);be.style.height=makeEm(ae);var Se;if(se<0){var Ce=makeSpan$2([],[]),Me=makeSpan$2(["vlist"],[Ce]);Me.style.height=makeEm(-se);var Re=makeSpan$2(["vlist-s"],[new SymbolNode("")]);Se=[makeSpan$2(["vlist-r"],[be,Re]),makeSpan$2(["vlist-r"],[Me])]}else Se=[makeSpan$2(["vlist-r"],[be])];var Te=makeSpan$2(["vlist-t"],Se);return Se.length===2&&Te.classes.push("vlist-t2"),Te.height=ae,Te.depth=-se,Te},makeGlue=(G,_)=>{var J=makeSpan$2(["mspace"],[],_),Z=calculateSize(G,_);return J.style.marginRight=makeEm(Z),J},retrieveTextFontName=function(_,J,Z){var Q="";switch(_){case"amsrm":Q="AMS";break;case"textrm":Q="Main";break;case"textsf":Q="SansSerif";break;case"texttt":Q="Typewriter";break;default:Q=_}var ee;return J==="textbf"&&Z==="textit"?ee="BoldItalic":J==="textbf"?ee="Bold":J==="textit"?ee="Italic":ee="Regular",Q+"-"+ee},fontMap={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},svgData={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},staticSvg=function(_,J){var[Z,Q,ee]=svgData[_],te=new PathNode(Z),ne=new SvgNode([te],{width:makeEm(Q),height:makeEm(ee),style:"width:"+makeEm(Q),viewBox:"0 0 "+1e3*Q+" "+1e3*ee,preserveAspectRatio:"xMinYMin"}),ie=makeSvgSpan(["overlay"],[ne],J);return ie.height=ee,ie.style.height=makeEm(ee),ie.style.width=makeEm(Q),ie},buildCommon={fontMap,makeSymbol,mathsym,makeSpan:makeSpan$2,makeSvgSpan,makeLineSpan,makeAnchor,makeFragment,wrapFragment,makeVList,makeOrd,makeGlue,staticSvg,svgData,tryCombineChars},thinspace={number:3,unit:"mu"},mediumspace={number:4,unit:"mu"},thickspace={number:5,unit:"mu"},spacings={mord:{mop:thinspace,mbin:mediumspace,mrel:thickspace,minner:thinspace},mop:{mord:thinspace,mop:thinspace,mrel:thickspace,minner:thinspace},mbin:{mord:mediumspace,mop:mediumspace,mopen:mediumspace,minner:mediumspace},mrel:{mord:thickspace,mop:thickspace,mopen:thickspace,minner:thickspace},mopen:{},mclose:{mop:thinspace,mbin:mediumspace,mrel:thickspace,minner:thinspace},mpunct:{mord:thinspace,mop:thinspace,mrel:thickspace,mopen:thinspace,mclose:thinspace,mpunct:thinspace,minner:thinspace},minner:{mord:thinspace,mop:thinspace,mbin:mediumspace,mrel:thickspace,mopen:thinspace,mpunct:thinspace,minner:thinspace}},tightSpacings={mord:{mop:thinspace},mop:{mord:thinspace,mop:thinspace},mbin:{},mrel:{},mopen:{},mclose:{mop:thinspace},mpunct:{},minner:{mop:thinspace}},_functions={},_htmlGroupBuilders={},_mathmlGroupBuilders={};function defineFunction(G){for(var{type:_,names:J,props:Z,handler:Q,htmlBuilder:ee,mathmlBuilder:te}=G,ne={type:_,numArgs:Z.numArgs,argTypes:Z.argTypes,allowedInArgument:!!Z.allowedInArgument,allowedInText:!!Z.allowedInText,allowedInMath:Z.allowedInMath===void 0?!0:Z.allowedInMath,numOptionalArgs:Z.numOptionalArgs||0,infix:!!Z.infix,primitive:!!Z.primitive,handler:Q},ie=0;ie<J.length;++ie)_functions[J[ie]]=ne;_&&(ee&&(_htmlGroupBuilders[_]=ee),te&&(_mathmlGroupBuilders[_]=te))}function defineFunctionBuilders(G){var{type:_,htmlBuilder:J,mathmlBuilder:Z}=G;defineFunction({type:_,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:J,mathmlBuilder:Z})}var normalizeArgument=function(_){return _.type==="ordgroup"&&_.body.length===1?_.body[0]:_},ordargument=function(_){return _.type==="ordgroup"?_.body:[_]},makeSpan$1=buildCommon.makeSpan,binLeftCanceller=["leftmost","mbin","mopen","mrel","mop","mpunct"],binRightCanceller=["rightmost","mrel","mclose","mpunct"],styleMap$1={display:Style$1.DISPLAY,text:Style$1.TEXT,script:Style$1.SCRIPT,scriptscript:Style$1.SCRIPTSCRIPT},DomEnum={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},buildExpression$1=function(_,J,Z,Q){Q===void 0&&(Q=[null,null]);for(var ee=[],te=0;te<_.length;te++){var ne=buildGroup$1(_[te],J);if(ne instanceof DocumentFragment){var ie=ne.children;ee.push(...ie)}else ee.push(ne)}if(buildCommon.tryCombineChars(ee),!Z)return ee;var re=J;if(_.length===1){var oe=_[0];oe.type==="sizing"?re=J.havingSize(oe.size):oe.type==="styling"&&(re=J.havingStyle(styleMap$1[oe.style]))}var se=makeSpan$1([Q[0]||"leftmost"],[],J),ae=makeSpan$1([Q[1]||"rightmost"],[],J),ce=Z==="root";return traverseNonSpaceNodes(ee,(ue,de)=>{var me=de.classes[0],fe=ue.classes[0];me==="mbin"&&binRightCanceller.includes(fe)?de.classes[0]="mord":fe==="mbin"&&binLeftCanceller.includes(me)&&(ue.classes[0]="mord")},{node:se},ae,ce),traverseNonSpaceNodes(ee,(ue,de)=>{var me=getTypeOfDomTree(de),fe=getTypeOfDomTree(ue),_e=me&&fe?ue.hasClass("mtight")?tightSpacings[me][fe]:spacings[me][fe]:null;if(_e)return buildCommon.makeGlue(_e,re)},{node:se},ae,ce),ee},traverseNonSpaceNodes=function G(_,J,Z,Q,ee){Q&&_.push(Q);for(var te=0;te<_.length;te++){var ne=_[te],ie=checkPartialGroup(ne);if(ie){G(ie.children,J,Z,null,ee);continue}var re=!ne.hasClass("mspace");if(re){var oe=J(ne,Z.node);oe&&(Z.insertAfter?Z.insertAfter(oe):(_.unshift(oe),te++))}re?Z.node=ne:ee&&ne.hasClass("newline")&&(Z.node=makeSpan$1(["leftmost"])),Z.insertAfter=(se=>ae=>{_.splice(se+1,0,ae),te++})(te)}Q&&_.pop()},checkPartialGroup=function(_){return _ instanceof DocumentFragment||_ instanceof Anchor||_ instanceof Span&&_.hasClass("enclosing")?_:null},getOutermostNode=function G(_,J){var Z=checkPartialGroup(_);if(Z){var Q=Z.children;if(Q.length){if(J==="right")return G(Q[Q.length-1],"right");if(J==="left")return G(Q[0],"left")}}return _},getTypeOfDomTree=function(_,J){return _?(J&&(_=getOutermostNode(_,J)),DomEnum[_.classes[0]]||null):null},makeNullDelimiter=function(_,J){var Z=["nulldelimiter"].concat(_.baseSizingClasses());return makeSpan$1(J.concat(Z))},buildGroup$1=function(_,J,Z){if(!_)return makeSpan$1();if(_htmlGroupBuilders[_.type]){var Q=_htmlGroupBuilders[_.type](_,J);if(Z&&J.size!==Z.size){Q=makeSpan$1(J.sizingClasses(Z),[Q],J);var ee=J.sizeMultiplier/Z.sizeMultiplier;Q.height*=ee,Q.depth*=ee}return Q}else throw new ParseError("Got group of unknown type: '"+_.type+"'")};function newDocumentFragment(G){return new DocumentFragment(G)}class MathNode{constructor(_,J,Z){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=_,this.attributes={},this.children=J||[],this.classes=Z||[]}setAttribute(_,J){this.attributes[_]=J}getAttribute(_){return this.attributes[_]}toNode(){var _=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var J in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,J)&&_.setAttribute(J,this.attributes[J]);this.classes.length>0&&(_.className=createClass(this.classes));for(var Z=0;Z<this.children.length;Z++)if(this.children[Z]instanceof TextNode&&this.children[Z+1]instanceof TextNode){for(var Q=this.children[Z].toText()+this.children[++Z].toText();this.children[Z+1]instanceof TextNode;)Q+=this.children[++Z].toText();_.appendChild(new TextNode(Q).toNode())}else _.appendChild(this.children[Z].toNode());return _}toMarkup(){var _="<"+this.type;for(var J in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,J)&&(_+=" "+J+'="',_+=utils.escape(this.attributes[J]),_+='"');this.classes.length>0&&(_+=' class ="'+utils.escape(createClass(this.classes))+'"'),_+=">";for(var Z=0;Z<this.children.length;Z++)_+=this.children[Z].toMarkup();return _+="</"+this.type+">",_}toText(){return this.children.map(_=>_.toText()).join("")}}class TextNode{constructor(_){this.text=void 0,this.text=_}toNode(){return document.createTextNode(this.text)}toMarkup(){return utils.escape(this.toText())}toText(){return this.text}}class SpaceNode{constructor(_){this.width=void 0,this.character=void 0,this.width=_,_>=.05555&&_<=.05556?this.character="":_>=.1666&&_<=.1667?this.character="":_>=.2222&&_<=.2223?this.character="":_>=.2777&&_<=.2778?this.character="":_>=-.05556&&_<=-.05555?this.character="":_>=-.1667&&_<=-.1666?this.character="":_>=-.2223&&_<=-.2222?this.character="":_>=-.2778&&_<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var _=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return _.setAttribute("width",makeEm(this.width)),_}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+makeEm(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var mathMLTree={MathNode,TextNode,SpaceNode,newDocumentFragment},makeText=function(_,J,Z){return symbols[J][_]&&symbols[J][_].replace&&_.charCodeAt(0)!==55349&&!(ligatures.hasOwnProperty(_)&&Z&&(Z.fontFamily&&Z.fontFamily.slice(4,6)==="tt"||Z.font&&Z.font.slice(4,6)==="tt"))&&(_=symbols[J][_].replace),new mathMLTree.TextNode(_)},makeRow=function(_){return _.length===1?_[0]:new mathMLTree.MathNode("mrow",_)},getVariant=function(_,J){if(J.fontFamily==="texttt")return"monospace";if(J.fontFamily==="textsf")return J.fontShape==="textit"&&J.fontWeight==="textbf"?"sans-serif-bold-italic":J.fontShape==="textit"?"sans-serif-italic":J.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(J.fontShape==="textit"&&J.fontWeight==="textbf")return"bold-italic";if(J.fontShape==="textit")return"italic";if(J.fontWeight==="textbf")return"bold";var Z=J.font;if(!Z||Z==="mathnormal")return null;var Q=_.mode;if(Z==="mathit")return"italic";if(Z==="boldsymbol")return _.type==="textord"?"bold":"bold-italic";if(Z==="mathbf")return"bold";if(Z==="mathbb")return"double-struck";if(Z==="mathsfit")return"sans-serif-italic";if(Z==="mathfrak")return"fraktur";if(Z==="mathscr"||Z==="mathcal")return"script";if(Z==="mathsf")return"sans-serif";if(Z==="mathtt")return"monospace";var ee=_.text;if(["\\imath","\\jmath"].includes(ee))return null;symbols[Q][ee]&&symbols[Q][ee].replace&&(ee=symbols[Q][ee].replace);var te=buildCommon.fontMap[Z].fontName;return getCharacterMetrics(ee,te,Q)?buildCommon.fontMap[Z].variant:null};function isNumberPunctuation(G){if(!G)return!1;if(G.type==="mi"&&G.children.length===1){var _=G.children[0];return _ instanceof TextNode&&_.text==="."}else if(G.type==="mo"&&G.children.length===1&&G.getAttribute("separator")==="true"&&G.getAttribute("lspace")==="0em"&&G.getAttribute("rspace")==="0em"){var J=G.children[0];return J instanceof TextNode&&J.text===","}else return!1}var buildExpression=function(_,J,Z){if(_.length===1){var Q=buildGroup(_[0],J);return Z&&Q instanceof MathNode&&Q.type==="mo"&&(Q.setAttribute("lspace","0em"),Q.setAttribute("rspace","0em")),[Q]}for(var ee=[],te,ne=0;ne<_.length;ne++){var ie=buildGroup(_[ne],J);if(ie instanceof MathNode&&te instanceof MathNode){if(ie.type==="mtext"&&te.type==="mtext"&&ie.getAttribute("mathvariant")===te.getAttribute("mathvariant")){te.children.push(...ie.children);continue}else if(ie.type==="mn"&&te.type==="mn"){te.children.push(...ie.children);continue}else if(isNumberPunctuation(ie)&&te.type==="mn"){te.children.push(...ie.children);continue}else if(ie.type==="mn"&&isNumberPunctuation(te))ie.children=[...te.children,...ie.children],ee.pop();else if((ie.type==="msup"||ie.type==="msub")&&ie.children.length>=1&&(te.type==="mn"||isNumberPunctuation(te))){var re=ie.children[0];re instanceof MathNode&&re.type==="mn"&&(re.children=[...te.children,...re.children],ee.pop())}else if(te.type==="mi"&&te.children.length===1){var oe=te.children[0];if(oe instanceof TextNode&&oe.text===""&&(ie.type==="mo"||ie.type==="mi"||ie.type==="mn")){var se=ie.children[0];se instanceof TextNode&&se.text.length>0&&(se.text=se.text.slice(0,1)+""+se.text.slice(1),ee.pop())}}}ee.push(ie),te=ie}return ee},buildExpressionRow=function(_,J,Z){return makeRow(buildExpression(_,J,Z))},buildGroup=function(_,J){if(!_)return new mathMLTree.MathNode("mrow");if(_mathmlGroupBuilders[_.type]){var Z=_mathmlGroupBuilders[_.type](_,J);return Z}else throw new ParseError("Got group of unknown type: '"+_.type+"'")},stretchyCodePoint={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},mathMLnode=function(_){var J=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(stretchyCodePoint[_.replace(/^\\/,"")])]);return J.setAttribute("stretchy","true"),J},katexImagesData={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},groupLength=function(_){return _.type==="ordgroup"?_.body.length:1},svgSpan=function(_,J){function Z(){var ne=4e5,ie=_.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(ie)){var re=_,oe=groupLength(re.base),se,ae,ce;if(oe>5)ie==="widehat"||ie==="widecheck"?(se=420,ne=2364,ce=.42,ae=ie+"4"):(se=312,ne=2340,ce=.34,ae="tilde4");else{var ue=[1,1,2,2,3,3][oe];ie==="widehat"||ie==="widecheck"?(ne=[0,1062,2364,2364,2364][ue],se=[0,239,300,360,420][ue],ce=[0,.24,.3,.3,.36,.42][ue],ae=ie+ue):(ne=[0,600,1033,2339,2340][ue],se=[0,260,286,306,312][ue],ce=[0,.26,.286,.3,.306,.34][ue],ae="tilde"+ue)}var de=new PathNode(ae),me=new SvgNode([de],{width:"100%",height:makeEm(ce),viewBox:"0 0 "+ne+" "+se,preserveAspectRatio:"none"});return{span:buildCommon.makeSvgSpan([],[me],J),minWidth:0,height:ce}}else{var fe=[],_e=katexImagesData[ie],[ye,be,Se]=_e,Ce=Se/1e3,Me=ye.length,Re,Te;if(Me===1){var Ee=_e[3];Re=["hide-tail"],Te=[Ee]}else if(Me===2)Re=["halfarrow-left","halfarrow-right"],Te=["xMinYMin","xMaxYMin"];else if(Me===3)Re=["brace-left","brace-center","brace-right"],Te=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+Me+" children.");for(var De=0;De<Me;De++){var Le=new PathNode(ye[De]),Ue=new SvgNode([Le],{width:"400em",height:makeEm(Ce),viewBox:"0 0 "+ne+" "+Se,preserveAspectRatio:Te[De]+" slice"}),Ge=buildCommon.makeSvgSpan([Re[De]],[Ue],J);if(Me===1)return{span:Ge,minWidth:be,height:Ce};Ge.style.height=makeEm(Ce),fe.push(Ge)}return{span:buildCommon.makeSpan(["stretchy"],fe,J),minWidth:be,height:Ce}}}var{span:Q,minWidth:ee,height:te}=Z();return Q.height=te,Q.style.height=makeEm(te),ee>0&&(Q.style.minWidth=makeEm(ee)),Q},encloseSpan=function(_,J,Z,Q,ee){var te,ne=_.height+_.depth+Z+Q;if(/fbox|color|angl/.test(J)){if(te=buildCommon.makeSpan(["stretchy",J],[],ee),J==="fbox"){var ie=ee.color&&ee.getColor();ie&&(te.style.borderColor=ie)}}else{var re=[];/^[bx]cancel$/.test(J)&&re.push(new LineNode({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(J)&&re.push(new LineNode({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var oe=new SvgNode(re,{width:"100%",height:makeEm(ne)});te=buildCommon.makeSvgSpan([],[oe],ee)}return te.height=ne,te.style.height=makeEm(ne),te},stretchy={encloseSpan,mathMLnode,svgSpan};function assertNodeType(G,_){if(!G||G.type!==_)throw new Error("Expected node of type "+_+", but got "+(G?"node of type "+G.type:String(G)));return G}function assertSymbolNodeType(G){var _=checkSymbolNodeType(G);if(!_)throw new Error("Expected node of symbol group type, but got "+(G?"node of type "+G.type:String(G)));return _}function checkSymbolNodeType(G){return G&&(G.type==="atom"||NON_ATOMS.hasOwnProperty(G.type))?G:null}var htmlBuilder$a=(G,_)=>{var J,Z,Q;G&&G.type==="supsub"?(Z=assertNodeType(G.base,"accent"),J=Z.base,G.base=J,Q=assertSpan(buildGroup$1(G,_)),G.base=Z):(Z=assertNodeType(G,"accent"),J=Z.base);var ee=buildGroup$1(J,_.havingCrampedStyle()),te=Z.isShifty&&utils.isCharacterBox(J),ne=0;if(te){var ie=utils.getBaseElem(J),re=buildGroup$1(ie,_.havingCrampedStyle());ne=assertSymbolDomNode(re).skew}var oe=Z.label==="\\c",se=oe?ee.height+ee.depth:Math.min(ee.height,_.fontMetrics().xHeight),ae;if(Z.isStretchy)ae=stretchy.svgSpan(Z,_),ae=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:ee},{type:"elem",elem:ae,wrapperClasses:["svg-align"],wrapperStyle:ne>0?{width:"calc(100% - "+makeEm(2*ne)+")",marginLeft:makeEm(2*ne)}:void 0}]},_);else{var ce,ue;Z.label==="\\vec"?(ce=buildCommon.staticSvg("vec",_),ue=buildCommon.svgData.vec[1]):(ce=buildCommon.makeOrd({mode:Z.mode,text:Z.label},_,"textord"),ce=assertSymbolDomNode(ce),ce.italic=0,ue=ce.width,oe&&(se+=ce.depth)),ae=buildCommon.makeSpan(["accent-body"],[ce]);var de=Z.label==="\\textcircled";de&&(ae.classes.push("accent-full"),se=ee.height);var me=ne;de||(me-=ue/2),ae.style.left=makeEm(me),Z.label==="\\textcircled"&&(ae.style.top=".2em"),ae=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:ee},{type:"kern",size:-se},{type:"elem",elem:ae}]},_)}var fe=buildCommon.makeSpan(["mord","accent"],[ae],_);return Q?(Q.children[0]=fe,Q.height=Math.max(fe.height,Q.height),Q.classes[0]="mord",Q):fe},mathmlBuilder$9=(G,_)=>{var J=G.isStretchy?stretchy.mathMLnode(G.label):new mathMLTree.MathNode("mo",[makeText(G.label,G.mode)]),Z=new mathMLTree.MathNode("mover",[buildGroup(G.base,_),J]);return Z.setAttribute("accent","true"),Z},NON_STRETCHY_ACCENT_REGEX=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(G=>"\\"+G).join("|"));defineFunction({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(G,_)=>{var J=normalizeArgument(_[0]),Z=!NON_STRETCHY_ACCENT_REGEX.test(G.funcName),Q=!Z||G.funcName==="\\widehat"||G.funcName==="\\widetilde"||G.funcName==="\\widecheck";return{type:"accent",mode:G.parser.mode,label:G.funcName,isStretchy:Z,isShifty:Q,base:J}},htmlBuilder:htmlBuilder$a,mathmlBuilder:mathmlBuilder$9});defineFunction({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(G,_)=>{var J=_[0],Z=G.parser.mode;return Z==="math"&&(G.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+G.funcName+" works only in text mode"),Z="text"),{type:"accent",mode:Z,label:G.funcName,isStretchy:!1,isShifty:!0,base:J}},htmlBuilder:htmlBuilder$a,mathmlBuilder:mathmlBuilder$9});defineFunction({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(G,_)=>{var{parser:J,funcName:Z}=G,Q=_[0];return{type:"accentUnder",mode:J.mode,label:Z,base:Q}},htmlBuilder:(G,_)=>{var J=buildGroup$1(G.base,_),Z=stretchy.svgSpan(G,_),Q=G.label==="\\utilde"?.12:0,ee=buildCommon.makeVList({positionType:"top",positionData:J.height,children:[{type:"elem",elem:Z,wrapperClasses:["svg-align"]},{type:"kern",size:Q},{type:"elem",elem:J}]},_);return buildCommon.makeSpan(["mord","accentunder"],[ee],_)},mathmlBuilder:(G,_)=>{var J=stretchy.mathMLnode(G.label),Z=new mathMLTree.MathNode("munder",[buildGroup(G.base,_),J]);return Z.setAttribute("accentunder","true"),Z}});var paddedNode=G=>{var _=new mathMLTree.MathNode("mpadded",G?[G]:[]);return _.setAttribute("width","+0.6em"),_.setAttribute("lspace","0.3em"),_};defineFunction({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(G,_,J){var{parser:Z,funcName:Q}=G;return{type:"xArrow",mode:Z.mode,label:Q,body:_[0],below:J[0]}},htmlBuilder(G,_){var J=_.style,Z=_.havingStyle(J.sup()),Q=buildCommon.wrapFragment(buildGroup$1(G.body,Z,_),_),ee=G.label.slice(0,2)==="\\x"?"x":"cd";Q.classes.push(ee+"-arrow-pad");var te;G.below&&(Z=_.havingStyle(J.sub()),te=buildCommon.wrapFragment(buildGroup$1(G.below,Z,_),_),te.classes.push(ee+"-arrow-pad"));var ne=stretchy.svgSpan(G,_),ie=-_.fontMetrics().axisHeight+.5*ne.height,re=-_.fontMetrics().axisHeight-.5*ne.height-.111;(Q.depth>.25||G.label==="\\xleftequilibrium")&&(re-=Q.depth);var oe;if(te){var se=-_.fontMetrics().axisHeight+te.height+.5*ne.height+.111;oe=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:Q,shift:re},{type:"elem",elem:ne,shift:ie},{type:"elem",elem:te,shift:se}]},_)}else oe=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:Q,shift:re},{type:"elem",elem:ne,shift:ie}]},_);return oe.children[0].children[0].children[1].classes.push("svg-align"),buildCommon.makeSpan(["mrel","x-arrow"],[oe],_)},mathmlBuilder(G,_){var J=stretchy.mathMLnode(G.label);J.setAttribute("minsize",G.label.charAt(0)==="x"?"1.75em":"3.0em");var Z;if(G.body){var Q=paddedNode(buildGroup(G.body,_));if(G.below){var ee=paddedNode(buildGroup(G.below,_));Z=new mathMLTree.MathNode("munderover",[J,ee,Q])}else Z=new mathMLTree.MathNode("mover",[J,Q])}else if(G.below){var te=paddedNode(buildGroup(G.below,_));Z=new mathMLTree.MathNode("munder",[J,te])}else Z=paddedNode(),Z=new mathMLTree.MathNode("mover",[J,Z]);return Z}});var makeSpan=buildCommon.makeSpan;function htmlBuilder$9(G,_){var J=buildExpression$1(G.body,_,!0);return makeSpan([G.mclass],J,_)}function mathmlBuilder$8(G,_){var J,Z=buildExpression(G.body,_);return G.mclass==="minner"?J=new mathMLTree.MathNode("mpadded",Z):G.mclass==="mord"?G.isCharacterBox?(J=Z[0],J.type="mi"):J=new mathMLTree.MathNode("mi",Z):(G.isCharacterBox?(J=Z[0],J.type="mo"):J=new mathMLTree.MathNode("mo",Z),G.mclass==="mbin"?(J.attributes.lspace="0.22em",J.attributes.rspace="0.22em"):G.mclass==="mpunct"?(J.attributes.lspace="0em",J.attributes.rspace="0.17em"):G.mclass==="mopen"||G.mclass==="mclose"?(J.attributes.lspace="0em",J.attributes.rspace="0em"):G.mclass==="minner"&&(J.attributes.lspace="0.0556em",J.attributes.width="+0.1111em")),J}defineFunction({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(G,_){var{parser:J,funcName:Z}=G,Q=_[0];return{type:"mclass",mode:J.mode,mclass:"m"+Z.slice(5),body:ordargument(Q),isCharacterBox:utils.isCharacterBox(Q)}},htmlBuilder:htmlBuilder$9,mathmlBuilder:mathmlBuilder$8});var binrelClass=G=>{var _=G.type==="ordgroup"&&G.body.length?G.body[0]:G;return _.type==="atom"&&(_.family==="bin"||_.family==="rel")?"m"+_.family:"mord"};defineFunction({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(G,_){var{parser:J}=G;return{type:"mclass",mode:J.mode,mclass:binrelClass(_[0]),body:ordargument(_[1]),isCharacterBox:utils.isCharacterBox(_[1])}}});defineFunction({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(G,_){var{parser:J,funcName:Z}=G,Q=_[1],ee=_[0],te;Z!=="\\stackrel"?te=binrelClass(Q):te="mrel";var ne={type:"op",mode:Q.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:Z!=="\\stackrel",body:ordargument(Q)},ie={type:"supsub",mode:ee.mode,base:ne,sup:Z==="\\underset"?null:ee,sub:Z==="\\underset"?ee:null};return{type:"mclass",mode:J.mode,mclass:te,body:[ie],isCharacterBox:utils.isCharacterBox(ie)}},htmlBuilder:htmlBuilder$9,mathmlBuilder:mathmlBuilder$8});defineFunction({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(G,_){var{parser:J}=G;return{type:"pmb",mode:J.mode,mclass:binrelClass(_[0]),body:ordargument(_[0])}},htmlBuilder(G,_){var J=buildExpression$1(G.body,_,!0),Z=buildCommon.makeSpan([G.mclass],J,_);return Z.style.textShadow="0.02em 0.01em 0.04px",Z},mathmlBuilder(G,_){var J=buildExpression(G.body,_),Z=new mathMLTree.MathNode("mstyle",J);return Z.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),Z}});var cdArrowFunctionName={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},newCell=()=>({type:"styling",body:[],mode:"math",style:"display"}),isStartOfArrow=G=>G.type==="textord"&&G.text==="@",isLabelEnd=(G,_)=>(G.type==="mathord"||G.type==="atom")&&G.text===_;function cdArrow(G,_,J){var Z=cdArrowFunctionName[G];switch(Z){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return J.callFunction(Z,[_[0]],[_[1]]);case"\\uparrow":case"\\downarrow":{var Q=J.callFunction("\\\\cdleft",[_[0]],[]),ee={type:"atom",text:Z,mode:"math",family:"rel"},te=J.callFunction("\\Big",[ee],[]),ne=J.callFunction("\\\\cdright",[_[1]],[]),ie={type:"ordgroup",mode:"math",body:[Q,te,ne]};return J.callFunction("\\\\cdparent",[ie],[])}case"\\\\cdlongequal":return J.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var re={type:"textord",text:"\\Vert",mode:"math"};return J.callFunction("\\Big",[re],[])}default:return{type:"textord",text:" ",mode:"math"}}}function parseCD(G){var _=[];for(G.gullet.beginGroup(),G.gullet.macros.set("\\cr","\\\\\\relax"),G.gullet.beginGroup();;){_.push(G.parseExpression(!1,"\\\\")),G.gullet.endGroup(),G.gullet.beginGroup();var J=G.fetch().text;if(J==="&"||J==="\\\\")G.consume();else if(J==="\\end"){_[_.length-1].length===0&&_.pop();break}else throw new ParseError("Expected \\\\ or \\cr or \\end",G.nextToken)}for(var Z=[],Q=[Z],ee=0;ee<_.length;ee++){for(var te=_[ee],ne=newCell(),ie=0;ie<te.length;ie++)if(!isStartOfArrow(te[ie]))ne.body.push(te[ie]);else{Z.push(ne),ie+=1;var re=assertSymbolNodeType(te[ie]).text,oe=new Array(2);if(oe[0]={type:"ordgroup",mode:"math",body:[]},oe[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(re)>-1))if("<>AV".indexOf(re)>-1)for(var se=0;se<2;se++){for(var ae=!0,ce=ie+1;ce<te.length;ce++){if(isLabelEnd(te[ce],re)){ae=!1,ie=ce;break}if(isStartOfArrow(te[ce]))throw new ParseError("Missing a "+re+" character to complete a CD arrow.",te[ce]);oe[se].body.push(te[ce])}if(ae)throw new ParseError("Missing a "+re+" character to complete a CD arrow.",te[ie])}else throw new ParseError('Expected one of "<>AV=|." after @',te[ie]);var ue=cdArrow(re,oe,G),de={type:"styling",body:[ue],mode:"math",style:"display"};Z.push(de),ne=newCell()}ee%2===0?Z.push(ne):Z.shift(),Z=[],Q.push(Z)}G.gullet.endGroup(),G.gullet.endGroup();var me=new Array(Q[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:Q,arraystretch:1,addJot:!0,rowGaps:[null],cols:me,colSeparationType:"CD",hLinesBeforeRow:new Array(Q.length+1).fill([])}}defineFunction({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(G,_){var{parser:J,funcName:Z}=G;return{type:"cdlabel",mode:J.mode,side:Z.slice(4),label:_[0]}},htmlBuilder(G,_){var J=_.havingStyle(_.style.sup()),Z=buildCommon.wrapFragment(buildGroup$1(G.label,J,_),_);return Z.classes.push("cd-label-"+G.side),Z.style.bottom=makeEm(.8-Z.depth),Z.height=0,Z.depth=0,Z},mathmlBuilder(G,_){var J=new mathMLTree.MathNode("mrow",[buildGroup(G.label,_)]);return J=new mathMLTree.MathNode("mpadded",[J]),J.setAttribute("width","0"),G.side==="left"&&J.setAttribute("lspace","-1width"),J.setAttribute("voffset","0.7em"),J=new mathMLTree.MathNode("mstyle",[J]),J.setAttribute("displaystyle","false"),J.setAttribute("scriptlevel","1"),J}});defineFunction({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(G,_){var{parser:J}=G;return{type:"cdlabelparent",mode:J.mode,fragment:_[0]}},htmlBuilder(G,_){var J=buildCommon.wrapFragment(buildGroup$1(G.fragment,_),_);return J.classes.push("cd-vert-arrow"),J},mathmlBuilder(G,_){return new mathMLTree.MathNode("mrow",[buildGroup(G.fragment,_)])}});defineFunction({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(G,_){for(var{parser:J}=G,Z=assertNodeType(_[0],"ordgroup"),Q=Z.body,ee="",te=0;te<Q.length;te++){var ne=assertNodeType(Q[te],"textord");ee+=ne.text}var ie=parseInt(ee),re;if(isNaN(ie))throw new ParseError("\\@char has non-numeric argument "+ee);if(ie<0||ie>=1114111)throw new ParseError("\\@char with invalid code point "+ee);return ie<=65535?re=String.fromCharCode(ie):(ie-=65536,re=String.fromCharCode((ie>>10)+55296,(ie&1023)+56320)),{type:"textord",mode:J.mode,text:re}}});var htmlBuilder$8=(G,_)=>{var J=buildExpression$1(G.body,_.withColor(G.color),!1);return buildCommon.makeFragment(J)},mathmlBuilder$7=(G,_)=>{var J=buildExpression(G.body,_.withColor(G.color)),Z=new mathMLTree.MathNode("mstyle",J);return Z.setAttribute("mathcolor",G.color),Z};defineFunction({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(G,_){var{parser:J}=G,Z=assertNodeType(_[0],"color-token").color,Q=_[1];return{type:"color",mode:J.mode,color:Z,body:ordargument(Q)}},htmlBuilder:htmlBuilder$8,mathmlBuilder:mathmlBuilder$7});defineFunction({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(G,_){var{parser:J,breakOnTokenText:Z}=G,Q=assertNodeType(_[0],"color-token").color;J.gullet.macros.set("\\current@color",Q);var ee=J.parseExpression(!0,Z);return{type:"color",mode:J.mode,color:Q,body:ee}},htmlBuilder:htmlBuilder$8,mathmlBuilder:mathmlBuilder$7});defineFunction({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(G,_,J){var{parser:Z}=G,Q=Z.gullet.future().text==="["?Z.parseSizeGroup(!0):null,ee=!Z.settings.displayMode||!Z.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:Z.mode,newLine:ee,size:Q&&assertNodeType(Q,"size").value}},htmlBuilder(G,_){var J=buildCommon.makeSpan(["mspace"],[],_);return G.newLine&&(J.classes.push("newline"),G.size&&(J.style.marginTop=makeEm(calculateSize(G.size,_)))),J},mathmlBuilder(G,_){var J=new mathMLTree.MathNode("mspace");return G.newLine&&(J.setAttribute("linebreak","newline"),G.size&&J.setAttribute("height",makeEm(calculateSize(G.size,_)))),J}});var globalMap={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},checkControlSequence=G=>{var _=G.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(_))throw new ParseError("Expected a control sequence",G);return _},getRHS=G=>{var _=G.gullet.popToken();return _.text==="="&&(_=G.gullet.popToken(),_.text===" "&&(_=G.gullet.popToken())),_},letCommand=(G,_,J,Z)=>{var Q=G.gullet.macros.get(J.text);Q==null&&(J.noexpand=!0,Q={tokens:[J],numArgs:0,unexpandable:!G.gullet.isExpandable(J.text)}),G.gullet.macros.set(_,Q,Z)};defineFunction({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(G){var{parser:_,funcName:J}=G;_.consumeSpaces();var Z=_.fetch();if(globalMap[Z.text])return(J==="\\global"||J==="\\\\globallong")&&(Z.text=globalMap[Z.text]),assertNodeType(_.parseFunction(),"internal");throw new ParseError("Invalid token after macro prefix",Z)}});defineFunction({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(G){var{parser:_,funcName:J}=G,Z=_.gullet.popToken(),Q=Z.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(Q))throw new ParseError("Expected a control sequence",Z);for(var ee=0,te,ne=[[]];_.gullet.future().text!=="{";)if(Z=_.gullet.popToken(),Z.text==="#"){if(_.gullet.future().text==="{"){te=_.gullet.future(),ne[ee].push("{");break}if(Z=_.gullet.popToken(),!/^[1-9]$/.test(Z.text))throw new ParseError('Invalid argument number "'+Z.text+'"');if(parseInt(Z.text)!==ee+1)throw new ParseError('Argument number "'+Z.text+'" out of order');ee++,ne.push([])}else{if(Z.text==="EOF")throw new ParseError("Expected a macro definition");ne[ee].push(Z.text)}var{tokens:ie}=_.gullet.consumeArg();return te&&ie.unshift(te),(J==="\\edef"||J==="\\xdef")&&(ie=_.gullet.expandTokens(ie),ie.reverse()),_.gullet.macros.set(Q,{tokens:ie,numArgs:ee,delimiters:ne},J===globalMap[J]),{type:"internal",mode:_.mode}}});defineFunction({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(G){var{parser:_,funcName:J}=G,Z=checkControlSequence(_.gullet.popToken());_.gullet.consumeSpaces();var Q=getRHS(_);return letCommand(_,Z,Q,J==="\\\\globallet"),{type:"internal",mode:_.mode}}});defineFunction({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(G){var{parser:_,funcName:J}=G,Z=checkControlSequence(_.gullet.popToken()),Q=_.gullet.popToken(),ee=_.gullet.popToken();return letCommand(_,Z,ee,J==="\\\\globalfuture"),_.gullet.pushToken(ee),_.gullet.pushToken(Q),{type:"internal",mode:_.mode}}});var getMetrics=function(_,J,Z){var Q=symbols.math[_]&&symbols.math[_].replace,ee=getCharacterMetrics(Q||_,J,Z);if(!ee)throw new Error("Unsupported symbol "+_+" and font size "+J+".");return ee},styleWrap=function(_,J,Z,Q){var ee=Z.havingBaseStyle(J),te=buildCommon.makeSpan(Q.concat(ee.sizingClasses(Z)),[_],Z),ne=ee.sizeMultiplier/Z.sizeMultiplier;return te.height*=ne,te.depth*=ne,te.maxFontSize=ee.sizeMultiplier,te},centerSpan=function(_,J,Z){var Q=J.havingBaseStyle(Z),ee=(1-J.sizeMultiplier/Q.sizeMultiplier)*J.fontMetrics().axisHeight;_.classes.push("delimcenter"),_.style.top=makeEm(ee),_.height-=ee,_.depth+=ee},makeSmallDelim=function(_,J,Z,Q,ee,te){var ne=buildCommon.makeSymbol(_,"Main-Regular",ee,Q),ie=styleWrap(ne,J,Q,te);return Z&&centerSpan(ie,Q,J),ie},mathrmSize=function(_,J,Z,Q){return buildCommon.makeSymbol(_,"Size"+J+"-Regular",Z,Q)},makeLargeDelim=function(_,J,Z,Q,ee,te){var ne=mathrmSize(_,J,ee,Q),ie=styleWrap(buildCommon.makeSpan(["delimsizing","size"+J],[ne],Q),Style$1.TEXT,Q,te);return Z&&centerSpan(ie,Q,Style$1.TEXT),ie},makeGlyphSpan=function(_,J,Z){var Q;J==="Size1-Regular"?Q="delim-size1":Q="delim-size4";var ee=buildCommon.makeSpan(["delimsizinginner",Q],[buildCommon.makeSpan([],[buildCommon.makeSymbol(_,J,Z)])]);return{type:"elem",elem:ee}},makeInner=function(_,J,Z){var Q=fontMetricsData["Size4-Regular"][_.charCodeAt(0)]?fontMetricsData["Size4-Regular"][_.charCodeAt(0)][4]:fontMetricsData["Size1-Regular"][_.charCodeAt(0)][4],ee=new PathNode("inner",innerPath(_,Math.round(1e3*J))),te=new SvgNode([ee],{width:makeEm(Q),height:makeEm(J),style:"width:"+makeEm(Q),viewBox:"0 0 "+1e3*Q+" "+Math.round(1e3*J),preserveAspectRatio:"xMinYMin"}),ne=buildCommon.makeSvgSpan([],[te],Z);return ne.height=J,ne.style.height=makeEm(J),ne.style.width=makeEm(Q),{type:"elem",elem:ne}},lapInEms=.008,lap={type:"kern",size:-1*lapInEms},verts=["|","\\lvert","\\rvert","\\vert"],doubleVerts=["\\|","\\lVert","\\rVert","\\Vert"],makeStackedDelim=function(_,J,Z,Q,ee,te){var ne,ie,re,oe,se="",ae=0;ne=re=oe=_,ie=null;var ce="Size1-Regular";_==="\\uparrow"?re=oe="":_==="\\Uparrow"?re=oe="":_==="\\downarrow"?ne=re="":_==="\\Downarrow"?ne=re="":_==="\\updownarrow"?(ne="\\uparrow",re="",oe="\\downarrow"):_==="\\Updownarrow"?(ne="\\Uparrow",re="",oe="\\Downarrow"):verts.includes(_)?(re="",se="vert",ae=333):doubleVerts.includes(_)?(re="",se="doublevert",ae=556):_==="["||_==="\\lbrack"?(ne="",re="",oe="",ce="Size4-Regular",se="lbrack",ae=667):_==="]"||_==="\\rbrack"?(ne="",re="",oe="",ce="Size4-Regular",se="rbrack",ae=667):_==="\\lfloor"||_===""?(re=ne="",oe="",ce="Size4-Regular",se="lfloor",ae=667):_==="\\lceil"||_===""?(ne="",re=oe="",ce="Size4-Regular",se="lceil",ae=667):_==="\\rfloor"||_===""?(re=ne="",oe="",ce="Size4-Regular",se="rfloor",ae=667):_==="\\rceil"||_===""?(ne="",re=oe="",ce="Size4-Regular",se="rceil",ae=667):_==="("||_==="\\lparen"?(ne="",re="",oe="",ce="Size4-Regular",se="lparen",ae=875):_===")"||_==="\\rparen"?(ne="",re="",oe="",ce="Size4-Regular",se="rparen",ae=875):_==="\\{"||_==="\\lbrace"?(ne="",ie="",oe="",re="",ce="Size4-Regular"):_==="\\}"||_==="\\rbrace"?(ne="",ie="",oe="",re="",ce="Size4-Regular"):_==="\\lgroup"||_===""?(ne="",oe="",re="",ce="Size4-Regular"):_==="\\rgroup"||_===""?(ne="",oe="",re="",ce="Size4-Regular"):_==="\\lmoustache"||_===""?(ne="",oe="",re="",ce="Size4-Regular"):(_==="\\rmoustache"||_==="")&&(ne="",oe="",re="",ce="Size4-Regular");var ue=getMetrics(ne,ce,ee),de=ue.height+ue.depth,me=getMetrics(re,ce,ee),fe=me.height+me.depth,_e=getMetrics(oe,ce,ee),ye=_e.height+_e.depth,be=0,Se=1;if(ie!==null){var Ce=getMetrics(ie,ce,ee);be=Ce.height+Ce.depth,Se=2}var Me=de+ye+be,Re=Math.max(0,Math.ceil((J-Me)/(Se*fe))),Te=Me+Re*Se*fe,Ee=Q.fontMetrics().axisHeight;Z&&(Ee*=Q.sizeMultiplier);var De=Te/2-Ee,Le=[];if(se.length>0){var Ue=Te-de-ye,Ge=Math.round(Te*1e3),Ye=tallDelim(se,Math.round(Ue*1e3)),ke=new PathNode(se,Ye),Fe=(ae/1e3).toFixed(3)+"em",Ve=(Ge/1e3).toFixed(3)+"em",$e=new SvgNode([ke],{width:Fe,height:Ve,viewBox:"0 0 "+ae+" "+Ge}),Xe=buildCommon.makeSvgSpan([],[$e],Q);Xe.height=Ge/1e3,Xe.style.width=Fe,Xe.style.height=Ve,Le.push({type:"elem",elem:Xe})}else{if(Le.push(makeGlyphSpan(oe,ce,ee)),Le.push(lap),ie===null){var ze=Te-de-ye+2*lapInEms;Le.push(makeInner(re,ze,Q))}else{var qe=(Te-de-ye-be)/2+2*lapInEms;Le.push(makeInner(re,qe,Q)),Le.push(lap),Le.push(makeGlyphSpan(ie,ce,ee)),Le.push(lap),Le.push(makeInner(re,qe,Q))}Le.push(lap),Le.push(makeGlyphSpan(ne,ce,ee))}var et=Q.havingBaseStyle(Style$1.TEXT),ot=buildCommon.makeVList({positionType:"bottom",positionData:De,children:Le},et);return styleWrap(buildCommon.makeSpan(["delimsizing","mult"],[ot],et),Style$1.TEXT,Q,te)},vbPad=80,emPad=.08,sqrtSvg=function(_,J,Z,Q,ee){var te=sqrtPath(_,Q,Z),ne=new PathNode(_,te),ie=new SvgNode([ne],{width:"400em",height:makeEm(J),viewBox:"0 0 400000 "+Z,preserveAspectRatio:"xMinYMin slice"});return buildCommon.makeSvgSpan(["hide-tail"],[ie],ee)},makeSqrtImage=function(_,J){var Z=J.havingBaseSizing(),Q=traverseSequence("\\surd",_*Z.sizeMultiplier,stackLargeDelimiterSequence,Z),ee=Z.sizeMultiplier,te=Math.max(0,J.minRuleThickness-J.fontMetrics().sqrtRuleThickness),ne,ie=0,re=0,oe=0,se;return Q.type==="small"?(oe=1e3+1e3*te+vbPad,_<1?ee=1:_<1.4&&(ee=.7),ie=(1+te+emPad)/ee,re=(1+te)/ee,ne=sqrtSvg("sqrtMain",ie,oe,te,J),ne.style.minWidth="0.853em",se=.833/ee):Q.type==="large"?(oe=(1e3+vbPad)*sizeToMaxHeight[Q.size],re=(sizeToMaxHeight[Q.size]+te)/ee,ie=(sizeToMaxHeight[Q.size]+te+emPad)/ee,ne=sqrtSvg("sqrtSize"+Q.size,ie,oe,te,J),ne.style.minWidth="1.02em",se=1/ee):(ie=_+te+emPad,re=_+te,oe=Math.floor(1e3*_+te)+vbPad,ne=sqrtSvg("sqrtTall",ie,oe,te,J),ne.style.minWidth="0.742em",se=1.056),ne.height=re,ne.style.height=makeEm(ie),{span:ne,advanceWidth:se,ruleWidth:(J.fontMetrics().sqrtRuleThickness+te)*ee}},stackLargeDelimiters=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],stackAlwaysDelimiters=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],stackNeverDelimiters=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],sizeToMaxHeight=[0,1.2,1.8,2.4,3],makeSizedDelim=function(_,J,Z,Q,ee){if(_==="<"||_==="\\lt"||_===""?_="\\langle":(_===">"||_==="\\gt"||_==="")&&(_="\\rangle"),stackLargeDelimiters.includes(_)||stackNeverDelimiters.includes(_))return makeLargeDelim(_,J,!1,Z,Q,ee);if(stackAlwaysDelimiters.includes(_))return makeStackedDelim(_,sizeToMaxHeight[J],!1,Z,Q,ee);throw new ParseError("Illegal delimiter: '"+_+"'")},stackNeverDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],stackAlwaysDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"stack"}],stackLargeDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],delimTypeToFont=function(_){if(_.type==="small")return"Main-Regular";if(_.type==="large")return"Size"+_.size+"-Regular";if(_.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+_.type+"' here.")},traverseSequence=function(_,J,Z,Q){for(var ee=Math.min(2,3-Q.style.size),te=ee;te<Z.length&&Z[te].type!=="stack";te++){var ne=getMetrics(_,delimTypeToFont(Z[te]),"math"),ie=ne.height+ne.depth;if(Z[te].type==="small"){var re=Q.havingBaseStyle(Z[te].style);ie*=re.sizeMultiplier}if(ie>J)return Z[te]}return Z[Z.length-1]},makeCustomSizedDelim=function(_,J,Z,Q,ee,te){_==="<"||_==="\\lt"||_===""?_="\\langle":(_===">"||_==="\\gt"||_==="")&&(_="\\rangle");var ne;stackNeverDelimiters.includes(_)?ne=stackNeverDelimiterSequence:stackLargeDelimiters.includes(_)?ne=stackLargeDelimiterSequence:ne=stackAlwaysDelimiterSequence;var ie=traverseSequence(_,J,ne,Q);return ie.type==="small"?makeSmallDelim(_,ie.style,Z,Q,ee,te):ie.type==="large"?makeLargeDelim(_,ie.size,Z,Q,ee,te):makeStackedDelim(_,J,Z,Q,ee,te)},makeLeftRightDelim=function(_,J,Z,Q,ee,te){var ne=Q.fontMetrics().axisHeight*Q.sizeMultiplier,ie=901,re=5/Q.fontMetrics().ptPerEm,oe=Math.max(J-ne,Z+ne),se=Math.max(oe/500*ie,2*oe-re);return makeCustomSizedDelim(_,se,!0,Q,ee,te)},delimiter={sqrtImage:makeSqrtImage,sizedDelim:makeSizedDelim,sizeToMaxHeight,customSizedDelim:makeCustomSizedDelim,leftRightDelim:makeLeftRightDelim},delimiterSizes={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},delimiters=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function checkDelimiter(G,_){var J=checkSymbolNodeType(G);if(J&&delimiters.includes(J.text))return J;throw J?new ParseError("Invalid delimiter '"+J.text+"' after '"+_.funcName+"'",G):new ParseError("Invalid delimiter type '"+G.type+"'",G)}defineFunction({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(G,_)=>{var J=checkDelimiter(_[0],G);return{type:"delimsizing",mode:G.parser.mode,size:delimiterSizes[G.funcName].size,mclass:delimiterSizes[G.funcName].mclass,delim:J.text}},htmlBuilder:(G,_)=>G.delim==="."?buildCommon.makeSpan([G.mclass]):delimiter.sizedDelim(G.delim,G.size,_,G.mode,[G.mclass]),mathmlBuilder:G=>{var _=[];G.delim!=="."&&_.push(makeText(G.delim,G.mode));var J=new mathMLTree.MathNode("mo",_);G.mclass==="mopen"||G.mclass==="mclose"?J.setAttribute("fence","true"):J.setAttribute("fence","false"),J.setAttribute("stretchy","true");var Z=makeEm(delimiter.sizeToMaxHeight[G.size]);return J.setAttribute("minsize",Z),J.setAttribute("maxsize",Z),J}});function assertParsed(G){if(!G.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}defineFunction({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(G,_)=>{var J=G.parser.gullet.macros.get("\\current@color");if(J&&typeof J!="string")throw new ParseError("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:G.parser.mode,delim:checkDelimiter(_[0],G).text,color:J}}});defineFunction({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(G,_)=>{var J=checkDelimiter(_[0],G),Z=G.parser;++Z.leftrightDepth;var Q=Z.parseExpression(!1);--Z.leftrightDepth,Z.expect("\\right",!1);var ee=assertNodeType(Z.parseFunction(),"leftright-right");return{type:"leftright",mode:Z.mode,body:Q,left:J.text,right:ee.delim,rightColor:ee.color}},htmlBuilder:(G,_)=>{assertParsed(G);for(var J=buildExpression$1(G.body,_,!0,["mopen","mclose"]),Z=0,Q=0,ee=!1,te=0;te<J.length;te++)J[te].isMiddle?ee=!0:(Z=Math.max(J[te].height,Z),Q=Math.max(J[te].depth,Q));Z*=_.sizeMultiplier,Q*=_.sizeMultiplier;var ne;if(G.left==="."?ne=makeNullDelimiter(_,["mopen"]):ne=delimiter.leftRightDelim(G.left,Z,Q,_,G.mode,["mopen"]),J.unshift(ne),ee)for(var ie=1;ie<J.length;ie++){var re=J[ie],oe=re.isMiddle;oe&&(J[ie]=delimiter.leftRightDelim(oe.delim,Z,Q,oe.options,G.mode,[]))}var se;if(G.right===".")se=makeNullDelimiter(_,["mclose"]);else{var ae=G.rightColor?_.withColor(G.rightColor):_;se=delimiter.leftRightDelim(G.right,Z,Q,ae,G.mode,["mclose"])}return J.push(se),buildCommon.makeSpan(["minner"],J,_)},mathmlBuilder:(G,_)=>{assertParsed(G);var J=buildExpression(G.body,_);if(G.left!=="."){var Z=new mathMLTree.MathNode("mo",[makeText(G.left,G.mode)]);Z.setAttribute("fence","true"),J.unshift(Z)}if(G.right!=="."){var Q=new mathMLTree.MathNode("mo",[makeText(G.right,G.mode)]);Q.setAttribute("fence","true"),G.rightColor&&Q.setAttribute("mathcolor",G.rightColor),J.push(Q)}return makeRow(J)}});defineFunction({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(G,_)=>{var J=checkDelimiter(_[0],G);if(!G.parser.leftrightDepth)throw new ParseError("\\middle without preceding \\left",J);return{type:"middle",mode:G.parser.mode,delim:J.text}},htmlBuilder:(G,_)=>{var J;if(G.delim===".")J=makeNullDelimiter(_,[]);else{J=delimiter.sizedDelim(G.delim,1,_,G.mode,[]);var Z={delim:G.delim,options:_};J.isMiddle=Z}return J},mathmlBuilder:(G,_)=>{var J=G.delim==="\\vert"||G.delim==="|"?makeText("|","text"):makeText(G.delim,G.mode),Z=new mathMLTree.MathNode("mo",[J]);return Z.setAttribute("fence","true"),Z.setAttribute("lspace","0.05em"),Z.setAttribute("rspace","0.05em"),Z}});var htmlBuilder$7=(G,_)=>{var J=buildCommon.wrapFragment(buildGroup$1(G.body,_),_),Z=G.label.slice(1),Q=_.sizeMultiplier,ee,te=0,ne=utils.isCharacterBox(G.body);if(Z==="sout")ee=buildCommon.makeSpan(["stretchy","sout"]),ee.height=_.fontMetrics().defaultRuleThickness/Q,te=-.5*_.fontMetrics().xHeight;else if(Z==="phase"){var ie=calculateSize({number:.6,unit:"pt"},_),re=calculateSize({number:.35,unit:"ex"},_),oe=_.havingBaseSizing();Q=Q/oe.sizeMultiplier;var se=J.height+J.depth+ie+re;J.style.paddingLeft=makeEm(se/2+ie);var ae=Math.floor(1e3*se*Q),ce=phasePath(ae),ue=new SvgNode([new PathNode("phase",ce)],{width:"400em",height:makeEm(ae/1e3),viewBox:"0 0 400000 "+ae,preserveAspectRatio:"xMinYMin slice"});ee=buildCommon.makeSvgSpan(["hide-tail"],[ue],_),ee.style.height=makeEm(se),te=J.depth+ie+re}else{/cancel/.test(Z)?ne||J.classes.push("cancel-pad"):Z==="angl"?J.classes.push("anglpad"):J.classes.push("boxpad");var de=0,me=0,fe=0;/box/.test(Z)?(fe=Math.max(_.fontMetrics().fboxrule,_.minRuleThickness),de=_.fontMetrics().fboxsep+(Z==="colorbox"?0:fe),me=de):Z==="angl"?(fe=Math.max(_.fontMetrics().defaultRuleThickness,_.minRuleThickness),de=4*fe,me=Math.max(0,.25-J.depth)):(de=ne?.2:0,me=de),ee=stretchy.encloseSpan(J,Z,de,me,_),/fbox|boxed|fcolorbox/.test(Z)?(ee.style.borderStyle="solid",ee.style.borderWidth=makeEm(fe)):Z==="angl"&&fe!==.049&&(ee.style.borderTopWidth=makeEm(fe),ee.style.borderRightWidth=makeEm(fe)),te=J.depth+me,G.backgroundColor&&(ee.style.backgroundColor=G.backgroundColor,G.borderColor&&(ee.style.borderColor=G.borderColor))}var _e;if(G.backgroundColor)_e=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:ee,shift:te},{type:"elem",elem:J,shift:0}]},_);else{var ye=/cancel|phase/.test(Z)?["svg-align"]:[];_e=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:J,shift:0},{type:"elem",elem:ee,shift:te,wrapperClasses:ye}]},_)}return/cancel/.test(Z)&&(_e.height=J.height,_e.depth=J.depth),/cancel/.test(Z)&&!ne?buildCommon.makeSpan(["mord","cancel-lap"],[_e],_):buildCommon.makeSpan(["mord"],[_e],_)},mathmlBuilder$6=(G,_)=>{var J=0,Z=new mathMLTree.MathNode(G.label.indexOf("colorbox")>-1?"mpadded":"menclose",[buildGroup(G.body,_)]);switch(G.label){case"\\cancel":Z.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":Z.setAttribute("notation","downdiagonalstrike");break;case"\\phase":Z.setAttribute("notation","phasorangle");break;case"\\sout":Z.setAttribute("notation","horizontalstrike");break;case"\\fbox":Z.setAttribute("notation","box");break;case"\\angl":Z.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(J=_.fontMetrics().fboxsep*_.fontMetrics().ptPerEm,Z.setAttribute("width","+"+2*J+"pt"),Z.setAttribute("height","+"+2*J+"pt"),Z.setAttribute("lspace",J+"pt"),Z.setAttribute("voffset",J+"pt"),G.label==="\\fcolorbox"){var Q=Math.max(_.fontMetrics().fboxrule,_.minRuleThickness);Z.setAttribute("style","border: "+Q+"em solid "+String(G.borderColor))}break;case"\\xcancel":Z.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return G.backgroundColor&&Z.setAttribute("mathbackground",G.backgroundColor),Z};defineFunction({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(G,_,J){var{parser:Z,funcName:Q}=G,ee=assertNodeType(_[0],"color-token").color,te=_[1];return{type:"enclose",mode:Z.mode,label:Q,backgroundColor:ee,body:te}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(G,_,J){var{parser:Z,funcName:Q}=G,ee=assertNodeType(_[0],"color-token").color,te=assertNodeType(_[1],"color-token").color,ne=_[2];return{type:"enclose",mode:Z.mode,label:Q,backgroundColor:te,borderColor:ee,body:ne}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(G,_){var{parser:J}=G;return{type:"enclose",mode:J.mode,label:"\\fbox",body:_[0]}}});defineFunction({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(G,_){var{parser:J,funcName:Z}=G,Q=_[0];return{type:"enclose",mode:J.mode,label:Z,body:Q}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(G,_){var{parser:J}=G;return{type:"enclose",mode:J.mode,label:"\\angl",body:_[0]}}});var _environments={};function defineEnvironment(G){for(var{type:_,names:J,props:Z,handler:Q,htmlBuilder:ee,mathmlBuilder:te}=G,ne={type:_,numArgs:Z.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:Q},ie=0;ie<J.length;++ie)_environments[J[ie]]=ne;ee&&(_htmlGroupBuilders[_]=ee),te&&(_mathmlGroupBuilders[_]=te)}var _macros={};function defineMacro(G,_){_macros[G]=_}function getHLines(G){var _=[];G.consumeSpaces();var J=G.fetch().text;for(J==="\\relax"&&(G.consume(),G.consumeSpaces(),J=G.fetch().text);J==="\\hline"||J==="\\hdashline";)G.consume(),_.push(J==="\\hdashline"),G.consumeSpaces(),J=G.fetch().text;return _}var validateAmsEnvironmentContext=G=>{var _=G.parser.settings;if(!_.displayMode)throw new ParseError("{"+G.envName+"} can be used only in display mode.")};function getAutoTag(G){if(G.indexOf("ed")===-1)return G.indexOf("*")===-1}function parseArray(G,_,J){var{hskipBeforeAndAfter:Z,addJot:Q,cols:ee,arraystretch:te,colSeparationType:ne,autoTag:ie,singleRow:re,emptySingleRow:oe,maxNumCols:se,leqno:ae}=_;if(G.gullet.beginGroup(),re||G.gullet.macros.set("\\cr","\\\\\\relax"),!te){var ce=G.gullet.expandMacroAsText("\\arraystretch");if(ce==null)te=1;else if(te=parseFloat(ce),!te||te<0)throw new ParseError("Invalid \\arraystretch: "+ce)}G.gullet.beginGroup();var ue=[],de=[ue],me=[],fe=[],_e=ie!=null?[]:void 0;function ye(){ie&&G.gullet.macros.set("\\@eqnsw","1",!0)}function be(){_e&&(G.gullet.macros.get("\\df@tag")?(_e.push(G.subparse([new Token("\\df@tag")])),G.gullet.macros.set("\\df@tag",void 0,!0)):_e.push(!!ie&&G.gullet.macros.get("\\@eqnsw")==="1"))}for(ye(),fe.push(getHLines(G));;){var Se=G.parseExpression(!1,re?"\\end":"\\\\");G.gullet.endGroup(),G.gullet.beginGroup(),Se={type:"ordgroup",mode:G.mode,body:Se},J&&(Se={type:"styling",mode:G.mode,style:J,body:[Se]}),ue.push(Se);var Ce=G.fetch().text;if(Ce==="&"){if(se&&ue.length===se){if(re||ne)throw new ParseError("Too many tab characters: &",G.nextToken);G.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}G.consume()}else if(Ce==="\\end"){be(),ue.length===1&&Se.type==="styling"&&Se.body[0].body.length===0&&(de.length>1||!oe)&&de.pop(),fe.length<de.length+1&&fe.push([]);break}else if(Ce==="\\\\"){G.consume();var Me=void 0;G.gullet.future().text!==" "&&(Me=G.parseSizeGroup(!0)),me.push(Me?Me.value:null),be(),fe.push(getHLines(G)),ue=[],de.push(ue),ye()}else throw new ParseError("Expected & or \\\\ or \\cr or \\end",G.nextToken)}return G.gullet.endGroup(),G.gullet.endGroup(),{type:"array",mode:G.mode,addJot:Q,arraystretch:te,body:de,cols:ee,rowGaps:me,hskipBeforeAndAfter:Z,hLinesBeforeRow:fe,colSeparationType:ne,tags:_e,leqno:ae}}function dCellStyle(G){return G.slice(0,1)==="d"?"display":"text"}var htmlBuilder$6=function(_,J){var Z,Q,ee=_.body.length,te=_.hLinesBeforeRow,ne=0,ie=new Array(ee),re=[],oe=Math.max(J.fontMetrics().arrayRuleWidth,J.minRuleThickness),se=1/J.fontMetrics().ptPerEm,ae=5*se;if(_.colSeparationType&&_.colSeparationType==="small"){var ce=J.havingStyle(Style$1.SCRIPT).sizeMultiplier;ae=.2778*(ce/J.sizeMultiplier)}var ue=_.colSeparationType==="CD"?calculateSize({number:3,unit:"ex"},J):12*se,de=3*se,me=_.arraystretch*ue,fe=.7*me,_e=.3*me,ye=0;function be(Lt){for(var jt=0;jt<Lt.length;++jt)jt>0&&(ye+=.25),re.push({pos:ye,isDashed:Lt[jt]})}for(be(te[0]),Z=0;Z<_.body.length;++Z){var Se=_.body[Z],Ce=fe,Me=_e;ne<Se.length&&(ne=Se.length);var Re=new Array(Se.length);for(Q=0;Q<Se.length;++Q){var Te=buildGroup$1(Se[Q],J);Me<Te.depth&&(Me=Te.depth),Ce<Te.height&&(Ce=Te.height),Re[Q]=Te}var Ee=_.rowGaps[Z],De=0;Ee&&(De=calculateSize(Ee,J),De>0&&(De+=_e,Me<De&&(Me=De),De=0)),_.addJot&&(Me+=de),Re.height=Ce,Re.depth=Me,ye+=Ce,Re.pos=ye,ye+=Me+De,ie[Z]=Re,be(te[Z+1])}var Le=ye/2+J.fontMetrics().axisHeight,Ue=_.cols||[],Ge=[],Ye,ke,Fe=[];if(_.tags&&_.tags.some(Lt=>Lt))for(Z=0;Z<ee;++Z){var Ve=ie[Z],$e=Ve.pos-Le,Xe=_.tags[Z],ze=void 0;Xe===!0?ze=buildCommon.makeSpan(["eqn-num"],[],J):Xe===!1?ze=buildCommon.makeSpan([],[],J):ze=buildCommon.makeSpan([],buildExpression$1(Xe,J,!0),J),ze.depth=Ve.depth,ze.height=Ve.height,Fe.push({type:"elem",elem:ze,shift:$e})}for(Q=0,ke=0;Q<ne||ke<Ue.length;++Q,++ke){for(var qe=Ue[ke]||{},et=!0;qe.type==="separator";){if(et||(Ye=buildCommon.makeSpan(["arraycolsep"],[]),Ye.style.width=makeEm(J.fontMetrics().doubleRuleSep),Ge.push(Ye)),qe.separator==="|"||qe.separator===":"){var ot=qe.separator==="|"?"solid":"dashed",St=buildCommon.makeSpan(["vertical-separator"],[],J);St.style.height=makeEm(ye),St.style.borderRightWidth=makeEm(oe),St.style.borderRightStyle=ot,St.style.margin="0 "+makeEm(-oe/2);var it=ye-Le;it&&(St.style.verticalAlign=makeEm(-it)),Ge.push(St)}else throw new ParseError("Invalid separator type: "+qe.separator);ke++,qe=Ue[ke]||{},et=!1}if(!(Q>=ne)){var lt=void 0;(Q>0||_.hskipBeforeAndAfter)&&(lt=utils.deflt(qe.pregap,ae),lt!==0&&(Ye=buildCommon.makeSpan(["arraycolsep"],[]),Ye.style.width=makeEm(lt),Ge.push(Ye)));var gt=[];for(Z=0;Z<ee;++Z){var kt=ie[Z],Jt=kt[Q];if(Jt){var li=kt.pos-Le;Jt.depth=kt.depth,Jt.height=kt.height,gt.push({type:"elem",elem:Jt,shift:li})}}gt=buildCommon.makeVList({positionType:"individualShift",children:gt},J),gt=buildCommon.makeSpan(["col-align-"+(qe.align||"c")],[gt]),Ge.push(gt),(Q<ne-1||_.hskipBeforeAndAfter)&&(lt=utils.deflt(qe.postgap,ae),lt!==0&&(Ye=buildCommon.makeSpan(["arraycolsep"],[]),Ye.style.width=makeEm(lt),Ge.push(Ye)))}}if(ie=buildCommon.makeSpan(["mtable"],Ge),re.length>0){for(var si=buildCommon.makeLineSpan("hline",J,oe),qt=buildCommon.makeLineSpan("hdashline",J,oe),vt=[{type:"elem",elem:ie,shift:0}];re.length>0;){var Ke=re.pop(),Tt=Ke.pos-Le;Ke.isDashed?vt.push({type:"elem",elem:qt,shift:Tt}):vt.push({type:"elem",elem:si,shift:Tt})}ie=buildCommon.makeVList({positionType:"individualShift",children:vt},J)}if(Fe.length===0)return buildCommon.makeSpan(["mord"],[ie],J);var Ut=buildCommon.makeVList({positionType:"individualShift",children:Fe},J);return Ut=buildCommon.makeSpan(["tag"],[Ut],J),buildCommon.makeFragment([ie,Ut])},alignMap={c:"center ",l:"left ",r:"right "},mathmlBuilder$5=function(_,J){for(var Z=[],Q=new mathMLTree.MathNode("mtd",[],["mtr-glue"]),ee=new mathMLTree.MathNode("mtd",[],["mml-eqn-num"]),te=0;te<_.body.length;te++){for(var ne=_.body[te],ie=[],re=0;re<ne.length;re++)ie.push(new mathMLTree.MathNode("mtd",[buildGroup(ne[re],J)]));_.tags&&_.tags[te]&&(ie.unshift(Q),ie.push(Q),_.leqno?ie.unshift(ee):ie.push(ee)),Z.push(new mathMLTree.MathNode("mtr",ie))}var oe=new mathMLTree.MathNode("mtable",Z),se=_.arraystretch===.5?.1:.16+_.arraystretch-1+(_.addJot?.09:0);oe.setAttribute("rowspacing",makeEm(se));var ae="",ce="";if(_.cols&&_.cols.length>0){var ue=_.cols,de="",me=!1,fe=0,_e=ue.length;ue[0].type==="separator"&&(ae+="top ",fe=1),ue[ue.length-1].type==="separator"&&(ae+="bottom ",_e-=1);for(var ye=fe;ye<_e;ye++)ue[ye].type==="align"?(ce+=alignMap[ue[ye].align],me&&(de+="none "),me=!0):ue[ye].type==="separator"&&me&&(de+=ue[ye].separator==="|"?"solid ":"dashed ",me=!1);oe.setAttribute("columnalign",ce.trim()),/[sd]/.test(de)&&oe.setAttribute("columnlines",de.trim())}if(_.colSeparationType==="align"){for(var be=_.cols||[],Se="",Ce=1;Ce<be.length;Ce++)Se+=Ce%2?"0em ":"1em ";oe.setAttribute("columnspacing",Se.trim())}else _.colSeparationType==="alignat"||_.colSeparationType==="gather"?oe.setAttribute("columnspacing","0em"):_.colSeparationType==="small"?oe.setAttribute("columnspacing","0.2778em"):_.colSeparationType==="CD"?oe.setAttribute("columnspacing","0.5em"):oe.setAttribute("columnspacing","1em");var Me="",Re=_.hLinesBeforeRow;ae+=Re[0].length>0?"left ":"",ae+=Re[Re.length-1].length>0?"right ":"";for(var Te=1;Te<Re.length-1;Te++)Me+=Re[Te].length===0?"none ":Re[Te][0]?"dashed ":"solid ";return/[sd]/.test(Me)&&oe.setAttribute("rowlines",Me.trim()),ae!==""&&(oe=new mathMLTree.MathNode("menclose",[oe]),oe.setAttribute("notation",ae.trim())),_.arraystretch&&_.arraystretch<1&&(oe=new mathMLTree.MathNode("mstyle",[oe]),oe.setAttribute("scriptlevel","1")),oe},alignedHandler=function(_,J){_.envName.indexOf("ed")===-1&&validateAmsEnvironmentContext(_);var Z=[],Q=_.envName.indexOf("at")>-1?"alignat":"align",ee=_.envName==="split",te=parseArray(_.parser,{cols:Z,addJot:!0,autoTag:ee?void 0:getAutoTag(_.envName),emptySingleRow:!0,colSeparationType:Q,maxNumCols:ee?2:void 0,leqno:_.parser.settings.leqno},"display"),ne,ie=0,re={type:"ordgroup",mode:_.mode,body:[]};if(J[0]&&J[0].type==="ordgroup"){for(var oe="",se=0;se<J[0].body.length;se++){var ae=assertNodeType(J[0].body[se],"textord");oe+=ae.text}ne=Number(oe),ie=ne*2}var ce=!ie;te.body.forEach(function(fe){for(var _e=1;_e<fe.length;_e+=2){var ye=assertNodeType(fe[_e],"styling"),be=assertNodeType(ye.body[0],"ordgroup");be.body.unshift(re)}if(ce)ie<fe.length&&(ie=fe.length);else{var Se=fe.length/2;if(ne<Se)throw new ParseError("Too many math in a row: "+("expected "+ne+", but got "+Se),fe[0])}});for(var ue=0;ue<ie;++ue){var de="r",me=0;ue%2===1?de="l":ue>0&&ce&&(me=1),Z[ue]={type:"align",align:de,pregap:me,postgap:0}}return te.colSeparationType=ce?"align":"alignat",te};defineEnvironment({type:"array",names:["array","darray"],props:{numArgs:1},handler(G,_){var J=checkSymbolNodeType(_[0]),Z=J?[_[0]]:assertNodeType(_[0],"ordgroup").body,Q=Z.map(function(te){var ne=assertSymbolNodeType(te),ie=ne.text;if("lcr".indexOf(ie)!==-1)return{type:"align",align:ie};if(ie==="|")return{type:"separator",separator:"|"};if(ie===":")return{type:"separator",separator:":"};throw new ParseError("Unknown column alignment: "+ie,te)}),ee={cols:Q,hskipBeforeAndAfter:!0,maxNumCols:Q.length};return parseArray(G.parser,ee,dCellStyle(G.envName))},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(G){var _={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[G.envName.replace("*","")],J="c",Z={hskipBeforeAndAfter:!1,cols:[{type:"align",align:J}]};if(G.envName.charAt(G.envName.length-1)==="*"){var Q=G.parser;if(Q.consumeSpaces(),Q.fetch().text==="["){if(Q.consume(),Q.consumeSpaces(),J=Q.fetch().text,"lcr".indexOf(J)===-1)throw new ParseError("Expected l or c or r",Q.nextToken);Q.consume(),Q.consumeSpaces(),Q.expect("]"),Q.consume(),Z.cols=[{type:"align",align:J}]}}var ee=parseArray(G.parser,Z,dCellStyle(G.envName)),te=Math.max(0,...ee.body.map(ne=>ne.length));return ee.cols=new Array(te).fill({type:"align",align:J}),_?{type:"leftright",mode:G.mode,body:[ee],left:_[0],right:_[1],rightColor:void 0}:ee},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(G){var _={arraystretch:.5},J=parseArray(G.parser,_,"script");return J.colSeparationType="small",J},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["subarray"],props:{numArgs:1},handler(G,_){var J=checkSymbolNodeType(_[0]),Z=J?[_[0]]:assertNodeType(_[0],"ordgroup").body,Q=Z.map(function(te){var ne=assertSymbolNodeType(te),ie=ne.text;if("lc".indexOf(ie)!==-1)return{type:"align",align:ie};throw new ParseError("Unknown column alignment: "+ie,te)});if(Q.length>1)throw new ParseError("{subarray} can contain only one column");var ee={cols:Q,hskipBeforeAndAfter:!1,arraystretch:.5};if(ee=parseArray(G.parser,ee,"script"),ee.body.length>0&&ee.body[0].length>1)throw new ParseError("{subarray} can contain only one column");return ee},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(G){var _={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},J=parseArray(G.parser,_,dCellStyle(G.envName));return{type:"leftright",mode:G.mode,body:[J],left:G.envName.indexOf("r")>-1?".":"\\{",right:G.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:alignedHandler,htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(G){["gather","gather*"].includes(G.envName)&&validateAmsEnvironmentContext(G);var _={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:getAutoTag(G.envName),emptySingleRow:!0,leqno:G.parser.settings.leqno};return parseArray(G.parser,_,"display")},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:alignedHandler,htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(G){validateAmsEnvironmentContext(G);var _={autoTag:getAutoTag(G.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:G.parser.settings.leqno};return parseArray(G.parser,_,"display")},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["CD"],props:{numArgs:0},handler(G){return validateAmsEnvironmentContext(G),parseCD(G.parser)},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineMacro("\\nonumber","\\gdef\\@eqnsw{0}");defineMacro("\\notag","\\nonumber");defineFunction({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(G,_){throw new ParseError(G.funcName+" valid only within array environment")}});var environments=_environments;defineFunction({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(G,_){var{parser:J,funcName:Z}=G,Q=_[0];if(Q.type!=="ordgroup")throw new ParseError("Invalid environment name",Q);for(var ee="",te=0;te<Q.body.length;++te)ee+=assertNodeType(Q.body[te],"textord").text;if(Z==="\\begin"){if(!environments.hasOwnProperty(ee))throw new ParseError("No such environment: "+ee,Q);var ne=environments[ee],{args:ie,optArgs:re}=J.parseArguments("\\begin{"+ee+"}",ne),oe={mode:J.mode,envName:ee,parser:J},se=ne.handler(oe,ie,re);J.expect("\\end",!1);var ae=J.nextToken,ce=assertNodeType(J.parseFunction(),"environment");if(ce.name!==ee)throw new ParseError("Mismatch: \\begin{"+ee+"} matched by \\end{"+ce.name+"}",ae);return se}return{type:"environment",mode:J.mode,name:ee,nameGroup:Q}}});var htmlBuilder$5=(G,_)=>{var J=G.font,Z=_.withFont(J);return buildGroup$1(G.body,Z)},mathmlBuilder$4=(G,_)=>{var J=G.font,Z=_.withFont(J);return buildGroup(G.body,Z)},fontAliases={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};defineFunction({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(G,_)=>{var{parser:J,funcName:Z}=G,Q=normalizeArgument(_[0]),ee=Z;return ee in fontAliases&&(ee=fontAliases[ee]),{type:"font",mode:J.mode,font:ee.slice(1),body:Q}},htmlBuilder:htmlBuilder$5,mathmlBuilder:mathmlBuilder$4});defineFunction({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(G,_)=>{var{parser:J}=G,Z=_[0],Q=utils.isCharacterBox(Z);return{type:"mclass",mode:J.mode,mclass:binrelClass(Z),body:[{type:"font",mode:J.mode,font:"boldsymbol",body:Z}],isCharacterBox:Q}}});defineFunction({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(G,_)=>{var{parser:J,funcName:Z,breakOnTokenText:Q}=G,{mode:ee}=J,te=J.parseExpression(!0,Q),ne="math"+Z.slice(1);return{type:"font",mode:ee,font:ne,body:{type:"ordgroup",mode:J.mode,body:te}}},htmlBuilder:htmlBuilder$5,mathmlBuilder:mathmlBuilder$4});var adjustStyle=(G,_)=>{var J=_;return G==="display"?J=J.id>=Style$1.SCRIPT.id?J.text():Style$1.DISPLAY:G==="text"&&J.size===Style$1.DISPLAY.size?J=Style$1.TEXT:G==="script"?J=Style$1.SCRIPT:G==="scriptscript"&&(J=Style$1.SCRIPTSCRIPT),J},htmlBuilder$4=(G,_)=>{var J=adjustStyle(G.size,_.style),Z=J.fracNum(),Q=J.fracDen(),ee;ee=_.havingStyle(Z);var te=buildGroup$1(G.numer,ee,_);if(G.continued){var ne=8.5/_.fontMetrics().ptPerEm,ie=3.5/_.fontMetrics().ptPerEm;te.height=te.height<ne?ne:te.height,te.depth=te.depth<ie?ie:te.depth}ee=_.havingStyle(Q);var re=buildGroup$1(G.denom,ee,_),oe,se,ae;G.hasBarLine?(G.barSize?(se=calculateSize(G.barSize,_),oe=buildCommon.makeLineSpan("frac-line",_,se)):oe=buildCommon.makeLineSpan("frac-line",_),se=oe.height,ae=oe.height):(oe=null,se=0,ae=_.fontMetrics().defaultRuleThickness);var ce,ue,de;J.size===Style$1.DISPLAY.size||G.size==="display"?(ce=_.fontMetrics().num1,se>0?ue=3*ae:ue=7*ae,de=_.fontMetrics().denom1):(se>0?(ce=_.fontMetrics().num2,ue=ae):(ce=_.fontMetrics().num3,ue=3*ae),de=_.fontMetrics().denom2);var me;if(oe){var _e=_.fontMetrics().axisHeight;ce-te.depth-(_e+.5*se)<ue&&(ce+=ue-(ce-te.depth-(_e+.5*se))),_e-.5*se-(re.height-de)<ue&&(de+=ue-(_e-.5*se-(re.height-de)));var ye=-(_e-.5*se);me=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:re,shift:de},{type:"elem",elem:oe,shift:ye},{type:"elem",elem:te,shift:-ce}]},_)}else{var fe=ce-te.depth-(re.height-de);fe<ue&&(ce+=.5*(ue-fe),de+=.5*(ue-fe)),me=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:re,shift:de},{type:"elem",elem:te,shift:-ce}]},_)}ee=_.havingStyle(J),me.height*=ee.sizeMultiplier/_.sizeMultiplier,me.depth*=ee.sizeMultiplier/_.sizeMultiplier;var be;J.size===Style$1.DISPLAY.size?be=_.fontMetrics().delim1:J.size===Style$1.SCRIPTSCRIPT.size?be=_.havingStyle(Style$1.SCRIPT).fontMetrics().delim2:be=_.fontMetrics().delim2;var Se,Ce;return G.leftDelim==null?Se=makeNullDelimiter(_,["mopen"]):Se=delimiter.customSizedDelim(G.leftDelim,be,!0,_.havingStyle(J),G.mode,["mopen"]),G.continued?Ce=buildCommon.makeSpan([]):G.rightDelim==null?Ce=makeNullDelimiter(_,["mclose"]):Ce=delimiter.customSizedDelim(G.rightDelim,be,!0,_.havingStyle(J),G.mode,["mclose"]),buildCommon.makeSpan(["mord"].concat(ee.sizingClasses(_)),[Se,buildCommon.makeSpan(["mfrac"],[me]),Ce],_)},mathmlBuilder$3=(G,_)=>{var J=new mathMLTree.MathNode("mfrac",[buildGroup(G.numer,_),buildGroup(G.denom,_)]);if(!G.hasBarLine)J.setAttribute("linethickness","0px");else if(G.barSize){var Z=calculateSize(G.barSize,_);J.setAttribute("linethickness",makeEm(Z))}var Q=adjustStyle(G.size,_.style);if(Q.size!==_.style.size){J=new mathMLTree.MathNode("mstyle",[J]);var ee=Q.size===Style$1.DISPLAY.size?"true":"false";J.setAttribute("displaystyle",ee),J.setAttribute("scriptlevel","0")}if(G.leftDelim!=null||G.rightDelim!=null){var te=[];if(G.leftDelim!=null){var ne=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(G.leftDelim.replace("\\",""))]);ne.setAttribute("fence","true"),te.push(ne)}if(te.push(J),G.rightDelim!=null){var ie=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(G.rightDelim.replace("\\",""))]);ie.setAttribute("fence","true"),te.push(ie)}return makeRow(te)}return J};defineFunction({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(G,_)=>{var{parser:J,funcName:Z}=G,Q=_[0],ee=_[1],te,ne=null,ie=null,re="auto";switch(Z){case"\\dfrac":case"\\frac":case"\\tfrac":te=!0;break;case"\\\\atopfrac":te=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":te=!1,ne="(",ie=")";break;case"\\\\bracefrac":te=!1,ne="\\{",ie="\\}";break;case"\\\\brackfrac":te=!1,ne="[",ie="]";break;default:throw new Error("Unrecognized genfrac command")}switch(Z){case"\\dfrac":case"\\dbinom":re="display";break;case"\\tfrac":case"\\tbinom":re="text";break}return{type:"genfrac",mode:J.mode,continued:!1,numer:Q,denom:ee,hasBarLine:te,leftDelim:ne,rightDelim:ie,size:re,barSize:null}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});defineFunction({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(G,_)=>{var{parser:J,funcName:Z}=G,Q=_[0],ee=_[1];return{type:"genfrac",mode:J.mode,continued:!0,numer:Q,denom:ee,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});defineFunction({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(G){var{parser:_,funcName:J,token:Z}=G,Q;switch(J){case"\\over":Q="\\frac";break;case"\\choose":Q="\\binom";break;case"\\atop":Q="\\\\atopfrac";break;case"\\brace":Q="\\\\bracefrac";break;case"\\brack":Q="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:_.mode,replaceWith:Q,token:Z}}});var stylArray=["display","text","script","scriptscript"],delimFromValue=function(_){var J=null;return _.length>0&&(J=_,J=J==="."?null:J),J};defineFunction({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(G,_){var{parser:J}=G,Z=_[4],Q=_[5],ee=normalizeArgument(_[0]),te=ee.type==="atom"&&ee.family==="open"?delimFromValue(ee.text):null,ne=normalizeArgument(_[1]),ie=ne.type==="atom"&&ne.family==="close"?delimFromValue(ne.text):null,re=assertNodeType(_[2],"size"),oe,se=null;re.isBlank?oe=!0:(se=re.value,oe=se.number>0);var ae="auto",ce=_[3];if(ce.type==="ordgroup"){if(ce.body.length>0){var ue=assertNodeType(ce.body[0],"textord");ae=stylArray[Number(ue.text)]}}else ce=assertNodeType(ce,"textord"),ae=stylArray[Number(ce.text)];return{type:"genfrac",mode:J.mode,numer:Z,denom:Q,continued:!1,hasBarLine:oe,barSize:se,leftDelim:te,rightDelim:ie,size:ae}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});defineFunction({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(G,_){var{parser:J,funcName:Z,token:Q}=G;return{type:"infix",mode:J.mode,replaceWith:"\\\\abovefrac",size:assertNodeType(_[0],"size").value,token:Q}}});defineFunction({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(G,_)=>{var{parser:J,funcName:Z}=G,Q=_[0],ee=assert(assertNodeType(_[1],"infix").size),te=_[2],ne=ee.number>0;return{type:"genfrac",mode:J.mode,numer:Q,denom:te,continued:!1,hasBarLine:ne,barSize:ee,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});var htmlBuilder$3=(G,_)=>{var J=_.style,Z,Q;G.type==="supsub"?(Z=G.sup?buildGroup$1(G.sup,_.havingStyle(J.sup()),_):buildGroup$1(G.sub,_.havingStyle(J.sub()),_),Q=assertNodeType(G.base,"horizBrace")):Q=assertNodeType(G,"horizBrace");var ee=buildGroup$1(Q.base,_.havingBaseStyle(Style$1.DISPLAY)),te=stretchy.svgSpan(Q,_),ne;if(Q.isOver?(ne=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:ee},{type:"kern",size:.1},{type:"elem",elem:te}]},_),ne.children[0].children[0].children[1].classes.push("svg-align")):(ne=buildCommon.makeVList({positionType:"bottom",positionData:ee.depth+.1+te.height,children:[{type:"elem",elem:te},{type:"kern",size:.1},{type:"elem",elem:ee}]},_),ne.children[0].children[0].children[0].classes.push("svg-align")),Z){var ie=buildCommon.makeSpan(["mord",Q.isOver?"mover":"munder"],[ne],_);Q.isOver?ne=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:ie},{type:"kern",size:.2},{type:"elem",elem:Z}]},_):ne=buildCommon.makeVList({positionType:"bottom",positionData:ie.depth+.2+Z.height+Z.depth,children:[{type:"elem",elem:Z},{type:"kern",size:.2},{type:"elem",elem:ie}]},_)}return buildCommon.makeSpan(["mord",Q.isOver?"mover":"munder"],[ne],_)},mathmlBuilder$2=(G,_)=>{var J=stretchy.mathMLnode(G.label);return new mathMLTree.MathNode(G.isOver?"mover":"munder",[buildGroup(G.base,_),J])};defineFunction({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(G,_){var{parser:J,funcName:Z}=G;return{type:"horizBrace",mode:J.mode,label:Z,isOver:/^\\over/.test(Z),base:_[0]}},htmlBuilder:htmlBuilder$3,mathmlBuilder:mathmlBuilder$2});defineFunction({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(G,_)=>{var{parser:J}=G,Z=_[1],Q=assertNodeType(_[0],"url").url;return J.settings.isTrusted({command:"\\href",url:Q})?{type:"href",mode:J.mode,href:Q,body:ordargument(Z)}:J.formatUnsupportedCmd("\\href")},htmlBuilder:(G,_)=>{var J=buildExpression$1(G.body,_,!1);return buildCommon.makeAnchor(G.href,[],J,_)},mathmlBuilder:(G,_)=>{var J=buildExpressionRow(G.body,_);return J instanceof MathNode||(J=new MathNode("mrow",[J])),J.setAttribute("href",G.href),J}});defineFunction({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(G,_)=>{var{parser:J}=G,Z=assertNodeType(_[0],"url").url;if(!J.settings.isTrusted({command:"\\url",url:Z}))return J.formatUnsupportedCmd("\\url");for(var Q=[],ee=0;ee<Z.length;ee++){var te=Z[ee];te==="~"&&(te="\\textasciitilde"),Q.push({type:"textord",mode:"text",text:te})}var ne={type:"text",mode:J.mode,font:"\\texttt",body:Q};return{type:"href",mode:J.mode,href:Z,body:ordargument(ne)}}});defineFunction({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(G,_){var{parser:J}=G;return{type:"hbox",mode:J.mode,body:ordargument(_[0])}},htmlBuilder(G,_){var J=buildExpression$1(G.body,_,!1);return buildCommon.makeFragment(J)},mathmlBuilder(G,_){return new mathMLTree.MathNode("mrow",buildExpression(G.body,_))}});defineFunction({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(G,_)=>{var{parser:J,funcName:Z,token:Q}=G,ee=assertNodeType(_[0],"raw").string,te=_[1];J.settings.strict&&J.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var ne,ie={};switch(Z){case"\\htmlClass":ie.class=ee,ne={command:"\\htmlClass",class:ee};break;case"\\htmlId":ie.id=ee,ne={command:"\\htmlId",id:ee};break;case"\\htmlStyle":ie.style=ee,ne={command:"\\htmlStyle",style:ee};break;case"\\htmlData":{for(var re=ee.split(","),oe=0;oe<re.length;oe++){var se=re[oe].split("=");if(se.length!==2)throw new ParseError("Error parsing key-value for \\htmlData");ie["data-"+se[0].trim()]=se[1].trim()}ne={command:"\\htmlData",attributes:ie};break}default:throw new Error("Unrecognized html command")}return J.settings.isTrusted(ne)?{type:"html",mode:J.mode,attributes:ie,body:ordargument(te)}:J.formatUnsupportedCmd(Z)},htmlBuilder:(G,_)=>{var J=buildExpression$1(G.body,_,!1),Z=["enclosing"];G.attributes.class&&Z.push(...G.attributes.class.trim().split(/\s+/));var Q=buildCommon.makeSpan(Z,J,_);for(var ee in G.attributes)ee!=="class"&&G.attributes.hasOwnProperty(ee)&&Q.setAttribute(ee,G.attributes[ee]);return Q},mathmlBuilder:(G,_)=>buildExpressionRow(G.body,_)});defineFunction({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(G,_)=>{var{parser:J}=G;return{type:"htmlmathml",mode:J.mode,html:ordargument(_[0]),mathml:ordargument(_[1])}},htmlBuilder:(G,_)=>{var J=buildExpression$1(G.html,_,!1);return buildCommon.makeFragment(J)},mathmlBuilder:(G,_)=>buildExpressionRow(G.mathml,_)});var sizeData=function(_){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(_))return{number:+_,unit:"bp"};var J=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(_);if(!J)throw new ParseError("Invalid size: '"+_+"' in \\includegraphics");var Z={number:+(J[1]+J[2]),unit:J[3]};if(!validUnit(Z))throw new ParseError("Invalid unit: '"+Z.unit+"' in \\includegraphics.");return Z};defineFunction({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(G,_,J)=>{var{parser:Z}=G,Q={number:0,unit:"em"},ee={number:.9,unit:"em"},te={number:0,unit:"em"},ne="";if(J[0])for(var ie=assertNodeType(J[0],"raw").string,re=ie.split(","),oe=0;oe<re.length;oe++){var se=re[oe].split("=");if(se.length===2){var ae=se[1].trim();switch(se[0].trim()){case"alt":ne=ae;break;case"width":Q=sizeData(ae);break;case"height":ee=sizeData(ae);break;case"totalheight":te=sizeData(ae);break;default:throw new ParseError("Invalid key: '"+se[0]+"' in \\includegraphics.")}}}var ce=assertNodeType(_[0],"url").url;return ne===""&&(ne=ce,ne=ne.replace(/^.*[\\/]/,""),ne=ne.substring(0,ne.lastIndexOf("."))),Z.settings.isTrusted({command:"\\includegraphics",url:ce})?{type:"includegraphics",mode:Z.mode,alt:ne,width:Q,height:ee,totalheight:te,src:ce}:Z.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(G,_)=>{var J=calculateSize(G.height,_),Z=0;G.totalheight.number>0&&(Z=calculateSize(G.totalheight,_)-J);var Q=0;G.width.number>0&&(Q=calculateSize(G.width,_));var ee={height:makeEm(J+Z)};Q>0&&(ee.width=makeEm(Q)),Z>0&&(ee.verticalAlign=makeEm(-Z));var te=new Img(G.src,G.alt,ee);return te.height=J,te.depth=Z,te},mathmlBuilder:(G,_)=>{var J=new mathMLTree.MathNode("mglyph",[]);J.setAttribute("alt",G.alt);var Z=calculateSize(G.height,_),Q=0;if(G.totalheight.number>0&&(Q=calculateSize(G.totalheight,_)-Z,J.setAttribute("valign",makeEm(-Q))),J.setAttribute("height",makeEm(Z+Q)),G.width.number>0){var ee=calculateSize(G.width,_);J.setAttribute("width",makeEm(ee))}return J.setAttribute("src",G.src),J}});defineFunction({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(G,_){var{parser:J,funcName:Z}=G,Q=assertNodeType(_[0],"size");if(J.settings.strict){var ee=Z[1]==="m",te=Q.value.unit==="mu";ee?(te||J.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+Z+" supports only mu units, "+("not "+Q.value.unit+" units")),J.mode!=="math"&&J.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+Z+" works only in math mode")):te&&J.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+Z+" doesn't support mu units")}return{type:"kern",mode:J.mode,dimension:Q.value}},htmlBuilder(G,_){return buildCommon.makeGlue(G.dimension,_)},mathmlBuilder(G,_){var J=calculateSize(G.dimension,_);return new mathMLTree.SpaceNode(J)}});defineFunction({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(G,_)=>{var{parser:J,funcName:Z}=G,Q=_[0];return{type:"lap",mode:J.mode,alignment:Z.slice(5),body:Q}},htmlBuilder:(G,_)=>{var J;G.alignment==="clap"?(J=buildCommon.makeSpan([],[buildGroup$1(G.body,_)]),J=buildCommon.makeSpan(["inner"],[J],_)):J=buildCommon.makeSpan(["inner"],[buildGroup$1(G.body,_)]);var Z=buildCommon.makeSpan(["fix"],[]),Q=buildCommon.makeSpan([G.alignment],[J,Z],_),ee=buildCommon.makeSpan(["strut"]);return ee.style.height=makeEm(Q.height+Q.depth),Q.depth&&(ee.style.verticalAlign=makeEm(-Q.depth)),Q.children.unshift(ee),Q=buildCommon.makeSpan(["thinbox"],[Q],_),buildCommon.makeSpan(["mord","vbox"],[Q],_)},mathmlBuilder:(G,_)=>{var J=new mathMLTree.MathNode("mpadded",[buildGroup(G.body,_)]);if(G.alignment!=="rlap"){var Z=G.alignment==="llap"?"-1":"-0.5";J.setAttribute("lspace",Z+"width")}return J.setAttribute("width","0px"),J}});defineFunction({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(G,_){var{funcName:J,parser:Z}=G,Q=Z.mode;Z.switchMode("math");var ee=J==="\\("?"\\)":"$",te=Z.parseExpression(!1,ee);return Z.expect(ee),Z.switchMode(Q),{type:"styling",mode:Z.mode,style:"text",body:te}}});defineFunction({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(G,_){throw new ParseError("Mismatched "+G.funcName)}});var chooseMathStyle=(G,_)=>{switch(_.style.size){case Style$1.DISPLAY.size:return G.display;case Style$1.TEXT.size:return G.text;case Style$1.SCRIPT.size:return G.script;case Style$1.SCRIPTSCRIPT.size:return G.scriptscript;default:return G.text}};defineFunction({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(G,_)=>{var{parser:J}=G;return{type:"mathchoice",mode:J.mode,display:ordargument(_[0]),text:ordargument(_[1]),script:ordargument(_[2]),scriptscript:ordargument(_[3])}},htmlBuilder:(G,_)=>{var J=chooseMathStyle(G,_),Z=buildExpression$1(J,_,!1);return buildCommon.makeFragment(Z)},mathmlBuilder:(G,_)=>{var J=chooseMathStyle(G,_);return buildExpressionRow(J,_)}});var assembleSupSub=(G,_,J,Z,Q,ee,te)=>{G=buildCommon.makeSpan([],[G]);var ne=J&&utils.isCharacterBox(J),ie,re;if(_){var oe=buildGroup$1(_,Z.havingStyle(Q.sup()),Z);re={elem:oe,kern:Math.max(Z.fontMetrics().bigOpSpacing1,Z.fontMetrics().bigOpSpacing3-oe.depth)}}if(J){var se=buildGroup$1(J,Z.havingStyle(Q.sub()),Z);ie={elem:se,kern:Math.max(Z.fontMetrics().bigOpSpacing2,Z.fontMetrics().bigOpSpacing4-se.height)}}var ae;if(re&&ie){var ce=Z.fontMetrics().bigOpSpacing5+ie.elem.height+ie.elem.depth+ie.kern+G.depth+te;ae=buildCommon.makeVList({positionType:"bottom",positionData:ce,children:[{type:"kern",size:Z.fontMetrics().bigOpSpacing5},{type:"elem",elem:ie.elem,marginLeft:makeEm(-ee)},{type:"kern",size:ie.kern},{type:"elem",elem:G},{type:"kern",size:re.kern},{type:"elem",elem:re.elem,marginLeft:makeEm(ee)},{type:"kern",size:Z.fontMetrics().bigOpSpacing5}]},Z)}else if(ie){var ue=G.height-te;ae=buildCommon.makeVList({positionType:"top",positionData:ue,children:[{type:"kern",size:Z.fontMetrics().bigOpSpacing5},{type:"elem",elem:ie.elem,marginLeft:makeEm(-ee)},{type:"kern",size:ie.kern},{type:"elem",elem:G}]},Z)}else if(re){var de=G.depth+te;ae=buildCommon.makeVList({positionType:"bottom",positionData:de,children:[{type:"elem",elem:G},{type:"kern",size:re.kern},{type:"elem",elem:re.elem,marginLeft:makeEm(ee)},{type:"kern",size:Z.fontMetrics().bigOpSpacing5}]},Z)}else return G;var me=[ae];if(ie&&ee!==0&&!ne){var fe=buildCommon.makeSpan(["mspace"],[],Z);fe.style.marginRight=makeEm(ee),me.unshift(fe)}return buildCommon.makeSpan(["mop","op-limits"],me,Z)},noSuccessor=["\\smallint"],htmlBuilder$2=(G,_)=>{var J,Z,Q=!1,ee;G.type==="supsub"?(J=G.sup,Z=G.sub,ee=assertNodeType(G.base,"op"),Q=!0):ee=assertNodeType(G,"op");var te=_.style,ne=!1;te.size===Style$1.DISPLAY.size&&ee.symbol&&!noSuccessor.includes(ee.name)&&(ne=!0);var ie;if(ee.symbol){var re=ne?"Size2-Regular":"Size1-Regular",oe="";if((ee.name==="\\oiint"||ee.name==="\\oiiint")&&(oe=ee.name.slice(1),ee.name=oe==="oiint"?"\\iint":"\\iiint"),ie=buildCommon.makeSymbol(ee.name,re,"math",_,["mop","op-symbol",ne?"large-op":"small-op"]),oe.length>0){var se=ie.italic,ae=buildCommon.staticSvg(oe+"Size"+(ne?"2":"1"),_);ie=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:ie,shift:0},{type:"elem",elem:ae,shift:ne?.08:0}]},_),ee.name="\\"+oe,ie.classes.unshift("mop"),ie.italic=se}}else if(ee.body){var ce=buildExpression$1(ee.body,_,!0);ce.length===1&&ce[0]instanceof SymbolNode?(ie=ce[0],ie.classes[0]="mop"):ie=buildCommon.makeSpan(["mop"],ce,_)}else{for(var ue=[],de=1;de<ee.name.length;de++)ue.push(buildCommon.mathsym(ee.name[de],ee.mode,_));ie=buildCommon.makeSpan(["mop"],ue,_)}var me=0,fe=0;return(ie instanceof SymbolNode||ee.name==="\\oiint"||ee.name==="\\oiiint")&&!ee.suppressBaseShift&&(me=(ie.height-ie.depth)/2-_.fontMetrics().axisHeight,fe=ie.italic),Q?assembleSupSub(ie,J,Z,_,te,fe,me):(me&&(ie.style.position="relative",ie.style.top=makeEm(me)),ie)},mathmlBuilder$1=(G,_)=>{var J;if(G.symbol)J=new MathNode("mo",[makeText(G.name,G.mode)]),noSuccessor.includes(G.name)&&J.setAttribute("largeop","false");else if(G.body)J=new MathNode("mo",buildExpression(G.body,_));else{J=new MathNode("mi",[new TextNode(G.name.slice(1))]);var Z=new MathNode("mo",[makeText("","text")]);G.parentIsSupSub?J=new MathNode("mrow",[J,Z]):J=newDocumentFragment([J,Z])}return J},singleCharBigOps={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};defineFunction({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(G,_)=>{var{parser:J,funcName:Z}=G,Q=Z;return Q.length===1&&(Q=singleCharBigOps[Q]),{type:"op",mode:J.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:Q}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(G,_)=>{var{parser:J}=G,Z=_[0];return{type:"op",mode:J.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ordargument(Z)}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});var singleCharIntegrals={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};defineFunction({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(G){var{parser:_,funcName:J}=G;return{type:"op",mode:_.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:J}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(G){var{parser:_,funcName:J}=G;return{type:"op",mode:_.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:J}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(G){var{parser:_,funcName:J}=G,Z=J;return Z.length===1&&(Z=singleCharIntegrals[Z]),{type:"op",mode:_.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:Z}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});var htmlBuilder$1=(G,_)=>{var J,Z,Q=!1,ee;G.type==="supsub"?(J=G.sup,Z=G.sub,ee=assertNodeType(G.base,"operatorname"),Q=!0):ee=assertNodeType(G,"operatorname");var te;if(ee.body.length>0){for(var ne=ee.body.map(se=>{var ae=se.text;return typeof ae=="string"?{type:"textord",mode:se.mode,text:ae}:se}),ie=buildExpression$1(ne,_.withFont("mathrm"),!0),re=0;re<ie.length;re++){var oe=ie[re];oe instanceof SymbolNode&&(oe.text=oe.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}te=buildCommon.makeSpan(["mop"],ie,_)}else te=buildCommon.makeSpan(["mop"],[],_);return Q?assembleSupSub(te,J,Z,_,_.style,0,0):te},mathmlBuilder=(G,_)=>{for(var J=buildExpression(G.body,_.withFont("mathrm")),Z=!0,Q=0;Q<J.length;Q++){var ee=J[Q];if(!(ee instanceof mathMLTree.SpaceNode))if(ee instanceof mathMLTree.MathNode)switch(ee.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var te=ee.children[0];ee.children.length===1&&te instanceof mathMLTree.TextNode?te.text=te.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):Z=!1;break}default:Z=!1}else Z=!1}if(Z){var ne=J.map(oe=>oe.toText()).join("");J=[new mathMLTree.TextNode(ne)]}var ie=new mathMLTree.MathNode("mi",J);ie.setAttribute("mathvariant","normal");var re=new mathMLTree.MathNode("mo",[makeText("","text")]);return G.parentIsSupSub?new mathMLTree.MathNode("mrow",[ie,re]):mathMLTree.newDocumentFragment([ie,re])};defineFunction({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(G,_)=>{var{parser:J,funcName:Z}=G,Q=_[0];return{type:"operatorname",mode:J.mode,body:ordargument(Q),alwaysHandleSupSub:Z==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:htmlBuilder$1,mathmlBuilder});defineMacro("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");defineFunctionBuilders({type:"ordgroup",htmlBuilder(G,_){return G.semisimple?buildCommon.makeFragment(buildExpression$1(G.body,_,!1)):buildCommon.makeSpan(["mord"],buildExpression$1(G.body,_,!0),_)},mathmlBuilder(G,_){return buildExpressionRow(G.body,_,!0)}});defineFunction({type:"overline",names:["\\overline"],props:{numArgs:1},handler(G,_){var{parser:J}=G,Z=_[0];return{type:"overline",mode:J.mode,body:Z}},htmlBuilder(G,_){var J=buildGroup$1(G.body,_.havingCrampedStyle()),Z=buildCommon.makeLineSpan("overline-line",_),Q=_.fontMetrics().defaultRuleThickness,ee=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:J},{type:"kern",size:3*Q},{type:"elem",elem:Z},{type:"kern",size:Q}]},_);return buildCommon.makeSpan(["mord","overline"],[ee],_)},mathmlBuilder(G,_){var J=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode("")]);J.setAttribute("stretchy","true");var Z=new mathMLTree.MathNode("mover",[buildGroup(G.body,_),J]);return Z.setAttribute("accent","true"),Z}});defineFunction({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(G,_)=>{var{parser:J}=G,Z=_[0];return{type:"phantom",mode:J.mode,body:ordargument(Z)}},htmlBuilder:(G,_)=>{var J=buildExpression$1(G.body,_.withPhantom(),!1);return buildCommon.makeFragment(J)},mathmlBuilder:(G,_)=>{var J=buildExpression(G.body,_);return new mathMLTree.MathNode("mphantom",J)}});defineFunction({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(G,_)=>{var{parser:J}=G,Z=_[0];return{type:"hphantom",mode:J.mode,body:Z}},htmlBuilder:(G,_)=>{var J=buildCommon.makeSpan([],[buildGroup$1(G.body,_.withPhantom())]);if(J.height=0,J.depth=0,J.children)for(var Z=0;Z<J.children.length;Z++)J.children[Z].height=0,J.children[Z].depth=0;return J=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:J}]},_),buildCommon.makeSpan(["mord"],[J],_)},mathmlBuilder:(G,_)=>{var J=buildExpression(ordargument(G.body),_),Z=new mathMLTree.MathNode("mphantom",J),Q=new mathMLTree.MathNode("mpadded",[Z]);return Q.setAttribute("height","0px"),Q.setAttribute("depth","0px"),Q}});defineFunction({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(G,_)=>{var{parser:J}=G,Z=_[0];return{type:"vphantom",mode:J.mode,body:Z}},htmlBuilder:(G,_)=>{var J=buildCommon.makeSpan(["inner"],[buildGroup$1(G.body,_.withPhantom())]),Z=buildCommon.makeSpan(["fix"],[]);return buildCommon.makeSpan(["mord","rlap"],[J,Z],_)},mathmlBuilder:(G,_)=>{var J=buildExpression(ordargument(G.body),_),Z=new mathMLTree.MathNode("mphantom",J),Q=new mathMLTree.MathNode("mpadded",[Z]);return Q.setAttribute("width","0px"),Q}});defineFunction({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(G,_){var{parser:J}=G,Z=assertNodeType(_[0],"size").value,Q=_[1];return{type:"raisebox",mode:J.mode,dy:Z,body:Q}},htmlBuilder(G,_){var J=buildGroup$1(G.body,_),Z=calculateSize(G.dy,_);return buildCommon.makeVList({positionType:"shift",positionData:-Z,children:[{type:"elem",elem:J}]},_)},mathmlBuilder(G,_){var J=new mathMLTree.MathNode("mpadded",[buildGroup(G.body,_)]),Z=G.dy.number+G.dy.unit;return J.setAttribute("voffset",Z),J}});defineFunction({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(G){var{parser:_}=G;return{type:"internal",mode:_.mode}}});defineFunction({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(G,_,J){var{parser:Z}=G,Q=J[0],ee=assertNodeType(_[0],"size"),te=assertNodeType(_[1],"size");return{type:"rule",mode:Z.mode,shift:Q&&assertNodeType(Q,"size").value,width:ee.value,height:te.value}},htmlBuilder(G,_){var J=buildCommon.makeSpan(["mord","rule"],[],_),Z=calculateSize(G.width,_),Q=calculateSize(G.height,_),ee=G.shift?calculateSize(G.shift,_):0;return J.style.borderRightWidth=makeEm(Z),J.style.borderTopWidth=makeEm(Q),J.style.bottom=makeEm(ee),J.width=Z,J.height=Q+ee,J.depth=-ee,J.maxFontSize=Q*1.125*_.sizeMultiplier,J},mathmlBuilder(G,_){var J=calculateSize(G.width,_),Z=calculateSize(G.height,_),Q=G.shift?calculateSize(G.shift,_):0,ee=_.color&&_.getColor()||"black",te=new mathMLTree.MathNode("mspace");te.setAttribute("mathbackground",ee),te.setAttribute("width",makeEm(J)),te.setAttribute("height",makeEm(Z));var ne=new mathMLTree.MathNode("mpadded",[te]);return Q>=0?ne.setAttribute("height",makeEm(Q)):(ne.setAttribute("height",makeEm(Q)),ne.setAttribute("depth",makeEm(-Q))),ne.setAttribute("voffset",makeEm(Q)),ne}});function sizingGroup(G,_,J){for(var Z=buildExpression$1(G,_,!1),Q=_.sizeMultiplier/J.sizeMultiplier,ee=0;ee<Z.length;ee++){var te=Z[ee].classes.indexOf("sizing");te<0?Array.prototype.push.apply(Z[ee].classes,_.sizingClasses(J)):Z[ee].classes[te+1]==="reset-size"+_.size&&(Z[ee].classes[te+1]="reset-size"+J.size),Z[ee].height*=Q,Z[ee].depth*=Q}return buildCommon.makeFragment(Z)}var sizeFuncs=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],htmlBuilder=(G,_)=>{var J=_.havingSize(G.size);return sizingGroup(G.body,J,_)};defineFunction({type:"sizing",names:sizeFuncs,props:{numArgs:0,allowedInText:!0},handler:(G,_)=>{var{breakOnTokenText:J,funcName:Z,parser:Q}=G,ee=Q.parseExpression(!1,J);return{type:"sizing",mode:Q.mode,size:sizeFuncs.indexOf(Z)+1,body:ee}},htmlBuilder,mathmlBuilder:(G,_)=>{var J=_.havingSize(G.size),Z=buildExpression(G.body,J),Q=new mathMLTree.MathNode("mstyle",Z);return Q.setAttribute("mathsize",makeEm(J.sizeMultiplier)),Q}});defineFunction({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(G,_,J)=>{var{parser:Z}=G,Q=!1,ee=!1,te=J[0]&&assertNodeType(J[0],"ordgroup");if(te)for(var ne="",ie=0;ie<te.body.length;++ie){var re=te.body[ie];if(ne=re.text,ne==="t")Q=!0;else if(ne==="b")ee=!0;else{Q=!1,ee=!1;break}}else Q=!0,ee=!0;var oe=_[0];return{type:"smash",mode:Z.mode,body:oe,smashHeight:Q,smashDepth:ee}},htmlBuilder:(G,_)=>{var J=buildCommon.makeSpan([],[buildGroup$1(G.body,_)]);if(!G.smashHeight&&!G.smashDepth)return J;if(G.smashHeight&&(J.height=0,J.children))for(var Z=0;Z<J.children.length;Z++)J.children[Z].height=0;if(G.smashDepth&&(J.depth=0,J.children))for(var Q=0;Q<J.children.length;Q++)J.children[Q].depth=0;var ee=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:J}]},_);return buildCommon.makeSpan(["mord"],[ee],_)},mathmlBuilder:(G,_)=>{var J=new mathMLTree.MathNode("mpadded",[buildGroup(G.body,_)]);return G.smashHeight&&J.setAttribute("height","0px"),G.smashDepth&&J.setAttribute("depth","0px"),J}});defineFunction({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(G,_,J){var{parser:Z}=G,Q=J[0],ee=_[0];return{type:"sqrt",mode:Z.mode,body:ee,index:Q}},htmlBuilder(G,_){var J=buildGroup$1(G.body,_.havingCrampedStyle());J.height===0&&(J.height=_.fontMetrics().xHeight),J=buildCommon.wrapFragment(J,_);var Z=_.fontMetrics(),Q=Z.defaultRuleThickness,ee=Q;_.style.id<Style$1.TEXT.id&&(ee=_.fontMetrics().xHeight);var te=Q+ee/4,ne=J.height+J.depth+te+Q,{span:ie,ruleWidth:re,advanceWidth:oe}=delimiter.sqrtImage(ne,_),se=ie.height-re;se>J.height+J.depth+te&&(te=(te+se-J.height-J.depth)/2);var ae=ie.height-J.height-te-re;J.style.paddingLeft=makeEm(oe);var ce=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:J,wrapperClasses:["svg-align"]},{type:"kern",size:-(J.height+ae)},{type:"elem",elem:ie},{type:"kern",size:re}]},_);if(G.index){var ue=_.havingStyle(Style$1.SCRIPTSCRIPT),de=buildGroup$1(G.index,ue,_),me=.6*(ce.height-ce.depth),fe=buildCommon.makeVList({positionType:"shift",positionData:-me,children:[{type:"elem",elem:de}]},_),_e=buildCommon.makeSpan(["root"],[fe]);return buildCommon.makeSpan(["mord","sqrt"],[_e,ce],_)}else return buildCommon.makeSpan(["mord","sqrt"],[ce],_)},mathmlBuilder(G,_){var{body:J,index:Z}=G;return Z?new mathMLTree.MathNode("mroot",[buildGroup(J,_),buildGroup(Z,_)]):new mathMLTree.MathNode("msqrt",[buildGroup(J,_)])}});var styleMap={display:Style$1.DISPLAY,text:Style$1.TEXT,script:Style$1.SCRIPT,scriptscript:Style$1.SCRIPTSCRIPT};defineFunction({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(G,_){var{breakOnTokenText:J,funcName:Z,parser:Q}=G,ee=Q.parseExpression(!0,J),te=Z.slice(1,Z.length-5);return{type:"styling",mode:Q.mode,style:te,body:ee}},htmlBuilder(G,_){var J=styleMap[G.style],Z=_.havingStyle(J).withFont("");return sizingGroup(G.body,Z,_)},mathmlBuilder(G,_){var J=styleMap[G.style],Z=_.havingStyle(J),Q=buildExpression(G.body,Z),ee=new mathMLTree.MathNode("mstyle",Q),te={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},ne=te[G.style];return ee.setAttribute("scriptlevel",ne[0]),ee.setAttribute("displaystyle",ne[1]),ee}});var htmlBuilderDelegate=function(_,J){var Z=_.base;if(Z)if(Z.type==="op"){var Q=Z.limits&&(J.style.size===Style$1.DISPLAY.size||Z.alwaysHandleSupSub);return Q?htmlBuilder$2:null}else if(Z.type==="operatorname"){var ee=Z.alwaysHandleSupSub&&(J.style.size===Style$1.DISPLAY.size||Z.limits);return ee?htmlBuilder$1:null}else{if(Z.type==="accent")return utils.isCharacterBox(Z.base)?htmlBuilder$a:null;if(Z.type==="horizBrace"){var te=!_.sub;return te===Z.isOver?htmlBuilder$3:null}else return null}else return null};defineFunctionBuilders({type:"supsub",htmlBuilder(G,_){var J=htmlBuilderDelegate(G,_);if(J)return J(G,_);var{base:Z,sup:Q,sub:ee}=G,te=buildGroup$1(Z,_),ne,ie,re=_.fontMetrics(),oe=0,se=0,ae=Z&&utils.isCharacterBox(Z);if(Q){var ce=_.havingStyle(_.style.sup());ne=buildGroup$1(Q,ce,_),ae||(oe=te.height-ce.fontMetrics().supDrop*ce.sizeMultiplier/_.sizeMultiplier)}if(ee){var ue=_.havingStyle(_.style.sub());ie=buildGroup$1(ee,ue,_),ae||(se=te.depth+ue.fontMetrics().subDrop*ue.sizeMultiplier/_.sizeMultiplier)}var de;_.style===Style$1.DISPLAY?de=re.sup1:_.style.cramped?de=re.sup3:de=re.sup2;var me=_.sizeMultiplier,fe=makeEm(.5/re.ptPerEm/me),_e=null;if(ie){var ye=G.base&&G.base.type==="op"&&G.base.name&&(G.base.name==="\\oiint"||G.base.name==="\\oiiint");(te instanceof SymbolNode||ye)&&(_e=makeEm(-te.italic))}var be;if(ne&&ie){oe=Math.max(oe,de,ne.depth+.25*re.xHeight),se=Math.max(se,re.sub2);var Se=re.defaultRuleThickness,Ce=4*Se;if(oe-ne.depth-(ie.height-se)<Ce){se=Ce-(oe-ne.depth)+ie.height;var Me=.8*re.xHeight-(oe-ne.depth);Me>0&&(oe+=Me,se-=Me)}var Re=[{type:"elem",elem:ie,shift:se,marginRight:fe,marginLeft:_e},{type:"elem",elem:ne,shift:-oe,marginRight:fe}];be=buildCommon.makeVList({positionType:"individualShift",children:Re},_)}else if(ie){se=Math.max(se,re.sub1,ie.height-.8*re.xHeight);var Te=[{type:"elem",elem:ie,marginLeft:_e,marginRight:fe}];be=buildCommon.makeVList({positionType:"shift",positionData:se,children:Te},_)}else if(ne)oe=Math.max(oe,de,ne.depth+.25*re.xHeight),be=buildCommon.makeVList({positionType:"shift",positionData:-oe,children:[{type:"elem",elem:ne,marginRight:fe}]},_);else throw new Error("supsub must have either sup or sub.");var Ee=getTypeOfDomTree(te,"right")||"mord";return buildCommon.makeSpan([Ee],[te,buildCommon.makeSpan(["msupsub"],[be])],_)},mathmlBuilder(G,_){var J=!1,Z,Q;G.base&&G.base.type==="horizBrace"&&(Q=!!G.sup,Q===G.base.isOver&&(J=!0,Z=G.base.isOver)),G.base&&(G.base.type==="op"||G.base.type==="operatorname")&&(G.base.parentIsSupSub=!0);var ee=[buildGroup(G.base,_)];G.sub&&ee.push(buildGroup(G.sub,_)),G.sup&&ee.push(buildGroup(G.sup,_));var te;if(J)te=Z?"mover":"munder";else if(G.sub)if(G.sup){var re=G.base;re&&re.type==="op"&&re.limits&&_.style===Style$1.DISPLAY||re&&re.type==="operatorname"&&re.alwaysHandleSupSub&&(_.style===Style$1.DISPLAY||re.limits)?te="munderover":te="msubsup"}else{var ie=G.base;ie&&ie.type==="op"&&ie.limits&&(_.style===Style$1.DISPLAY||ie.alwaysHandleSupSub)||ie&&ie.type==="operatorname"&&ie.alwaysHandleSupSub&&(ie.limits||_.style===Style$1.DISPLAY)?te="munder":te="msub"}else{var ne=G.base;ne&&ne.type==="op"&&ne.limits&&(_.style===Style$1.DISPLAY||ne.alwaysHandleSupSub)||ne&&ne.type==="operatorname"&&ne.alwaysHandleSupSub&&(ne.limits||_.style===Style$1.DISPLAY)?te="mover":te="msup"}return new mathMLTree.MathNode(te,ee)}});defineFunctionBuilders({type:"atom",htmlBuilder(G,_){return buildCommon.mathsym(G.text,G.mode,_,["m"+G.family])},mathmlBuilder(G,_){var J=new mathMLTree.MathNode("mo",[makeText(G.text,G.mode)]);if(G.family==="bin"){var Z=getVariant(G,_);Z==="bold-italic"&&J.setAttribute("mathvariant",Z)}else G.family==="punct"?J.setAttribute("separator","true"):(G.family==="open"||G.family==="close")&&J.setAttribute("stretchy","false");return J}});var defaultVariant={mi:"italic",mn:"normal",mtext:"normal"};defineFunctionBuilders({type:"mathord",htmlBuilder(G,_){return buildCommon.makeOrd(G,_,"mathord")},mathmlBuilder(G,_){var J=new mathMLTree.MathNode("mi",[makeText(G.text,G.mode,_)]),Z=getVariant(G,_)||"italic";return Z!==defaultVariant[J.type]&&J.setAttribute("mathvariant",Z),J}});defineFunctionBuilders({type:"textord",htmlBuilder(G,_){return buildCommon.makeOrd(G,_,"textord")},mathmlBuilder(G,_){var J=makeText(G.text,G.mode,_),Z=getVariant(G,_)||"normal",Q;return G.mode==="text"?Q=new mathMLTree.MathNode("mtext",[J]):/[0-9]/.test(G.text)?Q=new mathMLTree.MathNode("mn",[J]):G.text==="\\prime"?Q=new mathMLTree.MathNode("mo",[J]):Q=new mathMLTree.MathNode("mi",[J]),Z!==defaultVariant[Q.type]&&Q.setAttribute("mathvariant",Z),Q}});var cssSpace={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},regularSpace={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};defineFunctionBuilders({type:"spacing",htmlBuilder(G,_){if(regularSpace.hasOwnProperty(G.text)){var J=regularSpace[G.text].className||"";if(G.mode==="text"){var Z=buildCommon.makeOrd(G,_,"textord");return Z.classes.push(J),Z}else return buildCommon.makeSpan(["mspace",J],[buildCommon.mathsym(G.text,G.mode,_)],_)}else{if(cssSpace.hasOwnProperty(G.text))return buildCommon.makeSpan(["mspace",cssSpace[G.text]],[],_);throw new ParseError('Unknown type of space "'+G.text+'"')}},mathmlBuilder(G,_){var J;if(regularSpace.hasOwnProperty(G.text))J=new mathMLTree.MathNode("mtext",[new mathMLTree.TextNode("")]);else{if(cssSpace.hasOwnProperty(G.text))return new mathMLTree.MathNode("mspace");throw new ParseError('Unknown type of space "'+G.text+'"')}return J}});var pad=()=>{var G=new mathMLTree.MathNode("mtd",[]);return G.setAttribute("width","50%"),G};defineFunctionBuilders({type:"tag",mathmlBuilder(G,_){var J=new mathMLTree.MathNode("mtable",[new mathMLTree.MathNode("mtr",[pad(),new mathMLTree.MathNode("mtd",[buildExpressionRow(G.body,_)]),pad(),new mathMLTree.MathNode("mtd",[buildExpressionRow(G.tag,_)])])]);return J.setAttribute("width","100%"),J}});var textFontFamilies={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},textFontWeights={"\\textbf":"textbf","\\textmd":"textmd"},textFontShapes={"\\textit":"textit","\\textup":"textup"},optionsWithFont=(G,_)=>{var J=G.font;if(J){if(textFontFamilies[J])return _.withTextFontFamily(textFontFamilies[J]);if(textFontWeights[J])return _.withTextFontWeight(textFontWeights[J]);if(J==="\\emph")return _.fontShape==="textit"?_.withTextFontShape("textup"):_.withTextFontShape("textit")}else return _;return _.withTextFontShape(textFontShapes[J])};defineFunction({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(G,_){var{parser:J,funcName:Z}=G,Q=_[0];return{type:"text",mode:J.mode,body:ordargument(Q),font:Z}},htmlBuilder(G,_){var J=optionsWithFont(G,_),Z=buildExpression$1(G.body,J,!0);return buildCommon.makeSpan(["mord","text"],Z,J)},mathmlBuilder(G,_){var J=optionsWithFont(G,_);return buildExpressionRow(G.body,J)}});defineFunction({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(G,_){var{parser:J}=G;return{type:"underline",mode:J.mode,body:_[0]}},htmlBuilder(G,_){var J=buildGroup$1(G.body,_),Z=buildCommon.makeLineSpan("underline-line",_),Q=_.fontMetrics().defaultRuleThickness,ee=buildCommon.makeVList({positionType:"top",positionData:J.height,children:[{type:"kern",size:Q},{type:"elem",elem:Z},{type:"kern",size:3*Q},{type:"elem",elem:J}]},_);return buildCommon.makeSpan(["mord","underline"],[ee],_)},mathmlBuilder(G,_){var J=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode("")]);J.setAttribute("stretchy","true");var Z=new mathMLTree.MathNode("munder",[buildGroup(G.body,_),J]);return Z.setAttribute("accentunder","true"),Z}});defineFunction({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(G,_){var{parser:J}=G;return{type:"vcenter",mode:J.mode,body:_[0]}},htmlBuilder(G,_){var J=buildGroup$1(G.body,_),Z=_.fontMetrics().axisHeight,Q=.5*(J.height-Z-(J.depth+Z));return buildCommon.makeVList({positionType:"shift",positionData:Q,children:[{type:"elem",elem:J}]},_)},mathmlBuilder(G,_){return new mathMLTree.MathNode("mpadded",[buildGroup(G.body,_)],["vcenter"])}});defineFunction({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(G,_,J){throw new ParseError("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(G,_){for(var J=makeVerb(G),Z=[],Q=_.havingStyle(_.style.text()),ee=0;ee<J.length;ee++){var te=J[ee];te==="~"&&(te="\\textasciitilde"),Z.push(buildCommon.makeSymbol(te,"Typewriter-Regular",G.mode,Q,["mord","texttt"]))}return buildCommon.makeSpan(["mord","text"].concat(Q.sizingClasses(_)),buildCommon.tryCombineChars(Z),Q)},mathmlBuilder(G,_){var J=new mathMLTree.TextNode(makeVerb(G)),Z=new mathMLTree.MathNode("mtext",[J]);return Z.setAttribute("mathvariant","monospace"),Z}});var makeVerb=G=>G.body.replace(/ /g,G.star?"":""),functions=_functions;defineMacro("\\noexpand",function(G){var _=G.popToken();return G.isExpandable(_.text)&&(_.noexpand=!0,_.treatAsRelax=!0),{tokens:[_],numArgs:0}});defineMacro("\\expandafter",function(G){var _=G.popToken();return G.expandOnce(!0),{tokens:[_],numArgs:0}});defineMacro("\\@firstoftwo",function(G){var _=G.consumeArgs(2);return{tokens:_[0],numArgs:0}});defineMacro("\\@secondoftwo",function(G){var _=G.consumeArgs(2);return{tokens:_[1],numArgs:0}});defineMacro("\\@ifnextchar",function(G){var _=G.consumeArgs(3);G.consumeSpaces();var J=G.future();return _[0].length===1&&_[0][0].text===J.text?{tokens:_[1],numArgs:0}:{tokens:_[2],numArgs:0}});defineMacro("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");defineMacro("\\TextOrMath",function(G){var _=G.consumeArgs(2);return G.mode==="text"?{tokens:_[0],numArgs:0}:{tokens:_[1],numArgs:0}});var digitToNumber={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};defineMacro("\\char",function(G){var _=G.popToken(),J,Z="";if(_.text==="'")J=8,_=G.popToken();else if(_.text==='"')J=16,_=G.popToken();else if(_.text==="`")if(_=G.popToken(),_.text[0]==="\\")Z=_.text.charCodeAt(1);else{if(_.text==="EOF")throw new ParseError("\\char` missing argument");Z=_.text.charCodeAt(0)}else J=10;if(J){if(Z=digitToNumber[_.text],Z==null||Z>=J)throw new ParseError("Invalid base-"+J+" digit "+_.text);for(var Q;(Q=digitToNumber[G.future().text])!=null&&Q<J;)Z*=J,Z+=Q,G.popToken()}return"\\@char{"+Z+"}"});var newcommand=(G,_,J,Z)=>{var Q=G.consumeArg().tokens;if(Q.length!==1)throw new ParseError("\\newcommand's first argument must be a macro name");var ee=Q[0].text,te=G.isDefined(ee);if(te&&!_)throw new ParseError("\\newcommand{"+ee+"} attempting to redefine "+(ee+"; use \\renewcommand"));if(!te&&!J)throw new ParseError("\\renewcommand{"+ee+"} when command "+ee+" does not yet exist; use \\newcommand");var ne=0;if(Q=G.consumeArg().tokens,Q.length===1&&Q[0].text==="["){for(var ie="",re=G.expandNextToken();re.text!=="]"&&re.text!=="EOF";)ie+=re.text,re=G.expandNextToken();if(!ie.match(/^\s*[0-9]+\s*$/))throw new ParseError("Invalid number of arguments: "+ie);ne=parseInt(ie),Q=G.consumeArg().tokens}return te&&Z||G.macros.set(ee,{tokens:Q,numArgs:ne}),""};defineMacro("\\newcommand",G=>newcommand(G,!1,!0,!1));defineMacro("\\renewcommand",G=>newcommand(G,!0,!1,!1));defineMacro("\\providecommand",G=>newcommand(G,!0,!0,!0));defineMacro("\\message",G=>{var _=G.consumeArgs(1)[0];return console.log(_.reverse().map(J=>J.text).join("")),""});defineMacro("\\errmessage",G=>{var _=G.consumeArgs(1)[0];return console.error(_.reverse().map(J=>J.text).join("")),""});defineMacro("\\show",G=>{var _=G.popToken(),J=_.text;return console.log(_,G.macros.get(J),functions[J],symbols.math[J],symbols.text[J]),""});defineMacro("\\bgroup","{");defineMacro("\\egroup","}");defineMacro("~","\\nobreakspace");defineMacro("\\lq","`");defineMacro("\\rq","'");defineMacro("\\aa","\\r a");defineMacro("\\AA","\\r A");defineMacro("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");defineMacro("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");defineMacro("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");defineMacro("","\\mathscr{B}");defineMacro("","\\mathscr{E}");defineMacro("","\\mathscr{F}");defineMacro("","\\mathscr{H}");defineMacro("","\\mathscr{I}");defineMacro("","\\mathscr{L}");defineMacro("","\\mathscr{M}");defineMacro("","\\mathscr{R}");defineMacro("","\\mathfrak{C}");defineMacro("","\\mathfrak{H}");defineMacro("","\\mathfrak{Z}");defineMacro("\\Bbbk","\\Bbb{k}");defineMacro("","\\cdotp");defineMacro("\\llap","\\mathllap{\\textrm{#1}}");defineMacro("\\rlap","\\mathrlap{\\textrm{#1}}");defineMacro("\\clap","\\mathclap{\\textrm{#1}}");defineMacro("\\mathstrut","\\vphantom{(}");defineMacro("\\underbar","\\underline{\\text{#1}}");defineMacro("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');defineMacro("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");defineMacro("\\ne","\\neq");defineMacro("","\\neq");defineMacro("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");defineMacro("","\\notin");defineMacro("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");defineMacro("","\\perp");defineMacro("","\\mathclose{!\\mkern-0.8mu!}");defineMacro("","\\notni");defineMacro("","\\ulcorner");defineMacro("","\\urcorner");defineMacro("","\\llcorner");defineMacro("","\\lrcorner");defineMacro("","\\copyright");defineMacro("","\\textregistered");defineMacro("","\\textregistered");defineMacro("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');defineMacro("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');defineMacro("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');defineMacro("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');defineMacro("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");defineMacro("","\\vdots");defineMacro("\\varGamma","\\mathit{\\Gamma}");defineMacro("\\varDelta","\\mathit{\\Delta}");defineMacro("\\varTheta","\\mathit{\\Theta}");defineMacro("\\varLambda","\\mathit{\\Lambda}");defineMacro("\\varXi","\\mathit{\\Xi}");defineMacro("\\varPi","\\mathit{\\Pi}");defineMacro("\\varSigma","\\mathit{\\Sigma}");defineMacro("\\varUpsilon","\\mathit{\\Upsilon}");defineMacro("\\varPhi","\\mathit{\\Phi}");defineMacro("\\varPsi","\\mathit{\\Psi}");defineMacro("\\varOmega","\\mathit{\\Omega}");defineMacro("\\substack","\\begin{subarray}{c}#1\\end{subarray}");defineMacro("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");defineMacro("\\boxed","\\fbox{$\\displaystyle{#1}$}");defineMacro("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");defineMacro("\\implies","\\DOTSB\\;\\Longrightarrow\\;");defineMacro("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");defineMacro("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");defineMacro("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var dotsByToken={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};defineMacro("\\dots",function(G){var _="\\dotso",J=G.expandAfterFuture().text;return J in dotsByToken?_=dotsByToken[J]:(J.slice(0,4)==="\\not"||J in symbols.math&&["bin","rel"].includes(symbols.math[J].group))&&(_="\\dotsb"),_});var spaceAfterDots={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};defineMacro("\\dotso",function(G){var _=G.future().text;return _ in spaceAfterDots?"\\ldots\\,":"\\ldots"});defineMacro("\\dotsc",function(G){var _=G.future().text;return _ in spaceAfterDots&&_!==","?"\\ldots\\,":"\\ldots"});defineMacro("\\cdots",function(G){var _=G.future().text;return _ in spaceAfterDots?"\\@cdots\\,":"\\@cdots"});defineMacro("\\dotsb","\\cdots");defineMacro("\\dotsm","\\cdots");defineMacro("\\dotsi","\\!\\cdots");defineMacro("\\dotsx","\\ldots\\,");defineMacro("\\DOTSI","\\relax");defineMacro("\\DOTSB","\\relax");defineMacro("\\DOTSX","\\relax");defineMacro("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");defineMacro("\\,","\\tmspace+{3mu}{.1667em}");defineMacro("\\thinspace","\\,");defineMacro("\\>","\\mskip{4mu}");defineMacro("\\:","\\tmspace+{4mu}{.2222em}");defineMacro("\\medspace","\\:");defineMacro("\\;","\\tmspace+{5mu}{.2777em}");defineMacro("\\thickspace","\\;");defineMacro("\\!","\\tmspace-{3mu}{.1667em}");defineMacro("\\negthinspace","\\!");defineMacro("\\negmedspace","\\tmspace-{4mu}{.2222em}");defineMacro("\\negthickspace","\\tmspace-{5mu}{.277em}");defineMacro("\\enspace","\\kern.5em ");defineMacro("\\enskip","\\hskip.5em\\relax");defineMacro("\\quad","\\hskip1em\\relax");defineMacro("\\qquad","\\hskip2em\\relax");defineMacro("\\tag","\\@ifstar\\tag@literal\\tag@paren");defineMacro("\\tag@paren","\\tag@literal{({#1})}");defineMacro("\\tag@literal",G=>{if(G.macros.get("\\df@tag"))throw new ParseError("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});defineMacro("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");defineMacro("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");defineMacro("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");defineMacro("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");defineMacro("\\newline","\\\\\\relax");defineMacro("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var latexRaiseA=makeEm(fontMetricsData["Main-Regular"][84][1]-.7*fontMetricsData["Main-Regular"][65][1]);defineMacro("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+latexRaiseA+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");defineMacro("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+latexRaiseA+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");defineMacro("\\hspace","\\@ifstar\\@hspacer\\@hspace");defineMacro("\\@hspace","\\hskip #1\\relax");defineMacro("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");defineMacro("\\ordinarycolon",":");defineMacro("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");defineMacro("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');defineMacro("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');defineMacro("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');defineMacro("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');defineMacro("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');defineMacro("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');defineMacro("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');defineMacro("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');defineMacro("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');defineMacro("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');defineMacro("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');defineMacro("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');defineMacro("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');defineMacro("","\\dblcolon");defineMacro("","\\eqcolon");defineMacro("","\\coloneqq");defineMacro("","\\eqqcolon");defineMacro("","\\Coloneqq");defineMacro("\\ratio","\\vcentcolon");defineMacro("\\coloncolon","\\dblcolon");defineMacro("\\colonequals","\\coloneqq");defineMacro("\\coloncolonequals","\\Coloneqq");defineMacro("\\equalscolon","\\eqqcolon");defineMacro("\\equalscoloncolon","\\Eqqcolon");defineMacro("\\colonminus","\\coloneq");defineMacro("\\coloncolonminus","\\Coloneq");defineMacro("\\minuscolon","\\eqcolon");defineMacro("\\minuscoloncolon","\\Eqcolon");defineMacro("\\coloncolonapprox","\\Colonapprox");defineMacro("\\coloncolonsim","\\Colonsim");defineMacro("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");defineMacro("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");defineMacro("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");defineMacro("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");defineMacro("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");defineMacro("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");defineMacro("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");defineMacro("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");defineMacro("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");defineMacro("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");defineMacro("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");defineMacro("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");defineMacro("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");defineMacro("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");defineMacro("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");defineMacro("\\ngeqq","\\html@mathml{\\@ngeqq}{}");defineMacro("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");defineMacro("\\nleqq","\\html@mathml{\\@nleqq}{}");defineMacro("\\nleqslant","\\html@mathml{\\@nleqslant}{}");defineMacro("\\nshortmid","\\html@mathml{\\@nshortmid}{}");defineMacro("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");defineMacro("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");defineMacro("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");defineMacro("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");defineMacro("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");defineMacro("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");defineMacro("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");defineMacro("\\imath","\\html@mathml{\\@imath}{}");defineMacro("\\jmath","\\html@mathml{\\@jmath}{}");defineMacro("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");defineMacro("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");defineMacro("","\\llbracket");defineMacro("","\\rrbracket");defineMacro("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");defineMacro("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");defineMacro("","\\lBrace");defineMacro("","\\rBrace");defineMacro("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");defineMacro("","\\minuso");defineMacro("\\darr","\\downarrow");defineMacro("\\dArr","\\Downarrow");defineMacro("\\Darr","\\Downarrow");defineMacro("\\lang","\\langle");defineMacro("\\rang","\\rangle");defineMacro("\\uarr","\\uparrow");defineMacro("\\uArr","\\Uparrow");defineMacro("\\Uarr","\\Uparrow");defineMacro("\\N","\\mathbb{N}");defineMacro("\\R","\\mathbb{R}");defineMacro("\\Z","\\mathbb{Z}");defineMacro("\\alef","\\aleph");defineMacro("\\alefsym","\\aleph");defineMacro("\\Alpha","\\mathrm{A}");defineMacro("\\Beta","\\mathrm{B}");defineMacro("\\bull","\\bullet");defineMacro("\\Chi","\\mathrm{X}");defineMacro("\\clubs","\\clubsuit");defineMacro("\\cnums","\\mathbb{C}");defineMacro("\\Complex","\\mathbb{C}");defineMacro("\\Dagger","\\ddagger");defineMacro("\\diamonds","\\diamondsuit");defineMacro("\\empty","\\emptyset");defineMacro("\\Epsilon","\\mathrm{E}");defineMacro("\\Eta","\\mathrm{H}");defineMacro("\\exist","\\exists");defineMacro("\\harr","\\leftrightarrow");defineMacro("\\hArr","\\Leftrightarrow");defineMacro("\\Harr","\\Leftrightarrow");defineMacro("\\hearts","\\heartsuit");defineMacro("\\image","\\Im");defineMacro("\\infin","\\infty");defineMacro("\\Iota","\\mathrm{I}");defineMacro("\\isin","\\in");defineMacro("\\Kappa","\\mathrm{K}");defineMacro("\\larr","\\leftarrow");defineMacro("\\lArr","\\Leftarrow");defineMacro("\\Larr","\\Leftarrow");defineMacro("\\lrarr","\\leftrightarrow");defineMacro("\\lrArr","\\Leftrightarrow");defineMacro("\\Lrarr","\\Leftrightarrow");defineMacro("\\Mu","\\mathrm{M}");defineMacro("\\natnums","\\mathbb{N}");defineMacro("\\Nu","\\mathrm{N}");defineMacro("\\Omicron","\\mathrm{O}");defineMacro("\\plusmn","\\pm");defineMacro("\\rarr","\\rightarrow");defineMacro("\\rArr","\\Rightarrow");defineMacro("\\Rarr","\\Rightarrow");defineMacro("\\real","\\Re");defineMacro("\\reals","\\mathbb{R}");defineMacro("\\Reals","\\mathbb{R}");defineMacro("\\Rho","\\mathrm{P}");defineMacro("\\sdot","\\cdot");defineMacro("\\sect","\\S");defineMacro("\\spades","\\spadesuit");defineMacro("\\sub","\\subset");defineMacro("\\sube","\\subseteq");defineMacro("\\supe","\\supseteq");defineMacro("\\Tau","\\mathrm{T}");defineMacro("\\thetasym","\\vartheta");defineMacro("\\weierp","\\wp");defineMacro("\\Zeta","\\mathrm{Z}");defineMacro("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");defineMacro("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");defineMacro("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");defineMacro("\\bra","\\mathinner{\\langle{#1}|}");defineMacro("\\ket","\\mathinner{|{#1}\\rangle}");defineMacro("\\braket","\\mathinner{\\langle{#1}\\rangle}");defineMacro("\\Bra","\\left\\langle#1\\right|");defineMacro("\\Ket","\\left|#1\\right\\rangle");var braketHelper=G=>_=>{var J=_.consumeArg().tokens,Z=_.consumeArg().tokens,Q=_.consumeArg().tokens,ee=_.consumeArg().tokens,te=_.macros.get("|"),ne=_.macros.get("\\|");_.macros.beginGroup();var ie=se=>ae=>{G&&(ae.macros.set("|",te),Q.length&&ae.macros.set("\\|",ne));var ce=se;if(!se&&Q.length){var ue=ae.future();ue.text==="|"&&(ae.popToken(),ce=!0)}return{tokens:ce?Q:Z,numArgs:0}};_.macros.set("|",ie(!1)),Q.length&&_.macros.set("\\|",ie(!0));var re=_.consumeArg().tokens,oe=_.expandTokens([...ee,...re,...J]);return _.macros.endGroup(),{tokens:oe.reverse(),numArgs:0}};defineMacro("\\bra@ket",braketHelper(!1));defineMacro("\\bra@set",braketHelper(!0));defineMacro("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");defineMacro("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");defineMacro("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");defineMacro("\\angln","{\\angl n}");defineMacro("\\blue","\\textcolor{##6495ed}{#1}");defineMacro("\\orange","\\textcolor{##ffa500}{#1}");defineMacro("\\pink","\\textcolor{##ff00af}{#1}");defineMacro("\\red","\\textcolor{##df0030}{#1}");defineMacro("\\green","\\textcolor{##28ae7b}{#1}");defineMacro("\\gray","\\textcolor{gray}{#1}");defineMacro("\\purple","\\textcolor{##9d38bd}{#1}");defineMacro("\\blueA","\\textcolor{##ccfaff}{#1}");defineMacro("\\blueB","\\textcolor{##80f6ff}{#1}");defineMacro("\\blueC","\\textcolor{##63d9ea}{#1}");defineMacro("\\blueD","\\textcolor{##11accd}{#1}");defineMacro("\\blueE","\\textcolor{##0c7f99}{#1}");defineMacro("\\tealA","\\textcolor{##94fff5}{#1}");defineMacro("\\tealB","\\textcolor{##26edd5}{#1}");defineMacro("\\tealC","\\textcolor{##01d1c1}{#1}");defineMacro("\\tealD","\\textcolor{##01a995}{#1}");defineMacro("\\tealE","\\textcolor{##208170}{#1}");defineMacro("\\greenA","\\textcolor{##b6ffb0}{#1}");defineMacro("\\greenB","\\textcolor{##8af281}{#1}");defineMacro("\\greenC","\\textcolor{##74cf70}{#1}");defineMacro("\\greenD","\\textcolor{##1fab54}{#1}");defineMacro("\\greenE","\\textcolor{##0d923f}{#1}");defineMacro("\\goldA","\\textcolor{##ffd0a9}{#1}");defineMacro("\\goldB","\\textcolor{##ffbb71}{#1}");defineMacro("\\goldC","\\textcolor{##ff9c39}{#1}");defineMacro("\\goldD","\\textcolor{##e07d10}{#1}");defineMacro("\\goldE","\\textcolor{##a75a05}{#1}");defineMacro("\\redA","\\textcolor{##fca9a9}{#1}");defineMacro("\\redB","\\textcolor{##ff8482}{#1}");defineMacro("\\redC","\\textcolor{##f9685d}{#1}");defineMacro("\\redD","\\textcolor{##e84d39}{#1}");defineMacro("\\redE","\\textcolor{##bc2612}{#1}");defineMacro("\\maroonA","\\textcolor{##ffbde0}{#1}");defineMacro("\\maroonB","\\textcolor{##ff92c6}{#1}");defineMacro("\\maroonC","\\textcolor{##ed5fa6}{#1}");defineMacro("\\maroonD","\\textcolor{##ca337c}{#1}");defineMacro("\\maroonE","\\textcolor{##9e034e}{#1}");defineMacro("\\purpleA","\\textcolor{##ddd7ff}{#1}");defineMacro("\\purpleB","\\textcolor{##c6b9fc}{#1}");defineMacro("\\purpleC","\\textcolor{##aa87ff}{#1}");defineMacro("\\purpleD","\\textcolor{##7854ab}{#1}");defineMacro("\\purpleE","\\textcolor{##543b78}{#1}");defineMacro("\\mintA","\\textcolor{##f5f9e8}{#1}");defineMacro("\\mintB","\\textcolor{##edf2df}{#1}");defineMacro("\\mintC","\\textcolor{##e0e5cc}{#1}");defineMacro("\\grayA","\\textcolor{##f6f7f7}{#1}");defineMacro("\\grayB","\\textcolor{##f0f1f2}{#1}");defineMacro("\\grayC","\\textcolor{##e3e5e6}{#1}");defineMacro("\\grayD","\\textcolor{##d6d8da}{#1}");defineMacro("\\grayE","\\textcolor{##babec2}{#1}");defineMacro("\\grayF","\\textcolor{##888d93}{#1}");defineMacro("\\grayG","\\textcolor{##626569}{#1}");defineMacro("\\grayH","\\textcolor{##3b3e40}{#1}");defineMacro("\\grayI","\\textcolor{##21242c}{#1}");defineMacro("\\kaBlue","\\textcolor{##314453}{#1}");defineMacro("\\kaGreen","\\textcolor{##71B307}{#1}");typeof document<"u"&&document.compatMode!=="CSS1Compat"&&typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype.");const e=(G,_)=>{for(let J in _)G[J]=_[J];return G},t=(G,_)=>Array.from(G.querySelectorAll(_)),i$3=(G,_,J)=>{J?G.classList.add(_):G.classList.remove(_)},s=G=>{if(typeof G=="string"){if(G==="null")return null;if(G==="true")return!0;if(G==="false")return!1;if(G.match(/^-?[\d\.]+$/))return parseFloat(G)}return G},a$1=(G,_)=>{G.style.transform=_},n=(G,_)=>{let J=G.matches||G.matchesSelector||G.msMatchesSelector;return!(!J||!J.call(G,_))},r=(G,_)=>{if(typeof G.closest=="function")return G.closest(_);for(;G;){if(n(G,_))return G;G=G.parentNode}return null},o=G=>{let _=(G=G||document.documentElement).requestFullscreen||G.webkitRequestFullscreen||G.webkitRequestFullScreen||G.mozRequestFullScreen||G.msRequestFullscreen;_&&_.apply(G)},l$1=G=>{let _=document.createElement("style");return _.type="text/css",G&&G.length>0&&(_.styleSheet?_.styleSheet.cssText=G:_.appendChild(document.createTextNode(G))),document.head.appendChild(_),_},d=()=>{let G={};location.search.replace(/[A-Z0-9]+?=([\w\.%-]*)/gi,(_=>{G[_.split("=").shift()]=_.split("=").pop()}));for(let _ in G){let J=G[_];G[_]=s(unescape(J))}return G.dependencies!==void 0&&delete G.dependencies,G},c$1={mp4:"video/mp4",m4a:"video/mp4",ogv:"video/ogg",mpeg:"video/mpeg",webm:"video/webm"},h$1=navigator.userAgent,u=/(iphone|ipod|ipad|android)/gi.test(h$1)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,g$1=/android/gi.test(h$1);var v=(function(G){if(G){var _=function(Ee){return[].slice.call(Ee)},J=3,Z=[],Q=null,ee="requestAnimationFrame"in G?function(){G.cancelAnimationFrame(Q),Q=G.requestAnimationFrame((function(){return ne(Z.filter((function(Ee){return Ee.dirty&&Ee.active})))}))}:function(){},te=function(Ee){return function(){Z.forEach((function(De){return De.dirty=Ee})),ee()}},ne=function(Ee){Ee.filter((function(Le){return!Le.styleComputed})).forEach((function(Le){Le.styleComputed=se(Le)})),Ee.filter(ae).forEach(ce);var De=Ee.filter(oe);De.forEach(re),De.forEach((function(Le){ce(Le),ie(Le)})),De.forEach(ue)},ie=function(Ee){return Ee.dirty=0},re=function(Ee){Ee.availableWidth=Ee.element.parentNode.clientWidth,Ee.currentWidth=Ee.element.scrollWidth,Ee.previousFontSize=Ee.currentFontSize,Ee.currentFontSize=Math.min(Math.max(Ee.minSize,Ee.availableWidth/Ee.currentWidth*Ee.previousFontSize),Ee.maxSize),Ee.whiteSpace=Ee.multiLine&&Ee.currentFontSize===Ee.minSize?"normal":"nowrap"},oe=function(Ee){return Ee.dirty!==2||Ee.dirty===2&&Ee.element.parentNode.clientWidth!==Ee.availableWidth},se=function(Ee){var De=G.getComputedStyle(Ee.element,null);return Ee.currentFontSize=parseFloat(De.getPropertyValue("font-size")),Ee.display=De.getPropertyValue("display"),Ee.whiteSpace=De.getPropertyValue("white-space"),!0},ae=function(Ee){var De=!1;return!Ee.preStyleTestCompleted&&(/inline-/.test(Ee.display)||(De=!0,Ee.display="inline-block"),Ee.whiteSpace!=="nowrap"&&(De=!0,Ee.whiteSpace="nowrap"),Ee.preStyleTestCompleted=!0,De)},ce=function(Ee){Ee.element.style.whiteSpace=Ee.whiteSpace,Ee.element.style.display=Ee.display,Ee.element.style.fontSize=Ee.currentFontSize+"px"},ue=function(Ee){Ee.element.dispatchEvent(new CustomEvent("fit",{detail:{oldValue:Ee.previousFontSize,newValue:Ee.currentFontSize,scaleFactor:Ee.currentFontSize/Ee.previousFontSize}}))},de=function(Ee,De){return function(){Ee.dirty=De,Ee.active&&ee()}},me=function(Ee){return function(){Z=Z.filter((function(De){return De.element!==Ee.element})),Ee.observeMutations&&Ee.observer.disconnect(),Ee.element.style.whiteSpace=Ee.originalStyle.whiteSpace,Ee.element.style.display=Ee.originalStyle.display,Ee.element.style.fontSize=Ee.originalStyle.fontSize}},fe=function(Ee){return function(){Ee.active||(Ee.active=!0,ee())}},_e=function(Ee){return function(){return Ee.active=!1}},ye=function(Ee){Ee.observeMutations&&(Ee.observer=new MutationObserver(de(Ee,1)),Ee.observer.observe(Ee.element,Ee.observeMutations))},be={minSize:16,maxSize:512,multiLine:!0,observeMutations:"MutationObserver"in G&&{subtree:!0,childList:!0,characterData:!0}},Se=null,Ce=function(){G.clearTimeout(Se),Se=G.setTimeout(te(2),Te.observeWindowDelay)},Me=["resize","orientationchange"];return Object.defineProperty(Te,"observeWindow",{set:function(Ee){var De="".concat(Ee?"add":"remove","EventListener");Me.forEach((function(Le){G[De](Le,Ce)}))}}),Te.observeWindow=!0,Te.observeWindowDelay=100,Te.fitAll=te(J),Te}function Re(Ee,De){var Le=Object.assign({},be,De),Ue=Ee.map((function(Ge){var Ye=Object.assign({},Le,{element:Ge,active:!0});return(function(ke){ke.originalStyle={whiteSpace:ke.element.style.whiteSpace,display:ke.element.style.display,fontSize:ke.element.style.fontSize},ye(ke),ke.newbie=!0,ke.dirty=!0,Z.push(ke)})(Ye),{element:Ge,fit:de(Ye,J),unfreeze:fe(Ye),freeze:_e(Ye),unsubscribe:me(Ye)}}));return ee(),Ue}function Te(Ee){var De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return typeof Ee=="string"?Re(_(document.querySelectorAll(Ee)),De):Re([Ee],De)[0]}})(typeof window>"u"?null:window);let p$1=class{constructor(_){this.Reveal=_,this.startEmbeddedIframe=this.startEmbeddedIframe.bind(this)}shouldPreload(_){if(this.Reveal.isScrollView())return!0;let J=this.Reveal.getConfig().preloadIframes;return typeof J!="boolean"&&(J=_.hasAttribute("data-preload")),J}load(_,J={}){_.style.display=this.Reveal.getConfig().display,t(_,"img[data-src], video[data-src], audio[data-src], iframe[data-src]").forEach((Q=>{(Q.tagName!=="IFRAME"||this.shouldPreload(Q))&&(Q.setAttribute("src",Q.getAttribute("data-src")),Q.setAttribute("data-lazy-loaded",""),Q.removeAttribute("data-src"))})),t(_,"video, audio").forEach((Q=>{let ee=0;t(Q,"source[data-src]").forEach((te=>{te.setAttribute("src",te.getAttribute("data-src")),te.removeAttribute("data-src"),te.setAttribute("data-lazy-loaded",""),ee+=1})),u&&Q.tagName==="VIDEO"&&Q.setAttribute("playsinline",""),ee>0&&Q.load()}));let Z=_.slideBackgroundElement;if(Z){Z.style.display="block";let Q=_.slideBackgroundContentElement,ee=_.getAttribute("data-background-iframe");if(Z.hasAttribute("data-loaded")===!1){Z.setAttribute("data-loaded","true");let ne=_.getAttribute("data-background-image"),ie=_.getAttribute("data-background-video"),re=_.hasAttribute("data-background-video-loop"),oe=_.hasAttribute("data-background-video-muted");if(ne)/^data:/.test(ne.trim())?Q.style.backgroundImage=`url(${ne.trim()})`:Q.style.backgroundImage=ne.split(",").map((se=>`url(${((ae="")=>encodeURI(ae).replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/[!'()*]/g,(ce=>`%${ce.charCodeAt(0).toString(16).toUpperCase()}`)))(decodeURI(se.trim()))})`)).join(",");else if(ie){let se=document.createElement("video");re&&se.setAttribute("loop",""),(oe||this.Reveal.isSpeakerNotes())&&(se.muted=!0),u&&(se.muted=!0,se.setAttribute("playsinline","")),ie.split(",").forEach((ae=>{const ce=document.createElement("source");ce.setAttribute("src",ae);let ue=((de="")=>c$1[de.split(".").pop()])(ae);ue&&ce.setAttribute("type",ue),se.appendChild(ce)})),Q.appendChild(se)}else if(ee&&J.excludeIframes!==!0){let se=document.createElement("iframe");se.setAttribute("allowfullscreen",""),se.setAttribute("mozallowfullscreen",""),se.setAttribute("webkitallowfullscreen",""),se.setAttribute("allow","autoplay"),se.setAttribute("data-src",ee),se.style.width="100%",se.style.height="100%",se.style.maxHeight="100%",se.style.maxWidth="100%",Q.appendChild(se)}}let te=Q.querySelector("iframe[data-src]");te&&this.shouldPreload(Z)&&!/autoplay=(1|true|yes)/gi.test(ee)&&te.getAttribute("src")!==ee&&te.setAttribute("src",ee)}this.layout(_)}layout(_){Array.from(_.querySelectorAll(".r-fit-text")).forEach((J=>{v(J,{minSize:24,maxSize:.8*this.Reveal.getConfig().height,observeMutations:!1,observeWindow:!1})}))}unload(_){_.style.display="none";let J=this.Reveal.getSlideBackground(_);J&&(J.style.display="none",t(J,"iframe[src]").forEach((Z=>{Z.removeAttribute("src")}))),t(_,"video[data-lazy-loaded][src], audio[data-lazy-loaded][src], iframe[data-lazy-loaded][src]").forEach((Z=>{Z.setAttribute("data-src",Z.getAttribute("src")),Z.removeAttribute("src")})),t(_,"video[data-lazy-loaded] source[src], audio source[src]").forEach((Z=>{Z.setAttribute("data-src",Z.getAttribute("src")),Z.removeAttribute("src")}))}formatEmbeddedContent(){let _=(J,Z,Q)=>{t(this.Reveal.getSlidesElement(),"iframe["+J+'*="'+Z+'"]').forEach((ee=>{let te=ee.getAttribute(J);te&&te.indexOf(Q)===-1&&ee.setAttribute(J,te+(/\?/.test(te)?"&":"?")+Q)}))};_("src","youtube.com/embed/","enablejsapi=1"),_("data-src","youtube.com/embed/","enablejsapi=1"),_("src","player.vimeo.com/","api=1"),_("data-src","player.vimeo.com/","api=1")}startEmbeddedContent(_){if(_){const J=this.Reveal.isSpeakerNotes();t(_,'img[src$=".gif"]').forEach((Z=>{Z.setAttribute("src",Z.getAttribute("src"))})),t(_,"video, audio").forEach((Z=>{if(r(Z,".fragment")&&!r(Z,".fragment.visible"))return;let Q=this.Reveal.getConfig().autoPlayMedia;if(typeof Q!="boolean"&&(Q=Z.hasAttribute("data-autoplay")||!!r(Z,".slide-background")),Q&&typeof Z.play=="function"){if(J&&!Z.muted)return;if(Z.readyState>1)this.startEmbeddedMedia({target:Z});else if(u){let ee=Z.play();ee&&typeof ee.catch=="function"&&Z.controls===!1&&ee.catch((()=>{Z.controls=!0,Z.addEventListener("play",(()=>{Z.controls=!1}))}))}else Z.removeEventListener("loadeddata",this.startEmbeddedMedia),Z.addEventListener("loadeddata",this.startEmbeddedMedia)}})),J||(t(_,"iframe[src]").forEach((Z=>{r(Z,".fragment")&&!r(Z,".fragment.visible")||this.startEmbeddedIframe({target:Z})})),t(_,"iframe[data-src]").forEach((Z=>{r(Z,".fragment")&&!r(Z,".fragment.visible")||Z.getAttribute("src")!==Z.getAttribute("data-src")&&(Z.removeEventListener("load",this.startEmbeddedIframe),Z.addEventListener("load",this.startEmbeddedIframe),Z.setAttribute("src",Z.getAttribute("data-src")))})))}}startEmbeddedMedia(_){let J=!!r(_.target,"html"),Z=!!r(_.target,".present");J&&Z&&(_.target.paused||_.target.ended)&&(_.target.currentTime=0,_.target.play()),_.target.removeEventListener("loadeddata",this.startEmbeddedMedia)}startEmbeddedIframe(_){let J=_.target;if(J&&J.contentWindow){let Z=!!r(_.target,"html"),Q=!!r(_.target,".present");if(Z&&Q){let ee=this.Reveal.getConfig().autoPlayMedia;typeof ee!="boolean"&&(ee=J.hasAttribute("data-autoplay")||!!r(J,".slide-background")),/youtube\.com\/embed\//.test(J.getAttribute("src"))&&ee?J.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*"):/player\.vimeo\.com\//.test(J.getAttribute("src"))&&ee?J.contentWindow.postMessage('{"method":"play"}',"*"):J.contentWindow.postMessage("slide:start","*")}}}stopEmbeddedContent(_,J={}){J=e({unloadIframes:!0},J),_&&_.parentNode&&(t(_,"video, audio").forEach((Z=>{Z.hasAttribute("data-ignore")||typeof Z.pause!="function"||(Z.setAttribute("data-paused-by-reveal",""),Z.pause())})),t(_,"iframe").forEach((Z=>{Z.contentWindow&&Z.contentWindow.postMessage("slide:stop","*"),Z.removeEventListener("load",this.startEmbeddedIframe)})),t(_,'iframe[src*="youtube.com/embed/"]').forEach((Z=>{!Z.hasAttribute("data-ignore")&&Z.contentWindow&&typeof Z.contentWindow.postMessage=="function"&&Z.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")})),t(_,'iframe[src*="player.vimeo.com/"]').forEach((Z=>{!Z.hasAttribute("data-ignore")&&Z.contentWindow&&typeof Z.contentWindow.postMessage=="function"&&Z.contentWindow.postMessage('{"method":"pause"}',"*")})),J.unloadIframes===!0&&t(_,"iframe[data-src]").forEach((Z=>{Z.setAttribute("src","about:blank"),Z.removeAttribute("src")})))}};const m$1=".slides section",f=".slides>section",y=".slides>section.present>section",b$1=/registerPlugin|registerKeyboardShortcut|addKeyBinding|addEventListener|showPreview/;class w{constructor(_){this.Reveal=_}render(){this.element=document.createElement("div"),this.element.className="slide-number",this.Reveal.getRevealElement().appendChild(this.element)}configure(_,J){let Z="none";_.slideNumber&&!this.Reveal.isPrintView()&&(_.showSlideNumber==="all"||_.showSlideNumber==="speaker"&&this.Reveal.isSpeakerNotes())&&(Z="block"),this.element.style.display=Z}update(){this.Reveal.getConfig().slideNumber&&this.element&&(this.element.innerHTML=this.getSlideNumber())}getSlideNumber(_=this.Reveal.getCurrentSlide()){let J,Z=this.Reveal.getConfig(),Q="h.v";if(typeof Z.slideNumber=="function")J=Z.slideNumber(_);else{typeof Z.slideNumber=="string"&&(Q=Z.slideNumber),/c/.test(Q)||this.Reveal.getHorizontalSlides().length!==1||(Q="c");let te=_&&_.dataset.visibility==="uncounted"?0:1;switch(J=[],Q){case"c":J.push(this.Reveal.getSlidePastCount(_)+te);break;case"c/t":J.push(this.Reveal.getSlidePastCount(_)+te,"/",this.Reveal.getTotalSlides());break;default:let ne=this.Reveal.getIndices(_);J.push(ne.h+te);let ie=Q==="h/v"?"/":".";this.Reveal.isVerticalSlide(_)&&J.push(ie,ne.v+1)}}let ee="#"+this.Reveal.location.getHash(_);return this.formatNumber(J[0],J[1],J[2],ee)}formatNumber(_,J,Z,Q="#"+this.Reveal.location.getHash()){return typeof Z!="number"||isNaN(Z)?`<a href="${Q}">
					<span class="slide-number-a">${_}</span>
					</a>`:`<a href="${Q}">
					<span class="slide-number-a">${_}</span>
					<span class="slide-number-delimiter">${J}</span>
					<span class="slide-number-b">${Z}</span>
					</a>`}destroy(){this.element.remove()}}let E$1=class{constructor(_){this.Reveal=_,this.onInput=this.onInput.bind(this),this.onBlur=this.onBlur.bind(this),this.onKeyDown=this.onKeyDown.bind(this)}render(){this.element=document.createElement("div"),this.element.className="jump-to-slide",this.jumpInput=document.createElement("input"),this.jumpInput.type="text",this.jumpInput.className="jump-to-slide-input",this.jumpInput.placeholder="Jump to slide",this.jumpInput.addEventListener("input",this.onInput),this.jumpInput.addEventListener("keydown",this.onKeyDown),this.jumpInput.addEventListener("blur",this.onBlur),this.element.appendChild(this.jumpInput)}show(){this.indicesOnShow=this.Reveal.getIndices(),this.Reveal.getRevealElement().appendChild(this.element),this.jumpInput.focus()}hide(){this.isVisible()&&(this.element.remove(),this.jumpInput.value="",clearTimeout(this.jumpTimeout),delete this.jumpTimeout)}isVisible(){return!!this.element.parentNode}jump(){clearTimeout(this.jumpTimeout),delete this.jumpTimeout;let _,J=this.jumpInput.value.trim("");if(/^\d+$/.test(J)){const Z=this.Reveal.getConfig().slideNumber;if(Z==="c"||Z==="c/t"){const Q=this.Reveal.getSlides()[parseInt(J,10)-1];Q&&(_=this.Reveal.getIndices(Q))}}return _||(/^\d+\.\d+$/.test(J)&&(J=J.replace(".","/")),_=this.Reveal.location.getIndicesFromHash(J,{oneBasedIndex:!0})),!_&&/\S+/i.test(J)&&J.length>1&&(_=this.search(J)),_&&J!==""?(this.Reveal.slide(_.h,_.v,_.f),!0):(this.Reveal.slide(this.indicesOnShow.h,this.indicesOnShow.v,this.indicesOnShow.f),!1)}jumpAfter(_){clearTimeout(this.jumpTimeout),this.jumpTimeout=setTimeout((()=>this.jump()),_)}search(_){const J=new RegExp("\\b"+_.trim()+"\\b","i"),Z=this.Reveal.getSlides().find((Q=>J.test(Q.innerText)));return Z?this.Reveal.getIndices(Z):null}cancel(){this.Reveal.slide(this.indicesOnShow.h,this.indicesOnShow.v,this.indicesOnShow.f),this.hide()}confirm(){this.jump(),this.hide()}destroy(){this.jumpInput.removeEventListener("input",this.onInput),this.jumpInput.removeEventListener("keydown",this.onKeyDown),this.jumpInput.removeEventListener("blur",this.onBlur),this.element.remove()}onKeyDown(_){_.keyCode===13?this.confirm():_.keyCode===27&&(this.cancel(),_.stopImmediatePropagation())}onInput(_){this.jumpAfter(200)}onBlur(){setTimeout((()=>this.hide()),1)}};const S=G=>{let _=G.match(/^#([0-9a-f]{3})$/i);if(_&&_[1])return _=_[1],{r:17*parseInt(_.charAt(0),16),g:17*parseInt(_.charAt(1),16),b:17*parseInt(_.charAt(2),16)};let J=G.match(/^#([0-9a-f]{6})$/i);if(J&&J[1])return J=J[1],{r:parseInt(J.slice(0,2),16),g:parseInt(J.slice(2,4),16),b:parseInt(J.slice(4,6),16)};let Z=G.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);if(Z)return{r:parseInt(Z[1],10),g:parseInt(Z[2],10),b:parseInt(Z[3],10)};let Q=G.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d]+|[\d]*.[\d]+)\s*\)$/i);return Q?{r:parseInt(Q[1],10),g:parseInt(Q[2],10),b:parseInt(Q[3],10),a:parseFloat(Q[4])}:null};class R{constructor(_){this.Reveal=_}render(){this.element=document.createElement("div"),this.element.className="backgrounds",this.Reveal.getRevealElement().appendChild(this.element)}create(){this.element.innerHTML="",this.element.classList.add("no-transition"),this.Reveal.getHorizontalSlides().forEach((_=>{let J=this.createBackground(_,this.element);t(_,"section").forEach((Z=>{this.createBackground(Z,J),J.classList.add("stack")}))})),this.Reveal.getConfig().parallaxBackgroundImage?(this.element.style.backgroundImage='url("'+this.Reveal.getConfig().parallaxBackgroundImage+'")',this.element.style.backgroundSize=this.Reveal.getConfig().parallaxBackgroundSize,this.element.style.backgroundRepeat=this.Reveal.getConfig().parallaxBackgroundRepeat,this.element.style.backgroundPosition=this.Reveal.getConfig().parallaxBackgroundPosition,setTimeout((()=>{this.Reveal.getRevealElement().classList.add("has-parallax-background")}),1)):(this.element.style.backgroundImage="",this.Reveal.getRevealElement().classList.remove("has-parallax-background"))}createBackground(_,J){let Z=document.createElement("div");Z.className="slide-background "+_.className.replace(/present|past|future/,"");let Q=document.createElement("div");return Q.className="slide-background-content",Z.appendChild(Q),J.appendChild(Z),_.slideBackgroundElement=Z,_.slideBackgroundContentElement=Q,this.sync(_),Z}sync(_){const J=_.slideBackgroundElement,Z=_.slideBackgroundContentElement,Q={background:_.getAttribute("data-background"),backgroundSize:_.getAttribute("data-background-size"),backgroundImage:_.getAttribute("data-background-image"),backgroundVideo:_.getAttribute("data-background-video"),backgroundIframe:_.getAttribute("data-background-iframe"),backgroundColor:_.getAttribute("data-background-color"),backgroundGradient:_.getAttribute("data-background-gradient"),backgroundRepeat:_.getAttribute("data-background-repeat"),backgroundPosition:_.getAttribute("data-background-position"),backgroundTransition:_.getAttribute("data-background-transition"),backgroundOpacity:_.getAttribute("data-background-opacity")},ee=_.hasAttribute("data-preload");_.classList.remove("has-dark-background"),_.classList.remove("has-light-background"),J.removeAttribute("data-loaded"),J.removeAttribute("data-background-hash"),J.removeAttribute("data-background-size"),J.removeAttribute("data-background-transition"),J.style.backgroundColor="",Z.style.backgroundSize="",Z.style.backgroundRepeat="",Z.style.backgroundPosition="",Z.style.backgroundImage="",Z.style.opacity="",Z.innerHTML="",Q.background&&(/^(http|file|\/\/)/gi.test(Q.background)||/\.(svg|png|jpg|jpeg|gif|bmp|webp)([?#\s]|$)/gi.test(Q.background)?_.setAttribute("data-background-image",Q.background):J.style.background=Q.background),(Q.background||Q.backgroundColor||Q.backgroundGradient||Q.backgroundImage||Q.backgroundVideo||Q.backgroundIframe)&&J.setAttribute("data-background-hash",Q.background+Q.backgroundSize+Q.backgroundImage+Q.backgroundVideo+Q.backgroundIframe+Q.backgroundColor+Q.backgroundGradient+Q.backgroundRepeat+Q.backgroundPosition+Q.backgroundTransition+Q.backgroundOpacity),Q.backgroundSize&&J.setAttribute("data-background-size",Q.backgroundSize),Q.backgroundColor&&(J.style.backgroundColor=Q.backgroundColor),Q.backgroundGradient&&(J.style.backgroundImage=Q.backgroundGradient),Q.backgroundTransition&&J.setAttribute("data-background-transition",Q.backgroundTransition),ee&&J.setAttribute("data-preload",""),Q.backgroundSize&&(Z.style.backgroundSize=Q.backgroundSize),Q.backgroundRepeat&&(Z.style.backgroundRepeat=Q.backgroundRepeat),Q.backgroundPosition&&(Z.style.backgroundPosition=Q.backgroundPosition),Q.backgroundOpacity&&(Z.style.opacity=Q.backgroundOpacity);const te=this.getContrastClass(_);typeof te=="string"&&_.classList.add(te)}getContrastClass(_){const J=_.slideBackgroundElement;let Z=_.getAttribute("data-background-color");if(!Z||!S(Z)){let ee=window.getComputedStyle(J);ee&&ee.backgroundColor&&(Z=ee.backgroundColor)}if(Z){const ee=S(Z);if(ee&&ee.a!==0)return typeof(Q=Z)=="string"&&(Q=S(Q)),(Q?(299*Q.r+587*Q.g+114*Q.b)/1e3:null)<128?"has-dark-background":"has-light-background"}var Q;return null}bubbleSlideContrastClassToElement(_,J){["has-light-background","has-dark-background"].forEach((Z=>{_.classList.contains(Z)?J.classList.add(Z):J.classList.remove(Z)}),this)}update(_=!1){let J=this.Reveal.getConfig(),Z=this.Reveal.getCurrentSlide(),Q=this.Reveal.getIndices(),ee=null,te=J.rtl?"future":"past",ne=J.rtl?"past":"future";if(Array.from(this.element.childNodes).forEach(((re,oe)=>{re.classList.remove("past","present","future"),oe<Q.h?re.classList.add(te):oe>Q.h?re.classList.add(ne):(re.classList.add("present"),ee=re),(_||oe===Q.h)&&t(re,".slide-background").forEach(((se,ae)=>{se.classList.remove("past","present","future");const ce=typeof Q.v=="number"?Q.v:0;ae<ce?se.classList.add("past"):ae>ce?se.classList.add("future"):(se.classList.add("present"),oe===Q.h&&(ee=se))}))})),this.previousBackground&&!this.previousBackground.closest("body")&&(this.previousBackground=null),ee&&this.previousBackground){let re=this.previousBackground.getAttribute("data-background-hash"),oe=ee.getAttribute("data-background-hash");if(oe&&oe===re&&ee!==this.previousBackground){this.element.classList.add("no-transition");const se=ee.querySelector("video"),ae=this.previousBackground.querySelector("video");if(se&&ae){const ce=se.parentNode;ae.parentNode.appendChild(se),ce.appendChild(ae)}}}const ie=ee!==this.previousBackground;if(ie&&this.previousBackground&&this.Reveal.slideContent.stopEmbeddedContent(this.previousBackground,{unloadIframes:!this.Reveal.slideContent.shouldPreload(this.previousBackground)}),ie&&ee){this.Reveal.slideContent.startEmbeddedContent(ee);let re=ee.querySelector(".slide-background-content");if(re){let oe=re.style.backgroundImage||"";/\.gif/i.test(oe)&&(re.style.backgroundImage="",window.getComputedStyle(re).opacity,re.style.backgroundImage=oe)}this.previousBackground=ee}Z&&this.bubbleSlideContrastClassToElement(Z,this.Reveal.getRevealElement()),setTimeout((()=>{this.element.classList.remove("no-transition")}),10)}updateParallax(){let _=this.Reveal.getIndices();if(this.Reveal.getConfig().parallaxBackgroundImage){let J,Z,Q=this.Reveal.getHorizontalSlides(),ee=this.Reveal.getVerticalSlides(),te=this.element.style.backgroundSize.split(" ");te.length===1?J=Z=parseInt(te[0],10):(J=parseInt(te[0],10),Z=parseInt(te[1],10));let ne,ie,re=this.element.offsetWidth,oe=Q.length;ne=typeof this.Reveal.getConfig().parallaxBackgroundHorizontal=="number"?this.Reveal.getConfig().parallaxBackgroundHorizontal:oe>1?(J-re)/(oe-1):0,ie=ne*_.h*-1;let se,ae,ce=this.element.offsetHeight,ue=ee.length;se=typeof this.Reveal.getConfig().parallaxBackgroundVertical=="number"?this.Reveal.getConfig().parallaxBackgroundVertical:(Z-ce)/(ue-1),ae=ue>0?se*_.v:0,this.element.style.backgroundPosition=ie+"px "+-ae+"px"}}destroy(){this.element.remove()}}let A=0,k$1=class{constructor(_){this.Reveal=_}run(_,J){this.reset();let Z=this.Reveal.getSlides(),Q=Z.indexOf(J),ee=Z.indexOf(_);if(_&&J&&_.hasAttribute("data-auto-animate")&&J.hasAttribute("data-auto-animate")&&_.getAttribute("data-auto-animate-id")===J.getAttribute("data-auto-animate-id")&&!(Q>ee?J:_).hasAttribute("data-auto-animate-restart")){this.autoAnimateStyleSheet=this.autoAnimateStyleSheet||l$1();let te=this.getAutoAnimateOptions(J);_.dataset.autoAnimate="pending",J.dataset.autoAnimate="pending",te.slideDirection=Q>ee?"forward":"backward";let ne=_.style.display==="none";ne&&(_.style.display=this.Reveal.getConfig().display);let ie=this.getAutoAnimatableElements(_,J).map((re=>this.autoAnimateElements(re.from,re.to,re.options||{},te,A++)));if(ne&&(_.style.display="none"),J.dataset.autoAnimateUnmatched!=="false"&&this.Reveal.getConfig().autoAnimateUnmatched===!0){let re=.8*te.duration,oe=.2*te.duration;this.getUnmatchedAutoAnimateElements(J).forEach((se=>{let ae=this.getAutoAnimateOptions(se,te),ce="unmatched";ae.duration===te.duration&&ae.delay===te.delay||(ce="unmatched-"+A++,ie.push(`[data-auto-animate="running"] [data-auto-animate-target="${ce}"] { transition: opacity ${ae.duration}s ease ${ae.delay}s; }`)),se.dataset.autoAnimateTarget=ce}),this),ie.push(`[data-auto-animate="running"] [data-auto-animate-target="unmatched"] { transition: opacity ${re}s ease ${oe}s; }`)}this.autoAnimateStyleSheet.innerHTML=ie.join(""),requestAnimationFrame((()=>{this.autoAnimateStyleSheet&&(getComputedStyle(this.autoAnimateStyleSheet).fontWeight,J.dataset.autoAnimate="running")})),this.Reveal.dispatchEvent({type:"autoanimate",data:{fromSlide:_,toSlide:J,sheet:this.autoAnimateStyleSheet}})}}reset(){t(this.Reveal.getRevealElement(),'[data-auto-animate]:not([data-auto-animate=""])').forEach((_=>{_.dataset.autoAnimate=""})),t(this.Reveal.getRevealElement(),"[data-auto-animate-target]").forEach((_=>{delete _.dataset.autoAnimateTarget})),this.autoAnimateStyleSheet&&this.autoAnimateStyleSheet.parentNode&&(this.autoAnimateStyleSheet.parentNode.removeChild(this.autoAnimateStyleSheet),this.autoAnimateStyleSheet=null)}autoAnimateElements(_,J,Z,Q,ee){_.dataset.autoAnimateTarget="",J.dataset.autoAnimateTarget=ee;let te=this.getAutoAnimateOptions(J,Q);Z.delay!==void 0&&(te.delay=Z.delay),Z.duration!==void 0&&(te.duration=Z.duration),Z.easing!==void 0&&(te.easing=Z.easing);let ne=this.getAutoAnimatableProperties("from",_,Z),ie=this.getAutoAnimatableProperties("to",J,Z);if(J.classList.contains("fragment")&&delete ie.styles.opacity,Z.translate!==!1||Z.scale!==!1){let se=this.Reveal.getScale(),ae={x:(ne.x-ie.x)/se,y:(ne.y-ie.y)/se,scaleX:ne.width/ie.width,scaleY:ne.height/ie.height};ae.x=Math.round(1e3*ae.x)/1e3,ae.y=Math.round(1e3*ae.y)/1e3,ae.scaleX=Math.round(1e3*ae.scaleX)/1e3,ae.scaleX=Math.round(1e3*ae.scaleX)/1e3;let ce=Z.translate!==!1&&(ae.x!==0||ae.y!==0),ue=Z.scale!==!1&&(ae.scaleX!==0||ae.scaleY!==0);if(ce||ue){let de=[];ce&&de.push(`translate(${ae.x}px, ${ae.y}px)`),ue&&de.push(`scale(${ae.scaleX}, ${ae.scaleY})`),ne.styles.transform=de.join(" "),ne.styles["transform-origin"]="top left",ie.styles.transform="none"}}for(let se in ie.styles){const ae=ie.styles[se],ce=ne.styles[se];ae===ce?delete ie.styles[se]:(ae.explicitValue===!0&&(ie.styles[se]=ae.value),ce.explicitValue===!0&&(ne.styles[se]=ce.value))}let re="",oe=Object.keys(ie.styles);return oe.length>0&&(ne.styles.transition="none",ie.styles.transition=`all ${te.duration}s ${te.easing} ${te.delay}s`,ie.styles["transition-property"]=oe.join(", "),ie.styles["will-change"]=oe.join(", "),re='[data-auto-animate-target="'+ee+'"] {'+Object.keys(ne.styles).map((se=>se+": "+ne.styles[se]+" !important;")).join("")+'}[data-auto-animate="running"] [data-auto-animate-target="'+ee+'"] {'+Object.keys(ie.styles).map((se=>se+": "+ie.styles[se]+" !important;")).join("")+"}"),re}getAutoAnimateOptions(_,J){let Z={easing:this.Reveal.getConfig().autoAnimateEasing,duration:this.Reveal.getConfig().autoAnimateDuration,delay:0};if(Z=e(Z,J),_.parentNode){let Q=r(_.parentNode,"[data-auto-animate-target]");Q&&(Z=this.getAutoAnimateOptions(Q,Z))}return _.dataset.autoAnimateEasing&&(Z.easing=_.dataset.autoAnimateEasing),_.dataset.autoAnimateDuration&&(Z.duration=parseFloat(_.dataset.autoAnimateDuration)),_.dataset.autoAnimateDelay&&(Z.delay=parseFloat(_.dataset.autoAnimateDelay)),Z}getAutoAnimatableProperties(_,J,Z){let Q=this.Reveal.getConfig(),ee={styles:[]};if(Z.translate!==!1||Z.scale!==!1){let ne;if(typeof Z.measure=="function")ne=Z.measure(J);else if(Q.center)ne=J.getBoundingClientRect();else{let ie=this.Reveal.getScale();ne={x:J.offsetLeft*ie,y:J.offsetTop*ie,width:J.offsetWidth*ie,height:J.offsetHeight*ie}}ee.x=ne.x,ee.y=ne.y,ee.width=ne.width,ee.height=ne.height}const te=getComputedStyle(J);return(Z.styles||Q.autoAnimateStyles).forEach((ne=>{let ie;typeof ne=="string"&&(ne={property:ne}),ne.from!==void 0&&_==="from"?ie={value:ne.from,explicitValue:!0}:ne.to!==void 0&&_==="to"?ie={value:ne.to,explicitValue:!0}:(ne.property==="line-height"&&(ie=parseFloat(te["line-height"])/parseFloat(te["font-size"])),isNaN(ie)&&(ie=te[ne.property])),ie!==""&&(ee.styles[ne.property]=ie)})),ee}getAutoAnimatableElements(_,J){let Z=(typeof this.Reveal.getConfig().autoAnimateMatcher=="function"?this.Reveal.getConfig().autoAnimateMatcher:this.getAutoAnimatePairs).call(this,_,J),Q=[];return Z.filter(((ee,te)=>{if(Q.indexOf(ee.to)===-1)return Q.push(ee.to),!0}))}getAutoAnimatePairs(_,J){let Z=[];const Q="h1, h2, h3, h4, h5, h6, p, li";return this.findAutoAnimateMatches(Z,_,J,"[data-id]",(ee=>ee.nodeName+":::"+ee.getAttribute("data-id"))),this.findAutoAnimateMatches(Z,_,J,Q,(ee=>ee.nodeName+":::"+ee.textContent.trim())),this.findAutoAnimateMatches(Z,_,J,"img, video, iframe",(ee=>ee.nodeName+":::"+(ee.getAttribute("src")||ee.getAttribute("data-src")))),this.findAutoAnimateMatches(Z,_,J,"pre",(ee=>ee.nodeName+":::"+ee.textContent.trim())),Z.forEach((ee=>{n(ee.from,Q)?ee.options={scale:!1}:n(ee.from,"pre")&&(ee.options={scale:!1,styles:["width","height"]},this.findAutoAnimateMatches(Z,ee.from,ee.to,".hljs .hljs-ln-code",(te=>te.textContent),{scale:!1,styles:[],measure:this.getLocalBoundingBox.bind(this)}),this.findAutoAnimateMatches(Z,ee.from,ee.to,".hljs .hljs-ln-numbers[data-line-number]",(te=>te.getAttribute("data-line-number")),{scale:!1,styles:["width"],measure:this.getLocalBoundingBox.bind(this)}))}),this),Z}getLocalBoundingBox(_){const J=this.Reveal.getScale();return{x:Math.round(_.offsetLeft*J*100)/100,y:Math.round(_.offsetTop*J*100)/100,width:Math.round(_.offsetWidth*J*100)/100,height:Math.round(_.offsetHeight*J*100)/100}}findAutoAnimateMatches(_,J,Z,Q,ee,te){let ne={},ie={};[].slice.call(J.querySelectorAll(Q)).forEach(((re,oe)=>{const se=ee(re);typeof se=="string"&&se.length&&(ne[se]=ne[se]||[],ne[se].push(re))})),[].slice.call(Z.querySelectorAll(Q)).forEach(((re,oe)=>{const se=ee(re);let ae;if(ie[se]=ie[se]||[],ie[se].push(re),ne[se]){const ce=ie[se].length-1,ue=ne[se].length-1;ne[se][ce]?(ae=ne[se][ce],ne[se][ce]=null):ne[se][ue]&&(ae=ne[se][ue],ne[se][ue]=null)}ae&&_.push({from:ae,to:re,options:te})}))}getUnmatchedAutoAnimateElements(_){return[].slice.call(_.children).reduce(((J,Z)=>{const Q=Z.querySelector("[data-auto-animate-target]");return Z.hasAttribute("data-auto-animate-target")||Q||J.push(Z),Z.querySelector("[data-auto-animate-target]")&&(J=J.concat(this.getUnmatchedAutoAnimateElements(Z))),J}),[])}};class L{constructor(_){this.Reveal=_,this.active=!1,this.activatedCallbacks=[],this.onScroll=this.onScroll.bind(this)}activate(){if(this.active)return;const _=this.Reveal.getState();this.active=!0,this.slideHTMLBeforeActivation=this.Reveal.getSlidesElement().innerHTML;const J=t(this.Reveal.getRevealElement(),f),Z=t(this.Reveal.getRevealElement(),".backgrounds>.slide-background");let Q;this.viewportElement.classList.add("loading-scroll-mode","reveal-scroll");const ee=window.getComputedStyle(this.viewportElement);ee&&ee.background&&(Q=ee.background);const te=[],ne=J[0].parentNode;let ie;const re=(oe,se,ae,ce)=>{let ue;if(ie&&this.Reveal.shouldAutoAnimateBetween(ie,oe))ue=document.createElement("div"),ue.className="scroll-page-content scroll-auto-animate-page",ue.style.display="none",ie.closest(".scroll-page-content").parentNode.appendChild(ue);else{const de=document.createElement("div");if(de.className="scroll-page",te.push(de),ce&&Z.length>se){const fe=Z[se],_e=window.getComputedStyle(fe);_e&&_e.background?de.style.background=_e.background:Q&&(de.style.background=Q)}else Q&&(de.style.background=Q);const me=document.createElement("div");me.className="scroll-page-sticky",de.appendChild(me),ue=document.createElement("div"),ue.className="scroll-page-content",me.appendChild(ue)}ue.appendChild(oe),oe.classList.remove("past","future"),oe.setAttribute("data-index-h",se),oe.setAttribute("data-index-v",ae),oe.slideBackgroundElement&&(oe.slideBackgroundElement.remove("past","future"),ue.insertBefore(oe.slideBackgroundElement,oe)),ie=oe};J.forEach(((oe,se)=>{this.Reveal.isVerticalStack(oe)?oe.querySelectorAll("section").forEach(((ae,ce)=>{re(ae,se,ce,!0)})):re(oe,se,0)}),this),this.createProgressBar(),t(this.Reveal.getRevealElement(),".stack").forEach((oe=>oe.remove())),te.forEach((oe=>ne.appendChild(oe))),this.Reveal.slideContent.layout(this.Reveal.getSlidesElement()),this.Reveal.layout(),this.Reveal.setState(_),this.activatedCallbacks.forEach((oe=>oe())),this.activatedCallbacks=[],this.restoreScrollPosition(),this.viewportElement.classList.remove("loading-scroll-mode"),this.viewportElement.addEventListener("scroll",this.onScroll,{passive:!0})}deactivate(){if(!this.active)return;const _=this.Reveal.getState();this.active=!1,this.viewportElement.removeEventListener("scroll",this.onScroll),this.viewportElement.classList.remove("reveal-scroll"),this.removeProgressBar(),this.Reveal.getSlidesElement().innerHTML=this.slideHTMLBeforeActivation,this.Reveal.sync(),this.Reveal.setState(_),this.slideHTMLBeforeActivation=null}toggle(_){typeof _=="boolean"?_?this.activate():this.deactivate():this.isActive()?this.deactivate():this.activate()}isActive(){return this.active}createProgressBar(){this.progressBar=document.createElement("div"),this.progressBar.className="scrollbar",this.progressBarInner=document.createElement("div"),this.progressBarInner.className="scrollbar-inner",this.progressBar.appendChild(this.progressBarInner),this.progressBarPlayhead=document.createElement("div"),this.progressBarPlayhead.className="scrollbar-playhead",this.progressBarInner.appendChild(this.progressBarPlayhead),this.viewportElement.insertBefore(this.progressBar,this.viewportElement.firstChild);const _=Z=>{let Q=(Z.clientY-this.progressBarInner.getBoundingClientRect().top)/this.progressBarHeight;Q=Math.max(Math.min(Q,1),0),this.viewportElement.scrollTop=Q*(this.viewportElement.scrollHeight-this.viewportElement.offsetHeight)},J=Z=>{this.draggingProgressBar=!1,this.showProgressBar(),document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",J)};this.progressBarInner.addEventListener("mousedown",(Z=>{Z.preventDefault(),this.draggingProgressBar=!0,document.addEventListener("mousemove",_),document.addEventListener("mouseup",J),_(Z)}))}removeProgressBar(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null)}layout(){this.isActive()&&(this.syncPages(),this.syncScrollPosition())}syncPages(){const _=this.Reveal.getConfig(),J=this.Reveal.getComputedSlideSize(window.innerWidth,window.innerHeight),Z=this.Reveal.getScale(),Q=_.scrollLayout==="compact",ee=this.viewportElement.offsetHeight,te=J.height*Z,ne=Q?te:ee;this.scrollTriggerHeight=Q?te:ee,this.viewportElement.style.setProperty("--page-height",ne+"px"),this.viewportElement.style.scrollSnapType=typeof _.scrollSnap=="string"?`y ${_.scrollSnap}`:"",this.slideTriggers=[];const ie=Array.from(this.Reveal.getRevealElement().querySelectorAll(".scroll-page"));this.pages=ie.map((re=>{const oe=this.createPage({pageElement:re,slideElement:re.querySelector("section"),stickyElement:re.querySelector(".scroll-page-sticky"),contentElement:re.querySelector(".scroll-page-content"),backgroundElement:re.querySelector(".slide-background"),autoAnimateElements:re.querySelectorAll(".scroll-auto-animate-page"),autoAnimatePages:[]});oe.pageElement.style.setProperty("--slide-height",_.center===!0?"auto":J.height+"px"),this.slideTriggers.push({page:oe,activate:()=>this.activatePage(oe),deactivate:()=>this.deactivatePage(oe)}),this.createFragmentTriggersForPage(oe),oe.autoAnimateElements.length>0&&this.createAutoAnimateTriggersForPage(oe);let se=Math.max(oe.scrollTriggers.length-1,0);se+=oe.autoAnimatePages.reduce(((ae,ce)=>ae+Math.max(ce.scrollTriggers.length-1,0)),oe.autoAnimatePages.length),oe.pageElement.querySelectorAll(".scroll-snap-point").forEach((ae=>ae.remove()));for(let ae=0;ae<se+1;ae++){const ce=document.createElement("div");ce.className="scroll-snap-point",ce.style.height=this.scrollTriggerHeight+"px",ce.style.scrollSnapAlign=Q?"center":"start",oe.pageElement.appendChild(ce),ae===0&&(ce.style.marginTop=-this.scrollTriggerHeight+"px")}return Q&&oe.scrollTriggers.length>0?(oe.pageHeight=ee,oe.pageElement.style.setProperty("--page-height",ee+"px")):(oe.pageHeight=ne,oe.pageElement.style.removeProperty("--page-height")),oe.scrollPadding=this.scrollTriggerHeight*se,oe.totalHeight=oe.pageHeight+oe.scrollPadding,oe.pageElement.style.setProperty("--page-scroll-padding",oe.scrollPadding+"px"),se>0?(oe.stickyElement.style.position="sticky",oe.stickyElement.style.top=Math.max((ee-oe.pageHeight)/2,0)+"px"):(oe.stickyElement.style.position="relative",oe.pageElement.style.scrollSnapAlign=oe.pageHeight<ee?"center":"start"),oe})),this.setTriggerRanges(),this.viewportElement.setAttribute("data-scrollbar",_.scrollProgress),_.scrollProgress&&this.totalScrollTriggerCount>1?(this.progressBar||this.createProgressBar(),this.syncProgressBar()):this.removeProgressBar()}setTriggerRanges(){this.totalScrollTriggerCount=this.slideTriggers.reduce(((J,Z)=>J+Math.max(Z.page.scrollTriggers.length,1)),0);let _=0;this.slideTriggers.forEach(((J,Z)=>{J.range=[_,_+Math.max(J.page.scrollTriggers.length,1)/this.totalScrollTriggerCount];const Q=(J.range[1]-J.range[0])/J.page.scrollTriggers.length;J.page.scrollTriggers.forEach(((ee,te)=>{ee.range=[_+te*Q,_+(te+1)*Q]})),_=J.range[1]})),this.slideTriggers[this.slideTriggers.length-1].range[1]=1}createFragmentTriggersForPage(_,J){J=J||_.slideElement;const Z=this.Reveal.fragments.sort(J.querySelectorAll(".fragment"),!0);return Z.length&&(_.fragments=this.Reveal.fragments.sort(J.querySelectorAll(".fragment:not(.disabled)")),_.scrollTriggers.push({activate:()=>{this.Reveal.fragments.update(-1,_.fragments,J)}}),Z.forEach(((Q,ee)=>{_.scrollTriggers.push({activate:()=>{this.Reveal.fragments.update(ee,_.fragments,J)}})}))),_.scrollTriggers.length}createAutoAnimateTriggersForPage(_){_.autoAnimateElements.length>0&&this.slideTriggers.push(...Array.from(_.autoAnimateElements).map(((J,Z)=>{let Q=this.createPage({slideElement:J.querySelector("section"),contentElement:J,backgroundElement:J.querySelector(".slide-background")});return this.createFragmentTriggersForPage(Q,Q.slideElement),_.autoAnimatePages.push(Q),{page:Q,activate:()=>this.activatePage(Q),deactivate:()=>this.deactivatePage(Q)}})))}createPage(_){return _.scrollTriggers=[],_.indexh=parseInt(_.slideElement.getAttribute("data-index-h"),10),_.indexv=parseInt(_.slideElement.getAttribute("data-index-v"),10),_}syncProgressBar(){this.progressBarInner.querySelectorAll(".scrollbar-slide").forEach((te=>te.remove()));const _=this.viewportElement.scrollHeight,J=this.viewportElement.offsetHeight,Z=J/_;this.progressBarHeight=this.progressBarInner.offsetHeight,this.playheadHeight=Math.max(Z*this.progressBarHeight,8),this.progressBarScrollableHeight=this.progressBarHeight-this.playheadHeight;const Q=J/_*this.progressBarHeight,ee=Math.min(Q/8,4);this.progressBarPlayhead.style.height=this.playheadHeight-ee+"px",Q>6?this.slideTriggers.forEach((te=>{const{page:ne}=te;ne.progressBarSlide=document.createElement("div"),ne.progressBarSlide.className="scrollbar-slide",ne.progressBarSlide.style.top=te.range[0]*this.progressBarHeight+"px",ne.progressBarSlide.style.height=(te.range[1]-te.range[0])*this.progressBarHeight-ee+"px",ne.progressBarSlide.classList.toggle("has-triggers",ne.scrollTriggers.length>0),this.progressBarInner.appendChild(ne.progressBarSlide),ne.scrollTriggerElements=ne.scrollTriggers.map(((ie,re)=>{const oe=document.createElement("div");return oe.className="scrollbar-trigger",oe.style.top=(ie.range[0]-te.range[0])*this.progressBarHeight+"px",oe.style.height=(ie.range[1]-ie.range[0])*this.progressBarHeight-ee+"px",ne.progressBarSlide.appendChild(oe),re===0&&(oe.style.display="none"),oe}))})):this.pages.forEach((te=>te.progressBarSlide=null))}syncScrollPosition(){const _=this.viewportElement.offsetHeight,J=_/this.viewportElement.scrollHeight,Z=this.viewportElement.scrollTop,Q=this.viewportElement.scrollHeight-_,ee=Math.max(Math.min(Z/Q,1),0),te=Math.max(Math.min((Z+_/2)/this.viewportElement.scrollHeight,1),0);let ne;this.slideTriggers.forEach((ie=>{const{page:re}=ie;ee>=ie.range[0]-2*J&&ee<=ie.range[1]+2*J&&!re.loaded?(re.loaded=!0,this.Reveal.slideContent.load(re.slideElement)):re.loaded&&(re.loaded=!1,this.Reveal.slideContent.unload(re.slideElement)),ee>=ie.range[0]&&ee<=ie.range[1]?(this.activateTrigger(ie),ne=ie.page):ie.active&&this.deactivateTrigger(ie)})),ne&&ne.scrollTriggers.forEach((ie=>{te>=ie.range[0]&&te<=ie.range[1]?this.activateTrigger(ie):ie.active&&this.deactivateTrigger(ie)})),this.setProgressBarValue(Z/(this.viewportElement.scrollHeight-_))}setProgressBarValue(_){this.progressBar&&(this.progressBarPlayhead.style.transform=`translateY(${_*this.progressBarScrollableHeight}px)`,this.getAllPages().filter((J=>J.progressBarSlide)).forEach((J=>{J.progressBarSlide.classList.toggle("active",J.active===!0),J.scrollTriggers.forEach(((Z,Q)=>{J.scrollTriggerElements[Q].classList.toggle("active",J.active===!0&&Z.active===!0)}))})),this.showProgressBar())}showProgressBar(){this.progressBar.classList.add("visible"),clearTimeout(this.hideProgressBarTimeout),this.Reveal.getConfig().scrollProgress!=="auto"||this.draggingProgressBar||(this.hideProgressBarTimeout=setTimeout((()=>{this.progressBar&&this.progressBar.classList.remove("visible")}),500))}prev(){this.viewportElement.scrollTop-=this.scrollTriggerHeight}next(){this.viewportElement.scrollTop+=this.scrollTriggerHeight}scrollToSlide(_){if(this.active){const J=this.getScrollTriggerBySlide(_);J&&(this.viewportElement.scrollTop=J.range[0]*(this.viewportElement.scrollHeight-this.viewportElement.offsetHeight))}else this.activatedCallbacks.push((()=>this.scrollToSlide(_)))}storeScrollPosition(){clearTimeout(this.storeScrollPositionTimeout),this.storeScrollPositionTimeout=setTimeout((()=>{sessionStorage.setItem("reveal-scroll-top",this.viewportElement.scrollTop),sessionStorage.setItem("reveal-scroll-origin",location.origin+location.pathname),this.storeScrollPositionTimeout=null}),50)}restoreScrollPosition(){const _=sessionStorage.getItem("reveal-scroll-top"),J=sessionStorage.getItem("reveal-scroll-origin");_&&J===location.origin+location.pathname&&(this.viewportElement.scrollTop=parseInt(_,10))}activatePage(_){if(!_.active){_.active=!0;const{slideElement:J,backgroundElement:Z,contentElement:Q,indexh:ee,indexv:te}=_;Q.style.display="block",J.classList.add("present"),Z&&Z.classList.add("present"),this.Reveal.setCurrentScrollPage(J,ee,te),this.Reveal.backgrounds.bubbleSlideContrastClassToElement(J,this.viewportElement),Array.from(Q.parentNode.querySelectorAll(".scroll-page-content")).forEach((ne=>{ne!==Q&&(ne.style.display="none")}))}}deactivatePage(_){_.active&&(_.active=!1,_.slideElement&&_.slideElement.classList.remove("present"),_.backgroundElement&&_.backgroundElement.classList.remove("present"))}activateTrigger(_){_.active||(_.active=!0,_.activate())}deactivateTrigger(_){_.active&&(_.active=!1,_.deactivate&&_.deactivate())}getSlideByIndices(_,J){const Z=this.getAllPages().find((Q=>Q.indexh===_&&Q.indexv===J));return Z?Z.slideElement:null}getScrollTriggerBySlide(_){return this.slideTriggers.find((J=>J.page.slideElement===_))}getAllPages(){return this.pages.flatMap((_=>[_,..._.autoAnimatePages||[]]))}onScroll(){this.syncScrollPosition(),this.storeScrollPosition()}get viewportElement(){return this.Reveal.getViewportElement()}}class C{constructor(_){this.Reveal=_}async activate(){const _=this.Reveal.getConfig(),J=t(this.Reveal.getRevealElement(),m$1),Z=_.slideNumber&&/all|print/i.test(_.showSlideNumber),Q=this.Reveal.getComputedSlideSize(window.innerWidth,window.innerHeight),ee=Math.floor(Q.width*(1+_.margin)),te=Math.floor(Q.height*(1+_.margin)),ne=Q.width,ie=Q.height;await new Promise(requestAnimationFrame),l$1("@page{size:"+ee+"px "+te+"px; margin: 0px;}"),l$1(".reveal section>img, .reveal section>video, .reveal section>iframe{max-width: "+ne+"px; max-height:"+ie+"px}"),document.documentElement.classList.add("reveal-print","print-pdf"),document.body.style.width=ee+"px",document.body.style.height=te+"px";const re=this.Reveal.getViewportElement();let oe;if(re){const de=window.getComputedStyle(re);de&&de.background&&(oe=de.background)}await new Promise(requestAnimationFrame),this.Reveal.layoutSlideContents(ne,ie),await new Promise(requestAnimationFrame);const se=J.map((de=>de.scrollHeight)),ae=[],ce=J[0].parentNode;let ue=1;J.forEach((function(de,me){if(de.classList.contains("stack")===!1){let fe=(ee-ne)/2,_e=(te-ie)/2;const ye=se[me];let be=Math.max(Math.ceil(ye/te),1);be=Math.min(be,_.pdfMaxPagesPerSlide),(be===1&&_.center||de.classList.contains("center"))&&(_e=Math.max((te-ye)/2,0));const Se=document.createElement("div");if(ae.push(Se),Se.className="pdf-page",Se.style.height=(te+_.pdfPageHeightOffset)*be+"px",oe&&(Se.style.background=oe),Se.appendChild(de),de.style.left=fe+"px",de.style.top=_e+"px",de.style.width=ne+"px",this.Reveal.slideContent.layout(de),de.slideBackgroundElement&&Se.insertBefore(de.slideBackgroundElement,de),_.showNotes){const Ce=this.Reveal.getSlideNotes(de);if(Ce){const Re=typeof _.showNotes=="string"?_.showNotes:"inline",Te=document.createElement("div");Te.classList.add("speaker-notes"),Te.classList.add("speaker-notes-pdf"),Te.setAttribute("data-layout",Re),Te.innerHTML=Ce,Re==="separate-page"?ae.push(Te):(Te.style.left="8px",Te.style.bottom="8px",Te.style.width=ee-16+"px",Se.appendChild(Te))}}if(Z){const Ce=document.createElement("div");Ce.classList.add("slide-number"),Ce.classList.add("slide-number-pdf"),Ce.innerHTML=ue++,Se.appendChild(Ce)}if(_.pdfSeparateFragments){const Ce=this.Reveal.fragments.sort(Se.querySelectorAll(".fragment"),!0);let Me;Ce.forEach((function(Re,Te){Me&&Me.forEach((function(De){De.classList.remove("current-fragment")})),Re.forEach((function(De){De.classList.add("visible","current-fragment")}),this);const Ee=Se.cloneNode(!0);if(Z){const De=Te+1;Ee.querySelector(".slide-number-pdf").innerHTML+="."+De}ae.push(Ee),Me=Re}),this),Ce.forEach((function(Re){Re.forEach((function(Te){Te.classList.remove("visible","current-fragment")}))}))}else t(Se,".fragment:not(.fade-out)").forEach((function(Ce){Ce.classList.add("visible")}))}}),this),await new Promise(requestAnimationFrame),ae.forEach((de=>ce.appendChild(de))),this.Reveal.slideContent.layout(this.Reveal.getSlidesElement()),this.Reveal.dispatchEvent({type:"pdf-ready"}),re.classList.remove("loading-scroll-mode")}isActive(){return this.Reveal.getConfig().view==="print"}}let x$1=class{constructor(_){this.Reveal=_}configure(_,J){_.fragments===!1?this.disable():J.fragments===!1&&this.enable()}disable(){t(this.Reveal.getSlidesElement(),".fragment").forEach((_=>{_.classList.add("visible"),_.classList.remove("current-fragment")}))}enable(){t(this.Reveal.getSlidesElement(),".fragment").forEach((_=>{_.classList.remove("visible"),_.classList.remove("current-fragment")}))}availableRoutes(){let _=this.Reveal.getCurrentSlide();if(_&&this.Reveal.getConfig().fragments){let J=_.querySelectorAll(".fragment:not(.disabled)"),Z=_.querySelectorAll(".fragment:not(.disabled):not(.visible)");return{prev:J.length-Z.length>0,next:!!Z.length}}return{prev:!1,next:!1}}sort(_,J=!1){_=Array.from(_);let Z=[],Q=[],ee=[];_.forEach((ne=>{if(ne.hasAttribute("data-fragment-index")){let ie=parseInt(ne.getAttribute("data-fragment-index"),10);Z[ie]||(Z[ie]=[]),Z[ie].push(ne)}else Q.push([ne])})),Z=Z.concat(Q);let te=0;return Z.forEach((ne=>{ne.forEach((ie=>{ee.push(ie),ie.setAttribute("data-fragment-index",te)})),te++})),J===!0?Z:ee}sortAll(){this.Reveal.getHorizontalSlides().forEach((_=>{let J=t(_,"section");J.forEach(((Z,Q)=>{this.sort(Z.querySelectorAll(".fragment"))}),this),J.length===0&&this.sort(_.querySelectorAll(".fragment"))}))}update(_,J,Z=this.Reveal.getCurrentSlide()){let Q={shown:[],hidden:[]};if(Z&&this.Reveal.getConfig().fragments&&(J=J||this.sort(Z.querySelectorAll(".fragment"))).length){let ee=0;if(typeof _!="number"){let te=this.sort(Z.querySelectorAll(".fragment.visible")).pop();te&&(_=parseInt(te.getAttribute("data-fragment-index")||0,10))}Array.from(J).forEach(((te,ne)=>{if(te.hasAttribute("data-fragment-index")&&(ne=parseInt(te.getAttribute("data-fragment-index"),10)),ee=Math.max(ee,ne),ne<=_){let ie=te.classList.contains("visible");te.classList.add("visible"),te.classList.remove("current-fragment"),ne===_&&(this.Reveal.announceStatus(this.Reveal.getStatusText(te)),te.classList.add("current-fragment"),this.Reveal.slideContent.startEmbeddedContent(te)),ie||(Q.shown.push(te),this.Reveal.dispatchEvent({target:te,type:"visible",bubbles:!1}))}else{let ie=te.classList.contains("visible");te.classList.remove("visible"),te.classList.remove("current-fragment"),ie&&(this.Reveal.slideContent.stopEmbeddedContent(te),Q.hidden.push(te),this.Reveal.dispatchEvent({target:te,type:"hidden",bubbles:!1}))}})),_=typeof _=="number"?_:-1,_=Math.max(Math.min(_,ee),-1),Z.setAttribute("data-fragment",_)}return Q.hidden.length&&this.Reveal.dispatchEvent({type:"fragmenthidden",data:{fragment:Q.hidden[0],fragments:Q.hidden}}),Q.shown.length&&this.Reveal.dispatchEvent({type:"fragmentshown",data:{fragment:Q.shown[0],fragments:Q.shown}}),Q}sync(_=this.Reveal.getCurrentSlide()){return this.sort(_.querySelectorAll(".fragment"))}goto(_,J=0){let Z=this.Reveal.getCurrentSlide();if(Z&&this.Reveal.getConfig().fragments){let Q=this.sort(Z.querySelectorAll(".fragment:not(.disabled)"));if(Q.length){if(typeof _!="number"){let te=this.sort(Z.querySelectorAll(".fragment:not(.disabled).visible")).pop();_=te?parseInt(te.getAttribute("data-fragment-index")||0,10):-1}_+=J;let ee=this.update(_,Q);return this.Reveal.controls.update(),this.Reveal.progress.update(),this.Reveal.getConfig().fragmentInURL&&this.Reveal.location.writeURL(),!(!ee.shown.length&&!ee.hidden.length)}}return!1}next(){return this.goto(null,1)}prev(){return this.goto(null,-1)}};class P{constructor(_){this.Reveal=_,this.active=!1,this.onSlideClicked=this.onSlideClicked.bind(this)}activate(){if(this.Reveal.getConfig().overview&&!this.Reveal.isScrollView()&&!this.isActive()){this.active=!0,this.Reveal.getRevealElement().classList.add("overview"),this.Reveal.cancelAutoSlide(),this.Reveal.getSlidesElement().appendChild(this.Reveal.getBackgroundsElement()),t(this.Reveal.getRevealElement(),m$1).forEach((Q=>{Q.classList.contains("stack")||Q.addEventListener("click",this.onSlideClicked,!0)}));const _=70,J=this.Reveal.getComputedSlideSize();this.overviewSlideWidth=J.width+_,this.overviewSlideHeight=J.height+_,this.Reveal.getConfig().rtl&&(this.overviewSlideWidth=-this.overviewSlideWidth),this.Reveal.updateSlidesVisibility(),this.layout(),this.update(),this.Reveal.layout();const Z=this.Reveal.getIndices();this.Reveal.dispatchEvent({type:"overviewshown",data:{indexh:Z.h,indexv:Z.v,currentSlide:this.Reveal.getCurrentSlide()}})}}layout(){this.Reveal.getHorizontalSlides().forEach(((_,J)=>{_.setAttribute("data-index-h",J),a$1(_,"translate3d("+J*this.overviewSlideWidth+"px, 0, 0)"),_.classList.contains("stack")&&t(_,"section").forEach(((Z,Q)=>{Z.setAttribute("data-index-h",J),Z.setAttribute("data-index-v",Q),a$1(Z,"translate3d(0, "+Q*this.overviewSlideHeight+"px, 0)")}))})),Array.from(this.Reveal.getBackgroundsElement().childNodes).forEach(((_,J)=>{a$1(_,"translate3d("+J*this.overviewSlideWidth+"px, 0, 0)"),t(_,".slide-background").forEach(((Z,Q)=>{a$1(Z,"translate3d(0, "+Q*this.overviewSlideHeight+"px, 0)")}))}))}update(){const _=Math.min(window.innerWidth,window.innerHeight),J=Math.max(_/5,150)/_,Z=this.Reveal.getIndices();this.Reveal.transformSlides({overview:["scale("+J+")","translateX("+-Z.h*this.overviewSlideWidth+"px)","translateY("+-Z.v*this.overviewSlideHeight+"px)"].join(" ")})}deactivate(){if(this.Reveal.getConfig().overview){this.active=!1,this.Reveal.getRevealElement().classList.remove("overview"),this.Reveal.getRevealElement().classList.add("overview-deactivating"),setTimeout((()=>{this.Reveal.getRevealElement().classList.remove("overview-deactivating")}),1),this.Reveal.getRevealElement().appendChild(this.Reveal.getBackgroundsElement()),t(this.Reveal.getRevealElement(),m$1).forEach((J=>{a$1(J,""),J.removeEventListener("click",this.onSlideClicked,!0)})),t(this.Reveal.getBackgroundsElement(),".slide-background").forEach((J=>{a$1(J,"")})),this.Reveal.transformSlides({overview:""});const _=this.Reveal.getIndices();this.Reveal.slide(_.h,_.v),this.Reveal.layout(),this.Reveal.cueAutoSlide(),this.Reveal.dispatchEvent({type:"overviewhidden",data:{indexh:_.h,indexv:_.v,currentSlide:this.Reveal.getCurrentSlide()}})}}toggle(_){typeof _=="boolean"?_?this.activate():this.deactivate():this.isActive()?this.deactivate():this.activate()}isActive(){return this.active}onSlideClicked(_){if(this.isActive()){_.preventDefault();let J=_.target;for(;J&&!J.nodeName.match(/section/gi);)J=J.parentNode;if(J&&!J.classList.contains("disabled")&&(this.deactivate(),J.nodeName.match(/section/gi))){let Z=parseInt(J.getAttribute("data-index-h"),10),Q=parseInt(J.getAttribute("data-index-v"),10);this.Reveal.slide(Z,Q)}}}}class T{constructor(_){this.Reveal=_,this.shortcuts={},this.bindings={},this.onDocumentKeyDown=this.onDocumentKeyDown.bind(this)}configure(_,J){_.navigationMode==="linear"?(this.shortcuts["&#8594;  ,  &#8595;  ,  SPACE  ,  N  ,  L  ,  J"]="Next slide",this.shortcuts["&#8592;  ,  &#8593;  ,  P  ,  H  ,  K"]="Previous slide"):(this.shortcuts["N  ,  SPACE"]="Next slide",this.shortcuts["P  ,  Shift SPACE"]="Previous slide",this.shortcuts["&#8592;  ,  H"]="Navigate left",this.shortcuts["&#8594;  ,  L"]="Navigate right",this.shortcuts["&#8593;  ,  K"]="Navigate up",this.shortcuts["&#8595;  ,  J"]="Navigate down"),this.shortcuts["Alt + &#8592;/&#8593/&#8594;/&#8595;"]="Navigate without fragments",this.shortcuts["Shift + &#8592;/&#8593/&#8594;/&#8595;"]="Jump to first/last slide",this.shortcuts["B  ,  ."]="Pause",this.shortcuts.F="Fullscreen",this.shortcuts.G="Jump to slide",this.shortcuts["ESC, O"]="Slide overview"}bind(){document.addEventListener("keydown",this.onDocumentKeyDown,!1)}unbind(){document.removeEventListener("keydown",this.onDocumentKeyDown,!1)}addKeyBinding(_,J){typeof _=="object"&&_.keyCode?this.bindings[_.keyCode]={callback:J,key:_.key,description:_.description}:this.bindings[_]={callback:J,key:null,description:null}}removeKeyBinding(_){delete this.bindings[_]}triggerKey(_){this.onDocumentKeyDown({keyCode:_})}registerKeyboardShortcut(_,J){this.shortcuts[_]=J}getShortcuts(){return this.shortcuts}getBindings(){return this.bindings}onDocumentKeyDown(_){let J=this.Reveal.getConfig();if(typeof J.keyboardCondition=="function"&&J.keyboardCondition(_)===!1||J.keyboardCondition==="focused"&&!this.Reveal.isFocused())return!0;let Z=_.keyCode,Q=!this.Reveal.isAutoSliding();this.Reveal.onUserInput(_);let ee=document.activeElement&&document.activeElement.isContentEditable===!0,te=document.activeElement&&document.activeElement.tagName&&/input|textarea/i.test(document.activeElement.tagName),ne=document.activeElement&&document.activeElement.className&&/speaker-notes/i.test(document.activeElement.className),ie=!([32,37,38,39,40,63,78,80,191].indexOf(_.keyCode)!==-1&&_.shiftKey||_.altKey)&&(_.shiftKey||_.altKey||_.ctrlKey||_.metaKey);if(ee||te||ne||ie)return;let re,oe=[66,86,190,191,112];if(typeof J.keyboard=="object")for(re in J.keyboard)J.keyboard[re]==="togglePause"&&oe.push(parseInt(re,10));if(this.Reveal.isOverlayOpen()&&!["Escape","f","c","b","."].includes(_.key)||this.Reveal.isPaused()&&oe.indexOf(Z)===-1)return!1;let se=J.navigationMode==="linear"||!this.Reveal.hasHorizontalSlides()||!this.Reveal.hasVerticalSlides(),ae=!1;if(typeof J.keyboard=="object"){for(re in J.keyboard)if(parseInt(re,10)===Z){let ce=J.keyboard[re];typeof ce=="function"?ce.apply(null,[_]):typeof ce=="string"&&typeof this.Reveal[ce]=="function"&&this.Reveal[ce].call(),ae=!0}}if(ae===!1){for(re in this.bindings)if(parseInt(re,10)===Z){let ce=this.bindings[re].callback;typeof ce=="function"?ce.apply(null,[_]):typeof ce=="string"&&typeof this.Reveal[ce]=="function"&&this.Reveal[ce].call(),ae=!0}}ae===!1&&(ae=!0,Z===80||Z===33?this.Reveal.prev({skipFragments:_.altKey}):Z===78||Z===34?this.Reveal.next({skipFragments:_.altKey}):Z===72||Z===37?_.shiftKey?this.Reveal.slide(0):!this.Reveal.overview.isActive()&&se?J.rtl?this.Reveal.next({skipFragments:_.altKey}):this.Reveal.prev({skipFragments:_.altKey}):this.Reveal.left({skipFragments:_.altKey}):Z===76||Z===39?_.shiftKey?this.Reveal.slide(this.Reveal.getHorizontalSlides().length-1):!this.Reveal.overview.isActive()&&se?J.rtl?this.Reveal.prev({skipFragments:_.altKey}):this.Reveal.next({skipFragments:_.altKey}):this.Reveal.right({skipFragments:_.altKey}):Z===75||Z===38?_.shiftKey?this.Reveal.slide(void 0,0):!this.Reveal.overview.isActive()&&se?this.Reveal.prev({skipFragments:_.altKey}):this.Reveal.up({skipFragments:_.altKey}):Z===74||Z===40?_.shiftKey?this.Reveal.slide(void 0,Number.MAX_VALUE):!this.Reveal.overview.isActive()&&se?this.Reveal.next({skipFragments:_.altKey}):this.Reveal.down({skipFragments:_.altKey}):Z===36?this.Reveal.slide(0):Z===35?this.Reveal.slide(this.Reveal.getHorizontalSlides().length-1):Z===32?(this.Reveal.overview.isActive()&&this.Reveal.overview.deactivate(),_.shiftKey?this.Reveal.prev({skipFragments:_.altKey}):this.Reveal.next({skipFragments:_.altKey})):[58,59,66,86,190].includes(Z)||Z===191&&!_.shiftKey?this.Reveal.togglePause():Z===70?o(J.embedded?this.Reveal.getViewportElement():document.documentElement):Z===65?J.autoSlideStoppable&&this.Reveal.toggleAutoSlide(Q):Z===71?J.jumpToSlide&&this.Reveal.toggleJumpToSlide():Z===67&&this.Reveal.isOverlayOpen()?this.Reveal.closeOverlay():Z!==63&&Z!==191||!_.shiftKey?Z===112?this.Reveal.toggleHelp():ae=!1:this.Reveal.toggleHelp()),ae?_.preventDefault&&_.preventDefault():Z!==27&&Z!==79||(this.Reveal.closeOverlay()===!1&&this.Reveal.overview.toggle(),_.preventDefault&&_.preventDefault()),this.Reveal.cueAutoSlide()}}class N{MAX_REPLACE_STATE_FREQUENCY=1e3;constructor(_){this.Reveal=_,this.writeURLTimeout=0,this.replaceStateTimestamp=0,this.onWindowHashChange=this.onWindowHashChange.bind(this)}bind(){window.addEventListener("hashchange",this.onWindowHashChange,!1)}unbind(){window.removeEventListener("hashchange",this.onWindowHashChange,!1)}getIndicesFromHash(_=window.location.hash,J={}){let Z=_.replace(/^#\/?/,""),Q=Z.split("/");if(/^[0-9]*$/.test(Q[0])||!Z.length){const ee=this.Reveal.getConfig();let te,ne=ee.hashOneBasedIndex||J.oneBasedIndex?1:0,ie=parseInt(Q[0],10)-ne||0,re=parseInt(Q[1],10)-ne||0;return ee.fragmentInURL&&(te=parseInt(Q[2],10),isNaN(te)&&(te=void 0)),{h:ie,v:re,f:te}}{let ee,te;/\/[-\d]+$/g.test(Z)&&(te=parseInt(Z.split("/").pop(),10),te=isNaN(te)?void 0:te,Z=Z.split("/").shift());try{ee=document.getElementById(decodeURIComponent(Z)).closest(".slides section")}catch{}if(ee)return{...this.Reveal.getIndices(ee),f:te}}return null}readURL(){const _=this.Reveal.getIndices(),J=this.getIndicesFromHash();J?J.h===_.h&&J.v===_.v&&J.f===void 0||this.Reveal.slide(J.h,J.v,J.f):this.Reveal.slide(_.h||0,_.v||0)}writeURL(_){let J=this.Reveal.getConfig(),Z=this.Reveal.getCurrentSlide();if(clearTimeout(this.writeURLTimeout),typeof _=="number")this.writeURLTimeout=setTimeout(this.writeURL,_);else if(Z){let Q=this.getHash();J.history?window.location.hash=Q:J.hash&&(Q==="/"?this.debouncedReplaceState(window.location.pathname+window.location.search):this.debouncedReplaceState("#"+Q))}}replaceState(_){window.history.replaceState(null,null,_),this.replaceStateTimestamp=Date.now()}debouncedReplaceState(_){clearTimeout(this.replaceStateTimeout),Date.now()-this.replaceStateTimestamp>this.MAX_REPLACE_STATE_FREQUENCY?this.replaceState(_):this.replaceStateTimeout=setTimeout((()=>this.replaceState(_)),this.MAX_REPLACE_STATE_FREQUENCY)}getHash(_){let J="/",Z=_||this.Reveal.getCurrentSlide(),Q=Z?Z.getAttribute("id"):null;Q&&(Q=encodeURIComponent(Q));let ee=this.Reveal.getIndices(_);if(this.Reveal.getConfig().fragmentInURL||(ee.f=void 0),typeof Q=="string"&&Q.length)J="/"+Q,ee.f>=0&&(J+="/"+ee.f);else{let te=this.Reveal.getConfig().hashOneBasedIndex?1:0;(ee.h>0||ee.v>0||ee.f>=0)&&(J+=ee.h+te),(ee.v>0||ee.f>=0)&&(J+="/"+(ee.v+te)),ee.f>=0&&(J+="/"+ee.f)}return J}onWindowHashChange(_){this.readURL()}}class I{constructor(_){this.Reveal=_,this.onNavigateLeftClicked=this.onNavigateLeftClicked.bind(this),this.onNavigateRightClicked=this.onNavigateRightClicked.bind(this),this.onNavigateUpClicked=this.onNavigateUpClicked.bind(this),this.onNavigateDownClicked=this.onNavigateDownClicked.bind(this),this.onNavigatePrevClicked=this.onNavigatePrevClicked.bind(this),this.onNavigateNextClicked=this.onNavigateNextClicked.bind(this),this.onEnterFullscreen=this.onEnterFullscreen.bind(this)}render(){const _=this.Reveal.getConfig().rtl,J=this.Reveal.getRevealElement();this.element=document.createElement("aside"),this.element.className="controls",this.element.innerHTML=`<button class="navigate-left" aria-label="${_?"next slide":"previous slide"}"><div class="controls-arrow"></div></button>
			<button class="navigate-right" aria-label="${_?"previous slide":"next slide"}"><div class="controls-arrow"></div></button>
			<button class="navigate-up" aria-label="above slide"><div class="controls-arrow"></div></button>
			<button class="navigate-down" aria-label="below slide"><div class="controls-arrow"></div></button>`,this.Reveal.getRevealElement().appendChild(this.element),this.controlsLeft=t(J,".navigate-left"),this.controlsRight=t(J,".navigate-right"),this.controlsUp=t(J,".navigate-up"),this.controlsDown=t(J,".navigate-down"),this.controlsPrev=t(J,".navigate-prev"),this.controlsNext=t(J,".navigate-next"),this.controlsFullscreen=t(J,".enter-fullscreen"),this.controlsRightArrow=this.element.querySelector(".navigate-right"),this.controlsLeftArrow=this.element.querySelector(".navigate-left"),this.controlsDownArrow=this.element.querySelector(".navigate-down")}configure(_,J){this.element.style.display=_.controls&&(_.controls!=="speaker-only"||this.Reveal.isSpeakerNotes())?"block":"none",this.element.setAttribute("data-controls-layout",_.controlsLayout),this.element.setAttribute("data-controls-back-arrows",_.controlsBackArrows)}bind(){let _=["touchstart","click"];g$1&&(_=["touchstart"]),_.forEach((J=>{this.controlsLeft.forEach((Z=>Z.addEventListener(J,this.onNavigateLeftClicked,!1))),this.controlsRight.forEach((Z=>Z.addEventListener(J,this.onNavigateRightClicked,!1))),this.controlsUp.forEach((Z=>Z.addEventListener(J,this.onNavigateUpClicked,!1))),this.controlsDown.forEach((Z=>Z.addEventListener(J,this.onNavigateDownClicked,!1))),this.controlsPrev.forEach((Z=>Z.addEventListener(J,this.onNavigatePrevClicked,!1))),this.controlsNext.forEach((Z=>Z.addEventListener(J,this.onNavigateNextClicked,!1))),this.controlsFullscreen.forEach((Z=>Z.addEventListener(J,this.onEnterFullscreen,!1)))}))}unbind(){["touchstart","click"].forEach((_=>{this.controlsLeft.forEach((J=>J.removeEventListener(_,this.onNavigateLeftClicked,!1))),this.controlsRight.forEach((J=>J.removeEventListener(_,this.onNavigateRightClicked,!1))),this.controlsUp.forEach((J=>J.removeEventListener(_,this.onNavigateUpClicked,!1))),this.controlsDown.forEach((J=>J.removeEventListener(_,this.onNavigateDownClicked,!1))),this.controlsPrev.forEach((J=>J.removeEventListener(_,this.onNavigatePrevClicked,!1))),this.controlsNext.forEach((J=>J.removeEventListener(_,this.onNavigateNextClicked,!1))),this.controlsFullscreen.forEach((J=>J.removeEventListener(_,this.onEnterFullscreen,!1)))}))}update(){let _=this.Reveal.availableRoutes();[...this.controlsLeft,...this.controlsRight,...this.controlsUp,...this.controlsDown,...this.controlsPrev,...this.controlsNext].forEach((Z=>{Z.classList.remove("enabled","fragmented"),Z.setAttribute("disabled","disabled")})),_.left&&this.controlsLeft.forEach((Z=>{Z.classList.add("enabled"),Z.removeAttribute("disabled")})),_.right&&this.controlsRight.forEach((Z=>{Z.classList.add("enabled"),Z.removeAttribute("disabled")})),_.up&&this.controlsUp.forEach((Z=>{Z.classList.add("enabled"),Z.removeAttribute("disabled")})),_.down&&this.controlsDown.forEach((Z=>{Z.classList.add("enabled"),Z.removeAttribute("disabled")})),(_.left||_.up)&&this.controlsPrev.forEach((Z=>{Z.classList.add("enabled"),Z.removeAttribute("disabled")})),(_.right||_.down)&&this.controlsNext.forEach((Z=>{Z.classList.add("enabled"),Z.removeAttribute("disabled")}));let J=this.Reveal.getCurrentSlide();if(J){let Z=this.Reveal.fragments.availableRoutes();Z.prev&&this.controlsPrev.forEach((te=>{te.classList.add("fragmented","enabled"),te.removeAttribute("disabled")})),Z.next&&this.controlsNext.forEach((te=>{te.classList.add("fragmented","enabled"),te.removeAttribute("disabled")}));const Q=this.Reveal.isVerticalSlide(J),ee=Q&&J.parentElement&&J.parentElement.querySelectorAll(":scope > section").length>1;Q&&ee?(Z.prev&&this.controlsUp.forEach((te=>{te.classList.add("fragmented","enabled"),te.removeAttribute("disabled")})),Z.next&&this.controlsDown.forEach((te=>{te.classList.add("fragmented","enabled"),te.removeAttribute("disabled")}))):(Z.prev&&this.controlsLeft.forEach((te=>{te.classList.add("fragmented","enabled"),te.removeAttribute("disabled")})),Z.next&&this.controlsRight.forEach((te=>{te.classList.add("fragmented","enabled"),te.removeAttribute("disabled")})))}if(this.Reveal.getConfig().controlsTutorial){let Z=this.Reveal.getIndices();!this.Reveal.hasNavigatedVertically()&&_.down?this.controlsDownArrow.classList.add("highlight"):(this.controlsDownArrow.classList.remove("highlight"),this.Reveal.getConfig().rtl?!this.Reveal.hasNavigatedHorizontally()&&_.left&&Z.v===0?this.controlsLeftArrow.classList.add("highlight"):this.controlsLeftArrow.classList.remove("highlight"):!this.Reveal.hasNavigatedHorizontally()&&_.right&&Z.v===0?this.controlsRightArrow.classList.add("highlight"):this.controlsRightArrow.classList.remove("highlight"))}}destroy(){this.unbind(),this.element.remove()}onNavigateLeftClicked(_){_.preventDefault(),this.Reveal.onUserInput(),this.Reveal.getConfig().navigationMode==="linear"?this.Reveal.prev():this.Reveal.left()}onNavigateRightClicked(_){_.preventDefault(),this.Reveal.onUserInput(),this.Reveal.getConfig().navigationMode==="linear"?this.Reveal.next():this.Reveal.right()}onNavigateUpClicked(_){_.preventDefault(),this.Reveal.onUserInput(),this.Reveal.up()}onNavigateDownClicked(_){_.preventDefault(),this.Reveal.onUserInput(),this.Reveal.down()}onNavigatePrevClicked(_){_.preventDefault(),this.Reveal.onUserInput(),this.Reveal.prev()}onNavigateNextClicked(_){_.preventDefault(),this.Reveal.onUserInput(),this.Reveal.next()}onEnterFullscreen(_){const J=this.Reveal.getConfig(),Z=this.Reveal.getViewportElement();o(J.embedded?Z:Z.parentElement)}}class M{constructor(_){this.Reveal=_,this.onProgressClicked=this.onProgressClicked.bind(this)}render(){this.element=document.createElement("div"),this.element.className="progress",this.Reveal.getRevealElement().appendChild(this.element),this.bar=document.createElement("span"),this.element.appendChild(this.bar)}configure(_,J){this.element.style.display=_.progress?"block":"none"}bind(){this.Reveal.getConfig().progress&&this.element&&this.element.addEventListener("click",this.onProgressClicked,!1)}unbind(){this.Reveal.getConfig().progress&&this.element&&this.element.removeEventListener("click",this.onProgressClicked,!1)}update(){if(this.Reveal.getConfig().progress&&this.bar){let _=this.Reveal.getProgress();this.Reveal.getTotalSlides()<2&&(_=0),this.bar.style.transform="scaleX("+_+")"}}getMaxWidth(){return this.Reveal.getRevealElement().offsetWidth}onProgressClicked(_){this.Reveal.onUserInput(_),_.preventDefault();let J=this.Reveal.getSlides(),Z=J.length,Q=Math.floor(_.clientX/this.getMaxWidth()*Z);this.Reveal.getConfig().rtl&&(Q=Z-Q);let ee=this.Reveal.getIndices(J[Q]);this.Reveal.slide(ee.h,ee.v)}destroy(){this.element.remove()}}class B{constructor(_){this.Reveal=_,this.lastMouseWheelStep=0,this.cursorHidden=!1,this.cursorInactiveTimeout=0,this.onDocumentCursorActive=this.onDocumentCursorActive.bind(this),this.onDocumentMouseScroll=this.onDocumentMouseScroll.bind(this)}configure(_,J){_.mouseWheel?document.addEventListener("wheel",this.onDocumentMouseScroll,!1):document.removeEventListener("wheel",this.onDocumentMouseScroll,!1),_.hideInactiveCursor?(document.addEventListener("mousemove",this.onDocumentCursorActive,!1),document.addEventListener("mousedown",this.onDocumentCursorActive,!1)):(this.showCursor(),document.removeEventListener("mousemove",this.onDocumentCursorActive,!1),document.removeEventListener("mousedown",this.onDocumentCursorActive,!1))}showCursor(){this.cursorHidden&&(this.cursorHidden=!1,this.Reveal.getRevealElement().style.cursor="")}hideCursor(){this.cursorHidden===!1&&(this.cursorHidden=!0,this.Reveal.getRevealElement().style.cursor="none")}destroy(){this.showCursor(),document.removeEventListener("wheel",this.onDocumentMouseScroll,!1),document.removeEventListener("mousemove",this.onDocumentCursorActive,!1),document.removeEventListener("mousedown",this.onDocumentCursorActive,!1)}onDocumentCursorActive(_){this.showCursor(),clearTimeout(this.cursorInactiveTimeout),this.cursorInactiveTimeout=setTimeout(this.hideCursor.bind(this),this.Reveal.getConfig().hideCursorTime)}onDocumentMouseScroll(_){if(Date.now()-this.lastMouseWheelStep>1e3){this.lastMouseWheelStep=Date.now();let J=_.detail||-_.wheelDelta;J>0?this.Reveal.next():J<0&&this.Reveal.prev()}}}const H=(G,_)=>{const J=document.createElement("script");J.type="text/javascript",J.async=!1,J.defer=!1,J.src=G,typeof _=="function"&&(J.onload=J.onreadystatechange=Q=>{(Q.type==="load"||/loaded|complete/.test(J.readyState))&&(J.onload=J.onreadystatechange=J.onerror=null,_())},J.onerror=Q=>{J.onload=J.onreadystatechange=J.onerror=null,_(new Error("Failed loading script: "+J.src+`
`+Q))});const Z=document.querySelector("head");Z.insertBefore(J,Z.lastChild)};let D$1=class{constructor(_){this.Reveal=_,this.state="idle",this.registeredPlugins={},this.asyncDependencies=[]}load(_,J){return this.state="loading",_.forEach(this.registerPlugin.bind(this)),new Promise((Z=>{let Q=[],ee=0;if(J.forEach((te=>{te.condition&&!te.condition()||(te.async?this.asyncDependencies.push(te):Q.push(te))})),Q.length){ee=Q.length;const te=ne=>{ne&&typeof ne.callback=="function"&&ne.callback(),--ee==0&&this.initPlugins().then(Z)};Q.forEach((ne=>{typeof ne.id=="string"?(this.registerPlugin(ne),te(ne)):typeof ne.src=="string"?H(ne.src,(()=>te(ne))):(console.warn("Unrecognized plugin format",ne),te())}))}else this.initPlugins().then(Z)}))}initPlugins(){return new Promise((_=>{let J=Object.values(this.registeredPlugins),Z=J.length;if(Z===0)this.loadAsync().then(_);else{let Q,ee=()=>{--Z==0?this.loadAsync().then(_):Q()},te=0;Q=()=>{let ne=J[te++];if(typeof ne.init=="function"){let ie=ne.init(this.Reveal);ie&&typeof ie.then=="function"?ie.then(ee):ee()}else ee()},Q()}}))}loadAsync(){return this.state="loaded",this.asyncDependencies.length&&this.asyncDependencies.forEach((_=>{H(_.src,_.callback)})),Promise.resolve()}registerPlugin(_){arguments.length===2&&typeof arguments[0]=="string"?(_=arguments[1]).id=arguments[0]:typeof _=="function"&&(_=_());let J=_.id;typeof J!="string"?console.warn("Unrecognized plugin format; can't find plugin.id",_):this.registeredPlugins[J]===void 0?(this.registeredPlugins[J]=_,this.state==="loaded"&&typeof _.init=="function"&&_.init(this.Reveal)):console.warn('reveal.js: "'+J+'" plugin has already been registered')}hasPlugin(_){return!!this.registeredPlugins[_]}getPlugin(_){return this.registeredPlugins[_]}getRegisteredPlugins(){return this.registeredPlugins}destroy(){Object.values(this.registeredPlugins).forEach((_=>{typeof _.destroy=="function"&&_.destroy()})),this.registeredPlugins={},this.asyncDependencies=[]}};class F{constructor(_){this.Reveal=_,this.onSlidesClicked=this.onSlidesClicked.bind(this),this.iframeTriggerSelector=null,this.mediaTriggerSelector="[data-preview-image], [data-preview-video]",this.stateProps=["previewIframe","previewImage","previewVideo","previewFit"],this.state={}}update(){this.Reveal.getConfig().previewLinks?this.iframeTriggerSelector="a[href]:not([data-preview-link=false]), [data-preview-link]:not(a):not([data-preview-link=false])":this.iframeTriggerSelector="[data-preview-link]:not([data-preview-link=false])";const _=this.Reveal.getSlidesElement().querySelectorAll(this.iframeTriggerSelector).length>0,J=this.Reveal.getSlidesElement().querySelectorAll(this.mediaTriggerSelector).length>0;_||J?this.Reveal.getSlidesElement().addEventListener("click",this.onSlidesClicked,!1):this.Reveal.getSlidesElement().removeEventListener("click",this.onSlidesClicked,!1)}createOverlay(_){this.dom=document.createElement("div"),this.dom.classList.add("r-overlay"),this.dom.classList.add(_),this.viewport=document.createElement("div"),this.viewport.classList.add("r-overlay-viewport"),this.dom.appendChild(this.viewport),this.Reveal.getRevealElement().appendChild(this.dom)}previewIframe(_){this.close(),this.state={previewIframe:_},this.createOverlay("r-overlay-preview"),this.dom.dataset.state="loading",this.viewport.innerHTML=`<header class="r-overlay-header">
				<a class="r-overlay-button r-overlay-external" href="${_}" target="_blank"><span class="icon"></span></a>
				<button class="r-overlay-button r-overlay-close"><span class="icon"></span></button>
			</header>
			<div class="r-overlay-spinner"></div>
			<div class="r-overlay-content">
				<iframe src="${_}"></iframe>
				<small class="r-overlay-content-inner">
					<span class="r-overlay-error x-frame-error">Unable to load iframe. This is likely due to the site's policy (x-frame-options).</span>
				</small>
			</div>`,this.dom.querySelector("iframe").addEventListener("load",(J=>{this.dom.dataset.state="loaded"}),!1),this.dom.querySelector(".r-overlay-close").addEventListener("click",(J=>{this.close(),J.preventDefault()}),!1),this.dom.querySelector(".r-overlay-external").addEventListener("click",(J=>{this.close()}),!1),this.Reveal.dispatchEvent({type:"previewiframe",data:{url:_}})}previewMedia(_,J,Z){if(J!=="image"&&J!=="video")return void console.warn("Please specify a valid media type to preview (image|video)");this.close(),Z=Z||"scale-down",this.createOverlay("r-overlay-preview"),this.dom.dataset.state="loading",this.dom.dataset.previewFit=Z,this.viewport.innerHTML=`<header class="r-overlay-header">
				<button class="r-overlay-button r-overlay-close">Esc <span class="icon"></span></button>
			</header>
			<div class="r-overlay-spinner"></div>
			<div class="r-overlay-content"></div>`;const Q=this.dom.querySelector(".r-overlay-content");if(J==="image"){this.state={previewImage:_,previewFit:Z};const ee=document.createElement("img",{});ee.src=_,Q.appendChild(ee),ee.addEventListener("load",(()=>{this.dom.dataset.state="loaded"}),!1),ee.addEventListener("error",(()=>{this.dom.dataset.state="error",Q.innerHTML='<span class="r-overlay-error">Unable to load image.</span>'}),!1),this.dom.style.cursor="zoom-out",this.dom.addEventListener("click",(te=>{this.close()}),!1),this.Reveal.dispatchEvent({type:"previewimage",data:{url:_}})}else{if(J!=="video")throw new Error("Please specify a valid media type to preview");{this.state={previewVideo:_,previewFit:Z};const ee=document.createElement("video");ee.autoplay=this.dom.dataset.previewAutoplay!=="false",ee.controls=this.dom.dataset.previewControls!=="false",ee.loop=this.dom.dataset.previewLoop==="true",ee.muted=this.dom.dataset.previewMuted==="true",ee.playsInline=!0,ee.src=_,Q.appendChild(ee),ee.addEventListener("loadeddata",(()=>{this.dom.dataset.state="loaded"}),!1),ee.addEventListener("error",(()=>{this.dom.dataset.state="error",Q.innerHTML='<span class="r-overlay-error">Unable to load video.</span>'}),!1),this.Reveal.dispatchEvent({type:"previewvideo",data:{url:_}})}}this.dom.querySelector(".r-overlay-close").addEventListener("click",(ee=>{this.close(),ee.preventDefault()}),!1)}previewImage(_,J){this.previewMedia(_,"image",J)}previewVideo(_,J){this.previewMedia(_,"video",J)}toggleHelp(_){typeof _=="boolean"?_?this.showHelp():this.close():this.dom?this.close():this.showHelp()}showHelp(){if(this.Reveal.getConfig().help){this.close(),this.createOverlay("r-overlay-help");let _='<p class="title">Keyboard Shortcuts</p>',J=this.Reveal.keyboard.getShortcuts(),Z=this.Reveal.keyboard.getBindings();_+="<table><th>KEY</th><th>ACTION</th>";for(let Q in J)_+=`<tr><td>${Q}</td><td>${J[Q]}</td></tr>`;for(let Q in Z)Z[Q].key&&Z[Q].description&&(_+=`<tr><td>${Z[Q].key}</td><td>${Z[Q].description}</td></tr>`);_+="</table>",this.viewport.innerHTML=`
				<header class="r-overlay-header">
					<button class="r-overlay-button r-overlay-close">Esc <span class="icon"></span></button>
				</header>
				<div class="r-overlay-content">
					<div class="r-overlay-help-content">${_}</div>
				</div>
			`,this.dom.querySelector(".r-overlay-close").addEventListener("click",(Q=>{this.close(),Q.preventDefault()}),!1),this.Reveal.dispatchEvent({type:"showhelp"})}}isOpen(){return!!this.dom}close(){return!!this.dom&&(this.dom.remove(),this.dom=null,this.state={},this.Reveal.dispatchEvent({type:"closeoverlay"}),!0)}getState(){return this.state}setState(_){this.stateProps.every((J=>this.state[J]===_[J]))||(_.previewIframe?this.previewIframe(_.previewIframe):_.previewImage?this.previewImage(_.previewImage,_.previewFit):_.previewVideo?this.previewVideo(_.previewVideo,_.previewFit):this.close())}onSlidesClicked(_){const J=_.target,Z=J.closest(this.iframeTriggerSelector),Q=J.closest(this.mediaTriggerSelector);if(Z){if(_.metaKey||_.shiftKey||_.altKey)return;let ee=Z.getAttribute("href")||Z.getAttribute("data-preview-link");ee&&(this.previewIframe(ee),_.preventDefault())}else if(Q){if(Q.hasAttribute("data-preview-image")){let ee=Q.dataset.previewImage||Q.getAttribute("src");ee&&(this.previewImage(ee,Q.dataset.previewFit),_.preventDefault())}else if(Q.hasAttribute("data-preview-video")){let ee=Q.dataset.previewVideo||Q.getAttribute("src");if(!ee){let te=Q.querySelector("source");te&&(ee=te.getAttribute("src"))}ee&&(this.previewVideo(ee,Q.dataset.previewFit),_.preventDefault())}}}destroy(){this.close()}}class z{constructor(_){this.Reveal=_,this.touchStartX=0,this.touchStartY=0,this.touchStartCount=0,this.touchCaptured=!1,this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this)}bind(){let _=this.Reveal.getRevealElement();"onpointerdown"in window?(_.addEventListener("pointerdown",this.onPointerDown,!1),_.addEventListener("pointermove",this.onPointerMove,!1),_.addEventListener("pointerup",this.onPointerUp,!1)):window.navigator.msPointerEnabled?(_.addEventListener("MSPointerDown",this.onPointerDown,!1),_.addEventListener("MSPointerMove",this.onPointerMove,!1),_.addEventListener("MSPointerUp",this.onPointerUp,!1)):(_.addEventListener("touchstart",this.onTouchStart,!1),_.addEventListener("touchmove",this.onTouchMove,!1),_.addEventListener("touchend",this.onTouchEnd,!1))}unbind(){let _=this.Reveal.getRevealElement();_.removeEventListener("pointerdown",this.onPointerDown,!1),_.removeEventListener("pointermove",this.onPointerMove,!1),_.removeEventListener("pointerup",this.onPointerUp,!1),_.removeEventListener("MSPointerDown",this.onPointerDown,!1),_.removeEventListener("MSPointerMove",this.onPointerMove,!1),_.removeEventListener("MSPointerUp",this.onPointerUp,!1),_.removeEventListener("touchstart",this.onTouchStart,!1),_.removeEventListener("touchmove",this.onTouchMove,!1),_.removeEventListener("touchend",this.onTouchEnd,!1)}isSwipePrevented(_){if(n(_,"video[controls], audio[controls]"))return!0;for(;_&&typeof _.hasAttribute=="function";){if(_.hasAttribute("data-prevent-swipe"))return!0;_=_.parentNode}return!1}onTouchStart(_){if(this.touchCaptured=!1,this.isSwipePrevented(_.target))return!0;this.touchStartX=_.touches[0].clientX,this.touchStartY=_.touches[0].clientY,this.touchStartCount=_.touches.length}onTouchMove(_){if(this.isSwipePrevented(_.target))return!0;let J=this.Reveal.getConfig();if(this.touchCaptured)g$1&&_.preventDefault();else{this.Reveal.onUserInput(_);let Z=_.touches[0].clientX,Q=_.touches[0].clientY;if(_.touches.length===1&&this.touchStartCount!==2){let ee=this.Reveal.availableRoutes({includeFragments:!0}),te=Z-this.touchStartX,ne=Q-this.touchStartY;te>40&&Math.abs(te)>Math.abs(ne)?(this.touchCaptured=!0,J.navigationMode==="linear"?J.rtl?this.Reveal.next():this.Reveal.prev():this.Reveal.left()):te<-40&&Math.abs(te)>Math.abs(ne)?(this.touchCaptured=!0,J.navigationMode==="linear"?J.rtl?this.Reveal.prev():this.Reveal.next():this.Reveal.right()):ne>40&&ee.up?(this.touchCaptured=!0,J.navigationMode==="linear"?this.Reveal.prev():this.Reveal.up()):ne<-40&&ee.down&&(this.touchCaptured=!0,J.navigationMode==="linear"?this.Reveal.next():this.Reveal.down()),J.embedded?(this.touchCaptured||this.Reveal.isVerticalSlide())&&_.preventDefault():_.preventDefault()}}}onTouchEnd(_){this.touchCaptured=!1}onPointerDown(_){_.pointerType!==_.MSPOINTER_TYPE_TOUCH&&_.pointerType!=="touch"||(_.touches=[{clientX:_.clientX,clientY:_.clientY}],this.onTouchStart(_))}onPointerMove(_){_.pointerType!==_.MSPOINTER_TYPE_TOUCH&&_.pointerType!=="touch"||(_.touches=[{clientX:_.clientX,clientY:_.clientY}],this.onTouchMove(_))}onPointerUp(_){_.pointerType!==_.MSPOINTER_TYPE_TOUCH&&_.pointerType!=="touch"||(_.touches=[{clientX:_.clientX,clientY:_.clientY}],this.onTouchEnd(_))}}const q="focus",O="blur";class V{constructor(_){this.Reveal=_,this.onRevealPointerDown=this.onRevealPointerDown.bind(this),this.onDocumentPointerDown=this.onDocumentPointerDown.bind(this)}configure(_,J){_.embedded?this.blur():(this.focus(),this.unbind())}bind(){this.Reveal.getConfig().embedded&&this.Reveal.getRevealElement().addEventListener("pointerdown",this.onRevealPointerDown,!1)}unbind(){this.Reveal.getRevealElement().removeEventListener("pointerdown",this.onRevealPointerDown,!1),document.removeEventListener("pointerdown",this.onDocumentPointerDown,!1)}focus(){this.state!==q&&(this.Reveal.getRevealElement().classList.add("focused"),document.addEventListener("pointerdown",this.onDocumentPointerDown,!1)),this.state=q}blur(){this.state!==O&&(this.Reveal.getRevealElement().classList.remove("focused"),document.removeEventListener("pointerdown",this.onDocumentPointerDown,!1)),this.state=O}isFocused(){return this.state===q}destroy(){this.Reveal.getRevealElement().classList.remove("focused")}onRevealPointerDown(_){this.focus()}onDocumentPointerDown(_){let J=r(_.target,".reveal");J&&J===this.Reveal.getRevealElement()||this.blur()}}class U{constructor(_){this.Reveal=_}render(){this.element=document.createElement("div"),this.element.className="speaker-notes",this.element.setAttribute("data-prevent-swipe",""),this.element.setAttribute("tabindex","0"),this.Reveal.getRevealElement().appendChild(this.element)}configure(_,J){_.showNotes&&this.element.setAttribute("data-layout",typeof _.showNotes=="string"?_.showNotes:"inline")}update(){this.Reveal.getConfig().showNotes&&this.element&&this.Reveal.getCurrentSlide()&&!this.Reveal.isScrollView()&&!this.Reveal.isPrintView()&&(this.element.innerHTML=this.getSlideNotes()||'<span class="notes-placeholder">No notes on this slide.</span>')}updateVisibility(){this.Reveal.getConfig().showNotes&&this.hasNotes()&&!this.Reveal.isScrollView()&&!this.Reveal.isPrintView()?this.Reveal.getRevealElement().classList.add("show-notes"):this.Reveal.getRevealElement().classList.remove("show-notes")}hasNotes(){return this.Reveal.getSlidesElement().querySelectorAll("[data-notes], aside.notes").length>0}isSpeakerNotesWindow(){return!!window.location.search.match(/receiver/gi)}getSlideNotes(_=this.Reveal.getCurrentSlide()){if(_.hasAttribute("data-notes"))return _.getAttribute("data-notes");let J=_.querySelectorAll("aside.notes");return J?Array.from(J).map((Z=>Z.innerHTML)).join(`
`):null}destroy(){this.element.remove()}}let W$1=class{constructor(_,J){this.diameter=100,this.diameter2=this.diameter/2,this.thickness=6,this.playing=!1,this.progress=0,this.progressOffset=1,this.container=_,this.progressCheck=J,this.canvas=document.createElement("canvas"),this.canvas.className="playback",this.canvas.width=this.diameter,this.canvas.height=this.diameter,this.canvas.style.width=this.diameter2+"px",this.canvas.style.height=this.diameter2+"px",this.context=this.canvas.getContext("2d"),this.container.appendChild(this.canvas),this.render()}setPlaying(_){const J=this.playing;this.playing=_,!J&&this.playing?this.animate():this.render()}animate(){const _=this.progress;this.progress=this.progressCheck(),_>.8&&this.progress<.2&&(this.progressOffset=this.progress),this.render(),this.playing&&requestAnimationFrame(this.animate.bind(this))}render(){let _=this.playing?this.progress:0,J=this.diameter2-this.thickness,Z=this.diameter2,Q=this.diameter2,ee=28;this.progressOffset+=.1*(1-this.progressOffset);const te=-Math.PI/2+_*(2*Math.PI),ne=-Math.PI/2+this.progressOffset*(2*Math.PI);this.context.save(),this.context.clearRect(0,0,this.diameter,this.diameter),this.context.beginPath(),this.context.arc(Z,Q,J+4,0,2*Math.PI,!1),this.context.fillStyle="rgba( 0, 0, 0, 0.4 )",this.context.fill(),this.context.beginPath(),this.context.arc(Z,Q,J,0,2*Math.PI,!1),this.context.lineWidth=this.thickness,this.context.strokeStyle="rgba( 255, 255, 255, 0.2 )",this.context.stroke(),this.playing&&(this.context.beginPath(),this.context.arc(Z,Q,J,ne,te,!1),this.context.lineWidth=this.thickness,this.context.strokeStyle="#fff",this.context.stroke()),this.context.translate(Z-14,Q-14),this.playing?(this.context.fillStyle="#fff",this.context.fillRect(0,0,10,ee),this.context.fillRect(18,0,10,ee)):(this.context.beginPath(),this.context.translate(4,0),this.context.moveTo(0,0),this.context.lineTo(24,14),this.context.lineTo(0,ee),this.context.fillStyle="#fff",this.context.fill()),this.context.restore()}on(_,J){this.canvas.addEventListener(_,J,!1)}off(_,J){this.canvas.removeEventListener(_,J,!1)}destroy(){this.playing=!1,this.canvas.parentNode&&this.container.removeChild(this.canvas)}};var j$1={width:960,height:700,margin:.04,minScale:.2,maxScale:2,controls:!0,controlsTutorial:!0,controlsLayout:"bottom-right",controlsBackArrows:"faded",progress:!0,slideNumber:!1,showSlideNumber:"all",hashOneBasedIndex:!1,hash:!1,respondToHashChanges:!0,jumpToSlide:!0,history:!1,keyboard:!0,keyboardCondition:null,disableLayout:!1,overview:!0,center:!0,touch:!0,loop:!1,rtl:!1,navigationMode:"default",shuffle:!1,fragments:!0,fragmentInURL:!0,embedded:!1,help:!0,pause:!0,showNotes:!1,showHiddenSlides:!1,autoPlayMedia:null,preloadIframes:null,autoAnimate:!0,autoAnimateMatcher:null,autoAnimateEasing:"ease",autoAnimateDuration:1,autoAnimateUnmatched:!0,autoAnimateStyles:["opacity","color","background-color","padding","font-size","line-height","letter-spacing","border-width","border-color","border-radius","outline","outline-offset"],autoSlide:0,autoSlideStoppable:!0,autoSlideMethod:null,defaultTiming:null,mouseWheel:!1,previewLinks:!1,postMessage:!0,postMessageEvents:!1,focusBodyOnPageVisibilityChange:!0,transition:"slide",transitionSpeed:"default",backgroundTransition:"fade",parallaxBackgroundImage:"",parallaxBackgroundSize:"",parallaxBackgroundRepeat:"",parallaxBackgroundPosition:"",parallaxBackgroundHorizontal:null,parallaxBackgroundVertical:null,view:null,scrollLayout:"full",scrollSnap:"mandatory",scrollProgress:"auto",scrollActivationWidth:435,pdfMaxPagesPerSlide:Number.POSITIVE_INFINITY,pdfSeparateFragments:!0,pdfPageHeightOffset:-1,viewDistance:3,mobileViewDistance:2,display:"block",hideInactiveCursor:!0,hideCursorTime:5e3,sortFragmentsOnSync:!0,dependencies:[],plugins:[]};const K="5.2.1";function $(G,_){arguments.length<2&&(_=arguments[0],G=document.querySelector(".reveal"));const J={};let Z,Q,ee,te,ne,ie={},re=!1,oe=!1,se={hasNavigatedHorizontally:!1,hasNavigatedVertically:!1},ae=[],ce=1,ue={layout:"",overview:""},de={},me="idle",fe=0,_e=0,ye=-1,be=!1,Se=new p$1(J),Ce=new w(J),Me=new E$1(J),Re=new k$1(J),Te=new R(J),Ee=new L(J),De=new C(J),Le=new x$1(J),Ue=new P(J),Ge=new T(J),Ye=new N(J),ke=new I(J),Fe=new M(J),Ve=new B(J),$e=new D$1(J),Xe=new F(J),ze=new V(J),qe=new z(J),et=new U(J);function ot(){re!==!1&&(oe=!0,ie.showHiddenSlides||t(de.wrapper,'section[data-visibility="hidden"]').forEach((ct=>{const Et=ct.parentNode;Et.childElementCount===1&&/section/i.test(Et.nodeName)?Et.remove():ct.remove()})),(function(){de.slides.classList.add("no-transition"),u?de.wrapper.classList.add("no-hover"):de.wrapper.classList.remove("no-hover"),Te.render(),Ce.render(),Me.render(),ke.render(),Fe.render(),et.render(),de.pauseOverlay=((ct,Et,Ht,je="")=>{let nt=ct.querySelectorAll("."+Ht);for(let ft=0;ft<nt.length;ft++){let ut=nt[ft];if(ut.parentNode===ct)return ut}let pt=document.createElement(Et);return pt.className=Ht,pt.innerHTML=je,ct.appendChild(pt),pt})(de.wrapper,"div","pause-overlay",ie.controls?'<button class="resume-button">Resume presentation</button>':null),de.statusElement=(function(){let ct=de.wrapper.querySelector(".aria-status");return ct||(ct=document.createElement("div"),ct.style.position="absolute",ct.style.height="1px",ct.style.width="1px",ct.style.overflow="hidden",ct.style.clip="rect( 1px, 1px, 1px, 1px )",ct.classList.add("aria-status"),ct.setAttribute("aria-live","polite"),ct.setAttribute("aria-atomic","true"),de.wrapper.appendChild(ct)),ct})(),de.wrapper.setAttribute("role","application")})(),ie.postMessage&&window.addEventListener("message",En,!1),setInterval((()=>{(!Ee.isActive()&&de.wrapper.scrollTop!==0||de.wrapper.scrollLeft!==0)&&(de.wrapper.scrollTop=0,de.wrapper.scrollLeft=0)}),1e3),document.addEventListener("fullscreenchange",ra),document.addEventListener("webkitfullscreenchange",ra),zt().forEach((ct=>{t(ct,"section").forEach(((Et,Ht)=>{Ht>0&&(Et.classList.remove("present"),Et.classList.remove("past"),Et.classList.add("future"),Et.setAttribute("aria-hidden","true"))}))})),lt(),Te.update(!0),(function(){const ct=ie.view==="print",Et=ie.view==="scroll"||ie.view==="reader";(ct||Et)&&(ct?kt():qe.unbind(),de.viewport.classList.add("loading-scroll-mode"),ct?document.readyState==="complete"?De.activate():window.addEventListener("load",(()=>De.activate())):Ee.activate())})(),Ye.readURL(),setTimeout((()=>{de.slides.classList.remove("no-transition"),de.wrapper.classList.add("ready"),qt({type:"ready",data:{indexh:Z,indexv:Q,currentSlide:te}})}),1))}function St(ct){de.statusElement.textContent=ct}function it(ct){let Et="";if(ct.nodeType===3)Et+=ct.textContent;else if(ct.nodeType===1){let Ht=ct.getAttribute("aria-hidden"),je=window.getComputedStyle(ct).display==="none";Ht==="true"||je||Array.from(ct.childNodes).forEach((nt=>{Et+=it(nt)}))}return Et=Et.trim(),Et===""?"":Et+" "}function lt(ct){const Et={...ie};if(typeof ct=="object"&&e(ie,ct),J.isReady()===!1)return;const Ht=de.wrapper.querySelectorAll(m$1).length;de.wrapper.classList.remove(Et.transition),de.wrapper.classList.add(ie.transition),de.wrapper.setAttribute("data-transition-speed",ie.transitionSpeed),de.wrapper.setAttribute("data-background-transition",ie.backgroundTransition),de.viewport.style.setProperty("--slide-width",typeof ie.width=="string"?ie.width:ie.width+"px"),de.viewport.style.setProperty("--slide-height",typeof ie.height=="string"?ie.height:ie.height+"px"),ie.shuffle&&Yt(),i$3(de.wrapper,"embedded",ie.embedded),i$3(de.wrapper,"rtl",ie.rtl),i$3(de.wrapper,"center",ie.center),ie.pause===!1&&dt(),Re.reset(),ne&&(ne.destroy(),ne=null),Ht>1&&ie.autoSlide&&ie.autoSlideStoppable&&(ne=new W$1(de.wrapper,(()=>Math.min(Math.max((Date.now()-ye)/fe,0),1))),ne.on("click",Al),be=!1),ie.navigationMode!=="default"?de.wrapper.setAttribute("data-navigation-mode",ie.navigationMode):de.wrapper.removeAttribute("data-navigation-mode"),et.configure(ie,Et),ze.configure(ie,Et),Ve.configure(ie,Et),ke.configure(ie,Et),Fe.configure(ie,Et),Ge.configure(ie,Et),Le.configure(ie,Et),Ce.configure(ie,Et),It()}function gt(){window.addEventListener("resize",Ir,!1),ie.touch&&qe.bind(),ie.keyboard&&Ge.bind(),ie.progress&&Fe.bind(),ie.respondToHashChanges&&Ye.bind(),ke.bind(),ze.bind(),de.slides.addEventListener("click",On,!1),de.slides.addEventListener("transitionend",ki,!1),de.pauseOverlay.addEventListener("click",dt,!1),ie.focusBodyOnPageVisibilityChange&&document.addEventListener("visibilitychange",ks,!1)}function kt(){qe.unbind(),ze.unbind(),Ge.unbind(),ke.unbind(),Fe.unbind(),Ye.unbind(),window.removeEventListener("resize",Ir,!1),de.slides.removeEventListener("click",On,!1),de.slides.removeEventListener("transitionend",ki,!1),de.pauseOverlay.removeEventListener("click",dt,!1)}function Jt(ct,Et,Ht){G.addEventListener(ct,Et,Ht)}function li(ct,Et,Ht){G.removeEventListener(ct,Et,Ht)}function si(ct){typeof ct.layout=="string"&&(ue.layout=ct.layout),typeof ct.overview=="string"&&(ue.overview=ct.overview),ue.layout?a$1(de.slides,ue.layout+" "+ue.overview):a$1(de.slides,ue.overview)}function qt({target:ct=de.wrapper,type:Et,data:Ht,bubbles:je=!0}){let nt=document.createEvent("HTMLEvents",1,2);return nt.initEvent(Et,je,!0),e(nt,Ht),ct.dispatchEvent(nt),ct===de.wrapper&&Ke(Et),nt}function vt(ct){qt({type:"slidechanged",data:{indexh:Z,indexv:Q,previousSlide:ee,currentSlide:te,origin:ct}})}function Ke(ct,Et){if(ie.postMessageEvents&&window.parent!==window.self){let Ht={namespace:"reveal",eventName:ct,state:Di()};e(Ht,Et),window.parent.postMessage(JSON.stringify(Ht),"*")}}function Tt(){if(de.wrapper&&!De.isActive()){const ct=de.viewport.offsetWidth,Et=de.viewport.offsetHeight;if(!ie.disableLayout){u&&!ie.embedded&&document.documentElement.style.setProperty("--vh",.01*window.innerHeight+"px");const Ht=Ee.isActive()?Lt(ct,Et):Lt(),je=ce;Ut(ie.width,ie.height),de.slides.style.width=Ht.width+"px",de.slides.style.height=Ht.height+"px",ce=Math.min(Ht.presentationWidth/Ht.width,Ht.presentationHeight/Ht.height),ce=Math.max(ce,ie.minScale),ce=Math.min(ce,ie.maxScale),ce===1||Ee.isActive()?(de.slides.style.zoom="",de.slides.style.left="",de.slides.style.top="",de.slides.style.bottom="",de.slides.style.right="",si({layout:""})):(de.slides.style.zoom="",de.slides.style.left="50%",de.slides.style.top="50%",de.slides.style.bottom="auto",de.slides.style.right="auto",si({layout:"translate(-50%, -50%) scale("+ce+")"}));const nt=Array.from(de.wrapper.querySelectorAll(m$1));for(let pt=0,ft=nt.length;pt<ft;pt++){const ut=nt[pt];ut.style.display!=="none"&&(ie.center||ut.classList.contains("center")?ut.classList.contains("stack")?ut.style.top=0:ut.style.top=Math.max((Ht.height-ut.scrollHeight)/2,0)+"px":ut.style.top="")}je!==ce&&qt({type:"resize",data:{oldScale:je,scale:ce,size:Ht}})}(function(){if(de.wrapper&&!ie.disableLayout&&!De.isActive()&&typeof ie.scrollActivationWidth=="number"&&ie.view!=="scroll"){const Ht=Lt();Ht.presentationWidth>0&&Ht.presentationWidth<=ie.scrollActivationWidth?Ee.isActive()||(Te.create(),Ee.activate()):Ee.isActive()&&Ee.deactivate()}})(),de.viewport.style.setProperty("--slide-scale",ce),de.viewport.style.setProperty("--viewport-width",ct+"px"),de.viewport.style.setProperty("--viewport-height",Et+"px"),Ee.layout(),Fe.update(),Te.updateParallax(),Ue.isActive()&&Ue.update()}}function Ut(ct,Et){t(de.slides,"section > .stretch, section > .r-stretch").forEach((Ht=>{let je=((nt,pt=0)=>{if(nt){let ft,ut=nt.style.height;return nt.style.height="0px",nt.parentNode.style.height="auto",ft=pt-nt.parentNode.offsetHeight,nt.style.height=ut+"px",nt.parentNode.style.removeProperty("height"),ft}return pt})(Ht,Et);if(/(img|video)/gi.test(Ht.nodeName)){const nt=Ht.naturalWidth||Ht.videoWidth,pt=Ht.naturalHeight||Ht.videoHeight,ft=Math.min(ct/nt,je/pt);Ht.style.width=nt*ft+"px",Ht.style.height=pt*ft+"px"}else Ht.style.width=ct+"px",Ht.style.height=je+"px"}))}function Lt(ct,Et){let Ht=ie.width,je=ie.height;ie.disableLayout&&(Ht=de.slides.offsetWidth,je=de.slides.offsetHeight);const nt={width:Ht,height:je,presentationWidth:ct||de.wrapper.offsetWidth,presentationHeight:Et||de.wrapper.offsetHeight};return nt.presentationWidth-=nt.presentationWidth*ie.margin,nt.presentationHeight-=nt.presentationHeight*ie.margin,typeof nt.width=="string"&&/%$/.test(nt.width)&&(nt.width=parseInt(nt.width,10)/100*nt.presentationWidth),typeof nt.height=="string"&&/%$/.test(nt.height)&&(nt.height=parseInt(nt.height,10)/100*nt.presentationHeight),nt}function jt(ct,Et){typeof ct=="object"&&typeof ct.setAttribute=="function"&&ct.setAttribute("data-previous-indexv",Et||0)}function ri(ct){if(typeof ct=="object"&&typeof ct.setAttribute=="function"&&ct.classList.contains("stack")){const Et=ct.hasAttribute("data-start-indexv")?"data-start-indexv":"data-previous-indexv";return parseInt(ct.getAttribute(Et)||0,10)}return 0}function ti(ct=te){return ct&&ct.parentNode&&!!ct.parentNode.nodeName.match(/section/i)}function di(){return!(!te||!ti(te))&&!te.nextElementSibling}function Qe(){return Z===0&&Q===0}function He(){return!!te&&!te.nextElementSibling&&(!ti(te)||!te.parentNode.nextElementSibling)}function _t(){if(ie.pause){const ct=de.wrapper.classList.contains("paused");Ii(),de.wrapper.classList.add("paused"),ct===!1&&qt({type:"paused"})}}function dt(){const ct=de.wrapper.classList.contains("paused");de.wrapper.classList.remove("paused"),Si(),ct&&qt({type:"resumed"})}function At(ct){typeof ct=="boolean"?ct?_t():dt():Nt()?dt():_t()}function Nt(){return de.wrapper.classList.contains("paused")}function fi(ct,Et,Ht,je){if(qt({type:"beforeslidechange",data:{indexh:ct===void 0?Z:ct,indexv:Et===void 0?Q:Et,origin:je}}).defaultPrevented)return;ee=te;const nt=de.wrapper.querySelectorAll(f);if(Ee.isActive()){const vi=Ee.getSlideByIndices(ct,Et);return void(vi&&Ee.scrollToSlide(vi))}if(nt.length===0)return;Et!==void 0||Ue.isActive()||(Et=ri(nt[ct])),ee&&ee.parentNode&&ee.parentNode.classList.contains("stack")&&jt(ee.parentNode,Q);const pt=ae.concat();ae.length=0;let ft=Z||0,ut=Q||0;Z=Rt(f,ct===void 0?Z:ct),Q=Rt(y,Et===void 0?Q:Et);let ii=Z!==ft||Q!==ut;ii||(ee=null);let ci=nt[Z],ui=ci.querySelectorAll("section");G.classList.toggle("is-vertical-slide",ui.length>1),te=ui[Q]||ci;let ai=!1;ii&&ee&&te&&!Ue.isActive()&&(me="running",ai=Kt(ee,te,ft,ut),ai&&de.slides.classList.add("disable-slide-transitions")),tt(),Tt(),Ue.isActive()&&Ue.update(),Ht!==void 0&&Le.goto(Ht),ee&&ee!==te&&(ee.classList.remove("present"),ee.setAttribute("aria-hidden","true"),Qe()&&setTimeout((()=>{t(de.wrapper,f+".stack").forEach((vi=>{jt(vi,0)}))}),0));e:for(let vi=0,Ti=ae.length;vi<Ti;vi++){for(let bi=0;bi<pt.length;bi++)if(pt[bi]===ae[vi]){pt.splice(bi,1);continue e}de.viewport.classList.add(ae[vi]),qt({type:ae[vi]})}for(;pt.length;)de.viewport.classList.remove(pt.pop());ii&&vt(je),!ii&&ee||(Se.stopEmbeddedContent(ee),Se.startEmbeddedContent(te)),requestAnimationFrame((()=>{St(it(te))})),Fe.update(),ke.update(),et.update(),Te.update(),Te.updateParallax(),Ce.update(),Le.update(),Ye.writeURL(),Si(),ai&&(setTimeout((()=>{de.slides.classList.remove("disable-slide-transitions")}),0),ie.autoAnimate&&Re.run(ee,te))}function Kt(ct,Et,Ht,je){return ct.hasAttribute("data-auto-animate")&&Et.hasAttribute("data-auto-animate")&&ct.getAttribute("data-auto-animate-id")===Et.getAttribute("data-auto-animate-id")&&!(Z>Ht||Q>je?Et:ct).hasAttribute("data-auto-animate-restart")}function It(){kt(),gt(),Tt(),fe=ie.autoSlide,Si(),Te.create(),Ye.writeURL(),ie.sortFragmentsOnSync===!0&&Le.sortAll(),ke.update(),Fe.update(),tt(),et.update(),et.updateVisibility(),Xe.update(),Te.update(!0),Ce.update(),Se.formatEmbeddedContent(),ie.autoPlayMedia===!1?Se.stopEmbeddedContent(te,{unloadIframes:!1}):Se.startEmbeddedContent(te),Ue.isActive()&&Ue.layout()}function Yt(ct=zt()){ct.forEach(((Et,Ht)=>{let je=ct[Math.floor(Math.random()*ct.length)];je.parentNode===Et.parentNode&&Et.parentNode.insertBefore(Et,je);let nt=Et.querySelectorAll("section");nt.length&&Yt(nt)}))}function Rt(ct,Et){let Ht=t(de.wrapper,ct),je=Ht.length,nt=Ee.isActive()||De.isActive(),pt=!1,ft=!1;if(je){ie.loop&&(Et>=je&&(pt=!0),(Et%=je)<0&&(Et=je+Et,ft=!0)),Et=Math.max(Math.min(Et,je-1),0);for(let ui=0;ui<je;ui++){let ai=Ht[ui],vi=ie.rtl&&!ti(ai);ai.classList.remove("past"),ai.classList.remove("present"),ai.classList.remove("future"),ai.setAttribute("hidden",""),ai.setAttribute("aria-hidden","true"),ai.querySelector("section")&&ai.classList.add("stack"),nt?ai.classList.add("present"):ui<Et?(ai.classList.add(vi?"future":"past"),ie.fragments&&Pt(ai)):ui>Et?(ai.classList.add(vi?"past":"future"),ie.fragments&&mt(ai)):ui===Et&&ie.fragments&&(pt?mt(ai):ft&&Pt(ai))}let ut=Ht[Et],ii=ut.classList.contains("present");ut.classList.add("present"),ut.removeAttribute("hidden"),ut.removeAttribute("aria-hidden"),ii||qt({target:ut,type:"visible",bubbles:!1});let ci=ut.getAttribute("data-state");ci&&(ae=ae.concat(ci.split(" ")))}else Et=0;return Et}function Pt(ct){t(ct,".fragment").forEach((Et=>{Et.classList.add("visible"),Et.classList.remove("current-fragment")}))}function mt(ct){t(ct,".fragment.visible").forEach((Et=>{Et.classList.remove("visible","current-fragment")}))}function tt(){let ct,Et,Ht=zt(),je=Ht.length;if(je&&Z!==void 0){let nt=Ue.isActive()?10:ie.viewDistance;u&&(nt=Ue.isActive()?6:ie.mobileViewDistance),De.isActive()&&(nt=Number.MAX_VALUE);for(let pt=0;pt<je;pt++){let ft=Ht[pt],ut=t(ft,"section"),ii=ut.length;if(ct=Math.abs((Z||0)-pt)||0,ie.loop&&(ct=Math.abs(((Z||0)-pt)%(je-nt))||0),ct<nt?Se.load(ft):Se.unload(ft),ii){let ci=ri(ft);for(let ui=0;ui<ii;ui++){let ai=ut[ui];Et=Math.abs(pt===(Z||0)?(Q||0)-ui:ui-ci),ct+Et<nt?Se.load(ai):Se.unload(ai)}}}Ft()?de.wrapper.classList.add("has-vertical-slides"):de.wrapper.classList.remove("has-vertical-slides"),Wt()?de.wrapper.classList.add("has-horizontal-slides"):de.wrapper.classList.remove("has-horizontal-slides")}}function Ze({includeFragments:ct=!1}={}){let Et=de.wrapper.querySelectorAll(f),Ht=de.wrapper.querySelectorAll(y),je={left:Z>0,right:Z<Et.length-1,up:Q>0,down:Q<Ht.length-1};if(ie.loop&&(Et.length>1&&(je.left=!0,je.right=!0),Ht.length>1&&(je.up=!0,je.down=!0)),Et.length>1&&ie.navigationMode==="linear"&&(je.right=je.right||je.down,je.left=je.left||je.up),ct===!0){let nt=Le.availableRoutes();je.left=je.left||nt.prev,je.up=je.up||nt.prev,je.down=je.down||nt.next,je.right=je.right||nt.next}if(ie.rtl){let nt=je.left;je.left=je.right,je.right=nt}return je}function Zt(ct=te){let Et=zt(),Ht=0;e:for(let je=0;je<Et.length;je++){let nt=Et[je],pt=nt.querySelectorAll("section");for(let ft=0;ft<pt.length;ft++){if(pt[ft]===ct)break e;pt[ft].dataset.visibility!=="uncounted"&&Ht++}if(nt===ct)break;nt.classList.contains("stack")===!1&&nt.dataset.visibility!=="uncounted"&&Ht++}return Ht}function rt(ct){let Et,Ht=Z,je=Q;if(ct)if(Ee.isActive())Ht=parseInt(ct.getAttribute("data-index-h"),10),ct.getAttribute("data-index-v")&&(je=parseInt(ct.getAttribute("data-index-v"),10));else{let nt=ti(ct),pt=nt?ct.parentNode:ct,ft=zt();Ht=Math.max(ft.indexOf(pt),0),je=void 0,nt&&(je=Math.max(t(ct.parentNode,"section").indexOf(ct),0))}if(!ct&&te&&te.querySelectorAll(".fragment").length>0){let nt=te.querySelector(".current-fragment");Et=nt&&nt.hasAttribute("data-fragment-index")?parseInt(nt.getAttribute("data-fragment-index"),10):te.querySelectorAll(".fragment.visible").length-1}return{h:Ht,v:je,f:Et}}function Qt(){return t(de.wrapper,m$1+':not(.stack):not([data-visibility="uncounted"])')}function zt(){return t(de.wrapper,f)}function ei(){return t(de.wrapper,".slides>section>section")}function Wt(){return zt().length>1}function Ft(){return ei().length>1}function hi(){return Qt().length}function pi(ct,Et){let Ht=zt()[ct],je=Ht&&Ht.querySelectorAll("section");return je&&je.length&&typeof Et=="number"?je?je[Et]:void 0:Ht}function Di(){let ct=rt();return{indexh:ct.h,indexv:ct.v,indexf:ct.f,paused:Nt(),overview:Ue.isActive(),...Xe.getState()}}function Si(){if(Ii(),te&&ie.autoSlide!==!1){let ct=te.querySelector(".current-fragment[data-autoslide]"),Et=ct?ct.getAttribute("data-autoslide"):null,Ht=te.parentNode?te.parentNode.getAttribute("data-autoslide"):null,je=te.getAttribute("data-autoslide");Et?fe=parseInt(Et,10):je?fe=parseInt(je,10):Ht?fe=parseInt(Ht,10):(fe=ie.autoSlide,te.querySelectorAll(".fragment").length===0&&t(te,"video, audio").forEach((nt=>{nt.hasAttribute("data-autoplay")&&fe&&1e3*nt.duration/nt.playbackRate>fe&&(fe=1e3*nt.duration/nt.playbackRate+1e3)}))),!fe||be||Nt()||Ue.isActive()||He()&&!Le.availableRoutes().next&&ie.loop!==!0||(_e=setTimeout((()=>{typeof ie.autoSlideMethod=="function"?ie.autoSlideMethod():$n(),Si()}),fe),ye=Date.now()),ne&&ne.setPlaying(_e!==-1)}}function Ii(){clearTimeout(_e),_e=-1}function vn(){fe&&!be&&(be=!0,qt({type:"autoslidepaused"}),clearTimeout(_e),ne&&ne.setPlaying(!1))}function Tr(){fe&&be&&(be=!1,qt({type:"autoslideresumed"}),Si())}function Ln({skipFragments:ct=!1}={}){if(se.hasNavigatedHorizontally=!0,Ee.isActive())return Ee.prev();ie.rtl?(Ue.isActive()||ct||Le.next()===!1)&&Ze().left&&fi(Z+1,ie.navigationMode==="grid"?Q:void 0):(Ue.isActive()||ct||Le.prev()===!1)&&Ze().left&&fi(Z-1,ie.navigationMode==="grid"?Q:void 0)}function wr({skipFragments:ct=!1}={}){if(se.hasNavigatedHorizontally=!0,Ee.isActive())return Ee.next();ie.rtl?(Ue.isActive()||ct||Le.prev()===!1)&&Ze().right&&fi(Z-1,ie.navigationMode==="grid"?Q:void 0):(Ue.isActive()||ct||Le.next()===!1)&&Ze().right&&fi(Z+1,ie.navigationMode==="grid"?Q:void 0)}function _n({skipFragments:ct=!1}={}){if(Ee.isActive())return Ee.prev();(Ue.isActive()||ct||Le.prev()===!1)&&Ze().up&&fi(Z,Q-1)}function Ur({skipFragments:ct=!1}={}){if(se.hasNavigatedVertically=!0,Ee.isActive())return Ee.next();(Ue.isActive()||ct||Le.next()===!1)&&Ze().down&&fi(Z,Q+1)}function Bn({skipFragments:ct=!1}={}){if(Ee.isActive())return Ee.prev();if(ct||Le.prev()===!1)if(Ze().up)_n({skipFragments:ct});else{let Et;if(Et=ie.rtl?t(de.wrapper,f+".future").pop():t(de.wrapper,f+".past").pop(),Et&&Et.classList.contains("stack")){let Ht=Et.querySelectorAll("section").length-1||void 0;fi(Z-1,Ht)}else ie.rtl?wr({skipFragments:ct}):Ln({skipFragments:ct})}}function $n({skipFragments:ct=!1}={}){if(se.hasNavigatedHorizontally=!0,se.hasNavigatedVertically=!0,Ee.isActive())return Ee.next();if(ct||Le.next()===!1){let Et=Ze();Et.down&&Et.right&&ie.loop&&di()&&(Et.down=!1),Et.down?Ur({skipFragments:ct}):ie.rtl?Ln({skipFragments:ct}):wr({skipFragments:ct})}}function En(ct){let Et=ct.data;if(typeof Et=="string"&&Et.charAt(0)==="{"&&Et.charAt(Et.length-1)==="}"&&(Et=JSON.parse(Et),Et.method&&typeof J[Et.method]=="function"))if(b$1.test(Et.method)===!1){const Ht=J[Et.method].apply(J,Et.args);Ke("callback",{method:Et.method,result:Ht})}else console.warn('reveal.js: "'+Et.method+'" is is blacklisted from the postMessage API')}function ki(ct){me==="running"&&/section/gi.test(ct.target.nodeName)&&(me="idle",qt({type:"slidetransitionend",data:{indexh:Z,indexv:Q,previousSlide:ee,currentSlide:te}}))}function On(ct){const Et=r(ct.target,'a[href^="#"]');if(Et){const Ht=Et.getAttribute("href"),je=Ye.getIndicesFromHash(Ht);je&&(J.slide(je.h,je.v,je.f),ct.preventDefault())}}function Ir(ct){Tt()}function ks(ct){document.hidden===!1&&document.activeElement!==document.body&&(typeof document.activeElement.blur=="function"&&document.activeElement.blur(),document.body.focus())}function ra(ct){(document.fullscreenElement||document.webkitFullscreenElement)===de.wrapper&&(ct.stopImmediatePropagation(),setTimeout((()=>{J.layout(),J.focus.focus()}),1))}function Al(ct){He()&&ie.loop===!1?(fi(0,0),Tr()):be?Tr():vn()}const sa={VERSION:K,initialize:function(ct){if(!G)throw'Unable to find presentation root (<div class="reveal">).';if(re)throw"Reveal.js has already been initialized.";if(re=!0,de.wrapper=G,de.slides=G.querySelector(".slides"),!de.slides)throw'Unable to find slides container (<div class="slides">).';return ie={...j$1,...ie,..._,...ct,...d()},/print-pdf/gi.test(window.location.search)&&(ie.view="print"),(function(){ie.embedded===!0?de.viewport=r(G,".reveal-viewport")||G:(de.viewport=document.body,document.documentElement.classList.add("reveal-full-page")),de.viewport.classList.add("reveal-viewport")})(),window.addEventListener("load",Tt,!1),$e.load(ie.plugins,ie.dependencies).then(ot),new Promise((Et=>J.on("ready",Et)))},configure:lt,destroy:function(){re=!1,oe!==!1&&(kt(),Ii(),et.destroy(),ze.destroy(),Xe.destroy(),$e.destroy(),Ve.destroy(),ke.destroy(),Fe.destroy(),Te.destroy(),Ce.destroy(),Me.destroy(),document.removeEventListener("fullscreenchange",ra),document.removeEventListener("webkitfullscreenchange",ra),document.removeEventListener("visibilitychange",ks,!1),window.removeEventListener("message",En,!1),window.removeEventListener("load",Tt,!1),de.pauseOverlay&&de.pauseOverlay.remove(),de.statusElement&&de.statusElement.remove(),document.documentElement.classList.remove("reveal-full-page"),de.wrapper.classList.remove("ready","center","has-horizontal-slides","has-vertical-slides"),de.wrapper.removeAttribute("data-transition-speed"),de.wrapper.removeAttribute("data-background-transition"),de.viewport.classList.remove("reveal-viewport"),de.viewport.style.removeProperty("--slide-width"),de.viewport.style.removeProperty("--slide-height"),de.slides.style.removeProperty("width"),de.slides.style.removeProperty("height"),de.slides.style.removeProperty("zoom"),de.slides.style.removeProperty("left"),de.slides.style.removeProperty("top"),de.slides.style.removeProperty("bottom"),de.slides.style.removeProperty("right"),de.slides.style.removeProperty("transform"),Array.from(de.wrapper.querySelectorAll(m$1)).forEach((ct=>{ct.style.removeProperty("display"),ct.style.removeProperty("top"),ct.removeAttribute("hidden"),ct.removeAttribute("aria-hidden")})))},sync:It,syncSlide:function(ct=te){Te.sync(ct),Le.sync(ct),Se.load(ct),Te.update(),et.update()},syncFragments:Le.sync.bind(Le),slide:fi,left:Ln,right:wr,up:_n,down:Ur,prev:Bn,next:$n,navigateLeft:Ln,navigateRight:wr,navigateUp:_n,navigateDown:Ur,navigatePrev:Bn,navigateNext:$n,navigateFragment:Le.goto.bind(Le),prevFragment:Le.prev.bind(Le),nextFragment:Le.next.bind(Le),on:Jt,off:li,addEventListener:Jt,removeEventListener:li,layout:Tt,shuffle:Yt,availableRoutes:Ze,availableFragments:Le.availableRoutes.bind(Le),toggleHelp:Xe.toggleHelp.bind(Xe),toggleOverview:Ue.toggle.bind(Ue),toggleScrollView:Ee.toggle.bind(Ee),togglePause:At,toggleAutoSlide:function(ct){typeof ct=="boolean"?ct?Tr():vn():be?Tr():vn()},toggleJumpToSlide:function(ct){typeof ct=="boolean"?ct?Me.show():Me.hide():Me.isVisible()?Me.hide():Me.show()},isFirstSlide:Qe,isLastSlide:He,isLastVerticalSlide:di,isVerticalSlide:ti,isVerticalStack:function(ct=te){return ct.classList.contains(".stack")||ct.querySelector("section")!==null},isPaused:Nt,isAutoSliding:function(){return!(!fe||be)},isSpeakerNotes:et.isSpeakerNotesWindow.bind(et),isOverview:Ue.isActive.bind(Ue),isFocused:ze.isFocused.bind(ze),isOverlayOpen:Xe.isOpen.bind(Xe),isScrollView:Ee.isActive.bind(Ee),isPrintView:De.isActive.bind(De),isReady:()=>oe,loadSlide:Se.load.bind(Se),unloadSlide:Se.unload.bind(Se),startEmbeddedContent:()=>Se.startEmbeddedContent(te),stopEmbeddedContent:()=>Se.stopEmbeddedContent(te,{unloadIframes:!1}),previewIframe:Xe.previewIframe.bind(Xe),previewImage:Xe.previewImage.bind(Xe),previewVideo:Xe.previewVideo.bind(Xe),showPreview:Xe.previewIframe.bind(Xe),hidePreview:Xe.close.bind(Xe),addEventListeners:gt,removeEventListeners:kt,dispatchEvent:qt,getState:Di,setState:function(ct){if(typeof ct=="object"){fi(s(ct.indexh),s(ct.indexv),s(ct.indexf));let Et=s(ct.paused),Ht=s(ct.overview);typeof Et=="boolean"&&Et!==Nt()&&At(Et),typeof Ht=="boolean"&&Ht!==Ue.isActive()&&Ue.toggle(Ht),Xe.setState(ct)}},getProgress:function(){let ct=hi(),Et=Zt();if(te){let Ht=te.querySelectorAll(".fragment");Ht.length>0&&(Et+=te.querySelectorAll(".fragment.visible").length/Ht.length*.9)}return Math.min(Et/(ct-1),1)},getIndices:rt,getSlidesAttributes:function(){return Qt().map((ct=>{let Et={};for(let Ht=0;Ht<ct.attributes.length;Ht++){let je=ct.attributes[Ht];Et[je.name]=je.value}return Et}))},getSlidePastCount:Zt,getTotalSlides:hi,getSlide:pi,getPreviousSlide:()=>ee,getCurrentSlide:()=>te,getSlideBackground:function(ct,Et){let Ht=typeof ct=="number"?pi(ct,Et):ct;if(Ht)return Ht.slideBackgroundElement},getSlideNotes:et.getSlideNotes.bind(et),getSlides:Qt,getHorizontalSlides:zt,getVerticalSlides:ei,hasHorizontalSlides:Wt,hasVerticalSlides:Ft,hasNavigatedHorizontally:()=>se.hasNavigatedHorizontally,hasNavigatedVertically:()=>se.hasNavigatedVertically,shouldAutoAnimateBetween:Kt,addKeyBinding:Ge.addKeyBinding.bind(Ge),removeKeyBinding:Ge.removeKeyBinding.bind(Ge),triggerKey:Ge.triggerKey.bind(Ge),registerKeyboardShortcut:Ge.registerKeyboardShortcut.bind(Ge),getComputedSlideSize:Lt,setCurrentScrollPage:function(ct,Et,Ht){let je=Z||0;Z=Et,Q=Ht;const nt=te!==ct;ee=te,te=ct,te&&ee&&ie.autoAnimate&&Kt(ee,te,je,Q)&&Re.run(ee,te),nt&&(ee&&(Se.stopEmbeddedContent(ee),Se.stopEmbeddedContent(ee.slideBackgroundElement)),Se.startEmbeddedContent(te),Se.startEmbeddedContent(te.slideBackgroundElement)),requestAnimationFrame((()=>{St(it(te))})),vt()},getScale:()=>ce,getConfig:()=>ie,getQueryHash:d,getSlidePath:Ye.getHash.bind(Ye),getRevealElement:()=>G,getSlidesElement:()=>de.slides,getViewportElement:()=>de.viewport,getBackgroundsElement:()=>Te.element,registerPlugin:$e.registerPlugin.bind($e),hasPlugin:$e.hasPlugin.bind($e),getPlugin:$e.getPlugin.bind($e),getPlugins:$e.getRegisteredPlugins.bind($e)};return e(J,{...sa,announceStatus:St,getStatusText:it,focus:ze,scroll:Ee,progress:Fe,controls:ke,location:Ye,overview:Ue,keyboard:Ge,fragments:Le,backgrounds:Te,slideContent:Se,slideNumber:Ce,onUserInput:function(ct){ie.autoSlideStoppable&&vn()},closeOverlay:Xe.close.bind(Xe),updateSlidesVisibility:tt,layoutSlideContents:Ut,transformSlides:si,cueAutoSlide:Si,cancelAutoSlide:Ii}),sa}let X$1=$,Y=[];X$1.initialize=G=>(Object.assign(X$1,new $(document.querySelector(".reveal"),G)),Y.map((_=>_(X$1))),X$1.initialize()),["configure","on","off","addEventListener","removeEventListener","registerPlugin"].forEach((G=>{X$1[G]=(..._)=>{Y.push((J=>J[G].call(null,..._)))}})),X$1.isReady=()=>!1,X$1.VERSION=K;const paper="/cubetests/assets/unit-cube-test-BqzJ90WS.pdf";var math$1={exports:{}},math=math$1.exports,hasRequiredMath;function requireMath(){return hasRequiredMath||(hasRequiredMath=1,(function(G,_){(function(J,Z){G.exports=Z()})(math,(function(){const J=()=>{let Q,ee={messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],skipTags:["script","noscript","style","textarea","pre","code"]},skipStartupTypeset:!0};return{id:"mathjax2",init:function(te){Q=te;let ne=Q.getConfig().mathjax2||Q.getConfig().math||{},ie={...ee,...ne},re=(ie.mathjax||"https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js")+"?config="+(ie.config||"TeX-AMS_HTML-full");ie.tex2jax={...ee.tex2jax,...ne.tex2jax},ie.mathjax=ie.config=null,(function(oe,se){let ae=document.querySelector("head"),ce=document.createElement("script");ce.type="text/javascript",ce.src=oe;let ue=()=>{typeof se=="function"&&(se.call(),se=null)};ce.onload=ue,ce.onreadystatechange=()=>{this.readyState==="loaded"&&ue()},ae.appendChild(ce)})(re,(function(){MathJax.Hub.Config(ie),MathJax.Hub.Queue(["Typeset",MathJax.Hub,Q.getRevealElement()]),MathJax.Hub.Queue(Q.layout),Q.on("slidechanged",(function(oe){MathJax.Hub.Queue(["Typeset",MathJax.Hub,oe.currentSlide])}))}))}}};return Plugin=Object.assign(J(),{KaTeX:()=>{let Q,ee={version:"latest",delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredTags:["script","noscript","style","textarea","pre","code"]};const te=ne=>new Promise(((ie,re)=>{const oe=document.createElement("script");oe.type="text/javascript",oe.onload=ie,oe.onerror=re,oe.src=ne,document.head.append(oe)}));return{id:"katex",init:function(ne){Q=ne;let ie=Q.getConfig().katex||{},re={...ee,...ie};const{local:oe,version:se,extensions:ae,...ce}=re;let ue=re.local||"https://cdn.jsdelivr.net/npm/katex",de=re.local?"":"@"+re.version,me=ue+de+"/dist/katex.min.css",fe=ue+de+"/dist/contrib/mhchem.min.js",_e=ue+de+"/dist/contrib/auto-render.min.js",ye=[ue+de+"/dist/katex.min.js"];re.extensions&&re.extensions.includes("mhchem")&&ye.push(fe),ye.push(_e);const be=()=>{renderMathInElement(ne.getSlidesElement(),ce),Q.layout()};(Se=>{let Ce=document.createElement("link");Ce.rel="stylesheet",Ce.href=Se,document.head.appendChild(Ce)})(me),(async function(Se){for(const Ce of Se)await te(Ce)})(ye).then((()=>{Q.isReady()?be():Q.on("ready",be.bind(this))}))}}},MathJax2:J,MathJax3:()=>{let Q,ee={tex:{inlineMath:[["$","$"],["\\(","\\)"]]},options:{skipHtmlTags:["script","noscript","style","textarea","pre","code"]},startup:{ready:()=>{MathJax.startup.defaultReady(),MathJax.startup.promise.then((()=>{Q.layout()}))}}};return{id:"mathjax3",init:function(te){Q=te;let ne=Q.getConfig().mathjax3||{},ie={...ee,...ne};ie.tex={...ee.tex,...ne.tex},ie.options={...ee.options,...ne.options},ie.startup={...ee.startup,...ne.startup};let re=ie.mathjax||"https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js";ie.mathjax=null,window.MathJax=ie,(function(oe,se){let ae=document.createElement("script");ae.type="text/javascript",ae.id="MathJax-script",ae.src=oe,ae.async=!0,ae.onload=()=>{typeof se=="function"&&(se.call(),se=null)},document.head.appendChild(ae)})(re,(function(){Q.addEventListener("slidechanged",(function(oe){MathJax.typeset()}))}))}}}})}))})(math$1)),math$1.exports}var mathExports=requireMath();const RevealMath=getDefaultExportFromCjs(mathExports);(function(G,_){typeof exports=="object"&&typeof module=="object"?module.exports=_():typeof define=="function"&&define.amd?define([],_):typeof exports=="object"?exports.JXG=_():G.JXG=_()})(typeof self<"u"?self:void 0,function(){return(function(){var __webpack_modules__={86:function(G,_,J){var Z=J(443),Q=J(561),ee=J(188);Z.A.GeonextParser={replacePow:function(te){var ne,ie,re,oe,se,ae,ce,ue,de,me,fe,_e;for(me=(te=te.replace(/(\s*)\^(\s*)/g,"^")).indexOf("^"),oe=-1;me>=0&&me<te.length-1;){if(oe===me)throw new Error("JSXGraph: Error while parsing expression '"+te+"'");if(oe=me,de=te.slice(0,me),fe=te.slice(me+1),de.charAt(de.length-1)===")"){for(ne=1,ie=de.length-2;ie>=0&&ne>0;)(re=de.charAt(ie))===")"?ne++:re==="("&&(ne-=1),ie-=1;if(ne!==0)throw new Error("JSXGraph: Missing '(' in expression");for(se="",ce=de.substring(0,ie+1),ue=ie;ue>=0&&ce.slice(ue,ue+1).match(/([\w.]+)/);)se=RegExp.$1+se,ue-=1;se=(se+=de.substring(ie+1,de.length)).replace(/([()+*%^\-/\][])/g,"\\$1")}else se="[\\w\\.]+";if(fe.match(/^([\w.]*\()/)){for(ne=1,ie=RegExp.$1.length;ie<fe.length&&ne>0;)(re=fe.charAt(ie))===")"?ne-=1:re==="("&&(ne+=1),ie+=1;if(ne!==0)throw new Error("JSXGraph: Missing ')' in expression");ae=(ae=fe.substring(0,ie)).replace(/([()+*%^\-/[\]])/g,"\\$1")}else ae="[\\w\\.]+";_e=new RegExp("("+se+")\\^("+ae+")"),me=(te=te.replace(_e,"pow($1,$2)")).indexOf("^")}return te},replaceIf:function(te){var ne,ie,re,oe,se,ae,ce,ue,de,me="",fe=null,_e=null,ye=null;if((re=te.indexOf("If("))<0)return te;for(te=te.replace(/""/g,"0");re>=0;){for(ne=te.slice(0,re),ie=te.slice(re+3),se=1,oe=0,ae=-1,ce=-1;oe<ie.length&&se>0;)(ue=ie.charAt(oe))===")"?se-=1:ue==="("?se+=1:ue===","&&se===1&&(ae<0?ae=oe:ce=oe),oe+=1;if(de=ie.slice(0,oe-1),ie=ie.slice(oe),ae<0||ce<0)return"";fe=de.slice(0,ae),_e=de.slice(ae+1,ce),ye=de.slice(ce+1),me+=ne+"(("+(fe=this.replaceIf(fe))+")?("+(_e=this.replaceIf(_e))+"):("+(ye=this.replaceIf(ye))+"))",fe=null,_e=null,re=(te=ie).indexOf("If(")}return me+=ie},replaceNameById:function(te,ne,ie){var re,oe,se,ae,ce=0,ue=["X","Y","L","V"],de=function(me){return ie?"$('"+me+"')":me};for(ae=0;ae<ue.length;ae++)for(ce=te.indexOf(ue[ae]+"(");ce>=0;)ce>=0&&(re=te.indexOf(")",ce+2))>=0&&(oe=(oe=te.slice(ce+2,re)).replace(/\\(['"])?/g,"$1"),(se=ne.elementsByName[oe])&&(te=te.slice(0,ce+2)+(ie?"$('":"")+de(se.id)+te.slice(re))),re=te.indexOf(")",ce+2),ce=te.indexOf(ue[ae]+"(",re);for(ce=te.indexOf("Dist(");ce>=0;)ce>=0&&(re=te.indexOf(",",ce+5))>=0&&(oe=(oe=te.slice(ce+5,re)).replace(/\\(['"])?/g,"$1"),(se=ne.elementsByName[oe])&&(te=te.slice(0,ce+5)+de(se.id)+te.slice(re))),re=te.indexOf(",",ce+5),ce=te.indexOf(",",re),(re=te.indexOf(")",ce+1))>=0&&(oe=(oe=te.slice(ce+1,re)).replace(/\\(['"])?/g,"$1"),(se=ne.elementsByName[oe])&&(te=te.slice(0,ce+1)+de(se.id)+te.slice(re))),re=te.indexOf(")",ce+1),ce=te.indexOf("Dist(",re);for(ue=["Deg","Rad"],ae=0;ae<ue.length;ae++)for(ce=te.indexOf(ue[ae]+"(");ce>=0;)ce>=0&&(re=te.indexOf(",",ce+4))>=0&&(oe=(oe=te.slice(ce+4,re)).replace(/\\(['"])?/g,"$1"),(se=ne.elementsByName[oe])&&(te=te.slice(0,ce+4)+de(se.id)+te.slice(re))),re=te.indexOf(",",ce+4),ce=te.indexOf(",",re),(re=te.indexOf(",",ce+1))>=0&&(oe=(oe=te.slice(ce+1,re)).replace(/\\(['"])?/g,"$1"),(se=ne.elementsByName[oe])&&(te=te.slice(0,ce+1)+de(se.id)+te.slice(re))),re=te.indexOf(",",ce+1),ce=te.indexOf(",",re),(re=te.indexOf(")",ce+1))>=0&&(oe=(oe=te.slice(ce+1,re)).replace(/\\(['"])?/g,"$1"),(se=ne.elementsByName[oe])&&(te=te.slice(0,ce+1)+de(se.id)+te.slice(re))),re=te.indexOf(")",ce+1),ce=te.indexOf(ue[ae]+"(",re);return te},replaceIdByObj:function(te){var ne=/(X|Y|L)\(([\w_]+)\)/g;return te=te.replace(ne,"$('$2').$1()"),ne=/(V)\(([\w_]+)\)/g,te=te.replace(ne,"$('$2').Value()"),ne=/(Dist)\(([\w_]+),([\w_]+)\)/g,te=te.replace(ne,"dist($('$2'), $('$3'))"),ne=/(Deg)\(([\w_]+),([ \w[\w_]+),([\w_]+)\)/g,te=te.replace(ne,"deg($('$2'),$('$3'),$('$4'))"),ne=/Rad\(([\w_]+),([\w_]+),([\w_]+)\)/g,te=te.replace(ne,"rad($('$1'),$('$2'),$('$3'))"),ne=/N\((.+)\)/g,te=te.replace(ne,"($1)")},geonext2JS:function(te,ne){var ie,re,oe,se=["Abs","ACos","ASin","ATan","Ceil","Cos","Exp","Factorial","Floor","Log","Max","Min","Random","Round","Sin","Sqrt","Tan","Trunc"],ae=["abs","acos","asin","atan","ceil","cos","exp","factorial","floor","log","max","min","random","round","sin","sqrt","tan","ceil"];for(re=te=(te=(te=te.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&amp;/g,"&"),re=this.replaceNameById(re,ne),re=this.replaceIf(re),re=this.replacePow(re),re=this.replaceIdByObj(re),oe=0;oe<se.length;oe++)ie=new RegExp(["(\\W|^)(",se[oe],")"].join(""),"ig"),re=re.replace(ie,["$1",ae[oe]].join(""));return re=(re=(re=(re=(re=re.replace(/True/g,"true")).replace(/False/g,"false")).replace(/fasle/g,"false")).replace(/Pi/g,"PI")).replace(/"/g,"'")},findDependencies:function(te,ne,ie){var re,oe,se,ae;for(oe in ee.A.exists(ie)||(ie=te.board),re=ie.elementsByName)re.hasOwnProperty(oe)&&oe!==te.name&&(re[oe].elementClass===Q.A.OBJECT_CLASS_TEXT&&re[oe].evalVisProp("islabel")||(ae=(ae=oe.replace(/\[/g,"\\[")).replace(/\]/g,"\\]"),se=new RegExp("\\(([\\w\\[\\]'_ ]+,)*("+ae+")(,[\\w\\[\\]'_ ]+)*\\)","g"),ne.search(se)>=0&&re[oe].addChild(te)))},gxt2jc:function(te,ne){var ie;return ie=te=(te=(te=te.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&amp;/g,"&"),ie=(ie=(ie=(ie=this.replaceNameById(ie,ne,!0)).replace(/True/g,"true")).replace(/False/g,"false")).replace(/fasle/g,"false")}},_.A=Z.A.GeonextParser},102:function(G,_,J){var Z=J(443),Q=J(477),ee=J(571),te=J(171),ne=J(588),ie=J(904),re=J(561),oe=J(188);Z.A.CoordsElement=function(se,ae){var ce;for(oe.A.exists(se)||(se=[1,0,0]),ce=0;ce<se.length;++ce)se[ce]=parseFloat(se[ce]);this.coords=new ie.A(re.A.COORDS_BY_USER,se,this.board),this.initialCoords=new ie.A(re.A.COORDS_BY_USER,se,this.board),this.actualCoords=new ie.A(re.A.COORDS_BY_USER,se,this.board),this.position=null,this.isConstrained=!1,this.onPolygon=!1,this.slideObject=null,this.slideObjects=[],this.needsUpdateFromParent=!0,this.groups=[],this.Xjc=null,this.Yjc=null,this.methodMap=oe.A.deepCopy(this.methodMap,{move:"moveTo",moveTo:"moveTo",moveAlong:"moveAlong",visit:"visit",glide:"makeGlider",makeGlider:"makeGlider",intersect:"makeIntersection",makeIntersection:"makeIntersection",X:"X",Y:"Y",Coords:"Coords",free:"free",setPosition:"setGliderPosition",setGliderPosition:"setGliderPosition",addConstraint:"addConstraint",dist:"Dist",Dist:"Dist",onPolygon:"onPolygon",startAnimation:"startAnimation",stopAnimation:"stopAnimation"}),oe.A.exists(this.element)&&this.addAnchor(se,ae),this.isDraggable=!0},Z.A.extend(Z.A.CoordsElement.prototype,{updateConstraint:function(){return this},updateCoords:function(se){return this.needsUpdate?(oe.A.exists(se)||(se=!1),this.evalVisProp("frozen")!==!0&&this.updateConstraint(),this.type===re.A.OBJECT_TYPE_GLIDER&&(this.isConstrained&&(se=!1),se?this.updateGliderFromParent():this.updateGlider()),this.updateTransform(se),this):this},updateGlider:function(){var se,ae,ce,ue,de,me,fe,_e,ye,be,Se,Ce,Me,Re,Te,Ee,De,Le,Ue,Ge,Ye=2*Math.PI,ke=!1,Fe=this.slideObject,Ve=[];if(this.needsUpdateFromParent=!1,Fe.elementClass===re.A.OBJECT_CLASS_CIRCLE)this.evalVisProp("isgeonext")&&(Ye=1),Re=ee.A.projectPointToCircle(this,Fe,this.board),Te=ee.A.rad([Fe.center.X()+1,Fe.center.Y()],Fe.center,this)/Ye;else if(Fe.elementClass===re.A.OBJECT_CLASS_LINE){if(this.onPolygon){if(ue=Fe.point1.coords.usrCoords,ae=(de=Fe.point2.coords.usrCoords)[se=1]-ue[se],Math.abs(ae)<Q.A.eps&&(ae=de[se=2]-ue[se]),fe=(ee.A.projectPointToLine(this,Fe,this.board).usrCoords[se]-ue[se])/ae,me=Fe.parentPolygon,fe<0){for(se=0;se<me.borders.length;se++)if(Fe===me.borders[se]){Fe=me.borders[(se-1+me.borders.length)%me.borders.length];break}}else if(fe>1){for(se=0;se<me.borders.length;se++)if(Fe===me.borders[se]){Fe=me.borders[(se+1+me.borders.length)%me.borders.length];break}}Fe.id!==this.slideObject.id&&(this.slideObject=Fe)}ue=Fe.point1.coords,de=Fe.point2.coords,(ae=ue.distance(re.A.COORDS_BY_USER,de))<Q.A.eps?(Re=ue,ke=!0,Te=0):(Re=ee.A.projectPointToLine(this,Fe,this.board),ue=ue.usrCoords.slice(0),de=de.usrCoords.slice(0),Math.abs(de[0])<Q.A.eps?(ae=de[se=1],Math.abs(ae)<Q.A.eps&&(ae=de[se=2]),Te=((ae=(Re.usrCoords[se]-ue[se])/ae)>=0?1:-1)*(ae=Math.abs(ae))/(ae+1)):Math.abs(ue[0])<Q.A.eps?(ae=ue[se=1],Math.abs(ae)<Q.A.eps&&(ae=ue[se=2]),Te=(ae=(Re.usrCoords[se]-de[se])/ae)<0?(1-2*ae)/(1-ae):1/(ae+1)):(ae=de[se=1]-ue[se],Math.abs(ae)<Q.A.eps&&(ae=de[se=2]-ue[se]),Te=(Re.usrCoords[se]-ue[se])/ae)),(De=this.findClosestSnapValue(Te))!==null?(Te=(this.evalVisProp("snapvalues")[De]-this._smin)/(this._smax-this._smin),this.update(!0)):(Ee=this.evalVisProp("snapwidth"))>0&&Math.abs(this._smax-this._smin)>=Q.A.eps&&(ce=(Te=Math.max(Math.min(Te,1),0))*(this._smax-this._smin),Te=((ce=Math.round(ce/Ee)*Ee+this._smin)-this._smin)/(this._smax-this._smin),this.update(!0)),ue=Fe.point1.coords,!Fe.evalVisProp("straightfirst")&&Math.abs(ue.usrCoords[0])>Q.A.eps&&Te<0&&(Re=ue,ke=!0,Te=0),de=Fe.point2.coords,!Fe.evalVisProp("straightlast")&&Math.abs(de.usrCoords[0])>Q.A.eps&&Te>1&&(Re=de,ke=!0,Te=1)}else if(Fe.type===re.A.OBJECT_TYPE_TURTLE)this.updateConstraint(),Re=(Le=ee.A.projectPointToTurtle(this,Fe,this.board))[0],Te=Le[1];else if(Fe.elementClass===re.A.OBJECT_CLASS_CURVE)if(Fe.type===re.A.OBJECT_TYPE_ARC||Fe.type===re.A.OBJECT_TYPE_SECTOR)Re=ee.A.projectPointToCircle(this,Fe,this.board),_e=ee.A.rad(Fe.radiuspoint,Fe.center,this),ye=0,be=ee.A.rad(Fe.radiuspoint,Fe.center,Fe.anglepoint),Te=_e,((Ee=Fe.evalVisProp("selection"))==="minor"&&be>Math.PI||Ee==="major"&&be<Math.PI)&&(ye=be,be=2*Math.PI),(_e<ye||_e>be)&&(Te=be,(_e<ye&&_e>.5*ye||_e>be&&_e>.5*be+Math.PI)&&(Te=ye),this.needsUpdateFromParent=!0,this.updateGliderFromParent()),Ye=be-ye,this.visProp.isgeonext&&(Ye=1),Math.abs(Ye)>Q.A.eps&&(Te/=Ye);else if(this.updateConstraint(),Fe.transformations.length>0){for(Ge=!1,(Le=Fe.getTransformationSource())[0]&&(Ge=Le[0],Ve.push(Fe),Ve.push(Le[1]));Le[0]&&oe.A.exists(Le[1]._transformationSource);)Le=Le[1].getTransformationSource(),Ve.push(Le[1]);if(Ue=this.coords.usrCoords,Ge){for(se=0;se<Ve.length;se++)Ve[se].updateTransformMatrix(),Me=Q.A.inverse(Ve[se].transformMat),Ue=Q.A.matVecMult(Me,Ue);for(Se=new ie.A(re.A.COORDS_BY_USER,Ue,this.board).usrCoords,Ue=(Ce=ee.A.projectCoordsToCurve(Se[1],Se[2],this.position||0,Ve[Ve.length-1],this.board))[0].usrCoords,se=Ve.length-2;se>=0;se--)Ue=Q.A.matVecMult(Ve[se].transformMat,Ue);Ce[0]=new ie.A(re.A.COORDS_BY_USER,Ue,this.board)}else Fe.updateTransformMatrix(),Me=Q.A.inverse(Fe.transformMat),Ue=Q.A.matVecMult(Me,Ue),Se=new ie.A(re.A.COORDS_BY_USER,Ue,this.board).usrCoords,Ce=ee.A.projectCoordsToCurve(Se[1],Se[2],this.position||0,Fe,this.board);Re=Ce[0],Te=Ce[1]}else Re=(Le=ee.A.projectPointToCurve(this,Fe,this.board))[0],Te=Le[1];else oe.A.isPoint(Fe)&&(Re=ee.A.projectPointToPoint(this,Fe,this.board),Te=this.position);this.coords.setCoordinates(re.A.COORDS_BY_USER,Re.usrCoords,ke),this.position=Te},findClosestSnapValue:function(se){var ae,ce,ue,de,me=null;if(ue=this.evalVisProp("snapvalues"),de=this.evalVisProp("snapvaluedistance"),oe.A.isArray(ue)&&Math.abs(this._smax-this._smin)>=Q.A.eps&&de>0)for(ae=0;ae<ue.length;ae++)(ce=Math.abs(se*(this._smax-this._smin)+this._smin-ue[ae]))<de&&(de=ce,me=ae);return me},updateGliderFromParent:function(){var se,ae,ce,ue,de,me,fe,_e,ye,be,Se,Ce,Me=this.slideObject,Re=[],Te=2*Math.PI;if(this.needsUpdateFromParent){if(Me.elementClass===re.A.OBJECT_CLASS_CIRCLE)ce=Me.Radius(),this.evalVisProp("isgeonext")&&(Te=1),de=[Me.center.X()+ce*Math.cos(this.position*Te),Me.center.Y()+ce*Math.sin(this.position*Te)];else if(Me.elementClass===re.A.OBJECT_CLASS_LINE)se=Me.point1.coords.usrCoords,ae=Me.point2.coords.usrCoords,se[0]===0&&se[1]===0&&se[2]===0||ae[0]===0&&ae[1]===0&&ae[2]===0?de=[0,0,0]:Math.abs(ae[0])<Q.A.eps?(ue=Math.min(Math.abs(this.position),1-Q.A.eps),ue/=1-ue,this.position<0&&(ue=-ue),de=[se[0]+ue*ae[0],se[1]+ue*ae[1],se[2]+ue*ae[2]]):Math.abs(se[0])<Q.A.eps?(ue=Math.max(this.position,Q.A.eps),ue=(ue=Math.min(ue,2-Q.A.eps))>1?(ue-1)/(ue-2):(1-ue)/ue,de=[ae[0]+ue*se[0],ae[1]+ue*se[1],ae[2]+ue*se[2]]):(ue=this.position,de=[se[0]+ue*(ae[0]-se[0]),se[1]+ue*(ae[1]-se[1]),se[2]+ue*(ae[2]-se[2])]);else if(Me.type===re.A.OBJECT_TYPE_TURTLE)this.coords.setCoordinates(re.A.COORDS_BY_USER,[Me.Z(this.position),Me.X(this.position),Me.Y(this.position)]),this.updateConstraint(),de=ee.A.projectPointToTurtle(this,Me,this.board)[0].usrCoords;else if(Me.elementClass===re.A.OBJECT_CLASS_CURVE){for(_e=!1,(me=Me.getTransformationSource())[0]&&(_e=me[0],Re.push(Me),Re.push(me[1]));me[0]&&oe.A.exists(me[1]._transformationSource);)me=me[1].getTransformationSource(),Re.push(me[1]);if(_e?this.coords.setCoordinates(re.A.COORDS_BY_USER,[Re[Re.length-1].Z(this.position),Re[Re.length-1].X(this.position),Re[Re.length-1].Y(this.position)]):this.coords.setCoordinates(re.A.COORDS_BY_USER,[Me.Z(this.position),Me.X(this.position),Me.Y(this.position)]),Me.type===re.A.OBJECT_TYPE_ARC||Me.type===re.A.OBJECT_TYPE_SECTOR)ye=ee.A.rad([Me.center.X()+1,Me.center.Y()],Me.center,Me.radiuspoint),be=0,Ce=ee.A.rad(Me.radiuspoint,Me.center,Me.anglepoint),(Me.visProp.selection==="minor"&&Ce>Math.PI||Me.visProp.selection==="major"&&Ce<Math.PI)&&(be=Ce,Ce=2*Math.PI),Te=Ce-be,this.evalVisProp("isgeonext")&&(Te=1),((Se=this.position*Te)<be||Se>Ce)&&(((Se=Ce)<be&&Se>.5*be||Se>Ce&&Se>.5*Ce+Math.PI)&&(Se=be),this.position=Se,Math.abs(Te)>Q.A.eps&&(this.position/=Te)),ce=Me.Radius(),de=[Me.center.X()+ce*Math.cos(this.position*Te+ye),Me.center.Y()+ce*Math.sin(this.position*Te+ye)];else if(this.updateConstraint(),_e)for(de=ee.A.projectPointToCurve(this,Re[Re.length-1],this.board)[0].usrCoords,fe=Re.length-2;fe>=0;fe--)de=new ie.A(re.A.COORDS_BY_USER,Q.A.matVecMult(Re[fe].transformMat,de),this.board).usrCoords;else de=ee.A.projectPointToCurve(this,Me,this.board)[0].usrCoords}else oe.A.isPoint(Me)&&(de=ee.A.projectPointToPoint(this,Me,this.board).usrCoords);this.coords.setCoordinates(re.A.COORDS_BY_USER,de,!1)}else this.needsUpdateFromParent=!0},updateRendererGeneric:function(se){return this.needsUpdate&&this.board.renderer?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.coords.usrCoords[1]+this.coords.usrCoords[2]),this.isReal=Math.abs(this.coords.usrCoords[0])>Q.A.eps&&this.isReal,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer[se](this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},X:function(){return this.coords.usrCoords[1]},Y:function(){return this.coords.usrCoords[2]},Z:function(){return this.coords.usrCoords[0]},Coords:function(se){return se?this.coords.usrCoords.slice():this.coords.usrCoords.slice(1)},XEval:function(){return this.coords.usrCoords[1]},YEval:function(){return this.coords.usrCoords[2]},ZEval:function(){return this.coords.usrCoords[0]},Dist:function(se){return this.isReal&&se.isReal?this.coords.distance(re.A.COORDS_BY_USER,se.coords):NaN},snapToGrid:function(se){return this.handleSnapToGrid(se)},handleSnapToPoints:function(se){var ae,ce,ue,de,me,fe,_e,ye,be=0,Se=1/0,Ce=null,Me=this.evalVisProp("ignoredsnaptopoints"),Re=!1;if(de=this.board.objectsList.length,Me&&(_e=Me.length),this.evalVisProp("snaptopoints")||se){for(me=this.evalVisProp("attractorunit"),fe=this.evalVisProp("attractordistance"),ae=0;ae<de;ae++){if(ce=this.board.objectsList[ae],Me){for(Re=!1,ye=0;ye<_e;ye++)if(ce===this.board.select(Me[ye])){Re=!0;break}if(Re)continue}oe.A.isPoint(ce)&&ce!==this&&ce.visPropCalc.visible&&(ue=ee.A.projectPointToPoint(this,ce,this.board),(be=me==="screen"?ue.distance(re.A.COORDS_BY_SCREEN,this.coords):ue.distance(re.A.COORDS_BY_USER,this.coords))<fe&&be<Se&&(Se=be,Ce=ue))}Ce!==null&&this.coords.setCoordinates(re.A.COORDS_BY_USER,Ce.usrCoords)}return this},snapToPoints:function(se){return this.handleSnapToPoints(se)},handleAttractors:function(){var se,ae,ce,ue,de=0,me=this.evalVisProp("attractorunit"),fe=this.evalVisProp("attractordistance"),_e=this.evalVisProp("snatchdistance"),ye=this.evalVisProp("attractors"),be=ye.length;if(fe!==0){for(se=0;se<be;se++)if(ae=this.board.select(ye[se]),oe.A.exists(ae)&&ae!==this){if(oe.A.isPoint(ae)?ce=ee.A.projectPointToPoint(this,ae,this.board):ae.elementClass===re.A.OBJECT_CLASS_LINE?(ue=ee.A.projectCoordsToSegment(this.coords.usrCoords,ae.point1.coords.usrCoords,ae.point2.coords.usrCoords),ce=!ae.evalVisProp("straightfirst")&&ue[1]<0?ae.point1.coords:!ae.evalVisProp("straightlast")&&ue[1]>1?ae.point2.coords:new ie.A(re.A.COORDS_BY_USER,ue[0],this.board)):ae.elementClass===re.A.OBJECT_CLASS_CIRCLE?ce=ee.A.projectPointToCircle(this,ae,this.board):ae.elementClass===re.A.OBJECT_CLASS_CURVE?ce=ee.A.projectPointToCurve(this,ae,this.board)[0]:ae.type===re.A.OBJECT_TYPE_TURTLE?ce=ee.A.projectPointToTurtle(this,ae,this.board)[0]:ae.type===re.A.OBJECT_TYPE_POLYGON&&(ce=new ie.A(re.A.COORDS_BY_USER,ee.A.projectCoordsToPolygon(this.coords.usrCoords,ae),this.board)),(de=me==="screen"?ce.distance(re.A.COORDS_BY_SCREEN,this.coords):ce.distance(re.A.COORDS_BY_USER,this.coords))<fe){this.type===re.A.OBJECT_TYPE_GLIDER&&(ae===this.slideObject||this.slideObject&&this.onPolygon&&this.slideObject.parentPolygon===ae)||this.makeGlider(ae);break}de>=_e&&(ae===this.slideObject||this.slideObject&&this.onPolygon&&this.slideObject.parentPolygon===ae)&&this.popSlideObject()}return this}},setPositionDirectly:function(se,ae){var ce,ue,de,me,fe,_e=this.coords;if(this.relativeCoords)return ue=new ie.A(se,ae,this.board),this.evalVisProp("islabel")?(de=ne.A.subtract(ue.scrCoords,_e.scrCoords),this.relativeCoords.scrCoords[1]+=de[1],this.relativeCoords.scrCoords[2]+=de[2]):(de=ne.A.subtract(ue.usrCoords,_e.usrCoords),this.relativeCoords.usrCoords[1]+=de[1],this.relativeCoords.usrCoords[2]+=de[2]),this;if(this.coords.setCoordinates(se,ae),this.handleSnapToGrid(),this.handleSnapToPoints(),this.handleAttractors(),this.actualCoords.setCoordinates(re.A.COORDS_BY_USER,this.coords.usrCoords),this.transformations.length>0){for(se===re.A.COORDS_BY_SCREEN?fe=new ie.A(se,ae,this.board).usrCoords:(ae.length===2&&(ae=[1].concat(ae)),fe=ae),me=[[1,0,0],[0,1,0],[0,0,1]],ce=0;ce<this.transformations.length;ce++)me=Q.A.matMatMult(this.transformations[ce].matrix,me);fe=Q.A.matVecMult(Q.A.inverse(me),fe),this.initialCoords.setCoordinates(re.A.COORDS_BY_USER,fe),this.elementClass!==re.A.OBJECT_CLASS_POINT&&this.coords.setCoordinates(re.A.COORDS_BY_USER,fe)}return this.prepareUpdate().update(),this.board.isSuspendedUpdate&&this.type===re.A.OBJECT_TYPE_GLIDER&&this.updateGlider(),this},setPositionByTransform:function(se,ae){var ce;return ae=new ie.A(se,ae,this.board),ce=this.board.create("transform",ae.usrCoords.slice(1),{type:"translate"}),this.transformations.length>0&&this.transformations[this.transformations.length-1].isNumericMatrix?this.transformations[this.transformations.length-1].melt(ce):this.addTransform(this,ce),this.prepareUpdate().update(),this},setPosition:function(se,ae){return this.setPositionDirectly(se,ae)},setGliderPosition:function(se){return this.type===re.A.OBJECT_TYPE_GLIDER&&(this.position=se,this.board.update()),this},makeGlider:function(se){var ae,ce,ue,de=this.board.select(se),me=!1;if(de.type===re.A.OBJECT_TYPE_POLYGON){for(ae=Number.MAX_VALUE,ce=0;ce<de.borders.length;ce++)(ue=Z.A.Math.Geometry.distPointLine(this.coords.usrCoords,de.borders[ce].stdform))<ae&&(ae=ue,se=de.borders[ce]);de=this.board.select(se),me=!0}if(!oe.A.exists(de))throw new Error("JSXGraph: slide object undefined.");if(de.type===re.A.OBJECT_TYPE_TICKS)throw new Error("JSXGraph: gliders on ticks are not possible.");return this.slideObject=this.board.select(se),this.slideObjects.push(this.slideObject),this.addParents(se),this.type=re.A.OBJECT_TYPE_GLIDER,this.elType="glider",this.visProp.snapwidth=-1,this.slideObject.addChild(this),this.isDraggable=!0,this.onPolygon=me,this.generatePolynomial=function(){return this.slideObject.generatePolynomial(this)},this.updateGlider(),this.needsUpdateFromParent=!0,this.updateGliderFromParent(),this},popSlideObject:function(){this.slideObjects.length>0&&(this.slideObjects.pop(),this.slideObject.removeChild(this),this.slideObjects.length===0?(this.type=this._org_type,this.type===re.A.OBJECT_TYPE_POINT?this.elType="point":this.elementClass===re.A.OBJECT_CLASS_TEXT?this.elType="text":this.type===re.A.OBJECT_TYPE_IMAGE?this.elType="image":this.type===re.A.OBJECT_TYPE_FOREIGNOBJECT&&(this.elType="foreignobject"),this.slideObject=null):this.slideObject=this.slideObjects[this.slideObjects.length-1])},free:function(){var se,ae;if(this.type!==re.A.OBJECT_TYPE_GLIDER){if(this.transformations.length=0,delete this.updateConstraint,this.isConstrained=!1,this.isDraggable)return;this.isDraggable=!0,this.elementClass===re.A.OBJECT_CLASS_POINT&&(this.type=re.A.OBJECT_TYPE_POINT,this.elType="point"),this.XEval=function(){return this.coords.usrCoords[1]},this.YEval=function(){return this.coords.usrCoords[2]},this.ZEval=function(){return this.coords.usrCoords[0]},this.Xjc=null,this.Yjc=null}for(se in this.board.objects)this.board.objects.hasOwnProperty(se)&&(ae=this.board.objects[se]).descendants&&(delete ae.descendants[this.id],delete ae.childElements[this.id],this.hasLabel&&(delete ae.descendants[this.label.id],delete ae.childElements[this.label.id]));this.ancestors={},this.parents=[],this.slideObject=null,this.slideObjects=[],this.elementClass===re.A.OBJECT_CLASS_POINT?(this.type=re.A.OBJECT_TYPE_POINT,this.elType="point"):this.elementClass===re.A.OBJECT_CLASS_TEXT?(this.type=this._org_type,this.elType="text"):this.elementClass===re.A.OBJECT_CLASS_OTHER&&(this.type=this._org_type,this.elType="image")},addConstraint:function(se){var ae,ce,ue=[],de=["X","Y"],me=function(_e){return function(){return _e}},fe=function(_e){return function(){return _e.Value()}};for(this.elementClass===re.A.OBJECT_CLASS_POINT&&(this.type=re.A.OBJECT_TYPE_CAS),this.isDraggable=!1,ae=0;ae<se.length;ae++)ce=se[ae],oe.A.isString(ce)?(ue[ae]=this.board.jc.snippet(ce,!0,null,!0),this.addParentsFromJCFunctions([ue[ae]]),se.length===2&&(this[de[ae]+"jc"]=se[ae])):oe.A.isFunction(ce)?ue[ae]=ce:oe.A.isNumber(ce)?ue[ae]=me(ce):oe.A.isObject(ce)&&oe.A.isFunction(ce.Value)&&(ue[ae]=fe(ce)),ue[ae].origin=ce;return se.length===1?this.updateConstraint=function(){var _e=ue[0]();return oe.A.isArray(_e)?this.coords.setCoordinates(re.A.COORDS_BY_USER,_e):this.coords=_e,this}:se.length===2?(this.XEval=ue[0],this.YEval=ue[1],this.addParents([ue[0].origin,ue[1].origin]),this.updateConstraint=function(){return this.coords.setCoordinates(re.A.COORDS_BY_USER,[this.XEval(),this.YEval()]),this}):(this.ZEval=ue[0],this.XEval=ue[1],this.YEval=ue[2],this.addParents([ue[0].origin,ue[1].origin,ue[2].origin]),this.updateConstraint=function(){return this.coords.setCoordinates(re.A.COORDS_BY_USER,[this.ZEval(),this.XEval(),this.YEval()]),this}),this.isConstrained=!0,this.prepareUpdate().update(),this.board.isSuspendedUpdate||(this.updateVisibility().updateRenderer(),this.hasLabel&&this.label.fullUpdate()),this},addAnchor:function(se,ae){this.relativeCoords=ae?new ie.A(re.A.COORDS_BY_SCREEN,se.slice(0,2),this.board):new ie.A(re.A.COORDS_BY_USER,se,this.board),this.element.addChild(this),ae&&this.addParents(this.element),this.XEval=function(){var ce,ue,de;return this.evalVisProp("islabel")?(de=this.evalVisProp("offset"),ce=parseFloat(de[0]),ue=this.element.getLabelAnchor(),new ie.A(re.A.COORDS_BY_SCREEN,[ce+this.relativeCoords.scrCoords[1]+ue.scrCoords[1],0],this.board).usrCoords[1]):(ue=this.element.getTextAnchor(),this.relativeCoords.usrCoords[1]+ue.usrCoords[1])},this.YEval=function(){var ce,ue,de;return this.evalVisProp("islabel")?(de=this.evalVisProp("offset"),ce=-parseFloat(de[1]),ue=this.element.getLabelAnchor(),new ie.A(re.A.COORDS_BY_SCREEN,[0,ce+this.relativeCoords.scrCoords[2]+ue.scrCoords[2]],this.board).usrCoords[2]):(ue=this.element.getTextAnchor(),this.relativeCoords.usrCoords[2]+ue.usrCoords[2])},this.ZEval=oe.A.createFunction(1,this.board,""),this.updateConstraint=function(){this.coords.setCoordinates(re.A.COORDS_BY_USER,[this.ZEval(),this.XEval(),this.YEval()])},this.isConstrained=!0,this.updateConstraint()},updateTransform:function(se){var ae,ce;if(this.transformations.length===0)return this;for(this.baseElement===null&&(this.baseElement=this),this.transformations[0].update(),ae=this===this.baseElement?this.transformations[0].apply(this,"self"):this.transformations[0].apply(this.baseElement),ce=1;ce<this.transformations.length;ce++)this.transformations[ce].update(),ae=Q.A.matVecMult(this.transformations[ce].matrix,ae);return this.actualCoords.setCoordinates(re.A.COORDS_BY_USER,ae),this},addTransform:function(se,ae){var ce,ue=oe.A.isArray(ae)?ae:[ae],de=ue.length;for(this.transformations.length===0&&(this.baseElement=se),ce=0;ce<de;ce++)this.transformations.push(ue[ce]);return this},startAnimation:function(se,ae,ce,ue){var de=oe.A.evaluate(se),me=oe.A.evaluate(ae),fe=this;return ce=oe.A.evaluate(ce)||250,ue=(ue=oe.A.evaluate(ue))!=="undefined"?ue:-1,this.type!==re.A.OBJECT_TYPE_GLIDER||oe.A.exists(this.intervalCode)||ue===0||(this.roundsCount=0,this.intervalCode=window.setInterval(function(){fe._anim(de,me,ue)},ce),oe.A.exists(this.intervalCount)||(this.intervalCount=0)),this},stopAnimation:function(){return oe.A.exists(this.intervalCode)&&(window.clearInterval(this.intervalCode),delete this.intervalCode),this},moveAlong:function(se,ae,ce){ce=ce||{};var ue,de,me,fe,_e,ye=[],be=[],Se=ae/this.board.attr.animationdelay,Ce=function(Me,Re){return function(){return se[Me][Re]}};if(oe.A.isArray(se)){for(me=se.length,ue=0;ue<me;ue++)oe.A.isPoint(se[ue])?be[ue]=se[ue]:be[ue]={elementClass:re.A.OBJECT_CLASS_POINT,X:Ce(ue,0),Y:Ce(ue,1)};if((ae=ae||0)===0)return this.setPosition(re.A.COORDS_BY_USER,[be[be.length-1].X(),be[be.length-1].Y()]),this.board.update(this);if(!oe.A.exists(ce.interpolate)||ce.interpolate)for(de=te.A.Neville(be),ue=0;ue<Se;ue++)ye[ue]=[],ye[ue][0]=de[0]((Se-ue)/Se*de[3]()),ye[ue][1]=de[1]((Se-ue)/Se*de[3]());else{for(me=se.length-1,ue=0;ue<Se;++ue)_e=ue/Se*me-(fe=Math.floor(ue/Se*me)),ye[ue]=[],ye[ue][0]=(1-_e)*be[fe].X()+_e*be[fe+1].X(),ye[ue][1]=(1-_e)*be[fe].Y()+_e*be[fe+1].Y();ye.push([be[me].X(),be[me].Y()]),ye.reverse()}this.animationPath=ye}else oe.A.isFunction(se)&&(this.animationPath=se,this.animationStart=new Date().getTime());return this.animationCallback=ce.callback,this.board.addAnimation(this),this},moveTo:function(se,ae,ce){ce=ce||{},se=new ie.A(re.A.COORDS_BY_USER,se,this.board);var ue,de=this.board.attr.animationdelay,me=Math.ceil(ae/de),fe=[],_e=this.coords.usrCoords[1],ye=this.coords.usrCoords[2],be=se.usrCoords[1]-_e,Se=se.usrCoords[2]-ye,Ce=function(Me){var Re=Me/me;if(ce.effect){if(ce.effect==="<>")return Math.pow(Math.sin(Re*Math.PI/2),2);if(ce.effect==="<")return Re*Re*Re;if(ce.effect===">")return 1-Math.pow(1-Re,3);if(ce.effect==="=="||ce.effect==="--")return Me/me;Z.A.warn("Callback moveTo(): valid effects are '==', '--', '<>', '>', and '<', given is '"+ce.effect+"'. Set it to '--'"),ce.effect="--"}return Me/me};if(!oe.A.exists(ae)||ae===0||Math.abs(se.usrCoords[0]-this.coords.usrCoords[0])>Q.A.eps)return this.setPosition(re.A.COORDS_BY_USER,se.usrCoords),this.board.update(this);if(!oe.A.exists(ce.callback)&&Math.abs(be)<Q.A.eps&&Math.abs(Se)<Q.A.eps)return this;for(ue=me;ue>=0;ue--)fe[me-ue]=[se.usrCoords[0],_e+be*Ce(ue),ye+Se*Ce(ue)];return this.animationPath=fe,this.animationCallback=ce.callback,this.board.addAnimation(this),this},visit:function(se,ae,ce){se=new ie.A(re.A.COORDS_BY_USER,se,this.board);var ue,de,me,fe=this.board.attr.animationdelay,_e=[],ye=this.coords.usrCoords[1],be=this.coords.usrCoords[2],Se=se.usrCoords[1]-ye,Ce=se.usrCoords[2]-be,Me=function(Re){var Te=Re<me/2?2*Re/me:2*(me-Re)/me;if(ce.effect){if(ce.effect==="<>")return Math.pow(Math.sin(Te*Math.PI/2),2);if(ce.effect==="<")return Te*Te*Te;if(ce.effect===">")return 1-Math.pow(1-Te,3);if(ce.effect==="=="||ce.effect==="--")return Te;Z.A.warn("Callback visit(): valid effects are '==', '--', '<>', '>', and '<', given is '"+ce.effect+"'. Set it to '--'"),ce.effect="--"}return Te};for(oe.A.isNumber(ce)?ce={repeat:ce}:(ce=ce||{},oe.A.exists(ce.repeat)||(ce.repeat=1)),me=Math.ceil(ae/(fe*ce.repeat)),de=0;de<ce.repeat;de++)for(ue=me;ue>=0;ue--)_e[de*(me+1)+me-ue]=[se.usrCoords[0],ye+Se*Me(ue),be+Ce*Me(ue)];return this.animationPath=_e,this.animationCallback=ce.callback,this.board.addAnimation(this),this},moveAlongES6:function(se,ae,ce){return new Promise((ue,de)=>{oe.A.exists(ce)&&oe.A.exists(ce.callback)?ce.callback=ue:ce={callback:ue},this.moveAlong(se,ae,ce)})},moveToES6:function(se,ae,ce){return new Promise((ue,de)=>{oe.A.exists(ce)&&oe.A.exists(ce.callback)?ce.callback=ue:ce={callback:ue},this.moveTo(se,ae,ce)})},visitES6:function(se,ae,ce){return new Promise((ue,de)=>{oe.A.exists(ce)&&oe.A.exists(ce.callback)?ce.callback=ue:ce={callback:ue},this.visit(se,ae,ce)})},_anim:function(se,ae,ce){var ue,de,me,fe,_e,ye,be,Se,Ce;return this.intervalCount+=1,this.intervalCount>ae&&(this.intervalCount=0,this.roundsCount+=1,ce>0&&this.roundsCount>=ce)?(this.roundsCount=0,this.stopAnimation()):(this.slideObject.elementClass===re.A.OBJECT_CLASS_LINE?(be=this.slideObject.point1.coords.scrCoords,Se=this.slideObject.point2.coords.scrCoords,ue=Math.round((Se[1]-be[1])*this.intervalCount/ae),de=Math.round((Se[2]-be[2])*this.intervalCount/ae),se>0?fe=this.slideObject.point1:(fe=this.slideObject.point2,ue*=-1,de*=-1),this.coords.setCoordinates(re.A.COORDS_BY_SCREEN,[fe.coords.scrCoords[1]+ue,fe.coords.scrCoords[2]+de])):this.slideObject.elementClass===re.A.OBJECT_CLASS_CURVE?(_e=se>0?(this.slideObject.maxX()-this.slideObject.minX())*this.intervalCount/ae+this.slideObject.minX():-(this.slideObject.maxX()-this.slideObject.minX())*this.intervalCount/ae+this.slideObject.maxX(),this.coords.setCoordinates(re.A.COORDS_BY_USER,[this.slideObject.X(_e),this.slideObject.Y(_e)]),Ce=ee.A.projectPointToCurve(this,this.slideObject,this.board),this.coords=Ce[0],this.position=Ce[1]):this.slideObject.elementClass===re.A.OBJECT_CLASS_CIRCLE&&(me=2*Math.PI,me*=se<0?this.intervalCount/ae:(ae-this.intervalCount)/ae,ye=this.slideObject.Radius(),this.coords.setCoordinates(re.A.COORDS_BY_USER,[this.slideObject.center.coords.usrCoords[1]+ye*Math.cos(me),this.slideObject.center.coords.usrCoords[2]+ye*Math.sin(me)])),this.board.update(this),this)},getTextAnchor:function(){return this.coords},getLabelAnchor:function(){return this.coords},getParents:function(){var se=[this.Z(),this.X(),this.Y()];return this.parents.length!==0&&(se=this.parents),this.type===re.A.OBJECT_TYPE_GLIDER&&(se=[this.X(),this.Y(),this.slideObject.id]),se}}),Z.A.CoordsElement.create=function(se,ae,ce,ue,de,me){var fe,_e,ye=!1;for(_e=0;_e<ce.length;_e++)(oe.A.isFunction(ce[_e])||oe.A.isString(ce[_e]))&&(ye=!0);if(ye)(fe=new se(ae,[0,0],ue,de,me)).addConstraint(ce);else if(oe.A.isNumber(ce[0])&&oe.A.isNumber(ce[1]))fe=new se(ae,ce,ue,de,me),oe.A.exists(ue.slideobject)?fe.makeGlider(ue.slideobject):fe.baseElement=fe,fe.isDraggable=!0;else{if(!oe.A.isObject(ce[0])||!oe.A.isTransformationOrArray(ce[1]))return!1;(fe=new se(ae,[0,0],ue,de,me)).addTransform(ce[0],ce[1]),fe.isDraggable=!1}return fe.handleSnapToGrid(),fe.handleSnapToPoints(),fe.handleAttractors(),fe.addParents(ce),fe},_.A=Z.A.CoordsElement},133:function(G,_,J){var Z=J(443),Q=J(188);Z.A.extendConstants(Z.A,{}),Z.A.extend(Z.A,{isTouchEvent:function(ee){return Z.A.exists(ee.touches)},isPointerEvent:function(ee){return Z.A.exists(ee.pointerId)},isMouseEvent:function(ee){return!Z.A.isTouchEvent(ee)&&!Z.A.isPointerEvent(ee)},getNumberOfTouchPoints:function(ee){var te=-1;return Z.A.isTouchEvent(ee)&&(te=ee.touches.length),te},isFirstTouch:function(ee){var te=Z.A.getNumberOfTouchPoints(ee);return Z.A.isPointerEvent(ee)?ee.isPrimary:te===1},isBrowser:Q.A.exists(window)&&Q.A.exists(document)&&typeof window=="object"&&typeof document=="object",supportsES6:function(){try{return new Function("(a = 0) => a"),!0}catch{return!1}},supportsVML:function(){return this.isBrowser&&!!document.namespaces},supportsSVG:function(){return!!this.isBrowser&&!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect},supportsCanvas:function(){var ee=!1;return this.isNode()&&(ee=!0),ee||this.isBrowser&&!!document.createElement("canvas").getContext},isNode:function(){return!this.isBrowser&&typeof process<"u"&&process.release.name.search(/node|io.js/)!==-1},isWebWorker:function(){return!this.isBrowser&&typeof self=="object"&&typeof self.postMessage=="function"},supportsPointerEvents:function(){return!!(this.isBrowser&&window.navigator&&(window.PointerEvent||window.navigator.pointerEnabled||window.navigator.msPointerEnabled))},isTouchDevice:function(){return this.isBrowser&&window.ontouchstart!==void 0},isAndroid:function(){return Q.A.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("android")>-1},isWebkitAndroid:function(){return this.isAndroid()&&navigator.userAgent.indexOf(" AppleWebKit/")>-1},isApple:function(){return Q.A.exists(navigator)&&(navigator.userAgent.indexOf("iPad")>-1||navigator.userAgent.indexOf("iPhone")>-1)},isWebkitApple:function(){return this.isApple()&&navigator.userAgent.search(/Mobile\/[0-9A-Za-z.]*Safari/)>-1},isMetroApp:function(){return typeof window=="object"&&window.clientInformation&&window.clientInformation.appVersion&&window.clientInformation.appVersion.indexOf("MSAppHost")>-1},isMozilla:function(){return Q.A.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("mozilla")>-1&&navigator.userAgent.toLowerCase().indexOf("apple")===-1},isFirefoxOS:function(){return Q.A.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("android")===-1&&navigator.userAgent.toLowerCase().indexOf("apple")===-1&&navigator.userAgent.toLowerCase().indexOf("mobile")>-1&&navigator.userAgent.toLowerCase().indexOf("mozilla")>-1},isDesktop:function(){return!0},isMobile:function(){return!0},ieVersion:(function(){var ee,te,ne=3;if(document===null||typeof document!="object")return 0;te=(ee=document.createElement("div")).getElementsByTagName("i");do ee.innerHTML="<!--[if gt IE "+ ++ne+"]><i></i><![endif]-->";while(te[0]);return ne>4?ne:void 0})(),getDimensions:function(ee,te){var ne,ie,re,oe,se,ae,ce,ue,de,me=/\d+(\.\d*)?px/;if(!this.isBrowser||ee===null)return{width:500,height:500};if(te=te||document,ne=Q.A.isString(ee)?te.getElementById(ee):ee,!Q.A.exists(ne))throw new Error(`
JSXGraph: HTML container element '`+ee+"' not found.");return(ie=ne.style.display)!=="none"&&ie!==null?ne.clientWidth>0&&ne.clientHeight>0?{width:ne.clientWidth,height:ne.clientHeight}:(de=window.getComputedStyle?window.getComputedStyle(ne):ne.style,{width:me.test(de.width)?parseFloat(de.width):0,height:me.test(de.height)?parseFloat(de.height):0}):(oe=(re=ne.style).visibility,se=re.position,ae=re.display,re.visibility="hidden",re.position="absolute",re.display="block",ce=ne.clientWidth,ue=ne.clientHeight,re.display=ae,re.position=se,re.visibility=oe,{width:ce,height:ue})},addEvent:function(ee,te,ne,ie,re){var oe=function(){return ne.apply(ie,arguments)};oe.origin=ne,typeof ie=="object"&&Q.A.exists(ie.BOARD_MODE_NONE)&&(ie["x_internal"+te]=ie["x_internal"+te]||[],ie["x_internal"+te].push(oe)),Q.A.exists(ee)&&Q.A.exists(ee.addEventListener)&&(re=re||!1,ee.addEventListener(te,oe,re)),Q.A.exists(ee)&&Q.A.exists(ee.attachEvent)&&ee.attachEvent("on"+te,oe)},removeEvent:function(ee,te,ne,ie){var re;if(Q.A.exists(ie))if(Q.A.exists(ie["x_internal"+te]))if(Q.A.isArray(ie["x_internal"+te]))if((re=Q.A.indexOf(ie["x_internal"+te],ne,"origin"))!==-1){try{Q.A.exists(ee)&&Q.A.exists(ee.removeEventListener)&&ee.removeEventListener(te,ie["x_internal"+te][re],!1),Q.A.exists(ee)&&Q.A.exists(ee.detachEvent)&&ee.detachEvent("on"+te,ie["x_internal"+te][re])}catch{Z.A.debug("removeEvent: event not registered in browser: ("+te+" -- "+ne+")")}ie["x_internal"+te].splice(re,1)}else Z.A.debug("removeEvent: no such event function in internal list: "+ne);else Z.A.debug("owner[x_internal + "+te+"] is not an array");else Z.A.debug("removeEvent: no such type: "+te);else Z.A.debug("no such owner")},removeAllEvents:function(ee,te,ne){var ie;if(ne["x_internal"+te]){for(ie=ne["x_internal"+te].length-1;ie>=0;ie--)Z.A.removeEvent(ee,te,ne["x_internal"+te][ie].origin,ne);ne["x_internal"+te].length>0&&Z.A.debug("removeAllEvents: Not all events could be removed.")}},getPosition:function(ee,te,ne){var ie,re,oe,se=0,ae=0;if(ee||(ee=window.event),oe=ee.touches,Q.A.exists(oe)&&oe.length===0&&(oe=ee.changedTouches),Q.A.exists(te)&&Q.A.exists(oe))if(te===-1){for(re=oe.length,ie=0;ie<re;ie++)if(oe[ie]){ee=oe[ie];break}}else ee=oe[te];return ee.clientX&&(se=ee.clientX,ae=ee.clientY),[se,ae]},getOffset:function(ee){var te,ne=ee,ie=ee,re=ne.offsetLeft-ne.scrollLeft,oe=ne.offsetTop-ne.scrollTop;for(re=(te=this.getCSSTransform([re,oe],ne))[0],oe=te[1],ne=ne.offsetParent;ne;){for(re+=ne.offsetLeft,oe+=ne.offsetTop,ne.offsetParent&&(re+=ne.clientLeft-ne.scrollLeft,oe+=ne.clientTop-ne.scrollTop),re=(te=this.getCSSTransform([re,oe],ne))[0],oe=te[1],ie=ie.parentNode;ie!==ne;)re+=ie.clientLeft-ie.scrollLeft,oe+=ie.clientTop-ie.scrollTop,re=(te=this.getCSSTransform([re,oe],ie))[0],oe=te[1],ie=ie.parentNode;ne=ne.offsetParent}return[re,oe]},getStyle:function(ee,te){var ne,ie=ee.ownerDocument;return ie.defaultView&&ie.defaultView.getComputedStyle?ne=ie.defaultView.getComputedStyle(ee,null).getPropertyValue(te):ee.currentStyle&&Z.A.ieVersion>=9?ne=ee.currentStyle[te]:ee.style&&(te=te.replace(/-([a-z]|[0-9])/gi,function(re,oe){return oe.toUpperCase()}),ne=ee.style[te]),ne},getProp:function(ee,te){var ne=parseInt(this.getStyle(ee,te),10);return isNaN(ne)?0:ne},getCSSTransform:function(ee,te){var ne,ie,re,oe,se,ae,ce,ue=["transform","webkitTransform","MozTransform","msTransform","oTransform"];for(se=ue.length,ne=0,re="";ne<se;ne++)if(Q.A.exists(te.style[ue[ne]])){re=te.style[ue[ne]];break}if(re!==""&&(oe=re.indexOf("("))>0){for(se=re.length,ie=0,ae=(ce=re.substring(oe+1,se-1).split(",")).length;ie<ae;ie++)ce[ie]=parseFloat(ce[ie]);re.indexOf("matrix")===0?(ee[0]+=ce[4],ee[1]+=ce[5]):re.indexOf("translateX")===0?ee[0]+=ce[0]:re.indexOf("translateY")===0?ee[1]+=ce[0]:re.indexOf("translate")===0&&(ee[0]+=ce[0],ee[1]+=ce[1])}return Q.A.exists(te.style.zoom)&&(re=te.style.zoom)!==""&&(ee[0]*=parseFloat(re),ee[1]*=parseFloat(re)),ee},getCSSTransformMatrix:function(ee){var te,ne,ie,re,oe,se,ae,ce,ue=ee.ownerDocument,de=["transform","webkitTransform","MozTransform","msTransform","oTransform"],me=[[1,0,0],[0,1,0],[0,0,1]];if(ue.defaultView&&ue.defaultView.getComputedStyle)ie=(ce=ue.defaultView.getComputedStyle(ee,null)).getPropertyValue("-webkit-transform")||ce.getPropertyValue("-moz-transform")||ce.getPropertyValue("-ms-transform")||ce.getPropertyValue("-o-transform")||ce.getPropertyValue("transform");else for(se=de.length,te=0,ie="";te<se;te++)if(Q.A.exists(ee.style[de[te]])){ie=ee.style[de[te]];break}if(ie!==""&&(oe=ie.indexOf("("))>0){for(se=ie.length,ne=0,ae=(re=ie.substring(oe+1,se-1).split(",")).length;ne<ae;ne++)re[ne]=parseFloat(re[ne]);ie.indexOf("matrix")===0?me=[[1,0,0],[0,re[0],re[1]],[0,re[2],re[3]]]:ie.indexOf("scaleX")===0?me[1][1]=re[0]:ie.indexOf("scaleY")===0?me[2][2]=re[0]:ie.indexOf("scale")===0&&(me[1][1]=re[0],me[2][2]=re[1])}return Q.A.exists(ee.style.zoom)&&(ie=ee.style.zoom)!==""&&(me[1][1]*=parseFloat(ie),me[2][2]*=parseFloat(ie)),me},timedChunk:function(ee,te,ne,ie){var re=ee.slice(),oe=function(){var se=+new Date;do te.call(ne,re.shift());while(re.length>0&&+new Date-se<300);re.length>0?window.setTimeout(oe,1):ie(ee)};window.setTimeout(oe,1)},scaleJSXGraphDiv:function(ee,te,ne,ie){var re,oe,se,ae,ce,ue,de,me,fe,_e,ye,be,Se=ie;for(oe=(se=ne.getElementById(ee).getBoundingClientRect()).height,re=se.width,ue=(me=ne.getElementById(te))._cssFullscreenStore.w,ye=(de=me._cssFullscreenStore.h)/ue,ue>re*Se&&(de=(ue=re*Se)*ye),de>oe*Se&&(ue=(de=oe*Se)/ye),ae=ue,fe=ye<oe/re?re*Se/ue:oe*Se/de,_e=.5*(oe-(ce=de)),be=0;be<4;be++)try{me.style.width=ae+"px !important",me.style.height=ce+"px !important",me.style.margin="0 auto",me.style.transform=me._cssFullscreenStore.transform+" matrix("+fe+",0,0,"+fe+",0,"+_e+")";break}catch(Ce){Z.A.debug(`JXG.scaleJSXGraphDiv:
`+Ce)}be===4&&Z.A.debug("JXG.scaleJSXGraphDiv: Could not set any CSS property.")}}),_.A=Z.A},144:function(G,_,J){var Z=J(443),Q=J(561),ee=J(904),te=J(477),ne=J(588),ie=J(378),re=J(454),oe=J(873),se=J(188);Z.A.GeometryElement=function(ae,ce,ue,de){var me,fe,_e;if(this.needsUpdate=!0,this.isDraggable=!1,this.isReal=!0,this.childElements={},this.hasLabel=!1,this.highlighted=!1,this.notExistingParents={},this.traces={},this.numTraces=0,this.transformations=[],this.baseElement=null,this.descendants={},this.ancestors={},this.parents=[],this.symbolic={},this.rendNode=null,this.elType="",this.dump=!0,this.subs={},this.inherits=[],this._pos=-1,this.stdform=[1,0,0,0,1,1,0,0],this.methodMap={setLabel:"setLabel",label:"label",setName:"setName",getName:"getName",Name:"getName",addTransform:"addTransform",setProperty:"setAttribute",setAttribute:"setAttribute",addChild:"addChild",animate:"animate",on:"on",off:"off",trigger:"trigger",addTicks:"addTicks",removeTicks:"removeTicks",removeAllTicks:"removeAllTicks",Bounds:"bounds"},this.quadraticform=[[1,0,0],[0,1,0],[0,0,1]],this.visProp={},this.visPropCalc={visible:!1},re.A.eventify(this),this.mouseover=!1,this.lastDragTime=new Date,this.view=null,arguments.length>0){for(fe in this.board=ae,this.type=ue,this._org_type=ue,this.elementClass=de||Q.A.OBJECT_CLASS_OTHER,this.id=ce.id,me=ce.name,se.A.exists(me)||(me=this.board.generateName(this)),me!==""&&(this.board.elementsByName[me]=this),this.name=me,this.needsRegularUpdate=ce.needsregularupdate,se.A.clearVisPropOld(this),_e=this.resolveShortcuts(ce))_e.hasOwnProperty(fe)&&this._set(fe,_e[fe]);this.visProp.draft=_e.draft&&_e.draft.draft}},Z.A.extend(Z.A.GeometryElement.prototype,{addChild:function(ae){var ce,ue;for(ce in this.childElements[ae.id]=ae,this.addDescendants(ae),ae.ancestors[this.id]=this,this.descendants)if(this.descendants.hasOwnProperty(ce))for(ue in this.descendants[ce].ancestors[this.id]=this,this.ancestors)this.ancestors.hasOwnProperty(ue)&&(this.descendants[ce].ancestors[this.ancestors[ue].id]=this.ancestors[ue]);for(ce in this.ancestors)if(this.ancestors.hasOwnProperty(ce))for(ue in this.descendants)this.descendants.hasOwnProperty(ue)&&(this.ancestors[ce].descendants[this.descendants[ue].id]=this.descendants[ue]);return this},addDescendants:function(ae){var ce;for(ce in this.descendants[ae.id]=ae,ae.childElements)ae.childElements.hasOwnProperty(ce)&&this.addDescendants(ae.childElements[ce]);return this},addParents:function(ae){var ce,ue,de;for(ue=(de=se.A.isArray(ae)?ae:arguments).length,ce=0;ce<ue;++ce)se.A.exists(de[ce])&&(se.A.isId(this.board,de[ce])?this.parents.push(de[ce]):se.A.exists(de[ce].id)&&this.parents.push(de[ce].id));this.parents=se.A.uniqueArray(this.parents)},setParents:function(ae){this.parents=[],this.addParents(ae)},addParentsFromJCFunctions:function(ae){var ce,ue,de;for(ce=0;ce<ae.length;ce++)for(ue in ae[ce].deps)de=ae[ce].deps[ue],this.addParents(de),de.addChild(this);return this},removeChild:function(ae){return delete this.childElements[ae.id],this.removeDescendants(ae),delete ae.ancestors[this.id],this},removeDescendants:function(ae){var ce;for(ce in delete this.descendants[ae.id],ae.childElements)ae.childElements.hasOwnProperty(ce)&&this.removeDescendants(ae.childElements[ce]);return this},countChildren:function(){var ae,ce,ue=0;for(ae in ce=this.childElements)ce.hasOwnProperty(ae)&&ae.indexOf("Label")<0&&ue++;return ue},getName:function(){return this.name},addTransform:function(ae){return this},draggable:function(){return this.isDraggable&&!this.evalVisProp("fixed")&&this.type!==Q.A.OBJECT_TYPE_GLIDER},setPosition:function(ae,ce){var ue,de,me,fe,_e=[];if(!se.A.exists(this.parents))return this;for(me=this.parents.length,de=0;de<me;++de)if(ue=this.board.select(this.parents[de]),se.A.isPoint(ue)){if(!ue.draggable())return this;_e.push(ue)}if(ce.length===3&&(ce=ce.slice(1)),fe=this.board.create("transform",ce,{type:"translate"}),(me=_e.length)>0){if(fe.applyOnce(_e),se.A.exists(this.view)&&this.view.elType==="view3d")for(de=0;de<this.parents.length;++de)ue=this.view.select(this.parents[de]),se.A.exists(ue.setPosition2D)&&ue.setPosition2D(fe)}else this.transformations.length>0&&this.transformations[this.transformations.length-1].isNumericMatrix?this.transformations[this.transformations.length-1].melt(fe):this.addTransform(fe);for(de=0;de<me;++de)_e[de].type===Q.A.OBJECT_TYPE_GLIDER&&_e[de].updateGlider();return this},setPositionDirectly:function(ae,ce,ue){var de=new ee.A(ae,ce,this.board,!1),me=new ee.A(ae,ue,this.board,!1),fe=ne.A.subtract(de.usrCoords,me.usrCoords);return this.setPosition(Q.A.COORDS_BY_USER,fe),this},generatePolynomial:function(){return[]},animate:function(ae,ce,ue){ue=ue||{};var de,me,fe,_e=this.board.attr.animationdelay,ye=Math.ceil(ce/_e),be=this,Se=function(Me,Re,Te){var Ee,De,Le,Ue,Ge;for(Ee=oe.A.rgb2hsv(Me),Le=((De=oe.A.rgb2hsv(Re))[0]-Ee[0])/ye,Ue=(De[1]-Ee[1])/ye,Ge=(De[2]-Ee[2])/ye,be.animationData[Te]=[],fe=0;fe<ye;fe++)be.animationData[Te][ye-fe-1]=oe.A.hsv2rgb(Ee[0]+(fe+1)*Le,Ee[1]+(fe+1)*Ue,Ee[2]+(fe+1)*Ge)},Ce=function(Me,Re,Te,Ee){var De,Le;if(Me=parseFloat(Me),Re=parseFloat(Re),!isNaN(Me)&&!isNaN(Re))for(Le=(Re-Me)/ye,be.animationData[Te]=[],fe=0;fe<ye;fe++)De=Me+(fe+1)*Le,be.animationData[Te][ye-fe-1]=Ee?Math.floor(De):De};for(de in this.animationData={},ae)if(ae.hasOwnProperty(de))switch(me=de.toLowerCase()){case"strokecolor":case"fillcolor":Se(this.visProp[me],ae[de],me);break;case"size":if(!se.A.isPoint(this))break;Ce(this.visProp[me],ae[de],me,!0);break;case"strokeopacity":case"strokewidth":case"fillopacity":Ce(this.visProp[me],ae[de],me,!1)}return this.animationCallback=ue.callback,this.board.addAnimation(this),this},update:function(){return this.evalVisProp("trace")&&this.cloneToBackground(),this},updateRenderer:function(){return this},fullUpdate:function(ae){return this.prepareUpdate().update().updateVisibility(ae).updateRenderer()},setDisplayRendNode:function(ae){var ce,ue,de,me,fe;if(ae===void 0&&(ae=this.visPropCalc.visible),ae===this.visPropOld.visible)return this;for(this.board.renderer.display(this,ae),ue=this.inherits.length,de=0;de<ue;de++)if(fe=this.inherits[de],se.A.isArray(fe))for(me=fe.length,ce=0;ce<me;ce++)se.A.exists(fe[ce])&&se.A.exists(fe[ce].rendNode)&&fe[ce].evalVisProp("visible")==="inherit"&&fe[ce].setDisplayRendNode(ae);else se.A.exists(fe)&&se.A.exists(fe.rendNode)&&fe.evalVisProp("visible")==="inherit"&&fe.setDisplayRendNode(ae);return this.hasLabel&&se.A.exists(this.label)&&se.A.exists(this.label.rendNode)&&this.label.evalVisProp("visible")==="inherit"&&this.label.setDisplayRendNode(ae),this},hide:function(){return this.setAttribute({visible:!1}),this},hideElement:function(){return this.hide(),this},show:function(){return this.setAttribute({visible:!0}),this},showElement:function(){return this.show(),this},updateVisibility:function(ae){var ce,ue,de,me,fe,_e;if(this.needsUpdate){if(se.A.exists(this.view)&&this.view.evalVisProp("visible")===!1)this.visPropCalc.visible=!1;else for(ae!==void 0?this.visPropCalc.visible=ae:(_e=this.evalVisProp("visible"),se.A.exists(this.hiddenByParent)&&this.hiddenByParent&&(_e=!1),_e!=="inherit"&&(this.visPropCalc.visible=_e)),ue=this.inherits.length,de=0;de<ue;de++)if(fe=this.inherits[de],se.A.isArray(fe))for(me=fe.length,ce=0;ce<me;ce++)se.A.exists(fe[ce])&&fe[ce].evalVisProp("visible")==="inherit"&&fe[ce].prepareUpdate().updateVisibility(this.visPropCalc.visible);else se.A.exists(fe)&&fe.evalVisProp("visible")==="inherit"&&fe.prepareUpdate().updateVisibility(this.visPropCalc.visible);se.A.exists(this.label)&&se.A.exists(this.label.visProp)&&this.label.evalVisProp("visible")&&this.label.prepareUpdate().updateVisibility(this.visPropCalc.visible)}return this},_set:function(ae,ce){var ue;if(ae=ae.toLocaleLowerCase(),this.visProp.hasOwnProperty(ae)&&ae.indexOf("color")>=0&&se.A.isString(ce)&&ce.length===9&&ce.charAt(0)==="#")ce=oe.A.rgba2rgbo(ce),this.visProp[ae]=ce[0],this.visProp[ae.replace("color","opacity")]=ce[1];else if(ce===null||!se.A.isObject(ce)||se.A.exists(ce.id)||se.A.exists(ce.name))this.visProp[ae]=ce;else for(ue in this.visProp[ae]={},ce)ce.hasOwnProperty(ue)&&(this.visProp[ae][ue.toLocaleLowerCase()]=ce[ue])},resolveShortcuts:function(ae){var ce,ue,de,me=["traceattributes","traceAttributes"];for(ce in ie.A.shortcuts)if(ie.A.shortcuts.hasOwnProperty(ce)){if(se.A.exists(ae[ce]))for(ue=0;ue<ie.A.shortcuts[ce].length;ue++)se.A.exists(ae[ie.A.shortcuts[ce][ue]])||(ae[ie.A.shortcuts[ce][ue]]=ae[ce]);for(de=0;de<me.length;de++)se.A.isObject(ae[me[de]])&&(ae[me[de]]=this.resolveShortcuts(ae[me[de]]))}return ae},setLabel:function(ae){this.hasLabel||this.setAttribute({withlabel:!0}),this.setLabelText(ae)},setLabelText:function(ae){return se.A.exists(this.label)&&(ae=ae.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.label.setText(ae)),this},setName:function(ae){ae=ae.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.elType!=="slider"&&this.setLabelText(ae),this.setAttribute({name:ae})},setProperty:function(){Z.A.deprecated("setProperty()","setAttribute()"),this.setAttribute.apply(this,arguments)},setAttribute:function(ae){var ce,ue,de,me,fe,_e,ye,be,Se,Ce={};for(ce=0;ce<arguments.length;ce++)_e=arguments[ce],se.A.isString(_e)?(be=_e.split(":"),Ce[se.A.trim(be[0])]=se.A.trim(be[1])):se.A.isArray(_e)?Ce[_e[0]]=_e[1]:Z.A.extend(Ce,_e);for(ce in Ce=this.resolveShortcuts(Ce))if(Ce.hasOwnProperty(ce)){if(me=ce.replace(/\s+/g,"").toLowerCase(),fe=Ce[ce],se.A.isObject(fe)&&se.A.exists(this.visProp[me])){if(!se.A.isObject(this.visProp[me])&&fe!==null&&se.A.isObject(fe)&&(this.visProp[me]={}),se.A.mergeAttr(this.visProp[me],fe),this.type===Q.A.OBJECT_TYPE_TICKS&&se.A.exists(this.labels))for(de=this.labels.length,ue=0;ue<de;ue++)this.labels[ue].setAttribute(fe);else if(se.A.exists(this[me]))if(se.A.isArray(this[me]))for(ue=0;ue<this[me].length;ue++)this[me][ue].setAttribute(fe);else this[me].setAttribute(fe);else Se=null,this.triggerEventHandlers(["attribute:"+me],[Se,fe,this]);continue}switch(Se=this.visProp[me],me){case"checked":se.A.exists(this.rendNodeTag)&&(this.rendNodeCheckbox.checked=!!fe);break;case"disabled":se.A.exists(this.rendNodeTag)&&(this.rendNodeTag.disabled=!!fe);break;case"face":se.A.isPoint(this)&&(this.visProp.face=fe,this.board.renderer.changePointStyle(this));break;case"generatelabelvalue":this.type===Q.A.OBJECT_TYPE_TICKS&&se.A.isFunction(fe)&&(this.generateLabelValue=fe);break;case"gradient":this.visProp.gradient=fe,this.board.renderer.setGradient(this);break;case"gradientsecondcolor":fe=oe.A.rgba2rgbo(fe),this.visProp.gradientsecondcolor=fe[0],this.visProp.gradientsecondopacity=fe[1],this.board.renderer.updateGradient(this);break;case"gradientsecondopacity":this.visProp.gradientsecondopacity=fe,this.board.renderer.updateGradient(this);break;case"infoboxtext":se.A.isString(fe)?this.infoboxText=fe:this.infoboxText=!1;break;case"labelcolor":ye=(fe=oe.A.rgba2rgbo(fe))[1],fe=fe[0],ye===0&&se.A.exists(this.label)&&this.hasLabel&&this.label.hideElement(),se.A.exists(this.label)&&this.hasLabel&&(this.label.visProp.strokecolor=fe,this.board.renderer.setObjectStrokeColor(this.label,fe,ye)),this.elementClass===Q.A.OBJECT_CLASS_TEXT&&(this.visProp.strokecolor=fe,this.visProp.strokeopacity=ye,this.board.renderer.setObjectStrokeColor(this,fe,ye));break;case"layer":this.board.renderer.setLayer(this,this.eval(fe)),this._set(me,fe);break;case"maxlength":se.A.exists(this.rendNodeTag)&&(this.rendNodeTag.maxlength=!!fe);break;case"name":Se=this.name,delete this.board.elementsByName[this.name],this.name=fe,this.board.elementsByName[this.name]=this;break;case"needsregularupdate":this.needsRegularUpdate=!(fe==="false"||fe===!1),this.board.renderer.setBuffering(this,this.needsRegularUpdate?"auto":"static");break;case"onpolygon":this.type===Q.A.OBJECT_TYPE_GLIDER&&(this.onPolygon=!!fe);break;case"radius":this.type!==Q.A.OBJECT_TYPE_ANGLE&&this.type!==Q.A.OBJECT_TYPE_SECTOR||this.setRadius(fe);break;case"rotate":(this.elementClass===Q.A.OBJECT_CLASS_TEXT&&this.evalVisProp("display")==="internal"||this.type===Q.A.OBJECT_TYPE_IMAGE)&&this.addRotation(fe);break;case"tabindex":se.A.exists(this.rendNode)&&(this.rendNode.setAttribute("tabindex",fe),this._set(me,fe));break;case"trace":fe==="false"||fe===!1?(this.clearTrace(),this.visProp.trace=!1):this.visProp.trace=fe!=="pause";break;case"visible":this.visProp.visible=fe!=="false"&&(fe==="true"||fe),this.setDisplayRendNode(this.evalVisProp("visible")),this.evalVisProp("visible")&&se.A.exists(this.updateSize)&&this.updateSize();break;case"withlabel":this.visProp.withlabel=fe,this.evalVisProp("withlabel")?(this.label||this.createLabel(),this.label.setAttribute({visible:"inherit"})):this.label&&this.hasLabel&&this.label.setAttribute({visible:!1}),this.hasLabel=fe;break;case"straightfirst":case"straightlast":for(ue in this._set(me,fe),this.childElements)this.childElements.hasOwnProperty(ue)&&this.childElements[ue].elType==="glider"&&this.childElements[ue].fullUpdate();break;default:se.A.exists(this.visProp[me])&&(!Z.A.Validator[me]||Z.A.Validator[me]&&Z.A.Validator[me](fe)||Z.A.Validator[me]&&se.A.isFunction(fe)&&Z.A.Validator[me](fe(this)))?(fe=(!fe.toLowerCase||fe.toLowerCase()!=="false")&&fe,this._set(me,fe)):me in ie.A.shortcuts||Z.A.warn("attribute '"+me+"' does not accept type '"+typeof fe+"' of value "+fe+".")}this.triggerEventHandlers(["attribute:"+me],[Se,fe,this])}return this.triggerEventHandlers(["attribute"],[Ce,this]),this.evalVisProp("needsregularupdate")?this.board.update(this):this.board.fullUpdate(),this.elementClass===Q.A.OBJECT_CLASS_TEXT&&this.updateSize(),this},getProperty:function(){Z.A.deprecated("getProperty()","getAttribute()"),this.getProperty.apply(this,arguments)},getAttribute:function(ae){var ce;switch(ae=ae.toLowerCase()){case"needsregularupdate":ce=this.needsRegularUpdate;break;case"labelcolor":ce=this.label.visProp.strokecolor;break;case"infoboxtext":ce=this.infoboxText;break;case"withlabel":ce=this.hasLabel;break;default:ce=this.visProp[ae]}return ce},evalVisProp:function(ae){var ce,ue,de,me,fe,_e,ye;if((ae=ae.toLowerCase()).indexOf(".")===-1)ce=this.visProp[ae];else for(me=(ue=ae.split(".")).length,ce=this.visProp,de=0;de<me;de++)se.A.exists(ce)&&(ce=ce[ue[de]]);if(Z.A.isFunction(ce))return this.visProp.islabel===!0&&se.A.exists(this.visProp.anchor)?this.visProp.anchor.visProp.element3d!==null?ce(this.visProp.anchor.visProp.element3d):ce(this.visProp.anchor):Z.A.exists(this.visProp.element3d)?ce(this.visProp.element3d):ce(this);if(ce==="inherit"){for(fe in this.descendants)if(this.descendants.hasOwnProperty(fe)){for(ye=!1,me=(_e=this.descendants[fe]).inherits.length,de=0;de<me;de++)if(this.id===_e.inherits[de].id){ye=!0;break}if(ye){ce=_e.evalVisProp(ae);break}}}return ce},eval:function(ae){return Z.A.isFunction(ae)?this.visProp.islabel===!0&&se.A.exists(this.visProp.anchor)?this.visProp.anchor.visProp.element3d!==null?ae(this.visProp.anchor.visProp.element3d):ae(this.visProp.anchor):this.visProp.element3d!==null?ae(this.visProp.element3d):ae(this):ae},setDash:function(ae){return this.setAttribute({dash:ae}),this},prepareUpdate:function(){return this.needsUpdate=!0,this},remove:function(){return this.board.renderer.remove(this.rendNode),this.hasLabel&&this.board.renderer.remove(this.board.renderer.getElementById(this.label.id)),this},getTextAnchor:function(){return new ee.A(Q.A.COORDS_BY_USER,[0,0],this.board)},getLabelAnchor:function(){return new ee.A(Q.A.COORDS_BY_USER,[0,0],this.board)},setArrow:function(ae,ce){return this.visProp.firstarrow=ae,this.visProp.lastarrow=ce,ce&&(this.type=Q.A.OBJECT_TYPE_VECTOR,this.elType="arrow"),this.prepareUpdate().update().updateVisibility().updateRenderer(),this},createGradient:function(){var ae=this.evalVisProp("gradient");ae!=="linear"&&ae!=="radial"||this.board.renderer.setGradient(this)},createLabel:function(){var ae,ce=this;return Z.A.elements.text?((ae=se.A.deepCopy(this.visProp.label,null)).id=this.id+"Label",ae.isLabel=!0,ae.anchor=this,ae.priv=this.visProp.priv,this.visProp.withlabel&&(this.label=Z.A.elements.text(this.board,[0,0,function(){return se.A.isFunction(ce.name)?ce.name(ce):ce.name}],ae),this.label.needsUpdate=!0,this.label.dump=!1,this.label.fullUpdate(),this.hasLabel=!0)):Z.A.debug("JSXGraph: Can't create label: text element is not available. Make sure you include base/text"),this},highlight:function(ae){return ae=se.A.def(ae,!1),!this.evalVisProp("highlight")||this.highlighted&&!ae||(this.highlighted=!0,this.board.highlightedObjects[this.id]=this,this.board.renderer.highlight(this)),this},noHighlight:function(){return this.highlighted&&(this.highlighted=!1,delete this.board.highlightedObjects[this.id],this.board.renderer.noHighlight(this)),this},clearTrace:function(){var ae;for(ae in this.traces)this.traces.hasOwnProperty(ae)&&this.board.renderer.remove(this.traces[ae]);return this.numTraces=0,this},cloneToBackground:function(){return this},bounds:function(){return[0,0,0,0]},normalize:function(){return this.stdform=te.A.normalize(this.stdform),this},toJSON:function(){var ae,ce,ue=['{"name":',this.name];for(ce in ue.push(', "id":'+this.id),ae=[],this.visProp)this.visProp.hasOwnProperty(ce)&&se.A.exists(this.visProp[ce])&&ae.push('"'+ce+'":'+this.visProp[ce]);return ue.push(', "visProp":{'+ae.toString()+"}"),ue.push("}"),ue.join("")},addRotation:function(ae){var ce,ue,de,me,fe,_e=this;return this.elementClass!==Q.A.OBJECT_CLASS_TEXT&&this.type!==Q.A.OBJECT_TYPE_IMAGE||ae===0||(ce=this.board.create("transform",[function(){return-_e.X()},function(){return-_e.Y()}],{type:"translate"}),ue=this.board.create("transform",[function(){return _e.X()},function(){return _e.Y()}],{type:"translate"}),de=this.board.create("transform",[function(){return _e.board.unitX/_e.board.unitY},function(){return 1}],{type:"scale"}),me=this.board.create("transform",[function(){return _e.board.unitY/_e.board.unitX},function(){return 1}],{type:"scale"}),fe=this.board.create("transform",[function(){return _e.eval(ae)*Math.PI/180}],{type:"rotate"}),ce.bindTo(this),de.bindTo(this),fe.bindTo(this),me.bindTo(this),ue.bindTo(this)),this},highlightStrokeColor:function(ae){return Z.A.deprecated("highlightStrokeColor()","setAttribute()"),this.setAttribute({highlightStrokeColor:ae}),this},strokeColor:function(ae){return Z.A.deprecated("strokeColor()","setAttribute()"),this.setAttribute({strokeColor:ae}),this},strokeWidth:function(ae){return Z.A.deprecated("strokeWidth()","setAttribute()"),this.setAttribute({strokeWidth:ae}),this},fillColor:function(ae){return Z.A.deprecated("fillColor()","setAttribute()"),this.setAttribute({fillColor:ae}),this},highlightFillColor:function(ae){return Z.A.deprecated("highlightFillColor()","setAttribute()"),this.setAttribute({highlightFillColor:ae}),this},labelColor:function(ae){return Z.A.deprecated("labelColor()","setAttribute()"),this.setAttribute({labelColor:ae}),this},dash:function(ae){return Z.A.deprecated("dash()","setAttribute()"),this.setAttribute({dash:ae}),this},visible:function(ae){return Z.A.deprecated("visible()","setAttribute()"),this.setAttribute({visible:ae}),this},shadow:function(ae){return Z.A.deprecated("shadow()","setAttribute()"),this.setAttribute({shadow:ae}),this},getType:function(){return this.elType},getParents:function(){return se.A.isArray(this.parents)?this.parents:[]},snapToGrid:function(){return this},snapToPoints:function(){return this},getAttributes:function(){var ae,ce=se.A.deepCopy(this.visProp),ue=[],de=ue.length;for(ce.id=this.id,ce.name=this.name,ae=0;ae<de;ae++)delete ce[ue[ae]];return ce},hasPoint:function(ae,ce){return!1},addTicks:function(ae){return ae.id!==""&&se.A.exists(ae.id)||(ae.id=this.id+"_ticks_"+(this.ticks.length+1)),this.board.renderer.drawTicks(ae),this.ticks.push(ae),ae.id},removeAllTicks:function(){var ae;if(se.A.exists(this.ticks)){for(ae=this.ticks.length-1;ae>=0;ae--)this.removeTicks(this.ticks[ae]);this.ticks=[],this.board.update()}},removeTicks:function(ae){var ce,ue;if(se.A.exists(this.defaultTicks)&&this.defaultTicks===ae&&(this.defaultTicks=null),se.A.exists(this.ticks)){for(ce=this.ticks.length-1;ce>=0;ce--)if(this.ticks[ce]===ae){if(this.board.removeObject(this.ticks[ce]),this.ticks[ce].ticks)for(ue=0;ue<this.ticks[ce].ticks.length;ue++)se.A.exists(this.ticks[ce].labels[ue])&&this.board.removeObject(this.ticks[ce].labels[ue]);delete this.ticks[ce];break}}},getSnapSizes:function(){var ae,ce,ue;return ae=this.evalVisProp("snapsizex"),ce=this.evalVisProp("snapsizey"),ae<=0&&this.board.defaultAxes&&this.board.defaultAxes.x.defaultTicks&&(ae=(ue=this.board.defaultAxes.x.defaultTicks).ticksDelta*(ue.evalVisProp("minorticks")+1)),ce<=0&&this.board.defaultAxes&&this.board.defaultAxes.y.defaultTicks&&(ce=(ue=this.board.defaultAxes.y.defaultTicks).ticksDelta*(ue.evalVisProp("minorticks")+1)),[ae,ce]},handleSnapToGrid:function(ae,ce){var ue,de,me,fe,_e,ye,be,Se,Ce,Me,Re,Te=this.evalVisProp("attracttogrid"),Ee=this.evalVisProp("attractorunit"),De=this.evalVisProp("attractordistance");return!se.A.exists(this.coords)||this.evalVisProp("fixed")||(this.evalVisProp("snaptogrid")||Te||ae===!0)&&(ue=this.coords.usrCoords[1],de=this.coords.usrCoords[2],Me=(Ce=this.getSnapSizes())[0],Re=Ce[1],Me>0&&Re>0&&(Se=this.board.getBoundingBox(),me=Math.round(ue/Me)*Me,fe=Math.round(de/Re)*Re,_e=new Z.A.Coords(Q.A.COORDS_BY_USER,[me,fe],this.board),(!Te||_e.distance(Ee==="screen"?Q.A.COORDS_BY_SCREEN:Q.A.COORDS_BY_USER,this.coords)<De)&&(ue=me,de=fe,ce||(ye=Math.min(Se[0],Se[2]),be=Math.max(Se[0],Se[2]),ue<ye&&ue>ye-Me?ue+=Me:ue>be&&ue<be+Me&&(ue-=Me),ye=Math.min(Se[1],Se[3]),be=Math.max(Se[1],Se[3]),de<ye&&de>ye-Re?de+=Re:de>be&&de<be+Re&&(de-=Re)),this.coords.setCoordinates(Q.A.COORDS_BY_USER,[ue,de])))),this},getBoundingBox:function(){var ae,ce,ue,de,me,fe,_e=[1/0,1/0,-1/0,-1/0];if(this.type===Q.A.OBJECT_TYPE_POLYGON){if((ce=this.vertices.length-1)<=0)return _e;for(ae=0;ae<ce;ae++)ue=this.vertices[ae].X(),_e[0]=ue<_e[0]?ue:_e[0],_e[2]=ue>_e[2]?ue:_e[2],ue=this.vertices[ae].Y(),_e[1]=ue<_e[1]?ue:_e[1],_e[3]=ue>_e[3]?ue:_e[3]}else if(this.elementClass===Q.A.OBJECT_CLASS_CIRCLE)de=this.center.X(),me=this.center.Y(),_e=[de-this.radius,me+this.radius,de+this.radius,me-this.radius];else if(this.elementClass===Q.A.OBJECT_CLASS_CURVE){if((ce=this.points.length)===0)return _e;for(ae=0;ae<ce;ae++)ue=this.points[ae].usrCoords[1],_e[0]=ue<_e[0]?ue:_e[0],_e[2]=ue>_e[2]?ue:_e[2],ue=this.points[ae].usrCoords[2],_e[1]=ue<_e[1]?ue:_e[1],_e[3]=ue>_e[3]?ue:_e[3]}else this.elementClass===Q.A.OBJECT_CLASS_POINT?(de=this.X(),me=this.Y(),_e=[de-(fe=this.evalVisProp("size"))/this.board.unitX,me-fe/this.board.unitY,de+fe/this.board.unitX,me+fe/this.board.unitY]):this.elementClass===Q.A.OBJECT_CLASS_LINE&&(ue=this.point1.coords.usrCoords[1],_e[0]=ue<_e[0]?ue:_e[0],_e[2]=ue>_e[2]?ue:_e[2],ue=this.point1.coords.usrCoords[2],_e[1]=ue<_e[1]?ue:_e[1],_e[3]=ue>_e[3]?ue:_e[3],ue=this.point2.coords.usrCoords[1],_e[0]=ue<_e[0]?ue:_e[0],_e[2]=ue>_e[2]?ue:_e[2],ue=this.point2.coords.usrCoords[2],_e[1]=ue<_e[1]?ue:_e[1],_e[3]=ue>_e[3]?ue:_e[3]);return _e},addEvent:Z.A.shortcut(Z.A.GeometryElement.prototype,"on"),removeEvent:Z.A.shortcut(Z.A.GeometryElement.prototype,"off"),formatNumberLocale:function(ae,ce){var ue,de,me,fe={},_e={maximumfractiondigits:"maximumFractionDigits",minimumfractiondigits:"minimumFractionDigits",compactdisplay:"compactDisplay",currencydisplay:"currencyDisplay",currencysign:"currencySign",localematcher:"localeMatcher",numberingsystem:"numberingSystem",signdisplay:"signDisplay",unitdisplay:"unitDisplay",usegrouping:"useGrouping",roundingmode:"roundingMode",roundingpriority:"roundingPriority",roundingincrement:"roundingIncrement",trailingzerodisplay:"trailingZeroDisplay",minimumintegerdigits:"minimumIntegerDigits",minimumsignificantdigits:"minimumSignificantDigits",maximumsignificantdigits:"maximumSignificantDigits"};if(se.A.exists(Intl)&&this.useLocale()){for(me in ue=this.evalVisProp("intl.locale")||this.eval(this.board.attr.intl.locale),de=this.evalVisProp("intl.options")||{})de.hasOwnProperty(me)&&(_e.hasOwnProperty(me)?fe[_e[me]]=this.eval(de[me]):fe[me]=this.eval(de[me]));return me="maximumfractiondigits",se.A.exists(de[me])||(fe[_e[me]]=ce),Intl.NumberFormat(ue,fe).format(ae)}return ae},useLocale:function(){var ae;return!(!se.A.exists(this.visProp.intl)||!se.A.exists(this.visProp.intl.enabled))&&((ae=this.evalVisProp("intl.enabled"))===!0||ae==="inherit"&&this.eval(this.board.attr.intl.enabled)===!0)},__evt__over:function(ae){},__evt__mouseover:function(ae){},__evt__out:function(ae){},__evt__mouseout:function(ae){},__evt__move:function(ae){},__evt__mousemove:function(ae){},__evt__drag:function(ae){},__evt__mousedrag:function(ae){},__evt__pendrag:function(ae){},__evt__touchdrag:function(ae){},__evt__keydrag:function(ae){},__evt__down:function(ae){},__evt__mousedown:function(ae){},__evt__pendown:function(ae){},__evt__touchdown:function(ae){},__evt__click:function(ae){},__evt__dblclick:function(ae){},__evt__mouseclick:function(ae){},__evt__mousedblclick:function(ae){},__evt__pointerclick:function(ae){},__evt__pointerdblclick:function(ae){},__evt__up:function(ae){},__evt__mouseup:function(ae){},__evt__penup:function(ae){},__evt__touchup:function(ae){},__evt__attribute:function(ae,ce){},__evt__attribute_:function(ae,ce,ue){},__evt:function(){}}),_.A=Z.A.GeometryElement},171:function(G,_,J){var Z=J(443),Q=J(188),ee=J(133),te=J(477),ne={rk4:{s:4,A:[[0,0,0,0],[.5,0,0,0],[0,.5,0,0],[0,0,1,0]],b:[1/6,1/3,1/3,1/6],c:[0,.5,.5,1]},heun:{s:2,A:[[0,0],[1,0]],b:[.5,.5],c:[0,1]},euler:{s:1,A:[[0]],b:[1],c:[0]}};te.A.Numerics={Gauss:function(ie,re){var oe,se,ae,ce,ue,de=te.A.eps,me=ie.length>0?ie[0].length:0;if(me!==re.length||me!==ie.length)throw new Error("JXG.Math.Numerics.Gauss: Dimensions don't match. A must be a square matrix and b must be of the same length as A.");for(ce=[],ue=re.slice(0,me),oe=0;oe<me;oe++)ce[oe]=ie[oe].slice(0,me);for(se=0;se<me;se++){for(oe=me-1;oe>se;oe--)if(Math.abs(ce[oe][se])>de)if(Math.abs(ce[se][se])<de)Q.A.swap(ce,oe,se),Q.A.swap(ue,oe,se);else for(ce[oe][se]/=ce[se][se],ue[oe]-=ce[oe][se]*ue[se],ae=se+1;ae<me;ae++)ce[oe][ae]-=ce[oe][se]*ce[se][ae];if(Math.abs(ce[se][se])<de)throw new Error("JXG.Math.Numerics.Gauss(): The given matrix seems to be singular.")}return this.backwardSolve(ce,ue,!0),ue},backwardSolve:function(ie,re,oe){var se,ae,ce,ue,de;for(se=oe?re:re.slice(0,re.length),ae=ie.length,ce=ie.length>0?ie[0].length:0,ue=ae-1;ue>=0;ue--){for(de=ce-1;de>ue;de--)se[ue]-=ie[ue][de]*se[de];se[ue]/=ie[ue][ue]}return se},gaussBareiss:function(ie){var re,oe,se,ae,ce,ue,de,me,fe,_e=te.A.eps;if((de=ie.length)<=0)return 0;for(ie[0].length<de&&(de=ie[0].length),me=[],ae=0;ae<de;ae++)me[ae]=ie[ae].slice(0,de);for(oe=1,se=1,re=0;re<de-1;re++){if(ue=me[re][re],Math.abs(ue)<_e){for(ae=re+1;ae<de&&!(Math.abs(me[ae][re])>=_e);ae++);if(ae===de)return 0;for(ce=re;ce<de;ce++)fe=me[ae][ce],me[ae][ce]=me[re][ce],me[re][ce]=fe;se=-se,ue=me[re][re]}for(ae=re+1;ae<de;ae++)for(ce=re+1;ce<de;ce++)fe=ue*me[ae][ce]-me[ae][re]*me[re][ce],me[ae][ce]=fe/oe;oe=ue}return se*me[de-1][de-1]},det:function(ie){return ie.length===2&&ie[0].length===2?ie[0][0]*ie[1][1]-ie[1][0]*ie[0][1]:this.gaussBareiss(ie)},Jacobi:function(ie){var re,oe,se,ae,ce,ue,de,me,fe,_e=te.A.eps*te.A.eps,ye=0,be=ie.length,Se=[[0,0,0],[0,0,0],[0,0,0]],Ce=[[0,0,0],[0,0,0],[0,0,0]],Me=0;for(re=0;re<be;re++){for(oe=0;oe<be;oe++)Se[re][oe]=0,Ce[re][oe]=ie[re][oe],ye+=Math.abs(Ce[re][oe]);Se[re][re]=1}if(be===1)return[Ce,Se];if(ye<=0)return[Ce,Se];ye/=be*be;do{for(me=0,fe=0,oe=1;oe<be;oe++)for(re=0;re<oe;re++)if((ae=Math.abs(Ce[re][oe]))>fe&&(fe=ae),me+=ae,ae>=_e){for(ae=.5*Math.atan2(2*Ce[re][oe],Ce[re][re]-Ce[oe][oe]),ce=Math.sin(ae),ue=Math.cos(ae),se=0;se<be;se++)de=Ce[se][re],Ce[se][re]=ue*de+ce*Ce[se][oe],Ce[se][oe]=-ce*de+ue*Ce[se][oe],de=Se[se][re],Se[se][re]=ue*de+ce*Se[se][oe],Se[se][oe]=-ce*de+ue*Se[se][oe];for(Ce[re][re]=ue*Ce[re][re]+ce*Ce[oe][re],Ce[oe][oe]=-ce*Ce[re][oe]+ue*Ce[oe][oe],Ce[re][oe]=0,se=0;se<be;se++)Ce[re][se]=Ce[se][re],Ce[oe][se]=Ce[se][oe]}Me+=1}while(Math.abs(me)/ye>_e&&Me<2e3);return[Ce,Se]},NewtonCotes:function(ie,re,oe){var se,ae,ce,ue=0,de=oe&&Q.A.isNumber(oe.number_of_nodes)?oe.number_of_nodes:28,me={trapez:!0,simpson:!0,milne:!0},fe=oe&&oe.integration_type&&me.hasOwnProperty(oe.integration_type)&&me[oe.integration_type]?oe.integration_type:"milne",_e=(ie[1]-ie[0])/de;switch(fe){case"trapez":for(ue=.5*(re(ie[0])+re(ie[1])),se=ie[0],ae=0;ae<de-1;ae++)ue+=re(se+=_e);ue*=_e;break;case"simpson":if(de%2>0)throw new Error("JSXGraph:  INT_SIMPSON requires config.number_of_nodes dividable by 2.");for(ce=de/2,ue=re(ie[0])+re(ie[1]),se=ie[0],ae=0;ae<ce-1;ae++)ue+=2*re(se+=2*_e);for(se=ie[0]-_e,ae=0;ae<ce;ae++)ue+=4*re(se+=2*_e);ue*=_e/3;break;default:if(de%4>0)throw new Error("JSXGraph: Error in INT_MILNE: config.number_of_nodes must be a multiple of 4");for(ce=.25*de,ue=7*(re(ie[0])+re(ie[1])),se=ie[0],ae=0;ae<ce-1;ae++)ue+=14*re(se+=4*_e);for(se=ie[0]-3*_e,ae=0;ae<ce;ae++)ue+=32*(re(se+=4*_e)+re(se+2*_e));for(se=ie[0]-2*_e,ae=0;ae<ce;ae++)ue+=12*re(se+=4*_e);ue*=2*_e/45}return ue},Romberg:function(ie,re,oe){var se,ae,ce,ue,de,me,fe,_e,ye=[],be=0,Se=1/0,Ce=oe&&Q.A.isNumber(oe.max_iterations)?oe.max_iterations:20,Me=oe&&Q.A.isNumber(oe.eps)?oe.eps:oe.eps||1e-7;for(se=ie[0],ce=(ae=ie[1])-se,de=1,ye[0]=.5*ce*(re(se)+re(ae)),me=0;me<Ce;++me){for(ue=0,ce*=.5,de*=2,_e=1,fe=1;fe<de;fe+=2)ue+=re(se+fe*ce);for(ye[me+1]=.5*ye[me]+ue*ce,be=ye[me+1],fe=me-1;fe>=0;--fe)_e*=4,ye[fe]=ye[fe+1]+(ye[fe+1]-ye[fe])/(_e-1),be=ye[fe];if(Math.abs(be-Se)<Me*Math.abs(be))break;Se=be}return be},GaussLegendre:function(ie,re,oe){var se,ae,ce,ue,de,me,fe,_e,ye=0,be=[],Se=[],Ce=oe&&Q.A.isNumber(oe.n)?oe.n:12;if(Ce>18&&(Ce=18),be[2]=[.5773502691896257],Se[2]=[1],be[4]=[.33998104358485626,.8611363115940526],Se[4]=[.6521451548625461,.34785484513745385],be[6]=[.2386191860831969,.6612093864662645,.932469514203152],Se[6]=[.46791393457269104,.3607615730481386,.17132449237917036],be[8]=[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],Se[8]=[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],be[10]=[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],Se[10]=[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],be[12]=[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],Se[12]=[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],be[14]=[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],Se[14]=[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],be[16]=[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499],Se[16]=[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096],be[18]=[.0847750130417353,.2518862256915055,.41175116146284263,.5597708310739475,.6916870430603532,.8037049589725231,.8926024664975557,.9558239495713977,.9915651684209309],Se[18]=[.1691423829631436,.16427648374583273,.15468467512626524,.14064291467065065,.12255520671147846,.10094204410628717,.07642573025488905,.0497145488949698,.02161601352648331],be[3]=[0,.7745966692414834],Se[3]=[.8888888888888888,.5555555555555556],be[5]=[0,.5384693101056831,.906179845938664],Se[5]=[.5688888888888889,.47862867049936647,.23692688505618908],be[7]=[0,.4058451513773972,.7415311855993945,.9491079123427585],Se[7]=[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],be[9]=[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],Se[9]=[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],be[11]=[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],Se[11]=[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],be[13]=[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],Se[13]=[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],be[15]=[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],Se[15]=[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],be[17]=[0,.17848418149584785,.3512317634538763,.5126905370864769,.6576711592166907,.7815140038968014,.8802391537269859,.9506755217687678,.9905754753144174],Se[17]=[.17944647035620653,.17656270536699264,.16800410215645004,.15404576107681028,.13513636846852548,.11188384719340397,.08503614831717918,.0554595293739872,.02414830286854793],se=ie[0],ae=ie[1],ue=Ce+1>>1,fe=be[Ce],_e=Se[Ce],me=.5*(ae-se),de=.5*(ae+se),!0&Ce)for(ye=_e[0]*re(de),ce=1;ce<ue;++ce)ye+=_e[ce]*(re(de+me*fe[ce])+re(de-me*fe[ce]));else for(ye=0,ce=0;ce<ue;++ce)ye+=_e[ce]*(re(de+me*fe[ce])+re(de-me*fe[ce]));return me*ye},_rescale_error:function(ie,re,oe){var se,ae,ce=2220446049250313e-31;return ie=Math.abs(ie),oe!==0&&ie!==0&&(ie=(se=Math.pow(200*ie/oe,1.5))<1?oe*se:oe),re>20041683600089728e-310&&(ae=50*ce*re)>ie&&(ie=ae),ie},_gaussKronrod:function(ie,re,oe,se,ae,ce,ue){var de,me,fe,_e,ye,be,Se,Ce,Me,Re,Te,Ee=ie[0],De=ie[1],Le=.5*(Ee+De),Ue=.5*(De-Ee),Ge=Math.abs(Ue),Ye=re(Le),ke=0,Fe=Ye*ce[oe-1],Ve=Math.abs(Fe),$e=0,Xe=[],ze=[];for(oe%2==0&&(ke=Ye*ae[oe/2-1]),de=Math.floor((oe-1)/2),ye=0;ye<de;ye++)Te=(Me=re(Le-(Ce=Ue*se[be=2*ye+1])))+(Re=re(Le+Ce)),Xe[be]=Me,ze[be]=Re,ke+=ae[ye]*Te,Fe+=ce[be]*Te,Ve+=ce[be]*(Math.abs(Me)+Math.abs(Re));for(de=Math.floor(oe/2),ye=0;ye<de;ye++)Me=re(Le-(Ce=Ue*se[Se=2*ye])),Re=re(Le+Ce),Xe[Se]=Me,ze[Se]=Re,Fe+=ce[Se]*(Me+Re),Ve+=ce[Se]*(Math.abs(Me)+Math.abs(Re));for(fe=.5*Fe,$e=ce[oe-1]*Math.abs(Ye-fe),ye=0;ye<oe-1;ye++)$e+=ce[ye]*(Math.abs(Xe[ye]-fe)+Math.abs(ze[ye]-fe));return _e=(Fe-ke)*Ue,Ve*=Ge,$e*=Ge,me=Fe*=Ue,ue.abserr=this._rescale_error(_e,Ve,$e),ue.resabs=Ve,ue.resasc=$e,me},GaussKronrod15:function(ie,re,oe){return this._gaussKronrod(ie,re,8,[.9914553711208126,.9491079123427585,.8648644233597691,.7415311855993945,.5860872354676911,.4058451513773972,.20778495500789848,0],[.1294849661688697,.27970539148927664,.3818300505051189,.4179591836734694],[.022935322010529224,.06309209262997856,.10479001032225019,.14065325971552592,.1690047266392679,.19035057806478542,.20443294007529889,.20948214108472782],oe)},GaussKronrod21:function(ie,re,oe){return this._gaussKronrod(ie,re,11,[.9956571630258081,.9739065285171717,.9301574913557082,.8650633666889845,.7808177265864169,.6794095682990244,.5627571346686047,.4333953941292472,.2943928627014602,.14887433898163122,0],[.06667134430868814,.1494513491505806,.21908636251598204,.26926671930999635,.29552422471475287],[.011694638867371874,.032558162307964725,.054755896574351995,.07503967481091996,.0931254545836976,.10938715880229764,.12349197626206584,.13470921731147334,.14277593857706009,.14773910490133849,.1494455540029169],oe)},GaussKronrod31:function(ie,re,oe){return this._gaussKronrod(ie,re,16,[.9980022986933971,.9879925180204854,.9677390756791391,.937273392400706,.8972645323440819,.8482065834104272,.790418501442466,.7244177313601701,.650996741297417,.5709721726085388,.4850818636402397,.3941513470775634,.29918000715316884,.20119409399743451,.1011420669187175,0],[.03075324199611727,.07036604748810812,.10715922046717194,.13957067792615432,.16626920581699392,.1861610000155622,.19843148532711158,.2025782419255613],[.005377479872923349,.015007947329316122,.02546084732671532,.03534636079137585,.04458975132476488,.05348152469092809,.06200956780067064,.06985412131872826,.07684968075772038,.08308050282313302,.08856444305621176,.09312659817082532,.09664272698362368,.09917359872179196,.10076984552387559,.10133000701479154],oe)},_workspace:function(ie,re){return{limit:re,size:0,nrmax:0,i:0,alist:[ie[0]],blist:[ie[1]],rlist:[0],elist:[0],order:[0],level:[0],qpsrt:function(){var oe,se,ae,ce,ue,de=this.size-1,me=this.limit,fe=this.nrmax,_e=this.order[fe];if(de<2)return this.order[0]=0,this.order[1]=1,void(this.i=_e);for(oe=this.elist[_e];fe>0&&oe>this.elist[this.order[fe-1]];)this.order[fe]=this.order[fe-1],fe--;for(ue=de<me/2+2?de:me-de+1,ae=fe+1;ae<ue&&oe<this.elist[this.order[ae]];)this.order[ae-1]=this.order[ae],ae++;for(this.order[ae-1]=_e,se=this.elist[de],ce=ue-1;ce>ae-2&&se>=this.elist[this.order[ce]];)this.order[ce+1]=this.order[ce],ce--;this.order[ce+1]=de,_e=this.order[fe],this.i=_e,this.nrmax=fe},set_initial_result:function(oe,se){this.size=1,this.rlist[0]=oe,this.elist[0]=se},update:function(oe,se,ae,ce,ue,de,me,fe){var _e=this.i,ye=this.size,be=this.level[this.i]+1;fe>ce?(this.alist[_e]=ue,this.rlist[_e]=me,this.elist[_e]=fe,this.level[_e]=be,this.alist[ye]=oe,this.blist[ye]=se,this.rlist[ye]=ae,this.elist[ye]=ce,this.level[ye]=be):(this.blist[_e]=se,this.rlist[_e]=ae,this.elist[_e]=ce,this.level[_e]=be,this.alist[ye]=ue,this.blist[ye]=de,this.rlist[ye]=me,this.elist[ye]=fe,this.level[ye]=be),this.size++,be>this.maximum_level&&(this.maximum_level=be),this.qpsrt()},retrieve:function(){var oe=this.i;return{a:this.alist[oe],b:this.blist[oe],r:this.rlist[oe],e:this.elist[oe]}},sum_results:function(){var oe,se=this.size,ae=0;for(oe=0;oe<se;oe++)ae+=this.rlist[oe];return ae},subinterval_too_small:function(oe,se,ae){var ce=1.0000000000000222*(Math.abs(se)+22250738585072014e-321);return Math.abs(oe)<=ce&&Math.abs(ae)<=ce}}},Qag:function(ie,re,oe){var se,ae,ce,ue,de,me,fe,_e,ye,be,Se,Ce,Me,Re,Te,Ee,De,Le,Ue=this._workspace(ie,1e3),Ge=oe&&Q.A.isNumber(oe.limit)?oe.limit:15,Ye=oe&&Q.A.isNumber(oe.epsrel)?oe.epsrel:1e-7,ke=oe&&Q.A.isNumber(oe.epsabs)?oe.epsabs:1e-7,Fe=oe&&Q.A.isFunction(oe.q)?oe.q:this.GaussKronrod15,Ve={},$e=0,Xe=0,ze=0,qe=0,et=0,ot=0,St=0,it=0,lt=0,gt=0;if(Ge>Ue.limit&&Z.A.warn("iteration limit exceeds available workspace"),ke<=0&&(Ye<50*te.A.eps||Ye<5e-29)&&Z.A.warn("tolerance cannot be acheived with given epsabs and epsrel"),ce=Fe.apply(this,[ie,re,Ve]),ue=Ve.abserr,de=Ve.resabs,me=Ve.resasc,Ue.set_initial_result(ce,ue),fe=Math.max(ke,Ye*Math.abs(ce)),ue<=11102230246251565e-30*de&&ue>fe)return Z.A.warn("cannot reach tolerance because of roundoff error on first attempt"),-1/0;if(ue<=fe&&ue!==me||ue===0)return ce;if(Ge===1)return Z.A.warn("a maximum of one iteration was insufficient"),-1/0;se=ce,ae=ue,$e=1;do et=0,ot=0,St=0,it=0,lt=0,gt=0,Ce=(De=Ue.retrieve()).a,Me=De.b,Re=De.r,Te=De.e,_e=Ce,be=ye=.5*(Ce+Me),Se=Me,et=Fe.apply(this,[[_e,ye],re,Ve]),it=Ve.abserr,Ee=Ve.resasc,ot=Fe.apply(this,[[be,Se],re,Ve]),ae+=(gt=it+(lt=Ve.abserr))-Te,se+=(St=et+ot)-Re,Ee!==it&&Ve.resasc!==lt&&(Le=Re-St,Math.abs(Le)<=1e-5*Math.abs(St)&&gt>=.99*Te&&Xe++,$e>=10&&gt>Te&&ze++),ae>(fe=Math.max(ke,Ye*Math.abs(se)))&&((Xe>=6||ze>=20)&&(qe=2),Ue.subinterval_too_small(_e,be,Se)&&(qe=3)),Ue.update(_e,ye,et,it,be,Se,ot,lt),Ce=(De=Ue.retrieve()).a_i,Me=De.b_i,Re=De.r_i,Te=De.e_i,$e++;while($e<Ge&&!qe&&ae>fe);return Ue.sum_results()},I:function(ie,re){return this.Qag(ie,re,{q:this.GaussKronrod15,limit:15,epsrel:1e-7,epsabs:1e-7})},Newton:function(ie,re,oe){var se,ae=0,ce=te.A.eps,ue=ie.apply(oe,[re]);for(Q.A.isArray(re)&&(re=re[0]);ae<50&&Math.abs(ue)>ce;)se=this.D(ie,oe)(re),Math.abs(se)>ce?re-=ue/se:re+=.2*Math.random()-1,ue=ie.apply(oe,[re]),ae+=1;return re},root:function(ie,re,oe){return this.chandrupatla(ie,re,oe)},generalizedNewton:function(ie,re,oe,se){var ae,ce,ue,de,me,fe,_e,ye,be,Se,Ce,Me,Re,Te,Ee=0;for(ae=oe,ce=se,Se=(_e=ie.X(ae)-re.X(ce))*_e+(ye=ie.Y(ae)-re.Y(ce))*ye,Ce=this.D(ie.X,ie),Me=this.D(re.X,re),Re=this.D(ie.Y,ie),Te=this.D(re.Y,re);Se>te.A.eps&&Ee<10;)ue=Ce(ae),de=-Me(ce),me=Re(ae),ae-=((fe=-Te(ce))*_e-de*ye)/(be=ue*fe-de*me),ce-=(ue*ye-me*_e)/be,Se=(_e=ie.X(ae)-re.X(ce))*_e+(ye=ie.Y(ae)-re.Y(ce))*ye,Ee+=1;return Math.abs(ae)<Math.abs(ce)?[ie.X(ae),ie.Y(ae)]:[re.X(ce),re.Y(ce)]},generalizedDampedNewtonCurves:function(ie,re,oe,se,ae,ce){var ue,de,me,fe,_e,ye,be,Se,Ce,Me,Re,Te,Ee,De,Le=0;for(ue=oe,de=se,Re=ie.Ft(ue),Te=re.Ft(de),Me=(be=Re[1]-Te[1])*be+(Se=Re[2]-Te[2])*Se,Ee=function(Ue,Ge){var Ye=te.A.eps,ke=ie.Ft(Ue-Ye),Fe=ie.Ft(Ue+Ye),Ve=re.Ft(Ge-Ye),$e=re.Ft(Ge+Ye);return[[(Fe[1]-ke[1])/(2*Ye),-($e[1]-Ve[1])/(2*Ye)],[(Fe[2]-ke[2])/(2*Ye),-($e[2]-Ve[2])/(2*Ye)]]};Me>ce&&Le<40;)me=(De=Ee(ue,de))[0][0],fe=De[0][1],_e=De[1][0],ue-=ae*((ye=De[1][1])*be-fe*Se)/(Ce=me*ye-fe*_e),de-=ae*(me*Se-_e*be)/Ce,Re=ie.Ft(ue),Te=re.Ft(de),Me=(be=Re[1]-Te[1])*be+(Se=Re[2]-Te[2])*Se,Le+=1;return[ue,de,Me]},generalizedDampedNewton:function(ie,re,oe,se,ae,ce,ue){var de,me,fe,_e,ye,be,Se,Ce,Me,Re,Te,Ee,De=[],Le=0;if(ue=ue||40,Me=ie(De=se.slice(0,oe),oe),oe===2){for(Te=(be=(Me=ie(De,oe))[0])*be+(Se=Me[1])*Se;Te>ce&&Le<ue;)me=(Re=re(De,oe))[0][0],fe=Re[0][1],_e=Re[1][0],Ce=me*(ye=Re[1][1])-fe*_e,De[0]-=ae*(ye*be-fe*Se)/Ce,De[1]-=ae*(me*Se-_e*be)/Ce,Te=(be=(Me=ie(De,oe))[0])*be+(Se=Me[1])*Se,Le+=1;return[De,Te]}for(Me=ie(De,oe),Te=te.A.innerProduct(Me,Me,oe);Te>ce&&Le<ue;){for(Re=te.A.inverse(re(De,oe)),Ee=te.A.matVecMult(Re,Me),de=0;de<oe;de++)De[de]-=ae*Ee[de];Me=ie(De,oe),Te=te.A.innerProduct(Me,Me,oe),Le+=1}return[De,Te]},Neville:function(ie){var re=[],oe=function(se){return function(ae,ce){var ue,de,me,fe=te.A.binomial,_e=ie.length,ye=_e-1,be=0,Se=0;if(!ce)for(me=1,ue=0;ue<_e;ue++)re[ue]=fe(ye,ue)*me,me*=-1;for(de=ae,ue=0;ue<_e;ue++){if(de===0)return ie[ue][se]();me=re[ue]/de,de-=1,be+=ie[ue][se]()*me,Se+=me}return be/Se}};return[oe("X"),oe("Y"),0,function(){return ie.length-1}]},splineDef:function(ie,re){var oe,se,ae,ce=Math.min(ie.length,re.length),ue=[],de=[],me=[],fe=[],_e=[],ye=[];if(ce===2)return[0,0];for(se=0;se<ce;se++)oe={X:ie[se],Y:re[se]},me.push(oe);for(me.sort(function(be,Se){return be.X-Se.X}),se=0;se<ce;se++)ie[se]=me[se].X,re[se]=me[se].Y;for(se=0;se<ce-1;se++)fe.push(ie[se+1]-ie[se]);for(se=0;se<ce-2;se++)_e.push(6*(re[se+2]-re[se+1])/fe[se+1]-6*(re[se+1]-re[se])/fe[se]);for(ue.push(2*(fe[0]+fe[1])),de.push(_e[0]),se=0;se<ce-3;se++)ae=fe[se+1]/ue[se],ue.push(2*(fe[se+1]+fe[se+2])-ae*fe[se+1]),de.push(_e[se+1]-ae*de[se]);for(ye[ce-3]=de[ce-3]/ue[ce-3],se=ce-4;se>=0;se--)ye[se]=(de[se]-fe[se+1]*ye[se+1])/ue[se];for(se=ce-3;se>=0;se--)ye[se+1]=ye[se];return ye[0]=0,ye[ce-1]=0,ye},splineEval:function(ie,re,oe,se){var ae,ce,ue,de,me,fe,_e,ye=Math.min(re.length,oe.length),be=1,Se=!1,Ce=[];for(Q.A.isArray(ie)?(be=ie.length,Se=!0):ie=[ie],ae=0;ae<be;ae++){if(ie[ae]<re[0]||re[ae]>re[ye-1])return NaN;for(ce=1;ce<ye&&!(ie[ae]<=re[ce]);ce++);ue=oe[ce-=1],de=(oe[ce+1]-oe[ce])/(re[ce+1]-re[ce])-(re[ce+1]-re[ce])/6*(se[ce+1]+2*se[ce]),me=se[ce]/2,fe=(se[ce+1]-se[ce])/(6*(re[ce+1]-re[ce])),_e=ie[ae]-re[ce],Ce.push(ue+(de+(me+fe*_e)*_e)*_e)}return Se?Ce:Ce[0]},generatePolynomialTerm:function(ie,re,oe,se){var ae,ce=[];for(ae=re;ae>=0;ae--)Q.A.concat(ce,["(",ie[ae].toPrecision(se),")"]),ae>1?Q.A.concat(ce,["*",oe,"<sup>",ae,"<","/sup> + "]):ae===1&&Q.A.concat(ce,["*",oe," + "]);return ce.join("")},lagrangePolynomial:function(ie){var re=[],oe=this,se=function(ae,ce){var ue,de,me,fe,_e=ie.length,ye=0,be=0;if(!ce)for(ue=0;ue<_e;ue++){for(re[ue]=1,me=ie[ue].X(),de=0;de<_e;de++)de!==ue&&(re[ue]*=me-ie[de].X());re[ue]=1/re[ue]}for(ue=0;ue<_e;ue++){if(ae===(me=ie[ue].X()))return ie[ue].Y();be+=fe=re[ue]/(ae-me),ye+=fe*ie[ue].Y()}return ye/be};return se.getTerm=function(ae,ce,ue){return oe.lagrangePolynomialTerm(ie,ae,ce,ue)()},se.getCoefficients=function(){return oe.lagrangePolynomialCoefficients(ie)()},se},lagrangePolynomialTerm:function(ie,re,oe,se){var ae=this;return function(){var ce,ue,de,me,fe,_e=ie.length,ye=!0;for(oe=oe||"x",se===void 0&&(se=" * "),ue=_e-1,ce=ae.lagrangePolynomialCoefficients(ie)(),de="",me=0;me<ce.length;me++)fe=ce[me],Math.abs(fe)<te.A.eps||(Z.A.exists(re)&&(fe=ee.A._round10(fe,-re)),ye?(de+=fe>0?fe:"-"+-fe,ye=!1):de+=fe>0?" + "+fe:" - "+-fe,ue-me>1?de+=se+oe+"^"+(ue-me):ue-me===1&&(de+=se+oe));return de}},lagrangePolynomialCoefficients:function(ie){return function(){var re,oe,se,ae,ce=ie.length,ue=[],de=[],me=[];for(oe=0;oe<ce;oe++)me[oe]=0;for(re=0;re<ce;re++){for(se=ie[re].Y(),ae=ie[re].X(),ue=[],oe=0;oe<ce;oe++)oe!==re&&(se/=ae-ie[oe].X(),ue.push(ie[oe].X()));for(de=[1].concat(te.A.Vieta(ue)),oe=0;oe<de.length;oe++)me[oe]+=(oe%2==1?-1:1)*de[oe]*se}return me}},_initCubicPoly:function(ie,re,oe,se){return[ie,oe,-3*ie+3*re-2*oe-se,2*ie-2*re+oe+se]},CardinalSpline:function(ie,re,oe){var se,ae,ce,ue,de=[],me=this;return ue=Q.A.isFunction(re)?re:function(){return re},oe===void 0&&(oe="uniform"),ae=function(fe){return function(_e,ye){var be,Se,Ce,Me,Re,Te,Ee,De,Le,Ue;if(ie.length<2)return NaN;if(!ye)for(ce=ue(),Ce={X:function(){return 2*ie[0].X()-ie[1].X()},Y:function(){return 2*ie[0].Y()-ie[1].Y()},Dist:function(Ge){var Ye=this.X()-Ge.X(),ke=this.Y()-Ge.Y();return te.A.hypot(Ye,ke)}},Me={X:function(){return 2*ie[ie.length-1].X()-ie[ie.length-2].X()},Y:function(){return 2*ie[ie.length-1].Y()-ie[ie.length-2].Y()},Dist:function(Ge){var Ye=this.X()-Ge.X(),ke=this.Y()-Ge.Y();return te.A.hypot(Ye,ke)}},Ue=(se=[Ce].concat(ie,[Me])).length,de[fe]=[],be=0;be<Ue-3;be++)oe==="centripetal"?(Ee=se[be].Dist(se[be+1]),De=se[be+2].Dist(se[be+1]),Le=se[be+3].Dist(se[be+2]),Ee=Math.sqrt(Ee),De=Math.sqrt(De),Le=Math.sqrt(Le),De<te.A.eps&&(De=1),Ee<te.A.eps&&(Ee=De),Le<te.A.eps&&(Le=De),Re=(se[be+1][fe]()-se[be][fe]())/Ee-(se[be+2][fe]()-se[be][fe]())/(De+Ee)+(se[be+2][fe]()-se[be+1][fe]())/De,Te=(se[be+2][fe]()-se[be+1][fe]())/De-(se[be+3][fe]()-se[be+1][fe]())/(Le+De)+(se[be+3][fe]()-se[be+2][fe]())/Le,Re*=De,Te*=De,de[fe][be]=me._initCubicPoly(se[be+1][fe](),se[be+2][fe](),ce*Re,ce*Te)):de[fe][be]=me._initCubicPoly(se[be+1][fe](),se[be+2][fe](),ce*(se[be+2][fe]()-se[be][fe]()),ce*(se[be+3][fe]()-se[be+1][fe]()));return isNaN(_e)?NaN:(Ue=ie.length,_e<=0?ie[0][fe]():_e>=Ue?ie[Ue-1][fe]():(be=Math.floor(_e))===_e?ie[be][fe]():(_e-=be,(Se=de[fe][be])===void 0?NaN:((Se[3]*_e+Se[2])*_e+Se[1])*_e+Se[0]))}},[ae("X"),ae("Y"),0,function(){return ie.length-1}]},CatmullRomSpline:function(ie,re){return this.CardinalSpline(ie,.5,re)},regressionPolynomial:function(ie,re,oe){var se,ae,ce,ue,de,me,fe="";if(Q.A.isPoint(ie)&&Q.A.isFunction(ie.Value))ae=function(){return ie.Value()};else if(Q.A.isFunction(ie))ae=ie;else{if(!Q.A.isNumber(ie))throw new Error("JSXGraph: Can't create regressionPolynomial from degree of type'"+typeof ie+"'.");ae=function(){return ie}}if(arguments.length===3&&Q.A.isArray(re)&&Q.A.isArray(oe))de=0;else if(arguments.length===2&&Q.A.isArray(re)&&re.length>0&&Q.A.isPoint(re[0]))de=1;else{if(!(arguments.length===2&&Q.A.isArray(re)&&re.length>0&&re[0].usrCoords&&re[0].scrCoords))throw new Error("JSXGraph: Can't create regressionPolynomial. Wrong parameters.");de=2}return(me=function(_e,ye){var be,Se,Ce,Me,Re,Te,Ee,De,Le,Ue=re.length;if(Le=Math.floor(ae()),!ye){if(de===1)for(ce=[],ue=[],be=0;be<Ue;be++)ce[be]=re[be].X(),ue[be]=re[be].Y();if(de===2)for(ce=[],ue=[],be=0;be<Ue;be++)ce[be]=re[be].usrCoords[1],ue[be]=re[be].usrCoords[2];if(de===0)for(ce=[],ue=[],be=0;be<Ue;be++)Q.A.isFunction(re[be])?ce.push(re[be]()):ce.push(re[be]),Q.A.isFunction(oe[be])?ue.push(oe[be]()):ue.push(oe[be]);for(Ce=[],Se=0;Se<Ue;Se++)Ce.push([1]);for(be=1;be<=Le;be++)for(Se=0;Se<Ue;Se++)Ce[Se][be]=Ce[Se][be-1]*ce[Se];Re=ue,Me=te.A.transpose(Ce),Te=te.A.matMatMult(Me,Ce),Ee=te.A.matVecMult(Me,Re),se=te.A.Numerics.Gauss(Te,Ee),fe=te.A.Numerics.generatePolynomialTerm(se,Le,"x",3)}for(De=se[Le],be=Le-1;be>=0;be--)De=De*_e+se[be];return De}).getTerm=function(){return fe},me},bezier:function(ie){var re,oe,se=function(ae){return function(ce,ue){var de=3*Math.floor(ce),me=ce%1,fe=1-me;return ue||(oe=3*Math.floor((ie.length-1)/3),re=Math.floor(oe/3)),ce<0?ie[0][ae]():ce>=re?ie[oe][ae]():isNaN(ce)?NaN:fe*fe*(fe*ie[de][ae]()+3*me*ie[de+1][ae]())+(3*fe*ie[de+2][ae]()+me*ie[de+3][ae]())*me*me}};return[se("X"),se("Y"),0,function(){return Math.floor(ie.length/3)}]},bspline:function(ie,re){var oe,se=function(ae){return function(ce,ue){var de,me,fe,_e,ye=ie.length,be=ye-1,Se=re;if(be<=0)return NaN;if(be+2<=Se&&(Se=be+1),ce<=0)return ie[0][ae]();if(ce>=be-Se+2)return ie[be][ae]();for(fe=Math.floor(ce)+Se-1,oe=(function(Ce,Me){var Re,Te=[];for(Re=0;Re<Ce+Me+1;Re++)Te[Re]=Re<Me?0:Re<=Ce?Re-Me+1:Ce-Me+2;return Te})(be,Se),_e=(function(Ce,Me,Re,Te){var Ee,De,Le,Ue,Ge,Ye=[];for(Me[Te]<=Ce&&Ce<Me[Te+1]?Ye[Te]=1:Ye[Te]=0,Ee=2;Ee<=Re;Ee++)for(De=Te-Ee+1;De<=Te;De++)Le=De<=Te-Ee+1||De<0?0:Ye[De],Ue=De>=Te?0:Ye[De+1],Ge=Me[De+Ee-1]-Me[De],Ye[De]=Ge===0?0:(Ce-Me[De])/Ge*Le,(Ge=Me[De+Ee]-Me[De+1])!==0&&(Ye[De]+=(Me[De+Ee]-Ce)/Ge*Ue);return Ye})(ce,oe,Se,fe),de=0,me=fe-Se+1;me<=fe;me++)me<ye&&me>=0&&(de+=ie[me][ae]()*_e[me]);return de}};return[se("X"),se("Y"),0,function(){return ie.length-1}]},D:function(ie,re){return Q.A.exists(re)?function(oe,se){var ae=1e-5;return(ie.apply(re,[oe+ae,se])-ie.apply(re,[oe-ae,se]))/2e-5}:function(oe,se){var ae=1e-5;return(ie(oe+ae,se)-ie(oe-ae,se))/2e-5}},_riemannValue:function(ie,re,oe,se){var ae,ce,ue,de;if(se<0&&(oe!=="trapezoidal"&&(ie+=se),se*=-1,oe==="lower"?oe="upper":oe==="upper"&&(oe="lower")),de=.01*se,oe==="right")ae=re(ie+se);else if(oe==="middle")ae=re(ie+.5*se);else if(oe==="left"||oe==="trapezoidal")ae=re(ie);else if(oe==="lower"){for(ae=re(ie),ue=ie+de;ue<=ie+se;ue+=de)(ce=re(ue))<ae&&(ae=ce);(ce=re(ie+se))<ae&&(ae=ce)}else if(oe==="upper"){for(ae=re(ie),ue=ie+de;ue<=ie+se;ue+=de)(ce=re(ue))>ae&&(ae=ce);(ce=re(ie+se))>ae&&(ae=ce)}else ae=oe==="random"?re(ie+se*Math.random()):oe==="simpson"?(re(ie)+4*re(ie+.5*se)+re(ie+se))/6:re(ie);return ae},riemann:function(ie,re,oe,se,ae){var ce,ue,de,me,fe,_e,ye,be,Se,Ce,Me,Re,Te,Ee,De=[],Le=[],Ue=se,Ge=0;if(Q.A.isArray(ie)?(Ee=ie[0],Te=ie[1]):Te=ie,(re=Math.floor(re))<=0)return[De,Le,Ge];for(ue=(ae-se)/re,ce=0;ce<re;ce++){if(oe==="simpson"){for(Ge+=this._riemannValue(Ue,Te,oe,ue)*ue,Me=.5*ue,ye=Te(Ue),be=Te(Ue+Me),me=((Se=Te(Ue+2*Me))+ye-2*be)/(Me*Me)*.5,fe=(Se-ye)/(2*Me),_e=be,de=0;de<30;de++)Ce=de*ue/30-Me,De.push(Ue+Ce+Me),Le.push(me*Ce*Ce+fe*Ce+_e);Ue+=ue,Re=Se}else Re=this._riemannValue(Ue,Te,oe,ue),De.push(Ue),Le.push(Re),Ue+=ue,oe==="trapezoidal"?(Ge+=.5*(Re+(Se=Te(Ue)))*ue,Re=Se):Ge+=Re*ue,De.push(Ue),Le.push(Re);De.push(Ue),Le.push(Re)}for(ce=0;ce<re;ce++){if(oe==="simpson"&&Ee){for(Ge-=this._riemannValue(Ue,Ee,oe,-ue)*ue,Me=.5*ue,ye=Ee(Ue),be=Ee(Ue-Me),me=((Se=Ee(Ue-2*Me))+ye-2*be)/(Me*Me)*.5,fe=(Se-ye)/(2*Me),_e=be,de=0;de<30;de++)Ce=de*ue/30-Me,De.push(Ue-Ce-Me),Le.push(me*Ce*Ce+fe*Ce+_e);Ue-=ue,Re=Se}else Re=Ee?this._riemannValue(Ue,Ee,oe,-ue):0,De.push(Ue),Le.push(Re),Ue-=ue,Ee&&(oe==="trapezoidal"?(Ge-=.5*(Re+(Se=Ee(Ue)))*ue,Re=Se):Ge-=Re*ue);De.push(Ue),Le.push(Re),De.push(Ue),Le.push(Te(Ue))}return[De,Le,Ge]},riemannsum:function(ie,re,oe,se,ae){return Z.A.deprecated("Numerics.riemannsum()","Numerics.riemann()[2]"),this.riemann(ie,re,oe,se,ae)[2]},rungeKutta:function(ie,re,oe,se,ae){var ce,ue,de,me,fe,_e,ye=[],be=[],Se=(oe[1]-oe[0])/se,Ce=oe[0],Me=re.length,Re=[],Te=0;for(Q.A.isString(ie)&&(ie=ne[ie]||ne.euler),_e=ie.s,ye=re.slice(),ue=0;ue<=se;ue++){for(Re[Te]=ye.slice(),Te++,me=[],de=0;de<_e;de++){for(ce=0;ce<Me;ce++)be[ce]=0;for(fe=0;fe<de;fe++)for(ce=0;ce<Me;ce++)be[ce]+=ie.A[de][fe]*Se*me[fe][ce];for(ce=0;ce<Me;ce++)be[ce]+=ye[ce];me.push(ae(Ce+ie.c[de]*Se,be))}for(ce=0;ce<Me;ce++)be[ce]=0;for(fe=0;fe<_e;fe++)for(ce=0;ce<Me;ce++)be[ce]+=ie.b[fe]*me[fe][ce];for(ce=0;ce<Me;ce++)ye[ce]=ye[ce]+Se*be[ce];Ce+=Se}return Re},maxIterationsRoot:80,maxIterationsMinimize:500,findBracket:function(ie,re,oe){var se,ae,ce,ue,de,me,fe,_e,ye,be;if(Q.A.isArray(re))return re;for(se=re,ce=ie.call(oe,se),be=(ue=[se-.1*(ae=se===0?1:se),se+.1*ae,se-1,se+1,se-.5*ae,se+.5*ae,se-.6*ae,se+.6*ae,se-1*ae,se+1*ae,se-2*ae,se+2*ae,se-5*ae,se+5*ae,se-10*ae,se+10*ae,se-50*ae,se+50*ae,se-100*ae,se+100*ae]).length,ye=0;ye<be&&(de=ue[ye],!(ce*(me=ie.call(oe,de))<=0));ye++);return de<se&&(fe=se,se=de,de=fe,_e=ce,ce=me,me=_e),[se,ce,de,me]},fzero:function(ie,re,oe){var se,ae,ce,ue,de,me,fe,_e,ye,be,Se,Ce,Me,Re,Te,Ee,De=te.A.eps,Le=this.maxIterationsRoot,Ue=0;if(Q.A.isArray(re)){if(re.length<2)throw new Error("JXG.Math.Numerics.fzero: length of array x0 has to be at least two.");se=(_e=this.findDomain(ie,re,oe))[0],ae=_e[1],ue=ie.call(oe,se),de=ie.call(oe,ae)}else se=(fe=this.findBracket(ie,re,oe))[0],ue=fe[1],ae=fe[2],de=fe[3];if(Math.abs(ue)<=De)return se;if(Math.abs(de)<=De)return ae;if(ue*de>0)return Q.A.isArray(re)?this.fminbr(ie,[se,ae],oe):this.Newton(ie,se,oe);for(ce=se,me=ue;Ue<Le;){if(ye=ae-se,Math.abs(me)<Math.abs(de)&&(se=ae,ae=ce,ce=se,ue=de,de=me,me=ue),Me=2*De*Math.abs(ae)+.5*De,Ee=.5*(ce-ae),Math.abs(Ee)<=Me||Math.abs(de)<=De)return ae;Math.abs(ye)>=Me&&Math.abs(ue)>Math.abs(de)&&(Ce=ce-ae,se===ce?(Re=Ce*(be=de/ue),Te=1-be):(Re=(Se=de/ue)*(Ce*(Te=ue/me)*(Te-(be=de/me))-(ae-se)*(be-1)),Te=(Te-1)*(be-1)*(Se-1)),Re>0?Te=-Te:Re=-Re,Re<.75*Ce*Te-.5*Math.abs(Me*Te)&&Re<Math.abs(ye*Te*.5)&&(Ee=Re/Te)),Math.abs(Ee)<Me&&(Ee=Ee>0?Me:-Me),se=ae,ue=de,ae+=Ee,((de=ie.call(oe,ae))>0&&me>0||de<0&&me<0)&&(ce=se,me=ue),Ue++}return ae},chandrupatla:function(ie,re,oe){var se,ae,ce,ue,de,me,fe,_e,ye,be,Se,Ce,Me,Re,Te,Ee,De,Le,Ue,Ge,Ye=0,ke=this.maxIterationsRoot,Fe=1+.001*Math.random(),Ve=.5*Fe,$e=te.A.eps;if(Q.A.isArray(re)){if(re.length<2)throw new Error("JXG.Math.Numerics.fzero: length of array x0 has to be at least two.");se=re[0],ce=ie.call(oe,se),ae=re[1],ue=ie.call(oe,ae)}else se=(de=this.findBracket(ie,re,oe))[0],ce=de[1],ae=de[2],ue=de[3];if(ce*ue>0)return Q.A.isArray(re)?this.fminbr(ie,[se,ae],oe):this.Newton(ie,se,oe);me=se,fe=ae,be=ce,Se=ue;do{if(ye=me+Ve*(fe-me),Me=ie.call(oe,ye),Math.sign(Me)===Math.sign(be)?(_e=me,me=ye,Ce=be,be=Me):(_e=fe,fe=me,Ce=Se,Se=be),Re=me=ye,Te=be=Me,Math.abs(Se)<Math.abs(be)&&(Re=fe,Te=Se),(Ee=(2*$e*Math.abs(Re)+5e-6)/Math.abs(fe-me))>.5||Te===0)break;De=(me-fe)/(_e-fe),Le=(be-Se)/(Ce-Se),Ue=1-Math.sqrt(1-De),Ge=Math.sqrt(De),(Ve=Ue<Le&&Le<Ge?be/(Se-be)*(Ce/(Se-Ce))+be/(Ce-be)*(Se/(Ce-Se))*((_e-me)/(fe-me)):.5*Fe)<Ee&&(Ve=Ee),Ve>1-Ee&&(Ve=1-Ee),Ye++}while(Ye<=ke);return Re},findDomain:function(ie,re,oe,se){var ae,ce,ue,de,me,fe,_e=.3819660112501453;if(se===void 0&&(se=!0),!Q.A.isArray(re)||re.length<2)throw new Error("JXG.Math.Numerics.findDomain: length of array x0 has to be at least two.");if(ae=(me=re.slice())[0],ce=me[1],de=ie.call(oe,ae),isNaN(de)){for(fe=0;ce-ae>.001&&fe<20;)ue=(ce-ae)*_e+ae,de=ie.call(oe,ue),isNaN(de)?ae=ue:ce=ue,fe++;me[0]=se?ae:ce}if(ae=me[0],ce=me[1],de=ie.call(oe,ce),isNaN(de)){for(fe=0;ce-ae>.001&&fe<20;)ue=ce-(ce-ae)*_e,de=ie.call(oe,ue),isNaN(de)?ce=ue:ae=ue,fe++;me[1]=se?ce:ae}return me},fminbr:function(ie,re,oe){var se,ae,ce,ue,de,me,fe,_e,ye,be,Se,Ce,Me,Re,Te,Ee,De,Le=.5*(3-Math.sqrt(5)),Ue=te.A.eps,Ge=te.A.eps,Ye=this.maxIterationsMinimize,ke=0;if(!Q.A.isArray(re)||re.length<2)throw new Error("JXG.Math.Numerics.fminbr: length of array x0 has to be at least two.");for(ce=ue=(se=(ye=this.findDomain(ie,re,oe))[0])+Le*((ae=ye[1])-se),de=ue,me=fe=ie.call(oe,ue),_e=fe;ke<Ye;){if(be=ae-se,Se=.5*(se+ae),Ce=Ge*Math.abs(ce)+Ue/3,Math.abs(ce-Se)+.5*be<=2*Ce)return ce;Me=Le*(ce<Se?ae-ce:se-ce),Math.abs(ce-de)>=Ce&&(Re=(ce-ue)*(Te=(ce-ue)*(me-_e))-(ce-de)*(Ee=(ce-de)*(me-fe)),(Te=2*(Te-Ee))>0?Re=-Re:Te=-Te,Math.abs(Re)<Math.abs(Me*Te)&&Re>Te*(se-ce+2*Ce)&&Re<Te*(ae-ce-2*Ce)&&(Me=Re/Te)),Math.abs(Me)<Ce&&(Me=Me>0?Ce:-Ce),Ee=ce+Me,(De=ie.call(oe,Ee))<=me?(Ee<ce?ae=ce:se=ce,ue=de,de=ce,ce=Ee,fe=_e,_e=me,me=De):(Ee<ce?se=Ee:ae=Ee,De<=_e||de===ce?(ue=de,de=Ee,fe=_e,_e=De):(De<=fe||ue===ce||ue===de)&&(ue=Ee,fe=De)),ke+=1}return ce},glomin:function(ie,re){var oe,se,ae,ce,ue,de,me,fe,_e,ye,be,Se,Ce,Me,Re,Te,Ee,De,Le,Ue,Ge,Ye,ke,Fe,Ve,$e,Xe,ze,qe=1e7,et=te.A.eps,ot=te.A.eps*te.A.eps,St=te.A.eps*te.A.eps*te.A.eps;if(Ve=re[0],$e=re[1],Xe=ie(Ve)<ie($e)?Ve:$e,ze=oe=$e,se=Ve,Ge=Ee=ie($e),Ee<(Te=Le=ie(Ve))?Te=Ee:ze=Ve,$e<=Ve)return Te;for(_e=.5*(1+16*St)*qe,fe=3,ce=se-(Re=Xe<=Ve||$e<=Xe?.5*(Ve+$e):Xe),me=.8181818181818182,(De=ie(Re))<Te&&(ze=Re,Te=De);;){if(de=Re-oe,Fe=$e-se,ye=Ce=(ue=se-oe)*ue*(Ye=Le-De)-ce*ce*(ke=Le-Ee),be=Se=2*(ce*ke-ue*Ye),fe<1e6||Le<=Te)for(;be*(Ce*(Ge-Le)+Fe*be*(Le-Te+et))<Fe*_e*Ce*(Fe*be-Ce)&&(Ue=ie(ae=se+Ce/be))<Te&&(ze=ae,Te=Ue),be=1,!(Fe<=(Ce=1e-5*($e-Ve)*(fe=1611*fe%1048576))););else for(be=1,Ce=1e-5*($e-Ve)*(fe=1611*fe%1048576);Ce<Fe;)be*(Ce*(Ge-Le)+Fe*be*(Le-Te+et))<Fe*_e*Ce*(Fe*be-Ce)&&(Ue=ie(ae=se+Ce/be))<Te&&(ze=ae,Te=Ue),be=1,Ce=1e-5*($e-Ve)*(fe=1611*fe%1048576);for(ye=(me=.5*(1+me))*(ye+2*(Ce=_e*ce*ue*de)*(Me=Math.sqrt((Le-Te+et)/_e))),Ce=(Ce=-.5*(ce+(Ye+2.01*ot)/(ce*_e)))<Me||ce<0?se+Me:se+Ce,ae=0<ye*(be+=.5*Se)?se+ye/be:Ce;$e<=(ae=Math.max(ae,Ce))?(ae=$e,Ue=Ge):Ue=ie(ae),Ue<Te&&(ze=ae,Te=Ue),ce=ae-se,!(ae<=Ce)&&(ye=2*(Le-Ue)/(qe*ce),!((1+9*St)*ce<=Math.abs(ye)))&&!(.5*_e*(ce*ce+ye*ye)<=Le-Te+(Ue-Te)+2*et);)ae=.5*(se+ae),me*=.9;if($e<=ae)break;oe=Re,Re=se,se=ae,Ee=De,De=Le,Le=Ue}return[ze,Te]},polzeros:function(ie,re,oe,se,ae){var ce,ue,de,me=[],fe=[],_e=[],ye=function(Ce,Me,Re){var Te,Ee,De=Ce.length-1;if(Re=Re||!1)for(Ee=Z.A.C.mult(De,Ce[De]),Te=De-1;Te>0;Te--)Ee.mult(Me),Ee.add(Z.A.C.mult(Ce[Te],Te));else for(Ee=Z.A.C.copy(Ce[De]),Te=De-1;Te>=0;Te--)Ee.mult(Me),Ee.add(Ce[Te]);return Ee},be=function(Ce,Me,Re){var Te,Ee,De=Ce.length-1;if(Re=Re||!1)for(Ee=Z.A.C.mult(De,Ce[0]),Te=De-1;Te>0;Te--)Ee.mult(Me),Ee.add(Z.A.C.mult(Ce[De-Te],Te));else for(Ee=Z.A.C.copy(Ce[0]),Te=De-1;Te>=0;Te--)Ee.mult(Me),Ee.add(Ce[De-Te]);return Ee},Se=function(Ce,Me){var Re,Te,Ee=Ce.length-1;for(Te=Ce[Ee],Re=Ee-1;Re>=0;Re--)Te=Te*Me+Ce[Re];return Te};for(oe=oe||Number.EPSILON,se=se||30,ue=ie.length,Z.A.isNumber(re)&&re>=0&&re<ue-1&&(ue=re+1),ce=0;ce<ue;ce++)me.push(new Z.A.Complex(ie[ce]));for(ce=0;ce<ue;ce++)if(me[ce].real!==0||me[ce].imaginary!==0){de=ce;break}for(ce=0;ce<de;ce++)fe.push(new Z.A.Complex(0));for(ce=(ue=(me=me.slice(de)).length)-1;ce>=0&&me[ce].real===0&&me[ce].imaginary===0;ce--)me.pop();if((ue=me.length)===0)return[];if(ae)for(ce=0;ce<ue-1;ce++)_e.push(new Z.A.Complex(ae[ce]));else _e=(function(Ce){var Me,Re,Te,Ee,De=Ce.length-1,Le=2*Math.PI/De,Ue=Math.PI/De*.5,Ge=[];for((Te=Z.A.C.mult(-1,Ce[De-1])).div(Z.A.C.mult(De,Ce[De])),Ee=Z.A.C.div(ye(Ce,Te),Ce[De]),(Re=Math.pow(Z.A.C.abs(Ee),1/De))===0&&(Re=1),Me=0;Me<De;Me++)Ce=new Z.A.Complex(Re*Math.cos(Le*Me+Ue),Re*Math.sin(Le*Me+Ue)),Ge[Me]=Z.A.C.add(Te,Ce);return Ge})(me);return(function(Ce,Me,Re,Te){var Ee,De,Le,Ue,Ge,Ye,ke,Fe,Ve,$e=[],Xe=[],ze=0,qe=Te.length;for(De=0;De<qe;De++)$e.push(!1);for(De=0;De<Ce.length;De++)Xe.push(Z.A.C.abs(Ce[De])*(4*De+1));for(Ee=0;Ee<Re&&ze<qe;Ee++)for(De=0;De<qe;De++)if(!$e[De])if(Ye=ye(Ce,Te[De]),Ge=Z.A.C.abs(Te[De]),Z.A.C.abs(Ye)<Me*Se(Xe,Ge)){if($e[De]=!0,++ze===qe)break}else{for(Ge>1?(Ue=Z.A.C.div(1,Te[De]),(Ve=be(Ce,Ue,!0)).div(be(Ce,Ue)),Ve.mult(Ue),Ye=Z.A.C.sub(qe,Ve),Ye=Z.A.C.div(Te[De],Ye)):Ye.div(ye(Ce,Te[De],!0)),ke=new Z.A.Complex(0),Le=0;Le<qe;Le++)Le!==De&&(Fe=Z.A.C.sub(Te[De],Te[Le]),Fe=Z.A.C.div(1,Fe),ke.add(Fe));ke.mult(Ye),ke=Z.A.C.sub(1,ke),Ye.div(ke),Te[De].sub(Ye)}return Ee})(me,oe,se,_e),(_e=fe.concat(_e)).sort(function(Ce,Me){return Ce.real<Me.real?-1:Ce.real>Me.real?1:0}),_e},RamerDouglasPeucker:function(ie,re){var oe,se,ae,ce=[],ue=[],de=function(me,fe,_e,ye,be){var Se=(function(Me,Re,Te){var Ee,De,Le,Ue,Ge,Ye,ke,Fe,Ve,$e,Xe,ze=te.A.eps*te.A.eps,qe=1e4,et=0,ot=Re;if(Te-Re<2)return[-1,0];if(Le=Me[Re].scrCoords,Ue=Me[Te].scrCoords,isNaN(Le[1])||isNaN(Le[2]))return[NaN,Re];if(isNaN(Ue[1])||isNaN(Ue[2]))return[NaN,Te];for(De=Re+1;De<Te;De++){if(Ge=Me[De].scrCoords,isNaN(Ge[1])||isNaN(Ge[2]))return[NaN,De];Ye=(Ye=(Ye=Ge[1]-Le[1])===1/0?qe:Ye)===-1/0?-qe:Ye,ke=(ke=(ke=Ge[2]-Le[2])===1/0?qe:ke)===-1/0?-qe:ke,($e=(Fe=(Fe=(Fe=Ue[1]-Le[1])===1/0?qe:Fe)===-1/0?-qe:Fe)*Fe+(Ve=(Ve=(Ve=Ue[2]-Le[2])===1/0?qe:Ve)===-1/0?-qe:Ve)*Ve)>ze?((Xe=(Ye*Fe+ke*Ve)/$e)<0?Xe=0:Xe>1&&(Xe=1),Ee=(Ye-=Xe*Fe)*Ye+(ke-=Xe*Ve)*ke):(Xe=0,Ee=Ye*Ye+ke*ke),Ee>et&&(et=Ee,ot=De)}return[Math.sqrt(et),ot]})(me,fe,_e),Ce=Se[1];if(isNaN(Se[0])){de(me,fe,Ce-1,ye,be),be.push(me[Ce]);do++Ce;while(Ce<=_e&&isNaN(me[Ce].scrCoords[1]+me[Ce].scrCoords[2]));Ce<=_e&&be.push(me[Ce]),de(me,Ce+1,_e,ye,be)}else Se[0]>ye?(de(me,fe,Ce,ye,be),de(me,Ce,_e,ye,be)):be.push(me[_e])};for(ae=ie.length,oe=0;;){for(;oe<ae&&isNaN(ie[oe].scrCoords[1]+ie[oe].scrCoords[2]);)oe+=1;for(se=oe+1;se<ae&&!isNaN(ie[se].scrCoords[1]+ie[se].scrCoords[2]);)se+=1;if(se--,oe<ae&&se>oe&&((ue=[])[0]=ie[oe],de(ie,oe,se,re,ue),ce=ce.concat(ue)),oe>=ae)break;se<ae-1&&ce.push(ie[se+1]),oe=se+1}return ce},RamerDouglasPeuker:function(ie,re){return Z.A.deprecated("Numerics.RamerDouglasPeuker()","Numerics.RamerDouglasPeucker()"),this.RamerDouglasPeucker(ie,re)},Visvalingam:function(ie,re){var oe,se,ae,ce,ue,de,me,fe,_e,ye=[],be=[],Se=[];if((se=ie.length)<=2)return ie;for(ye[0]={used:!0,lft:null,node:null},ue=0,oe=1;oe<se-1;oe++)ae=Math.abs(Z.A.Math.Numerics.det([ie[oe-1].usrCoords,ie[oe].usrCoords,ie[oe+1].usrCoords])),isNaN(ae)||(_e={v:ae,idx:oe},be.push(_e),ye[oe]={used:!0,lft:ue,node:_e},ye[ue].rt=oe,ue=oe);for(ye[se-1]={used:!0,rt:null,lft:ue,node:null},ye[ue].rt=se-1,ce=-1/0;be.length>re;)be.sort(function(Ce,Me){return Me.v-Ce.v}),ye[oe=be.pop().idx].used=!1,ce=ye[oe].node.v,ue=ye[oe].lft,de=ye[oe].rt,ye[ue].rt=de,ye[de].lft=ue,(me=ye[ue].lft)!==null&&(ae=Math.abs(Z.A.Math.Numerics.det([ie[me].usrCoords,ie[ue].usrCoords,ie[de].usrCoords])),ye[ue].node.v=ae>=ce?ae:ce),(fe=ye[de].rt)!==null&&(ae=Math.abs(Z.A.Math.Numerics.det([ie[ue].usrCoords,ie[de].usrCoords,ie[fe].usrCoords])),ye[de].node.v=ae>=ce?ae:ce);Se=[ie[oe=0]];do oe=ye[oe].rt,Se.push(ie[oe]);while(ye[oe].rt!==null);return Se}},_.A=te.A.Numerics},188:function(G,_,J){var Z=J(443),Q=J(561),ee=J(477);Z.A.extend(Z.A,{isBoard:function(te){return te!==null&&typeof te=="object"&&this.isNumber(te.BOARD_MODE_NONE)&&this.isObject(te.objects)&&this.isObject(te.jc)&&this.isFunction(te.update)&&!!te.containerObj&&this.isString(te.id)},isId:function(te,ne){return typeof ne=="string"&&!!te.objects[ne]},isName:function(te,ne){return typeof ne=="string"&&!!te.elementsByName[ne]},isGroup:function(te,ne){return typeof ne=="string"&&!!te.groups[ne]},isString:function(te){return typeof te=="string"},isNumber:function(te,ne,ie){var re=typeof te=="number"||Object.prototype.toString.call(te)==="[Object Number]";return ie=ie===void 0||ie,(ne=ne||!1)&&(re=re||""+parseFloat(te)===te),ie||(re=re&&!isNaN(te)),re},isFunction:function(te){return typeof te=="function"},isArray:function(te){return Array.isArray?Array.isArray(te):te!==null&&typeof te=="object"&&typeof te.splice=="function"&&typeof te.join=="function"},isObject:function(te){return typeof te=="object"&&!this.isArray(te)},isDocumentOrFragment:function(te){return this.isObject(te)&&(te.nodeType===9||te.nodeType===11)},isPoint:function(te){return!(te===null||typeof te!="object"||!this.exists(te.elementClass))&&te.elementClass===Q.A.OBJECT_CLASS_POINT},isPoint3D:function(te){return!(te===null||typeof te!="object"||!this.exists(te.type))&&te.type===Q.A.OBJECT_TYPE_POINT3D},isPointType:function(te,ne){var ie,re;return!!this.isArray(ne)||!!(this.isFunction(ne)&&(ie=ne(),this.isArray(ie)&&ie.length>1))||(re=te.select(ne),this.isPoint(re))},isPointType3D:function(te,ne){var ie,re;return!!(this.isArray(ne)&&ne.length>=3)||!!(this.isFunction(ne)&&(ie=ne(),this.isArray(ie)&&ie.length>=3))||(re=te.select(ne),this.isPoint3D(re))},isTransformationOrArray:function(te){if(te!==null){if(this.isArray(te)&&te.length>0)return this.isTransformationOrArray(te[0]);if(typeof te=="object")return te.type===Q.A.OBJECT_TYPE_TRANSFORMATION}return!1},isEmpty:function(te){return Object.keys(te).length===0},exists:function(te,ne){var ie=!(te==null||te===null);return(ne=ne||!1)?ie&&te!=="":ie},def:function(te,ne){return this.exists(te)?te:ne},str2Bool:function(te){return!this.exists(te)||(typeof te=="boolean"?te:!!this.isString(te)&&te.toLowerCase()==="true")},cssParse:function(te){var ne=te;return this.isString(ne)?(ne='{"'+(ne=(ne=(ne=(ne=ne.replace(/\s*;\s*$/g,"")).replace(/\s*;\s*/g,'","')).replace(/\s*:\s*/g,'":"')).trim())+'"}',JSON.parse(ne)):{}},cssStringify:function(te){var ne,ie,re="";if(!this.isObject(te))return"";for(ne in te)te.hasOwnProperty(ne)&&(ie=te[ne],(this.isString(ie)||this.isNumber(ie))&&(re+=ne+":"+ie+"; "));return re=re.trim()},createEvalFunction:function(te,ne,ie){var re,oe,se,ae=[],ce={};for(oe=0;oe<ie;oe++)for(se in ae[oe]=this.createFunction(ne[oe],te),ae[oe].deps)ce[se]=ae[oe].deps;return(re=function(ue){return ae[ue]()}).deps=ce,re},createFunction:function(te,ne,ie,re){var oe=null;return this.isString(te)?oe=ne.jc.snippet(te,!0,ie,!1):this.isFunction(te)?(oe=te).deps=this.isObject(te.deps)?te.deps:{}:(this.isNumber(te)||this.isArray(te))&&((oe=function(){return te}).deps={}),oe!==null&&(oe.origin=te),oe},providePoints:function(te,ne,ie,re,oe){var se,ae,ce,ue,de,me=0,fe=[];for(this.isArray(ne)||(ne=[ne]),ce=ne.length,this.exists(oe)&&(me=oe.length),me===0&&(ue=this.copyAttributes(ie,te.options,re)),se=0;se<ce;++se)if(me>0&&(ae=Math.min(se,me-1),ue=this.copyAttributes(ie,te.options,re,oe[ae].toLowerCase())),this.isArray(ne[se])&&ne[se].length>1?(fe.push(te.create("point",ne[se],ue)),fe[fe.length-1]._is_new=!0):this.isFunction(ne[se])?(de=ne[se](),this.isArray(de)&&de.length>1&&(fe.push(te.create("point",[ne[se]],ue)),fe[fe.length-1]._is_new=!0)):fe.push(te.select(ne[se])),!this.isPoint(fe[se]))return!1;return fe},providePoints3D:function(te,ne,ie,re,oe){var se,ae,ce,ue,de,me=0,fe=[];for(this.isArray(ne)||(ne=[ne]),ce=ne.length,this.exists(oe)&&(me=oe.length),me===0&&(ue=this.copyAttributes(ie,te.board.options,re)),se=0;se<ce;++se){if(me>0&&(ae=Math.min(se,me-1),ue=this.copyAttributes(ie,te.board.options,re,oe[ae])),this.isArray(ne[se])&&ne[se].length>0&&ne[se].every(_e=>this.isArray(_e)&&this.isNumber(_e[0])))for(ae=0;ae<ne[se].length;ae++)fe.push(te.create("point3d",ne[se][ae],ue)),fe[fe.length-1]._is_new=!0;else this.isArray(ne[se])&&ne[se].every(_e=>this.isNumber(_e)||this.isFunction(_e))?(fe.push(te.create("point3d",ne[se],ue)),fe[fe.length-1]._is_new=!0):this.isPoint3D(ne[se])?fe.push(ne[se]):this.isFunction(ne[se])?(de=ne[se](),this.isArray(de)&&de.length>1&&(fe.push(te.create("point3d",[ne[se]],ue)),fe[fe.length-1]._is_new=!0)):fe.push(te.select(ne[se]));if(!this.isPoint3D(fe[se]))return!1}return fe},bind:function(te,ne){return function(){return te.apply(ne,arguments)}},evaluate:function(te){return this.isFunction(te)?te():te},indexOf:function(te,ne,ie){var re,oe=this.exists(ie);if(Array.indexOf&&!oe)return te.indexOf(ne);for(re=0;re<te.length;re++)if(oe&&te[re][ie]===ne||!oe&&te[re]===ne)return re;return-1},eliminateDuplicates:function(te){var ne,ie=te.length,re=[],oe={};for(ne=0;ne<ie;ne++)oe[te[ne]]=0;for(ne in oe)oe.hasOwnProperty(ne)&&re.push(ne);return re},swap:function(te,ne,ie){var re;return re=te[ne],te[ne]=te[ie],te[ie]=re,te},uniqueArray:function(te){var ne,ie,re,oe=[];if(te.length===0)return[];for(ne=0;ne<te.length;ne++)if(re=this.isArray(te[ne]),this.exists(te[ne]))for(ie=ne+1;ie<te.length;ie++)re&&Z.A.cmpArrays(te[ne],te[ie])?te[ne]=[]:re||te[ne]!==te[ie]||(te[ne]="");else te[ne]="";for(ie=0,ne=0;ne<te.length;ne++)(re=this.isArray(te[ne]))||te[ne]===""?re&&te[ne].length!==0&&(oe[ie]=te[ne].slice(0),ie++):(oe[ie]=te[ne],ie++);return te=oe,oe},toUniqueArrayFloat:function(te,ne){var ie,re;for((ie=te.slice()).sort(function(oe,se){return oe-se}),re=ie.length-1;re>0;re--)Math.abs(ie[re]-ie[re-1])<ne&&ie.splice(re,1);return ie},isInArray:function(te,ne){return Z.A.indexOf(te,ne)>-1},coordsArrayToMatrix:function(te,ne){var ie,re=[],oe=[];for(ie=0;ie<te.length;ie++)ne?(re.push(te[ie].usrCoords[1]),oe.push(te[ie].usrCoords[2])):oe.push([te[ie].usrCoords[1],te[ie].usrCoords[2]]);return ne&&(oe=[re,oe]),oe},cmpArrays:function(te,ne){var ie;if(te===ne)return!0;if(te.length!==ne.length)return!1;for(ie=0;ie<te.length;ie++)if(this.isArray(te[ie])&&this.isArray(ne[ie])){if(!this.cmpArrays(te[ie],ne[ie]))return!1}else if(te[ie]!==ne[ie])return!1;return!0},removeElementFromArray:function(te,ne){var ie;for(ie=0;ie<te.length;ie++)if(te[ie]===ne)return te.splice(ie,1),te;return te},trunc:function(te,ne){return ne=Z.A.def(ne,0),this.toFixed(te,ne)},_decimalAdjust:function(te,ne,ie){return ie===void 0||+ie==0?Math[te](ne):(ne=+ne,ie=+ie,isNaN(ne)||typeof ie!="number"||ie%1!=0?NaN:(ne=ne.toString().split("e"),+((ne=(ne=Math[te](+(ne[0]+"e"+(ne[1]?+ne[1]-ie:-ie)))).toString().split("e"))[0]+"e"+(ne[1]?+ne[1]+ie:ie))))},_round10:function(te,ne){return this._decimalAdjust("round",te,ne)},_floor10:function(te,ne){return this._decimalAdjust("floor",te,ne)},_ceil10:function(te,ne){return this._decimalAdjust("ceil",te,ne)},toFixed:function(te,ne){return this._round10(te,-ne).toFixed(ne)},autoDigits:function(te){var ne=Math.abs(te);return ne>=.1?this.toFixed(te,2):ne>=.01?this.toFixed(te,4):ne>=1e-4?this.toFixed(te,6):te},parseNumber:function(te,ne,ie){var re;return this.isString(te)&&te.indexOf("%")>-1?(re=te.replace(/\s+%\s+/,""),parseFloat(re)*ne*.01):this.isString(te)&&te.indexOf("fr")>-1?(re=te.replace(/\s+fr\s+/,""),parseFloat(re)*ne):this.isString(te)&&te.indexOf("px")>-1?(re=te.replace(/\s+px\s+/,""),re=parseFloat(re),this.isFunction(ie)?ie(re):this.isNumber(ie)?re*ie:re):parseFloat(te)},parsePosition:function(te){var ne,ie,re="",oe="";if((te=te.trim())!=="")for(ne=te.split(/[ ,]+/),ie=0;ie<ne.length;ie++)ne[ie]==="left"||ne[ie]==="right"?re=ne[ie]:oe=ne[ie];return{side:re,pos:oe}},keys:function(te,ne){var ie,re=[];for(ie in te)ne?te.hasOwnProperty(ie)&&re.push(ie):re.push(ie);return re},clone:function(te){var ne={};return ne.prototype=te,ne},cloneAndCopy:function(te,ne){var ie,re=function(){};for(ie in re.prototype=te,ne)re[ie]=ne[ie];return re},merge:function(te,ne){var ie,re,oe,se;for(ie in ne)if(ne.hasOwnProperty(ie))if(oe=ne[ie],this.isArray(oe))for(te[ie]||(te[ie]=[]),re=0;re<oe.length;re++)se=ne[ie][re],typeof ne[ie][re]=="object"?te[ie][re]=this.merge(te[ie][re],se):te[ie][re]=ne[ie][re];else typeof oe=="object"?(te[ie]||(te[ie]={}),te[ie]=this.merge(te[ie],oe)):(typeof te=="boolean"&&(te={}),te[ie]=oe);return te},deepCopy:function(te,ne,ie){var re,oe,se,ae;if(ie=ie||!1,typeof te!="object"||te===null)return te;if(this.isArray(te))for(re=[],oe=0;oe<te.length;oe++)(se=te[oe])!==null&&typeof se=="object"?this.exists(se.board)?re[oe]=se.id:re[oe]=this.deepCopy(se,{},ie):re[oe]=se;else{for(oe in re={},te)te.hasOwnProperty(oe)&&(ae=ie?oe.toLowerCase():oe,(se=te[oe])!==null&&typeof se=="object"?this.exists(se.board)?re[ae]=se.id:re[ae]=this.deepCopy(se,{},ie):re[ae]=se);for(oe in ne)ne.hasOwnProperty(oe)&&(ae=ie?oe.toLowerCase():oe,(se=ne[oe])!==null&&typeof se=="object"?this.isArray(se)||!this.exists(re[ae])?re[ae]=this.deepCopy(se,{},ie):re[ae]=this.deepCopy(re[ae],se,ie):re[ae]=se)}return re},mergeAttr:function(te,ne,ie,re){var oe,se,ae;for(oe in ie=ie||!0,re=re||!1,ne)ne.hasOwnProperty(oe)&&((se=ie?oe.toLowerCase():oe)!==oe&&te.hasOwnProperty(oe)&&(te.hasOwnProperty(se)?this.mergeAttr(te[se],te[oe],ie):te[se]=te[oe],delete te[oe]),ae=ne[oe],!this.isObject(ae)||ae===null||this.isDocumentOrFragment(ae)||this.exists(ae.board)||typeof ae.valueOf()=="string"?re&&!this.exists(ae)||(te[se]=ae):(te[se]!==void 0&&te[se]!==null&&this.isObject(te[se])||(te[se]={}),this.mergeAttr(te[se],ae,ie)))},keysToLowerCase:function(te){var ne,ie,re=Object.keys(te),oe=re.length,se={};if(typeof te!="object")return te;for(;oe--;)ne=re[oe],te.hasOwnProperty(ne)&&(typeof(ie=te[ne])!="object"||ie===null||this.isArray(ie)||this.exists(ie.nodeType)||this.exists(ie.board)?se[ne.toLowerCase()]=ie:se[ne.toLowerCase()]=this.keysToLowerCase(ie));return se},copyAttributes:function(te,ne,ie){var re,oe,se,ae,ce,ue;for(re=(ae=arguments.length)<3||{circle:1,curve:1,foreignobject:1,image:1,line:1,point:1,polygon:1,text:1,ticks:1,integral:1}[ie]?Z.A.deepCopy(ne.elements,null,!0):{},ae<4&&this.exists(ie)&&this.exists(ne.layer[ie])&&(re.layer=ne.layer[ie]),ce=ne,ue=!0,se=2;se<ae;se++){if(oe=arguments[se],!this.exists(ce[oe])){ue=!1;break}ce=ce[oe]}for(ue&&(re=Z.A.deepCopy(re,ce,!0)),ce=typeof te=="object"?this.keysToLowerCase(te):{},ue=!0,se=3;se<ae;se++){if(oe=arguments[se].toLowerCase(),!this.exists(ce[oe])){ue=!1;break}ce=ce[oe]}if(ue&&this.mergeAttr(re,ce,!0),arguments[2]==="board")return re;for(ce=ne,ue=!0,se=2;se<ae;se++){if(oe=arguments[se],!this.exists(ce[oe])){ue=!1;break}ce=ce[oe]}return ue&&this.exists(ce.label)&&(re.label=Z.A.deepCopy(ce.label,re.label,!0)),re.label=Z.A.deepCopy(ne.label,re.label,!0),re},copyPrototypeMethods:function(te,ne,ie){var re;for(re in te.prototype[ie]=ne.prototype.constructor,ne.prototype)ne.prototype.hasOwnProperty(re)&&(te.prototype[re]=ne.prototype[re])},getCloneObject:function(te){var ne,ie,re={};for(ie in re.id=te.id+"T"+te.numTraces,te.numTraces+=1,re.coords=te.coords,ne=this.deepCopy(te.visProp,te.visProp.traceattributes,!0),re.visProp={},ne)ne.hasOwnProperty(ie)&&ie.indexOf("aria")!==0&&ie.indexOf("highlight")!==0&&ie.indexOf("attractor")!==0&&ie!=="label"&&ie!=="needsregularupdate"&&ie!=="infoboxdigits"&&(re.visProp[ie]=te.eval(ne[ie]));return re.evalVisProp=function(oe){return re.visProp[oe]},re.eval=function(oe){return oe},re.visProp.layer=te.board.options.layer.trace,re.visProp.tabindex=null,re.visProp.highlight=!1,re.board=te.board,re.elementClass=te.elementClass,this.clearVisPropOld(re),re.visPropCalc={visible:te.evalVisProp("visible")},re},toJSON:function(te,ne){var ie,re,oe,se;if(ne=Z.A.def(ne,!1),JSON!==void 0&&JSON.stringify&&!ne)try{return JSON.stringify(te)}catch{}switch(typeof te){case"object":if(te){if(ie=[],this.isArray(te)){for(oe=0;oe<te.length;oe++)ie.push(Z.A.toJSON(te[oe],ne));return"["+ie.join(",")+"]"}for(re in te)if(te.hasOwnProperty(re)){try{se=Z.A.toJSON(te[re],ne)}catch{se=""}ne?ie.push(re+":"+se):ie.push('"'+re+'":'+se)}return"{"+ie.join(",")+"} "}return"null";case"string":return"'"+te.replace(/(["'])/g,"\\$1")+"'";case"number":case"boolean":return te.toString()}return"0"},clearVisPropOld:function(te){return te.visPropOld={cssclass:"",cssdefaultstyle:"",cssstyle:"",fillcolor:"",fillopacity:"",firstarrow:!1,fontsize:-1,lastarrow:!1,left:-1e5,linecap:"",shadow:!1,strokecolor:"",strokeopacity:"",strokewidth:"",tabindex:-1e5,transitionduration:0,top:-1e5,visible:null},te},isInObject:function(te,ne){var ie;for(ie in te)if(te.hasOwnProperty(ie)&&te[ie]===ne)return!0;return!1},escapeHTML:function(te){return te.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},unescapeHTML:function(te){return te.replace(/<\/?[^>]+>/gi,"").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")},capitalize:function(te){return te.charAt(0).toUpperCase()+te.substring(1).toLowerCase()},trimNumber:function(te){return(te=(te=te.replace(/^0+/,"")).replace(/0+$/,""))[te.length-1]!=="."&&te[te.length-1]!==","||(te=te.slice(0,-1)),te[0]!=="."&&te[0]!==","||(te="0"+te),te},filterElements:function(te,ne){var ie,re,oe,se,ae,ce,ue,de=te.length,me=[];if(this.exists(ne)&&typeof ne!="function"&&typeof ne!="object")return me;for(ie=0;ie<de;ie++){if(ue=!0,oe=te[ie],typeof ne=="object"){for(re in ne)if(ne.hasOwnProperty(re)&&(se=re.toLowerCase(),ae=typeof oe[re]=="function"?oe[re]():oe[re],ce=oe.visProp&&typeof oe.visProp[se]=="function"?oe.visProp[se]():oe.visProp&&oe.visProp[se],!(ue=typeof ne[re]=="function"?ne[re](ae)||ne[re](ce):ae===ne[re]||ce===ne[re])))break}else typeof ne=="function"&&(ue=ne(oe));ue&&me.push(oe)}return me},trim:function(te){return te.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},toFraction:function(te,ne,ie){var re=ee.A.decToFraction(te,ie),oe="";return re[1]===0&&re[2]===0?oe+="0":(re[0]<0&&(oe+="-"),re[2]===0?oe+=re[1]:re[2]===1&&re[3]===1||(re[1]!==0&&(oe+=re[1]+" "),oe+=ne===!0?"\\frac{"+re[2]+"}{"+re[3]+"}":re[2]+"/"+re[3])),oe},concat:function(te,ne){var ie,re=ne.length;for(ie=0;ie<re;ie++)te.push(ne[ie]);return te},sanitizeHTML:function(te,ne){return typeof html_sanitize=="function"&&ne?html_sanitize(te,function(){},function(ie){return ie}):(te&&typeof te=="string"&&(te=te.replace(/</g,"&lt;").replace(/>/g,"&gt;")),te)},evalSlider:function(te){return te&&te.type===Q.A.OBJECT_TYPE_GLIDER&&typeof te.Value=="function"?te.Value():te},stack2jsxgraph:function(te){var ne;return(ne=te.replace(/%pi/g,"PI").replace(/%e/g,"EULER").replace(/%phi/g,"1.618033988749895").replace(/%gamma/g,"0.5772156649015329").trim())[0]==="["&&ne[ne.length-1]==="]"&&(ne=ne.slice(1,-1).split(/\s*,\s*/)),ne}}),_.A=Z.A},378:function(G,_,J){var Z=J(443),Q=J(561),ee=J(477),te=J(873),ne=J(188);Z.A.Options={jc:{enabled:!0,compile:!0},board:{animationDelay:35,axis:!1,boundingBox:[-5,5,5,-5],browserPan:!1,clickDelay:600,dblClickSuppressClick:!1,defaultAxes:{x:{name:"x",fixed:!0,needsRegularUpdate:!1,ticks:{label:{visible:"inherit",anchorX:"middle",anchorY:"top",fontSize:12,offset:[0,-3]},tickEndings:[0,1],majorTickEndings:[1,1],drawZero:!1,visible:"inherit"}},y:{name:"y",fixed:!0,needsRegularUpdate:!1,ticks:{label:{visible:"inherit",anchorX:"right",anchorY:"middle",fontSize:12,offset:[-6,0]},tickEndings:[1,0],majorTickEndings:[1,1],drawZero:!1,visible:"inherit"}}},document:!1,drag:{enabled:!0},fullscreen:{symbol:'<svg height="1em" width="1em" version="1.1" viewBox="10 10 18 18"><path fill="#666" d="m 10,16 2,0 0,-4 4,0 0,-2 L 10,10 l 0,6 0,0 z"></path><path fill="#666" d="m 20,10 0,2 4,0 0,4 2,0 L 26,10 l -6,0 0,0 z"></path><path fill="#666" d="m 24,24 -4,0 0,2 L 26,26 l 0,-6 -2,0 0,4 0,0 z"></path><path fill="#666" d="M 12,20 10,20 10,26 l 6,0 0,-2 -4,0 0,-4 0,0 z"></path></svg>',scale:.85,id:null},ignoreLabels:!0,intl:{enabled:!1},keepAspectRatio:!1,keyboard:{enabled:!0,dx:10,dy:10,panShift:!0,panCtrl:!1},logging:{enabled:!1},minimizeReflow:"none",maxBoundingBox:[-1/0,1/0,1/0,-1/0],maxFrameRate:40,maxNameLength:1,moveTarget:null,offsetX:0,offsetY:0,pan:{enabled:!0,needShift:!0,needTwoFingers:!1},registerEvents:!0,renderer:"auto",resize:{enabled:!0,throttle:10},screenshot:{scale:1,type:"png",symbol:"",css:"background-color:#eeeeee; opacity:1.0; border:2px solid black; border-radius:10px; text-align:center",cssButton:"padding: 4px 10px; border: solid #356AA0 1px; border-radius: 5px; position: absolute; right: 2ex; top: 2ex; background-color: rgba(255, 255, 255, 0.3);"},selection:{enabled:!1,name:"selectionPolygon",needShift:!1,needCtrl:!0,fillColor:"#ffff00",visible:!1,withLines:!1,vertices:{visible:!1}},showClearTraces:!1,showCopyright:!0,showFullscreen:!1,showInfobox:!0,showLogo:!1,showNavigation:!0,showReload:!1,showScreenshot:!1,showZoom:!0,takeFirst:!1,takeSizeFromFile:!1,theme:"default",title:"",zoom:{enabled:!0,factorX:1.25,factorY:1.25,wheel:!0,needShift:!0,center:"auto",min:1e-4,max:1e4,pinch:!0,pinchHorizontal:!0,pinchVertical:!0,pinchSensitivity:7},zoomX:1,zoomY:1},navbar:{strokeColor:"#333333",fillColor:"transparent",highlightFillColor:"#aaaaaa",padding:"2px",position:"absolute",fontSize:"14px",cursor:"pointer",zIndex:"100",right:"5px",bottom:"5px"},elements:{aria:{enabled:!1,label:"",live:"assertive"},cssClass:"",highlightCssClass:"",dash:0,dashScale:!1,draft:{draft:!1,strokeColor:"#565656",fillColor:"#565656",strokeOpacity:.8,fillOpacity:.8,strokeWidth:1},dragToTopOfLayer:!1,element3D:null,fillColor:te.A.palette.red,fillOpacity:1,fixed:!1,frozen:!1,gradient:null,gradientAngle:0,gradientCX:.5,gradientCY:.5,gradientEndOffset:1,gradientFX:.5,gradientFY:.5,gradientFR:0,gradientR:.5,gradientSecondColor:"#ffffff",gradientSecondOpacity:1,gradientStartOffset:0,highlight:!0,highlightFillColor:"none",highlightFillOpacity:1,highlightStrokeColor:"#c3d9ff",highlightStrokeOpacity:1,highlightStrokeWidth:2,isLabel:!1,layer:0,lineCap:"butt",needsRegularUpdate:!0,nonnegativeOnly:!1,precision:"inherit",priv:!1,rotatable:!0,scalable:!0,shadow:{enabled:!1,color:[0,0,0],opacity:1,blur:3,blend:.1,offset:[5,5]},snapToGrid:!1,strokeColor:te.A.palette.blue,strokeOpacity:1,strokeWidth:2,tabindex:-1,trace:!1,traceAttributes:{},transitionDuration:100,transitionProperties:["fill","fill-opacity","stroke","stroke-opacity","stroke-width"],visible:!0,withLabel:!1,ignoreForLabelAutoposition:!1},ticks:{generateLabelText:null,generateLabelValue:null,drawLabels:!1,label:{tabindex:null,layer:7,highlight:!1,autoPosition:!1},beautifulScientificTickLabels:!1,useUnicodeMinus:!0,anchor:"left",drawZero:!1,insertTicks:!1,minTicksDistance:10,minorHeight:4,majorHeight:10,tickEndings:[1,1],majorTickEndings:[1,1],ignoreInfiniteTickEndings:!0,minorTicks:4,ticksPerLabel:!1,scale:1,scaleSymbol:"",labels:[],maxLabelLength:5,precision:3,digits:3,ticksDistance:1,face:"|",strokeOpacity:1,strokeWidth:1,strokeColor:"#000000",highlightStrokeColor:"#888888",fillColor:"none",highlightFillColor:"none",visible:"inherit",includeBoundaries:!1,type:"linear",intl:{enabled:"inherit",options:{}},minorTicksInArrow:!1,majorTicksInArrow:!0,labelInArrow:!0,minorTicksInMargin:!1,majorTicksInMargin:!0,labelInMargin:!0,ignoreForLabelAutoposition:!0},hatch:{drawLabels:!1,drawZero:!0,majorHeight:20,anchor:"middle",face:"|",strokeWidth:2,strokeColor:te.A.palette.blue,ticksDistance:.2},precision:{touch:30,touchMax:100,mouse:4,pen:4,epsilon:1e-4,hasPoint:4},layer:{numlayers:20,unused9:19,unused8:18,unused7:17,unused6:16,unused5:15,unused4:14,unused3:13,unused2:12,unused1:11,unused0:10,text:9,point:9,glider:9,arc:8,line:7,circle:6,curve:5,turtle:5,polygon:3,sector:3,angle:3,integral:3,axis:2,ticks:2,grid:1,image:0,trace:0},angle:{withLabel:!0,radius:"auto",type:"sector",orthoType:"square",orthoSensitivity:1,fillColor:te.A.palette.orange,highlightFillColor:te.A.palette.orange,strokeColor:te.A.palette.orange,fillOpacity:.3,highlightFillOpacity:.3,radiuspoint:{withLabel:!1,visible:!1,name:""},pointsquare:{withLabel:!1,visible:!1,name:""},dot:{visible:!1,strokeColor:"none",fillColor:"#000000",size:2,face:"o",withLabel:!1,name:""},label:{position:"top",offset:[0,0],strokeColor:te.A.palette.blue},arc:{visible:!1,fillColor:"none"}},arc:{selection:"auto",hasInnerPoints:!1,label:{anchorX:"auto",anchorY:"auto"},firstArrow:!1,lastArrow:!1,fillColor:"none",highlightFillColor:"none",strokeColor:te.A.palette.blue,highlightStrokeColor:"#c3d9ff",useDirection:!1,center:{},radiusPoint:{},anglePoint:{}},arrow:{firstArrow:!1,lastArrow:{type:1,highlightSize:6,size:6}},arrowparallel:{firstArrow:!1,lastArrow:{type:1,highlightSize:6,size:6}},axis:{name:"",needsRegularUpdate:!1,strokeWidth:1,lastArrow:{type:1,highlightSize:8,size:8},strokeColor:"#666666",highlightStrokeWidth:1,highlightStrokeColor:"#888888",position:"static",anchor:"",anchorDist:"10%",ticksAutoPos:!1,ticksAutoPosThreshold:"5%",withTicks:!0,straightFirst:!0,straightLast:!0,margin:-4,withLabel:!1,scalable:!1,ticks:{label:{offset:[4,-9],parse:!1,needsRegularUpdate:!1,display:"internal",visible:"inherit",layer:9},visible:"inherit",needsRegularUpdate:!1,strokeWidth:1,strokeColor:"#666666",highlightStrokeColor:"#888888",drawLabels:!0,drawZero:!1,insertTicks:!0,minTicksDistance:5,minorHeight:10,majorHeight:-1,tickEndings:[0,1],majorTickEndings:[1,1],minorTicks:4,ticksDistance:1,strokeOpacity:.25},point1:{needsRegularUpdate:!1,visible:!1},point2:{needsRegularUpdate:!1,visible:!1},tabindex:-1,label:{position:"lft",offset:[10,10]},ignoreForLabelAutoposition:!0},bisector:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},bisectorlines:{line1:{strokeColor:"#000000"},line2:{strokeColor:"#000000"}},boxplot:{dir:"vertical",smallWidth:.5,strokeWidth:2,strokeColor:te.A.palette.blue,fillColor:te.A.palette.blue,fillOpacity:.2,highlightStrokeWidth:2,highlightStrokeColor:te.A.palette.blue,highlightFillColor:te.A.palette.blue,highlightFillOpacity:.1},button:{disabled:!1,display:"html"},cardinalspline:{createPoints:!0,isArrayOfCoordinates:!0,points:{strokeOpacity:.05,fillOpacity:.05,highlightStrokeOpacity:1,highlightFillOpacity:1,withLabel:!1,name:"",fixed:!1}},chart:{chartStyle:"line",colors:["#B02B2C","#3F4C6B","#C79810","#D15600","#FFFF88","#c3d9ff","#4096EE","#008C00"],highlightcolors:null,fillcolor:null,highlightonsector:!1,highlightbysize:!1,fillOpacity:.6,withLines:!1,label:{}},checkbox:{disabled:!1,checked:!1,display:"html"},circle:{hasInnerPoints:!1,fillColor:"none",highlightFillColor:"none",strokeColor:te.A.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,withLabel:!1,fixed:!1,fillColor:te.A.palette.red,strokeColor:te.A.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",layer:9,name:""},point2:{fillColor:te.A.palette.red,strokeColor:te.A.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",layer:9,visible:!1,withLabel:!1,fixed:!1,name:""},label:{position:"urt"}},circumcircle:{fillColor:"none",highlightFillColor:"none",strokeColor:te.A.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,fixed:!1,withLabel:!1,fillColor:te.A.palette.red,strokeColor:te.A.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",name:""}},circumcirclearc:{fillColor:"none",highlightFillColor:"none",strokeColor:te.A.palette.blue,highlightStrokeColor:"#c3d9ff",useDirection:!0,center:{visible:!1,withLabel:!1,fixed:!1,name:""}},circumcirclesector:{useDirection:!0,fillColor:te.A.palette.yellow,highlightFillColor:te.A.palette.yellow,fillOpacity:.3,highlightFillOpacity:.3,strokeColor:te.A.palette.blue,highlightStrokeColor:"#c3d9ff",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},comb:{frequency:.2,width:.4,angle:Math.PI/3,reverse:!1,point1:{visible:!1,withLabel:!1,fixed:!1,name:""},point2:{visible:!1,withLabel:!1,fixed:!1,name:""},strokeWidth:1,strokeColor:"#0000ff",fillColor:"none"},conic:{fillColor:"none",highlightFillColor:"none",strokeColor:te.A.palette.blue,highlightStrokeColor:"#c3d9ff",foci:{fixed:!1,visible:!1,withLabel:!1,name:""},center:{visible:!1,withLabel:!1,name:""},point:{withLabel:!1,name:""},line:{visible:!1}},curve:{strokeWidth:1,strokeColor:te.A.palette.blue,fillColor:"none",fixed:!0,curveType:null,doAdvancedPlot:!0,doAdvancedPlotOld:!1,firstArrow:!1,handDrawing:!1,label:{position:"lft"},lastArrow:!1,lineCap:"round",numberPointsHigh:1600,numberPointsLow:400,plotVersion:2,recursionDepthHigh:17,recursionDepthLow:15},foreignobject:{fixed:!0,visible:!0,needsRegularUpdate:!1,attractors:[],evaluateOnlyOnce:!1},functiongraph:{},glider:{label:{}},grid:{needsRegularUpdate:!1,hasGrid:!1,highlight:!1,gridX:null,gridY:null,majorStep:"auto",minorElements:0,forceSquare:!1,includeBoundaries:!1,size:void 0,face:void 0,margin:void 0,drawZero:void 0,polygonVertices:void 0,major:{size:5,face:"line",margin:0,drawZero:!0,polygonVertices:6},minor:{visible:"inherit",size:3,face:"point",margin:0,drawZero:!0,polygonVertices:6},snapToGrid:!1,strokeColor:"#c0c0c0",strokeWidth:1,strokeOpacity:.5,dash:0,theme:0,themes:[{},{forceSquare:"min",major:{face:"line"}},{major:{face:"line"},minor:{size:3,face:"point"},minorElements:"auto"},{major:{face:"line"},minor:{face:"line",strokeOpacity:.25},minorElements:"auto"},{major:{face:"line"},minor:{face:"+",size:"95%"},minorElements:"auto"},{major:{face:"+",size:10,strokeOpacity:1},minor:{face:"point",size:3},minorElements:"auto"},{major:{face:"circle",size:8,fillColor:"#c0c0c0"},minor:{face:"point",size:3},minorElements:"auto"}]},group:{needsRegularUpdate:!0},htmlslider:{widthRange:100,widthOut:34,step:.01,frozen:!0,isLabel:!1,strokeColor:"#000000",display:"html",anchorX:"left",anchorY:"middle",withLabel:!1},image:{imageString:null,fillOpacity:1,highlightFillOpacity:.6,cssClass:"JXGimage",highlightCssClass:"JXGimageHighlight",rotate:0,snapSizeX:1,snapSizeY:1,attractors:[]},implicitcurve:{margin:1,resolution_outer:5,resolution_inner:5,max_steps:1024,alpha_0:.05,tol_u0:ee.A.eps,tol_newton:1e-7,tol_cusp:.05,tol_progress:1e-4,qdt_box:.2,kappa_0:.2,delta_0:.05,h_initial:.1,h_critical:.001,h_max:.5,loop_dist:.09,loop_dir:.99,loop_detection:!0},incircle:{fillColor:"none",highlightFillColor:"none",strokeColor:te.A.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,fixed:!1,withLabel:!1,fillColor:te.A.palette.red,strokeColor:te.A.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",name:""}},inequality:{fillColor:te.A.palette.red,fillOpacity:.2,strokeColor:"none",inverse:!1},infobox:{distanceX:-20,distanceY:25,intl:{enabled:"inherit",options:{}},fontSize:12,isLabel:!1,strokeColor:"#bbbbbb",display:"html",anchorX:"left",anchorY:"middle",cssClass:"JXGinfobox",rotate:0,visible:!0,parse:!1,transitionDuration:0,needsRegularUpdate:!1,tabindex:null,viewport:[0,0,0,0],ignoreForLabelAutoposition:!0},integral:{axis:"x",withLabel:!0,fixed:!0,strokeWidth:0,strokeOpacity:0,fillColor:te.A.palette.red,fillOpacity:.3,highlightFillColor:te.A.palette.red,highlightFillOpacity:.2,curveLeft:{visible:!0,withLabel:!1,color:te.A.palette.red,fillOpacity:.8,layer:9},baseLeft:{visible:!1,fixed:!1,withLabel:!1,name:""},curveRight:{visible:!0,withLabel:!1,color:te.A.palette.red,fillOpacity:.8,layer:9},baseRight:{visible:!1,fixed:!1,withLabel:!1,name:""},label:{fontSize:20,digits:4,intl:{enabled:!1,options:{}}}},input:{disabled:!1,maxlength:524288,display:"html"},intersection:{alwaysIntersect:!0},label:{visible:"inherit",strokeColor:"#000000",strokeOpacity:1,highlightStrokeOpacity:.666666,highlightStrokeColor:"#000000",fixed:!0,tabindex:null,position:"urt",distance:1.5,offset:[10,10],autoPosition:!1,autoPositionMinDistance:12,autoPositionMaxDistance:28,autoPositionWhitelist:[]},legend:{style:"vertical",labels:["1","2","3","4","5","6","7","8"],colors:["#B02B2C","#3F4C6B","#C79810","#D15600","#FFFF88","#c3d9ff","#4096EE","#008C00"],lineLength:1,strokeOpacity:[1],rowHeight:20,strokeWidth:5,frozen:!1},line:{firstArrow:!1,lastArrow:!1,margin:0,straightFirst:!0,straightLast:!0,fillColor:"none",highlightFillColor:"none",strokeColor:te.A.palette.blue,highlightStrokeColor:"#c3d9ff",withTicks:!1,point1:{fillColor:te.A.palette.red,strokeColor:te.A.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",layer:9,visible:!1,withLabel:!1,fixed:!1,name:""},point2:{fillColor:te.A.palette.red,strokeColor:te.A.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",layer:9,visible:!1,withLabel:!1,fixed:!1,name:""},ticks:{drawLabels:!0,label:{offset:[4,-9]},drawZero:!1,insertTicks:!1,ticksDistance:1,minTicksDistance:50,minorHeight:4,majorHeight:-1,minorTicks:4,strokeOpacity:.3,visible:"inherit"},label:{position:"llft"},snapToGrid:!1,snapSizeX:1,snapSizeY:1,touchFirstPoint:!1,touchLastPoint:!1},locus:{translateToOrigin:!1,translateTo10:!1,stretch:!1,toOrigin:null,to10:null},measurement:{baseUnit:"",units:{},showPrefix:!0,showSuffix:!0,prefix:"",suffix:"",dim:null,formatCoords:function(ie,re,oe,se){return parseFloat(se)!==1?"Infinit coords":"("+re+", "+oe+")"},formatDirection:function(ie,re,oe){return"("+re+", "+oe+")"}},metapostspline:{createPoints:!0,isArrayOfCoordinates:!0,points:{strokeOpacity:.5,fillOpacity:.5,highlightStrokeOpacity:1,highlightFillOpacity:1,withLabel:!1,name:"",fixed:!1}},mirrorelement:{fixed:!0,point:{},center:{},type:"Euclidean"},nonreflexangle:{},normal:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},orthogonalprojection:{},otherintersection:{alwaysIntersect:!0,precision:.001},parallel:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""},label:{position:"llft"}},parallelogram:{parallelpoint:{withLabel:!1,name:""}},parallelpoint:{},perpendicular:{strokeColor:"#000000",straightFirst:!0,straightLast:!0},perpendicularsegment:{strokeColor:"#000000",straightFirst:!1,straightLast:!1,point:{visible:!1,fixed:!0,withLabel:!1,name:""}},point:{withLabel:!0,label:{},style:5,face:"o",size:3,sizeUnit:"screen",strokeWidth:2,transitionProperties:["fill","fill-opacity","stroke","stroke-opacity","stroke-width","width","height","rx","ry"],fillColor:te.A.palette.red,strokeColor:te.A.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",zoom:!1,showInfobox:"inherit",infoboxDigits:"auto",draft:!1,attractors:[],attractorUnit:"user",attractorDistance:0,snatchDistance:0,snapToGrid:!1,attractToGrid:!1,snapSizeX:1,snapSizeY:1,snapToPoints:!1,ignoredSnapToPoints:[]},polygon:{hasInnerPoints:!1,fillColor:te.A.palette.yellow,highlightFillColor:te.A.palette.yellow,fillOpacity:.3,highlightFillOpacity:.2,withLines:!0,borders:{withLabel:!1,strokeWidth:1,highlightStrokeWidth:1,layer:5,label:{position:"top"},visible:"inherit"},highlightByStrokeWidth:!1,vertices:{layer:9,withLabel:!1,name:"",strokeColor:te.A.palette.red,fillColor:te.A.palette.red,fixed:!1,visible:"inherit"},label:{offset:[0,0]}},polygonalchain:{fillColor:"none",highlightFillColor:"none"},prescribedangle:{anglePoint:{size:2,visible:!1,withLabel:!1}},reflection:{fixed:!0,center:{},type:"Euclidean"},reflexangle:{},regularpolygon:{hasInnerPoints:!1,fillColor:te.A.palette.yellow,highlightFillColor:te.A.palette.yellow,fillOpacity:.3,highlightFillOpacity:.2,withLines:!0,borders:{withLabel:!1,strokeWidth:1,highlightStrokeWidth:1,layer:5,label:{position:"top"}},vertices:{layer:9,withLabel:!0,strokeColor:te.A.palette.red,fillColor:te.A.palette.red,fixed:!1},label:{offset:[0,0]}},riemannsum:{withLabel:!1,fillOpacity:.3,fillColor:te.A.palette.yellow},sector:{fillColor:te.A.palette.yellow,highlightFillColor:te.A.palette.yellow,fillOpacity:.3,highlightFillOpacity:.3,highlightOnSector:!1,highlightStrokeWidth:0,useDirection:!1,selection:"auto",arc:{visible:!1,fillColor:"none",withLabel:!1,name:"",center:{visible:!1,withLabel:!1,name:""},radiusPoint:{visible:!1,withLabel:!1,name:""},anglePoint:{visible:!1,withLabel:!1,name:""}},radiusPoint:{visible:!1,withLabel:!1},center:{visible:!1,withLabel:!1},anglePoint:{visible:!1,withLabel:!1},label:{offset:[0,0],anchorX:"auto",anchorY:"auto"}},segment:{label:{position:"top"}},semicircle:{center:{visible:!1,withLabel:!1,fixed:!1,fillColor:te.A.palette.red,strokeColor:te.A.palette.red,highlightFillColor:"#eeeeee",highlightStrokeColor:te.A.palette.red,name:""}},slider:{snapWidth:-1,snapValues:[],snapValueDistance:0,precision:2,digits:2,intl:{enabled:"inherit",options:{}},firstArrow:!1,lastArrow:!1,withTicks:!0,withLabel:!0,suffixLabel:null,unitLabel:null,postLabel:null,layer:9,showInfobox:!1,name:"",visible:!0,strokeColor:"#000000",highlightStrokeColor:"#888888",fillColor:"#ffffff",highlightFillColor:"none",size:6,point1:{needsRegularUpdate:!1,showInfobox:!1,withLabel:!1,visible:!1,fixed:!0,frozen:"inherit",name:""},point2:{needsRegularUpdate:!1,showInfobox:!1,withLabel:!1,visible:!1,fixed:!0,frozen:"inherit",name:""},baseline:{needsRegularUpdate:!1,visible:"inherit",fixed:!0,scalable:!1,tabindex:null,name:"",strokeWidth:1,strokeColor:"#000000",highlightStrokeColor:"#888888"},ticks:{needsRegularUpdate:!1,fixed:!0,drawLabels:!1,digits:2,includeBoundaries:!0,drawZero:!0,label:{offset:[-4,-14],display:"internal"},minTicksDistance:30,insertTicks:!0,ticksDistance:1,minorHeight:4,majorHeight:5,minorTicks:0,strokeOpacity:1,strokeWidth:1,tickEndings:[0,1],majortickEndings:[0,1],strokeColor:"#000000",visible:"inherit"},highline:{strokeWidth:3,visible:"inherit",fixed:!0,tabindex:null,name:"",strokeColor:"#000000",highlightStrokeColor:"#888888"},label:{visible:"inherit",strokeColor:"#000000"},moveOnUp:!0},slopefield:{strokeWidth:.5,highlightStrokeWidth:.5,highlightStrokeColor:te.A.palette.blue,highlightStrokeOpacity:.8,scale:1,arrowhead:{enabled:!1,size:5,angle:.125*Math.PI}},slopetriangle:{fillColor:te.A.palette.red,fillOpacity:.4,highlightFillColor:te.A.palette.red,highlightFillOpacity:.3,borders:{lastArrow:{type:1,size:6}},glider:{fixed:!0,visible:!1,withLabel:!1},baseline:{visible:!1,withLabel:!1,name:""},basepoint:{visible:!1,withLabel:!1,name:""},tangent:{visible:!1,withLabel:!1,name:""},toppoint:{visible:!1,withLabel:!1,name:""},label:{visible:!0,position:"first"}},smartlabelangle:{cssClass:"smart-label-solid smart-label-angle",highlightCssClass:"smart-label-solid smart-label-angle",anchorX:"left",anchorY:"middle",unit:"",prefix:"",suffix:"",measure:"deg",useMathJax:!0},smartlabelcircle:{cssClass:"smart-label-solid smart-label-circle",highlightCssClass:"smart-label-solid smart-label-circle",anchorX:"middle",useMathJax:!0,unit:"",prefix:"",suffix:"",measure:"radius"},smartlabelline:{cssClass:"smart-label-solid smart-label-line",highlightCssClass:"smart-label-solid smart-label-line",anchorX:"middle",useMathJax:!0,unit:"",measure:"length"},smartlabelpoint:{cssClass:"smart-label-solid smart-label-point",highlightCssClass:"smart-label-solid smart-label-point",anchorX:"middle",anchorY:"top",useMathJax:!0,dir:"row",unit:""},smartlabelpolygon:{cssClass:"smart-label-solid smart-label-polygon",highlightCssClass:"smart-label-solid smart-label-polygon",anchorX:"middle",useMathJax:!0,unit:"",measure:"area"},stepfunction:{},tangent:{},tangentto:{polar:{visible:!1,strokeWidth:1,dash:3},point:{visible:!1}},tapemeasure:{strokeColor:"#000000",strokeWidth:2,highlightStrokeColor:"#000000",withTicks:!0,withLabel:!0,rotate:0,precision:2,digits:2,point1:{visible:!0,strokeColor:"#000000",fillColor:"#ffffff",fillOpacity:0,highlightFillOpacity:.1,size:6,snapToPoints:!0,attractorUnit:"screen",attractorDistance:20,showInfobox:!1,withLabel:!1,name:""},point2:{visible:!0,strokeColor:"#000000",fillColor:"#ffffff",fillOpacity:0,highlightFillOpacity:.1,size:6,snapToPoints:!0,attractorUnit:"screen",attractorDistance:20,showInfobox:!1,withLabel:!1,name:""},ticks:{drawLabels:!1,drawZero:!0,insertTicks:!0,ticksDistance:.1,minorHeight:8,majorHeight:16,minorTicks:4,tickEndings:[0,1],majorTickEndings:[0,1],strokeOpacity:1,strokeWidth:1,strokeColor:"#000000",visible:"inherit",label:{anchorY:"top",anchorX:"middle",offset:[0,-10]}},label:{position:"top"}},text:{fontSize:12,fontUnit:"px",formatNumber:!1,digits:2,intl:{enabled:"inherit",options:{minimumFractionDigits:0,maximumFractionDigits:2}},parse:!0,useCaja:!1,isLabel:!1,strokeColor:"#000000",highlightStrokeColor:"#000000",highlightStrokeOpacity:.666666,cssDefaultStyle:"font-family: Arial, Helvetica, Geneva, sans-serif;",highlightCssDefaultStyle:"font-family: Arial, Helvetica, Geneva, sans-serif;",cssStyle:"",highlightCssStyle:"",transitionProperties:["color","opacity"],useASCIIMathML:!1,useMathJax:!1,useKatex:!1,katexMacros:{},toFraction:!1,display:"html",anchor:null,anchorX:"left",anchorY:"middle",cssClass:"JXGtext",highlightCssClass:"JXGtext",dragArea:"all",withLabel:!1,rotate:0,visible:!0,snapSizeX:1,snapSizeY:1,attractors:[]},tracecurve:{strokeColor:"#000000",fillColor:"none",numberPoints:100},turtle:{strokeWidth:1,fillColor:"none",strokeColor:"#000000",arrow:{strokeWidth:2,withLabel:!1,strokeColor:te.A.palette.red,lastArrow:!0}},vectorfield:{strokeWidth:.5,highlightStrokeWidth:.5,highlightStrokeColor:te.A.palette.blue,highlightStrokeOpacity:.8,scale:1,arrowhead:{enabled:!0,size:5,angle:.125*Math.PI}},shortcuts:{color:["strokeColor","fillColor"],opacity:["strokeOpacity","fillOpacity"],highlightColor:["highlightStrokeColor","highlightFillColor"],highlightOpacity:["highlightStrokeOpacity","highlightFillOpacity"],strokeWidth:["strokeWidth","highlightStrokeWidth"]}},Z.A.Validator=(function(){var ie,re=function(fe){return ne.A.isString(fe)},oe=function(fe){return ne.A.isNumber(fe,!0,!1)},se=function(fe){return Math.abs(fe-Math.round(fe))<ee.A.eps},ae=function(fe){return se(fe)&&fe>0},ce=function(fe){return fe>0},ue=function(fe){return fe>=0},de={},me={attractorDistance:ue,color:re,display:function(fe){return fe==="html"||fe==="internal"},doAdvancedPlot:!1,draft:!1,drawLabels:!1,drawZero:!1,face:function(fe){return ne.A.exists(Z.A.normalizePointFace(fe))},factor:oe,fillColor:re,fillOpacity:oe,firstArrow:!1,fontSize:se,dash:se,gridX:oe,gridY:oe,hasGrid:!1,highlightFillColor:re,highlightFillOpacity:oe,highlightStrokeColor:re,highlightStrokeOpacity:oe,insertTicks:!1,lastArrow:!1,layer:function(fe){return se(fe)&&fe>=0},majorHeight:se,minorHeight:se,minorTicks:ue,minTicksDistance:ae,numberPointsHigh:ae,numberPointsLow:ae,opacity:oe,radius:oe,RDPsmoothing:!1,renderer:function(fe){return fe==="vml"||fe==="svg"||fe==="canvas"||fe==="no"},right:function(fe){return/^[0-9]+px$/.test(fe)},showCopyright:!1,showInfobox:!1,showNavigation:!1,size:ue,snapSizeX:ce,snapSizeY:ce,snapWidth:oe,snapToGrid:!1,snatchDistance:ue,straightFirst:!1,straightLast:!1,stretch:!1,strokeColor:re,strokeOpacity:oe,strokeWidth:ue,takeFirst:!1,takeSizeFromFile:!1,to10:!1,toOrigin:!1,translateTo10:!1,translateToOrigin:!1,useASCIIMathML:!1,useDirection:!1,useMathJax:!1,withLabel:!1,withTicks:!1,zoom:!1};for(ie in me)me.hasOwnProperty(ie)&&(de[ie.toLowerCase()]=me[ie]);return de})(),Z.A.normalizePointFace=function(ie){return{cross:"x",x:"x",circle:"o",o:"o",square:"[]","[]":"[]",plus:"+","+":"+",divide:"|","|":"|",minus:"-","-":"-",diamond:"<>","<>":"<>",diamond2:"<<>>","<<>>":"<<>>",triangleup:"^",A:"^",a:"^","^":"^",triangledown:"v",v:"v",triangleleft:"<","<":"<",triangleright:">",">":">"}[ie]},Z.A.useStandardOptions=function(ie){var re,oe,se,ae,ce=Z.A.Options,ue=ie.hasGrid;for(re in ie.options.grid.hasGrid=ce.grid.hasGrid,ie.options.grid.gridX=ce.grid.gridX,ie.options.grid.gridY=ce.grid.gridY,ie.options.grid.gridColor=ce.grid.gridColor,ie.options.grid.gridOpacity=ce.grid.gridOpacity,ie.options.grid.gridDash=ce.grid.gridDash,ie.options.grid.snapToGrid=ce.grid.snapToGrid,ie.options.grid.snapSizeX=ce.grid.SnapSizeX,ie.options.grid.snapSizeY=ce.grid.SnapSizeY,ie.takeSizeFromFile=ce.takeSizeFromFile,ae=function(de,me){de.visProp.fillcolor=me.fillColor,de.visProp.highlightfillcolor=me.highlightFillColor,de.visProp.strokecolor=me.strokeColor,de.visProp.highlightstrokecolor=me.highlightStrokeColor},ie.objects)if(ie.objects.hasOwnProperty(re))if((se=ie.objects[re]).elementClass===Q.A.OBJECT_CLASS_POINT)ae(se,ce.point);else if(se.elementClass===Q.A.OBJECT_CLASS_LINE)for(ae(se,ce.line),oe=0;oe<se.ticks.length;oe++)se.ticks[oe].majorTicks=ce.line.ticks.majorTicks,se.ticks[oe].minTicksDistance=ce.line.ticks.minTicksDistance,se.ticks[oe].visProp.minorheight=ce.line.ticks.minorHeight,se.ticks[oe].visProp.majorheight=ce.line.ticks.majorHeight;else se.elementClass===Q.A.OBJECT_CLASS_CIRCLE?ae(se,ce.circle):se.type===Q.A.OBJECT_TYPE_ANGLE?ae(se,ce.angle):se.type===Q.A.OBJECT_TYPE_ARC?ae(se,ce.arc):se.type===Q.A.OBJECT_TYPE_POLYGON?ae(se,ce.polygon):se.type===Q.A.OBJECT_TYPE_CONIC?ae(se,ce.conic):se.type===Q.A.OBJECT_TYPE_CURVE?ae(se,ce.curve):se.type===Q.A.OBJECT_TYPE_SECTOR&&(se.arc.visProp.fillcolor=ce.sector.fillColor,se.arc.visProp.highlightfillcolor=ce.sector.highlightFillColor,se.arc.visProp.fillopacity=ce.sector.fillOpacity,se.arc.visProp.highlightfillopacity=ce.sector.highlightFillOpacity);ie.fullUpdate(),ue&&!ie.hasGrid?ie.removeGrids(ie):!ue&&ie.hasGrid&&ie.create("grid",[])},Z.A.useBlackWhiteOptions=function(ie){var re=Z.A.Options;re.point.fillColor=te.A.rgb2bw(re.point.fillColor),re.point.highlightFillColor=te.A.rgb2bw(re.point.highlightFillColor),re.point.strokeColor=te.A.rgb2bw(re.point.strokeColor),re.point.highlightStrokeColor=te.A.rgb2bw(re.point.highlightStrokeColor),re.line.fillColor=te.A.rgb2bw(re.line.fillColor),re.line.highlightFillColor=te.A.rgb2bw(re.line.highlightFillColor),re.line.strokeColor=te.A.rgb2bw(re.line.strokeColor),re.line.highlightStrokeColor=te.A.rgb2bw(re.line.highlightStrokeColor),re.circle.fillColor=te.A.rgb2bw(re.circle.fillColor),re.circle.highlightFillColor=te.A.rgb2bw(re.circle.highlightFillColor),re.circle.strokeColor=te.A.rgb2bw(re.circle.strokeColor),re.circle.highlightStrokeColor=te.A.rgb2bw(re.circle.highlightStrokeColor),re.arc.fillColor=te.A.rgb2bw(re.arc.fillColor),re.arc.highlightFillColor=te.A.rgb2bw(re.arc.highlightFillColor),re.arc.strokeColor=te.A.rgb2bw(re.arc.strokeColor),re.arc.highlightStrokeColor=te.A.rgb2bw(re.arc.highlightStrokeColor),re.polygon.fillColor=te.A.rgb2bw(re.polygon.fillColor),re.polygon.highlightFillColor=te.A.rgb2bw(re.polygon.highlightFillColor),re.sector.fillColor=te.A.rgb2bw(re.sector.fillColor),re.sector.highlightFillColor=te.A.rgb2bw(re.sector.highlightFillColor),re.curve.strokeColor=te.A.rgb2bw(re.curve.strokeColor),re.grid.gridColor=te.A.rgb2bw(re.grid.gridColor),Z.A.useStandardOptions(ie)},Z.A.Options.normalizePointFace=Z.A.normalizePointFace,_.A=Z.A.Options},428:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _jxg_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(443),_base_constants_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(561),_base_text_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(925),_math_math_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(477),_math_ia_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(733),_math_geometry_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(571),_math_statistics_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(588),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(188),_utils_env_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(133);Object.create||(Object.create=function(G,_){if(typeof G!="object"&&typeof G!="function")throw new TypeError("Object prototype may only be an Object: "+G);if(G===null)throw new Error("This browser's implementation of Object.create is a shim and doesn't support 'null' as the first argument.");if(_!==void 0)throw new Error("This browser's implementation of Object.create is a shim and doesn't support a second argument.");function J(){}return J.prototype=G,new J});var priv={modules:{math:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A,"math/geometry":_math_geometry_js__WEBPACK_IMPORTED_MODULE_5__.A,"math/statistics":_math_statistics_js__WEBPACK_IMPORTED_MODULE_6__.A,"math/numerics":_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.Numerics}},r,_ccache;_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.JessieCode=function(G,_){this.scope={id:0,hasChild:!0,args:[],locals:{},context:null,previous:null},this.scopes=[],this.scopes.push(this.scope),this.dpstack=[[]],this.pscope=0,this.propstack=[{}],this.propscope=0,this.lhs=[],this.isLHS=!1,this.warnLog="jcwarn",this.$log=[],this.builtIn=this.defineBuiltIn(),this.operands=this.getPossibleOperands(),this.board=null,this.forceValueCall=!1,this.lineToElement={},this.parCurLine=1,this.parCurColumn=0,this.line=1,this.col=1,_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.CA&&(this.CA=new _jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.CA(this.node,this.createNode,this)),_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.CAS&&(this.CAS=new _jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.CAS(this.node,this.createNode,this)),this.code="",typeof G=="string"&&this.parse(G,_)},_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.extend(_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.JessieCode.prototype,{node:function(G,_,J){return{type:G,value:_,children:J}},createNode:function(G,_,J){var Z,Q=this.node(G,_,[]);for(Z=2;Z<arguments.length;Z++)Q.children.push(arguments[Z]);return Q.type==="node_const"&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(Q.value)&&(Q.isMath=!0),Q.line=this.parCurLine,Q.col=this.parCurColumn,Q},pushScope:function(G){var _={args:G,locals:{},context:null,previous:this.scope};return this.scope.hasChild=!0,this.scope=_,_.id=this.scopes.push(_)-1,_},popScope:function(){var G=this.scope.previous;return this.scope=G!==null?G:this.scope,this.scope},getElementById:function(G){return this.board.objects[G]},log:function(){this.$log.push(arguments),typeof console=="object"&&console.log&&console.log.apply(console,arguments)},creator:(_ccache={},(r=function(G){var _,J;return typeof _ccache[this.board.id+G]=="function"?_=_ccache[this.board.id+G]:(J=this,(_=function(Z,Q){var ee;return(ee=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(Q)?Q:{}).name===void 0&&ee.id===void 0&&(ee.name=J.lhs[J.scope.id]!==0?J.lhs[J.scope.id]:""),J.board.create(G,Z,ee)}).creator=!0,_ccache[this.board.id+G]=_),_}).clearCache=function(){_ccache={}},r),letvar:function(G,_){this.builtIn[G]&&this._warn('"'+G+'" is a predefined value.'),this.scope.locals[G]=_},isLocalVariable:function(G){for(var _=this.scope;_!==null;){if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(_.locals[G]))return _;_=_.previous}return null},isParameter:function(G){for(var _=this.scope;_!==null;){if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.indexOf(_.args,G)>-1)return _;_=_.previous}return null},isCreator:function(G){return!!_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.elements[G]},isMathMethod:function(G){return G!=="E"&&!!Math[G]},isBuiltIn:function(G){return!!this.builtIn[G]},getvar:function(G,_,J){var Z;if(_=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.def(_,!1),(Z=this.isLocalVariable(G))!==null)return Z.locals[G];if(G==="$board"||G==="EULER"||G==="PI")return this.builtIn[G];if(J){if(this.isBuiltIn(G))return this.builtIn[G];if(this.isMathMethod(G))return Math[G];if(this.isCreator(G))return this.creator(G)}return _||(Z=this.board.select(G))===G?void 0:Z},resolve:function(G){for(var _=this.scope;_!==null;){if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(_.locals[G]))return _.locals[G];_=_.previous}},getvarJS:function(G,_,J){var Z,Q="";return _=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.def(_,!1),J=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.def(J,!1),this.isParameter(G)!==null?G:this.isLocalVariable(G)===null||J?this.isCreator(G)?"(function () { var a = Array.prototype.slice.call(arguments, 0), props = "+(J?"a.pop()":"{}")+"; return $jc$.board.create.apply($jc$.board, ['"+G+"'].concat([a, props])); })":(J&&this._error("Syntax error (attribute values are allowed with element creators only)"),this.isBuiltIn(G)?(Q=this.builtIn[G].src||this.builtIn[G],_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(Q)||Q.match(/board\.select/)?Q:(G=Q.split(".").pop(),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(this.board.mathLib)&&(Z=new RegExp("^Math."+G)).exec(Q)!==null?Q.replace(Z,"$jc$.board.mathLib."+G):_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(this.board.mathLibJXG)&&(Z=new RegExp("^JXG.Math.")).exec(Q)!==null?Q.replace(Z,"$jc$.board.mathLibJXG."):Q)):this.isMathMethod(G)?"$jc$.board.mathLib."+G:_?"":(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isId(this.board,G)?(Q="$jc$.board.objects['"+G+"']",this.board.objects[G].elType==="slider"&&(Q+=".Value()")):_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isName(this.board,G)?(Q="$jc$.board.elementsByName['"+G+"']",this.board.elementsByName[G].elType==="slider"&&(Q+=".Value()")):_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isGroup(this.board,G)&&(Q="$jc$.board.groups['"+G+"']"),Q)):"$jc$.resolve('"+G+"')"},makeMap:function(G){return G.isMap=!0,G},functionCodeJS:function(G){var _=G.children[0].join(", "),J="",Z="";return G.value==="op_map"&&(J="{ return  ",Z=" }"),"function ("+_+`) {
var $oldscope$ = $jc$.scope;
$jc$.scope = $jc$.scopes[`+this.scope.id+`];
var r = (function () `+J+this.compile(G.children[1],!0)+Z+`)();
$jc$.scope = $oldscope$;
return r;
}`},defineFunction:function(node){var fun,i,that=this,list=node.children[0],scope=this.pushScope(list),_that;if(this.board.options.jc.compile){for(this.isLHS=!1,i=0;i<list.length;i++)scope.locals[list[i]]=list[i];this.replaceNames(node.children[1]),fun=(function(jc){var fun,str="var f = function($jc$) { return "+jc.functionCodeJS(node)+"}; f;";try{for(fun=eval(str)(jc),scope.argtypes=[],i=0;i<list.length;i++)scope.argtypes.push(that.resolveType(list[i],node));return fun}catch(G){return jc._warn(`error compiling function

`+str+`

`+G.toString()),function(){}}})(this),this.popScope()}else fun=(function(G,_,J){return function(){var Z,Q;for(Q=_.scope,_.scope=_.scopes[J],Z=0;Z<G.length;Z++)_.scope.locals[G[Z]]=arguments[Z];return Z=_.execute(node.children[1]),_.scope=Q,Z}})(list,this,scope.id);return fun.node=node,fun.scope=scope,fun.toJS=fun.toString,fun.toString=(_that=this,function(){return _that.compile(_that.replaceIDs(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.deepCopy(node)))}),fun.deps={},this.collectDependencies(node.children[1],node.children[0],fun.deps),fun},mergeAttributes:function(G){var _,J={};for(_=0;_<arguments.length;_++)J=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.deepCopy(J,arguments[_],!0);return J},setProp:function(G,_,J){var Z,Q,ee={};G.elementClass!==_base_constants_js__WEBPACK_IMPORTED_MODULE_1__.A.OBJECT_CLASS_POINT||_!=="X"&&_!=="Y"?G.elementClass!==_base_constants_js__WEBPACK_IMPORTED_MODULE_1__.A.OBJECT_CLASS_TEXT||_!=="X"&&_!=="Y"?G.type&&G.elementClass&&G.visProp?_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G[G.methodMap[_]])&&typeof G[G.methodMap[_]]!="function"?G[G.methodMap[_]]=J:(ee[_]=J,G.setAttribute(ee)):G[_]=J:(typeof J=="number"?G[_]=function(){return J}:typeof J=="function"?(G.isDraggable=!1,G[_]=J):typeof J=="string"&&(G.isDraggable=!1,G[_]=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.createFunction(J,this.board),G[_+"jc"]=J),G[_].origin=J,this.board.update()):(_=_.toLowerCase(),G.isDraggable&&typeof J=="number"?(Z=_==="x"?J:G.X(),Q=_==="y"?J:G.Y(),G.setPosition(_base_constants_js__WEBPACK_IMPORTED_MODULE_1__.A.COORDS_BY_USER,[Z,Q])):!G.isDraggable||typeof J!="function"&&typeof J!="string"?G.isDraggable||(Z=_==="x"?J:G.XEval.origin,Q=_==="y"?J:G.YEval.origin,G.addConstraint([Z,Q])):(Z=_==="x"?J:G.coords.usrCoords[1],Q=_==="y"?J:G.coords.usrCoords[2],G.addConstraint([Z,Q])),this.board.update())},_genericParse:function(G,_,J,Z){var Q,ee,te,ne,ie=G.replace(/\r\n/g,`
`).split(`
`),re={},oe=[];Z||(this.code+=G+`
`),_base_text_js__WEBPACK_IMPORTED_MODULE_2__.A&&(ee=_base_text_js__WEBPACK_IMPORTED_MODULE_2__.A.prototype.setText,_base_text_js__WEBPACK_IMPORTED_MODULE_2__.A.prototype.setText=_base_text_js__WEBPACK_IMPORTED_MODULE_2__.A.prototype.setTextJessieCode);try{for(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(J)||(J=!1),Q=0;Q<ie.length;Q++)J&&(ie[Q]=_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.GeonextParser.geonext2JS(ie[Q],this.board)),oe.push(ie[Q]);switch(G=oe.join(`
`),te=parser.parse(G),this.CA&&(te=this.CA.expandDerivatives(te,null,te),te=this.CA.removeTrivialNodes(te)),this.CAS&&(te=this.CAS.expandDerivatives(te,null,te)),_){case"parse":ne=this.execute(te);break;case"manipulate":ne=this.compile(te);break;case"simplify":_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(this.CAS)?(re.method=re.method||"strong",re.form=re.form||"fractions",re.steps=re.steps||[],re.iterations=re.iterations||1e3,te=this.CAS.simplify(te,re),ne=this.CAS.compile(te)):ne=this.compile(te);break;case"getAst":ne=te;break;default:ne=!1}}catch(se){throw se}finally{_base_text_js__WEBPACK_IMPORTED_MODULE_2__.A&&(_base_text_js__WEBPACK_IMPORTED_MODULE_2__.A.prototype.setText=ee)}return ne},parse:function(G,_,J){return this._genericParse(G,"parse",_,J)},manipulate:function(G,_,J){return this._genericParse(G,"manipulate",_,J)},simplify:function(G){return this._genericParse(G,"simplify")},getAST:function(G,_,J){return this._genericParse(G,"getAst",_,J)},snippet:function(G,_,J,Z,Q){var ee;return _=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.def(_,!0),J=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.def(J,""),Z=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.def(Z,!1),this.forceValueCall=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.def(Q,!0),ee=(_?" function ("+J+") { return ":"")+G+(_?"; }":"")+";",this.parse(ee,Z,!0)},replaceIDs:function(G){var _,J;if(G.replaced&&(J=this.board.objects[G.children[1][0].value],_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(J)&&J.name!==""&&(G.type="node_var",G.value=J.name,G.children.length=0,delete G.replaced)),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(G))for(_=0;_<G.length;_++)G[_]=this.replaceIDs(G[_]);if(G.children)for(_=G.children.length;_>0;_--)_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.children[_-1])&&(G.children[_-1]=this.replaceIDs(G.children[_-1]));return G},replaceNames:function(G,_){var J,Z,Q=!1;if(_!==void 0&&(Q=_),Z=G.value,G.type==="node_op"&&Z==="op_lhs"&&G.children.length===1?this.isLHS=!0:G.type==="node_var"&&(this.isLHS?this.letvar(Z,!0):!_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(this.getvar(Z,!0))&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(this.board.elementsByName[Z])&&(Q&&this.board.elementsByName[Z].elType!=="slider"&&(Q=!1),G=this.createReplacementNode(G,Q))),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(G))for(J=0;J<G.length;J++)G[J]=this.replaceNames(G[J],Q);if(G.children)for(this.forceValueCall&&(G.value==="op_execfun"&&G.children[0].value!=="V"&&G.children[0].value!=="$"&&(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(Math[G.children[0].value])||_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A[G.children[0].value]))&&G.children[1][0].type==="node_var"||G.value==="op_return"&&G.children.length===1&&G.children[0].type==="node_var")&&(Q=!0),J=G.children.length;J>0;J--)_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.children[J-1])&&(G.children[J-1]=this.replaceNames(G.children[J-1],Q));return G.type==="node_op"&&G.value==="op_lhs"&&G.children.length===1&&(this.isLHS=!1),G},createReplacementNode:function(G,_){var J=G.value,Z=this.board.elementsByName[J];return(G=this.createNode("node_op","op_execfun",this.createNode("node_var",_===!0?"$value":"$"),[this.createNode("node_str",Z.id)])).replaced=!0,G},collectDependencies:function(G,_,J){var Z,Q,ee,te;if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(G))for(te=G.length,Z=0;Z<te;Z++)this.collectDependencies(G[Z],_,J);else if(Q=G.value,G.type==="node_var"&&_.indexOf(Q)<0&&(ee=this.getvar(Q))&&ee.visProp&&ee.elType&&ee.elementClass&&ee.id&&(J[ee.id]=ee),G.type==="node_op"&&G.value==="op_execfun"&&G.children.length>1&&(G.children[0].value==="$"||G.children[0].value==="$value")&&G.children[1].length>0&&(J[ee=G.children[1][0].value]=this.board.objects[ee]),G.children)for(Z=G.children.length;Z>0;Z--)_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.children[Z-1])&&this.collectDependencies(G.children[Z-1],_,J)},resolveProperty:function(G,_,J){return J=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.def(J,!1),G&&G.methodMap&&(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.subs)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.subs[_])?G=G.subs:_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.methodMap[_])?_=G.methodMap[_]:(G=G.visProp,_=_.toLowerCase())),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isFunction(G)&&this._error("Accessing function properties is not allowed."),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G)||this._error(G+" is not an object"),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G[_])||this._error("unknown property "+_),J&&typeof G[_]=="function"?function(){return G[_].apply(G,arguments)}:G[_]},resolveType:function(G,_){var J,Z;if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(_)){for(J=0;J<_.length;J++)if((Z=this.resolveType(G,_[J]))!=="any")return Z}if(_.type==="node_op"&&_.value==="op_execfun"&&_.children[0].type==="node_var"&&_.children[0].value===G)return"function";if(_.type==="node_op"){for(J=0;J<_.children.length;J++)if(_.children[0].type==="node_var"&&_.children[0].value===G&&(_.value==="op_add"||_.value==="op_sub"||_.value==="op_mul"||_.value==="op_div"||_.value==="op_mod"||_.value==="op_exp"||_.value==="op_neg"))return"any";for(J=0;J<_.children.length;J++)if((Z=this.resolveType(G,_.children[J]))!=="any")return Z}return"any"},getLHS:function(G){var _;if(G.type==="node_var")_={o:this.scope.locals,what:G.value};else if(G.type==="node_op"&&G.value==="op_property")_={o:this.execute(G.children[0]),what:G.children[1]};else{if(G.type!=="node_op"||G.value!=="op_extvalue")throw new Error("Syntax error: Invalid left-hand side of assignment.");_={o:this.execute(G.children[0]),what:this.execute(G.children[1])}}return _},getLHSCompiler:function(G,_){var J;if(G.type==="node_var")J=G.value;else if(G.type==="node_op"&&G.value==="op_property")J=[this.compile(G.children[0],_),"'"+G.children[1]+"'"];else{if(G.type!=="node_op"||G.value!=="op_extvalue")throw new Error("Syntax error: Invalid left-hand side of assignment.");J=[this.compile(G.children[0],_),G.children[1].type==="node_const"?G.children[1].value:this.compile(G.children[1],_)]}return J},execute:function(G){var _,J,Z,Q,ee,te,ne,ie,re,oe,se=[];if(_=0,!G)return _;switch(this.line=G.line,this.col=G.col,G.type){case"node_op":switch(G.value){case"op_none":G.children[0]&&this.execute(G.children[0]),G.children[1]&&(_=this.execute(G.children[1]));break;case"op_assign":J=this.getLHS(G.children[0]),this.lhs[this.scope.id]=J.what,J.o.type&&J.o.elementClass&&J.o.methodMap&&J.what==="label"&&this._error("Left-hand side of assignment is read-only."),_=this.execute(G.children[1]),J.o!==this.scope.locals||_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(J.o)&&typeof J.what=="number"?this.setProp(J.o,J.what,_):this.letvar(J.what,_),this.lhs[this.scope.id]=0;break;case"op_if":this.execute(G.children[0])&&(_=this.execute(G.children[1]));break;case"op_conditional":case"op_if_else":_=this.execute(G.children[0])?this.execute(G.children[1]):this.execute(G.children[2]);break;case"op_while":for(;this.execute(G.children[0]);)this.execute(G.children[1]);break;case"op_do":do this.execute(G.children[0]);while(this.execute(G.children[1]));break;case"op_for":for(this.execute(G.children[0]);this.execute(G.children[1]);this.execute(G.children[2]))this.execute(G.children[3]);break;case"op_proplst":G.children[0]&&this.execute(G.children[0]),G.children[1]&&this.execute(G.children[1]);break;case"op_emptyobject":_={};break;case"op_proplst_val":this.propstack.push({}),this.propscope++,this.execute(G.children[0]),_=this.propstack[this.propscope],this.propstack.pop(),this.propscope--;break;case"op_prop":this.propstack[this.propscope][G.children[0]]=this.execute(G.children[1]);break;case"op_array":for(_=[],ee=G.children[0].length,Z=0;Z<ee;Z++)_.push(this.execute(G.children[0][Z]));break;case"op_extvalue":_=this.execute(G.children[0]),_=typeof(Z=this.execute(G.children[1]))=="number"&&Math.abs(Math.round(Z)-Z)<1e-12?_[Z]:void 0;break;case"op_return":if(this.scope!==0)return this.execute(G.children[0]);this._error("Unexpected return.");break;case"op_map":G.children[1].isMath||G.children[1].type==="node_var"||this._error("execute: In a map only function calls and mathematical expressions are allowed."),(ie=this.defineFunction(G)).isMap=!0,_=ie;break;case"op_function":(ie=this.defineFunction(G)).isMap=!1,_=ie;break;case"op_execfun":if(this.dpstack.push([]),this.pscope++,te=G.children[1],_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.children[2]))if(G.children[3])for(ne=G.children[2],re={},Z=0;Z<ne.length;Z++)re=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.deepCopy(re,this.execute(ne[Z]),!0);else re=this.execute(G.children[2]);for(G.children[0]._isFunctionName=!0,ie=this.execute(G.children[0]),delete G.children[0]._isFunctionName,oe=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(ie)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(ie.sc)?ie.sc:this,!ie.creator&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.children[2])&&this._error("Unexpected value. Only element creators are allowed to have a value after the function call."),Z=0;Z<te.length;Z++)_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(ie.scope)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(ie.scope.argtypes)&&ie.scope.argtypes[Z]==="function"?(te[Z]._isFunctionName=!0,se[Z]=this.execute(te[Z]),delete te[Z]._isFunctionName):se[Z]=this.execute(te[Z]),this.dpstack[this.pscope].push({line:G.children[1][Z].line,col:G.children[1][Z].ecol});if(typeof ie!="function"||ie.creator)if(typeof ie=="function"&&ie.creator){Q=this.line;try{for((_=ie(se,re)).jcLineStart=Q,_.jcLineEnd=G.eline,Z=Q;Z<=G.line;Z++)this.lineToElement[Z]=_;_.debugParents=this.dpstack[this.pscope]}catch(ae){this._error(ae.toString())}}else this._error("Function '"+ie+"' is undefined.");else _=ie.apply(oe,se);this.dpstack.pop(),this.pscope--;break;case"op_property":Q=this.execute(G.children[0]),J=G.children[1],_=this.resolveProperty(Q,J,!1),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(_)&&["number","string","boolean"].indexOf(typeof _)<0&&(_.sc=Q);break;case"op_use":this._warn("Use of the 'use' operator is deprecated."),this.use(G.children[0].toString());break;case"op_delete":this._warn("Use of the 'delete' operator is deprecated. Please use the remove() function."),J=this.getvar(G.children[0]),_=this.del(J);break;case"op_eq":_=this.execute(G.children[0])==this.execute(G.children[1]);break;case"op_neq":_=this.execute(G.children[0])!=this.execute(G.children[1]);break;case"op_approx":_=Math.abs(this.execute(G.children[0])-this.execute(G.children[1]))<_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.eps;break;case"op_gt":_=this.execute(G.children[0])>this.execute(G.children[1]);break;case"op_lt":_=this.execute(G.children[0])<this.execute(G.children[1]);break;case"op_geq":_=this.execute(G.children[0])>=this.execute(G.children[1]);break;case"op_leq":_=this.execute(G.children[0])<=this.execute(G.children[1]);break;case"op_or":_=this.execute(G.children[0])||this.execute(G.children[1]);break;case"op_and":_=this.execute(G.children[0])&&this.execute(G.children[1]);break;case"op_not":_=!this.execute(G.children[0]);break;case"op_add":_=this.add(this.execute(G.children[0]),this.execute(G.children[1]));break;case"op_sub":_=this.sub(this.execute(G.children[0]),this.execute(G.children[1]));break;case"op_div":_=this.div(this.execute(G.children[0]),this.execute(G.children[1]));break;case"op_mod":_=this.mod(this.execute(G.children[0]),this.execute(G.children[1]),!0);break;case"op_mul":_=this.mul(this.execute(G.children[0]),this.execute(G.children[1]));break;case"op_exp":_=this.pow(this.execute(G.children[0]),this.execute(G.children[1]));break;case"op_neg":_=this.neg(this.execute(G.children[0]))}break;case"node_var":_=this.getvar(G.value,!1,G._isFunctionName);break;case"node_const":_=G.value===null?null:Number(G.value);break;case"node_const_bool":_=G.value;break;case"node_str":_=G.value.replace(/\\(.)/g,"$1")}return _},compile:function(G,_){var J,Z,Q,ee="";if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(_)||(_=!1),!G)return ee;switch(G.type){case"node_op":switch(G.value){case"op_none":G.children[0]&&(ee=this.compile(G.children[0],_)),G.children[1]&&(ee+=this.compile(G.children[1],_));break;case"op_block":ee=`{
`+this.compile(G.children[0],_)+` }
`;break;case"op_assign":_?(J=this.getLHSCompiler(G.children[0],_),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(J)?ee="$jc$.setProp("+J[0]+", "+J[1]+", "+this.compile(G.children[1],_)+`);
`:(this.isLocalVariable(J)!==this.scope&&(this.scope.locals[J]=!0),ee="$jc$.scopes["+this.scope.id+"].locals['"+J+"'] = "+this.compile(G.children[1],_)+`;
`)):ee=(J=this.compile(G.children[0]))+" = "+this.compile(G.children[1],_)+`;
`;break;case"op_if":ee=" if ("+this.compile(G.children[0],_)+") "+this.compile(G.children[1],_);break;case"op_if_else":ee=" if ("+this.compile(G.children[0],_)+")"+this.compile(G.children[1],_),ee+=" else "+this.compile(G.children[2],_);break;case"op_conditional":ee="(("+this.compile(G.children[0],_)+")?("+this.compile(G.children[1],_),ee+="):("+this.compile(G.children[2],_)+"))";break;case"op_while":ee=" while ("+this.compile(G.children[0],_)+`) {
`+this.compile(G.children[1],_)+`}
`;break;case"op_do":ee=` do {
`+this.compile(G.children[0],_)+"} while ("+this.compile(G.children[1],_)+`);
`;break;case"op_for":ee=" for ("+this.compile(G.children[0],_)+this.compile(G.children[1],_)+"; "+this.compile(G.children[2],_).slice(0,-2)+`) {
`+this.compile(G.children[3],_)+`
}
`;break;case"op_proplst":G.children[0]&&(ee=this.compile(G.children[0],_)+", "),ee+=this.compile(G.children[1],_);break;case"op_prop":ee=G.children[0]+": "+this.compile(G.children[1],_);break;case"op_emptyobject":ee=_?"{}":"<< >>";break;case"op_proplst_val":ee=this.compile(G.children[0],_);break;case"op_array":for(Q=[],Z=0;Z<G.children[0].length;Z++)Q.push(this.compile(G.children[0][Z],_));ee="["+Q.join(", ")+"]";break;case"op_extvalue":ee=this.compile(G.children[0],_)+"["+this.compile(G.children[1],_)+"]";break;case"op_return":ee=" return "+this.compile(G.children[0],_)+`;
`;break;case"op_map":G.children[1].isMath||G.children[1].type==="node_var"||this._error("compile: In a map only function calls and mathematical expressions are allowed."),Q=G.children[0],ee=_?" $jc$.makeMap(function ("+Q.join(", ")+") { return "+this.compile(G.children[1],_)+"; })":"map ("+Q.join(", ")+") -> "+this.compile(G.children[1],_);break;case"op_function":Q=G.children[0],this.pushScope(Q),ee=_?this.functionCodeJS(G):" function ("+Q.join(", ")+") "+this.compile(G.children[1],_),this.popScope();break;case"op_execfunmath":console.log("op_execfunmath: TODO"),ee="-1";break;case"op_execfun":if(G.children[2]){for(Q=[],Z=0;Z<G.children[2].length;Z++)Q.push(this.compile(G.children[2][Z],_));J=_?"$jc$.mergeAttributes("+Q.join(", ")+")":Q.join(", ")}for(G.children[0].withProps=!!G.children[2],Q=[],Z=0;Z<G.children[1].length;Z++)Q.push(this.compile(G.children[1][Z],_));ee=this.compile(G.children[0],_)+"("+Q.join(", ")+(G.children[2]&&_?", "+J:"")+")"+(G.children[2]&&!_?" "+J:""),_&&(ee+=`
`),_&&G.children[0].value==="$"&&(ee="$jc$.board.objects["+this.compile(G.children[1][0],_)+"]");break;case"op_property":ee=_&&G.children[1]!=="X"&&G.children[1]!=="Y"?"$jc$.resolveProperty("+this.compile(G.children[0],_)+", '"+G.children[1]+"', true)":this.compile(G.children[0],_)+"."+G.children[1];break;case"op_use":this._warn("Use of the 'use' operator is deprecated."),ee=_?"$jc$.use('":"use('",ee+=G.children[0].toString()+"');";break;case"op_delete":this._warn("Use of the 'delete' operator is deprecated. Please use the remove() function."),ee=_?"$jc$.del(":"remove(",ee+=this.compile(G.children[0],_)+")";break;case"op_eq":ee="("+this.compile(G.children[0],_)+" === "+this.compile(G.children[1],_)+")";break;case"op_neq":ee="("+this.compile(G.children[0],_)+" !== "+this.compile(G.children[1],_)+")";break;case"op_approx":ee="("+this.compile(G.children[0],_)+" ~= "+this.compile(G.children[1],_)+")";break;case"op_gt":ee=_?"$jc$.gt("+this.compile(G.children[0],_)+", "+this.compile(G.children[1],_)+")":"("+this.compile(G.children[0],_)+" > "+this.compile(G.children[1],_)+")";break;case"op_lt":ee=_?"$jc$.lt("+this.compile(G.children[0],_)+", "+this.compile(G.children[1],_)+")":"("+this.compile(G.children[0],_)+" < "+this.compile(G.children[1],_)+")";break;case"op_geq":ee=_?"$jc$.geq("+this.compile(G.children[0],_)+", "+this.compile(G.children[1],_)+")":"("+this.compile(G.children[0],_)+" >= "+this.compile(G.children[1],_)+")";break;case"op_leq":ee=_?"$jc$.leq("+this.compile(G.children[0],_)+", "+this.compile(G.children[1],_)+")":"("+this.compile(G.children[0],_)+" <= "+this.compile(G.children[1],_)+")";break;case"op_or":ee="("+this.compile(G.children[0],_)+" || "+this.compile(G.children[1],_)+")";break;case"op_and":ee="("+this.compile(G.children[0],_)+" && "+this.compile(G.children[1],_)+")";break;case"op_not":ee="!("+this.compile(G.children[0],_)+")";break;case"op_add":ee=_?"$jc$.add("+this.compile(G.children[0],_)+", "+this.compile(G.children[1],_)+")":"("+this.compile(G.children[0],_)+" + "+this.compile(G.children[1],_)+")";break;case"op_sub":ee=_?"$jc$.sub("+this.compile(G.children[0],_)+", "+this.compile(G.children[1],_)+")":"("+this.compile(G.children[0],_)+" - "+this.compile(G.children[1],_)+")";break;case"op_div":ee=_?"$jc$.div("+this.compile(G.children[0],_)+", "+this.compile(G.children[1],_)+")":"("+this.compile(G.children[0],_)+" / "+this.compile(G.children[1],_)+")";break;case"op_mod":ee=_?"$jc$.mod("+this.compile(G.children[0],_)+", "+this.compile(G.children[1],_)+", true)":"("+this.compile(G.children[0],_)+" % "+this.compile(G.children[1],_)+")";break;case"op_mul":ee=_?"$jc$.mul("+this.compile(G.children[0],_)+", "+this.compile(G.children[1],_)+")":"("+this.compile(G.children[0],_)+" * "+this.compile(G.children[1],_)+")";break;case"op_exp":ee=_?"$jc$.pow("+this.compile(G.children[0],_)+", "+this.compile(G.children[1],_)+")":"("+this.compile(G.children[0],_)+"^"+this.compile(G.children[1],_)+")";break;case"op_neg":ee=_?"$jc$.neg("+this.compile(G.children[0],_)+")":"(-"+this.compile(G.children[0],_)+")"}break;case"node_var":ee=_?this.getvarJS(G.value,!1,G.withProps):G.value;break;case"node_const":case"node_const_bool":ee=G.value;break;case"node_str":ee="'"+G.value+"'"}return G.needsAngleBrackets&&(ee=_?`{
`+ee+` }
`:"<< "+ee+` >>
`),ee},getName:function(G,_){var J="";return _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.getName)?(J=G.getName(),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(J)&&J!==""||!_||(J=G.id)):_&&(J=G.id),J},X:function(G){return G.X()},Y:function(G){return G.Y()},V:function(G){return G.Value()},L:function(G){return G.L()},area:function(G){return _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.Area)||this._error("Error: Can't calculate area."),G.Area()},perimeter:function(G){return _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.Perimeter)||this._error("Error: Can't calculate perimeter."),G.Perimeter()},dist:function(G,_){return _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.Dist)||this._error("Error: Can't calculate distance."),G.Dist(_)},radius:function(G){return _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.Radius)||this._error("Error: Can't calculate radius."),G.Radius()},slope:function(G){return _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.Slope)||this._error("Error: Can't calculate slope."),G.Slope()},add:function(G,_){var J,Z,Q;if(G=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(G),_=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(_),_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(G)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(_))Q=_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.add(G,_);else if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(_))for(Z=Math.min(G.length,_.length),Q=[],J=0;J<Z;J++)Q[J]=G[J]+_[J];else _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(_)?Q=G+_:_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isString(G)||_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isString(_)?Q=G.toString()+_.toString():this._error("Operation + not defined on operands "+typeof G+" and "+typeof _);return Q},sub:function(G,_){var J,Z,Q;if(G=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(G),_=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(_),_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(G)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(_))Q=_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.sub(G,_);else if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(_))for(Z=Math.min(G.length,_.length),Q=[],J=0;J<Z;J++)Q[J]=G[J]-_[J];else _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(_)?Q=G-_:this._error("Operation - not defined on operands "+typeof G+" and "+typeof _);return Q},neg:function(G){var _,J,Z;if(G=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(G),_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(G))Z=_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.negative(G);else if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(G))for(J=G.length,Z=[],_=0;_<J;_++)Z[_]=-G[_];else _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(G)?Z=-G:this._error("Unary operation - not defined on operand "+typeof G);return Z},mul:function(G,_){var J,Z,Q;if(G=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(G),_=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(_),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(_)&&(J=G,_=G=_),_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(G)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(_))Q=_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.mul(G,_);else if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(_))Z=Math.min(G.length,_.length),Q=_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.innerProduct(G,_,Z);else if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(_))for(Z=_.length,Q=[],J=0;J<Z;J++)Q[J]=G*_[J];else _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(_)?Q=G*_:this._error("Operation * not defined on operands "+typeof G+" and "+typeof _);return Q},div:function(G,_){var J,Z,Q;if(G=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(G),_=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(_),_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(G)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(_))Q=_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.div(G,_);else if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(_))for(Z=G.length,Q=[],J=0;J<Z;J++)Q[J]=G[J]/_;else _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(_)?Q=G/_:this._error("Operation * not defined on operands "+typeof G+" and "+typeof _);return Q},mod:function(G,_){var J,Z,Q;if(G=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(G),_=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(_),_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(G)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(_))return _math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.fmod(G,_);if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(_))for(Z=G.length,Q=[],J=0;J<Z;J++)Q[J]=_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.mod(G[J],_,!0);else _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(_)?Q=_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.mod(G,_,!0):this._error("Operation * not defined on operands "+typeof G+" and "+typeof _);return Q},pow:function(G,_){return G=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(G),_=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(_),_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(G)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(_)?_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.pow(G,_):_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.pow(G,_)},lt:function(G,_){return _math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(G)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(_)?_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.lt(G,_):G<_},leq:function(G,_){return _math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(G)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(_)?_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.leq(G,_):G<=_},gt:function(G,_){return _math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(G)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(_)?_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.gt(G,_):G>_},geq:function(G,_){return _math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(G)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(_)?_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.geq(G,_):G>=_},randint:function(G,_,J){return _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(J)||(J=1),Math.round(Math.random()*(_-G)/J)*J+G},DDD:function(G){console.log("Dummy derivative function. This should never appear!")},ifthen:function(G,_,J){return G?_:J},del:function(G){typeof G=="object"&&_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.exists(G.type)&&_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.exists(G.elementClass)&&this.board.removeObject(G)},eval:function(G){return _jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.evaluate(G)},use:function(G){var _,J,Z=!1;if(typeof G=="string"){for(_ in _jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.boards)if(_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.boards.hasOwnProperty(_)&&_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.boards[_].container===G){J=_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.boards[_],Z=!0;break}}else J=G,Z=!0;Z?(this.board=J,this.builtIn.$board=J,this.builtIn.$board.src="$jc$.board"):this._error("Board '"+G+"' not found!")},findSymbol:function(G,_){var J,Z;for(Z=(_=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.def(_,-1))===-1?this.scope:this.scopes[_];Z!==null;){for(J in Z.locals)if(Z.locals.hasOwnProperty(J)&&Z.locals[J]===G)return[J,Z];Z=Z.previous}return[]},importModule:function(G){return priv.modules[G.toLowerCase()]},defineBuiltIn:function(){var G=this,_={PI:Math.PI,EULER:Math.E,D:G.DDD,X:G.X,Y:G.Y,V:G.V,Value:G.V,L:G.L,Length:G.L,acosh:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.acosh,acot:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.acot,asinh:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.asinh,binomial:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.binomial,cbrt:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.cbrt,cosh:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.cosh,cot:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.cot,deg:_math_geometry_js__WEBPACK_IMPORTED_MODULE_5__.A.trueAngle,A:G.area,area:G.area,Area:G.area,perimeter:G.perimeter,Perimeter:G.perimeter,dist:G.dist,Dist:G.dist,R:G.radius,radius:G.radius,Radius:G.radius,erf:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.erf,erfc:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.erfc,erfi:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.erfi,factorial:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.factorial,gcd:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.gcd,lb:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.log2,lcm:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.lcm,ld:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.log2,lg:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.log10,ln:Math.log,log:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.log,log10:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.log10,log2:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.log2,ndtr:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.ndtr,ndtri:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.ndtri,nthroot:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.nthroot,pow:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.pow,rad:_math_geometry_js__WEBPACK_IMPORTED_MODULE_5__.A.rad,ratpow:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.ratpow,trunc:_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.trunc,sinh:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.sinh,slope:G.slope,Slope:G.slope,randint:G.randint,IfThen:G.ifthen,import:G.importModule,eval:G.eval,use:G.use,remove:G.del,$:G.getElementById,$value:function(J){return G.getElementById(J).Value()},getName:G.getName,name:G.getName,$board:G.board,$log:G.log};return _.rad.sc=_math_geometry_js__WEBPACK_IMPORTED_MODULE_5__.A,_.deg.sc=_math_geometry_js__WEBPACK_IMPORTED_MODULE_5__.A,_.factorial.sc=_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A,_.X.src="$jc$.X",_.Y.src="$jc$.Y",_.V.src="$jc$.V",_.Value.src="$jc$.V",_.L.src="$jc$.L",_.Length.src="$jc$.L",_.acosh.src="JXG.Math.acosh",_.acot.src="JXG.Math.acot",_.asinh.src="JXG.Math.asinh",_.binomial.src="JXG.Math.binomial",_.cbrt.src="JXG.Math.cbrt",_.cot.src="JXG.Math.cot",_.cosh.src="JXG.Math.cosh",_.deg.src="JXG.Math.Geometry.trueAngle",_.erf.src="JXG.Math.erf",_.erfc.src="JXG.Math.erfc",_.erfi.src="JXG.Math.erfi",_.A.src="$jc$.area",_.area.src="$jc$.area",_.Area.src="$jc$.area",_.perimeter.src="$jc$.perimeter",_.Perimeter.src="$jc$.perimeter",_.dist.src="$jc$.dist",_.Dist.src="$jc$.dist",_.R.src="$jc$.radius",_.radius.src="$jc$.radius",_.Radius.src="$jc$.radius",_.factorial.src="JXG.Math.factorial",_.gcd.src="JXG.Math.gcd",_.lb.src="JXG.Math.log2",_.lcm.src="JXG.Math.lcm",_.ld.src="JXG.Math.log2",_.lg.src="JXG.Math.log10",_.ln.src="Math.log",_.log.src="JXG.Math.log",_.log10.src="JXG.Math.log10",_.log2.src="JXG.Math.log2",_.ndtr.src="JXG.Math.ndtr",_.ndtri.src="JXG.Math.ndtri",_.nthroot.src="JXG.Math.nthroot",_.pow.src="JXG.Math.pow",_.rad.src="JXG.Math.Geometry.rad",_.ratpow.src="JXG.Math.ratpow",_.trunc.src="JXG.trunc",_.sinh.src="JXG.Math.sinh",_.slope.src="$jc$.slope",_.Slope.src="$jc$.slope",_.randint.src="$jc$.randint",_.import.src="$jc$.importModule",_.eval.src="$jc$.eval",_.use.src="$jc$.use",_.remove.src="$jc$.del",_.IfThen.src="$jc$.ifthen",_.$.src="(function (n) { return $jc$.board.select(n); })",_.$value.src="(function (n) { return $jc$.board.select(n).Value(); })",_.getName.src="$jc$.getName",_.name.src="$jc$.getName",_.$board&&(_.$board.src="$jc$.board"),_.$log.src="$jc$.log",_=_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.merge(_,G._addedBuiltIn)},_addedBuiltIn:{},addBuiltIn:function(G,_){if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(this.builtIn)){if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(this.builtIn[G]))return;this.builtIn[G]=_,this.builtIn[G].src="$jc$."+G}_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(this._addedBuiltIn[G])||(this._addedBuiltIn[G]=_,this._addedBuiltIn[G].src="$jc$."+G,_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.JessieCode.prototype[G]=_)},getPossibleOperands:function(){var G,_,J,Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue=["E"],de=this.builtIn||this.defineBuiltIn(),me=Math;for(ae=function(fe,_e){return fe.toLowerCase().localeCompare(_e.toLowerCase())},ce=function(fe,_e){var ye=null;if(_e==="jc")ye=de[fe];else{if(_e!=="Math")return;ye=me[fe]}if(!(ue.indexOf(fe)>=0))return _jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.isFunction(ye)?{name:fe,type:"function",numParams:ye.length,origin:_e}:_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.isNumber(ye)?{name:fe,type:"constant",value:ye,origin:_e}:void(fe.startsWith("$")||ye!==void 0&&console.error("undefined type",ye))},G=Object.getOwnPropertyNames(de).sort(ae),_=Object.getOwnPropertyNames(me).sort(ae),J=[],Z=0,Q=0;Z<G.length||Q<_.length;)G[Z]===_[Q]?(ee=ce(_[Q],"Math"),_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.exists(ee)&&J.push(ee),Z++,Q++):!_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.exists(_[Q])||G[Z].toLowerCase().localeCompare(_[Q].toLowerCase())<0?(ee=ce(G[Z],"jc"),_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.exists(ee)&&J.push(ee),Z++):(ee=ce(_[Q],"Math"),_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.exists(ee)&&J.push(ee),Q++);for(ie=[],re=[],oe=[],se={},te=J.length,Z=0;Z<te;Z++){switch((ne=J[Z]).type){case"function":ie.push(ne.name),ne.origin==="jc"&&re.push(ne.name);break;case"constant":oe.push(ne.name)}se[ne.name]=ne}return{all:se,list:J,functions:ie,functions_jessiecode:re,constants:oe}},_debug:function(G){typeof console=="object"&&console.log?console.log(G):_utils_env_js__WEBPACK_IMPORTED_MODULE_8__.A.isBrowser&&document&&document.getElementById("debug")!==null&&(document.getElementById("debug").innerText+=G+`
`)},_error:function(G){var _=new Error("Error("+this.line+"): "+G);throw _.line=this.line,_},_warn:function(G){typeof console=="object"&&console.log?console.log("Warning("+this.line+"): "+G):_utils_env_js__WEBPACK_IMPORTED_MODULE_8__.A.isBrowser&&document&&document.getElementById(this.warnLog)!==null&&(document.getElementById(this.warnLog).innerText+="Warning("+this.line+"): "+G+`
`)},_log:function(G){typeof window!="object"&&typeof self=="object"&&self.postMessage?self.postMessage({type:"log",msg:"Log: "+G.toString()}):console.log("Log: ",arguments)}});var parser=(function(){var G=function(Kt,It,Yt,Rt){for(Yt=Yt||{},Rt=Kt.length;Rt--;Yt[Kt[Rt]]=It);return Yt},_=[2,14],J=[1,13],Z=[1,37],Q=[1,14],ee=[1,15],te=[1,21],ne=[1,16],ie=[1,17],re=[1,33],oe=[1,18],se=[1,19],ae=[1,12],ce=[1,59],ue=[1,60],de=[1,58],me=[1,46],fe=[1,48],_e=[1,49],ye=[1,50],be=[1,51],Se=[1,52],Ce=[1,53],Me=[1,54],Re=[1,45],Te=[1,38],Ee=[1,39],De=[5,7,8,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],Le=[5,7,8,12,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],Ue=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],Ge=[2,48],Ye=[1,72],ke=[10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,66,83,86],Fe=[1,78],Ve=[8,10,16,32,34,35,37,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],$e=[1,82],Xe=[8,10,16,32,34,35,37,39,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],ze=[1,83],qe=[1,84],et=[1,85],ot=[8,10,16,32,34,35,37,39,41,42,43,50,51,53,54,55,57,64,65,66,83,86],St=[1,89],it=[1,90],lt=[1,91],gt=[1,92],kt=[1,97],Jt=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,53,54,55,57,64,65,66,83,86],li=[1,103],si=[1,104],qt=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,57,64,65,66,83,86],vt=[1,105],Ke=[1,106],Tt=[1,107],Ut=[1,126],Lt=[1,139],jt=[83,86],ri=[1,150],ti=[10,66,86],di=[8,10,16,20,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,82,83,86],Qe=[1,167],He=[10,86],_t={trace:function(){},yy:{},symbols_:{error:2,Program:3,StatementList:4,EOF:5,IfStatement:6,IF:7,"(":8,Expression:9,")":10,Statement:11,ELSE:12,LoopStatement:13,WHILE:14,FOR:15,";":16,DO:17,UnaryStatement:18,USE:19,IDENTIFIER:20,DELETE:21,ReturnStatement:22,RETURN:23,EmptyStatement:24,StatementBlock:25,"{":26,"}":27,ExpressionStatement:28,AssignmentExpression:29,ConditionalExpression:30,LeftHandSideExpression:31,"=":32,LogicalORExpression:33,"?":34,":":35,LogicalANDExpression:36,"||":37,EqualityExpression:38,"&&":39,RelationalExpression:40,"==":41,"!=":42,"~=":43,AdditiveExpression:44,"<":45,">":46,"<=":47,">=":48,MultiplicativeExpression:49,"+":50,"-":51,UnaryExpression:52,"*":53,"/":54,"%":55,ExponentExpression:56,"^":57,"!":58,MemberExpression:59,CallExpression:60,PrimaryExpression:61,FunctionExpression:62,MapExpression:63,".":64,"[":65,"]":66,BasicLiteral:67,ObjectLiteral:68,ArrayLiteral:69,NullLiteral:70,BooleanLiteral:71,StringLiteral:72,NumberLiteral:73,NULL:74,TRUE:75,FALSE:76,STRING:77,NUMBER:78,NAN:79,INFINITY:80,ElementList:81,"<<":82,">>":83,PropertyList:84,Property:85,",":86,PropertyName:87,Arguments:88,AttributeList:89,Attribute:90,FUNCTION:91,ParameterDefinitionList:92,MAP:93,"->":94,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",7:"IF",8:"(",10:")",12:"ELSE",14:"WHILE",15:"FOR",16:";",17:"DO",19:"USE",20:"IDENTIFIER",21:"DELETE",23:"RETURN",26:"{",27:"}",32:"=",34:"?",35:":",37:"||",39:"&&",41:"==",42:"!=",43:"~=",45:"<",46:">",47:"<=",48:">=",50:"+",51:"-",53:"*",54:"/",55:"%",57:"^",58:"!",64:".",65:"[",66:"]",74:"NULL",75:"TRUE",76:"FALSE",77:"STRING",78:"NUMBER",79:"NAN",80:"INFINITY",82:"<<",83:">>",86:",",91:"FUNCTION",93:"MAP",94:"->"},productions_:[0,[3,2],[6,5],[6,7],[13,5],[13,9],[13,7],[18,2],[18,2],[22,2],[22,3],[24,1],[25,3],[4,2],[4,0],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[28,2],[9,1],[29,1],[29,3],[30,1],[30,5],[33,1],[33,3],[36,1],[36,3],[38,1],[38,3],[38,3],[38,3],[40,1],[40,3],[40,3],[40,3],[40,3],[44,1],[44,3],[44,3],[49,1],[49,3],[49,3],[49,3],[56,1],[56,3],[52,1],[52,2],[52,2],[52,2],[31,1],[31,1],[59,1],[59,1],[59,1],[59,3],[59,4],[61,1],[61,1],[61,1],[61,1],[61,3],[67,1],[67,1],[67,1],[67,1],[70,1],[71,1],[71,1],[72,1],[73,1],[73,1],[73,1],[69,2],[69,3],[68,2],[68,3],[84,1],[84,3],[85,3],[87,1],[87,1],[87,1],[60,2],[60,3],[60,2],[60,4],[60,3],[88,2],[88,3],[89,1],[89,3],[90,1],[90,1],[81,1],[81,3],[62,4],[62,5],[63,5],[63,6],[92,1],[92,3]],performAction:function(Kt,It,Yt,Rt,Pt,mt,tt){var Ze=mt.length-1;switch(Pt){case 1:return mt[Ze-1];case 2:this.$=dt.createNode(At(tt[Ze-4]),"node_op","op_if",mt[Ze-2],mt[Ze]);break;case 3:this.$=dt.createNode(At(tt[Ze-6]),"node_op","op_if_else",mt[Ze-4],mt[Ze-2],mt[Ze]);break;case 4:this.$=dt.createNode(At(tt[Ze-4]),"node_op","op_while",mt[Ze-2],mt[Ze]);break;case 5:this.$=dt.createNode(At(tt[Ze-8]),"node_op","op_for",mt[Ze-6],mt[Ze-4],mt[Ze-2],mt[Ze]);break;case 6:this.$=dt.createNode(At(tt[Ze-6]),"node_op","op_do",mt[Ze-5],mt[Ze-2]);break;case 7:this.$=dt.createNode(At(tt[Ze-1]),"node_op","op_use",mt[Ze]);break;case 8:this.$=dt.createNode(At(tt[Ze-1]),"node_op","op_delete",mt[Ze]);break;case 9:this.$=dt.createNode(At(tt[Ze-1]),"node_op","op_return",void 0);break;case 10:this.$=dt.createNode(At(tt[Ze-2]),"node_op","op_return",mt[Ze-1]);break;case 11:case 14:this.$=dt.createNode(At(tt[Ze]),"node_op","op_none");break;case 12:this.$=dt.createNode(At(tt[Ze-2]),"node_op","op_block",mt[Ze-1]);break;case 13:this.$=dt.createNode(At(tt[Ze-1]),"node_op","op_none",mt[Ze-1],mt[Ze]);break;case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 23:case 24:case 26:case 28:case 30:case 32:case 36:case 41:case 44:case 48:case 50:case 52:case 54:case 55:case 56:case 58:case 62:case 81:case 84:case 85:case 86:this.$=mt[Ze];break;case 22:case 65:case 93:this.$=mt[Ze-1];break;case 25:this.$=dt.createNode(At(tt[Ze-2]),"node_op","op_assign",mt[Ze-2],mt[Ze]),this.$.isMath=!1;break;case 27:this.$=dt.createNode(At(tt[Ze-4]),"node_op","op_conditional",mt[Ze-4],mt[Ze-2],mt[Ze]),this.$.isMath=!1;break;case 29:this.$=dt.createNode(At(tt[Ze-2]),"node_op","op_or",mt[Ze-2],mt[Ze]),this.$.isMath=!1;break;case 31:this.$=dt.createNode(At(tt[Ze-2]),"node_op","op_and",mt[Ze-2],mt[Ze]),this.$.isMath=!1;break;case 33:this.$=dt.createNode(At(tt[Ze-2]),"node_op","op_eq",mt[Ze-2],mt[Ze]),this.$.isMath=!1;break;case 34:this.$=dt.createNode(At(tt[Ze-2]),"node_op","op_neq",mt[Ze-2],mt[Ze]),this.$.isMath=!1;break;case 35:this.$=dt.createNode(At(tt[Ze-2]),"node_op","op_approx",mt[Ze-2],mt[Ze]),this.$.isMath=!1;break;case 37:this.$=dt.createNode(At(tt[Ze-2]),"node_op","op_lt",mt[Ze-2],mt[Ze]),this.$.isMath=!1;break;case 38:this.$=dt.createNode(At(tt[Ze-2]),"node_op","op_gt",mt[Ze-2],mt[Ze]),this.$.isMath=!1;break;case 39:this.$=dt.createNode(At(tt[Ze-2]),"node_op","op_leq",mt[Ze-2],mt[Ze]),this.$.isMath=!1;break;case 40:this.$=dt.createNode(At(tt[Ze-2]),"node_op","op_geq",mt[Ze-2],mt[Ze]),this.$.isMath=!1;break;case 42:this.$=dt.createNode(At(tt[Ze-2]),"node_op","op_add",mt[Ze-2],mt[Ze]),this.$.isMath=!0;break;case 43:this.$=dt.createNode(At(tt[Ze-2]),"node_op","op_sub",mt[Ze-2],mt[Ze]),this.$.isMath=!0;break;case 45:this.$=dt.createNode(At(tt[Ze-2]),"node_op","op_mul",mt[Ze-2],mt[Ze]),this.$.isMath=!0;break;case 46:this.$=dt.createNode(At(tt[Ze-2]),"node_op","op_div",mt[Ze-2],mt[Ze]),this.$.isMath=!0;break;case 47:this.$=dt.createNode(At(tt[Ze-2]),"node_op","op_mod",mt[Ze-2],mt[Ze]),this.$.isMath=!0;break;case 49:this.$=dt.createNode(At(tt[Ze-2]),"node_op","op_exp",mt[Ze-2],mt[Ze]),this.$.isMath=!0;break;case 51:this.$=dt.createNode(At(tt[Ze-1]),"node_op","op_not",mt[Ze]),this.$.isMath=!1;break;case 53:this.$=dt.createNode(At(tt[Ze-1]),"node_op","op_neg",mt[Ze]),this.$.isMath=!0;break;case 57:case 63:case 64:case 66:case 67:case 68:case 97:this.$=mt[Ze],this.$.isMath=!1;break;case 59:case 91:this.$=dt.createNode(At(tt[Ze-2]),"node_op","op_property",mt[Ze-2],mt[Ze]),this.$.isMath=!0;break;case 60:case 90:this.$=dt.createNode(At(tt[Ze-3]),"node_op","op_extvalue",mt[Ze-3],mt[Ze-1]),this.$.isMath=!0;break;case 61:this.$=dt.createNode(At(tt[Ze]),"node_var",mt[Ze]);break;case 69:this.$=mt[Ze],this.$.isMath=!0;break;case 70:this.$=dt.createNode(At(tt[Ze]),"node_const",null);break;case 71:this.$=dt.createNode(At(tt[Ze]),"node_const_bool",!0);break;case 72:this.$=dt.createNode(At(tt[Ze]),"node_const_bool",!1);break;case 73:this.$=dt.createNode(At(tt[Ze]),"node_str",mt[Ze].substring(1,mt[Ze].length-1));break;case 74:this.$=dt.createNode(At(tt[Ze]),"node_const",parseFloat(mt[Ze]));break;case 75:this.$=dt.createNode(At(tt[Ze]),"node_const",NaN);break;case 76:this.$=dt.createNode(At(tt[Ze]),"node_const",1/0);break;case 77:this.$=dt.createNode(At(tt[Ze-1]),"node_op","op_array",[]);break;case 78:this.$=dt.createNode(At(tt[Ze-2]),"node_op","op_array",mt[Ze-1]);break;case 79:this.$=dt.createNode(At(tt[Ze-1]),"node_op","op_emptyobject",{}),this.$.needsAngleBrackets=!0;break;case 80:this.$=dt.createNode(At(tt[Ze-2]),"node_op","op_proplst_val",mt[Ze-1]),this.$.needsAngleBrackets=!0;break;case 82:this.$=dt.createNode(At(tt[Ze-2]),"node_op","op_proplst",mt[Ze-2],mt[Ze]);break;case 83:this.$=dt.createNode(At(tt[Ze-2]),"node_op","op_prop",mt[Ze-2],mt[Ze]);break;case 87:case 89:this.$=dt.createNode(At(tt[Ze-1]),"node_op","op_execfun",mt[Ze-1],mt[Ze]),this.$.isMath=!0;break;case 88:this.$=dt.createNode(At(tt[Ze-2]),"node_op","op_execfun",mt[Ze-2],mt[Ze-1],mt[Ze],!0),this.$.isMath=!1;break;case 92:this.$=[];break;case 94:case 98:case 104:this.$=[mt[Ze]];break;case 95:case 99:case 105:this.$=mt[Ze-2].concat(mt[Ze]);break;case 96:this.$=dt.createNode(At(tt[Ze]),"node_var",mt[Ze]),this.$.isMath=!0;break;case 100:this.$=dt.createNode(At(tt[Ze-3]),"node_op","op_function",[],mt[Ze]),this.$.isMath=!1;break;case 101:this.$=dt.createNode(At(tt[Ze-4]),"node_op","op_function",mt[Ze-2],mt[Ze]),this.$.isMath=!1;break;case 102:this.$=dt.createNode(At(tt[Ze-4]),"node_op","op_map",[],mt[Ze]);break;case 103:this.$=dt.createNode(At(tt[Ze-5]),"node_op","op_map",mt[Ze-3],mt[Ze])}},table:[G([5,7,8,14,15,16,17,19,20,21,23,26,50,51,58,65,74,75,76,77,78,79,80,82,91,93],_,{3:1,4:2}),{1:[3]},{5:[1,3],6:6,7:J,8:Z,9:20,11:4,13:7,14:Q,15:ee,16:te,17:ne,18:8,19:ie,20:re,21:oe,22:9,23:se,24:11,25:5,26:ae,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{1:[2,1]},G(De,[2,13]),G(Le,[2,15]),G(Le,[2,16]),G(Le,[2,17]),G(Le,[2,18]),G(Le,[2,19]),G(Le,[2,20]),G(Le,[2,21]),G([7,8,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],_,{4:61}),{8:[1,62]},{8:[1,63]},{8:[1,64]},{6:6,7:J,8:Z,9:20,11:65,13:7,14:Q,15:ee,16:te,17:ne,18:8,19:ie,20:re,21:oe,22:9,23:se,24:11,25:5,26:ae,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{20:[1,66]},{20:[1,67]},{8:Z,9:69,16:[1,68],20:re,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{16:[1,70]},G(Le,[2,11]),G(Ue,[2,23]),G(Ue,[2,24]),G([8,10,16,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,64,65,66,83,86],Ge,{32:[1,71],57:Ye}),G([8,10,16,32,35,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],[2,26],{34:[1,73],37:[1,74]}),G(ke,[2,54],{88:77,8:Fe,64:[1,75],65:[1,76]}),G(ke,[2,55],{88:79,8:Fe,64:[1,81],65:[1,80]}),G(Ve,[2,28],{39:$e}),G(Ue,[2,56]),G(Ue,[2,57]),G(Ue,[2,58]),G(Xe,[2,30],{41:ze,42:qe,43:et}),G(Ue,[2,61]),G(Ue,[2,62]),G(Ue,[2,63]),G(Ue,[2,64]),{8:Z,9:86,20:re,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{8:[1,87]},{8:[1,88]},G(ot,[2,32],{45:St,46:it,47:lt,48:gt}),G(Ue,[2,66]),G(Ue,[2,67]),G(Ue,[2,68]),G(Ue,[2,69]),{20:kt,72:98,73:99,77:be,78:Se,79:Ce,80:Me,83:[1,93],84:94,85:95,87:96},{8:Z,20:re,29:102,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,66:[1,100],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,81:101,82:Re,91:Te,93:Ee},G(Jt,[2,36],{50:li,51:si}),G(Ue,[2,70]),G(Ue,[2,71]),G(Ue,[2,72]),G(Ue,[2,73]),G(Ue,[2,74]),G(Ue,[2,75]),G(Ue,[2,76]),G(qt,[2,41],{53:vt,54:Ke,55:Tt}),G(Ue,[2,44]),G(Ue,[2,50]),{8:Z,20:re,31:109,50:ce,51:ue,52:108,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{8:Z,20:re,31:109,50:ce,51:ue,52:110,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{8:Z,20:re,31:109,50:ce,51:ue,52:111,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{6:6,7:J,8:Z,9:20,11:4,13:7,14:Q,15:ee,16:te,17:ne,18:8,19:ie,20:re,21:oe,22:9,23:se,24:11,25:5,26:ae,27:[1,112],28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{8:Z,9:113,20:re,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{8:Z,9:114,20:re,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{8:Z,9:115,20:re,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{14:[1,116]},G(Le,[2,7]),G(Le,[2,8]),G(Le,[2,9]),{16:[1,117]},G(Le,[2,22]),{8:Z,20:re,29:118,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{8:Z,20:re,31:109,50:ce,51:ue,52:119,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{8:Z,20:re,29:120,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{8:Z,20:re,31:109,36:121,38:32,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{20:[1,122]},{8:Z,9:123,20:re,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},G(Ue,[2,87],{89:124,90:125,68:127,20:Ut,82:Re}),{8:Z,10:[1,128],20:re,29:102,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,81:129,82:Re,91:Te,93:Ee},G(Ue,[2,89]),{8:Z,9:130,20:re,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{20:[1,131]},{8:Z,20:re,31:109,38:132,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{8:Z,20:re,31:109,40:133,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{8:Z,20:re,31:109,40:134,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{8:Z,20:re,31:109,40:135,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{10:[1,136]},{10:[1,137],20:Lt,92:138},{10:[1,140],20:Lt,92:141},{8:Z,20:re,31:109,44:142,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{8:Z,20:re,31:109,44:143,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{8:Z,20:re,31:109,44:144,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{8:Z,20:re,31:109,44:145,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},G(Ue,[2,79]),{83:[1,146],86:[1,147]},G(jt,[2,81]),{35:[1,148]},{35:[2,84]},{35:[2,85]},{35:[2,86]},G(Ue,[2,77]),{66:[1,149],86:ri},G(ti,[2,98]),{8:Z,20:re,31:109,49:151,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{8:Z,20:re,31:109,49:152,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{8:Z,20:re,31:109,50:ce,51:ue,52:153,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{8:Z,20:re,31:109,50:ce,51:ue,52:154,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{8:Z,20:re,31:109,50:ce,51:ue,52:155,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},G(Ue,[2,51]),G([8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,64,65,66,83,86],Ge,{57:Ye}),G(Ue,[2,52]),G(Ue,[2,53]),G([5,7,8,10,12,14,15,16,17,19,20,21,23,26,27,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,58,64,65,66,74,75,76,77,78,79,80,82,83,86,91,93],[2,12]),{10:[1,156]},{10:[1,157]},{16:[1,158]},{8:[1,159]},G(Le,[2,10]),G(Ue,[2,25]),G(Ue,[2,49]),{35:[1,160]},G(Ve,[2,29],{39:$e}),G(Ue,[2,59]),{66:[1,161]},G([8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83],[2,88],{86:[1,162]}),G(Ue,[2,94]),G(Ue,[2,96]),G(Ue,[2,97]),G(di,[2,92]),{10:[1,163],86:ri},{66:[1,164]},G(Ue,[2,91]),G(Xe,[2,31],{41:ze,42:qe,43:et}),G(ot,[2,33],{45:St,46:it,47:lt,48:gt}),G(ot,[2,34],{45:St,46:it,47:lt,48:gt}),G(ot,[2,35],{45:St,46:it,47:lt,48:gt}),G(Ue,[2,65]),{25:165,26:ae},{10:[1,166],86:Qe},G(He,[2,104]),{94:[1,168]},{10:[1,169],86:Qe},G(Jt,[2,37],{50:li,51:si}),G(Jt,[2,38],{50:li,51:si}),G(Jt,[2,39],{50:li,51:si}),G(Jt,[2,40],{50:li,51:si}),G(Ue,[2,80]),{20:kt,72:98,73:99,77:be,78:Se,79:Ce,80:Me,85:170,87:96},{8:Z,20:re,29:171,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},G(Ue,[2,78]),{8:Z,20:re,29:172,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},G(qt,[2,42],{53:vt,54:Ke,55:Tt}),G(qt,[2,43],{53:vt,54:Ke,55:Tt}),G(Ue,[2,45]),G(Ue,[2,46]),G(Ue,[2,47]),{6:6,7:J,8:Z,9:20,11:173,13:7,14:Q,15:ee,16:te,17:ne,18:8,19:ie,20:re,21:oe,22:9,23:se,24:11,25:5,26:ae,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{6:6,7:J,8:Z,9:20,11:174,13:7,14:Q,15:ee,16:te,17:ne,18:8,19:ie,20:re,21:oe,22:9,23:se,24:11,25:5,26:ae,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{8:Z,9:175,20:re,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{8:Z,9:176,20:re,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{8:Z,20:re,29:177,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},G(Ue,[2,60]),{20:Ut,68:127,82:Re,90:178},G(di,[2,93]),G(Ue,[2,90]),G(Ue,[2,100]),{25:179,26:ae},{20:[1,180]},{8:Z,9:181,20:re,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{94:[1,182]},G(jt,[2,82]),G(jt,[2,83]),G(ti,[2,99]),G(De,[2,2],{12:[1,183]}),G(Le,[2,4]),{16:[1,184]},{10:[1,185]},G(Ue,[2,27]),G(Ue,[2,95]),G(Ue,[2,101]),G(He,[2,105]),G(Ue,[2,102]),{8:Z,9:186,20:re,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{6:6,7:J,8:Z,9:20,11:187,13:7,14:Q,15:ee,16:te,17:ne,18:8,19:ie,20:re,21:oe,22:9,23:se,24:11,25:5,26:ae,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{8:Z,9:188,20:re,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},{16:[1,189]},G(Ue,[2,103]),G(Le,[2,3]),{10:[1,190]},G(Le,[2,6]),{6:6,7:J,8:Z,9:20,11:191,13:7,14:Q,15:ee,16:te,17:ne,18:8,19:ie,20:re,21:oe,22:9,23:se,24:11,25:5,26:ae,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:ce,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:me,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Se,79:Ce,80:Me,82:Re,91:Te,93:Ee},G(Le,[2,5])],defaultActions:{3:[2,1],97:[2,84],98:[2,85],99:[2,86]},parseError:function(Kt,It){if(!It.recoverable){var Yt=new Error(Kt);throw Yt.hash=It,Yt}this.trace(Kt)},parse:function(Kt){var It=this,Yt=[0],Rt=[null],Pt=[],mt=this.table,tt="",Ze=0,Zt=0,rt=0,Qt=Pt.slice.call(arguments,1),zt=Object.create(this.lexer),ei={yy:{}};for(var Wt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Wt)&&(ei.yy[Wt]=this.yy[Wt]);zt.setInput(Kt,ei.yy),ei.yy.lexer=zt,ei.yy.parser=this,zt.yylloc===void 0&&(zt.yylloc={});var Ft=zt.yylloc;Pt.push(Ft);var hi=zt.options&&zt.options.ranges;typeof ei.yy.parseError=="function"?this.parseError=ei.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var pi,Di,Si,Ii,vn,Tr,Ln,wr,_n,Ur=function(){var En;return typeof(En=zt.lex()||1)!="number"&&(En=It.symbols_[En]||En),En},Bn={};;){if(Si=Yt[Yt.length-1],this.defaultActions[Si]?Ii=this.defaultActions[Si]:(pi==null&&(pi=Ur()),Ii=mt[Si]&&mt[Si][pi]),Ii===void 0||!Ii.length||!Ii[0]){var $n="";for(Tr in _n=[],mt[Si])this.terminals_[Tr]&&Tr>2&&_n.push("'"+this.terminals_[Tr]+"'");$n=zt.showPosition?"Parse error on line "+(Ze+1)+`:
`+zt.showPosition()+`
Expecting `+_n.join(", ")+", got '"+(this.terminals_[pi]||pi)+"'":"Parse error on line "+(Ze+1)+": Unexpected "+(pi==1?"end of input":"'"+(this.terminals_[pi]||pi)+"'"),this.parseError($n,{text:zt.match,token:this.terminals_[pi]||pi,line:zt.yylineno,loc:Ft,expected:_n})}if(Ii[0]instanceof Array&&Ii.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Si+", token: "+pi);switch(Ii[0]){case 1:Yt.push(pi),Rt.push(zt.yytext),Pt.push(zt.yylloc),Yt.push(Ii[1]),pi=null,Di?(pi=Di,Di=null):(Zt=zt.yyleng,tt=zt.yytext,Ze=zt.yylineno,Ft=zt.yylloc,rt>0);break;case 2:if(Ln=this.productions_[Ii[1]][1],Bn.$=Rt[Rt.length-Ln],Bn._$={first_line:Pt[Pt.length-(Ln||1)].first_line,last_line:Pt[Pt.length-1].last_line,first_column:Pt[Pt.length-(Ln||1)].first_column,last_column:Pt[Pt.length-1].last_column},hi&&(Bn._$.range=[Pt[Pt.length-(Ln||1)].range[0],Pt[Pt.length-1].range[1]]),(vn=this.performAction.apply(Bn,[tt,Zt,Ze,ei.yy,Ii[1],Rt,Pt].concat(Qt)))!==void 0)return vn;Ln&&(Yt=Yt.slice(0,-1*Ln*2),Rt=Rt.slice(0,-1*Ln),Pt=Pt.slice(0,-1*Ln)),Yt.push(this.productions_[Ii[1]][0]),Rt.push(Bn.$),Pt.push(Bn._$),wr=mt[Yt[Yt.length-2]][Yt[Yt.length-1]],Yt.push(wr);break;case 3:return!0}}return!0}},dt={node:function(Kt,It,Yt){return{type:Kt,value:It,children:Yt}},createNode:function(Kt,It,Yt,Rt){var Pt,mt=this.node(It,Yt,[]);for(Pt=3;Pt<arguments.length;Pt++)mt.children.push(arguments[Pt]);return mt.line=Kt[0],mt.col=Kt[1],mt.eline=Kt[2],mt.ecol=Kt[3],mt}},At=function(Kt){return[Kt.first_line,Kt.first_column,Kt.last_line,Kt.last_column]},Nt=(function(){var Kt={EOF:1,parseError:function(It,Yt){if(!this.yy.parser)throw new Error(It);this.yy.parser.parseError(It,Yt)},setInput:function(It,Yt){return this.yy=Yt||this.yy||{},this._input=It,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var It=this._input[0];return this.yytext+=It,this.yyleng++,this.offset++,this.match+=It,this.matched+=It,It.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),It},unput:function(It){var Yt=It.length,Rt=It.split(/(?:\r\n?|\n)/g);this._input=It+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Yt),this.offset-=Yt;var Pt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Rt.length-1&&(this.yylineno-=Rt.length-1);var mt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Rt?(Rt.length===Pt.length?this.yylloc.first_column:0)+Pt[Pt.length-Rt.length].length-Rt[0].length:this.yylloc.first_column-Yt},this.options.ranges&&(this.yylloc.range=[mt[0],mt[0]+this.yyleng-Yt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(It){this.unput(this.match.slice(It))},pastInput:function(){var It=this.matched.substr(0,this.matched.length-this.match.length);return(It.length>20?"...":"")+It.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var It=this.match;return It.length<20&&(It+=this._input.substr(0,20-It.length)),(It.substr(0,20)+(It.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var It=this.pastInput(),Yt=new Array(It.length+1).join("-");return It+this.upcomingInput()+`
`+Yt+"^"},test_match:function(It,Yt){var Rt,Pt,mt;if(this.options.backtrack_lexer&&(mt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(mt.yylloc.range=this.yylloc.range.slice(0))),(Pt=It[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Pt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Pt?Pt[Pt.length-1].length-Pt[Pt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+It[0].length},this.yytext+=It[0],this.match+=It[0],this.matches=It,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(It[0].length),this.matched+=It[0],Rt=this.performAction.call(this,this.yy,this,Yt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Rt)return Rt;if(this._backtrack){for(var tt in mt)this[tt]=mt[tt];return!1}return!1},next:function(){if(this.done)return this.EOF;var It,Yt,Rt,Pt;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var mt=this._currentRules(),tt=0;tt<mt.length;tt++)if((Rt=this._input.match(this.rules[mt[tt]]))&&(!Yt||Rt[0].length>Yt[0].length)){if(Yt=Rt,Pt=tt,this.options.backtrack_lexer){if((It=this.test_match(Rt,mt[tt]))!==!1)return It;if(this._backtrack){Yt=!1;continue}return!1}if(!this.options.flex)break}return Yt?(It=this.test_match(Yt,mt[Pt]))!==!1&&It:this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var It=this.next();return It||this.lex()},begin:function(It){this.conditionStack.push(It)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(It){return(It=this.conditionStack.length-1-Math.abs(It||0))>=0?this.conditionStack[It]:"INITIAL"},pushState:function(It){this.begin(It)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(It,Yt,Rt,Pt){switch(Rt){case 0:case 6:case 7:break;case 1:case 2:case 3:return 78;case 4:case 5:return 77;case 8:return 7;case 9:return 12;case 10:return 14;case 11:return 17;case 12:return 15;case 13:return 91;case 14:return 93;case 15:return 19;case 16:return 23;case 17:return 21;case 18:return 75;case 19:return 76;case 20:return 74;case 21:return 80;case 22:case 23:return 94;case 24:return 82;case 25:return 83;case 26:return 26;case 27:return 27;case 28:return 16;case 29:return"#";case 30:return 34;case 31:return 35;case 32:return 79;case 33:return 64;case 34:return 65;case 35:return 66;case 36:return 8;case 37:return 10;case 38:return 58;case 39:case 40:return 57;case 41:return 53;case 42:return 54;case 43:return 55;case 44:return 50;case 45:return 51;case 46:return 47;case 47:return 45;case 48:return 48;case 49:return 46;case 50:return 41;case 51:return 43;case 52:return 42;case 53:return 39;case 54:return 37;case 55:return 32;case 56:return 86;case 57:return 5;case 58:return 20;case 59:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:[0-9]*\.?[0-9]+([eE][-+]?[0-9]+))/,/^(?:[0-9]+\.[0-9]*|[0-9]*\.[0-9]+\b)/,/^(?:[0-9]+)/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:\/\/.*)/,/^(?:\/\*(.|\n|\r)*?\*\/)/,/^(?:if\b)/,/^(?:else\b)/,/^(?:while\b)/,/^(?:do\b)/,/^(?:for\b)/,/^(?:function\b)/,/^(?:map\b)/,/^(?:use\b)/,/^(?:return\b)/,/^(?:delete\b)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:Infinity\b)/,/^(?:->)/,/^(?:=>)/,/^(?:<<)/,/^(?:>>)/,/^(?:\{)/,/^(?:\})/,/^(?:;)/,/^(?:#)/,/^(?:\?)/,/^(?::)/,/^(?:NaN\b)/,/^(?:\.)/,/^(?:\[)/,/^(?:\])/,/^(?:\()/,/^(?:\))/,/^(?:!)/,/^(?:\^)/,/^(?:\*\*)/,/^(?:\*)/,/^(?:\/)/,/^(?:%)/,/^(?:\+)/,/^(?:-)/,/^(?:<=)/,/^(?:<)/,/^(?:>=)/,/^(?:>)/,/^(?:==)/,/^(?:~=)/,/^(?:!=)/,/^(?:&&)/,/^(?:\|\|)/,/^(?:=)/,/^(?:,)/,/^(?:$)/,/^(?:[A-Za-z_\$][A-Za-z0-9_]*)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],inclusive:!0}}};return Kt})();function fi(){this.yy={}}return _t.lexer=Nt,fi.prototype=_t,_t.Parser=fi,new fi})();parser.yy.parseError=parser.parseError,__webpack_exports__.A=_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.JessieCode},443:function(G,_){var J={};try{typeof JXG!="object"||JXG.extend||(J=JXG)}catch{}J.extend=function(Z,Q,ee,te){var ne;for(ne in ee=ee||!1,te=te||!1,Q)(!ee||ee&&Q.hasOwnProperty(ne))&&(Z[te?ne.toLowerCase():ne]=Q[ne])},J.defineConstant=function(Z,Q,ee,te){(te=te||!1)&&J.exists(Z[Q])||Object.defineProperty(Z,Q,{value:ee,writable:!1,enumerable:!0,configurable:!1})},J.extendConstants=function(Z,Q,ee,te){var ne,ie;for(ne in ee=ee||!1,te=te||!1,Q)(!ee||ee&&Q.hasOwnProperty(ne))&&(ie=te?ne.toUpperCase():ne,this.defineConstant(Z,ie,Q[ne]))},J.extend(J,{boards:{},readers:{},elements:{},registerElement:function(Z,Q){Z=Z.toLowerCase(),this.elements[Z]=Q},registerReader:function(Z,Q){var ee,te;for(ee=0;ee<Q.length;ee++)te=Q[ee].toLowerCase(),typeof this.readers[te]!="function"&&(this.readers[te]=Z)},shortcut:function(Z,Q){return function(){return Z[Q].apply(this,arguments)}},getRef:function(Z,Q){return J.deprecated("JXG.getRef()","Board.select()"),Z.select(Q)},getReference:function(Z,Q){return J.deprecated("JXG.getReference()","Board.select()"),Z.select(Q)},getBoardByContainerId:function(Z){var Q;for(Q in JXG.boards)if(JXG.boards.hasOwnProperty(Q)&&JXG.boards[Q].container===Z)return JXG.boards[Q];return null},deprecated:function(Z,Q){var ee=Z+" is deprecated.";Q&&(ee+=" Please use "+Q+" instead."),J.warn(ee)},warn:function(Z){typeof window=="object"&&window.console&&console.warn?console.warn("WARNING:",Z):typeof document=="object"&&document.getElementById("warning")&&(document.getElementById("debug").innerText+="WARNING: "+Z+`
`)},debugInt:function(Z){var Q,ee;for(Q=0;Q<arguments.length;Q++)ee=arguments[Q],typeof window=="object"&&window.console&&console.log?console.log(ee):typeof document=="object"&&document.getElementById("debug")&&(document.getElementById("debug").innerText+=ee+`
`)},debugWST:function(Z){var Q=new Error;J.debugInt.apply(this,arguments),Q&&Q.stack&&(J.debugInt("stacktrace"),J.debugInt(Q.stack.split(`
`).slice(1).join(`
`)))},debugLine:function(Z){var Q=new Error;J.debugInt.apply(this,arguments),Q&&Q.stack&&J.debugInt("Called from",Q.stack.split(`
`).slice(2,3).join(`
`))},debug:function(Z){J.debugInt.apply(this,arguments)},themes:{}}),_.A=J},454:function(G,_,J){var Z=J(443),Q=J(188);Z.A.EventEmitter={eventHandlers:{},suspended:{},trigger:function(ee,te){var ne,ie,re,oe,se,ae;for(se=ee.length,ie=0;ie<se;ie++)if(oe=this.eventHandlers[ee[ie]],!this.suspended[ee[ie]]){if(this.suspended[ee[ie]]=!0,oe)for(ae=oe.length,ne=0;ne<ae;ne++)(re=oe[ne]).handler.apply(re.context,te);this.suspended[ee[ie]]=!1}return this},on:function(ee,te,ne){return Q.A.isArray(this.eventHandlers[ee])||(this.eventHandlers[ee]=[]),ne=Q.A.def(ne,this),this.eventHandlers[ee].push({handler:te,context:ne}),this},off:function(ee,te){var ne;return ee&&Q.A.isArray(this.eventHandlers[ee])?(te?((ne=Q.A.indexOf(this.eventHandlers[ee],te,"handler"))>-1&&this.eventHandlers[ee].splice(ne,1),this.eventHandlers[ee].length===0&&delete this.eventHandlers[ee]):delete this.eventHandlers[ee],this):this},eventify:function(ee){ee.eventHandlers={clicks:0},ee.on=this.on,ee.off=this.off,ee.triggerEventHandlers=this.trigger,ee.trigger=this.trigger,ee.suspended={}}},_.A=Z.A.EventEmitter},477:function(G,_,J){var Z,Q=J(443),ee=J(188),te=function(ne){var ie,re;return ne.memo||(ie={},re=Array.prototype.join,ne.memo=function(){var oe=re.call(arguments);return ie[oe]!==Z?ie[oe]:ie[oe]=ne.apply(this,arguments)}),ne.memo};Q.A.Math={eps:1e-6,relDif:function(ne,ie){var re=Math.abs(ne),oe=Math.abs(ie);return(oe=Math.max(re,oe))===0?0:Math.abs(ne-ie)/oe},mod:function(ne,ie){return ne-Math.floor(ne/ie)*ie},wrap:function(ne,ie,re){return ie+this.mod(ne-ie,re-ie)},clamp:function(ne,ie,re){return Math.min(Math.max(ne,ie),re)},wrapAndClamp:function(ne,ie,re,oe){var se=.5*(ie+re),ae=.5*oe;return this.clamp(this.wrap(ne,se-ae,se+ae),ie,re)},vector:function(ne,ie){var re,oe;for(ie=ie||0,re=[],oe=0;oe<ne;oe++)re[oe]=ie;return re},matrix:function(ne,ie,re){var oe,se,ae;for(re=re||0,ie=ie||ne,oe=[],se=0;se<ne;se++)for(oe[se]=[],ae=0;ae<ie;ae++)oe[se][ae]=re;return oe},identity:function(ne,ie){var re,oe;for(ie===Z&&typeof ie!="number"&&(ie=ne),re=this.matrix(ne,ie),oe=0;oe<Math.min(ne,ie);oe++)re[oe][oe]=1;return re},frustum:function(ne,ie,re,oe,se,ae){var ce=this.matrix(4,4);return ce[0][0]=2*se/(ie-ne),ce[0][1]=0,ce[0][2]=(ie+ne)/(ie-ne),ce[0][3]=0,ce[1][0]=0,ce[1][1]=2*se/(oe-re),ce[1][2]=(oe+re)/(oe-re),ce[1][3]=0,ce[2][0]=0,ce[2][1]=0,ce[2][2]=-(ae+se)/(ae-se),ce[2][3]=-ae*se*2/(ae-se),ce[3][0]=0,ce[3][1]=0,ce[3][2]=-1,ce[3][3]=0,ce},projection:function(ne,ie,re,oe){var se=re*Math.tan(ne/2),ae=se*ie;return this.frustum(-ae,ae,-se,se,re,oe)},matVecMult:function(ne,ie){var re,oe,se,ae=ne.length,ce=ie.length,ue=[];if(ce===3)for(re=0;re<ae;re++)ue[re]=ne[re][0]*ie[0]+ne[re][1]*ie[1]+ne[re][2]*ie[2];else for(re=0;re<ae;re++){for(se=0,oe=0;oe<ce;oe++)se+=ne[re][oe]*ie[oe];ue[re]=se}return ue},vecMatMult:function(ne,ie){var re,oe,se,ae=ie.length,ce=ne.length,ue=[];if(ce===3)for(re=0;re<ae;re++)ue[re]=ne[0]*ie[0][re]+ne[1]*ie[1][re]+ne[2]*ie[2][re];else for(re=0;re<ce;re++){for(se=0,oe=0;oe<ae;oe++)se+=ne[oe]*ie[oe][re];ue[re]=se}return ue},matMatMult:function(ne,ie){var re,oe,se,ae,ce=ne.length,ue=ce>0?ie[0].length:0,de=ie.length,me=this.matrix(ce,ue);for(re=0;re<ce;re++)for(oe=0;oe<ue;oe++){for(se=0,ae=0;ae<de;ae++)se+=ne[re][ae]*ie[ae][oe];me[re][oe]=se}return me},matNumberMult:function(ne,ie){var re,oe,se=ne.length,ae=se>0?ne[0].length:0,ce=this.matrix(se,ae);for(re=0;re<se;re++)for(oe=0;oe<ae;oe++)ce[re][oe]=ne[re][oe]*ie;return ce},matMatAdd:function(ne,ie){var re,oe,se=ne.length,ae=se>0?ne[0].length:0,ce=this.matrix(se,ae);for(re=0;re<se;re++)for(oe=0;oe<ae;oe++)ce[re][oe]=ne[re][oe]+ie[re][oe];return ce},transpose:function(ne){var ie,re,oe,se,ae;for(se=ne.length,ae=ne.length>0?ne[0].length:0,ie=this.matrix(ae,se),re=0;re<ae;re++)for(oe=0;oe<se;oe++)ie[re][oe]=ne[oe][re];return ie},inverse:function(ne){var ie,re,oe,se,ae,ce,ue,de=this.eps*this.eps,me=ne.length,fe=[],_e=[],ye=[];for(ie=0;ie<me;ie++){for(fe[ie]=[],re=0;re<me;re++)fe[ie][re]=ne[ie][re];_e[ie]=ie}for(re=0;re<me;re++){for(ce=Math.abs(fe[re][re]),se=re,ie=re+1;ie<me;ie++)Math.abs(fe[ie][re])>ce&&(ce=Math.abs(fe[ie][re]),se=ie);if(ce<=de)return Q.A.warn("JXG.Math.inverse: singular matrix"),[];if(se>re){for(oe=0;oe<me;oe++)ue=fe[re][oe],fe[re][oe]=fe[se][oe],fe[se][oe]=ue;ue=_e[re],_e[re]=_e[se],_e[se]=ue}for(ae=1/fe[re][re],ie=0;ie<me;ie++)fe[ie][re]*=ae;for(fe[re][re]=ae,oe=0;oe<me;oe++)if(oe!==re){for(ie=0;ie<me;ie++)ie!==re&&(fe[ie][oe]-=fe[ie][re]*fe[re][oe]);fe[re][oe]=-ae*fe[re][oe]}}for(ie=0;ie<me;ie++){for(oe=0;oe<me;oe++)ye[_e[oe]]=fe[ie][oe];for(oe=0;oe<me;oe++)fe[ie][oe]=ye[oe]}return fe},trace:function(ne){var ie,re,oe=0;if(ne.length!==(re=ne.length>0?ne[0].length:0))return NaN;for(ie=0;ie<re;ie++)oe+=ne[ie][ie];return oe},innerProduct:function(ne,ie,re){var oe,se=0;for(re!==Z&&ee.A.isNumber(re)||(re=ne.length),oe=0;oe<re;oe++)se+=ne[oe]*ie[oe];return se},crossProduct:function(ne,ie){return[ne[1]*ie[2]-ne[2]*ie[1],ne[2]*ie[0]-ne[0]*ie[2],ne[0]*ie[1]-ne[1]*ie[0]]},norm:function(ne,ie){var re,oe=0;for(ie!==Z&&ee.A.isNumber(ie)||(ie=ne.length),re=0;re<ie;re++)oe+=ne[re]*ne[re];return Math.sqrt(oe)},axpy:function(ne,ie,re){var oe,se=ie.length,ae=[];for(oe=0;oe<se;oe++)ae[oe]=ne*ie[oe]+re[oe];return ae},factorial:te(function(ne){return ne<0?NaN:(ne=Math.floor(ne))===0||ne===1?1:ne*this.factorial(ne-1)}),binomial:te(function(ne,ie){var re,oe;if(ie>ne||ie<0)return NaN;if(ie=Math.round(ie),ne=Math.round(ne),ie===0||ie===ne)return 1;for(re=1,oe=0;oe<ie;oe++)re*=ne-oe,re/=oe+1;return re}),cosh:Math.cosh||function(ne){return .5*(Math.exp(ne)+Math.exp(-ne))},sinh:Math.sinh||function(ne){return .5*(Math.exp(ne)-Math.exp(-ne))},acosh:Math.acosh||function(ne){return Math.log(ne+Math.sqrt(ne*ne-1))},asinh:Math.asinh||function(ne){return ne===-1/0?ne:Math.log(ne+Math.sqrt(ne*ne+1))},cot:function(ne){return 1/Math.tan(ne)},acot:function(ne){return(ne>=0?.5:-.5)*Math.PI-Math.atan(ne)},nthroot:function(ne,ie){var re=1/ie;return ie<=0||Math.floor(ie)!==ie?NaN:ne===0?0:ne>0?Math.exp(re*Math.log(ne)):ie%2==1?-Math.exp(re*Math.log(-ne)):NaN},cbrt:Math.cbrt||function(ne){return this.nthroot(ne,3)},pow:function(ne,ie){return ne===0?ie===0?1:0:Math.floor(ie)===ie?Math.pow(ne,ie):ne>0?Math.exp(ie*Math.log(ne)):NaN},ratpow:function(ne,ie,re){var oe;return ie===0?1:re===0?NaN:(oe=this.gcd(ie,re),this.nthroot(this.pow(ne,ie/oe),re/oe))},log10:function(ne){return Math.log(ne)/Math.log(10)},log2:function(ne){return Math.log(ne)/Math.log(2)},log:function(ne,ie){return ie!==void 0&&ee.A.isNumber(ie)?Math.log(ne)/Math.log(ie):Math.log(ne)},sign:Math.sign||function(ne){return(ne=+ne)==0||isNaN(ne)?ne:ne>0?1:-1},squampow:function(ne,ie){var re;if(Math.floor(ie)===ie){for(re=1,ie<0&&(ne=1/ne,ie*=-1);ie!==0;)1&ie&&(re*=ne),ie>>=1,ne*=ne;return re}return this.pow(ne,ie)},gcd:function(ne,ie){var re;if(ne=Math.abs(ne),ie=Math.abs(ie),!ee.A.isNumber(ne)||!ee.A.isNumber(ie))return NaN;for(ie>ne&&(re=ne,ne=ie,ie=re);;){if((ne%=ie)===0)return ie;if((ie%=ne)===0)return ne}},lcm:function(ne,ie){var re;return ee.A.isNumber(ne)&&ee.A.isNumber(ie)?(re=ne*ie)!==0?re/this.gcd(ne,ie):0:NaN},roundToStep:function(ne,ie,re,oe){var se,ae,ce=ne;if(!ee.A.exists(ie)&&!ee.A.exists(re)&&!ee.A.exists(oe))return ce;if(Q.A.exists(oe)&&(ce=Math.min(ce,oe)),Q.A.exists(re)&&(ce=Math.max(ce,re)),ae=re||0,Q.A.exists(ie)){if(se=(ce-ae)/ie,Number.isInteger(se))return ce;ce=ae+(se=Math.round(se))*ie}return Q.A.exists(oe)&&(ce=Math.min(ce,oe)),Q.A.exists(re)&&(ce=Math.max(ce,re)),ce},erf:function(ne){return this.ProbFuncs.erf(ne)},erfc:function(ne){return this.ProbFuncs.erfc(ne)},erfi:function(ne){return this.ProbFuncs.erfi(ne)},ndtr:function(ne){return this.ProbFuncs.ndtr(ne)},ndtri:function(ne){return this.ProbFuncs.ndtri(ne)},hypot:function(){var ne,ie,re,oe;for(ie=arguments.length,ne=0,oe=0;ne<ie;ne++)oe+=(re=arguments[ne])*re;return Math.sqrt(oe)},hstep:function(ne){return ne>0?1:ne<0?0:.5},gamma:function(ne){var ie,re,oe,se,ae,ce=[1,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(ne<.5)re=Math.PI/(Math.sin(Math.PI*ne)*this.gamma(1-ne));else{for(ne-=1,ie=ce[0],ae=ce.length,se=1;se<ae;se++)ie+=ce[se]/(ne+se);oe=ne+7+.5,re=Math.sqrt(2*Math.PI)*Math.pow(oe,ne+.5)*Math.exp(-oe)*ie}return re},lt:function(ne,ie){return ne<ie},leq:function(ne,ie){return ne<=ie},gt:function(ne,ie){return ne>ie},geq:function(ne,ie){return ne>=ie},eq:function(ne,ie){return ne===ie},neq:function(ne,ie){return ne!==ie},and:function(ne,ie){return ne&&ie},not:function(ne){return!ne},or:function(ne,ie){return ne||ie},xor:function(ne,ie){return(ne||ie)&&!(ne&&ie)},decToFraction:function(ne,ie){var re,oe,se,ae,ce,ue,de,me,fe,_e=0;for(ie=ee.A.def(ie,.001),oe=(ne=1e-12*Math.round(1e12*ne))<0?-1:1,ne=Math.abs(ne),re=Math.floor(ne),ne-=Math.floor(ne),ue=1,ae=ce=se=0,fe=0,de=me=1;ne-Math.floor(ne)>ie&&_e<20;)ne=1/(ne-se),ae=ue+(se=Math.floor(ne))*ce,de=fe+se*me,ue=ce,fe=me,ce=ae,me=de,_e++;return[oe,re,ae,de]},normalize:function(ne){var ie,re,oe=2*ne[3],se=ne[4]/oe;return ne[5]=se,ne[6]=-ne[1]/oe,ne[7]=-ne[2]/oe,isFinite(se)?Math.abs(se)>=1?(ne[0]=(ne[6]*ne[6]+ne[7]*ne[7]-se*se)/(2*se),ne[1]=-ne[6]/se,ne[2]=-ne[7]/se,ne[3]=1/(2*se),ne[4]=1):(re=se<=0?-1:1,ne[0]=re*(ne[6]*ne[6]+ne[7]*ne[7]-se*se)*.5,ne[1]=-re*ne[6],ne[2]=-re*ne[7],ne[3]=re/2,ne[4]=re*se):(ie=this.hypot(ne[1],ne[2]),ne[0]/=ie,ne[1]/=ie,ne[2]/=ie,ne[3]=0,ne[4]=1),ne},toGL:function(ne){var ie,re,oe;if(ie=typeof Float32Array=="function"?new Float32Array(16):new Array(16),ne.length!==4&&ne[0].length!==4)return ie;for(re=0;re<4;re++)for(oe=0;oe<4;oe++)ie[re+4*oe]=ne[re][oe];return ie},Vieta:function(ne){var ie,re,oe,se=ne.length,ae=[];for(ae=ne.slice(),ie=1;ie<se;++ie){for(oe=ae[ie],ae[ie]*=ae[ie-1],re=ie-1;re>=1;--re)ae[re]+=ae[re-1]*oe;ae[0]+=oe}return ae}},_.A=Q.A.Math},561:function(G,_,J){var Z,Q=J(443),ee="1.12.2";Z={version:ee,licenseText:"JSXGraph v"+ee+"  jsxgraph.org",licenseLogo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJ8AAACfCAYAAADnGwvgAAAACXBIWXMAAAsSAAALEgHS3X78AAAIPklEQVR4nO2d21XjSBCG/96z75ABzgBPBHgiWDLARDCeCBAZeCMYO4KFCEbOwM7AZIAjqH1QiTHGF7XUF7X6/87xw4APqodv+qaqaiMiICQGf8UOgOQL5SPRoHwkGpSPROPv2AH4whhzDWCs/xwDuI4YTu4sRGR7+MPByGeMGQG4BzBBJdtNxHDIZ0oA28MfJi2fCjfVD2VLjCTlU+kKAA9RAyGdSEo+SjcskpHPGFMAmAG4ihwKcUTv5dPR7gXAbdxIiGt6fc5njJkAWIPiDZLeymeMmQL4DU6zg6WX8ql4v2LHQfzSO/koXj70Sj6Klxd92+2uAXyPHQS5yBQOzlp7JZ+IrGPHQC6jpxCd6dW0S/KC8pFoUD4SDcpHokH5SDQoH4kG5SPRoHwkGpSPRCPaGw5jzBjACFWl2Ug/JB4LEVmEfGAw+bSO9h5/yhuZp9cvytAP9C6fvgecAfjH97NIWniTT9OjCrCelpzAuXw60hUA7lz/bTIsnMmna7oCwA9Xf5MMGyfy6c51AVaZEQs6n/Pp2q4ExSOWdBr5WHNButB65KN4pCut5KN4xAXW8ulRCsUjnbGSb69pDyGdsR35XsB3ssQRjeXT/ng8TiHOaCSfTrczr5GQ7Gg68hXgdEscc/GQWUc99kC+zArAO6p+M4fU94Aw2WKPJm84Ct9BJMorqteKpU2PGX0PPkGVVJu1jGfl46j3hTcAc1Qp5+9t/oCKugYwz/0ekUtrvmmIIBLgDcCjiIxEZN5WvENEZCsihYiMADzqc7KB8p1nB+BZpVv4fJD+/TGAZ5/P6RMn5dMpIbupYI8NgLGIFKEeKCLv+rxv+vxBc27kuw8WRf9Yisj42E2JIdB14QTAMsbzQ3FOvkmoIHrGTxGZxg5CR8EpBizgud3u+Mzvhspj6MLpS4jI1BgDDPDU4ejIp8VAua33nvsmXs1QR8BT025uo94y5MaiDSrga+w4XNKrbvSR2MBR0oS+vbjG5/VyCeDdUaf9KaoD6kHMSqfky2nkm3Y5NDbG1P1n7nE8+eJJv7dDlQ+5EJGyzbNE5H3vTrrkOTXtXgeNIh7PbUckY8y9MWYL4D9Um4FLWT9X+r3fxph127ssVNxBrP9y7s+3Q/We1gpjzLUx5gWVdG2nv1tUEi50c2fLDFX8SZOzfDPb6VbXdCXcddx6AFDaCqhxW//H6Ru5ylevvxqzJ57rUoJbtBAQlC9ZrFKiVIwF/GVz38KyOaPGn/TaL1f5bEeNAv6Lp261SMuGhYc4gpGjfG82CQO6Kw3V9u1Js4kaoTvfZDceOcpnW/Re+AjC4fOSLeLPUb6y6Rd1kxG6zuLBZvRDhEberqB855l6iuESNrmUyV6QnZ18lmd7E19xXKCxfCnfzp6bfCvL78dqD2I71Se56chNvsa0ffcaiSRHP8rXUxKTvxWUj0SD8vUXJ4XpfYbynWYb8+GWu9gk8y9zk2/U9Iv6Ci7WLtK2bUaSTTtzk882+bP0EYTL57ZMRu0FuclXvzJrSqz3pjbPTbbeJjv5YPfW4gXhp96diNjIN/EViG9ClU6+oXnu2Qh+q/MnaJjPp9Vic2gFWiBscw0nPoIIQSj5tk2LsvVw1bd8NsxRFeyE6EldN59shK73ku1umuO0e6W1to3QRISpv3A+YVtDnHQnsRzlAyw7FOga7F9PsdT8bFFMnvT1FLnKd2eZsAkRmcFfwc5SRKzWero8SfJ8ryZX+YAW6fHarMd129rHlv0AC8dxBCdn+R7aZI7oxuk7ujfv3gD41qYtm8ad7EajJmf5gJaF1yJSduggX3e2H7fJQt6rIU6e3OVrUyv7gYgsVMJvqKbjFb4eSr/pz59RjXRdO9sXGHiLtJx4Msa8dKmF2LvYxSuBa4i9k/vIV9OmV0pQ9J10sjW6x6B8FVfosYAa1+Au2qZ8f2jbLcorGk+Jgazz9qF8n6kFHEWOA8DHVLtG4ofJp6B8X7kF0LptrSv0/XOJAY54NZTvOFeo2tbOQ0/D2nZ3jqrt7qDWeIdQvvP8QDUKBske0U7zawzoOOUclO8yNwD+M8aUviQ0xky1s/0vDHiaPYSHzM25Q5UNU2dlL7rcSqmbiSmqnLxshNuH8tlzgyqt/klFLPWzBbA+lgyq68bx3meCTIXbh/J14wZVyv9H2r/eEEkawDUfiQblIyHYHvsh5SPeObUxo3zENyeL7ikf8c3JPEfKR3xD+Ug0KB+JRnnqF5SP+GRz7hUk5SM+WZz7JeUjPjlb8ET5iC9Wl7J+KB/xRXHpC5SP+GDVpN0b5SM+KJp8ifIR17w2bXJJ+YhLdrBoIUz5iEusekpTPuKKpeX9IZSPOGHTprUv5SNd2aDlRTSUj3RhA2BieXfIB70rndRtehL1h8aYEgNozN2STuIBHPlIOxboKB7Qw5GP9J8ubUL24chHasrQD6R8JBqUjwD42OgFhfIRoNq5BofyESDABTbHoHwEiLDZACgfqYhysxHlI69dD4vbEuqQ+c4YI4GeReyIdp8bR768eet4/WonKF/eLGI+nPLlyw4tb1p3BeXLl1msjUYN5cuTVcy1Xg3ly5NZ7AAAypcjP0Ukyuu0QyhfXixFJOomYx/Klw8b9GS6raF8edC52McHlG/49FI8gPINnd6KB1C+IbMUkXFfxQNYOjlEdqi6RUXLVmkKR75h8QpglIJ4AOUbCisA30Xkvs/T7CGcdtNmBaCIUfboAsqXHhtUeXgvrtpWxILy9ZsdqrLG+lOmLtw+RuRraYUxZgRgFDgW8oftkCQ7xVH5CAkBd7skGpSPRIPykWhQPhKN/wEKYnCiOMadyQAAAABJRU5ErkJggg==",COORDS_BY_USER:1,COORDS_BY_SCREEN:2,OBJECT_TYPE_ARC:1,OBJECT_TYPE_ARROW:2,OBJECT_TYPE_AXIS:3,OBJECT_TYPE_AXISPOINT:4,OBJECT_TYPE_TICKS:5,OBJECT_TYPE_CIRCLE:6,OBJECT_TYPE_CONIC:7,OBJECT_TYPE_CURVE:8,OBJECT_TYPE_GLIDER:9,OBJECT_TYPE_IMAGE:10,OBJECT_TYPE_LINE:11,OBJECT_TYPE_POINT:12,OBJECT_TYPE_SLIDER:13,OBJECT_TYPE_CAS:14,OBJECT_TYPE_GXTCAS:15,OBJECT_TYPE_POLYGON:16,OBJECT_TYPE_SECTOR:17,OBJECT_TYPE_TEXT:18,OBJECT_TYPE_ANGLE:19,OBJECT_TYPE_INTERSECTION:20,OBJECT_TYPE_TURTLE:21,OBJECT_TYPE_VECTOR:22,OBJECT_TYPE_OPROJECT:23,OBJECT_TYPE_GRID:24,OBJECT_TYPE_TANGENT:25,OBJECT_TYPE_HTMLSLIDER:26,OBJECT_TYPE_CHECKBOX:27,OBJECT_TYPE_INPUT:28,OBJECT_TYPE_BUTTON:29,OBJECT_TYPE_TRANSFORMATION:30,OBJECT_TYPE_FOREIGNOBJECT:31,OBJECT_TYPE_VIEW3D:32,OBJECT_TYPE_POINT3D:33,OBJECT_TYPE_LINE3D:34,OBJECT_TYPE_PLANE3D:35,OBJECT_TYPE_CURVE3D:36,OBJECT_TYPE_SURFACE3D:37,OBJECT_TYPE_MEASUREMENT:38,OBJECT_TYPE_INTERSECTION_LINE3D:39,OBJECT_TYPE_SPHERE3D:40,OBJECT_TYPE_CIRCLE3D:41,OBJECT_TYPE_INTERSECTION_CIRCLE3D:42,OBJECT_TYPE_TEXT3D:43,OBJECT_TYPE_FACE3D:44,OBJECT_TYPE_POLYHEDRON3D:45,OBJECT_TYPE_POLYGON3D:46,OBJECT_CLASS_POINT:1,OBJECT_CLASS_LINE:2,OBJECT_CLASS_CIRCLE:3,OBJECT_CLASS_CURVE:4,OBJECT_CLASS_AREA:5,OBJECT_CLASS_OTHER:6,OBJECT_CLASS_TEXT:7,OBJECT_CLASS_3D:8},Q.A.extendConstants(Q.A,Z),_.A=Z},571:function(G,_,J){var Z=J(443),Q=J(561),ee=J(904),te=J(477),ne=J(588),ie=J(171),re=J(188),oe=J(713);te.A.Geometry={},Z.A.extend(te.A.Geometry,{angle:function(se,ae,ce){var ue,de,me,fe,_e=[],ye=[],be=[];return Z.A.deprecated("Geometry.angle()","Geometry.rad()"),se.coords?(_e[0]=se.coords.usrCoords[1],_e[1]=se.coords.usrCoords[2]):(_e[0]=se[0],_e[1]=se[1]),ae.coords?(ye[0]=ae.coords.usrCoords[1],ye[1]=ae.coords.usrCoords[2]):(ye[0]=ae[0],ye[1]=ae[1]),ce.coords?(be[0]=ce.coords.usrCoords[1],be[1]=ce.coords.usrCoords[2]):(be[0]=ce[0],be[1]=ce[1]),ue=_e[0]-ye[0],de=_e[1]-ye[1],me=be[0]-ye[0],fe=be[1]-ye[1],Math.atan2(ue*fe-de*me,ue*me+de*fe)},trueAngle:function(se,ae,ce){return 57.29577951308232*this.rad(se,ae,ce)},rad:function(se,ae,ce){var ue,de,me,fe,_e,ye,be;return se.coords?(ue=se.coords.usrCoords[1],de=se.coords.usrCoords[2]):(ue=se[0],de=se[1]),ae.coords?(me=ae.coords.usrCoords[1],fe=ae.coords.usrCoords[2]):(me=ae[0],fe=ae[1]),ce.coords?(_e=ce.coords.usrCoords[1],ye=ce.coords.usrCoords[2]):(_e=ce[0],ye=ce[1]),(be=Math.atan2(ye-fe,_e-me)-Math.atan2(de-fe,ue-me))<0&&(be+=6.283185307179586),be},angleBisector:function(se,ae,ce,ue){var de,me,fe,_e,ye,be=se.coords.usrCoords,Se=ae.coords.usrCoords,Ce=ce.coords.usrCoords;return re.A.exists(ue)||(ue=se.board),Se[0]===0?new ee.A(Q.A.COORDS_BY_USER,[1,.5*(be[1]+Ce[1]),.5*(be[2]+Ce[2])],ue):(_e=be[1]-Se[1],ye=be[2]-Se[2],de=Math.atan2(ye,_e),_e=Ce[1]-Se[1],ye=Ce[2]-Se[2],fe=.5*(de+(me=Math.atan2(ye,_e))),de>me&&(fe+=Math.PI),_e=Math.cos(fe)+Se[1],ye=Math.sin(fe)+Se[2],new ee.A(Q.A.COORDS_BY_USER,[1,_e,ye],ue))},reflection:function(se,ae,ce){var ue,de,me,fe,_e,ye,be=ae.coords.usrCoords,Se=se.point1.coords.usrCoords,Ce=se.point2.coords.usrCoords;return re.A.exists(ce)||(ce=ae.board),fe=Ce[1]-Se[1],_e=Ce[2]-Se[2],ue=be[1]-Se[1],ye=(fe*(be[2]-Se[2])-_e*ue)/(fe*fe+_e*_e),de=be[1]+2*ye*_e,me=be[2]-2*ye*fe,new ee.A(Q.A.COORDS_BY_USER,[de,me],ce)},rotation:function(se,ae,ce,ue){var de,me,fe,_e,ye,be,Se=ae.coords.usrCoords,Ce=se.coords.usrCoords;return re.A.exists(ue)||(ue=ae.board),de=Se[1]-Ce[1],me=Se[2]-Ce[2],ye=de*(fe=Math.cos(ce))-me*(_e=Math.sin(ce))+Ce[1],be=de*_e+me*fe+Ce[2],new ee.A(Q.A.COORDS_BY_USER,[ye,be],ue)},perpendicular:function(se,ae,ce){var ue,de,me,fe,_e,ye=se.point1.coords.usrCoords,be=se.point2.coords.usrCoords,Se=ae.coords.usrCoords;return re.A.exists(ce)||(ce=ae.board),ae===se.point1?(ue=ye[1]+be[2]-ye[2],de=ye[2]-be[1]+ye[1],_e=ye[0]*be[0],Math.abs(_e)<te.A.eps&&(ue=be[2],de=-be[1]),fe=[_e,ue,de],me=!0):ae===se.point2?(ue=be[1]+ye[2]-be[2],de=be[2]-ye[1]+be[1],_e=ye[0]*be[0],Math.abs(_e)<te.A.eps&&(ue=ye[2],de=-ye[1]),fe=[_e,ue,de],me=!1):Math.abs(te.A.innerProduct(Se,se.stdform,3))<te.A.eps?(ue=Se[1]+be[2]-Se[2],de=Se[2]-be[1]+Se[1],_e=be[0],Math.abs(_e)<te.A.eps&&(ue=be[2],de=-be[1]),me=!0,Math.abs(_e)>te.A.eps&&Math.abs(ue-Se[1])<te.A.eps&&Math.abs(de-Se[2])<te.A.eps&&(ue=Se[1]+ye[2]-Se[2],de=Se[2]-ye[1]+Se[1],me=!1),fe=[_e,ue,de]):(fe=[0,se.stdform[1],se.stdform[2]],fe=te.A.crossProduct(fe,Se),fe=te.A.crossProduct(fe,se.stdform),me=!0),[new ee.A(Q.A.COORDS_BY_USER,fe,ce),me]},circumcenterMidpoint:function(){Z.A.deprecated("Geometry.circumcenterMidpoint()","Geometry.circumcenter()"),this.circumcenter.apply(this,arguments)},circumcenter:function(se,ae,ce,ue){var de,me,fe,_e,ye=se.coords.usrCoords,be=ae.coords.usrCoords,Se=ce.coords.usrCoords;return re.A.exists(ue)||(ue=se.board),de=[be[0]-ye[0],-be[2]+ye[2],be[1]-ye[1]],me=[.5*(ye[0]+be[0]),.5*(ye[1]+be[1]),.5*(ye[2]+be[2])],fe=te.A.crossProduct(de,me),de=[Se[0]-be[0],-Se[2]+be[2],Se[1]-be[1]],me=[.5*(be[0]+Se[0]),.5*(be[1]+Se[1]),.5*(be[2]+Se[2])],_e=te.A.crossProduct(de,me),new ee.A(Q.A.COORDS_BY_USER,te.A.crossProduct(fe,_e),ue)},distance:function(se,ae,ce){var ue,de=0;for(ce||(ce=Math.min(se.length,ae.length)),ue=0;ue<ce;ue++)de+=(se[ue]-ae[ue])*(se[ue]-ae[ue]);return Math.sqrt(de)},affineDistance:function(se,ae,ce){var ue;return(ue=this.distance(se,ae,ce))>te.A.eps&&(Math.abs(se[0])<te.A.eps||Math.abs(ae[0])<te.A.eps)?1/0:ue},affineRatio:function(se,ae,ce){var ue;return re.A.exists(se.usrCoords)&&(se=se.usrCoords),re.A.exists(ae.usrCoords)&&(ae=ae.usrCoords),re.A.exists(ce.usrCoords)&&(ce=ce.usrCoords),ue=ae[1]-se[1],Math.abs(ue)>te.A.eps?(ce[1]-se[1])/ue:(ce[2]-se[2])/(ae[2]-se[2])},sortVertices:function(se){for(var ae,ce=oe.A.each(se,oe.A.coordsArray),ue=ce.length,de=null;ce[0][0]===ce[ue-1][0]&&ce[0][1]===ce[ue-1][1]&&ce[0][2]===ce[ue-1][2];)de=ce.pop(),ue--;return ae=ce[0],ce.sort(function(me,fe){return(me[2]===ae[2]&&me[1]===ae[1]?-1/0:Math.atan2(me[2]-ae[2],me[1]-ae[1]))-(fe[2]===ae[2]&&fe[1]===ae[1]?-1/0:Math.atan2(fe[2]-ae[2],fe[1]-ae[1]))}),de!==null&&ce.push(de),ce},signedTriangle:function(se,ae,ce){var ue=oe.A.coordsArray(se),de=oe.A.coordsArray(ae),me=oe.A.coordsArray(ce);return .5*((de[1]-ue[1])*(me[2]-ue[2])-(de[2]-ue[2])*(me[1]-ue[1]))},signedPolygon:function(se,ae){var ce,ue,de=0,me=oe.A.each(se,oe.A.coordsArray);for(ae===void 0&&(ae=!0),ae?me.unshift(me[me.length-1]):me=this.sortVertices(me),ue=me.length,ce=1;ce<ue;ce++)de+=me[ce-1][1]*me[ce][2]-me[ce][1]*me[ce-1][2];return .5*de},GrahamScan:function(se){var ae,ce,ue,de,me,fe,_e,ye,be,Se,Ce,Me,Re,Te,Ee,De,Le,Ue,Ge,Ye,ke,Fe,Ve,$e=te.A.eps*te.A.eps,Xe=this,ze=[],qe=[],et=oe.A.each(se,oe.A.coordsArray);if((Ve=et.length)===0)return[];if(Ve>1024)for(_e=me=et[0][1],ye=fe=et[0][2],Me=Se=et[0][1]-et[0][2],Ce=be=et[0][1]+et[0][2],Re=0,Te=0,Ee=0,De=0,Ue=0,Ye=0,Le=0,Ge=0,ae=1;ae<Ve;ae++)(ke=et[ae][1])<me?(me=ke,Re=ae):ke>_e&&(_e=ke,Te=ae),(ke=et[ae][2])<fe?(fe=ke,Ee=ae):ke>ye&&(ye=ke,De=ae),(ke=et[ae][1]-et[ae][2])<Se?(Se=ke,Ue=ae):ke>Me&&(Me=ke,Ye=ae),(ke=et[ae][1]+et[ae][2])<be?(be=ke,Le=ae):ke>Ce&&(Ce=ke,Ge=ae);for(ae=0;ae<Ve;ae++)Fe=et[ae],(Ve<=1024||ae in[Re,Te,Ee,De,Le,Ue,Ge,Ye]||Re!==Ue&&this.signedTriangle(et[Re],et[Ue],Fe)>=-$e||Ue!==De&&this.signedTriangle(et[Ue],et[De],Fe)>=-$e||De!==Ge&&this.signedTriangle(et[De],et[Ge],Fe)>=-$e||Ge!==Te&&this.signedTriangle(et[Ge],et[Te],Fe)>=-$e||Te!==Ye&&this.signedTriangle(et[Te],et[Ye],Fe)>=-$e||Ye!==Ee&&this.signedTriangle(et[Ye],et[Ee],Fe)>=-$e||Ee!==Le&&this.signedTriangle(et[Ee],et[Le],Fe)>=-$e||Le!==Re&&this.signedTriangle(et[Le],et[Re],Fe)>=-$e)&&ze.push({i:ae,c:Fe});for(Ve=ze.length,de=0,me=ze[0].c[1],fe=ze[0].c[2],ae=1;ae<Ve;ae++)(ze[ae].c[2]<fe||ze[ae].c[2]===fe&&ze[ae].c[1]<me)&&(me=ze[ae].c[1],fe=ze[ae].c[2],de=ae);for(ze=re.A.swap(ze,de,0),ue=ze[0].c,ze.sort(function(ot,St){var it=ot.c,lt=St.c,gt=Xe.signedTriangle(ue,it,lt);return gt===0?te.A.hypot(it[1]-ue[1],it[2]-ue[2])-te.A.hypot(lt[1]-ue[1],lt[2]-ue[2]):-gt}),ce=0,ae=0;ae<Ve;ae++){for(;ce>1&&this.signedTriangle(qe[ce-2].c,qe[ce-1].c,ze[ae].c)<=0;)qe.pop(),ce--;qe.push(ze[ae]),ce++}return qe},convexHull:function(se,ae){var ce,ue,de=[];for(ue=this.GrahamScan(se),ce=0;ce<ue.length;ce++)ae?de.push(ue[ce].c):de.push(se[ue[ce].i]);return de},isConvex:function(se){var ae,ce,ue,de,me,fe,_e,ye,be,Se,Ce,Me=te.A.eps*te.A.eps,Re=0;if(re.A.isArray(se)?ae=oe.A.each(se,oe.A.coordsArray):re.A.exists(se.type)&&se.type===Q.A.OBJECT_TYPE_POLYGON&&(ae=oe.A.each(se.vertices,oe.A.coordsArray)),(ce=ae.length)===0||ce<3)return!0;for(Ce=null,de=ae[ce-2][1],me=ae[ce-2][2],_e=ae[ce-1][1],ye=ae[ce-1][2],be=Math.atan2(ye-me,_e-de),ue=0;ue<ce;ue++)if(de=_e,me=ye,fe=be,_e=ae[ue][1],ye=ae[ue][2],de!==_e||me!==ye){if((Se=(be=Math.atan2(ye-me,_e-de))-fe)<=-Math.PI?Se+=2*Math.PI:Se>Math.PI&&(Se-=2*Math.PI),Ce===null){if(Se===0)continue;Ce=Se>0?1:-1}else if(Ce*Se<-Me)return!1;Re+=Se}return Math.abs(Re/(2*Math.PI))-1<Me},calcStraight:function(se,ae,ce,ue){var de,me,fe,_e,ye,be,Se,Ce,Me,Re;if(re.A.exists(ue)||(ue=10),be=se.evalVisProp("straightfirst"),Se=se.evalVisProp("straightlast"),Math.abs(ae.scrCoords[0])<te.A.eps&&(be=!0),Math.abs(ce.scrCoords[0])<te.A.eps&&(Se=!0),(be||Se)&&((Ce=[])[0]=se.stdform[0]-se.stdform[1]*se.board.origin.scrCoords[1]/se.board.unitX+se.stdform[2]*se.board.origin.scrCoords[2]/se.board.unitY,Ce[1]=se.stdform[1]/se.board.unitX,Ce[2]=-se.stdform[2]/se.board.unitY,!isNaN(Ce[0]+Ce[1]+Ce[2]))){if(de=!be&&Math.abs(ae.usrCoords[0])>=te.A.eps&&ae.scrCoords[1]>=0&&ae.scrCoords[1]<=se.board.canvasWidth&&ae.scrCoords[2]>=0&&ae.scrCoords[2]<=se.board.canvasHeight,me=!Se&&Math.abs(ce.usrCoords[0])>=te.A.eps&&ce.scrCoords[1]>=0&&ce.scrCoords[1]<=se.board.canvasWidth&&ce.scrCoords[2]>=0&&ce.scrCoords[2]<=se.board.canvasHeight,_e=(fe=this.meetLineBoard(Ce,se.board,ue))[0],ye=fe[1],!de&&!me&&(!be&&Se&&!this.isSameDirection(ae,ce,_e)&&!this.isSameDirection(ae,ce,ye)||be&&!Se&&!this.isSameDirection(ce,ae,_e)&&!this.isSameDirection(ce,ae,ye)))return;de?me||(Re=this.isSameDir(ae,ce,_e,ye)?ye:_e):me?Me=this.isSameDir(ae,ce,_e,ye)?_e:ye:this.isSameDir(ae,ce,_e,ye)?(Me=_e,Re=ye):(Re=_e,Me=ye),Me&&ae.setCoordinates(Q.A.COORDS_BY_USER,Me.usrCoords),Re&&ce.setCoordinates(Q.A.COORDS_BY_USER,Re.usrCoords)}},calcLineDelimitingPoints:function(se,ae,ce){var ue,de,me,fe,_e,ye,be,Se,Ce,Me,Re;if(_e=se.evalVisProp("straightfirst"),ye=se.evalVisProp("straightlast"),Math.abs(ae.scrCoords[0])<te.A.eps&&(_e=!0),Math.abs(ce.scrCoords[0])<te.A.eps&&(ye=!0),(be=[])[0]=se.stdform[0]-se.stdform[1]*se.board.origin.scrCoords[1]/se.board.unitX+se.stdform[2]*se.board.origin.scrCoords[2]/se.board.unitY,be[1]=se.stdform[1]/se.board.unitX,be[2]=-se.stdform[2]/se.board.unitY,!isNaN(be[0]+be[1]+be[2])){if(Me=!_e,Re=!ye,de=se.board.getBoundingBox(),se.getSlope()>=0?(me=this.projectPointToLine({coords:{usrCoords:[1,de[2],de[1]]}},se,se.board),fe=this.projectPointToLine({coords:{usrCoords:[1,de[0],de[3]]}},se,se.board)):(me=this.projectPointToLine({coords:{usrCoords:[1,de[0],de[1]]}},se,se.board),fe=this.projectPointToLine({coords:{usrCoords:[1,de[2],de[3]]}},se,se.board)),!Me&&!Re&&(!_e&&!ye&&(ue=ae.distance(Q.A.COORDS_BY_USER,ce),Math.abs(ae.distance(Q.A.COORDS_BY_USER,me)+me.distance(Q.A.COORDS_BY_USER,ce)-ue)>te.A.eps||Math.abs(ae.distance(Q.A.COORDS_BY_USER,fe)+fe.distance(Q.A.COORDS_BY_USER,ce)-ue)>te.A.eps)||!_e&&ye&&!this.isSameDirection(ae,ce,me)&&!this.isSameDirection(ae,ce,fe)||_e&&!ye&&!this.isSameDirection(ce,ae,me)&&!this.isSameDirection(ce,ae,fe)))return;Me?Re||(Ce=this.isSameDir(ae,ce,me,fe)?fe:me):Re?Se=this.isSameDir(ae,ce,me,fe)?me:fe:this.isSameDir(ae,ce,me,fe)?(Se=me,Ce=fe):(Ce=me,Se=fe),Se&&ae.setCoordinates(Q.A.COORDS_BY_USER,Se.usrCoords),Ce&&ce.setCoordinates(Q.A.COORDS_BY_USER,Ce.usrCoords)}},calcLabelQuadrant:function(se){return se<0&&(se+=2*Math.PI),["rt","urt","top","ulft","lft","llft","lrt"][Math.floor((se+Math.PI/8)/(Math.PI/4))%8]},isSameDir:function(se,ae,ce,ue){var de=ae.usrCoords[1]-se.usrCoords[1],me=ae.usrCoords[2]-se.usrCoords[2],fe=ue.usrCoords[1]-ce.usrCoords[1],_e=ue.usrCoords[2]-ce.usrCoords[2];return Math.abs(ae.usrCoords[0])<te.A.eps&&(de=ae.usrCoords[1],me=ae.usrCoords[2]),Math.abs(se.usrCoords[0])<te.A.eps&&(de=-se.usrCoords[1],me=-se.usrCoords[2]),de*fe+me*_e>=0},isSameDirection:function(se,ae,ce){var ue,de,me,fe,_e=!1;return ue=ae.usrCoords[1]-se.usrCoords[1],de=ae.usrCoords[2]-se.usrCoords[2],me=ce.usrCoords[1]-se.usrCoords[1],fe=ce.usrCoords[2]-se.usrCoords[2],Math.abs(ue)<te.A.eps&&(ue=0),Math.abs(de)<te.A.eps&&(de=0),Math.abs(me)<te.A.eps&&(me=0),Math.abs(fe)<te.A.eps&&(fe=0),(ue>=0&&me>=0||ue<=0&&me<=0)&&(_e=de>=0&&fe>=0||de<=0&&fe<=0),_e},det3p:function(se,ae,ce){var ue,de,me;return ue=re.A.isPoint(se)?se.Coords(!0):se,de=re.A.isPoint(ae)?ae.Coords(!0):ae,me=re.A.isPoint(ce)?ce.Coords(!0):ce,(ue[1]-me[1])*(de[2]-me[2])-(de[1]-me[1])*(ue[2]-me[2])},windingNumber:function(se,ae,ce){var ue,de,me,fe,_e,ye,be=0,Se=ae.length,Ce=se[1],Me=se[2],Re=0;if(Se===0)return 0;if((ce=ce||!1)&&(Re=1),isNaN(Ce)||isNaN(Me)||(re.A.exists(ae[0].coords)?(ue=ae[0].coords,de=ae[Se-1].coords):(ue=ae[0],de=ae[Se-1]),ue.usrCoords[1]===Ce&&ue.usrCoords[2]===Me))return 1;for(ye=0;ye<Se-Re;ye++)if(re.A.exists(ae[ye].coords)?(de=ae[ye].coords.usrCoords,me=ae[(ye+1)%Se].coords.usrCoords):(de=ae[ye].usrCoords,me=ae[(ye+1)%Se].usrCoords),!(de[0]===0||me[0]===0||isNaN(de[1])||isNaN(me[1])||isNaN(de[2])||isNaN(me[2]))){if(me[2]===Me){if(me[1]===Ce)return 1;if(de[2]===Me&&me[1]>Ce==de[1]<Ce)return 0}if(de[2]<Me!=me[2]<Me)if(_e=2*(me[2]>de[2]?1:0)-1,de[1]>=Ce)if(me[1]>Ce)be+=_e;else{if((fe=this.det3p(de,me,se))===0)return 0;fe>0+te.A.eps==me[2]>de[2]&&(be+=_e)}else me[1]>Ce&&(fe=this.det3p(de,me,se))>0+te.A.eps==me[2]>de[2]&&(be+=_e)}return be},pnpoly:function(se,ae,ce,ue,de){var me,fe,_e,ye,be,Se,Ce,Me,Re=ce,Te=!1;for(ue===Q.A.COORDS_BY_USER?(Se=(Me=new ee.A(Q.A.COORDS_BY_USER,[se,ae],de)).scrCoords[1],Ce=Me.scrCoords[2]):(Se=se,Ce=ae),me=0,fe=(be=ce.length)-2;me<be-1;fe=me++)_e=re.A.exists(Re[me].coords)?Re[me].coords:Re[me],ye=re.A.exists(Re[fe].coords)?Re[fe].coords:Re[fe],_e.scrCoords[2]>Ce!=ye.scrCoords[2]>Ce&&Se<(ye.scrCoords[1]-_e.scrCoords[1])*(Ce-_e.scrCoords[2])/(ye.scrCoords[2]-_e.scrCoords[2])+_e.scrCoords[1]&&(Te=!Te);return Te},intersectionFunction:function(se,ae,ce,ue,de,me){var fe,_e,ye=this;return fe=ae.elementClass===Q.A.OBJECT_CLASS_CURVE&&(ae.type===Q.A.OBJECT_TYPE_ARC||ae.type===Q.A.OBJECT_TYPE_SECTOR),_e=ce.elementClass===Q.A.OBJECT_CLASS_CURVE&&(ce.type===Q.A.OBJECT_TYPE_ARC||ce.type===Q.A.OBJECT_TYPE_SECTOR),ae.elementClass!==Q.A.OBJECT_CLASS_CURVE&&ce.elementClass!==Q.A.OBJECT_CLASS_CURVE||ae.elementClass!==Q.A.OBJECT_CLASS_CURVE&&ae.elementClass!==Q.A.OBJECT_CLASS_CIRCLE||ce.elementClass!==Q.A.OBJECT_CLASS_CURVE&&ce.elementClass!==Q.A.OBJECT_CLASS_CIRCLE?ae.elementClass===Q.A.OBJECT_CLASS_CURVE&&!fe&&ce.elementClass===Q.A.OBJECT_CLASS_LINE||ce.elementClass===Q.A.OBJECT_CLASS_CURVE&&!_e&&ae.elementClass===Q.A.OBJECT_CLASS_LINE?function(){return ye.meetCurveLine(ae,ce,ue,ae.board,re.A.evaluate(me))}:ae.type===Q.A.OBJECT_TYPE_POLYGON||ce.type===Q.A.OBJECT_TYPE_POLYGON?ae.elementClass===Q.A.OBJECT_CLASS_LINE?function(){var be,Se=ae.evalVisProp("straightfirst"),Ce=ae.evalVisProp("straightlast"),Me=ce.evalVisProp("straightfirst"),Re=ce.evalVisProp("straightlast");return be=!(re.A.evaluate(me)||Se&&Ce&&Me&&Re),ye.meetPolygonLine(ce,ae,ue,ae.board,be)}:ce.elementClass===Q.A.OBJECT_CLASS_LINE?function(){var be,Se=ae.evalVisProp("straightfirst"),Ce=ae.evalVisProp("straightlast"),Me=ce.evalVisProp("straightfirst"),Re=ce.evalVisProp("straightlast");return be=!(re.A.evaluate(me)||Se&&Ce&&Me&&Re),ye.meetPolygonLine(ae,ce,ue,ae.board,be)}:function(){return ye.meetPathPath(ae,ce,ue,ae.board)}:ae.elementClass===Q.A.OBJECT_CLASS_LINE&&ce.elementClass===Q.A.OBJECT_CLASS_LINE?function(){var be,Se,Ce=ae.evalVisProp("straightfirst"),Me=ae.evalVisProp("straightlast"),Re=ce.evalVisProp("straightfirst"),Te=ce.evalVisProp("straightlast");return re.A.evaluate(me)||Ce&&Me&&Re&&Te?ye.meet(ae.stdform,ce.stdform,ue,ae.board):(be=ye.meetSegmentSegment(ae.point1.coords.usrCoords,ae.point2.coords.usrCoords,ce.point1.coords.usrCoords,ce.point2.coords.usrCoords),Se=!Ce&&be[1]<0||!Me&&be[1]>1||!Re&&be[2]<0||!Te&&be[2]>1?[0,NaN,NaN]:be[0],new ee.A(Q.A.COORDS_BY_USER,Se,ae.board))}:function(){var be,Se,Ce,Me=ye.meet(ae.stdform,ce.stdform,ue,ae.board),Re=!0;return re.A.evaluate(me)?Me:(ae.elementClass!==Q.A.OBJECT_CLASS_LINE||(be=ae.evalVisProp("straightfirst"),Se=ae.evalVisProp("straightlast"),be&&Se||(Ce=ye.affineRatio(ae.point1.coords,ae.point2.coords,Me),!(!Se&&Ce>1+te.A.eps||!be&&Ce<0-te.A.eps))))&&(ce.elementClass!==Q.A.OBJECT_CLASS_LINE||(be=ce.evalVisProp("straightfirst"),Se=ce.evalVisProp("straightlast"),be&&Se||(Ce=ye.affineRatio(ce.point1.coords,ce.point2.coords,Me),!(!Se&&Ce>1+te.A.eps||!be&&Ce<0-te.A.eps))))?fe&&((Re=ye.coordsOnArc(ae,Me))&&_e&&(Re=ye.coordsOnArc(ce,Me)),!Re)?new ee.A(Z.A.COORDS_BY_USER,[0,NaN,NaN],ae.board):Me:new ee.A(Z.A.COORDS_BY_USER,[0,NaN,NaN],ae.board)}:function(){return ye.meetCurveCurve(ae,ce,ue,de,ae.board)}},otherIntersectionFunction:function(se,ae,ce,ue){var de,me,fe,_e=this;return me=se[0],fe=se[1],de=me.board,function(){var ye,be,Se,Ce,Me=ae.length,Re=re.A.evaluate(ue);for(ye=Me;ye>=0;ye--)if(me.elementClass===Q.A.OBJECT_CLASS_CIRCLE&&[Q.A.OBJECT_CLASS_CIRCLE,Q.A.OBJECT_CLASS_LINE].indexOf(fe.elementClass)>=0?Se=_e.meet(me.stdform,fe.stdform,ye,de):me.elementClass===Q.A.OBJECT_CLASS_CURVE&&[Q.A.OBJECT_CLASS_CURVE,Q.A.OBJECT_CLASS_CIRCLE].indexOf(fe.elementClass)>=0?Se=_e.meetCurveCurve(me,fe,ye,0,de):me.elementClass===Q.A.OBJECT_CLASS_CURVE&&fe.elementClass===Q.A.OBJECT_CLASS_LINE&&(Se=re.A.exists(me.dataX)?Z.A.Math.Geometry.meetCurveLine(me,fe,ye,me.board,re.A.evaluate(ce)):Z.A.Math.Geometry.meetCurveLineContinuous(me,fe,ye,me.board)),Se!==void 0){for(Ce=!1,be=0;!Ce&&be<Me;be++)re.A.exists(Se)&&re.A.exists(Se.distance)&&Se.distance(Z.A.COORDS_BY_USER,ae[be].coords)<Re&&(Ce=!0);if(!Ce)return Se}return Se}},coordsOnArc:function(se,ae){var ce=this.rad(se.radiuspoint,se.center,ae.usrCoords.slice(1)),ue=0,de=this.rad(se.radiuspoint,se.center,se.anglepoint),me=se.evalVisProp("selection");return(me==="minor"&&de>Math.PI||me==="major"&&de<Math.PI)&&(ue=de,de=2*Math.PI),!(ce<ue||ce>de)},meet:function(se,ae,ce,ue){var de=te.A.eps;return Math.abs(se[3])<de&&Math.abs(ae[3])<de?this.meetLineLine(se,ae,ce,ue):Math.abs(se[3])>=de&&Math.abs(ae[3])<de?this.meetLineCircle(ae,se,ce,ue):Math.abs(se[3])<de&&Math.abs(ae[3])>=de?this.meetLineCircle(se,ae,ce,ue):this.meetCircleCircle(se,ae,ce,ue)},meetLineBoard:function(se,ae,ce){var ue,de,me,fe,_e=[];for(re.A.exists(ce)||(ce=0),_e[0]=te.A.crossProduct(se,[ce,0,1]),_e[1]=te.A.crossProduct(se,[ce,1,0]),_e[2]=te.A.crossProduct(se,[-ce-ae.canvasHeight,0,1]),_e[3]=te.A.crossProduct(se,[-ce-ae.canvasWidth,1,0]),me=0;me<4;me++)if(Math.abs(_e[me][0])>te.A.eps){for(fe=2;fe>0;fe--)_e[me][fe]/=_e[me][0];_e[me][0]=1}return Math.abs(_e[1][0])<te.A.eps?(ue=_e[0],de=_e[2]):Math.abs(_e[0][0])<te.A.eps?(ue=_e[1],de=_e[3]):_e[1][2]<0?(ue=_e[0],de=_e[3][2]>ae.canvasHeight?_e[2]:_e[3]):_e[1][2]>ae.canvasHeight?(ue=_e[2],de=_e[3][2]<0?_e[0]:_e[3]):(ue=_e[1],de=_e[3][2]<0?_e[0]:_e[3][2]>ae.canvasHeight?_e[2]:_e[3]),[new ee.A(Q.A.COORDS_BY_SCREEN,ue.slice(1),ae),new ee.A(Q.A.COORDS_BY_SCREEN,de.slice(1),ae)]},meetLineLine:function(se,ae,ce,ue){var de=isNaN(se[5]+ae[5])?[0,0,0]:te.A.crossProduct(se,ae);return Math.abs(de[0])<1e-14&&(de[0]=0),new ee.A(Q.A.COORDS_BY_USER,de,ue)},meetLineCircle:function(se,ae,ce,ue){var de,me,fe,_e,ye,be,Se,Ce,Me;return ae[4]<te.A.eps?Math.abs(te.A.innerProduct([1,ae[6],ae[7]],se,3))<te.A.eps?new ee.A(Q.A.COORDS_BY_USER,ae.slice(6,8),ue):new ee.A(Q.A.COORDS_BY_USER,[NaN,NaN],ue):(fe=ae[0],me=ae.slice(1,3),de=ae[3],_e=se[0],ye=se.slice(1,3),be=de,(Ce=(Se=me[0]*ye[1]-me[1]*ye[0])*Se-4*be*(de*_e*_e-(me[0]*ye[0]+me[1]*ye[1])*_e+fe))>-te.A.eps*te.A.eps?(Me=[(-Se+(Ce=Math.sqrt(Math.abs(Ce))))/(2*be),(-Se-Ce)/(2*be)],re.A.evaluate(ce)===0?new ee.A(Q.A.COORDS_BY_USER,[-Me[0]*-ye[1]-_e*ye[0],-Me[0]*ye[0]-_e*ye[1]],ue):new ee.A(Q.A.COORDS_BY_USER,[-Me[1]*-ye[1]-_e*ye[0],-Me[1]*ye[0]-_e*ye[1]],ue)):new ee.A(Q.A.COORDS_BY_USER,[0,0,0],ue))},meetCircleCircle:function(se,ae,ce,ue){var de;return se[4]<te.A.eps?Math.abs(this.distance(se.slice(6,2),ae.slice(6,8))-ae[4])<te.A.eps?new ee.A(Q.A.COORDS_BY_USER,se.slice(6,8),ue):new ee.A(Q.A.COORDS_BY_USER,[0,0,0],ue):ae[4]<te.A.eps?Math.abs(this.distance(ae.slice(6,2),se.slice(6,8))-se[4])<te.A.eps?new ee.A(Q.A.COORDS_BY_USER,ae.slice(6,8),ue):new ee.A(Q.A.COORDS_BY_USER,[0,0,0],ue):(de=[ae[3]*se[0]-se[3]*ae[0],ae[3]*se[1]-se[3]*ae[1],ae[3]*se[2]-se[3]*ae[2],0,1,1/0,1/0,1/0],de=te.A.normalize(de),this.meetLineCircle(de,se,ce,ue))},meetCurveCurveDiscrete:function(se,ae,ce,ue){var de,me=re.A.evaluate(ce);return de=se.bezierDegree===3||ae.bezierDegree===3?this.meetBezierCurveRedBlueSegments(se,ae,me):this.meetCurveRedBlueSegments(se,ae,me),new ee.A(Q.A.COORDS_BY_USER,de,ue)},meetCurveCurveNewton:function(se,ae,ce,ue,de){var me,fe,_e,ye,be=.5*(Math.sqrt(5)-1),Se=te.A.eps*te.A.eps*te.A.eps,Ce=te.A.eps*te.A.eps,Me=se.maxX(),Re=se.minX(),Te=ae.maxX(),Ee=ae.minX();return me=ce[0]+(ce[1]-ce[0])*(1-be),fe=ue[0]+(ue[1]-ue[0])*(1-be),me=(ye=ie.A.generalizedDampedNewton(function(De,Le){var Ue=se.Ft(De[0]),Ge=ae.Ft(De[1]);return[Ue[1]-Ge[1],Ue[2]-Ge[2]]},function(De,Le){var Ue=te.A.eps,Ge=2*Ue,Ye=se.Ft(De[0]-Ue),ke=se.Ft(De[0]+Ue),Fe=ae.Ft(De[1]-Ue),Ve=ae.Ft(De[1]+Ue);return[[(ke[1]-Ye[1])/Ge,-(Ve[1]-Fe[1])/Ge],[(ke[2]-Ye[2])/Ge,-(Ve[2]-Fe[2])/Ge]]},2,[me,fe],.85,Se,40))[0][0],fe=ye[0][1],_e=se.Ft(me),me<ce[0]-te.A.eps||me>ce[1]+te.A.eps||fe<ue[0]-te.A.eps||fe>ue[1]+te.A.eps||de&&(me<Re-Ce||me>Me+Ce||fe<Ee-Ce||fe>Te+Ce)?[_e,me,fe,1e4]:[_e,me,fe,ye[1]]},_meetCurveCurveIterative:function(se,ae,ce,ue,de,me){var fe,_e,ye,be,Se,Ce,Me,Re,Te,Ee,De=100*te.A.eps,Le=[];if(ye=ce[0],Se=ce[1],be=ue[0],Ce=ue[1],Se<ye||Ce<be)return[];for(Te=(Se-ye)/20,Ee=(Ce-be)/20,Me=0;Me<20;Me++)for(Re=0;Re<20;Re++)if((fe=this.meetCurveCurveNewton(se,ae,[ye+Me*Te,ye+(Me+1)*Te],[be+Re*Ee,be+(Re+1)*Ee],me))[3]<te.A.eps&&(_e=fe[1],Le=Le.concat([_e]),(Le=re.A.toUniqueArrayFloat(Le,De)).length>de))return Le;return Le},meetCurveCurve:function(se,ae,ce,ue,de,me,fe){var _e,ye,be,Se,Ce,Me,Re=re.A.evaluate(ce);return de=de||se.board,me==="segment"||re.A.exists(se.dataX)||re.A.exists(ae.dataX)?this.meetCurveCurveDiscrete(se,ae,Re,de):re.A.exists(me)&&me==="newton"&&Re<0||parseInt(Re)!==Re?(_e=ie.A.generalizedNewton(se,ae,Re,ue),new ee.A(Q.A.COORDS_BY_USER,_e,de)):(be=se.minX(),Se=se.maxX(),Ce=ae.minX(),Me=ae.maxX(),(ye=this._meetCurveCurveIterative(se,ae,[be,Se],[Ce,Me],Re,fe)).length>Re?(_e=se.Ft(ye[Re]),new ee.A(Q.A.COORDS_BY_USER,_e,de)):[0,NaN,NaN])},meetCurveLine:function(se,ae,ce,ue,de){var me,fe;return re.A.exists(ue)||(ue=se.board),se.elementClass===Q.A.OBJECT_CLASS_CURVE?(me=se,fe=ae):(me=ae,fe=se),re.A.exists(me.dataX)?this.meetCurveLineDiscrete(me,fe,ce,ue,!de):this.meetCurveCurve(me,fe,ce,0,ue,"newton",!de)},meetCurveLineContinuous:function(se,ae,ce,ue,de){var me,fe,_e,ye,be,Se,Ce,Me,Re,Te,Ee,De,Le,Ue=te.A.eps,Ge=te.A.eps;for(ye=this.meetCurveLineDiscrete(se,ae,ce,ue,de),be=ye.usrCoords[1],Se=ye.usrCoords[2],me=function(Ye){var ke,Fe;return Ye>se.maxX()||Ye<se.minX()?1/0:(ke=se.X(Ye)-be)*ke+(Fe=se.Y(Ye)-Se)*Fe},fe=function(Ye){var ke=ae.stdform[0]+ae.stdform[1]*se.X(Ye)+ae.stdform[2]*se.Y(Ye);return ke*ke},Me=(se.maxX()-se.minX())/50,Re=se.minX(),Ee=1e-4,Te=NaN,De=0;De<50&&(_e=ie.A.root(me,[Math.max(Re,se.minX()),Math.min(Re+Me,se.maxX())]),!((Le=Math.abs(me(_e)))<=Ee&&(Te=_e,(Ee=Le)<Ue)));De++)Re+=Me;return _e=Te,Le=fe(_e=ie.A.root(fe,[Math.max(_e-Me,se.minX()),Math.min(_e+Me,se.maxX())])),Ce=isNaN(Le)||Math.abs(Le)>Ge?0:1,new ee.A(Q.A.COORDS_BY_USER,[Ce,se.X(_e),se.Y(_e)],ue)},meetCurveLineDiscrete:function(se,ae,ce,ue,de){var me,fe,_e,ye,be,Se,Ce,Me=re.A.evaluate(ce),Re=ae.point1.coords.usrCoords,Te=ae.point2.coords.usrCoords,Ee=0,De=se.numberPoints,Le=ae.evalVisProp("straightfirst"),Ue=ae.evalVisProp("straightlast");for(Se=new ee.A(Q.A.COORDS_BY_USER,[0,NaN,NaN],ue),Re[0]===0?Re=[1,Te[1]+ae.stdform[2],Te[2]-ae.stdform[1]]:Te[0]===0&&(Te=[1,Re[1]+ae.stdform[2],Re[2]-ae.stdform[1]]),ye=se.points[0].usrCoords,me=1;me<De;me+=se.bezierDegree)if(_e=ye.slice(0),ye=se.points[me].usrCoords,this.distance(_e,ye)>te.A.eps){for(Ce=se.bezierDegree===3?this.meetBeziersegmentBeziersegment([se.points[me-1].usrCoords.slice(1),se.points[me].usrCoords.slice(1),se.points[me+1].usrCoords.slice(1),se.points[me+2].usrCoords.slice(1)],[Re.slice(1),Te.slice(1)],de):[this.meetSegmentSegment(_e,ye,Re,Te)],fe=0;fe<Ce.length;fe++)if(0<=(be=Ce[fe])[1]&&be[1]<=1){if(Ee===Me)return de&&(!Le&&be[2]<0||!Ue&&be[2]>1)?Se:Se=new ee.A(Q.A.COORDS_BY_USER,be[0],ue);Ee+=1}}return Se},meetCurveRedBlueSegments:function(se,ae,ce){var ue,de,me,fe,_e,ye,be,Se,Ce,Me=re.A.evaluate(ce),Re=0,Te=ae.numberPoints,Ee=se.numberPoints;if(Te<=1||Ee<=1)return[0,NaN,NaN];for(ue=1;ue<Ee;ue++)for(me=se.points[ue-1].usrCoords,fe=se.points[ue].usrCoords,Se=Math.min(me[1],fe[1]),Ce=Math.max(me[1],fe[1]),ye=ae.points[0].usrCoords,de=1;de<Te;de++)if(_e=ye,ye=ae.points[de].usrCoords,Math.min(_e[1],ye[1])<Ce&&Math.max(_e[1],ye[1])>Se&&(be=this.meetSegmentSegment(me,fe,_e,ye))[1]>=0&&be[2]>=0&&(be[1]<1&&be[2]<1||ue===Ee-1&&be[1]===1||de===Te-1&&be[2]===1)){if(Re===Me)return be[0];Re++}return[0,NaN,NaN]},meetSegmentSegment:function(se,ae,ce,ue){var de,me,fe,_e=te.A.crossProduct(se,ae),ye=te.A.crossProduct(ce,ue),be=te.A.crossProduct(_e,ye);return Math.abs(be[0])<te.A.eps?[be,1/0,1/0]:(be[1]/=be[0],be[2]/=be[0],be[0]/=be[0],fe=se[me=Math.abs(ae[1]-ae[0]*se[1])<te.A.eps?2:1]/se[0],de=(be[me]-fe)/(ae[0]!==0?ae[me]/ae[0]-fe:ae[me]),fe=ce[me=Math.abs(ue[1]-ue[0]*ce[1])<te.A.eps?2:1]/ce[0],[be,de,(be[me]-fe)/(ue[0]!==0?ue[me]/ue[0]-fe:ue[me])])},meetPathPath:function(se,ae,ce,ue){var de,me,fe,_e,ye=re.A.evaluate(ce);return(fe=(de=Z.A.Math.Clip._getPath(se,ue)).length)>0&&this.distance(de[0].coords.usrCoords,de[fe-1].coords.usrCoords,3)<te.A.eps&&de.pop(),(fe=(me=Z.A.Math.Clip._getPath(ae,ue)).length)>0&&this.distance(me[0].coords.usrCoords,me[fe-1].coords.usrCoords,3)<te.A.eps*te.A.eps&&me.pop(),ce<0||Z.A.Math.Clip.isEmptyCase(de,me,"intersection")?new ee.A(Q.A.COORDS_BY_USER,[0,0,0],ue):(Z.A.Math.Clip.makeDoublyLinkedList(de),Z.A.Math.Clip.makeDoublyLinkedList(me),ye<(_e=Z.A.Math.Clip.findIntersections(de,me,ue)[0]).length?_e[ye].coords:new ee.A(Q.A.COORDS_BY_USER,[0,0,0],ue))},meetPolygonLine:function(se,ae,ce,ue,de){var me,fe,_e,ye=re.A.evaluate(ce),be=[0,0,0],Se=se.borders.length,Ce=[];for(me=0;me<Se;me++)_e=se.borders[me],fe=this.meetSegmentSegment(_e.point1.coords.usrCoords,_e.point2.coords.usrCoords,ae.point1.coords.usrCoords,ae.point2.coords.usrCoords),(!de||fe[2]>=0&&fe[2]<1)&&fe[1]>=0&&fe[1]<1&&Ce.push(fe[0]);return ye>=0&&ye<Ce.length&&(be=Ce[ye]),new ee.A(Q.A.COORDS_BY_USER,be,ue)},_bezierSplit:function(se){var ae,ce,ue,de,me,fe;return ae=[.5*(se[0][0]+se[1][0]),.5*(se[0][1]+se[1][1])],ce=[.5*(se[1][0]+se[2][0]),.5*(se[1][1]+se[2][1])],ue=[.5*(se[2][0]+se[3][0]),.5*(se[2][1]+se[3][1])],fe=[.5*((de=[.5*(ae[0]+ce[0]),.5*(ae[1]+ce[1])])[0]+(me=[.5*(ce[0]+ue[0]),.5*(ce[1]+ue[1])])[0]),.5*(de[1]+me[1])],[[se[0],ae,de,fe],[fe,me,ue,se[3]]]},_bezierBbox:function(se){var ae=[];return se.length===4?(ae[0]=Math.min(se[0][0],se[1][0],se[2][0],se[3][0]),ae[1]=Math.max(se[0][1],se[1][1],se[2][1],se[3][1]),ae[2]=Math.max(se[0][0],se[1][0],se[2][0],se[3][0]),ae[3]=Math.min(se[0][1],se[1][1],se[2][1],se[3][1])):(ae[0]=Math.min(se[0][0],se[1][0]),ae[1]=Math.max(se[0][1],se[1][1]),ae[2]=Math.max(se[0][0],se[1][0]),ae[3]=Math.min(se[0][1],se[1][1])),ae},_bezierOverlap:function(se,ae){return se[2]>=ae[0]&&se[0]<=ae[2]&&se[1]>=ae[3]&&se[3]<=ae[1]},_bezierListConcat:function(se,ae,ce,ue){var de,me=re.A.exists(ue),fe=0,_e=ae.length,ye=se.length;for(ye>0&&_e>0&&(se[ye-1][1]===1&&ae[0][1]===0||me&&se[ye-1][2]===1&&ae[0][2]===0)&&(fe=1),de=fe;de<_e;de++)me&&(ae[de][2]*=.5,ae[de][2]+=ue),ae[de][1]*=.5,ae[de][1]+=ce,se.push(ae[de])},_bezierMeetSubdivision:function(se,ae,ce){var ue,de,me,fe,_e,ye,be,Se,Ce,Me,Re,Te,Ee=[];return de=this._bezierBbox(ae),ue=this._bezierBbox(se),this._bezierOverlap(de,ue)?ce<5?(ye=(me=this._bezierSplit(se))[0],be=me[1],fe=(me=this._bezierSplit(ae))[0],_e=me[1],this._bezierListConcat(Ee,this._bezierMeetSubdivision(ye,fe,ce+1),0,0),this._bezierListConcat(Ee,this._bezierMeetSubdivision(ye,_e,ce+1),0,.5),this._bezierListConcat(Ee,this._bezierMeetSubdivision(be,fe,ce+1),.5,0),this._bezierListConcat(Ee,this._bezierMeetSubdivision(be,_e,ce+1),.5,.5),Ee):(Re=[1].concat(se[0]),Te=[1].concat(se[3]),Ce=[1].concat(ae[0]),Me=[1].concat(ae[3]),(Se=this.meetSegmentSegment(Re,Te,Ce,Me))[1]>=0&&Se[2]>=0&&Se[1]<=1&&Se[2]<=1?[Se]:[]):[]},_bezierLineMeetSubdivision:function(se,ae,ce,ue){var de,me,fe,_e,ye,be,Se,Ce,Me,Re,Te=[];return de=this._bezierBbox(ae),me=this._bezierBbox(se),ue&&!this._bezierOverlap(me,de)?[]:ce<5?(_e=(fe=this._bezierSplit(se))[0],ye=fe[1],this._bezierListConcat(Te,this._bezierLineMeetSubdivision(_e,ae,ce+1),0),this._bezierListConcat(Te,this._bezierLineMeetSubdivision(ye,ae,ce+1),.5),Te):(Me=[1].concat(se[0]),Re=[1].concat(se[3]),Se=[1].concat(ae[0]),Ce=[1].concat(ae[1]),(be=this.meetSegmentSegment(Me,Re,Se,Ce))[1]>=0&&be[1]<=1&&(!ue||be[2]>=0&&be[2]<=1)?[be]:[])},meetBeziersegmentBeziersegment:function(se,ae,ce){var ue,de,me;for((ue=se.length===4&&ae.length===4?this._bezierMeetSubdivision(se,ae,0):this._bezierLineMeetSubdivision(se,ae,0,ce)).sort(function(fe,_e){return 1e7*(fe[1]-_e[1])+(fe[2]-_e[2])}),de=[],me=0;me<ue.length;me++)me!==0&&ue[me][1]===ue[me-1][1]&&ue[me][2]===ue[me-1][2]||de.push(ue[me]);return de},meetBezierCurveRedBlueSegments:function(se,ae,ce){var ue,de,me,fe,_e,ye,be,Se,Ce,Me,Re,Te,Ee,De=re.A.evaluate(ce),Le=0,Ue=0,Ge=[];if(ae.numberPoints<ae.bezierDegree+1||se.numberPoints<se.bezierDegree+1)return[0,NaN,NaN];for(se.bezierDegree===1&&ae.bezierDegree===3&&(ye=se,se=ae,ae=ye),Te=ae.numberPoints-ae.bezierDegree,Ee=se.numberPoints-se.bezierDegree,se.type===Q.A.OBJECT_TYPE_SECTOR&&(Le=3,Ee-=3),ae.type===Q.A.OBJECT_TYPE_SECTOR&&(Ue=3,Te-=3),de=Le;de<Ee;de+=se.bezierDegree)for(be=[(ue=se.points)[de].usrCoords.slice(1),ue[de+1].usrCoords.slice(1)],se.bezierDegree===3&&(be[2]=ue[de+2].usrCoords.slice(1),be[3]=ue[de+3].usrCoords.slice(1)),Ce=this._bezierBbox(be),me=Ue;me<Te;me+=ae.bezierDegree)if(Se=[(ue=ae.points)[me].usrCoords.slice(1),ue[me+1].usrCoords.slice(1)],ae.bezierDegree===3&&(Se[2]=ue[me+2].usrCoords.slice(1),Se[3]=ue[me+3].usrCoords.slice(1)),Me=this._bezierBbox(Se),this._bezierOverlap(Ce,Me)){if((Re=this.meetBeziersegmentBeziersegment(be,Se)).length===0)continue;for(fe=0;fe<Re.length;fe++)(_e=Re[fe])[1]<-te.A.eps||_e[1]>1+te.A.eps||_e[2]<-te.A.eps||_e[2]>1+te.A.eps||Ge.push(_e);if(Ge.length>De)return Ge[De][0]}return Ge.length>De?Ge[De][0]:[0,NaN,NaN]},bezierSegmentEval:function(se,ae){var ce,ue,de,me=1-se;return ue=0,de=0,ue+=(ce=me*me*me)*ae[0][0],de+=ce*ae[0][1],ue+=(ce=3*se*me*me)*ae[1][0],de+=ce*ae[1][1],ue+=(ce=3*se*se*me)*ae[2][0],de+=ce*ae[2][1],[1,ue+=(ce=se*se*se)*ae[3][0],de+=ce*ae[3][1]]},bezierArc:function(se,ae,ce,ue,de){var me,fe,_e,ye,be,Se,Ce,Me,Re,Te,Ee,De,Le,Ue,Ge,Ye,ke,Fe,Ve=ae[1],$e=ae[2],Xe=ae[0],ze=[],qe=[];for(be=this.distance(ae,se),Ve/=Xe,$e/=Xe,Se=this.rad(se.slice(1),ae.slice(1),ce.slice(1)),de===-1&&(Se=2*Math.PI-Se),Me=Se/4,(me=se)[1]/=me[0],me[2]/=me[0],me[0]/=me[0],ye=me.slice(0),ue?(ze=[Ve,Ve+.333*(me[1]-Ve),Ve+.666*(me[1]-Ve),me[1]],qe=[$e,$e+.333*(me[2]-$e),$e+.666*(me[2]-$e),me[2]]):(ze=[me[1]],qe=[me[2]]);Se>te.A.eps;)Se>Me?(Ce=Me,Se-=Me):(Ce=Se,Se=0),Fe=[[1,0,0],[Ve*(1-(Re=Math.cos(de*Ce)))+$e*(Te=Math.sin(de*Ce)),Re,-Te],[$e*(1-Re)-Ve*Te,Te,Re]],ye=[(Ye=te.A.matVecMult(Fe,me))[0]/Ye[0],Ye[1]/Ye[0],Ye[2]/Ye[0]],Ee=me[1]-Ve,De=me[2]-$e,Le=ye[1]-Ve,Ue=ye[2]-$e,ke=te.A.hypot(Ee+Le,De+Ue),Ge=Math.abs(Ue-De)>te.A.eps?(Ee+Le)*(be/ke-.5)/(Ue-De)*8/3:(De+Ue)*(be/ke-.5)/(Ee-Le)*8/3,fe=[1,me[1]-Ge*De,me[2]+Ge*Ee],_e=[1,ye[1]+Ge*Ue,ye[2]-Ge*Le],re.A.concat(ze,[fe[1],_e[1],ye[1]]),re.A.concat(qe,[fe[2],_e[2],ye[2]]),me=ye.slice(0);return ue&&(re.A.concat(ze,[ye[1]+.333*(Ve-ye[1]),ye[1]+.666*(Ve-ye[1]),Ve]),re.A.concat(qe,[ye[2]+.333*($e-ye[2]),ye[2]+.666*($e-ye[2]),$e])),[ze,qe]},projectPointToCircle:function(se,ae,ce){var ue,de,me,fe,_e,ye=ae.center.coords.usrCoords;return re.A.exists(ce)||(ce=se.board),re.A.isPoint(se)?(ue=se.coords.distance(Q.A.COORDS_BY_USER,ae.center.coords),de=se.coords.usrCoords):(ue=se.distance(Q.A.COORDS_BY_USER,ae.center.coords),de=se.usrCoords),Math.abs(ue)<te.A.eps&&(ue=te.A.eps),_e=ae.Radius()/ue,me=ye[1]+_e*(de[1]-ye[1]),fe=ye[2]+_e*(de[2]-ye[2]),new ee.A(Q.A.COORDS_BY_USER,[me,fe],ce)},projectPointToLine:function(se,ae,ce){var ue,de=[0,ae.stdform[1],ae.stdform[2]];return re.A.exists(ce)||(ce=re.A.exists(se.coords)?se.board:ae.board),ue=re.A.exists(se.coords)?se.coords.usrCoords:se.usrCoords,de=te.A.crossProduct(de,ue),new ee.A(Q.A.COORDS_BY_USER,te.A.crossProduct(de,ae.stdform),ce)},projectCoordsToSegment:function(se,ae,ce){var ue,de=[ce[1]-ae[1],ce[2]-ae[2]],me=[se[1]-ae[1],se[2]-ae[2]];return Math.abs(de[0])<te.A.eps&&Math.abs(de[1])<te.A.eps?[ae,0]:(ue=te.A.innerProduct(me,de),[[1,(ue/=te.A.innerProduct(de,de))*de[0]+ae[1],ue*de[1]+ae[2]],ue])},projectCoordsToBeziersegment:function(se,ae,ce){var ue;return ue=Z.A.Math.Numerics.fminbr(function(de){var me=[1,ae.X(ce+de),ae.Y(ce+de)];return me[1]-=se[1],me[2]-=se[2],me[1]*me[1]+me[2]*me[2]},[0,1]),[[1,ae.X(ue+ce),ae.Y(ue+ce)],ue]},projectPointToCurve:function(se,ae,ce){re.A.exists(ce)||(ce=se.board);var ue=se.X(),de=se.Y(),me=se.position;return re.A.exists(me)||(me=ae.evalVisProp("curvetype")==="functiongraph"?ue:0),this.projectCoordsToCurve(ue,de,me,ae,ce)},projectCoordsToCurve:function(se,ae,ce,ue,de){var me,fe,_e,ye,be,Se,Ce,Me,Re,Te,Ee,De,Le,Ue,Ge,Ye,ke,Fe,Ve,$e,Xe,ze,qe,et,ot,St=Number.POSITIVE_INFINITY;if(re.A.exists(de)||(de=ue.board),ue.evalVisProp("curvetype")==="plot"){if(ce=0,be=St,me=ue.numberPoints===0?[0,1,1]:[ue.Z(0),ue.X(0),ue.Y(0)],ue.numberPoints>1)for(Me=[1,se,ae],ue.bezierDegree===3?ye=0:Ee=[ue.Z(0),ue.X(0),ue.Y(0)],_e=0;_e<ue.numberPoints-1;_e++)ue.bezierDegree===3?Le=this.projectCoordsToBeziersegment(Me,ue,ye):(De=[ue.Z(_e+1),ue.X(_e+1),ue.Y(_e+1)],Le=this.projectCoordsToSegment(Me,Ee,De)),Ce=Le[1],Re=Le[0],0<=Ce&&Ce<=1?(Se=this.distance(Re,Me),Te=_e+Ce):Ce<0?(Re=Ee,Se=this.distance(Ee,Me),Te=_e):Ce>1&&_e===ue.numberPoints-2&&(Re=De,Se=this.distance(Re,Me),Te=ue.numberPoints-1),Se<be&&(be=Se,ce=Te,me=Re),ue.bezierDegree===3?(ye++,_e+=2):Ee=De;fe=new ee.A(Q.A.COORDS_BY_USER,me,de)}else{for(et=ue.minX(),ot=ue.maxX(),ze=et,qe=ot,ue.evalVisProp("curvetype")==="functiongraph"&&(Fe=Math.abs(ae-ue.Y(se)),isNaN(Fe)||(ze=se-Fe,qe=se+Fe)),Ue=function(it){var lt,gt;return it<et||it>ue.maxX_glob?1/0:(lt=se-ue.X(it))*lt+(gt=ae-ue.Y(it))*gt},ke=Ue(ce),Ve=(qe-ze)/50,Ge=ze,_e=0;_e<50;_e++)((Ye=Ue(Ge))<ke||ke===1/0||isNaN(ke))&&(ce=Ge,ke=Ye),Ge+=Ve;for($e=Ve,_e=0;_e<20&&isNaN(Ue(ce-$e));_e++,$e*=.5);for(isNaN(Ue(ce-$e))&&($e=0),Xe=Ve,_e=0;_e<20&&isNaN(Ue(ce+Xe));_e++,Xe*=.5);isNaN(Ue(ce+Xe))&&(Xe=0),ce=(ce=(ce=ie.A.fminbr(Ue,[Math.max(ce-$e,ze),Math.min(ce+Xe,qe)]))<et?et:ce)>ot?ot:ce,fe=new ee.A(Q.A.COORDS_BY_USER,[ue.X(ce),ue.Y(ce)],de)}return[ue.updateTransform(fe),ce]},projectCoordsToPolygon:function(se,ae){var ce,ue,de,me,fe,_e=ae.vertices.length,ye=1/0;for(ce=0;ce<_e-1;ce++)0<=(de=Z.A.Math.Geometry.projectCoordsToSegment(se,ae.vertices[ce].coords.usrCoords,ae.vertices[ce+1].coords.usrCoords))[1]&&de[1]<=1?(ue=Z.A.Math.Geometry.distance(de[0],se,3),me=de[0]):de[1]<0?(ue=Z.A.Math.Geometry.distance(ae.vertices[ce].coords.usrCoords,se,3),me=ae.vertices[ce].coords.usrCoords):(ue=Z.A.Math.Geometry.distance(ae.vertices[ce+1].coords.usrCoords,se,3),me=ae.vertices[ce+1].coords.usrCoords),ue<ye&&(fe=me.slice(0),ye=ue);return fe},projectPointToTurtle:function(se,ae,ce){var ue,de,me,fe,_e,ye,be,Se,Ce,Me,Re=0,Te=0,Ee=Number.POSITIVE_INFINITY,De=ae.objects.length;for(re.A.exists(ce)||(ce=se.board),_e=0;_e<De;_e++)(be=ae.objects[_e]).elementClass===Q.A.OBJECT_CLASS_CURVE&&(ue=(Ce=this.projectPointToCurve(se,be))[0],Me=Ce[1],(ye=this.distance(ue.usrCoords,se.coords.usrCoords))<Ee&&(me=ue.usrCoords[1],fe=ue.usrCoords[2],de=Me,Ee=ye,Se=be,Te=Re),Re+=be.numberPoints);return ue=new ee.A(Q.A.COORDS_BY_USER,[me,fe],ce),[Se.updateTransform(ue),de+Te]},projectPointToPoint:function(se,ae){return ae.coords},projectPointToBoard:function(se,ae){var ce,ue,de,me=ae||se.board,fe=[[1,1,0,0,3,0,1],[-1,2,1,0,1,2,1],[-1,1,2,2,1,2,3],[1,2,3,0,3,2,3]],_e=se.coords||se,ye=me.getBoundingBox();for(ce=0;ce<4;ce++)(de=fe[ce])[0]*_e.usrCoords[de[1]]<de[0]*ye[de[2]]&&((ue=te.A.crossProduct([1,ye[de[3]],ye[de[4]]],[1,ye[de[5]],ye[de[6]]]))[3]=0,ue=te.A.normalize(ue),_e=this.projectPointToLine({coords:_e},{stdform:ue},me));return _e},distPointLine:function(se,ae){var ce,ue=ae[1],de=ae[2],me=ae[0];return Math.abs(ue)+Math.abs(de)<te.A.eps?Number.POSITIVE_INFINITY:(ce=ue*se[1]+de*se[2]+me,ue*=ue,de*=de,Math.abs(ce)/Math.sqrt(ue+de))},distPointSegment:function(se,ae,ce){var ue,de,me,fe,_e,ye,be=te.A.eps*te.A.eps,Se=1e6;return ue=(ue=se[1]-ae[1])===1/0?Se:ue===-1/0?-Se:ue,de=(de=se[2]-ae[2])===1/0?Se:de===-1/0?-Se:de,(_e=(me=(me=ce[1]-ae[1])===1/0?Se:me===-1/0?-Se:me)*me+(fe=(fe=ce[2]-ae[2])===1/0?Se:fe===-1/0?-Se:fe)*fe)>be&&((ye=(ue*me+de*fe)/_e)<0?ye=0:ye>1&&(ye=1),ue-=ye*me,de-=ye*fe),te.A.hypot(ue,de)},intersectionFunction3D:function(se,ae,ce){var ue,de=this;return ae.type===Q.A.OBJECT_TYPE_PLANE3D?ce.type===Q.A.OBJECT_TYPE_PLANE3D?ue=se.intersectionPlanePlane(ae,ce):ce.type===Q.A.OBJECT_TYPE_SPHERE3D&&(ue=de.meetPlaneSphere(ae,ce)):ae.type===Q.A.OBJECT_TYPE_SPHERE3D&&(ce.type===Q.A.OBJECT_TYPE_PLANE3D?ue=de.meetPlaneSphere(ce,ae):ce.type===Q.A.OBJECT_TYPE_SPHERE3D&&(ue=de.meetSphereSphere(ae,ce))),ue},meet3Planes:function(se,ae,ce,ue,de,me){var fe,_e,ye,be,Se,Ce=[1,0,0,0];for(fe=te.A.crossProduct(de.slice(1),se.slice(1)),_e=te.A.crossProduct(se.slice(1),ce.slice(1)),ye=te.A.crossProduct(ce.slice(1),de.slice(1)),be=te.A.innerProduct(se.slice(1),ye,3),Se=0;Se<3;Se++)Ce[Se+1]=(ae*ye[Se]+ue*fe[Se]+me*_e[Se])/be;return Ce},meetPlanePlane:function(se,ae,ce,ue){var de,me,fe,_e;return fe=se.slice(1),_e=ae.slice(1),de=te.A.crossProduct(fe,_e),fe=ce.slice(1),_e=ue.slice(1),me=te.A.crossProduct(fe,_e),(_e=te.A.crossProduct(de,me)).unshift(0),_e},meetPlaneSphere:function(se,ae){var ce=function(){return te.A.innerProduct(se.normal,ae.center.coords,4)-se.d};return[function(){return te.A.axpy(-ce(),se.normal,ae.center.coords)},se.normal,function(){var ue=ae.Radius(),de=ce();return Math.sqrt(ue*ue-de*de)}]},meetSphereSphere:function(se,ae){var ce=function(){var ue=se.center.distance(ae.center),de=se.Radius(),me=ae.Radius();return(de-me)*(de+me)/(ue*ue)};return[function(){var ue=ce();return[1,.5*((1-ue)*se.center.coords[1]+(1+ue)*ae.center.coords[1]),.5*((1-ue)*se.center.coords[2]+(1+ue)*ae.center.coords[2]),.5*((1-ue)*se.center.coords[3]+(1+ue)*ae.center.coords[3])]},function(){return ne.A.subtract(ae.center.coords,se.center.coords)},function(){var ue=se.center.distance(ae.center),de=se.Radius(),me=ae.Radius(),fe=ce(),_e=.5*(de*de+me*me-.5*ue*ue*(1+fe*fe));return Math.sqrt(_e)}]},_paramsOutOfRange:function(se,ae,ce){return se[0]<ae[0]||se[0]>ae[1]||se.length>1&&(se[1]<ce[0]||se[1]>ce[1])},projectCoordsToParametric:function(se,ae,ce,ue){var de,me,fe,_e,ye,be=.01*Math.random()+.5,Se=2*ce;return ce===1?de=.1*((_e=[re.A.evaluate(ae.range[0]),re.A.evaluate(ae.range[1])])[1]-_e[0]):ce===2&&(_e=[re.A.evaluate(ae.range_u[0]),re.A.evaluate(ae.range_u[1])],ye=[re.A.evaluate(ae.range_v[0]),re.A.evaluate(ae.range_v[1])],de=.1*Math.min(_e[1]-_e[0],ye[1]-ye[0])),me=de/5e6,fe=function(Ce,Me,Re,Te){var Ee=[ae.X.apply(ae,Re),ae.Y.apply(ae,Re),ae.Z.apply(ae,Re)],De=se[0]-Ee[0],Le=se[1]-Ee[1],Ue=se[2]-Ee[2];return Me>=2&&(Te[0]=Re[0]-_e[0],Te[1]=-Re[0]+_e[1]),Me>=4&&(Te[2]=Re[1]-ye[0],Te[3]=-Re[1]+ye[1]),De*De+Le*Le+Ue*Ue},ue.length===0&&(ue[0]=be*(_e[0]+_e[1]),ce===2&&(ue[1]=be*(ye[0]+ye[1]))),te.A.Nlp.FindMinimum(fe,ce,0,ue,de,me,0,200),se=[ae.X.apply(ae,ue),ae.Y.apply(ae,ue),ae.Z.apply(ae,ue)],this._paramsOutOfRange(ue,_e,ye)&&(ue[0]=be*(_e[0]+_e[1]),ce===2&&(ue[1]=be*(ye[0]+ye[1])),te.A.Nlp.FindMinimum(fe,ce,Se,ue,de,me,0,200)),[1,ae.X.apply(ae,ue),ae.Y.apply(ae,ue),ae.Z.apply(ae,ue)]},project3DTo3DPlane:function(se,ae,ce){var ue,de;return ce=ce||[0,0,0],ue=te.A.norm(ae),de=(te.A.innerProduct(se,ae,3)-te.A.innerProduct(ce,ae,3))/ue,te.A.axpy(-de,ae,se)},getPlaneBounds:function(se,ae,ce,ue,de){var me,fe,_e,ye,be;return se[2]+ae[0]!==0?(_e=[[se[0],ae[0]],[se[1],ae[1]]],ye=[ue-ce[0],ue-ce[1]],me=(be=ie.A.Gauss(_e,ye))[0],fe=be[1],ye=[de-ce[0],de-ce[1]],[me,(be=ie.A.Gauss(_e,ye))[0],fe,be[1]]):null},reuleauxPolygon:function(se,ae){var ce,ue=2*Math.PI,de=ue/ae,me=(ae-1)/2,fe=0,_e=function(ye,be){return function(Se,Ce){var Me=(Se%ue+ue)%ue,Re=Math.floor(Me/de)%ae;return Ce||(fe=se[0].Dist(se[me]),ce=te.A.Geometry.rad([se[0].X()+1,se[0].Y()],se[0],se[me%ae])),isNaN(Re)?Re:(Me=.5*Me+Re*de*.5+ce,se[Re][ye]()+fe*Math[be](Me))}};return[_e("X","cos"),_e("Y","sin"),0,ue]}}),_.A=te.A.Geometry},588:function(G,_,J){var Z=J(443),Q=J(477),ee=J(188);Q.A.Statistics={sum:function(te){var ne,ie=te.length,re=0;for(ne=0;ne<ie;ne++)re+=te[ne];return re},prod:function(te){var ne,ie=te.length,re=1;for(ne=0;ne<ie;ne++)re*=te[ne];return re},mean:function(te){return te.length>0?this.sum(te)/te.length:0},median:function(te){var ne,ie;return te.length>0?(ArrayBuffer.isView(te)?(ne=new Float64Array(te)).sort():(ne=te.slice(0)).sort(function(re,oe){return re-oe}),1&(ie=ne.length)?ne[parseInt(.5*ie,10)]:.5*(ne[.5*ie-1]+ne[.5*ie])):0},percentile:function(te,ne){var ie,re,oe,se,ae,ce=[];if(te.length>0){for(ArrayBuffer.isView(te)?(ie=new Float64Array(te)).sort():(ie=te.slice(0)).sort(function(ue,de){return ue-de}),re=ie.length,se=ee.A.isArray(ne)?ne:[ne],oe=0;oe<se.length;oe++)ae=re*se[oe]*.01,parseInt(ae,10)===ae?ce.push(.5*(ie[ae-1]+ie[ae])):ce.push(ie[parseInt(ae,10)]);return ee.A.isArray(ne)?ce:ce[0]}return 0},variance:function(te){var ne,ie,re,oe=te.length;if(oe>1){for(ne=this.mean(te),ie=0,re=0;re<oe;re++)ie+=(te[re]-ne)*(te[re]-ne);return ie/(te.length-1)}return 0},sd:function(te){return Math.sqrt(this.variance(te))},weightedMean:function(te,ne){if(te.length!==ne.length)throw new Error("JSXGraph error (Math.Statistics.weightedMean): Array dimension mismatch.");return te.length>0?this.mean(this.multiply(te,ne)):0},max:function(te){return Math.max.apply(this,te)},min:function(te){return Math.min.apply(this,te)},range:function(te){return[this.min(te),this.max(te)]},abs:function(te){var ne,ie,re;if(ee.A.isArray(te))if(te.map)re=te.map(Math.abs);else for(ie=te.length,re=[],ne=0;ne<ie;ne++)re[ne]=Math.abs(te[ne]);else re=ArrayBuffer.isView(te)?te.map(Math.abs):Math.abs(te);return re},add:function(te,ne){var ie,re,oe=[];if(te=ee.A.evalSlider(te),ne=ee.A.evalSlider(ne),ee.A.isArray(te)&&ee.A.isNumber(ne))for(re=te.length,ie=0;ie<re;ie++)oe[ie]=te[ie]+ne;else if(ee.A.isNumber(te)&&ee.A.isArray(ne))for(re=ne.length,ie=0;ie<re;ie++)oe[ie]=te+ne[ie];else if(ee.A.isArray(te)&&ee.A.isArray(ne))for(re=Math.min(te.length,ne.length),ie=0;ie<re;ie++)oe[ie]=te[ie]+ne[ie];else oe=te+ne;return oe},div:function(te,ne){var ie,re,oe=[];if(te=ee.A.evalSlider(te),ne=ee.A.evalSlider(ne),ee.A.isArray(te)&&ee.A.isNumber(ne))for(re=te.length,ie=0;ie<re;ie++)oe[ie]=te[ie]/ne;else if(ee.A.isNumber(te)&&ee.A.isArray(ne))for(re=ne.length,ie=0;ie<re;ie++)oe[ie]=te/ne[ie];else if(ee.A.isArray(te)&&ee.A.isArray(ne))for(re=Math.min(te.length,ne.length),ie=0;ie<re;ie++)oe[ie]=te[ie]/ne[ie];else oe=te/ne;return oe},divide:function(){Z.A.deprecated("Statistics.divide()","Statistics.div()"),Q.A.Statistics.div.apply(Q.A.Statistics,arguments)},mod:function(te,ne,ie){var re,oe,se=[],ae=function(ce,ue){return ce%ue};if((ie=ee.A.def(ie,!1))&&(ae=Q.A.mod),te=ee.A.evalSlider(te),ne=ee.A.evalSlider(ne),ee.A.isArray(te)&&ee.A.isNumber(ne))for(oe=te.length,re=0;re<oe;re++)se[re]=ae(te[re],ne);else if(ee.A.isNumber(te)&&ee.A.isArray(ne))for(oe=ne.length,re=0;re<oe;re++)se[re]=ae(te,ne[re]);else if(ee.A.isArray(te)&&ee.A.isArray(ne))for(oe=Math.min(te.length,ne.length),re=0;re<oe;re++)se[re]=ae(te[re],ne[re]);else se=ae(te,ne);return se},multiply:function(te,ne){var ie,re,oe=[];if(te=ee.A.evalSlider(te),ne=ee.A.evalSlider(ne),ee.A.isArray(te)&&ee.A.isNumber(ne))for(re=te.length,ie=0;ie<re;ie++)oe[ie]=te[ie]*ne;else if(ee.A.isNumber(te)&&ee.A.isArray(ne))for(re=ne.length,ie=0;ie<re;ie++)oe[ie]=te*ne[ie];else if(ee.A.isArray(te)&&ee.A.isArray(ne))for(re=Math.min(te.length,ne.length),ie=0;ie<re;ie++)oe[ie]=te[ie]*ne[ie];else oe=te*ne;return oe},subtract:function(te,ne){var ie,re,oe=[];if(te=ee.A.evalSlider(te),ne=ee.A.evalSlider(ne),ee.A.isArray(te)&&ee.A.isNumber(ne))for(re=te.length,ie=0;ie<re;ie++)oe[ie]=te[ie]-ne;else if(ee.A.isNumber(te)&&ee.A.isArray(ne))for(re=ne.length,ie=0;ie<re;ie++)oe[ie]=te-ne[ie];else if(ee.A.isArray(te)&&ee.A.isArray(ne))for(re=Math.min(te.length,ne.length),ie=0;ie<re;ie++)oe[ie]=te[ie]-ne[ie];else oe=te-ne;return oe},TheilSenRegression:function(te){var ne,ie,re=[],oe=[],se=[];for(ne=0;ne<te.length;ne++){for(oe.length=0,ie=0;ie<te.length;ie++)Math.abs(te[ie].usrCoords[1]-te[ne].usrCoords[1])>Q.A.eps&&(oe[ie]=(te[ie].usrCoords[2]-te[ne].usrCoords[2])/(te[ie].usrCoords[1]-te[ne].usrCoords[1]));re[ne]=this.median(oe),se.push(te[ne].usrCoords[2]-re[ne]*te[ne].usrCoords[1])}return[this.median(se),this.median(re),-1]},generateGaussian:function(te,ne){var ie,re,oe;if(this.hasSpare)return this.hasSpare=!1,this.spare*ne+te;do oe=(ie=2*Math.random()-1)*ie+(re=2*Math.random()-1)*re;while(oe>=1||oe===0);return oe=Math.sqrt(-2*Math.log(oe)/oe),this.spare=re*oe,this.hasSpare=!0,te+ne*ie*oe},randomNormal:function(te,ne){return this.generateGaussian(te,ne)},randomUniform:function(te,ne){return Math.random()*(ne-te)+te},randomExponential:function(te){var ne;if(te<=0)return NaN;do ne=Math.random();while(ne===0);return-Math.log(ne)/te},randomGamma:function(te,ne,ie){var re,oe,se,ae,ce,ue;if(te<=0)return NaN;if(ne=ne||1,ie=ie||0,te===1)return ne*this.randomExponential(1)+ie;if(te<1){ce=Math.E/(te+Math.E);do{re=Math.random();do oe=Math.random();while(oe===0);re<ce?(se=Math.pow(oe,1/te),ue=Math.exp(-se)):(se=1-Math.log(oe),ue=Math.pow(se,te-1)),re=Math.random()}while(re>=ue);return ne*se+ie}do ae=Math.tan(Math.PI*Math.random()),(se=Math.sqrt(2*te-1)*ae+te-1)>0&&(oe=Math.random());while(se<=0||oe>(1+ae*ae)*Math.exp((te-1)*Math.log(se/(te-1))-Math.sqrt(2*te-1)*ae));return ne*se+ie},randomBeta:function(te,ne){var ie;return te<=0||ne<=0?NaN:(ie=this.randomGamma(te))/(ie+this.randomGamma(ne))},randomChisquare:function(te){return te<=0?NaN:2*this.randomGamma(.5*te)},randomF:function(te,ne){return te<=0||ne<=0?NaN:this.randomChisquare(te)*ne/(this.randomChisquare(ne)*te)},randomT:function(te){var ne,ie;return te<=0?NaN:(ne=this.randomNormal(0,1),ie=this.randomChisquare(te),ne/Math.sqrt(ie/te))},randomBinomial:function(te,ne){var ie,re,oe,se,ae;if(ne<0||ne>1||te<0)return NaN;if(ne===0)return 0;if(ne===1)return te;if(te===0)return 0;if(te===1)return Math.random()<ne?1:0;if(ne>.5)return te-this.randomBinomial(te,1-ne);if(te<100){if(ie=-1,re=0,(oe=Math.log(1-ne))===0)return 0;do ie+=1,re+=Math.floor(Math.log(Math.random())/oe)+1;while(re<te)}else ae=te-(se=1+Math.floor(.5*te))+1,ie=(ie=this.randomBeta(se,ae))>=ne?this.randomBinomial(se-1,ne/ie):se+this.randomBinomial(ae-1,(ne-ie)/(1-ie));return ie},randomGeometric:function(te){var ne;return te<0||te>1?NaN:(ne=Math.random(),Math.ceil(Math.log(ne)/Math.log(1-te)))},randomPoisson:function(te){var ne,ie,re=Math.exp(-te),oe=0,se=1;if(te<=0)return NaN;if(te<10){do se*=Math.random(),oe+=1;while(se>re);ne=oe-1}else oe=Math.floor(.875*te),ne=(ie=this.randomGamma(oe))<te?oe+this.randomPoisson(te-ie):this.randomBinomial(oe-1,te/ie);return ne},randomPareto:function(te,ne){var ie=Math.random();return te<=0||ne<=0?NaN:ne*Math.pow(1-ie,-1/te)},randomHypergeometric:function(te,ne,ie){var re,oe,se,ae=te+ne-ie,ce=Math.min(te,ne),ue=ce;if(te<1||ne<1||ie>te+ne)return NaN;for(re=ie;ue*re>0;)oe=Math.random(),ue-=Math.floor(oe+ue/(ae+re)),re-=1;return se=ce-ue,te<=ne?se:ie-se},histogram:function(te,ne){var ie,re,oe,se,ae,ce,ue,de,me,fe=[],_e=[],ye=0;for(ce=ne.bins||10,(de=ne.range||!1)===!1?(se=Math.min.apply(null,te),ae=Math.max.apply(null,te)):(se=de[0],ae=de[1]),ue=ce>0?(ae-se)/(ce-1):0,ie=0;ie<ce;ie++)fe.push(0),_e.push(se+ie*ue);for(re=te.length,ie=0;ie<re;ie++)(oe=Math.floor((te[ie]-se)/ue))>=0&&oe<ce?fe[oe]+=1:ye+=1;if(ne.density)for(me=Z.A.Math.Statistics.sum(fe)+ye,ie=0;ie<ce;ie++)fe[ie]/=me*ue;if(ne.cumulative){if(ne.density)for(ie=0;ie<ce;ie++)fe[ie]*=ue;for(ie=1;ie<ce;ie++)fe[ie]+=fe[ie-1]}return[fe,_e]}},_.A=Q.A.Statistics},713:function(G,_,J){var Z=J(443),Q=J(188),ee=J(561),te=J(904);Z.A.Expect={each:function(ne,ie,re){var oe,se,ae=[];if(Q.A.exists(ne.length))for(se=ne.length,oe=0;oe<se;oe++)ae.push(ie.call(this,ne[oe],re));return ae},coords:function(ne,ie){var re=ne;return ne&&ne.elementClass===ee.A.OBJECT_CLASS_POINT?re=ne.coords:ne.usrCoords&&ne.scrCoords&&ne.usr2screen&&(re=ne),ie&&(re=new te.A(ee.A.COORDS_BY_USER,re.usrCoords,re.board)),re},coordsArray:function(ne,ie){var re;return(re=Q.A.isArray(ne)?ne:this.coords(ne).usrCoords).length<3&&re.unshift(1),ie&&(re=[re[0],re[1],re[2]]),re}},_.A=Z.A.Expect},733:function(G,_,J){var Z=J(443),Q=J(477),ee=J(188);Z.A.Math.DoubleBits=function(){var ie,re,oe,se,ae,ce,ue,de,me=new Float64Array(1),fe=new Uint32Array(me.buffer);Float64Array!==void 0&&(me[0]=1,fe[1]===1072693248?(ie=function(_e){return me[0]=_e,[fe[0],fe[1]]},re=function(_e,ye){return fe[0]=_e,fe[1]=ye,me[0]},oe=function(_e){return me[0]=_e,fe[0]},se=function(_e){return me[0]=_e,fe[1]},this.doubleBits=ie,this.pack=re,this.lo=oe,this.hi=se):fe[0]===1072693248&&(ae=function(_e){return me[0]=_e,[fe[1],fe[0]]},ce=function(_e,ye){return fe[1]=_e,fe[0]=ye,me[0]},ue=function(_e){return me[0]=_e,fe[1]},de=function(_e){return me[0]=_e,fe[0]},this.doubleBits=ae,this.pack=ce,this.lo=ue,this.hi=de))},Z.A.extend(Z.A.Math.DoubleBits.prototype,{sign:function(ie){return this.hi(ie)>>>31},exponent:function(ie){return(this.hi(ie)<<1>>>21)-1023},fraction:function(ie){var re=this.lo(ie),oe=this.hi(ie),se=1048575&oe;return 2146435072&oe&&(se+=1048576),[re,se]},denormalized:function(ie){return!(2146435072&this.hi(ie))}});var te=new Z.A.Math.DoubleBits,ne=function(ie,re){if(ie!==void 0&&re!==void 0){if(Q.A.IntervalArithmetic.isInterval(ie)){if(!Q.A.IntervalArithmetic.isSingleton(ie))throw new TypeError("JXG.Math.IntervalArithmetic: interval `lo` must be a singleton");this.lo=ie.lo}else this.lo=ie;if(Q.A.IntervalArithmetic.isInterval(re)){if(!Q.A.IntervalArithmetic.isSingleton(re))throw new TypeError("JXG.Math.IntervalArithmetic: interval `hi` must be a singleton");this.hi=re.hi}else this.hi=re}else{if(ie!==void 0)return Array.isArray(ie)?new ne(ie[0],ie[1]):new ne(ie,ie);this.lo=this.hi=0}};Z.A.extend(ne.prototype,{print:function(){console.log("[",this.lo,this.hi,"]")},set:function(ie,re){return this.lo=ie,this.hi=re,this},bounded:function(ie,re){return this.set(Q.A.IntervalArithmetic.prev(ie),Q.A.IntervalArithmetic.next(re))},boundedSingleton:function(ie){return this.bounded(ie,ie)},assign:function(ie,re){if(typeof ie!="number"||typeof re!="number")throw new TypeError("JXG.Math.Interval#assign: arguments must be numbers");return isNaN(ie)||isNaN(re)||ie>re?this.setEmpty():this.set(ie,re)},setEmpty:function(){return this.set(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},setWhole:function(){return this.set(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY)},open:function(ie,re){return this.assign(Q.A.IntervalArithmetic.next(ie),Q.A.IntervalArithmetic.prev(re))},halfOpenLeft:function(ie,re){return this.assign(Q.A.IntervalArithmetic.next(ie),re)},halfOpenRight:function(ie,re){return this.assign(ie,Q.A.IntervalArithmetic.prev(re))},toArray:function(){return[this.lo,this.hi]},clone:function(){return new ne().set(this.lo,this.hi)}}),Z.A.Math.IntervalArithmetic={Interval:function(ie,re){return new ne(ie,re)},isInterval:function(ie){return ie!==null&&typeof ie=="object"&&typeof ie.lo=="number"&&typeof ie.hi=="number"},isSingleton:function(ie){return ie.lo===ie.hi},add:function(ie,re){return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),ee.A.isNumber(re)&&(re=this.Interval(re)),new ne(this.addLo(ie.lo,re.lo),this.addHi(ie.hi,re.hi))},sub:function(ie,re){return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),ee.A.isNumber(re)&&(re=this.Interval(re)),new ne(this.subLo(ie.lo,re.hi),this.subHi(ie.hi,re.lo))},mul:function(ie,re){var oe,se,ae,ce,ue;return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),ee.A.isNumber(re)&&(re=this.Interval(re)),this.isEmpty(ie)||this.isEmpty(re)?this.EMPTY.clone():(oe=ie.lo,se=ie.hi,ae=re.lo,ce=re.hi,ue=new ne,oe<0?se>0?ae<0?ce>0?(ue.lo=Math.min(this.mulLo(oe,ce),this.mulLo(se,ae)),ue.hi=Math.max(this.mulHi(oe,ae),this.mulHi(se,ce))):(ue.lo=this.mulLo(se,ae),ue.hi=this.mulHi(oe,ae)):ce>0?(ue.lo=this.mulLo(oe,ce),ue.hi=this.mulHi(se,ce)):(ue.lo=0,ue.hi=0):ae<0?ce>0?(ue.lo=this.mulLo(oe,ce),ue.hi=this.mulHi(oe,ae)):(ue.lo=this.mulLo(se,ce),ue.hi=this.mulHi(oe,ae)):ce>0?(ue.lo=this.mulLo(oe,ce),ue.hi=this.mulHi(se,ae)):(ue.lo=0,ue.hi=0):se>0?ae<0?ce>0?(ue.lo=this.mulLo(se,ae),ue.hi=this.mulHi(se,ce)):(ue.lo=this.mulLo(se,ae),ue.hi=this.mulHi(oe,ce)):ce>0?(ue.lo=this.mulLo(oe,ae),ue.hi=this.mulHi(se,ce)):(ue.lo=0,ue.hi=0):(ue.lo=0,ue.hi=0),ue)},div:function(ie,re){return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),ee.A.isNumber(re)&&(re=this.Interval(re)),this.isEmpty(ie)||this.isEmpty(re)?this.EMPTY.clone():this.zeroIn(re)?re.lo!==0?re.hi!==0?this.divZero(ie):this.divNegative(ie,re.lo):re.hi!==0?this.divPositive(ie,re.hi):this.EMPTY.clone():this.divNonZero(ie,re)},positive:function(ie){return new ne(ie.lo,ie.hi)},negative:function(ie){return ee.A.isNumber(ie)?new ne(-ie):new ne(-ie.hi,-ie.lo)},isEmpty:function(ie){return ie.lo>ie.hi},isWhole:function(ie){return ie.lo===-1/0&&ie.hi===1/0},zeroIn:function(ie){return this.hasValue(ie,0)},hasValue:function(ie,re){return!this.isEmpty(ie)&&ie.lo<=re&&re<=ie.hi},hasInterval:function(ie,re){return!!this.isEmpty(ie)||!this.isEmpty(re)&&re.lo<=ie.lo&&ie.hi<=re.hi},intervalsOverlap:function(ie,re){return!this.isEmpty(ie)&&!this.isEmpty(re)&&(ie.lo<=re.lo&&re.lo<=ie.hi||re.lo<=ie.lo&&ie.lo<=re.hi)},divNonZero:function(ie,re){var oe=ie.lo,se=ie.hi,ae=re.lo,ce=re.hi,ue=new ne;return se<0?ce<0?(ue.lo=this.divLo(se,ae),ue.hi=this.divHi(oe,ce)):(ue.lo=this.divLo(oe,ae),ue.hi=this.divHi(se,ce)):oe<0?ce<0?(ue.lo=this.divLo(se,ce),ue.hi=this.divHi(oe,ce)):(ue.lo=this.divLo(oe,ae),ue.hi=this.divHi(se,ae)):ce<0?(ue.lo=this.divLo(se,ce),ue.hi=this.divHi(oe,ae)):(ue.lo=this.divLo(oe,ce),ue.hi=this.divHi(se,ae)),ue},divPositive:function(ie,re){return ie.lo===0&&ie.hi===0?ie:this.zeroIn(ie)?this.WHOLE:ie.hi<0?new ne(Number.NEGATIVE_INFINITY,this.divHi(ie.hi,re)):new ne(this.divLo(ie.lo,re),Number.POSITIVE_INFINITY)},divNegative:function(ie,re){return ie.lo===0&&ie.hi===0?ie:this.zeroIn(ie)?this.WHOLE:ie.hi<0?new ne(this.divLo(ie.hi,re),Number.POSITIVE_INFINITY):new ne(Number.NEGATIVE_INFINITY,this.divHi(ie.lo,re))},divZero:function(ie){return ie.lo===0&&ie.hi===0?ie:this.WHOLE},fmod:function(ie,re){var oe,se;return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),ee.A.isNumber(re)&&(re=this.Interval(re)),this.isEmpty(ie)||this.isEmpty(re)?this.EMPTY.clone():(oe=ie.lo<0?re.lo:re.hi,se=(se=ie.lo/oe)<0?Math.ceil(se):Math.floor(se),this.sub(ie,this.mul(re,new ne(se))))},multiplicativeInverse:function(ie){return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),this.isEmpty(ie)?this.EMPTY.clone():this.zeroIn(ie)?ie.lo!==0?ie.hi!==0?this.WHOLE:new ne(Number.NEGATIVE_INFINITY,this.divHi(1,ie.lo)):ie.hi!==0?new ne(this.divLo(1,ie.hi),Number.POSITIVE_INFINITY):this.EMPTY.clone():new ne(this.divLo(1,ie.hi),this.divHi(1,ie.lo))},pow:function(ie,re){var oe,se;if(ee.A.isNumber(ie)&&(ie=this.Interval(ie)),this.isEmpty(ie))return this.EMPTY.clone();if(this.isInterval(re)){if(!this.isSingleton(re))return this.EMPTY.clone();re=re.lo}return re===0?ie.lo===0&&ie.hi===0?this.EMPTY.clone():this.ONE.clone():re<0?this.pow(this.multiplicativeInverse(ie),-re):re%1==0?ie.hi<0?(oe=this.powLo(-ie.hi,re),se=this.powHi(-ie.lo,re),1&~re?new ne(oe,se):new ne(-se,-oe)):ie.lo<0?1&~re?new ne(0,this.powHi(Math.max(-ie.lo,ie.hi),re)):new ne(-this.powLo(-ie.lo,re),this.powHi(ie.hi,re)):new ne(this.powLo(ie.lo,re),this.powHi(ie.hi,re)):(console.warn("power is not an integer, you should use nth-root instead, returning an empty interval"),this.EMPTY.clone())},sqrt:function(ie){return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),this.nthRoot(ie,2)},nthRoot:function(ie,re){var oe,se,ae,ce,ue;if(ee.A.isNumber(ie)&&(ie=this.Interval(ie)),this.isEmpty(ie)||re<0)return this.EMPTY.clone();if(this.isInterval(re)){if(!this.isSingleton(re))return this.EMPTY.clone();re=re.lo}return oe=1/re,ie.hi<0?re%1!=0||1&~re?this.EMPTY.clone():(se=this.powHi(-ie.lo,oe),ae=this.powLo(-ie.hi,oe),new ne(-se,-ae)):ie.lo<0?(ce=this.powHi(ie.hi,oe),re%1!=0||1&~re?new ne(0,ce):(ue=-this.powHi(-ie.lo,oe),new ne(ue,ce))):new ne(this.powLo(ie.lo,oe),this.powHi(ie.hi,oe))},exp:function(ie){return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),this.isEmpty(ie)?this.EMPTY.clone():new ne(this.expLo(ie.lo),this.expHi(ie.hi))},log:function(ie){var re;return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),this.isEmpty(ie)?this.EMPTY.clone():(re=ie.lo<=0?Number.NEGATIVE_INFINITY:this.logLo(ie.lo),new ne(re,this.logHi(ie.hi)))},ln:function(ie){return this.log(ie)},log10:function(ie){return this.isEmpty(ie)?this.EMPTY.clone():this.div(this.log(ie),this.log(new ne(10,10)))},log2:function(ie){return this.isEmpty(ie)?this.EMPTY.clone():this.div(this.log(ie),this.log(new ne(2,2)))},hull:function(ie,re){var oe=this.isEmpty(ie),se=this.isEmpty(re);return oe&&se?this.EMPTY.clone():oe?re.clone():se?ie.clone():new ne(Math.min(ie.lo,re.lo),Math.max(ie.hi,re.hi))},intersection:function(ie,re){var oe,se;return this.isEmpty(ie)||this.isEmpty(re)?this.EMPTY.clone():(oe=Math.max(ie.lo,re.lo))<=(se=Math.min(ie.hi,re.hi))?new ne(oe,se):this.EMPTY.clone()},union:function(ie,re){if(!this.intervalsOverlap(ie,re))throw new Error("Interval#unions do not overlap");return new ne(Math.min(ie.lo,re.lo),Math.max(ie.hi,re.hi))},difference:function(ie,re){if(this.isEmpty(ie)||this.isWhole(re))return this.EMPTY.clone();if(this.intervalsOverlap(ie,re)){if(ie.lo<re.lo&&re.hi<ie.hi)throw new Error("Interval.difference: difference creates multiple intervals");return re.lo<=ie.lo&&re.hi===1/0||re.hi>=ie.hi&&re.lo===-1/0?this.EMPTY.clone():re.lo<=ie.lo?new ne().halfOpenLeft(re.hi,ie.hi):new ne().halfOpenRight(ie.lo,re.lo)}return ie.clone()},width:function(ie){return this.isEmpty(ie)?0:this.subHi(ie.hi,ie.lo)},abs:function(ie){return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),this.isEmpty(ie)?this.EMPTY.clone():ie.lo>=0?ie.clone():ie.hi<=0?this.negative(ie):new ne(0,Math.max(-ie.lo,ie.hi))},max:function(ie,re){var oe=this.isEmpty(ie),se=this.isEmpty(re);return oe&&se?this.EMPTY.clone():oe?re.clone():se?ie.clone():new ne(Math.max(ie.lo,re.lo),Math.max(ie.hi,re.hi))},min:function(ie,re){var oe=this.isEmpty(ie),se=this.isEmpty(re);return oe&&se?this.EMPTY.clone():oe?re.clone():se?ie.clone():new ne(Math.min(ie.lo,re.lo),Math.min(ie.hi,re.hi))},onlyInfinity:function(ie){return!isFinite(ie.lo)&&ie.lo===ie.hi},_handleNegative:function(ie){var re;return ie.lo<0&&(ie.lo===-1/0?(ie.lo=0,ie.hi=1/0):(re=Math.ceil(-ie.lo/this.piTwiceLow),ie.lo+=this.piTwiceLow*re,ie.hi+=this.piTwiceLow*re)),ie},cos:function(ie){var re,oe,se,ae,ce,ue,de,me;return this.isEmpty(ie)||this.onlyInfinity(ie)?this.EMPTY.clone():(re=new ne().set(ie.lo,ie.hi),this._handleNegative(re),oe=this.PI_TWICE,se=this.fmod(re,oe),this.width(se)>=oe.lo?new ne(-1,1):se.lo>=this.piHigh?(ae=this.cos(this.sub(se,this.PI)),this.negative(ae)):(ce=se.lo,ue=se.hi,de=this.cosLo(ue),me=this.cosHi(ce),ue<=this.piLow?new ne(de,me):ue<=oe.lo?new ne(-1,Math.max(de,me)):new ne(-1,1)))},sin:function(ie){return this.isEmpty(ie)||this.onlyInfinity(ie)?this.EMPTY.clone():this.cos(this.sub(ie,this.PI_HALF))},tan:function(ie){var re,oe,se;return this.isEmpty(ie)||this.onlyInfinity(ie)?this.EMPTY.clone():(re=new ne().set(ie.lo,ie.hi),this._handleNegative(re),se=this.PI,(oe=this.fmod(re,se)).lo>=this.piHalfLow&&(oe=this.sub(oe,se)),oe.lo<=-this.piHalfLow||oe.hi>=this.piHalfLow?this.WHOLE.clone():new ne(this.tanLo(oe.lo),this.tanHi(oe.hi)))},asin:function(ie){var re,oe;return this.isEmpty(ie)||ie.hi<-1||ie.lo>1?this.EMPTY.clone():(re=ie.lo<=-1?-this.piHalfHigh:this.asinLo(ie.lo),oe=ie.hi>=1?this.piHalfHigh:this.asinHi(ie.hi),new ne(re,oe))},acos:function(ie){var re,oe;return this.isEmpty(ie)||ie.hi<-1||ie.lo>1?this.EMPTY.clone():(re=ie.hi>=1?0:this.acosLo(ie.hi),oe=ie.lo<=-1?this.piHigh:this.acosHi(ie.lo),new ne(re,oe))},acot:function(ie){return this.isEmpty(ie)?this.EMPTY.clone():new ne(this.acotLo(ie.lo),this.acotHi(ie.hi))},atan:function(ie){return this.isEmpty(ie)?this.EMPTY.clone():new ne(this.atanLo(ie.lo),this.atanHi(ie.hi))},sinh:function(ie){return this.isEmpty(ie)?this.EMPTY.clone():new ne(this.sinhLo(ie.lo),this.sinhHi(ie.hi))},cosh:function(ie){return this.isEmpty(ie)?this.EMPTY.clone():ie.hi<0?new ne(this.coshLo(ie.hi),this.coshHi(ie.lo)):ie.lo>=0?new ne(this.coshLo(ie.lo),this.coshHi(ie.hi)):new ne(1,this.coshHi(-ie.lo>ie.hi?ie.lo:ie.hi))},tanh:function(ie){return this.isEmpty(ie)?this.EMPTY.clone():new ne(this.tanhLo(ie.lo),this.tanhHi(ie.hi))},equal:function(ie,re){return this.isEmpty(ie)?this.isEmpty(re):!this.isEmpty(re)&&ie.lo===re.lo&&ie.hi===re.hi},notEqual:function(ie,re){return this.isEmpty(ie)?!this.isEmpty(re):this.isEmpty(re)||ie.hi<re.lo||ie.lo>re.hi},lt:function(ie,re){return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),ee.A.isNumber(re)&&(re=this.Interval(re)),!this.isEmpty(ie)&&!this.isEmpty(re)&&ie.hi<re.lo},gt:function(ie,re){return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),ee.A.isNumber(re)&&(re=this.Interval(re)),!this.isEmpty(ie)&&!this.isEmpty(re)&&ie.lo>re.hi},leq:function(ie,re){return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),ee.A.isNumber(re)&&(re=this.Interval(re)),!this.isEmpty(ie)&&!this.isEmpty(re)&&ie.hi<=re.lo},geq:function(ie,re){return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),ee.A.isNumber(re)&&(re=this.Interval(re)),!this.isEmpty(ie)&&!this.isEmpty(re)&&ie.lo>=re.hi},piLow:3.141592653589793,piHigh:3.1415926535897936,piHalfLow:1.5707963267948966,piHalfHigh:1.5707963267948968,piTwiceLow:6.283185307179586,piTwiceHigh:6.283185307179587,identity:function(ie){return ie},_prev:function(ie){return ie===1/0?ie:this.nextafter(ie,-1/0)},_next:function(ie){return ie===-1/0?ie:this.nextafter(ie,1/0)},prev:function(ie){return this._prev(ie)},next:function(ie){return this._next(ie)},toInteger:function(ie){return ie<0?Math.ceil(ie):Math.floor(ie)},addLo:function(ie,re){return this.prev(ie+re)},addHi:function(ie,re){return this.next(ie+re)},subLo:function(ie,re){return this.prev(ie-re)},subHi:function(ie,re){return this.next(ie-re)},mulLo:function(ie,re){return this.prev(ie*re)},mulHi:function(ie,re){return this.next(ie*re)},divLo:function(ie,re){return this.prev(ie/re)},divHi:function(ie,re){return this.next(ie/re)},intLo:function(ie){return this.toInteger(this.prev(ie))},intHi:function(ie){return this.toInteger(this.next(ie))},logLo:function(ie){return this.prev(Math.log(ie))},logHi:function(ie){return this.next(Math.log(ie))},expLo:function(ie){return this.prev(Math.exp(ie))},expHi:function(ie){return this.next(Math.exp(ie))},sinLo:function(ie){return this.prev(Math.sin(ie))},sinHi:function(ie){return this.next(Math.sin(ie))},cosLo:function(ie){return this.prev(Math.cos(ie))},cosHi:function(ie){return this.next(Math.cos(ie))},tanLo:function(ie){return this.prev(Math.tan(ie))},tanHi:function(ie){return this.next(Math.tan(ie))},asinLo:function(ie){return this.prev(Math.asin(ie))},asinHi:function(ie){return this.next(Math.asin(ie))},acosLo:function(ie){return this.prev(Math.acos(ie))},acosHi:function(ie){return this.next(Math.acos(ie))},acotLo:function(ie){return this.prev(Q.A.acot(ie))},acotHi:function(ie){return this.next(Q.A.acot(ie))},atanLo:function(ie){return this.prev(Math.atan(ie))},atanHi:function(ie){return this.next(Math.atan(ie))},sinhLo:function(ie){return this.prev(Q.A.sinh(ie))},sinhHi:function(ie){return this.next(Q.A.sinh(ie))},coshLo:function(ie){return this.prev(Q.A.cosh(ie))},coshHi:function(ie){return this.next(Q.A.cosh(ie))},tanhLo:function(ie){return this.prev(Q.A.tanh(ie))},tanhHi:function(ie){return this.next(Q.A.tanh(ie))},sqrtLo:function(ie){return this.prev(Math.sqrt(ie))},sqrtHi:function(ie){return this.next(Math.sqrt(ie))},powLo:function(ie,re){var oe;if(re%1!=0)return this.prev(Math.pow(ie,re));for(oe=1&~re?1:ie,re>>=1;re>0;)ie=this.mulLo(ie,ie),1&~re||(oe=this.mulLo(ie,oe)),re>>=1;return oe},powHi:function(ie,re){var oe;if(re%1!=0)return this.next(Math.pow(ie,re));for(oe=1&~re?1:ie,re>>=1;re>0;)ie=this.mulHi(ie,ie),1&~re||(oe=this.mulHi(ie,oe)),re>>=1;return oe},disable:function(){this.next=this.prev=this.identity},enable:function(){this.prev=function(ie){return this._prev(ie)},this.next=function(ie){return this._next(ie)}},SMALLEST_DENORM:Math.pow(2,-1074),UINT_MAX:4294967295,nextafter:function(ie,re){var oe,se;return isNaN(ie)||isNaN(re)?NaN:ie===re?ie:ie===0?re<0?-this.SMALLEST_DENORM:this.SMALLEST_DENORM:(se=te.hi(ie),oe=te.lo(ie),re>ie==ie>0?oe===this.UINT_MAX?(se+=1,oe=0):oe+=1:oe===0?(oe=this.UINT_MAX,se-=1):oe-=1,te.pack(oe,se))}},Z.A.Math.IntervalArithmetic.PI=new ne(Q.A.IntervalArithmetic.piLow,Q.A.IntervalArithmetic.piHigh),Z.A.Math.IntervalArithmetic.PI_HALF=new ne(Q.A.IntervalArithmetic.piHalfLow,Q.A.IntervalArithmetic.piHalfHigh),Z.A.Math.IntervalArithmetic.PI_TWICE=new ne(Q.A.IntervalArithmetic.piTwiceLow,Q.A.IntervalArithmetic.piTwiceHigh),Z.A.Math.IntervalArithmetic.ZERO=new ne(0),Z.A.Math.IntervalArithmetic.ONE=new ne(1),Z.A.Math.IntervalArithmetic.WHOLE=new ne().setWhole(),Z.A.Math.IntervalArithmetic.EMPTY=new ne().setEmpty(),_.A=Z.A.Math.IntervalArithmetic},873:function(G,_,J){var Z=J(443),Q=J(188),ee=J(477),te={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",venetianred:"ae181e",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},ne=[{re:/^\s*rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([\d.]{1,3})\s*\)\s*$/,example:["rgba(123, 234, 45, 0.5)","rgba(255,234,245,1.0)"],process:function(ie){return[parseInt(ie[1],10),parseInt(ie[2],10),parseInt(ie[3],10)]}},{re:/^\s*rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)\s*$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(ie){return[parseInt(ie[1],10),parseInt(ie[2],10),parseInt(ie[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(ie){return[parseInt(ie[1],16),parseInt(ie[2],16),parseInt(ie[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(ie){return[parseInt(ie[1]+ie[1],16),parseInt(ie[2]+ie[2],16),parseInt(ie[3]+ie[3],16)]}}];Z.A.rgbParser=function(ie,re,oe){var se,ae,ce,ue,de,me,fe,_e,ye,be,Se=ie;if(!Q.A.exists(ie))return[];if(Q.A.exists(re)&&Q.A.exists(oe)&&(Se=[ie,re,oe]),se=Se,be=!1,Q.A.isArray(se)){for(me=0;me<3;me++)be=be||/\./.test(Se[me].toString());for(me=0;me<3;me++)be=be&&Se[me]>=0&&Se[me]<=1;return be?[Math.ceil(255*Se[0]),Math.ceil(255*Se[1]),Math.ceil(255*Se[2])]:Se}for(typeof Se=="string"&&(se=Se),se.charAt(0)==="#"&&(se=se.slice(1,7)),se=se.replace(/ /g,"").toLowerCase(),se=te[se]||se,me=0;me<ne.length;me++)ce=ne[me].re,ue=ne[me].process,(de=ce.exec(se))&&(fe=(ae=ue(de))[0],_e=ae[1],ye=ae[2]);return isNaN(fe)||isNaN(_e)||isNaN(ye)?[]:[fe=fe<0||isNaN(fe)?0:fe>255?255:fe,_e=_e<0||isNaN(_e)?0:_e>255?255:_e,ye=ye<0||isNaN(ye)?0:ye>255?255:ye]},Z.A.isColor=function(ie){var re=new Option().style;return re.color=ie,re.color!==""},Z.A.rgb2css=function(ie,re,oe){var se;return"rgb("+(se=Z.A.rgbParser(ie,re,oe))[0]+", "+se[1]+", "+se[2]+")"},Z.A.rgb2hex=function(ie,re,oe){var se,ae,ce;return ae=(se=Z.A.rgbParser(ie,re,oe))[1],ce=se[2],se=(se=se[0]).toString(16),ae=ae.toString(16),ce=ce.toString(16),se.length===1&&(se="0"+se),ae.length===1&&(ae="0"+ae),ce.length===1&&(ce="0"+ce),"#"+se+ae+ce},Z.A.hex2rgb=function(ie){return Z.A.deprecated("JXG.hex2rgb()","JXG.rgb2css()"),Z.A.rgb2css(ie)},Z.A.hsv2rgb=function(ie,re,oe){var se,ae,ce,ue,de,me,fe,_e,ye;if(ie=(ie%360+360)%360,re===0){if(!(isNaN(ie)||ie<ee.A.eps))return"#ffffff";se=oe,ae=oe,ce=oe}else switch(me=ie>=360?0:ie,fe=oe*(1-re),_e=oe*(1-re*(ue=(me/=60)-(de=Math.floor(me)))),ye=oe*(1-re*(1-ue)),de){case 0:se=oe,ae=ye,ce=fe;break;case 1:se=_e,ae=oe,ce=fe;break;case 2:se=fe,ae=oe,ce=ye;break;case 3:se=fe,ae=_e,ce=oe;break;case 4:se=ye,ae=fe,ce=oe;break;case 5:se=oe,ae=fe,ce=_e}return["#",se=(se=Math.round(255*se).toString(16)).length===2?se:se.length===1?"0"+se:"00",ae=(ae=Math.round(255*ae).toString(16)).length===2?ae:ae.length===1?"0"+ae:"00",ce=(ce=Math.round(255*ce).toString(16)).length===2?ce:ce.length===1?"0"+ce:"00"].join("")},Z.A.rgb2hsv=function(ie,re,oe){var se,ae,ce,ue,de,me,fe,_e,ye,be,Se,Ce,Me;return ae=(se=Z.A.rgbParser(ie,re,oe))[1],ce=se[2],ue=(se=se[0])/255,de=ae/255,me=ce/255,Ce=Math.max(se,ae,ce),_e=(Me=Math.min(se,ae,ce))/255,be=0,(Se=fe=Ce/255)>0&&(be=(Se-_e)/Se),ye=1/(fe-_e),be>0&&(Ce===se?ye*=de-me:ye=Ce===ae?2+(me-ue)*ye:4+(ue-de)*ye),(ye*=60)<0&&(ye+=360),Ce===Me&&(ye=0),[ye,be,Se]},Z.A.rgb2LMS=function(ie,re,oe){var se,ae,ce,ue,de,me,fe,_e=[[.05059983,.08585369,.0095242],[.01893033,.08925308,.01370054],[.00292202,.00975732,.07145979]];return ae=(se=Z.A.rgbParser(ie,re,oe))[1],ce=se[2],se=se[0],se=Math.pow(se,.476190476),ae=Math.pow(ae,.476190476),ce=Math.pow(ce,.476190476),(fe=[ue=se*_e[0][0]+ae*_e[0][1]+ce*_e[0][2],de=se*_e[1][0]+ae*_e[1][1]+ce*_e[1][2],me=se*_e[2][0]+ae*_e[2][1]+ce*_e[2][2]]).l=ue,fe.m=de,fe.s=me,fe},Z.A.LMS2rgb=function(ie,re,oe){var se,ae,ce,ue,de=[[30.830854,-29.832659,1.610474],[-6.481468,17.715578,-2.532642],[-.37569,-1.199062,14.273846]],me=function(fe){for(var _e=127,ye=64;ye>0;){if(Math.pow(_e,.476190476)>fe)_e-=ye;else{if(Math.pow(_e+1,.476190476)>fe)return _e;_e+=ye}ye/=2}return _e===254&&13.994955247<fe?255:_e};return se=ie*de[0][0]+re*de[0][1]+oe*de[0][2],ae=ie*de[1][0]+re*de[1][1]+oe*de[1][2],ce=ie*de[2][0]+re*de[2][1]+oe*de[2][2],(ue=[se=me(se),ae=me(ae),ce=me(ce)]).r=se,ue.g=ae,ue.b=ce,ue},Z.A.rgba2rgbo=function(ie){var re;return ie.length===9&&ie.charAt(0)==="#"?(re=parseInt(ie.slice(7,9).toUpperCase(),16)/255,ie=ie.slice(0,7)):re=1,[ie,re]},Z.A.rgbo2rgba=function(ie,re){var oe;return ie==="none"||ie==="transparent"?ie:((oe=Math.round(255*re).toString(16)).length===1&&(oe="0"+oe),Z.A.rgb2hex(ie)+oe)},Z.A.rgb2bw=function(ie){var re,oe,se,ae="0123456789ABCDEF";return ie==="none"?ie:(se=Z.A.rgbParser(ie),re=Math.floor(.3*se[0]+.59*se[1]+.11*se[2]),ie="#"+(oe=ae.charAt(re>>4&15)+ae.charAt(15&re))+oe+oe)},Z.A.rgb2cb=function(ie,re){var oe,se,ae,ce,ue,de,me,fe,_e,ye,be,Se="0123456789ABCDEF";if(ie==="none")return ie;switch(se=(ue=Z.A.rgb2LMS(ie))[0],ae=ue[1],ce=ue[2],re=re.toLowerCase()){case"protanopia":de=-.06150039994295001,me=.08277001656812001,fe=-.013200141220000003,_e=.05858939668799999,ye=-.07934519995360001,be=.013289415272000003,se=ce/ae<.6903216543277437?-(me*ae+fe*ce)/de:-(ye*ae+be*ce)/_e;break;case"tritanopia":de=-.00058973116217,me=.007690316482,fe=-.01011703519052,_e=.025495080838999994,ye=-.0422740347,be=.017005316784,ce=ae/se<.8349489908460004?-(de*se+me*ae)/fe:-(_e*se+ye*ae)/be;break;default:de=-.06150039994295001,me=.08277001656812001,fe=-.013200141220000003,_e=.05858939668799999,ye=-.07934519995360001,be=.013289415272000003,ae=ce/se<.5763833686400911?-(de*se+fe*ce)/me:-(_e*se+be*ce)/ye}return oe=Z.A.LMS2rgb(se,ae,ce),ie="#"+(Se.charAt(oe[0]>>4&15)+Se.charAt(15&oe[0])),ie+=Se.charAt(oe[1]>>4&15)+Se.charAt(15&oe[1]),ie+=Se.charAt(oe[2]>>4&15)+Se.charAt(15&oe[2])},Z.A.shadeColor=function(ie,re){var oe=Z.A.rgbParser(ie),se=oe[0],ae=oe[1],ce=oe[2];return se=(se=(se=parseInt(se+255*re))>0?se:0)<255?se:255,ae=(ae=(ae=parseInt(ae+255*re))>0?ae:0)<255?ae:255,ce=(ce=(ce=parseInt(ce+255*re))>0?ce:0)<255?ce:255,se=Math.round(se),ae=Math.round(ae),ce=Math.round(ce),Z.A.rgb2hex([se,ae,ce])},Z.A.lightenColor=function(ie,re){return Z.A.shadeColor(ie,re)},Z.A.darkenColor=function(ie,re){return Z.A.shadeColor(ie,-1*re)},Z.A.autoHighlight=function(ie){var re=Z.A.rgba2rgbo(ie),oe=re[0],se=re[1];return ie.charAt(0)==="#"?(se*=se<.3?1.8:.4,Z.A.rgbo2rgba(oe,se)):ie},Z.A.contrast=function(ie,re,oe,se){var ae,ce,ue,de,me;return re=re||"#000000",oe=oe||"#ffffff",se=se||7,ae=Z.A.rgbParser(ie),ce=Z.A.rgbParser("#000000"),me=(ue=.2126*Math.pow(ae[0]/255,2.2)+.7152*Math.pow(ae[1]/255,2.2)+.0722*Math.pow(ae[2]/255,2.2))>(de=.2126*Math.pow(ce[0]/255,2.2)+.7152*Math.pow(ce[1]/255,2.2)+.0722*Math.pow(ce[2]/255,2.2))?Math.floor((ue+.05)/(de+.05)):Math.floor((de+.05)/(ue+.05)),(me-=1)>se?re:oe},Z.A.setClassicColors=function(){Z.A.Options.elements.strokeColor="blue",Z.A.Options.elements.fillColor="red",Z.A.Options.hatch.strokeColor="blue",Z.A.Options.angle.fillColor="#ff7f00",Z.A.Options.angle.highlightFillColor="#ff7f00",Z.A.Options.angle.strokeColor="#ff7f00",Z.A.Options.angle.label.strokeColor="blue",Z.A.Options.arc.strokeColor="blue",Z.A.Options.circle.center.fillColor="red",Z.A.Options.circle.center.strokeColor="blue",Z.A.Options.circumcircle.strokeColor="blue",Z.A.Options.circumcircle.center.fillColor="red",Z.A.Options.circumcircle.center.strokeColor="blue",Z.A.Options.circumcirclearc.strokeColor="blue",Z.A.Options.circumcirclesector.strokeColor="blue",Z.A.Options.circumcirclesector.fillColor="green",Z.A.Options.circumcirclesector.highlightFillColor="green",Z.A.Options.conic.strokeColor="blue",Z.A.Options.curve.strokeColor="blue",Z.A.Options.incircle.strokeColor="blue",Z.A.Options.incircle.center.fillColor="red",Z.A.Options.incircle.center.strokeColor="blue",Z.A.Options.inequality.fillColor="red",Z.A.Options.integral.fillColor="red",Z.A.Options.integral.curveLeft.color="red",Z.A.Options.integral.curveRight.color="red",Z.A.Options.line.strokeColor="blue",Z.A.Options.point.fillColor="red",Z.A.Options.point.strokeColor="red",Z.A.Options.polygon.fillColor="green",Z.A.Options.polygon.highlightFillColor="green",Z.A.Options.polygon.vertices.strokeColor="red",Z.A.Options.polygon.vertices.fillColor="red",Z.A.Options.regularpolygon.fillColor="green",Z.A.Options.regularpolygon.highlightFillColor="green",Z.A.Options.regularpolygon.vertices.strokeColor="red",Z.A.Options.regularpolygon.vertices.fillColor="red",Z.A.Options.riemannsum.fillColor="yellow",Z.A.Options.sector.fillColor="green",Z.A.Options.sector.highlightFillColor="green",Z.A.Options.semicircle.center.fillColor="red",Z.A.Options.semicircle.center.strokeColor="blue",Z.A.Options.slopetriangle.fillColor="red",Z.A.Options.slopetriangle.highlightFillColor="red",Z.A.Options.turtle.arrow.strokeColor="blue"},Z.A.extend(Z.A,{paletteWong:{black:"#000000",orange:"#E69F00",skyblue:"#56B4E9",bluishgreen:"#009E73",yellow:"#F0E442",darkblue:"#0072B2",vermillion:"#D55E00",reddishpurple:"#CC79A7",blue:"#0072B2",red:"#D55E00",green:"#009E73",purple:"#CC79A7",white:"#ffffff"}}),Z.A.palette=Z.A.paletteWong,_.A=Z.A},904:function(G,_,J){var Z=J(443),Q=J(561),ee=J(454),te=J(188),ne=J(477);Z.A.Coords=function(ie,re,oe,se){this.board=oe,this.usrCoords=[],this.scrCoords=[],this.emitter=!te.A.exists(se)||se,this.emitter&&ee.A.eventify(this),this.setCoordinates(ie,re,!1,!0)},Z.A.extend(Z.A.Coords.prototype,{normalizeUsrCoords:function(){Math.abs(this.usrCoords[0])>ne.A.eps&&(this.usrCoords[1]/=this.usrCoords[0],this.usrCoords[2]/=this.usrCoords[0],this.usrCoords[0]=1)},usr2screen:function(ie){var re=Math.round,oe=this.board,se=this.usrCoords,ae=oe.origin.scrCoords;ie===!0?(this.scrCoords[0]=re(se[0]),this.scrCoords[1]=re(se[0]*ae[1]+se[1]*oe.unitX),this.scrCoords[2]=re(se[0]*ae[2]-se[2]*oe.unitY)):(this.scrCoords[0]=se[0],this.scrCoords[1]=se[0]*ae[1]+se[1]*oe.unitX,this.scrCoords[2]=se[0]*ae[2]-se[2]*oe.unitY)},screen2usr:function(){var ie=this.board.origin.scrCoords,re=this.scrCoords,oe=this.board;this.usrCoords[0]=1,this.usrCoords[1]=(re[1]-ie[1])/oe.unitX,this.usrCoords[2]=(ie[2]-re[2])/oe.unitY},distance:function(ie,re){var oe,se,ae=this.usrCoords,ce=this.scrCoords;return ie===Q.A.COORDS_BY_USER?(oe=re.usrCoords,(se=ae[0]-oe[0])*se>ne.A.eps*ne.A.eps?Number.POSITIVE_INFINITY:ne.A.hypot(ae[1]-oe[1],ae[2]-oe[2])):(oe=re.scrCoords,ne.A.hypot(ce[1]-oe[1],ce[2]-oe[2]))},setCoordinates:function(ie,re,oe,se){var ae=this.usrCoords,ce=this.scrCoords,ue=[ae[0],ae[1],ae[2]],de=[ce[0],ce[1],ce[2]];return ie===Q.A.COORDS_BY_USER?(re.length===2?(ae[0]=1,ae[1]=re[0],ae[2]=re[1]):(ae[0]=re[0],ae[1]=re[1],ae[2]=re[2],this.normalizeUsrCoords()),this.usr2screen(oe)):(re.length===2?(ce[1]=re[0],ce[2]=re[1]):(ce[1]=re[1],ce[2]=re[2]),this.screen2usr()),!this.emitter||se||de[1]===ce[1]&&de[2]===ce[2]||this.triggerEventHandlers(["update"],[ue,de]),this},copy:function(ie,re){return re===void 0&&(re=0),this[ie].slice(re)},isReal:function(){return!isNaN(this.usrCoords[1]+this.usrCoords[2])&&Math.abs(this.usrCoords[0])>ne.A.eps},__evt__update:function(ie,re){},__evt:function(){}}),_.A=Z.A.Coords},925:function(G,_,J){var Z=J(443),Q=J(561),ee=J(144),te=J(86),ne=J(133),ie=J(188),re=J(477),oe=J(102),se=function(){this._val=parseFloat(this.rendNodeRange.value),this.rendNodeOut.value=this.rendNodeRange.value,this.board.update()};Z.A.Text=function(ae,ce,ue,de){var me;this.constructor(ae,ue,Q.A.OBJECT_TYPE_TEXT,Q.A.OBJECT_CLASS_TEXT),this.element=this.board.select(ue.anchor),this.coordsConstructor(ce,this.evalVisProp("islabel")),this.content="",this.plaintext="",this.plaintextOld=null,this.orgText="",this.needsSizeUpdate=!1,this.hiddenByParent=!1,this.size=[1,1],this.id=this.board.setId(this,"T"),this.board.renderer.drawText(this),this.board.finalizeAdding(this),me=this.visProp.visible,this.visProp.visible=!0,this.setText(de),this.visProp.visible=me,ie.A.isString(this.content)&&this.notifyParents(this.content),this.elType="text",this.methodMap=ie.A.deepCopy(this.methodMap,{setText:"setTextJessieCode",move:"setCoords",Size:"getSize",setAutoPosition:"setAutoPosition"})},Z.A.Text.prototype=new ee.A,ie.A.copyPrototypeMethods(Z.A.Text,oe.A,"coordsConstructor"),Z.A.extend(Z.A.Text.prototype,{hasPoint:function(ae,ce){var ue,de,me,fe,_e,ye,be,Se;return ie.A.isObject(this.evalVisProp("precision"))?(be=this.board._inputDevice,Se=this.evalVisProp("precision."+be)):Se=this.board.options.precision.hasPoint,this.transformations.length>0&&(ae=(ue=re.A.matVecMult(re.A.inverse(this.board.renderer.joinTransforms(this,this.transformations)),[1,ae,ce]))[1],ce=ue[2]),de=(ue=(_e=this.getAnchorX())==="right"?this.coords.scrCoords[1]-this.size[0]:_e==="middle"?this.coords.scrCoords[1]-.5*this.size[0]:this.coords.scrCoords[1])+this.size[0],me=(fe=(ye=this.getAnchorY())==="top"?this.coords.scrCoords[2]+this.size[1]:ye==="middle"?this.coords.scrCoords[2]+.5*this.size[1]:this.coords.scrCoords[2])-this.size[1],this.evalVisProp("dragarea")==="all"?ae>=ue-Se&&ae<de+Se&&ce>=me-Se&&ce<=fe+Se:ce>=me-Se&&ce<=fe+Se&&(ae>=ue-Se&&ae<=ue+2*Se||ae>=de-2*Se&&ae<=de+Se)},_createFctUpdateText:function(ae){var ce,ue,de,me,fe,_e,ye=this.evalVisProp("parse"),be=this.evalVisProp("usemathjax"),Se=this.evalVisProp("usekatex"),Ce=!1;if(this.orgText=ae,ie.A.isFunction(ae))this.updateText=function(){me=ae().toString(),this.plaintext=!ye||be||Se?me:this.replaceSub(this.replaceSup(this.convertGeonextAndSketchometry2CSS(me,!1)))};else if(ie.A.isNumber(ae)&&this.evalVisProp("formatnumber")?this.evalVisProp("tofraction")?this.content=be?"\\("+ie.A.toFraction(ae,!0)+"\\)":ie.A.toFraction(ae,Se):(de=this.evalVisProp("digits"),this.useLocale()?this.content=this.formatNumberLocale(ae,de):this.content=ie.A.toFixed(ae,de)):ie.A.isString(ae)&&ye?(this.evalVisProp("useasciimathml")?this.content="'`"+ae+"`'":be||Se?(this.content=this.valueTagToJessieCode(ae),ie.A.isArray(this.content)||(this.content=this.content.replace(/\\/g,"\\\\"))):this.content=this.poorMansTeX(this.valueTagToJessieCode(ae)),Ce=!0):this.content=ae,Ce){if(ie.A.isArray(this.content)){for(_e=this,fe=0;fe<this.content.length;fe++)if(this.content[fe][0]!=='"')for(ue in this.content[fe]=this.board.jc.snippet(this.content[fe],!0,"",!1),this.content[fe].deps)this.addParents(this.content[fe].deps[ue]),this.content[fe].deps[ue].addChild(this);ce=function(){var Me,Re,Te=_e.evalVisProp("digits"),Ee="";for(Me=0;Me<_e.content.length;Me++)ie.A.isFunction(_e.content[Me])?(Re=_e.content[Me](),Re=_e.useLocale()?_e.formatNumberLocale(Re,Te):ie.A.toFixed(Re,Te)):(Re=_e.content[Me])[0]==='"'&&Re[Re.length-1]==='"'&&(Re=Re.slice(1,-1)),Ee+=Re;return Ee}}else for(ue in(ce=this.board.jc.snippet(this.content,!0,"",!1)).deps)this.addParents(ce.deps[ue]),ce.deps[ue].addChild(this);this.updateText=function(){this.plaintext=this.unescapeTicks(ce())}}else this.updateText=function(){this.plaintext=this.content}},_setText:function(ae){return this._createFctUpdateText(ae),this.updateText(),this.fullUpdate(),this.board.infobox&&this.id===this.board.infobox.id||this.updateSize(),this},setTextJessieCode:function(ae){var ce;return this.visProp.castext=ae,ce=ie.A.isFunction(ae)?function(){return ie.A.sanitizeHTML(ae())}:ie.A.isNumber(ae)?ae:ie.A.sanitizeHTML(ae),this._setText(ce)},setText:function(ae){return this._setText(ae)},updateSize:function(){var ae,ce,ue,de=this.evalVisProp("display");return ne.A.isBrowser&&this.board.renderer.type!=="no"?(ue=this.rendNode,de==="html"||this.board.renderer.type==="vml"?ie.A.exists(ue.offsetWidth)?(ce=this,window.setTimeout(function(){ce.size=[ue.offsetWidth,ue.offsetHeight],ce.needsUpdate=!0,ce.updateRenderer()},0)):this.size=this.crudeSizeEstimate():de==="internal"&&(this.board.renderer.type==="svg"?(ce=this,window.setTimeout(function(){try{ae=ue.getBBox(),ce.size=[ae.width,ae.height],ce.needsUpdate=!0,ce.updateRenderer()}catch{}},0)):this.board.renderer.type==="canvas"&&(this.size=this.crudeSizeEstimate())),this):this},crudeSizeEstimate:function(){var ae=parseFloat(this.evalVisProp("fontsize"));return[ae*this.plaintext.length*.45,.9*ae]},utf8_decode:function(ae){return ae.replace(/&#x(\w+);/g,function(ce,ue){return String.fromCharCode(parseInt(ue,16))})},replaceSub:function(ae){if(!ae.indexOf)return ae;for(var ce,ue=ae.indexOf("_{");ue>=0;)(ce=(ae=ae.slice(0,ue)+ae.slice(ue).replace(/_\{/,"<sub>")).indexOf("}",ue+4))>=0&&(ae=ae.slice(0,ce)+ae.slice(ce).replace(/\}/,"</sub>")),ue=ae.indexOf("_{");for(ue=ae.indexOf("_");ue>=0;)ue=(ae=ae.slice(0,ue)+ae.slice(ue).replace(/_(.?)/,"<sub>$1</sub>")).indexOf("_");return ae},replaceSup:function(ae){if(!ae.indexOf)return ae;for(var ce,ue=ae.indexOf("^{");ue>=0;)(ce=(ae=ae.slice(0,ue)+ae.slice(ue).replace(/\^\{/,"<sup>")).indexOf("}",ue+4))>=0&&(ae=ae.slice(0,ce)+ae.slice(ce).replace(/\}/,"</sup>")),ue=ae.indexOf("^{");for(ue=ae.indexOf("^");ue>=0;)ue=(ae=ae.slice(0,ue)+ae.slice(ue).replace(/\^(.?)/,"<sup>$1</sup>")).indexOf("^");return ae},getSize:function(){return this.size},setCoords:function(ae,ce){var ue,de,me;return ie.A.isArray(ae)&&ae.length>1&&(ce=ae[1],ae=ae[0]),this.evalVisProp("islabel")&&ie.A.exists(this.element)?(de=(ae-(ue=this.element.getLabelAnchor()).usrCoords[1])*this.board.unitX,me=-(ce-ue.usrCoords[2])*this.board.unitY,this.relativeCoords.setCoordinates(Q.A.COORDS_BY_SCREEN,[de,me])):this.coords.setCoordinates(Q.A.COORDS_BY_USER,[ae,ce]),this.fullUpdate(),this},update:function(ae){return this.needsUpdate?(this.updateCoords(ae),this.updateText(),this.evalVisProp("display")==="internal"&&ie.A.isString(this.plaintext)&&(this.plaintext=this.utf8_decode(this.plaintext)),this.checkForSizeUpdate(),this.needsSizeUpdate&&this.updateSize(),this):this},checkForSizeUpdate:function(){this.board.infobox&&this.id===this.board.infobox.id?this.needsSizeUpdate=!1:(this.needsSizeUpdate=this.plaintextOld!==this.plaintext,this.needsSizeUpdate&&(this.plaintextOld=this.plaintext))},updateRenderer:function(){return this.evalVisProp("autoposition")&&this.setAutoPosition().updateConstraint(),this.updateRendererGeneric("updateText")},expandShortMath:function(ae){return ae.replace(/([)0-9.])\s*([(a-zA-Z_])/g,"$1*$2")},generateTerm:function(ae,ce,ue){var de,me,fe,_e,ye='""';if(fe=(ae=(ae=(ae=(ae=(ae=(ae=(ae=(ae=(ae=(ae=(ae=ae||"").replace(/\r/g,"")).replace(/\n/g,"")).replace(/"/g,"'")).replace(/'/g,"\\'")).replace(/&amp;arc;/g,"&ang;")).replace(/<arc\s*\/>/g,"&ang;")).replace(/&lt;arc\s*\/&gt;/g,"&ang;")).replace(/&lt;sqrt\s*\/&gt;/g,"&radic;")).replace(/&lt;value&gt;/g,"<value>")).replace(/&lt;\/value&gt;/g,"</value>")).indexOf("<value>"),_e=ae.indexOf("</value>"),fe>=0)for(;fe>=0;)ye+=' + "'+this.replaceSub(this.replaceSup(ae.slice(0,fe)))+'"',me=(me=ae.slice(fe+7,_e)).replace(/\s+/g,""),ce===!0&&(me=this.expandShortMath(me)),(de=(de=(de=ue?me:te.A.geonext2JS(me,this.board)).replace(/\\"/g,"'")).replace(/\\'/g,"'")).indexOf("toFixed")<0&&ie.A.isNumber(ie.A.bind(this.board.jc.snippet(de,!0,"",!1),this)())?ye+="+("+de+").toFixed("+this.evalVisProp("digits")+")":ye+="+("+de+")",fe=(ae=ae.slice(_e+8)).indexOf("<value>"),_e=ae.indexOf("</value>");return ye+=' + "'+this.replaceSub(this.replaceSup(ae))+'"',ye=(ye=(ye=this.convertGeonextAndSketchometry2CSS(ye)).replace(/&amp;/g,"&")).replace(/"/g,"'")},valueTagToJessieCode:function(ae){var ce,ue,de,me,fe=[],_e='"';if(de=(ae=(ae=(ae=(ae=(ae=ae||"").replace(/\r/g,"")).replace(/\n/g,"")).replace(/&lt;value&gt;/g,"<value>")).replace(/&lt;\/value&gt;/g,"</value>")).indexOf("<value>"),me=ae.indexOf("</value>"),de>=0)for(;de>=0;)fe.push(_e+this.escapeTicks(ae.slice(0,de))+_e),ue=(ue=ae.slice(de+7,me)).replace(/\s+/g,""),ce=(ce=ue=this.expandShortMath(ue)).replace(/\\"/g,"'").replace(/\\'/g,"'"),fe.push("("+ce+")"),de=(ae=ae.slice(me+8)).indexOf("<value>"),me=ae.indexOf("</value>");for(fe.push(_e+this.escapeTicks(ae)+_e),de=0;de<fe.length;de++)fe[de]=fe[de].replace(/&amp;/g,"&");return fe},poorMansTeX:function(ae){var ce,ue;if(ie.A.isArray(ae)){for(ue=[],ce=0;ce<ae.length;ce++)ue.push(this.poorMansTeX(ae[ce]));return ue}return ae=ae.replace(/<arc\s*\/*>/g,"&ang;").replace(/&lt;arc\s*\/*&gt;/g,"&ang;").replace(/<sqrt\s*\/*>/g,"&radic;").replace(/&lt;sqrt\s*\/*&gt;/g,"&radic;"),this.convertGeonextAndSketchometry2CSS(this.replaceSub(this.replaceSup(ae)),!0)},escapeTicks:function(ae){return ae.replace(/"/g,"%22").replace(/'/g,"%27")},unescapeTicks:function(ae){return ae.replace(/%22/g,'"').replace(/%27/g,"'")},convertGeonext2CSS:function(ae){return ie.A.isString(ae)&&(ae=(ae=(ae=(ae=ae.replace(/(<|&lt;)overline(>|&gt;)/g,"<span style=text-decoration:overline;>")).replace(/(<|&lt;)\/overline(>|&gt;)/g,"</span>")).replace(/(<|&lt;)arrow(>|&gt;)/g,"<span style=text-decoration:overline;>")).replace(/(<|&lt;)\/arrow(>|&gt;)/g,"</span>")),ae},convertSketchometry2CSS:function(ae,ce){var ue='<span class="sketcho sketcho-inherit sketcho-',de='"></span>';return ie.A.isString(ae)&&(ce&&(ue=this.escapeTicks(ue),de=this.escapeTicks(de)),ae=(ae=ae.replace(/(<|&lt;)sketchofont(>|&gt;)/g,ue)).replace(/(<|&lt;)\/sketchofont(>|&gt;)/g,de)),ae},convertGeonextAndSketchometry2CSS:function(ae,ce){return ae=this.convertGeonext2CSS(ae),ae=this.convertSketchometry2CSS(ae,ce)},notifyParents:function(ae){var ce,ue=null;ae=(ae=ae.replace(/&lt;value&gt;/g,"<value>")).replace(/&lt;\/value&gt;/g,"</value>");do(ue=(ce=/<value>([\w\s*/^\-+()[\],<>=!]+)<\/value>/).exec(ae))!==null&&(te.A.findDependencies(this,ue[1],this.board),ae=(ae=ae.slice(ue.index)).replace(ce,""));while(ue!==null);return this},getParents:function(){var ae;return ae=this.relativeCoords!==void 0?[this.relativeCoords.usrCoords[1],this.relativeCoords.usrCoords[2],this.orgText]:[this.Z(),this.X(),this.Y(),this.orgText],this.parents.length!==0&&(ae=this.parents),ae},bounds:function(){var ae=this.coords.usrCoords;return this.evalVisProp("islabel")||this.board.unitY===0||this.board.unitX===0?[0,0,0,0]:[ae[1],ae[2]+this.size[1]/this.board.unitY,ae[1]+this.size[0]/this.board.unitX,ae[2]]},getAnchorX:function(){var ae=this.evalVisProp("anchorx");if(ae==="auto")switch(this.visProp.position){case"top":case"bot":return"middle";case"rt":case"lrt":case"urt":return"left";default:return"right"}return ae},getAnchorY:function(){var ae=this.evalVisProp("anchory");if(ae==="auto")switch(this.visProp.position){case"top":case"ulft":case"urt":return"bottom";case"bot":case"lrt":case"llft":return"top";default:return"middle"}return ae},getNumberOfConflicts:function(ae,ce,ue,de,me){me=me||[];var fe,_e,ye,be,Se,Ce,Me,Re,Te=0,Ee=this.board.options.precision.hasPoint;for(this.board.options.precision.hasPoint=.3*(ue+de),fe=0;fe<this.board.objectsList.length;fe++)(_e=this.board.objectsList[fe]).visPropCalc.visible&&_e!==this&&me.indexOf(_e.id)===-1&&_e.evalVisProp("ignoreforlabelautoposition")!==!0&&(be=_e.visProp.hasinnerpoints,_e.visProp.hasinnerpoints=!1,_e.visProp.islabel||_e.elementClass===Q.A.OBJECT_CLASS_POINT?(Se=(ye=_e.coords.scrCoords)[1],Ce=ye[2],Me=_e.size[0],Re=_e.size[1],_e.visProp.islabel?(_e.visProp.anchory==="top"?Ce+=Re/2:Ce-=Re/2,_e.visProp.anchorx==="left"?Se+=Me/2:Se-=Me/2):(Me=0,Re=0),Math.abs(Se-ae)<(ue+Me)/2&&Math.abs(Ce-ce)<(de+Re)/2&&Te++):_e.hasPoint(ae,ce)&&Te++,_e.visProp.hasinnerpoints=be);return this.board.options.precision.hasPoint=Ee,Te},calculateScore:function(ae,ce){var ue,de,me,fe,_e,ye,be=0,Se=[0,0],Ce=this.getSize()[0],Me=this.getSize()[1],Re=this.evalVisProp("offset"),Te=this.board.getBoundingBox();return this.evalVisProp("islabel")&&ie.A.exists(this.element)?(ye=this.element.getLabelAnchor().scrCoords,me=Math.cos(ce),fe=Math.sin(ce),ue=ye[1]+ae*me,de=ye[2]-ae*fe,me<0?(Se[0]=ue-Ce,ue-=Ce/2):(Se[0]=ue+Ce,ue+=Ce/2),fe<0?(Se[1]=de+Me,de+=Me/2):(Se[1]=de-Me,de-=Me/2),(Se[0]<0||Se[0]>(Te[2]-Te[0])*this.board.unitX||Se[1]<0||Se[1]>(Te[1]-Te[3])*this.board.unitY)&&(be-=1),be-=this.getNumberOfConflicts(ue,de,Ce,Me,ie.A.evaluate(this.visProp.autopositionwhitelist)),be-=ae/this.evalVisProp("autopositionmindistance")/10-.1,(_e=Math.atan2(Re[1],Re[0]))<0&&(_e+=2*Math.PI),be-=(me>0&&Math.cos(_e)>0&&Math.abs(ce-_e)>Math.PI?Math.abs(ce-_e-2*Math.PI):Math.abs(ce-_e))/10):0},setAutoPosition:function(){var ae,ce,ue,de,me,fe,_e,ye,be,Se,Ce,Me=-1/0,Re=this.evalVisProp("autopositionmindistance"),Te=this.evalVisProp("autopositionmaxdistance"),Ee=this.evalVisProp("offset");if(this===this.board.infobox||!this.element||!this.visPropCalc.visible||!this.evalVisProp("islabel"))return this;if(Se=Math.sqrt(Ee[0]*Ee[0]+Ee[1]*Ee[1]),Ce=Math.atan2(Ee[1],Ee[0]),this.calculateScore(Se,Ce)===0)return this;for(ae=Re,ue=(Te-Re)/3;Te-ae>-.01;){for(de=0;de<60;de++)if(ce=de/60*2*Math.PI,(_e=this.calculateScore(ae,ce))>Me&&(fe=ce,me=ae,Me=_e),Me===0){ae=Te;break}ae+=ue}return ye=Math.cos(fe),be=Math.sin(fe),this.visProp.anchorx=ye<0?"right":"left",this.visProp.anchory=be<0?"top":"bottom",this.visProp.offset=[me*ye,me*be],this}}),Z.A.createText=function(ae,ce,ue){var de,me=ie.A.copyAttributes(ue,ae.options,"text"),fe=ce.slice(0,-1),_e=ce[ce.length-1];if(me.anchor=me.parent||me.anchor,!(de=oe.A.create(Z.A.Text,ae,fe,me,_e)))throw new Error("JSXGraph: Can't create text with parent types '"+typeof ce[0]+"' and '"+typeof ce[1]+`'.
Possible parent types: [x,y], [z,x,y], [element,transformation]`);return me.rotate!==0&&de.addRotation(me.rotate),de},Z.A.registerElement("text",Z.A.createText),Z.A.createHTMLSlider=function(ae,ce,ue){var de,me,fe=ie.A.copyAttributes(ue,ae.options,"htmlslider");if(ce.length!==2||ce[0].length!==2||ce[1].length!==3)throw new Error("JSXGraph: Can't create htmlslider with parent types '"+typeof ce[0]+"' and '"+typeof ce[1]+`'.
Possible parents are: [[x,y], [min, start, max]]`);fe.anchor=fe.parent||fe.anchor,fe.fixed=fe.fixed||!0,me=[ce[0][0],ce[0][1],'<form style="display:inline"><input type="range" /><span></span><input type="text" /></form>'],(de=Z.A.createText(ae,me,fe)).type=ie.A.OBJECT_TYPE_HTMLSLIDER,de.rendNodeForm=de.rendNode.childNodes[0],de.rendNodeRange=de.rendNodeForm.childNodes[0],de.rendNodeRange.min=ce[1][0],de.rendNodeRange.max=ce[1][2],de.rendNodeRange.step=fe.step,de.rendNodeRange.value=ce[1][1],de.rendNodeLabel=de.rendNodeForm.childNodes[1],de.rendNodeLabel.id=de.rendNode.id+"_label",fe.withlabel&&(de.rendNodeLabel.innerText=de.name+"="),de.rendNodeOut=de.rendNodeForm.childNodes[2],de.rendNodeOut.value=ce[1][1];try{de.rendNodeForm.id=de.rendNode.id+"_form",de.rendNodeRange.id=de.rendNode.id+"_range",de.rendNodeOut.id=de.rendNode.id+"_out"}catch(_e){Z.A.debug(_e)}return de.rendNodeRange.style.width=fe.widthrange+"px",de.rendNodeRange.style.verticalAlign="middle",de.rendNodeOut.style.width=fe.widthout+"px",de._val=ce[1][1],Z.A.supportsVML()?ne.A.addEvent(de.rendNodeForm,"change",se,de):ne.A.addEvent(de.rendNodeForm,"input",se,de),de.Value=function(){return this._val},de},Z.A.registerElement("htmlslider",Z.A.createHTMLSlider),_.A=Z.A.Text}},__webpack_module_cache__={};function __webpack_require__(G){var _=__webpack_module_cache__[G];if(_!==void 0)return _.exports;var J=__webpack_module_cache__[G]={exports:{}};return __webpack_modules__[G](J,J.exports,__webpack_require__),J.exports}__webpack_require__.d=function(G,_){for(var J in _)__webpack_require__.o(_,J)&&!__webpack_require__.o(G,J)&&Object.defineProperty(G,J,{enumerable:!0,get:_[J]})},__webpack_require__.o=function(G,_){return Object.prototype.hasOwnProperty.call(G,_)};var __webpack_exports__={};__webpack_require__.d(__webpack_exports__,{default:function(){return src}});var jxg=__webpack_require__(443),env=__webpack_require__(133),constants=__webpack_require__(561),utils_type=__webpack_require__(188);jxg.A.XML={cleanWhitespace:function(G){for(var _=G.firstChild;utils_type.A.exists(_);)_.nodeType!==3||/\S/.test(_.nodeValue)?_.nodeType===1&&this.cleanWhitespace(_):G.removeChild(_),_=_.nextSibling},parse:function(G){var _,J;return J=typeof DOMParser=="function"||typeof DOMParser=="object"?DOMParser:function(){this.parseFromString=function(Z){var Q;return typeof ActiveXObject=="function"&&(Q=new ActiveXObject("MSXML.DomDocument")).loadXML(Z),Q}},_=new J().parseFromString(G,"text/xml"),this.cleanWhitespace(_),_}},jxg.A.XML;var utils_event=__webpack_require__(454);__webpack_require__(713);var math=__webpack_require__(477);math.A.ProbFuncs={MAXNUM:17014118346046923e22,SQRTH:.7071067811865476,SQRT2:1.4142135623730951,MAXLOG:708.3964185322641,P:[2461969814735305e-25,.5641895648310689,7.463210564422699,48.63719709856814,196.5208329560771,526.4451949954773,934.5285271719576,1027.5518868951572,557.5353353693994],Q:[13.228195115474499,86.70721408859897,354.9377788878199,975.7085017432055,1823.9091668790973,2246.3376081871097,1656.6630919416134,557.5353408177277],R:[.5641895835477551,1.275366707599781,5.019050422511805,6.160210979930536,7.4097426995044895,2.9788666537210022],S:[2.2605286322011726,9.396035249380015,12.048953980809666,17.08144507475659,9.608968090632859,3.369076451000815],T:[9.604973739870516,90.02601972038427,2232.005345946843,7003.325141128051,55592.30130103949],U:[33.56171416475031,521.3579497801527,4594.323829709801,22629.000061389095,49267.39426086359],M:128,MINV:.0078125,expx2:function(G,_){var J,Z,Q,ee;return G=Math.abs(G),_<0&&(G=-G),J=(Q=this.MINV*Math.floor(this.M*G+.5))*Q,Z=2*Q*(ee=G-Q)+ee*ee,_<0&&(J=-J,Z=-Z),J+Z>this.MAXLOG?1/0:J=Math.exp(J)*Math.exp(Z)},polevl:function(G,_,J){var Z,Q;if(utils_type.A.exists(_.reduce))return _.reduce(function(ee,te){return ee*G+te},0);for(Q=0,Z=0;Q<=J;Q++)Z=Z*G+_[Q];return Z},p1evl:function(G,_,J){var Z,Q;if(utils_type.A.exists(_.reduce))return _.reduce(function(ee,te){return ee*G+te},1);for(Q=0,Z=1;Q<J;Q++)Z=Z*G+_[Q];return Z},ndtr:function(G){var _,J,Z;return _=G*this.SQRTH,(Z=Math.abs(_))<1?J=.5+.5*this.erf(_):(J=.5*this.erfce(Z),Z=this.expx2(G,-1),J*=Math.sqrt(Z),_>0&&(J=1-J)),J},_underflow:function(G){return console.log("erfc","UNDERFLOW"),G<0?2:0},erfc:function(G){var _,J,Z,Q,ee;return(Z=G<0?-G:G)<1?1-this.erf(G):(ee=-G*G)<-this.MAXLOG?this._underflow(G):(ee=this.expx2(G,-1),Z<8?(_=this.polevl(Z,this.P,8),J=this.p1evl(Z,this.Q,8)):(_=this.polevl(Z,this.R,5),J=this.p1evl(Z,this.S,6)),Q=ee*_/J,G<0&&(Q=2-Q),Q===0?this._underflow(G):Q)},erfce:function(G){var _,J;return G<8?(_=this.polevl(G,this.P,8),J=this.p1evl(G,this.Q,8)):(_=this.polevl(G,this.R,5),J=this.p1evl(G,this.S,6)),_/J},erf:function(G){var _;return Math.abs(G)>1?1-this.erfc(G):(_=G*G,G*this.polevl(_,this.T,4)/this.p1evl(_,this.U,5))},s2pi:2.5066282746310007,P0:[-59.96335010141079,98.00107541859997,-56.67628574690703,13.931260938727968,-1.2391658386738125],Q0:[1.9544885833814176,4.676279128988815,86.36024213908905,-225.46268785411937,200.26021238006066,-82.03722561683334,15.90562251262117,-1.1833162112133],P1:[4.0554489230596245,31.525109459989388,57.16281922464213,44.08050738932008,14.684956192885803,2.1866330685079025,-.1402560791713545,-.03504246268278482,-.0008574567851546854],Q1:[15.779988325646675,45.39076351288792,41.3172038254672,15.04253856929075,2.504649462083094,-.14218292285478779,-.03808064076915783,-.0009332594808954574],P2:[3.2377489177694603,6.915228890689842,3.9388102529247444,1.3330346081580755,.20148538954917908,.012371663481782003,.00030158155350823543,26580697468673755e-22,6239745391849833e-24],Q2:[6.02427039364742,3.6798356385616087,1.3770209948908132,.21623699359449663,.013420400608854318,.00032801446468212774,28924786474538068e-22,6790194080099813e-24],ndtri:function(G){var _,J,Z,Q,ee;return G<=0?-1/0:G>=1?1/0:(ee=1,(J=G)>.8646647167633873&&(J=1-J,ee=0),J>.1353352832366127?(_=(J-=.5)+J*((Q=J*J)*this.polevl(Q,this.P0,4)/this.p1evl(Q,this.Q0,8)),_*=this.s2pi):(Z=1/(_=Math.sqrt(-2*Math.log(J))),_=_-Math.log(_)/_-(_<8?Z*this.polevl(Z,this.P1,8)/this.p1evl(Z,this.Q1,8):Z*this.polevl(Z,this.P2,8)/this.p1evl(Z,this.Q2,8)),ee!==0&&(_=-_),_))},erfi:function(G){return this.ndtri(.5*(G+1))*this.SQRTH}},math.A.ProbFuncs;var ia=__webpack_require__(733);math.A.Extrapolate={upper:15,infty:1e4,wynnEps:function(G,_,J){var Z,Q,ee,te,ne;if(J[_]=G,_===0)ne=G;else{for(ee=0,Z=_;Z>0;Z--)Q=ee,ee=J[Z-1],te=J[Z]-ee,Math.abs(te)<=1e-15?J[Z-1]=1e20:J[Z-1]=1*Q+1/te;ne=J[_%2]}return ne},aitken:function(G,_,J){var Z,Q,ee,te,ne,ie;if(J[_]=G,_<2)Z=G;else{for(te=_/2,ne=1;ne<=te;ne++)Q=J[(ie=_-2*ne)+2]-2*J[ie+1]+J[ie],Math.abs(Q)<1e-15?J[ie]=1e20:(ee=J[ie]-J[ie+1],J[ie]-=ee*ee/Q);Z=J[_%2]}return Z},brezinski:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe;if(J[_]=G,_<3)Z=G;else{for(ie=_/3,oe=_,re=1;re<=ie;re++)ee=J[(oe-=3)+1]-J[oe],te=J[oe+2]-J[oe+1],Q=(ne=J[oe+3]-J[oe+2])*(te-ee)-ee*(ne-te),Math.abs(Q)<1e-15?J[oe]=1e20:J[oe]=J[oe+1]-ee*te*(ne-te)/Q;Z=J[_%3]}return Z},iteration:function(G,_,J,Z,Q){var ee,te,ne,ie,re=NaN,oe=[],se="finite",ae=_;for(Q=Q||0,ee=1;ee<=this.upper;ee++){if(te=J(G+(ae=Q===0?_/(ee+1):.5*ae),!0),ne=this[Z](te,ee-1,oe),isNaN(ne)){se="NaN";break}if(te!==0&&ne/te>this.infty){re=ne,se="infinite";break}if(ie=ne-re,Math.abs(ie)<1e-7)break;re=ne}return[re,se,1-(ee-1)/this.upper]},levin:function(G,_,J,Z,Q,ee){var te,ne,ie,re;if(re=1/(Z+_),Q[_]=G/J,ee[_]=1/J,_>0&&(Q[_-1]=Q[_]-Q[_-1],ee[_-1]=ee[_]-ee[_-1],_>1))for(ie=(Z+_-1)*re,te=2;te<=_;te++)ne=(Z+_-te)*Math.pow(ie,te-2)*re,Q[_-te]=Q[_-te+1]-ne*Q[_-te],ee[_-te]=ee[_-te+1]-ne*ee[_-te],re*=ie;return Math.abs(ee[0])<1e-15?1e20:Q[0]/ee[0]},iteration_levin:function(G,_,J,Z){var Q,ee,te,ne,ie,re,oe,se=NaN,ae=[],ce=[],ue="finite",de=_;for(Z=Z||0,ne=J(G+_,!0),Q=1;Q<=this.upper;Q++){if(ie=(ee=J(G+(de=Z===0?_/(Q+1):.5*de),!0))-ne,oe=(Math.abs(ie)<1?"u":"t")=="u"?(1+Q)*ie:ie,ne=ee,re=(te=this.levin(ee,Q-1,oe,1,ae,ce))-se,isNaN(te)){ue="NaN";break}if(ee!==0&&te/ee>this.infty){se=te,ue="infinite";break}if(Math.abs(re)<1e-7)break;se=te}return[se,ue,1-(Q-1)/this.upper]},limit:function(G,_,J){return this.iteration_levin(G,_,J,0)}};var extrapolate=math.A.Extrapolate,geometry=__webpack_require__(571);math.A.Quadtree=function(G,_,J){_=_||{capacity:10,pointType:"coords"},this.config={},this.config.capacity=_.capacity||10,this.config.pointType=_.pointType||"coords",this.points=[],this.xlb=G[0],this.xub=G[2],this.ylb=G[3],this.yub=G[1],this.parent=J||null,this.northWest=null,this.northEast=null,this.southEast=null,this.southWest=null},utils_type.A.extend(math.A.Quadtree.prototype,{contains:function(G,_){return this.xlb<G&&G<=this.xub&&this.ylb<_&&_<=this.yub},insert:function(G){switch(this.config.pointType){case"coords":if(!this.contains(G.usrCoords[1],G.usrCoords[2]))return!1;break;case"object":if(!this.contains(G.x,G.y))return!1}return this.points.length<this.config.capacity&&this.northWest===null?(this.points.push(G),!0):(this.northWest===null&&this.subdivide(),!!this.northWest.insert(G)||!!this.northEast.insert(G)||!!this.southEast.insert(G)||!!this.southWest.insert(G))},subdivide:function(){var G=this.xlb+.5*(this.xub-this.xlb),_=this.ylb+.5*(this.yub-this.ylb);this.northWest=new math.A.Quadtree([this.xlb,this.yub,G,_],this.config,this),this.northEast=new math.A.Quadtree([G,this.yub,this.xub,_],this.config,this),this.southEast=new math.A.Quadtree([this.xlb,_,G,this.ylb],this.config,this),this.southWest=new math.A.Quadtree([G,_,this.xub,this.ylb],this.config,this)},_query:function(G,_){var J;if(this.contains(G,_)){if(this.northWest===null)return this;if((J=this.northWest._query(G,_))||(J=this.northEast._query(G,_))||(J=this.southEast._query(G,_))||(J=this.southWest._query(G,_)))return J}return!1},query:function(G,_){var J,Z;return utils_type.A.exists(_)?(J=G,Z=_):(J=G.usrCoords[1],Z=G.usrCoords[2]),this._query(J,Z)},hasPoint:function(G,_,J){var Z,Q,ee;if(this.contains(G,_)){switch(ee=this.points.length,this.config.pointType){case"coords":for(Q=0;Q<ee;Q++)if(geometry.A.distance([G,_],this.points[Q].usrCoords.slice(1),2)<J)return!0;break;case"object":for(Q=0;Q<ee;Q++)if(geometry.A.distance([G,_],[this.points[Q].x,this.points[Q].y],2)<J)return!0}if(this.northWest===null)return!1;if((Z=this.northWest.hasPoint(G,_,J))||(Z=this.northEast.hasPoint(G,_,J))||(Z=this.southEast.hasPoint(G,_,J))||(Z=this.southWest.hasPoint(G,_,J)))return Z}return!1},getAllPoints:function(){var G=[];return this.getAllPointsRecursive(G),G},getAllPointsRecursive(G){Array.prototype.push.apply(G,this.points.slice()),this.northWest!==null&&(this.northWest.getAllPointsRecursive(G),this.northEast.getAllPointsRecursive(G),this.southEast.getAllPointsRecursive(G),this.southWest.getAllPointsRecursive(G))}});var qdt=math.A.Quadtree;math.A.BoxQuadtree=function(G,_,J){var Z,Q,ee,te;G--,this.depth=G,this.capacity=_,this.items=[],this.northWest=null,this.northEast=null,this.southEast=null,this.southWest=null,this.bbox=null,this.cx=null,this.cy=null,J&&(Z=J[0],Q=J[1],ee=J[2],te=J[3],this.cx=.5*(Z+ee),this.cy=.5*(Q+te),this.bbox=[Z,Q,ee,te])},utils_type.A.extend(math.A.BoxQuadtree.prototype,{insert:function(G){var _,J,Z,Q,ee,te,ne,ie,re,oe,se,ae=[],ce=[],ue=[],de=[];if(this.bbox===null){for(J=G.length,Z=te=1/0,ee=Q=-1/0,_=0;_<G.length;_++)Z=(ne=G[_]).xlb<Z?ne.xlb:Z,Q=ne.yub>Q?ne.yub:Q,ee=ne.xub>ee?ne.xub:ee,te=ne.ylb<te?ne.ylb:te;this.cx=.5*(Z+ee),this.cy=.5*(Q+te),this.bbox=[Z,Q,ee,te]}else Z=this.bbox[0],Q=this.bbox[1],ee=this.bbox[2],te=this.bbox[3];if(this.depth===0||this.items.length+G.length<this.capacity)return this.items=this.items.concat(G),this;for(J=G.length,_=0;_<J;_++)ie=(ne=G[_]).xlb<=this.cx&&ne.yub>this.cy,oe=ne.xlb<=this.cx&&ne.ylb<=this.cy,re=ne.xub>this.cx&&ne.yub>this.cy,se=ne.xub>this.cx&&ne.ylb<=this.cy,ie&&re&&se&&oe?this.items.push(ne):(ie&&ae.push(ne),oe&&ue.push(ne),re&&ce.push(ne),se&&de.push(ne));return this.subdivide(ae,ue,ce,de,Z,Q,ee,te),this},insertItem:function(G){var _,J,Z,Q,ee,te,ne,ie,re=[],oe=[],se=[],ae=[];return this.bbox===null?(_=Q=1/0,Z=J=-1/0,_=G.xlb<_?G.xlb:_,J=G.yub>J?G.yub:J,Z=G.xub>Z?G.xub:Z,Q=G.ylb<Q?G.ylb:Q,this.cx=.5*(_+Z),this.cy=.5*(J+Q),this.bbox=[_,J,Z,Q]):(_=this.bbox[0],J=this.bbox[1],Z=this.bbox[2],Q=this.bbox[3]),this.depth===0||this.items.length+1<this.capacity?(this.items.push(G),this):(ee=G.xlb<=this.cx&&G.yub>this.cy,ne=G.xlb<=this.cx&&G.ylb<=this.cy,te=G.xub>this.cx&&G.yub>this.cy,ie=G.xub>this.cx&&G.ylb<=this.cy,ee&&te&&ie&&ne?this.items.push(G):(ee&&re.push(G),ne&&se.push(G),te&&oe.push(G),ie&&ae.push(G)),this.subdivide(re,se,oe,ae,_,J,Z,Q),this)},subdivide:function(G,_,J,Z,Q,ee,te,ne){return G.length>0&&(this.northWest===null&&(this.northWest=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[Q,ee,this.cx,this.cy])),this.northWest.insert(G)),_.length>0&&(this.southWest===null&&(this.southWest=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[Q,this.cy,this.cx,ne])),this.southWest.insert(_)),J.length>0&&(this.northEast===null&&(this.northEast=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[this.cx,ee,te,this.cy])),this.northEast.insert(J)),Z.length>0&&(this.southEast===null&&(this.southEast=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[this.cx,this.cy,te,ne])),this.southEast.insert(Z)),this},find:function(G){var _,J,Z=function(ee){return G[2]>=ee.xlb&&G[0]<=ee.xub&&G[3]<=ee.yub&&G[1]>=ee.ylb},Q=[];for(J=this.items.length,_=0;_<J;_++)Z(this.items[_])&&Q.push(this.items[_]);return this.northWest!==null&&G[0]<=this.cx&G[1]>=this.cy&&utils_type.A.concat(Q,this.northWest.find(G)),this.southWest!==null&&G[0]<=this.cx&G[3]<=this.cy&&utils_type.A.concat(Q,this.southWest.find(G)),this.northEast!==null&&G[2]>=this.cx&G[1]>=this.cy&&utils_type.A.concat(Q,this.northEast.find(G)),this.southEast!==null&&G[2]>=this.cx&G[3]<=this.cy&&utils_type.A.concat(Q,this.southEast.find(G)),Q},analyzeTree:function(){var G,_={number_items:this.items.length,depth:1};return this.northWest!==null&&(G=this.northWest.analyzeTree(),_.number_items+=G.number_items,_.depth=Math.max(_.depth,1+G.depth)),this.southWest!==null&&(G=this.southWest.analyzeTree(),_.number_items+=G.number_items,_.depth=Math.max(_.depth,1+G.depth)),this.northEast!==null&&(G=this.northEast.analyzeTree(),_.number_items+=G.number_items,_.depth=Math.max(_.depth,1+G.depth)),this.southEast!==null&&(G=this.southEast.analyzeTree(),_.number_items+=G.number_items,_.depth=Math.max(_.depth,1+G.depth)),_},plot:function(){var G,_=[],J=[];return _.push(this.bbox[0]),J.push(this.bbox[3]),_.push(this.bbox[2]),J.push(this.bbox[3]),_.push(this.bbox[2]),J.push(this.bbox[1]),_.push(this.bbox[0]),J.push(this.bbox[1]),_.push(this.bbox[0]),J.push(this.bbox[3]),_.push(NaN),J.push(NaN),this.northWest!==null&&(G=this.northWest.plot(),utils_type.A.concat(_,G[0]),utils_type.A.concat(J,G[1])),this.northEast!==null&&(G=this.northEast.plot(),utils_type.A.concat(_,G[0]),utils_type.A.concat(J,G[1])),this.southEast!==null&&(G=this.southEast.plot(),utils_type.A.concat(_,G[0]),utils_type.A.concat(J,G[1])),this.southWest!==null&&(G=this.southWest.plot(),utils_type.A.concat(_,G[0]),utils_type.A.concat(J,G[1])),[_,J]}});var bqdt=math.A.BoxQuadtree,numerics=__webpack_require__(171);jxg.A.Math.Nlp={arr:function(G){return new Float64Array(G)},arr2:function(G,_){for(var J=0,Z=new Array(G);J<G;)Z[J]=this.arr(_),J++;return Z},arraycopy:function(G,_,J,Z,Q){for(var ee=0;ee<Q;)J[ee+Z]=G[ee+_],ee++},lastNumberOfEvaluations:0,GetLastNumberOfEvaluations:function(){return this.lastNumberOfEvaluations},Normal:0,MaxIterationsReached:1,DivergingRoundingErrors:2,FindMinimum:function(G,_,J,Z,Q,ee,te,ne,ie){var re,oe,se=J+2,ae=this.arr(_+1),ce=this;return this.lastNumberOfEvaluations=0,ie&&console.log("Experimental feature 'testForRoundingErrors' is activated."),ae[0]=0,this.arraycopy(Z,0,ae,1,_),oe=function(ue,de,me,fe){var _e,ye,be=ce.arr(ue);return ce.lastNumberOfEvaluations=ce.lastNumberOfEvaluations+1,ce.arraycopy(me,1,be,0,ue),_e=ce.arr(de),ye=G(ue,de,be,_e),ce.arraycopy(_e,0,fe,1,de),ye},re=this.cobylb(oe,_,J,se,ae,Q,ee,te,ne,ie),this.arraycopy(ae,1,Z,0,_),re},cobylb:function(G,_,J,Z,Q,ee,te,ne,ie,re){var oe,se,ae,ce,ue,de,me,fe,_e,ye,be,Se,Ce,Me,Re,Te,Ee,De,Le,Ue,Ge,Ye,ke,Fe,Ve,$e,Xe,ze,qe,et=-1,ot=0,St=0,it=_+1,lt=J+1,gt=ee,kt=0,Jt=!1,li=!1,si=0,qt=0,vt=0,Ke=this.arr(1+Z),Tt=this.arr2(1+_,1+it),Ut=this.arr2(1+_,1+_),Lt=this.arr2(1+Z,1+it),jt=this.arr2(1+_,1+lt),ri=this.arr(1+_),ti=this.arr(1+_),di=this.arr(1+_),Qe=this.arr(1+_),He=this.arr(1+_);for(ne>=2&&console.log("The initial value of RHO is "+gt+" and PARMU is set to zero."),fe=0,de=1/gt,se=1;se<=_;++se)Tt[se][it]=Q[se],Tt[se][se]=gt,Ut[se][se]=de;_e=it,ye=!1;e:for(;;){if(fe>=ie&&fe>0){et=this.MaxIterationsReached;break e}for(++fe,ot=G(_,J,Q,Ke),St=0,ce=1;ce<=J;++ce)St=Math.max(St,-Ke[ce]);if(fe!==ne-1&&ne!==3||this.PrintIterationResult(fe,ot,St,Q,_,ne),Ke[lt]=ot,Ke[Z]=St,be=!0,!ye){for(be=!1,se=1;se<=Z;++se)Lt[se][_e]=Ke[se];if(fe<=it){if(_e<=_)if(Lt[lt][it]<=ot)Q[_e]=Tt[_e][it];else{for(Tt[_e][it]=Q[_e],ce=1;ce<=Z;++ce)Lt[ce][_e]=Lt[ce][it],Lt[ce][it]=Ke[ce];for(ce=1;ce<=_e;++ce){for(Tt[_e][ce]=-gt,de=0,se=ce;se<=_e;++se)de-=Ut[se][ce];Ut[_e][ce]=de}}if(fe<=_){Q[_e=fe]+=gt;continue e}}ye=!0}t:for(;;){i:do{if(!be){for(Se=Lt[lt][it]+kt*Lt[Z][it],Ce=it,ae=1;ae<=_;++ae)(de=Lt[lt][ae]+kt*Lt[Z][ae])<Se?(Ce=ae,Se=de):de===Se&&kt===0&&Lt[Z][ae]<Lt[Z][Ce]&&(Ce=ae);if(Ce<=_){for(se=1;se<=Z;++se)de=Lt[se][it],Lt[se][it]=Lt[se][Ce],Lt[se][Ce]=de;for(se=1;se<=_;++se){for(de=Tt[se][Ce],Tt[se][Ce]=0,Tt[se][it]+=de,me=0,ce=1;ce<=_;++ce)Tt[se][ce]-=de,me-=Ut[ce][se];Ut[Ce][se]=me}}if(Me=0,re)for(se=1;se<=_;++se)for(ae=1;ae<=_;++ae)de=this.DOT_PRODUCT_ROW_COL(Ut,se,Tt,ae,1,_)-(se===ae?1:0),Me=Math.max(Me,Math.abs(de));if(Me>.1){et=this.DivergingRoundingErrors;break e}for(ce=1;ce<=lt;++ce){for(Ke[ce]=-Lt[ce][it],ae=1;ae<=_;++ae)He[ae]=Lt[ce][ae]+Ke[ce];for(se=1;se<=_;++se)jt[se][ce]=(ce===lt?-1:1)*this.DOT_PRODUCT_ROW_COL(He,-1,Ut,se,1,_)}for(Jt=!0,si=.25*gt,Re=2.1*gt,ae=1;ae<=_;++ae){for(Te=0,Ee=0,ce=1;ce<=_;++ce)Te+=Ut[ae][ce]*Ut[ae][ce],Ee+=Tt[ce][ae]*Tt[ce][ae];ri[ae]=1/Math.sqrt(Te),ti[ae]=Math.sqrt(Ee),(ri[ae]<si||ti[ae]>Re)&&(Jt=!1)}if(!ye&&!Jt){for(_e=0,de=Re,ae=1;ae<=_;++ae)ti[ae]>de&&(_e=ae,de=ti[ae]);if(_e===0)for(ae=1;ae<=_;++ae)ri[ae]<de&&(_e=ae,de=ri[ae]);for(de=.5*gt*ri[_e],ce=1;ce<=_;++ce)Qe[ce]=de*Ut[_e][ce];for(De=0,Le=0,oe=0,ce=1;ce<=lt;++ce)oe=this.DOT_PRODUCT_ROW_COL(Qe,-1,jt,ce,1,_),ce<lt&&(de=Lt[ce][it],De=Math.max(De,-oe-de),Le=Math.max(Le,oe-de));for(Ue=kt*(De-Le)>2*oe?-1:1,de=0,se=1;se<=_;++se)Qe[se]=Ue*Qe[se],Tt[se][_e]=Qe[se],de+=Ut[_e][se]*Qe[se];for(ce=1;ce<=_;++ce)Ut[_e][ce]/=de;for(ae=1;ae<=_;++ae){if(ae!==_e)for(de=this.DOT_PRODUCT_ROW_COL(Ut,ae,Qe,-1,1,_),ce=1;ce<=_;++ce)Ut[ae][ce]-=de*Ut[_e][ce];Q[ae]=Tt[ae][it]+Qe[ae]}continue e}if(!(li=this.trstlp(_,J,jt,Ke,gt,Qe))){for(de=0,ce=1;ce<=_;++ce)de+=Qe[ce]*Qe[ce];if(de<.25*gt*gt){ye=!0;break i}}for(oe=0,Ge=0,Ke[lt]=0,ce=1;ce<=lt;++ce)oe=Ke[ce]-this.DOT_PRODUCT_ROW_COL(Qe,-1,jt,ce,1,_),ce<lt&&(Ge=Math.max(Ge,oe));if(kt<1.5*(Ye=(qt=Lt[Z][it]-Ge)>0?oe/qt:0)){for(kt=2*Ye,ne>=2&&console.log("Increase in PARMU to "+kt),ke=Lt[lt][it]+kt*Lt[Z][it],ae=1;ae<=_;++ae)if((de=Lt[lt][ae]+kt*Lt[Z][ae])<ke||de===ke&&kt===0&&Lt[Z][ae]<Lt[Z][it])continue t}for(vt=kt*qt-oe,ce=1;ce<=_;++ce)Q[ce]=Tt[ce][it]+Qe[ce];ye=!0;continue e}for(be=!1,Fe=Lt[lt][it]+kt*Lt[Z][it]-(ot+kt*St),kt===0&&ot===Lt[lt][it]&&(vt=qt,Fe=Lt[Z][it]-St),Ve=Fe<=0?1:0,_e=0,ae=1;ae<=_;++ae)(de=Math.abs(this.DOT_PRODUCT_ROW_COL(Ut,ae,Qe,-1,1,_)))>Ve&&(_e=ae,Ve=de),di[ae]=de*ri[ae];for($e=1.1*gt,ue=0,ae=1;ae<=_;++ae)if(di[ae]>=si||di[ae]>=ri[ae]){if(de=ti[ae],Fe>0){for(de=0,ce=1;ce<=_;++ce)de+=Math.pow(Qe[ce]-Tt[ce][ae],2);de=Math.sqrt(de)}de>$e&&(ue=ae,$e=de)}if(ue>0&&(_e=ue),_e!==0){for(de=0,se=1;se<=_;++se)Tt[se][_e]=Qe[se],de+=Ut[_e][se]*Qe[se];for(ce=1;ce<=_;++ce)Ut[_e][ce]/=de;for(ae=1;ae<=_;++ae)if(ae!==_e)for(de=this.DOT_PRODUCT_ROW_COL(Ut,ae,Qe,-1,1,_),ce=1;ce<=_;++ce)Ut[ae][ce]-=de*Ut[_e][ce];for(ce=1;ce<=Z;++ce)Lt[ce][_e]=Ke[ce];if(Fe>0&&Fe>=.1*vt)continue t}}while(!1);if(Jt){if(gt<=te){et=this.Normal;break e}if(Xe=0,ze=0,(gt*=.5)<=1.5*te&&(gt=te),kt>0){for(qe=0,ce=1;ce<=lt;++ce){for(ze=Xe=Lt[ce][it],se=1;se<=_;++se)Xe=Math.min(Xe,Lt[ce][se]),ze=Math.max(ze,Lt[ce][se]);ce<=J&&Xe<.5*ze&&(de=Math.max(ze,0)-Xe,qe=qe<=0?de:Math.min(qe,de))}qe===0?kt=0:ze-Xe<kt*qe&&(kt=(ze-Xe)/qe)}ne>=2&&console.log("Reduction in RHO to "+gt+"  and PARMU = "+kt),ne===2&&this.PrintIterationResult(fe,Lt[lt][it],Lt[Z][it],this.COL(Tt,it),_,ne)}else ye=!1}}switch(et){case this.Normal:if(ne>=1&&console.log("%nNormal return from subroutine COBYLA%n"),li)return ne>=1&&this.PrintIterationResult(fe,ot,St,Q,_,ne),et;break;case this.MaxIterationsReached:ne>=1&&console.log("%nReturn from subroutine COBYLA because the MAXFUN limit has been reached.%n");break;case this.DivergingRoundingErrors:ne>=1&&console.log("%nReturn from subroutine COBYLA because rounding errors are becoming damaging.%n")}for(ce=1;ce<=_;++ce)Q[ce]=Tt[ce][it];return ot=Lt[lt][it],St=Lt[Z][it],ne>=1&&this.PrintIterationResult(fe,ot,St,Q,_,ne),et},trstlp:function(G,_,J,Z,Q,ee){var te,ne,ie,re,oe,se,ae,ce,ue,de,me,fe,_e,ye,be,Se,Ce,Me,Re,Te,Ee,De,Le,Ue,Ge,Ye,ke,Fe,Ve,$e,Xe,ze,qe,et=0,ot=0,St=0,it=this.arr2(1+G,1+G),lt=this.arr(2+_),gt=this.arr(2+_),kt=this.arr(1+G),Jt=this.arr(1+G),li=this.arr(2+_),si=this.arr(2+_),qt=_,vt=0;for(ie=1;ie<=G;++ie)it[ie][ie]=1,ee[ie]=0;if(te=0,ne=0,_>=1){for(re=1;re<=_;++re)Z[re]>ne&&(ne=Z[re],te=re);for(re=1;re<=_;++re)si[re]=re,gt[re]=ne-Z[re]}oe=!0;do e:for(;;){(!oe||oe&&ne===0)&&(te=qt=_+1,si[qt]=qt,gt[qt]=0),oe=!1,se=0,ae=0,ce=0,ue=0;t:do{if(de=qt===_?ne:-this.DOT_PRODUCT_ROW_COL(ee,-1,J,qt,1,G),ae===0||de<se?(se=de,ot=vt,ae=3):vt>ot?(ot=vt,ae=3):--ae,ae===0)break e;if(me=0,te<=vt){if(te<vt){fe=si[te],_e=gt[te],re=te;do{for(Se=si[be=re+1],Ce=this.DOT_PRODUCT(this.PART(this.COL(it,re),1,G),this.PART(this.COL(J,Se),1,G)),et=math.A.hypot(Ce,lt[be]),Me=lt[be]/et,Re=Ce/et,lt[be]=Me*lt[re],lt[re]=et,ie=1;ie<=G;++ie)et=Me*it[ie][be]+Re*it[ie][re],it[ie][be]=Me*it[ie][re]-Re*it[ie][be],it[ie][re]=et;si[re]=Se,gt[re]=gt[be],re=be}while(re<vt);si[re]=fe,gt[re]=_e}if(--vt,qt>_)for(et=1/lt[vt],re=1;re<=G;++re)kt[re]=et*it[re][vt];else for(et=this.DOT_PRODUCT_ROW_COL(kt,-1,it,vt+1,1,G),re=1;re<=G;++re)kt[re]-=et*it[re][vt+1]}else{for(Se=si[te],re=1;re<=G;++re)Jt[re]=J[re][Se];for(Te=0,re=G;re>vt;){for(Ce=0,Ee=0,ie=1;ie<=G;++ie)Ce+=et=it[ie][re]*Jt[ie],Ee+=Math.abs(et);if(De=Ee+.1*Math.abs(Ce),Le=Ee+.2*Math.abs(Ce),(Ee>=De||De>=Le)&&(Ce=0),Te===0)Te=Ce;else for(be=re+1,Me=Ce/(et=math.A.hypot(Ce,Te)),Re=Te/et,Te=et,ie=1;ie<=G;++ie)et=Me*it[ie][re]+Re*it[ie][be],it[ie][be]=Me*it[ie][be]-Re*it[ie][re],it[ie][re]=et;--re}if(Te===0){me=-1,re=vt;do{for(Ue=0,Ge=0,ie=1;ie<=G;++ie)Ue+=et=it[ie][re]*Jt[ie],Ge+=Math.abs(et);if(De=Ge+.1*Math.abs(Ue),Le=Ge+.2*Math.abs(Ue),Ge<De&&De<Le){if((et=Ue/lt[re])>0&&si[re]<=_&&(qe=gt[re]/et,(me<0||qe<me)&&(me=qe)),re>=2)for(Ye=si[re],ie=1;ie<=G;++ie)Jt[ie]-=et*J[ie][Ye];li[re]=et}else li[re]=0}while(--re>0);if(me<0)break e;for(re=1;re<=vt;++re)gt[re]=Math.max(0,gt[re]-me*li[re]);if(te<vt){fe=si[te],_e=gt[te],re=te;do{for(Ye=si[be=re+1],Ce=this.DOT_PRODUCT(this.PART(this.COL(it,re),1,G),this.PART(this.COL(J,Ye),1,G)),et=math.A.hypot(Ce,lt[be]),Me=lt[be]/et,Re=Ce/et,lt[be]=Me*lt[re],lt[re]=et,ie=1;ie<=G;++ie)et=Me*it[ie][be]+Re*it[ie][re],it[ie][be]=Me*it[ie][re]-Re*it[ie][be],it[ie][re]=et;si[re]=Ye,gt[re]=gt[be],re=be}while(re<vt);si[re]=fe,gt[re]=_e}if((et=this.DOT_PRODUCT(this.PART(this.COL(it,vt),1,G),this.PART(this.COL(J,Se),1,G)))===0)break e;lt[vt]=et,gt[te]=0,gt[vt]=me}else lt[++vt]=Te,gt[te]=gt[vt],gt[vt]=0;if(si[te]=si[vt],si[vt]=Se,qt>_&&Se!==qt){for(re=vt-1,Ce=this.DOT_PRODUCT(this.PART(this.COL(it,re),1,G),this.PART(this.COL(J,Se),1,G)),et=math.A.hypot(Ce,lt[vt]),Me=lt[vt]/et,Re=Ce/et,lt[vt]=Me*lt[re],lt[re]=et,ie=1;ie<=G;++ie)et=Me*it[ie][vt]+Re*it[ie][re],it[ie][vt]=Me*it[ie][re]-Re*it[ie][vt],it[ie][re]=et;si[vt]=si[re],si[re]=Se,et=gt[re],gt[re]=gt[vt],gt[vt]=et}if(qt>_)for(et=1/lt[vt],re=1;re<=G;++re)kt[re]=et*it[re][vt];else for(Se=si[vt],et=(this.DOT_PRODUCT_ROW_COL(kt,-1,J,Se,1,G)-1)/lt[vt],re=1;re<=G;++re)kt[re]-=et*it[re][vt]}for(ke=Q*Q,Ve=0,Fe=0,ie=1;ie<=G;++ie)Math.abs(ee[ie])>=1e-6*Q&&(ke-=ee[ie]*ee[ie]),Ve+=ee[ie]*kt[ie],Fe+=kt[ie]*kt[ie];if(ke<=0)break e;if(et=Math.sqrt(Fe*ke),Math.abs(Ve)>=1e-6*et&&(et=Math.sqrt(Fe*ke+Ve*Ve)),ce=ue=ke/(et+Ve),qt===_){if(Le=ce+.2*ne,ce>=(De=ce+.1*ne)||De>=Le)break t;ce=Math.min(ce,ne)}for(re=1;re<=G;++re)Jt[re]=ee[re]+ce*kt[re];if(qt===_)for(St=ne,ne=0,re=1;re<=vt;++re)et=Z[Se=si[re]]-this.DOT_PRODUCT_ROW_COL(Jt,-1,J,Se,1,G),ne=Math.max(ne,et);re=vt;do{for($e=0,Xe=0,ie=1;ie<=G;++ie)$e+=et=it[ie][re]*Jt[ie],Xe+=Math.abs(et);if(De=Xe+.1*Math.abs($e),Le=Xe+.2*Math.abs($e),(Xe>=De||De>=Le)&&($e=0),li[re]=$e/lt[re],re>=2)for(Se=si[re],ie=1;ie<=G;++ie)Jt[ie]-=li[re]*J[ie][Se]}while(re-->=2);for(qt>_&&(li[vt]=Math.max(0,li[vt])),re=1;re<=G;++re)Jt[re]=ee[re]+ce*kt[re];if(qt>vt)for(re=vt+1;re<=qt;++re){for(ye=ne-Z[Se=si[re]],ze=ne+Math.abs(Z[Se]),ie=1;ie<=G;++ie)ye+=et=J[ie][Se]*Jt[ie],ze+=Math.abs(et);De=ze+.1*Math.abs(ye),Le=ze+.2*Math.abs(ye),(ze>=De||De>=Le)&&(ye=0),li[re]=ye}for(me=1,te=0,re=1;re<=qt;++re)li[re]<0&&(et=gt[re]/(gt[re]-li[re]))<me&&(me=et,te=re);for(et=1-me,re=1;re<=G;++re)ee[re]=et*ee[re]+me*Jt[re];for(re=1;re<=qt;++re)gt[re]=Math.max(0,et*gt[re]+me*li[re]);qt===_&&(ne=St+me*(ne-St))}while(te>0);if(ce===ue)return!0}while(qt===_);return!1},PrintIterationResult:function(G,_,J,Z,Q,ee){ee>1&&console.log("NFVALS = "+G+"  F = "+_+"  MAXCV = "+J),ee>1&&console.log("X = "+this.PART(Z,1,Q))},ROW:function(G,_){return G[_].slice()},COL:function(G,_){var J,Z=G.length,Q=[];for(J=0;J<Z;++J)Q[J]=G[J][_];return Q},PART:function(G,_,J){return G.slice(_,J+1)},FORMAT:function(G){return G.join(",")},DOT_PRODUCT:function(G,_){var J,Z=0,Q=G.length;for(J=0;J<Q;++J)Z+=G[J]*_[J];return Z},DOT_PRODUCT_ROW_COL:function(G,_,J,Z,Q,ee){var te,ne=0;if(_===-1)for(te=Q;te<=ee;++te)ne+=G[te]*J[te][Z];else if(Z===-1)for(te=Q;te<=ee;++te)ne+=G[_][te]*J[te];else for(te=Q;te<=ee;++te)ne+=G[_][te]*J[te][Z];return ne}},jxg.A.Math.Nlp;var base_coords=__webpack_require__(904),statistics=__webpack_require__(588);math.A.Plot={checkReal:function(G){var _,J,Z=!1,Q=G.length;for(_=0;_<Q;_++)if(J=G[_].usrCoords,!isNaN(J[1])&&!isNaN(J[2])&&Math.abs(J[0])>math.A.eps){Z=!0;break}return Z},updateParametricCurveNaive:function(G,_,J,Z){var Q,ee,te=!1,ne=(J-_)/Z;for(Q=0;Q<Z;Q++)ee=_+Q*ne,G.points[Q].setCoordinates(constants.A.COORDS_BY_USER,[G.X(ee,te),G.Y(ee,te)],!1),G.points[Q]._t=ee,te=!0;return G},isSegmentOutside:function(G,_,J,Z,Q){return _<0&&Z<0||_>Q.canvasHeight&&Z>Q.canvasHeight||G<0&&J<0||G>Q.canvasWidth&&J>Q.canvasWidth},isDistOK:function(G,_,J,Z){return Math.abs(G)<J&&Math.abs(_)<Z&&!isNaN(G+_)},isSegmentDefined:function(G,_,J,Z){return!(isNaN(G+_)&&isNaN(J+Z))},updateParametricCurveOld:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue=!1,de=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],G.board,!1),me=[],fe=[],_e=[],ye=[],be=!1,Se=0,Ce=function(Me,Re,Te){var Ee,De=Te[1]-Me[1],Le=Te[2]-Me[2],Ue=Re[0]-Me[1],Ge=Re[1]-Me[2],Ye=Ue*Ue+Ge*Ge;return Ye>=math.A.eps&&(Ee=(De*Ue+Le*Ge)/Ye)>0&&(Ee<=1?(De-=Ee*Ue,Le-=Ee*Ge):(De-=Ue,Le-=Ge)),math.A.hypot(De,Le)};for(jxg.A.deprecated("Curve.updateParametricCurveOld()"),G.board.updateQuality===G.board.BOARD_QUALITY_LOW?(se=15,ae=10,ce=10):(se=21,ae=.7,ce=.7),ye[0]=J-_,Z=1;Z<se;Z++)ye[Z]=.5*ye[Z-1];Z=1,me[0]=1,fe[0]=0,Q=_,de.setCoordinates(constants.A.COORDS_BY_USER,[G.X(Q,ue),G.Y(Q,ue)],!1),ue=!0,ne=de.scrCoords[1],ie=de.scrCoords[2],Q=J,de.setCoordinates(constants.A.COORDS_BY_USER,[G.X(Q,ue),G.Y(Q,ue)],!1),ee=de.scrCoords[1],te=de.scrCoords[2],_e[0]=[ee,te],re=1,oe=0,G.points=[],G.points[Se++]=new base_coords.A(constants.A.COORDS_BY_SCREEN,[ne,ie],G.board,!1);do{for(be=this.isDistOK(ee-ne,te-ie,ae,ce)||this.isSegmentOutside(ne,ie,ee,te,G.board);oe<se&&(!be||oe<6)&&(oe<=7||this.isSegmentDefined(ne,ie,ee,te));)me[re]=Z,fe[re]=oe,_e[re]=[ee,te],re+=1,Q=_+(Z=2*Z-1)*ye[++oe],de.setCoordinates(constants.A.COORDS_BY_USER,[G.X(Q,ue),G.Y(Q,ue)],!1,!0),ee=de.scrCoords[1],te=de.scrCoords[2],be=this.isDistOK(ee-ne,te-ie,ae,ce)||this.isSegmentOutside(ne,ie,ee,te,G.board);Se>1&&Ce(G.points[Se-2].scrCoords,[ee,te],G.points[Se-1].scrCoords)<.015&&(Se-=1),G.points[Se]=new base_coords.A(constants.A.COORDS_BY_SCREEN,[ee,te],G.board,!1),G.points[Se]._t=Q,Se+=1,ne=ee,ie=te,ee=_e[re-=1][0],te=_e[re][1],oe=fe[re]+1,Z=2*me[re]}while(re>0&&Se<5e5);return G.numberPoints=G.points.length,G},_insertPoint_v2:function(G,_,J){var Z=!isNaN(this._lastCrds[1]+this._lastCrds[2]),Q=!isNaN(_.scrCoords[1]+_.scrCoords[2]),ee=G.board.canvasWidth,te=G.board.canvasHeight,ne=500;(!(Q=Q&&_.scrCoords[1]>-500&&_.scrCoords[2]>-500&&_.scrCoords[1]<ee+ne&&_.scrCoords[2]<te+ne)&&Z||Q&&(!Z||Math.abs(_.scrCoords[1]-this._lastCrds[1])>.7||Math.abs(_.scrCoords[2]-this._lastCrds[2])>.7))&&(_._t=J,G.points.push(_),this._lastCrds=_.copy("scrCoords"))},neighborhood_isNaN_v2:function(G,_){var J,Z,Q=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],G.board,!1);return J=_+math.A.eps,Q.setCoordinates(constants.A.COORDS_BY_USER,[G.X(J,!0),G.Y(J,!0)],!1),Z=Q.usrCoords,!!(isNaN(Z[1]+Z[2])||(J=_-math.A.eps,Q.setCoordinates(constants.A.COORDS_BY_USER,[G.X(J,!0),G.Y(J,!0)],!1),Z=Q.usrCoords,isNaN(Z[1]+Z[2])))},_borderCase:function(G,_,J,Z,Q,ee,te,ne){var ie,re,oe,se,ae,ce,ue=null,de=!1;if(ne<=1){if(re=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],G.board,!1),isNaN(_[1]+_[2])&&!isNaN(Z[1]+Z[2])&&!this.neighborhood_isNaN_v2(G,Q)||isNaN(J[1]+J[2])&&!isNaN(Z[1]+Z[2])&&!this.neighborhood_isNaN_v2(G,ee)||isNaN(Z[1]+Z[2])&&(!isNaN(_[1]+_[2])||!isNaN(J[1]+J[2]))&&!this.neighborhood_isNaN_v2(G,te))return!1;se=0;do{if(isNaN(_[1]+_[2])&&!isNaN(Z[1]+Z[2]))ae=Q,ce=te;else if(isNaN(J[1]+J[2])&&!isNaN(Z[1]+Z[2]))ae=ee,ce=te;else if(isNaN(Z[1]+Z[2])&&!isNaN(J[1]+J[2]))ae=te,ce=ee;else{if(!isNaN(Z[1]+Z[2])||isNaN(_[1]+_[2]))return!1;ae=te,ce=Q}ie=.5*(ae+ce),re.setCoordinates(constants.A.COORDS_BY_USER,[G.X(ie,!0),G.Y(ie,!0)],!1),oe=re.usrCoords,(de=isNaN(oe[1]+oe[2]))?ae=ie:ce=ie,++se}while(de&&se<30);if(se<30&&(ue=oe.slice(),Z=oe.slice(),ce=ie),ue!==null)return this._insertPoint_v2(G,new base_coords.A(constants.A.COORDS_BY_USER,ue,G.board,!1)),!0}return!1},_plotRecursive_v2:function(G,_,J,Z,Q,ee,te){var ne,ie,re,oe,se,ae=0,ce=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],G.board,!1);if(!(G.numberPoints>65536))return ee<this.nanLevel&&this._isUndefined(G,_,J,Z,Q)||ee<this.nanLevel&&this._isOutside(_,J,Z,Q,G.board)?this:(ne=.5*(J+Q),ce.setCoordinates(constants.A.COORDS_BY_USER,[G.X(ne,!0),G.Y(ne,!0)],!1),ie=ce.scrCoords,this._borderCase(G,_,Z,ie,J,Q,ne,ee)||(re=this._triangleDists(_,Z,ie),oe=ee<this.smoothLevel&&re[3]<te,se=ee<=this.jumpLevel&&(isNaN(re[0])||isNaN(re[1])||isNaN(re[2]))||ee<this.jumpLevel&&(re[2]>.99*re[0]||re[1]>.99*re[0]||re[0]===1/0||re[1]===1/0||re[2]===1/0),ee<this.smoothLevel+2&&re[0]<.5*(re[1]+re[2])&&(ae=0,oe=!1),--ee,se?this._insertPoint_v2(G,new base_coords.A(constants.A.COORDS_BY_SCREEN,[NaN,NaN],G.board,!1),ne):ee<=ae||oe?this._insertPoint_v2(G,ce,ne):(this._plotRecursive_v2(G,_,J,ie,ne,ee,te),isNaN(ce.scrCoords[1]+ce.scrCoords[2])||this._insertPoint_v2(G,ce,ne),this._plotRecursive_v2(G,ie,ne,Z,Q,ee,te))),this)},updateParametricCurve_v2:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae=!1,ce=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],G.board,!1),ue=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],G.board,!1);return G.board.updateQuality===G.board.BOARD_QUALITY_LOW?(ne=G.evalVisProp("recursiondepthlow")||13,ie=2,this.smoothLevel=ne-6,this.jumpLevel=3):(ne=G.evalVisProp("recursiondepthhigh")||17,ie=2,this.smoothLevel=ne-9,this.jumpLevel=2),this.nanLevel=ne-4,G.points=[],this.xterm==="x"?(re=.3*((oe=G.board.getBoundingBox())[2]-oe[0]),Z=Math.max(_,oe[0]-re),Q=Math.min(J,oe[2]+re)):(Z=_,Q=J),ce.setCoordinates(constants.A.COORDS_BY_USER,[G.X(Z,ae),G.Y(Z,ae)],!1),ae=!0,ue.setCoordinates(constants.A.COORDS_BY_USER,[G.X(Q,ae),G.Y(Q,ae)],!1),se=this._findStartPoint(G,ce.scrCoords,Z,ue.scrCoords,Q),ce.setCoordinates(constants.A.COORDS_BY_SCREEN,se[0],!1),Z=se[1],se=this._findStartPoint(G,ue.scrCoords,Q,ce.scrCoords,Z),ue.setCoordinates(constants.A.COORDS_BY_SCREEN,se[0],!1),Q=se[1],this._visibleArea=[Z,Q],ee=ce.copy("scrCoords"),te=ue.copy("scrCoords"),ce._t=Z,G.points.push(ce),this._lastCrds=ce.copy("scrCoords"),this._plotRecursive_v2(G,ee,Z,te,Q,ne,ie),ue._t=Q,G.points.push(ue),G.numberPoints=G.points.length,G},_insertLimesPoint:function(G,_,J,Z,Q){var ee,te,ne;Math.abs(this._lastUsrCrds[1])===1/0&&Math.abs(Q.left_x)===1/0||Math.abs(this._lastUsrCrds[2])===1/0&&Math.abs(Q.left_y)===1/0||((ee=new base_coords.A(constants.A.COORDS_BY_USER,[Q.left_x,Q.left_y],G.board))._t=J,G.points.push(ee),isNaN(Q.left_x)||isNaN(Q.left_y)||isNaN(Q.right_x)||isNaN(Q.right_y)||!(Math.abs(Q.left_x-Q.right_x)>math.A.eps||Math.abs(Q.left_y-Q.right_y)>math.A.eps)||((te=new base_coords.A(constants.A.COORDS_BY_SCREEN,_,G.board))._t=J,G.points.push(te)),(ne=new base_coords.A(constants.A.COORDS_BY_USER,[Q.right_x,Q.right_y],G.board))._t=J,G.points.push(ne),this._lastScrCrds=ne.copy("scrCoords"),this._lastUsrCrds=ne.copy("usrCoords"))},_insertPoint:function(G,_,J,Z,Q){var ee,te=!isNaN(this._lastScrCrds[1]+this._lastScrCrds[2]),ne=!isNaN(_[1]+_[2]),ie=G.board.canvasWidth,re=G.board.canvasHeight,oe=500;utils_type.A.exists(Q)?this._insertLimesPoint(G,_,J,Z,Q):(ne=ne&&_[1]>-500&&_[2]>-500&&_[1]<ie+oe&&_[2]<re+oe,(te||ne)&&(ne&&te&&Math.abs(_[1]-this._lastScrCrds[1])<.8&&Math.abs(_[2]-this._lastScrCrds[2])<.8||Math.abs(_[1])===1/0&&Math.abs(this._lastUsrCrds[1])===1/0||Math.abs(_[2])===1/0&&Math.abs(this._lastUsrCrds[2])===1/0||((ee=new base_coords.A(constants.A.COORDS_BY_SCREEN,_,G.board))._t=J,G.points.push(ee),this._lastScrCrds=ee.copy("scrCoords"),this._lastUsrCrds=ee.copy("usrCoords"))))},_triangleDists:function(G,_,J){var Z;return Z=[G[0]*_[0],.5*(G[1]+_[1]),.5*(G[2]+_[2])],[geometry.A.distance(G,_,3),geometry.A.distance(G,J,3),geometry.A.distance(J,_,3),geometry.A.distance(J,Z,3)]},_isUndefined:function(G,_,J,Z,Q){var ee,te,ne;if(!isNaN(_[1]+_[2])||!isNaN(Z[1]+Z[2]))return!1;for(ne=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],G.board,!1),te=0;te<20;++te)if(ee=J+Math.random()*(Q-J),ne.setCoordinates(constants.A.COORDS_BY_USER,[G.X(ee,!0),G.Y(ee,!0)],!1),!isNaN(ne.scrCoords[0]+ne.scrCoords[1]+ne.scrCoords[2]))return!1;return!0},_isOutside:function(G,_,J,Z,Q){var ee=500,te=Q.canvasWidth,ne=Q.canvasHeight;return G[1]<-500&&J[1]<-500||G[2]<-500&&J[2]<-500||G[1]>te+ee&&J[1]>te+ee||G[2]>ne+ee&&J[2]>ne+ee},_isOutsidePoint:function(G,_){var J=500,Z=_.canvasWidth,Q=_.canvasHeight;return G[1]<-500||G[2]<-500||G[1]>Z+J||G[2]>Q+J},_findStartPoint:function(G,_,J,Z,Q){return[_,J]},_getBorderPos:function(G,_,J,Z,Q,ee,te){var ne,ie,re,oe,se,ae;if(ie=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],G.board,!1),oe=0,isNaN(J[1]+J[2])&&!isNaN(Q[1]+Q[2]))ae=_,se=Z;else if(isNaN(te[1]+te[2])&&!isNaN(Q[1]+Q[2]))ae=ee,se=Z;else if(isNaN(Q[1]+Q[2])&&!isNaN(te[1]+te[2]))ae=Z,se=ee;else{if(!isNaN(Q[1]+Q[2])||isNaN(J[1]+J[2]))return!1;ae=Z,se=_}do ne=.5*(se+ae),ie.setCoordinates(constants.A.COORDS_BY_USER,[G.X(ne,!0),G.Y(ne,!0)],!1),re=ie.usrCoords,isNaN(re[1]+re[2])?ae=ne:se=ne,++oe;while(oe<30&&Math.abs(se-ae)>math.A.eps);return ne},_getCuspPos:function(G,_,J){var Z=[G.X(_,!0),G.Y(_,!0)],Q=[G.X(J,!0),G.Y(J,!0)];return numerics.A.fminbr(function(ee){var te=[G.X(ee,!0),G.Y(ee,!0)];return-(math.A.hypot(Z[0]-te[0],Z[1]-te[1])+math.A.hypot(Q[0]-te[0],Q[1]-te[1]))},[_,J],G)},_getJumpPos:function(G,_,J){return numerics.A.fminbr(function(Z){var Q=math.A.eps*math.A.eps,ee=[G.X(Z,!0),G.Y(Z,!0)],te=[G.X(Z+Q,!0),G.Y(Z+Q,!0)];return-Math.abs((te[1]-ee[1])/(te[0]-ee[0]))},[_,J],G)},_getLimits:function(G,_){var J,Z,Q,ee,te,ne=2/(G.maxX()-G.minX());return Z=(J=extrapolate.limit(_,-ne,G.X))[0],J[1]==="infinite"&&(Z=Math.sign(Z)*(1/0)),ee=(J=extrapolate.limit(_,-ne,G.Y))[0],J[1]==="infinite"&&(ee=Math.sign(ee)*(1/0)),Q=(J=extrapolate.limit(_,ne,G.X))[0],J[1]==="infinite"&&(Q=Math.sign(Q)*(1/0)),te=(J=extrapolate.limit(_,ne,G.Y))[0],J[1]==="infinite"&&(te=Math.sign(te)*(1/0)),{left_x:Z,left_y:ee,right_x:Q,right_y:te,t:_}},_getLimes:function(G,_,J,Z,Q,ee,te,ne,ie){var re;return ne==="border"?re=this._getBorderPos(G,_,J,Z,Q,ee,te):ne==="cusp"?re=this._getCuspPos(G,_,ee):ne==="jump"&&(re=this._getJumpPos(G,_,ee)),this._getLimits(G,re)},_plotNonRecursive:function(G,_,J,Z,Q,ee){var te,ne,ie,re,oe,se,ae,ce,ue,de,me,fe=null,_e=!1,ye="",be=[],Se=0;for(ce=G.board.origin.scrCoords,be[Se++]=[_,J,Z,Q,ee,1/0];Se>0;){if(_=(me=be[--Se])[0],J=me[1],Z=me[2],Q=me[3],ue=me[4],de=me[5],_e=!1,ye="",fe=null,G.points.length>65536)return;ue<this.nanLevel&&(this._isUndefined(G,_,J,Z,Q)||this._isOutside(_,J,Z,Q,G.board))||(te=.5*(J+Q),se=G.X(te,!0),ae=G.Y(te,!0),ne=[1,ce[1]+se*G.board.unitX,ce[2]-ae*G.board.unitY],ie=this._triangleDists(_,Z,ne),re=isNaN(_[1]+_[2]),oe=isNaN(Z[1]+Z[2]),re&&!oe||!re&&oe?ye="border":ie[0]>.66*de||ie[0]<this.cusp_threshold*(ie[1]+ie[2])||ie[1]>5*ie[2]||ie[2]>5*ie[1]?ye="cusp":(ie[2]>this.jump_threshold*ie[0]||ie[1]>this.jump_threshold*ie[0]||ie[0]===1/0||ie[1]===1/0||ie[2]===1/0)&&(ye="jump"),_e=ye===""&&ue<this.smoothLevel&&ie[3]<this.smooth_threshold,ue<this.testLevel&&!_e&&(ye===""?_e=!0:fe=this._getLimes(G,J,_,te,ne,Q,Z,ye,ue)),fe!==null?(ne=[1,NaN,NaN],this._insertPoint(G,ne,te,ue,fe)):ue<=0||_e?this._insertPoint(G,ne,te,ue,null):(be[Se++]=[ne,te,Z,Q,ue-1,ie[0]],be[Se++]=[_,J,ne,te,ue-1,ie[0]]))}return this},updateParametricCurve_v3:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se=!1,ae=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],G.board,!1),ce=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],G.board,!1);return ne=G.board.updateQuality===G.board.BOARD_QUALITY_LOW?G.evalVisProp("recursiondepthlow")||14:G.evalVisProp("recursiondepthhigh")||17,this.smoothLevel=7,this.nanLevel=ne-4,this.testLevel=4,this.cusp_threshold=.5,this.jump_threshold=.99,this.smooth_threshold=2,G.points=[],G.xterm==="x"?(ie=.3*((re=G.board.getBoundingBox())[2]-re[0]),Z=Math.max(_,re[0]-ie),Q=Math.min(J,re[2]+ie)):(Z=_,Q=J),ae.setCoordinates(constants.A.COORDS_BY_USER,[G.X(Z,se),G.Y(Z,se)],!1),se=!0,ce.setCoordinates(constants.A.COORDS_BY_USER,[G.X(Q,se),G.Y(Q,se)],!1),oe=this._findStartPoint(G,ae.scrCoords,Z,ce.scrCoords,Q),ae.setCoordinates(constants.A.COORDS_BY_SCREEN,oe[0],!1),Z=oe[1],oe=this._findStartPoint(G,ce.scrCoords,Q,ae.scrCoords,Z),ce.setCoordinates(constants.A.COORDS_BY_SCREEN,oe[0],!1),Q=oe[1],this._visibleArea=[Z,Q],ee=ae.copy("scrCoords"),te=ce.copy("scrCoords"),ae._t=Z,G.points.push(ae),this._lastScrCrds=ae.copy("scrCoords"),this._lastUsrCrds=ae.copy("usrCoords"),this._plotNonRecursive(G,ee,Z,te,Q,ne),ce._t=Q,G.points.push(ce),G.numberPoints=G.points.length,G},_criticalInterval:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe=!1,se=-1/0,ae=!1,ce=!1,ue=0,de=[],me=[],fe=[];for(re=statistics.A.abs(G),(te=statistics.A.median(re))<1e-7?(te=1e-7,ae=!0):te*=this.criticalThreshold,Z=0;Z<_;Z++)re[Z]>te?(fe.push({i:Z,v:G[Z],group:ue}),se=Z,oe||(oe=!0)):oe&&Z>se+4&&(fe.length>0&&de.push(fe.slice(0)),fe=[],oe=!1,ue++);for(oe&&fe.length>1&&de.push(fe.slice(0)),ae&&de.length===0&&(ce=!0),Q=0;Q<de.length;Q++)if(me[Q]="point",!((ee=de[Q].length)<64)){for(ie=0,ne=Math.sign(de[Q][0].v),Z=1;Z<ee;Z++)Math.sign(de[Q][Z].v)!==ne&&(ie++,ne=Math.sign(de[Q][Z].v));6*ie>ee&&(me[Q]="interval")}return{smooth:ce,groups:de,types:me}},Component:function(){this.left_isNaN=!1,this.right_isNaN=!1,this.left_t=null,this.right_t=null,this.t_values=[],this.x_values=[],this.y_values=[],this.len=0},findComponents:function(G,_,J,Z){var Q,ee,te,ne,ie,re,oe=[],se=0,ae=0,ce=0,ue=!1,de=!1;for(te=(J-_)/Z,oe[se]=new this.Component,re=oe[se],Q=0,ee=_;Q<=Z;Q++,ee+=te)ne=G.X(ee,de),ie=G.Y(ee,de),isNaN(ne)||isNaN(ie)?++ce>1&&ue&&(re.right_isNaN=!0,re.right_t=ee-te,re.len=ae,ue=!1,oe[++se]=new this.Component,re=oe[se],ce=0):(ue||(ue=!0,ae=0,ce>0&&(re.left_t=ee-te,re.left_isNaN=!0)),ce=0,re.t_values[ae]=ee,re.x_values[ae]=ne,re.y_values[ae]=ie,ae++),Q===0&&(de=!0);return ue?re.len=ae:oe.pop(),oe},getPointType:function(G,_,J,Z,Q,ee,te){var ne=Q[0],ie=ee[0],re=Z.length,oe={idx:_,t:J,x:ne[_],y:ie[_],type:"other"};return _<5?(oe.type="borderleft",oe.idx=0,oe.t=Z[0],oe.x=ne[0],oe.y=ie[0],oe):(_>te-6&&(oe.type="borderright",oe.idx=re-1,oe.t=Z[re-1],oe.x=ne[re-1],oe.y=ie[re-1]),oe)},newtonApprox:function(G,_,J,Z,Q){var ee,te=0;for(ee=Z;ee>0;ee--)te=(te+Q[ee][G])*(_-(ee-1)*J)/ee;return te+Q[0][G]},thiele:function(G,_,J,Z,Q){var ee,te=0;for(ee=Q;ee>1;ee--)te=(G-J[Z+ee])/(_[ee][Z+1]-_[ee-2][Z+1]+te);return _[0][Z+1]+(G-J[Z+1])/(_[1][Z+1]+te)},differenceMethodExperiments:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se,ae,ce=G.t_values,ue=G.x_values,de=G.y_values,me=[],fe=[],_e=[],ye=[],be=[],Se=[],Ce=[],Me=[],Re=0,Te=[];for(te=ce[1]-ce[0],be.push([]),Se.push([]),Ce.push([]),Me.push([]),Q=de.length,J=0;J<Q;J++)be[0][J]=ue[J],Se[0][J]=de[J],Ce[0][J]=ue[J],Me[0][J]=de[J];for(be.push([]),Se.push([]),Ce.push([]),Me.push([]),ne=te,Q=de.length-1,J=0;J<Q;J++)me[J]=ue[J+1]-ue[J],fe[J]=de[J+1]-de[J],_e[J]=me[J],ye[J]=fe[J],be[1][J]=me[J],Se[1][J]=fe[J],Ce[1][J]=ne/me[J],Me[1][J]=ne/fe[J];for(Q--,ee=Math.min(8,de.length-1),Z=1;Z<ee;Z++){for(be.push([]),Se.push([]),Ce.push([]),Me.push([]),ne*=te,J=0;J<Q;J++)me[J]=me[J+1]-me[J],fe[J]=fe[J+1]-fe[J],be[Z+1][J]=me[J],Se[Z+1][J]=fe[J],Ce[Z+1][J]=ne/(Ce[Z][J+1]-Ce[Z][J])+Ce[Z-1][J+1],Me[Z+1][J]=ne/(Me[Z][J+1]-Me[Z][J])+Me[Z-1][J+1];if((ae=this._criticalPoints(fe,Q,Z))===!1){console.log("Polynomial of degree",Z),ae=[];break}if(ae.length>0&&++Re>1&&Z%2==0)break;Q--}for(J=0;J<ae.length;J++){for(re=-1/0,oe=0;oe<ae[J].length;oe++)(se=Math.abs(ae[J][oe].v))>re&&(re=se,ie=oe);ie=Math.floor(ae[J][ie].i+Z/2),Te.push(this.getPointType(_,ie,ce,ue,de,_e,ye,Q+1))}return[Te,be,Se,Ce,Me]},getCenterOfCriticalInterval:function(G,_,J){var Z,Q,ee,te,ne,ie=0,re=0,oe=J[1]-J[0],se=[];for(Z=-1/0,se=[],Q=0;Q<G.length;Q++)(te=Math.abs(G[Q].v))>Z?(se=[Q],Z=te,ee=Q):Z===te&&se.push(Q);if(se.length>0&&(ne=se.reduce(function(ae,ce){return ae+ce},0)/se.length,ee=Math.floor(ne),ne+=G[0].i),Z<1/0){for(Q=0;Q<G.length;Q++)ie+=Math.abs(G[Q].v)*G[Q].i,re+=Math.abs(G[Q].v);ne=ie/re}return ne+=_/2,[G[ee].i+_/2,ne,J[Math.floor(ne)]+oe*(ne-Math.floor(ne))]},differenceMethod:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se,ae=G.t_values,ce=G.x_values,ue=G.y_values,de=[],me=[],fe=0,_e=-1,ye=-1,be=[],Se=[];for(Q=ue.length,de.push(new Float64Array(ce)),me.push(new Float64Array(ue)),Q--,ee=Math.min(12,Q),Z=0;Z<ee&&(de.push(new Float64Array(Q)),me.push(new Float64Array(Q)),de[Z+1]=de[Z].map(function(Ce,Me,Re){return Re[Me+1]-Ce}),me[Z+1]=me[Z].map(function(Ce,Me,Re){return Re[Me+1]-Ce}),(re=this._criticalInterval(me[Z+1],Q,Z)).smooth===!0&&(ye=Z,be=[]),ie=this._criticalInterval(de[Z+1],Q,Z),_e===-1&&ie.smooth===!0&&(_e=Z),!(ye>=0));Z++){if(re.groups.length>0&&++fe>2&&(Z+1)%2==0){be=re.groups,se=re.types;break}Q--}for(J=0;J<be.length;J++)se[J]!=="interval"&&(ne=this.getCenterOfCriticalInterval(be[J],Z+1,ae),re[0],te=Math.floor(ne[1]),oe=ne[2],Se.push(this.getPointType(_,te,oe,ae,de,me,Q+1)));return[Se,de,me,_e,ye]},_insertPoint_v4:function(G,_,J,Z){var Q,ee,te,ne=null;G.points.length>0&&(ne=G.points[G.points.length-1].scrCoords),Q=new base_coords.A(constants.A.COORDS_BY_USER,_,G.board),ne!==null&&(ee=Q.scrCoords[1]-ne[1])*ee+(te=Q.scrCoords[2]-ne[2])*te<.8*.8||(Q._t=J,G.points.push(Q))},getInterval:function(G,_,J){var Z,Q;return ia.A.disable(),Z=ia.A.Interval(_,J),G.board.mathLib=ia.A,G.board.mathLibJXG=ia.A,Q=G.Y(Z,!0),G.board.mathLib=Math,G.board.mathLibJXG=jxg.A.Math,Q},sign:function(G){return G<0?-1:G>0?1:0},handleBorder:function(G,_,J,Z,Q){var ee,te,ne,ie,re,oe,se,ae,ce,ue,de,me,fe=J.idx;if(me=_.t_values[1]-_.t_values[0],J.type==="borderleft"?ne=(te=ee=_.left_isNaN?_.left_t:J.t-me)+me:J.type==="borderright"?te=(ne=ee=_.right_isNaN?_.right_t:J.t+me)-me:console.log("No bordercase!!!"),(ue=this.findComponents(G,te,ne,32)).length!==0){for(J.type==="borderleft"&&(te=ue[0].left_t,ne=ue[0].t_values[0],me=ue[0].t_values[1]-ue[0].t_values[0],ee=te=te===null?ne-me:te,ie=this.getInterval(G,te,ne),utils_type.A.isObject(ie)&&(se=ie.lo,ae=ie.hi,re=G.X(ee,!0),oe=Q[1][fe]<0?ae:se,this._insertPoint_v4(G,[1,re,oe],ee))),de=ue[0].t_values.length,ce=0;ce<de;ce++)ee=ue[0].t_values[ce],re=ue[0].x_values[ce],oe=ue[0].y_values[ce],this._insertPoint_v4(G,[1,re,oe],ee);J.type==="borderright"&&(te=ue[0].t_values[de-1],ne=ue[0].right_t,me=ue[0].t_values[1]-ue[0].t_values[0],ee=ne=ne===null?te+me:ne,ie=this.getInterval(G,te,ne),utils_type.A.isObject(ie)&&(se=ie.lo,ae=ie.hi,re=G.X(ee,!0),oe=Q[1][fe]>0?ae:se,this._insertPoint_v4(G,[1,re,oe],ee)))}},_seconditeration_v4:function(G,_,J,Z,Q){var ee,te,ne,ie,re,oe,se,ae,ce,ue,de,me,fe;for(te=_.t_values[J.idx-2],ne=_.t_values[J.idx+2],re=this.findComponents(G,te,ne,64),se=0;se<re.length;se++){for(oe=re[se],ae=(ie=this.differenceMethod(oe,G))[0],ue=ie[1],de=ie[2],me=0,ce=0;ce<=ae.length;ce++){for(fe=ce===ae.length?oe.len:ae[ce].idx,ee=me;ee<fe;ee++)isNaN(oe.x_values[ee])||isNaN(oe.y_values[ee])||this._insertPoint_v4(G,[1,oe.x_values[ee],oe.y_values[ee]],oe.t_values[ee]);ce<ae.length&&(this.handleSingularity(G,oe,ae[ce],ue,de),me=ae[ce].idx+1)}fe=oe.len,se<re.length-1&&this._insertPoint_v4(G,[1,NaN,NaN],oe.right_t)}return this},_recurse_v4:function(G,_,J,Z,Q,ee,te,ne){var ie,re,oe=.5*(_+J),se=G.X(oe,!0),ae=G.Y(oe,!0);ne!==0?(ie=(se-Z)*G.board.unitX,re=(ae-Q)*G.board.unitY,math.A.hypot(ie,re)>2?this._recurse_v4(G,_,oe,Z,Q,se,ae,ne-1):this._insertPoint_v4(G,[1,se,ae],oe),ie=(se-ee)*G.board.unitX,re=(ae-te)*G.board.unitY,math.A.hypot(ie,re)>2?this._recurse_v4(G,oe,J,se,ae,ee,te,ne-1):this._insertPoint_v4(G,[1,se,ae],oe)):this._insertPoint_v4(G,[1,NaN,NaN],oe)},handleSingularity:function(G,_,J,Z,Q){var ee,te,ne,ie,re,oe,se,ae,ce,ue,de,me=J.idx,fe=100;ee=J.t,console.log("HandleSingularity at t =",ee),te=_.t_values[me-5],ne=_.t_values[me+5],ie=this.getInterval(G,te,ne),utils_type.A.isObject(ie)?(ae=ie.lo,ce=ie.hi):Q[0][me-1]<Q[0][me+1]?(ae=Q[0][me-1],ce=Q[0][me+1]):(ae=Q[0][me+1],ce=Q[0][me-1]),se=G.X(ee,!0),ue=(Q[0][me-3]-Q[0][me-5])/(_.t_values[me-3]-_.t_values[me-5]),de=(Q[0][me+3]-Q[0][me+5])/(_.t_values[me+3]-_.t_values[me+5]),console.log(":::",ue,de),ue<-100?(this._insertPoint_v4(G,[1,se,ae],ee,!0),de<=fe&&this._insertPoint_v4(G,[1,NaN,NaN],ee)):ue>fe?(this._insertPoint_v4(G,[1,se,ce],ee),de>=-100&&this._insertPoint_v4(G,[1,NaN,NaN],ee)):(ae===-1/0&&(this._insertPoint_v4(G,[1,se,ae],ee,!0),this._insertPoint_v4(G,[1,NaN,NaN],ee)),ce===1/0&&(this._insertPoint_v4(G,[1,NaN,NaN],ee),this._insertPoint_v4(G,[1,se,ce],ee,!0)),J.t<_.t_values[me]?(re=me-1,oe=me):(re=me,oe=me+1),te=_.t_values[re],ne=_.t_values[oe],this._recurse_v4(G,te,ne,Z[0][re],Q[0][re],Z[0][oe],Q[0][oe],10)),de<-100?this._insertPoint_v4(G,[1,se,ce],ee):de>fe&&this._insertPoint_v4(G,[1,se,ae],ee)},steps:1021,criticalThreshold:1e3,plot_v4:function(G,_,J,Z){var Q,ee,te,ne,ie,re,oe,se,ae,ce,ue,de,me,fe,_e,ye=(J-_)/Z,be=function(Me){return G.Y(Me,!0)},Se=function(Me){return-G.Y(Me,!0)},Ce=.5*ye;for(te=this.findComponents(G,_,J,Z),ne=0;ne<te.length;ne++){for(ie=te[ne],re=(ae=this.differenceMethod(ie,G))[0],ce=ae[1],ue=ae[2],re.length!==0&&re[0].type==="borderleft"||re.unshift({idx:0,t:ie.t_values[0],x:ie.x_values[0],y:ie.y_values[0],type:"borderleft"}),re[re.length-1].type!=="borderright"&&(ee=ie.t_values.length,re.push({idx:ee-1,t:ie.t_values[ee-1],x:ie.x_values[ee-1],y:ie.y_values[ee-1],type:"borderright"})),se=0,oe=0;oe<=re.length;oe++){for(ee=oe===re.length?ie.len:re[oe].idx-1,Q=se;Q<ee-2;Q++)this._insertPoint_v4(G,[1,ie.x_values[Q],ie.y_values[Q]],ie.t_values[Q]),Q>=se+3&&Q<ee-3&&ue.length>3&&Math.abs(ue[2][Q])>.2*Math.abs(ue[0][Q])&&(de=ie.t_values[Q],Ce=.25*ye,_e=this.getInterval(G,de,de+ye),utils_type.A.isObject(_e)?ue[2][Q]>0?this._insertPoint_v4(G,[1,de+Ce,_e.lo],de+Ce):this._insertPoint_v4(G,[1,de+ye-Ce,_e.hi],de+ye-Ce):(me=numerics.A.fminbr(be,[de,de+ye]))<(fe=numerics.A.fminbr(Se,[de,de+ye]))?(this._insertPoint_v4(G,[1,G.X(me,!0),G.Y(me,!0)],me),this._insertPoint_v4(G,[1,G.X(fe,!0),G.Y(fe,!0)],fe)):(this._insertPoint_v4(G,[1,G.X(fe,!0),G.Y(fe,!0)],fe),this._insertPoint_v4(G,[1,G.X(me,!0),G.Y(me,!0)],me)));oe<re.length&&(Q=re[oe].idx,re[oe].type==="borderleft"||re[oe].type==="borderright"?this.handleBorder(G,ie,re[oe],ce,ue):this._seconditeration_v4(G,ie,re[oe],ce,ue),se=re[oe].idx+1+1)}ee=ie.len,ne<te.length-1&&this._insertPoint_v4(G,[1,NaN,NaN],ie.right_t)}},updateParametricCurve_v4:function(G,_,J){var Z,Q,ee,te;G.xterm==="x"?(ee=.3*((te=G.board.getBoundingBox())[2]-te[0]),Z=Math.max(_,te[0]-ee),Q=Math.min(J,te[2]+ee)):(Z=_,Q=J),G.points=[],this.plot_v4(G,Z,Q,this.steps),G.numberPoints=G.points.length},updateParametricCurve:function(G,_,J){return this.updateParametricCurve_v2(G,_,J)}};var plot=math.A.Plot;math.A.ImplicitPlot=function(G,_,J,Z,Q){var ee={resolution_out:5,resolution_in:5,max_steps:1024,alpha_0:.05,tol_u0:math.A.eps,tol_newton:1e-7,tol_cusp:.05,tol_progress:1e-4,qdt_box:.2,kappa_0:.2,delta_0:.05,h_initial:.1,h_critical:.001,h_max:1,loop_dist:.09,loop_dir:.99,loop_detection:!0,unitX:10,unitY:10};this.config=utils_type.A.merge(ee,_),this.f=J,this.dfx=null,this.dfy=null,utils_type.A.isFunction(Z)?this.dfx=Z:this.dfx=function(te,ne){var ie=math.A.eps*math.A.eps;return .5*(this.f(te+ie,ne)-this.f(te-ie,ne))/ie},utils_type.A.isFunction(Q)?this.dfy=Q:this.dfy=function(te,ne){var ie=math.A.eps*math.A.eps;return .5*(this.f(te,ne+ie)-this.f(te,ne-ie))/ie},this.bbox=G,this.qdt=new bqdt(20,5,G),this.components=[]},utils_type.A.extend(math.A.ImplicitPlot.prototype,{plot:function(){var G,_,J,Z,Q,ee,te,ne=[],ie=[],re=[],oe=0,se=this,ae=function(me){return se.f(G,me)},ce=function(me){return-se.f(G,me)},ue=function(me){return se.f(me,_)},de=function(me){return-se.f(me,_)};for(J=Math.min(this.bbox[0],this.bbox[2])-math.A.eps,Z=Math.max(this.bbox[0],this.bbox[2]),Q=Math.min(this.bbox[1],this.bbox[3])+math.A.eps,ee=Math.max(this.bbox[1],this.bbox[3]),te=this.config.resolution_out/this.config.unitX,te*=1+math.A.eps,G=J;G<Z;G+=te)(re=this.searchLine(ae,ce,G,[Q,ee],"vertical",oe,ne,ie,20))!==!1&&(ne=re[0],ie=re[1],oe=re[2]);for(te=this.config.resolution_out/this.config.unitY,te*=1+math.A.eps,_=Q;_<ee;_+=te)(re=this.searchLine(ue,de,_,[J,Z],"horizontal",oe,ne,ie,20))!==!1&&(ne=re[0],ie=re[1],oe=re[2]);return[ne,ie,oe]},searchLine:function(G,_,J,Z,Q,ee,te,ne,ie){var re,oe,se,ae,ce,ue,de,me,fe,_e,ye,be,Se,Ce,Me=this.config.tol_u0,Re=Z[0],Te=Z[1];if(ce=G(re=numerics.A.fminbr(G,[Re,Te])),ue=G(oe=numerics.A.fminbr(_,[Re,Te])),ce<Me&&ue>-Me){if(de=re,re=Math.min(de,oe),oe=Math.max(de,oe),ae=G(se=numerics.A.fzero(G,[re,oe])),Math.abs(ae)>Math.max((ue-ce)*math.A.eps,.001))return!1;if(Q==="vertical"?(fe=[1,J,se],Ce=this.config.resolution_in/this.config.unitY):(fe=[1,se,J],Ce=this.config.resolution_in/this.config.unitX),Ce*=1+math.A.eps,!this.curveContainsPoint(fe,te,ne,2*Ce,this.config.qdt_box)){if((be=this.traceComponent(fe,1))[0].length>0){for(ee>0&&(te.push(NaN),ne.push(NaN)),Se=te.length,ye=be[0].length,_e=1;_e<ye;_e++)this.qdt.insertItem({xlb:Math.min(be[0][_e-1],be[0][_e]),xub:Math.max(be[0][_e-1],be[0][_e]),ylb:Math.min(be[1][_e-1],be[1][_e]),yub:Math.max(be[1][_e-1],be[1][_e]),idx1:Se+_e-1,idx2:Se+_e,comp:ee});ee++,utils_type.A.concat(te,be[0]),utils_type.A.concat(ne,be[1])}}return(me=se-.01*Ce)-Re>Ce&&ie>0&&(be=this.searchLine(G,_,J,[Re,me],Q,ee,te,ne,ie-1))!==!1&&(te=be[0],ne=be[1],ee=be[2]),Te-(me=se+.01*Ce)>Ce&&ie>0&&(be=this.searchLine(G,_,J,[me,Te],Q,ee,te,ne,ie-1))!==!1&&(te=be[0],ne=be[1],ee=be[2]),[te,ne,ee]}return!1},curveContainsPoint:function(G,_,J,Z,Q){var ee,te,ne,ie=G[1],re=G[2];for(te=(ne=this.qdt.find([ie-Q,re+Q,ie+Q,re-Q])).length,ee=0;ee<te;ee++)if(geometry.A.distPointSegment(G,[1,_[ne[ee].idx1],J[ne[ee].idx1]],[1,_[ne[ee].idx2],J[ne[ee].idx2]])<Z)return!0;return!1},traceComponent:function(G){var _=[],J=[],Z=[];return(Z=this.tracing(G,1)).length===0||(_=Z[0],J=Z[1]),Z[2]||(Z=this.tracing(G,-1)).length===0||(_=Z[0].reverse().concat(_.slice(1)),J=Z[1].reverse().concat(J.slice(1))),_.length>0&&_.length<6&&(_.push(_[_.length-1]),J.push(J[J.length-1])),[_,J]},tracing:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue,de,me,fe,_e,ye,be,Se,Ce=[],Me=[],Re=[],Te=0,Ee=0,De=!1,Le=!1,Ue=!1,Ge=this.config.kappa_0,Ye=this.config.delta_0,ke=this.config.alpha_0,Fe=this.config.h_initial,Ve=this.config.max_steps,$e=_,Xe=[],ze=[],qe=[];if(Ce=G.slice(1),Xe.push(Ce[0]),ze.push(Ce[1]),(Q=this.tangent(Ce))===!1)return[];this.dfx(Ce[0],Ce[1]),this.dfy(Ce[0],Ce[1]);do{if((Q=this.tangent(Ce))===!1){Ce=Me.slice(),Xe.push(Ce[0]),ze.push(Ce[1]);break}if(Xe.length===1)te=Q.slice();else if(Xe.length===2)qe.push(Xe.length-1);else if(Le&&Xe.length>2&&!Ue){if(geometry.A.distPointSegment([1,Ce[0],Ce[1]],[1,Xe[0],ze[0]],[1,Xe[1],ze[1]])<this.config.loop_dist*Fe&&math.A.innerProduct(Q,te,2)>this.config.loop_dir){Ce=G.slice(1),Xe.push(Ce[0]),ze.push(Ce[1]),De=!0;break}if(this.config.loop_detection){for(_e=Xe.length-1,ye=Math.floor(math.A.log2(_e)),be=0;be<=ye&&!(geometry.A.distPointSegment([1,Ce[0],Ce[1]],[1,Xe[qe[be]-1],ze[qe[be]-1]],[1,Xe[qe[be]],ze[qe[be]]])<this.config.loop_dist*Fe&&(ee=this.tangent([Xe[qe[be]],ze[qe[be]]]),math.A.innerProduct(Q,ee,2)>this.config.loop_dir));be++);if(be<=ye){De=!0;break}for(ye=1,Se=0,be=0;be<100&&(_e+1)%ye===0;be++)ye*=2,Se++;qe[Se]=_e}}Me[0]=Ce[0]+Fe*$e*Q[0],Me[1]=Ce[1]+Fe*$e*Q[1],Ee=0;do ce=(ie=[this.dfx(Me[0],Me[1]),this.dfy(Me[0],Me[1])])[0]*ie[0]+ie[1]*ie[1],re=this.f(Me[0],Me[1])/ce,Re[0]=Me[0]-ie[0]*re,Re[1]=Me[1]-ie[1]*re,Ee===0?se=Math.abs(re)*Math.sqrt(ce):Ee===1&&(ae=Math.abs(re)*Math.sqrt(ce)),Me[0]=Re[0],Me[1]=Re[1],Ee++;while(Ee<20&&Math.abs(this.f(Me[0],Me[1]))>this.config.tol_newton);if(de=se,ue=Ee>1?ae/se:0,ee=this.tangent(Me),oe=math.A.innerProduct(Q,ee,2),oe=Math.max(-1,Math.min(1,oe)),me=Math.acos(oe),Ue=!1,geometry.A.distance(Ce,Me,2)<this.config.tol_progress){Ce=Me.slice(),Xe.push(Ce[0]),ze.push(Ce[1]);break}if(oe<0&&!(Fe>this.config.h_critical)){if(Ue=!0,!this.isBifurcation(Ce,this.config.tol_cusp)){Ce=Me.slice(),Xe.push(Ce[0]),ze.push(Ce[1]);break}$e*=-1,me=0}if(!Ue&&(fe=Math.max(Math.sqrt(ue/Ge),Math.sqrt(de/Ye),me/ke),isNaN(fe)&&(fe=1),Fe/=fe=Math.max(Math.min(fe,2),.5),Fe=Math.min(this.config.h_max,Fe),fe>=2)){if(++Te>=3*Ve)break;Le=!1}else Ce=Me.slice(),Xe.push(Ce[0]),ze.push(Ce[1]),Le=!0,Te++}while(Te<Ve&&Ce[0]>=this.bbox[0]&&Ce[1]<=this.bbox[1]&&Ce[0]<=this.bbox[2]&&Ce[1]>=this.bbox[3]);return J=[Xe[(Z=Xe.length)-2],ze[Z-2]],Ce[0]<this.bbox[0]&&(Ce[0]!==J[0]&&(ne=(this.bbox[0]-J[0])/(Ce[0]-J[0]),Ce[1]!==J[1]&&(Ce[1]=J[1]+ne*(Ce[1]-J[1]))),Ce[0]=this.bbox[0]),Ce[0]>this.bbox[2]&&(Ce[0]!==J[0]&&(ne=(this.bbox[2]-J[0])/(Ce[0]-J[0]),Ce[1]!==J[1]&&(Ce[1]=J[1]+ne*(Ce[1]-J[1]))),Ce[0]=this.bbox[2]),Ce[1]<this.bbox[3]&&(Ce[1]!==J[1]&&(ne=(this.bbox[3]-J[1])/(Ce[1]-J[1]),Ce[0]!==J[0]&&(Ce[0]=J[0]+ne*(Ce[0]-J[0]))),Ce[1]=this.bbox[3]),Ce[1]>this.bbox[1]&&(Ce[1]!==J[1]&&(ne=(this.bbox[1]-J[1])/(Ce[1]-J[1]),Ce[0]!==J[0]&&(Ce[0]=J[0]+ne*(Ce[0]-J[0]))),Ce[1]=this.bbox[1]),Xe[Z-1]=Ce[0],ze[Z-1]=Ce[1],[Xe,ze,De]},isBifurcation:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se,ae=math.A.eps*math.A.eps*100;return J=G[0],Z=G[1],Q=.5*(this.dfx(J+ae,Z)-this.dfx(J-ae,Z))/ae,ee=.5*(this.dfx(J,Z+ae)-this.dfx(J,Z-ae))/ae,te=.5*(this.dfy(J+ae,Z)-this.dfy(J-ae,Z))/ae,se=(ie=Q+(ne=.5*(this.dfy(J,Z+ae)-this.dfy(J,Z-ae))/ae))*ie-4*(Q*ne-ee*te),re=.5*(ie+Math.sqrt(se)),oe=.5*(ie-Math.sqrt(se)),Math.abs(re)>_&&Math.abs(oe)>_},handleCriticalPoint:function(G,_,J,Z){var Q,ee=Math.atan2(Z*_[1],Z*_[0]);return Q=numerics.A.root(function(te){var ne=G[0]+J*Math.cos(te),ie=G[1]+J*Math.sin(te);return this.f(ne,ie)},ee),[G[0]+J*Math.cos(Q),G[1]+J*Math.sin(Q)]},updateA:function(G,_,J){var Z,Q,ee=[J[0]-_[0],J[1]-_[1]],te=this.f(J[0],J[1])-this.f(_[0],_[1]);return Q=ee[0]*ee[0]+ee[1]*ee[1],Z=te-(G[0]*ee[0]+G[1]*ee[1]),Z/=Q,G[0]+=Z*ee[0],G[1]+=Z*ee[1],G},tangent_A:function(G){var _=[-G[1],G[0]],J=math.A.norm(_,2);return math.A.eps,[_[0]/J,_[1]/J]},tangent:function(G){var _=[-this.dfy(G[0],G[1]),this.dfx(G[0],G[1])],J=math.A.norm(_,2);return!(J<math.A.eps*math.A.eps)&&[_[0]/J,_[1]/J]}});var implicitplot=math.A.ImplicitPlot;math.A.Metapost={MP_ENDPOINT:0,MP_EXPLICIT:1,MP_GIVEN:2,MP_CURL:3,MP_OPEN:4,MP_END_CYCLE:5,UNITY:1,FRACTION_ONE:1,FRACTION_THREE:3,ONE_EIGHTY_DEG:Math.PI,THREE_SIXTY_DEG:2*Math.PI,EPS_SQ:1e-5*1e-5,make_choices:function(G){var _,J,Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue,de;ne=G[0];do{if(!ne)break;te=ne.next,ne.rtype>this.MP_EXPLICIT&&(ne.x-te.x)*(ne.x-te.x)+(ne.y-te.y)*(ne.y-te.y)<this.EPS_SQ&&(ne.rtype=this.MP_EXPLICIT,ne.ltype===this.MP_OPEN&&(ne.ltype=this.MP_CURL,ne.set_left_curl(this.UNITY)),te.ltype=this.MP_EXPLICIT,te.rtype===this.MP_OPEN&&(te.rtype=this.MP_CURL,te.set_right_curl(this.UNITY)),ne.rx=ne.x,te.lx=ne.x,ne.ry=ne.y,te.ly=ne.y),ne=te}while(ne!==G[0]);for(J=G[0];J.ltype===this.MP_OPEN&&J.rtype===this.MP_OPEN;)if((J=J.next)===G[0]){J.ltype=this.MP_END_CYCLE;break}for(ne=J;ne;){if(te=ne.next,ne.rtype>=this.MP_GIVEN){for(;te.ltype===this.MP_OPEN&&te.rtype===this.MP_OPEN;)te=te.next;for(Z=0,ie=ne,ee=G.length,ae=[],ce=[],ue=[],de=[null];oe=ie.next,ae.push(oe.x-ie.x),ce.push(oe.y-ie.y),ue.push(this.mp_pyth_add(ae[Z],ce[Z])),Z>0&&(se=ce[Z-1]/ue[Z-1],re=ae[Z-1]/ue[Z-1],de.push(Math.atan2(ce[Z]*re-ae[Z]*se,ae[Z]*re+ce[Z]*se))),Z++,(ie=oe)===te&&(ee=Z),!(Z>=ee&&ie.ltype!==this.MP_END_CYCLE););Z===ee?de.push(0):de.push(de[1]),te.ltype===this.MP_OPEN&&((Q=te.rx-te.x)*Q+(_=te.ry-te.y)*_<this.EPS_SQ?(te.ltype=this.MP_CURL,te.set_left_curl(this.UNITY)):(te.ltype=this.MP_GIVEN,te.set_left_given(Math.atan2(_,Q)))),ne.rtype===this.MP_OPEN&&ne.ltype===this.MP_EXPLICIT&&((Q=ne.x-ne.lx)*Q+(_=ne.y-ne.ly)*_<this.EPS_SQ?(ne.rtype=this.MP_CURL,ne.set_right_curl(this.UNITY)):(ne.rtype=this.MP_GIVEN,ne.set_right_given(Math.atan2(_,Q)))),this.mp_solve_choices(ne,te,ee,ae,ce,ue,de)}else ne.rtype===this.MP_ENDPOINT&&(ne.rx=ne.x,ne.ry=ne.y,te.lx=te.x,te.ly=te.y);if((ne=te)===J)break}},mp_solve_choices:function(G,_,J,Z,Q,ee,te){var ne,ie,re,oe,se,ae,ce,ue,de,me,fe,_e,ye,be,Se,Ce,Me,Re,Te,Ee,De,Le,Ue,Ge,Ye,ke;for(se=ee.length+1,me=new Array(se),de=new Array(se),re=new Array(se),Se=new Array(se),Ye=0;Ye<se;Ye++)Se[Ye]=re[Ye]=de[Ye]=me[Ye]=0;for(ce=0,ue=G,_e=0;;){if(ye=ue.next,ce===0)if(ue.rtype===this.MP_GIVEN){if(ye.ltype===this.MP_GIVEN)return ne=Math.atan2(Q[0],Z[0]),Ee=(Te=this.mp_n_sin_cos(G.right_given()-ne))[0],De=Te[1],Ue=(Le=this.mp_n_sin_cos(_.left_given()-ne))[0],Ge=Le[1],void this.mp_set_controls(G,_,Z[0],Q[0],De,Ee,-Ge,Ue);re[0]=ue.right_given()-Math.atan2(Q[0],Z[0]),re[0]=this.reduce_angle(re[0]),me[0]=0,de[0]=0}else if(ue.rtype===this.MP_CURL){if(ye.ltype===this.MP_CURL)return G.rtype=this.MP_EXPLICIT,_.ltype=this.MP_EXPLICIT,fe=Math.abs(_.left_tension()),Ce=Math.abs(G.right_tension()),be=this.UNITY/(3*Ce),G.rx=G.x+Z[0]*be,G.ry=G.y+Q[0]*be,be=this.UNITY/(3*fe),_.lx=_.x-Z[0]*be,void(_.ly=_.y-Q[0]*be);Re=ue.right_curl(),fe=Math.abs(ye.left_tension()),Ce=Math.abs(ue.right_tension()),me[0]=this.mp_curl_ratio(Re,Ce,fe),re[0]=-te[1]*me[0],de[0]=0}else ue.rtype===this.MP_OPEN&&(me[0]=0,re[0]=0,de[0]=this.FRACTION_ONE);else if(ue.ltype===this.MP_END_CYCLE||ue.ltype===this.MP_OPEN){if(ne=this.UNITY/(3*Math.abs(_e.right_tension())-this.UNITY),Me=ee[ce]*(this.FRACTION_THREE-this.UNITY/Math.abs(_e.right_tension())),oe=this.UNITY/(3*Math.abs(ye.left_tension())-this.UNITY),ae=ee[ce-1]*(this.FRACTION_THREE-this.UNITY/Math.abs(ye.left_tension())),Me*=Re=this.FRACTION_ONE-me[ce-1]*ne,(fe=Math.abs(ue.left_tension()))<(Ce=Math.abs(ue.right_tension()))?Me*=Math.pow(fe/Ce,2):fe>Ce&&(ae*=Math.pow(Ce/fe,2)),be=ae/(ae+Me),me[ce]=be*oe,ie=-te[ce+1]*me[ce],_e.rtype===this.MP_CURL?(de[ce]=0,re[ce]=ie-te[1]*(this.FRACTION_ONE-be)):(be=(this.FRACTION_ONE-be)/Re,ie-=te[ce]*be,be*=ne,re[ce]=ie-re[ce-1]*be,de[ce]=-de[ce-1]*be),ue.ltype===this.MP_END_CYCLE){for(ne=0,oe=this.FRACTION_ONE;(ce-=1)===0&&(ce=J),ne=re[ce]-ne*me[ce],oe=de[ce]-oe*me[ce],ce!==J;);for(ne/=this.FRACTION_ONE-oe,Se[J]=ne,re[0]=ne,ke=1;ke<J;ke++)re[ke]=re[ke]+ne*de[ke];break}}else{if(ue.ltype===this.MP_CURL){Re=ue.left_curl(),fe=Math.abs(ue.left_tension()),Ce=Math.abs(_e.right_tension()),be=this.mp_curl_ratio(Re,fe,Ce),Se[J]=-re[J-1]*be/(this.FRACTION_ONE-be*me[J-1]);break}if(ue.ltype===this.MP_GIVEN){Se[J]=ue.left_given()-Math.atan2(Q[J-1],Z[J-1]),Se[J]=this.reduce_angle(Se[J]);break}}_e=ue,ue=ye,ce+=1}for(ce=J-1;ce>-1;ce--)Se[ce]=re[ce]-Se[ce+1]*me[ce];for(ue=G,ce=0;ye=ue.next,Ee=(Te=this.mp_n_sin_cos(Se[ce]))[0],De=Te[1],Ue=(Le=this.mp_n_sin_cos(-te[ce+1]-Se[ce+1]))[0],Ge=Le[1],this.mp_set_controls(ue,ye,Z[ce],Q[ce],De,Ee,Ge,Ue),ue=ye,++ce!==J;);},mp_n_sin_cos:function(G){return[Math.cos(G),Math.sin(G)]},mp_set_controls:function(G,_,J,Z,Q,ee,te,ne){var ie,re,oe,se,ae;oe=Math.abs(_.left_tension()),ie=Math.abs(G.right_tension()),ae=this.mp_velocity(Q,ee,te,ne,ie),re=this.mp_velocity(te,ne,Q,ee,oe),(G.right_tension()<0||_.left_tension()<0)&&(Q>=0&&te>=0||Q<=0&&te<=0)&&(se=Math.abs(Q)*ne+Math.abs(te)*ee)>0&&(se*=1.00024414062,G.right_tension()<0&&this.mp_ab_vs_cd(Math.abs(te),this.FRACTION_ONE,ae,se)<0&&(ae=Math.abs(te)/se),_.left_tension()<0&&this.mp_ab_vs_cd(Math.abs(Q),this.FRACTION_ONE,re,se)<0&&(re=Math.abs(Q)/se)),G.rx=G.x+(J*ee-Z*Q)*ae,G.ry=G.y+(Z*ee+J*Q)*ae,_.lx=_.x-(J*ne+Z*te)*re,_.ly=_.y-(Z*ne-J*te)*re,G.rtype=this.MP_EXPLICIT,_.ltype=this.MP_EXPLICIT},mp_pyth_add:function(G,_){return math.A.hypot(G,_)},mp_curl_ratio:function(G,_,J){var Z=1/_,Q=1/J;return Math.min(4,((3-Z)*Z*Z*G+Q*Q*Q)/(Z*Z*Z*G+(3-Q)*Q*Q))},mp_ab_vs_cd:function(G,_,J,Z){return G*_===J*Z?0:G*_>J*Z?1:-1},mp_velocity:function(G,_,J,Z,Q){return Math.min(4,(2+Math.sqrt(2)*(G-J/16)*(J-G/16)*(_-Z))/(1.5*Q*(2+(Math.sqrt(5)-1)*_+(3-Math.sqrt(5))*Z)))},reduce_angle:function(G){return Math.abs(G)>this.ONE_EIGHTY_DEG&&(G>0?G-=this.THREE_SIXTY_DEG:G+=this.THREE_SIXTY_DEG),G},makeknots:function(G,_){var J,Z,Q=[];for(Z=G.length,J=0;J<Z;J++)Q.push({x:G[J][0],y:G[J][1],ltype:this.MP_OPEN,rtype:this.MP_OPEN,lx:!1,rx:!1,ly:_,ry:_,left_curl:function(){return this.lx||0},right_curl:function(){return this.rx||0},left_tension:function(){return this.ly||1},right_tension:function(){return this.ry||1},set_right_curl:function(ee){this.rx=ee||0},set_left_curl:function(ee){this.lx=ee||0}});for(Z=Q.length,J=0;J<Z;J++)Q[J].next=Q[J+1]||Q[J],Q[J].set_right_given=Q[J].set_right_curl,Q[J].set_left_given=Q[J].set_left_curl,Q[J].right_given=Q[J].right_curl,Q[J].left_given=Q[J].left_curl;return Q[Z-1].next=Q[0],Q},curve:function(G,_){var J,Z,Q,ee,te,ne,ie=!1,re=[],oe=[];for(ee in te=1,(_=_||{tension:1,direction:{},curl:{},isClosed:!1}).hasOwnProperty("tension")&&(te=utils_type.A.evaluate(_.tension)),Z=(J=this.makeknots(G,te)).length,utils_type.A.exists(_.isClosed)&&utils_type.A.evaluate(_.isClosed)&&(ie=!0),ie||(J[0].ltype=this.MP_ENDPOINT,J[0].rtype=this.MP_CURL,J[Z-1].rtype=this.MP_ENDPOINT,J[Z-1].ltype=this.MP_CURL),_)if(_.hasOwnProperty(ee)){if(Q=parseInt(ee,10),isNaN(Q)||Q<0||Q>=Z)continue;ne=_[Q],utils_type.A.exists(ne.type)&&ne.type==="curl"&&(te=utils_type.A.evaluate(ne.curl),Q===0?(J[Q].rtype=this.MP_CURL,J[Q].set_right_curl(te)):Q===Z-1?(J[Q].ltype=this.MP_CURL,J[Q].set_left_curl(te)):(J[Q].ltype=this.MP_CURL,J[Q].rtype=this.MP_CURL,J[Q].lx=te,J[Q].rx=te)),utils_type.A.exists(ne.direction)&&(te=utils_type.A.evaluate(ne.direction),utils_type.A.isArray(te)?(te[0]!==!1&&(J[Q].lx=te[0]*Math.PI/180,J[Q].ltype=this.MP_GIVEN),te[1]!==!1&&(J[Q].rx=te[1]*Math.PI/180,J[Q].rtype=this.MP_GIVEN)):(J[Q].lx=te*Math.PI/180,J[Q].rx=te*Math.PI/180,J[Q].ltype=J[Q].rtype=this.MP_GIVEN)),utils_type.A.exists(ne.tension)&&(te=utils_type.A.evaluate(ne.tension),utils_type.A.isArray(te)?(te[0]!==!1&&(J[Q].ly=utils_type.A.evaluate(te[0])),te[1]!==!1&&(J[Q].ry=utils_type.A.evaluate(te[1]))):(J[Q].ly=te,J[Q].ry=te))}for(this.make_choices(J),Q=0;Q<Z-1;Q++)re.push(J[Q].x),re.push(J[Q].rx),re.push(J[Q+1].lx),oe.push(J[Q].y),oe.push(J[Q].ry),oe.push(J[Q+1].ly);return re.push(J[Z-1].x),oe.push(J[Z-1].y),ie&&(re.push(J[Z-1].rx),oe.push(J[Z-1].ry),re.push(J[0].lx),oe.push(J[0].ly),re.push(J[0].x),oe.push(J[0].y)),[re,oe]}};var metapost=math.A.Metapost;math.A.Clip={_isSeparator:function(G){return isNaN(G.coords.usrCoords[1])&&isNaN(G.coords.usrCoords[2])},makeDoublyLinkedList:function(G){var _,J=null,Z=[],Q=G.length;if(Q>0)for(_=0;_<Q;_++)this._isSeparator(G[_])?(G[_]._next=G[(_+1)%Q],G[_]._prev=G[(Q+_-1)%Q]):(J===null&&(J=_,Z.push(J)),this._isSeparator(G[(_+1)%Q])||_===Q-1?(G[_]._next=G[J],G[J]._prev=G[_],G[_]._end=!0,J=null):(G[_]._next=G[(_+1)%Q],G[J]._prev=G[_]),this._isSeparator(G[(Q+_-1)%Q])||(G[_]._prev=G[(Q+_-1)%Q]));return Z},Vertex:function(G,_,J,Z,Q,ee){this.pos=_,this.intersection=!0,this.coords=G,this.elementClass=constants.A.OBJECT_CLASS_POINT,this.data={alpha:J,path:Z,pathname:Q,done:!1,type:ee,idx:0},this.neighbour=null,this.entry_exit=!1},_addToList:function(G,_,J){var Z=G.length,Q=math.A.eps*math.A.eps;Z>0&&Math.abs(G[Z-1].coords.usrCoords[0]-_.usrCoords[0])<Q&&Math.abs(G[Z-1].coords.usrCoords[1]-_.usrCoords[1])<Q&&Math.abs(G[Z-1].coords.usrCoords[2]-_.usrCoords[2])<Q||G.push({pos:J,intersection:!1,coords:_,elementClass:constants.A.OBJECT_CLASS_POINT})},sortIntersections:function(G){var _,J,Z,Q,ee,te,ne=[],ie=G.length;for(_=0;_<ie;_++)if(G[_].sort(function(re,oe){return re.data.alpha>oe.data.alpha?1:-1}),G[_].length>0){for(ee=G[_].length-1,te=(Q=(Z=G[_][0]).data.path[Z.pos])._next,_===ie-1&&(Q._end=!1),Z.data.alpha===0&&Z.data.type==="T"?(Q.intersection=!0,Q.data=Z.data,Q.neighbour=Z.neighbour,Q.neighbour.neighbour=Q,Q.entry_exit=!1,G[_][0]=Q):(Z._prev=Q,Z._prev._next=Z),J=1;J<=ee;J++)(Z=G[_][J])._prev=G[_][J-1],Z._prev._next=Z;(Z=G[_][ee])._next=te,Z._next._prev=Z,_===ie-1&&(Z._end=!0),ne=ne.concat(G[_])}return ne},_inbetween:function(G,_,J){var Z,Q=math.A.eps*math.A.eps,ee=J[1]-_[1],te=J[2]-_[2],ne=G[1]-_[1],ie=G[2]-_[2];return ee===0&&te===0&&ne===0&&ie===0||(Z=Math.abs(ne)<Q&&Math.abs(ee)<Q?ie/te:ne/ee,Math.abs(Z)<Q&&(Z=0),Z)},_print_array:function(G){var _,J;for(_=0;_<G.length;_++)try{J="",G[_]._end&&(J=" end"),console.log(_,G[_].coords.usrCoords,G[_].data.type,"	","prev",G[_]._prev.coords.usrCoords,"next",G[_]._next.coords.usrCoords+J)}catch{console.log(_,G[_].coords.usrCoords)}},_print_list:function(G){for(var _,J=0;J<100&&(_=G.data?G.data.alpha:"-",console.log("	",G.coords.usrCoords,`
		is:`,G.intersection,"end:",G._end,_,`
		-:`,G._prev.coords.usrCoords,`
		+:`,G._next.coords.usrCoords,`
		n:`,G.intersection?G.neighbour.coords.usrCoords:"-"),!G._end);)G=G._next,J++},_noOverlap:function(G,_,J,Z){var Q,ee,te,ne,ie,re=Math.sqrt(math.A.eps),oe=!1;for(Q=0;Q<3;Q++)if(ee=Math.min(G[Q],_[Q]),te=Math.max(G[Q],_[Q]),ne=Math.min(J[Q],Z[Q]),ie=Math.max(J[Q],Z[Q]),te<ne-re||ee>ie+re){oe=!0;break}return oe},findIntersections:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue,de,me=[],fe=100*math.A.eps,_e=G.length,ye=_.length,be=[],Se=[],Ce=[],Me=!1,Re=!1;for(Q=0;Q<ye;Q++)Ce.push([]);for(Z=0;Z<_e;Z++)if(Se.push([]),this._isSeparator(G[Z])||this._isSeparator(G[(Z+1)%_e]))Me=!0;else{if(Me&&Z===_e-1)break;for(te=G[Z].coords.usrCoords,ne=G[(Z+1)%_e].coords.usrCoords,Q=0;Q<ye;Q++)if(this._isSeparator(_[Q])||this._isSeparator(_[(Q+1)%ye]))Re=!0;else{if(Re&&Q===ye-1)break;if(ie=_[Q].coords.usrCoords,re=_[(Q+1)%ye].coords.usrCoords,!this._noOverlap(te,ne,ie,re)&&(me=geometry.A.meetSegmentSegment(te,ne,ie,re),oe=geometry.A.distance(te,ne,3),se=geometry.A.distance(ie,re,3),me[1]*oe>-fe&&me[1]<1-fe/oe&&me[2]*se>-fe&&me[2]<1-fe/se||me[1]===1/0&&me[2]===1/0&&math.A.norm(me[0],3)<fe)){if(ee=new base_coords.A(constants.A.COORDS_BY_USER,me[0],J),ce="X",Math.abs(me[1])*oe<fe||Math.abs(me[2])*se<fe)ce="T",Math.abs(me[1])*oe<fe&&(me[1]=0),Math.abs(me[2])*se<fe&&(me[2]=0),ee=me[1]===0?new base_coords.A(constants.A.COORDS_BY_USER,te,J):new base_coords.A(constants.A.COORDS_BY_USER,ie,J);else if(me[1]===1/0&&me[2]===1/0&&math.A.norm(me[0],3)<fe){(ae=this._inbetween(te,ie,re))>=0&&ae<1&&(ce="T",ee=new base_coords.A(constants.A.COORDS_BY_USER,te,J),me[1]=0,me[2]=ae,ue=new this.Vertex(ee,Z,me[1],G,"S",ce),de=new this.Vertex(ee,Q,me[2],_,"C",ce),ue.neighbour=de,de.neighbour=ue,Se[Z].push(ue),Ce[Q].push(de)),ae=this._inbetween(ie,te,ne),geometry.A.distance(te,ie,3)>fe&&ae>=0&&ae<1&&(ce="T",ee=new base_coords.A(constants.A.COORDS_BY_USER,ie,J),me[1]=ae,me[2]=0,ue=new this.Vertex(ee,Z,me[1],G,"S",ce),de=new this.Vertex(ee,Q,me[2],_,"C",ce),ue.neighbour=de,de.neighbour=ue,Se[Z].push(ue),Ce[Q].push(de));continue}ue=new this.Vertex(ee,Z,me[1],G,"S",ce),de=new this.Vertex(ee,Q,me[2],_,"C",ce),ue.neighbour=de,de.neighbour=ue,Se[Z].push(ue),Ce[Q].push(de)}}}for(be=this.sortIntersections(Se),Z=0;Z<be.length;Z++)be[Z].data.idx=Z,be[Z].neighbour.data.idx=Z;return[be,this.sortIntersections(Ce)]},_getPosition:function(G,_,J,Z){var Q=geometry.A.det3p(G,_,J),ee=geometry.A.det3p(G,J,Z);return geometry.A.det3p(_,J,Z)>=0?Q>=0&&ee>=0?"left":"right":Q>=0||ee>=0?"left":"right"},_classifyDegenerateIntersections:function(G){var _,J,Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue;for(re=geometry.A.det3p,ne=0,G._tours=0;;){if(G.intersection&&G.data.type==="T"&&(_=G._next.coords.usrCoords,J=G._prev.coords.usrCoords,geometry.A.distance(G.coords.usrCoords,_,3)<math.A.eps&&(_=G._next._next.coords.usrCoords),geometry.A.distance(G.coords.usrCoords,J,3)<math.A.eps&&(J=G._prev._prev.coords.usrCoords),Q=(ee=G.neighbour)._prev.coords.usrCoords,Z=ee._next.coords.usrCoords,geometry.A.distance(ee.coords.usrCoords,Z,3)<math.A.eps&&(Z=ee._next._next.coords.usrCoords),geometry.A.distance(ee.coords.usrCoords,Q,3)<math.A.eps&&(Q=ee._prev._prev.coords.usrCoords),se=re(G.coords.usrCoords,J,Q),ae=re(G.coords.usrCoords,_,Z),ce=re(G.coords.usrCoords,J,Z),ue=re(G.coords.usrCoords,_,Q),se===0&&ae===0&&ce===0&&ue===0&&(G.coords.usrCoords[1]*=1+Math.random()*math.A.eps,G.coords.usrCoords[2]*=1+Math.random()*math.A.eps,ee.coords.usrCoords[1]=G.coords.usrCoords[1],ee.coords.usrCoords[2]=G.coords.usrCoords[2],se=re(G.coords.usrCoords,J,Q),ae=re(G.coords.usrCoords,_,Z),ce=re(G.coords.usrCoords,J,Z),ue=re(G.coords.usrCoords,_,Q)),oe=!1,se===0?geometry.A.affineRatio(G.coords.usrCoords,J,Q)<0&&(oe=!0):ae===0?geometry.A.affineRatio(G.coords.usrCoords,_,Z)<0&&(oe=!0):ce===0?geometry.A.affineRatio(G.coords.usrCoords,J,Z)>0&&(oe=!0):ue===0&&geometry.A.affineRatio(G.coords.usrCoords,_,Q)>0&&(oe=!0),oe&&(ie=Q,Q=Z,Z=ie,ie=se,se=ce,ce=ie,ie=ae,ae=ue,ue=ie),utils_type.A.exists(G.delayedStatus)||(G.delayedStatus=[]),se===0&&ae===0?G.delayedStatus=["on","on"]:se===0?(te=this._getPosition(_,Q,ee.coords.usrCoords,Z),G.delayedStatus=["on",te]):ae===0?(te=this._getPosition(J,Q,ee.coords.usrCoords,Z),G.delayedStatus=[te,"on"]):G.delayedStatus.length===0&&(this._getPosition(J,Q,ee.coords.usrCoords,Z)!==this._getPosition(_,Q,ee.coords.usrCoords,Z)?G.data.type="X":G.data.type="B")),utils_type.A.exists(G._tours)&&G._tours++,G._tours>3||G._end||ne>1e3){ne>1e3&&console.log("Clipping: _classifyDegenerateIntersections exit"),utils_type.A.exists(G._tours)&&delete G._tours;break}G.intersection&&ne++,G=G._next}},_handleIntersectionChains:function(G){var _,J=0,Z="Null",Q=!1,ee=!1,te=!1;for(te;G.intersection===!0&&(G.data.type==="T"&&(G.delayedStatus[0]!=="on"&&G.delayedStatus[1]==="on"?(Q=!0,_=G,Z=G.delayedStatus[0]):Q&&G.delayedStatus[0]==="on"&&G.delayedStatus[1]==="on"?G.data.type="B":Q&&G.delayedStatus[0]==="on"&&G.delayedStatus[1]!=="on"&&(Q=!1,Z===G.delayedStatus[1]?(_.data.type="DB",G.data.type="DB"):(_.data.type="DX",G.data.type="DX"))),J++),G._end&&(ee=!0),!ee||Q;){if(J>1e3){console.log("Warning: _handleIntersectionChains: intersection chain reached maximum numbers of iterations");break}G=G._next}},_handleFullyDegenerateCase:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue,de,me,fe=[G,_];for(ee=0;ee<2;ee++){for(ae=(Z=fe[ee]).length,oe=0,me=!0;oe<ae;oe++)if(!Z[oe].intersection){me=!1;break}if(me)for(ce=(Q=fe[(ee+1)%2]).length,oe=0;oe<ae;oe++){for(ne=Z[oe].coords.usrCoords,ie=Z[oe]._next.coords.usrCoords,te=[.5*(ne[0]+ie[0]),.5*(ne[1]+ie[1]),.5*(ne[2]+ie[2])],se=0,ue=!1;se<ce;se++)if(Math.abs(geometry.A.det3p(Q[se].coords.usrCoords,Q[(se+1)%ce].coords.usrCoords,te))<math.A.eps){ue=!0;break}if(!ue){re={pos:oe,intersection:!1,coords:new base_coords.A(constants.A.COORDS_BY_USER,te,J),elementClass:constants.A.OBJECT_CLASS_POINT},de=Z[oe]._next,Z[oe]._next=re,re._prev=Z[oe],re._next=de,de._prev=re,Z[oe]._end&&(Z[oe]._end=!1,re._end=!0);break}}}},_getStatus:function(G,_){for(;G.intersection&&!G._end;)G=G._next;return[G,geometry.A.windingNumber(G.coords.usrCoords,_)===0?"entry":"exit"]},markEntryExit:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe=null,se=0;for(ie=J.length,ne=0;ne<ie;ne++)for(re=J[ne],this._classifyDegenerateIntersections(G[re]),this._handleIntersectionChains(G[re]),Q=(te=this._getStatus(G[re],_))[0],Z=te[1],Q._starter=!0,ee=0,oe=null,se=0;Q.intersection===!0&&(Q.data.type==="X"&&se===1&&(oe.entry_exit=Z,Z==="exit"&&(oe.data.type="X"),se=2),Q.data.type!=="X"&&Q.data.type!=="DB"||(Q.entry_exit=Z,Z=Z==="entry"?"exit":"entry"),Q.data.type==="DX"&&(se===0?(oe=Q,se=1):se===1?(Q.entry_exit=Z,oe.entry_exit=Z,Z==="exit"?oe.data.type="X":Q.data.type="X",Z=Z==="entry"?"exit":"entry",oe=null,se=0):se===2&&(Q.entry_exit=Z,Q.data.type="X",Z=Z==="entry"?"exit":"entry",oe=null,se=0))),Q=Q._next,!(utils_type.A.exists(Q._starter)||ee>1e4);)ee++},_stayOnPath:function(G,_){var J=!0;return G.intersection&&G.data.type!=="B"&&(J=_===G.entry_exit),J},_addVertex:function(G,_,J){return isNaN(_.coords.usrCoords[1])||isNaN(_.coords.usrCoords[2])||G.push(_),_.intersection&&_.data.done?(J&&console.log("Add last intersection point",_.coords.usrCoords,"on",_.data.pathname,_.entry_exit,_.data.type),!0):(_.intersection&&(_.data.done=!0,J&&console.log("Add intersection point",_.coords.usrCoords,"on",_.data.pathname,_.entry_exit,_.data.type)),!1)},tracing:function(G,_,J){var Z,Q,ee,te,ne=0,ie=1e4,re=0,oe=[],se=!1,ae=!1;for(ae;re<_.length&&ne<ie;)if((ee=_[re]).data.done||ee.data.type!=="X")re++;else{oe.length>0&&oe.push([NaN,NaN]),te=ee.data.idx,Z=G,se=this._addVertex(oe,ee,ae),Q=ee.entry_exit;do{if(se)break;if(J==="intersection"&&ee.entry_exit==="entry"||J==="union"&&ee.entry_exit==="exit"||J==="difference"&&Z===G==(ee.entry_exit==="exit")){do if(ee=ee._next,se=this._addVertex(oe,ee,ae))break;while(this._stayOnPath(ee,Q));ne++}else{do if(ee=ee._prev,se=this._addVertex(oe,ee,ae))break;while(this._stayOnPath(ee,Q));ne++}if(se)break;if(!ee.neighbour)return console.log("Tracing: emergency break - no neighbour!!!!!!!!!!!!!!!!!",ne),[[0],[0]];if((ee=ee.neighbour).data.done)break;ee.data.done=!0,Q=ee.entry_exit,Z=ee.data.path}while(ee.data.idx!==te&&ne<ie);ne>=ie&&console.log("Tracing: stopping an infinite loop!",ne),re++}return this._getCoordsArrays(oe,!1)},isEmptyCase:function(G,_,J){return J==="intersection"&&(G.length===0||_.length===0)||J==="union"&&G.length===0&&_.length===0||J==="difference"&&G.length===0},_getCoordsArrays:function(G,_){var J,Z=[],Q=[],ee=G.length;for(J=0;J<ee;J++)G[J].coords?(Z.push(G[J].coords.usrCoords[1]),Q.push(G[J].coords.usrCoords[2])):(Z.push(G[J][0]),Q.push(G[J][1]));return _&&ee>0&&(G[0].coords?(Z.push(G[0].coords.usrCoords[1]),Q.push(G[0].coords.usrCoords[2])):(Z.push(G[0][0]),Q.push(G[0][1]))),[Z,Q]},handleEmptyIntersection:function(G,_,J){var Z,Q,ee=!1,te=[];if(G.length===0)return te=J==="union"?_:[],this._getCoordsArrays(te,!0);if(_.length===0)return te=J==="intersection"?[]:G,this._getCoordsArrays(te,!0);if(G.length>0)for(Z=G[0];Z.intersection&&!(Z=Z._next)._end;);if(_.length>0)for(Q=_[0];Q.intersection&&!(Q=Q._next)._end;);return geometry.A.windingNumber(Z.coords.usrCoords,_)===0?geometry.A.windingNumber(Q.coords.usrCoords,G)!==0?(J==="union"?(utils_type.A.concat(te,G),te.push(G[0])):J==="difference"&&(utils_type.A.concat(te,G),te.push(G[0]),geometry.A.signedPolygon(G)*geometry.A.signedPolygon(_)>0&&te.reverse(),te.push([NaN,NaN])),J!=="difference"&&J!=="intersection"||(utils_type.A.concat(te,_),te.push(_[0]),ee=!1)):J==="difference"?(utils_type.A.concat(te,G),ee=!0):J==="union"&&(utils_type.A.concat(te,G),te.push(G[0]),te.push([NaN,NaN]),utils_type.A.concat(te,_),te.push(_[0])):J==="intersection"?(utils_type.A.concat(te,G),ee=!0):J==="union"&&(utils_type.A.concat(te,_),te.push(_[0])),this._getCoordsArrays(te,ee)},_countCrossingIntersections:function(G){var _,J=G.length,Z=0;for(_=0;_<J;_++)G[_].data.type==="X"&&Z++;return Z},_getPath:function(G,_){var J,Z,Q,ee,te,ne,ie,re=[];if(G.elementClass!==constants.A.OBJECT_CLASS_CURVE||G.type!==constants.A.OBJECT_TYPE_ARC&&G.type!==constants.A.OBJECT_TYPE_SECTOR){if(G.elementClass===constants.A.OBJECT_CLASS_CURVE&&utils_type.A.exists(G.points))for(Z=G.numberPoints,J=0;J<Z;J++)this._addToList(re,G.points[J],J);else if(G.type===constants.A.OBJECT_TYPE_POLYGON)for(J=0;J<G.vertices.length;J++)this._addToList(re,G.vertices[J].coords,J);else if(G.elementClass===constants.A.OBJECT_CLASS_CIRCLE)for(ie=359,Q=G.Radius(),ee=2*Math.PI/ie,J=0;J<=ie;J++)this._addToList(re,new base_coords.A(constants.A.COORDS_BY_USER,[G.center.coords.usrCoords[0],G.center.coords.usrCoords[1]+Math.cos(J*ee)*Q,G.center.coords.usrCoords[2]+Math.sin(J*ee)*Q],_),J);else if(utils_type.A.isArray(G))for(Z=G.length,J=0;J<Z;J++)utils_type.A.exists(G[J].coords)?this._addToList(re,G[J].coords,J):utils_type.A.isArray(G[J])?this._addToList(re,new base_coords.A(constants.A.COORDS_BY_USER,G[J],_),J):utils_type.A.exists(G[J].usrCoords)&&this._addToList(re,G[J],J)}else{for(te=geometry.A.rad(G.radiuspoint,G.center,G.anglepoint),ie=Math.floor(180*te/Math.PI),Q=G.Radius(),ee=te/ie,ne=Math.atan2(G.radiuspoint.coords.usrCoords[2]-G.center.coords.usrCoords[2],G.radiuspoint.coords.usrCoords[1]-G.center.coords.usrCoords[1]),G.type===constants.A.OBJECT_TYPE_SECTOR&&this._addToList(re,G.center.coords,0),J=0;J<=ie;J++)this._addToList(re,new base_coords.A(constants.A.COORDS_BY_USER,[G.center.coords.usrCoords[0],G.center.coords.usrCoords[1]+Math.cos(J*ee+ne)*Q,G.center.coords.usrCoords[2]+Math.sin(J*ee+ne)*Q],_),J+1);G.type===constants.A.OBJECT_TYPE_SECTOR&&this._addToList(re,G.center.coords,ie+2)}return re},greinerHormann:function(G,_,J,Z){var Q,ee,te,ne,ie=[],re=[];return(Q=(ie=this._getPath(G,Z)).length)>0&&geometry.A.distance(ie[0].coords.usrCoords,ie[Q-1].coords.usrCoords,3)<math.A.eps&&ie.pop(),(Q=(re=this._getPath(_,Z)).length)>0&&geometry.A.distance(re[0].coords.usrCoords,re[Q-1].coords.usrCoords,3)<math.A.eps*math.A.eps&&re.pop(),this.isEmptyCase(ie,re,J)?[[],[]]:(te=this.makeDoublyLinkedList(ie),ne=this.makeDoublyLinkedList(re),ee=this.findIntersections(ie,re,Z)[0],this._handleFullyDegenerateCase(ie,re,Z),this.markEntryExit(ie,re,te),this.markEntryExit(re,ie,ne),this._countCrossingIntersections(ee)===0?this.handleEmptyIntersection(ie,re,J):this.tracing(ie,ee,J))},union:function(G,_,J){return this.greinerHormann(G,_,"union",J)},intersection:function(G,_,J){return this.greinerHormann(G,_,"intersection",J)},difference:function(G,_,J){return this.greinerHormann(G,_,"difference",J)}};var clip=math.A.Clip;math.A.Poly={},math.A.Poly.Ring=function(G){this.vars=G},jxg.A.extend(math.A.Poly.Ring.prototype,{}),math.A.Poly.Monomial=function(G,_,J){var Z;if(!utils_type.A.exists(G))throw new Error("JSXGraph error: In JXG.Math.Poly.monomial missing parameter 'ring'.");for(utils_type.A.isArray(J)||(J=[]),Z=(J=J.slice(0,G.vars.length)).length;Z<G.vars.length;Z++)J.push(0);this.ring=G,this.coefficient=_||0,this.exponents=utils_type.A.deepCopy(J)},jxg.A.extend(math.A.Poly.Monomial.prototype,{copy:function(){return new math.A.Poly.Monomial(this.ring,this.coefficient,this.exponents)},print:function(){var G,_=[];for(G=0;G<this.ring.vars.length;G++)_.push(this.ring.vars[G]+"^"+this.exponents[G]);return this.coefficient+"*"+_.join("*")}}),math.A.Poly.Polynomial=function(G,_){var J;if(!utils_type.A.exists(G))throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial missing parameter 'ring'.");J=utils_type.A.exists(_)&&utils_type.A.isString(_)?void 0:[],this.ring=G,this.monomials=J},jxg.A.extend(math.A.Poly.Polynomial.prototype,{findSignature:function(G){var _;for(_=0;_<this.monomials.length;_++)if(utils_type.A.cmpArrays(this.monomials[_].exponents,G))return _;return-1},addSubMonomial:function(G,_){var J;(J=this.findSignature(G.exponents))>-1?this.monomials[J].coefficient+=_*G.coefficient:(G.coefficient*=_,this.monomials.push(G))},add:function(G){var _;if(!utils_type.A.exists(G)||G.ring!==this.ring)throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial.add either summand is undefined or rings don't match.");if(utils_type.A.isArray(G.exponents))this.addSubMonomial(G,1);else for(_=0;_<G.monomials.length;_++)this.addSubMonomial(G.monomials[_],1)},sub:function(G){var _;if(!utils_type.A.exists(G)||G.ring!==this.ring)throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial.sub either summand is undefined or rings don't match.");if(utils_type.A.isArray(G.exponents))this.addSubMonomial(G,-1);else for(_=0;_<G.monomials.length;_++)this.addSubMonomial(G.monomials[_],-1)},copy:function(){var G,_;for(_=new math.A.Poly.Polynomial(this.ring),G=0;G<this.monomials.length;G++)_.monomials.push(this.monomials[G].copy());return _},print:function(){var G,_=[];for(G=0;G<this.monomials.length;G++)_.push("("+this.monomials[G].print()+")");return _.join("+")}}),math.A.Poly,jxg.A.Complex=function(G,_){this.isComplex=!0,G&&G.isComplex&&(_=G.imaginary,G=G.real),this.real=G||0,this.imaginary=_||0},jxg.A.extend(jxg.A.Complex.prototype,{toString:function(){return this.real+" + "+this.imaginary+"i"},add:function(G){return utils_type.A.isNumber(G)?this.real+=G:(this.real+=G.real,this.imaginary+=G.imaginary),this},sub:function(G){return utils_type.A.isNumber(G)?this.real-=G:(this.real-=G.real,this.imaginary-=G.imaginary),this},mult:function(G){var _,J;return utils_type.A.isNumber(G)?(this.real*=G,this.imaginary*=G):(_=this.real,J=this.imaginary,this.real=_*G.real-J*G.imaginary,this.imaginary=_*G.imaginary+J*G.real),this},div:function(G){var _,J,Z;if(utils_type.A.isNumber(G)){if(Math.abs(G)<Math.eps)return this.real=1/0,this.imaginary=1/0,this;this.real/=G,this.imaginary/=G}else{if(Math.abs(G.real)<Math.eps&&Math.abs(G.imaginary)<Math.eps)return this.real=1/0,this.imaginary=1/0,this;_=G.real*G.real+G.imaginary*G.imaginary,Z=this.real,J=this.imaginary,this.real=(Z*G.real+J*G.imaginary)/_,this.imaginary=(J*G.real-Z*G.imaginary)/_}return this},conj:function(){return this.imaginary*=-1,this},abs:function(){var G=this.real,_=this.imaginary;return Math.sqrt(G*G+_*_)},angle:function(){return Math.atan2(this.imaginary,this.real)}}),jxg.A.C={},jxg.A.C.add=function(G,_){var J=new jxg.A.Complex(G);return J.add(_),J},jxg.A.C.sub=function(G,_){var J=new jxg.A.Complex(G);return J.sub(_),J},jxg.A.C.mult=function(G,_){var J=new jxg.A.Complex(G);return J.mult(_),J},jxg.A.C.div=function(G,_){var J=new jxg.A.Complex(G);return J.div(_),J},jxg.A.C.conj=function(G){var _=new jxg.A.Complex(G);return _.conj(),_},jxg.A.C.abs=function(G){return new jxg.A.Complex(G).abs()},jxg.A.C.angle=function(G){return new jxg.A.Complex(G).angle()},jxg.A.C.copy=function(G){return new jxg.A.Complex(G)},jxg.A.Complex.C=jxg.A.C;var complex=jxg.A.Complex,src_options=__webpack_require__(378);jxg.A.AbstractRenderer=function(){this.vOffsetText=0,this.enhancedRendering=!0,this.container=null,this.type="",this.supportsForeignObject=!1,this.dashArray=[[2,2],[5,5],[10,10],[20,20],[20,10,10,10],[20,5,10,5],[0,5]]},jxg.A.extend(jxg.A.AbstractRenderer.prototype,{_updateVisual:function(G,_,J){(J||this.enhancedRendering)&&(_=_||{},this.setObjectTransition(G),G.evalVisProp("draft")?this.setDraft(G):(_.stroke||(G.highlighted?(this.setObjectStrokeColor(G,G.evalVisProp("highlightstrokecolor"),G.evalVisProp("highlightstrokeopacity")),this.setObjectStrokeWidth(G,G.evalVisProp("highlightstrokewidth"))):(this.setObjectStrokeColor(G,G.evalVisProp("strokecolor"),G.evalVisProp("strokeopacity")),this.setObjectStrokeWidth(G,G.evalVisProp("strokewidth")))),_.fill||(G.highlighted?this.setObjectFillColor(G,G.evalVisProp("highlightfillcolor"),G.evalVisProp("highlightfillopacity")):this.setObjectFillColor(G,G.evalVisProp("fillcolor"),G.evalVisProp("fillopacity"))),_.dash||this.setDashStyle(G,G.visProp),_.shadow||this.setShadow(G),_.tabindex||this.setTabindex(G)),G.highlighted?this.setCssClass(G,G.evalVisProp("highlightcssclass")):this.setCssClass(G,G.evalVisProp("cssclass")),G.evalVisProp("aria.enabled")&&this.setARIA(G))},_getHighlighted:function(G){var _=!1;return utils_type.A.exists(G.board)&&utils_type.A.exists(G.board.highlightedObjects)||(_=!0),!_&&utils_type.A.exists(G.board.highlightedObjects[G.id])?"highlight":""},drawPoint:function(G){var _,J=src_options.A.normalizePointFace(G.evalVisProp("face"));_=J==="o"?"ellipse":J==="[]"?"rect":"path",G.rendNode=this.appendChildPrim(this.createPrim(_,G.id),G.evalVisProp("layer")),this.appendNodesToElement(G,_),this._updateVisual(G,{dash:!0,shadow:!0},!0),this.updatePoint(G)},updatePoint:function(G){var _,J=G.evalVisProp("size"),Z=src_options.A.normalizePointFace(G.evalVisProp("face")),Q=G.evalVisProp("sizeunit"),ee=G.evalVisProp("zoom");isNaN(G.coords.scrCoords[2]+G.coords.scrCoords[1])||(Q==="user"&&(J*=Math.sqrt(Math.abs(G.board.unitX*G.board.unitY))),_=(J*=G.board&&ee?Math.sqrt(G.board.zoomX*G.board.zoomY):1)===0?0:J+1,Z==="o"?this.updateEllipsePrim(G.rendNode,G.coords.scrCoords[1],G.coords.scrCoords[2],_,_):Z==="[]"?this.updateRectPrim(G.rendNode,G.coords.scrCoords[1]-J,G.coords.scrCoords[2]-J,2*J,2*J):this.updatePathPrim(G.rendNode,this.updatePathStringPoint(G,J,Z),G.board),this._updateVisual(G,{dash:!1,shadow:!1}),this.setShadow(G))},changePointStyle:function(G){var _=this.getElementById(G.id);utils_type.A.exists(_)&&this.remove(_),this.drawPoint(G),utils_type.A.clearVisPropOld(G),G.visPropCalc.visible||this.display(G,!1),G.evalVisProp("draft")&&this.setDraft(G)},drawLine:function(G){G.rendNode=this.appendChildPrim(this.createPrim("line",G.id),G.evalVisProp("layer")),this.appendNodesToElement(G,"lines"),this.updateLine(G)},updateLine:function(G){this._updateVisual(G),this.updatePathWithArrowHeads(G),this.setLineCap(G)},drawCurve:function(G){G.rendNode=this.appendChildPrim(this.createPrim("path",G.id),G.evalVisProp("layer")),this.appendNodesToElement(G,"path"),this.updateCurve(G)},updateCurve:function(G){this._updateVisual(G),this.updatePathWithArrowHeads(G),this.setLineCap(G)},updatePathWithArrowHeads:function(G,_){var J,Z,Q=_?"highlight":"";J=_&&G.evalVisProp("highlightstrokewidth")?Math.max(G.evalVisProp("highlightstrokewidth"),G.evalVisProp("strokewidth")):G.evalVisProp("strokewidth"),Z=this.getArrowHeadData(G,J,Q),this.makeArrows(G,Z),G.elementClass===constants.A.OBJECT_CLASS_LINE?this.updateLineWithEndings(G,Z):G.elementClass===constants.A.OBJECT_CLASS_CURVE&&this.updatePath(G),this.setArrowSize(G,Z)},getArrowHeadData:function(G,_,J){var Z,Q,ee,te,ne=math.A.eps,ie=0,re=0,oe=0,se=0,ae=G.evalVisProp("firstarrow"),ce=G.evalVisProp("lastarrow");return(ae||ce)&&(Z=utils_type.A.exists(ae.type)?G.eval(ae.type):G.elementClass===constants.A.OBJECT_CLASS_LINE?1:7,Q=utils_type.A.exists(ce.type)?G.eval(ce.type):G.elementClass===constants.A.OBJECT_CLASS_LINE?1:7,ae&&(te=6,utils_type.A.exists(ae.size)&&(te=G.eval(ae.size)),J!==""&&utils_type.A.exists(ae[J+"size"])&&(te=G.eval(ae[J+"size"])),ee=_*te,Z===2?(ee*=.5,ne+=_*te):Z===3?(ee=_*te/3,ne+=_):Z===4||Z===5||Z===6?(ee=_*te/1.5,ne+=_*te):Z===7?(ee=0,te=10,ne+=_):ne+=_*te,ie+=ee,oe=te),ce&&(te=6,utils_type.A.exists(ce.size)&&(te=G.eval(ce.size)),J!==""&&utils_type.A.exists(ce[J+"size"])&&(te=G.eval(ce[J+"size"])),ee=_*te,Q===2?(ee*=.5,ne+=_*te):Q===3?(ee=_*te/3,ne+=_):Q===4||Q===5||Q===6?(ee=_*te/1.5,ne+=_*te):Q===7?(ee=0,te=10,ne+=_):ne+=_*te,re+=ee,se=te)),G.visPropCalc.typeFirst=Z,G.visPropCalc.typeLast=Q,{evFirst:ae,evLast:ce,typeFirst:Z,typeLast:Q,offFirst:ie,offLast:re,sizeFirst:oe,sizeLast:se,showFirst:1,showLast:1,minLen:ne,strokeWidth:_}},updateLineWithEndings:function(G,_){var J,Z,Q;return J=new base_coords.A(constants.A.COORDS_BY_USER,G.point1.coords.usrCoords,G.board),Z=new base_coords.A(constants.A.COORDS_BY_USER,G.point2.coords.usrCoords,G.board),Q=G.evalVisProp("margin"),geometry.A.calcStraight(G,J,Z,Q),this.handleTouchpoints(G,J,Z,_),this.getPositionArrowHead(G,J,Z,_),this.updateLinePrim(G.rendNode,J.scrCoords[1],J.scrCoords[2],Z.scrCoords[1],Z.scrCoords[2],G.board),this},updatePath:function(G){return G.evalVisProp("handdrawing")?this.updatePathPrim(G.rendNode,this.updatePathStringBezierPrim(G),G.board):this.updatePathPrim(G.rendNode,this.updatePathStringPrim(G),G.board),this},getPositionArrowHead:function(G,_,J,Z){var Q,ee,te,ne,ie;return(Z.evFirst||Z.evLast)&&(ee=te=ne=ie=0,Q=_.distance(constants.A.COORDS_BY_SCREEN,J),Z.evFirst&&G.board.renderer.type!=="vml"&&(Q>=Z.minLen?(ee=(J.scrCoords[1]-_.scrCoords[1])*Z.offFirst/Q,te=(J.scrCoords[2]-_.scrCoords[2])*Z.offFirst/Q):Z.showFirst=0),Z.evLast&&G.board.renderer.type!=="vml"&&(Q>=Z.minLen?(ne=(J.scrCoords[1]-_.scrCoords[1])*Z.offLast/Q,ie=(J.scrCoords[2]-_.scrCoords[2])*Z.offLast/Q):Z.showLast=0),_.setCoordinates(constants.A.COORDS_BY_SCREEN,[_.scrCoords[1]+ee,_.scrCoords[2]+te],!1,!0),J.setCoordinates(constants.A.COORDS_BY_SCREEN,[J.scrCoords[1]-ne,J.scrCoords[2]-ie],!1,!0)),this},handleTouchpoints:function(G,_,J,Z){var Q,ee,te,ne,ie,re,oe;return(Z.evFirst||Z.evLast)&&(te=ne=ie=re=oe=0,Q=G.point1.evalVisProp("size")+G.point1.evalVisProp("strokewidth"),ee=G.point2.evalVisProp("size")+G.point2.evalVisProp("strokewidth"),Z.evFirst&&G.evalVisProp("touchfirstpoint")&&G.point1.evalVisProp("visible")&&(te=_.distance(constants.A.COORDS_BY_SCREEN,J),ne=(J.scrCoords[1]-_.scrCoords[1])*Q/te,ie=(J.scrCoords[2]-_.scrCoords[2])*Q/te),Z.evLast&&G.evalVisProp("touchlastpoint")&&G.point2.evalVisProp("visible")&&(te=_.distance(constants.A.COORDS_BY_SCREEN,J),re=(J.scrCoords[1]-_.scrCoords[1])*ee/te,oe=(J.scrCoords[2]-_.scrCoords[2])*ee/te),_.setCoordinates(constants.A.COORDS_BY_SCREEN,[_.scrCoords[1]+ne,_.scrCoords[2]+ie],!1,!0),J.setCoordinates(constants.A.COORDS_BY_SCREEN,[J.scrCoords[1]-re,J.scrCoords[2]-oe],!1,!0)),this},setArrowSize:function(G,_){return _.evFirst&&this._setArrowWidth(G.rendNodeTriangleStart,_.showFirst*_.strokeWidth,G.rendNode,_.sizeFirst),_.evLast&&this._setArrowWidth(G.rendNodeTriangleEnd,_.showLast*_.strokeWidth,G.rendNode,_.sizeLast),this},setLineCap:function(G){},drawTicks:function(G){G.rendNode=this.appendChildPrim(this.createPrim("path",G.id),G.evalVisProp("layer")),this.appendNodesToElement(G,"path")},updateTicks:function(G){},drawEllipse:function(G){G.rendNode=this.appendChildPrim(this.createPrim("ellipse",G.id),G.evalVisProp("layer")),this.appendNodesToElement(G,"ellipse"),this.updateEllipse(G)},updateEllipse:function(G){this._updateVisual(G);var _=G.Radius();Math.abs(G.center.coords.usrCoords[0])>math.A.eps&&!isNaN(_+G.center.coords.scrCoords[1]+G.center.coords.scrCoords[2])&&_*G.board.unitX<2e6&&this.updateEllipsePrim(G.rendNode,G.center.coords.scrCoords[1],G.center.coords.scrCoords[2],_*G.board.unitX,_*G.board.unitY),this.setLineCap(G)},drawPolygon:function(G){G.rendNode=this.appendChildPrim(this.createPrim("polygon",G.id),G.evalVisProp("layer")),this.appendNodesToElement(G,"polygon"),this.updatePolygon(G)},updatePolygon:function(G){this._updateVisual(G,{stroke:!0,dash:!0}),this.updatePolygonPrim(G.rendNode,G)},displayCopyright:function(G,_){},displayLogo:function(G,_){},drawInternalText:function(G){},updateInternalText:function(G){},drawText:function(G){var _,J,Z,Q;G.evalVisProp("display")==="html"&&env.A.isBrowser&&this.type!=="no"?((_=this.container.ownerDocument.createElement("div")).style.position="absolute",_.className=G.evalVisProp("cssclass"),Z=G.evalVisProp("layer"),utils_type.A.exists(Z)||(Z=0),J=this.container.style.zIndex===""?0:parseInt(this.container.style.zIndex,10),_.style.zIndex=J+Z,this.container.appendChild(_),_.setAttribute("id",this.container.id+"_"+G.id)):_=this.drawInternalText(G),G.rendNode=_,G.htmlStr="",G.visProp.islabel&&utils_type.A.exists(G.visProp.anchor)?(Q=G.visProp.anchor.evalVisProp("visible"),G.prepareUpdate().updateVisibility(Q)):G.prepareUpdate().updateVisibility(),this.updateText(G)},updateText:function(G){var _,J,Z,Q,ee,te,ne,ie,re,oe,se,ae=G.plaintext;if(G.visPropCalc.visible)if(this.updateTextStyle(G,!1),G.evalVisProp("display")==="html"&&this.type!=="no"){if(isNaN(G.coords.scrCoords[1]+G.coords.scrCoords[2])||(J=G.coords.scrCoords[1],J=Math.abs(J)<1e6?J:1e6,(ee=G.getAnchorX())==="right"?(_=G.board.canvasWidth-J,oe="right"):ee==="middle"?(_=J-.5*G.size[0],oe="center"):(_=J,oe="left"),G.visPropOld.left!==ee+_&&(ee==="right"?(G.rendNode.style.right=_+"px",G.rendNode.style.left="auto"):(G.rendNode.style.left=_+"px",G.rendNode.style.right="auto"),G.visPropOld.left=ee+_),J=G.coords.scrCoords[2]+this.vOffsetText,J=Math.abs(J)<1e6?J:1e6,(te=G.getAnchorY())==="bottom"?(_=G.board.canvasHeight-J,se="bottom"):te==="middle"?(_=J-.5*G.size[1],se="center"):(_=J,se="top"),G.visPropOld.top!==te+_&&(te==="bottom"?(G.rendNode.style.top="auto",G.rendNode.style.bottom=_+"px"):(G.rendNode.style.bottom="auto",G.rendNode.style.top=_+"px"),G.visPropOld.top=te+_)),G.htmlStr!==ae){try{G.type===utils_type.A.OBJECT_TYPE_BUTTON?G.rendNodeButton.innerHTML=ae:G.type===utils_type.A.OBJECT_TYPE_CHECKBOX||G.type===utils_type.A.OBJECT_TYPE_INPUT?G.rendNodeLabel.innerHTML=ae:G.rendNode.innerHTML=ae}catch{Z=G.rendNode.parentNode,G.rendNode.parentNode.removeChild(G.rendNode),G.rendNode.innerHTML=ae,Z.appendChild(G.rendNode)}if(G.htmlStr=ae,G.evalVisProp("usemathjax"))try{MathJax.typeset?MathJax.typeset([G.rendNode]):MathJax.Hub.Queue(["Typeset",MathJax.Hub,G.rendNode])}catch{jxg.A.debug("MathJax (not yet) loaded")}else if(G.evalVisProp("usekatex"))try{(Q=G.rendNode.innerHTML.indexOf("<span")===0&&G.rendNode.innerHTML.indexOf("<label")>0&&(G.rendNode.innerHTML.indexOf("<checkbox")>0||G.rendNode.innerHTML.indexOf("<input")>0)?G.rendNodeLabel:G.rendNode.innerHTML.indexOf("<button")===0?G.rendNodeButton:G.rendNode)&&katex.render(ae,Q,{macros:G.evalVisProp("katexmacros"),throwOnError:!1})}catch{jxg.A.debug("KaTeX not loaded (yet)")}else if(G.evalVisProp("useasciimathml"))try{AMprocessNode(G.rendNode,!1)}catch{jxg.A.debug("AsciiMathML not loaded (yet)")}}(ne=G.evalVisProp("rotate"))!==0&&(ne*=Math.PI/180,ie=Math.cos(ne),re=Math.sin(ne),G.rendNode.style.transform="matrix("+[ie,-1*re,re,ie,0,0].join(",")+")",G.rendNode.style["transform-origin"]=oe+" "+se),this.transformRect(G,G.transformations)}else this.updateInternalText(G)},_css2js:function(G){var _,J,Z,Q,ee,te=[],ne=utils_type.A.trim(G).replace(/;$/,"").split(";");for(J=ne.length,_=0;_<J;++_)utils_type.A.trim(ne[_])!==""&&(ee=ne[_].split(":"),Z=utils_type.A.trim(ee[0].replace(/-([a-z])/gi,function(ie,re){return re.toUpperCase()})),Q=utils_type.A.trim(ee[1]),te.push({key:Z,val:Q}));return te},updateTextStyle:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se=env.A.isBrowser?G.visProp.display:"internal",ae=["rendNode","rendNodeTag","rendNodeLabel"],ce=ae.length,ue=G.evalVisProp("fontunit"),de=["cssdefaultstyle","cssstyle"],me=de.length;if(_?(Q=G.evalVisProp("highlightstrokecolor"),Z=G.evalVisProp("highlightstrokeopacity"),ee=G.evalVisProp("highlightcssclass")):(Q=G.evalVisProp("strokecolor"),Z=G.evalVisProp("strokeopacity"),ee=G.evalVisProp("cssclass")),this.type!=="no"&&(se==="html"||this.type!=="canvas")){for(re=0;re<me;re++)for(oe=G.evalVisProp((_?"highlight":"")+de[re]),te=0;te<ce;te++)if(utils_type.A.exists(G[ae[te]])&&oe!==""&&G.visPropOld[de[re]+"_"+te]!==oe){for(ie in ne=this._css2js(oe))ne.hasOwnProperty(ie)&&(G[ae[te]].style[ne[ie].key]=ne[ie].val);G.visPropOld[de[re]+"_"+te]=oe}if(J=G.evalVisProp("fontsize"),G.visPropOld.fontsize!==J){G.needsSizeUpdate=!0;try{for(te=0;te<ce;te++)utils_type.A.exists(G[ae[te]])&&(G[ae[te]].style.fontSize=J+ue)}catch{for(te=0;te<ce;te++)utils_type.A.exists(G[ae[te]])&&(G[ae[te]].style.fontSize=J)}G.visPropOld.fontsize=J}}return this.setTabindex(G),this.setObjectTransition(G),se==="html"&&this.type!=="no"?(G.visPropOld.cssclass!==ee&&(G.rendNode.className=ee,G.visPropOld.cssclass=ee,G.needsSizeUpdate=!0),this.setObjectStrokeColor(G,Q,Z)):this.updateInternalTextStyle(G,Q,Z),G.evalVisProp("aria.enabled")&&this.setARIA(G),this},updateInternalTextStyle:function(G,_,J){this.setObjectStrokeColor(G,_,J)},drawImage:function(G){},updateImage:function(G){this.updateRectPrim(G.rendNode,G.coords.scrCoords[1],G.coords.scrCoords[2]-G.size[1],G.size[0],G.size[1]),this.updateImageURL(G),this.transformRect(G,G.transformations),this._updateVisual(G,{stroke:!0,dash:!0},!0)},joinTransforms:function(G,_){var J,Z=G.board.origin.scrCoords[1],Q=G.board.origin.scrCoords[2],ee=G.board.unitX,te=G.board.unitY,ne=_.length,ie=[[1,0,0],[-Z/ee,1/ee,0],[Q/te,0,-1/te]];for(J=0;J<ne;J++)ie=math.A.matMatMult(_[J].matrix,ie);return ie=math.A.matMatMult([[1,0,0],[Z,ee,0],[Q,0,-te]],ie)},transformRect:function(G,_){},updateImageURL:function(G){},updateImageStyle:function(G,_){G.rendNode.className=G.evalVisProp(_?"highlightcssclass":"cssclass")},drawForeignObject:function(G){},updateForeignObject:function(G){},appendChildPrim:function(G,_){},appendNodesToElement:function(G,_){},createPrim:function(G,_){return null},remove:function(G){},makeArrows:function(G,_){},_setArrowWidth:function(G,_,J){},updateEllipsePrim:function(G,_,J,Z,Q){},updateLinePrim:function(G,_,J,Z,Q,ee){},updatePathPrim:function(G,_,J){},updatePathStringPoint:function(G,_,J){},updatePathStringPrim:function(G){},updatePathStringBezierPrim:function(G){},updatePolygonPrim:function(G,_){},updateRectPrim:function(G,_,J,Z,Q){},display:function(G,_){G&&(G.visPropOld.visible=_)},hide:function(G){},highlight:function(G,_){var J,Z,Q;if(this.setObjectTransition(G),!G.visProp.draft){if(G.type===constants.A.OBJECT_TYPE_POLYGON)for(this.setObjectFillColor(G,G.evalVisProp("highlightfillcolor"),G.evalVisProp("highlightfillopacity")),Z=G.evalVisProp("highlightbystrokewidth"),J=0;J<G.borders.length;J++)this.highlight(G.borders[J],!Z);else G.elementClass===constants.A.OBJECT_CLASS_TEXT?this.updateTextStyle(G,!0):G.type===constants.A.OBJECT_TYPE_IMAGE?(this.updateImageStyle(G,!0),this.setObjectFillColor(G,G.evalVisProp("highlightfillcolor"),G.evalVisProp("highlightfillopacity"))):(this.setObjectStrokeColor(G,G.evalVisProp("highlightstrokecolor"),G.evalVisProp("highlightstrokeopacity")),this.setObjectFillColor(G,G.evalVisProp("highlightfillcolor"),G.evalVisProp("highlightfillopacity")));!_&&G.evalVisProp("highlightstrokewidth")&&(Q=Math.max(G.evalVisProp("highlightstrokewidth"),G.evalVisProp("strokewidth")),this.setObjectStrokeWidth(G,Q),G.elementClass!==constants.A.OBJECT_CLASS_LINE&&G.elementClass!==constants.A.OBJECT_CLASS_CURVE||this.updatePathWithArrowHeads(G,!0))}return this.setCssClass(G,G.evalVisProp("highlightcssclass")),this},noHighlight:function(G){var _,J;if(this.setObjectTransition(G),!G.evalVisProp("draft")){if(G.type===constants.A.OBJECT_TYPE_POLYGON)for(this.setObjectFillColor(G,G.evalVisProp("fillcolor"),G.evalVisProp("fillopacity")),_=0;_<G.borders.length;_++)this.noHighlight(G.borders[_]);else G.elementClass===constants.A.OBJECT_CLASS_TEXT?this.updateTextStyle(G,!1):G.type===constants.A.OBJECT_TYPE_IMAGE?(this.updateImageStyle(G,!1),this.setObjectFillColor(G,G.evalVisProp("fillcolor"),G.evalVisProp("fillopacity"))):(this.setObjectStrokeColor(G,G.evalVisProp("strokecolor"),G.evalVisProp("strokeopacity")),this.setObjectFillColor(G,G.evalVisProp("fillcolor"),G.evalVisProp("fillopacity")));J=G.evalVisProp("strokewidth"),this.setObjectStrokeWidth(G,J),G.elementClass!==constants.A.OBJECT_CLASS_LINE&&G.elementClass!==constants.A.OBJECT_CLASS_CURVE||this.updatePathWithArrowHeads(G,!1)}return this.setCssClass(G,G.evalVisProp("cssclass")),this},removeDraft:function(G){this.setObjectTransition(G),G.type===constants.A.OBJECT_TYPE_POLYGON?this.setObjectFillColor(G,G.evalVisProp("fillcolor"),G.evalVisProp("fillopacity")):(G.type===constants.A.OBJECT_CLASS_POINT&&this.setObjectFillColor(G,G.evalVisProp("fillcolor"),G.evalVisProp("fillopacity")),this.setObjectStrokeColor(G,G.evalVisProp("strokecolor"),G.evalVisProp("strokeopacity")),this.setObjectStrokeWidth(G,G.evalVisProp("strokewidth")))},setARIA:function(G){},setBuffering:function(G,_){},setCssClass:function(G,_){},setDashStyle:function(G){},setDraft:function(G){if(G.evalVisProp("draft")){var _=G.board.options.elements.draft.color,J=G.board.options.elements.draft.opacity;this.setObjectTransition(G),G.type===constants.A.OBJECT_TYPE_POLYGON?this.setObjectFillColor(G,_,J):(G.elementClass===constants.A.OBJECT_CLASS_POINT?this.setObjectFillColor(G,_,J):this.setObjectFillColor(G,"none",0),this.setObjectStrokeColor(G,_,J),this.setObjectStrokeWidth(G,G.board.options.elements.draft.strokeWidth))}},setGradient:function(G){},setLayer:function(G,_){},setObjectFillColor:function(G,_,J){},setObjectStrokeColor:function(G,_,J){},setObjectStrokeWidth:function(G,_){},setObjectTransition:function(G,_){},setPropertyPrim:function(G,_,J){},setShadow:function(G){},setTabindex:function(G){},show:function(G){},updateGradient:function(G){},suspendRedraw:function(){},unsuspendRedraw:function(){},drawNavigationBar:function(G,_){var J,Z,Q=function(te){te||(te=window.event),te.stopPropagation?te.stopPropagation():te.cancelBubble=!0},ee=function(te,ne,ie,re){var oe;ie=ie||"",(oe=J.createElement("span")).innerHTML=te,oe.style.paddingLeft="7px",oe.style.paddingRight="7px",oe.classList!==void 0&&(oe.classList.add("JXG_navigation_button"),oe.classList.add("JXG_navigation_button_"+re)),oe.setAttribute("id",ie+"_navigation_"+re),oe.setAttribute("aria-hidden","true"),Z.appendChild(oe),env.A.addEvent(oe,"click",function(se){return utils_type.A.bind(ne,G)(),!1},G),env.A.addEvent(oe,"pointerup",Q,G),env.A.addEvent(oe,"pointerdown",Q,G),env.A.addEvent(oe,"pointerleave",Q,G),env.A.addEvent(oe,"mouseup",Q,G),env.A.addEvent(oe,"mousedown",Q,G),env.A.addEvent(oe,"touchend",Q,G),env.A.addEvent(oe,"touchstart",Q,G)};env.A.isBrowser&&this.type!=="no"&&(J=G.containerObj.ownerDocument,(Z=J.createElement("div")).setAttribute("id",G.container+"_navigationbar"),Z.style.color=_.strokecolor,Z.style.backgroundColor=_.fillcolor,Z.style.padding=_.padding,Z.style.position=_.position,Z.style.fontSize=_.fontsize,Z.style.cursor=_.cursor,Z.style.zIndex=_.zindex,G.containerObj.appendChild(Z),Z.style.right=_.right,Z.style.bottom=_.bottom,Z.classList!==void 0&&Z.classList.add("JXG_navigation"),G.attr.showfullscreen&&ee(G.attr.fullscreen.symbol,function(){G.toFullscreen(G.attr.fullscreen.id)},G.container,"fullscreen"),G.attr.showscreenshot&&ee(G.attr.screenshot.symbol,function(){window.setTimeout(function(){G.renderer.screenshot(G,"",!1)},330)},G.container,"screenshot"),G.attr.showreload&&ee("",function(){G.reload()},G.container,"reload"),G.attr.showcleartraces&&ee("",function(){G.clearTraces()},G.container,"cleartraces"),G.attr.shownavigation&&(G.attr.showzoom&&(ee("",G.zoomOut,G.container,"out"),ee("o",G.zoom100,G.container,"100"),ee("+",G.zoomIn,G.container,"in")),ee("",G.clickLeftArrow,G.container,"left"),ee("",G.clickUpArrow,G.container,"down"),ee("",G.clickDownArrow,G.container,"up"),ee("",G.clickRightArrow,G.container,"right")))},getElementById:function(G){var _;return utils_type.A.exists(this.container)?(_=this.container.id+"_"+G,utils_type.A.exists(CSS)&&utils_type.A.exists(CSS.escape)&&(_=CSS.escape(_)),this.container.querySelector("#"+_)):""},removeToInsertLater:function(G){var _=G.parentNode,J=G.nextSibling;if(_!==null)return _.removeChild(G),function(){J?_.insertBefore(G,J):_.appendChild(G)}},resize:function(G,_){},createTouchpoints:function(G){},showTouchpoint:function(G){},hideTouchpoint:function(G){},updateTouchpoint:function(G,_){},dumpToDataURI:function(G){},dumpToCanvas:function(G,_,J,Z){},screenshot:function(G){}});var renderer_abstract=jxg.A.AbstractRenderer,UTF8_ACCEPT=0,UTF8D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,10,3,3,3,3,3,3,3,3,3,3,3,3,4,3,3,11,6,6,6,5,8,8,8,8,8,8,8,8,8,8,8,0,12,24,36,60,96,84,12,12,12,48,72,12,12,12,12,12,12,12,12,12,12,12,12,12,0,12,12,12,12,12,0,12,0,12,12,12,24,12,12,12,12,12,24,12,24,12,12,12,12,12,12,12,12,12,24,12,12,12,12,12,24,12,12,12,12,12,12,12,24,12,12,12,12,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,12,12,12,12,12];jxg.A.Util=jxg.A.Util||{},jxg.A.Util.UTF8={encode:function(G){var _,J,Z="",Q=G.length;if(G=G.replace(/\r\n/g,`
`),typeof unescape=="function"&&typeof encodeURIComponent=="function")return unescape(encodeURIComponent(G));for(_=0;_<Q;_++)(J=G.charCodeAt(_))<128?Z+=String.fromCharCode(J):J>127&&J<2048?(Z+=String.fromCharCode(J>>6|192),Z+=String.fromCharCode(63&J|128)):(Z+=String.fromCharCode(J>>12|224),Z+=String.fromCharCode(J>>6&63|128),Z+=String.fromCharCode(63&J|128));return Z},decode:function(G){var _,J,Z,Q=0,ee=0,te=UTF8_ACCEPT,ne=[],ie=G.length,re=[];for(_=0;_<ie;_++)J=G.charCodeAt(_),Z=UTF8D[J],ee=te!==UTF8_ACCEPT?63&J|ee<<6:255>>Z&J,(te=UTF8D[256+te+Z])===UTF8_ACCEPT&&(ee>65535?ne.push(55232+(ee>>10),56320+(1023&ee)):ne.push(ee),++Q%1e4==0&&(re.push(String.fromCharCode.apply(null,ne)),ne=[]));return re.push(String.fromCharCode.apply(null,ne)),re.join("")},asciiCharCodeAt:function(G,_){var J=G.charCodeAt(_);if(J>255)switch(J){case 8364:J=128;break;case 8218:J=130;break;case 402:J=131;break;case 8222:J=132;break;case 8230:J=133;break;case 8224:J=134;break;case 8225:J=135;break;case 710:J=136;break;case 8240:J=137;break;case 352:J=138;break;case 8249:J=139;break;case 338:J=140;break;case 381:J=142;break;case 8216:J=145;break;case 8217:J=146;break;case 8220:J=147;break;case 8221:J=148;break;case 8226:J=149;break;case 8211:J=150;break;case 8212:J=151;break;case 732:J=152;break;case 8482:J=153;break;case 353:J=154;break;case 8250:J=155;break;case 339:J=156;break;case 382:J=158;break;case 376:J=159}return J}};var utils_encoding=jxg.A.Util.UTF8,alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pad="=";jxg.A.Util=jxg.A.Util||{},jxg.A.Util.Base64={_getByte:function(G,_){return 255&G.charCodeAt(_)},_getIndex:function(G,_){return alphabet.indexOf(G.charAt(_))},encode:function(G){var _,J,Z,Q,ee,te=[];for(Q=(Z=(ee=utils_encoding.encode(G)).length)%3,_=0;_<Z-Q;_+=3)J=this._getByte(ee,_)<<16|this._getByte(ee,_+1)<<8|this._getByte(ee,_+2),te.push(alphabet.charAt(J>>18),alphabet.charAt(J>>12&63),alphabet.charAt(J>>6&63),alphabet.charAt(63&J));switch(Q){case 1:J=this._getByte(ee,Z-1),te.push(alphabet.charAt(J>>2),alphabet.charAt(J<<4&63),pad,pad);break;case 2:J=this._getByte(ee,Z-2)<<8|this._getByte(ee,Z-1),te.push(alphabet.charAt(J>>10),alphabet.charAt(J>>4&63),alphabet.charAt(J<<2&63),pad)}return te.join("")},decode:function(G,_){var J,Z,Q,ee,te,ne,ie=[],re=[];if((Q=(J=G.replace(/[^A-Za-z0-9+/=]/g,"")).length)%4!=0)throw new Error("JSXGraph/utils/base64: Can't decode string (invalid input length).");for(J.charAt(Q-1)===pad&&(ee=1,J.charAt(Q-2)===pad&&(ee=2),Q-=4),Z=0;Z<Q;Z+=4)te=this._getIndex(J,Z)<<18|this._getIndex(J,Z+1)<<12|this._getIndex(J,Z+2)<<6|this._getIndex(J,Z+3),re.push(te>>16,te>>8&255,255&te),Z%1e4==0&&(ie.push(String.fromCharCode.apply(null,re)),re=[]);switch(ee){case 1:te=this._getIndex(J,Q)<<12|this._getIndex(J,Q+1)<<6|this._getIndex(J,Q+2),re.push(te>>10,te>>2&255);break;case 2:te=this._getIndex(J,Z)<<6|this._getIndex(J,Z+1),re.push(te>>4)}return ie.push(String.fromCharCode.apply(null,re)),ne=ie.join(""),_&&(ne=utils_encoding.decode(ne)),ne},decodeAsArray:function(G){var _,J=this.decode(G),Z=[],Q=J.length;for(_=0;_<Q;_++)Z[_]=J.charCodeAt(_);return Z}};var base64=jxg.A.Util.Base64;jxg.A.FileReader={handleRemoteFile:function(G,_,J,Z,Q,ee){var te=!1;try{te=new XMLHttpRequest,J.toLowerCase()==="raw"?te.overrideMimeType("text/plain; charset="+Q):te.overrideMimeType("text/xml; charset="+Q)}catch{try{te=new ActiveXObject("Msxml2.XMLHTTP")}catch{try{te=new ActiveXObject("Microsoft.XMLHTTP")}catch{te=!1}}}if(te){te.open("GET",G,Z),J.toLowerCase()==="raw"?this.cbp=function(){var ne=te;ne.readyState===4&&_(ne.responseText)}:this.cbp=function(){var ne=te,ie="";ne.readyState===4&&(ie=!utils_type.A.exists(ne.responseStream)||ne.responseText.slice(0,2)!=="PK"&&utils_encoding.asciiCharCodeAt(ne.responseText.slice(0,1),0)!==31?ne.responseText:base64.decode(jxgBinFileReader(ne)),this.parseString(ie,_,J,ee))},this.cb=utils_type.A.bind(this.cbp,this),te.onreadystatechange=this.cb;try{te.send(null)}catch{throw new Error("JSXGraph: A problem occurred while trying to read remote file '"+G+"'.")}}else jxg.A.debug("AJAX not activated!")},handleLocalFile:function(G,_,J,Z,Q,ee){utils_type.A.exists(Z)||(Z=!0),J.toLowerCase()==="raw"?this.cbp=function(ne){_(ne.target.result)}:this.cbp=function(ne){var ie=ne.target.result;this.parseString(ie,_,J,ee)},this.cb=utils_type.A.bind(this.cbp,this);var te=new FileReader;te.onload=this.cb,J.toLowerCase()==="raw"?te.readAsText(G):te.readAsText(G,Q)},parseFileContent:function(G,_,J,Z,Q,ee){utils_type.A.isString(G)||FileReader===void 0?this.handleRemoteFile(G,_,J,Z,Q,ee):this.handleLocalFile(G,_,J,Z,Q,ee)},parseString:function(G,_,J,Z){var Q;if(J=J.toLowerCase(),Q=jxg.A.readers[J],utils_type.A.exists(Q))new Q(_,G).read();else if(J!=="jessiecode")throw new Error("JSXGraph: There is no reader available for '"+J+"'.");utils_type.A.isFunction(Z)&&Z(_)}},!env.A.isMetroApp()&&env.A.isBrowser&&typeof navigator=="object"&&/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)&&document&&document.write&&document.write(`<script type="text/vbscript">
Function Base64Encode(inData)
  Const Base64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"
  Dim cOut, sOut, I
  For I = 1 To LenB(inData) Step 3
    Dim nGroup, pOut, sGroup
    nGroup = &H10000 * AscB(MidB(inData, I, 1)) + _
      &H100 * MyASC(MidB(inData, I + 1, 1)) + MyASC(MidB(inData, I + 2, 1))
    nGroup = Oct(nGroup)
    nGroup = String(8 - Len(nGroup), "0") & nGroup
    pOut = Mid(Base64, CLng("&o" & Mid(nGroup, 1, 2)) + 1, 1) + _
      Mid(Base64, CLng("&o" & Mid(nGroup, 3, 2)) + 1, 1) + _
      Mid(Base64, CLng("&o" & Mid(nGroup, 5, 2)) + 1, 1) + _
      Mid(Base64, CLng("&o" & Mid(nGroup, 7, 2)) + 1, 1)
    sOut = sOut + pOut
  Next
  Select Case LenB(inData) Mod 3
    Case 1: '8 bit final
      sOut = Left(sOut, Len(sOut) - 2) + "=="
    Case 2: '16 bit final
      sOut = Left(sOut, Len(sOut) - 1) + "="
  End Select
  Base64Encode = sOut
End Function

Function MyASC(OneChar)
  If OneChar = "" Then MyASC = 0 Else MyASC = AscB(OneChar)
End Function

Function jxgBinFileReader(xhr)
    Dim byteString
    Dim b64String
    Dim i
    byteString = xhr.responseBody
    ReDim byteArray(LenB(byteString))
    For i = 1 To LenB(byteString)
        byteArray(i-1) = AscB(MidB(byteString, i, 1))
    Next
    b64String = Base64Encode(byteString)
    jxgBinFileReader = b64String
End Function
<\/script>
`);var reader_file=jxg.A.FileReader,geonext=__webpack_require__(86),jessiecode=__webpack_require__(428),utils_color=__webpack_require__(873);jxg.A.Composition=function(G){var _,J=this,Z=["setAttribute","setParents","prepareUpdate","updateRenderer","update","fullUpdate","highlight","noHighlight"],Q=function(ee){return function(){var te;for(te in J.elements)J.elements.hasOwnProperty(te)&&utils_type.A.exists(J.elements[te][ee])&&J.elements[te][ee].apply(J.elements[te],arguments);return J}};for(_=0;_<Z.length;_++)this[Z[_]]=Q(Z[_]);for(_ in this.elements={},this.objects=this.elements,this.elementsByName={},this.objectsList=[],this.groups={},this.methodMap={setAttribute:"setAttribute",setProperty:"setAttribute",setParents:"setParents",add:"add",remove:"remove",select:"select"},G)G.hasOwnProperty(_)&&this.add(_,G[_]);this.dump=!0,this.subs={}},jxg.A.extend(jxg.A.Composition.prototype,{add:function(G,_){return!(utils_type.A.exists(this[G])||!utils_type.A.exists(_))&&(utils_type.A.exists(_.id)?this.elements[_.id]=_:this.elements[G]=_,utils_type.A.exists(_.name)&&(this.elementsByName[_.name]=_),_.on("attribute:name",this.nameListener,this),this.objectsList.push(_),this[G]=_,this.methodMap[G]=_,!0)},remove:function(G){var _,J=!1;for(_ in this.elements)if(this.elements.hasOwnProperty(_)&&this.elements[_].id===this[G].id){J=!0;break}return J&&(delete this.elements[this[G].id],delete this[G]),J},nameListener:function(G,_,J){delete this.elementsByName[G],this.elementsByName[_]=J},select:function(G){return utils_type.A.exists(jxg.A.Board)?jxg.A.Board.prototype.select.call(this,G):new jxg.A.Composition},getParents:function(){return this.parents},getType:function(){return this.elType},getAttributes:function(){var G;for(G in this.subs)this.subs.hasOwnProperty(G)&&this.subs[G].visProp;return this.attr}});var composition=jxg.A.Composition;jxg.A.Board=function(G,_,J,Z,Q,ee,te,ne,ie,re,oe){if(this.BOARD_MODE_NONE=0,this.BOARD_MODE_DRAG=1,this.BOARD_MODE_MOVE_ORIGIN=2,this.BOARD_MODE_ZOOM=17,this.BOARD_QUALITY_LOW=1,this.BOARD_QUALITY_HIGH=2,utils_type.A.exists(oe.document)&&oe.document!==!1?this.document=oe.document:env.A.isBrowser&&(this.document=document),this.container="",this.id="",this.containerObj=null,utils_type.A.isString(G)?(this.container=G,this.containerObj=env.A.isBrowser?this.document.getElementById(this.container):null):env.A.isBrowser&&(this.containerObj=G,this.container=this.containerObj.getAttribute("id"),this.container===null&&(this.container="null"+parseInt(16777216*Math.random()).toString())),env.A.isBrowser&&_.type!=="no"&&this.containerObj===null)throw new Error(`
JSXGraph: HTML container element "`+G+'" not found.');utils_type.A.exists(J)&&J!==""&&env.A.isBrowser&&!utils_type.A.exists(this.document.getElementById(J))?this.id=J:this.id=this.generateId(),this.renderer=_,this.grids=[],this.options=utils_type.A.deepCopy(src_options.A),this.attr=oe,this.attr.theme!=="default"&&utils_type.A.exists(jxg.A.themes[this.attr.theme])&&utils_type.A.mergeAttr(this.options,jxg.A.themes[this.attr.theme],!0),this.dimension=2,this.jc=new jessiecode.A,this.jc.use(this),this.origin={},this.origin.usrCoords=[1,0,0],this.origin.scrCoords=[1,Z[0],Z[1]],this.zoomX=Q,this.zoomY=ee,this.unitX=te*this.zoomX,this.unitY=ne*this.zoomY,this.keepaspectratio=!1,this.canvasWidth=ie,this.canvasHeight=re,utils_event.A.eventify(this),this.hooks=[],this.dependentBoards=[],this.inUpdate=!1,this.objects={},this.objectsList=[],this.groups={},this.animationObjects={},this.highlightedObjects={},this.numObjects=0,this.elementsByName={},this.mode=this.BOARD_MODE_NONE,this.updateQuality=this.BOARD_QUALITY_HIGH,this.isSuspendedRedraw=!1,this.calculateSnapSizes(),this.drag_dx=0,this.drag_dy=0,this.drag_position=[0,0],this.mouse={},this.touches=[],this.xmlString="",this.cPos=[],this.touchMoveLast=0,this.touchMoveLastId=1/0,this.positionAccessLast=0,this.downObjects=[],this.clickObjects={},this.focusObjects=[],(this.attr.showcopyright||this.attr.showlogo)&&this.renderer.displayLogo(constants.A.licenseLogo,parseInt(this.options.text.fontSize,10),this),this.attr.showcopyright&&this.renderer.displayCopyright(constants.A.licenseText,parseInt(this.options.text.fontSize,10)),this.needsFullUpdate=!1,this.reducedUpdate=!1,this.currentCBDef="none",this.geonextCompatibilityMode=!1,this.options.text.useASCIIMathML&&translateASCIIMath?init():this.options.text.useASCIIMathML=!1,this.hasMouseHandlers=!1,this.hasTouchHandlers=!1,this.hasPointerHandlers=!1,this.hasWheelHandlers=!1,this.hasMouseUp=!1,this.hasTouchEnd=!1,this.hasPointerUp=!1,this.resizeHandlers=[],this._drag_offset=[0,0],this._inputDevice="mouse",this._board_touches=[],this.selectingMode=!1,this.isSelecting=!1,this._isScrolling=!1,this._isResizing=!1,this._change3DView=!1,this.selectingBox=[[0,0],[0,0]],this.userLog=[],this.mathLib=Math,this.mathLibJXG=jxg.A.Math,this.attr.registerevents===!0?this.attr.registerevents={fullscreen:!0,keyboard:!0,pointer:!0,resize:!0,wheel:!0}:typeof this.attr.registerevents=="object"&&(utils_type.A.exists(this.attr.registerevents.fullscreen)||(this.attr.registerevents.fullscreen=!0),utils_type.A.exists(this.attr.registerevents.keyboard)||(this.attr.registerevents.keyboard=!0),utils_type.A.exists(this.attr.registerevents.pointer)||(this.attr.registerevents.pointer=!0),utils_type.A.exists(this.attr.registerevents.resize)||(this.attr.registerevents.resize=!0),utils_type.A.exists(this.attr.registerevents.wheel)||(this.attr.registerevents.wheel=!0)),this.attr.registerevents!==!1&&(this.attr.registerevents.fullscreen&&this.addFullscreenEventHandlers(),this.attr.registerevents.keyboard&&this.addKeyboardEventHandlers(),this.attr.registerevents.pointer&&this.addEventHandlers(),this.attr.registerevents.resize&&this.addResizeEventHandlers(),this.attr.registerevents.wheel&&this.addWheelEventHandlers()),this.methodMap={update:"update",fullUpdate:"fullUpdate",on:"on",off:"off",trigger:"trigger",setAttribute:"setAttribute",setBoundingBox:"setBoundingBox",setView:"setBoundingBox",getBoundingBox:"getBoundingBox",BoundingBox:"getBoundingBox",getView:"getBoundingBox",View:"getBoundingBox",migratePoint:"migratePoint",colorblind:"emulateColorblindness",suspendUpdate:"suspendUpdate",unsuspendUpdate:"unsuspendUpdate",clearTraces:"clearTraces",left:"clickLeftArrow",right:"clickRightArrow",up:"clickUpArrow",down:"clickDownArrow",zoomIn:"zoomIn",zoomOut:"zoomOut",zoom100:"zoom100",zoomElements:"zoomElements",remove:"removeObject",removeObject:"removeObject"}},jxg.A.extend(jxg.A.Board.prototype,{generateName:function(G){var _,J,Z=this.attr.maxnamelength,Q="",ee="",te=[],ne="";if(G.type===constants.A.OBJECT_TYPE_TICKS)return"";for(_=utils_type.A.isPoint(G)||utils_type.A.isPoint3D(G)?["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]:G.type===constants.A.OBJECT_TYPE_ANGLE?["","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;"]:["","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],utils_type.A.isPoint(G)||utils_type.A.isPoint3D(G)||G.elementClass===constants.A.OBJECT_CLASS_LINE||G.type===constants.A.OBJECT_TYPE_ANGLE||(Q=G.type===constants.A.OBJECT_TYPE_POLYGON?"P_{":G.elementClass===constants.A.OBJECT_CLASS_CIRCLE?"k_{":G.elementClass===constants.A.OBJECT_CLASS_TEXT?"t_{":"s_{",ee="}"),J=0;J<Z;J++)te[J]=0;for(;te[Z-1]<_.length;){for(te[0]=1;te[0]<_.length;te[0]++){for(ne=Q,J=Z;J>0;J--)ne+=_[te[J-1]];if(!utils_type.A.exists(this.elementsByName[ne+ee]))return ne+ee}for(te[0]=_.length,J=1;J<Z;J++)te[J-1]===_.length&&(te[J-1]=1,te[J]+=1)}return""},generateId:function(){for(var G=1;utils_type.A.exists(jxg.A.boards["jxgBoard"+G]);)G=Math.round(16777216*Math.random());return"jxgBoard"+G},setId:function(G,_){var J,Z=this.numObjects,Q=G.id;if(this.numObjects+=1,Q===""||!utils_type.A.exists(Q))for(Q=this.id+_+Z;utils_type.A.exists(this.objects[Q]);)J=Math.round(65535*Math.random()),Q=this.id+_+Z+"-"+J;return G.id=Q,this.objects[Q]=G,G._pos=this.objectsList.length,this.objectsList[this.objectsList.length]=G,Q},finalizeAdding:function(G){G.evalVisProp("visible")===!1&&this.renderer.display(G,!1)},finalizeLabel:function(G){G.hasLabel&&!G.label.evalVisProp("islabel")&&G.label.evalVisProp("visible")===!1&&this.renderer.display(G.label,!1)},checkFrameRate:function(G){var _=!1,J=new Date().getTime();return utils_type.A.exists(G.pointerId)&&this.touchMoveLastId!==G.pointerId&&(_=!0,this.touchMoveLastId=G.pointerId),!_&&(J-this.touchMoveLast)*this.attr.maxframerate>=1e3&&(_=!0),_&&(this.touchMoveLast=J),_},getCoordsTopLeftCorner:function(){var G,_,J,Z,Q,ee=this.document.ownerDocument||this.document,te=ee.documentElement||this.document.body.parentNode,ne=ee.body,ie=this.containerObj;if(this.cPos.length>0&&(this.mode===this.BOARD_MODE_DRAG||this.mode===this.BOARD_MODE_MOVE_ORIGIN||new Date().getTime()-this.positionAccessLast<1e3))return this.cPos;if(this.positionAccessLast=new Date().getTime(),ie.getBoundingClientRect){for(J=ie.getBoundingClientRect(),Z=1,Q=ie;Q&&utils_type.A.exists(Q.parentNode);)utils_type.A.exists(Q.style)&&utils_type.A.exists(Q.style.zoom)&&Q.style.zoom!==""&&(Z*=parseFloat(Q.style.zoom)),Q=Q.parentNode;return(G=[J.left*Z,J.top*Z])[0]+=env.A.getProp(ie,"border-left-width"),G[1]+=env.A.getProp(ie,"border-top-width"),this.renderer.type!=="vml"&&(G[0]+=env.A.getProp(ie,"padding-left"),G[1]+=env.A.getProp(ie,"padding-top")),this.cPos=G.slice(),this.cPos}return G=env.A.getOffset(ie),_=this.document.documentElement.ownerDocument,!this.containerObj.currentStyle&&_.defaultView&&(G[0]+=env.A.getProp(te,"margin-left"),G[1]+=env.A.getProp(te,"margin-top"),G[0]+=env.A.getProp(te,"border-left-width"),G[1]+=env.A.getProp(te,"border-top-width"),G[0]+=env.A.getProp(te,"padding-left"),G[1]+=env.A.getProp(te,"padding-top")),ne&&(G[0]+=env.A.getProp(ne,"left"),G[1]+=env.A.getProp(ne,"top")),typeof google=="object"&&google.translate&&(G[0]+=10,G[1]+=25),G[0]+=env.A.getProp(ie,"border-left-width"),G[1]+=env.A.getProp(ie,"border-top-width"),this.renderer.type!=="vml"&&(G[0]+=env.A.getProp(ie,"padding-left"),G[1]+=env.A.getProp(ie,"padding-top")),G[0]+=this.attr.offsetx,G[1]+=this.attr.offsety,this.cPos=G.slice(),this.cPos},getPointLoc:function(G,_){var J,Z,Q,ee;return J=this.getBoundingBox(),(Z=G).length===2&&Z.unshift(void 0),Q=[0,0],ee=_||0,utils_type.A.isNumber(ee)&&(ee=[ee,ee,ee,ee]),Z[1]>J[2]-ee[1]&&(Q[0]=1),Z[1]<J[0]+ee[3]&&(Q[0]=-1),Z[2]>J[1]-ee[0]&&(Q[1]=1),Z[2]<J[3]+ee[2]&&(Q[1]=-1),Q},getLocationOrigin:function(G){return this.getPointLoc([0,0],G)},getMousePosition:function(G,_){var J,Z,Q=this.getCoordsTopLeftCorner();return J=env.A.getPosition(G,_,this.document),this.updateCSSTransforms(),Z=[1,J[0]-Q[0],J[1]-Q[1]],(Z=math.A.matVecMult(this.cssTransMat,Z))[1]/=Z[0],Z[2]/=Z[0],[Z[1],Z[2]]},initMoveOrigin:function(G,_){this.drag_dx=G-this.origin.scrCoords[1],this.drag_dy=_-this.origin.scrCoords[2],this.mode=this.BOARD_MODE_MOVE_ORIGIN,this.updateQuality=this.BOARD_QUALITY_LOW},initMoveObject:function(G,_,J,Z){var Q,ee,te,ne=[],ie=[],re=this.objectsList.length,oe={visProp:{layer:-1e4}};for(this._shiftKey=J.shiftKey,this._ctrlKey=J.ctrlKey,ee=0;ee<re;ee++)te=(Q=this.objectsList[ee]).hasPoint&&Q.hasPoint(G,_),Q.visPropCalc.visible&&te&&(Q.triggerEventHandlers([Z+"down","down"],[J]),this.downObjects.push(Q)),te&&Q.isDraggable&&Q.visPropCalc.visible&&(this.geonextCompatibilityMode&&(utils_type.A.isPoint(Q)||Q.elementClass===constants.A.OBJECT_CLASS_TEXT)||!this.geonextCompatibilityMode)&&!Q.evalVisProp("fixed")&&(Q.visProp.layer>oe.visProp.layer||Q.visProp.layer===oe.visProp.layer&&Q.lastDragTime.getTime()>=oe.lastDragTime.getTime())&&(this.attr.ignorelabels&&utils_type.A.exists(oe.label)&&Q===oe.label||(oe=Q,ne.push(oe),utils_type.A.exists(oe.coords)?oe.elementClass===constants.A.OBJECT_CLASS_POINT||oe.relativeCoords?ie.push(statistics.A.subtract(oe.coords.scrCoords.slice(1),[G,_])):ie.push(statistics.A.subtract(oe.actualCoords.scrCoords.slice(1),[G,_])):ie.push([0,0])));return this.attr.drag.enabled&&ne.length>0&&(this.mode=this.BOARD_MODE_DRAG),this.attr.takefirst?(ne.length=1,this._drag_offset=ie[0]):(ne=ne.slice(-1),this._drag_offset=ie[ie.length-1]),this._drag_offset||(this._drag_offset=[0,0]),this.renderer.type==="svg"&&utils_type.A.exists(ne[0])&&ne[0].evalVisProp("dragtotopoflayer")&&ne.length===1&&utils_type.A.exists(ne[0].rendNode)&&ne[0].rendNode.parentNode.appendChild(ne[0].rendNode),ne.length>=1&&(ne[0].highlight(!0),this.triggerEventHandlers(["mousehit","hit"],[J,ne[0]])),ne},moveObject:function(G,_,J,Z,Q){var ee,te,ne,ie=new base_coords.A(constants.A.COORDS_BY_SCREEN,this.getScrCoordsOfMouse(G,_),this);J&&J.obj&&((ee=J.obj).coords&&(te=ee.coords.scrCoords.slice()),this.addLogEntry("drag",ee,ie.usrCoords.slice(1)),this.drag_position=[ie.scrCoords[1],ie.scrCoords[2]],this.drag_position=statistics.A.add(this.drag_position,this._drag_offset),this._shiftKey=Z.shiftKey,this._ctrlKey=Z.ctrlKey,utils_type.A.exists(ee.coords)?ee.setPositionDirectly(constants.A.COORDS_BY_SCREEN,this.drag_position,[G,_]):(this.displayInfobox(!1),isNaN(J.targets[0].Xprev+J.targets[0].Yprev)||ee.setPositionDirectly(constants.A.COORDS_BY_SCREEN,[ie.scrCoords[1],ie.scrCoords[2]],[J.targets[0].Xprev,J.targets[0].Yprev]),J.targets[0].Xprev=ie.scrCoords[1],J.targets[0].Yprev=ie.scrCoords[2]),utils_type.A.exists(ee.coords)&&(ee.prepareUpdate().update(!1).updateRenderer(),this.updateInfobox(ee),ee.prepareUpdate().update(!0).updateRenderer()),ee.coords&&(ne=ee.coords.scrCoords),ee.coords&&te[1]===ne[1]&&te[2]===ne[2]||(ee.triggerEventHandlers([Q+"drag","drag"],[Z]),this.update(ee)),ee.highlight(!0),this.triggerEventHandlers(["mousehit","hit"],[Z,ee]),ee.lastDragTime=new Date)},twoFingerMove:function(G,_,J){var Z;utils_type.A.exists(G)&&utils_type.A.exists(G.obj)&&((Z=G.obj).elementClass===constants.A.OBJECT_CLASS_LINE||Z.type===constants.A.OBJECT_TYPE_POLYGON?this.twoFingerTouchObject(G.targets,Z,_):Z.elementClass===constants.A.OBJECT_CLASS_CIRCLE&&this.twoFingerTouchCircle(G.targets,Z,_),J&&Z.triggerEventHandlers(["touchdrag","drag"],[J]))},getTwoFingerTransform(G,_,J,Z){var Q,ee,te,ne,ie,re,oe,se,ae,ce,ue,de,me,fe,_e,ye,be;return ee=(Q=new base_coords.A(constants.A.COORDS_BY_SCREEN,[G.Xprev,G.Yprev],this).usrCoords)[1],te=Q[2],ne=(Q=new base_coords.A(constants.A.COORDS_BY_SCREEN,[_.Xprev,_.Yprev],this).usrCoords)[1],ie=Q[2],se=(Q=new base_coords.A(constants.A.COORDS_BY_SCREEN,[G.X,G.Y],this).usrCoords)[1],ae=Q[2],fe=((de=(ce=(Q=new base_coords.A(constants.A.COORDS_BY_SCREEN,[_.X,_.Y],this).usrCoords)[1])-se)*(re=ne-ee)+(me=(ue=Q[2])-ae)*(oe=ie-te))/(ye=re*re+oe*oe),_e=(me*re-de*oe)/ye,J||(fe/=be=math.A.hypot(fe,_e),_e/=be),Z||(_e=0),[1,0,0,.5*(se+ce-fe*(ee+ne)+_e*(te+ie)),fe,-_e,.5*(ae+ue-_e*(ee+ne)-fe*(te+ie)),_e,fe]},twoFingerTouchObject:function(G,_,J){var Z,Q,ee,te,ne,ie=!1;if(utils_type.A.exists(G[0])&&utils_type.A.exists(G[1])&&!isNaN(G[0].Xprev+G[0].Yprev+G[1].Xprev+G[1].Yprev)){if(Q=this.getTwoFingerTransform(G[0],G[1],_.evalVisProp("scalable"),_.evalVisProp("rotatable")),(Z=this.create("transform",Q,{type:"generic"})).update(),_.elementClass===constants.A.OBJECT_CLASS_LINE)ee=[],_.point1.draggable()&&ee.push(_.point1),_.point2.draggable()&&ee.push(_.point2),Z.applyOnce(ee);else if(_.type===constants.A.OBJECT_TYPE_POLYGON){for(ne=_.vertices.length-1,ie=_.evalVisProp("snaptogrid")||_.evalVisProp("snaptopoints"),te=0;te<ne&&!ie;++te)ie=(ie=ie||_.vertices[te].evalVisProp("snaptogrid")||_.vertices[te].evalVisProp("snaptopoints"))||!_.vertices[te].draggable();if(!ie){for(ee=[],te=0;te<ne;++te)_.vertices[te].draggable()&&ee.push(_.vertices[te]);Z.applyOnce(ee)}}this.update(),_.highlight(!0)}},twoFingerTouchCircle:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,ce;_.method!=="pointCircle"&&_.method!=="pointLine"&&utils_type.A.exists(G[0])&&utils_type.A.exists(G[1])&&!isNaN(G[0].Xprev+G[0].Yprev+G[1].Xprev+G[1].Yprev)&&(J===G[0].num?(Z=G[1],Q=G[0]):(Z=G[0],Q=G[1]),ne=new base_coords.A(constants.A.COORDS_BY_SCREEN,[Z.Xprev,Z.Yprev],this).usrCoords,te=new base_coords.A(constants.A.COORDS_BY_SCREEN,[Q.Xprev,Q.Yprev],this).usrCoords,ee=new base_coords.A(constants.A.COORDS_BY_SCREEN,[Q.X,Q.Y],this).usrCoords,re=geometry.A.rad(te.slice(1),ne.slice(1),ee.slice(1)),oe=this.create("transform",[-ne[1],-ne[2]],{type:"translate"}),se=this.create("transform",[re],{type:"rotate"}),oe.melt(se),_.evalVisProp("scalable")&&(ie=geometry.A.distance(ne,ee)/geometry.A.distance(ne,te),ae=this.create("transform",[ie,ie],{type:"scale"}),oe.melt(ae)),ce=this.create("transform",[ne[1],ne[2]],{type:"translate"}),oe.melt(ce),_.center.draggable()&&oe.applyOnce([_.center]),_.method==="twoPoints"?_.point2.draggable()&&oe.applyOnce([_.point2]):_.method==="pointRadius"&&utils_type.A.isNumber(_.updateRadius.origin)&&_.setRadius(_.radius*ie),this.update(_.center),_.highlight(!0))},highlightElements:function(G,_,J,Z){var Q,ee,te,ne={},ie=this.objectsList.length;for(Q=0;Q<ie;Q++)te=(ee=this.objectsList[Q]).id,utils_type.A.exists(ee.hasPoint)&&ee.visPropCalc.visible&&ee.hasPoint(G,_)&&(this.updateInfobox(ee),utils_type.A.exists(this.highlightedObjects[te])||(ne[te]=ee,ee.highlight(),this.triggerEventHandlers(["mousehit","hit"],[J,ee,Z])),ee.mouseover?ee.triggerEventHandlers(["mousemove","move"],[J]):(ee.triggerEventHandlers(["mouseover","over"],[J]),ee.mouseover=!0));for(Q=0;Q<ie;Q++)te=(ee=this.objectsList[Q]).id,ee.mouseover&&(ne[te]||(ee.triggerEventHandlers(["mouseout","out"],[J]),ee.mouseover=!1))},saveStartPos:function(G,_){var J,Z,Q=[];if(G.type===constants.A.OBJECT_TYPE_TICKS)Q.push([1,NaN,NaN]);else if(G.elementClass===constants.A.OBJECT_CLASS_LINE)Q.push(G.point1.coords.usrCoords),Q.push(G.point2.coords.usrCoords);else if(G.elementClass===constants.A.OBJECT_CLASS_CIRCLE)Q.push(G.center.coords.usrCoords),G.method==="twoPoints"&&Q.push(G.point2.coords.usrCoords);else if(G.type===constants.A.OBJECT_TYPE_POLYGON)for(Z=G.vertices.length-1,J=0;J<Z;J++)Q.push(G.vertices[J].coords.usrCoords);else if(G.type===constants.A.OBJECT_TYPE_SECTOR)Q.push(G.point1.coords.usrCoords),Q.push(G.point2.coords.usrCoords),Q.push(G.point3.coords.usrCoords);else if(utils_type.A.isPoint(G)||G.type===constants.A.OBJECT_TYPE_GLIDER)Q.push(G.coords.usrCoords);else if(G.elementClass===constants.A.OBJECT_CLASS_CURVE)G.points.length>0&&Q.push(G.points[0].usrCoords);else try{Q.push(G.coords.usrCoords)}catch(ee){jxg.A.debug("JSXGraph+ saveStartPos: obj.coords.usrCoords not available: "+ee)}for(Z=Q.length,J=0;J<Z;J++)_.Zstart.push(Q[J][0]),_.Xstart.push(Q[J][1]),_.Ystart.push(Q[J][2])},mouseOriginMoveStart:function(G){var _,J;return(_=this._isRequiredKeyPressed(G,"pan"))&&(J=this.getMousePosition(G),this.initMoveOrigin(J[0],J[1])),_},mouseOriginMove:function(G){var _,J=this.mode===this.BOARD_MODE_MOVE_ORIGIN;return J&&(_=this.getMousePosition(G),this.moveOrigin(_[0],_[1],!0)),J},touchStartMoveOriginOneFinger:function(G){var _,J,Z=G.touches;return(_=this.attr.pan.enabled&&!this.attr.pan.needtwofingers&&Z.length===1)&&(J=this.getMousePosition(G,0),this.initMoveOrigin(J[0],J[1])),_},touchOriginMove:function(G){var _,J=this.mode===this.BOARD_MODE_MOVE_ORIGIN;return J&&(_=this.getMousePosition(G,0),this.moveOrigin(_[0],_[1],!0)),J},originMoveEnd:function(){this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode=this.BOARD_MODE_NONE},suppressDefault:function(G){return utils_type.A.exists(G)&&G.preventDefault(),!1},addEventHandlers:function(){env.A.supportsPointerEvents()?this.addPointerEventHandlers():(this.addMouseEventHandlers(),this.addTouchEventHandlers()),this.containerObj!==null&&env.A.addEvent(this.containerObj,"contextmenu",this.suppressDefault,this)},removeEventHandlers:function(){(this.hasPointerHandlers||this.hasMouseHandlers||this.hasTouchHandlers)&&this.containerObj!==null&&env.A.removeEvent(this.containerObj,"contextmenu",this.suppressDefault,this),this.removeMouseEventHandlers(),this.removeTouchEventHandlers(),this.removePointerEventHandlers(),this.removeFullscreenEventHandlers(),this.removeKeyboardEventHandlers(),this.removeResizeEventHandlers()},addResizeEventHandlers:function(){if(this.resizeHandlers=[],env.A.isBrowser){try{this.startResizeObserver(),this.resizeHandlers.push("resizeobserver")}catch{env.A.addEvent(window,"resize",this.resizeListener,this),this.startIntersectionObserver(),this.resizeHandlers.push("resize")}env.A.addEvent(window,"scroll",this.scrollListener,this),this.resizeHandlers.push("scroll");try{window.matchMedia("print").addEventListener("change",this.printListenerMatch.bind(this)),window.matchMedia("screen").addEventListener("change",this.printListenerMatch.bind(this)),this.resizeHandlers.push("print")}catch(G){jxg.A.debug("Error adding printListener",G)}}},removeResizeEventHandlers:function(){var G;if(this.resizeHandlers.length>0&&env.A.isBrowser){for(G=0;G<this.resizeHandlers.length;G++)switch(this.resizeHandlers[G]){case"resizeobserver":utils_type.A.exists(this.resizeObserver)&&this.stopResizeObserver();break;case"resize":env.A.removeEvent(window,"resize",this.resizeListener,this),utils_type.A.exists(this.intersectionObserver)&&this.stopIntersectionObserver();break;case"scroll":env.A.removeEvent(window,"scroll",this.scrollListener,this);break;case"print":window.matchMedia("print").removeEventListener("change",this.printListenerMatch.bind(this),!1),window.matchMedia("screen").removeEventListener("change",this.printListenerMatch.bind(this),!1)}this.resizeHandlers=[]}},addPointerEventHandlers:function(){if(!this.hasPointerHandlers&&env.A.isBrowser){var G=this.attr.movetarget||this.containerObj;window.navigator.msPointerEnabled?(env.A.addEvent(this.containerObj,"MSPointerDown",this.pointerDownListener,this),env.A.addEvent(G,"MSPointerMove",this.pointerMoveListener,this)):(env.A.addEvent(this.containerObj,"pointerdown",this.pointerDownListener,this),env.A.addEvent(G,"pointermove",this.pointerMoveListener,this),env.A.addEvent(G,"pointerleave",this.pointerLeaveListener,this),env.A.addEvent(G,"click",this.pointerClickListener,this),env.A.addEvent(G,"dblclick",this.pointerDblClickListener,this)),this.containerObj!==null&&(this.containerObj.style.touchAction="none"),this.hasPointerHandlers=!0}},addMouseEventHandlers:function(){if(!this.hasMouseHandlers&&env.A.isBrowser){var G=this.attr.movetarget||this.containerObj;env.A.addEvent(this.containerObj,"mousedown",this.mouseDownListener,this),env.A.addEvent(G,"mousemove",this.mouseMoveListener,this),env.A.addEvent(G,"click",this.mouseClickListener,this),env.A.addEvent(G,"dblclick",this.mouseDblClickListener,this),this.hasMouseHandlers=!0}},addTouchEventHandlers:function(G){if(!this.hasTouchHandlers&&env.A.isBrowser){var _=this.attr.movetarget||this.containerObj;env.A.addEvent(this.containerObj,"touchstart",this.touchStartListener,this),env.A.addEvent(_,"touchmove",this.touchMoveListener,this),this.hasTouchHandlers=!0}},addWheelEventHandlers:function(){!this.hasWheelHandlers&&env.A.isBrowser&&(env.A.addEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),env.A.addEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this),this.hasWheelHandlers=!0)},addFullscreenEventHandlers:function(){var G,_=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"],J=_.length;if(!this.hasFullscreenEventHandlers&&env.A.isBrowser){for(G=0;G<J;G++)env.A.addEvent(this.document,_[G],this.fullscreenListener,this);this.hasFullscreenEventHandlers=!0}},addKeyboardEventHandlers:function(){this.attr.keyboard.enabled&&!this.hasKeyboardHandlers&&env.A.isBrowser&&(env.A.addEvent(this.containerObj,"keydown",this.keyDownListener,this),env.A.addEvent(this.containerObj,"focusin",this.keyFocusInListener,this),env.A.addEvent(this.containerObj,"focusout",this.keyFocusOutListener,this),this.hasKeyboardHandlers=!0)},removeKeyboardEventHandlers:function(){this.hasKeyboardHandlers&&env.A.isBrowser&&(env.A.removeEvent(this.containerObj,"keydown",this.keyDownListener,this),env.A.removeEvent(this.containerObj,"focusin",this.keyFocusInListener,this),env.A.removeEvent(this.containerObj,"focusout",this.keyFocusOutListener,this),this.hasKeyboardHandlers=!1)},removeFullscreenEventHandlers:function(){var G,_=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"],J=_.length;if(this.hasFullscreenEventHandlers&&env.A.isBrowser){for(G=0;G<J;G++)env.A.removeEvent(this.document,_[G],this.fullscreenListener,this);this.hasFullscreenEventHandlers=!1}},removePointerEventHandlers:function(){if(this.hasPointerHandlers&&env.A.isBrowser){var G=this.attr.movetarget||this.containerObj;window.navigator.msPointerEnabled?(env.A.removeEvent(this.containerObj,"MSPointerDown",this.pointerDownListener,this),env.A.removeEvent(G,"MSPointerMove",this.pointerMoveListener,this)):(env.A.removeEvent(this.containerObj,"pointerdown",this.pointerDownListener,this),env.A.removeEvent(G,"pointermove",this.pointerMoveListener,this),env.A.removeEvent(G,"pointerleave",this.pointerLeaveListener,this),env.A.removeEvent(G,"click",this.pointerClickListener,this),env.A.removeEvent(G,"dblclick",this.pointerDblClickListener,this)),this.hasWheelHandlers&&(env.A.removeEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),env.A.removeEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this)),this.hasPointerUp&&(window.navigator.msPointerEnabled?env.A.removeEvent(this.document,"MSPointerUp",this.pointerUpListener,this):(env.A.removeEvent(this.document,"pointerup",this.pointerUpListener,this),env.A.removeEvent(this.document,"pointercancel",this.pointerUpListener,this)),this.hasPointerUp=!1),this.hasPointerHandlers=!1}},removeMouseEventHandlers:function(){if(this.hasMouseHandlers&&env.A.isBrowser){var G=this.attr.movetarget||this.containerObj;env.A.removeEvent(this.containerObj,"mousedown",this.mouseDownListener,this),env.A.removeEvent(G,"mousemove",this.mouseMoveListener,this),env.A.removeEvent(G,"click",this.mouseClickListener,this),env.A.removeEvent(G,"dblclick",this.mouseDblClickListener,this),this.hasMouseUp&&(env.A.removeEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!1),this.hasWheelHandlers&&(env.A.removeEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),env.A.removeEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this)),this.hasMouseHandlers=!1}},removeTouchEventHandlers:function(){if(this.hasTouchHandlers&&env.A.isBrowser){var G=this.attr.movetarget||this.containerObj;env.A.removeEvent(this.containerObj,"touchstart",this.touchStartListener,this),env.A.removeEvent(G,"touchmove",this.touchMoveListener,this),this.hasTouchEnd&&(env.A.removeEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!1),this.hasTouchHandlers=!1}},clickLeftArrow:function(){return this.moveOrigin(this.origin.scrCoords[1]+.1*this.canvasWidth,this.origin.scrCoords[2]),this},clickRightArrow:function(){return this.moveOrigin(this.origin.scrCoords[1]-.1*this.canvasWidth,this.origin.scrCoords[2]),this},clickUpArrow:function(){return this.moveOrigin(this.origin.scrCoords[1],this.origin.scrCoords[2]-.1*this.canvasHeight),this},clickDownArrow:function(){return this.moveOrigin(this.origin.scrCoords[1],this.origin.scrCoords[2]+.1*this.canvasHeight),this},gestureChangeListener:function(G){var _,J,Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue=!1,de=this.attr.zoom.factorx,me=this.attr.zoom.factory,fe=!1;return this.mode!==this.BOARD_MODE_ZOOM||(G.preventDefault(),te=geometry.A.distance([G.touches[0].clientX,G.touches[0].clientY],[G.touches[1].clientX,G.touches[1].clientY],2),G.scale===void 0&&(G.scale=te/this.prevDist),!!utils_type.A.exists(this.prevCoords)&&(J=[G.touches[0].clientX-this.prevCoords[0][0],G.touches[0].clientY-this.prevCoords[0][1]],Z=[G.touches[1].clientX-this.prevCoords[1][0],G.touches[1].clientY-this.prevCoords[1][1]],J[0]*J[0]+J[1]*J[1]<100&&Z[0]*Z[0]+Z[1]*Z[1]<100||(Q=geometry.A.rad(J,[0,0],Z),this.isPreviousGesture!=="pan"&&Math.abs(Q)>.2*Math.PI&&Math.abs(Q)<1.8*Math.PI&&(ue=!0),this.isPreviousGesture==="pan"||ue||(Math.abs(G.scale)<.77||Math.abs(G.scale)>1.3)&&(ue=!0),ee=G.scale/this.prevScale,this.prevScale=G.scale,this.prevCoords=[[G.touches[0].clientX,G.touches[0].clientY],[G.touches[1].clientX,G.touches[1].clientY]],_=new base_coords.A(constants.A.COORDS_BY_SCREEN,this.getMousePosition(G,0),this),this.attr.pan.enabled&&this.attr.pan.needtwofingers&&!ue?(this.isPreviousGesture="pan",this.moveOrigin(_.scrCoords[1],_.scrCoords[2],!0)):this.attr.zoom.enabled&&Math.abs(ee-1)<.5&&(fe=!1,re=this.attr.zoom.center,(this.attr.zoom.pinchhorizontal||this.attr.zoom.pinchvertical)&&(oe=Math.abs(G.touches[0].clientX-G.touches[1].clientX),se=Math.abs(G.touches[0].clientY-G.touches[1].clientY),ne=Math.abs(Math.atan2(se,oe)),ie=Math.PI*this.attr.zoom.pinchsensitivity/90),!this.keepaspectratio&&this.attr.zoom.pinchhorizontal&&ne<ie?(this.attr.zoom.factorx=ee,this.attr.zoom.factory=1,ae=0,ce=0,fe=!0):!this.keepaspectratio&&this.attr.zoom.pinchvertical&&Math.abs(ne-.5*Math.PI)<ie?(this.attr.zoom.factorx=1,this.attr.zoom.factory=ee,ae=0,ce=0,fe=!0):this.attr.zoom.pinch&&(this.attr.zoom.factorx=ee,this.attr.zoom.factory=ee,ae=_.usrCoords[1],ce=_.usrCoords[2],fe=!0),fe&&(re==="board"?this.zoomIn():this.zoomIn(ae,ce),this.attr.zoom.factorx=de,this.attr.zoom.factory=me))),!1))},gestureStartListener:function(G){var _;return G.preventDefault(),this.prevScale=1,this.prevDist=geometry.A.distance([G.touches[0].clientX,G.touches[0].clientY],[G.touches[1].clientX,G.touches[1].clientY],2),this.prevCoords=[[G.touches[0].clientX,G.touches[0].clientY],[G.touches[1].clientX,G.touches[1].clientY]],this.isPreviousGesture="none",_=this.getMousePosition(G,0),this.initMoveOrigin(_[0],_[1]),this.mode=this.BOARD_MODE_ZOOM,!1},_isRequiredKeyPressed:function(G,_){var J=this.attr[_];return!!J.enabled&&!(!(J.needshift&&G.shiftKey||!J.needshift&&!G.shiftKey)||!(J.needctrl&&G.ctrlKey||!J.needctrl&&!G.ctrlKey))},_isPointerRegistered:function(G){var _,J=this._board_touches.length;for(_=0;_<J;_++)if(this._board_touches[_].pointerId===G.pointerId)return!0;return!1},_pointerStorePosition:function(G){var _,J;for(_=0,J=!1;_<this._board_touches.length;_++)if(this._board_touches[_].pointerId===G.pointerId){this._board_touches[_].clientX=G.clientX,this._board_touches[_].clientY=G.clientY,J=!0;break}return!J&&this._board_touches.length<2&&this._board_touches.push({pointerId:G.pointerId,clientX:G.clientX,clientY:G.clientY}),this},_pointerRemoveTouches:function(G){var _;for(_=0;_<this._board_touches.length;_++)if(this._board_touches[_].pointerId===G.pointerId){this._board_touches.splice(_,1);break}return this},_pointerClearTouches:function(G){this._board_touches.length>0&&this.dehighlightAll(),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode=this.BOARD_MODE_NONE,this._board_touches=[],this.touches=[]},_getPointerInputDevice:function(G){if(env.A.isBrowser){if(G.pointerType==="touch"||window.navigator.msMaxTouchPoints&&window.navigator.msMaxTouchPoints>1)return"touch";if(G.pointerType==="mouse")return"mouse";if(G.pointerType==="pen")return"pen"}return"mouse"},pointerDownListener:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,ce;if(!_&&this._isPointerRegistered(G))return!1;if(utils_type.A.evaluate(this.attr.movetarget)===null&&utils_type.A.exists(G.target)&&utils_type.A.exists(G.target.releasePointerCapture)&&G.target.releasePointerCapture(G.pointerId),!_&&G.isPrimary,this.hasPointerUp||(window.navigator.msPointerEnabled?env.A.addEvent(this.document,"MSPointerUp",this.pointerUpListener,this):(env.A.addEvent(this.document,"pointerup",this.pointerUpListener,this),env.A.addEvent(this.document,"pointercancel",this.pointerUpListener,this)),this.hasPointerUp=!0),this.hasMouseHandlers&&this.removeMouseEventHandlers(),this.hasTouchHandlers&&this.removeTouchEventHandlers(),this.document.selection&&utils_type.A.isFunction(this.document.selection.empty))this.document.selection.empty();else if(window.getSelection&&(ie=window.getSelection()).removeAllRanges)try{ie.removeAllRanges()}catch{}if(this._inputDevice=this._getPointerInputDevice(G),oe=this._inputDevice,this.options.precision.hasPoint=this.options.precision[oe],te=this.getMousePosition(G),this._testForSelection(G),this.selectingMode)return this._startSelecting(te),void this.triggerEventHandlers(["touchstartselecting","pointerstartselecting","startselecting"],[G]);if(this.attr.drag.enabled&&_?(ne=[_],this.mode=this.BOARD_MODE_DRAG):ne=this.initMoveObject(te[0],te[1],G,oe),re={num:G.pointerId,X:te[0],Y:te[1],Xprev:NaN,Yprev:NaN,Xstart:[],Ystart:[],Zstart:[]},ne.length>0){for(ae=ne[ne.length-1],se=!1,Z=0;Z<this.touches.length;Z++)if(this.touches[Z].obj===ae){Q=Z,ee=this.touches[Z].targets.push(re)-1,se=!0;break}se||(ee=0,Q=this.touches.push({obj:ae,targets:[re]})-1),this.dehighlightAll(),ae.highlight(!0),this.saveStartPos(ae,this.touches[Q].targets[ee]),G&&G.preventDefault&&!J&&G.preventDefault()}return this.touches.length>0&&!J&&(G.preventDefault(),G.stopPropagation()),!!env.A.isBrowser&&(this._getPointerInputDevice(G)!=="touch"?this.mode===this.BOARD_MODE_NONE&&this.mouseOriginMoveStart(G):(this._pointerStorePosition(G),G.touches=this._board_touches,G.touches.length===1&&this.mode===this.BOARD_MODE_NONE&&this.touchStartMoveOriginOneFinger(G)||G.touches.length!==2||this.mode!==this.BOARD_MODE_NONE&&this.mode!==this.BOARD_MODE_MOVE_ORIGIN||(this.mode===this.BOARD_MODE_MOVE_ORIGIN&&this.originMoveEnd(),this.gestureStartListener(G))),ce="none",this.mode!==this.BOARD_MODE_NONE||utils_type.A.evaluate(this.attr.browserpan)!==!0&&utils_type.A.evaluate(this.attr.browserpan.enabled)!==!0||utils_type.A.evaluate(this.attr.pan.enabled)!==!1&&utils_type.A.evaluate(this.attr.pan.needtwofingers)!==!0||(ce="auto"),this.containerObj.style.touchAction=ce,this.triggerEventHandlers(["touchstart","down","pointerdown","MSPointerDown"],[G]),!0)},_handleClicks:function(G,_){var J,Z,Q=this;if(this.selectingMode)G.stopPropagation();else{if(Z=utils_type.A.evaluate(this.attr.clickdelay),utils_type.A.evaluate(this.attr.dblclicksuppressclick))this._preventSingleClick=!1,this._singleClickTimer=setTimeout(function(){if(!Q._preventSingleClick)for(J in Q.triggerEventHandlers(_,[G]),Q.clickObjects)Q.clickObjects.hasOwnProperty(J)&&(Q.clickObjects[J].triggerEventHandlers(_,[G]),delete Q.clickObjects[J])},Z);else{for(J in Q.triggerEventHandlers(_,[G]),Q.clickObjects)Q.clickObjects.hasOwnProperty(J)&&Q.clickObjects[J].triggerEventHandlers(_,[G]);setTimeout(function(){for(J in Q.clickObjects)Q.clickObjects.hasOwnProperty(J)&&delete Q.clickObjects[J]},Z)}G.stopPropagation()}},_handleDblClicks:function(G,_){var J;if(this.selectingMode)G.stopPropagation();else{for(J in this._preventSingleClick=!0,clearTimeout(this._singleClickTimer),this.triggerEventHandlers(_,[G]),this.clickObjects)this.clickObjects.hasOwnProperty(J)&&(this.clickObjects[J].triggerEventHandlers(_,[G]),delete this.clickObjects[J]);G.stopPropagation()}},pointerClickListener:function(G){this._handleClicks(G,["click","pointerclick"])},pointerDblClickListener:function(G){this._handleDblClicks(G,["dblclick","pointerdblclick"])},mouseClickListener:function(G){this._handleClicks(G,["click","mouseclick"])},mouseDblClickListener:function(G){this._handleDblClicks(G,["dblclick","mousedblclick"])},pointerMoveListener:function(G){var _,J,Z,Q,ee,te;if(this._getPointerInputDevice(G)==="touch"&&!this._isPointerRegistered(G))return this.BOARD_MODE_NONE;if(!this.checkFrameRate(G))return!1;if(this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.displayInfobox(!1)),this.mode!==this.BOARD_MODE_NONE&&(G.preventDefault(),G.stopPropagation()),this.updateQuality=this.BOARD_QUALITY_LOW,this._inputDevice=this._getPointerInputDevice(G),te=this._inputDevice,this.options.precision.hasPoint=this.options.precision[te],Q=.3333*this.options.precision.hasPoint,Z=this.getMousePosition(G),utils_type.A.evaluate(this.attr.movetarget)===null&&Z[0]<=Q||Z[1]<=Q||Z[0]>=this.canvasWidth-Q||Z[1]>=this.canvasHeight-Q)return this.mode===this.BOARD_MODE_NONE;if(this.selectingMode)this._moveSelecting(Z),this.triggerEventHandlers(["touchmoveselecting","moveselecting","pointermoveselecting"],[G,this.mode]);else if(!this.mouseOriginMove(G))if(this.mode===this.BOARD_MODE_DRAG){for(_=0;_<this.touches.length;_++)for(ee=this.touches[_].targets,J=0;J<ee.length;J++)if(ee[J].num===G.pointerId){ee[J].X=Z[0],ee[J].Y=Z[1],ee.length===1?this.moveObject(Z[0],Z[1],this.touches[_],G,te):ee.length===2&&(this.twoFingerMove(this.touches[_],G.pointerId,G),ee[J].Xprev=Z[0],ee[J].Yprev=Z[1]);break}}else this._getPointerInputDevice(G)==="touch"&&(this._pointerStorePosition(G),this._board_touches.length===2&&(G.touches=this._board_touches,this.gestureChangeListener(G))),this.highlightElements(Z[0],Z[1],G,-1);return this.triggerEventHandlers(["pointermove","MSPointerMove","move"],[G,this.mode]),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode===this.BOARD_MODE_NONE},pointerUpListener:function(G){var _,J,Z,Q,ee,te=!1;if(this.triggerEventHandlers(["touchend","up","pointerup","MSPointerUp"],[G]),this.displayInfobox(!1),G){for(_=0;_<this.touches.length;_++)for(ee=this.touches[_].targets,J=0;J<ee.length;J++)if(ee[J].num===G.pointerId){ee.splice(J,1),ee.length===0&&this.touches.splice(_,1);break}}if(this.originMoveEnd(),this.update(),this.selectingMode)this._stopSelecting(G),this.triggerEventHandlers(["touchstopselecting","pointerstopselecting","stopselecting"],[G]),this.stopSelectionMode();else for(_=this.downObjects.length-1;_>-1;_--){for(Z=!1,J=0;J<this.touches.length;J++)this.touches[J].obj.id===this.downObjects[_].id&&(Z=!0);Z||(this.downObjects[_].triggerEventHandlers(["touchend","up","pointerup","MSPointerUp"],[G]),utils_type.A.exists(this.downObjects[_].coords)||(this.downObjects[_].snapToGrid(),this.downObjects[_].snapToPoints(),te=!0),Q=this.downObjects[_].eventHandlers,(utils_type.A.exists(Q.click)&&Q.click.length>0||utils_type.A.exists(Q.pointerclick)&&Q.pointerclick.length>0||utils_type.A.exists(Q.dblclick)&&Q.dblclick.length>0||utils_type.A.exists(Q.pointerdblclick)&&Q.pointerdblclick.length>0)&&(this.clickObjects[this.downObjects[_].id]=this.downObjects[_]),this.downObjects.splice(_,1))}return this.hasPointerUp&&(window.navigator.msPointerEnabled?env.A.removeEvent(this.document,"MSPointerUp",this.pointerUpListener,this):(env.A.removeEvent(this.document,"pointerup",this.pointerUpListener,this),env.A.removeEvent(this.document,"pointercancel",this.pointerUpListener,this)),this.hasPointerUp=!1),this._pointerClearTouches(G.pointerId),this._getPointerInputDevice(G)!=="touch"&&this.dehighlightAll(),te&&this.update(),!0},pointerLeaveListener:function(G){return this.displayInfobox(!1),this.dehighlightAll(),!0},touchStartListener:function(G){var _,J,Z,Q,ee,te,ne,ie,re,oe,se=this.options.precision.touch,ae=G.touches;for(this.hasTouchEnd||(env.A.addEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!0),this.document.selection&&utils_type.A.isFunction(this.document.selection.empty)?this.document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),this._inputDevice="touch",this.options.precision.hasPoint=this.options.precision.touch,_=0;_<ae.length;_++)ae[_].jxg_isused=!1;for(_=0;_<this.touches.length;_++)for(oe=this.touches[_].targets,J=0;J<oe.length;J++){oe[J].num=-1,se=this.options.precision.touch;do{for(Z=0;Z<ae.length;Z++)if(Math.abs(Math.pow(ae[Z].screenX-oe[J].X,2)+Math.pow(ae[Z].screenY-oe[J].Y,2))<se*se){oe[J].num=Z,oe[J].X=ae[Z].screenX,oe[J].Y=ae[Z].screenY,ae[Z].jxg_isused=!0;break}se*=2}while(oe[J].num===-1&&se<this.options.precision.touchMax);oe[J].num===-1&&(jxg.A.debug("i couldn't find a targettouches for target no "+J+" on "+this.touches[_].obj.name+" ("+this.touches[_].obj.id+"). Removed the target."),jxg.A.debug("eps = "+se+", touchMax = "+src_options.A.precision.touchMax),oe.splice(_,1))}for(_=0;_<ae.length;_++)if(!ae[_].jxg_isused){if(Q=this.getMousePosition(G,_),this.selectingMode)return this._startSelecting(Q),this.triggerEventHandlers(["touchstartselecting","startselecting"],[G]),G.preventDefault(),G.stopPropagation(),this.options.precision.hasPoint=this.options.precision.mouse,this.touches.length>0;if((ee=this.initMoveObject(Q[0],Q[1],G,"touch")).length!==0){if(te=ee[ee.length-1],re={num:_,X:ae[_].screenX,Y:ae[_].screenY,Xprev:NaN,Yprev:NaN,Xstart:[],Ystart:[],Zstart:[]},utils_type.A.isPoint(te)||te.elementClass===constants.A.OBJECT_CLASS_TEXT||te.type===constants.A.OBJECT_TYPE_TICKS||te.type===constants.A.OBJECT_TYPE_IMAGE)ie=[re],this.saveStartPos(te,ie[0]),this.touches.push({obj:te,targets:ie}),te.highlight(!0);else if(te.elementClass===constants.A.OBJECT_CLASS_LINE||te.elementClass===constants.A.OBJECT_CLASS_CIRCLE||te.elementClass===constants.A.OBJECT_CLASS_CURVE||te.type===constants.A.OBJECT_TYPE_POLYGON){for(ne=!1,J=0;J<this.touches.length;J++)te.id===this.touches[J].obj.id&&(ne=!0,this.touches[J].targets.length===1&&(this.saveStartPos(te,re),this.touches[J].targets.push(re)),ae[_].jxg_isused=!0);ne||(ie=[re],this.saveStartPos(te,ie[0]),this.touches.push({obj:te,targets:ie}),te.highlight(!0))}}ae[_].jxg_isused=!0}return this.touches.length>0&&(G.preventDefault(),G.stopPropagation()),ae.length===1&&this.mode===this.BOARD_MODE_NONE&&this.touchStartMoveOriginOneFinger(G)||ae.length!==2||this.mode!==this.BOARD_MODE_NONE&&this.mode!==this.BOARD_MODE_MOVE_ORIGIN||(this.mode===this.BOARD_MODE_MOVE_ORIGIN&&this.originMoveEnd(),this.gestureStartListener(G)),this.options.precision.hasPoint=this.options.precision.mouse,this.triggerEventHandlers(["touchstart","down"],[G]),!1},touchMoveListener:function(G){var _,J,Z,Q,ee=G.touches;if(!this.checkFrameRate(G))return!1;if(this.mode!==this.BOARD_MODE_NONE&&(G.preventDefault(),G.stopPropagation()),this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.displayInfobox(!1)),this._inputDevice="touch",this.options.precision.hasPoint=this.options.precision.touch,this.updateQuality=this.BOARD_QUALITY_LOW,this.selectingMode){for(_=0;_<ee.length;_++)if(!ee[_].jxg_isused){J=this.getMousePosition(G,_),this._moveSelecting(J),this.triggerEventHandlers(["touchmoves","moveselecting"],[G,this.mode]);break}}else if(!this.touchOriginMove(G))if(this.mode===this.BOARD_MODE_DRAG){for(_=0;_<this.touches.length;_++)if((Q=this.touches[_].targets).length===1){if(ee[Q[0].num]){if((J=this.getMousePosition(G,Q[0].num))[0]<0||J[0]>this.canvasWidth||J[1]<0||J[1]>this.canvasHeight)return;Q[0].X=J[0],Q[0].Y=J[1],this.moveObject(J[0],J[1],this.touches[_],G,"touch")}}else if(Q.length===2&&Q[0].num>-1&&Q[1].num>-1&&ee[Q[0].num]&&ee[Q[1].num]){if(J=this.getMousePosition(G,Q[0].num),Z=this.getMousePosition(G,Q[1].num),J[0]<0||J[0]>this.canvasWidth||J[1]<0||J[1]>this.canvasHeight||Z[0]<0||Z[0]>this.canvasWidth||Z[1]<0||Z[1]>this.canvasHeight)return;Q[0].X=J[0],Q[0].Y=J[1],Q[1].X=Z[0],Q[1].Y=Z[1],this.twoFingerMove(this.touches[_],Q[0].num,G),Q[0].Xprev=J[0],Q[0].Yprev=J[1],Q[1].Xprev=Z[0],Q[1].Yprev=Z[1]}}else ee.length===2&&this.gestureChangeListener(G),J=this.getMousePosition(G,0),this.highlightElements(J[0],J[1],G,-1);return this.mode!==this.BOARD_MODE_DRAG&&this.displayInfobox(!1),this.triggerEventHandlers(["touchmove","move"],[G,this.mode]),this.options.precision.hasPoint=this.options.precision.mouse,this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode===this.BOARD_MODE_NONE},touchEndListener:function(G){var _,J,Z,Q,ee,te,ne=this.options.precision.touch,ie=[],re=G&&G.touches,oe=!1;if(this.triggerEventHandlers(["touchend","up"],[G]),this.displayInfobox(!1),this.selectingMode)this._stopSelecting(G),this.triggerEventHandlers(["touchstopselecting","stopselecting"],[G]),this.stopSelectionMode();else if(re&&re.length>0){for(_=0;_<this.touches.length;_++)ie[_]=this.touches[_];for(this.touches.length=0,_=0;_<re.length;_++)re[_].jxg_isused=!1;for(_=0;_<ie.length;_++){for(Q=!1,ee=0,te=ie[_].targets,J=0;J<te.length;J++)for(te[J].found=!1,Z=0;Z<re.length;Z++)if(Math.abs(Math.pow(re[Z].screenX-te[J].X,2)+Math.pow(re[Z].screenY-te[J].Y,2))<ne*ne){te[J].found=!0,te[J].num=Z,te[J].X=re[Z].screenX,te[J].Y=re[Z].screenY,ee+=1;break}if(utils_type.A.isPoint(ie[_].obj)?Q=te[0]&&te[0].found:ie[_].obj.elementClass===constants.A.OBJECT_CLASS_LINE?Q=te[0]&&te[0].found||te[1]&&te[1].found:ie[_].obj.elementClass===constants.A.OBJECT_CLASS_CIRCLE&&(Q=ee===1||ee===3),Q)for(this.touches.push({obj:ie[_].obj,targets:[]}),J=0;J<te.length;J++)te[J].found&&this.touches[this.touches.length-1].targets.push({num:te[J].num,X:te[J].screenX,Y:te[J].screenY,Xprev:NaN,Yprev:NaN,Xstart:te[J].Xstart,Ystart:te[J].Ystart,Zstart:te[J].Zstart});else ie[_].obj.noHighlight()}}else this.touches.length=0;for(_=this.downObjects.length-1;_>-1;_--){for(Q=!1,J=0;J<this.touches.length;J++)this.touches[J].obj.id===this.downObjects[_].id&&(Q=!0);Q||(this.downObjects[_].triggerEventHandlers(["touchup","up"],[G]),utils_type.A.exists(this.downObjects[_].coords)||(this.downObjects[_].snapToGrid(),this.downObjects[_].snapToPoints(),oe=!0),this.downObjects.splice(_,1))}return re&&re.length!==0||(this.hasTouchEnd&&(env.A.removeEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!1),this.dehighlightAll(),this.updateQuality=this.BOARD_QUALITY_HIGH,this.originMoveEnd(),oe&&this.update()),!0},mouseDownListener:function(G){var _,J,Z;if(this.document.selection&&utils_type.A.isFunction(this.document.selection.empty)?this.document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),!this.hasMouseUp)return env.A.addEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!0,this._inputDevice="mouse",this.options.precision.hasPoint=this.options.precision.mouse,_=this.getMousePosition(G),this._testForSelection(G),this.selectingMode?(this._startSelecting(_),void this.triggerEventHandlers(["mousestartselecting","startselecting"],[G])):((J=this.initMoveObject(_[0],_[1],G,"mouse")).length===0?(this.mode=this.BOARD_MODE_NONE,Z=!0):(this.mouse={obj:null,targets:[{X:_[0],Y:_[1],Xprev:NaN,Yprev:NaN}]},this.mouse.obj=J[J.length-1],this.dehighlightAll(),this.mouse.obj.highlight(!0),this.mouse.targets[0].Xstart=[],this.mouse.targets[0].Ystart=[],this.mouse.targets[0].Zstart=[],this.saveStartPos(this.mouse.obj,this.mouse.targets[0]),G&&G.preventDefault?G.preventDefault():window.event&&(window.event.returnValue=!1)),this.mode===this.BOARD_MODE_NONE&&(Z=this.mouseOriginMoveStart(G)),this.triggerEventHandlers(["mousedown","down"],[G]),Z)},mouseMoveListener:function(G){var _;if(!this.checkFrameRate(G))return!1;_=this.getMousePosition(G),this.updateQuality=this.BOARD_QUALITY_LOW,this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.displayInfobox(!1)),this.selectingMode?(this._moveSelecting(_),this.triggerEventHandlers(["mousemoveselecting","moveselecting"],[G,this.mode])):this.mouseOriginMove(G)||(this.mode===this.BOARD_MODE_DRAG?this.moveObject(_[0],_[1],this.mouse,G,"mouse"):this.highlightElements(_[0],_[1],G,-1),this.triggerEventHandlers(["mousemove","move"],[G,this.mode])),this.updateQuality=this.BOARD_QUALITY_HIGH},mouseUpListener:function(G){var _;if(this.selectingMode===!1&&this.triggerEventHandlers(["mouseup","up"],[G]),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mouse&&this.mouse.obj&&(utils_type.A.exists(this.mouse.obj.coords)||(this.mouse.obj.snapToGrid(this.mouse.targets[0]),this.mouse.obj.snapToPoints())),this.originMoveEnd(),this.dehighlightAll(),this.update(),this.selectingMode)this._stopSelecting(G),this.triggerEventHandlers(["mousestopselecting","stopselecting"],[G]),this.stopSelectionMode();else for(_=0;_<this.downObjects.length;_++)this.downObjects[_].triggerEventHandlers(["mouseup","up"],[G]);this.downObjects.length=0,this.hasMouseUp&&(env.A.removeEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!1),this.mouse=null},mouseWheelListener:function(G){var _,J;return!(this.attr.zoom.enabled&&this.attr.zoom.wheel&&this._isRequiredKeyPressed(G,"zoom"))||(_=(G=G||window.event).detail?-G.detail:G.wheelDelta/40,J=this.attr.zoom.center==="board"?[]:new base_coords.A(constants.A.COORDS_BY_SCREEN,this.getMousePosition(G),this).usrCoords,_>0?this.zoomIn(J[1],J[2]):this.zoomOut(J[1],J[2]),this.triggerEventHandlers(["mousewheel"],[G]),G.preventDefault(),!1)},keyDownListener:function(G){var _,J,Z,Q,ee,te,ne=G.target.id,ie=0,re=0,oe=utils_type.A.evaluate(this.attr.keyboard.dx)/this.unitX,se=utils_type.A.evaluate(this.attr.keyboard.dy)/this.unitY,ae=!1,ce=!0;return!(!this.attr.keyboard.enabled||ne==="")&&(!(Q=this.containerObj.shadowRoot||document).activeElement||(J=Q.activeElement).tagName!=="INPUT"&&J.tagName!=="textarea")&&(_=ne.replace(this.containerObj.id+"_",""),J=this.select(_),utils_type.A.exists(J.coords)&&(te=J.coords.usrCoords.slice(1)),utils_type.A.evaluate(this.attr.keyboard.panshift)&&G.shiftKey||utils_type.A.evaluate(this.attr.keyboard.panctrl)&&G.ctrlKey?(utils_type.A.evaluate(this.attr.zoom.enabled)===!0&&(ae=!0),G.keyCode===38?this.clickUpArrow():G.keyCode===40?this.clickDownArrow():G.keyCode===37?this.clickLeftArrow():G.keyCode===39?this.clickRightArrow():ae&&G.keyCode===171?this.zoomIn():ae&&G.keyCode===173?this.zoomOut():ae&&G.keyCode===79?this.zoom100():ce=!1):G.shiftKey||G.ctrlKey||(utils_type.A.exists(J.visProp)&&(utils_type.A.exists(J.visProp.snaptogrid)&&J.visProp.snaptogrid&&J.evalVisProp("snapsizex")&&J.evalVisProp("snapsizey")?(oe=ie=(Z=J.getSnapSizes())[0],se=re=Z[1]):utils_type.A.exists(J.visProp.attracttogrid)&&J.visProp.attracttogrid&&J.evalVisProp("attractordistance")&&J.evalVisProp("attractorunit")&&(re=ie=1.1*J.evalVisProp("attractordistance"),J.evalVisProp("attractorunit")==="screen"&&(ie/=this.unitX,re/=this.unitX),oe=Math.max(ie,oe),se=Math.max(re,se))),G.keyCode===38?ee=[0,se]:G.keyCode===40?ee=[0,-se]:G.keyCode===37?ee=[-oe,0]:G.keyCode===39?ee=[oe,0]:ce=!1,ee&&J.isDraggable&&J.visPropCalc.visible&&(this.geonextCompatibilityMode&&(utils_type.A.isPoint(J)||J.elementClass===constants.A.OBJECT_CLASS_TEXT)||!this.geonextCompatibilityMode)&&!J.evalVisProp("fixed")&&(this.mode=this.BOARD_MODE_DRAG,utils_type.A.exists(J.coords)&&(ee[0]+=te[0],ee[1]+=te[1]),utils_type.A.exists(J.coords)?(J.setPosition(jxg.A.COORDS_BY_USER,ee),this.updateInfobox(J)):(this.displayInfobox(!1),J.setPositionDirectly(constants.A.COORDS_BY_USER,ee,[0,0])),this.triggerEventHandlers(["keymove","move"],[G,this.mode]),J.triggerEventHandlers(["keydrag","drag"],[G]),this.mode=this.BOARD_MODE_NONE)),this.update(),ce&&utils_type.A.exists(G.preventDefault)&&G.preventDefault(),ce)},keyFocusInListener:function(G){var _,J,Z=G.target.id;if(!this.attr.keyboard.enabled||Z==="")return!1;_=Z.replace(this.containerObj.id+"_",""),J=this.select(_),utils_type.A.exists(J.highlight)&&(J.highlight(!0),this.focusObjects=[_],J.triggerEventHandlers(["hit"],[G])),utils_type.A.exists(J.coords)&&this.updateInfobox(J)},keyFocusOutListener:function(G){if(!this.attr.keyboard.enabled)return!1;this.focusObjects=[],this.dehighlightAll(),this.displayInfobox(!1)},updateContainerDims:function(G,_){var J,Z,Q,ee=G,te=_;return G===void 0&&(ee=this.containerObj.offsetWidth,te=this.containerObj.offsetHeight),G===void 0&&window&&window.getComputedStyle&&(J=window.getComputedStyle(this.containerObj,null),Z=parseFloat(J.getPropertyValue("border-left-width"))+parseFloat(J.getPropertyValue("border-right-width")),isNaN(Z)||(ee-=Z),Q=parseFloat(J.getPropertyValue("border-top-width"))+parseFloat(J.getPropertyValue("border-bottom-width")),isNaN(Q)||(te-=Q)),ee<=0||te<=0||isNaN(ee)||isNaN(te)?this:(isNaN(this.getBoundingBox()[0])&&this.setBoundingBox(this.attr.boundingbox,this.keepaspectratio,"keep"),utils_type.A.exists(this._prevDim)&&this._prevDim.w===ee&&this._prevDim.h===te||(this.resizeContainer(ee,te,!0),this._prevDim={w:ee,h:te}),this)},startResizeObserver:function(){var G=this;env.A.isBrowser&&this.attr.resize&&this.attr.resize.enabled&&(this.resizeObserver=new ResizeObserver(function(_){var J;G._isResizing||(G._isResizing=!0,J=_[0].contentRect,window.setTimeout(function(){try{G.updateContainerDims(J.width,J.height)}catch(Z){jxg.A.debug(Z),G.stopResizeObserver()}finally{G._isResizing=!1}},G.attr.resize.throttle))}),this.resizeObserver.observe(this.containerObj))},stopResizeObserver:function(){env.A.isBrowser&&this.attr.resize&&this.attr.resize.enabled&&utils_type.A.exists(this.resizeObserver)&&this.resizeObserver.unobserve(this.containerObj)},resizeListener:function(){var G=this;env.A.isBrowser&&this.attr.resize&&this.attr.resize.enabled&&(this._isScrolling||this._isResizing||(this._isResizing=!0,window.setTimeout(function(){G.updateContainerDims(),G._isResizing=!1},this.attr.resize.throttle)))},scrollListener:function(G){var _=this;env.A.isBrowser&&(this._isScrolling||(this._isScrolling=!0,window.setTimeout(function(){_._isScrolling=!1},66)))},startIntersectionObserver:function(){var G=this;try{this.intersectionObserver=new IntersectionObserver(function(_){isNaN(G.getBoundingBox()[0])&&G.updateContainerDims()},{root:null,rootMargin:"0px",threshold:.8}),this.intersectionObserver.observe(G.containerObj)}catch{jxg.A.debug("JSXGraph: IntersectionObserver not available in this browser.")}},stopIntersectionObserver:function(){utils_type.A.exists(this.intersectionObserver)&&this.intersectionObserver.unobserve(this.containerObj)},printListener:function(G){this.updateContainerDims()},printListenerMatch:function(G){G.matches&&this.printListener()},initInfobox:function(G){var _=utils_type.A.copyAttributes(G,this.options,"infobox");return _.id=this.id+"_infobox",this.infobox=this.create("text",[0,0,"0,0"],_),this.infobox.dump=!1,this.displayInfobox(!1),this},updateInfobox:function(G){var _,J,Z,Q,ee,te,ne,ie=G.evalVisProp("showinfobox");return!utils_type.A.evaluate(this.attr.showinfobox)&&ie==="inherit"||!ie||utils_type.A.isPoint(G)&&(Z=G.coords.usrCoords[1],Q=G.coords.usrCoords[2],te=this.infobox.evalVisProp("distancex"),ne=this.infobox.evalVisProp("distancey"),this.infobox.setCoords(Z+te/this.unitX,Q+ne/this.unitY),ee=G.evalVisProp("infoboxdigits"),typeof G.infoboxText!="string"?(ee==="auto"?this.infobox.useLocale()?(_=this.infobox.formatNumberLocale(Z),J=this.infobox.formatNumberLocale(Q)):(_=utils_type.A.autoDigits(Z),J=utils_type.A.autoDigits(Q)):utils_type.A.isNumber(ee)?this.infobox.useLocale()?(_=this.infobox.formatNumberLocale(Z,ee),J=this.infobox.formatNumberLocale(Q,ee)):(_=utils_type.A.toFixed(Z,ee),J=utils_type.A.toFixed(Q,ee)):(_=Z,J=Q),this.highlightInfobox(_,J,G)):this.highlightCustomInfobox(G.infoboxText,G),this.displayInfobox(!0)),this},displayInfobox:function(G){return!G&&this.focusObjects.length>0&&this.select(this.focusObjects[0]).elementClass===constants.A.OBJECT_CLASS_POINT||this.infobox.hiddenByParent===G&&(this.infobox.hiddenByParent=!G,this.infobox.prepareUpdate().updateVisibility(G).updateRenderer()),this},showInfobox:function(G){return this.displayInfobox(G)},highlightInfobox:function(G,_,J){return this.highlightCustomInfobox("("+G+", "+_+")",J),this},highlightCustomInfobox:function(G,_){return this.infobox.setText(G),this},dehighlightAll:function(){var G,_,J={},Z=!1;for(G in this.highlightedObjects)this.highlightedObjects.hasOwnProperty(G)&&(_=this.highlightedObjects[G],this.focusObjects.indexOf(G)<0?((this.hasMouseHandlers||this.hasPointerHandlers)&&_.noHighlight(),Z=!0):J[G]=_);return this.highlightedObjects=J,this.renderer.type==="canvas"&&Z&&(this.prepareUpdate(),this.renderer.suspendRedraw(this),this.updateRenderer(),this.renderer.unsuspendRedraw()),this},getScrCoordsOfMouse:function(G,_){return[G,_]},getUsrCoordsOfMouse:function(G){var _=this.getCoordsTopLeftCorner(),J=env.A.getPosition(G,null,this.document),Z=J[0]-_[0],Q=J[1]-_[1];return new base_coords.A(constants.A.COORDS_BY_SCREEN,[Z,Q],this).usrCoords.slice(1)},getAllUnderMouse:function(G){var _=this.getAllObjectsUnderMouse(G);return _.push(this.getUsrCoordsOfMouse(G)),_},getAllObjectsUnderMouse:function(G){var _,J,Z=this.getCoordsTopLeftCorner(),Q=env.A.getPosition(G,null,this.document),ee=Q[0]-Z[0],te=Q[1]-Z[1],ne=[],ie=this.objectsList.length;for(_=0;_<ie;_++)(J=this.objectsList[_]).visPropCalc.visible&&J.hasPoint&&J.hasPoint(ee,te)&&(ne[ne.length]=J);return ne},updateCoords:function(){var G,_,J=this.objectsList.length;for(_=0;_<J;_++)G=this.objectsList[_],utils_type.A.exists(G.coords)&&(G.evalVisProp("frozen")===!0?G.is3D?G.element2D.coords.screen2usr():G.coords.screen2usr():G.is3D?G.element2D.coords.usr2screen():(G.coords.usr2screen(),utils_type.A.exists(G.actualCoords)&&G.actualCoords.usr2screen()));return this},moveOrigin:function(G,_,J){var Z,Q,ee,te;return utils_type.A.exists(G)&&utils_type.A.exists(_)&&(Z=this.origin.scrCoords[1],Q=this.origin.scrCoords[2],this.origin.scrCoords[1]=G,this.origin.scrCoords[2]=_,J&&(this.origin.scrCoords[1]-=this.drag_dx,this.origin.scrCoords[2]-=this.drag_dy),ee=new base_coords.A(constants.A.COORDS_BY_SCREEN,[0,0],this).usrCoords,te=new base_coords.A(constants.A.COORDS_BY_SCREEN,[this.canvasWidth,this.canvasHeight],this).usrCoords,(ee[1]<this.maxboundingbox[0]-math.A.eps||ee[2]>this.maxboundingbox[1]+math.A.eps||te[1]>this.maxboundingbox[2]+math.A.eps||te[2]<this.maxboundingbox[3]-math.A.eps)&&(this.origin.scrCoords[1]=Z,this.origin.scrCoords[2]=Q)),this.updateCoords().clearTraces().fullUpdate(),this.triggerEventHandlers(["boundingbox"]),this},addConditions:function(G){var _,J,Z,Q,ee,te,ne,ie=[],re=G.indexOf("<data>"),oe=G.indexOf("</data>"),se=function(me,fe,_e,ye){return function(){var be,Se;Se=(be=me.select(fe.id)).coords.usrCoords[ye],ye===2?be.setPositionDirectly(constants.A.COORDS_BY_USER,[_e(),Se]):be.setPositionDirectly(constants.A.COORDS_BY_USER,[Se,_e()]),be.prepareUpdate().update()}},ae=function(me,fe,_e){return function(){var ye,be;ye=me.select(fe.id),be=_e(),ye.setAttribute({visible:be})}},ce=function(me,fe,_e,ye){return function(){var be,Se;be=me.select(fe.id),Se=_e(),ye==="strokewidth"?be.visProp.strokewidth=Se:(Se=utils_color.A.rgba2rgbo(Se),be.visProp[ye+"color"]=Se[0],be.visProp[ye+"opacity"]=Se[1])}},ue=function(me,fe,_e){return function(){me.select(fe.id).position=_e()}},de=function(me,fe,_e){return function(){me.select(fe.id).setStyle(_e())}};if(!(re<0)){for(;re>=0;){if(J=(_=G.slice(re+6,oe)).indexOf("="),Z=_.slice(0,J),Q=_.slice(J+1),J=Z.indexOf("."),ee=Z.slice(0,J),te=this.elementsByName[utils_type.A.unescapeHTML(ee)],ne=Z.slice(J+1).replace(/\s+/g,"").toLowerCase(),Q=utils_type.A.createFunction(Q,this,"",!0),utils_type.A.exists(this.elementsByName[ee]))switch(ne){case"x":ie.push(se(this,te,Q,2));break;case"y":ie.push(se(this,te,Q,1));break;case"visible":ie.push(ae(this,te,Q));break;case"position":ie.push(ue(this,te,Q));break;case"stroke":ie.push(ce(this,te,Q,"stroke"));break;case"style":ie.push(de(this,te,Q));break;case"strokewidth":ie.push(ce(this,te,Q,"strokewidth"));break;case"fill":ie.push(ce(this,te,Q,"fill"));break;case"label":break;default:jxg.A.debug('property "'+ne+'" in conditions not yet implemented:'+Q)}else jxg.A.debug("debug conditions: |"+ee+"| undefined");re=(G=G.slice(oe+7)).indexOf("<data>"),oe=G.indexOf("</data>")}this.updateConditions=function(){var me;for(me=0;me<ie.length;me++)ie[me]();return this.prepareUpdate().updateElements(),!0},this.updateConditions()}},updateConditions:function(){return!1},calculateSnapSizes:function(){var G,_,J,Z,Q=this.getBoundingBox(),ee=utils_type.A.evaluate(this.options.grid.majorStep),te=utils_type.A.evaluate(this.options.grid.gridX),ne=utils_type.A.evaluate(this.options.grid.gridY);for(utils_type.A.isArray(ee)||(ee=[ee,ee]),ee.length<2&&(ee=[ee[0],ee[0]]),utils_type.A.exists(te)&&(ee[0]=te),utils_type.A.exists(ne)&&(ee[1]=ne),ee[0]==="auto"?ee[0]=1:ee[0]=utils_type.A.parseNumber(ee[0],Math.abs(Q[1]-Q[3]),1/this.unitX),ee[1]==="auto"?ee[1]=1:ee[1]=utils_type.A.parseNumber(ee[1],Math.abs(Q[0]-Q[2]),1/this.unitY),G=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],this),_=new base_coords.A(constants.A.COORDS_BY_USER,[ee[0],ee[1]],this),J=G.scrCoords[1]-_.scrCoords[1],Z=G.scrCoords[2]-_.scrCoords[2],this.options.grid.snapSizeX=ee[0];Math.abs(J)>25;)this.options.grid.snapSizeX*=2,J/=2;for(this.options.grid.snapSizeY=ee[1];Math.abs(Z)>25;)this.options.grid.snapSizeY*=2,Z/=2;return this},applyZoom:function(){return this.updateCoords().calculateSnapSizes().clearTraces().fullUpdate(),this},zoomIn:function(G,_){var J=this.getBoundingBox(),Z=utils_type.A.evaluate(this.attr.zoom.factorx),Q=utils_type.A.evaluate(this.attr.zoom.factory),ee=(J[2]-J[0])*(1-1/Z),te=(J[1]-J[3])*(1-1/Q),ne=.5,ie=.5,re=utils_type.A.evaluate(this.attr.zoom.max),oe=utils_type.A.evaluate(this.attr.zoom.eps)||utils_type.A.evaluate(this.attr.zoom.min)||.001;return this.zoomX>re&&Z>1||this.zoomY>re&&Q>1||this.zoomX<oe&&Z<1||this.zoomY<oe&&Q<1?this:(utils_type.A.isNumber(G)&&utils_type.A.isNumber(_)&&(ne=(G-J[0])/(J[2]-J[0]),ie=(J[1]-_)/(J[1]-J[3])),this.setBoundingBox([J[0]+ee*ne,J[1]-te*ie,J[2]-ee*(1-ne),J[3]+te*(1-ie)],this.keepaspectratio,"update"),this.applyZoom())},zoomOut:function(G,_){var J=this.getBoundingBox(),Z=utils_type.A.evaluate(this.attr.zoom.factorx),Q=utils_type.A.evaluate(this.attr.zoom.factory),ee=(J[2]-J[0])*(1-Z),te=(J[1]-J[3])*(1-Q),ne=.5,ie=.5,re=utils_type.A.evaluate(this.attr.zoom.eps)||utils_type.A.evaluate(this.attr.zoom.min)||.001;return this.zoomX<re||this.zoomY<re?this:(utils_type.A.isNumber(G)&&utils_type.A.isNumber(_)&&(ne=(G-J[0])/(J[2]-J[0]),ie=(J[1]-_)/(J[1]-J[3])),this.setBoundingBox([J[0]+ee*ne,J[1]-te*ie,J[2]-ee*(1-ne),J[3]+te*(1-ie)],this.keepaspectratio,"update"),this.applyZoom())},zoom100:function(){var G,_,J;return utils_type.A.exists(this.attr.boundingbox)?this.setBoundingBox(this.attr.boundingbox,this.keepaspectratio,"reset"):(_=((G=this.getBoundingBox())[2]-G[0])*(1-this.zoomX)*.5,J=(G[1]-G[3])*(1-this.zoomY)*.5,this.setBoundingBox([G[0]+_,G[1]-J,G[2]-_,G[3]+J],this.keepaspectratio,"reset")),this.applyZoom()},zoomAllPoints:function(){var G,_,J,Z,Q=0,ee=0,te=0,ne=0,ie=this.objectsList.length;for(G=0;G<ie;G++)Z=this.objectsList[G],utils_type.A.isPoint(Z)&&Z.visPropCalc.visible&&(Z.coords.usrCoords[1]<Q?Q=Z.coords.usrCoords[1]:Z.coords.usrCoords[1]>ee&&(ee=Z.coords.usrCoords[1]),Z.coords.usrCoords[2]>ne?ne=Z.coords.usrCoords[2]:Z.coords.usrCoords[2]<te&&(te=Z.coords.usrCoords[2]));return _=50/this.unitX,J=50/this.unitY,this.setBoundingBox([Q-_,ne+J,ee+_,te-J],this.keepaspectratio,"update"),this.applyZoom()},zoomElements:function(G){var _,J,Z,Q,ee,te,ne,ie=[1/0,-1/0,-1/0,1/0];if(!utils_type.A.isArray(G)||G.length===0)return this;for(_=0;_<G.length;_++)J=this.select(G[_]).bounds(),utils_type.A.isArray(J)&&(J[0]<ie[0]&&(ie[0]=J[0]),J[1]>ie[1]&&(ie[1]=J[1]),J[2]>ie[2]&&(ie[2]=J[2]),J[3]<ie[3]&&(ie[3]=J[3]));return utils_type.A.isArray(ie)&&(Z=.5*(ie[0]+ie[2]),Q=.5*(ie[1]+ie[3]),ee=1.5*(ie[2]-ie[0])*.5,te=1.5*(ie[1]-ie[3])*.5,ne=Math.max(ee,te),this.setBoundingBox([Z-ne,Q+ne,Z+ne,Q-ne],this.keepaspectratio,"update")),this},setZoom:function(G,_){var J=this.attr.zoom.factorx,Z=this.attr.zoom.factory;return this.attr.zoom.factorx=G/this.zoomX,this.attr.zoom.factory=_/this.zoomY,this.zoomIn(),this.attr.zoom.factorx=J,this.attr.zoom.factory=Z,this},_removeObj:function(G,_){var J,Z;if(utils_type.A.isArray(G)){for(Z=0;Z<G.length;Z++)this._removeObj(G[Z],_);return this}if(G=this.select(G),!utils_type.A.exists(G)||utils_type.A.isString(G))return this;try{for(J in G.childElements)G.childElements.hasOwnProperty(J)&&G.childElements[J].board._removeObj(G.childElements[J]);for(J in G.objects)G.objects.hasOwnProperty(J)&&G.objects[J].board._removeObj(G.objects[J]);if(_)for(J in this.objects)this.objects.hasOwnProperty(J)&&utils_type.A.exists(this.objects[J].childElements)&&utils_type.A.exists(this.objects[J].childElements.hasOwnProperty(G.id))&&(delete this.objects[J].childElements[G.id],delete this.objects[J].descendants[G.id]);else if(utils_type.A.exists(G.ancestors))for(J in G.ancestors)G.ancestors.hasOwnProperty(J)&&utils_type.A.exists(G.ancestors[J].childElements)&&utils_type.A.exists(G.ancestors[J].childElements.hasOwnProperty(G.id))&&(delete G.ancestors[J].childElements[G.id],delete G.ancestors[J].descendants[G.id]);if(G._pos>-1)for(this.objectsList.splice(G._pos,1),Z=G._pos;Z<this.objectsList.length;Z++)this.objectsList[Z]._pos--;else G.type!==constants.A.OBJECT_TYPE_TURTLE&&jxg.A.debug("Board.removeObject: object "+G.id+" not found in list.");delete this.objects[G.id],delete this.elementsByName[G.name],G.visProp&&G.evalVisProp("trace")&&G.clearTrace(),utils_type.A.exists(G.remove)&&G.remove()}catch(Q){jxg.A.debug(G.id+": Could not be removed: "+Q)}return this},removeObject:function(G,_){var J;if(this.renderer.suspendRedraw(this),utils_type.A.isArray(G))for(J=0;J<G.length;J++)this._removeObj(G[J],_);else this._removeObj(G,_);return this.renderer.unsuspendRedraw(),this.update(),this},removeAncestors:function(G){var _;for(_ in G.ancestors)G.ancestors.hasOwnProperty(_)&&this.removeAncestors(G.ancestors[_]);return this.removeObject(G),this},initGeonextBoard:function(){var G,_,J;return G=this.create("point",[0,0],{id:this.id+"g00e0",name:"Ursprung",withLabel:!1,visible:!1,fixed:!0}),_=this.create("point",[1,0],{id:this.id+"gX0e0",name:"Punkt_1_0",withLabel:!1,visible:!1,fixed:!0}),J=this.create("point",[0,1],{id:this.id+"gY0e0",name:"Punkt_0_1",withLabel:!1,visible:!1,fixed:!0}),this.create("line",[G,_],{id:this.id+"gXLe0",name:"X-Achse",withLabel:!1,visible:!1}),this.create("line",[G,J],{id:this.id+"gYLe0",name:"Y-Achse",withLabel:!1,visible:!1}),this},resizeContainer:function(G,_,J,Z){var Q,ee,te,ne,ie;return ee=this.canvasWidth,te=this.canvasHeight,Z||(Q=this.getBoundingBox()),this.canvasWidth=parseFloat(G),this.canvasHeight=parseFloat(_),J||(this.containerObj.style.width=this.canvasWidth+"px",this.containerObj.style.height=this.canvasHeight+"px"),this.renderer.resize(this.canvasWidth,this.canvasHeight),Z?(ne=.5*(this.canvasWidth-ee),ie=.5*(this.canvasHeight-te),this.moveOrigin(this.origin.scrCoords[1]+ne,this.origin.scrCoords[2]+ie)):this.setBoundingBox(Q,this.keepaspectratio,"keep"),this},showDependencies:function(){var G,_,J,Z,Q;for(G in _=`<p>
`,this.objects)if(this.objects.hasOwnProperty(G)){for(J in Q=0,this.objects[G].childElements)this.objects[G].childElements.hasOwnProperty(J)&&(Q+=1);for(J in Q>=0&&(_+="<strong>"+this.objects[G].id+":</strong> "),this.objects[G].childElements)this.objects[G].childElements.hasOwnProperty(J)&&(_+=this.objects[G].childElements[J].id+"("+this.objects[G].childElements[J].name+"), ");_+=`<p>
`}return _+=`</p>
`,(Z=window.open()).document.open(),Z.document.write(_),Z.document.close(),this},showXML:function(){var G=window.open("");return G.document.open(),G.document.write("<pre>"+utils_type.A.escapeHTML(this.xmlString)+"</pre>"),G.document.close(),this},prepareUpdate:function(G){var _,J,Z,Q=this.objectsList.length;for(_=0;_<Q;_++)if(Z=this.objectsList[_],this._change3DView||utils_type.A.exists(G)&&G.elType==="view3d_slider"){if(Z.needsUpdate=Z.visProp.element3d||Z.elType==="view3d"||Z.elType==="view3d_slider"||this.needsFullUpdate,Z.visProp.element3d&&Z.visProp.element3d.type===constants.A.OBJECT_TYPE_SPHERE3D)for(J=0;J<Z.parents.length;J++)this.objects[Z.parents[J]].needsUpdate=!0}else Z.needsUpdate=Z.needsRegularUpdate||this.needsFullUpdate;for(_ in this.groups)this.groups.hasOwnProperty(_)&&((Z=this.groups[_]).needsUpdate=Z.needsRegularUpdate||this.needsFullUpdate);return this},updateElements:function(G){var _,J;for(G=this.select(G),_=0;_<this.objectsList.length;_++)J=this.objectsList[_],this.needsFullUpdate&&J.elementClass===constants.A.OBJECT_CLASS_TEXT&&J.updateSize(),J.update(!utils_type.A.exists(G)||J.id!==G.id).updateVisibility();for(_ in this.groups)this.groups.hasOwnProperty(_)&&this.groups[_].update(G);return this},updateRenderer:function(){var G,_,J,Z=this.objectsList.length,Q=[];if(this.renderer){if(this.renderer.type==="canvas")this.updateRendererCanvas();else{for(G=0;G<Z;G++)this.objectsList[G].visProp.islabel&&this.objectsList[G].visProp.autoposition?Q.push(G):this.objectsList[G].updateRenderer();for(_=Q.length;_!==0;)J=Math.floor(Math.random()*_),_--,[Q[_],Q[J]]=[Q[J],Q[_]];for(G=0;G<Q.length;G++)this.objectsList[Q[G]].updateRenderer()}return this}},updateRendererCanvas:function(){var G,_,J,Z=this.objectsList.length,Q=[];for(G=0;G<Z;G++)if((_=this.objectsList[G]).elType==="view3d"&&_.evalVisProp("depthorder.enabled")){Q=_.evalVisProp("depthorder.layers"),_.updateRenderer();break}for(Z=(J=this.objectsList.toSorted(function(ee,te){return ee.visProp.layer!==te.visProp.layer?ee.visProp.layer-te.visProp.layer:Q.indexOf(ee.visProp.layer)===-1?ee._pos-te._pos:ee.visProp.element3d||te.visProp.element3d?ee.visProp.element3d&&!te.visProp.element3d?-1:te.visProp.element3d&&!ee.visProp.element3d?1:ee.visProp.element3d.zIndex-te.visProp.element3d.zIndex:ee._pos-te._pos})).length,G=0;G<Z;G++)J[G].prepareUpdate().updateRenderer();return this},addHook:function(G,_,J){return jxg.A.deprecated("Board.addHook()","Board.on()"),_=utils_type.A.def(_,"update"),J=utils_type.A.def(J,this),this.hooks.push([_,G]),this.on(_,G,J),this.hooks.length-1},addEvent:jxg.A.shortcut(jxg.A.Board.prototype,"on"),removeHook:function(G){return jxg.A.deprecated("Board.removeHook()","Board.off()"),this.hooks[G]&&(this.off(this.hooks[G][0],this.hooks[G][1]),this.hooks[G]=null),this},removeEvent:jxg.A.shortcut(jxg.A.Board.prototype,"off"),updateHooks:function(G){var _=Array.prototype.slice.call(arguments,0);return jxg.A.deprecated("Board.updateHooks()","Board.triggerEventHandlers()"),_[0]=utils_type.A.def(_[0],"update"),this.triggerEventHandlers([_[0]],arguments),this},addChild:function(G){return utils_type.A.exists(G)&&utils_type.A.exists(G.containerObj)&&(this.dependentBoards.push(G),this.update()),this},removeChild:function(G){var _;for(_=this.dependentBoards.length-1;_>=0;_--)this.dependentBoards[_]===G&&this.dependentBoards.splice(_,1);return this},update:function(G){var _,J,Z,Q,ee;if(this.inUpdate||this.isSuspendedUpdate)return this;for(this.inUpdate=!0,this.attr.minimizereflow==="all"&&this.containerObj&&this.renderer.type!=="vml"&&(ee=this.document.activeElement,Q=this.renderer.removeToInsertLater(this.containerObj)),this.attr.minimizereflow==="svg"&&this.renderer.type==="svg"&&(ee=this.document.activeElement,Q=this.renderer.removeToInsertLater(this.renderer.svgRoot)),this.prepareUpdate(G).updateElements(G).updateConditions(),this.renderer.suspendRedraw(this),this.updateRenderer(),this.renderer.unsuspendRedraw(),this.triggerEventHandlers(["update"],[]),Q&&(Q(),ee.focus()),J=this.dependentBoards.length,_=0;_<J;_++)Z=this.dependentBoards[_],utils_type.A.exists(Z)&&Z!==this&&(Z.updateQuality=this.updateQuality,Z.prepareUpdate().updateElements().updateConditions(),Z.renderer.suspendRedraw(this),Z.updateRenderer(),Z.renderer.unsuspendRedraw(),Z.triggerEventHandlers(["update"],[]));return this.inUpdate=!1,this},fullUpdate:function(){return this.needsFullUpdate=!0,this.update(),this.needsFullUpdate=!1,this},addGrid:function(){return this.create("grid",[]),this},removeGrids:function(){var G;for(G=0;G<this.grids.length;G++)this.removeObject(this.grids[G]);return this.grids.length=0,this.update(),this},create:function(G,_,J){var Z,Q;for(G=G.toLowerCase(),utils_type.A.exists(_)||(_=[]),utils_type.A.exists(J)||(J={}),Q=0;Q<_.length;Q++)!utils_type.A.isString(_[Q])||G==="text"&&Q===2||G==="solidofrevolution3d"&&Q===2||G==="text3d"&&(Q===2||Q===4)||!(G!=="input"&&G!=="checkbox"&&G!=="button"||Q!==2&&Q!==3)||G==="curve"||G==="functiongraph"||G==="implicitcurve"||(Q>0&&_[0].elType==="view3d"?_[Q]=_[0].select(_[Q]):_[Q]=this.select(_[Q]));if(!utils_type.A.isFunction(jxg.A.elements[G]))throw new Error("JSXGraph: create: Unknown element type given: "+G);return Z=jxg.A.elements[G](this,_,J),utils_type.A.exists(Z)?(Z.prepareUpdate&&Z.update&&Z.updateRenderer&&Z.fullUpdate(),Z):(jxg.A.debug("JSXGraph: create: failure creating "+G),Z)},createElement:function(){return jxg.A.deprecated("Board.createElement()","Board.create()"),this.create.apply(this,arguments)},clearTraces:function(){var G;for(G=0;G<this.objectsList.length;G++)this.objectsList[G].clearTrace();return this.numTraces=0,this},suspendUpdate:function(){return this.inUpdate||(this.isSuspendedUpdate=!0),this},unsuspendUpdate:function(){return this.isSuspendedUpdate&&(this.isSuspendedUpdate=!1,this.fullUpdate()),this},setBoundingBox:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae=0,ce=0,ue=1,de=env.A.getDimensions(this.containerObj,this.document);return utils_type.A.isArray(G)?(G[0]<this.maxboundingbox[0]-math.A.eps||G[1]>this.maxboundingbox[1]+math.A.eps||G[2]>this.maxboundingbox[2]+math.A.eps||G[3]<this.maxboundingbox[3]-math.A.eps||(utils_type.A.exists(J)||(J="reset"),ee=this.unitX,te=this.unitY,this.canvasWidth=parseFloat(de.width),this.canvasHeight=parseFloat(de.height),Q=this.canvasWidth,Z=this.canvasHeight,_?(this.keepaspectratio?(ne=ee/te,isNaN(ne)&&(ne=1)):ne=1,J==="keep"&&(ue=this.zoomX/this.zoomY),oe=ee*(ie=G[2]-G[0]),se=te*(re=G[1]-G[3]),Q>=Z?oe>=se?(this.unitY=Z/re,this.unitX=this.unitY*ne):(this.unitY=Z/Math.abs(ie)*math.A.sign(re)/ue,this.unitX=this.unitY*ne):se>oe?(this.unitX=Q/ie,this.unitY=this.unitX/ne):(this.unitX=Q/Math.abs(re)*math.A.sign(ie)*ue,this.unitY=this.unitX/ne),ae=.5*(Q/this.unitX-ie),ce=.5*(Z/this.unitY-re),this.keepaspectratio=!0):(this.unitX=Q/(G[2]-G[0]),this.unitY=Z/(G[1]-G[3]),this.keepaspectratio=!1),this.moveOrigin(-this.unitX*(G[0]-ae),this.unitY*(G[1]+ce)),J==="update"?(this.zoomX*=this.unitX/ee,this.zoomY*=this.unitY/te):J==="reset"&&(this.zoomX=utils_type.A.exists(this.attr.zoomx)?this.attr.zoomx:1,this.zoomY=utils_type.A.exists(this.attr.zoomy)?this.attr.zoomy:1)),this):this},getBoundingBox:function(){var G=new base_coords.A(constants.A.COORDS_BY_SCREEN,[0,0],this).usrCoords,_=new base_coords.A(constants.A.COORDS_BY_SCREEN,[this.canvasWidth,this.canvasHeight],this).usrCoords;return[G[1],G[2],_[1],_[2]]},_set:function(G,_){G=G.toLocaleLowerCase(),_===null||!utils_type.A.isObject(_)||utils_type.A.exists(_.id)||utils_type.A.exists(_.name)?this.attr[G]=_:utils_type.A.mergeAttr(this.attr[G],_)},setAttribute:function(G){var _,J,Z,Q,ee,te,ne={};for(_=0;_<arguments.length;_++)J=arguments[_],utils_type.A.isString(J)?(Z=J.split(":"),ne[utils_type.A.trim(Z[0])]=utils_type.A.trim(Z[1])):utils_type.A.isArray(J)?ne[J[0]]=J[1]:jxg.A.extend(ne,J);for(_ in ne)if(ne.hasOwnProperty(_)&&(Q=_.replace(/\s+/g,"").toLowerCase(),ee=ne[_]),ee=(!ee.toLowerCase||ee.toLowerCase()!=="false")&&ee,this.attr[Q]!==ee)switch(Q){case"axis":ee===!1&&utils_type.A.exists(this.defaultAxes)&&(this.defaultAxes.x.setAttribute({visible:!1}),this.defaultAxes.y.setAttribute({visible:!1}));break;case"boundingbox":this.setBoundingBox(ee,this.keepaspectratio),this._set(Q,ee);break;case"defaultaxes":utils_type.A.exists(this.defaultAxes.x)&&utils_type.A.exists(ee.x)&&this.defaultAxes.x.setAttribute(ee.x),utils_type.A.exists(this.defaultAxes.y)&&utils_type.A.exists(ee.y)&&this.defaultAxes.y.setAttribute(ee.y);break;case"title":this.document.getElementById(this.container+"_ARIAlabel").innerText=ee,this._set(Q,ee);break;case"keepaspectratio":this._set(Q,ee),this.setBoundingBox(this.getBoundingBox(),ee,"keep");break;case"document":case"maxboundingbox":this[Q]=ee,this._set(Q,ee);break;case"zoomx":case"zoomy":this[Q]=ee,this._set(Q,ee),this.setZoom(this.attr.zoomx,this.attr.zoomy);break;case"registerevents":case"renderer":break;case"fullscreen":case"screenshot":(te=this.containerObj.ownerDocument.getElementById(this.container+"_navigation_"+Q))&&utils_type.A.exists(ee.symbol)&&(te.innerText=utils_type.A.evaluate(ee.symbol)),this._set(Q,ee);break;case"selection":ee.visible=!1,ee.withLines=!1,ee.vertices={visible:!1},this._set(Q,ee);break;case"showcopyright":this.renderer.type==="svg"&&((te=this.containerObj.ownerDocument.getElementById(this.renderer.uniqName("licenseText")))?te.style.display=utils_type.A.evaluate(ee)?"inline":"none":utils_type.A.evaluate(ee)&&this.renderer.displayCopyright(constants.A.licenseText,parseInt(this.options.text.fontSize,10))),this._set(Q,ee);break;case"showlogo":this.renderer.type==="svg"&&((te=this.containerObj.ownerDocument.getElementById(this.renderer.uniqName("licenseLogo")))?te.style.display=utils_type.A.evaluate(ee)?"inline":"none":utils_type.A.evaluate(ee)&&this.renderer.displayLogo(constants.A.licenseLogo,parseInt(this.options.text.fontSize,10))),this._set(Q,ee);break;default:utils_type.A.exists(this.attr[Q])&&this._set(Q,ee)}return this.containerObj.ownerDocument.getElementById(this.container+"_navigationbar").remove(),this.renderer.drawNavigationBar(this,this.attr.navbar),this.triggerEventHandlers(["attribute"],[ne,this]),this.fullUpdate(),this},addAnimation:function(G){var _=this;return this.animationObjects[G.id]=G,this.animationIntervalCode||(this.animationIntervalCode=window.setInterval(function(){_.animate()},G.board.attr.animationdelay)),this},stopAllAnimation:function(){var G;for(G in this.animationObjects)this.animationObjects.hasOwnProperty(G)&&utils_type.A.exists(this.animationObjects[G])&&(this.animationObjects[G]=null,delete this.animationObjects[G]);return window.clearInterval(this.animationIntervalCode),delete this.animationIntervalCode,this},animate:function(){var G,_,J,Z,Q,ee,te,ne,ie=0,re=null;for(_ in this.animationObjects)if(this.animationObjects.hasOwnProperty(_)&&utils_type.A.exists(this.animationObjects[_])){if(ie+=1,(J=this.animationObjects[_]).animationPath&&(Z=utils_type.A.isFunction(J.animationPath)?J.animationPath(new Date().getTime()-J.animationStart):J.animationPath.pop(),!utils_type.A.exists(Z)||!utils_type.A.isArray(Z)&&isNaN(Z)?delete J.animationPath:(J.setPositionDirectly(constants.A.COORDS_BY_USER,Z),J.fullUpdate(),re=J)),J.animationData){for(Q in te=0,J.animationData)J.animationData.hasOwnProperty(Q)&&(ee=J.animationData[Q].pop(),utils_type.A.exists(ee)?(te+=1,(G={})[Q]=ee,J.setAttribute(G)):delete J.animationData[ee]);te===0&&delete J.animationData}utils_type.A.exists(J.animationData)||utils_type.A.exists(J.animationPath)||(this.animationObjects[_]=null,delete this.animationObjects[_],utils_type.A.exists(J.animationCallback)&&(ne=J.animationCallback,J.animationCallback=null,ne()))}return ie===0?(window.clearInterval(this.animationIntervalCode),delete this.animationIntervalCode):this.update(re),this},migratePoint:function(G,_,J){var Z,Q,ee,te,ne,ie,re=!1;for(Q in G=this.select(G),_=this.select(_),utils_type.A.exists(G.label)&&(ie=G.label.id,re=!0,this.removeObject(G.label)),G.childElements)if(G.childElements.hasOwnProperty(Q)){for(ee in te=!1,Z=G.childElements[Q])Z.hasOwnProperty(ee)&&Z[ee]===G&&(Z[ee]=_,te=!0);for(te&&delete G.childElements[Q],ne=0;ne<Z.parents.length;ne++)Z.parents[ne]===G.id&&(Z.parents[ne]=_.id);_.addChild(Z)}return J&&(re&&(delete _.childElements[ie],delete _.descendants[ie]),_.label&&this.removeObject(_.label),delete this.elementsByName[_.name],_.name=G.name,re&&_.createLabel()),this.removeObject(G),utils_type.A.exists(_.name)&&_.name!==""&&(this.elementsByName[_.name]=_),this.fullUpdate(),this},emulateColorblindness:function(G){var _,J;if(utils_type.A.exists(G)||(G="none"),this.currentCBDef===G)return this;for(_ in this.objects)this.objects.hasOwnProperty(_)&&(J=this.objects[_],G!=="none"?(this.currentCBDef==="none"&&(J.visPropOriginal={strokecolor:J.visProp.strokecolor,fillcolor:J.visProp.fillcolor,highlightstrokecolor:J.visProp.highlightstrokecolor,highlightfillcolor:J.visProp.highlightfillcolor}),J.setAttribute({strokecolor:utils_color.A.rgb2cb(J.eval(J.visPropOriginal.strokecolor),G),fillcolor:utils_color.A.rgb2cb(J.eval(J.visPropOriginal.fillcolor),G),highlightstrokecolor:utils_color.A.rgb2cb(J.eval(J.visPropOriginal.highlightstrokecolor),G),highlightfillcolor:utils_color.A.rgb2cb(J.eval(J.visPropOriginal.highlightfillcolor),G)})):utils_type.A.exists(J.visPropOriginal)&&jxg.A.extend(J.visProp,J.visPropOriginal));return this.currentCBDef=G,this.update(),this},select:function(G,_){var J,Z,Q,ee,te=G;if(te===null)return te;if(utils_type.A.isString(te)&&te!=="")utils_type.A.exists(this.objects[te])?te=this.objects[te]:utils_type.A.exists(this.elementsByName[te])?te=this.elementsByName[te]:utils_type.A.exists(this.groups[te])&&(te=this.groups[te]);else if(!_&&(utils_type.A.isFunction(te)||utils_type.A.isObject(te)&&!utils_type.A.isFunction(te.setAttribute))){for(Z={},ee=(J=utils_type.A.filterElements(this.objectsList,te)).length,Q=0;Q<ee;Q++)Z[J[Q].id]=J[Q];te=new composition(Z)}else utils_type.A.isObject(te)&&utils_type.A.exists(te.id)&&!utils_type.A.exists(this.objects[te.id])&&(te=null);return te},hasPoint:function(G,_){var J=G,Z=_,Q=this.getBoundingBox();return utils_type.A.exists(G)&&utils_type.A.isArray(G.usrCoords)&&(J=G.usrCoords[1],Z=G.usrCoords[2]),!!(utils_type.A.isNumber(J)&&utils_type.A.isNumber(Z)&&Q[0]<J&&J<Q[2]&&Q[1]>Z&&Z>Q[3])},updateCSSTransforms:function(){var G=this.containerObj,_=G,J=G;if(this.cssTransMat=env.A.getCSSTransformMatrix(_),utils_type.A.exists(_.getRootNode)){for(_=_.parentNode===_.getRootNode()?_.parentNode.host:_.parentNode;_;)this.cssTransMat=math.A.matMatMult(env.A.getCSSTransformMatrix(_),this.cssTransMat),_=_.parentNode===_.getRootNode()?_.parentNode.host:_.parentNode;this.cssTransMat=math.A.inverse(this.cssTransMat)}else{for(_=_.offsetParent;_;){for(this.cssTransMat=math.A.matMatMult(env.A.getCSSTransformMatrix(_),this.cssTransMat),J=J.parentNode;J!==_;)this.cssTransMat=math.A.matMatMult(env.A.getCSSTransformMatrix(_),this.cssTransMat),J=J.parentNode;_=_.offsetParent}this.cssTransMat=math.A.inverse(this.cssTransMat)}return this},startSelectionMode:function(){this.selectingMode=!0,this.selectionPolygon.setAttribute({visible:!0}),this.selectingBox=[[0,0],[0,0]],this._setSelectionPolygonFromBox(),this.selectionPolygon.fullUpdate()},stopSelectionMode:function(){return this.selectingMode=!1,this.selectionPolygon.setAttribute({visible:!1}),[this.selectionPolygon.vertices[0].coords,this.selectionPolygon.vertices[2].coords]},_startSelecting:function(G){this.isSelecting=!0,this.selectingBox=[[G[0],G[1]],[G[0],G[1]]],this._setSelectionPolygonFromBox()},_moveSelecting:function(G){this.isSelecting&&(this.selectingBox[1]=[G[0],G[1]],this._setSelectionPolygonFromBox(),this.selectionPolygon.fullUpdate())},_stopSelecting:function(G){var _=this.getMousePosition(G);this.isSelecting=!1,this.selectingBox[1]=[_[0],_[1]],this._setSelectionPolygonFromBox()},_setSelectionPolygonFromBox:function(){var G=this.selectingBox[0],_=this.selectingBox[1];this.selectionPolygon.vertices[0].setPositionDirectly(jxg.A.COORDS_BY_SCREEN,[G[0],G[1]]),this.selectionPolygon.vertices[1].setPositionDirectly(jxg.A.COORDS_BY_SCREEN,[G[0],_[1]]),this.selectionPolygon.vertices[2].setPositionDirectly(jxg.A.COORDS_BY_SCREEN,[_[0],_[1]]),this.selectionPolygon.vertices[3].setPositionDirectly(jxg.A.COORDS_BY_SCREEN,[_[0],G[1]])},_testForSelection:function(G){this._isRequiredKeyPressed(G,"selection")&&(utils_type.A.exists(this.selectionPolygon)||this._createSelectionPolygon(this.attr),this.startSelectionMode())},_createSelectionPolygon:function(G){var _;return utils_type.A.exists(this.selectionPolygon)||(_=utils_type.A.copyAttributes(G,src_options.A,"board","selection")).enabled===!0&&(this.selectionPolygon=this.create("polygon",[[0,0],[0,0],[0,0],[0,0]],_)),this},__evt__attribute:function(G){},__evt__down:function(G){},__evt__mousedown:function(G){},__evt__pendown:function(G){},__evt__pointerdown:function(G){},__evt__touchstart:function(G){},__evt__up:function(G){},__evt__mouseup:function(G){},__evt__pointerup:function(G){},__evt__touchend:function(G){},__evt__click:function(G){},__evt__dblclick:function(G){},__evt__mouseclick:function(G){},__evt__mousedblclick:function(G){},__evt__pointerclick:function(G){},__evt__pointerdblclick:function(G){},__evt__move:function(G,_){},__evt__mousemove:function(G,_){},__evt__penmove:function(G,_){},__evt__pointermove:function(G,_){},__evt__touchmove:function(G,_){},__evt__keymove:function(G,_){},__evt__hit:function(G,_,J){},__evt__mousehit:function(G,_,J){},__evt__update:function(){},__evt__boundingbox:function(){},__evt__startselecting:function(){},__evt__mousestartselecting:function(){},__evt__pointerstartselecting:function(){},__evt__touchstartselecting:function(){},__evt__stopselecting:function(){},__evt__mousestopselecting:function(){},__evt__pointerstopselecting:function(){},__evt__touchstopselecting:function(){},__evt__moveselecting:function(){},__evt__mousemoveselecting:function(){},__evt__pointermoveselecting:function(){},__evt__touchmoveselecting:function(){},__evt:function(){},toFullscreen:function(G){var _,J,Z,Q,ee=this.document;return G=G||this.container,this._fullscreen_inner_id=G,Z=ee.getElementById(G),_="fullscreenwrap_"+G,utils_type.A.exists(Z._cssFullscreenStore)||(Q=this.containerObj.getBoundingClientRect(),Z._cssFullscreenStore={w:Q.width,h:Q.height}),ee.getElementById(_)?J=ee.getElementById(_):((J=document.createElement("div")).classList.add("JXG_wrap_private"),J.setAttribute("id",_),Z.parentNode.insertBefore(J,Z),J.appendChild(Z)),J.requestFullscreen=J.requestFullscreen||J.webkitRequestFullscreen||J.mozRequestFullScreen||J.msRequestFullscreen,(ee.fullscreenElement!==void 0?ee.fullscreenElement:ee.webkitFullscreenElement!==void 0?ee.webkitFullscreenElement:ee.msFullscreenElement)===null?J.requestFullscreen&&(J.requestFullscreen(),this.startFullscreenResizeObserver(J)):(this.stopFullscreenResizeObserver(J),utils_type.A.exists(document.exitFullscreen)?document.exitFullscreen():utils_type.A.exists(document.webkitExitFullscreen)&&document.webkitExitFullscreen()),this},fullscreenListener:function(G){var _,J,Z,Q=this.document;_=this._fullscreen_inner_id,utils_type.A.exists(_)&&(Z=Q.fullscreenElement!==void 0?Q.fullscreenElement:Q.webkitFullscreenElement!==void 0?Q.webkitFullscreenElement:Q.msFullscreenElement,J=Q.getElementById(_),Z?(J._cssFullscreenStore.id=Z.id,J._cssFullscreenStore.isFullscreen=!0,J._cssFullscreenStore.margin=J.style.margin,J._cssFullscreenStore.width=J.style.width,J._cssFullscreenStore.height=J.style.height,J._cssFullscreenStore.transform=J.style.transform,J.style.width=J._cssFullscreenStore.w+"px",J.style.height=J._cssFullscreenStore.h+"px",J.style.margin="",env.A.scaleJSXGraphDiv(Z.id,_,Q,utils_type.A.evaluate(this.attr.fullscreen.scale)),Z=null):utils_type.A.exists(J._cssFullscreenStore)&&(J._cssFullscreenStore.isFullscreen=!1,J.style.margin=J._cssFullscreenStore.margin,J.style.width=J._cssFullscreenStore.width,J.style.height=J._cssFullscreenStore.height,J.style.transform=J._cssFullscreenStore.transform,J._cssFullscreenStore=null,J.parentElement.replaceWith(J)),this.updateCSSTransforms())},startFullscreenResizeObserver:function(G){var _=this;return env.A.isBrowser&&this.attr.resize&&this.attr.resize.enabled?(this.resizeObserver=new ResizeObserver(function(J){var Z,Q,ee=_.document;_._isResizing||(_._isResizing=!0,window.setTimeout(function(){try{Z=_._fullscreen_inner_id,(Q=ee.fullscreenElement!==void 0?ee.fullscreenElement:ee.webkitFullscreenElement!==void 0?ee.webkitFullscreenElement:ee.msFullscreenElement)!==null&&env.A.scaleJSXGraphDiv(Q.id,Z,ee,utils_type.A.evaluate(_.attr.fullscreen.scale))}catch{_.stopFullscreenResizeObserver(G)}finally{_._isResizing=!1}},_.attr.resize.throttle))}),this.resizeObserver.observe(G),this):this},stopFullscreenResizeObserver:function(G){return env.A.isBrowser&&this.attr.resize&&this.attr.resize.enabled?(utils_type.A.exists(this.resizeObserver)&&this.resizeObserver.unobserve(G),this):this},addLogEntry:function(G,_,J){var Z,Q,ee=this.userLog.length-1;return utils_type.A.exists(_.elementClass)&&(Q=_.id),utils_type.A.evaluate(this.attr.logging.enabled)&&(Z=new Date().getTime(),ee>=0&&this.userLog[ee].type===G&&this.userLog[ee].id===Q&&Z-this.userLog[ee].end<500?(this.userLog[ee].end=Z,this.userLog[ee].endpos=J):this.userLog.push({type:G,id:Q,start:Z,startpos:J,end:Z,endpos:J,bbox:this.getBoundingBox(),canvas:[this.canvasWidth,this.canvasHeight],zoom:[this.zoomX,this.zoomY]})),this},createRoulette:function(G,_,J,Z,Q,ee,te){var ne=this;return new function(){var ie,re=0,oe=0,se=0,ae=J,ce=numerics.A.root(function(Re){var Te=G.X(ae),Ee=G.Y(ae),De=_.X(Re),Le=_.Y(Re);return(Te-De)*(Te-De)+(Ee-Le)*(Ee-Le)},[0,2*Math.PI]),ue=0,de=0,me=ne.create("transform",[function(){return re}],{type:"rotate"}),fe=ne.create("transform",[function(){return re},function(){return G.X(ae)},function(){return G.Y(ae)}],{type:"rotate"}),_e=ne.create("transform",[function(){return oe},function(){return se}],{type:"translate"}),ye=function(Re,Te,Ee){var De=numerics.A.D(Re.X)(Te),Le=numerics.A.D(Re.Y)(Te),Ue=numerics.A.D(Re.X)(Ee),Ge=numerics.A.D(Re.Y)(Ee),Ye=numerics.A.D(Re.X)(.5*(Te+Ee)),ke=numerics.A.D(Re.Y)(.5*(Te+Ee)),Fe=math.A.hypot(De,Le),Ve=math.A.hypot(Ue,Ge);return(Fe+4*math.A.hypot(Ye,ke)+Ve)*(Ee-Te)/6},be=function(Re){return ie-ye(_,ce,Re)},Se=Math.PI/18,Ce=9*Se,Me=null;return this.rolling=function(){var Re,Te,Ee,De,Le;ie=ye(G,ae,ue=ae+Q*Z),de=numerics.A.root(be,ce),Re=new complex(G.X(ue),G.Y(ue)),Te=new complex(_.X(de),_.Y(de)),Ee=new complex(numerics.A.D(G.X)(ue),numerics.A.D(G.Y)(ue)),De=new complex(numerics.A.D(_.X)(de),numerics.A.D(_.Y)(de)),Le=complex.C.div(Ee,De),re=Math.atan2(Le.imaginary,Le.real),Le.div(complex.C.abs(Le)),Le.mult(Te),oe=Re.real-Le.real,se=Re.imaginary-Le.imaginary,re<-Se&&re>-Ce?(re=-Se,fe.applyOnce(te)):re>Se&&re<Ce?(re=Se,fe.applyOnce(te)):(me.applyOnce(te),_e.applyOnce(te),ae=ue,ce=de),ne.update()},this.start=function(){return ee>0&&(Me=window.setInterval(this.rolling,ee)),this},this.stop=function(){return window.clearInterval(Me),this},this}}});var base_board=jxg.A.Board;jxg.A.SVGRenderer=function(G,_){var J;for(this.type="svg",this.isIE=navigator.appVersion.indexOf("MSIE")!==-1||navigator.userAgent.match(/Trident\//),this.svgRoot=null,this.svgNamespace="http://www.w3.org/2000/svg",this.xlinkNamespace="http://www.w3.org/1999/xlink",this.container=G,this.container.style.MozUserSelect="none",this.container.style.userSelect="none",this.container.style.overflow="hidden",this.container.style.position===""&&(this.container.style.position="relative"),this.svgRoot=this.container.ownerDocument.createElementNS(this.svgNamespace,"svg"),this.svgRoot.style.overflow="hidden",this.svgRoot.style.display="block",this.resize(_.width,_.height),this.container.appendChild(this.svgRoot),this.defs=this.container.ownerDocument.createElementNS(this.svgNamespace,"defs"),this.svgRoot.appendChild(this.defs),this.createShadowFilter=function(Z,Q,ee,te,ne,ie){var re,oe,se,ae,ce,ue=this.container.ownerDocument.createElementNS(this.svgNamespace,"filter");return ue.setAttributeNS(null,"id",Z),ue.setAttributeNS(null,"width","300%"),ue.setAttributeNS(null,"height","300%"),ue.setAttributeNS(null,"filterUnits","userSpaceOnUse"),(re=this.container.ownerDocument.createElementNS(this.svgNamespace,"feOffset")).setAttributeNS(null,"in","SourceGraphic"),re.setAttributeNS(null,"result","offOut"),re.setAttributeNS(null,"dx",ie[0]),re.setAttributeNS(null,"dy",ie[1]),ue.appendChild(re),(oe=this.container.ownerDocument.createElementNS(this.svgNamespace,"feColorMatrix")).setAttributeNS(null,"in","offOut"),oe.setAttributeNS(null,"result","colorOut"),oe.setAttributeNS(null,"type","matrix"),Q==="none"||!utils_type.A.isArray(Q)||Q.length<3?oe.setAttributeNS(null,"values","0.1 0 0 0 0  0 0.1 0 0 0  0 0 0.1 0 0  0 0 0 "+ee+" 0"):(Q[0]/=255,Q[1]/=255,Q[2]/=255,ce=te+" 0 0 0 "+Q[0]+"  0 "+te+" 0 0 "+Q[1]+"  0 0 "+te+" 0 "+Q[2]+"  0 0 0 "+ee+" 0",oe.setAttributeNS(null,"values",ce)),ue.appendChild(oe),(se=this.container.ownerDocument.createElementNS(this.svgNamespace,"feGaussianBlur")).setAttributeNS(null,"in","colorOut"),se.setAttributeNS(null,"result","blurOut"),se.setAttributeNS(null,"stdDeviation",ne),ue.appendChild(se),(ae=this.container.ownerDocument.createElementNS(this.svgNamespace,"feBlend")).setAttributeNS(null,"in","SourceGraphic"),ae.setAttributeNS(null,"in2","blurOut"),ae.setAttributeNS(null,"mode","normal"),ue.appendChild(ae),ue},this.uniqName=function(){return this.container.id+"_"+Array.prototype.slice.call(arguments).join("_")},this.toStr=function(){var Z=Array.prototype.slice.call(arguments).join("");return utils_type.A.exists(encodeURIComponent)&&(Z=encodeURIComponent(Z)),Z},this.toURL=function(){return"url(#"+this.toStr.apply(this,arguments)+")"},this.defs.appendChild(this.createShadowFilter(this.uniqName("f1"),"none",1,.1,3,[5,5])),this.layer=[],J=0;J<src_options.A.layer.numlayers;J++)this.layer[J]=this.container.ownerDocument.createElementNS(this.svgNamespace,"g"),this.svgRoot.appendChild(this.layer[J]);try{this.foreignObjLayer=this.container.ownerDocument.createElementNS(this.svgNamespace,"foreignObject"),this.foreignObjLayer.setAttribute("display","none"),this.foreignObjLayer.setAttribute("x",0),this.foreignObjLayer.setAttribute("y",0),this.foreignObjLayer.setAttribute("width","100%"),this.foreignObjLayer.setAttribute("height","100%"),this.foreignObjLayer.setAttribute("id",this.uniqName("foreignObj")),this.svgRoot.appendChild(this.foreignObjLayer),this.supportsForeignObject=!0}catch{this.supportsForeignObject=!1}},jxg.A.SVGRenderer.prototype=new renderer_abstract,jxg.A.extend(jxg.A.SVGRenderer.prototype,{_createArrowHead:function(G,_,J){var Z,Q,ee,te,ne=G.id+"Triangle";return utils_type.A.exists(_)&&(ne+=_),utils_type.A.exists(J)&&(ne+=J),(Z=this.createPrim("marker",ne)).setAttributeNS(null,"fill","context-stroke"),Z.setAttributeNS(null,"stroke","context-stroke"),Z.setAttributeNS(null,"stroke-width",0),Z.setAttributeNS(null,"orient","auto"),Z.setAttributeNS(null,"markerUnits","strokeWidth"),Q=this.container.ownerDocument.createElementNS(this.svgNamespace,"path"),te=5,_==="Start"?(ee=0,J===2?Q.setAttributeNS(null,"d","M 10,0 L 0,5 L 10,10 L 5,5 z"):J===3?Q.setAttributeNS(null,"d","M 0,0 L 3.33,0 L 3.33,10 L 0,10 z"):J===4?(te=3.31,Q.setAttributeNS(null,"d","M 0.00,3.31 C 3.53,3.84 7.13,4.50 10.00,6.63 C 9.33,5.52 8.67,4.42 8.00,3.31 C 8.67,2.21 9.33,1.10 10.00,0.00 C 7.13,2.13 3.53,2.79 0.00,3.31")):J===5?(te=3.28,Q.setAttributeNS(null,"d","M 0.00,3.28 C 3.39,4.19 6.81,5.07 10.00,6.55 C 9.38,5.56 9.00,4.44 9.00,3.28 C 9.00,2.11 9.38,0.99 10.00,0.00 C 6.81,1.49 3.39,2.37 0.00,3.28")):J===6?(te=2.84,Q.setAttributeNS(null,"d","M 0.00,2.84 C 3.39,3.59 6.79,4.35 10.00,5.68 C 9.67,4.73 9.33,3.78 9.00,2.84 C 9.33,1.89 9.67,0.95 10.00,0.00 C 6.79,1.33 3.39,2.09 0.00,2.84")):J===7?(te=5.2,Q.setAttributeNS(null,"d","M 0.00,5.20 C 4.04,5.20 7.99,6.92 10.00,10.39 M 10.00,0.00 C 7.99,3.47 4.04,5.20 0.00,5.20")):Q.setAttributeNS(null,"d","M 10,0 L 0,5 L 10,10 z"),G.elementClass===constants.A.OBJECT_CLASS_LINE&&(ee=J===2?4.9:J===3?3.3:J===4||J===5||J===6?6.66:J===7?0:10)):(ee=10,J===2?Q.setAttributeNS(null,"d","M 0,0 L 10,5 L 0,10 L 5,5 z"):J===3?(ee=3.3,Q.setAttributeNS(null,"d","M 0,0 L 3.33,0 L 3.33,10 L 0,10 z")):J===4?(te=3.31,Q.setAttributeNS(null,"d","M 10.00,3.31 C 6.47,3.84 2.87,4.50 0.00,6.63 C 0.67,5.52 1.33,4.42 2.00,3.31 C 1.33,2.21 0.67,1.10 0.00,0.00 C 2.87,2.13 6.47,2.79 10.00,3.31")):J===5?(te=3.28,Q.setAttributeNS(null,"d","M 10.00,3.28 C 6.61,4.19 3.19,5.07 0.00,6.55 C 0.62,5.56 1.00,4.44 1.00,3.28 C 1.00,2.11 0.62,0.99 0.00,0.00 C 3.19,1.49 6.61,2.37 10.00,3.28")):J===6?(te=2.84,Q.setAttributeNS(null,"d","M 10.00,2.84 C 6.61,3.59 3.21,4.35 0.00,5.68 C 0.33,4.73 0.67,3.78 1.00,2.84 C 0.67,1.89 0.33,0.95 0.00,0.00 C 3.21,1.33 6.61,2.09 10.00,2.84")):J===7?(te=5.2,Q.setAttributeNS(null,"d","M 10.00,5.20 C 5.96,5.20 2.01,6.92 0.00,10.39 M 0.00,0.00 C 2.01,3.47 5.96,5.20 10.00,5.20")):Q.setAttributeNS(null,"d","M 0,0 L 10,5 L 0,10 z"),G.elementClass===constants.A.OBJECT_CLASS_LINE&&(ee=J===2?5.1:J===3?.02:J===4||J===5||J===6?3.33:J===7?10:.05)),J===7&&(Z.setAttributeNS(null,"fill","none"),Z.setAttributeNS(null,"stroke-width",1)),Z.setAttributeNS(null,"refY",te),Z.setAttributeNS(null,"refX",ee),Z.appendChild(Q),Z},_setArrowColor:function(G,_,J,Z,Q){G&&(utils_type.A.isString(_)&&(Q!==7?this._setAttribute(function(){G.setAttributeNS(null,"fill","context-stroke")},Z.visPropOld.fillcolor):this._setAttribute(function(){G.setAttributeNS(null,"fill","none"),G.setAttributeNS(null,"stroke","context-stroke")},Z.visPropOld.fillcolor)),Z.rendNode.parentNode.insertBefore(Z.rendNode,Z.rendNode))},_setArrowWidth:function(G,_,J,Z){var Q,ee;G&&(ee=(Q=_)*Z,G.setAttributeNS(null,"viewBox","0 0 "+10*Q+" "+10*Q),G.setAttributeNS(null,"markerHeight",ee),G.setAttributeNS(null,"markerWidth",ee),G.setAttributeNS(null,"display","inherit"),J.parentNode.insertBefore(J,J))},updateTicks:function(G){var _,J,Z,Q,ee,te,ne,ie,re="",oe=G.ticks.length,se=!0;for(_=0;_<oe;_++){for(ee=(Z=G.ticks[_])[0],te=Z[1],ne=ee.length,ie=" M "+ee[0]+" "+te[0],utils_type.A.isNumber(ee[0])||(se=!1),J=1;se&&J<ne;++J)utils_type.A.isNumber(ee[J])?ie+=" L "+ee[J]+" "+te[J]:se=!1;se&&(re+=ie)}Q=G.rendNode,utils_type.A.exists(Q)||(Q=this.createPrim("path",G.id),this.appendChildPrim(Q,G.evalVisProp("layer")),G.rendNode=Q),Q.setAttributeNS(null,"stroke",G.evalVisProp("strokecolor")),Q.setAttributeNS(null,"fill","none"),Q.setAttributeNS(null,"stroke-opacity",G.evalVisProp("strokeopacity")),Q.setAttributeNS(null,"stroke-width",G.evalVisProp("strokewidth")),this.updatePathPrim(Q,re,G.board)},displayCopyright:function(G,_){var J,Z,Q=4+1.8*_,ee=6+_;(J=this.createPrim("text","licenseText")).setAttributeNS(null,"x",Q+"px"),J.setAttributeNS(null,"y",ee+"px"),J.setAttributeNS(null,"style","font-family:Arial,Helvetica,sans-serif; font-size:"+_+"px; opacity:0.2;"),J.setAttributeNS(null,"aria-hidden","true"),Z=this.container.ownerDocument.createTextNode(G),J.appendChild(Z),this.appendChildPrim(J,0)},displayLogo:function(G,_){var J,Z=1.5*_;(J=this.createPrim("image","licenseLogo")).setAttributeNS(null,"x","5px"),J.setAttributeNS(null,"y","5px"),J.setAttributeNS(null,"width",Z+"px"),J.setAttributeNS(null,"height",Z+"px"),J.setAttributeNS(null,"preserveAspectRatio","none"),J.setAttributeNS(null,"style","opacity:0.2;"),J.setAttributeNS(null,"aria-hidden","true"),J.setAttributeNS(this.xlinkNamespace,"xlink:href",G),this.appendChildPrim(J,0)},drawInternalText:function(G){var _=this.createPrim("text",G.id);return _.style.whiteSpace="nowrap",G.rendNodeText=this.container.ownerDocument.createTextNode(""),_.appendChild(G.rendNodeText),this.appendChildPrim(_,G.evalVisProp("layer")),_},updateInternalText:function(G){var _,J,Z=G.plaintext,Q=G.getAnchorX(),ee=G.getAnchorY();J=G.evalVisProp("cssclass"),G.rendNode.getAttributeNS(null,"class")!==J&&(G.rendNode.setAttributeNS(null,"class",J),G.needsSizeUpdate=!0),isNaN(G.coords.scrCoords[1]+G.coords.scrCoords[2])||(_=G.coords.scrCoords[1],G.visPropOld.left!==Q+_&&(G.rendNode.setAttributeNS(null,"x",_+"px"),Q==="left"?G.rendNode.setAttributeNS(null,"text-anchor","start"):Q==="right"?G.rendNode.setAttributeNS(null,"text-anchor","end"):Q==="middle"&&G.rendNode.setAttributeNS(null,"text-anchor","middle"),G.visPropOld.left=Q+_),_=G.coords.scrCoords[2],G.visPropOld.top!==ee+_&&(G.rendNode.setAttributeNS(null,"y",_+.5*this.vOffsetText+"px"),ee==="bottom"?(G.rendNode.setAttributeNS(null,"dy","0"),G.rendNode.setAttributeNS(null,"dominant-baseline","auto")):ee==="top"?(G.rendNode.setAttributeNS(null,"dy","1.6ex"),G.rendNode.setAttributeNS(null,"dominant-baseline","auto")):ee==="middle"&&(G.rendNode.setAttributeNS(null,"dy","0.6ex"),G.rendNode.setAttributeNS(null,"dominant-baseline","auto")),G.visPropOld.top=ee+_)),G.htmlStr!==Z&&(G.rendNodeText.data=Z,G.htmlStr=Z),this.transformRect(G,G.transformations)},updateInternalTextStyle:function(G,_,J,Z){this.setObjectFillColor(G,_,J)},drawImage:function(G){var _=this.createPrim("image",G.id);_.setAttributeNS(null,"preserveAspectRatio","none"),this.appendChildPrim(_,G.evalVisProp("layer")),G.rendNode=_,this.updateImage(G)},transformRect:function(G,_){var J,Z,Q,ee,te,ne="";if(_.length>0&&(Q=G.rendNode,(J=[(Z=this.joinTransforms(G,_))[1][1],Z[2][1],Z[1][2],Z[2][2],Z[1][0],Z[2][0]].join(",")).indexOf("NaN")===-1))if(ne+=" matrix("+J+") ",G.elementClass===constants.A.OBJECT_CLASS_TEXT&&G.visProp.display==="html"){switch(Q.style.transform=ne,ee=-G.coords.scrCoords[1],te=-G.coords.scrCoords[2],G.evalVisProp("anchorx")){case"right":ee+=G.size[0];break;case"middle":ee+=.5*G.size[0]}switch(G.evalVisProp("anchory")){case"bottom":te+=G.size[1];break;case"middle":te+=.5*G.size[1]}Q.style["transform-origin"]=ee+"px "+te+"px"}else Q.setAttributeNS(null,"transform",ne)},updateImageURL:function(G){var _=G.eval(G.url);return G._src!==_&&(G.imgIsLoaded=!1,G.rendNode.setAttributeNS(this.xlinkNamespace,"xlink:href",_),G._src=_,!0)},updateImageStyle:function(G,_){var J=G.evalVisProp(_?"highlightcssclass":"cssclass");G.rendNode.setAttributeNS(null,"class",J)},drawForeignObject:function(G){G.rendNode=this.appendChildPrim(this.createPrim("foreignObject",G.id),G.evalVisProp("layer")),this.appendNodesToElement(G,"foreignObject"),this.updateForeignObject(G)},updateForeignObject:function(G){G._useUserSize?G.rendNode.style.overflow="hidden":G.rendNode.style.overflow="visible",this.updateRectPrim(G.rendNode,G.coords.scrCoords[1],G.coords.scrCoords[2]-G.size[1],G.size[0],G.size[1]),G.evalVisProp("evaluateOnlyOnce")===!0&&G.renderedOnce||(G.rendNode.innerHTML=G.content,G.renderedOnce=!0),this._updateVisual(G,{stroke:!0,dash:!0},!0)},appendChildPrim:function(G,_){return utils_type.A.exists(_)?_>=src_options.A.layer.numlayers&&(_=src_options.A.layer.numlayers-1):_=0,this.layer[_].appendChild(G),G},createPrim:function(G,_){var J=this.container.ownerDocument.createElementNS(this.svgNamespace,G);return J.setAttributeNS(null,"id",this.uniqName(_)),J.style.position="absolute",G==="path"&&(J.setAttributeNS(null,"stroke-linecap","round"),J.setAttributeNS(null,"stroke-linejoin","round"),J.setAttributeNS(null,"fill-rule","evenodd")),J},remove:function(G){utils_type.A.exists(G)&&utils_type.A.exists(G.parentNode)&&G.parentNode.removeChild(G)},setLayer:function(G,_){utils_type.A.exists(_)?_>=src_options.A.layer.numlayers&&(_=src_options.A.layer.numlayers-1):_=0,this.layer[_].appendChild(G.rendNode)},makeArrows:function(G,_){var J,Z,Q=_.evFirst,ee=_.evLast;this.isIE&&G.visPropCalc.visible&&(Q||ee)?G.rendNode.parentNode.insertBefore(G.rendNode,G.rendNode):(J=G.rendNodeTriangleStart,Q?(Z=this.toStr(this.container.id,"_",G.id,"TriangleStart",_.typeFirst),utils_type.A.exists(J)&&J.id===Z||((J=this.container.ownerDocument.getElementById(Z))===null&&(J=this._createArrowHead(G,"Start",_.typeFirst),this.defs.appendChild(J)),G.rendNodeTriangleStart=J,G.rendNode.setAttributeNS(null,"marker-start",this.toURL(Z)))):(utils_type.A.exists(J)&&(this.remove(J),G.rendNodeTriangleStart=null),G.rendNode.removeAttributeNS(null,"marker-start")),J=G.rendNodeTriangleEnd,ee?(Z=this.toStr(this.container.id,"_",G.id,"TriangleEnd",_.typeLast),utils_type.A.exists(J)&&J.id===Z||((J=this.container.ownerDocument.getElementById(Z))===null&&(J=this._createArrowHead(G,"End",_.typeLast),this.defs.appendChild(J)),G.rendNodeTriangleEnd=J,G.rendNode.setAttributeNS(null,"marker-end",this.toURL(Z)))):(utils_type.A.exists(J)&&(this.remove(J),G.rendNodeTriangleEnd=null),G.rendNode.removeAttributeNS(null,"marker-end")))},updateEllipsePrim:function(G,_,J,Z,Q){var ee;ee=2e5,_=Math.abs(_)<ee?_:ee*_/Math.abs(_),J=Math.abs(J)<ee?J:ee*J/Math.abs(J),Z=Math.abs(Z)<ee?Z:ee*Z/Math.abs(Z),Q=Math.abs(Q)<ee?Q:ee*Q/Math.abs(Q),G.setAttributeNS(null,"cx",_),G.setAttributeNS(null,"cy",J),G.setAttributeNS(null,"rx",Math.abs(Z)),G.setAttributeNS(null,"ry",Math.abs(Q))},updateLinePrim:function(G,_,J,Z,Q){var ee;ee=2e5,isNaN(_+J+Z+Q)||(_=Math.abs(_)<ee?_:ee*_/Math.abs(_),J=Math.abs(J)<ee?J:ee*J/Math.abs(J),Z=Math.abs(Z)<ee?Z:ee*Z/Math.abs(Z),Q=Math.abs(Q)<ee?Q:ee*Q/Math.abs(Q),G.setAttributeNS(null,"x1",_),G.setAttributeNS(null,"y1",J),G.setAttributeNS(null,"x2",Z),G.setAttributeNS(null,"y2",Q))},updatePathPrim:function(G,_){_===""&&(_="M 0 0"),G.setAttributeNS(null,"d",_)},updatePathStringPoint:function(G,_,J){var Z="",Q=G.coords.scrCoords,ee=_*Math.sqrt(3)*.5,te=.5*_;return J==="x"?Z=" M "+(Q[1]-_)+" "+(Q[2]-_)+" L "+(Q[1]+_)+" "+(Q[2]+_)+" M "+(Q[1]+_)+" "+(Q[2]-_)+" L "+(Q[1]-_)+" "+(Q[2]+_):J==="+"?Z=" M "+(Q[1]-_)+" "+Q[2]+" L "+(Q[1]+_)+" "+Q[2]+" M "+Q[1]+" "+(Q[2]-_)+" L "+Q[1]+" "+(Q[2]+_):J==="|"?Z=" M "+Q[1]+" "+(Q[2]-_)+" L "+Q[1]+" "+(Q[2]+_):J==="-"?Z=" M "+(Q[1]-_)+" "+Q[2]+" L "+(Q[1]+_)+" "+Q[2]:J==="<>"||J==="<<>>"?(J==="<<>>"&&(_*=1.41),Z=" M "+(Q[1]-_)+" "+Q[2]+" L "+Q[1]+" "+(Q[2]+_)+" L "+(Q[1]+_)+" "+Q[2]+" L "+Q[1]+" "+(Q[2]-_)+" Z "):J==="^"?Z=" M "+Q[1]+" "+(Q[2]-_)+" L "+(Q[1]-ee)+" "+(Q[2]+te)+" L "+(Q[1]+ee)+" "+(Q[2]+te)+" Z ":J==="v"?Z=" M "+Q[1]+" "+(Q[2]+_)+" L "+(Q[1]-ee)+" "+(Q[2]-te)+" L "+(Q[1]+ee)+" "+(Q[2]-te)+" Z ":J===">"?Z=" M "+(Q[1]+_)+" "+Q[2]+" L "+(Q[1]-te)+" "+(Q[2]-ee)+" L "+(Q[1]-te)+" "+(Q[2]+ee)+" Z ":J==="<"&&(Z=" M "+(Q[1]-_)+" "+Q[2]+" L "+(Q[1]+te)+" "+(Q[2]-ee)+" L "+(Q[1]+te)+" "+(Q[2]+ee)+" Z "),Z},updatePathStringPrim:function(G){var _,J,Z,Q=" M ",ee=Q,te=5e3,ne="";if(G.numberPoints<=0)return"";if(Z=Math.min(G.points.length,G.numberPoints),G.bezierDegree===1)for(_=0;_<Z;_++)J=G.points[_].scrCoords,isNaN(J[1])||isNaN(J[2])?ee=Q:(J[1]=Math.max(Math.min(J[1],te),-5e3),J[2]=Math.max(Math.min(J[2],te),-5e3),ne+=ee+J[1]+" "+J[2],ee=" L ");else if(G.bezierDegree===3)for(_=0;_<Z;)J=G.points[_].scrCoords,isNaN(J[1])||isNaN(J[2])?ee=Q:(ne+=ee+J[1]+" "+J[2],ee===" C "&&(_+=1,ne+=" "+(J=G.points[_].scrCoords)[1]+" "+J[2],_+=1,ne+=" "+(J=G.points[_].scrCoords)[1]+" "+J[2]),ee=" C "),_+=1;return ne},updatePathStringBezierPrim:function(G){var _,J,Z,Q,ee,te,ne,ie=" M ",re=ie,oe=5e3,se="",ae=G.evalVisProp("strokewidth"),ce=G.evalVisProp("curvetype")!=="plot";if(G.numberPoints<=0)return"";for(ce&&G.board.options.curve.RDPsmoothing&&(G.points=numerics.A.RamerDouglasPeucker(G.points,.5)),ne=Math.min(G.points.length,G.numberPoints),J=1;J<3;J++)for(re=ie,_=0;_<ne;_++)Q=G.points[_].scrCoords,isNaN(Q[1])||isNaN(Q[2])?re=ie:(Q[1]=Math.max(Math.min(Q[1],oe),-5e3),Q[2]=Math.max(Math.min(Q[2],oe),-5e3),re===ie?se+=re+Q[1]+" "+Q[2]:(Z=2*J,se+=[re,ee+.333*(Q[1]-ee)+ae*(Z*Math.random()-J)," ",te+.333*(Q[2]-te)+ae*(Z*Math.random()-J)," ",ee+.666*(Q[1]-ee)+ae*(Z*Math.random()-J)," ",te+.666*(Q[2]-te)+ae*(Z*Math.random()-J)," ",Q[1]," ",Q[2]].join("")),re=" C ",ee=Q[1],te=Q[2]);return se},updatePolygonPrim:function(G,_){var J,Z,Q="",ee=_.vertices.length;for(G.setAttributeNS(null,"stroke","none"),G.setAttributeNS(null,"fill-rule","evenodd"),_.elType==="polygonalchain"&&ee++,J=0;J<ee-1;J++){if(!_.vertices[J].isReal)return void G.setAttributeNS(null,"points","");Q=Q+(Z=_.vertices[J].coords.scrCoords)[1]+","+Z[2],J<ee-2&&(Q+=" ")}Q.indexOf("NaN")===-1&&G.setAttributeNS(null,"points",Q)},updateRectPrim:function(G,_,J,Z,Q){G.setAttributeNS(null,"x",_),G.setAttributeNS(null,"y",J),G.setAttributeNS(null,"width",Z),G.setAttributeNS(null,"height",Q)},_setAttribute:function(G,_){_===""?G():window.setTimeout(G,1)},display:function(G,_){var J;G&&G.rendNode&&(G.visPropOld.visible=_,J=G.rendNode,_?(J.setAttributeNS(null,"display","inline"),J.style.visibility="inherit"):(J.setAttributeNS(null,"display","none"),J.style.visibility="hidden"))},hide:function(G){jxg.A.deprecated("Board.renderer.hide()","Board.renderer.display()"),this.display(G,!1)},setARIA:function(G){var _,J,Z;for(_ in G.visProp.aria)G.visProp.aria.hasOwnProperty(_)&&_!=="enabled"&&(J="aria."+_,Z=G.evalVisProp("aria."+_),G.visPropOld[J]!==Z&&(this.setPropertyPrim(G.rendNode,"aria-"+_,Z),G.visPropOld[J]=Z))},setBuffering:function(G,_){G.rendNode.setAttribute("buffered-rendering",_)},setCssClass(G,_){G.visPropOld.cssclass!==_&&(this.setPropertyPrim(G.rendNode,"class",_),G.visPropOld.cssclass=_)},setDashStyle:function(G){var _=G.evalVisProp("dash"),J=G.evalVisProp("dashscale")?.5*G.evalVisProp("strokewidth"):1,Z=G.rendNode;_>0?Z.setAttributeNS(null,"stroke-dasharray",this.dashArray[_-1].map(function(Q){return Q*J}).join(",")):Z.hasAttributeNS(null,"stroke-dasharray")&&Z.removeAttributeNS(null,"stroke-dasharray")},setGradient:function(G){var _,J,Z,Q=G.rendNode,ee=G.evalVisProp("gradient");ee==="linear"||ee==="radial"?(_=this.createPrim(ee+"Gradient",G.id+"_gradient"),J=this.createPrim("stop",G.id+"_gradient1"),Z=this.createPrim("stop",G.id+"_gradient2"),_.appendChild(J),_.appendChild(Z),this.defs.appendChild(_),Q.setAttributeNS(null,"style","fill:"+this.toURL(this.container.id+"_"+G.id+"_gradient")),G.gradNode1=J,G.gradNode2=Z,G.gradNode=_):Q.removeAttributeNS(null,"style")},setLineCap:function(G){var _=G.evalVisProp("linecap");_!==void 0&&_!==""&&G.visPropOld.linecap!==_&&utils_type.A.exists(G.rendNode)&&(this.setPropertyPrim(G.rendNode,"stroke-linecap",_),G.visPropOld.linecap=_)},setObjectFillColor:function(G,_,J,Z){var Q,ee,te,ne,ie=_,re=J,oe=G.evalVisProp("gradient");re=re>0?re:0,G.visPropOld.fillcolor===ie&&G.visPropOld.fillopacity===re&&oe===null||(utils_type.A.exists(ie)&&ie!==!1&&(ie.length!==9?(ee=ie,ne=re):(te=utils_color.A.rgba2rgbo(ie),ee=te[0],ne=re*te[1]),Q=Z===void 0?G.rendNode:Z,ee!=="none"&&ee!==""&&ee!==!1&&this._setAttribute(function(){Q.setAttributeNS(null,"fill",ee)},G.visPropOld.fillcolor),G.type===jxg.A.OBJECT_TYPE_IMAGE?this._setAttribute(function(){Q.setAttributeNS(null,"opacity",ne)},G.visPropOld.fillopacity):(ee==="none"?(ne=0,Q.setAttributeNS(null,"pointer-events","visibleStroke")):Q.setAttributeNS(null,"pointer-events","visiblePainted"),this._setAttribute(function(){Q.setAttributeNS(null,"fill-opacity",ne)},G.visPropOld.fillopacity)),oe!=="linear"&&oe!=="radial"||this.updateGradient(G)),G.visPropOld.fillcolor=ie,G.visPropOld.fillopacity=re)},setObjectStrokeColor:function(G,_,J){var Z,Q,ee,te,ne=_,ie=J;ie=ie>0?ie:0,G.visPropOld.strokecolor===ne&&G.visPropOld.strokeopacity===ie||(utils_type.A.exists(ne)&&ne!==!1&&(ne.length!==9?(Z=ne,ee=ie):(Q=utils_color.A.rgba2rgbo(ne),Z=Q[0],ee=ie*Q[1]),te=G.rendNode,G.elementClass===constants.A.OBJECT_CLASS_TEXT?G.evalVisProp("display")==="html"?this._setAttribute(function(){te.style.color=Z,te.style.opacity=ee},G.visPropOld.strokecolor):this._setAttribute(function(){te.setAttributeNS(null,"fill",Z),te.setAttributeNS(null,"fill-opacity",ee)},G.visPropOld.strokecolor):this._setAttribute(function(){te.setAttributeNS(null,"stroke",Z),te.setAttributeNS(null,"stroke-opacity",ee)},G.visPropOld.strokecolor),G.elementClass!==constants.A.OBJECT_CLASS_CURVE&&G.elementClass!==constants.A.OBJECT_CLASS_LINE||(G.evalVisProp("firstarrow")&&this._setArrowColor(G.rendNodeTriangleStart,Z,ee,G,G.visPropCalc.typeFirst),G.evalVisProp("lastarrow")&&this._setArrowColor(G.rendNodeTriangleEnd,Z,ee,G,G.visPropCalc.typeLast))),G.visPropOld.strokecolor=ne,G.visPropOld.strokeopacity=ie)},setObjectStrokeWidth:function(G,_){var J,Z=_;isNaN(Z)||G.visPropOld.strokewidth===Z||(J=G.rendNode,this.setPropertyPrim(J,"stroked","true"),utils_type.A.exists(Z)&&this.setPropertyPrim(J,"stroke-width",Z+"px"),G.visPropOld.strokewidth=Z)},setObjectTransition:function(G,_){var J,Z,Q,ee=[],te=0,ne=["rendNode","rendNodeTriangleStart","rendNodeTriangleEnd"];if(_===void 0&&(_=G.evalVisProp("transitionduration")),J=G.evalVisProp("transitionproperties"),_!==G.visPropOld.transitionduration||J!==G.visPropOld.transitionproperties){for(utils_type.A.exists(J)&&(te=J.length),Q=0;Q<te;Q++)ee.push(J[Q]+" "+_+"ms");for(Z=ee.join(", "),te=ne.length,Q=0;Q<te;++Q)G[ne[Q]]&&(G[ne[Q]].style.transition=Z);G.visPropOld.transitionduration=_,G.visPropOld.transitionproperties=J}},setShadow:function(G){var _,J,Z,Q,ee,te,ne,ie,re=G.evalVisProp("shadow"),oe=!0,se=!1;(_=JSON.stringify(re))!==G.visPropOld.shadow&&(typeof re=="boolean"?(oe=!0,se=re,J="none",Z=3,Q=.1,ee=[5,5],te=1):G.evalVisProp("shadow.enabled")?(oe=!1,se=!0,J=jxg.A.rgbParser(G.evalVisProp("shadow.color")),Z=G.evalVisProp("shadow.blur"),Q=G.evalVisProp("shadow.blend"),ee=G.evalVisProp("shadow.offset"),te=G.evalVisProp("shadow.opacity")):se=!1,utils_type.A.exists(G.rendNode)&&(se?oe?G.rendNode.setAttributeNS(null,"filter",this.toURL(this.container.id+"_f1")):((ie=this.container.ownerDocument.getElementById(ne))&&this.defs.removeChild(ie),ne=G.rendNode.id+"_f1",this.defs.appendChild(this.createShadowFilter(ne,J,te,Q,Z,ee)),G.rendNode.setAttributeNS(null,"filter",this.toURL(ne))):G.rendNode.removeAttributeNS(null,"filter")),G.visPropOld.shadow=_)},setTabindex:function(G){var _;G.board.attr.keyboard.enabled&&utils_type.A.exists(G.rendNode)&&(_=G.evalVisProp("tabindex"),G.visPropCalc.visible||(_=null),_!==G.visPropOld.tabindex&&(G.rendNode.setAttribute("tabindex",_),G.visPropOld.tabindex=_))},setPropertyPrim:function(G,_,J){_!=="stroked"&&G.setAttributeNS(null,_,J)},show:function(G){jxg.A.deprecated("Board.renderer.show()","Board.renderer.display()"),this.display(G,!0)},updateGradient:function(G){var _,J,Z=G.gradNode1,Q=G.gradNode2,ee=G.evalVisProp("gradient");utils_type.A.exists(Z)&&utils_type.A.exists(Q)&&(J=(J=G.evalVisProp("fillopacity"))>0?J:0,_=G.evalVisProp("fillcolor"),Z.setAttributeNS(null,"style","stop-color:"+_+";stop-opacity:"+J),Q.setAttributeNS(null,"style","stop-color:"+G.evalVisProp("gradientsecondcolor")+";stop-opacity:"+G.evalVisProp("gradientsecondopacity")),Z.setAttributeNS(null,"offset",100*G.evalVisProp("gradientstartoffset")+"%"),Q.setAttributeNS(null,"offset",100*G.evalVisProp("gradientendoffset")+"%"),ee==="linear"?this.updateGradientAngle(G.gradNode,G.evalVisProp("gradientangle")):ee==="radial"&&this.updateGradientCircle(G.gradNode,G.evalVisProp("gradientcx"),G.evalVisProp("gradientcy"),G.evalVisProp("gradientr"),G.evalVisProp("gradientfx"),G.evalVisProp("gradientfy"),G.evalVisProp("gradientfr")))},updateGradientAngle:function(G,_){var J=1,Z=Math.cos(_),Q=Math.sin(_);Math.abs(Z)>Math.abs(Q)?J/=Math.abs(Z):J/=Math.abs(Q),Z>=0?(G.setAttributeNS(null,"x1",0),G.setAttributeNS(null,"x2",Z*J)):(G.setAttributeNS(null,"x1",-Z*J),G.setAttributeNS(null,"x2",0)),Q>=0?(G.setAttributeNS(null,"y1",0),G.setAttributeNS(null,"y2",Q*J)):(G.setAttributeNS(null,"y1",-Q*J),G.setAttributeNS(null,"y2",0))},updateGradientCircle:function(G,_,J,Z,Q,ee,te){G.setAttributeNS(null,"cx",100*_+"%"),G.setAttributeNS(null,"cy",100*J+"%"),G.setAttributeNS(null,"r",100*Z+"%"),G.setAttributeNS(null,"fx",100*Q+"%"),G.setAttributeNS(null,"fy",100*ee+"%"),G.setAttributeNS(null,"fr",100*te+"%")},suspendRedraw:function(){this.suspendHandle=this.svgRoot.suspendRedraw(1e4)},unsuspendRedraw:function(){this.svgRoot.unsuspendRedraw(this.suspendHandle)},resize:function(G,_){this.svgRoot.setAttribute("width",parseFloat(G)),this.svgRoot.setAttribute("height",parseFloat(_))},createTouchpoints:function(G){var _,J,Z,Q;for(this.touchpoints=[],_=0;_<G;_++)J="touchpoint1_"+_,Q=this.createPrim("path",J),this.appendChildPrim(Q,19),Q.setAttributeNS(null,"d","M 0 0"),this.touchpoints.push(Q),this.setPropertyPrim(Q,"stroked","true"),this.setPropertyPrim(Q,"stroke-width","1px"),Q.setAttributeNS(null,"stroke","#000000"),Q.setAttributeNS(null,"stroke-opacity",1),Q.setAttributeNS(null,"display","none"),Z="touchpoint2_"+_,Q=this.createPrim("ellipse",Z),this.appendChildPrim(Q,19),this.updateEllipsePrim(Q,0,0,0,0),this.touchpoints.push(Q),this.setPropertyPrim(Q,"stroked","true"),this.setPropertyPrim(Q,"stroke-width","1px"),Q.setAttributeNS(null,"stroke","#000000"),Q.setAttributeNS(null,"fill","#ffffff"),Q.setAttributeNS(null,"stroke-opacity",1),Q.setAttributeNS(null,"fill-opacity",0),Q.setAttributeNS(null,"display","none")},showTouchpoint:function(G){this.touchpoints&&G>=0&&2*G<this.touchpoints.length&&(this.touchpoints[2*G].setAttributeNS(null,"display","inline"),this.touchpoints[2*G+1].setAttributeNS(null,"display","inline"))},hideTouchpoint:function(G){this.touchpoints&&G>=0&&2*G<this.touchpoints.length&&(this.touchpoints[2*G].setAttributeNS(null,"display","none"),this.touchpoints[2*G+1].setAttributeNS(null,"display","none"))},updateTouchpoint:function(G,_){var J,Z;this.touchpoints&&G>=0&&2*G<this.touchpoints.length&&(J=_[0],Z=_[1],this.touchpoints[2*G].setAttributeNS(null,"d","M "+(J-37)+" "+Z+" L "+(J+37)+" "+Z+" M "+J+" "+(Z-37)+" L "+J+" "+(Z+37)),this.updateEllipsePrim(this.touchpoints[2*G+1],_[0],_[1],25,25))},_getValuesOfDOMElements:function(G){var _=[];if(G.nodeType===1)for(G=G.firstChild;G;)G.id!==void 0&&G.value!==void 0&&_.push([G.id,G.value]),utils_type.A.concat(_,this._getValuesOfDOMElements(G)),G=G.nextSibling;return _},_getImgDataURL:function(G){var _,J,Z,Q,ee,te;if((J=(_=G.getElementsByTagName("image")).length)>0)for(Z=document.createElement("canvas"),te=0;te<J;te++){_[te].setAttribute("crossorigin","anonymous"),Q=Z.getContext("2d"),Z.width=_[te].getAttribute("width"),Z.height=_[te].getAttribute("height");try{Q.drawImage(_[te],0,0,Z.width,Z.height),ee=Z.toDataURL(),_[te].setAttribute("xlink:href",ee)}catch(ne){console.log("CORS problem! Image can not be used",ne)}}return!0},dumpToDataURI:function(G){var _,J,Z,Q=this.svgRoot,ee=window.btoa||base64.encode,te=[];if(this.container.hasChildNodes()&&utils_type.A.exists(this.foreignObjLayer))for(G||this.foreignObjLayer.setAttribute("display","inline");Q.nextSibling;)utils_type.A.concat(te,this._getValuesOfDOMElements(Q.nextSibling)),this.foreignObjLayer.appendChild(Q.nextSibling);if(this._getImgDataURL(Q),Q.setAttribute("xmlns","http://www.w3.org/2000/svg"),_=new XMLSerializer().serializeToString(Q),G!==!0)for(Z=te.length,J=0;J<Z;J++)_=_.replace('id="'+te[J][0]+'"','id="'+te[J][0]+'" value="'+te[J][1]+'"');if(this.isIE&&(_.match(/xmlns="http:\/\/www.w3.org\/2000\/svg"\s+xmlns="http:\/\/www.w3.org\/2000\/svg"/g)||[]).length>1&&(_=_.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"\s+xmlns="http:\/\/www.w3.org\/2000\/svg"/g,"")),_=_.replace(/&nbsp;/g," "),utils_type.A.exists(this.foreignObjLayer)&&this.foreignObjLayer.hasChildNodes()){for(;this.foreignObjLayer.firstChild;)this.container.appendChild(this.foreignObjLayer.firstChild);this.foreignObjLayer.setAttribute("display","none")}return"data:image/svg+xml;base64,"+ee(unescape(encodeURIComponent(_)))},dumpToCanvas:function(G,_,J,Z){var Q,ee,te,ne;return(te=this.container.ownerDocument.getElementById(G)).width=te.width,ne=te.getContext("2d"),_!==void 0&&J!==void 0&&(te.style.width=parseFloat(_)+"px",te.style.height=parseFloat(J)+"px",te.setAttribute("width",parseFloat(_)),te.setAttribute("height",parseFloat(J))),ee=new Image,Q=this.dumpToDataURI(Z),ee.src=Q,"Promise"in window?new Promise(function(ie,re){try{ee.onload=function(){ne.drawImage(ee,0,0,_,J),ie()}}catch(oe){re(oe)}}):(ee.onload=function(){window.setTimeout(function(){try{ne.drawImage(ee,0,0,_,J)}catch{console.log("screenshots not longer supported on IE")}},200)},this)},screenshot:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue,de=this.container.ownerDocument,me=this.container.parentNode,fe=G.attr.screenshot,_e=!1;return this.type==="no"||(re=fe.scale*this.container.getBoundingClientRect().width,oe=fe.scale*this.container.getBoundingClientRect().height,_===void 0||_===""?(_e=!0,(te=new Image).style.width=re+"px",te.style.height=oe+"px"):(_e=!1,te=de.getElementById(_)),_e&&((Z=de.createElement("div")).style.cssText=fe.css,Z.style.width=re+"px",Z.style.height=oe+"px",Z.style.zIndex=this.container.style.zIndex+120,Z.style.position="absolute",Z.style.top=this.container.offsetTop+"px",Z.style.left=this.container.offsetLeft+"px"),Q=de.createElement("canvas"),ee=Math.random().toString(36).slice(2,7),Q.setAttribute("id",ee),Q.setAttribute("width",re),Q.setAttribute("height",oe),Q.style.width=re+"px",Q.style.height=re+"px",Q.style.display="none",me.appendChild(Q),_e&&(ne=de.createElement("span"),ie=de.createTextNode(""),ne.style.cssText=fe.cssButton,ne.appendChild(ie),ne.onclick=function(){Z.parentNode.removeChild(Z)},Z.appendChild(te),Z.appendChild(ne),me.insertBefore(Z,this.container.nextSibling)),se=de.getElementById(this.uniqName("navigationbar")),utils_type.A.exists(se)&&(ae=se.style.display,se.style.display="none",ce=this.removeToInsertLater(se)),ue=function(){te.src=Q.toDataURL("image/png"),me.removeChild(Q)},"Promise"in window?this.dumpToCanvas(ee,re,oe,J).then(ue):(this.dumpToCanvas(ee,re,oe,J),window.setTimeout(ue,200)),utils_type.A.exists(se)&&(se.style.display=ae,ce())),this}});var svg=jxg.A.SVGRenderer;jxg.A.VMLRenderer=function(G){this.type="vml",this.container=G,this.container.style.overflow="hidden",this.container.style.position===""&&(this.container.style.position="relative"),this.container.onselectstart=function(){return!1},this.resolution=10,utils_type.A.exists(jxg.A.vmlStylesheet)||(G.ownerDocument.namespaces.add("jxgvml","urn:schemas-microsoft-com:vml"),jxg.A.vmlStylesheet=this.container.ownerDocument.createStyleSheet(),jxg.A.vmlStylesheet.addRule(".jxgvml","behavior:url(#default#VML)"));try{G.ownerDocument.namespaces.jxgvml||G.ownerDocument.namespaces.add("jxgvml","urn:schemas-microsoft-com:vml"),this.createNode=function(_){return G.ownerDocument.createElement("<jxgvml:"+_+' class="jxgvml">')}}catch{this.createNode=function(J){return G.ownerDocument.createElement("<"+J+' xmlns="urn:schemas-microsoft.com:vml" class="jxgvml">')}}this.dashArray=["Solid","1 1","ShortDash","Dash","LongDash","ShortDashDot","LongDashDot"]},jxg.A.VMLRenderer.prototype=new renderer_abstract,jxg.A.extend(jxg.A.VMLRenderer.prototype,{_setAttr:function(G,_,J,Z){try{this.container.ownerDocument.documentMode===8?G[_]=J:G.setAttribute(_,J,Z)}catch{jxg.A.debug("_setAttr: "+_+" "+J+`<br>
`)}},updateTicks:function(G){var _,J,Z,Q,ee,te=this.resolution,ne=[];for(J=G.ticks.length,_=0;_<J;_++)Q=(Z=G.ticks[_])[0],ee=Z[1],utils_type.A.isNumber(Q[0])&&utils_type.A.isNumber(Q[1])&&ne.push(" m "+Math.round(te*Q[0])+", "+Math.round(te*ee[0])+" l "+Math.round(te*Q[1])+", "+Math.round(te*ee[1])+" ");utils_type.A.exists(G.rendNode)||(G.rendNode=this.createPrim("path",G.id),this.appendChildPrim(G.rendNode,G.evalVisProp("layer"))),this._setAttr(G.rendNode,"stroked","true"),this._setAttr(G.rendNode,"strokecolor",G.evalVisProp("strokecolor"),1),this._setAttr(G.rendNode,"strokeweight",G.evalVisProp("strokewidth")),this._setAttr(G.rendNodeStroke,"opacity",100*G.evalVisProp("strokeopacity")+"%"),this.updatePathPrim(G.rendNode,ne,G.board)},displayCopyright:function(G,_){var J,Z;(J=this.createNode("textbox")).style.position="absolute",this._setAttr(J,"id",this.container.id+"_licenseText"),J.style.left=20,J.style.top=2,J.style.fontSize=_,J.style.color="#356AA0",J.style.fontFamily="Arial,Helvetica,sans-serif",this._setAttr(J,"opacity","30%"),J.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand', enabled = false) progid:DXImageTransform.Microsoft.Alpha(opacity = 30, enabled = true)",Z=this.container.ownerDocument.createTextNode(G),J.appendChild(Z),this.appendChildPrim(J,0)},drawInternalText:function(G){var _;return(_=this.createNode("textbox")).style.position="absolute",G.rendNodeText=this.container.ownerDocument.createTextNode(""),_.appendChild(G.rendNodeText),this.appendChildPrim(_,9),_.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand', enabled = false) progid:DXImageTransform.Microsoft.Alpha(opacity = 100, enabled = false)",_},updateInternalText:function(G){var _,J,Z,Q,ee,te,ne=G.plaintext,ie=this.joinTransforms(G,G.transformations),re=[0,0],oe=G.rendNode,se=[],ae=G.getAnchorX(),ce=G.getAnchorY();if(!isNaN(G.coords.scrCoords[1]+G.coords.scrCoords[2])){for(ae==="right"?re[0]=1:ae==="middle"&&(re[0]=.5),ce==="bottom"?re[1]=1:ce==="middle"&&(re[1]=.5),se[0]=math.A.matVecMult(ie,[1,G.coords.scrCoords[1]-re[0]*G.size[0],G.coords.scrCoords[2]+(1-re[1])*G.size[1]+this.vOffsetText]),se[0][1]/=se[0][0],se[0][2]/=se[0][0],se[1]=math.A.matVecMult(ie,[1,G.coords.scrCoords[1]+(1-re[0])*G.size[0],G.coords.scrCoords[2]+(1-re[1])*G.size[1]+this.vOffsetText]),se[1][1]/=se[1][0],se[1][2]/=se[1][0],se[2]=math.A.matVecMult(ie,[1,G.coords.scrCoords[1]+(1-re[0])*G.size[0],G.coords.scrCoords[2]-re[1]*G.size[1]+this.vOffsetText]),se[2][1]/=se[2][0],se[2][2]/=se[2][0],se[3]=math.A.matVecMult(ie,[1,G.coords.scrCoords[1]-re[0]*G.size[0],G.coords.scrCoords[2]-re[1]*G.size[1]+this.vOffsetText]),se[3][1]/=se[3][0],se[3][2]/=se[3][0],J=se[0][1],Q=se[0][1],Z=se[0][2],ee=se[0][2],te=1;te<4;te++)J=Math.max(J,se[te][1]),Q=Math.min(Q,se[te][1]),Z=Math.max(Z,se[te][2]),ee=Math.min(ee,se[te][2]);_=re[0]===1?Math.floor(G.board.canvasWidth-J):Math.floor(Q),G.visPropOld.left!==ae+_&&(re[0]===1?(G.rendNode.style.right=_+"px",G.rendNode.style.left="auto"):(G.rendNode.style.left=_+"px",G.rendNode.style.right="auto"),G.visPropOld.left=ae+_),_=re[1]===1?Math.floor(G.board.canvasHeight-Z):Math.floor(ee),G.visPropOld.top!==ce+_&&(re[1]===1?(G.rendNode.style.bottom=_+"px",G.rendNode.style.top="auto"):(G.rendNode.style.top=_+"px",G.rendNode.style.bottom="auto"),G.visPropOld.top=ce+_)}G.htmlStr!==ne&&(G.rendNodeText.data=ne,G.htmlStr=ne),oe.filters.item(0).M11=ie[1][1],oe.filters.item(0).M12=ie[1][2],oe.filters.item(0).M21=ie[2][1],oe.filters.item(0).M22=ie[2][2],oe.filters.item(0).enabled=!0},drawImage:function(G){var _;(_=this.container.ownerDocument.createElement("img")).style.position="absolute",this._setAttr(_,"id",this.container.id+"_"+G.id),this.container.appendChild(_),this.appendChildPrim(_,G.evalVisProp("layer")),_.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand') progid:DXImageTransform.Microsoft.Alpha(opacity = 100, enabled = false)",G.rendNode=_,this.updateImage(G)},transformRect:function(G,_){var J,Z,Q,ee,te,ne,ie=G.rendNode,re=[];if(_.length>0){for(J=this.joinTransforms(G,_),re[0]=math.A.matVecMult(J,G.coords.scrCoords),re[0][1]/=re[0][0],re[0][2]/=re[0][0],re[1]=math.A.matVecMult(J,[1,G.coords.scrCoords[1]+G.size[0],G.coords.scrCoords[2]]),re[1][1]/=re[1][0],re[1][2]/=re[1][0],re[2]=math.A.matVecMult(J,[1,G.coords.scrCoords[1]+G.size[0],G.coords.scrCoords[2]-G.size[1]]),re[2][1]/=re[2][0],re[2][2]/=re[2][0],re[3]=math.A.matVecMult(J,[1,G.coords.scrCoords[1],G.coords.scrCoords[2]-G.size[1]]),re[3][1]/=re[3][0],re[3][2]/=re[3][0],Z=re[0][1],ee=re[0][1],Q=re[0][2],te=re[0][2],ne=1;ne<4;ne++)Z=Math.max(Z,re[ne][1]),ee=Math.min(ee,re[ne][1]),Q=Math.max(Q,re[ne][2]),te=Math.min(te,re[ne][2]);ie.style.left=Math.floor(ee)+"px",ie.style.top=Math.floor(te)+"px",ie.filters.item(0).M11=J[1][1],ie.filters.item(0).M12=J[1][2],ie.filters.item(0).M21=J[2][1],ie.filters.item(0).M22=J[2][2],ie.filters.item(0).enabled=!0}},updateImageURL:function(G){var _=G.eval(G.url);this._setAttr(G.rendNode,"src",_)},appendChildPrim:function(G,_){return utils_type.A.exists(_)||(_=0),G.style.zIndex=_,this.container.appendChild(G),G},appendNodesToElement:function(G,_){_!=="shape"&&_!=="path"&&_!=="polygon"||(G.rendNodePath=this.getElementById(G.id+"_path")),G.rendNodeFill=this.getElementById(G.id+"_fill"),G.rendNodeStroke=this.getElementById(G.id+"_stroke"),G.rendNodeShadow=this.getElementById(G.id+"_shadow"),G.rendNode=this.getElementById(G.id)},createPrim:function(G,_){var J,Z,Q=this.createNode("fill"),ee=this.createNode("stroke"),te=this.createNode("shadow");return this._setAttr(Q,"id",this.container.id+"_"+_+"_fill"),this._setAttr(ee,"id",this.container.id+"_"+_+"_stroke"),this._setAttr(te,"id",this.container.id+"_"+_+"_shadow"),G==="circle"||G==="ellipse"?((J=this.createNode("oval")).appendChild(Q),J.appendChild(ee),J.appendChild(te)):G==="polygon"||G==="path"||G==="shape"||G==="line"?((J=this.createNode("shape")).appendChild(Q),J.appendChild(ee),J.appendChild(te),Z=this.createNode("path"),this._setAttr(Z,"id",this.container.id+"_"+_+"_path"),J.appendChild(Z)):((J=this.createNode(G)).appendChild(Q),J.appendChild(ee),J.appendChild(te)),J.style.position="absolute",J.style.left="0px",J.style.top="0px",this._setAttr(J,"id",this.container.id+"_"+_),J},remove:function(G){utils_type.A.exists(G)&&G.removeNode(!0)},makeArrows:function(G){var _,J=G.evalVisProp("firstarrow"),Z=G.evalVisProp("lastarrow");G.visPropOld.firstarrow===J&&G.visPropOld.lastarrow===Z||(J?(_=G.rendNodeStroke,this._setAttr(_,"startarrow","block"),this._setAttr(_,"startarrowlength","long")):(_=G.rendNodeStroke,utils_type.A.exists(_)&&this._setAttr(_,"startarrow","none")),Z?(_=G.rendNodeStroke,this._setAttr(_,"id",this.container.id+"_"+G.id+"stroke"),this._setAttr(_,"endarrow","block"),this._setAttr(_,"endarrowlength","long")):(_=G.rendNodeStroke,utils_type.A.exists(_)&&this._setAttr(_,"endarrow","none")),G.visPropOld.firstarrow=J,G.visPropOld.lastarrow=Z)},updateEllipsePrim:function(G,_,J,Z,Q){G.style.left=Math.floor(_-Z)+"px",G.style.top=Math.floor(J-Q)+"px",G.style.width=Math.floor(2*Math.abs(Z))+"px",G.style.height=Math.floor(2*Math.abs(Q))+"px"},updateLinePrim:function(G,_,J,Z,Q,ee){var te,ne=this.resolution;isNaN(_+J+Z+Q)||(te=["m ",Math.floor(ne*_),", ",Math.floor(ne*J)," l ",Math.floor(ne*Z),", ",Math.floor(ne*Q)],this.updatePathPrim(G,te,ee))},updatePathPrim:function(G,_,J){var Z=J.canvasWidth,Q=J.canvasHeight;_.length<=0&&(_=["m 0,0"]),G.style.width=Z,G.style.height=Q,this._setAttr(G,"coordsize",[Math.floor(this.resolution*Z),Math.floor(this.resolution*Q)].join(",")),this._setAttr(G,"path",_.join(""))},updatePathStringPoint:function(G,_,J){var Z=[],Q=Math.round,ee=G.coords.scrCoords,te=_*Math.sqrt(3)*.5,ne=.5*_,ie=this.resolution;return J==="x"?Z.push([" m ",Q(ie*(ee[1]-_)),", ",Q(ie*(ee[2]-_))," l ",Q(ie*(ee[1]+_)),", ",Q(ie*(ee[2]+_))," m ",Q(ie*(ee[1]+_)),", ",Q(ie*(ee[2]-_))," l ",Q(ie*(ee[1]-_)),", ",Q(ie*(ee[2]+_))].join("")):J==="+"?Z.push([" m ",Q(ie*(ee[1]-_)),", ",Q(ie*ee[2])," l ",Q(ie*(ee[1]+_)),", ",Q(ie*ee[2])," m ",Q(ie*ee[1]),", ",Q(ie*(ee[2]-_))," l ",Q(ie*ee[1]),", ",Q(ie*(ee[2]+_))].join("")):J==="<>"||J==="<<>>"?(J==="<<>>"&&(_*=1.41),Z.push([" m ",Q(ie*(ee[1]-_)),", ",Q(ie*ee[2])," l ",Q(ie*ee[1]),", ",Q(ie*(ee[2]+_))," l ",Q(ie*(ee[1]+_)),", ",Q(ie*ee[2])," l ",Q(ie*ee[1]),", ",Q(ie*(ee[2]-_))," x e "].join(""))):J==="^"?Z.push([" m ",Q(ie*ee[1]),", ",Q(ie*(ee[2]-_))," l ",Q(ie*(ee[1]-te)),", ",Q(ie*(ee[2]+ne))," l ",Q(ie*(ee[1]+te)),", ",Q(ie*(ee[2]+ne))," x e "].join("")):J==="v"?Z.push([" m ",Q(ie*ee[1]),", ",Q(ie*(ee[2]+_))," l ",Q(ie*(ee[1]-te)),", ",Q(ie*(ee[2]-ne))," l ",Q(ie*(ee[1]+te)),", ",Q(ie*(ee[2]-ne))," x e "].join("")):J===">"?Z.push([" m ",Q(ie*(ee[1]+_)),", ",Q(ie*ee[2])," l ",Q(ie*(ee[1]-ne)),", ",Q(ie*(ee[2]-te))," l ",Q(ie*(ee[1]-ne)),", ",Q(ie*(ee[2]+te))," l ",Q(ie*(ee[1]+_)),", ",Q(ie*ee[2])].join("")):J==="<"&&Z.push([" m ",Q(ie*(ee[1]-_)),", ",Q(ie*ee[2])," l ",Q(ie*(ee[1]+ne)),", ",Q(ie*(ee[2]-te))," l ",Q(ie*(ee[1]+ne)),", ",Q(ie*(ee[2]+te))," x e "].join("")),Z},updatePathStringPrim:function(G){var _,J,Z=[],Q=this.resolution,ee=Math.round,te=" m ",ne=te,ie=Math.min(G.numberPoints,8192);if(G.numberPoints<=0)return"";if(ie=Math.min(ie,G.points.length),G.bezierDegree===1)for(_=0;_<ie;_++)J=G.points[_].scrCoords,isNaN(J[1])||isNaN(J[2])?ne=te:(J[1]>2e4?J[1]=2e4:J[1]<-2e4&&(J[1]=-2e4),J[2]>2e4?J[2]=2e4:J[2]<-2e4&&(J[2]=-2e4),Z.push([ne,ee(Q*J[1]),", ",ee(Q*J[2])].join("")),ne=" l ");else if(G.bezierDegree===3)for(_=0;_<ie;)J=G.points[_].scrCoords,isNaN(J[1])||isNaN(J[2])?ne=te:(Z.push([ne,ee(Q*J[1]),", ",ee(Q*J[2])].join("")),ne===" c "&&(_+=1,J=G.points[_].scrCoords,Z.push([" ",ee(Q*J[1]),", ",ee(Q*J[2])].join("")),_+=1,J=G.points[_].scrCoords,Z.push([" ",ee(Q*J[1]),", ",ee(Q*J[2])].join(""))),ne=" c "),_+=1;return Z.push(" e"),Z},updatePathStringBezierPrim:function(G){var _,J,Z,Q,ee,te,ne=[],ie=G.evalVisProp("strokewidth"),re=this.resolution,oe=Math.round,se=" m ",ae=se,ce=G.evalVisProp("curvetype")!=="plot",ue=Math.min(G.numberPoints,8192);if(G.numberPoints<=0)return"";for(ce&&G.board.options.curve.RDPsmoothing&&(G.points=numerics.A.RamerDouglasPeucker(G.points,1)),ue=Math.min(ue,G.points.length),J=1;J<3;J++)for(ae=se,_=0;_<ue;_++)Q=G.points[_].scrCoords,isNaN(Q[1])||isNaN(Q[2])?ae=se:(Q[1]>2e4?Q[1]=2e4:Q[1]<-2e4&&(Q[1]=-2e4),Q[2]>2e4?Q[2]=2e4:Q[2]<-2e4&&(Q[2]=-2e4),ae===se?ne.push([ae,oe(re*Q[1])," ",oe(re*Q[2])].join("")):(Z=2*J,ne.push([ae,oe(re*(ee+.333*(Q[1]-ee)+ie*(Z*Math.random()-J)))," ",oe(re*(te+.333*(Q[2]-te)+ie*(Z*Math.random()-J)))," ",oe(re*(ee+.666*(Q[1]-ee)+ie*(Z*Math.random()-J)))," ",oe(re*(te+.666*(Q[2]-te)+ie*(Z*Math.random()-J)))," ",oe(re*Q[1])," ",oe(re*Q[2])].join(""))),ae=" c ",ee=Q[1],te=Q[2]);return ne.push(" e"),ne},updatePolygonPrim:function(G,_){var J,Z,Q=_.vertices.length,ee=this.resolution,te=[];if(this._setAttr(G,"stroked","false"),Z=_.vertices[0].coords.scrCoords,!isNaN(Z[1]+Z[2])){for(te.push(["m ",Math.floor(ee*Z[1]),",",Math.floor(ee*Z[2])," l "].join("")),J=1;J<Q-1;J++){if(!_.vertices[J].isReal)return void this.updatePathPrim(G,"",_.board);if(Z=_.vertices[J].coords.scrCoords,isNaN(Z[1]+Z[2]))return;te.push(Math.floor(ee*Z[1])+","+Math.floor(ee*Z[2])),J<Q-2&&te.push(", ")}te.push(" x e"),this.updatePathPrim(G,te,_.board)}},updateRectPrim:function(G,_,J,Z,Q){G.style.left=Math.floor(_)+"px",G.style.top=Math.floor(J)+"px",Z>=0&&(G.style.width=Z+"px"),Q>=0&&(G.style.height=Q+"px")},setPropertyPrim:function(G,_,J){var Z,Q="";switch(_){case"stroke":Q="strokecolor";break;case"stroke-width":Q="strokeweight";break;case"stroke-dasharray":Q="dashstyle"}Q!==""&&(Z=J,this._setAttr(G,Q,Z))},display:function(G,_){G&&G.rendNode&&(G.visPropOld.visible=_,G.rendNode.style.visibility=_?"inherit":"hidden")},show:function(G){jxg.A.deprecated("Board.renderer.show()","Board.renderer.display()"),G&&G.rendNode&&(G.rendNode.style.visibility="inherit")},hide:function(G){jxg.A.deprecated("Board.renderer.hide()","Board.renderer.display()"),G&&G.rendNode&&(G.rendNode.style.visibility="hidden")},setDashStyle:function(G,_){var J;_.dash>=0&&(J=G.rendNodeStroke,this._setAttr(J,"dashstyle",this.dashArray[_.dash]))},setGradient:function(G){var _=G.rendNodeFill,J=G.evalVisProp("gradient");J==="linear"?(this._setAttr(_,"type","gradient"),this._setAttr(_,"color2",G.evalVisProp("gradientsecondcolor")),this._setAttr(_,"opacity2",G.evalVisProp("gradientsecondopacity")),this._setAttr(_,"angle",G.evalVisProp("gradientangle"))):J==="radial"?(this._setAttr(_,"type","gradientradial"),this._setAttr(_,"color2",G.evalVisProp("gradientsecondcolor")),this._setAttr(_,"opacity2",G.evalVisProp("gradientsecondopacity")),this._setAttr(_,"focusposition",100*G.evalVisProp("gradientpositionx")+"%,"+100*G.evalVisProp("gradientpositiony")+"%"),this._setAttr(_,"focussize","0,0")):this._setAttr(_,"type","solid")},setObjectFillColor:function(G,_,J){var Z,Q,ee,te=_,ne=J,ie=G.rendNode;ne=ne>0?ne:0,G.visPropOld.fillcolor===te&&G.visPropOld.fillopacity===ne||(utils_type.A.exists(te)&&te!==!1&&(te.length!==9?(Z=te,ee=ne):(Z=(Q=utils_color.A.rgba2rgbo(te))[0],ee=ne*Q[1]),Z==="none"||Z===!1?this._setAttr(G.rendNode,"filled","false"):(this._setAttr(G.rendNode,"filled","true"),this._setAttr(G.rendNode,"fillcolor",Z),utils_type.A.exists(ee)&&G.rendNodeFill&&this._setAttr(G.rendNodeFill,"opacity",100*ee+"%")),G.type===constants.A.OBJECT_TYPE_IMAGE&&ie.filters.length>1&&(ie.filters.item(1).opacity=Math.round(100*ee),ie.filters.item(1).enabled=!0)),G.visPropOld.fillcolor=te,G.visPropOld.fillopacity=ne)},setObjectStrokeColor:function(G,_,J){var Z,Q,ee,te,ne=_,ie=J,re=G.rendNode;ie=ie>0?ie:0,G.visPropOld.strokecolor===ne&&G.visPropOld.strokeopacity===ie||(utils_type.A.exists(ne)&&ne!==!1&&(ne.length!==9?(Z=ne,ee=ie):(Z=(Q=_.rgba2rgbo(ne))[0],ee=ie*Q[1]),G.elementClass===constants.A.OBJECT_CLASS_TEXT?(re.filters.length>1&&(re.filters.item(1).opacity=Math.round(100*ee),re.filters.item(1).enabled=!0),re.style.color=Z):(Z!==!1&&(this._setAttr(re,"stroked","true"),this._setAttr(re,"strokecolor",Z)),te=G.rendNodeStroke,utils_type.A.exists(ee)&&G.type!==constants.A.OBJECT_TYPE_IMAGE&&this._setAttr(te,"opacity",100*ee+"%"))),G.visPropOld.strokecolor=ne,G.visPropOld.strokeopacity=ie)},setObjectStrokeWidth:function(G,_){var J,Z=utils_type.A.evaluate(_);isNaN(Z)||G.visPropOld.strokewidth===Z||(J=G.rendNode,this.setPropertyPrim(J,"stroked","true"),utils_type.A.exists(Z)&&(this.setPropertyPrim(J,"stroke-width",Z),Z===0&&utils_type.A.exists(G.rendNodeStroke)&&this._setAttr(J,"stroked","false")),G.visPropOld.strokewidth=Z)},setShadow:function(G){var _=G.rendNodeShadow,J=G.evalVisProp("shadow");_&&G.visPropOld.shadow!==J&&(J?(this._setAttr(_,"On","True"),this._setAttr(_,"Offset","3pt,3pt"),this._setAttr(_,"Opacity","60%"),this._setAttr(_,"Color","#aaaaaa")):this._setAttr(_,"On","False"),G.visPropOld.shadow=J)},suspendRedraw:function(){this.container.style.display="none"},unsuspendRedraw:function(){this.container.style.display=""}});var vml=jxg.A.VMLRenderer,uuidCharsStr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",uuidChars=uuidCharsStr.split("");jxg.A.Util=jxg.A.Util||{},jxg.A.Util.genUUID=function(G){var _,J,Z=[],Q=0;for((G=G||"")!==""&&G.slice(G.length-1)!=="-"&&(G+="-"),J=0;J<36;J++)J===8||J===13||J===18||J===23?Z[J]="-":J===14?Z[J]="4":(Q<=2&&(Q=33554432+16777216*Math.random()|0),_=15&Q,Q>>=4,Z[J]=uuidChars[J===19?3&_|8:_]);return G+Z.join("")};var uuid=jxg.A.Util;jxg.A.CanvasRenderer=function(G,_){if(this.type="canvas",this.canvasRoot=null,this.suspendHandle=null,this.canvasId=uuid.genUUID(),this.canvasNamespace=null,env.A.isBrowser)this.container=G,this.container.style.MozUserSelect="none",this.container.style.userSelect="none",this.container.style.overflow="hidden",this.container.style.position===""&&(this.container.style.position="relative"),this.container.innerHTML=['<canvas id="',this.canvasId,'" width="',_.width,'px" height="',_.height,'px"></canvas>'].join(""),this.canvasRoot=this.container.ownerDocument.getElementById(this.canvasId),this.canvasRoot.style.display="block",this.context=this.canvasRoot.getContext("2d");else if(env.A.isNode())try{this.canvasRoot=jxg.A.createCanvas(500,500),this.context=this.canvasRoot.getContext("2d")}catch{throw new Error(`JXG.createCanvas not available.
Install the npm package \`canvas\`
and call:
    import { createCanvas } from "canvas.js"
    JXG.createCanvas = createCanvas;
`)}},jxg.A.CanvasRenderer.prototype=new renderer_abstract,jxg.A.extend(jxg.A.CanvasRenderer.prototype,{_drawPolygon:function(G,_,J){var Z,Q=G.length,ee=this.context;if(Q>0){if(J&&(ee.lineWidth=0),ee.beginPath(),ee.moveTo(G[0][0],G[0][1]),_===1)for(Z=1;Z<Q;Z++)ee.lineTo(G[Z][0],G[Z][1]);else for(Z=1;Z<Q;Z+=3)ee.bezierCurveTo(G[Z][0],G[Z][1],G[Z+1][0],G[Z+1][1],G[Z+2][0],G[Z+2][1]);J?(ee.lineTo(G[0][0],G[0][1]),ee.closePath(),ee.fill("evenodd")):ee.stroke()}},_fill:function(G){var _=this.context;_.save(),this._setColor(G,"fill")&&_.fill("evenodd"),_.restore()},_rotatePoint:function(G,_,J){return[_*Math.cos(G)-J*Math.sin(G),_*Math.sin(G)+J*Math.cos(G)]},_rotateShape:function(G,_){var J,Z=[],Q=G.length;if(Q<=0)return G;for(J=0;J<Q;J++)Z.push(this._rotatePoint(_,G[J][0],G[J][1]));return Z},updateGradientAngle:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue=1,de=Math.cos(-_),me=Math.sin(-_),fe=G.getBoundingBox();return Math.abs(de)>Math.abs(me)?ue/=Math.abs(de):ue/=Math.abs(me),de>=0?(Q=0,ee=de*ue):(Q=-de*ue,ee=0),me>=0?(te=0,ne=me*ue):(te=-me*ue,ne=0),J=new base_coords.A(constants.A.COORDS_BY_USER,[fe[0],fe[1]],G.board),ae=(Z=new base_coords.A(constants.A.COORDS_BY_USER,[fe[2],fe[3]],G.board)).scrCoords[1]-J.scrCoords[1],ce=Z.scrCoords[2]-J.scrCoords[2],ie=J.scrCoords[1]+ae*Q,oe=J.scrCoords[2]+ce*te,re=J.scrCoords[1]+ae*ee,se=J.scrCoords[2]+ce*ne,this.context.createLinearGradient(ie,oe,re,se)},updateGradientCircle:function(G,_,J,Z,Q,ee,te){var ne,ie,re,oe,se,ae,ce,ue,de,me,fe=G.getBoundingBox();return ne=new base_coords.A(constants.A.COORDS_BY_USER,[fe[0],fe[1]],G.board),de=(ie=new base_coords.A(constants.A.COORDS_BY_USER,[fe[2],fe[3]],G.board)).scrCoords[1]-ne.scrCoords[1],me=ne.scrCoords[2]-ie.scrCoords[2],re=ne.scrCoords[1]+de*_,oe=ie.scrCoords[2]+me*J,ae=ne.scrCoords[1]+de*Q,ce=ie.scrCoords[2]+me*ee,se=Z*(de+me)*.5,ue=te*(de+me)*.5,this.context.createRadialGradient(ae,ce,ue,re,oe,se)},updateGradient:function(G){var _,J,Z=G.evalVisProp("gradient");return _=G.evalVisProp("fillcolor"),Z==="linear"?J=this.updateGradientAngle(G,G.evalVisProp("gradientangle")):Z==="radial"&&(J=this.updateGradientCircle(G,G.evalVisProp("gradientcx"),G.evalVisProp("gradientcy"),G.evalVisProp("gradientr"),G.evalVisProp("gradientfx"),G.evalVisProp("gradientfy"),G.evalVisProp("gradientfr"))),_!=="none"&&_!==""&&_!==!1&&(J.addColorStop(G.evalVisProp("gradientstartoffset"),_),J.addColorStop(G.evalVisProp("gradientendoffset"),G.evalVisProp("gradientsecondcolor"))),J},_setColor:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae=!0;return _=_||"stroke",J=J||_,Q=this._getHighlighted(G),(te=G.evalVisProp(Q+_+"color"))!=="none"&&te!==""&&te!==!1?(re=(re=G.evalVisProp(Q+_+"opacity"))>0?re:0,te.length!==9?(ie=te,oe=re):(ie=(ne=utils_color.A.rgba2rgbo(te))[0],oe=re*ne[1]),this.context.globalAlpha=oe,this.context[J+"Style"]=ie):ae=!1,_==="stroke"||(se=G.evalVisProp("gradient"))!=="linear"&&se!=="radial"?(ee=parseFloat(G.evalVisProp(Q+"strokewidth")),_!=="stroke"||isNaN(ee)||(ee===0?this.context.globalAlpha=0:this.context.lineWidth=ee),Z=G.evalVisProp("linecap"),_==="stroke"&&Z!==void 0&&Z!==""&&(this.context.lineCap=Z),ae):(this.context.globalAlpha=oe,this.context[J+"Style"]=this.updateGradient(G),ae)},_stroke:function(G){var _=this.context,J=G.evalVisProp("dash"),Z=G.evalVisProp("dashscale")?.5*G.evalVisProp("strokewidth"):1;_.save(),J>0?_.setLineDash&&_.setLineDash(this.dashArray[J-1].map(function(Q){return Q*Z})):this.context.lineDashArray=[],this._setColor(G,"stroke")&&_.stroke(),_.restore()},_translateShape:function(G,_,J){var Z,Q=[],ee=G.length;if(ee<=0)return G;for(Z=0;Z<ee;Z++)Q.push([G[Z][0]+_,G[Z][1]+J]);return Q},drawPoint:function(G){var _=G.evalVisProp("face"),J=G.evalVisProp("size"),Z=G.coords.scrCoords,Q=J*Math.sqrt(3)*.5,ee=.5*J,te=parseFloat(G.evalVisProp("strokewidth"))/2,ne=this.context;if(G.visPropCalc.visible)switch(_){case"cross":case"x":ne.beginPath(),ne.moveTo(Z[1]-J,Z[2]-J),ne.lineTo(Z[1]+J,Z[2]+J),ne.moveTo(Z[1]+J,Z[2]-J),ne.lineTo(Z[1]-J,Z[2]+J),ne.lineCap="round",ne.lineJoin="round",ne.closePath(),this._stroke(G);break;case"circle":case"o":ne.beginPath(),ne.arc(Z[1],Z[2],J+1+te,0,2*Math.PI,!1),ne.closePath(),this._fill(G),this._stroke(G);break;case"square":case"[]":if(J<=0)break;ne.save(),this._setColor(G,"stroke","fill")&&ne.fillRect(Z[1]-J-te,Z[2]-J-te,2*J+3*te,2*J+3*te),ne.restore(),ne.save(),this._setColor(G,"fill"),ne.fillRect(Z[1]-J+te,Z[2]-J+te,2*J-te,2*J-te),ne.restore();break;case"plus":case"+":ne.beginPath(),ne.moveTo(Z[1]-J,Z[2]),ne.lineTo(Z[1]+J,Z[2]),ne.moveTo(Z[1],Z[2]-J),ne.lineTo(Z[1],Z[2]+J),ne.lineCap="round",ne.lineJoin="round",ne.closePath(),this._stroke(G);break;case"divide":case"|":ne.beginPath(),ne.moveTo(Z[1],Z[2]-J),ne.lineTo(Z[1],Z[2]+J),ne.lineCap="round",ne.lineJoin="round",ne.closePath(),this._stroke(G);break;case"minus":case"-":ne.beginPath(),ne.moveTo(Z[1]-J,Z[2]),ne.lineTo(Z[1]+J,Z[2]),ne.lineCap="round",ne.lineJoin="round",ne.closePath(),this._stroke(G);break;case"diamond2":case"<<>>":J*=1.41;case"diamond":case"<>":ne.beginPath(),ne.moveTo(Z[1]-J,Z[2]),ne.lineTo(Z[1],Z[2]+J),ne.lineTo(Z[1]+J,Z[2]),ne.lineTo(Z[1],Z[2]-J),ne.closePath(),this._fill(G),this._stroke(G);break;case"triangleup":case"A":case"a":case"^":ne.beginPath(),ne.moveTo(Z[1],Z[2]-J),ne.lineTo(Z[1]-Q,Z[2]+ee),ne.lineTo(Z[1]+Q,Z[2]+ee),ne.closePath(),this._fill(G),this._stroke(G);break;case"triangledown":case"v":ne.beginPath(),ne.moveTo(Z[1],Z[2]+J),ne.lineTo(Z[1]-Q,Z[2]-ee),ne.lineTo(Z[1]+Q,Z[2]-ee),ne.closePath(),this._fill(G),this._stroke(G);break;case"triangleleft":case"<":ne.beginPath(),ne.moveTo(Z[1]-J,Z[2]),ne.lineTo(Z[1]+ee,Z[2]-Q),ne.lineTo(Z[1]+ee,Z[2]+Q),ne.closePath(),this._fill(G),this._stroke(G);break;case"triangleright":case">":ne.beginPath(),ne.moveTo(Z[1]+J,Z[2]),ne.lineTo(Z[1]-ee,Z[2]-Q),ne.lineTo(Z[1]-ee,Z[2]+Q),ne.closePath(),this._fill(G),this._stroke(G)}},updatePoint:function(G){this.drawPoint(G)},drawArrows:function(G,_,J,Z,Q){var ee,te,ne,ie,re,oe,se,ae,ce,ue,de,me,fe,_e,ye,be,Se,Ce,Me,Re,Te=this.context,Ee=1,De=1,Le=1,Ue=Q.evFirst,Ge=Q.evLast;if(G.evalVisProp("strokecolor")!=="none"&&(Ue||Ge)){if(G.elementClass===constants.A.OBJECT_CLASS_LINE)ee=_.scrCoords[1],te=_.scrCoords[2],ne=J.scrCoords[1],ie=J.scrCoords[2],Me=Re=Math.atan2(ie-te,ne-ee);else{if(ee=G.points[0].scrCoords[1],te=G.points[0].scrCoords[2],(Ce=G.points.length-1)<1)return;ne=G.points[G.points.length-1].scrCoords[1],ie=G.points[G.points.length-1].scrCoords[2],_e=G.points[1].scrCoords[1]-G.points[0].scrCoords[1],ye=G.points[1].scrCoords[2]-G.points[0].scrCoords[2],be=G.points[Ce].scrCoords[1]-G.points[Ce-1].scrCoords[1],Se=G.points[Ce].scrCoords[2]-G.points[Ce-1].scrCoords[2],Ue&&(Me=Math.atan2(ye,_e)),Ge&&(Re=Math.atan2(Se,be))}if(oe=G.evalVisProp(Z+"strokewidth"),Ue)if(re=oe*Q.sizeFirst,ce=Ee=Q.typeFirst,Ee===2)ae=[[re,.5*-re],[0,0],[re,.5*re],[.5*re,0]];else if(Ee===3)ae=[[re/3,.5*-re],[0,.5*-re],[0,.5*re],[re/3,.5*re]];else if(Ee===4)for(re/=10,De=3,fe=(ae=[[10,3.31],[6.47,3.84],[2.87,4.5],[0,6.63],[.67,5.52],[1.33,4.42],[2,3.31],[1.33,2.21],[.67,1.1],[0,0],[2.87,2.13],[6.47,2.79],[10,3.31]]).length,me=0;me<fe;me++)ae[me][0]*=-re,ae[me][1]*=re,ae[me][0]+=10*re,ae[me][1]-=3.31*re;else if(Ee===5)for(re/=10,De=3,fe=(ae=[[10,3.28],[6.61,4.19],[3.19,5.07],[0,6.55],[.62,5.56],[1,4.44],[1,3.28],[1,2.11],[.62,.99],[0,0],[3.19,1.49],[6.61,2.37],[10,3.28]]).length,me=0;me<fe;me++)ae[me][0]*=-re,ae[me][1]*=re,ae[me][0]+=10*re,ae[me][1]-=3.28*re;else if(Ee===6)for(re/=10,De=3,fe=(ae=[[10,2.84],[6.61,3.59],[3.21,4.35],[0,5.68],[.33,4.73],[.67,3.78],[1,2.84],[.67,1.89],[.33,.95],[0,0],[3.21,1.33],[6.61,2.09],[10,2.84]]).length,me=0;me<fe;me++)ae[me][0]*=-re,ae[me][1]*=re,ae[me][0]+=10*re,ae[me][1]-=2.84*re;else if(Ee===7)for(re=oe,De=3,fe=(ae=[[0,10.39],[2.01,6.92],[5.96,5.2],[10,5.2],[5.96,5.2],[2.01,3.47],[0,0]]).length,me=0;me<fe;me++)ae[me][0]*=-re,ae[me][1]*=re,ae[me][0]+=10*re,ae[me][1]-=5.2*re;else ae=[[re,.5*-re],[0,0],[re,.5*re]];if(Ge)if(re=oe*Q.sizeLast,ue=Ee=Q.typeLast,Ee===2)se=[[-re,.5*-re],[0,0],[-re,.5*re],[.5*-re,0]];else if(Ee===3)se=[[-re/3,.5*-re],[0,.5*-re],[0,.5*re],[-re/3,.5*re]];else if(Ee===4)for(re/=10,Le=3,fe=(se=[[10,3.31],[6.47,3.84],[2.87,4.5],[0,6.63],[.67,5.52],[1.33,4.42],[2,3.31],[1.33,2.21],[.67,1.1],[0,0],[2.87,2.13],[6.47,2.79],[10,3.31]]).length,me=0;me<fe;me++)se[me][0]*=re,se[me][1]*=re,se[me][0]-=10*re,se[me][1]-=3.31*re;else if(Ee===5)for(re/=10,Le=3,fe=(se=[[10,3.28],[6.61,4.19],[3.19,5.07],[0,6.55],[.62,5.56],[1,4.44],[1,3.28],[1,2.11],[.62,.99],[0,0],[3.19,1.49],[6.61,2.37],[10,3.28]]).length,me=0;me<fe;me++)se[me][0]*=re,se[me][1]*=re,se[me][0]-=10*re,se[me][1]-=3.28*re;else if(Ee===6)for(re/=10,Le=3,fe=(se=[[10,2.84],[6.61,3.59],[3.21,4.35],[0,5.68],[.33,4.73],[.67,3.78],[1,2.84],[.67,1.89],[.33,.95],[0,0],[3.21,1.33],[6.61,2.09],[10,2.84]]).length,me=0;me<fe;me++)se[me][0]*=re,se[me][1]*=re,se[me][0]-=10*re,se[me][1]-=2.84*re;else if(Ee===7)for(re=oe,Le=3,fe=(se=[[0,10.39],[2.01,6.92],[5.96,5.2],[10,5.2],[5.96,5.2],[2.01,3.47],[0,0]]).length,me=0;me<fe;me++)se[me][0]*=re,se[me][1]*=re,se[me][0]-=10*re,se[me][1]-=5.2*re;else se=[[-re,.5*-re],[0,0],[-re,.5*re]];Te.save(),this._setColor(G,"stroke","fill")&&(this._setColor(G,"stroke"),Ue&&(de=ce!==7,this._drawPolygon(this._translateShape(this._rotateShape(ae,Me),ee,te),De,de)),Ge&&(de=ue!==7,this._drawPolygon(this._translateShape(this._rotateShape(se,Re),ne,ie),Le,de))),Te.restore()}},drawLine:function(G){var _,J,Z,Q,ee,te=new base_coords.A(constants.A.COORDS_BY_USER,G.point1.coords.usrCoords,G.board),ne=new base_coords.A(constants.A.COORDS_BY_USER,G.point2.coords.usrCoords,G.board),ie=null;G.visPropCalc.visible&&(Z=this._getHighlighted(G),Q=G.evalVisProp(Z+"strokewidth"),((ee=this.getArrowHeadData(G,Q,Z)).evFirst||ee.evLast)&&(ie=-4),geometry.A.calcStraight(G,te,ne,ie),this.handleTouchpoints(G,te,ne,ee),_=new base_coords.A(constants.A.COORDS_BY_USER,te.usrCoords,G.board),J=new base_coords.A(constants.A.COORDS_BY_USER,ne.usrCoords,G.board),this.getPositionArrowHead(G,te,ne,ee),this.context.beginPath(),this.context.moveTo(te.scrCoords[1],te.scrCoords[2]),this.context.lineTo(ne.scrCoords[1],ne.scrCoords[2]),this._stroke(G),(ee.evFirst||ee.evLast)&&this.drawArrows(G,_,J,Z,ee))},updateLine:function(G){this.drawLine(G)},drawTicks:function(){},updateTicks:function(G){var _,J,Z,Q,ee,te,ne=G.ticks.length,ie=this.context;for(ie.beginPath(),_=0;_<ne;_++)for(Z=(J=G.ticks[_])[0],Q=J[1],ee=Z.length,ie.moveTo(Z[0],Q[0]),te=1;te<ee;++te)ie.lineTo(Z[te],Q[te]);ie.lineCap="round",this._stroke(G)},drawCurve:function(G){var _,J,Z;G.evalVisProp("handdrawing")?this.updatePathStringBezierPrim(G):this.updatePathStringPrim(G),G.numberPoints>1&&(_=this._getHighlighted(G),J=G.evalVisProp(_+"strokewidth"),((Z=this.getArrowHeadData(G,J,_)).evFirst||Z.evLast)&&this.drawArrows(G,null,null,_,Z))},updateCurve:function(G){this.drawCurve(G)},drawEllipse:function(G){var _=G.center.coords.scrCoords[1],J=G.center.coords.scrCoords[2],Z=G.board.unitX,Q=G.board.unitY,ee=2*G.Radius(),te=2*G.Radius(),ne=ee*Z,ie=te*Q,re=_-ne/2,oe=J-ie/2,se=ne/2*.5522848,ae=ie/2*.5522848,ce=re+ne,ue=oe+ie,de=re+ne/2,me=oe+ie/2,fe=this.context;ee>0&&te>0&&!isNaN(_+J)&&(fe.beginPath(),fe.moveTo(re,me),fe.bezierCurveTo(re,me-ae,de-se,oe,de,oe),fe.bezierCurveTo(de+se,oe,ce,me-ae,ce,me),fe.bezierCurveTo(ce,me+ae,de+se,ue,de,ue),fe.bezierCurveTo(de-se,ue,re,me+ae,re,me),fe.closePath(),this._fill(G),this._stroke(G))},updateEllipse:function(G){return this.drawEllipse(G)},displayCopyright:function(G,_){var J=this.context,Z=4+1.8*_,Q=6+_;J.save(),J.font=_+"px Arial",J.globalAlpha=.2,J.lineWidth=.5,J.fillText(G+".",Z,Q),J.restore()},displayLogo:function(G,_,J){var Z=this.context,Q=1.5*_;utils_type.A.exists(J._logo_image)||(J._logo_image=new Image,J._logo_image.src=G),J._logo_image.onload=function(){Z.save(),Z.globalAlpha=.2,Z.drawImage(J._logo_image,5,5,Q,Q),Z.restore()},Z.save(),Z.globalAlpha=.2,Z.drawImage(J._logo_image,5,5,Q,Q),Z.restore()},drawInternalText:function(G){var _=G.evalVisProp("fontsize"),J=G.evalVisProp("fontunit"),Z=G.getAnchorX(),Q=G.getAnchorY(),ee=this.context;return ee.save(),this._setColor(G,"stroke","fill")&&!isNaN(G.coords.scrCoords[1]+G.coords.scrCoords[2])&&(ee.font=(_>0?_:0)+J+" Arial",this.transformRect(G,G.transformations),Z==="left"?ee.textAlign="left":Z==="right"?ee.textAlign="right":Z==="middle"&&(ee.textAlign="center"),Q==="bottom"?ee.textBaseline="bottom":Q==="top"?ee.textBaseline="top":Q==="middle"&&(ee.textBaseline="middle"),ee.fillText(G.plaintext,G.coords.scrCoords[1],G.coords.scrCoords[2])),ee.restore(),null},updateInternalText:function(G){this.drawInternalText(G)},setObjectStrokeColor:function(G,_,J){var Z,Q,ee,te,ne=_,ie=J;ie=ie>0?ie:0,G.visPropOld.strokecolor===ne&&G.visPropOld.strokeopacity===ie||(utils_type.A.exists(ne)&&ne!==!1&&(ne.length!==9?(Z=ne,ee=ie):(Z=(Q=utils_color.A.rgba2rgbo(ne))[0],ee=ie*Q[1]),te=G.rendNode,G.elementClass===constants.A.OBJECT_CLASS_TEXT&&G.evalVisProp("display")==="html"&&(te.style.color=Z,te.style.opacity=ee)),G.visPropOld.strokecolor=ne,G.visPropOld.strokeopacity=ie)},drawImage:function(G){G.rendNode=new Image,G._src="",this.updateImage(G)},updateImage:function(G){var _=this.context,J=G.evalVisProp("fillopacity"),Z=utils_type.A.bind(function(){G.imgIsLoaded=!0,G.size[0]<=0||G.size[1]<=0||(_.save(),_.globalAlpha=J,this.transformRect(G,G.transformations),_.drawImage(G.rendNode,G.coords.scrCoords[1],G.coords.scrCoords[2]-G.size[1],G.size[0],G.size[1]),_.restore())},this);this.updateImageURL(G)?G.rendNode.onload=Z:G.imgIsLoaded&&Z()},transformRect:function(G,_){var J,Z,Q,ee,te,ne=_.length,ie=this.context;if(ne>0)if(J=this.joinTransforms(G,_),G.elementClass===constants.A.OBJECT_CLASS_TEXT&&G.visProp.display==="html"){if((Z=" matrix("+[J[1][1],J[2][1],J[1][2],J[2][2],J[1][0],J[2][0]].join(",")+") ").indexOf("NaN")===-1){switch((te=G.rendNode).style.transform=Z,Q=-G.coords.scrCoords[1],ee=-G.coords.scrCoords[2],G.evalVisProp("anchorx")){case"right":Q+=G.size[0];break;case"middle":Q+=.5*G.size[0]}switch(G.evalVisProp("anchory")){case"bottom":ee+=G.size[1];break;case"middle":ee+=.5*G.size[1]}te.style["transform-origin"]=Q+"px "+ee+"px"}}else Math.abs(numerics.A.det(J))>=math.A.eps&&ie.transform(J[1][1],J[2][1],J[1][2],J[2][2],J[1][0],J[2][0])},updateImageURL:function(G){var _;return _=G.eval(G.url),G._src!==_&&(G.imgIsLoaded=!1,G.rendNode.src=_,G._src=_,!0)},remove:function(G){utils_type.A.exists(G)&&utils_type.A.exists(G.parentNode)&&G.parentNode.removeChild(G)},updatePathStringPrim:function(G){var _,J,Z,Q,ee,te="M",ne=te,ie=5e3,re=this.context;if(!(G.numberPoints<=0)){if(ee=Math.min(G.points.length,G.numberPoints),re.beginPath(),G.bezierDegree===1)for(_=0;_<ee;_++)J=G.points[_].scrCoords,isNaN(J[1])||isNaN(J[2])?ne=te:(J[1]>ie?J[1]=ie:J[1]<-5e3&&(J[1]=-5e3),J[2]>ie?J[2]=ie:J[2]<-5e3&&(J[2]=-5e3),ne===te?re.moveTo(J[1],J[2]):re.lineTo(J[1],J[2]),ne="L");else if(G.bezierDegree===3)for(_=0;_<ee;)J=G.points[_].scrCoords,isNaN(J[1])||isNaN(J[2])?ne=te:(ne===te?re.moveTo(J[1],J[2]):(_+=1,Z=G.points[_].scrCoords,_+=1,Q=G.points[_].scrCoords,re.bezierCurveTo(J[1],J[2],Z[1],Z[2],Q[1],Q[2])),ne="C"),_+=1;re.lineCap="round",re.lineJoin="round",this._fill(G),this._stroke(G)}},updatePathStringBezierPrim:function(G){var _,J,Z,Q,ee,te,ne,ie="M",re=ie,oe=5e3,se=G.evalVisProp("strokewidth"),ae=G.evalVisProp("curvetype")!=="plot",ce=this.context;if(!(G.numberPoints<=0)){for(ae&&G.board.options.curve.RDPsmoothing&&(G.points=numerics.A.RamerDouglasPeucker(G.points,.5)),ne=Math.min(G.points.length,G.numberPoints),ce.beginPath(),J=1;J<3;J++)for(re=ie,_=0;_<ne;_++)Q=G.points[_].scrCoords,isNaN(Q[1])||isNaN(Q[2])?re=ie:(Q[1]>oe?Q[1]=oe:Q[1]<-5e3&&(Q[1]=-5e3),Q[2]>oe?Q[2]=oe:Q[2]<-5e3&&(Q[2]=-5e3),re===ie?ce.moveTo(Q[1],Q[2]):(Z=2*J,ce.bezierCurveTo(ee+.333*(Q[1]-ee)+se*(Z*Math.random()-J),te+.333*(Q[2]-te)+se*(Z*Math.random()-J),ee+.666*(Q[1]-ee)+se*(Z*Math.random()-J),te+.666*(Q[2]-te)+se*(Z*Math.random()-J),Q[1],Q[2])),re="C",ee=Q[1],te=Q[2]);ce.lineCap="round",ce.lineJoin="round",this._fill(G),this._stroke(G)}},updatePolygonPrim:function(G,_){var J,Z,Q,ee=_.vertices.length,te=this.context,ne=!0;if(!(ee<=0)&&_.visPropCalc.visible){for(_.elType==="polygonalchain"&&ee++,te.beginPath(),Z=0;!_.vertices[Z].isReal&&Z<ee-1;)Z++,ne=!1;for(J=_.vertices[Z].coords.scrCoords,te.moveTo(J[1],J[2]),Q=Z;Q<ee-1;Q++)_.vertices[Q].isReal||(ne=!1),J=_.vertices[Q].coords.scrCoords,te.lineTo(J[1],J[2]);te.closePath(),ne&&this._fill(_)}},display:function(G,_){G&&G.rendNode&&(G.visPropOld.visible=_,G.rendNode.style.visibility=_?"inherit":"hidden")},show:function(G){jxg.A.deprecated("Board.renderer.show()","Board.renderer.display()"),utils_type.A.exists(G.rendNode)&&(G.rendNode.style.visibility="inherit")},hide:function(G){jxg.A.deprecated("Board.renderer.hide()","Board.renderer.display()"),utils_type.A.exists(G.rendNode)&&(G.rendNode.style.visibility="hidden")},setGradient:function(G){},setShadow:function(G){G.visPropOld.shadow!==G.visProp.shadow&&(G.visPropOld.shadow=G.visProp.shadow)},highlight:function(G){return G.elementClass===constants.A.OBJECT_CLASS_TEXT&&G.evalVisProp("display")==="html"?this.updateTextStyle(G,!0):(G.board.prepareUpdate(),G.board.renderer.suspendRedraw(G.board),G.board.updateRenderer(),G.board.renderer.unsuspendRedraw()),this},noHighlight:function(G){return G.elementClass===constants.A.OBJECT_CLASS_TEXT&&G.evalVisProp("display")==="html"?this.updateTextStyle(G,!1):(G.board.prepareUpdate(),G.board.renderer.suspendRedraw(G.board),G.board.updateRenderer(),G.board.renderer.unsuspendRedraw()),this},suspendRedraw:function(G){this.context.save(),this.context.clearRect(0,0,this.canvasRoot.width,this.canvasRoot.height),G&&(G.attr.showcopyright||G.attr.showlogo)&&this.displayLogo(jxg.A.licenseLogo,12,G),G&&G.attr.showcopyright&&this.displayCopyright(jxg.A.licenseText,12)},unsuspendRedraw:function(){this.context.restore()},resize:function(G,_){this.container?(this.canvasRoot.style.width=parseFloat(G)+"px",this.canvasRoot.style.height=parseFloat(_)+"px",this.canvasRoot.setAttribute("width",2*parseFloat(G)+"px"),this.canvasRoot.setAttribute("height",2*parseFloat(_)+"px")):(this.canvasRoot.width=2*parseFloat(G),this.canvasRoot.height=2*parseFloat(_)),this.context=this.canvasRoot.getContext("2d"),this.context.scale(2,2)},removeToInsertLater:function(){return function(){}}});var canvas=jxg.A.CanvasRenderer;jxg.A.NoRenderer=function(){this.enhancedRendering=!1,this.type="no"},jxg.A.extend(jxg.A.NoRenderer.prototype,{drawPoint:function(G){},updatePoint:function(G){},changePointStyle:function(G){},drawLine:function(G){},updateLine:function(G){},drawTicks:function(G){},updateTicks:function(G){},drawCurve:function(G){},updateCurve:function(G){},drawEllipse:function(G){},updateEllipse:function(G){},drawPolygon:function(G){},updatePolygon:function(G){},displayCopyright:function(G,_){},drawInternalText:function(G){},updateInternalText:function(G){},drawText:function(G){},updateText:function(G){},updateTextStyle:function(G,_){},updateInternalTextStyle:function(G,_,J){},drawImage:function(G){},updateImage:function(G){},updateImageURL:function(G){},appendChildPrim:function(G,_){},appendNodesToElement:function(G,_){},remove:function(G){},makeArrows:function(G){},updateEllipsePrim:function(G,_,J,Z,Q){},updateLinePrim:function(G,_,J,Z,Q,ee){},updatePathPrim:function(G,_,J){},updatePathStringPoint:function(G,_,J){},updatePathStringPrim:function(G){},updatePathStringBezierPrim:function(G){},updatePolygonPrim:function(G,_){},updateRectPrim:function(G,_,J,Z,Q){},setPropertyPrim:function(G,_,J){},show:function(G){},hide:function(G){},setBuffering:function(G,_){},setDashStyle:function(G){},setDraft:function(G){},removeDraft:function(G){},setGradient:function(G){},updateGradient:function(G){},setObjectTransition:function(G,_){},setObjectFillColor:function(G,_,J){},setObjectStrokeColor:function(G,_,J){},setObjectStrokeWidth:function(G,_){},setShadow:function(G){},highlight:function(G){},noHighlight:function(G){},suspendRedraw:function(){},unsuspendRedraw:function(){},drawNavigationBar:function(G){},getElementById:function(G){return null},resize:function(G,_){},removeToInsertLater:function(){return function(){}}}),jxg.A.NoRenderer.prototype=new renderer_abstract;var no=jxg.A.NoRenderer;jxg.A.JSXGraph={rendererType:(src_options.A.board.renderer="no",env.A.supportsVML()&&(src_options.A.board.renderer="vml",document.onmousemove=function(){var G;return document.body&&(G=document.body.scrollLeft,G+=document.body.scrollTop),G}),env.A.supportsCanvas()&&(src_options.A.board.renderer="canvas"),env.A.supportsSVG()&&(src_options.A.board.renderer="svg"),env.A.isNode()&&env.A.supportsCanvas()&&(src_options.A.board.renderer="canvas"),(env.A.isNode()||src_options.A.renderer==="no")&&(src_options.A.text.display="internal",src_options.A.infobox.display="internal"),src_options.A.board.renderer),initRenderer:function(G,_,J,Z){var Q;if(utils_type.A.exists(J)&&J!==!1||typeof document!="object"||(J=document),typeof J=="object"&&G!==null)for(Q=utils_type.A.isString(G)?J.getElementById(G):G;Q.firstChild;)Q.removeChild(Q.firstChild);else Q=G;return Z!==void 0&&Z!=="auto"||(Z=this.rendererType),Z==="svg"?new svg(Q,_):Z==="vml"?new vml(Q):Z==="canvas"?new canvas(Q,_):new no},_setAttributes:function(G,_){var J,Z,Q=utils_type.A.copyAttributes(G,_,"board"),ee=["drag","fullscreen","intl","keyboard","logging","pan","resize","screenshot","selection","zoom"],te=ee.length;for(J=0;J<te;J++)Q[Z=ee[J]]=utils_type.A.copyAttributes(Q,_,"board",Z);return Q.navbar=utils_type.A.copyAttributes(Q.navbar,_,"navbar"),Q.movetarget=G.moveTarget||G.movetarget||_.board.moveTarget,Q},_fillBoard:function(G,_,J){G.initInfobox(_.infobox),G.maxboundingbox=_.maxboundingbox,G.resizeContainer(J.width,J.height,!0,!0),G._createSelectionPolygon(_),G.renderer.drawNavigationBar(G,_.navbar),jxg.A.boards[G.id]=G},_setARIA:function(G,_){var J,Z=_.document;if(typeof Z!="object"){if(!env.A.isBrowser)return;Z=document}(J=utils_type.A.isString(G)?Z.getElementById(G):G).setAttribute("role","region"),J.setAttribute("aria-label",_.title)},_removeARIANodes:function(G){var _,J,Z;typeof(Z=G.document||document)=="object"&&(J=G.containerObj.getAttribute("aria-labelledby"),(_=Z.getElementById(J))&&_.parentNode&&_.parentNode.removeChild(_),J=G.containerObj.getAttribute("aria-describedby"),(_=Z.getElementById(J))&&_.parentNode&&_.parentNode.removeChild(_))},initBoard:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue,de,me,fe=0,_e=0,ye={};return(_=_||{}).theme!=="default"&&utils_type.A.exists(jxg.A.themes[_.theme])&&(ye=jxg.A.themes[_.theme]),de=utils_type.A.deepCopy(src_options.A,ye,!0),se=this._setAttributes(_,de),re=env.A.getDimensions(G,se.document),se.unitx||se.unity?(J=utils_type.A.def(se.originx,150),Z=utils_type.A.def(se.originy,150),Q=utils_type.A.def(se.unitx,50),ee=utils_type.A.def(se.unity,50)):((oe=se.boundingbox)[0]<se.maxboundingbox[0]&&(oe[0]=se.maxboundingbox[0]),oe[1]>se.maxboundingbox[1]&&(oe[1]=se.maxboundingbox[1]),oe[2]>se.maxboundingbox[2]&&(oe[2]=se.maxboundingbox[2]),oe[3]<se.maxboundingbox[3]&&(oe[3]=se.maxboundingbox[3]),te=parseInt(re.width,10),ne=parseInt(re.height,10),utils_type.A.exists(oe)&&se.keepaspectratio?(Q=te/(oe[2]-oe[0]),ee=ne/(oe[1]-oe[3]),Math.abs(Q)<Math.abs(ee)?_e=.5*(ne/(ee=Math.abs(Q)*ee/Math.abs(ee))-(oe[1]-oe[3])):fe=.5*(te/(Q=Math.abs(ee)*Q/Math.abs(Q))-(oe[2]-oe[0]))):(Q=te/(oe[2]-oe[0]),ee=ne/(oe[1]-oe[3])),J=-Q*(oe[0]-fe),Z=ee*(oe[1]+_e)),ie=this.initRenderer(G,re,se.document,se.renderer),this._setARIA(G,se),(me=new base_board(G,ie,se.id,[J,Z],se.zoomx,se.zoomy,Q,ee,re.width,re.height,se)).keepaspectratio=se.keepaspectratio,this._fillBoard(me,se,re),me.suspendUpdate(),(se=me.attr).axis&&(ae=typeof se.axis=="object"?se.axis:{},ce=utils_type.A.deepCopy(de.board.defaultaxes.x,ae),ue=utils_type.A.deepCopy(de.board.defaultaxes.y,ae),se.defaultaxes.x&&(ce=utils_type.A.deepCopy(ce,se.defaultaxes.x)),se.defaultaxes.y&&(ue=utils_type.A.deepCopy(ue,se.defaultaxes.y)),me.defaultAxes={},me.defaultAxes.x=me.create("axis",[[0,0],[1,0]],ce),me.defaultAxes.y=me.create("axis",[[0,0],[0,1]],ue)),se.grid&&me.create("grid",[],typeof se.grid=="object"?se.grid:{}),me.unsuspendUpdate(),me},loadBoardFromFile:function(G,_,J,Z,Q){var ee,te,ne,ie,re;return Z=Z||{},ee=this._setAttributes(Z),ie=env.A.getDimensions(G,ee.document),te=this.initRenderer(G,ie,ee.document,ee.renderer),this._setARIA(G,ee),ne=new base_board(G,te,"",[150,150],1,1,50,50,ie.width,ie.height,ee),this._fillBoard(ne,ee,ie),re=ee.encoding||"iso-8859-1",reader_file.parseFileContent(_,ne,J,!0,re,Q),ne},loadBoardFromString:function(G,_,J,Z,Q){var ee,te,ne,ie;return Z=Z||{},ee=this._setAttributes(Z),ie=env.A.getDimensions(G,ee.document),te=this.initRenderer(G,ie,ee.document,ee.renderer),this._setARIA(G,ee),ne=new base_board(G,te,"",[150,150],1,1,50,50,ie.width,ie.height,ee),this._fillBoard(ne,ee,ie),reader_file.parseString(_,ne,J,!0,Q),ne},freeBoard:function(G){var _;for(_ in typeof G=="string"&&(G=jxg.A.boards[G]),this._removeARIANodes(G),G.removeEventHandlers(),G.suspendUpdate(),G.objects)G.objects.hasOwnProperty(_)&&G.objects[_].remove();for(;G.containerObj.firstChild;)G.containerObj.removeChild(G.containerObj.firstChild);for(_ in G.objects)G.objects.hasOwnProperty(_)&&delete G.objects[_];delete G.renderer,G.jc.creator.clearCache(),delete G.jc,delete jxg.A.boards[G.id]},registerElement:function(G,_){jxg.A.deprecated("JXG.JSXGraph.registerElement()","JXG.registerElement()"),jxg.A.registerElement(G,_)}},env.A.isBrowser&&typeof window=="object"&&typeof document=="object"&&env.A.addEvent(window,"load",function(){var G,_,J,Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue,de,me,fe,_e=!1,ye=document.getElementsByTagName("script"),be=function(Ce,Me,Re){var Te=jxg.A.JSXGraph.initBoard(Q,{boundingbox:Re,keepaspectratio:!0,grid:ue,axis:ce,showReload:!0});if(Me.toLowerCase().indexOf("script")>-1)Te.construct(Ce);else try{Te.jc.parse(Ce)}catch(Ee){jxg.A.debug(Ee)}return Te},Se=function(Ce,Me,Re,Te){return function(){var Ee;jxg.A.JSXGraph.freeBoard(Ce),(Ee=be(Me,Re,Te)).reload=Se(Ee,Me,Re,Te)}};for(_=0;_<ye.length;_++)if(G=ye[_].getAttribute("type",!1),utils_type.A.exists(G)&&(G.toLowerCase()==="text/jessiescript"||G.toLowerCase()==="jessiescript"||G.toLowerCase()==="text/jessiecode"||G.toLowerCase()==="jessiecode")){if(se=ye[_].getAttribute("class",!1)||"",ne=ye[_].getAttribute("width",!1)||"",ie=ye[_].getAttribute("height",!1)||"",re=ye[_].getAttribute("maxwidth",!1)||"100%",oe=ye[_].getAttribute("aspectratio",!1)||"1/1",ae=ye[_].getAttribute("boundingbox",!1)||"-5, 5, 5, -5",Q=ye[_].getAttribute("container",!1),me=ye[_].getAttribute("src",!1),(ae=ae.split(",")).length!==4)ae=[-5,5,5,-5];else for(J=0;J<ae.length;J++)ae[J]=parseFloat(ae[J]);if(ce=utils_type.A.str2Bool(ye[_].getAttribute("axis",!1)||"false"),ue=utils_type.A.str2Bool(ye[_].getAttribute("grid",!1)||"false"),utils_type.A.exists(Q))Z=document.getElementById(Q);else{Q="jessiescript_autgen_jxg_"+_,(Z=document.createElement("div")).setAttribute("id",Q),te=ne!==""?"width:"+ne+";":"",te+=ie!==""?"height:"+ie+";":"",te+=re!==""?"max-width:"+re+";":"",te+=oe!==""?"aspect-ratio:"+oe+";":"",Z.setAttribute("style",te),Z.setAttribute("class","jxgbox "+se);try{document.body.insertBefore(Z,ye[_])}catch{utils_type.A.exists(jQuery)&&typeof jQuery=="object"&&jQuery(Z).insertBefore(ye[_])}}de="",utils_type.A.exists(me)?(_e=!0,(fe=new XMLHttpRequest).open("GET",me),fe.overrideMimeType("text/plain; charset=x-user-defined"),fe.addEventListener("load",function(){if(!(this.status<400))throw new Error(`
JSXGraph: failed to load file`,me,":",this.responseText);de=this.responseText+`
`+de,(ee=be(de,G,ae)).reload=Se(ee,de,G,ae)}),fe.addEventListener("error",function(Ce){throw new Error(`
JSXGraph: failed to load file`,me,":",Ce)}),fe.send()):_e=!1,document.getElementById(Q)?(de=(de=ye[_].innerHTML).replace(/<!\[CDATA\[/g,"").replace(/\]\]>/g,""),ye[_].innerHTML=de,_e||((ee=be(de,G,ae)).reload=Se(ee,de,G,ae))):jxg.A.debug("JSXGraph: Apparently the div injection failed. Can't create a board, sorry.")}},window),jxg.A.JSXGraph;var base_element=__webpack_require__(144),coordselement=__webpack_require__(102);jxg.A.Point=function(G,_,J){this.constructor(G,J,constants.A.OBJECT_TYPE_POINT,constants.A.OBJECT_CLASS_POINT),this.element=this.board.select(J.anchor),this.coordsConstructor(_),this.elType="point",this.id=this.board.setId(this,"P"),this.board.renderer.drawPoint(this),this.board.finalizeAdding(this),this.createGradient(),this.createLabel()},jxg.A.Point.prototype=new base_element.A,utils_type.A.copyPrototypeMethods(jxg.A.Point,coordselement.A,"coordsConstructor"),jxg.A.extend(jxg.A.Point.prototype,{hasPoint:function(G,_){var J,Z,Q,ee=this.coords.scrCoords,te=this.evalVisProp("sizeunit");return utils_type.A.isObject(this.evalVisProp("precision"))?(Q=this.board._inputDevice,Z=this.evalVisProp("precision."+Q)):Z=this.board.options.precision.hasPoint,J=parseFloat(this.evalVisProp("size")),te==="user"&&(J*=Math.sqrt(Math.abs(this.board.unitX*this.board.unitY))),(J+=.5*parseFloat(this.evalVisProp("strokewidth")))<Z&&(J=Z),Math.abs(ee[1]-G)<J+2&&Math.abs(ee[2]-_)<J+2},update:function(G){return this.needsUpdate?(this.updateCoords(G),this.evalVisProp("trace")&&this.cloneToBackground(!0),this):this},updateTransform:function(G){var _,J;if(this.transformations.length===0||this.baseElement===null)return this;for(this.transformations[0].update(),_=this===this.baseElement?this.transformations[0].apply(this,"self"):this.transformations[0].apply(this.baseElement),J=1;J<this.transformations.length;J++)this.transformations[J].update(),_=math.A.matVecMult(this.transformations[J].matrix,_);return this.coords.setCoordinates(constants.A.COORDS_BY_USER,_),this},updateRenderer:function(){return this.updateRendererGeneric("updatePoint"),this},bounds:function(){return this.coords.usrCoords.slice(1).concat(this.coords.usrCoords.slice(1))},makeIntersection:function(G,_,J,Z){var Q;G=this.board.select(G),_=this.board.select(_),Q=geometry.A.intersectionFunction(this.board,G,_,J,Z,this.visProp.alwaysintersect),this.addConstraint([Q]);try{G.addChild(this),_.addChild(this)}catch{throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof G+"' and '"+typeof _+"'.")}this.type=constants.A.OBJECT_TYPE_INTERSECTION,this.elType="intersection",this.parents=[G.id,_.id,J,Z],this.generatePolynomial=function(){var ee=G.generatePolynomial(this),te=_.generatePolynomial(this);return ee.length===0||te.length===0?[]:[ee[0],te[0]]},this.prepareUpdate().update()},setStyle:function(G){return this.visProp.face=["cross","cross","cross","circle","circle","circle","circle","square","square","square","plus","plus","plus"][G],this.visProp.size=[2,3,4,1,2,3,4,2,3,4,2,3,4][G],this.board.renderer.changePointStyle(this),this},normalizeFace:function(G){return jxg.A.deprecated("Point.normalizeFace()","JXG.normalizePointFace()"),src_options.A.normalizePointFace(G)},face:function(G){jxg.A.deprecated("Point.face()","Point.setAttribute()"),this.setAttribute({face:G})},size:function(G){jxg.A.deprecated("Point.size()","Point.setAttribute()"),this.setAttribute({size:G})},isOn:function(G,_){var J,Z;return _=_||math.A.eps,utils_type.A.isPoint(G)?this.Dist(G)<_:G.elementClass===constants.A.OBJECT_CLASS_LINE?(G.elType!=="segment"||this.evalVisProp("alwaysintersect")||(J=jxg.A.Math.Geometry.projectCoordsToSegment(this.coords.usrCoords,G.point1.coords.usrCoords,G.point2.coords.usrCoords))[1]>=0&&J[1]<=1)&&geometry.A.distPointLine(this.coords.usrCoords,G.stdform)<_:G.elementClass===constants.A.OBJECT_CLASS_CIRCLE?G.evalVisProp("hasinnerpoints")?this.Dist(G.center)<G.Radius()+_:Math.abs(this.Dist(G.center)-G.Radius())<_:G.elementClass===constants.A.OBJECT_CLASS_CURVE?(Z=geometry.A.projectPointToCurve(this,G,this.board)[0],geometry.A.distance(this.coords.usrCoords,Z.usrCoords,3)<_):G.type===constants.A.OBJECT_TYPE_POLYGON?!(!G.evalVisProp("hasinnerpoints")||!G.pnpoly(this.coords.usrCoords[1],this.coords.usrCoords[2],jxg.A.COORDS_BY_USER))||(J=geometry.A.projectCoordsToPolygon(this.coords.usrCoords,G),geometry.A.distance(this.coords.usrCoords,J,3)<_):G.type===constants.A.OBJECT_TYPE_TURTLE&&(Z=geometry.A.projectPointToTurtle(this,G,this.board),geometry.A.distance(this.coords.usrCoords,Z.usrCoords,3)<_)},cloneToBackground:function(){var G=utils_type.A.getCloneObject(this);return this.board.renderer.drawPoint(G),this.traces[G.id]=G.rendNode,this}}),jxg.A.createPoint=function(G,_,J){var Z,Q;if(Q=utils_type.A.copyAttributes(J,G.options,"point"),!(Z=coordselement.A.create(jxg.A.Point,G,_,Q)))throw new Error("JSXGraph: Can't create point with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [x,y], [z,x,y], [element,transformation]`);return Z},jxg.A.createGlider=function(G,_,J){var Z,Q,ee=utils_type.A.copyAttributes(J,G.options,"glider");return Q=_.length===1?[0,0]:_.slice(0,2),(Z=G.create("point",Q,ee)).makeGlider(_[_.length-1]),Z},jxg.A.createIntersectionPoint=function(G,_,J){var Z,Q,ee,te,ne,ie,re=utils_type.A.copyAttributes(J,G.options,"intersection");_.push(0,0),Q=G.select(_[0]),ee=G.select(_[1]),ne=_[2]||0,ie=_[3]||0,Z=G.create("point",[0,0,0],re),te=geometry.A.intersectionFunction(G,Q,ee,ne,ie,Z.visProp.alwaysintersect),Z.addConstraint([te]);try{Q.addChild(Z),ee.addChild(Z)}catch{throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"'.")}return Z.type=constants.A.OBJECT_TYPE_INTERSECTION,Z.elType="intersection",Z.setParents([Q.id,ee.id]),Z.intersectionNumbers=[ne,ie],Z.getParents=function(){return this.parents.concat(this.intersectionNumbers)},Z.generatePolynomial=function(){var oe=Q.generatePolynomial(Z),se=ee.generatePolynomial(Z);return oe.length===0||se.length===0?[]:[oe[0],se[0]]},Z},jxg.A.createOtherIntersectionPoint=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe=!0,se=utils_type.A.copyAttributes(J,G.options,"otherintersection");if(_.length!==3)oe=!1;else{for(Q=G.select(_[0]),ee=G.select(_[1]),ne=utils_type.A.isArray(_[2])?_[2]:[_[2]],te=0;te<ne.length;te++)if(ne[te]=G.select(ne[te]),!utils_type.A.isPoint(ne[te])){oe=!1;break}oe&&((re=[Q,ee]).sort(function(ae,ce){return ce.elementClass-ae.elementClass}),([constants.A.OBJECT_CLASS_CIRCLE,constants.A.OBJECT_CLASS_CURVE].indexOf(re[0].elementClass)<0||[constants.A.OBJECT_CLASS_CIRCLE,constants.A.OBJECT_CLASS_CURVE,constants.A.OBJECT_CLASS_LINE].indexOf(re[1].elementClass)<0)&&(oe=!1))}if(!oe)throw new Error("JSXGraph: Can't create 'other intersection point' with parent types '"+typeof _[0]+"',  '"+typeof _[1]+"'and  '"+typeof _[2]+`'.
Possible parent types: [circle|curve|line,circle|curve|line, point], not two lines`);return Z=G.create("point",[0,0,0],se),ie=geometry.A.otherIntersectionFunction(re,ne,Z.visProp.alwaysintersect,Z.visProp.precision),Z.addConstraint([ie]),Z.type=constants.A.OBJECT_TYPE_INTERSECTION,Z.elType="otherintersection",Z.setParents([Q.id,ee.id]),Z.addParents(ne),Q.addChild(Z),ee.addChild(Z),Q.elementClass===constants.A.OBJECT_CLASS_CIRCLE&&(Z.generatePolynomial=function(){var ae=Q.generatePolynomial(Z),ce=ee.generatePolynomial(Z);return ae.length===0||ce.length===0?[]:[ae[0],ce[0]]}),Z},jxg.A.createPolePoint=function(G,_,J){var Z,Q,ee,te,ne,ie,re;if(_.length>1&&(te=_[0].type===constants.A.OBJECT_TYPE_CONIC||_[0].elementClass===constants.A.OBJECT_CLASS_CIRCLE,ne=_[1].type===constants.A.OBJECT_TYPE_CONIC||_[1].elementClass===constants.A.OBJECT_CLASS_CIRCLE,ie=_[0].elementClass===constants.A.OBJECT_CLASS_LINE,re=_[1].elementClass===constants.A.OBJECT_CLASS_LINE),_.length!==2||!(te&&re||ie&&ne))throw new Error("JSXGraph: Can't create 'pole point' with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent type: [conic|circle,line], [line,conic|circle]`);return re?(Q=G.select(_[0]),ee=G.select(_[1])):(Q=G.select(_[1]),ee=G.select(_[0])),(Z=G.create("point",[function(){var oe=Q.quadraticform,se=ee.stdform.slice(0,3);return[jxg.A.Math.Numerics.det([se,oe[1],oe[2]]),jxg.A.Math.Numerics.det([oe[0],se,oe[2]]),jxg.A.Math.Numerics.det([oe[0],oe[1],se])]}],J)).elType="polepoint",Z.setParents([Q.id,ee.id]),Q.addChild(Z),ee.addChild(Z),Z},jxg.A.registerElement("point",jxg.A.createPoint),jxg.A.registerElement("glider",jxg.A.createGlider),jxg.A.registerElement("intersection",jxg.A.createIntersectionPoint),jxg.A.registerElement("otherintersection",jxg.A.createOtherIntersectionPoint),jxg.A.registerElement("polepoint",jxg.A.createPolePoint);var point=jxg.A.Point;jxg.A.Line=function(G,_,J,Z){this.constructor(G,Z,constants.A.OBJECT_TYPE_LINE,constants.A.OBJECT_CLASS_LINE),this.point1=this.board.select(_),this.point2=this.board.select(J),this.ticks=[],this.defaultTicks=null,this.parentPolygon=null,this.id=this.board.setId(this,"L"),this.board.renderer.drawLine(this),this.board.finalizeAdding(this),this.elType="line",this.point1._is_new?(this.addChild(this.point1),delete this.point1._is_new):this.point1.addChild(this),this.point2._is_new?(this.addChild(this.point2),delete this.point2._is_new):this.point2.addChild(this),this.inherits.push(this.point1,this.point2),this.updateStdform(),this.createLabel(),this.methodMap=jxg.A.deepCopy(this.methodMap,{point1:"point1",point2:"point2",getSlope:"Slope",Slope:"Slope",Direction:"Direction",getRise:"getRise",Rise:"getRise",getYIntersect:"getRise",YIntersect:"getRise",getAngle:"getAngle",Angle:"getAngle",L:"L",length:"L",setFixedLength:"setFixedLength",setStraight:"setStraight"})},jxg.A.Line.prototype=new base_element.A,jxg.A.extend(jxg.A.Line.prototype,{hasPoint:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se=[],ae=[1,G,_],ce=this.evalVisProp("strokewidth");return utils_type.A.isObject(this.evalVisProp("precision"))?(oe=this.board._inputDevice,re=this.evalVisProp("precision."+oe)):re=this.board.options.precision.hasPoint,re+=.5*ce,se[0]=this.stdform[0]-this.stdform[1]*this.board.origin.scrCoords[1]/this.board.unitX+this.stdform[2]*this.board.origin.scrCoords[2]/this.board.unitY,se[1]=this.stdform[1]/this.board.unitX,se[2]=this.stdform[2]/-this.board.unitY,J=geometry.A.distPointLine(ae,se),!(isNaN(J)||J>re)&&(!(!this.evalVisProp("straightfirst")||!this.evalVisProp("straightlast"))||(Q=this.point1.coords,ee=this.point2.coords,Z=[0,se[1],se[2]],Z=math.A.crossProduct(Z,ae),(Z=math.A.crossProduct(Z,se))[1]/=Z[0],Z[2]/=Z[0],Z[0]=1,Z=new base_coords.A(constants.A.COORDS_BY_SCREEN,Z.slice(1),this.board).usrCoords,te=Q.distance(constants.A.COORDS_BY_USER,ee),Q=Q.usrCoords.slice(0),ee=ee.usrCoords.slice(0),te<math.A.eps?ne=0:(te===Number.POSITIVE_INFINITY&&(te=1/math.A.eps,Math.abs(ee[0])<math.A.eps?(te/=geometry.A.distance([0,0,0],ee),ee=[1,Q[1]+ee[1]*te,Q[2]+ee[2]*te]):(te/=geometry.A.distance([0,0,0],Q),Q=[1,ee[1]+Q[1]*te,ee[2]+Q[2]*te])),te=ee[ie=1]-Q[ie],Math.abs(te)<math.A.eps&&(te=ee[ie=2]-Q[ie]),ne=(Z[ie]-Q[ie])/te),!(!this.evalVisProp("straightfirst")&&ne<0)&&!(!this.evalVisProp("straightlast")&&ne>1)))},update:function(){var G;return this.needsUpdate?(this.constrained&&(utils_type.A.isFunction(this.funps)?(G=this.funps())&&G.length&&G.length===2&&(this.point1=G[0],this.point2=G[1]):(utils_type.A.isFunction(this.funp1)&&(G=this.funp1(),utils_type.A.isPoint(G)?this.point1=G:G&&G.length&&G.length===2&&this.point1.setPositionDirectly(constants.A.COORDS_BY_USER,G)),utils_type.A.isFunction(this.funp2)&&(G=this.funp2(),utils_type.A.isPoint(G)?this.point2=G:G&&G.length&&G.length===2&&this.point2.setPositionDirectly(constants.A.COORDS_BY_USER,G)))),this.updateSegmentFixedLength(),this.updateStdform(),this.evalVisProp("trace")&&this.cloneToBackground(!0),this):this},updateSegmentFixedLength:function(){var G,_,J,Z,Q,ee,te,ne;return this.hasFixedLength?(G=this.point1.Dist(this.point2),_=this.evalVisProp("nonnegativeonly")?Math.max(0,this.fixedLength()):Math.abs(this.fixedLength()),J=this.fixedLengthOldCoords[0].distance(constants.A.COORDS_BY_USER,this.point1.coords),Z=this.fixedLengthOldCoords[1].distance(constants.A.COORDS_BY_USER,this.point2.coords),(J>math.A.eps||Z>math.A.eps||G!==_)&&(Q=this.point1.isDraggable&&this.point1.type!==constants.A.OBJECT_TYPE_GLIDER&&!this.point1.evalVisProp("fixed"),ee=this.point2.isDraggable&&this.point2.type!==constants.A.OBJECT_TYPE_GLIDER&&!this.point2.evalVisProp("fixed"),G>math.A.eps?J>Z&&ee||J<=Z&&ee&&!Q?(this.point2.setPositionDirectly(constants.A.COORDS_BY_USER,[this.point1.X()+(this.point2.X()-this.point1.X())*_/G,this.point1.Y()+(this.point2.Y()-this.point1.Y())*_/G]),this.point2.fullUpdate()):(J<=Z&&Q||J>Z&&Q&&!ee)&&(this.point1.setPositionDirectly(constants.A.COORDS_BY_USER,[this.point2.X()+(this.point1.X()-this.point2.X())*_/G,this.point2.Y()+(this.point1.Y()-this.point2.Y())*_/G]),this.point1.fullUpdate()):(te=Math.random()-.5,ne=Math.random()-.5,G=math.A.hypot(te,ne),ee?(this.point2.setPositionDirectly(constants.A.COORDS_BY_USER,[this.point1.X()+te*_/G,this.point1.Y()+ne*_/G]),this.point2.fullUpdate()):Q&&(this.point1.setPositionDirectly(constants.A.COORDS_BY_USER,[this.point2.X()+te*_/G,this.point2.Y()+ne*_/G]),this.point1.fullUpdate())),this.fixedLengthOldCoords[0].setCoordinates(constants.A.COORDS_BY_USER,this.point1.coords.usrCoords),this.fixedLengthOldCoords[1].setCoordinates(constants.A.COORDS_BY_USER,this.point2.coords.usrCoords)),this):this},updateStdform:function(){var G=math.A.crossProduct(this.point1.coords.usrCoords,this.point2.coords.usrCoords);this.stdform[0]=G[0],this.stdform[1]=G[1],this.stdform[2]=G[2],this.stdform[3]=0,this.normalize()},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.point1.coords.usrCoords[1]+this.point1.coords.usrCoords[2]+this.point2.coords.usrCoords[1]+this.point2.coords.usrCoords[2])&&math.A.innerProduct(this.stdform,this.stdform,3)>=math.A.eps*math.A.eps,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateLine(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},generatePolynomial:function(G){var _=this.point1.symbolic.x,J=this.point1.symbolic.y,Z=this.point2.symbolic.x,Q=this.point2.symbolic.y,ee=G.symbolic.x,te=G.symbolic.y;return[["(",J,")*(",ee,")-(",J,")*(",Z,")+(",te,")*(",Z,")-(",_,")*(",te,")+(",_,")*(",Q,")-(",ee,")*(",Q,")"].join("")]},getRise:function(){return Math.abs(this.stdform[2])>=math.A.eps?-this.stdform[0]/this.stdform[2]:1/0},Slope:function(){return Math.abs(this.stdform[2])>=math.A.eps?-this.stdform[1]/this.stdform[2]:1/0},getSlope:function(){return this.Slope()},getAngle:function(){return Math.atan2(-this.stdform[1],this.stdform[2])},Direction:function(){var G=this.point1.coords.usrCoords,_=this.point2.coords.usrCoords;return _[0]===0&&G[0]!==0?_.slice(1):G[0]===0&&_[0]!==0?[-G[1],-G[2]]:[_[1]-G[1],_[2]-G[2]]},isVertical:function(){var G=this.Direction();return G[0]===0&&G[1]!==0},isHorizontal:function(){var G=this.Direction();return G[1]===0&&G[0]!==0},setStraight:function(G,_){return this.visProp.straightfirst=G,this.visProp.straightlast=_,this.board.renderer.updateLine(this),this},getTextAnchor:function(){return new base_coords.A(constants.A.COORDS_BY_USER,[.5*(this.point2.X()+this.point1.X()),.5*(this.point2.Y()+this.point1.Y())],this.board)},setLabelRelativeCoords:function(G){utils_type.A.exists(this.label)&&(this.label.relativeCoords=new base_coords.A(constants.A.COORDS_BY_SCREEN,[G[0],-G[1]],this.board))},getLabelAnchor:function(){var G,_,J,Z,Q,ee,te,ne,ie=1.5,re=0,oe=new base_coords.A(constants.A.COORDS_BY_USER,this.point1.coords.usrCoords,this.board),se=new base_coords.A(constants.A.COORDS_BY_USER,this.point2.coords.usrCoords,this.board),ae=this.evalVisProp("straightfirst"),ce=this.evalVisProp("straightlast");if((ae||ce)&&geometry.A.calcStraight(this,oe,se,0),oe=oe.scrCoords,se=se.scrCoords,!utils_type.A.exists(this.label))return new base_coords.A(constants.A.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(J=this.label.evalVisProp("position"),!utils_type.A.isString(J))return new base_coords.A(constants.A.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(J.indexOf("right")<0&&J.indexOf("left")<0)switch(J){case"last":G=se[1],_=se[2];break;case"first":G=oe[1],_=oe[2];break;case"lft":case"llft":case"ulft":oe[1]<se[1]+math.A.eps?(G=oe[1],_=oe[2]):(G=se[1],_=se[2]);break;case"rt":case"lrt":case"urt":oe[1]>se[1]+math.A.eps?(G=oe[1],_=oe[2]):(G=se[1],_=se[2]);break;default:G=.5*(oe[1]+se[1]),_=.5*(oe[2]+se[2])}else Z=utils_type.A.parsePosition(J),Q=utils_type.A.parseNumber(Z.pos,1,1),ee=se[1]-oe[1],te=se[2]-oe[2],ne=math.A.hypot(ee,te),Z.pos.indexOf("px")>=0||Z.pos.indexOf("fr")>=0||Z.pos.indexOf("%")>=0?(Z.pos.indexOf("px")>=0&&(Q/=ne),G=oe[1]+Q*ee,_=oe[2]+Q*te):(G=oe[1]+Q*this.board.unitX*ee/ne,_=oe[2]+Q*this.board.unitY*te/ne),Z.side==="left"?ee*=-1:te*=-1,utils_type.A.exists(this.label)&&(ie=.5*this.label.evalVisProp("distance")/ne),G+=te*this.label.size[0]*ie,_+=ee*this.label.size[1]*ie;return(ae||ce)&&(utils_type.A.exists(this.label)&&(re=this.label.evalVisProp("fontsize")),Math.abs(G)<math.A.eps?G=re:this.board.canvasWidth+math.A.eps>G&&G>this.board.canvasWidth-re-math.A.eps&&(G=this.board.canvasWidth-re),math.A.eps+re>_&&_>-math.A.eps?_=re:this.board.canvasHeight+math.A.eps>_&&_>this.board.canvasHeight-re-math.A.eps&&(_=this.board.canvasHeight-re)),new base_coords.A(constants.A.COORDS_BY_SCREEN,[G,_],this.board)},cloneToBackground:function(){var G,_,J,Z=utils_type.A.getCloneObject(this);return Z.point1=this.point1,Z.point2=this.point2,Z.stdform=this.stdform,_=this.getSlope(),G=this.getRise(),Z.getSlope=function(){return _},Z.getRise=function(){return G},J=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawLine(Z),this.board.renderer.enhancedRendering=J,this.traces[Z.id]=Z.rendNode,this},addTransform:function(G){var _,J=utils_type.A.isArray(G)?G:[G],Z=J.length;for(_=0;_<Z;_++)this.point1.transformations.push(J[_]),this.point2.transformations.push(J[_]);return this},snapToGrid:function(G){var _,J,Z,Q,ee,te,ne,ie;return this.evalVisProp("snaptogrid")?this.parents.length<3?(this.point1.handleSnapToGrid(!0,!0),this.point2.handleSnapToGrid(!0,!0)):utils_type.A.exists(G)&&(ne=this.evalVisProp("snapsizex"),ie=this.evalVisProp("snapsizey"),ee=(_=new base_coords.A(constants.A.COORDS_BY_SCREEN,[G.Xprev,G.Yprev],this.board)).usrCoords[1],te=_.usrCoords[2],ne<=0&&this.board.defaultAxes&&this.board.defaultAxes.x.defaultTicks&&(ne=(Q=this.board.defaultAxes.x.defaultTicks).ticksDelta*(Q.evalVisProp("minorticks")+1)),ie<=0&&this.board.defaultAxes&&this.board.defaultAxes.y.defaultTicks&&(ie=(Q=this.board.defaultAxes.y.defaultTicks).ticksDelta*(Q.evalVisProp("minorticks")+1)),ne>0&&ie>0&&(J=geometry.A.projectPointToLine({coords:_},this,this.board),Z=statistics.A.subtract([1,Math.round(ee/ne)*ne,Math.round(te/ie)*ie],J.usrCoords),this.board.create("transform",Z.slice(1),{type:"translate"}).applyOnce([this.point1,this.point2]))):(this.point1.handleSnapToGrid(!1,!0),this.point2.handleSnapToGrid(!1,!0)),this},snapToPoints:function(){var G=this.evalVisProp("snaptopoints");return this.parents.length<3&&(this.point1.handleSnapToPoints(G),this.point2.handleSnapToPoints(G)),this},X:function(G){var _=this.point1.coords.usrCoords,J=this.point2.coords.usrCoords,Z=this.stdform[2];return _[0]!==0?J[0]!==0?_[1]+(J[1]-_[1])*G:_[1]+1e5*Z*G:_[0]!==0?J[1]-(_[1]-J[1])*G:J[1]+1e5*Z*G},Y:function(G){var _=this.point1.coords.usrCoords,J=this.point2.coords.usrCoords,Z=this.stdform[1];return _[0]!==0?J[0]!==0?_[2]+(J[2]-_[2])*G:_[2]-1e5*Z*G:_[0]!==0?J[2]-(_[2]-J[2])*G:J[2]-1e5*Z*G},Z:function(G){var _=this.point1.coords.usrCoords,J=this.point2.coords.usrCoords;return G===1&&_[0]*J[0]===0?0:1},Ft:function(G){var _=[this.Z(G),this.X(G),this.Y(G)];return _[1]/=_[0],_[2]/=_[0],_[0]/=_[0],_},L:function(){return this.point1.Dist(this.point2)},setFixedLength:function(G){return this.hasFixedLength?(this.fixedLength=utils_type.A.createFunction(G,this.board),this.hasFixedLength=!0,this.addParentsFromJCFunctions([this.fixedLength]),this.board.update(),this):this},minX:function(){return 0},maxX:function(){return 1},bounds:function(){var G=this.point1.coords.usrCoords,_=this.point2.coords.usrCoords;return[Math.min(G[1],_[1]),Math.max(G[2],_[2]),Math.max(G[1],_[1]),Math.min(G[2],_[2])]},remove:function(){this.removeAllTicks(),base_element.A.prototype.remove.call(this)}}),jxg.A.createLine=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe=[],se=!1,ae=!1;if(_.length===2){if(ie=utils_type.A.copyAttributes(J,G.options,"line","point1"),utils_type.A.isArray(_[0])&&_[0].length>1)ee=G.create("point",_[0],ie);else if(utils_type.A.isString(_[0])||utils_type.A.isPoint(_[0]))ee=G.select(_[0]);else if(utils_type.A.isFunction(_[0])&&utils_type.A.isPoint(_[0]()))ee=_[0](),ae=!0;else if(utils_type.A.isFunction(_[0])&&_[0]().length&&_[0]().length>=2)ee=jxg.A.createPoint(G,_[0](),ie),ae=!0;else{if(!utils_type.A.isObject(_[0])||!utils_type.A.isTransformationOrArray(_[1]))throw new Error("JSXGraph: Can't create line with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]`);se=!0,ee=G.create("point",[_[0].point1,_[1]],ie)}if(ie=utils_type.A.copyAttributes(J,G.options,"line","point2"),se)te=G.create("point",[_[0].point2,_[1]],ie);else if(utils_type.A.isArray(_[1])&&_[1].length>1)te=G.create("point",_[1],ie);else if(utils_type.A.isString(_[1])||utils_type.A.isPoint(_[1]))te=G.select(_[1]);else if(utils_type.A.isFunction(_[1])&&utils_type.A.isPoint(_[1]()))te=_[1](),ae=!0;else{if(!(utils_type.A.isFunction(_[1])&&_[1]().length&&_[1]().length>=2))throw new Error("JSXGraph: Can't create line with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]`);te=jxg.A.createPoint(G,_[1](),ie),ae=!0}ie=utils_type.A.copyAttributes(J,G.options,"line"),Q=new jxg.A.Line(G,ee,te,ie),ae?(Q.constrained=!0,Q.funp1=_[0],Q.funp2=_[1]):se||(Q.isDraggable=!0),Q.setParents([ee.id,te.id])}else if(_.length===3){for(re=!0,ne=0;ne<3;ne++)if(utils_type.A.isNumber(_[ne]))oe[ne]=utils_type.A.createFunction(_[ne]);else{if(!utils_type.A.isFunction(_[ne]))throw new Error("JSXGraph: Can't create line with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]`);oe[ne]=_[ne],re=!1}ie=utils_type.A.copyAttributes(J,G.options,"line","point1"),ee=re?G.create("point",[oe[2]()*oe[2]()+oe[1]()*oe[1](),oe[2]()-oe[1]()*oe[0]()+oe[2](),-oe[1]()-oe[2]()*oe[0]()-oe[1]()],ie):G.create("point",[function(){return .5*(oe[2]()*oe[2]()+oe[1]()*oe[1]())},function(){return .5*(oe[2]()-oe[1]()*oe[0]()+oe[2]())},function(){return .5*(-oe[1]()-oe[2]()*oe[0]()-oe[1]())}],ie),ie=utils_type.A.copyAttributes(J,G.options,"line","point2"),te=re?G.create("point",[oe[2]()*oe[2]()+oe[1]()*oe[1](),-oe[1]()*oe[0]()+oe[2](),-oe[2]()*oe[0]()-oe[1]()],ie):G.create("point",[function(){return oe[2]()*oe[2]()+oe[1]()*oe[1]()},function(){return-oe[1]()*oe[0]()+oe[2]()},function(){return-oe[2]()*oe[0]()-oe[1]()}],ie),ee.prepareUpdate().update(),te.prepareUpdate().update(),ie=utils_type.A.copyAttributes(J,G.options,"line"),(Q=new jxg.A.Line(G,ee,te,ie)).isDraggable=re,Q.setParents([ee,te])}else if(_.length===1&&utils_type.A.isFunction(_[0])&&_[0]().length===2&&utils_type.A.isPoint(_[0]()[0])&&utils_type.A.isPoint(_[0]()[1]))Z=_[0](),ie=utils_type.A.copyAttributes(J,G.options,"line"),(Q=new jxg.A.Line(G,Z[0],Z[1],ie)).constrained=!0,Q.funps=_[0],Q.setParents(Z);else{if(!(_.length===1&&utils_type.A.isFunction(_[0])&&_[0]().length===3&&utils_type.A.isNumber(_[0]()[0])&&utils_type.A.isNumber(_[0]()[1])&&utils_type.A.isNumber(_[0]()[2])))throw new Error("JSXGraph: Can't create line with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]`);Z=_[0],ie=utils_type.A.copyAttributes(J,G.options,"line","point1"),ee=G.create("point",[function(){var ce=Z();return[.5*(ce[2]*ce[2]+ce[1]*ce[1]),.5*(ce[2]-ce[1]*ce[0]+ce[2]),.5*(-ce[1]-ce[2]*ce[0]-ce[1])]}],ie),ie=utils_type.A.copyAttributes(J,G.options,"line","point2"),te=G.create("point",[function(){var ce=Z();return[ce[2]*ce[2]+ce[1]*ce[1],-ce[1]*ce[0]+ce[2],-ce[2]*ce[0]-ce[1]]}],ie),ie=utils_type.A.copyAttributes(J,G.options,"line"),(Q=new jxg.A.Line(G,ee,te,ie)).constrained=!0,Q.funps=_[0],Q.setParents([ee,te])}return Q},jxg.A.registerElement("line",jxg.A.createLine),jxg.A.createSegment=function(G,_,J){var Z,Q;if(J.straightFirst=!1,J.straightLast=!1,Q=utils_type.A.copyAttributes(J,G.options,"segment"),Z=G.create("line",_.slice(0,2),Q),_.length===3){try{Z.hasFixedLength=!0,Z.fixedLengthOldCoords=[],Z.fixedLengthOldCoords[0]=new base_coords.A(constants.A.COORDS_BY_USER,Z.point1.coords.usrCoords.slice(1,3),G),Z.fixedLengthOldCoords[1]=new base_coords.A(constants.A.COORDS_BY_USER,Z.point2.coords.usrCoords.slice(1,3),G),Z.setFixedLength(_[2])}catch{throw new Error("JSXGraph: Can't create segment with third parent type '"+typeof _[2]+`'.
Possible third parent types: number or function`)}Z.getParents=function(){return this.parents.concat(this.fixedLength())}}return Z.elType="segment",Z},jxg.A.registerElement("segment",jxg.A.createSegment),jxg.A.createArrow=function(G,_,J){var Z,Q;return J.straightFirst=!1,J.straightLast=!1,Q=utils_type.A.copyAttributes(J,G.options,"arrow"),(Z=G.create("line",_,Q)).type=constants.A.OBJECT_TYPE_VECTOR,Z.elType="arrow",Z},jxg.A.registerElement("arrow",jxg.A.createArrow),jxg.A.createAxis=function(G,_,J){var Z,Q,ee,te;Q=utils_type.A.copyAttributes(J,G.options,"axis");try{Z=G.create("line",_,Q)}catch{throw new Error("JSXGraph: Can't create axis with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]]`)}for(ee in Z.type=constants.A.OBJECT_TYPE_AXIS,Z.isDraggable=!1,Z.point1.isDraggable=!1,Z.point2.isDraggable=!1,Z._point1UsrCoordsOrg=Z.point1.coords.usrCoords.slice(),Z._point2UsrCoordsOrg=Z.point2.coords.usrCoords.slice(),Z.ancestors)Z.ancestors.hasOwnProperty(ee)&&(Z.ancestors[ee].type=constants.A.OBJECT_TYPE_AXISPOINT);return te=utils_type.A.exists(Q.ticks.ticksdistance)?Q.ticks.ticksdistance:utils_type.A.isArray(Q.ticks.ticks)?Q.ticks.ticks:1,Z.defaultTicks=G.create("ticks",[Z,te],Q.ticks),Z.defaultTicks.dump=!1,Z.elType="axis",Z.subs={ticks:Z.defaultTicks},Z.inherits.push(Z.defaultTicks),Z.update=function(){var ne,ie,re,oe,se,ae,ce,ue,de,me,fe,_e,ye,be,Se,Ce,Me,Re,Te;if(!this.needsUpdate)return this;if(ne=this.board.getBoundingBox(),ie=this.evalVisProp("position"),oe=this.Direction(),se=this.isHorizontal(),ae=this.isVertical(),ce=this.evalVisProp("ticksautopos"),ue=this.evalVisProp("ticksautoposthreshold"),ue=se?utils_type.A.parseNumber(ue,Math.abs(ne[1]-ne[3]),1/this.board.unitX)*this.board.unitX:ae?utils_type.A.parseNumber(ue,Math.abs(ne[1]-ne[3]),1/this.board.unitY)*this.board.unitY:utils_type.A.parseNumber(ue,1,1),fe=(me=this.evalVisProp("anchor")).indexOf("left")>-1,_e=me.indexOf("right")>-1,ye=this.evalVisProp("anchordist"),ye=se?utils_type.A.parseNumber(ye,Math.abs(ne[1]-ne[3]),1/this.board.unitX):ae?utils_type.A.parseNumber(ye,Math.abs(ne[0]-ne[2]),1/this.board.unitY):0,Ce=this.board.getPointLoc(this._point1UsrCoordsOrg,ye),be=this.point1.coords.usrCoords.slice(),Se=this.point2.coords.usrCoords.slice(),ie==="static"||!ae&&!se||(ie==="fixed"?(se&&(oe[0]>0&&_e||oe[0]<0&&fe?(be[2]=ne[3]+ye,Se[2]=ne[3]+ye):oe[0]>0&&fe||oe[0]<0&&_e?(be[2]=ne[1]-ye,Se[2]=ne[1]-ye):(be=this._point1UsrCoordsOrg.slice(),Se=this._point2UsrCoordsOrg.slice())),ae&&(oe[1]>0&&fe||oe[1]<0&&_e?(be[1]=ne[0]+ye,Se[1]=ne[0]+ye):oe[1]>0&&_e||oe[1]<0&&fe?(be[1]=ne[2]-ye,Se[1]=ne[2]-ye):(be=this._point1UsrCoordsOrg.slice(),Se=this._point2UsrCoordsOrg.slice()))):ie==="sticky"&&(se&&(Ce[1]<0&&(oe[0]>0&&_e||oe[0]<0&&fe)?(be[2]=ne[3]+ye,Se[2]=ne[3]+ye):Ce[1]>0&&(oe[0]>0&&fe||oe[0]<0&&_e)?(be[2]=ne[1]-ye,Se[2]=ne[1]-ye):(be=this._point1UsrCoordsOrg.slice(),Se=this._point2UsrCoordsOrg.slice())),ae&&(Ce[0]<0&&(oe[1]>0&&fe||oe[1]<0&&_e)?(be[1]=ne[0]+ye,Se[1]=ne[0]+ye):Ce[0]>0&&(oe[1]>0&&_e||oe[1]<0&&fe)?(be[1]=ne[2]-ye,Se[1]=ne[2]-ye):(be=this._point1UsrCoordsOrg.slice(),Se=this._point2UsrCoordsOrg.slice())))),this.point1.setPositionDirectly(jxg.A.COORDS_BY_USER,be),this.point2.setPositionDirectly(jxg.A.COORDS_BY_USER,Se),utils_type.A.exists(this.defaultTicks)){if(Me=this.defaultTicks.visProp.label,ce&&(se||ae)){if(utils_type.A.exists(Me._anchorx_org)||(Me._anchorx_org=utils_type.A.def(Me.anchorx,this.board.options.text.anchorX)),utils_type.A.exists(Me._anchory_org)||(Me._anchory_org=utils_type.A.def(Me.anchory,this.board.options.text.anchorY)),utils_type.A.exists(Me._offset_org)||(Me._offset_org=Me.offset.slice()),Te=Me.offset,se){for(de=Z.point1.coords.scrCoords[2]-.5*this.board.canvasHeight,Re=Me.anchory,de<0&&Math.abs(de)>ue?Me._side==="bottom"&&(Me.anchory==="top"&&(Re="bottom"),Te[1]*=-1,Me._side="top"):de>0&&Math.abs(de)>ue?Me._side==="top"&&(Me.anchory==="bottom"&&(Re="top"),Te[1]*=-1,Me._side="bottom"):(Re=Me._anchory_org,Te=Me._offset_org.slice(),Re==="top"?Me._side="bottom":Re==="bottom"?Me._side="top":Te[1]<0?Me._side="bottom":Me._side="top"),re=0;re<Z.defaultTicks.labels.length;re++)this.defaultTicks.labels[re].visProp.anchory=Re;Me.anchory=Re}else if(ae){for((de=Z.point1.coords.scrCoords[1]-.5*this.board.canvasWidth)<0&&Math.abs(de)>ue?Me._side==="right"&&(Me.anchorx==="left"&&(Re="right"),Te[0]*=-1,Me._side="left"):de>0&&Math.abs(de)>ue?Me._side==="left"&&(Me.anchorx==="right"&&(Re="left"),Te[0]*=-1,Me._side="right"):(Re=Me._anchorx_org,Te=Me._offset_org.slice(),Re==="left"?Me._side="right":Re==="right"||Te[0]<0?Me._side="left":Me._side="right"),re=0;re<Z.defaultTicks.labels.length;re++)this.defaultTicks.labels[re].visProp.anchorx=Re;Me.anchorx=Re}Me.offset=Te}else delete Me._anchorx_org,delete Me._anchory_org,delete Me._offset_org;this.defaultTicks.needsUpdate=!0}return jxg.A.Line.prototype.update.call(this),this},Z},jxg.A.registerElement("axis",jxg.A.createAxis),jxg.A.createTangent=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae=[];if(_.length===1)Z=_[0],Q=Z.slideObject;else{if(_.length!==2)throw new Error("JSXGraph: Can't create tangent with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [glider|point], [point,line|curve|circle|conic]`);if(utils_type.A.isPoint(_[0]))Z=_[0],Q=_[1];else{if(!utils_type.A.isPoint(_[1]))throw new Error("JSXGraph: Can't create tangent with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [glider|point], [point,line|curve|circle|conic]`);Q=_[0],Z=_[1]}}if(ie=utils_type.A.copyAttributes(J,G.options,"tangent"),Q.elementClass===constants.A.OBJECT_CLASS_LINE)(ne=G.create("line",[Q.point1,Q.point2],ie)).glider=Z;else if(Q.elementClass===constants.A.OBJECT_CLASS_CURVE&&Q.type!==constants.A.OBJECT_TYPE_CONIC){if(oe=Q.getTransformationSource(),se=oe[0])for(ae.push(Q);oe[0]&&utils_type.A.exists(oe[1]._transformationSource);)ae.push(oe[1]),oe=oe[1].getTransformationSource();Q.evalVisProp("curvetype")!=="plot"||se?(ne=G.create("line",[function(){var ce,ue,de,me,fe,_e,ye,be,Se=Q.X,Ce=Q.Y;if(be=Z.type===constants.A.OBJECT_TYPE_GLIDER?Z.position:Q.evalVisProp("curvetype")==="functiongraph"?Z.X():geometry.A.projectPointToCurve(Z,Q,G)[1],ye=Z.Coords(!0),se){for(Se=(fe=ae[ae.length-1]._transformationSource).X,Ce=fe.Y,me=0;me<ae.length;me++)ae[me].updateTransformMatrix(),_e=math.A.inverse(ae[me].transformMat),ye=math.A.matVecMult(_e,ye);Z.type!==constants.A.OBJECT_TYPE_GLIDER&&(ye[1]/=ye[0],ye[2]/=ye[0],ye[0]/=ye[0],be=geometry.A.projectCoordsToCurve(ye[1],ye[2],0,fe,G)[1])}if(ce=numerics.A.D(Ce)(be),ue=numerics.A.D(Se)(be),de=[-ye[1]*ce+ye[2]*ue,ye[0]*ce,-ye[0]*ue],se)for(me=ae.length-1;me>=0;me--)_e=math.A.transpose(math.A.inverse(ae[me].transformMat)),de=math.A.matVecMult(_e,de);return de}],ie),Z.addChild(ne),ne.glider=Z):(re=function(ce,ue,de){var me,fe,_e,ye,be,Se,Ce,Me,Re,Te,Ee,De,Le=Math.floor(ce);if(ue.bezierDegree===1)Le===ue.numberPoints-1&&Le--;else{if(ue.bezierDegree!==3)return 0;_e=(ce*((De=ue.elType==="sector"?(Ee=ue.points.slice(3,ue.numberPoints-3)).length:(Ee=ue.points).length)-1)-(Le=3*Math.floor(ce*(De-1)/3)))/3,Le>=De-1&&(Le=De-4,_e=1)}if(Le<0)return 1;switch(ue.bezierDegree===1?(me=ue.points[Le].usrCoords,fe=ue.points[Le+1].usrCoords):(ye=Ee[Le].usrCoords,be=Ee[Le+1].usrCoords,Se=Ee[Le+2].usrCoords,Ce=Ee[Le+3].usrCoords,Me=(1-_e)*(1-_e)*(be[1]-ye[1])+2*(1-_e)*_e*(Se[1]-be[1])+_e*_e*(Ce[1]-Se[1]),Re=(1-_e)*(1-_e)*(be[2]-ye[2])+2*(1-_e)*_e*(Se[2]-be[2])+_e*_e*(Ce[2]-Se[2]),Me/=Te=math.A.hypot(Me,Re),Re/=Te,fe=[1,(me=Z.coords.usrCoords)[1]+Me,me[2]+Re]),de){case 0:return me[2]*fe[1]-me[1]*fe[2];case 1:return fe[2]-me[2];case 2:return me[1]-fe[1];default:return[me[2]*fe[1]-me[1]*fe[2],fe[2]-me[2],me[1]-fe[1]]}},ne=G.create("line",[function(){var ce;return ce=Z.type===constants.A.OBJECT_TYPE_GLIDER?Z.position:geometry.A.projectPointToCurve(Z,Q,G)[1],re(ce,Q)}],ie),Z.addChild(ne),ne.glider=Z)}else Q.type===constants.A.OBJECT_TYPE_TURTLE?(ne=G.create("line",[function(){var ce,ue;for(ue=Z.type===constants.A.OBJECT_TYPE_GLIDER?Z.position:geometry.A.projectPointToTurtle(Z,Q,G)[1],ce=Math.floor(ue),ee=0;ee<Q.objects.length;ee++)if((te=Q.objects[ee]).type===constants.A.OBJECT_TYPE_CURVE){if(ce<te.numberPoints)break;ce-=te.numberPoints}return ce===te.numberPoints-1&&ce--,ce<0?[1,0,0]:[te.Y(ce)*te.X(ce+1)-te.X(ce)*te.Y(ce+1),te.Y(ce+1)-te.Y(ce),te.X(ce)-te.X(ce+1)]}],ie),Z.addChild(ne),ne.glider=Z):Q.elementClass!==constants.A.OBJECT_CLASS_CIRCLE&&Q.type!==constants.A.OBJECT_TYPE_CONIC||(ne=G.create("line",[function(){return math.A.matVecMult(Q.quadraticform,Z.coords.usrCoords)}],ie),Z.addChild(ne),ne.glider=Z);if(!utils_type.A.exists(ne))throw new Error("JSXGraph: Couldn't create tangent with the given parents.");return ne.elType="tangent",ne.type=constants.A.OBJECT_TYPE_TANGENT,ne.setParents(_),ne},jxg.A.createNormal=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,ce=[];for(te=0;te<_.length;++te)_[te]=G.select(_[te]);if(_.length===1)Z=_[0],Q=Z.slideObject;else{if(_.length!==2)throw new Error("JSXGraph: Can't create normal with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,line], [point,circle], [glider]`);if(utils_type.A.isPointType(G,_[0]))Z=utils_type.A.providePoints(G,[_[0]],J,"point")[0],Q=_[1];else{if(!utils_type.A.isPointType(G,_[1]))throw new Error("JSXGraph: Can't create normal with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,line], [point,circle], [glider]`);Q=_[0],Z=utils_type.A.providePoints(G,[_[1]],J,"point")[0]}}if(ne=utils_type.A.copyAttributes(J,G.options,"normal"),Q.elementClass===constants.A.OBJECT_CLASS_LINE)re=utils_type.A.copyAttributes(J,G.options,"normal","point"),ie=G.create("point",[function(){var ue=math.A.crossProduct([1,0,0],Q.stdform);return[ue[0],-ue[2],ue[1]]}],re),ie.isDraggable=!0,(ee=G.create("line",[Z,ie],ne)).point=ie,ee.subs={point:ie},ee.inherits.push(ie);else if(Q.elementClass===constants.A.OBJECT_CLASS_CIRCLE)ee=G.create("line",[Q.midpoint,Z],ne);else if(Q.elementClass===constants.A.OBJECT_CLASS_CURVE){if(se=Q.getTransformationSource(),ae=se[0])for(ce.push(Q);se[0]&&utils_type.A.exists(se[1]._transformationSource);)ce.push(se[1]),se=se[1].getTransformationSource();Q.evalVisProp("curvetype")!=="plot"||ae?ee=G.create("line",[function(){var ue,de,me,fe,_e,ye,be,Se,Ce=Q.X,Me=Q.Y;if(Se=Z.type===constants.A.OBJECT_TYPE_GLIDER?Z.position:Q.evalVisProp("curvetype")==="functiongraph"?Z.X():geometry.A.projectPointToCurve(Z,Q,G)[1],be=Z.Coords(!0),ae){for(Ce=(_e=ce[ce.length-1]._transformationSource).X,Me=_e.Y,fe=0;fe<ce.length;fe++)ce[fe].updateTransformMatrix(),ye=math.A.inverse(ce[fe].transformMat),be=math.A.matVecMult(ye,be);Z.type!==constants.A.OBJECT_TYPE_GLIDER&&(be[1]/=be[0],be[2]/=be[0],be[0]/=be[0],Se=geometry.A.projectCoordsToCurve(be[1],be[2],0,_e,G)[1])}if(ue=numerics.A.D(Me)(Se),de=numerics.A.D(Ce)(Se),me=[-be[1]*de-be[2]*ue,be[0]*de,be[0]*ue],ae)for(fe=ce.length-1;fe>=0;fe--)ye=math.A.transpose(math.A.inverse(ce[fe].transformMat)),me=math.A.matVecMult(ye,me);return me}],ne):(oe=function(ue,de,me){var fe,_e,ye,be,Se,Ce,Me,Re,Te,Ee,De,Le,Ue,Ge,Ye,ke,Fe=Math.floor(ue);if(de.bezierDegree===1)Fe===de.numberPoints-1&&Fe--,be=ue;else{if(de.bezierDegree!==3)return 0;be=(ue*((ke=de.elType==="sector"?(Ye=de.points.slice(3,de.numberPoints-3)).length:(Ye=de.points).length)-1)-(Fe=3*Math.floor(ue*(ke-1)/3)))/3,Fe>=ke-1&&(Fe=ke-4,be=1)}if(Fe<0)return 1;switch(fe=be-Fe,de.bezierDegree===1?(_e=de.points[Fe].usrCoords,ye=de.points[Fe+1].usrCoords,Ue=[_e[0]+fe*(ye[0]-_e[0]),_e[1]+fe*(ye[1]-_e[1]),_e[2]+fe*(ye[2]-_e[2])],Le=math.A.crossProduct(_e,ye),Ge=[(Ge=math.A.crossProduct([1,0,0],Le))[0],-Ge[2],Ge[1]],Le=math.A.crossProduct(Ue,Ge)):(Se=Ye[Fe].usrCoords,Ce=Ye[Fe+1].usrCoords,Me=Ye[Fe+2].usrCoords,Re=Ye[Fe+3].usrCoords,Te=(1-be)*(1-be)*(Ce[1]-Se[1])+2*(1-be)*be*(Me[1]-Ce[1])+be*be*(Re[1]-Me[1]),Ee=(1-be)*(1-be)*(Ce[2]-Se[2])+2*(1-be)*be*(Me[2]-Ce[2])+be*be*(Re[2]-Me[2]),Te/=De=math.A.hypot(Te,Ee),Ee/=De,ye=[1,(_e=Z.coords.usrCoords)[1]-Ee,_e[2]+Te],Le=[_e[2]*ye[1]-_e[1]*ye[2],ye[2]-_e[2],_e[1]-ye[1]]),me){case 0:return Le[0];case 1:return Le[1];case 2:return Le[2];default:return Le}},ee=G.create("line",[function(){var ue;return ue=Z.type===constants.A.OBJECT_TYPE_GLIDER?Z.position:geometry.A.projectPointToCurve(Z,Q,G)[1],oe(ue,Q)}],ne),Z.addChild(ee),ee.glider=Z)}else{if(Q.type!==constants.A.OBJECT_TYPE_TURTLE)throw new Error("JSXGraph: Can't create normal with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,line], [point,circle], [glider]`);ee=G.create("line",[function(){var ue,de,me=Math.floor(Z.position),fe=Z.position-me;for(de=0;de<Q.objects.length;de++)if((ue=Q.objects[de]).type===constants.A.OBJECT_TYPE_CURVE){if(me<ue.numberPoints)break;me-=ue.numberPoints}return me===ue.numberPoints-1&&(me-=1,fe=1),me<0?1:(ue.Y(me)+fe*(ue.Y(me+1)-ue.Y(me)))*(ue.Y(me)-ue.Y(me+1))-(ue.X(me)+fe*(ue.X(me+1)-ue.X(me)))*(ue.X(me+1)-ue.X(me))},function(){var ue,de,me=Math.floor(Z.position);for(de=0;de<Q.objects.length;de++)if((ue=Q.objects[de]).type===constants.A.OBJECT_TYPE_CURVE){if(me<ue.numberPoints)break;me-=ue.numberPoints}return me===ue.numberPoints-1&&(me-=1),me<0?0:ue.X(me+1)-ue.X(me)},function(){var ue,de,me=Math.floor(Z.position);for(de=0;de<Q.objects.length;de++)if((ue=Q.objects[de]).type===constants.A.OBJECT_TYPE_CURVE){if(me<ue.numberPoints)break;me-=ue.numberPoints}return me===ue.numberPoints-1&&(me-=1),me<0?0:ue.Y(me+1)-ue.Y(me)}],ne)}return ee.elType="normal",ee.setParents(_),utils_type.A.exists(Z._is_new)?(ee.addChild(Z),delete Z._is_new):Z.addChild(ee),Q.addChild(ee),ee},jxg.A.createRadicalAxis=function(G,_,J){var Z,Q,ee;if(_.length!==2||_[0].elementClass!==constants.A.OBJECT_CLASS_CIRCLE||_[1].elementClass!==constants.A.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create 'radical axis' with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent type: [circle,circle]`);return Q=G.select(_[0]),ee=G.select(_[1]),(Z=G.create("line",[function(){var te=Q.stdform,ne=ee.stdform;return math.A.matVecMult(math.A.transpose([te.slice(0,3),ne.slice(0,3)]),[ne[3],-te[3]])}],J)).elType="radicalaxis",Z.setParents([Q.id,ee.id]),Q.addChild(Z),ee.addChild(Z),Z},jxg.A.createPolarLine=function(G,_,J){var Z,Q,ee,te,ne,ie,re;if(_.length>1&&(te=_[0].type===constants.A.OBJECT_TYPE_CONIC||_[0].elementClass===constants.A.OBJECT_CLASS_CIRCLE,ne=_[1].type===constants.A.OBJECT_TYPE_CONIC||_[1].elementClass===constants.A.OBJECT_CLASS_CIRCLE,ie=utils_type.A.isPoint(_[0]),re=utils_type.A.isPoint(_[1])),_.length!==2||!(te&&re||ie&&ne))throw new Error("JSXGraph: Can't create 'polar line' with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent type: [conic|circle,point], [point,conic|circle]`);return re?(Q=G.select(_[0]),ee=G.select(_[1])):(Q=G.select(_[1]),ee=G.select(_[0])),(Z=G.create("tangent",[Q,ee],J)).elType="polarline",Z},jxg.A.createTangentTo=function(G,_,J){var Z,Q,ee,te,ne,ie,re;if(ee=G.select(_[0]),te=utils_type.A.providePoints(G,_[1],J,"point")[0],ne=utils_type.A.def(_[2],0),ee.type!==constants.A.OBJECT_TYPE_CIRCLE&&ee.type!==constants.A.OBJECT_TYPE_CONIC||te.elementClass!==constants.A.OBJECT_CLASS_POINT)throw new Error("JSXGraph: Can't create tangentto with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [circle|conic,point,number]`);return Q=utils_type.A.copyAttributes(J,G.options,"tangentto"),re=G.create("polar",[ee,te],Q.polar),ie=G.create("intersection",[re,ee,ne],Q.point),(Z=G.create("tangent",[ee,ie],Q)).point=ie,Z.polar=re,Z.elType="tangentto",Z},jxg.A.registerElement("tangent",jxg.A.createTangent),jxg.A.registerElement("normal",jxg.A.createNormal),jxg.A.registerElement("tangentto",jxg.A.createTangentTo),jxg.A.registerElement("polar",jxg.A.createTangent),jxg.A.registerElement("radicalaxis",jxg.A.createRadicalAxis),jxg.A.registerElement("polarline",jxg.A.createPolarLine),jxg.A.Line,jxg.A.Group=function(G,_,J,Z,Q){var ee,te,ne,ie;for(this.board=G,this.objects={},ee=this.board.numObjects,this.board.numObjects+=1,_!==""&&utils_type.A.exists(_)?this.id=_:this.id=this.board.id+"Group"+ee,this.board.groups[this.id]=this,this.type=constants.A.OBJECT_TYPE_POINT,this.elementClass=constants.A.OBJECT_CLASS_POINT,J!==""&&utils_type.A.exists(J)?this.name=J:this.name="group_"+this.board.generateName(this),delete this.type,this.coords={},this.needsRegularUpdate=Q.needsregularupdate,this.rotationCenter="centroid",this.scaleCenter=null,this.rotationPoints=[],this.translationPoints=[],this.scalePoints=[],this.scaleDirections={},this.parents=[],te=utils_type.A.isArray(Z)?Z:Array.prototype.slice.call(arguments,3),ne=0;ne<te.length;ne++)!(ie=this.board.select(te[ne])).evalVisProp("fixed")&&utils_type.A.exists(ie.coords)&&this.addPoint(ie);this.methodMap={ungroup:"ungroup",add:"addPoint",addPoint:"addPoint",addPoints:"addPoints",addGroup:"addGroup",remove:"removePoint",removePoint:"removePoint",setAttribute:"setAttribute",setProperty:"setAttribute"}},jxg.A.extend(jxg.A.Group.prototype,{ungroup:function(){var G,_,J;for(G in this.objects)this.objects.hasOwnProperty(G)&&(_=this.objects[G].point,utils_type.A.isArray(_.groups)&&(J=utils_type.A.indexOf(_.groups,this.id))>=0&&delete _.groups[J]);return this.objects={},this},addParents:function(G){var _,J,Z;for(J=(Z=utils_type.A.isArray(G)?G:arguments).length,_=0;_<J;++_)utils_type.A.isId(this.board,Z[_])?this.parents.push(Z[_]):utils_type.A.exists(Z[_].id)&&this.parents.push(Z[_].id);this.parents=utils_type.A.uniqueArray(this.parents)},setParents:function(G){return this.parents=[],this.addParents(G),this},getParents:function(){return utils_type.A.isArray(this.parents)?this.parents:[]},_updateCoordsCache:function(G){var _;G!==""&&utils_type.A.exists(this.objects[G])&&(_=this.objects[G].point,this.coords[_.id]={usrCoords:_.coords.usrCoords.slice(0)})},update:function(){var G,_,J,Z,Q,ee,te,ne,ie,re,oe,se,ae=null;if(!this.needsUpdate)return this;if((_=this._update_find_drag_type()).action==="nothing")return this._updateCoordsCache(_.id),this;if(ae=this.objects[_.id].point,_.action==="translation"){if(re=[ae.coords.usrCoords[1]-this.coords[_.id].usrCoords[1],ae.coords.usrCoords[2]-this.coords[_.id].usrCoords[2]],ae.elementClass!==constants.A.OBJECT_CLASS_POINT){for(re.unshift(0),G=0;G<ae.transformations.length;G++)re=math.A.matVecMult(ae.transformations[G].matrix,re);re.shift()}(oe=this.board.create("transform",re,{type:"translate"})).update()}else if(_.action==="rotation"||_.action==="scaling"){if(Z=_.action==="rotation"?"rotationCenter":"scaleCenter",utils_type.A.exists(this[Z].coords))se=this[Z].coords.usrCoords.slice(1);else if(this[Z]==="centroid")se=this._update_centroid_center();else if(utils_type.A.isArray(this[Z]))se=this[Z];else{if(!utils_type.A.isFunction(this[Z]))return jxg.A.debug("Group.update: No valid center for this transformation, get out of here."),this;se=this[Z]()}if(_.action==="rotation")ie=geometry.A.rad(this.coords[_.id].usrCoords.slice(1),se,this.objects[_.id].point),(re=this.board.create("transform",[ie,se[0],se[1]],{type:"rotate"})).update();else{if(_.action!=="scaling")return this;if(ee=geometry.A.distance(this.coords[_.id].usrCoords.slice(1),se),Math.abs(ee)<math.A.eps)return this;ee=geometry.A.distance(ae.coords.usrCoords.slice(1),se)/ee,te=this.scaleDirections[_.id].indexOf("x")>=0?ee:1,ne=this.scaleDirections[_.id].indexOf("y")>=0?ee:1,(re=this.board.create("transform",[1,0,0,se[0]*(1-te),te,0,se[1]*(1-ne),0,ne],{type:"generic"})).update()}}for(J in this.objects)(ae=this.objects[J].point).elementClass!==constants.A.OBJECT_CLASS_POINT&&(utils_type.A.exists(re.board)?re.meltTo(ae):_.id!==ae.id&&oe.meltTo(ae));for(J in this._update_apply_transformation(_,re),this.needsUpdate=!1,this.objects)if(this.objects.hasOwnProperty(J))for(Q in this.objects[J].descendants)this.objects[J].descendants.hasOwnProperty(Q)&&(this.objects[J].descendants.needsUpdate=this.objects[J].descendants.needsRegularUpdate||this.board.needsFullUpdate);for(J in this.board.updateElements(_),this.objects)this.objects.hasOwnProperty(J)&&this._updateCoordsCache(J);return this},_update_find_drag_type:function(){var G,_,J,Z="nothing",Q=[];for(G in this.objects)this.objects.hasOwnProperty(G)&&(_=this.objects[G].point).coords.distance(constants.A.COORDS_BY_USER,this.coords[G])>math.A.eps&&Q.push(_.id);return Q.length===0?{action:Z,id:"",changed:Q}:(J=Q[0],_=this.objects[J].point,Q.length>1?Z="translation":utils_type.A.isInArray(this.rotationPoints,_)&&utils_type.A.exists(this.rotationCenter)?Z="rotation":utils_type.A.isInArray(this.scalePoints,_)&&utils_type.A.exists(this.scaleCenter)?Z="scaling":utils_type.A.isInArray(this.translationPoints,_)&&(Z="translation"),{action:Z,id:J,changed:Q})},_update_centroid_center:function(){var G,_,J;for(J in G=[0,0],_=0,this.coords)this.coords.hasOwnProperty(J)&&(G[0]+=this.coords[J].usrCoords[1],G[1]+=this.coords[J].usrCoords[2],++_);return _>0&&(G[0]/=_,G[1]/=_),G},_update_apply_transformation:function(G,_){var J,Z;for(J in this.objects)this.objects.hasOwnProperty(J)&&(utils_type.A.exists(this.board.objects[J])?(Z=this.objects[J].point).id!==G.id?G.action==="translation"?utils_type.A.isInArray(G.changed,Z.id)||Z.elementClass===constants.A.OBJECT_CLASS_POINT&&Z.coords.setCoordinates(constants.A.COORDS_BY_USER,[this.coords[J].usrCoords[1]+_[0],this.coords[J].usrCoords[2]+_[1]]):G.action!=="rotation"&&G.action!=="scaling"||Z.elementClass===constants.A.OBJECT_CLASS_POINT&&_.applyOnce([Z]):G.action!=="rotation"&&G.action!=="scaling"||Z.coords.setCoordinates(constants.A.COORDS_BY_USER,math.A.matVecMult(_.matrix,this.coords[Z.id].usrCoords)):delete this.objects[J])},addPoint:function(G){return this.objects[G.id]={point:this.board.select(G)},this._updateCoordsCache(G.id),this.translationPoints.push(G),G.groups.push(this.id),G.groups=utils_type.A.uniqueArray(G.groups),this},addPoints:function(G){var _;for(_=0;_<G.length;_++)this.addPoint(G[_]);return this},addGroup:function(G){var _;for(_ in G.objects)G.objects.hasOwnProperty(_)&&this.addPoint(G.objects[_].point);return this},removePoint:function(G){return delete this.objects[G.id],this},setRotationCenter:function(G){return this.rotationCenter=G,this},setRotationPoints:function(G){return this._setActionPoints("rotation",G)},addRotationPoint:function(G){return this._addActionPoint("rotation",G)},removeRotationPoint:function(G){return this._removeActionPoint("rotation",G)},setTranslationPoints:function(G){return this._setActionPoints("translation",G)},addTranslationPoint:function(G){return this._addActionPoint("translation",G)},removeTranslationPoint:function(G){return this._removeActionPoint("translation",G)},setScaleCenter:function(G){return this.scaleCenter=G,this},setScalePoints:function(G,_){var J,Z,Q;for(Q=(J=utils_type.A.isArray(G)?G:arguments).length,Z=0;Z<Q;++Z)this.scaleDirections[this.board.select(J[Z]).id]=_||"xy";return this._setActionPoints("scale",G)},addScalePoint:function(G,_){return this._addActionPoint("scale",G),this.scaleDirections[this.board.select(G).id]=_||"xy",this},removeScalePoint:function(G){return this._removeActionPoint("scale",G)},_setActionPoints:function(G,_){var J,Z,Q;for(Q=(J=utils_type.A.isArray(_)?_:arguments).length,this[G+"Points"]=[],Z=0;Z<Q;++Z)this._addActionPoint(G,J[Z]);return this},_addActionPoint:function(G,_){return this[G+"Points"].push(this.board.select(_)),this},_removeActionPoint:function(G,_){var J=this[G+"Points"].indexOf(this.board.select(_));return J>-1&&this[G+"Points"].splice(J,1),this},setProperty:function(){jxg.A.deprecated("Group.setProperty","Group.setAttribute()"),this.setAttribute.apply(this,arguments)},setAttribute:function(){var G;for(G in this.objects)this.objects.hasOwnProperty(G)&&this.objects[G].point.setAttribute.apply(this.objects[G].point,arguments);return this}}),jxg.A.createGroup=function(G,_,J){var Z=utils_type.A.copyAttributes(J,G.options,"group"),Q=new jxg.A.Group(G,Z.id,Z.name,_,Z);return Q.elType="group",Q.setParents(_),Q},jxg.A.registerElement("group",jxg.A.createGroup),jxg.A.Group,jxg.A.Circle=function(G,_,J,Z,Q){this.constructor(G,Q,constants.A.OBJECT_TYPE_CIRCLE,constants.A.OBJECT_CLASS_CIRCLE),this.method=_,this.midpoint=this.board.select(J),this.center=this.board.select(J),this.point2=null,this.radius=0,this.line=null,this.circle=null,this.points=[],_==="twoPoints"?(this.point2=G.select(Z),this.radius=this.Radius()):_==="pointRadius"?(this.gxtterm=Z,this.updateRadius=utils_type.A.createFunction(Z,this.board),this.updateRadius(),this.addParentsFromJCFunctions([this.updateRadius])):_==="pointLine"?(this.line=G.select(Z),this.radius=this.line.point1.coords.distance(constants.A.COORDS_BY_USER,this.line.point2.coords)):_==="pointCircle"&&(this.circle=G.select(Z),this.radius=this.circle.Radius()),this.id=this.board.setId(this,"C"),this.board.renderer.drawEllipse(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="circle",this.createLabel(),utils_type.A.exists(this.center._is_new)?(this.addChild(this.center),delete this.center._is_new):this.center.addChild(this),_==="pointRadius"?this.notifyParents(Z):_==="pointLine"?this.line.addChild(this):_==="pointCircle"?this.circle.addChild(this):_==="twoPoints"&&(utils_type.A.exists(this.point2._is_new)?(this.addChild(this.point2),delete this.point2._is_new):this.point2.addChild(this)),this.methodMap=utils_type.A.deepCopy(this.methodMap,{setRadius:"setRadius",getRadius:"getRadius",Area:"Area",area:"Area",Perimeter:"Perimeter",Circumference:"Perimeter",radius:"Radius",Radius:"Radius",Diameter:"Diameter",center:"center",line:"line",point2:"point2"})},jxg.A.Circle.prototype=new base_element.A,jxg.A.extend(jxg.A.Circle.prototype,{hasPoint:function(G,_){var J,Z,Q,ee,te,ne=this.center.coords.usrCoords,ie=new base_coords.A(constants.A.COORDS_BY_SCREEN,[G,_],this.board),re=this.Radius();return utils_type.A.isObject(this.evalVisProp("precision"))?(Z=this.board._inputDevice,J=this.evalVisProp("precision."+Z)):J=this.board.options.precision.hasPoint,Q=ne[1]-ie.usrCoords[1],ee=ne[2]-ie.usrCoords[2],te=math.A.hypot(Q,ee),J+=.5*this.evalVisProp("strokewidth"),J/=Math.sqrt(Math.abs(this.board.unitX*this.board.unitY)),this.evalVisProp("hasinnerpoints")?te<re+J:Math.abs(te-re)<J},generatePolynomial:function(G){var _=this.center.symbolic.x,J=this.center.symbolic.y,Z=G.symbolic.x,Q=G.symbolic.y,ee=this.generateRadiusSquared();return ee===""?[]:["(("+Z+")-("+_+"))^2 + (("+Q+")-("+J+"))^2 - ("+ee+")"]},generateRadiusSquared:function(){var G,_,J,Z,Q="";return this.method==="twoPoints"?(G=this.center.symbolic.x,_=this.center.symbolic.y,Q="(("+(J=this.point2.symbolic.x)+")-("+G+"))^2 + (("+(Z=this.point2.symbolic.y)+")-("+_+"))^2"):this.method==="pointRadius"?utils_type.A.isNumber(this.radius)&&(Q=(this.radius*this.radius).toString()):this.method==="pointLine"?(J=this.line.point1.symbolic.x,Z=this.line.point1.symbolic.y,Q="(("+J+")-("+this.line.point2.symbolic.x+"))^2 + (("+Z+")-("+this.line.point2.symbolic.y+"))^2"):this.method==="pointCircle"&&(Q=this.circle.Radius()),Q},update:function(){var G,_,J,Z,Q,ee;if(this.needsUpdate)for(this.evalVisProp("trace")&&this.cloneToBackground(!0),this.method==="pointLine"?this.radius=this.line.point1.coords.distance(constants.A.COORDS_BY_USER,this.line.point2.coords):this.method==="pointCircle"?this.radius=this.circle.Radius():this.method==="pointRadius"&&(this.radius=this.updateRadius()),this.radius=Math.abs(this.radius),this.updateStdform(),this.updateQuadraticform(),J=this.center.coords.usrCoords[0],G=this.center.coords.usrCoords[1]/J,_=this.center.coords.usrCoords[2]/J,J/=J,Z=this.Radius(),Q=.551915024494,this.numberPoints=13,this.dataX=[G+Z,G+Z,G+Z*Q,G,G-Z*Q,G-Z,G-Z,G-Z,G-Z*Q,G,G+Z*Q,G+Z,G+Z],this.dataY=[_,_+Z*Q,_+Z,_+Z,_+Z,_+Z*Q,_,_-Z*Q,_-Z,_-Z,_-Z,_-Z*Q,_],this.bezierDegree=3,ee=0;ee<this.numberPoints;ee++)this.points[ee]=new base_coords.A(constants.A.COORDS_BY_USER,[this.dataX[ee],this.dataY[ee]],this.board);return this},updateQuadraticform:function(){var G=this.center,_=G.X(),J=G.Y(),Z=this.Radius();this.quadraticform=[[_*_+J*J-Z*Z,-_,-J],[-_,1,0],[-J,0,1]]},updateStdform:function(){this.stdform[3]=.5,this.stdform[4]=this.Radius(),this.stdform[1]=-this.center.coords.usrCoords[1],this.stdform[2]=-this.center.coords.usrCoords[2],isFinite(this.stdform[4])||(this.stdform[0]=utils_type.A.exists(this.point2)?-(this.stdform[1]*this.point2.coords.usrCoords[1]+this.stdform[2]*this.point2.coords.usrCoords[2]):0),this.normalize()},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.center.coords.usrCoords[1]+this.center.coords.usrCoords[2]+this.Radius())&&this.center.isReal,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateEllipse(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},notifyParents:function(G){utils_type.A.isString(G)&&geonext.A.findDependencies(this,G,this.board)},setRadius:function(G){return this.updateRadius=utils_type.A.createFunction(G,this.board),this.addParentsFromJCFunctions([this.updateRadius]),this.board.update(),this},Radius:function(G){return utils_type.A.exists(G)?(this.setRadius(G),this.Radius()):this.method==="twoPoints"?utils_type.A.cmpArrays(this.point2.coords.usrCoords,[0,0,0])||utils_type.A.cmpArrays(this.center.coords.usrCoords,[0,0,0])?NaN:this.center.Dist(this.point2):this.method==="pointLine"||this.method==="pointCircle"?this.radius:this.method==="pointRadius"?this.evalVisProp("nonnegativeonly")?Math.max(0,this.updateRadius()):Math.abs(this.updateRadius()):NaN},Diameter:function(){return 2*this.Radius()},getRadius:function(){return jxg.A.deprecated("Circle.getRadius()","Circle.Radius()"),this.Radius()},getTextAnchor:function(){return this.center.coords},getLabelAnchor:function(){var G,_,J,Z,Q,ee,te=1.5,ne=this.Radius(),ie=this.center.coords.usrCoords,re=.7071067811865;if(!utils_type.A.exists(this.label))return new base_coords.A(constants.A.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(J=this.label.evalVisProp("position"),!utils_type.A.isString(J))return new base_coords.A(constants.A.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(!(J.indexOf("right")<0&&J.indexOf("left")<0))return ie=this.center.coords.scrCoords,Z=utils_type.A.parsePosition(J),Q=utils_type.A.parseNumber(Z.pos,2*Math.PI,1),Z.pos.indexOf("fr")<0&&Z.pos.indexOf("%")<0&&(Z.pos.indexOf("px")>=0?Q=0:Q*=Math.PI/180),ee=1,Z.side==="left"&&(ee=-1),utils_type.A.exists(this.label)&&(te=.5*ee*this.label.evalVisProp("distance")),G=ie[1]+(ne*this.board.unitX+this.label.size[0]*te)*Math.cos(Q),_=ie[2]-(ne*this.board.unitY+this.label.size[1]*te)*Math.sin(Q),new base_coords.A(constants.A.COORDS_BY_SCREEN,[G,_],this.board);switch(this.evalVisProp("label.position")){case"lft":G=ie[1]-ne,_=ie[2];break;case"llft":G=ie[1]-re*ne,_=ie[2]-re*ne;break;case"rt":G=ie[1]+ne,_=ie[2];break;case"lrt":G=ie[1]+re*ne,_=ie[2]-re*ne;break;case"urt":G=ie[1]+re*ne,_=ie[2]+re*ne;break;case"top":G=ie[1],_=ie[2]+ne;break;case"bot":G=ie[1],_=ie[2]-ne;break;default:G=ie[1]-re*ne,_=ie[2]+re*ne}return new base_coords.A(constants.A.COORDS_BY_USER,[G,_],this.board)},cloneToBackground:function(){var G,_=this.Radius(),J=utils_type.A.getCloneObject(this);return J.center={coords:this.center.coords},J.Radius=function(){return _},J.getRadius=function(){return _},G=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawEllipse(J),this.board.renderer.enhancedRendering=G,this.traces[J.id]=J.rendNode,this},addTransform:function(G){var _,J=utils_type.A.isArray(G)?G:[G],Z=J.length;for(_=0;_<Z;_++)this.center.transformations.push(J[_]),this.method==="twoPoints"&&this.point2.transformations.push(J[_]);return this},snapToGrid:function(){var G=this.evalVisProp("snaptogrid");return this.center.handleSnapToGrid(G,!0),this.method==="twoPoints"&&this.point2.handleSnapToGrid(G,!0),this},snapToPoints:function(){var G=this.evalVisProp("snaptopoints");return this.center.handleSnapToPoints(G),this.method==="twoPoints"&&this.point2.handleSnapToPoints(G),this},X:function(G){return this.Radius()*Math.cos(2*G*Math.PI)+this.center.coords.usrCoords[1]},Y:function(G){return this.Radius()*Math.sin(2*G*Math.PI)+this.center.coords.usrCoords[2]},Z:function(G){return 1},minX:function(){return 0},maxX:function(){return 1},Area:function(){var G=this.Radius();return G*G*Math.PI},Perimeter:function(){return 2*this.Radius()*Math.PI},bounds:function(){var G=this.center.coords.usrCoords,_=this.Radius();return[G[1]-_,G[2]+_,G[1]+_,G[2]-_]},getParents:function(){return this.parents.length===1?this.parents.concat(this.radius):this.parents}}),jxg.A.createCircle=function(G,_,J){var Z,Q,ee,te,ne,ie=["center","point2"];if(Q=[],ne=G.select(_[0]),utils_type.A.isObject(ne)&&ne.elementClass===constants.A.OBJECT_CLASS_CIRCLE&&utils_type.A.isTransformationOrArray(_[1]))return te=utils_type.A.copyAttributes(J,G.options,"circle"),(Z=jxg.A.createEllipse(G,[ne.center,ne.center,function(){return 2*ne.Radius()}],te)).addTransform(_[1]),Z;for(ee=0;ee<_.length;ee++)if(utils_type.A.isPointType(G,_[ee])){if(_.length<3?Q.push(utils_type.A.providePoints(G,[_[ee]],J,"circle",[ie[ee]])[0]):Q.push(utils_type.A.providePoints(G,[_[ee]],J,"point")[0]),Q[Q.length-1]===!1)throw new Error("JSXGraph: Can't create circle from this type. Please provide a point type.")}else Q.push(_[ee]);if(te=utils_type.A.copyAttributes(J,G.options,"circle"),Q.length===2&&utils_type.A.isPoint(Q[0])&&utils_type.A.isPoint(Q[1]))Z=new jxg.A.Circle(G,"twoPoints",Q[0],Q[1],te);else if((utils_type.A.isNumber(Q[0])||utils_type.A.isFunction(Q[0])||utils_type.A.isString(Q[0]))&&utils_type.A.isPoint(Q[1]))Z=new jxg.A.Circle(G,"pointRadius",Q[1],Q[0],te);else if((utils_type.A.isNumber(Q[1])||utils_type.A.isFunction(Q[1])||utils_type.A.isString(Q[1]))&&utils_type.A.isPoint(Q[0]))Z=new jxg.A.Circle(G,"pointRadius",Q[0],Q[1],te);else if(Q[0].elementClass===constants.A.OBJECT_CLASS_CIRCLE&&utils_type.A.isPoint(Q[1]))Z=new jxg.A.Circle(G,"pointCircle",Q[1],Q[0],te);else if(Q[1].elementClass===constants.A.OBJECT_CLASS_CIRCLE&&utils_type.A.isPoint(Q[0]))Z=new jxg.A.Circle(G,"pointCircle",Q[0],Q[1],te);else if(Q[0].elementClass===constants.A.OBJECT_CLASS_LINE&&utils_type.A.isPoint(Q[1]))Z=new jxg.A.Circle(G,"pointLine",Q[1],Q[0],te);else if(Q[1].elementClass===constants.A.OBJECT_CLASS_LINE&&utils_type.A.isPoint(Q[0]))Z=new jxg.A.Circle(G,"pointLine",Q[0],Q[1],te);else{if(!(_.length===3&&utils_type.A.isPoint(Q[0])&&utils_type.A.isPoint(Q[1])&&utils_type.A.isPoint(Q[2])))throw new Error("JSXGraph: Can't create circle with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,point], [point,number], [point,function], [point,circle], [point,point,point], [circle,transformation]`);if(!jxg.A.elements.circumcircle)throw new Error("JSXGraph: Can't create circle with three points. Please include the circumcircle element (element/composition).");Z=jxg.A.elements.circumcircle(G,Q,te)}for(Z.isDraggable=!0,Z.setParents(Q),Z.elType="circle",ee=0;ee<Q.length;ee++)utils_type.A.isPoint(Q[ee])&&Z.inherits.push(Q[ee]);return Z},jxg.A.registerElement("circle",jxg.A.createCircle);var circle=jxg.A.Circle;jxg.A.createEllipse=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe=[],se=utils_type.A.copyAttributes(J,G.options,"conic","foci"),ae=utils_type.A.copyAttributes(J,G.options,"conic","center"),ce=utils_type.A.copyAttributes(J,G.options,"conic");for(ie=0;ie<2;ie++)if(_[ie].length>1)oe[ie]=G.create("point",_[ie],se);else if(utils_type.A.isPoint(_[ie]))oe[ie]=G.select(_[ie]);else if(utils_type.A.isFunction(_[ie])&&utils_type.A.isPoint(_[ie]()))oe[ie]=_[ie]();else{if(!utils_type.A.isString(_[ie]))throw new Error("JSXGraph: Can't create Ellipse with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,point,point], [point,point,number|function]`);oe[ie]=G.select(_[ie])}if(utils_type.A.isNumber(_[2]))ne=utils_type.A.createFunction(_[2],G);else if(utils_type.A.isFunction(_[2])&&utils_type.A.isNumber(_[2]()))ne=_[2];else{if(utils_type.A.isPoint(_[2]))te=G.select(_[2]);else if(_[2].length>1)te=G.create("point",_[2],se);else if(utils_type.A.isFunction(_[2])&&utils_type.A.isPoint(_[2]()))te=_[2]();else{if(!utils_type.A.isString(_[2]))throw new Error("JSXGraph: Can't create Ellipse with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [point,point,point], [point,point,number|function]`);te=G.select(_[2])}ne=function(){return te.Dist(oe[0])+te.Dist(oe[1])}}for(utils_type.A.exists(_[4])||(_[4]=2*Math.PI),utils_type.A.exists(_[3])||(_[3]=0),ee=G.create("point",[function(){return .5*(oe[0].X()+oe[1].X())},function(){return .5*(oe[0].Y()+oe[1].Y())}],ae),(Q=G.create("curve",[function(ue){return 0},function(ue){return 0},_[3],_[4]],ce)).majorAxis=ne,re=Q.hasPoint,Z=function(ue,de){var me,fe,_e,ye,be,Se,Ce,Me,Re;de||(fe=(me=ne())*me,_e=oe[0].X(),ye=oe[0].Y(),Ce=_e-(be=oe[1].X()),Me=ye-(Se=oe[1].Y()),Re=(fe-_e*_e-ye*ye+be*be+Se*Se)/(2*me),Q.quadraticform=[[Re*Re-be*be-Se*Se,Re*Ce/me+be,Re*Me/me+Se],[Re*Ce/me+be,Ce*Ce/fe-1,Ce*Me/fe],[Re*Me/me+Se,Ce*Me/fe,Me*Me/fe-1]])},Q.X=function(ue,de){var me=ne(),fe=oe[1].Dist(oe[0]),_e=.5*(fe*fe-me*me)/(fe*Math.cos(ue)-me),ye=Math.atan2(oe[1].Y()-oe[0].Y(),oe[1].X()-oe[0].X());return de||Z(0,de),oe[0].X()+Math.cos(ye+ue)*_e},Q.Y=function(ue,de){var me=ne(),fe=oe[1].Dist(oe[0]),_e=.5*(fe*fe-me*me)/(fe*Math.cos(ue)-me),ye=Math.atan2(oe[1].Y()-oe[0].Y(),oe[1].X()-oe[0].X());return oe[0].Y()+Math.sin(ye+ue)*_e},Q.midpoint=Q.center=ee,Q.type=constants.A.OBJECT_TYPE_CONIC,Q.subs={center:Q.center},Q.inherits.push(Q.center,oe[0],oe[1]),utils_type.A.isPoint(te)&&Q.inherits.push(te),Q.hasPoint=function(ue,de){var me,fe,_e,ye;return this.evalVisProp("hasinnerpoints")?(me=oe[0].coords,fe=oe[1].coords,_e=this.majorAxis(),(ye=new base_coords.A(constants.A.COORDS_BY_SCREEN,[ue,de],this.board)).distance(constants.A.COORDS_BY_USER,me)+ye.distance(constants.A.COORDS_BY_USER,fe)<=_e):re.apply(this,arguments)},ee.addChild(Q),ie=0;ie<2;ie++)utils_type.A.isPoint(oe[ie])&&oe[ie].addChild(Q);return utils_type.A.isPoint(te)&&te.addChild(Q),Q.setParents(_),Q},jxg.A.createHyperbola=function(G,_,J){var Z,Q,ee,te,ne,ie,re=[],oe=utils_type.A.copyAttributes(J,G.options,"conic","foci"),se=utils_type.A.copyAttributes(J,G.options,"conic","center"),ae=utils_type.A.copyAttributes(J,G.options,"conic");for(ie=0;ie<2;ie++)if(_[ie].length>1)re[ie]=G.create("point",_[ie],oe);else if(utils_type.A.isPoint(_[ie]))re[ie]=G.select(_[ie]);else if(utils_type.A.isFunction(_[ie])&&utils_type.A.isPoint(_[ie]()))re[ie]=_[ie]();else{if(!utils_type.A.isString(_[ie]))throw new Error("JSXGraph: Can't create Hyperbola with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,point,point], [point,point,number|function]`);re[ie]=G.select(_[ie])}if(utils_type.A.isNumber(_[2]))ne=utils_type.A.createFunction(_[2],G);else if(utils_type.A.isFunction(_[2])&&utils_type.A.isNumber(_[2]()))ne=_[2];else{if(utils_type.A.isPoint(_[2]))te=G.select(_[2]);else if(_[2].length>1)te=G.create("point",_[2],oe);else if(utils_type.A.isFunction(_[2])&&utils_type.A.isPoint(_[2]()))te=_[2]();else{if(!utils_type.A.isString(_[2]))throw new Error("JSXGraph: Can't create Hyperbola with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [point,point,point], [point,point,number|function]`);te=G.select(_[2])}ne=function(){return te.Dist(re[0])-te.Dist(re[1])}}for(utils_type.A.exists(_[4])||(_[4]=1.0001*Math.PI),utils_type.A.exists(_[3])||(_[3]=-1.0001*Math.PI),ee=G.create("point",[function(){return .5*(re[0].X()+re[1].X())},function(){return .5*(re[0].Y()+re[1].Y())}],se),(Q=G.create("curve",[function(ce){return 0},function(ce){return 0},_[3],_[4]],ae)).majorAxis=ne,Z=function(ce,ue){var de,me,fe,_e,ye,be,Se,Ce,Me;ue||(me=(de=ne())*de,fe=re[0].X(),_e=re[0].Y(),Se=fe-(ye=re[1].X()),Ce=_e-(be=re[1].Y()),Me=(me-fe*fe-_e*_e+ye*ye+be*be)/(2*de),Q.quadraticform=[[Me*Me-ye*ye-be*be,Me*Se/de+ye,Me*Ce/de+be],[Me*Se/de+ye,Se*Se/me-1,Se*Ce/me],[Me*Ce/de+be,Se*Ce/me,Ce*Ce/me-1]])},Q.X=function(ce,ue){var de=ne(),me=re[1].Dist(re[0]),fe=.5*(me*me-de*de)/(me*Math.cos(ce)+de),_e=Math.atan2(re[1].Y()-re[0].Y(),re[1].X()-re[0].X());return ue||Z(0,ue),re[0].X()+Math.cos(_e+ce)*fe},Q.Y=function(ce,ue){var de=ne(),me=re[1].Dist(re[0]),fe=.5*(me*me-de*de)/(me*Math.cos(ce)+de),_e=Math.atan2(re[1].Y()-re[0].Y(),re[1].X()-re[0].X());return re[0].Y()+Math.sin(_e+ce)*fe},Q.midpoint=Q.center=ee,Q.subs={center:Q.center},Q.inherits.push(Q.center,re[0],re[1]),utils_type.A.isPoint(te)&&Q.inherits.push(te),Q.type=constants.A.OBJECT_TYPE_CONIC,ee.addChild(Q),ie=0;ie<2;ie++)utils_type.A.isPoint(re[ie])&&re[ie].addChild(Q);return utils_type.A.isPoint(te)&&te.addChild(Q),Q.setParents(_),Q},jxg.A.createParabola=function(G,_,J){var Z,Q,ee,te,ne=_[0],ie=_[1],re=utils_type.A.copyAttributes(J,G.options,"conic","foci"),oe=utils_type.A.copyAttributes(J,G.options,"conic","center"),se=utils_type.A.copyAttributes(J,G.options,"conic");if(_[0].length>1)ne=G.create("point",_[0],re);else if(utils_type.A.isPoint(_[0]))ne=G.select(_[0]);else if(utils_type.A.isFunction(_[0])&&utils_type.A.isPoint(_[0]()))ne=_[0]();else{if(!utils_type.A.isString(_[0]))throw new Error("JSXGraph: Can't create Parabola with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,line]`);ne=G.select(_[0])}return utils_type.A.isArray(ie)&&ie.length===2&&(te=utils_type.A.copyAttributes(J,G.options,"conic","line"),ie=G.create("line",ie,te)),utils_type.A.exists(_[3])||(_[3]=2*Math.PI),utils_type.A.exists(_[2])||(_[2]=0),ee=G.create("point",[function(){return geometry.A.projectPointToLine(ne,ie,G).usrCoords}],oe),(Q=G.create("curve",[function(ae){return 0},function(ae){return 0},_[2],_[3]],se)).midpoint=Q.center=ee,Q.subs={center:Q.center},Q.inherits.push(Q.center),Z=function(ae,ce){var ue,de,me,fe,_e,ye;ce||(ue=ie.stdform[1],de=ie.stdform[2],me=ie.stdform[0],fe=ue*ue+de*de,_e=ne.X(),ye=ne.Y(),Q.quadraticform=[[me*me-fe*(_e*_e+ye*ye),me*ue+fe*_e,me*de+fe*ye],[me*ue+fe*_e,-de*de,ue*de],[me*de+fe*ye,ue*de,-ue*ue]])},Q.X=function(ae,ce){var ue,de=ie.getAngle(),me=geometry.A.distPointLine(ne.coords.usrCoords,ie.stdform),fe=ie.point1.coords.usrCoords,_e=ie.point2.coords.usrCoords,ye=ne.coords.usrCoords;return fe[0]===0?fe=[1,_e[1]+ie.stdform[2],_e[2]-ie.stdform[1]]:_e[0]===0&&(_e=[1,fe[1]+ie.stdform[2],fe[2]-ie.stdform[1]]),ue=((_e[1]-fe[1])*(ye[2]-fe[2])-(_e[2]-fe[2])*(ye[1]-fe[1])>=0?1:-1)*me/(1-Math.sin(ae)),ce||Z(0,ce),ne.X()+Math.cos(ae+de)*ue},Q.Y=function(ae,ce){var ue,de=ie.getAngle(),me=geometry.A.distPointLine(ne.coords.usrCoords,ie.stdform),fe=ie.point1.coords.usrCoords,_e=ie.point2.coords.usrCoords,ye=ne.coords.usrCoords;return fe[0]===0?fe=[1,_e[1]+ie.stdform[2],_e[2]-ie.stdform[1]]:_e[0]===0&&(_e=[1,fe[1]+ie.stdform[2],fe[2]-ie.stdform[1]]),ue=((_e[1]-fe[1])*(ye[2]-fe[2])-(_e[2]-fe[2])*(ye[1]-fe[1])>=0?1:-1)*me/(1-Math.sin(ae)),ne.Y()+Math.sin(ae+de)*ue},Q.type=constants.A.OBJECT_TYPE_CONIC,ee.addChild(Q),utils_type.A.isPoint(ne)&&(ne.addChild(Q),Q.inherits.push(ne)),ie.addChild(Q),Q.setParents(_),Q},jxg.A.createConic=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue,de,me,fe=[[1,0,0],[0,1,0],[0,0,1]],_e=[[1,0,0],[0,1,0],[0,0,1]],ye=[],be=[],Se=utils_type.A.copyAttributes(J,G.options,"conic","point"),Ce=utils_type.A.copyAttributes(J,G.options,"conic","center"),Me=utils_type.A.copyAttributes(J,G.options,"conic");if(_.length===5)me=!0;else{if(_.length!==6)throw new Error("JSXGraph: Can't create generic Conic with "+_.length+" parameters.");me=!1}if(me)for(ue=0;ue<5;ue++)if(_[ue].length>1)ye[ue]=G.create("point",_[ue],Se);else if(utils_type.A.isPoint(_[ue]))ye[ue]=G.select(_[ue]);else if(utils_type.A.isFunction(_[ue])&&utils_type.A.isPoint(_[ue]()))ye[ue]=_[ue]();else{if(!utils_type.A.isString(_[ue]))throw new Error("JSXGraph: Can't create Conic section with parent types '"+typeof _[ue]+`'.
Possible parent types: [point,point,point,point,point], [a00,a11,a22,a01,a02,a12]`);ye[ue]=G.select(_[ue])}else(de=[[0,0,0],[0,0,0],[0,0,0]])[0][0]=utils_type.A.isFunction(_[2])?function(){return _[2]()}:function(){return _[2]},de[0][1]=utils_type.A.isFunction(_[4])?function(){return _[4]()}:function(){return _[4]},de[0][2]=utils_type.A.isFunction(_[5])?function(){return _[5]()}:function(){return _[5]},de[1][1]=utils_type.A.isFunction(_[0])?function(){return _[0]()}:function(){return _[0]},de[1][2]=utils_type.A.isFunction(_[3])?function(){return _[3]()}:function(){return _[3]},de[2][2]=utils_type.A.isFunction(_[1])?function(){return _[1]()}:function(){return _[1]};if(ne=function(Re){var Te,Ee;for(Te=0;Te<3;Te++)for(Ee=Te;Ee<3;Ee++)Re[Te][Ee]+=Re[Ee][Te];for(Te=0;Te<3;Te++)for(Ee=0;Ee<Te;Ee++)Re[Te][Ee]=Re[Ee][Te];return Re},te=function(Re,Te){var Ee,De,Le=[[0,0,0],[0,0,0],[0,0,0]];for(Ee=0;Ee<3;Ee++)for(De=0;De<3;De++)Le[Ee][De]=Re[Ee]*Te[De];return ne(Le)},ee=function(Re,Te,Ee){var De,Le,Ue,Ge,Ye,ke=[[0,0,0],[0,0,0],[0,0,0]];for(Ye=math.A.matVecMult(Te,Ee),Ue=math.A.innerProduct(Ee,Ye),Ye=math.A.matVecMult(Re,Ee),Ge=math.A.innerProduct(Ee,Ye),De=0;De<3;De++)for(Le=0;Le<3;Le++)ke[De][Le]=Ue*Re[De][Le]-Ge*Te[De][Le];return ke},Q=G.create("curve",[function(Re){return 0},function(Re){return 0},0,2*Math.PI],Me),Z=function(Re,Te){var Ee,De,Le;if(!Te){if(me){for(Ee=0;Ee<5;Ee++)be[Ee]=ye[Ee].coords.usrCoords;ae=te(math.A.crossProduct(be[0],be[1]),math.A.crossProduct(be[2],be[3])),ce=te(math.A.crossProduct(be[0],be[2]),math.A.crossProduct(be[1],be[3])),_e=ee(ae,ce,be[4])}else for(Ee=0;Ee<3;Ee++)for(De=Ee;De<3;De++)_e[Ee][De]=de[Ee][De](),De>Ee&&(_e[De][Ee]=_e[Ee][De]);Q.quadraticform=_e,(ie=numerics.A.Jacobi(_e))[0][0][0]<0&&(ie[0][0][0]*=-1,ie[0][1][1]*=-1,ie[0][2][2]*=-1),fe=ie[1],se=Math.sqrt(Math.abs(ie[0][0][0])),re=Math.sqrt(Math.abs(ie[0][1][1])),oe=Math.sqrt(Math.abs(ie[0][2][2]))}return ie[0][1][1]<=0&&ie[0][2][2]<=0?Le=math.A.matVecMult(fe,[1/se,Math.cos(Re)/re,Math.sin(Re)/oe]):ie[0][1][1]<=0&&ie[0][2][2]>0?Le=math.A.matVecMult(fe,[Math.cos(Re)/se,1/re,Math.sin(Re)/oe]):ie[0][2][2]<0&&(Le=math.A.matVecMult(fe,[Math.sin(Re)/se,Math.cos(Re)/re,1/oe])),utils_type.A.exists(Le)?(Le[1]/=Le[0],Le[2]/=Le[0],Le[0]=1):Le=[1,NaN,NaN],Le},Q.X=function(Re,Te){return Z(Re,Te)[1]},Q.Y=function(Re,Te){return Z(Re,Te)[2]},Q.midpoint=G.create("point",[function(){var Re=Q.quadraticform;return[Re[1][1]*Re[2][2]-Re[1][2]*Re[1][2],Re[1][2]*Re[0][2]-Re[2][2]*Re[0][1],Re[0][1]*Re[1][2]-Re[1][1]*Re[0][2]]}],Ce),Q.type=constants.A.OBJECT_TYPE_CONIC,Q.center=Q.midpoint,Q.subs={center:Q.center},Q.inherits.push(Q.center),Q.inherits=Q.inherits.concat(ye),me){for(ue=0;ue<5;ue++)utils_type.A.isPoint(ye[ue])&&ye[ue].addChild(Q);Q.setParents(_)}return Q.addChild(Q.center),Q},jxg.A.registerElement("ellipse",jxg.A.createEllipse),jxg.A.registerElement("hyperbola",jxg.A.createHyperbola),jxg.A.registerElement("parabola",jxg.A.createParabola),jxg.A.registerElement("conic",jxg.A.createConic),jxg.A.Polygon=function(G,_,J){this.constructor(G,J,constants.A.OBJECT_TYPE_POLYGON,constants.A.OBJECT_CLASS_AREA);var Z,Q,ee,te,ne,ie=utils_type.A.copyAttributes(J,G.options,"polygon","borders");for(this.withLines=J.withlines,this.attr_line=ie,this.vertices=[],Z=0;Z<_.length;Z++)this.vertices[Z]=this.board.select(_[Z]),this.vertices[Z]._is_new&&(delete this.vertices[Z]._is_new,this.vertices[Z]._is_new_pol=!0);if(this.vertices.length>0&&this.vertices[this.vertices.length-1].id!==this.vertices[0].id&&this.vertices.push(this.vertices[0]),this.borders=[],this.withLines)for(ee=this.vertices.length-1,te=0;te<ee;te++)Z=(te+1)%ee,ie.id=ie.ids&&ie.ids[Z],ie.name=ie.names&&ie.names[Z],ie.strokecolor=utils_type.A.isArray(ie.colors)&&ie.colors[Z%ie.colors.length]||ie.strokecolor,ie.visible=utils_type.A.exists(J.borders.visible)?J.borders.visible:J.visible,ie.strokecolor===!1&&(ie.strokecolor="none"),(Q=G.create("segment",[this.vertices[Z],this.vertices[Z+1]],ie)).dump=!1,this.borders[Z]=Q,Q.parentPolygon=this,this.addChild(Q);for(this.inherits.push(this.vertices,this.borders),this.id=this.board.setId(this,"Py"),Z=0;Z<this.vertices.length-1;Z++)ne=this.board.select(this.vertices[Z]),utils_type.A.exists(ne._is_new_pol)?(this.addChild(ne),delete ne._is_new_pol):ne.addChild(this);this.board.renderer.drawPolygon(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="polygon",this.createLabel(),this.methodMap=jxg.A.deepCopy(this.methodMap,{borders:"borders",vertices:"vertices",A:"Area",Area:"Area",Perimeter:"Perimeter",L:"Perimeter",boundingBox:"bounds",BoundingBox:"bounds",addPoints:"addPoints",insertPoints:"insertPoints",removePoints:"removePoints",Intersect:"intersect"})},jxg.A.Polygon.prototype=new base_element.A,jxg.A.extend(jxg.A.Polygon.prototype,{pnpoly:function(G,_,J){return geometry.A.pnpoly(G,_,this.vertices,J,this.board)},hasPoint:function(G,_){var J,Z;if(this.evalVisProp("hasinnerpoints")&&this.pnpoly(G,_))return!0;for(Z=this.borders.length,J=0;J<Z;J++)if(this.borders[J].hasPoint(G,_))return!0;return!1},updateRenderer:function(){var G,_;if(!this.needsUpdate)return this;if(this.visPropCalc.visible){for(_=this.vertices.length-(this.elType==="polygonalchain"?0:1),this.isReal=!0,G=0;G<_;++G)if(!this.vertices[G].isReal){this.isReal=!1;break}if(!this.isReal)for(G in this.updateVisibility(!1),this.childElements)this.childElements.hasOwnProperty(G)&&this.childElements[G].setDisplayRendNode(!1)}return this.visPropCalc.visible&&this.board.renderer.updatePolygon(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this},getTextAnchor:function(){var G,_,J,Z,Q;if(this.vertices.length===0)return new base_coords.A(constants.A.COORDS_BY_USER,[1,0,0],this.board);for(J=G=this.vertices[0].X(),Z=_=this.vertices[0].Y(),Q=0;Q<this.vertices.length;Q++)this.vertices[Q].X()<G&&(G=this.vertices[Q].X()),this.vertices[Q].X()>J&&(J=this.vertices[Q].X()),this.vertices[Q].Y()>_&&(_=this.vertices[Q].Y()),this.vertices[Q].Y()<Z&&(Z=this.vertices[Q].Y());return new base_coords.A(constants.A.COORDS_BY_USER,[.5*(G+J),.5*(_+Z)],this.board)},getLabelAnchor:jxg.A.shortcut(jxg.A.Polygon.prototype,"getTextAnchor"),cloneToBackground:function(){var G,_=utils_type.A.getCloneObject(this);return _.vertices=this.vertices,G=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawPolygon(_),this.board.renderer.enhancedRendering=G,this.traces[_.id]=_.rendNode,this},hideElement:function(G){var _;if(jxg.A.deprecated("Element.hideElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!1,this.board.renderer.display(this,!1),!G)for(_=0;_<this.borders.length;_++)this.borders[_].hideElement();this.hasLabel&&utils_type.A.exists(this.label)&&(this.label.hiddenByParent=!0,this.label.visPropCalc.visible&&this.label.hideElement())},showElement:function(G){var _;if(jxg.A.deprecated("Element.showElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!0,this.board.renderer.display(this,!0),!G)for(_=0;_<this.borders.length;_++)this.borders[_].showElement().updateRenderer();return utils_type.A.exists(this.label)&&this.hasLabel&&this.label.hiddenByParent&&(this.label.hiddenByParent=!1,this.label.visPropCalc.visible||this.label.showElement().updateRenderer()),this},Area:function(){return Math.abs(geometry.A.signedPolygon(this.vertices,!0))},Perimeter:function(){var G,_=this.vertices.length,J=0;for(G=1;G<_;++G)J+=this.vertices[G].Dist(this.vertices[G-1]);return J},L:function(){return this.Perimeter()},boundingBox:function(){var G,_,J=[0,0,0,0],Z=this.vertices.length-1;if(Z===0)return J;for(J[0]=this.vertices[0].X(),J[2]=J[0],J[1]=this.vertices[0].Y(),J[3]=J[1],G=1;G<Z;++G)(_=this.vertices[G].X())<J[0]?J[0]=_:_>J[2]&&(J[2]=_),(_=this.vertices[G].Y())>J[1]?J[1]=_:_<J[3]&&(J[3]=_);return J},bounds:function(){return this.boundingBox()},remove:function(){var G;for(G=0;G<this.borders.length;G++)this.board.removeObject(this.borders[G]);base_element.A.prototype.remove.call(this)},findPoint:function(G){var _;if(!utils_type.A.isPoint(G))return-1;for(_=0;_<this.vertices.length;_++)if(this.vertices[_].id===G.id)return _;return-1},addPoints:function(G){var _,J=Array.prototype.slice.call(arguments);return _=this.elType==="polygonalchain"?this.vertices.length-1:this.vertices.length-2,this.insertPoints.apply(this,[_].concat(J))},insertPoints:function(G,_){var J,Z,Q,ee,te;if(arguments.length===0)return this;if(Q=this.vertices.length-1,this.elType==="polygon"&&Q--,G<-1||G>Q)return this;for(Z=arguments.length-1,J=1;J<Z+1;J++)(te=utils_type.A.providePoints(this.board,[arguments[J]],{},"polygon",["vertices"])[0])._is_new&&(this.addChild(te),delete te._is_new),this.vertices.splice(G+J,0,te);if(this.withLines)for(ee=G+1,this.elType==="polygon"?G<0?(this.vertices[this.vertices.length-1]=this.vertices[0],this.borders[this.borders.length-1].point2=this.vertices[this.vertices.length-1]):this.borders[G].point2=this.vertices[ee]:G>=0&&(G<this.borders.length?this.borders[G].point2=this.vertices[ee]:ee=G),J=ee;J<ee+Z;J++)this.borders.splice(J,0,this.board.create("segment",[this.vertices[J],this.vertices[J+1]],this.attr_line));return this.inherits=[],this.inherits.push(this.vertices,this.borders),this.board.update(),this},removePoints:function(G){var _,J,Z,Q,ee=[],te=[],ne=[],ie=[];for(this.elType==="polygon"&&(Q=this.vertices.pop()),_=0;_<arguments.length;_++)Z=arguments[_],utils_type.A.isPoint(Z)&&(Z=this.findPoint(Z)),utils_type.A.isNumber(Z)&&Z>-1&&Z<this.vertices.length&&utils_type.A.indexOf(ne,Z)===-1&&ne.push(Z);if(ne.length===0)return this.elType==="polygon"&&this.vertices.push(Q),this;for(_=0;_<ne.length;_++)this.vertices[ne[_]].removeChild(this);for(ne=ne.sort(),ee=this.vertices.slice(),te=this.borders.slice(),this.withLines&&ie.push([ne[ne.length-1]]),_=ne.length-1;_>-1;_--)ee[ne[_]]=-1,this.withLines&&ne.length>1&&ne[_]-1>ne[_-1]&&(ie[ie.length-1][1]=ne[_],ie.push([ne[_-1]]));for(this.withLines&&(ie[ie.length-1][1]=ne[0]),this.vertices=[],_=0;_<ee.length;_++)utils_type.A.isPoint(ee[_])&&this.vertices.push(ee[_]);if(this.elType==="polygon"&&this.vertices.length>1&&this.vertices[this.vertices.length-1].id!==this.vertices[0].id&&this.vertices.push(this.vertices[0]),this.withLines){for(_=0;_<ie.length;_++){for(J=ie[_][1]-1;J<ie[_][0]+1;J++)J<0?this.elType==="polygon"&&(this.board.removeObject(this.borders[te.length-1]),te[te.length-1]=-1):J<te.length&&(this.board.removeObject(this.borders[J]),te[J]=-1);ie[_][1]!==0&&ie[_][0]!==ee.length-1&&(te[ie[_][0]-1]=this.board.create("segment",[ee[ie[_][1]-1],ee[ie[_][0]+1]],this.attr_line))}for(this.borders=[],_=0;_<te.length;_++)te[_]!==-1&&this.borders.push(te[_]);this.elType==="polygon"&&this.vertices.length>2&&(ie[0][1]===this.vertices.length-1||ie[ie.length-1][1]===0)&&this.borders.push(this.board.create("segment",[this.vertices[this.vertices.length-2],this.vertices[0]],this.attr_line))}return this.inherits=[],this.inherits.push(this.vertices,this.borders),this.board.update(),this},getParents:function(){return this.setParents(this.vertices),this.parents},getAttributes:function(){var G,_=base_element.A.prototype.getAttributes.call(this);if(this.withLines)for(_.lines=_.lines||{},_.lines.ids=[],_.lines.colors=[],G=0;G<this.borders.length;G++)_.lines.ids.push(this.borders[G].id),_.lines.colors.push(this.borders[G].visProp.strokecolor);return _},snapToGrid:function(){var G,_;for(_=!!this.evalVisProp("snaptogrid"),G=0;G<this.vertices.length;G++)this.vertices[G].handleSnapToGrid(_,!0)},setPositionDirectly:function(G,_,J){var Z,Q,ee,te=new base_coords.A(G,_,this.board),ne=new base_coords.A(G,J,this.board);for(ee=this.vertices.length-1,Q=0;Q<ee;Q++)if(!this.vertices[Q].draggable())return this;return Z=statistics.A.subtract(te.usrCoords,ne.usrCoords),this.board.create("transform",Z.slice(1),{type:"translate"}).applyOnce(this.vertices.slice(0,-1)),this},sutherlandHodgman:function(G){var _,J,Z,Q,ee,te,ne,ie=jxg.A.Math.Geometry.sortVertices(this.vertices),re=jxg.A.Math.Geometry.sortVertices(G.vertices),oe=ie.length-1,se=re.length-1,ae=[],ce=function(ue,de,me){return(de[1]-ue[1])*(me[2]-ue[2])-(de[2]-ue[2])*(me[1]-ue[1])>=0};for(Z=0;Z<se;Z++)ae.push(re[Z]);for(Z=0;Z<oe;Z++)for(J=ae.slice(0),ae=[],ee=J[(_=J.length)-1],Q=0;Q<_;Q++)te=J[Q],ce(ie[Z],ie[Z+1],te)?(ce(ie[Z],ie[Z+1],ee)||((ne=jxg.A.Math.Geometry.meetSegmentSegment(ee,te,ie[Z],ie[Z+1]))[0][1]/=ne[0][0],ne[0][2]/=ne[0][0],ne[0][0]=1,ae.push(ne[0])),ae.push(te)):ce(ie[Z],ie[Z+1],ee)&&((ne=jxg.A.Math.Geometry.meetSegmentSegment(ee,te,ie[Z],ie[Z+1]))[0][1]/=ne[0][0],ne[0][2]/=ne[0][0],ne[0][0]=1,ae.push(ne[0])),ee=te;return ae},intersect:function(G){return this.sutherlandHodgman(G)}}),jxg.A.createPolygon=function(G,_,J){var Z,Q,ee,te,ne,ie,re=[],oe=!1;if(utils_type.A.copyAttributes(J,G.options,"polygon"),(te=G.select(_[0]))===null&&(te=_[0]),utils_type.A.isObject(te)&&te.type===constants.A.OBJECT_TYPE_POLYGON&&utils_type.A.isTransformationOrArray(_[1]))for(oe=!0,ee=te.vertices.length-1,ie=utils_type.A.copyAttributes(J,G.options,"polygon","vertices"),Q=0;Q<ee;Q++)ie.withlabel&&(ie.name=te.vertices[Q].name===""?"":te.vertices[Q].name+"'"),re.push(G.create("point",[te.vertices[Q],_[1]],ie));else if((re=utils_type.A.providePoints(G,_,J,"polygon",["vertices"]))===!1)throw new Error("JSXGraph: Can't create polygon / polygonalchain with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates. Alternatively, a polygon and a transformation can be supplied");if(ne=utils_type.A.copyAttributes(J,G.options,"polygon"),(Z=new jxg.A.Polygon(G,re,ne)).isDraggable=!0,oe)for(Z.prepareUpdate().update().updateVisibility().updateRenderer(),ee=te.vertices.length-1,Q=0;Q<ee;Q++)re[Q].prepareUpdate().update().updateVisibility().updateRenderer();return Z},jxg.A.createRegularPolygon=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe=[];if(ee=_[(ne=_.length)-1],utils_type.A.isNumber(ee)&&(_.length!==3||ee<3))throw new Error("JSXGraph: A regular polygon needs two point types and a number > 2 as input.");if(utils_type.A.isNumber(G.select(ee))?(ne--,ie=!1):(ee=ne,ie=!0),(oe=utils_type.A.providePoints(G,_.slice(0,ne),J,"regularpolygon",["vertices"]))===!1)throw new Error("JSXGraph: Can't create regular polygon with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates");for(re=utils_type.A.copyAttributes(J,G.options,"regularpolygon","vertices"),Q=2;Q<ee;Q++)te=G.create("transform",[Math.PI*(2-(ee-2)/ee),oe[Q-1]],{type:"rotate"}),ie?(oe[Q].addTransform(oe[Q-2],te),oe[Q].fullUpdate()):(utils_type.A.isArray(re.ids)&&re.ids.length>=ee-2&&(re.id=re.ids[Q-2]),oe[Q]=G.create("point",[oe[Q-2],te],re),oe[Q].type=constants.A.OBJECT_TYPE_CAS,oe[Q].isDraggable=!0,oe[Q].visProp.fixed=!1);return re=utils_type.A.copyAttributes(J,G.options,"regularpolygon"),(Z=G.create("polygon",oe,re)).elType="regularpolygon",Z},jxg.A.createPolygonalChain=function(G,_,J){var Z,Q;return Z=utils_type.A.copyAttributes(J,G.options,"polygonalchain"),(Q=G.create("polygon",_,Z)).elType="polygonalchain",Q.vertices.pop(),G.removeObject(Q.borders[Q.borders.length-1]),Q.borders.pop(),Q},jxg.A.createParallelogram=function(G,_,J){var Z,Q,ee,te,ne;if((ee=utils_type.A.providePoints(G,_,J,"polygon",["vertices"]))===!1||ee.length<3)throw new Error("JSXGraph: Can't create parallelogram with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates.");return ne=utils_type.A.copyAttributes(J,G.options,"parallelogram","parallelpoint"),Q=G.create("parallelpoint",ee,ne),te=utils_type.A.copyAttributes(J,G.options,"parallelogram"),(Z=G.create("polygon",[ee[0],ee[1],Q,ee[2]],te)).elType="parallelogram",Z.parallelPoint=Q,Z.isDraggable=!0,Q.isDraggable=!0,Q.visProp.fixed=!1,Z},jxg.A.registerElement("polygon",jxg.A.createPolygon),jxg.A.registerElement("regularpolygon",jxg.A.createRegularPolygon),jxg.A.registerElement("polygonalchain",jxg.A.createPolygonalChain),jxg.A.registerElement("parallelogram",jxg.A.createParallelogram);var polygon=jxg.A.Polygon;jxg.A.Curve=function(G,_,J){this.constructor(G,J,constants.A.OBJECT_TYPE_CURVE,constants.A.OBJECT_CLASS_CURVE),this.points=[],this.numberPoints=this.evalVisProp("numberpointshigh"),this.bezierDegree=1,this.dataX=null,this.dataY=null,this.ticks=[],this.qdt=null,utils_type.A.exists(_[0])?this.varname=_[0]:this.varname="x",this.xterm=_[1],this.yterm=_[2],this.generateTerm(this.varname,this.xterm,this.yterm,_[3],_[4]),this.updateCurve(),this.id=this.board.setId(this,"G"),this.board.renderer.drawCurve(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="curve",this.createLabel(),utils_type.A.isString(this.xterm)&&this.notifyParents(this.xterm),utils_type.A.isString(this.yterm)&&this.notifyParents(this.yterm),this.methodMap=utils_type.A.deepCopy(this.methodMap,{generateTerm:"generateTerm",setTerm:"generateTerm",move:"moveTo",moveTo:"moveTo",MinX:"minX",MaxX:"maxX"})},jxg.A.Curve.prototype=new base_element.A,jxg.A.extend(jxg.A.Curve.prototype,{minX:function(){return this.evalVisProp("curvetype")==="polar"?0:new base_coords.A(constants.A.COORDS_BY_SCREEN,[.1*-this.board.canvasWidth,0],this.board,!1).usrCoords[1]},maxX:function(){return this.evalVisProp("curvetype")==="polar"?2*Math.PI:new base_coords.A(constants.A.COORDS_BY_SCREEN,[1.1*this.board.canvasWidth,0],this.board,!1).usrCoords[1]},X:function(G){return NaN},Y:function(G){return NaN},Z:function(G){return 1},Ft:function(G){var _=[this.Z(G),this.X(G),this.Y(G)];return this.transformations.length>0&&(_=math.A.matVecMult(this.transformMat,_)),_[1]/=_[0],_[2]/=_[0],_[0]/=_[0],_},hasPoint:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue,de,me,fe,_e,ye=[],be=this.evalVisProp("numberpointslow"),Se=(this.maxX()-this.minX())/be,Ce=1/0,Me=!0;if(utils_type.A.isObject(this.evalVisProp("precision"))?(ue=this.board._inputDevice,ce=this.evalVisProp("precision."+ue)):ce=this.board.options.precision.hasPoint,G=(ie=new base_coords.A(constants.A.COORDS_BY_SCREEN,[G,_],this.board,!1)).usrCoords[1],_=ie.usrCoords[2],this.bezierDegree===1&&this.evalVisProp("hasinnerpoints")&&geometry.A.windingNumber([1,G,_],this.points,!0)!==0)return!0;if(ce+=.5*this.evalVisProp("strokewidth"),ce*=ce,de=this.board.unitX*this.board.unitX,me=this.board.unitY*this.board.unitY,_e=this.minX(),this.maxX(),utils_type.A.exists(this._visibleArea)&&(_e=this._visibleArea[0],Se=(this._visibleArea[1]-_e)/be),(fe=this.evalVisProp("curvetype"))==="parameter"||fe==="polar")for(this.transformations.length>0&&(this.updateTransformMatrix(),oe=math.A.inverse(this.transformMat),G=(Q=math.A.matVecMult(oe,[1,G,_]))[1],_=Q[2]),ee=0,Z=_e;ee<be;ee++){if((Ce=(G-(te=this.X(Z,Me)))*(G-te)*de+(_-(ne=this.Y(Z,Me)))*(_-ne)*me)<=ce)return!0;Z+=Se}else if(fe==="plot"||fe==="functiongraph"){for((!utils_type.A.exists(J)||J<0)&&(J=0),utils_type.A.exists(this.qdt)&&this.evalVisProp("useqdt")&&this.bezierDegree!==3?re=(se=(ae=this.qdt.query(new base_coords.A(constants.A.COORDS_BY_USER,[G,_],this.board))).points).length:(se=this.points,re=this.numberPoints-1),ee=J;ee<re;ee++)if(this.bezierDegree===3?ye=geometry.A.projectCoordsToBeziersegment([1,G,_],this,ee):ae?(se[ee].prev&&(ye=geometry.A.projectCoordsToSegment([1,G,_],se[ee].prev.usrCoords,se[ee].usrCoords)),se[ee].next&&se[ee+1]!==se[ee].next&&(ye=geometry.A.projectCoordsToSegment([1,G,_],se[ee].usrCoords,se[ee].next.usrCoords))):ye=geometry.A.projectCoordsToSegment([1,G,_],se[ee].usrCoords,se[ee+1].usrCoords),ye[1]>=0&&ye[1]<=1&&(G-ye[0][1])*(G-ye[0][1])*de+(_-ye[0][2])*(_-ye[0][2])*me<=ce)return!0;return!1}return Ce<ce},allocatePoints:function(){var G,_;if(_=this.numberPoints,this.points.length<this.numberPoints)for(G=this.points.length;G<_;G++)this.points[G]=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],this.board,!1)},update:function(){return this.needsUpdate&&(this.evalVisProp("trace")&&this.cloneToBackground(!0),this.updateCurve()),this},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=plot.checkReal(this.points),this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateCurve(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},updateDataArray:function(){},updateCurve:function(){var G,_,J,Z,Q,ee,te=this.visProp.plotversion,ne=!1;if(this.updateTransformMatrix(),this.updateDataArray(),J=this.minX(),Z=this.maxX(),utils_type.A.exists(this.dataX))for(this.numberPoints=this.dataX.length,_=this.numberPoints,this.allocatePoints(),G=0;G<_;G++)Q=G,utils_type.A.exists(this.dataY)?(ee=G,this.points[G].setCoordinates(constants.A.COORDS_BY_USER,[this.dataX[G],this.dataY[G]],!1)):(ee=this.X(Q),this.points[G].setCoordinates(constants.A.COORDS_BY_USER,[this.dataX[G],this.Y(ee,ne)],!1)),this.points[G]._t=G,ne=!0;else if(this.evalVisProp("doadvancedplot")?te===1||this.evalVisProp("doadvancedplotold")?plot.updateParametricCurveOld(this,J,Z):te===2?plot.updateParametricCurve_v2(this,J,Z):te===3?plot.updateParametricCurve_v3(this,J,Z):te===4?plot.updateParametricCurve_v4(this,J,Z):plot.updateParametricCurve_v2(this,J,Z):(this.board.updateQuality===this.board.BOARD_QUALITY_HIGH?this.numberPoints=this.evalVisProp("numberpointshigh"):this.numberPoints=this.evalVisProp("numberpointslow"),this.allocatePoints(),plot.updateParametricCurveNaive(this,J,Z,this.numberPoints)),_=this.numberPoints,this.evalVisProp("useqdt")&&this.board.updateQuality===this.board.BOARD_QUALITY_HIGH)for(this.qdt=new qdt(this.board.getBoundingBox()),G=0;G<this.points.length;G++)this.qdt.insert(this.points[G]),G>0&&(this.points[G].prev=this.points[G-1]),G<_-1&&(this.points[G].next=this.points[G+1]);for(this.evalVisProp("curvetype")!=="plot"&&this.evalVisProp("rdpsmoothing")&&(this.points=numerics.A.RamerDouglasPeucker(this.points,.2),this.numberPoints=this.points.length),_=this.numberPoints,G=0;G<_;G++)this.updateTransform(this.points[G]);return this},updateTransformMatrix:function(){var G,_,J=this.transformations.length;for(this.transformMat=[[1,0,0],[0,1,0],[0,0,1]],_=0;_<J;_++)(G=this.transformations[_]).update(),this.transformMat=math.A.matMatMult(G.matrix,this.transformMat);return this},updateTransform:function(G){var _;return this.transformations.length>0&&(_=math.A.matVecMult(this.transformMat,G.usrCoords),G.setCoordinates(constants.A.COORDS_BY_USER,_,!1,!0)),G},addTransform:function(G){var _,J=utils_type.A.isArray(G)?G:[G],Z=J.length;for(_=0;_<Z;_++)this.transformations.push(J[_]);return this},interpolationFunctionFromArray:function(G){var _="data"+G,J=this;return function(Z,Q){var ee,te,ne,ie,re=J[_],oe=re.length,se=[];if(isNaN(Z))return NaN;if(Z<0)return utils_type.A.isFunction(re[0])?re[0]():re[0];if(J.bezierDegree===3){if(Z>=(oe-1)/3)return utils_type.A.isFunction(re[re.length-1])?re[re.length-1]():re[re.length-1];for(ee=3*Math.floor(Z),ie=1-(ne=Z%1),te=0;te<4;te++)utils_type.A.isFunction(re[ee+te])?se[te]=re[ee+te]():se[te]=re[ee+te];return ie*ie*(ie*se[0]+3*ne*se[1])+(3*ie*se[2]+ne*se[3])*ne*ne}if((ee=Z>oe-2?oe-2:parseInt(Math.floor(Z),10))===Z)return utils_type.A.isFunction(re[ee])?re[ee]():re[ee];for(te=0;te<2;te++)utils_type.A.isFunction(re[ee+te])?se[te]=re[ee+te]():se[te]=re[ee+te];return se[0]+(se[1]-se[0])*(Z-ee)}},generateTerm:function(G,_,J,Z,Q){var ee,te,ne;utils_type.A.isArray(_)?(this.dataX=_,this.numberPoints=this.dataX.length,this.X=this.interpolationFunctionFromArray.apply(this,["X"]),this.visProp.curvetype="plot",this.isDraggable=!0):(this.X=utils_type.A.createFunction(_,this.board,G),utils_type.A.isString(_)?this.visProp.curvetype="functiongraph":(utils_type.A.isFunction(_)||utils_type.A.isNumber(_))&&(this.visProp.curvetype="parameter"),this.isDraggable=!0),utils_type.A.isArray(J)?(this.dataY=J,this.Y=this.interpolationFunctionFromArray.apply(this,["Y"])):utils_type.A.exists(J)?this.Y=utils_type.A.createFunction(J,this.board,G):(ne=math.A.transpose(_),this.dataX=ne[0],this.dataY=ne[1],this.numberPoints=this.dataX.length,this.Y=this.interpolationFunctionFromArray.apply(this,["Y"])),utils_type.A.isFunction(_)&&utils_type.A.isArray(J)&&(ee=utils_type.A.createFunction(J[0],this.board,""),te=utils_type.A.createFunction(J[1],this.board,""),this.X=function(ie){return _(ie)*Math.cos(ie)+ee()},this.X.deps=ee.deps,this.Y=function(ie){return _(ie)*Math.sin(ie)+te()},this.Y.deps=te.deps,this.visProp.curvetype="polar"),utils_type.A.exists(Z)?this.minX=utils_type.A.createFunction(Z,this.board,""):delete this.minX,utils_type.A.exists(Q)?this.maxX=utils_type.A.createFunction(Q,this.board,""):delete this.maxX,this.addParentsFromJCFunctions([this.X,this.Y,this.minX,this.maxX])},notifyParents:function(G){var _,J,Z,Q=!1;for(_ in Z={xterm:1,yterm:1})if(Z.hasOwnProperty(_)&&this.hasOwnProperty(_)&&this[_].origin)for(J in Q=!0,this[_].origin.deps)this[_].origin.deps.hasOwnProperty(J)&&this[_].origin.deps[J].addChild(this);Q||geonext.A.findDependencies(this,G,this.board)},getLabelPosition:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue,de=1.5;return re=this.minX(),oe=this.maxX(),se=numerics.A.findDomain(this.X,[re,oe],null,!1),se=numerics.A.findDomain(this.Y,se,null,!1),re=Math.max(se[0],se[0]),oe=Math.min(se[1],se[1]),Q=utils_type.A.parsePosition(G),ie=utils_type.A.parseNumber(Q.pos,oe-re,1),Q.pos.indexOf("fr")<0&&Q.pos.indexOf("%")<0&&(ie=0),ae=re+ie,J=this.X(ae),Z=this.Y(ae),isNaN(J+Z)&&(ae=re+(ie/=oe-re),J=this.X(re)+ie*(this.X(oe)-this.X(re)),Z=this.Y(re)+ie*(this.Y(oe)-this.Y(re))),ee=new base_coords.A(constants.A.COORDS_BY_USER,[J,Z],this.board).scrCoords,ae<re+(ne=math.A.eps)?(ce=(this.X(ae+ne)-this.X(ae))/ne,ue=(this.Y(ae+ne)-this.Y(ae))/ne):ae>oe-ne?(ce=(this.X(ae)-this.X(ae-ne))/ne,ue=(this.Y(ae)-this.Y(ae-ne))/ne):(ce=.5*(this.X(ae+ne)-this.X(ae-ne))/ne,ue=.5*(this.Y(ae+ne)-this.Y(ae-ne))/ne),ce=isNaN(ce)?1:ce,ue=isNaN(ue)?1:ue,te=math.A.hypot(ce,ue),Q.side==="left"?ue*=-1:ce*=-1,utils_type.A.exists(this.label)&&(de=.5*_/te),J=ee[1]+ue*this.label.size[0]*de,Z=ee[2]-ce*this.label.size[1]*de,new base_coords.A(constants.A.COORDS_BY_SCREEN,[J,Z],this.board)},getLabelAnchor:function(){var G,_,J,Z,Q=.05*this.board.canvasWidth,ee=.05*this.board.canvasHeight,te=.95*this.board.canvasWidth,ne=.95*this.board.canvasHeight;if(!utils_type.A.exists(this.label))return new base_coords.A(constants.A.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(J=this.label.evalVisProp("position"),!utils_type.A.isString(J))return new base_coords.A(constants.A.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(!(J.indexOf("right")<0&&J.indexOf("left")<0))return this.getLabelPosition(J,this.label.evalVisProp("distance"));switch(this.evalVisProp("label.position")){case"ulft":G=Q,_=ee;break;case"llft":G=Q,_=ne;break;case"rt":G=te,_=.5*ne;break;case"lrt":G=te,_=ne;break;case"urt":G=te,_=ee;break;case"top":G=.5*te,_=ee;break;case"bot":G=.5*te,_=ne;break;default:G=Q,_=.5*ne}return Z=new base_coords.A(constants.A.COORDS_BY_SCREEN,[G,_],this.board,!1),geometry.A.projectCoordsToCurve(Z.usrCoords[1],Z.usrCoords[2],0,this,this.board)[0]},cloneToBackground:function(){var G,_=utils_type.A.getCloneObject(this);return _.points=this.points.slice(0),_.bezierDegree=this.bezierDegree,_.numberPoints=this.numberPoints,G=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawCurve(_),this.board.renderer.enhancedRendering=G,this.traces[_.id]=_.rendNode,this},bounds:function(){var G,_,J,Z=1/0,Q=-1/0,ee=1/0,te=-1/0,ne=this.points.length;if(this.bezierDegree===3){for(G=0;G<ne;G++)this.points[G].X=utils_type.A.bind(function(){return this.usrCoords[1]},this.points[G]),this.points[G].Y=utils_type.A.bind(function(){return this.usrCoords[2]},this.points[G]);return J=(_=numerics.A.bezier(this.points))[3](),Z=numerics.A.fminbr(function(ie){return _[0](ie)},[0,J]),Q=numerics.A.fminbr(function(ie){return-_[0](ie)},[0,J]),ee=numerics.A.fminbr(function(ie){return _[1](ie)},[0,J]),te=numerics.A.fminbr(function(ie){return-_[1](ie)},[0,J]),Z=_[0](Z),Q=_[0](Q),ee=_[1](ee),[Z,te=_[1](te),Q,ee]}for(G=0;G<ne;G++)Z>this.points[G].usrCoords[1]&&(Z=this.points[G].usrCoords[1]),Q<this.points[G].usrCoords[1]&&(Q=this.points[G].usrCoords[1]),ee>this.points[G].usrCoords[2]&&(ee=this.points[G].usrCoords[2]),te<this.points[G].usrCoords[2]&&(te=this.points[G].usrCoords[2]);return[Z,te,Q,ee]},getParents:function(){var G=[this.xterm,this.yterm,this.minX(),this.maxX()];return this.parents.length!==0&&(G=this.parents),G},moveTo:function(G){var _,J=[];return this.points.length>0&&!this.evalVisProp("fixed")?(_=this.points[0],J=G.length===3?[G[0]-_.usrCoords[0],G[1]-_.usrCoords[1],G[2]-_.usrCoords[2]]:[G[0]-_.usrCoords[1],G[1]-_.usrCoords[2]],this.setPosition(constants.A.COORDS_BY_USER,J),this.board.update(this)):this},getTransformationSource:function(){var G,_;return utils_type.A.exists(this._transformationSource)&&(_=this._transformationSource).elementClass===constants.A.OBJECT_CLASS_CURVE&&(G=!0),[G,_]}}),jxg.A.createCurve=function(G,_,J){var Z,Q,ee=utils_type.A.copyAttributes(J,G.options,"curve");return Z=G.select(_[0],!0),utils_type.A.isTransformationOrArray(_[1])&&utils_type.A.isObject(Z)&&(Z.type===constants.A.OBJECT_TYPE_CURVE||Z.type===constants.A.OBJECT_TYPE_ANGLE||Z.type===constants.A.OBJECT_TYPE_ARC||Z.type===constants.A.OBJECT_TYPE_CONIC||Z.type===constants.A.OBJECT_TYPE_SECTOR)?(Z.type===constants.A.OBJECT_TYPE_SECTOR?ee=utils_type.A.copyAttributes(J,G.options,"sector"):Z.type===constants.A.OBJECT_TYPE_ARC?ee=utils_type.A.copyAttributes(J,G.options,"arc"):Z.type===constants.A.OBJECT_TYPE_ANGLE?(utils_type.A.exists(J.withLabel)||(J.withLabel=!1),ee=utils_type.A.copyAttributes(J,G.options,"angle")):ee=utils_type.A.copyAttributes(J,G.options,"curve"),ee=utils_type.A.copyAttributes(ee,G.options,"curve"),(Q=new jxg.A.Curve(G,["x",[],[]],ee)).updateDataArray=function(){var te,ne=Z.numberPoints;for(this.bezierDegree=Z.bezierDegree,this.dataX=[],this.dataY=[],te=0;te<ne;te++)this.dataX.push(Z.points[te].usrCoords[1]),this.dataY.push(Z.points[te].usrCoords[2]);return this},Q.addTransform(_[1]),Z.addChild(Q),Q.setParents([Z]),Q._transformationSource=Z,Q):(ee=utils_type.A.copyAttributes(J,G.options,"curve"),new jxg.A.Curve(G,["x"].concat(_),ee))},jxg.A.registerElement("curve",jxg.A.createCurve),jxg.A.createFunctiongraph=function(G,_,J){var Z,Q=["x","x"].concat(_);return Z=utils_type.A.copyAttributes(J,G.options,"functiongraph"),(Z=utils_type.A.copyAttributes(Z,G.options,"curve")).curvetype="functiongraph",new jxg.A.Curve(G,Q,Z)},jxg.A.registerElement("functiongraph",jxg.A.createFunctiongraph),jxg.A.registerElement("plot",jxg.A.createFunctiongraph),jxg.A.createSpline=function(G,_,J){var Z,Q,ee;return Q=function(){var te,ne=[],ie=[];return[function(re,oe){var se,ae,ce;if(!oe){if(ne=[],ie=[],_.length===2&&utils_type.A.isArray(_[0])&&utils_type.A.isArray(_[1])&&_[0].length===_[1].length)for(se=0;se<_[0].length;se++)utils_type.A.isFunction(_[0][se])?ne.push(_[0][se]()):ne.push(_[0][se]),utils_type.A.isFunction(_[1][se])?ie.push(_[1][se]()):ie.push(_[1][se]);else for(se=0;se<_.length;se++)if(utils_type.A.isPoint(_[se]))ne.push(_[se].X()),ie.push(_[se].Y());else if(utils_type.A.isArray(_[se])&&_[se].length===2)for(ae=0;ae<_.length;ae++)utils_type.A.isFunction(_[ae][0])?ne.push(_[ae][0]()):ne.push(_[ae][0]),utils_type.A.isFunction(_[ae][1])?ie.push(_[ae][1]()):ie.push(_[ae][1]);else utils_type.A.isFunction(_[se])&&_[se]().length===2&&(ce=_[se](),ne.push(ce[0]),ie.push(ce[1]));te=numerics.A.splineDef(ne,ie)}return numerics.A.splineEval(re,ne,ie,te)},function(){return ne[0]},function(){return ne[ne.length-1]}]},(J=utils_type.A.copyAttributes(J,G.options,"curve")).curvetype="functiongraph",ee=Q(),(Z=new jxg.A.Curve(G,["x","x",ee[0],ee[1],ee[2]],J)).setParents(_),Z.elType="spline",Z},jxg.A.registerElement("spline",jxg.A.createSpline),jxg.A.createCardinalSpline=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,ce=`
Possible parent types: [points:array, tau:number|function, type:string]`;if(!utils_type.A.exists(_[0])||!utils_type.A.isArray(_[0]))throw new Error("JSXGraph: JXG.createCardinalSpline: argument 1 'points' has to be array of points or coordinate pairs"+ce);if(!utils_type.A.exists(_[1])||!utils_type.A.isNumber(_[1])&&!utils_type.A.isFunction(_[1]))throw new Error("JSXGraph: JXG.createCardinalSpline: argument 2 'tau' has to be number between [0,1] or function'"+ce);if(ne=utils_type.A.exists(_[2])&&utils_type.A.isString(_[2])?_[2]:"uniform",J=utils_type.A.copyAttributes(J,G.options,"curve"),(J=utils_type.A.copyAttributes(J,G.options,"cardinalspline")).curvetype="parameter",ie=_[0],re=[],!J.isarrayofcoordinates&&ie.length===2&&utils_type.A.isArray(ie[0])&&utils_type.A.isArray(ie[1])&&ie[0].length===ie[1].length)for(oe=0;oe<ie[0].length;oe++)re[oe]=[],utils_type.A.isFunction(ie[0][oe])?re[oe].push(ie[0][oe]()):re[oe].push(ie[0][oe]),utils_type.A.isFunction(ie[1][oe])?re[oe].push(ie[1][oe]()):re[oe].push(ie[1][oe]);else for(oe=0;oe<ie.length;oe++)utils_type.A.isString(ie[oe])?re.push(G.select(ie[oe])):utils_type.A.isPoint(ie[oe])?re.push(ie[oe]):utils_type.A.isArray(ie[oe])&&ie[oe].length===2?(re[oe]=[],utils_type.A.isFunction(ie[oe][0])?re[oe].push(ie[oe][0]()):re[oe].push(ie[oe][0]),utils_type.A.isFunction(ie[oe][1])?re[oe].push(ie[oe][1]()):re[oe].push(ie[oe][1])):utils_type.A.isFunction(ie[oe])&&ie[oe]().length===2&&re.push(_[oe]());if(J.createpoints===!0)ee=utils_type.A.providePoints(G,re,J,"cardinalspline",["points"]);else for(ee=[],Q=function(ue){return{X:function(){return re[ue][0]},Y:function(){return re[ue][1]},Dist:function(de){var me=this.X()-de.X(),fe=this.Y()-de.Y();return math.A.hypot(me,fe)}}},oe=0;oe<re.length;oe++)utils_type.A.isPoint(re[oe])?ee.push(re[oe]):ee.push(Q(oe));for(te=_[1],ae=["x"].concat(numerics.A.CardinalSpline(ee,te,ne)),Z=new jxg.A.Curve(G,ae,J),se=ee.length,Z.setParents(ee),oe=0;oe<se;oe++)ie=ee[oe],utils_type.A.isPoint(ie)&&(utils_type.A.exists(ie._is_new)?(Z.addChild(ie),delete ie._is_new):ie.addChild(Z));return Z.elType="cardinalspline",Z},jxg.A.registerElement("cardinalspline",jxg.A.createCardinalSpline),jxg.A.createMetapostSpline=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se=`
Possible parent types: [points:array, controls:object`;if(!utils_type.A.exists(_[0])||!utils_type.A.isArray(_[0]))throw new Error("JSXGraph: JXG.createMetapostSpline: argument 1 'points' has to be array of points or coordinate pairs"+se);if(!utils_type.A.exists(_[1])||!utils_type.A.isObject(_[1]))throw new Error("JSXGraph: JXG.createMetapostSpline: argument 2 'controls' has to be a JavaScript object'"+se);if(J=utils_type.A.copyAttributes(J,G.options,"curve"),(J=utils_type.A.copyAttributes(J,G.options,"metapostspline")).curvetype="parameter",ne=_[0],ie=[],!J.isarrayofcoordinates&&ne.length===2&&utils_type.A.isArray(ne[0])&&utils_type.A.isArray(ne[1])&&ne[0].length===ne[1].length)for(re=0;re<ne[0].length;re++)ie[re]=[],utils_type.A.isFunction(ne[0][re])?ie[re].push(ne[0][re]()):ie[re].push(ne[0][re]),utils_type.A.isFunction(ne[1][re])?ie[re].push(ne[1][re]()):ie[re].push(ne[1][re]);else for(re=0;re<ne.length;re++)utils_type.A.isString(ne[re])?ie.push(G.select(ne[re])):utils_type.A.isPoint(ne[re])?ie.push(ne[re]):utils_type.A.isArray(ne[re])&&ne[re].length===2?(ie[re]=[],utils_type.A.isFunction(ne[re][0])?ie[re].push(ne[re][0]()):ie[re].push(ne[re][0]),utils_type.A.isFunction(ne[re][1])?ie[re].push(ne[re][1]()):ie[re].push(ne[re][1])):utils_type.A.isFunction(ne[re])&&ne[re]().length===2&&ie.push(_[re]());if(J.createpoints===!0)ee=utils_type.A.providePoints(G,ie,J,"metapostspline",["points"]);else for(ee=[],Q=function(ae){return{X:function(){return ie[ae][0]},Y:function(){return ie[ae][1]}}},re=0;re<ie.length;re++)utils_type.A.isPoint(ie[re])?ee.push(ie[re]):ee.push(Q);for(te=_[1],(Z=new jxg.A.Curve(G,["t",[],[],0,ne.length-1],J)).updateDataArray=function(){var ae,ce,ue=ee.length,de=[];for(ce=0;ce<ue;ce++)de.push([ee[ce].X(),ee[ce].Y()]);ae=metapost.curve(de,te),this.dataX=ae[0],this.dataY=ae[1]},Z.bezierDegree=3,oe=ee.length,Z.setParents(ee),re=0;re<oe;re++)utils_type.A.isPoint(ee[re])&&ee[re].addChild(Z);return Z.elType="metapostspline",Z},jxg.A.registerElement("metapostspline",jxg.A.createMetapostSpline),jxg.A.createRiemannsum=function(G,_,J){var Z,Q,ee,te,ne,ie;if((ie=utils_type.A.copyAttributes(J,G.options,"riemannsum")).curvetype="plot",ee=_[0],Z=utils_type.A.createFunction(_[1],G,""),!utils_type.A.exists(Z))throw new Error(`JSXGraph: JXG.createRiemannsum: argument '2' n has to be number or function.
Possible parent types: [function,n:number|function,type,start:number|function,end:number|function]`);if(typeof _[2]=="string"&&(_[2]="'"+_[2]+"'"),Q=utils_type.A.createFunction(_[2],G,""),!utils_type.A.exists(Q))throw new Error(`JSXGraph: JXG.createRiemannsum: argument 3 'type' has to be string or function.
Possible parent types: [function,n:number|function,type,start:number|function,end:number|function]`);return te=[[0],[0]].concat(_.slice(3)),(ne=G.create("curve",te,ie)).sum=0,ne.Value=function(){return this.sum},ne.updateDataArray=function(){var re=numerics.A.riemann(ee,Z(),Q(),this.minX(),this.maxX());this.dataX=re[0],this.dataY=re[1],this.sum=re[2]},ne.addParentsFromJCFunctions([Z,Q]),ne},jxg.A.registerElement("riemannsum",jxg.A.createRiemannsum),jxg.A.createTracecurve=function(G,_,J){var Z,Q,ee,te;if(_.length!==2)throw new Error(`JSXGraph: Can't create trace curve with given parent'
Possible parent types: [glider, point]`);if(Q=G.select(_[0]),ee=G.select(_[1]),Q.type!==constants.A.OBJECT_TYPE_GLIDER||!utils_type.A.isPoint(ee))throw new Error("JSXGraph: Can't create trace curve with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [glider, point]`);return(te=utils_type.A.copyAttributes(J,G.options,"tracecurve")).curvetype="plot",(Z=G.create("curve",[[0],[0]],te)).updateDataArray=function(){var ne,ie,re,oe,se,ae,ce,ue,de,me=this.visProp.numberpoints,fe=Q.position,_e=Q.slideObject,ye=_e.minX();for(ie=(_e.maxX()-ye)/me,this.dataX=[],this.dataY=[],_e.elementClass!==constants.A.OBJECT_CLASS_CURVE&&me++,ne=0;ne<me;ne++){for(oe in re=ye+ne*ie,ae=_e.X(re)/_e.Z(re),ce=_e.Y(re)/_e.Z(re),Q.setPositionDirectly(constants.A.COORDS_BY_USER,[ae,ce]),ue=!1,this.board.objects)if(this.board.objects.hasOwnProperty(oe)&&((se=this.board.objects[oe])===Q&&(ue=!0),ue&&se.needsRegularUpdate&&(de=se.visProp.trace,se.visProp.trace=!1,se.needsUpdate=!0,se.update(!0),se.visProp.trace=de,se===ee)))break;this.dataX[ne]=ee.X(),this.dataY[ne]=ee.Y()}for(oe in Q.position=fe,ue=!1,this.board.objects)if(this.board.objects.hasOwnProperty(oe)&&((se=this.board.objects[oe])===Q&&(ue=!0),ue&&se.needsRegularUpdate&&(de=se.visProp.trace,se.visProp.trace=!1,se.needsUpdate=!0,se.update(!0),se.visProp.trace=de,se===ee)))break},Z},jxg.A.registerElement("tracecurve",jxg.A.createTracecurve),jxg.A.createStepfunction=function(G,_,J){var Z,Q;if(_.length!==2)throw new Error(`JSXGraph: Can't create step function with given parent'
Possible parent types: [array, array|function]`);return Q=utils_type.A.copyAttributes(J,G.options,"stepfunction"),(Z=G.create("curve",_,Q)).updateDataArray=function(){var ee,te=0,ne=this.xterm.length;if(this.dataX=[],this.dataY=[],ne!==0)for(this.dataX[te]=this.xterm[0],this.dataY[te]=this.yterm[0],++te,ee=1;ee<ne;++ee)this.dataX[te]=this.xterm[ee],this.dataY[te]=this.dataY[te-1],++te,this.dataX[te]=this.xterm[ee],this.dataY[te]=this.yterm[ee],++te},Z},jxg.A.registerElement("stepfunction",jxg.A.createStepfunction),jxg.A.createDerivative=function(G,_,J){var Z,Q,ee,te,ne;if(_.length!==1&&_[0].class!==constants.A.OBJECT_CLASS_CURVE)throw new Error(`JSXGraph: Can't create derivative curve with given parent'
Possible parent types: [curve]`);return ne=utils_type.A.copyAttributes(J,G.options,"curve"),Q=_[0],ee=numerics.A.D(Q.X),te=numerics.A.D(Q.Y),(Z=G.create("curve",[function(ie){return Q.X(ie)},function(ie){return te(ie)/ee(ie)},Q.minX(),Q.maxX()],ne)).setParents(Q),Z},jxg.A.registerElement("derivative",jxg.A.createDerivative),jxg.A.createCurveIntersection=function(G,_,J){var Z;if(_.length!==2)throw new Error(`JSXGraph: Can't create curve intersection with given parent'
Possible parent types: [array, array|function]`);return(Z=G.create("curve",[[],[]],J)).updateDataArray=function(){var Q=clip.intersection(_[0],_[1],this.board);this.dataX=Q[0],this.dataY=Q[1]},Z},jxg.A.createCurveUnion=function(G,_,J){var Z;if(_.length!==2)throw new Error(`JSXGraph: Can't create curve union with given parent'
Possible parent types: [array, array|function]`);return(Z=G.create("curve",[[],[]],J)).updateDataArray=function(){var Q=clip.union(_[0],_[1],this.board);this.dataX=Q[0],this.dataY=Q[1]},Z},jxg.A.createCurveDifference=function(G,_,J){var Z;if(_.length!==2)throw new Error(`JSXGraph: Can't create curve difference with given parent'
Possible parent types: [array, array|function]`);return(Z=G.create("curve",[[],[]],J)).updateDataArray=function(){var Q=clip.difference(_[0],_[1],this.board);this.dataX=Q[0],this.dataY=Q[1]},Z},jxg.A.registerElement("curvedifference",jxg.A.createCurveDifference),jxg.A.registerElement("curveintersection",jxg.A.createCurveIntersection),jxg.A.registerElement("curveunion",jxg.A.createCurveUnion),jxg.A.createBoxPlot=function(G,_,J){var Z,Q,ee,te=utils_type.A.copyAttributes(J,G.options,"boxplot");if(_.length!==3)throw new Error(`JSXGraph: Can't create box plot with given parent'
Possible parent types: [array, number|function, number|function] containing quantiles, axis, width`);if(_[0].length<5)throw new Error(`JSXGraph: Can't create box plot with given parent[0]'
parent[0] has to contain at least 5 quantiles.`);for(Z=G.create("curve",[[],[]],te),ee=_[0].length,Z.Q=[],Q=0;Q<ee;Q++)Z.Q[Q]=utils_type.A.createFunction(_[0][Q],G);return Z.x=utils_type.A.createFunction(_[1],G),Z.w=utils_type.A.createFunction(_[2],G),Z.updateDataArray=function(){var ne,ie,re,oe,se,ae,ce,ue,de;ce=this.evalVisProp("smallwidth"),ue=this.evalVisProp("dir"),re=(de=this.x())-.5*this.w(),oe=de-.5*this.w()*ce,se=de+.5*this.w(),ne=[de,oe,ae=de+.5*this.w()*ce,de,de,re,re,se,se,de,NaN,re,se,NaN,de,de,oe,ae,de],ie=[this.Q[0](),this.Q[0](),this.Q[0](),this.Q[0](),this.Q[1](),this.Q[1](),this.Q[3](),this.Q[3](),this.Q[1](),this.Q[1](),NaN,this.Q[2](),this.Q[2](),NaN,this.Q[3](),this.Q[4](),this.Q[4](),this.Q[4](),this.Q[4]()],ue==="vertical"?(this.dataX=ne,this.dataY=ie):(this.dataX=ie,this.dataY=ne)},Z.addParentsFromJCFunctions([Z.Q,Z.x,Z.w]),Z},jxg.A.registerElement("boxplot",jxg.A.createBoxPlot),jxg.A.createImplicitCurve=function(G,_,J){var Z,Q;if([1,3,5].indexOf(_.length)<0)throw new Error(`JSXGraph: Can't create curve implicitCurve with given parent'
Possible parent types: [f], [f, rangex, rangey], [f, dfx, dfy] or [f, dfx, dfy, rangex, rangey]
with functions f, dfx, dfy and arrays of length 2 rangex, rangey.`);return Q=utils_type.A.copyAttributes(J,G.options,"implicitcurve"),(Z=G.create("curve",[[],[]],Q)).f=utils_type.A.createFunction(_[0],G,"x, y"),_.length===5||utils_type.A.isString(_[1])||utils_type.A.isFunction(_[1])?Z.dfx=utils_type.A.createFunction(_[1],G,"x, y"):Z.dfx=null,_.length===5||utils_type.A.isString(_[2])||utils_type.A.isFunction(_[2])?Z.dfy=utils_type.A.createFunction(_[2],G,"x, y"):Z.dfy=null,Z.domain=null,_.length===5?Z.domain=[_[3],_[4]]:_.length===3&&(Z.domain=[_[1],_[2]]),Z.updateDataArray=function(){var ee,te,ne,ie,re,oe,se;this.domain===null?(se=this.evalVisProp("margin"),(ee=this.board.getBoundingBox())[0]-=se,ee[1]+=se,ee[2]+=se,ee[3]-=se):(te=utils_type.A.evaluate(this.domain[0]),ne=utils_type.A.evaluate(this.domain[1]),ee=[Math.min(te[0],te[1]),Math.max(ne[0],ne[1]),Math.max(te[0],te[1]),Math.min(ne[0],ne[1])]),re={resolution_out:Math.max(.01,this.evalVisProp("resolution_outer")),resolution_in:Math.max(.01,this.evalVisProp("resolution_inner")),max_steps:this.evalVisProp("max_steps"),alpha_0:this.evalVisProp("alpha_0"),tol_u0:this.evalVisProp("tol_u0"),tol_newton:this.evalVisProp("tol_newton"),tol_cusp:this.evalVisProp("tol_cusp"),tol_progress:this.evalVisProp("tol_progress"),qdt_box:this.evalVisProp("qdt_box"),kappa_0:this.evalVisProp("kappa_0"),delta_0:this.evalVisProp("delta_0"),h_initial:this.evalVisProp("h_initial"),h_critical:this.evalVisProp("h_critical"),h_max:this.evalVisProp("h_max"),loop_dist:this.evalVisProp("loop_dist"),loop_dir:this.evalVisProp("loop_dir"),loop_detection:this.evalVisProp("loop_detection"),unitX:this.board.unitX,unitY:this.board.unitY},this.dataX=[],this.dataY=[],ie=new implicitplot(ee,re,this.f,this.dfx,this.dfy),this.qdt=ie.qdt,oe=ie.plot(),this.dataX=oe[0],this.dataY=oe[1]},Z.elType="implicitcurve",Z},jxg.A.registerElement("implicitcurve",jxg.A.createImplicitCurve),jxg.A.Curve,jxg.A.createArc=function(G,_,J){var Z,Q,ee;if((ee=utils_type.A.providePoints(G,_,J,"arc",["center","radiuspoint","anglepoint"]))===!1||ee.length<3)throw new Error("JSXGraph: Can't create Arc with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [point,point,point], [arc, transformation]`);return Q=utils_type.A.copyAttributes(J,G.options,"arc"),(Z=G.create("curve",[[0],[0],0,4],Q)).elType="arc",Z.setParents(ee),Z.type=constants.A.OBJECT_TYPE_ARC,Z.center=ee[0],Z.radiuspoint=ee[1],Z.point2=Z.radiuspoint,Z.anglepoint=ee[2],Z.point3=Z.anglepoint,utils_type.A.exists(Z.center._is_new)?(Z.addChild(Z.center),delete Z.center._is_new):Z.center.addChild(Z),utils_type.A.exists(Z.radiuspoint._is_new)?(Z.addChild(Z.radiuspoint),delete Z.radiuspoint._is_new):Z.radiuspoint.addChild(Z),utils_type.A.exists(Z.anglepoint._is_new)?(Z.addChild(Z.anglepoint),delete Z.anglepoint._is_new):Z.anglepoint.addChild(Z),Z.useDirection=Q.usedirection,Z.updateDataArray=function(){var te,ne,ie,re,oe,se=1,ae=this.radiuspoint,ce=this.center,ue=this.anglepoint,de=this.evalVisProp("selection");ne=geometry.A.rad(ae,ce,ue),(de==="minor"&&ne>Math.PI||de==="major"&&ne<Math.PI)&&(se=-1),this.useDirection&&(ie=ee[1].coords.usrCoords,re=ee[3].coords.usrCoords,oe=ee[2].coords.usrCoords,(ie[1]-oe[1])*(ie[2]-re[2])-(ie[2]-oe[2])*(ie[1]-re[1])<0?(this.radiuspoint=ee[1],this.anglepoint=ee[2]):(this.radiuspoint=ee[2],this.anglepoint=ee[1])),ae=ae.coords.usrCoords,ce=ce.coords.usrCoords,ue=ue.coords.usrCoords,te=geometry.A.bezierArc(ae,ce,ue,!1,se),this.dataX=te[0],this.dataY=te[1],this.bezierDegree=3,this.updateStdform(),this.updateQuadraticform()},Z.Radius=function(){return this.radiuspoint.Dist(this.center)},Z.getRadius=function(){return jxg.A.deprecated("Arc.getRadius()","Arc.Radius()"),this.Radius()},Z.Value=function(te,ne){var ie;return ne=ne||geometry.A.rad(this.radiuspoint,this.center,this.anglepoint),(te=(te=te||"length").toLocaleLowerCase())===""||te.indexOf("len")===0?ie=ne*this.Radius():te.indexOf("rad")===0?ie=ne:te.indexOf("deg")===0?ie=180*ne/Math.PI:te.indexOf("sem")===0?ie=ne/Math.PI:te.indexOf("cir")===0&&(ie=.5*ne/Math.PI),ie},Z.L=function(){return this.Value("length")},Z.hasPoint=function(te,ne){var ie,re,oe,se,ae,ce,ue,de=this.Radius();return this.evalVisProp("hasinnerpoints")?this.hasPointSector(te,ne):(utils_type.A.isObject(this.evalVisProp("precision"))?(ue=this.board._inputDevice,ce=this.evalVisProp("precision."+ue)):ce=this.board.options.precision.hasPoint,ce/=Math.min(Math.abs(this.board.unitX),Math.abs(this.board.unitY)),re=new base_coords.A(constants.A.COORDS_BY_SCREEN,[te,ne],this.board),this.transformations.length>0&&(this.updateTransformMatrix(),se=math.A.inverse(this.transformMat),ae=math.A.matVecMult(se,re.usrCoords),re=new base_coords.A(constants.A.COORDS_BY_USER,ae,this.board)),ie=this.center.coords.distance(constants.A.COORDS_BY_USER,re),(oe=Math.abs(ie-de)<ce)&&(oe=geometry.A.coordsOnArc(this,re)),oe)},Z.hasPointSector=function(te,ne){var ie=new base_coords.A(constants.A.COORDS_BY_SCREEN,[te,ne],this.board),re=this.Radius(),oe=this.center.coords.distance(constants.A.COORDS_BY_USER,ie)<re;return oe&&(oe=geometry.A.coordsOnArc(this,ie)),oe},Z.getTextAnchor=function(){return this.center.coords},Z.getLabelAnchor=function(){var te,ne,ie,re,oe,se=this.label.evalVisProp("position"),ae=geometry.A.rad(this.radiuspoint,this.center,this.anglepoint),ce=10/this.board.unitX,ue=10/this.board.unitY,de=this.point2.coords.usrCoords,me=this.center.coords.usrCoords,fe=de[1]-me[1],_e=de[2]-me[2],ye=this.evalVisProp("selection"),be=this.label?this.label.visProp:this.visProp.label;return!utils_type.A.isString(se)||se.indexOf("right")<0&&se.indexOf("left")<0?((ye==="minor"&&ae>Math.PI||ye==="major"&&ae<Math.PI)&&(ae=-(2*Math.PI-ae)),ie=(te=new base_coords.A(constants.A.COORDS_BY_USER,[me[1]+Math.cos(.5*ae)*fe-Math.sin(.5*ae)*_e,me[2]+Math.sin(.5*ae)*fe+Math.cos(.5*ae)*_e],this.board)).usrCoords[1]-me[1],re=te.usrCoords[2]-me[2],ie=ie*((oe=math.A.hypot(ie,re))+ce)/oe,re=re*(oe+ue)/oe,ne=[me[1]+ie,me[2]+re],be.position=geometry.A.calcLabelQuadrant(geometry.A.rad([1,0],[0,0],ne)),new base_coords.A(constants.A.COORDS_BY_USER,ne,this.board)):this.getLabelPosition(se,this.label.evalVisProp("distance"))},Z.updateQuadraticform=circle.prototype.updateQuadraticform,Z.updateStdform=circle.prototype.updateStdform,Z.methodMap=jxg.A.deepCopy(Z.methodMap,{getRadius:"getRadius",radius:"Radius",Radius:"Radius",center:"center",radiuspoint:"radiuspoint",anglepoint:"anglepoint",Value:"Value",L:"L"}),Z.prepareUpdate().update(),Z},jxg.A.registerElement("arc",jxg.A.createArc),jxg.A.createSemicircle=function(G,_,J){var Z,Q,ee,te;if((te=utils_type.A.providePoints(G,_,J,"point"))===!1||te.length!==2)throw new Error("JSXGraph: Can't create Semicircle with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,point]`);return ee=utils_type.A.copyAttributes(J,G.options,"semicircle","center"),(Q=G.create("midpoint",te,ee)).dump=!1,ee=utils_type.A.copyAttributes(J,G.options,"semicircle"),(Z=G.create("arc",[Q,te[1],te[0]],ee)).elType="semicircle",Z.setParents([te[0].id,te[1].id]),Z.subs={midpoint:Q},Z.inherits.push(Q),Z.midpoint=Z.center=Q,Z},jxg.A.registerElement("semicircle",jxg.A.createSemicircle),jxg.A.createCircumcircleArc=function(G,_,J){var Z,Q,ee,te;if((te=utils_type.A.providePoints(G,_,J,"point"))===!1||te.length!==3)throw new Error("JSXGraph: create Circumcircle Arc with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [point,point,point]`);return ee=utils_type.A.copyAttributes(J,G.options,"circumcirclearc","center"),(Q=G.create("circumcenter",te,ee)).dump=!1,(ee=utils_type.A.copyAttributes(J,G.options,"circumcirclearc")).usedirection=!0,(Z=G.create("arc",[Q,te[0],te[2],te[1]],ee)).elType="circumcirclearc",Z.setParents([te[0].id,te[1].id,te[2].id]),Z.subs={center:Q},Z.inherits.push(Q),Z.center=Q,Z},jxg.A.registerElement("circumcirclearc",jxg.A.createCircumcircleArc),jxg.A.createMinorArc=function(G,_,J){return J.selection="minor",jxg.A.createArc(G,_,J)},jxg.A.registerElement("minorarc",jxg.A.createMinorArc),jxg.A.createMajorArc=function(G,_,J){return J.selection="major",jxg.A.createArc(G,_,J)},jxg.A.registerElement("majorarc",jxg.A.createMajorArc),jxg.A.createSector=function(G,_,J){var Z,Q,ee,te,ne,ie,re=1e-14,oe="invalid";if(_[0].elementClass===constants.A.OBJECT_CLASS_LINE&&_[1].elementClass===constants.A.OBJECT_CLASS_LINE&&(utils_type.A.isArray(_[2])||utils_type.A.isNumber(_[2]))&&(utils_type.A.isArray(_[3])||utils_type.A.isNumber(_[3]))&&(utils_type.A.isNumber(_[4])||utils_type.A.isFunction(_[4])||utils_type.A.isString(_[4])))oe="2lines";else{if((ie=utils_type.A.providePoints(G,_,J,"sector",["center","radiusPoint","anglePoint"]))===!1)throw new Error("JSXGraph: Can't create Sector with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"' and '"+typeof _[2]+"'.");oe="3points"}if(Q=utils_type.A.copyAttributes(J,G.options,"sector"),(Z=G.create("curve",[[0],[0],0,6],Q)).type=constants.A.OBJECT_TYPE_SECTOR,Z.elType="sector",Z.autoRadius=function(){var se=20/Z.board.unitX,ae=1/0,ce=50/Z.board.unitX;return utils_type.A.isPoint(Z.center)&&(ae=.3333*Z.center.Dist(Z.point2)),Math.max(se,Math.min(ae,ce))},oe==="2lines")Z.Radius=function(){var se=utils_type.A.evaluate(_[4]);return se==="auto"?this.autoRadius():se},Z.line1=G.select(_[0]),Z.line2=G.select(_[1]),Z.line1.addChild(Z),Z.line2.addChild(Z),Z.setParents(_),Z.point1={visProp:{}},Z.point2={visProp:{}},Z.point3={visProp:{}},te=geometry.A.meetLineLine(Z.line1.stdform,Z.line2.stdform,0,G),geometry.A.distance(te.usrCoords,[0,0,0],3)<re&&(Z.line1.point1.Dist(Z.line2.point1)<re||Z.line1.point1.Dist(Z.line2.point2)<re?te=Z.line1.point1.coords:Z.line1.point2.Dist(Z.line2.point1)<re||Z.line1.point2.Dist(Z.line2.point1)<re?te=Z.line1.point2.coords:console.log("JSXGraph warning: Can't create Sector from parallel lines with no common defining point.")),utils_type.A.isArray(_[2])?(_[2].length===2&&(_[2]=[1].concat(_[2])),ne=geometry.A.projectPointToLine({coords:{usrCoords:_[2]}},Z.line1,G),ne=statistics.A.subtract(ne.usrCoords,te.usrCoords),Z.direction1=math.A.innerProduct(ne,[0,Z.line1.stdform[2],-Z.line1.stdform[1]],3)>=0?1:-1):Z.direction1=_[2]>=0?1:-1,utils_type.A.isArray(_[3])?(_[3].length===2&&(_[3]=[1].concat(_[3])),ne=geometry.A.projectPointToLine({coords:{usrCoords:_[3]}},Z.line2,G),ne=statistics.A.subtract(ne.usrCoords,te.usrCoords),Z.direction2=math.A.innerProduct(ne,[0,Z.line2.stdform[2],-Z.line2.stdform[1]],3)>=0?1:-1):Z.direction2=_[3]>=0?1:-1,Z.methodMap=jxg.A.deepCopy(Z.methodMap,{arc:"arc",center:"center",line1:"line1",line2:"line2"}),Z.updateDataArray=function(){var se,ae,ce,ue,de,me,fe=1e-14,_e=[0,0,0];if(ae=this.line1,ce=this.line2,_e=math.A.crossProduct(ae.stdform,ce.stdform),geometry.A.distance(_e,[0,0,0],3)<fe&&(ae.point1.Dist(ce.point1)<fe||ae.point1.Dist(ce.point2)<fe?_e=ae.point1.coords.usrCoords:(ae.point2.Dist(ce.point1)<fe||ae.point2.Dist(ce.point1)<fe)&&(_e=ae.point2.coords.usrCoords)),Math.abs(_e[0])>fe&&(_e[1]/=_e[0],_e[2]/=_e[0],_e[0]/=_e[0]),se=this.direction1*this.Radius(),ue=statistics.A.add(_e,[0,se*ae.stdform[2],-se*ae.stdform[1]]),se=this.direction2*this.Radius(),de=statistics.A.add(_e,[0,se*ce.stdform[2],-se*ce.stdform[1]]),this.point2.coords=new base_coords.A(constants.A.COORDS_BY_USER,ue,Z.board),this.point1.coords=new base_coords.A(constants.A.COORDS_BY_USER,_e,Z.board),this.point3.coords=new base_coords.A(constants.A.COORDS_BY_USER,de,Z.board),Math.abs(ue[0])<math.A.eps||Math.abs(_e[0])<math.A.eps||Math.abs(de[0])<math.A.eps)return this.dataX=[NaN],void(this.dataY=[NaN]);me=geometry.A.bezierArc(ue,_e,de,!0,1),this.dataX=me[0],this.dataY=me[1],this.bezierDegree=3};else if(oe==="3points"){for(Z.point1=ie[0],Z.point2=ie[1],Z.point3=ie[2],ee=0;ee<3;ee++)utils_type.A.exists(ie[ee]._is_new)?(Z.addChild(ie[ee]),delete ie[ee]._is_new):ie[ee].addChild(Z);Z.useDirection=J.usedirection,Z.setParents(ie),utils_type.A.exists(ie[3])&&(Z.point4=ie[3],Z.point4.addChild(Z)),Z.methodMap=jxg.A.deepCopy(Z.methodMap,{arc:"arc",center:"center",radiuspoint:"radiuspoint",anglepoint:"anglepoint"}),Z.updateDataArray=function(){var se,ae,ce,ue,de,me=this.point2,fe=this.point1,_e=this.point3,ye=1,be=this.evalVisProp("selection");if(!me.isReal||!fe.isReal||!_e.isReal)return this.dataX=[NaN],void(this.dataY=[NaN]);de=geometry.A.rad(me,fe,_e),(be==="minor"&&de>Math.PI||be==="major"&&de<Math.PI)&&(ye=-1),this.useDirection&&utils_type.A.exists(this.point4)&&(ae=this.point2.coords.usrCoords,ce=this.point4.coords.usrCoords,ue=this.point3.coords.usrCoords,(ae[1]-ue[1])*(ae[2]-ce[2])-(ae[2]-ue[2])*(ae[1]-ce[1])>=0&&(_e=this.point2,me=this.point3)),me=me.coords.usrCoords,fe=fe.coords.usrCoords,_e=_e.coords.usrCoords,se=geometry.A.bezierArc(me,fe,_e,!0,ye),this.dataX=se[0],this.dataY=se[1],this.bezierDegree=3},Z.Radius=function(){return this.point2.Dist(this.point1)}}return Z.center=Z.point1,Z.radiuspoint=Z.point2,Z.anglepoint=Z.point3,Q=utils_type.A.copyAttributes(J,G.options,"arc"),(Q=utils_type.A.copyAttributes(Q,G.options,"sector","arc")).withlabel=!1,Q.selection=Z.visProp.selection,Q.name+="_arc",oe==="2lines"?(Z.updateDataArray(),Z.arc=G.create("arc",[function(){return Z.point1.coords.usrCoords},function(){var se=Z.point2.coords.distance(constants.A.COORDS_BY_USER,Z.point1.coords);return se===0?[Z.point1.coords.usrCoords[1],Z.point1.coords.usrCoords[2]]:[Z.point1.coords.usrCoords[1]+Z.Radius()*(Z.point2.coords.usrCoords[1]-Z.point1.coords.usrCoords[1])/se,Z.point1.coords.usrCoords[2]+Z.Radius()*(Z.point2.coords.usrCoords[2]-Z.point1.coords.usrCoords[2])/se]},function(){return Z.point3.coords.usrCoords}],Q)):Z.arc=G.create("arc",[Z.point1,function(){var se=Z.point2.Dist(Z.point1);return se===0?[Z.point1.X(),Z.point1.Y()]:[Z.point1.X()+Z.Radius()*(Z.point2.X()-Z.point1.X())/se,Z.point1.Y()+Z.Radius()*(Z.point2.Y()-Z.point1.Y())/se]},Z.point3],Q),Z.addChild(Z.arc),Z.hasPointCurve=function(se,ae){var ce,ue,de,me,fe,_e,ye=new base_coords.A(constants.A.COORDS_BY_SCREEN,[se,ae],this.board),be=this.Radius(),Se=this.center.coords.distance(constants.A.COORDS_BY_USER,ye),Ce=this.evalVisProp("selection");return utils_type.A.isObject(this.evalVisProp("precision"))?(fe=this.board._inputDevice,me=this.evalVisProp("precision."+fe)):me=this.board.options.precision.hasPoint,me/=Math.min(Math.abs(this.board.unitX),Math.abs(this.board.unitY)),(_e=Math.abs(Se-be)<me)&&(ce=geometry.A.rad(this.point2,this.center,ye.usrCoords.slice(1)),ue=0,de=geometry.A.rad(this.point2,this.center,this.point3),(Ce==="minor"&&de>Math.PI||Ce==="major"&&de<Math.PI)&&(ue=de,de=2*Math.PI),(ce<ue||ce>de)&&(_e=!1)),_e},Z.hasPointSector=function(se,ae){var ce,ue,de,me=new base_coords.A(constants.A.COORDS_BY_SCREEN,[se,ae],this.board),fe=this.Radius(),_e=this.point1.coords.distance(constants.A.COORDS_BY_USER,me)<fe,ye=this.evalVisProp("selection");return _e&&(ce=geometry.A.rad(this.radiuspoint,this.center,me.usrCoords.slice(1)),ue=0,de=geometry.A.rad(this.radiuspoint,this.center,this.anglepoint),(ye==="minor"&&de>Math.PI||ye==="major"&&de<Math.PI)&&(ue=de,de=2*Math.PI),(ce<ue||ce>de)&&(_e=!1)),_e},Z.hasPoint=function(se,ae){return this.evalVisProp("highlightonsector")||this.evalVisProp("hasinnerpoints")?this.hasPointSector(se,ae):this.hasPointCurve(se,ae)},Z.getTextAnchor=function(){return this.point1.coords},Z.getLabelAnchor=function(){var se,ae,ce,ue,de,me=this.label.evalVisProp("position"),fe=geometry.A.rad(this.point2,this.point1,this.point3),_e=13/this.board.unitX,ye=13/this.board.unitY,be=this.point2.coords.usrCoords,Se=this.point1.coords.usrCoords,Ce=be[1]-Se[1],Me=be[2]-Se[2],Re=this.evalVisProp("selection"),Te=this.label?this.label.visProp:this.visProp.label;return!utils_type.A.isString(me)||me.indexOf("right")<0&&me.indexOf("left")<0?((Re==="minor"&&fe>Math.PI||Re==="major"&&fe<Math.PI)&&(fe=-(2*Math.PI-fe)),ce=(se=new base_coords.A(constants.A.COORDS_BY_USER,[Se[1]+Math.cos(.5*fe)*Ce-Math.sin(.5*fe)*Me,Se[2]+Math.sin(.5*fe)*Ce+Math.cos(.5*fe)*Me],this.board)).usrCoords[1]-Se[1],ue=se.usrCoords[2]-Se[2],ce=ce*((de=math.A.hypot(ce,ue))+_e)/de,ue=ue*(de+ye)/de,ae=[Se[1]+ce,Se[2]+ue],Te.position=geometry.A.calcLabelQuadrant(geometry.A.rad([1,0],[0,0],ae)),new base_coords.A(constants.A.COORDS_BY_USER,ae,this.board)):this.getLabelPosition(me,this.label.evalVisProp("distance"))},Z.setRadius=function(se){var ae=utils_type.A.evaluate(se);(se==="auto"||ae==="auto"?"auto":utils_type.A.isNumber(se)?"number":utils_type.A.isFunction(se)&&!utils_type.A.isString(ae)?"function":"undefined")!="undefined"&&(this.visProp.radius=se),Z.Radius=function(){var ce=utils_type.A.evaluate(se);return ce==="auto"?this.autoRadius():ce}},Z.getRadius=function(){return jxg.A.deprecated("Sector.getRadius()","Sector.Radius()"),this.Radius()},Z.Value=function(se){return this.arc.Value(se)},Z.L=function(){return this.arc.L()},Z.Area=function(){var se=this.Radius();return .5*se*se*this.Value("radians")},Z.Perimeter=function(){return this.L()+2*this.Radius()},oe==="3points"&&(Z.setPositionDirectly=function(se,ae,ce){var ue,de=new base_coords.A(se,ae,this.board),me=new base_coords.A(se,ce,this.board);return Z.point1.draggable()&&Z.point2.draggable()&&Z.point3.draggable()?(ue=statistics.A.subtract(de.usrCoords,me.usrCoords),this.board.create("transform",ue.slice(1),{type:"translate"}).applyOnce([Z.point1,Z.point2,Z.point3]),this):this}),Z.methodMap=jxg.A.deepCopy(Z.methodMap,{radius:"Radius",Radius:"Radius",getRadius:"Radius",setRadius:"setRadius",Value:"Value",L:"L",Area:"Area",Perimeter:"Perimeter"}),Z},jxg.A.registerElement("sector",jxg.A.createSector),jxg.A.createCircumcircleSector=function(G,_,J){var Z,Q,ee,te;if((te=utils_type.A.providePoints(G,_,J,"point"))===!1)throw new Error("JSXGraph: Can't create circumcircle sector with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"' and '"+typeof _[2]+"'.");return(Q=G.create("circumcenter",te.slice(0,3),ee)).dump=!1,ee=utils_type.A.copyAttributes(J,G.options,"circumcirclesector"),(Z=G.create("sector",[Q,te[0],te[2],te[1]],ee)).elType="circumcirclesector",Z.setParents(te),Z.center=Q,Z.subs={center:Q},Z},jxg.A.registerElement("circumcirclesector",jxg.A.createCircumcircleSector),jxg.A.createMinorSector=function(G,_,J){return J.selection="minor",jxg.A.createSector(G,_,J)},jxg.A.registerElement("minorsector",jxg.A.createMinorSector),jxg.A.createMajorSector=function(G,_,J){return J.selection="major",jxg.A.createSector(G,_,J)},jxg.A.registerElement("majorsector",jxg.A.createMajorSector),jxg.A.createAngle=function(G,_,J){var Z,Q,ee,te,ne,ie,re="invalid";if(_[0].elementClass===constants.A.OBJECT_CLASS_LINE&&_[1].elementClass===constants.A.OBJECT_CLASS_LINE&&(utils_type.A.isArray(_[2])||utils_type.A.isNumber(_[2]))&&(utils_type.A.isArray(_[3])||utils_type.A.isNumber(_[3])))re="2lines";else{if(ee={name:""},(ie=utils_type.A.providePoints(G,_,ee,"point"))===!1)throw new Error("JSXGraph: Can't create angle with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"' and '"+typeof _[2]+"'.");re="3points"}if(ee=utils_type.A.copyAttributes(J,G.options,"angle"),utils_type.A.exists(ee.name)||(ee.name=G.generateName({type:constants.A.OBJECT_TYPE_ANGLE})),Q=utils_type.A.exists(ee.radius)?ee.radius:0,G.suspendUpdate(),re==="2lines"?(_.push(Q),(Z=G.create("sector",_,ee)).updateDataArraySector=Z.updateDataArray,Z.setAngle=function(oe){},Z.free=function(oe){}):((Z=G.create("sector",[ie[1],ie[0],ie[2]],ee)).arc.visProp.priv=!0,Z.point=Z.point2=Z.radiuspoint=ie[0],Z.pointsquare=Z.point3=Z.anglepoint=ie[2],Z.Radius=function(){var oe=utils_type.A.evaluate(Q);return oe==="auto"?Z.autoRadius():oe},Z.updateDataArraySector=function(){var oe,se,ae=this.point2,ce=this.point1,ue=this.point3,de=this.Radius(),me=ce.Dist(ae),fe=1,_e=this.evalVisProp("selection");se=geometry.A.rad(ae,ce,ue),(_e==="minor"&&se>Math.PI||_e==="major"&&se<Math.PI)&&(fe=-1),ae=ae.coords.usrCoords,ce=ce.coords.usrCoords,ue=ue.coords.usrCoords,ae=[1,ce[1]+(ae[1]-ce[1])*de/me,ce[2]+(ae[2]-ce[2])*de/me],ue=[1,ce[1]+(ue[1]-ce[1])*de/me,ce[2]+(ue[2]-ce[2])*de/me],oe=geometry.A.bezierArc(ae,ce,ue,!0,fe),this.dataX=oe[0],this.dataY=oe[1],this.bezierDegree=3},Z.setAngle=function(oe){var se,ae,ce,ue=this.anglepoint,de=this.radiuspoint;return ue.draggable()&&(se=this.board.create("transform",[oe,this.center],{type:"rotate"}),ue.addTransform(de,se),se.update(),ue.moveTo(math.A.matVecMult(se.matrix,de.coords.usrCoords)),ce=utils_type.A.isFunction(oe)?function(){return 2*Math.PI-oe()}:function(){return 2*Math.PI-oe},ae=this.board.create("transform",[ce,this.center],{type:"rotate"}),ue.coords.on("update",function(){ae.update(),de.setPositionDirectly(constants.A.COORDS_BY_USER,math.A.matVecMult(ae.matrix,ue.coords.usrCoords))}),ue.setParents(de),this.hasFixedAngle=!0),this},Z.free=function(){var oe=this.anglepoint;return oe.transformations.length>0&&(oe.transformations.pop(),oe.isDraggable=!0,oe.parents=[],oe.coords.off("update")),this.hasFixedAngle=!1,this},Z.setParents(ie)),utils_type.A.exists(Z.visProp.text)&&Z.label.setText(Z.evalVisProp("text")),Z.elType="angle",Z.type=constants.A.OBJECT_TYPE_ANGLE,Z.subs={},Z.updateDataArraySquare=function(){var oe,se,ae,ce,ue,de,me,fe,_e=this.Radius();re==="2lines"&&this.updateDataArraySector(),oe=this.point2,se=this.point1,ae=this.point3,oe=oe.coords.usrCoords,se=se.coords.usrCoords,ae=ae.coords.usrCoords,ce=geometry.A.distance(oe,se,3),ue=geometry.A.distance(ae,se,3),oe=[1,se[1]+(oe[1]-se[1])*_e/ce,se[2]+(oe[2]-se[2])*_e/ce],ae=[1,se[1]+(ae[1]-se[1])*_e/ue,se[2]+(ae[2]-se[2])*_e/ue],de=math.A.crossProduct(ae,se),me=[-oe[1]*de[1]-oe[2]*de[2],oe[0]*de[1],oe[0]*de[2]],de=math.A.crossProduct(oe,se),fe=[-ae[1]*de[1]-ae[2]*de[2],ae[0]*de[1],ae[0]*de[2]],(de=math.A.crossProduct(me,fe))[1]/=de[0],de[2]/=de[0],this.dataX=[se[1],oe[1],de[1],ae[1],se[1]],this.dataY=[se[2],oe[2],de[2],ae[2],se[2]],this.bezierDegree=1},Z.updateDataArrayNone=function(){this.dataX=[NaN],this.dataY=[NaN],this.bezierDegree=1},Z.updateDataArray=function(){var oe=this.evalVisProp("type"),se=geometry.A.trueAngle(this.point2,this.point1,this.point3),ae=this.evalVisProp("selection");(ae==="minor"&&se>180||ae==="major"&&se<180)&&(se=360-se),Math.abs(se-90)<this.evalVisProp("orthosensitivity")+math.A.eps&&(oe=this.evalVisProp("orthotype")),oe==="none"?(this.updateDataArrayNone(),this.maxX=function(){return 0}):oe==="square"?(this.updateDataArraySquare(),this.maxX=function(){return 4}):oe==="sector"?(this.updateDataArraySector(),this.maxX=function(){return 6}):oe==="sectordot"&&(this.updateDataArraySector(),this.maxX=function(){return 6},this.dot.visProp.visible||this.dot.setAttribute({visible:!0})),(!this.visProp.visible||oe!=="sectordot"&&this.dot.visProp.visible)&&this.dot.setAttribute({visible:!1})},te=utils_type.A.copyAttributes(J,G.options,"angle","dot"),Z.dot=G.create("point",[function(){var oe,se,ae,ce,ue,de,me,fe,_e;return utils_type.A.exists(Z.dot)&&!Z.dot.visProp.visible?[0,0]:(oe=Z.point2.coords.usrCoords,se=Z.point1.coords.usrCoords,ae=Z.Radius(),ce=geometry.A.distance(oe,se,3),ue=geometry.A.rad(Z.point2,Z.point1,Z.point3),((_e=Z.evalVisProp("selection"))==="minor"&&ue>Math.PI||_e==="major"&&ue<Math.PI)&&(ue=-(2*Math.PI-ue)),ue*=.5,de=Math.cos(ue),me=Math.sin(ue),oe=[1,se[1]+(oe[1]-se[1])*ae/ce,se[2]+(oe[2]-se[2])*ae/ce],fe=[[1,0,0],[se[1]-.5*se[1]*de+.5*se[2]*me,.5*de,.5*-me],[se[2]-.5*se[1]*me-.5*se[2]*de,.5*me,.5*de]],math.A.matVecMult(fe,oe))}],te),Z.dot.dump=!1,Z.subs.dot=Z.dot,re==="2lines")for(ne=0;ne<2;ne++)G.select(_[ne]).addChild(Z.dot);else for(ne=0;ne<3;ne++)G.select(ie[ne]).addChild(Z.dot);return G.unsuspendUpdate(),Z.Value=function(oe){return(oe=oe||"radians")===""&&(oe="radians"),Z.arc.Value(oe)},Z.getLabelAnchor=function(){var oe,se,ae,ce,ue,de,me,fe,_e,ye=12,be=Z.evalVisProp("selection"),Se=this.label?this.label.visProp:this.visProp.label,Ce=this.label?this.label.evalVisProp("position"):this.evalVisProp("label.position");return!utils_type.A.isString(Ce)||Ce.indexOf("right")<0&&Ce.indexOf("left")<0?(utils_type.A.exists(this.label)&&utils_type.A.exists(this.label.visProp.fontsize)&&(ye=this.label.evalVisProp("fontsize")),ye/=this.board.unitX,se=Z.point2.coords.usrCoords,ae=Z.point1.coords.usrCoords,ce=Z.Radius(),ue=geometry.A.distance(se,ae,3),de=geometry.A.rad(Z.point2,Z.point1,Z.point3),(be==="minor"&&de>Math.PI||be==="major"&&de<Math.PI)&&(de=-(2*Math.PI-de)),de*=.5,me=Math.cos(de),fe=Math.sin(de),se=[1,ae[1]+(se[1]-ae[1])*ce/ue,ae[2]+(se[2]-ae[2])*ce/ue],_e=[[1,0,0],[ae[1]-.5*ae[1]*me+.5*ae[2]*fe,.5*me,.5*-fe],[ae[2]-.5*ae[1]*fe-.5*ae[2]*me,.5*fe,.5*me]],(oe=math.A.matVecMult(_e,se))[1]/=oe[0],oe[2]/=oe[0],oe[0]/=oe[0],ue=geometry.A.distance(oe,ae,3),oe=[oe[0],ae[1]+(oe[1]-ae[1])*(ce+ye)/ue,ae[2]+(oe[2]-ae[2])*(ce+ye)/ue],Se.position=geometry.A.calcLabelQuadrant(geometry.A.rad([1,0],[0,0],oe)),new base_coords.A(constants.A.COORDS_BY_USER,oe,this.board)):this.getLabelPosition(Ce,this.label.evalVisProp("distance"))},Z.methodMap=utils_type.A.deepCopy(Z.methodMap,{setAngle:"setAngle",Value:"Value",free:"free"}),Z},jxg.A.registerElement("angle",jxg.A.createAngle),jxg.A.createNonreflexAngle=function(G,_,J){var Z;return J.selection="minor",J=utils_type.A.copyAttributes(J,G.options,"nonreflexangle"),(Z=jxg.A.createAngle(G,_,J)).Value=function(Q){var ee=geometry.A.rad(this.point2,this.point1,this.point3);return(Q=Q||"radians")===""&&(Q="radians"),ee=ee<Math.PI?ee:2*Math.PI-ee,this.arc.Value(Q,ee)},Z},jxg.A.registerElement("nonreflexangle",jxg.A.createNonreflexAngle),jxg.A.createReflexAngle=function(G,_,J){var Z;return J.selection="major",J=utils_type.A.copyAttributes(J,G.options,"reflexangle"),(Z=jxg.A.createAngle(G,_,J)).Value=function(Q){var ee=geometry.A.rad(this.point2,this.point1,this.point3);return(Q=Q||"radians")===""&&(Q="radians"),ee=ee>=Math.PI?ee:2*Math.PI-ee,this.arc.Value(Q,ee)},Z},jxg.A.registerElement("reflexangle",jxg.A.createReflexAngle),jxg.A.createOrthogonalProjection=function(G,_,J){var Z,Q,ee,te;if(_[0]=G.select(_[0]),_[1]=G.select(_[1]),utils_type.A.isPointType(G,_[0])&&_[1].elementClass===constants.A.OBJECT_CLASS_LINE)Q=utils_type.A.providePoints(G,[_[0]],J,"point")[0],Z=_[1];else{if(!utils_type.A.isPointType(G,_[1])||_[0].elementClass!==constants.A.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular point with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,line]`);Q=utils_type.A.providePoints(G,[_[1]],J,"point")[0],Z=_[0]}return te=utils_type.A.copyAttributes(J,G.options,"orthogonalprojection"),ee=G.create("point",[function(){return geometry.A.projectPointToLine(Q,Z,G)}],te),utils_type.A.exists(Q._is_new)?(ee.addChild(Q),delete Q._is_new):Q.addChild(ee),Z.addChild(ee),ee.elType="orthogonalprojection",ee.setParents([Q.id,ee.id]),ee.update(),ee.generatePolynomial=function(){var ne=Z.point1.symbolic.x,ie=Z.point1.symbolic.y,re=Z.point2.symbolic.x,oe=Z.point2.symbolic.y,se=Q.symbolic.x,ae=Q.symbolic.y,ce=ee.symbolic.x,ue=ee.symbolic.y;return["("+ie+")*("+ce+")-("+ie+")*("+re+")+("+ue+")*("+re+")-("+ne+")*("+ue+")+("+ne+")*("+oe+")-("+ce+")*("+oe+")","("+ae+")*("+ie+")-("+ae+")*("+oe+")-("+ue+")*("+ie+")+("+ue+")*("+oe+")+("+se+")*("+ne+")-("+se+")*("+re+")-("+ce+")*("+ne+")+("+ce+")*("+re+")"]},ee},jxg.A.createPerpendicular=function(G,_,J){var Z,Q,ee,te;if(_[0]=G.select(_[0]),_[1]=G.select(_[1]),utils_type.A.isPointType(G,_[0])&&_[1].elementClass===constants.A.OBJECT_CLASS_LINE)Q=_[1],Z=utils_type.A.providePoints(G,[_[0]],J,"point")[0];else{if(!utils_type.A.isPointType(G,_[1])||_[0].elementClass!==constants.A.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [line,point]`);Q=_[0],Z=utils_type.A.providePoints(G,[_[1]],J,"point")[0]}return te=utils_type.A.copyAttributes(J,G.options,"perpendicular"),(ee=jxg.A.createLine(G,[function(){return Q.stdform[2]*Z.X()-Q.stdform[1]*Z.Y()},function(){return-Q.stdform[2]*Z.Z()},function(){return Q.stdform[1]*Z.Z()}],te)).elType="perpendicular",ee.setParents([Q.id,Z.id]),utils_type.A.exists(Z._is_new)?(ee.addChild(Z),delete Z._is_new):Z.addChild(ee),Q.addChild(ee),ee},jxg.A.createPerpendicularPoint=function(G,_,J){var Z,Q,ee;if(_[0]=G.select(_[0]),_[1]=G.select(_[1]),utils_type.A.isPointType(G,_[0])&&_[1].elementClass===constants.A.OBJECT_CLASS_LINE)Q=utils_type.A.providePoints(G,[_[0]],J,"point")[0],Z=_[1];else{if(!utils_type.A.isPointType(G,_[1])||_[0].elementClass!==constants.A.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular point with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,line]`);Q=utils_type.A.providePoints(G,[_[1]],J,"point")[0],Z=_[0]}return ee=G.create("point",[function(){return geometry.A.perpendicular(Z,Q,G)[0]}],J),utils_type.A.exists(Q._is_new)?(ee.addChild(Q),delete Q._is_new):Q.addChild(ee),Z.addChild(ee),ee.elType="perpendicularpoint",ee.setParents([Q.id,Z.id]),ee.update(),ee.generatePolynomial=function(){var te=Z.point1.symbolic.x,ne=Z.point1.symbolic.y,ie=Z.point2.symbolic.x,re=Z.point2.symbolic.y,oe=Q.symbolic.x,se=Q.symbolic.y,ae=ee.symbolic.x,ce=ee.symbolic.y;return["("+ne+")*("+ae+")-("+ne+")*("+ie+")+("+ce+")*("+ie+")-("+te+")*("+ce+")+("+te+")*("+re+")-("+ae+")*("+re+")","("+se+")*("+ne+")-("+se+")*("+re+")-("+ce+")*("+ne+")+("+ce+")*("+re+")+("+oe+")*("+te+")-("+oe+")*("+ie+")-("+ae+")*("+te+")+("+ae+")*("+ie+")"]},ee},jxg.A.createPerpendicularSegment=function(G,_,J){var Z,Q,ee,te,ne;if(_[0]=G.select(_[0]),_[1]=G.select(_[1]),utils_type.A.isPointType(G,_[0])&&_[1].elementClass===constants.A.OBJECT_CLASS_LINE)Q=_[1],Z=utils_type.A.providePoints(G,[_[0]],J,"point")[0];else{if(!utils_type.A.isPointType(G,_[1])||_[0].elementClass!==constants.A.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [line,point]`);Q=_[0],Z=utils_type.A.providePoints(G,[_[1]],J,"point")[0]}return ne=utils_type.A.copyAttributes(J,G.options,"perpendicularsegment","point"),(te=jxg.A.createPerpendicularPoint(G,[Q,Z],ne)).dump=!1,utils_type.A.exists(J.layer)||(J.layer=G.options.layer.line),ne=utils_type.A.copyAttributes(J,G.options,"perpendicularsegment"),(ee=jxg.A.createLine(G,[function(){return geometry.A.perpendicular(Q,Z,G)[1]?[te,Z]:[Z,te]}],ne)).point=te,utils_type.A.exists(Z._is_new)?(ee.addChild(Z),delete Z._is_new):Z.addChild(ee),Q.addChild(ee),ee.elType="perpendicularsegment",ee.setParents([Z.id,Q.id]),ee.subs={point:te},ee.inherits.push(te),ee},jxg.A.createMidpoint=function(G,_,J){var Z,Q,ee,te,ne;for(te=0;te<_.length;++te)_[te]=G.select(_[te]);if(_.length===2&&utils_type.A.isPointType(G,_[0])&&utils_type.A.isPointType(G,_[1]))_=utils_type.A.providePoints(G,_,J,"point"),Z=_[0],Q=_[1];else{if(_.length!==1||_[0].elementClass!==constants.A.OBJECT_CLASS_LINE)throw new Error(`JSXGraph: Can't create midpoint.
Possible parent types: [point,point], [line]`);Z=_[0].point1,Q=_[0].point2}return ne=utils_type.A.copyAttributes(J,G.options,"midpoint"),ee=G.create("point",[function(){var ie=Z.coords.usrCoords[1]+Q.coords.usrCoords[1];return isNaN(ie)||Math.abs(Z.coords.usrCoords[0])<math.A.eps||Math.abs(Q.coords.usrCoords[0])<math.A.eps?NaN:.5*ie},function(){var ie=Z.coords.usrCoords[2]+Q.coords.usrCoords[2];return isNaN(ie)||Math.abs(Z.coords.usrCoords[0])<math.A.eps||Math.abs(Q.coords.usrCoords[0])<math.A.eps?NaN:.5*ie}],ne),utils_type.A.exists(Z._is_new)?(ee.addChild(Z),delete Z._is_new):Z.addChild(ee),utils_type.A.exists(Q._is_new)?(ee.addChild(Q),delete Q._is_new):Q.addChild(ee),ee.elType="midpoint",ee.setParents([Z.id,Q.id]),ee.prepareUpdate().update(),ee.generatePolynomial=function(){var ie=Z.symbolic.x,re=Z.symbolic.y,oe=Q.symbolic.x,se=Q.symbolic.y,ae=ee.symbolic.x,ce=ee.symbolic.y;return["("+re+")*("+ae+")-("+re+")*("+oe+")+("+ce+")*("+oe+")-("+ie+")*("+ce+")+("+ie+")*("+se+")-("+ae+")*("+se+")","("+ie+")^2 - 2*("+ie+")*("+ae+")+("+re+")^2-2*("+re+")*("+ce+")-("+oe+")^2+2*("+oe+")*("+ae+")-("+se+")^2+2*("+se+")*("+ce+")"]},ee},jxg.A.createParallelPoint=function(G,_,J){var Z,Q,ee,te,ne,ie;for(ne=0;ne<_.length;++ne)_[ne]=G.select(_[ne]);if(_.length===3&&utils_type.A.isPointType(G,_[0])&&utils_type.A.isPointType(G,_[1])&&utils_type.A.isPointType(G,_[2]))_=utils_type.A.providePoints(G,_,J,"point"),Z=_[0],Q=_[1],ee=_[2];else if(utils_type.A.isPointType(G,_[0])&&_[1].elementClass===constants.A.OBJECT_CLASS_LINE)ee=utils_type.A.providePoints(G,[_[0]],J,"point")[0],Z=_[1].point1,Q=_[1].point2;else{if(!utils_type.A.isPointType(G,_[1])||_[0].elementClass!==constants.A.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create parallel point with parent types '"+typeof _[0]+"', '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [line,point], [point,point,point]`);ee=utils_type.A.providePoints(G,[_[1]],J,"point")[0],Z=_[0].point1,Q=_[0].point2}return ie=utils_type.A.copyAttributes(J,G.options,"parallelpoint"),te=G.create("point",[function(){return ee.coords.usrCoords[1]+Q.coords.usrCoords[1]-Z.coords.usrCoords[1]},function(){return ee.coords.usrCoords[2]+Q.coords.usrCoords[2]-Z.coords.usrCoords[2]}],ie),utils_type.A.exists(Z._is_new)?(te.addChild(Z),delete Z._is_new):Z.addChild(te),utils_type.A.exists(Q._is_new)?(te.addChild(Q),delete Q._is_new):Q.addChild(te),utils_type.A.exists(ee._is_new)?(te.addChild(ee),delete ee._is_new):ee.addChild(te),te.elType="parallelpoint",te.setParents([Z.id,Q.id,ee.id]),te.prepareUpdate().update(),te.generatePolynomial=function(){var re=Z.symbolic.x,oe=Z.symbolic.y,se=Q.symbolic.x,ae=Q.symbolic.y,ce=ee.symbolic.x,ue=ee.symbolic.y,de=te.symbolic.x,me=te.symbolic.y;return["("+ae+")*("+de+")-("+ae+")*("+ce+")-("+oe+")*("+de+")+("+oe+")*("+ce+")-("+me+")*("+se+")+("+me+")*("+re+")+("+ue+")*("+se+")-("+ue+")*("+re+")","("+me+")*("+re+")-("+me+")*("+ce+")-("+ae+")*("+re+")+("+ae+")*("+ce+")-("+de+")*("+oe+")+("+de+")*("+ue+")+("+se+")*("+oe+")-("+se+")*("+ue+")"]},te},jxg.A.createParallel=function(G,_,J){var Z,Q,ee,te,ne,ie,re=1;for(ne=0;ne<_.length;++ne)_[ne]=G.select(_[ne]);return Z=null,_.length===3?(Z=(_=utils_type.A.providePoints(G,_,J,"point"))[2],re=0):utils_type.A.isPointType(G,_[0])?(Z=utils_type.A.providePoints(G,[_[0]],J,"point")[0],te=function(){return _[1].stdform}):utils_type.A.isPointType(G,_[1])&&(Z=utils_type.A.providePoints(G,[_[1]],J,"point")[0],te=function(){return _[0].stdform}),utils_type.A.exists(J.layer)||(J.layer=G.options.layer.line),ie=utils_type.A.copyAttributes(J,G.options,"parallel","point"),(Q=re===1?G.create("point",[function(){return math.A.crossProduct([1,0,0],te())}],ie):G.create("parallelpoint",_,ie)).isDraggable=!0,ie=utils_type.A.copyAttributes(J,G.options,"parallel"),(ee=G.create("line",[Z,Q],ie)).elType="parallel",ee.subs={point:Q},ee.inherits.push(Q),ee.setParents([_[0].id,_[1].id]),_.length===3&&ee.addParents(_[2].id),ee.point=Q,ee},jxg.A.createArrowParallel=function(G,_,J){var Z,Q;try{return(Q=utils_type.A.copyAttributes(J,G.options,"arrowparallel")).lastArrow===!1&&(Q.lastArrow=!0),(Z=jxg.A.createParallel(G,_,Q).setAttribute({straightFirst:!1,straightLast:!1})).type=constants.A.OBJECT_TYPE_VECTOR,Z.elType="arrowparallel",Z}catch{throw new Error("JSXGraph: Can't create arrowparallel with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [line,point], [point,point,point]`)}},jxg.A.createBisector=function(G,_,J){var Z,Q,ee,te;if(_=utils_type.A.providePoints(G,_,J,"point"),utils_type.A.isPoint(_[0])&&utils_type.A.isPoint(_[1])&&utils_type.A.isPoint(_[2])){for((te=utils_type.A.copyAttributes(J,G.options,"bisector","point")).snapToGrid=!1,(Z=G.create("point",[function(){return geometry.A.angleBisector(_[0],_[1],_[2],G)}],te)).dump=!1,ee=0;ee<3;ee++)utils_type.A.exists(_[ee]._is_new)?(Z.addChild(_[ee]),delete _[ee]._is_new):_[ee].addChild(Z);return utils_type.A.exists(J.layer)||(J.layer=G.options.layer.line),te=utils_type.A.copyAttributes(J,G.options,"bisector"),(Q=jxg.A.createLine(G,[_[1],Z],te)).point=Z,Q.elType="bisector",Q.setParents(_),Q.subs={point:Z},Q.inherits.push(Z),Q}throw new Error("JSXGraph: Can't create angle bisector with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,point,point]`)},jxg.A.createAngularBisectorsOfTwoLines=function(G,_,J){var Z,Q,ee,te,ne=G.select(_[0]),ie=G.select(_[1]);if(ne.elementClass!==constants.A.OBJECT_CLASS_LINE||ie.elementClass!==constants.A.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create angle bisectors of two lines with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [line,line]`);return utils_type.A.exists(J.layer)||(J.layer=G.options.layer.line),ee=utils_type.A.copyAttributes(J,G.options,"bisectorlines","line1"),Z=G.create("line",[function(){var re=math.A.hypot(ne.stdform[1],ne.stdform[2]),oe=math.A.hypot(ie.stdform[1],ie.stdform[2]);return ne.stdform[0]/re-ie.stdform[0]/oe},function(){var re=math.A.hypot(ne.stdform[1],ne.stdform[2]),oe=math.A.hypot(ie.stdform[1],ie.stdform[2]);return ne.stdform[1]/re-ie.stdform[1]/oe},function(){var re=math.A.hypot(ne.stdform[1],ne.stdform[2]),oe=math.A.hypot(ie.stdform[1],ie.stdform[2]);return ne.stdform[2]/re-ie.stdform[2]/oe}],ee),utils_type.A.exists(J.layer)||(J.layer=G.options.layer.line),ee=utils_type.A.copyAttributes(J,G.options,"bisectorlines","line2"),Q=G.create("line",[function(){var re=math.A.hypot(ne.stdform[1],ne.stdform[2]),oe=math.A.hypot(ie.stdform[1],ie.stdform[2]);return ne.stdform[0]/re+ie.stdform[0]/oe},function(){var re=math.A.hypot(ne.stdform[1],ne.stdform[2]),oe=math.A.hypot(ie.stdform[1],ie.stdform[2]);return ne.stdform[1]/re+ie.stdform[1]/oe},function(){var re=math.A.hypot(ne.stdform[1],ne.stdform[2]),oe=math.A.hypot(ie.stdform[1],ie.stdform[2]);return ne.stdform[2]/re+ie.stdform[2]/oe}],ee),te=new composition({line1:Z,line2:Q}),Z.dump=!1,Q.dump=!1,te.elType="bisectorlines",te.setParents([ne.id,ie.id]),te.subs={line1:Z,line2:Q},te},jxg.A.createCircumcenter=function(G,_,J){var Z,Q,ee,te,ne;if(_=utils_type.A.providePoints(G,_,J,"point"),utils_type.A.isPoint(_[0])&&utils_type.A.isPoint(_[1])&&utils_type.A.isPoint(_[2])){for(ee=_[0],te=_[1],ne=_[2],Z=jxg.A.createPoint(G,[function(){return geometry.A.circumcenter(ee,te,ne,G)}],J),Q=0;Q<3;Q++)utils_type.A.exists(_[Q]._is_new)?(Z.addChild(_[Q]),delete _[Q]._is_new):_[Q].addChild(Z);return Z.elType="circumcenter",Z.setParents(_),Z.generatePolynomial=function(){var ie=ee.symbolic.x,re=ee.symbolic.y,oe=te.symbolic.x,se=te.symbolic.y,ae=ne.symbolic.x,ce=ne.symbolic.y,ue=Z.symbolic.x,de=Z.symbolic.y;return[["((",ue,")-(",ie,"))^2+((",de,")-(",re,"))^2-((",ue,")-(",oe,"))^2-((",de,")-(",se,"))^2"].join(""),["((",ue,")-(",ie,"))^2+((",de,")-(",re,"))^2-((",ue,")-(",ae,"))^2-((",de,")-(",ce,"))^2"].join("")]},Z}throw new Error("JSXGraph: Can't create circumcircle midpoint with parent types '"+typeof _[0]+"', '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [point,point,point]`)},jxg.A.createIncenter=function(G,_,J){var Z,Q,ee,te,ne;if(!((_=utils_type.A.providePoints(G,_,J,"point")).length>=3&&utils_type.A.isPoint(_[0])&&utils_type.A.isPoint(_[1])&&utils_type.A.isPoint(_[2])))throw new Error("JSXGraph: Can't create incenter with parent types '"+typeof _[0]+"', '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [point,point,point]`);for(Q=_[0],ee=_[1],te=_[2],Z=G.create("point",[function(){var ie,re,oe;return ie=math.A.hypot(ee.X()-te.X(),ee.Y()-te.Y()),re=math.A.hypot(Q.X()-te.X(),Q.Y()-te.Y()),oe=math.A.hypot(ee.X()-Q.X(),ee.Y()-Q.Y()),new base_coords.A(constants.A.COORDS_BY_USER,[(ie*Q.X()+re*ee.X()+oe*te.X())/(ie+re+oe),(ie*Q.Y()+re*ee.Y()+oe*te.Y())/(ie+re+oe)],G)}],J),ne=0;ne<3;ne++)utils_type.A.exists(_[ne]._is_new)?(Z.addChild(_[ne]),delete _[ne]._is_new):_[ne].addChild(Z);return Z.elType="incenter",Z.setParents(_),Z},jxg.A.createCircumcircle=function(G,_,J){var Z,Q,ee,te;if((_=utils_type.A.providePoints(G,_,J,"point"))===!1)throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof _[0]+"', '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [point,point,point]`);try{for(ee=utils_type.A.copyAttributes(J,G.options,"circumcircle","center"),(Z=jxg.A.createCircumcenter(G,_,ee)).dump=!1,utils_type.A.exists(J.layer)||(J.layer=G.options.layer.circle),ee=utils_type.A.copyAttributes(J,G.options,"circumcircle"),(Q=jxg.A.createCircle(G,[Z,_[0]],ee)).elType="circumcircle",Q.setParents(_),Q.subs={center:Z},Q.inherits.push(Q),te=0;te<3;te++)utils_type.A.exists(_[te]._is_new)?(Q.addChild(_[te]),delete _[te]._is_new):_[te].addChild(Q)}catch{throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof _[0]+"', '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [point,point,point]`)}return Q},jxg.A.createIncircle=function(G,_,J){var Z,Q,ee,te;if((_=utils_type.A.providePoints(G,_,J,"point"))===!1)throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof _[0]+"', '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [point,point,point]`);try{for(te=utils_type.A.copyAttributes(J,G.options,"incircle","center"),(Q=jxg.A.createIncenter(G,_,te)).dump=!1,utils_type.A.exists(J.layer)||(J.layer=G.options.layer.circle),te=utils_type.A.copyAttributes(J,G.options,"incircle"),(ee=jxg.A.createCircle(G,[Q,function(){var ne=math.A.hypot(_[1].X()-_[2].X(),_[1].Y()-_[2].Y()),ie=math.A.hypot(_[0].X()-_[2].X(),_[0].Y()-_[2].Y()),re=math.A.hypot(_[1].X()-_[0].X(),_[1].Y()-_[0].Y()),oe=(ne+ie+re)/2;return Math.sqrt((oe-ne)*(oe-ie)*(oe-re)/oe)}],te)).elType="incircle",ee.setParents(_),Z=0;Z<3;Z++)utils_type.A.exists(_[Z]._is_new)?(ee.addChild(_[Z]),delete _[Z]._is_new):_[Z].addChild(ee);ee.center=Q,ee.subs={center:ee.center},ee.inherits.push(Q)}catch{throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof _[0]+"', '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [point,point,point]`)}return ee},jxg.A.createReflection=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se=`
Possible parent types: [point|line|curve|polygon|circle|arc|sector, line]`;for(ie=0;ie<_.length;++ie)_[ie]=G.select(_[ie]);if(re=utils_type.A.copyAttributes(J,G.options,"reflection"),utils_type.A.isPoint(_[0]))Q=utils_type.A.providePoints(G,[_[0]],oe)[0];else{if(_[0].elementClass!==constants.A.OBJECT_CLASS_CURVE&&_[0].elementClass!==constants.A.OBJECT_CLASS_LINE&&_[0].type!==constants.A.OBJECT_TYPE_POLYGON&&_[0].elementClass!==constants.A.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create reflection element with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"'."+se);Q=_[0]}if(_[1].elementClass!==constants.A.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create reflected element with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"'."+se);if(Z=_[1],ne=jxg.A.createTransform(G,[Z],{type:"reflect"}),utils_type.A.isPoint(Q))ee=jxg.A.createPoint(G,[Q,ne],re);else if(Q.elementClass===constants.A.OBJECT_CLASS_CURVE)ee=jxg.A.createCurve(G,[Q,ne],re);else if(Q.elementClass===constants.A.OBJECT_CLASS_LINE)ee=jxg.A.createLine(G,[Q,ne],re);else if(Q.type===constants.A.OBJECT_TYPE_POLYGON)ee=jxg.A.createPolygon(G,[Q,ne],re);else{if(Q.elementClass!==constants.A.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create reflected element with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"'."+se);re.type.toLowerCase()==="euclidean"?(oe=utils_type.A.copyAttributes(J,G.options,"reflection","center"),(te=jxg.A.createPoint(G,[Q.center,ne],oe)).prepareUpdate().update().updateVisibility(te.evalVisProp("visible")).updateRenderer(),ee=jxg.A.createCircle(G,[te,function(){return Q.Radius()}],re)):ee=jxg.A.createCircle(G,[Q,ne],re)}return utils_type.A.exists(Q._is_new)&&(ee.addChild(Q),delete Q._is_new),Z.addChild(ee),ee.elType="reflection",ee.addParents(Z),ee.prepareUpdate().update(),utils_type.A.isPoint(ee)&&(ee.generatePolynomial=function(){var ae=Z.point1.symbolic.x,ce=Z.point1.symbolic.y,ue=Z.point2.symbolic.x,de=Z.point2.symbolic.y,me=Q.symbolic.x,fe=Q.symbolic.y,_e=ee.symbolic.x,ye=ee.symbolic.y;return[["((",ye,")-(",fe,"))*((",ce,")-(",de,"))+((",ae,")-(",ue,"))*((",_e,")-(",me,"))"].join(""),["((",_e,")-(",ae,"))^2+((",ye,")-(",ce,"))^2-((",me,")-(",ae,"))^2-((",fe,")-(",ce,"))^2"].join("")]}),ee},jxg.A.createMirrorElement=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se=`
Possible parent types: [point|line|curve|polygon|circle|arc|sector, point]`;for(Q=0;Q<_.length;++Q)_[Q]=G.select(_[Q]);if(re=utils_type.A.copyAttributes(J,G.options,"mirrorelement"),utils_type.A.isPoint(_[0]))Z=utils_type.A.providePoints(G,[_[0]],re)[0];else{if(_[0].elementClass!==constants.A.OBJECT_CLASS_CURVE&&_[0].elementClass!==constants.A.OBJECT_CLASS_LINE&&_[0].type!==constants.A.OBJECT_TYPE_POLYGON&&_[0].elementClass!==constants.A.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"'."+se);Z=_[0]}if(!utils_type.A.isPoint(_[1]))throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"'."+se);if(oe=utils_type.A.copyAttributes(J,G.options,"mirrorelement","point"),ee=utils_type.A.providePoints(G,[_[1]],oe)[0],ie=jxg.A.createTransform(G,[Math.PI,ee],{type:"rotate"}),utils_type.A.isPoint(Z))te=jxg.A.createPoint(G,[Z,ie],re);else if(Z.elementClass===constants.A.OBJECT_CLASS_CURVE)te=jxg.A.createCurve(G,[Z,ie],re);else if(Z.elementClass===constants.A.OBJECT_CLASS_LINE)te=jxg.A.createLine(G,[Z,ie],re);else if(Z.type===constants.A.OBJECT_TYPE_POLYGON)te=jxg.A.createPolygon(G,[Z,ie],re);else{if(Z.elementClass!==constants.A.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"'."+se);re.type.toLowerCase()==="euclidean"?(oe=utils_type.A.copyAttributes(J,G.options,"mirrorelement","center"),(ne=jxg.A.createPoint(G,[Z.center,ie],oe)).prepareUpdate().update().updateVisibility(ne.evalVisProp("visible")).updateRenderer(),te=jxg.A.createCircle(G,[ne,function(){return Z.Radius()}],re)):te=jxg.A.createCircle(G,[Z,ie],re)}return utils_type.A.exists(Z._is_new)&&(te.addChild(Z),delete Z._is_new),ee.addChild(te),te.elType="mirrorelement",te.addParents(ee),te.prepareUpdate().update(),te},jxg.A.createMirrorPoint=function(G,_,J){var Z=jxg.A.createMirrorElement(G,_,J);return Z.elType="mirrorpoint",Z},jxg.A.createIntegral=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue,de,me,fe,_e=null;if(utils_type.A.isArray(_[0])&&_[1].elementClass===constants.A.OBJECT_CLASS_CURVE)Z=_[0],Q=_[1];else{if(!utils_type.A.isArray(_[1])||_[0].elementClass!==constants.A.OBJECT_CLASS_CURVE)throw new Error("JSXGraph: Can't create integral with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [[number|function,number|function],curve]`);Z=_[1],Q=_[0]}return(ee=utils_type.A.copyAttributes(J,G.options,"integral")).withlabel=!1,fe=G.create("curve",[[0],[0]],ee),G.objectsList.pop(),te=Z[0],ne=Z[1],utils_type.A.isFunction(te)?(re=function(){return Q.Y(ie())},te=(ie=te)()):(ie=te,re=Q.Y(te)),utils_type.A.isFunction(ne)?(se=function(){return Q.Y(oe())},ne=(oe=ne)()):(oe=ne,se=Q.Y(ne)),ee=utils_type.A.copyAttributes(J,G.options,"integral","curveleft"),ae=G.create("glider",[ie,re,Q],ee),utils_type.A.isFunction(ie)&&ae.hideElement(),ee=utils_type.A.copyAttributes(J,G.options,"integral","baseleft"),ce=G.create("point",[function(){return fe.evalVisProp("axis")==="y"?0:ae.X()},function(){return fe.evalVisProp("axis")==="y"?ae.Y():0}],ee),ee=utils_type.A.copyAttributes(J,G.options,"integral","curveright"),ue=G.create("glider",[oe,se,Q],ee),utils_type.A.isFunction(oe)&&ue.hideElement(),ee=utils_type.A.copyAttributes(J,G.options,"integral","baseright"),de=G.create("point",[function(){return fe.evalVisProp("axis")==="y"?0:ue.X()},function(){return fe.evalVisProp("axis")==="y"?ue.Y():0}],ee),fe._pos=G.objectsList.length,G.objectsList.push(fe),(ee=utils_type.A.copyAttributes(J,G.options,"integral")).withlabel!==!1&&ee.axis!=="y"&&(ee=utils_type.A.copyAttributes(J,G.options,"integral","label"),ee=utils_type.A.copyAttributes(ee,G.options,"label"),me=function(){var ye,be="&int;",Se=numerics.A.NewtonCotes([ce.X(),de.X()],Q.Y),Ce=_e.evalVisProp("digits");return ye=_e.useLocale()?_e.formatNumberLocale(Se,Ce):utils_type.A.toFixed(Se,Ce),(_e.evalVisProp("usemathjax")||_e.evalVisProp("usekatex"))&&(be="\\int"),be+" = "+ye},(_e=G.create("text",[function(){var ye=new base_coords.A(constants.A.COORDS_BY_SCREEN,[this.evalVisProp("offset.0")+this.board.origin.scrCoords[1],0],this.board,!1),be=this.board.getBoundingBox(),Se=.1*(be[2]-be[0]),Ce=ue.X();return Ce<be[0]?Ce=be[0]+Se:Ce>be[2]&&(Ce=be[2]-Se),Ce+ye.usrCoords[1]},function(){var ye=new base_coords.A(constants.A.COORDS_BY_SCREEN,[0,this.evalVisProp("offset.1")+this.board.origin.scrCoords[2]],this.board,!1),be=this.board.getBoundingBox(),Se=.1*(be[1]-be[3]),Ce=ue.Y();return Ce>be[1]?Ce=be[1]-Se:Ce<be[3]&&(Ce=be[3]+Se),Ce+ye.usrCoords[2]},""],ee)).setText(me),_e.dump=!1,ae.addChild(_e),ue.addChild(_e)),ae.dump=!1,ce.dump=!1,ue.dump=!1,de.dump=!1,fe.elType="integral",fe.setParents([Q.id,Z]),fe.subs={curveLeft:ae,baseLeft:ce,curveRight:ue,baseRight:de},fe.inherits.push(ae,ce,ue,de),ee.withlabel&&(fe.subs.label=_e,fe.inherits.push(_e)),fe.Value=function(){return numerics.A.I([ce.X(),de.X()],Q.Y)},fe.updateDataArray=function(){var ye,be,Se,Ce,Me,Re,Te,Ee,De;if(this.evalVisProp("axis")==="y"){for(ae.Y()<ue.Y()?(Re=ae.X(),Ee=ae.Y(),Te=ue.X(),De=ue.Y()):(Re=ue.X(),Ee=ue.Y(),Te=ae.X(),De=ae.Y()),Ce=Math.min(Re,Te),Me=Math.max(Re,Te),ye=[0,Re],be=[Ee,Ee],Se=0;Se<Q.numberPoints;Se++)Ee<=Q.points[Se].usrCoords[2]&&Ce<=Q.points[Se].usrCoords[1]&&Q.points[Se].usrCoords[2]<=De&&Q.points[Se].usrCoords[1]<=Me&&(ye.push(Q.points[Se].usrCoords[1]),be.push(Q.points[Se].usrCoords[2]));ye.push(Te),be.push(De),ye.push(0),be.push(De),ye.push(0),be.push(Ee)}else{for(ce.X()<de.X()?(Ce=ce.X(),Me=de.X()):(Ce=de.X(),Me=ce.X()),ye=[Ce,Ce],be=[0,Q.Y(Ce)],Se=0;Se<Q.numberPoints;Se++)Ce<=Q.points[Se].usrCoords[1]&&Q.points[Se].usrCoords[1]<=Me&&(ye.push(Q.points[Se].usrCoords[1]),be.push(Q.points[Se].usrCoords[2]));ye.push(Me),be.push(Q.Y(Me)),ye.push(Me),be.push(0),ye.push(Ce),be.push(0)}this.dataX=ye,this.dataY=be},ae.addChild(fe),ue.addChild(fe),ce.addChild(fe),de.addChild(fe),fe.baseLeft=ce,fe.baseRight=de,fe.curveLeft=ae,fe.curveRight=ue,fe.methodMap=jxg.A.deepCopy(fe.methodMap,{curveLeft:"curveLeft",baseLeft:"baseLeft",curveRight:"curveRight",baseRight:"baseRight",Value:"Value"}),fe.label=_e,fe},jxg.A.createInequality=function(G,_,J){var Z,Q,ee;if(ee=utils_type.A.copyAttributes(J,G.options,"inequality"),_[0].elementClass===constants.A.OBJECT_CLASS_LINE)(Q=G.create("curve",[[],[]],ee)).hasPoint=function(){return!1},Q.updateDataArray=function(){var te,ne,ie,re=G.getBoundingBox(),oe=this.evalVisProp("inverse"),se=oe?-1:1,ae=1.5*Math.max(re[2]-re[0],re[1]-re[3]),ce={coords:{usrCoords:[1,.5*(re[0]+re[2]),oe?re[1]:re[3]]}},ue=_[0].stdform.slice(1),de=ue;ie=1.5*Math.max(geometry.A.perpendicular(_[0],ce,G)[0].distance(constants.A.COORDS_BY_USER,ce.coords),ae),ie*=se,ce={coords:{usrCoords:[1,.5*(re[0]+re[2]),.5*(re[1]+re[3])]}},te=[1,(ce=Math.abs(math.A.innerProduct(ce.coords.usrCoords,_[0].stdform,3))>=math.A.eps?geometry.A.perpendicular(_[0],ce,G)[0].usrCoords:ce.coords.usrCoords)[1]+ue[1]*ae,ce[2]-ue[0]*ae],ne=[1,ce[1]-de[1]*ae,ce[2]+de[0]*ae],this.dataX=[te[1],te[1]+ue[0]*ie,ne[1]+de[0]*ie,ne[1],te[1]],this.dataY=[te[2],te[2]+ue[1]*ie,ne[2]+de[1]*ie,ne[2],te[2]]};else if(_[0].elementClass===constants.A.OBJECT_CLASS_CURVE&&_[0].visProp.curvetype==="functiongraph")(Q=G.create("curve",[[],[]],ee)).updateDataArray=function(){var te,ne,ie,re,oe,se,ae,ce,ue,de=this.board.getBoundingBox(),me=[],fe=_[0].minX(),_e=_[0].maxX(),ye=.3*(de[1]-de[3]);if(te=this.evalVisProp("inverse")?1:3,this.dataX=[],this.dataY=[],(re=_[0].points.length)!==0)for(de[1]+=ye,de[3]-=ye,ie=-1;ie<re-1;){for(oe=ie+1,ne=re;oe<re;oe++)if(_[0].points[oe].isReal()){ne=oe;break}if(ne>=re)break;for(oe=ne,ie=re-1;oe<re-1;oe++)if(!_[0].points[oe+1].isReal()){ie=oe;break}for(ce=_[0].points[ne].usrCoords[1],ue=_[0].points[ie].usrCoords[1],se=de[0]<fe?fe:de[0],ae=de[2]>_e?_e:de[2],se=ne===0?se:Math.max(se,ce),ae=ie===re-1?ae:Math.min(ae,ue),ae=ie===re-1?_e:ue,(me=[]).push([1,se=ne===0?fe:ce,de[te]]),me.push([1,se,_[0].points[ne].usrCoords[2]]),oe=ne;oe<=ie;oe++)me.push(_[0].points[oe].usrCoords);for(me.push([1,ae,_[0].points[ie].usrCoords[2]]),me.push([1,ae,de[te]]),me.push(me[0]),oe=0;oe<me.length;oe++)this.dataX.push(me[oe][1]),this.dataY.push(me[oe][2]);ie<re-1&&(this.dataX.push(NaN),this.dataY.push(NaN))}},Q.hasPoint=function(){return!1};else if(Z=utils_type.A.createFunction(_[0]),Q.addParentsFromJCFunctions([Z]),!utils_type.A.exists(Z))throw new Error(`JSXGraph: Can't create area with the given parents.
Possible parent types: [line], [function]`);return Q.addParents(_[0]),Q},jxg.A.registerElement("arrowparallel",jxg.A.createArrowParallel),jxg.A.registerElement("bisector",jxg.A.createBisector),jxg.A.registerElement("bisectorlines",jxg.A.createAngularBisectorsOfTwoLines),jxg.A.registerElement("msector",jxg.A.createMsector),jxg.A.registerElement("circumcircle",jxg.A.createCircumcircle),jxg.A.registerElement("circumcirclemidpoint",jxg.A.createCircumcenter),jxg.A.registerElement("circumcenter",jxg.A.createCircumcenter),jxg.A.registerElement("incenter",jxg.A.createIncenter),jxg.A.registerElement("incircle",jxg.A.createIncircle),jxg.A.registerElement("integral",jxg.A.createIntegral),jxg.A.registerElement("midpoint",jxg.A.createMidpoint),jxg.A.registerElement("mirrorelement",jxg.A.createMirrorElement),jxg.A.registerElement("mirrorpoint",jxg.A.createMirrorPoint),jxg.A.registerElement("orthogonalprojection",jxg.A.createOrthogonalProjection),jxg.A.registerElement("parallel",jxg.A.createParallel),jxg.A.registerElement("parallelpoint",jxg.A.createParallelPoint),jxg.A.registerElement("perpendicular",jxg.A.createPerpendicular),jxg.A.registerElement("perpendicularpoint",jxg.A.createPerpendicularPoint),jxg.A.registerElement("perpendicularsegment",jxg.A.createPerpendicularSegment),jxg.A.registerElement("reflection",jxg.A.createReflection),jxg.A.registerElement("inequality",jxg.A.createInequality),jxg.A.createGrid=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se=math.A.eps,ae=5e3,ce=[],ue=[];if((ee=_).length>2||ee.length>=1&&ee[0].elType!=="axis"||ee.length>=2&&ee[1].elType!=="axis")throw new Error("JSXGraph: Can't create 'grid' with parent type '"+_[0].elType+"'. Possible parent types: [axis,axis]");return!utils_type.A.exists(ee[0])&&utils_type.A.exists(G.defaultAxes)&&(ee[0]=G.defaultAxes.x),!utils_type.A.exists(ee[1])&&utils_type.A.exists(G.defaultAxes)&&(ee[1]=G.defaultAxes.y),oe=function(de,me,fe,_e,ye,be,Se){var Ce,Me,Re,Te,Ee,De,Le;switch(de.toLowerCase()){case".":case"point":return me.visProp.linecap="round",me.visProp.strokewidth=ye*me.board.unitX+be*me.board.unitY,[[fe,fe,NaN],[_e,_e,NaN]];case"o":case"circle":return me.visProp.linecap="square",me.bezierDegree=3,[[fe+ye,fe+ye,fe+(Me=4*Math.tan(Math.PI/8)/3)*ye,fe,fe-Me*ye,fe-ye,fe-ye,fe-ye,fe-Me*ye,fe,fe+Me*ye,fe+ye,fe+ye,NaN],[_e,_e+Me*be,_e+be,_e+be,_e+be,_e+Me*be,_e,_e-Me*be,_e-be,_e-be,_e-be,_e-Me*be,_e,NaN]];case"regpol":case"regularpolygon":for(me.visProp.linecap="round",Te=me.evalVisProp("polygonvertices"),Ee=[[],[]],Ce=0;Ce<=2*Math.PI;Ce+=2*Math.PI/Te)Ee[0].push(fe-ye*Math.sin(Ce)),Ee[1].push(_e-be*Math.cos(Ce));return Ee[0].push(NaN),Ee[1].push(NaN),Ee;case"[]":case"square":return me.visProp.linecap="square",[[fe-ye,fe+ye,fe+ye,fe-ye,fe-ye,NaN],[_e+be,_e+be,_e-be,_e-be,_e+be,NaN]];case"<>":case"diamond":return me.visProp.linecap="square",[[fe,fe+ye,fe,fe-ye,fe,NaN],[_e+be,_e,_e-be,_e,_e+be,NaN]];case"<<>>":case"diamond2":return me.visProp.linecap="square",[[fe,fe+(De=ye*Math.sqrt(2)),fe,fe-De,fe,NaN],[_e+(Le=be*Math.sqrt(2)),_e,_e-Le,_e,_e+Le,NaN]];case"x":case"cross":return[[fe-ye,fe+ye,NaN,fe-ye,fe+ye,NaN],[_e+be,_e-be,NaN,_e-be,_e+be,NaN]];case"+":case"plus":return[[fe-ye,fe+ye,NaN,fe,fe,NaN],[_e,_e,NaN,_e-be,_e+be,NaN]];case"-":case"minus":return[[fe-ye,fe+ye,NaN],[_e,_e,NaN]];case"|":case"divide":return[[fe,fe,NaN],[_e-be,_e+be,NaN]];case"^":case"a":case"A":case"triangleup":return[[fe-ye,fe,fe+ye,NaN],[_e-be,_e,_e-be,NaN]];case"v":case"triangledown":return[[fe-ye,fe,fe+ye,NaN],[_e+be,_e,_e+be,NaN]];case"<":case"triangleleft":return[[fe+ye,fe,fe+ye,NaN],[_e+be,_e,_e-be,NaN]];case">":case"triangleright":return[[fe-ye,fe,fe-ye,NaN],[_e+be,_e,_e-be,NaN]];case"line":return Re=me.evalVisProp("margin"),[[fe,fe,NaN,Se[0]-Re/me.board.unitX,Se[2]+Re/me.board.unitX,NaN],[Se[1]+Re/me.board.unitY,Se[3]-Re/me.board.unitY,NaN,_e,_e,NaN]];default:return[[],[]]}},te=utils_type.A.copyAttributes(J,G.options,"grid"),utils_type.A.mergeAttr(te,te.themes[te.theme],!1),ne={},utils_type.A.mergeAttr(ne,te,!0,!0),utils_type.A.mergeAttr(ne,te.major,!0,!0),(Z=G.create("curve",[[null],[null]],ne)).elType="grid",Z.type=constants.A.OBJECT_TYPE_GRID,ie={},utils_type.A.mergeAttr(ie,te,!0,!0),utils_type.A.mergeAttr(ie,te.minor,!0,!0),ie.id===ne.id&&(ie.id=Z.id+"_minor"),ie.name===ne.name&&(ie.name=Z.name+"_minor"),(Q=G.create("curve",[[null],[null]],ie)).elType="grid",Q.type=constants.A.OBJECT_TYPE_GRID,Z.minorGrid=Q,Q.majorGrid=Z,Z.hasPoint=function(){return!1},Q.hasPoint=function(){return!1},Z.inherits.push(Q),Z.updateDataArray=function(){var de,me,fe,_e,ye,be,Se,Ce,Me=this.board.getBoundingBox(),Re=this.evalVisProp("gridx"),Te=this.evalVisProp("gridy"),Ee=this.evalVisProp("face"),De=this.evalVisProp("drawzero"),Le=De===!0||utils_type.A.isObject(De)&&this.eval(De.origin)===!0,Ue=De===!0||utils_type.A.isObject(De)&&this.eval(De.x)===!0,Ge=De===!0||utils_type.A.isObject(De)&&this.eval(De.y)===!0,Ye=this.evalVisProp("includeboundaries"),ke=this.evalVisProp("forcesquare");if(this.dataX=[],this.dataY=[],re=this.evalVisProp("majorstep"),utils_type.A.isArray(re)||(re=[re,re]),re.length<2&&(re=[re[0],re[0]]),utils_type.A.exists(Re)&&(jxg.A.deprecated("gridX","majorStep"),re[0]=Re),utils_type.A.exists(Te)&&(jxg.A.deprecated("gridY","majorStep"),re[1]=Te),re[0]==="auto"?(Ce=Math.pow(10,Math.floor(Math.log(50/this.board.unitX)/Math.LN10)),re[0]=Ce,utils_type.A.exists(ee[0])&&(re[0]=ee[0].ticks[0].getDistanceMajorTicks())):re[0]=utils_type.A.parseNumber(re[0],Math.abs(Me[1]-Me[3]),1/this.board.unitX),re[1]==="auto"?(Ce=Math.pow(10,Math.floor(Math.log(50/this.board.unitY)/Math.LN10)),re[1]=Ce,utils_type.A.exists(ee[1])&&(re[1]=ee[1].ticks[0].getDistanceMajorTicks())):re[1]=utils_type.A.parseNumber(re[1],Math.abs(Me[0]-Me[2]),1/this.board.unitY),ke==="min"||ke===!0?re[0]*this.board.unitX<=re[1]*this.board.unitY?re[1]=re[0]/this.board.unitY*this.board.unitX:re[0]=re[1]/this.board.unitX*this.board.unitY:ke==="max"&&(re[0]*this.board.unitX<=re[1]*this.board.unitY?re[0]=re[1]/this.board.unitX*this.board.unitY:re[1]=re[0]/this.board.unitY*this.board.unitX),ce=this.evalVisProp("size"),utils_type.A.isArray(ce)||(ce=[ce,ce]),ce.length<2&&(ce=[ce[0],ce[0]]),utils_type.A.isNumber(ce[0],!0)&&(ce[0]=ce[0]+"px"),utils_type.A.isNumber(ce[1],!0)&&(ce[1]=ce[1]+"px"),ce[0]=utils_type.A.parseNumber(ce[0],re[0],1/this.board.unitX),ce[1]=utils_type.A.parseNumber(ce[1],re[1],1/this.board.unitY),ue[0]=ce[0]/2,ue[1]=ce[1]/2,de=math.A.roundToStep(Me[0],re[0]),me=math.A.roundToStep(Me[1],re[1]),Se=isFinite(de)&&isFinite(me)&&isFinite(Me[2])&&isFinite(Me[3])&&Math.abs(Me[2])<Math.abs(re[0]*ae)&&Math.abs(Me[3])<Math.abs(re[1]*ae),Ee.toLowerCase()==="line"){for(ye=Z.evalVisProp("margin"),_e=me;Se&&_e>=Me[3];_e-=re[1])!Le&&Math.abs(_e)<se||!Ge&&Math.abs(_e)<se||!Ye&&(_e<=Me[3]+ue[1]||_e>=Me[1]-ue[1])||(be=[[Me[0]-ye/Z.board.unitX,Me[2]+ye/Z.board.unitX,NaN],[_e,_e,NaN]],utils_type.A.concat(this.dataX,be[0]),utils_type.A.concat(this.dataY,be[1]));for(fe=de;Se&&fe<=Me[2];fe+=re[0])!Le&&Math.abs(fe)<se||!Ue&&Math.abs(fe)<se||!Ye&&(fe<=Me[0]+ue[0]||fe>=Me[2]-ue[0])||(be=[[fe,fe,NaN],[Me[1]+ye/Z.board.unitY,Me[3]-ye/Z.board.unitY,NaN]],utils_type.A.concat(this.dataX,be[0]),utils_type.A.concat(this.dataY,be[1]))}else for(_e=me;Se&&_e>=Me[3];_e-=re[1])for(fe=de;Se&&fe<=Me[2];fe+=re[0])!Le&&Math.abs(_e)<se&&Math.abs(fe)<se||!Ue&&Math.abs(_e)<se&&Math.abs(fe)>=se||!Ge&&Math.abs(fe)<se&&Math.abs(_e)>=se||!Ye&&(fe<=Me[0]+ue[0]||fe>=Me[2]-ue[0]||_e<=Me[3]+ue[1]||_e>=Me[1]-ue[1])||(be=oe(Ee,Z,fe,_e,ue[0],ue[1],Me),utils_type.A.concat(this.dataX,be[0]),utils_type.A.concat(this.dataY,be[1]))},Q.updateDataArray=function(){var de,me,fe,_e,ye,be,Se,Ce,Me,Re,Te,Ee,De,Le,Ue,Ge,Ye,ke,Fe,Ve=this.board.getBoundingBox(),$e=[],Xe=[],ze=this.evalVisProp("minorelements"),qe=this.evalVisProp("size"),et=this.evalVisProp("face"),ot=this.evalVisProp("drawzero"),St=ot===!0||utils_type.A.isObject(ot)&&this.eval(ot.x)===!0,it=ot===!0||utils_type.A.isObject(ot)&&this.eval(ot.y)===!0,lt=this.majorGrid.evalVisProp("face"),gt=this.majorGrid.evalVisProp("drawzero"),kt=gt===!0||utils_type.A.isObject(gt)&&this.eval(gt.origin)===!0,Jt=gt===!0||utils_type.A.isObject(gt)&&this.eval(gt.x)===!0,li=gt===!0||utils_type.A.isObject(gt)&&this.eval(gt.y)===!0,si=this.evalVisProp("includeboundaries");if(this.dataX=[],this.dataY=[],utils_type.A.isArray(ze)||(ze=[ze,ze]),ze.length<2&&(ze=[ze[0],ze[0]]),utils_type.A.isNumber(ze[0],!0)?ze[0]=parseFloat(ze[0]):(ze[0]=3,utils_type.A.exists(ee[0])&&(ze[0]=ee[0].eval(ee[0].getAttribute("ticks").minorticks))),$e[0]=re[0]/(ze[0]+1),utils_type.A.isNumber(ze[1],!0)?ze[1]=parseFloat(ze[1]):(ze[1]=3,utils_type.A.exists(ee[1])&&(ze[1]=ee[1].eval(ee[1].getAttribute("ticks").minorticks))),$e[1]=re[1]/(ze[1]+1),utils_type.A.isArray(qe)||(qe=[qe,qe]),qe.length<2&&(qe=[qe[0],qe[0]]),utils_type.A.isNumber(qe[0],!0)&&(qe[0]=qe[0]+"px"),utils_type.A.isNumber(qe[1],!0)&&(qe[1]=qe[1]+"px"),qe[0]=utils_type.A.parseNumber(qe[0],$e[0],1/this.board.unitX),qe[1]=utils_type.A.parseNumber(qe[1],$e[1],1/this.board.unitY),Xe[0]=.5*qe[0],Xe[1]=.5*qe[1],de=math.A.roundToStep(Ve[0],$e[0]),me=math.A.roundToStep(Ve[1],$e[1]),Se=isFinite(de)&&isFinite(me)&&isFinite(Ve[2])&&isFinite(Ve[3])&&Math.abs(Ve[2])<=Math.abs($e[0]*ae)&&Math.abs(Ve[3])<Math.abs($e[1]*ae),et.toLowerCase()!=="line")for(_e=me;Se&&_e>=Ve[3];_e-=$e[1])for(fe=de;Se&&fe<=Ve[2];fe+=$e[0]){if(Ce=math.A.roundToStep(Math.abs(fe),re[0]),Ce=Math.abs(Ce-Math.abs(fe)),Me=re[0]-Ce,Re=math.A.roundToStep(Math.abs(_e),re[1]),Re=Math.abs(Re-Math.abs(_e)),Te=re[1]-Re,lt==="line"){if(Ce-Xe[0]-ue[0]<se||Me-Xe[0]-ue[0]<se||Re-Xe[1]-ue[1]<se||Te-Xe[1]-ue[1]<se)continue}else if((Ce-Xe[0]-ue[0]<se||Me-Xe[0]-ue[0]<se)&&(Re-Xe[1]-ue[1]<se||Te-Xe[1]-ue[1]<se)&&(kt||ue[1]-Math.abs(_e)+Xe[1]<se||ue[0]-Math.abs(fe)+Xe[0]<se)&&(Jt||ue[1]-Math.abs(_e)+Xe[1]<se||ue[0]+Math.abs(fe)-Xe[0]<se)&&(li||ue[0]-Math.abs(fe)+Xe[0]<se||ue[1]+Math.abs(_e)-Xe[1]<se))continue;!it&&Math.abs(fe)<se||!St&&Math.abs(_e)<se||(Ee=Math.abs(Ve[0]%re[0]),De=Math.abs(Ve[1]%re[1]),Le=Math.abs(Ve[2]%re[0]),Ue=Math.abs(Ve[3]%re[1]),Ge=re[0]-Ee,Ye=re[1]-De,ke=re[0]-Le,Fe=re[1]-Ue,!si&&(fe-Xe[0]-Ve[0]-ue[0]+Ge<se&&Ge-ue[0]<se||fe-Xe[0]-Ve[0]-ue[0]-Ee<se&&Ee-ue[0]<se||-fe-Xe[0]+Ve[2]-ue[0]+ke<se&&ke-ue[0]<se||-fe-Xe[0]+Ve[2]-ue[0]-Le<se&&Le-ue[0]<se||-_e-Xe[1]+Ve[1]-ue[1]+Ye<se&&Ye-ue[1]<se||-_e-Xe[1]+Ve[1]-ue[1]-De<se&&De-ue[1]<se||_e-Xe[1]-Ve[3]-ue[1]+Fe<se&&Fe-ue[1]<se||_e-Xe[1]-Ve[3]-ue[1]-Ue<se&&Ue-ue[1]<se||-_e-Xe[1]+Ve[1]<se||fe-Xe[0]-Ve[0]<se||_e-Xe[1]-Ve[3]<se||-fe-Xe[0]+Ve[2]<se)||(be=oe(et,Q,fe,_e,Xe[0],Xe[1],Ve),utils_type.A.concat(this.dataX,be[0]),utils_type.A.concat(this.dataY,be[1])))}else{for(ye=Q.evalVisProp("margin"),_e=me;Se&&_e>=Ve[3];_e-=$e[1]){if(Re=math.A.roundToStep(Math.abs(_e),re[1]),Re=Math.abs(Re-Math.abs(_e)),Te=re[1]-Re,lt==="line"){if(Re-Xe[1]-ue[1]<se||Te-Xe[1]-ue[1]<se)continue}else if((Re-Xe[1]-ue[1]<se||Te-Xe[1]-ue[1]<se)&&(kt||ue[1]-Math.abs(_e)+Xe[1]<se)&&(Jt||ue[1]-Math.abs(_e)+Xe[1]<se)&&(li||ue[1]+Math.abs(_e)-Xe[1]<se))continue;!St&&Math.abs(_e)<se||(Ee=Math.abs(Ve[0]%re[0]),De=Math.abs(Ve[1]%re[1]),Le=Math.abs(Ve[2]%re[0]),Ue=Math.abs(Ve[3]%re[1]),Ge=re[0]-Ee,Ye=re[1]-De,ke=re[0]-Le,Fe=re[1]-Ue,!si&&(-_e-Xe[1]+Ve[1]-ue[1]+Ye<se&&Ye-ue[1]<se||-_e-Xe[1]+Ve[1]-ue[1]-De<se&&De-ue[1]<se||_e-Xe[1]-Ve[3]-ue[1]+Fe<se&&Fe-ue[1]<se||_e-Xe[1]-Ve[3]-ue[1]-Ue<se&&Ue-ue[1]<se||-_e-Xe[1]+Ve[1]<se||_e-Xe[1]-Ve[3]<se)||(be=[[Ve[0]-ye/Q.board.unitX,Ve[2]+ye/Q.board.unitX,NaN],[_e,_e,NaN]],utils_type.A.concat(this.dataX,be[0]),utils_type.A.concat(this.dataY,be[1])))}for(fe=de;Se&&fe<=Ve[2];fe+=$e[0]){if(Ce=math.A.roundToStep(Math.abs(fe),re[0]),Ce=Math.abs(Ce-Math.abs(fe)),Me=re[0]-Ce,lt==="line"){if(Ce-Xe[0]-ue[0]<se||Me-Xe[0]-ue[0]<se)continue}else if((Ce-Xe[0]-ue[0]<se||Me-Xe[0]-ue[0]<se)&&(kt||ue[0]-Math.abs(fe)+Xe[0]<se)&&(Jt||ue[0]+Math.abs(fe)-Xe[0]<se)&&(li||ue[0]-Math.abs(fe)+Xe[0]<se))continue;!it&&Math.abs(fe)<se||(Ee=Math.abs(Ve[0]%re[0]),De=Math.abs(Ve[1]%re[1]),Le=Math.abs(Ve[2]%re[0]),Ue=Math.abs(Ve[3]%re[1]),Ge=re[0]-Ee,Ye=re[1]-De,ke=re[0]-Le,Fe=re[1]-Ue,!si&&(fe-Xe[0]-Ve[0]-ue[0]+Ge<se&&Ge-ue[0]<se||fe-Xe[0]-Ve[0]-ue[0]-Ee<se&&Ee-ue[0]<se||-fe-Xe[0]+Ve[2]-ue[0]+ke<se&&ke-ue[0]<se||-fe-Xe[0]+Ve[2]-ue[0]-Le<se&&Le-ue[0]<se||fe-Xe[0]-Ve[0]<se||-fe-Xe[0]+Ve[2]<se)||(be=[[fe,fe,NaN],[Ve[1]+ye/Q.board.unitY,Ve[3]-ye/Q.board.unitY,NaN]],utils_type.A.concat(this.dataX,be[0]),utils_type.A.concat(this.dataY,be[1])))}}},G.grids.push(Z),G.grids.push(Q),Q.dump=!1,Z.getParents=Q.getParents=function(){return ee.slice()},Z},jxg.A.registerElement("grid",jxg.A.createGrid),__webpack_require__(925),jxg.A.Image=function(G,_,J,Z,Q){this.constructor(G,J,constants.A.OBJECT_TYPE_IMAGE,constants.A.OBJECT_CLASS_OTHER),this.element=this.board.select(J.anchor),this.coordsConstructor(_),this.W=utils_type.A.createFunction(Q[0],this.board,""),this.H=utils_type.A.createFunction(Q[1],this.board,""),this.addParentsFromJCFunctions([this.W,this.H]),this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*G.unitX),Math.abs(this.usrSize[1]*G.unitY)],this.url=Z,this.elType="image",this.span=[this.coords.usrCoords.slice(0),[this.coords.usrCoords[0],this.W(),0],[this.coords.usrCoords[0],0,this.H()]],this.id=this.board.setId(this,"Im"),this.board.renderer.drawImage(this),this.board.finalizeAdding(this),this.methodMap=jxg.A.deepCopy(this.methodMap,{addTransformation:"addTransform",trans:"addTransform",W:"W",Width:"W",H:"H",Height:"H",setSize:"setSize"})},jxg.A.Image.prototype=new base_element.A,utils_type.A.copyPrototypeMethods(jxg.A.Image,coordselement.A,"coordsConstructor"),jxg.A.extend(jxg.A.Image.prototype,{hasPoint:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se=this.transformations.length;return utils_type.A.isObject(this.evalVisProp("precision"))?(ee=this.board._inputDevice,te=this.evalVisProp("precision."+ee)):te=this.board.options.precision.hasPoint,se===0?(J=G-this.coords.scrCoords[1],Z=this.coords.scrCoords[2]-_,J>=-(Q=te)&&J-this.size[0]<=Q&&Z>=-Q&&Z-this.size[1]<=Q):(ie=[(ne=(ne=new base_coords.A(constants.A.COORDS_BY_SCREEN,[G,_],this.board)).usrCoords)[0]-this.span[0][0],ne[1]-this.span[0][1],ne[2]-this.span[0][2]],0<=(re=(oe=math.A.innerProduct)(ie,this.span[1]))&&re<=oe(this.span[1],this.span[1])&&0<=(re=oe(ie,this.span[2]))&&re<=oe(this.span[2],this.span[2]))},update:function(G){return this.needsUpdate?(this.updateCoords(G),this.updateSize(),this.updateSpan(),this):this},updateRenderer:function(){return this.updateRendererGeneric("updateImage")},updateSize:function(){return this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*this.board.unitX),Math.abs(this.usrSize[1]*this.board.unitY)],this},updateSpan:function(){var G,_,J=this.transformations.length,Z=[];if(J===0)this.span=[[this.Z(),this.X(),this.Y()],[this.Z(),this.W(),0],[this.Z(),0,this.H()]];else{for(Z[0]=[this.Z(),this.X(),this.Y()],Z[1]=[this.Z(),this.X()+this.W(),this.Y()],Z[2]=[this.Z(),this.X(),this.Y()+this.H()],G=0;G<J;G++)for(_=0;_<3;_++)Z[_]=math.A.matVecMult(this.transformations[G].matrix,Z[_]);for(_=0;_<3;_++)Z[_][1]/=Z[_][0],Z[_][2]/=Z[_][0],Z[_][0]/=Z[_][0];for(_=1;_<3;_++)Z[_][0]-=Z[0][0],Z[_][1]-=Z[0][1],Z[_][2]-=Z[0][2];this.span=Z}return this},addTransform:function(G){var _;if(utils_type.A.isArray(G))for(_=0;_<G.length;_++)this.transformations.push(G[_]);else this.transformations.push(G);return this},getParents:function(){var G=[this.url,[this.Z(),this.X(),this.Y()],this.usrSize];return this.parents.length!==0&&(G=this.parents),G},setSize:function(G,_){return this.W=utils_type.A.createFunction(G,this.board,""),this.H=utils_type.A.createFunction(_,this.board,""),this.addParentsFromJCFunctions([this.W,this.H]),this},W:function(){},H:function(){}}),jxg.A.createImage=function(G,_,J){var Z,Q,ee=_[0],te=_[1],ne=_[2];if(Z=utils_type.A.copyAttributes(J,G.options,"image"),!(Q=coordselement.A.create(jxg.A.Image,G,te,Z,ee,ne)))throw new Error("JSXGraph: Can't create image with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [x,y], [z,x,y], [element,transformation]`);return Z.rotate!==0&&Q.addRotation(Z.rotate),Q},jxg.A.registerElement("image",jxg.A.createImage),jxg.A.Image,jxg.A.createSlider=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue,de,me,fe,_e,ye,be,Se,Ce,Me,Re,Te;return ye=(Te=utils_type.A.copyAttributes(J,G.options,"slider")).withticks,_e=Te.withlabel,Ce=Te.snapwidth,be=Te.snapvalues,Se=Te.snapvaluedistance,re=G.create("point",_[0],Te.point1),oe=G.create("point",_[1],Te.point2),(ae=G.create("segment",[re,oe],Te.baseline)).updateStdform(),Z=re.coords.usrCoords.slice(1),Q=oe.coords.usrCoords.slice(1),ee=_[2][0],te=_[2][1],ne=_[2][2],ie=ne-ee,Re=(Me=utils_type.A.evaluate(Ce))===-1?te:Math.round((te-ee)/Me)*Me+ee,me=Z[0]+(Q[0]-Z[0])*(Re-ee)/(ne-ee),fe=Z[1]+(Q[1]-Z[1])*(Re-ee)/(ne-ee),Te.withlabel=!1,(se=G.create("glider",[me,fe,ae],Te)).setAttribute({snapwidth:Ce,snapvalues:be,snapvaluedistance:Se}),ce=G.create("segment",[re,se],Te.highline),se.Value=function(){var Ee=this._smax-this._smin,De=this.evalVisProp("snapwidth");return De===-1?this.position*Ee+this._smin:Math.round(this.position*Ee/De)*De+this._smin},se.methodMap=utils_type.A.deepCopy(se.methodMap,{Value:"Value",setValue:"setValue",smax:"_smax",smin:"_smin",setMax:"setMax",setMin:"setMin",point1:"point1",point2:"point2",baseline:"baseline",highline:"highline",ticks:"ticks",label:"label"}),se._smax=ne,se._smin=ee,se.setMax=function(Ee){return this._smax=Ee,this},se.setValue=function(Ee){var De=this._smax-this._smin;return Math.abs(De)>math.A.eps?this.position=(Ee-this._smin)/De:this.position=0,this.position=Math.max(0,Math.min(1,this.position)),this},se.setMin=function(Ee){return this._smin=Ee,this},_e&&(de=G.create("text",[function(){return .05*(oe.X()-re.X())+oe.X()},function(){return .05*(oe.Y()-re.Y())+oe.Y()},function(){var Ee,De=se.evalVisProp("digits"),Le=se.evalVisProp("suffixlabel"),Ue=se.evalVisProp("unitlabel"),Ge=se.evalVisProp("postlabel");return De===2&&se.evalVisProp("precision")!==2&&(De=se.evalVisProp("precision")),Ee=Le!==null?Le:se.name&&se.name!==""?se.name+" = ":"",se.useLocale()?Ee+=se.formatNumberLocale(se.Value(),De):Ee+=utils_type.A.toFixed(se.Value(),De),Ue!==null&&(Ee+=Ue),Ge!==null&&(Ee+=Ge),Ee}],Te.label),se.label=de,se.visProp.withlabel=!0,se.hasLabel=!0),se.point1=re,se.point2=oe,se.baseline=ae,se.highline=ce,ye&&(utils_type.A.exists(Te.generatelabeltext)||(Te.ticks.generateLabelText=function(Ee,De,Le){var Ue=se.point1.Dist(se.point2),Ge=se._smin,Ye=se._smax,ke=this.getDistanceFromZero(De,Ee)*(Ye-Ge)/Ue+Ge;return Ue<math.A.eps||Math.abs(ke)<math.A.eps?"0":this.formatLabelText(ke)}),ue=G.create("ticks",[se.baseline,se.point1.Dist(re)/2,function(Ee){var De=se.point1.Dist(se.point2),Le=se.point1.coords.distance(constants.A.COORDS_BY_USER,Ee);return De<math.A.eps?0:Le/De*ie+ee}],Te.ticks),se.ticks=ue),se.remove=function(){_e&&G.removeObject(de),G.removeObject(ce),G.removeObject(ae),G.removeObject(oe),G.removeObject(re),point.prototype.remove.call(se)},re.dump=!1,oe.dump=!1,ae.dump=!1,ce.dump=!1,_e&&(de.dump=!1),se.elType="slider",se.parents=_,se.subs={point1:re,point2:oe,baseLine:ae,highLine:ce},se.inherits.push(re,oe,ae,ce),ae.inherits=[],ce.inherits=[],ye&&(ue.dump=!1,se.subs.ticks=ue,se.inherits.push(ue)),se.getParents=function(){return[this.point1.coords.usrCoords.slice(1),this.point2.coords.usrCoords.slice(1),[this._smin,this.position*(this._smax-this._smin)+this._smin,this._smax]]},se.baseline.on("up",function(Ee){var De,Le;se.evalVisProp("moveonup")&&!se.evalVisProp("fixed")&&(De=ae.board.getMousePosition(Ee,0),Le=new base_coords.A(constants.A.COORDS_BY_SCREEN,De,this.board),se.moveTo([Le.usrCoords[1],Le.usrCoords[2]]),se.triggerEventHandlers(["drag"],[Ee]))}),se.prepareUpdate().update(),G.isSuspendedUpdate||(se.updateVisibility().updateRenderer(),se.baseline.updateVisibility().updateRenderer(),se.highline.updateVisibility().updateRenderer(),ye&&se.ticks.updateVisibility().updateRenderer()),se},jxg.A.registerElement("slider",jxg.A.createSlider),jxg.A.PrefixParser={parse:function(G,_){var J,Z,Q,ee,te,ne;if(utils_type.A.isNumber(G)||utils_type.A.isString(G))return G;if(!utils_type.A.isArray(G)||G.length<2)throw new Error("prefixParser.parse: term is not an array, number or string");if(J=G[0],Q=G.length,_==="execute")if(utils_type.A.isInArray(["+","-","*","/"],J))for(ee=this.parse(G[1],_),Z=2;Z<Q;Z++)switch(ne=this.parse(G[Z],_),J){case"+":ee+=ne;break;case"-":ee-=ne;break;case"*":ee*=ne;break;case"/":ee/=ne}else if(J==="exec"){for(te=G[1],ne=[],Z=2;Z<Q;Z++)ne.push(this.parse(G[Z],_));if(utils_type.A.exists(Math[te]))ee=Math[te].apply(this,ne);else{if(!utils_type.A.exists(math.A[te]))throw new Error("PrefixParser.parse: "+te+" is not allowed");ee=math.A[te].apply(this,ne)}}else{if((te=G[0])==="V"&&(te="Value"),te==="Coords"&&(G[2]="true"),!utils_type.A.exists(G[1][te]))throw new Error("PrefixParser.parse: "+te+" is not a method of "+G[1]);for(ne=[],Z=2;Z<Q;Z++)ne.push(this.parse(G[Z],_));ee=G[1][te].apply(G[1],ne)}return ee},dimension:function(G){var _,J,Z,Q,ee,te,ne,ie;if(utils_type.A.isNumber(G))return 0;if(!utils_type.A.isArray(G)||G.length<2)throw new Error("PrefixParser.dimension: term is not an array");if(_=G[0],Z=G.length,utils_type.A.isInArray(["+","-","*","/"],_))for(Q=this.dimension(G[1]),J=2;J<Z;J++)switch(ne=this.dimension(G[J]),_){case"+":case"-":ne!==Q&&(Q=NaN);break;case"*":Q+=ne;break;case"/":Q-=ne}else if(_==="exec")G[2].type===utils_type.A.OBJECT_TYPE_MEASUREMENT?(Q=G[2].Dimension(),utils_type.A.exists(G[2].visProp.dim)&&(te=G[2].evalVisProp("dim"))!==null&&(Q=te)):Q=0;else switch(ee=G[0]){case"L":case"Length":case"Perimeter":case"Radius":case"R":Q=1;break;case"Area":case"A":Q=2;break;default:G[1].type===utils_type.A.OBJECT_TYPE_MEASUREMENT?(Q=G[1].Dimension(),utils_type.A.exists(G[1].visProp.dim)&&(te=G[1].evalVisProp("dim"))!==null&&(Q=te)):(Q=0,ee!=="Value"&&ee!=="V"||[constants.A.OBJECT_TYPE_ARC,constants.A.OBJECT_TYPE_SECTOR,constants.A.OBJECT_TYPE_ANGLE].indexOf(G[1].type)>=0&&(ie="",G.length===3&&utils_type.A.isString(G[2])&&(ie=G[2].toLowerCase()),Q=ie===""?G[1].type===constants.A.OBJECT_TYPE_ANGLE?0:1:ie.indexOf("len")===0?1:0))}return Q},toPrefix:function(G){var _,J,Z,Q;if(utils_type.A.isNumber(G))return G;if(!utils_type.A.isArray(G)||G.length<2)throw new Error("PrefixParser.toPrefix: term is not an array");for(_=G[0],Z=G.length,Q=[_],J=1;J<Z;J++)utils_type.A.isInArray(["+","-","*","/"],_)?Q.push(this.toPrefix(G[J])):_==="V"&&G[J].type===utils_type.A.OBJECT_TYPE_MEASUREMENT?Q=G[J].toPrefix():_==="exec"?J===1?Q.push(G[J]):Q.push(this.toPrefix(G[J])):Q=[_,G[J].id];return Q},getParents:function(G){var _,J,Z,Q;if(utils_type.A.isNumber(G))return[];if(!utils_type.A.isArray(G)||G.length<2)throw new Error("PrefixParser.getParents: term is not an array");for(_=G[0],Z=G.length,Q=[],J=1;J<Z;J++)utils_type.A.isInArray(["+","-","*","/"],_)?utils_type.A.concat(Q,this.getParents(G[J])):_==="V"&&G[J].type===utils_type.A.OBJECT_TYPE_MEASUREMENT?utils_type.A.concat(Q,G[J].getParents()):_==="exec"?J>1&&utils_type.A.concat(Q,this.getParents(G[J])):Q.push(G[J]);return Q}};var prefix=jxg.A.PrefixParser;jxg.A.createTapemeasure=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae;return Z=_[0],Q=_[1],ee=utils_type.A.copyAttributes(J,G.options,"tapemeasure","point1"),re=G.create("point",Z,ee),ee=utils_type.A.copyAttributes(J,G.options,"tapemeasure","point2"),oe=G.create("point",Q,ee),re.setAttribute({ignoredSnapToPoints:[oe.id]}),oe.setAttribute({ignoredSnapToPoints:[re.id]}),ee=utils_type.A.copyAttributes(J,G.options,"tapemeasure"),te=ee.withticks,ne=ee.withlabel,ee.digits===2&&ee.precision!==2&&ee.precision,ne&&(ee.withlabel=!0),ie=G.create("segment",[re,oe],ee),ne&&(se=J.name&&J.name!==""?J.name+" = ":"",ie.label.setText(function(){var ce=ie.label.evalVisProp("digits");return ie.label.useLocale()?se+ie.label.formatNumberLocale(re.Dist(oe),ce):se+utils_type.A.toFixed(re.Dist(oe),ce)})),te&&(ee=utils_type.A.copyAttributes(J,G.options,"tapemeasure","ticks"),ae=G.create("ticks",[ie,.1],ee),ie.inherits.push(ae)),ie.remove=function(){te&&ie.removeTicks(ae),G.removeObject(oe),G.removeObject(re),base_element.A.prototype.remove.call(this)},ie.Value=function(){return re.Dist(oe)},re.dump=!1,oe.dump=!1,ie.elType="tapemeasure",ie.getParents=function(){return[[re.X(),re.Y()],[oe.X(),oe.Y()]]},ie.subs={point1:re,point2:oe},te&&(ae.dump=!1),ie.methodMap=jxg.A.deepCopy(ie.methodMap,{Value:"Value"}),ie.prepareUpdate().update(),G.isSuspendedUpdate||(ie.updateVisibility().updateRenderer(),ie.point1.updateVisibility().updateRenderer(),ie.point2.updateVisibility().updateRenderer()),ie},jxg.A.registerElement("tapemeasure",jxg.A.createTapemeasure),jxg.A.createMeasurement=function(G,_,J){var Z,Q,ee,te,ne,ie;for(Q=utils_type.A.copyAttributes(J,G.options,"measurement"),ee=_[0],te=_[1],ne=_[2],(Z=G.create("text",[ee,te,""],Q)).type=utils_type.A.OBJECT_TYPE_MEASUREMENT,Z.elType="measurement",Z.Value=function(){return prefix.parse(ne,"execute")},Z.Dimension=function(){var re=Z.evalVisProp("dim");return re!==null?re:prefix.dimension(ne)},Z.Unit=function(re){var oe,se="",ae=Z.evalVisProp("units"),ce=re,ue={};if(utils_type.A.exists(ce)||(ce=Z.Dimension()),utils_type.A.isArray(re)){for(oe=0;oe<re.length;oe++)ue["dim"+re[oe]]=Z.Unit(re[oe]);return ue}return utils_type.A.isObject(ae)&&utils_type.A.exists(ae[ce])&&ae[ce]!==!1?se=Z.eval(ae[ce]):utils_type.A.isObject(ae)&&utils_type.A.exists(ae["dim"+ce])&&ae["dim"+ce]!==!1?se=Z.eval(ae["dim"+ce]):(se=Z.evalVisProp("baseunit"),ce===0?se="":ce>1&&se!==""&&(se=se+"^{"+ce+"}")),se},Z.getTerm=function(){return ne},Z.getMethod=function(){var re=ne[0];return re==="V"&&(re="Value"),re},Z.toPrefix=function(){return prefix.toPrefix(ne)},Z.getParents=function(){return prefix.getParents(ne)},Z.addParents(Z.getParents()),ie=0;ie<Z.parents.length;ie++)G.select(Z.parents[ie]).addChild(Z);return Z.setText(function(){var re,oe="",se="",ae=Z.Dimension(),ce=Z.evalVisProp("digits"),ue=Z.Unit(),de=Z.Value();if(Z.evalVisProp("showprefix")&&(oe=Z.evalVisProp("prefix")),Z.evalVisProp("showsuffix")&&(se=Z.evalVisProp("suffix")),utils_type.A.isNumber(de))ce==="none"||(de=ce==="auto"?Z.useLocale()?Z.formatNumberLocale(de):utils_type.A.autoDigits(de):Z.useLocale()?Z.formatNumberLocale(de,ce):utils_type.A.toFixed(de,ce));else if(utils_type.A.isArray(de))for(re=0;re<de.length;re++)utils_type.A.isNumber(de[re])&&(ce==="none"||(ce==="auto"?Z.useLocale()?de[re]=Z.formatNumberLocale(de[re]):de[re]=utils_type.A.autoDigits(de[re]):Z.useLocale()?de[re]=Z.formatNumberLocale(de[re],ce):de[re]=utils_type.A.toFixed(de[re],ce)));return ae==="coords"&&utils_type.A.isArray(de)&&(de.length===2&&de.unshift(void 0),de=Z.visProp.formatcoords(Z,de[1],de[2],de[0])),ae==="direction"&&utils_type.A.isArray(de)&&(de=Z.visProp.formatdirection(Z,de[0],de[1])),utils_type.A.isString(ae)?oe+de+se:isNaN(ae)?oe+"NaN"+se:oe+de+ue+se}),Z.methodMap=utils_type.A.deepCopy(Z.methodMap,{Value:"Value",Dimension:"Dimension",Unit:"Unit",getTerm:"getTerm",Term:"getTerm",getMethod:"getMethod",Method:"getMethod",getParents:"getParents",Parents:"getParents"}),Z},jxg.A.registerElement("measurement",jxg.A.createMeasurement),jxg.A.DataSource=function(){return this.data=[],this.columnHeaders=[],this.rowHeaders=[],this},jxg.A.extend(jxg.A.DataSource.prototype,{loadFromArray:function(G,_,J){var Z,Q,ee;if(utils_type.A.isArray(_)&&(this.columnHeaders=_,_=!1),utils_type.A.isArray(J)&&(this.rowHeaders=J,J=!1),this.data=[],_&&(this.columnHeaders=[]),J&&(this.rowHeaders=[]),utils_type.A.exists(G)){for(this.data=[],Z=0;Z<G.length;Z++)for(this.data[Z]=[],Q=0;Q<G[Z].length;Q++)ee=G[Z][Q],parseFloat(ee).toString()===ee?this.data[Z][Q]=parseFloat(ee):this.data[Z][Q]=ee!=="-"?ee:NaN;if(_&&(this.columnHeaders=this.data[0].slice(1),this.data=this.data.slice(1)),J)for(this.rowHeaders=[],Z=0;Z<this.data.length;Z++)this.rowHeaders.push(this.data[Z][0]),this.data[Z]=this.data[Z].slice(1)}return this},loadFromTable:function(G,_,J){var Z,Q,ee,te,ne;if(utils_type.A.isArray(_)&&(this.columnHeaders=_,_=!1),utils_type.A.isArray(J)&&(this.rowHeaders=J,J=!1),this.data=[],_&&(this.columnHeaders=[]),J&&(this.rowHeaders=[]),G=document.getElementById(G),utils_type.A.exists(G)){for(Z=G.getElementsByTagName("tr"),this.data=[],Q=0;Q<Z.length;Q++)for(te=Z[Q].getElementsByTagName("td"),this.data[Q]=[],ee=0;ee<te.length;ee++)ne=te[ee].innerText,parseFloat(ne).toString()===ne?this.data[Q][ee]=parseFloat(ne):this.data[Q][ee]=ne!=="-"?ne:NaN;if(_&&(this.columnHeaders=this.data[0].slice(1),this.data=this.data.slice(1)),J)for(this.rowHeaders=[],Q=0;Q<this.data.length;Q++)this.rowHeaders.push(this.data[Q][0]),this.data[Q]=this.data[Q].slice(1)}return this},addColumn:function(G,_,J){throw new Error("not implemented")},addRow:function(G,_,J){throw new Error("not implemented")},getColumn:function(G){var _,J=[];if(utils_type.A.isString(G)){for(_=0;_<this.columnHeaders.length;_++)if(G===this.columnHeaders[_]){G=_;break}}for(_=0;_<this.data.length;_++)this.data[_].length>G&&(J[_]=parseFloat(this.data[_][G]));return J},getRow:function(G){var _,J;if(utils_type.A.isString(G)){for(J=0;J<this.rowHeaders.length;J++)if(G===this.rowHeaders[J]){G=J;break}}for(_=[],J=0;J<this.data[G].length;J++)_[J]=this.data[G][J];return _}});var datasource=jxg.A.DataSource;jxg.A.Chart=function(G,_,J){var Z,Q,ee,te,ne,ie;if(this.constructor(G,J),!utils_type.A.isArray(_)||_.length===0)throw new Error("JSXGraph: Can't create a chart without data");if(this.elements=[],utils_type.A.isNumber(_[0]))for(Q=_,Z=[],ee=0;ee<Q.length;ee++)Z[ee]=ee+1;else if(_.length===1&&utils_type.A.isArray(_[0]))for(Q=_[0],Z=[],ie=utils_type.A.evaluate(Q).length,ee=0;ee<ie;ee++)Z[ee]=ee+1;else _.length===2&&(ie=Math.min(_[0].length,_[1].length),Z=_[0].slice(0,ie),Q=_[1].slice(0,ie));if(utils_type.A.isArray(Q)&&Q.length===0)throw new Error("JSXGraph: Can't create charts without data.");for(ne=J.chartstyle.replace(/ /g,"").split(","),ee=0;ee<ne.length;ee++){switch(ne[ee]){case"bar":te=this.drawBar(G,Z,Q,J);break;case"line":te=this.drawLine(G,Z,Q,J);break;case"fit":te=this.drawFit(G,Z,Q,J);break;case"spline":te=this.drawSpline(G,Z,Q,J);break;case"pie":te=this.drawPie(G,Q,J);break;case"point":te=this.drawPoints(G,Z,Q,J);break;case"radar":te=this.drawRadar(G,_,J)}this.elements.push(te)}return this.id=this.board.setId(this,"Chart"),this.elements},jxg.A.Chart.prototype=new base_element.A,jxg.A.extend(jxg.A.Chart.prototype,{drawLine:function(G,_,J,Z){return Z.fillcolor="none",Z.highlightfillcolor="none",G.create("curve",[_,J],Z)},drawSpline:function(G,_,J,Z){return Z.fillColor="none",Z.highlightfillcolor="none",G.create("spline",[_,J],Z)},drawFit:function(G,_,J,Z){var Q=Z.degree;return Q=Math.max(parseInt(Q,10),1)||1,Z.fillcolor="none",Z.highlightfillcolor="none",G.create("functiongraph",[numerics.A.regressionPolynomial(Q,_,J)],Z)},drawBar:function(G,_,J,Z){var Q,ee,te,ne,ie,re,oe,se,ae,ce,ue=[],de=[],me=function(_e,ye){return function(){return _[_e]()-ye*te}},fe={fixed:!0,withLabel:!1,visible:!1,name:""};if((ae=utils_type.A.copyAttributes(Z,G.options,"chart"))&&ae.width)te=ae.width;else{if(_.length<=1)te=1;else for(te=_[1]-_[0],Q=1;Q<_.length-1;Q++)te=_[Q+1]-_[Q]<te?_[Q+1]-_[Q]:te;te*=.8}for(ce=utils_type.A.copyAttributes(Z,G.options,"chart","label"),Q=0;Q<_.length;Q++)utils_type.A.isFunction(_[Q])?(ne=me(Q,-.5),ie=me(Q,0),re=me(Q,.5)):(ne=_[Q]-.5*te,ie=_[Q],re=_[Q]+.5*te),oe=utils_type.A.isFunction(J[Q])?J[Q]():J[Q],oe=J[Q],ae.dir==="horizontal"?(de[0]=G.create("point",[0,ne],fe),de[1]=G.create("point",[oe,ne],fe),de[2]=G.create("point",[oe,re],fe),de[3]=G.create("point",[0,re],fe),utils_type.A.exists(ae.labels)&&utils_type.A.exists(ae.labels[Q])&&(ce.anchorX=function(_e){return _e.X()>=0?"left":"right"},ce.anchorY="middle",ee=G.create("text",[oe,ie,ae.labels[Q]],ce))):(de[0]=G.create("point",[ne,0],fe),de[1]=G.create("point",[ne,oe],fe),de[2]=G.create("point",[re,oe],fe),de[3]=G.create("point",[re,0],fe),utils_type.A.exists(ae.labels)&&utils_type.A.exists(ae.labels[Q])&&(ce.anchorX="middle",ce.anchorY=function(_e){return _e.Y()>=0?"bottom":"top"},ee=G.create("text",[ie,oe,ae.labels[Q]],ce))),utils_type.A.isArray(ae.colors)&&(se=ae.colors,ae.fillcolor=se[Q%se.length]),ue[Q]=G.create("polygon",de,ae),utils_type.A.exists(ae.labels)&&utils_type.A.exists(ae.labels[Q])&&(ue[Q].text=ee,ue[Q].addChild(ee));return ue},drawPoints:function(G,_,J,Z){var Q,ee=[],te=Z.infoboxarray;for(Z.fixed=!0,Z.name="",Q=0;Q<_.length;Q++)Z.infoboxtext=!!te&&te[Q%te.length],ee[Q]=G.create("point",[_[Q],J[Q]],Z);return ee},drawPie:function(G,_,J){var Z,Q,ee=[],te=[],ne=J.colors,ie=J.highlightcolors,re=J.labels,oe=J.radius||4,se=oe,ae=J.center||[0,0],ce=ae[0],ue=ae[1],de=function(be,Se,Ce){return function(){var Me,Re,Te,Ee=0;for(Re=0;Re<=be;Re++)Ee+=parseFloat(utils_type.A.evaluate(_[Re]));for(Me=Ee,Re=be+1;Re<_.length;Re++)Me+=parseFloat(utils_type.A.evaluate(_[Re]));return Te=Me!==0?2*Math.PI*Ee/Me:0,se()*Math[Se](Te)+Ce}},me=function(be,Se){var Ce=-this.point1.coords.usrCoords[1]+this.point2.coords.usrCoords[1],Me=-this.point1.coords.usrCoords[2]+this.point2.coords.usrCoords[2];utils_type.A.exists(this.label)&&(this.label.rendNode.style.fontSize=Se*this.label.evalVisProp("fontsize")+"px",this.label.fullUpdate()),this.point2.coords=new base_coords.A(constants.A.COORDS_BY_USER,[this.point1.coords.usrCoords[1]+Ce*be,this.point1.coords.usrCoords[2]+Me*be],this.board),this.fullUpdate()},fe=function(){this.highlighted||(this.highlighted=!0,this.board.highlightedObjects[this.id]=this,this.board.renderer.highlight(this),me.call(this,1.1,2))},_e=function(){this.highlighted&&(this.highlighted=!1,this.board.renderer.noHighlight(this),me.call(this,.9090909,1))},ye={fixed:!0,withLabel:!1,visible:!1,name:""};if(!utils_type.A.isArray(re))for(re=[],Z=0;Z<_.length;Z++)re[Z]="";for(utils_type.A.isFunction(oe)||(se=function(){return oe}),J.highlightonsector=J.highlightonsector||!1,J.straightfirst=!1,J.straightlast=!1,Q=G.create("point",[ce,ue],ye),ee[0]=G.create("point",[function(){return se()+ce},function(){return ue}],ye),Z=0;Z<_.length;Z++)ee[Z+1]=G.create("point",[de(Z,"cos",ce),de(Z,"sin",ue)],ye),J.name=re[Z],J.withlabel=J.name!=="",J.fillcolor=ne&&ne[Z%ne.length],J.labelcolor=ne&&ne[Z%ne.length],J.highlightfillcolor=ie&&ie[Z%ie.length],te[Z]=G.create("sector",[Q,ee[Z],ee[Z+1]],J),J.highlightonsector&&(te[Z].hasPoint=te[Z].hasPointSector),J.highlightbysize&&(te[Z].highlight=fe,te[Z].noHighlight=_e);return{sectors:te,points:ee,midpoint:Q}},drawRadar:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue,de,me,fe,_e,ye,be,Se,Ce,Me,Re,Te,Ee,De,Le,Ue,Ge,Ye,ke,Fe,Ve,$e,Xe,ze,qe,et,ot,St,it,lt,gt,kt=_.length,Jt=function(){var si,qt,vt,Ke,Tt=this.evalVisProp("label.offset).slice(0");return si=this.point1.X(),qt=this.point2.X(),vt=this.point1.Y(),Ke=this.point2.Y(),qt<si&&(Tt[0]=-Tt[0]),Ke<vt&&(Tt[1]=-Tt[1]),this.setLabelRelativeCoords(Tt),new base_coords.A(constants.A.COORDS_BY_USER,[this.point2.X(),this.point2.Y()],this.board)},li=function(si,qt){var vt,Ke,Tt;return vt=G.create("transform",[-(fe[qt]-de[qt]),0],{type:"translate"}),Ke=G.create("transform",[Se/(_e[qt]+me[qt]-(fe[qt]-de[qt])),1],{type:"scale"}),vt.melt(Ke),Tt=G.create("transform",[si],{type:"rotate"}),vt.melt(Tt),vt};if(kt<=0)throw new Error("JSXGraph radar chart: no data");if(ee=J.paramarray,!utils_type.A.exists(ee))throw new Error("JSXGraph radar chart: need paramArray attribute");if((te=ee.length)<=1)throw new Error("JSXGraph radar chart: need more than one param in paramArray");for(Z=0;Z<kt;Z++)if(te!==_[Z].length)throw new Error("JSXGraph radar chart: use data length equal to number of params ("+_[Z].length+" != "+te+")");for(ne=[],ie=[],Q=0;Q<te;Q++)ne[Q]=_[0][Q],ie[Q]=ne[Q];for(Z=1;Z<kt;Z++)for(Q=0;Q<te;Q++)_[Z][Q]>ne[Q]&&(ne[Q]=_[Z][Q]),_[Z][Q]<ie[Q]&&(ie[Q]=_[Z][Q]);for(re=[],oe=[],Z=0;Z<kt;Z++)re[Z]="",oe[Z]=[];for(se=[],ae=[],ce=J.startshiftratio||0,ue=J.endshiftratio||0,Z=0;Z<te;Z++)se[Z]=(ne[Z]-ie[Z])*ce,ae[Z]=(ne[Z]-ie[Z])*ue;if(de=J.startshiftarray||se,me=J.endshiftarray||ae,fe=J.startarray||ie,utils_type.A.exists(J.start))for(Z=0;Z<te;Z++)fe[Z]=J.start;if(_e=J.endarray||ne,utils_type.A.exists(J.end))for(Z=0;Z<te;Z++)_e[Z]=J.end;if(de.length!==te)throw new Error("JSXGraph radar chart: start shifts length is not equal to number of parameters");if(me.length!==te)throw new Error("JSXGraph radar chart: end shifts length is not equal to number of parameters");if(fe.length!==te)throw new Error("JSXGraph radar chart: starts length is not equal to number of parameters");if(_e.length!==te)throw new Error("JSXGraph radar chart: snds length is not equal to number of parameters");for(ye=J.labelarray||re,be=J.colors,Se=J.radius||10,lt=J.strokewidth||1,utils_type.A.exists(J.highlightonsector)||(J.highlightonsector=!1),Ce={name:J.name,id:J.id,strokewidth:lt,polystrokewidth:J.polystrokewidth||lt,strokecolor:J.strokecolor||"black",straightfirst:!1,straightlast:!1,fillcolor:J.fillColor||"#FFFF88",fillopacity:J.fillOpacity||.4,highlightfillcolor:J.highlightFillColor||"#FF7400",highlightstrokecolor:J.highlightStrokeColor||"black",gradient:J.gradient||"none"},Re=(Me=J.center||[0,0])[0],Te=Me[1],Ee=G.create("point",[Re,Te],{name:"",fixed:!0,withlabel:!1,visible:!1}),Le=De=J.startangle||0,Ue=[],Ge=[],Z=0;Z<te;Z++)for(Le+=2*Math.PI/te,ke=Se*Math.cos(Le)+Re,Fe=Se*Math.sin(Le)+Te,Ue[Z]=G.create("point",[ke,Fe],{name:"",fixed:!0,withlabel:!1,visible:!1}),Ge[Z]=G.create("line",[Ee,Ue[Z]],{name:ee[Z],strokeColor:Ce.strokecolor,strokeWidth:Ce.strokewidth,strokeOpacity:1,straightFirst:!1,straightLast:!1,withLabel:!0,highlightStrokeColor:Ce.highlightstrokecolor}),Ge[Z].getLabelAnchor=Jt,Ye=li(Le,Z),Q=0;Q<_.length;Q++)gt=_[Q][Z],oe[Q][Z]=G.create("point",[gt,0],{name:"",fixed:!0,withlabel:!1,visible:!1}),oe[Q][Z].addTransform(oe[Q][Z],Ye);for(Ve=[],Z=0;Z<kt;Z++)for(Ce.labelcolor=be&&be[Z%be.length],Ce.strokecolor=be&&be[Z%be.length],Ce.fillcolor=be&&be[Z%be.length],Ve[Z]=G.create("polygon",oe[Z],{withLines:!0,withLabel:!1,fillColor:Ce.fillcolor,fillOpacity:Ce.fillopacity,highlightFillColor:Ce.highlightfillcolor}),Q=0;Q<te;Q++)Ve[Z].borders[Q].setAttribute("strokecolor:"+be[Z%be.length]),Ve[Z].borders[Q].setAttribute("strokewidth:"+Ce.polystrokewidth);switch(J.legendposition||"none"){case"right":Xe=J.legendleftoffset||2,ze=J.legendtopoffset||1,this.legend=G.create("legend",[Re+Se+Xe,Te+Se-ze],{labels:ye,colors:be});break;case"none":break;default:jxg.A.debug("Unknown legend position")}if($e=[],J.showcircles){for(qe=[],Z=0;Z<6;Z++)qe[Z]=20*Z;if(qe[0]="0",(ot=(et=J.circlelabelarray||qe).length)<2)throw new Error("JSXGraph radar chart: too less circles in circleLabelArray");for(St=[],Ye=li(De+Math.PI/te,0),Ce.fillcolor="none",Ce.highlightfillcolor="none",Ce.strokecolor=J.strokecolor||"black",Ce.strokewidth=J.circlestrokewidth||.5,Ce.layer=0,it=(_e[0]-fe[0])/(ot-1),Z=0;Z<ot;Z++)St[Z]=G.create("point",[fe[0]+Z*it,0],{name:et[Z],size:0,fixed:!0,withLabel:!0,visible:!0}),St[Z].addTransform(St[Z],Ye),$e[Z]=G.create("circle",[Ee,St[Z]],Ce)}return this.rendNode=Ve[0].rendNode,{circles:$e,lines:Ge,points:oe,midpoint:Ee,polygons:Ve}},updateRenderer:function(){return this},update:function(){return this.needsUpdate&&this.updateDataArray(),this},updateDataArray:function(){return this}}),jxg.A.createChart=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue,de,me,fe,_e,ye=[],be=env.A.isBrowser?G.document.getElementById(_[0]):null;if(_.length===1&&utils_type.A.isString(_[0])){if(utils_type.A.exists(be)){if(se=utils_type.A.copyAttributes(J,G.options,"chart"),Z=(be=new datasource().loadFromTable(_[0],se.withheaders,se.withheaders)).data,ne=be.columnHeaders,Q=be.rowHeaders,ae=se.width,ce=se.name,ue=se.strokecolor,de=se.fillcolor,me=se.highlightstrokecolor,fe=se.highlightfillcolor,G.suspendUpdate(),_e=Z.length,oe=[],se.rows&&utils_type.A.isArray(se.rows)){for(ee=0;ee<_e;ee++)for(te=0;te<se.rows.length;te++)if(se.rows[te]===ee||se.withheaders&&se.rows[te]===Q[ee]){oe.push(Z[ee]);break}}else oe=Z;for(_e=oe.length,ee=0;ee<_e;ee++){if(re=[],se.chartstyle&&se.chartstyle.indexOf("bar")!==-1){for(ie=ae||.8,re.push(1-ie/2+(ee+.5)*ie/_e),te=1;te<oe[ee].length;te++)re.push(re[te-1]+1);se.width=ie/_e}ce&&ce.length===_e?se.name=ce[ee]:se.withheaders&&(se.name=ne[ee]),ue&&ue.length===_e?se.strokecolor=ue[ee]:se.strokecolor=utils_color.A.hsv2rgb((ee+1)/_e*360,.9,.6),de&&de.length===_e?se.fillcolor=de[ee]:se.fillcolor=utils_color.A.hsv2rgb((ee+1)/_e*360,.9,1),me&&me.length===_e?se.highlightstrokecolor=me[ee]:se.highlightstrokecolor=utils_color.A.hsv2rgb((ee+1)/_e*360,.9,1),fe&&fe.length===_e?se.highlightfillcolor=fe[ee]:se.highlightfillcolor=utils_color.A.hsv2rgb((ee+1)/_e*360,.9,.6),se.chartstyle&&se.chartstyle.indexOf("bar")!==-1?ye.push(new jxg.A.Chart(G,[re,oe[ee]],se)):ye.push(new jxg.A.Chart(G,[oe[ee]],se))}G.unsuspendUpdate()}return ye}return se=utils_type.A.copyAttributes(J,G.options,"chart"),new jxg.A.Chart(G,_,se)},jxg.A.registerElement("chart",jxg.A.createChart),jxg.A.Legend=function(G,_,J){var Z;if(this.constructor(),Z=utils_type.A.copyAttributes(J,G.options,"legend"),this.board=G,this.coords=new base_coords.A(constants.A.COORDS_BY_USER,_,this.board),this.myAtts={},this.label_array=Z.labelarray||Z.labels,this.color_array=Z.colorarray||Z.colors,this.opacy_array=Z.strokeopacity||[1],this.lines=[],this.myAtts.strokewidth=Z.strokewidth||5,this.myAtts.straightfirst=!1,this.myAtts.straightlast=!1,this.myAtts.withlabel=!0,this.myAtts.fixed=!0,this.myAtts.frozen=Z.frozen||!1,this.style=Z.legendstyle||Z.style,this.style!=="vertical")throw new Error("JSXGraph: Unknown legend style: "+this.style);this.drawVerticalLegend(G,Z),this.id=this.board.setId(this,"Leg")},jxg.A.Legend.prototype=new base_element.A,jxg.A.Legend.prototype.drawVerticalLegend=function(G,_){var J,Z=_.linelength||1,Q=(_.rowheight||20)/this.board.unitY,ee=function(){return this.setLabelRelativeCoords(this.visProp.label.offset),new base_coords.A(constants.A.COORDS_BY_USER,[this.point2.X(),this.point2.Y()],this.board)};for(J=0;J<this.label_array.length;J++)this.myAtts.name=this.label_array[J],this.myAtts.strokecolor=this.color_array[J%this.color_array.length],this.myAtts.highlightstrokecolor=this.color_array[J%this.color_array.length],this.myAtts.strokeopacity=this.opacy_array[J%this.opacy_array.length],this.myAtts.highlightstrokeopacity=this.opacy_array[J%this.opacy_array.length],this.myAtts.label={offset:[10,0],strokeColor:this.color_array[J%this.color_array.length],strokeWidth:this.myAtts.strokewidth},this.lines[J]=G.create("line",[[this.coords.usrCoords[1],this.coords.usrCoords[2]-J*Q],[this.coords.usrCoords[1]+Z,this.coords.usrCoords[2]-J*Q]],this.myAtts),this.myAtts.frozen&&this.lines[J].setAttribute({point1:{frozen:!0},point2:{frozen:!0}}),this.lines[J].getLabelAnchor=ee,this.lines[J].prepareUpdate().update().updateVisibility(this.lines[J].evalVisProp("visible")).updateRenderer(),this.addChild(this.lines[J])},jxg.A.createLegend=function(G,_,J){var Z=[0,0];if(!utils_type.A.exists(_)||_.length!==2)throw new Error("JSXGraph: Legend element needs two numbers as parameters");return Z=_,new jxg.A.Legend(G,Z,J)},jxg.A.registerElement("legend",jxg.A.createLegend),jxg.A.Chart,jxg.A.Legend,jxg.A.Transformation=function(G,_,J,Z){this.elementClass=constants.A.OBJECT_CLASS_OTHER,this.type=constants.A.OBJECT_TYPE_TRANSFORMATION,Z?(this.is3D=!0,this.matrix=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]):(this.is3D=!1,this.matrix=[[1,0,0],[0,1,0],[0,0,1]]),this.board=G,this.isNumericMatrix=!1,this.is3D?this.setMatrix3D(J[0],_,J.slice(1)):this.setMatrix(G,_,J),this.methodMap={apply:"apply",applyOnce:"applyOnce",bindTo:"bindTo",bind:"bindTo",melt:"melt",meltTo:"meltTo"}},jxg.A.Transformation.prototype={},jxg.A.extend(jxg.A.Transformation.prototype,{update:function(){return this},setMatrix:function(G,_,J){var Z;for(this.isNumericMatrix=!0,Z=0;Z<J.length;Z++)if(typeof J[Z]!="number"){this.isNumericMatrix=!1;break}if(_==="translate"){if(J.length!==2)throw new Error("JSXGraph: translate transformation needs 2 parameters.");this.evalParam=utils_type.A.createEvalFunction(G,J,2),this.update=function(){this.matrix[1][0]=this.evalParam(0),this.matrix[2][0]=this.evalParam(1)}}else if(_==="scale"){if(J.length!==2)throw new Error("JSXGraph: scale transformation needs 2 parameters.");this.evalParam=utils_type.A.createEvalFunction(G,J,2),this.update=function(){this.matrix[1][1]=this.evalParam(0),this.matrix[2][2]=this.evalParam(1)}}else if(_==="reflect")J.length<4&&(J[0]=G.select(J[0])),J.length===2&&(J[1]=G.select(J[1])),J.length===4&&(this.evalParam=utils_type.A.createEvalFunction(G,J,4)),this.update=function(){var Q,ee,te,ne,ie,re,oe,se;J.length===1?oe=J[0].stdform:J.length===2?oe=math.A.crossProduct(J[1].coords.usrCoords,J[0].coords.usrCoords):J.length===4&&(oe=math.A.crossProduct([1,this.evalParam(2),this.evalParam(3)],[1,this.evalParam(0),this.evalParam(1)])),Q=oe[1],ee=oe[2],re=(se=[-(te=oe[0])*Q,-te*ee,Q*Q+ee*ee])[2],ne=se[0]/se[2],ie=se[1]/se[2],Q=-oe[2],ee=oe[1],this.matrix[1][1]=(Q*Q-ee*ee)/re,this.matrix[1][2]=2*Q*ee/re,this.matrix[2][1]=this.matrix[1][2],this.matrix[2][2]=-this.matrix[1][1],this.matrix[1][0]=ne*(1-this.matrix[1][1])-ie*this.matrix[1][2],this.matrix[2][0]=ie*(1-this.matrix[2][2])-ne*this.matrix[2][1]};else if(_==="rotate")J.length===3?this.evalParam=utils_type.A.createEvalFunction(G,J,3):J.length>0&&J.length<=2&&(this.evalParam=utils_type.A.createEvalFunction(G,J,1),J.length!==2||utils_type.A.isArray(J[1])||(J[1]=G.select(J[1]))),this.update=function(){var Q,ee,te=this.evalParam(0),ne=Math.cos(te),ie=Math.sin(te);this.matrix[1][1]=ne,this.matrix[1][2]=-ie,this.matrix[2][1]=ie,this.matrix[2][2]=ne,J.length>1&&(J.length===3?(Q=this.evalParam(1),ee=this.evalParam(2)):utils_type.A.isArray(J[1])?(Q=J[1][0],ee=J[1][1]):(Q=J[1].X(),ee=J[1].Y()),this.matrix[1][0]=Q*(1-ne)+ee*ie,this.matrix[2][0]=ee*(1-ne)-Q*ie)};else if(_==="shear"){if(J.length!==2)throw new Error("JSXGraph: shear transformation needs 2 parameters.");this.evalParam=utils_type.A.createEvalFunction(G,J,2),this.update=function(){this.matrix[1][2]=this.evalParam(0),this.matrix[2][1]=this.evalParam(1)}}else if(_==="generic"){if(J.length!==9)throw new Error("JSXGraph: generic transformation needs 9 parameters.");this.evalParam=utils_type.A.createEvalFunction(G,J,9),this.update=function(){this.matrix[0][0]=this.evalParam(0),this.matrix[0][1]=this.evalParam(1),this.matrix[0][2]=this.evalParam(2),this.matrix[1][0]=this.evalParam(3),this.matrix[1][1]=this.evalParam(4),this.matrix[1][2]=this.evalParam(5),this.matrix[2][0]=this.evalParam(6),this.matrix[2][1]=this.evalParam(7),this.matrix[2][2]=this.evalParam(8)}}else if(_==="matrix"){if(J.length!==1)throw new Error("JSXGraph: transformation of type 'matrix' needs 1 parameter.");this.evalParam=J[0].slice(),this.update=function(){var Q,ee;for(Q=0;Q<3;Q++)for(ee=0;ee<3;ee++)this.matrix[Q][ee]=utils_type.A.evaluate(this.evalParam[Q][ee])}}},setMatrix3D:function(G,_,J){var Z,Q=G.board;for(this.isNumericMatrix=!0,Z=0;Z<J.length;Z++)if(typeof J[Z]!="number"){this.isNumericMatrix=!1;break}if(_==="translate"){if(J.length!==3)throw new Error("JSXGraph: 3D translate transformation needs 3 parameters.");this.evalParam=utils_type.A.createEvalFunction(Q,J,3),this.update=function(){this.matrix[1][0]=this.evalParam(0),this.matrix[2][0]=this.evalParam(1),this.matrix[3][0]=this.evalParam(2)}}else if(_==="scale"){if(J.length!==3&&J.length!==4)throw new Error("JSXGraph: 3D scale transformation needs either 3 or 4 parameters.");this.evalParam=utils_type.A.createEvalFunction(Q,J,3),this.update=function(){var ee=this.evalParam(0),te=this.evalParam(1),ne=this.evalParam(2);this.matrix[1][1]=ee,this.matrix[2][2]=te,this.matrix[3][3]=ne}}else if(_==="rotateX")J.splice(1,0,[1,0,0]),this.setMatrix3D(G,"rotate",J);else if(_==="rotateY")J.splice(1,0,[0,1,0]),this.setMatrix3D(G,"rotate",J);else if(_==="rotateZ")J.splice(1,0,[0,0,1]),this.setMatrix3D(G,"rotate",J);else if(_==="rotate"){if(J.length<2)throw new Error("JSXGraph: 3D rotate transformation needs 2 or 3 parameters.");J.length!==3||utils_type.A.isFunction(J[2])||utils_type.A.isArray(J[2])?this.evalParam=utils_type.A.createEvalFunction(Q,J,J.length):(this.evalParam=utils_type.A.createEvalFunction(Q,J,2),J[2]=G.select(J[2])),this.update=function(){var ee,te,ne,ie=this.evalParam(0),re=this.evalParam(1),oe=[1,0,0,0],se=Math.cos(ie),ae=Math.sin(ie),ce=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],ue=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],de=math.A.norm(re);re.length===3?(ee=re[0]/de,te=re[1]/de,ne=re[2]/de):(ee=re[1]/de,te=re[2]/de,ne=re[3]/de),J.length===3&&((oe=J.length===3&&utils_type.A.exists(J[2].is3D)?J[2].coords.slice():this.evalParam(2)).length===3&&oe.unshift(1),ce[1][0]=-oe[1],ce[2][0]=-oe[2],ce[3][0]=-oe[3],ue[1][0]=oe[1],ue[2][0]=oe[2],ue[3][0]=oe[3]),this.matrix=[[1,0,0,0],[0,ee*ee*(1-se)+se,ee*te*(1-se)-ne*ae,ee*ne*(1-se)+te*ae],[0,te*ee*(1-se)+ne*ae,te*te*(1-se)+se,te*ne*(1-se)-ee*ae],[0,ne*ee*(1-se)-te*ae,ne*te*(1-se)+ee*ae,ne*ne*(1-se)+se]],this.matrix=math.A.matMatMult(this.matrix,ce),this.matrix=math.A.matMatMult(ue,this.matrix)}}},apply:function(G,_){var J;return this.update(),J=this.is3D?G.coords:utils_type.A.exists(_)?G.initialCoords.usrCoords:G.coords.usrCoords,math.A.matVecMult(this.matrix,J)},applyOnce:function(G){var _,J,Z;for(utils_type.A.isArray(G)||(G=[G]),J=G.length,Z=0;Z<J;Z++)this.update(),this.is3D?G[Z].coords=math.A.matVecMult(this.matrix,G[Z].coords):(_=math.A.matVecMult(this.matrix,G[Z].coords.usrCoords),G[Z].coords.setCoordinates(constants.A.COORDS_BY_USER,_))},bindTo:function(G){var _,J;if(utils_type.A.isArray(G))for(J=G.length,_=0;_<J;_++)G[_].transformations.push(this);else G.transformations.push(this)},meltTo:function(G){var _,J,Z;if(utils_type.A.isArray(G))for(_=0;_<G.length;_++)this.meltTo(G[_]);else(J=G.transformations).length>0&&J[J.length-1].isNumericMatrix&&this.isNumericMatrix?J[J.length-1].melt(this):(Z=this.clone(),J.push(Z))},clone:function(){var G=null;return this.isNumericMatrix&&((G=new jxg.A.Transformation(this.board,"none",[])).matrix=this.matrix.slice()),G},setProperty:function(G){jxg.A.deprecated("Transformation.setProperty()","Transformation.setAttribute()")},setAttribute:function(G){},melt:function(G){var _;return this.update(),G.update(),_=math.A.matMatMult(G.matrix,this.matrix),this.update=function(){this.matrix=_},this},getParents:function(){var G=[[].concat.apply([],this.matrix)];return this.parents.length!==0&&(G=this.parents),G}}),jxg.A.createTransform=function(G,_,J){return new jxg.A.Transformation(G,J.type,_)},jxg.A.registerElement("transform",jxg.A.createTransform),jxg.A.createTransform3D=function(G,_,J){return new jxg.A.Transformation(G,J.type,_,!0)},jxg.A.registerElement("transform3d",jxg.A.createTransform3D),jxg.A.Transformation,jxg.A.Turtle=function(G,_,J){var Z,Q,ee;return this.constructor(G,J,constants.A.OBJECT_TYPE_TURTLE,constants.A.OBJECT_CLASS_OTHER),this.turtleIsHidden=!1,this.board=G,this.visProp.curveType="plot",this._attributes=utils_type.A.copyAttributes(this.visProp,G.options,"turtle"),delete this._attributes.id,Z=0,Q=0,ee=90,_.length!==0&&(_.length===3?(Z=_[0],Q=_[1],ee=_[2]):_.length===2?utils_type.A.isArray(_[0])?(Z=_[0][0],Q=_[0][1],ee=_[1]):(Z=_[0],Q=_[1]):(Z=_[0][0],Q=_[0][1])),this.init(Z,Q,ee),this.methodMap=utils_type.A.deepCopy(this.methodMap,{forward:"forward",fd:"forward",back:"back",bk:"back",right:"right",rt:"right",left:"left",lt:"left",penUp:"penUp",pu:"penUp",up:"penUp",penDown:"penDown",pd:"penDown",down:"penDown",clearScreen:"clearScreen",cs:"clearScreen",clean:"clean",setPos:"setPos",home:"home",hideTurtle:"hideTurtle",ht:"hideTurtle",hide:"hideTurtle",showTurtle:"showTurtle",st:"showTurtle",show:"showTurtle",penSize:"setPenSize",setPenSize:"setPenSize",penColor:"setPenColor",setPenColor:"setPenColor",highlightPenColor:"setHighlightPenColor",setHighlightPenColor:"setHighlightPenColor",getPenColor:"getPenColor",Color:"getPenColor",getHighlightPenColor:"getHighlightPenColor",HighlightColor:"getHighlightPenColor",getPenSize:"getPenSize",Size:"getPenSize",pushTurtle:"pushTurtle",push:"pushTurtle",popTurtle:"popTurtle",pop:"popTurtle",lookTo:"lookTo",pos:"pos",Pos:"pos",moveTo:"moveTo",X:"X",Y:"Y"}),this},jxg.A.Turtle.prototype=new base_element.A,jxg.A.extend(jxg.A.Turtle.prototype,{init:function(G,_,J){var Z={fixed:!0,name:"",visible:!1,withLabel:!1};this.arrowLen=20/math.A.hypot(this.board.unitX,this.board.unitY),this.pos=[G,_],this.isPenDown=!0,this.dir=90,this.stack=[],this.objects=[],this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.turtle=this.board.create("point",this.pos,Z),this.objects.push(this.turtle),this.turtle2=this.board.create("point",[this.pos[0],this.pos[1]+this.arrowLen],Z),this.objects.push(this.turtle2),this.visProp.arrow.lastArrow=!0,this.visProp.arrow.straightFirst=!1,this.visProp.arrow.straightLast=!1,this.arrow=this.board.create("line",[this.turtle,this.turtle2],this.visProp.arrow),this.objects.push(this.arrow),this.subs={arrow:this.arrow},this.inherits.push(this.arrow),this.right(90-J),this.board.update()},forward:function(G){if(G===0)return this;var _,J=G*Math.cos(this.dir*Math.PI/180),Z=G*Math.sin(this.dir*Math.PI/180);return this.turtleIsHidden||((_=this.board.create("transform",[J,Z],{type:"translate"})).applyOnce(this.turtle),_.applyOnce(this.turtle2)),this.isPenDown&&this.curve.dataX.length>=8192&&(this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve)),this.pos[0]+=J,this.pos[1]+=Z,this.isPenDown&&(this.curve.dataX.push(this.pos[0]),this.curve.dataY.push(this.pos[1])),this.board.update(),this},back:function(G){return this.forward(-G)},right:function(G){return this.dir-=G,this.dir%=360,this.turtleIsHidden||this.board.create("transform",[-G*Math.PI/180,this.turtle],{type:"rotate"}).applyOnce(this.turtle2),this.board.update(),this},left:function(G){return this.right(-G)},penUp:function(){return this.isPenDown=!1,this},penDown:function(){return this.isPenDown=!0,this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this},clean:function(){var G,_;for(G=0;G<this.objects.length;G++)(_=this.objects[G]).type===constants.A.OBJECT_TYPE_CURVE&&(this.board.removeObject(_),this.objects.splice(G,1));return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.board.update(),this},clearScreen:function(){return this.board.removeObject(this.objects),this.objects=[],this.init(0,0,90),this},setPos:function(G,_){return utils_type.A.isArray(G)?this.pos=G:this.pos=[G,_],this.turtleIsHidden||(this.turtle.setPositionDirectly(constants.A.COORDS_BY_USER,[G,_]),this.turtle2.setPositionDirectly(constants.A.COORDS_BY_USER,[G,_+this.arrowLen]),this.board.create("transform",[-(this.dir-90)*Math.PI/180,this.turtle],{type:"rotate"}).applyOnce(this.turtle2)),this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.board.update(),this},setPenSize:function(G){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("strokeWidth",G)),this.objects.push(this.curve),this},setPenColor:function(G){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("strokeColor",G)),this.objects.push(this.curve),this},getPenAttribute:function(G){var _,J=this.objects.length;return _=J===4?0:J-1,this.objects[_].evalVisProp(G)},getPenSize:function(){return this.getPenAttribute("strokewidth")},getPenColor:function(){return this.getPenAttribute("strokecolor")},getHighlightPenColor:function(){return this.getPenAttribute("highlightstrokecolor")},setHighlightPenColor:function(G){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("highlightStrokeColor",G)),this.objects.push(this.curve),this},setAttribute:function(G){var _,J,Z,Q=this.objects.length;for(_=0;_<Q;_++)(J=this.objects[_]).type===constants.A.OBJECT_TYPE_CURVE&&J.setAttribute(G);return Z=this.visProp.id,this.visProp=utils_type.A.deepCopy(this.curve.visProp),this.visProp.id=Z,this._attributes=utils_type.A.deepCopy(this.visProp),delete this._attributes.id,this},copyAttr:function(G,_){return this._attributes[G.toLowerCase()]=_,this._attributes},showTurtle:function(){return this.turtleIsHidden=!1,this.arrow.setAttribute({visible:!0}),this.visProp.arrow.visible=!1,this.setPos(this.pos[0],this.pos[1]),this.board.update(),this},hideTurtle:function(){return this.turtleIsHidden=!0,this.arrow.setAttribute({visible:!1}),this.visProp.arrow.visible=!1,this.board.update(),this},home:function(){return this.pos=[0,0],this.setPos(this.pos[0],this.pos[1]),this},pushTurtle:function(){return this.stack.push([this.pos[0],this.pos[1],this.dir]),this},popTurtle:function(){var G=this.stack.pop();return this.pos[0]=G[0],this.pos[1]=G[1],this.dir=G[2],this.setPos(this.pos[0],this.pos[1]),this},lookTo:function(G){var _,J,Z,Q,ee;return utils_type.A.isArray(G)?(_=this.pos[0],J=this.pos[1],Z=G[0],Q=G[1],ee=Math.atan2(Q-J,Z-_),this.right(this.dir-180*ee/Math.PI)):utils_type.A.isNumber(G)&&this.right(this.dir-G),this},moveTo:function(G){var _,J,Z;return utils_type.A.isArray(G)&&(_=G[0]-this.pos[0],J=G[1]-this.pos[1],this.turtleIsHidden||((Z=this.board.create("transform",[_,J],{type:"translate"})).applyOnce(this.turtle),Z.applyOnce(this.turtle2)),this.isPenDown&&this.curve.dataX.length>=8192&&(this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve)),this.pos[0]=G[0],this.pos[1]=G[1],this.isPenDown&&(this.curve.dataX.push(this.pos[0]),this.curve.dataY.push(this.pos[1])),this.board.update()),this},fd:function(G){return this.forward(G)},bk:function(G){return this.back(G)},lt:function(G){return this.left(G)},rt:function(G){return this.right(G)},pu:function(){return this.penUp()},pd:function(){return this.penDown()},ht:function(){return this.hideTurtle()},st:function(){return this.showTurtle()},cs:function(){return this.clearScreen()},push:function(){return this.pushTurtle()},pop:function(){return this.popTurtle()},evalAt:function(G,_){var J,Z,Q,ee,te=this.objects.length;for(J=0,Z=0;J<te;J++)if((Q=this.objects[J]).elementClass===constants.A.OBJECT_CLASS_CURVE){if(Z<=G&&G<Z+Q.numberPoints)return ee=G-Z,Q[_](ee);Z+=Q.numberPoints}return this[_]()},X:function(G){return utils_type.A.exists(G)?this.evalAt(G,"X"):this.pos[0]},Y:function(G){return utils_type.A.exists(G)?this.evalAt(G,"Y"):this.pos[1]},Z:function(G){return 1},minX:function(){return 0},maxX:function(){var G,_=this.objects.length,J=0;for(G=0;G<_;G++)this.objects[G].elementClass===constants.A.OBJECT_CLASS_CURVE&&(J+=this.objects[G].numberPoints);return J},hasPoint:function(G,_){var J,Z;for(J=0;J<this.objects.length;J++)if((Z=this.objects[J]).type===constants.A.OBJECT_TYPE_CURVE&&Z.hasPoint(G,_))return!0;return!1}}),jxg.A.createTurtle=function(G,_,J){var Z;return _=_||[],Z=utils_type.A.copyAttributes(J,G.options,"turtle"),new jxg.A.Turtle(G,_,Z)},jxg.A.registerElement("turtle",jxg.A.createTurtle),jxg.A.Turtle,jxg.A.Ticks=function(G,_,J){if(this.constructor(G.board,J,constants.A.OBJECT_TYPE_TICKS,constants.A.OBJECT_CLASS_OTHER),this.line=G,this.board=this.line.board,this.fixedTicks=null,this.equidistant=!1,this.labelsData=[],utils_type.A.isFunction(_))throw this.ticksFunction=_,new Error("Function arguments are no longer supported.");utils_type.A.isArray(_)?this.fixedTicks=_:this.equidistant=!0,this.ticks=[],this.labels=[],this.labelCounter=0,this.id=this.line.addTicks(this),this.elType="ticks",this.inherits.push(this.labels),this.board.setId(this,"Ti")},jxg.A.Ticks.prototype=new base_element.A,jxg.A.extend(jxg.A.Ticks.prototype,{hasPoint:function(G,_){var J,Z,Q,ee,te=this.ticks&&this.ticks.length||0;if(!this.line.evalVisProp("scalable")||this.line.elementClass===constants.A.OBJECT_CLASS_CURVE||(utils_type.A.isObject(this.evalVisProp("precision"))?(ee=this.board._inputDevice,Q=this.evalVisProp("precision."+ee)):Q=this.board.options.precision.hasPoint,Q+=.5*this.evalVisProp("strokewidth"),this.line.stdform[1]!==0&&this.line.stdform[2]!==0&&this.line.type!==constants.A.OBJECT_TYPE_AXIS))return!1;for(J=0;J<te;J++)if((Z=this.ticks[J])[2]&&!(this.line.stdform[1]===0&&Math.abs(Z[0][0]-this.line.point1.coords.scrCoords[1])<math.A.eps||this.line.stdform[2]===0&&Math.abs(Z[1][0]-this.line.point1.coords.scrCoords[2])<math.A.eps)&&(Math.abs(Z[0][0]-Z[0][1])>=1||Math.abs(Z[1][0]-Z[1][1])>=1)){if(this.line.stdform[1]===0){if(Math.abs(_-this.line.point1.coords.scrCoords[2])<2*Q&&Z[0][0]-Q<G&&G<Z[0][1]+Q)return!0}else if(this.line.stdform[2]===0&&Math.abs(G-this.line.point1.coords.scrCoords[1])<2*Q&&Z[1][0]-Q<_&&_<Z[1][1]+Q)return!0}return!1},setPositionDirectly:function(G,_,J){var Z,Q,ee=new base_coords.A(G,_,this.board),te=new base_coords.A(G,J,this.board),ne=this.board.getBoundingBox();return this.line.type===constants.A.OBJECT_TYPE_AXIS&&this.line.evalVisProp("scalable")?(Math.abs(this.line.stdform[1])<math.A.eps&&Math.abs(ee.usrCoords[1]*te.usrCoords[1])>math.A.eps?(Z=te.usrCoords[1]/ee.usrCoords[1],ne[0]*=Z,ne[2]*=Z,this.board.setBoundingBox(ne,this.board.keepaspectratio,"update")):Math.abs(this.line.stdform[2])<math.A.eps&&Math.abs(ee.usrCoords[2]*te.usrCoords[2])>math.A.eps&&(Q=te.usrCoords[2]/ee.usrCoords[2],ne[3]*=Q,ne[1]*=Q,this.board.setBoundingBox(ne,this.board.keepaspectratio,"update")),this):this},calculateTicksCoordinates:function(){var G,_,J,Z;if(!(this.line.elementClass===constants.A.OBJECT_CLASS_LINE&&(this.setTicksSizeVariables(),Math.abs(this.dx)<math.A.eps&&Math.abs(this.dy)<math.A.eps)))return G=this.getZeroCoordinates(),_=this.line.elementClass===constants.A.OBJECT_CLASS_LINE?this.getLowerAndUpperBounds(G,"ticksdistance"):{lower:this.line.minX(),upper:this.line.maxX(),a1:0,a2:0,m1:0,m2:0},this.evalVisProp("type")==="polar"&&(Z=this.board.getBoundingBox(),J=Math.max(math.A.hypot(Z[0],Z[1]),math.A.hypot(Z[2],Z[3])),_.upper=J),this.ticks=[],this.labelsData=[],this.equidistant?this.generateEquidistantTicks(G,_):this.generateFixedTicks(G,_),this},setTicksSizeVariables:function(G){var _,J,Z,Q,ee=.5*this.evalVisProp("majorheight"),te=.5*this.evalVisProp("minorheight");utils_type.A.exists(G)?(J=this.line.minX(),Z=this.line.maxX(),(Q=this.line.points.length)<2?(this.dxMaj=0,this.dyMaj=0):math.A.relDif(G,J)<math.A.eps?(this.dxMaj=this.line.points[0].usrCoords[2]-this.line.points[1].usrCoords[2],this.dyMaj=this.line.points[1].usrCoords[1]-this.line.points[0].usrCoords[1]):math.A.relDif(G,Z)<math.A.eps?(this.dxMaj=this.line.points[Q-2].usrCoords[2]-this.line.points[Q-1].usrCoords[2],this.dyMaj=this.line.points[Q-1].usrCoords[1]-this.line.points[Q-2].usrCoords[1]):(this.dxMaj=-numerics.A.D(this.line.Y)(G),this.dyMaj=numerics.A.D(this.line.X)(G))):(this.dxMaj=this.line.stdform[1],this.dyMaj=this.line.stdform[2]),this.dxMin=this.dxMaj,this.dyMin=this.dyMaj,this.dx=this.dxMaj,this.dy=this.dyMaj,_=math.A.hypot(this.dxMaj*this.board.unitX,this.dyMaj*this.board.unitY),this.dxMaj*=ee/_*this.board.unitX,this.dyMaj*=ee/_*this.board.unitY,this.dxMin*=te/_*this.board.unitX,this.dyMin*=te/_*this.board.unitY,this.minStyle=this.evalVisProp("minorheight")<0?"infinite":"finite",this.majStyle=this.evalVisProp("majorheight")<0?"infinite":"finite"},getZeroCoordinates:function(){var G,_,J,Z,Q,ee,te,ne,ie=this.evalVisProp("anchor");return this.line.elementClass===constants.A.OBJECT_CLASS_LINE?this.line.type===constants.A.OBJECT_TYPE_AXIS?geometry.A.projectPointToLine({coords:{usrCoords:[1,0,0]}},this.line,this.board):(J=this.line.point1.coords.usrCoords[0],G=this.line.point1.coords.usrCoords[1],_=this.line.point1.coords.usrCoords[2],ee=this.line.point2.coords.usrCoords[0],Z=this.line.point2.coords.usrCoords[1],Q=this.line.point2.coords.usrCoords[2],ie==="right"?this.line.point2.coords:ie==="middle"?new base_coords.A(constants.A.COORDS_BY_USER,[.5*(J+ee),.5*(G+Z),.5*(_+Q)],this.board):utils_type.A.isNumber(ie)?new base_coords.A(constants.A.COORDS_BY_USER,[J+(ee-J)*ie,G+(Z-G)*ie,_+(Q-_)*ie],this.board):this.line.point1.coords):(te=this.line.minX(),ne=this.line.maxX(),ie==="right"?ne:ie==="middle"?.5*(te+ne):utils_type.A.isNumber(ie)?te*(1-ie)+ne*ie:te)},getLowerAndUpperBounds:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue,de,me,fe=10*math.A.eps,_e=this.line.evalVisProp("straightfirst"),ye=this.line.evalVisProp("straightlast"),be=this.evalVisProp("includeboundaries");return this.line.elementClass===constants.A.OBJECT_CLASS_CURVE?{lower:this.line.minX(),upper:this.line.maxX()}:(te=new base_coords.A(constants.A.COORDS_BY_USER,this.line.point1.coords.usrCoords,this.board),ne=new base_coords.A(constants.A.COORDS_BY_USER,this.line.point2.coords.usrCoords,this.board),ie=Math.abs(te.usrCoords[0])>=math.A.eps&&te.scrCoords[1]>=0&&te.scrCoords[1]<=this.board.canvasWidth&&te.scrCoords[2]>=0&&te.scrCoords[2]<=this.board.canvasHeight,re=Math.abs(ne.usrCoords[0])>=math.A.eps&&ne.scrCoords[1]>=0&&ne.scrCoords[1]<=this.board.canvasWidth&&ne.scrCoords[2]>=0&&ne.scrCoords[2]<=this.board.canvasHeight,utils_type.A.exists(_)&&_==="ticksdistance"?(geometry.A.calcStraight(this.line,te,ne,0),de=this.getDistanceFromZero(G,te),me=this.getDistanceFromZero(G,ne),geometry.A.calcStraight(this.line,te,ne,this.line.evalVisProp("margin")),de=this.getDistanceFromZero(G,te)-de,me=this.getDistanceFromZero(G,ne).m2):geometry.A.calcLineDelimitingPoints(this.line,te,ne),Q=this.line.evalVisProp("firstarrow"),ee=this.line.evalVisProp("lastarrow"),ce=this.getDistanceFromZero(G,te),ue=this.getDistanceFromZero(G,ne),(Q||ee)&&(ae=this.board.renderer.getArrowHeadData(this.line,this.line.evalVisProp("strokewidth"),""),this.board.renderer.getPositionArrowHead(this.line,te,ne,ae)),(oe=this.getDistanceFromZero(G,te))<(se=this.getDistanceFromZero(G,ne))?(J=oe,Z=se,_e||!ie||be||(J+=fe),ye||!re||be||(Z-=fe)):se<oe?(J=se,Z=oe,ye||!re||be||(J+=fe),_e||!ie||be||(Z-=fe)):(J=0,Z=0),{lower:J,upper:Z,a1:ce=oe-ce,a2:ue=oe-ue,m1:de,m2:me})},getDistanceFromZero:function(G,_){var J,Z,Q,ee,te;return J=this.line.point1.coords,Z=this.line.point2.coords,te=G.distance(constants.A.COORDS_BY_USER,_),Q=[Z.usrCoords[0]-J.usrCoords[0],Z.usrCoords[1]-J.usrCoords[1],Z.usrCoords[2]-J.usrCoords[2]],ee=[_.usrCoords[0]-G.usrCoords[0],_.usrCoords[1]-G.usrCoords[1],_.usrCoords[2]-G.usrCoords[2]],math.A.innerProduct(Q,ee,3)<0&&(te*=-1),te},generateEquidistantTicks:function(G,_){var J,Z,Q,ee=math.A.eps,te=this.evalVisProp("minorticks");if(Q=this.getDistanceMajorTicks(),this.line.elementClass===constants.A.OBJECT_CLASS_LINE&&(Z=this.getXandYdeltas()),Q*=this.evalVisProp("scale"),Q/=te+1,this.ticksDelta=Q,!(Q<math.A.eps))if(Math.abs(_.upper-_.lower)>2048*Q)jxg.A.warn("JSXGraph ticks: too many ticks (>2048). Please increase ticksDistance.");else{for(J=0,this.evalVisProp("drawzero")||(J=Q),J<_.lower&&(J=Math.floor((_.lower-ee)/Q)*Q);J<=_.upper+ee&&(J>=_.lower-ee&&this.processTickPosition(G,J,Q,Z),J+=Q,!(_.upper-J>1e4*Q)););for((J=-Q)>_.upper&&(J=Math.ceil((_.upper+ee)/-Q)*-Q);J>=_.lower-ee&&(J<=_.upper+ee&&this.processTickPosition(G,J,Q,Z),!((J-=Q)-_.lower>1e4*Q)););}},getDistanceMajorTicks:function(){var G,_,J,Z,Q,ee,te,ne;return this.evalVisProp("insertticks")?(ee=((J=this.getLowerAndUpperBounds(this.getZeroCoordinates(),"")).upper-J.lower)/6/(Q=this.evalVisProp("scale")),te=this.evalVisProp("minticksdistance")/Q,ne=this.evalVisProp("minorticks"),(Z=this.getXandYdeltas()).x*=this.board.unitX,Z.y*=this.board.unitY,te/=math.A.hypot(Z.x,Z.y),te*=ne+1,2*(G=Math.pow(10,Math.floor(Math.log(te)/Math.LN10)))>=te?G*=2:5*G>=te&&(G*=5),5*(_=Math.pow(10,Math.floor(Math.log(ee)/Math.LN10)))<ee?_*=5:2*_<ee&&(_*=2),G=Math.max(G,_)):this.evalVisProp("ticksdistance")},processTickPosition:function(G,_,J,Z){var Q,ee,te,ne,ie,re,oe=this.evalVisProp("ticksperlabel"),se=null;this.line.elementClass===constants.A.OBJECT_CLASS_LINE?(Q=G.usrCoords[1]+_*Z.x,ee=G.usrCoords[2]+_*Z.y):(Q=this.line.X(G+_),ee=this.line.Y(G+_)),te=new base_coords.A(constants.A.COORDS_BY_USER,[Q,ee],this.board),this.line.elementClass===constants.A.OBJECT_CLASS_CURVE&&(se=G+_,this.setTicksSizeVariables(se)),ie=this.evalVisProp("minorticks"),te.major=Math.round(_/J)%(ie+1)===0,oe||(oe=ie+1),re=Math.round(_/J)%oe===0,(ne=this.createTickPath(te,te.major)).length===3&&(this.ticks.push(ne),re&&this.evalVisProp("drawlabels")?this.labelsData.push(this.generateLabelData(this.generateLabelText(te,G,se),te,this.ticks.length)):this.labelsData.push(null))},generateFixedTicks:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe=math.A.eps,se=utils_type.A.isArray(this.visProp.labels),ae=this.evalVisProp("drawlabels");for(this.line.elementClass===constants.A.OBJECT_CLASS_LINE&&(re=this.getXandYdeltas()),Q=0;Q<this.fixedTicks.length;Q++)this.line.elementClass===constants.A.OBJECT_CLASS_LINE?(ie=this.fixedTicks[Q],te=G.usrCoords[1]+ie*re.x,ne=G.usrCoords[2]+ie*re.y):(ie=G+this.fixedTicks[Q],te=this.line.X(ie),ne=this.line.Y(ie)),J=new base_coords.A(constants.A.COORDS_BY_USER,[te,ne],this.board),this.line.elementClass===constants.A.OBJECT_CLASS_CURVE&&this.setTicksSizeVariables(ie),(ee=this.createTickPath(J,!0)).length===3&&ie>=_.lower-oe&&ie<=_.upper+oe&&(this.ticks.push(ee),ae&&(se||utils_type.A.exists(this.visProp.labels[Q]))?(Z=se?this.evalVisProp("labels."+Q):ie,this.labelsData.push(this.generateLabelData(this.generateLabelText(J,G,Z),J,Q))):this.labelsData.push(null))},getXandYdeltas:function(){var G,_,J=this.line.point1.Dist(this.line.point2);return G=this.line.point1.coords.usrCoords,{x:((_=this.line.point2.coords.usrCoords)[1]-G[1])/J,y:(_[2]-G[2])/J}},_isInsideCanvas:function(G,_,J){var Z=this.board.canvasWidth,Q=this.board.canvasHeight;return J===void 0&&(J=0),G[0]>=J&&G[0]<=Z-J&&_[0]>=J&&_[0]<=Q-J||G[1]>=J&&G[1]<=Z-J&&_[1]>=J&&_[1]<=Q-J},createTickPath:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue,de,me,fe,_e,ye=[-2e6,-2e6],be=[-2e6,-2e6];if(J=G.scrCoords,_?(ee=this.dxMaj,te=this.dyMaj,oe=this.majStyle,me=this.evalVisProp("majortickendings.0")>0,fe=this.evalVisProp("majortickendings.1")>0):(ee=this.dxMin,te=this.dyMin,oe=this.minStyle,me=this.evalVisProp("tickendings.0")>0,fe=this.evalVisProp("tickendings.1")>0),Z=[-te*J[1]-ee*J[2],te,ee],_&&this.evalVisProp("type")==="polar"){if(ce=this.board.getBoundingBox(),de=(ue=2*Math.PI)/180,J=G.usrCoords,(ae=math.A.hypot(J[1],J[2]))<Math.max(math.A.hypot(ce[0],ce[1]),math.A.hypot(ce[2],ce[3]))){for(ye=[],be=[],se=0;se<=ue;se+=de)ye.push(this.board.origin.scrCoords[1]+ae*Math.cos(se)*this.board.unitX),be.push(this.board.origin.scrCoords[2]+ae*Math.sin(se)*this.board.unitY);return[ye,be,_]}}else{if(oe==="infinite"){if(this.evalVisProp("ignoreinfinitetickendings")&&(me=fe=!0),Q=geometry.A.meetLineBoard(Z,this.board),me&&fe)ye[0]=Q[0].scrCoords[1],ye[1]=Q[1].scrCoords[1],be[0]=Q[0].scrCoords[2],be[1]=Q[1].scrCoords[2];else if((_e=[math.A.innerProduct(Q[0].usrCoords.slice(1,3),this.line.stdform.slice(1,3))+this.line.stdform[0],math.A.innerProduct(Q[1].usrCoords.slice(1,3),this.line.stdform.slice(1,3))+this.line.stdform[0]])[0]<_e[1]&&(Q.reverse(),_e.reverse()),me){if(_e[0]<0)return[];_e[1]<0?(ye[0]=Q[0].scrCoords[1],be[0]=Q[0].scrCoords[2],ye[1]=J[1],be[1]=J[2]):(ye[0]=Q[0].scrCoords[1],be[0]=Q[0].scrCoords[2],ye[1]=Q[1].scrCoords[1],be[1]=Q[1].scrCoords[2])}else if(fe){if(_e[1]>0)return[];_e[0]>0?(ye[0]=J[1],be[0]=J[2],ye[1]=Q[1].scrCoords[1],be[1]=Q[1].scrCoords[2]):(ye[0]=Q[0].scrCoords[1],be[0]=Q[0].scrCoords[2],ye[1]=Q[1].scrCoords[1],be[1]=Q[1].scrCoords[2])}}else re=this.evalVisProp("face")===">"?Math.PI/4:this.evalVisProp("face")==="<"?-Math.PI/4:0,ne=Math.cos(re)*ee-Math.sin(re)*te,ie=Math.sin(re)*ee+Math.cos(re)*te,ye[0]=J[1]+ne*me,be[0]=J[2]-ie*me,ye[1]=J[1],be[1]=J[2],re=-re,ne=Math.cos(re)*ee-Math.sin(re)*te,ie=Math.sin(re)*ee+Math.cos(re)*te,ye[2]=J[1]-ne*fe,be[2]=J[2]+ie*fe;if(this._isInsideCanvas(ye,be))return[ye,be,_]}return[]},formatLabelText:function(G){var _,J,Z=this.evalVisProp("label.usemathjax"),Q=this.evalVisProp("label.usekatex"),ee=this.evalVisProp("scalesymbol");return utils_type.A.isNumber(G)?(this.evalVisProp("label.tofraction")?_=Z?"\\("+utils_type.A.toFraction(G,!0)+"\\)":utils_type.A.toFraction(G,Q):(J=this.evalVisProp("digits"),this.useLocale()?_=this.formatNumberLocale(G,J):((_=(Math.round(1e11*G)/1e11).toString()).length>this.evalVisProp("maxlabellength")||_.indexOf("e")!==-1)&&(this.evalVisProp("precision")!==3&&J===3&&(J=this.evalVisProp("precision")),_=G.toExponential(J).toString())),this.evalVisProp("beautifulscientificticklabels")&&(_=this.beautifyScientificNotationLabel(_)),_.indexOf(".")>-1&&_.indexOf("e")===-1&&(_=(_=_.replace(/0+$/,"")).replace(/\.$/,""))):_=G.toString(),ee.length>0&&(_==="1"?_=ee:_==="-1"?_="-"+ee:_!=="0"&&(_+=ee)),this.evalVisProp("useunicodeminus")&&(_=_.replace(/-/g,"")),_},beautifyScientificNotationLabel:function(G){return G.indexOf("e")===-1?G:(parseFloat(G.substring(0,G.indexOf("e")))+G.substring(G.indexOf("e"))).replace(/e(.*)$/g,function(_,J){var Z="10";return Z+=J.replace(/-/g,"").replace(/\+/g,"").replace(/0/g,"").replace(/1/g,"").replace(/2/g,"").replace(/3/g,"").replace(/4/g,"").replace(/5/g,"").replace(/6/g,"").replace(/7/g,"").replace(/8/g,"").replace(/9/g,"")})},generateLabelText:function(G,_,J){var Z;if(!utils_type.A.exists(J)){if(Z=this.getDistanceFromZero(_,G),Math.abs(Z)<math.A.eps)return"0";J=Z/this.evalVisProp("scale")}return this.formatLabelText(J)},generateLabelData:function(G,_,J){var Z,Q,ee,te;return te=this.evalVisProp("label.fontsize"),Z=[_.scrCoords[1],_.scrCoords[1]],Q=[_.scrCoords[2],_.scrCoords[2]],ee=te===void 0?12:te,ee*=.5,this._isInsideCanvas(Z,Q,ee)?(Z=this.evalVisProp("label.offset")[0],Q=this.evalVisProp("label.offset")[1],{x:_.usrCoords[1]+Z/this.board.unitX,y:_.usrCoords[2]+Q/this.board.unitY,t:G,i:J}):null},update:function(){return this.needsUpdate&&this.board.canvasWidth!==0&&this.board.canvasHeight!==0&&this.calculateTicksCoordinates(),this},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&this.board.renderer.updateTicks(this),this.updateRendererLabels(),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},updateRendererLabels:function(){var G,_,J,Z,Q,ee,te,ne;for(J=this.labelsData.length,Z=this.labels.length,G=0,_=0;G<J;G++)this.labelsData[G]!==null&&(te=this.labelsData[G],_<Z?((ee=this.labels[_]).setText(te.t),ee.setCoords(te.x,te.y),_++):(this.labelCounter+=1,(Q=utils_type.A.deepCopy(this.visProp.label)).isLabel=!0,Q.priv=this.visProp.priv,Q.id=this.id+te.i+"Label"+this.labelCounter,ee=jxg.A.createText(this.board,[te.x,te.y,te.t],Q),this.addChild(ee),ee.setParents(this),ee.isDraggable=!1,ee.dump=!1,this.labels.push(ee)),(ne=this.evalVisProp("label.visible"))==="inherit"&&(ne=this.visPropCalc.visible),ee.prepareUpdate().updateVisibility(ne).updateRenderer(),ee.distanceX=this.evalVisProp("label.offset")[0],ee.distanceY=this.evalVisProp("label.offset")[1]);for(_=J=_;_<Z;_++)this.board.renderer.display(this.labels[_],!1),this.labels[_].visProp.visible=this.labels[_].visPropCalc.visible=!1;return this},hideElement:function(){var G;for(jxg.A.deprecated("Element.hideElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!1,this.board.renderer.display(this,!1),G=0;G<this.labels.length;G++)utils_type.A.exists(this.labels[G])&&this.labels[G].hideElement();return this},showElement:function(){var G;for(jxg.A.deprecated("Element.showElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!0,this.board.renderer.display(this,!1),G=0;G<this.labels.length;G++)utils_type.A.exists(this.labels[G])&&this.labels[G].showElement();return this}}),jxg.A.createTicks=function(G,_,J){var Z,Q,ee=utils_type.A.copyAttributes(J,G.options,"ticks");if(Q=_.length<2?ee.ticksdistance:_[1],_[0].elementClass!==constants.A.OBJECT_CLASS_LINE&&_[0].elementClass!==constants.A.OBJECT_CLASS_CURVE)throw new Error("JSXGraph: Can't create Ticks with parent types '"+typeof _[0]+"'.");return Z=new jxg.A.Ticks(_[0],Q,ee),utils_type.A.isFunction(ee.generatelabelvalue)&&(Z.generateLabelText=ee.generatelabelvalue),utils_type.A.isFunction(ee.generatelabeltext)&&(Z.generateLabelText=ee.generatelabeltext),Z.setParents(_[0]),Z.isDraggable=!0,Z.fullUpdate(_[0].visPropCalc.visible),Z},jxg.A.createHatchmark=function(G,_,J){var Z,Q,ee,te,ne,ie=[],re=utils_type.A.copyAttributes(J,G.options,"hatch");if(_[0].elementClass!==constants.A.OBJECT_CLASS_LINE&&_[0].elementClass!==constants.A.OBJECT_CLASS_CURVE||typeof _[1]!="number")throw new Error("JSXGraph: Can't create Hatch mark with parent types '"+typeof _[0]+"' and '"+typeof _[1]+" and ''"+typeof _[2]+"'.");for(ee=.5*-(((Z=_[1])-1)*(te=re.ticksdistance)),Q=0;Q<Z;Q++)ie[Q]=ee+Q*te;return(ne=G.create("ticks",[_[0],ie],re)).elType="hatch",_[0].inherits.push(ne),ne},jxg.A.registerElement("ticks",jxg.A.createTicks),jxg.A.registerElement("hash",jxg.A.createHatchmark),jxg.A.registerElement("hatch",jxg.A.createHatchmark),jxg.A.Ticks;var bitReverse=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],cplens=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],cplext=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],cpdist=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],cpdext=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],border=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],NAMEMAX=256;jxg.A.Util=jxg.A.Util||{},jxg.A.Util.Unzip=function(G){var _,J,Z,Q,ee=[],te=0,ne=[],ie=new Array(32768),re=0,oe=!1,se=G.length,ae=0,ce=1,ue=new Array(288),de=new Array(32),me=0,fe=null,_e=0,ye=new Array(17),be=[];function Se(){return ae<se?G[ae++]:-1}function Ce(){ce=1}function Me(){var $e;try{$e=1&ce,(ce>>=1)===0&&($e=1&(ce=Se()),ce=ce>>1|128)}catch(Xe){throw console.log("Probably problems on iOS7 with >>"),Xe}return $e}function Re($e){var Xe=0,ze=$e;try{for(;ze--;)Xe=Xe<<1|Me();$e&&(Xe=bitReverse[Xe]>>8-$e)}catch(qe){throw console.log("Probably problems on iOS7 with >>"),qe}return Xe}function Te(){re=0}function Ee($e){ie[re++]=$e,ee.push(String.fromCharCode($e)),re===32768&&(re=0)}function De(){this.b0=0,this.b1=0,this.jump=null,this.jumppos=-1}function Le(){for(;;){if(ye[_e]>=Q)return-1;if(Z[ye[_e]]===_e)return ye[_e]++;ye[_e]++}}function Ue(){var $e,Xe=fe[me];if(_e===17)return-1;if(me++,_e++,($e=Le())>=0)Xe.b0=$e;else if(Xe.b0=32768,Ue())return-1;if(($e=Le())>=0)Xe.b1=$e,Xe.jump=null;else if(Xe.b1=32768,Xe.jump=fe[me],Xe.jumppos=me,Ue())return-1;return _e--,0}function Ge($e,Xe,ze,qe){var et;for(fe=$e,me=0,Z=ze,Q=Xe,et=0;et<17;et++)ye[et]=0;return _e=0,Ue()?-1:0}function Ye($e){for(var Xe,ze,qe=0,et=$e[qe];;)if(Me()){if(!(32768&et.b1))return et.b1;for(et=et.jump,Xe=$e.length,ze=0;ze<Xe;ze++)if($e[ze]===et){qe=ze;break}}else{if(!(32768&et.b0))return et.b0;et=$e[++qe]}}function ke(){var $e,Xe,ze,qe,et,ot,St,it,lt,gt,kt,Jt,li,si,qt;do if($e=Me(),(Xe=Re(2))===0)for(Ce(),lt=Se(),lt|=Se()<<8,kt=Se(),65535&(lt^~(kt|=Se()<<8))&&jxg.A.debug(`BlockLen checksum mismatch
`);lt--;)Ee(Se());else if(Xe===1)for(;;)if((qe=bitReverse[Re(7)]>>1)>23?(qe=qe<<1|Me())>199?qe=(qe-=128)<<1|Me():(qe-=48)>143&&(qe+=136):qe+=256,qe<256)Ee(qe);else{if(qe===256)break;for(it=Re(cplext[qe-=257])+cplens[qe],qe=bitReverse[Re(5)]>>3,cpdext[qe]>8?(gt=Re(8),gt|=Re(cpdext[qe]-8)<<8):gt=Re(cpdext[qe]),gt+=cpdist[qe],qe=0;qe<it;qe++)Ee(ie[re-gt&32767])}else if(Xe===2){for(ot=new Array(320),li=257+Re(5),si=1+Re(5),qt=4+Re(4),qe=0;qe<19;qe++)ot[qe]=0;for(qe=0;qe<qt;qe++)ot[border[qe]]=Re(3);for(it=de.length,ze=0;ze<it;ze++)de[ze]=new De;if(Ge(de,19,ot))return Te(),1;for(Jt=li+si,ze=0;ze<Jt;)if((qe=Ye(de))<16)ot[ze++]=qe;else if(qe===16){if(ze+(qe=3+Re(2))>Jt)return Te(),1;for(et=ze?ot[ze-1]:0;qe--;)ot[ze++]=et}else{if(ze+(qe=qe===17?3+Re(3):11+Re(7))>Jt)return Te(),1;for(;qe--;)ot[ze++]=0}for(it=ue.length,ze=0;ze<it;ze++)ue[ze]=new De;if(Ge(ue,li,ot))return Te(),1;for(it=ue.length,ze=0;ze<it;ze++)de[ze]=new De;for(St=[],ze=li;ze<ot.length;ze++)St[ze-li]=ot[ze];if(Ge(de,si,St))return Te(),1;for(;;)if((qe=Ye(ue))>=256){if((qe-=256)===0)break;for(it=Re(cplext[qe-=1])+cplens[qe],qe=Ye(de),cpdext[qe]>8?(gt=Re(8),gt|=Re(cpdext[qe]-8)<<8):gt=Re(cpdext[qe]),gt+=cpdist[qe];it--;)Ee(ie[re-gt&32767])}else Ee(qe)}while(!$e);return Te(),Ce(),0}function Fe(){var $e,Xe,ze,qe,et,ot=[];try{if(ee=[],oe=!1,ot[0]=Se(),ot[1]=Se(),ot[0]===120&&ot[1]===218&&(ke(),ne[te]=[ee.join(""),"geonext.gxt"],te++),ot[0]===31&&ot[1]===139&&(Ve(),ne[te]=[ee.join(""),"file"],te++),ot[0]===80&&ot[1]===75){if(oe=!0,ot[2]=Se(),ot[3]=Se(),ot[2]===3&&ot[3]===4){for(ot[0]=Se(),ot[1]=Se(),_=Se(),_|=Se()<<8,et=Se(),et|=Se()<<8,Se(),Se(),Se(),Se(),Se(),Se()<<8,Se()<<16,Se()<<24,Se(),Se()<<8,Se()<<16,Se()<<24,Se(),Se()<<8,Se()<<16,Se()<<24,qe=Se(),qe|=Se()<<8,ze=Se(),ze|=Se()<<8,$e=0,be=[];qe--;)(Xe=Se())==="/"|Xe===":"?$e=0:$e<NAMEMAX-1&&(be[$e++]=String.fromCharCode(Xe));for(J||(J=be),$e=0;$e<ze;)Xe=Se(),$e++;if(et===8&&(ke(),ne[te]=new Array(2),ne[te][0]=ee.join(""),ne[te][1]=be.join(""),te++),Ve())return!1}return!0}}catch(St){throw console.log("Probably problems on iOS7 with >>"),St}return!1}function Ve(){var $e,Xe,ze=[];if(8&_&&(ze[0]=Se(),ze[1]=Se(),ze[2]=Se(),ze[3]=Se(),ze[0]===80&&ze[1]===75&&ze[2]===7&&ze[3]===8?(Se(),Se()<<8,Se()<<16,Se()<<24):ze[0]|ze[1]<<8|ze[2]<<16|ze[3]<<24,Se(),Se()<<8,Se()<<16,Se()<<24,Se(),Se()<<8,Se()<<16,Se()<<24),oe&&Fe())return!1;if(ze[0]=Se(),ze[0]!==8)return!0;if(_=Se(),Se(),Se(),Se(),Se(),Se(),Se(),4&_)for(ze[0]=Se(),ze[2]=Se(),_e=ze[0]+256*ze[1],$e=0;$e<_e;$e++)Se();if(8&_)for($e=0,be=[],Xe=Se();Xe;)Xe!=="7"&&Xe!==":"||($e=0),$e<NAMEMAX-1&&(be[$e++]=Xe),Xe=Se();if(16&_)for(Xe=Se();Xe;)Xe=Se();return 2&_&&(Se(),Se()),ke(),Se(),Se()<<8,Se()<<16,Se()<<24,Se(),Se()<<8,Se()<<16,Se()<<24,oe&&Fe(),!1}ye[0]=0,jxg.A.Util.Unzip.prototype.unzipFile=function($e){var Xe;for(this.unzip(),Xe=0;Xe<ne.length;Xe++)if(ne[Xe][1]===$e)return ne[Xe][0];return""},jxg.A.Util.Unzip.prototype.unzip=function(){return Fe(),ne}},jxg.A.Util,jxg.A.CA=function(G,_,J){this.node=G,this.createNode=_,this.parser=J},jxg.A.extend(jxg.A.CA.prototype,{findMapNode:function(G,_){var J,Z,Q;if(_.value==="op_assign"&&_.children[0].value===G)return _.children[1];if(_.children){for(Z=_.children.length,J=0;J<Z;++J)if((Q=this.findMapNode(G,_.children[J]))!==null)return Q}return null},setMath:function(G){var _,J;if((G.type!="node_op"||G.value!="op_add"&&G.value!="op_sub"&&G.value!="op_mul"&&G.value!="op_div"&&G.value!="op_neg"&&G.value!="op_execfun"&&G.value!="op_exp")&&G.type!="node_var"&&G.type!="node_const"||(G.isMath=!0),G.children)for(J=G.children.length,_=0;_<J;++_)this.setMath(G.children[_])},deriveElementary:function(G,_){var J,Z=G.children[0].value,Q=G.children[1];switch(Z){case"abs":J=this.createNode("node_op","op_div",Q[0],this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_mul",utils_type.A.deepCopy(Q[0]),utils_type.A.deepCopy(Q[0]))]));break;case"sqrt":J=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_mul",this.createNode("node_const",2),this.createNode(G.type,G.value,utils_type.A.deepCopy(G.children[0]),utils_type.A.deepCopy(G.children[1]))));break;case"sin":J=this.createNode("node_op","op_execfun",this.createNode("node_var","cos"),utils_type.A.deepCopy(Q));break;case"cos":J=this.createNode("node_op","op_neg",this.createNode("node_op","op_execfun",this.createNode("node_var","sin"),utils_type.A.deepCopy(Q)));break;case"tan":J=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","cos"),utils_type.A.deepCopy(Q)),this.createNode("node_const",2)));break;case"cot":J=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","sin"),utils_type.A.deepCopy(Q)),this.createNode("node_const",2))));break;case"exp":J=this.createNode(G.type,G.value,utils_type.A.deepCopy(G.children[0]),utils_type.A.deepCopy(G.children[1]));break;case"pow":J=this.createNode("node_op","op_mul",this.createNode("node_op","op_execfun",utils_type.A.deepCopy(G.children[0]),utils_type.A.deepCopy(G.children[1])),this.createNode("node_op","op_add",this.createNode("node_op","op_mul",this.derivative(G.children[1][0],_),this.createNode("node_op","op_div",utils_type.A.deepCopy(G.children[1][1]),utils_type.A.deepCopy(G.children[1][0]))),this.createNode("node_op","op_mul",this.derivative(G.children[1][1],_),this.createNode("node_op","op_execfun",this.createNode("node_var","log"),[utils_type.A.deepCopy(G.children[1][0])]))));break;case"log":case"ln":J=this.createNode("node_op","op_div",this.createNode("node_const",1),utils_type.A.deepCopy(Q[0]));break;case"log2":case"lb":case"ld":J=this.createNode("node_op","op_mul",this.createNode("node_op","op_div",this.createNode("node_const",1),utils_type.A.deepCopy(Q[0])),this.createNode("node_const",1.4426950408889634));break;case"log10":case"lg":J=this.createNode("node_op","op_mul",this.createNode("node_op","op_div",this.createNode("node_const",1),utils_type.A.deepCopy(Q[0])),this.createNode("node_const",.43429448190325176));break;case"asin":J=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",utils_type.A.deepCopy(Q[0]),utils_type.A.deepCopy(Q[0])))]));break;case"acos":J=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",utils_type.A.deepCopy(Q[0]),utils_type.A.deepCopy(Q[0])))])));break;case"atan":J=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_add",this.createNode("node_const",1),this.createNode("node_op","op_mul",utils_type.A.deepCopy(Q[0]),utils_type.A.deepCopy(Q[0]))));break;case"acot":J=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_add",this.createNode("node_const",1),this.createNode("node_op","op_mul",utils_type.A.deepCopy(Q[0]),utils_type.A.deepCopy(Q[0])))));break;case"sinh":J=this.createNode("node_op","op_execfun",this.createNode("node_var","cosh"),[utils_type.A.deepCopy(Q[0])]);break;case"cosh":J=this.createNode("node_op","op_execfun",this.createNode("node_var","sinh"),[utils_type.A.deepCopy(Q[0])]);break;case"tanh":J=this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","tanh"),[utils_type.A.deepCopy(Q[0])]),this.createNode("node_const",2)));break;case"asinh":J=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_add",this.createNode("node_op","op_mul",utils_type.A.deepCopy(Q[0]),utils_type.A.deepCopy(Q[0])),this.createNode("node_const",1))]));break;case"acosh":J=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_op","op_mul",utils_type.A.deepCopy(Q[0]),utils_type.A.deepCopy(Q[0])),this.createNode("node_const",1))]));break;case"atanh":J=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",utils_type.A.deepCopy(Q[0]),utils_type.A.deepCopy(Q[0]))));break;default:throw J=this.createNode("node_const",0),console.log('Derivative of "'+Z+'" not yet implemented'),new Error("Error("+this.line+"): ")}return J},derivative:function(G,_){var J;switch(G.type){case"node_op":switch(G.value){case"op_execfun":J=G.children[0].value=="pow"?this.deriveElementary(G,_):G.children[1].length===0?this.createNode("node_const",0):this.createNode("node_op","op_mul",this.deriveElementary(G,_),this.derivative(G.children[1][0],_));break;case"op_div":J=this.createNode("node_op","op_div",this.createNode("node_op","op_sub",this.createNode("node_op","op_mul",this.derivative(G.children[0],_),utils_type.A.deepCopy(G.children[1])),this.createNode("node_op","op_mul",utils_type.A.deepCopy(G.children[0]),this.derivative(G.children[1],_))),this.createNode("node_op","op_mul",utils_type.A.deepCopy(G.children[1]),utils_type.A.deepCopy(G.children[1])));break;case"op_mul":J=this.createNode("node_op","op_add",this.createNode("node_op","op_mul",utils_type.A.deepCopy(G.children[0]),this.derivative(G.children[1],_)),this.createNode("node_op","op_mul",this.derivative(G.children[0],_),utils_type.A.deepCopy(G.children[1])));break;case"op_neg":J=this.createNode("node_op","op_neg",this.derivative(G.children[0],_));break;case"op_add":case"op_sub":J=this.createNode("node_op",G.value,this.derivative(G.children[0],_),this.derivative(G.children[1],_));break;case"op_exp":J=this.createNode("node_op","op_mul",utils_type.A.deepCopy(G),this.createNode("node_op","op_add",this.createNode("node_op","op_mul",this.derivative(G.children[0],_),this.createNode("node_op","op_div",utils_type.A.deepCopy(G.children[1]),utils_type.A.deepCopy(G.children[0]))),this.createNode("node_op","op_mul",this.derivative(G.children[1],_),this.createNode("node_op","op_execfun",this.createNode("node_var","log"),[utils_type.A.deepCopy(G.children[0])]))))}break;case"node_var":J=G.value===_?this.createNode("node_const",1):this.createNode("node_const",0);break;case"node_const":J=this.createNode("node_const",0)}return J},expandDerivatives:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue;if(!G)return 0;for(this.line=G.line,this.col=G.col,Z=G.children.length,Q=0;Q<Z;++Q)if(G.children[Q]&&G.children[Q].type)G.children[Q]=this.expandDerivatives(G.children[Q],G,J);else if(utils_type.A.isArray(G.children[Q]))for(ee=0;ee<G.children[Q].length;++ee)G.children[Q][ee]&&G.children[Q][ee].type&&(G.children[Q][ee]=this.expandDerivatives(G.children[Q][ee],G,J));if(G.type==="node_op"&&G.value==="op_execfun"&&G.children[0]&&G.children[0].value==="D"){if(ue=!1,G.children[1][0].type=="node_var"&&(oe=G.children[1][0].value,(te=this.findMapNode(oe,J))!==null&&(ue=!0)),ue?(ae=te.children[0],se=G.children[1].length>=2?G.children[1][1].value:te.children[0][0],ne=te.children[1]):(ne=G.children[1][0],ae=["x"],se=G.children[1].length>=2?G.children[1][1].value:"x"),re=ne,(ce=G.children[1].length>=3?G.children[1][2].value:1)>=1)for(;ce>=1;)re=this.derivative(re,se),re=this.removeTrivialNodes(re),ce--;ie=_.type=="node_op"&&_.value=="op_assign"?this.createNode("node_op","op_map",ae,re):re,this.setMath(ie),G.type=ie.type,G.value=ie.value,ie.children.length>0&&(G.children[0]=ie.children[0]),ie.children.length>1&&(G.children[1]=ie.children[1])}return G},removeTrivialNodes:function(G){var _,J,Z,Q,ee;if(utils_type.A.isArray(G))for(J=G.length,_=0;_<J;++_)G[_]=this.removeTrivialNodes(G[_]);if(G.type!="node_op"||!G.children)return G;for(J=G.children.length,_=0;_<J;++_){this.mayNotBeSimplified=!1;do G.children[_]=this.removeTrivialNodes(G.children[_]);while(this.mayNotBeSimplified)}switch(G.value){case"op_map":if(Z=G.children[0],(Q=G.children[1]).type=="node_var"){for(_=0;_<Z.length;++_)if(Z[_]==Q.value){Q.isMath=!0;break}}break;case"op_add":if(Z=G.children[0],Q=G.children[1],Z.type=="node_const"&&Z.value===0)return Q;if(Q.type=="node_const"&&Q.value===0)return Z;if(Z.type=="node_const"&&Q.type=="node_const")return Z.value+=Q.value,Z;break;case"op_mul":if(Z=G.children[0],Q=G.children[1],Z.type=="node_const"&&Z.value==1)return Q;if(Q.type=="node_const"&&Q.value==1||Z.type=="node_const"&&Z.value===0)return Z;if(Q.type=="node_const"&&Q.value===0||Q.type=="node_const"&&Q.value===0)return Q;if(Z.type=="node_op"&&Z.value=="op_neg"&&Q.type=="node_op"&&Q.value=="op_neg")return G.children=[Z.children[0],Q.children[0]],this.mayNotBeSimplified=!0,G;if(Z.value=="op_neg"&&Q.value!="op_neg")return G.type="node_op",G.value="op_neg",G.children=[this.createNode("node_op","op_mul",Z.children[0],Q)],this.mayNotBeSimplified=!0,G;if(Z.value!="op_neg"&&Q.value=="op_neg")return G.type="node_op",G.value="op_neg",G.children=[this.createNode("node_op","op_mul",Z,Q.children[0])],this.mayNotBeSimplified=!0,G;if(Z.value=="op_div"&&Z.children[0].type=="node_const"&&Z.children[0].value==1)return G.type="node_op",G.value="op_div",G.children=[Q,Z.children[1]],this.mayNotBeSimplified=!0,G;if(Q.value=="op_div"&&Q.children[0].type=="node_const"&&Q.children[0].value==1)return G.type="node_op",G.value="op_div",G.children=[Z,Q.children[1]],this.mayNotBeSimplified=!0,G;if(Z.type!="node_const"&&Q.type=="node_const")return G.children=[Q,Z],this.mayNotBeSimplified=!0,G;if(Z.type!="node_const"&&Q.type=="node_op"&&Q.value=="op_neg"&&Q.children[0].type=="node_const")return G.children=[Q,Z],this.mayNotBeSimplified=!0,G;if(Z.type=="node_op"&&Z.value!="op_execfun"&&(Q.type=="node_var"||Q.type=="node_op"&&Q.value=="op_execfun"))return G.children=[Q,Z],this.mayNotBeSimplified=!0,G;if(Z.type!="node_op"&&Q.type=="node_op"&&Q.value=="op_neg"&&Q.children[0].type=="node_var")return G.children=[Q,Z],this.mayNotBeSimplified=!0,G;if(Z.type!="node_const"&&Q.type=="node_op"&&(Q.value=="op_mul"||Q.value=="op_div")&&Q.children[0].type=="node_const")return ee=Q.children[0],Q.children[0]=Z,G.children=[ee,Q],this.mayNotBeSimplified=!0,G;if(Q.type!="node_const"&&Z.type=="node_op"&&Z.value=="op_mul"&&Z.children[0].type=="node_const")return G.children=[Z.children[0],this.createNode("node_op","op_mul",Z.children[1],Q)],this.mayNotBeSimplified=!0,G;if(Z.type=="node_const"&&Q.type=="node_const")return Z.value*=Q.value,Z;if(Z.type=="node_const"&&Q.type=="node_op"&&(Q.value=="op_mul"||Q.value=="op_div")&&Q.children[0].type=="node_const")return Q.children[0].value*=Z.value,Q;if(Z.hash=this.parser.compile(Z),Q.hash=this.parser.compile(Q),Z.hash===Q.hash)return G.value="op_exp",G.children[1]=this.createNode("node_const",2),G;if(Z.type=="node_const"&&Q.type=="node_op"&&(Q.value=="op_mul"||Q.value=="op_div")&&Q.children[0].type=="node_const")return Q.children[0].value*=Z.value,Q;if(Q.type=="node_op"&&Q.value=="op_exp"&&(Z.hash||(Z.hash=this.parser.compile(Z)),Q.children[0].hash||(Q.children[0].hash=this.parser.compile(Q.children[0])),Z.hash===Q.children[0].hash))return Q.children[1]=this.createNode("node_op","op_add",Q.children[1],this.createNode("node_const",1)),this.mayNotBeSimplified=!0,Q;if(Z.type=="node_op"&&Z.value=="op_exp"&&Q.type=="node_op"&&Q.value=="op_exp"&&(Z.children[0].hash=this.parser.compile(Z.children[0]),Q.children[0].hash=this.parser.compile(Q.children[0]),Z.children[0].hash===Q.children[0].hash))return Z.children[1]=this.createNode("node_op","op_add",Z.children[1],Q.children[1]),this.mayNotBeSimplified=!0,Z;break;case"op_sub":if(Z=G.children[0],Q=G.children[1],Z.type=="node_const"&&Z.value===0)return G.value="op_neg",G.children[0]=Q,G;if(Q.type=="node_const"&&Q.value===0)return Z;if(Z.type=="node_const"&&Q.type=="node_const"&&Z.value==Q.value)return this.createNode("node_const",0);if(Z.type=="node_var"&&Q.type=="node_var"&&Z.value==Q.value)return this.createNode("node_const",0);if(Z.type=="node_const"&&Q.type=="node_const")return Z.value-=Q.value,Z;if(Z.type=="node_op"&&Z.value=="op_mul"&&Q.type=="node_op"&&Q.value=="op_mul"&&(Z.children[1].hash=this.parser.compile(Z.children[1]),Q.children[1].hash=this.parser.compile(Q.children[1]),Z.children[1].hash===Q.children[1].hash))return G.value="op_mul",G.children=[this.createNode("node_op","op_sub",Z.children[0],Q.children[0]),Z.children[1]],this.mayNotBeSimplified=!0,G;if(Z.type=="node_op"&&Z.value=="op_mul"&&(Z.children[1].hash=this.parser.compile(Z.children[1]),Q.hash=this.parser.compile(Q),Z.children[1].hash===Q.hash))return G.value="op_mul",G.children=[this.createNode("node_op","op_sub",Z.children[0],this.createNode("node_const",1)),Q],this.mayNotBeSimplified=!0,G;if(Q.type=="node_op"&&Q.value=="op_mul"&&(Q.children[1].hash=this.parser.compile(Q.children[1]),Z.hash=this.parser.compile(Z),Q.children[1].hash===Z.hash))return G.value="op_mul",G.children=[this.createNode("node_op","op_sub",this.createNode("node_const",1),Q.children[0]),Z],this.mayNotBeSimplified=!0,G;break;case"op_neg":if((Z=G.children[0]).type=="node_const"&&Z.value===0)return Z;if(Z.type=="node_op"&&Z.value=="op_neg")return Z.children[0];break;case"op_div":if(Z=G.children[0],Q=G.children[1],Z.type=="node_const"&&Q.type=="node_const"&&Z.value==Q.value&&Z.value!==0)return Z.value=1,Z;if(Z.type=="node_const"&&Z.value===0&&Q.type=="node_const"&&Q.value!==0)return Z.value=0,Z;if(Z.type=="node_const"&&Z.value===0&&(Q.type=="node_op"||Q.type=="node_var"))return G.type="node_const",G.value=0,G;if(Z.type=="node_var"&&Q.type=="node_var"&&Z.value==Q.value)return this.createNode("node_const",1);if(Z.type=="node_const"&&Z.value!==0&&Q.type=="node_const"&&Q.value===0)return Z.value>0?Z.value=1/0:Z.value=-1/0,Z;if(Z.type=="node_op"&&Z.value=="op_neg"&&Q.type=="node_op"&&Q.value=="op_neg")return G.children=[Z.children[0],Q.children[0]],this.mayNotBeSimplified=!0,G;if(Z.value=="op_neg"&&Q.value!="op_neg")return G.type="node_op",G.value="op_neg",G.children=[this.createNode("node_op","op_div",Z.children[0],Q)],this.mayNotBeSimplified=!0,G;if(Z.value!="op_neg"&&Q.value=="op_neg")return G.type="node_op",G.value="op_neg",G.children=[this.createNode("node_op","op_div",Z,Q.children[0])],this.mayNotBeSimplified=!0,G;if(Z.type=="node_op"&&Z.value=="op_exp"&&(Q.hash||(Q.hash=this.parser.compile(Q)),Z.children[0].hash||(Z.children[0].hash=this.parser.compile(Z.children[0])),Q.hash===Z.children[0].hash))return Z.children[1]=this.createNode("node_op","op_sub",Z.children[1],this.createNode("node_const",1)),this.mayNotBeSimplified=!0,Z;if(Q.type!="node_const"&&Z.type=="node_op"&&Z.value=="op_mul"&&Z.children[0].type=="node_const")return G.value="op_mul",G.children=[Z.children[0],this.createNode("node_op","op_div",Z.children[1],Q)],this.mayNotBeSimplified=!0,G;if(Z.type=="node_op"&&Z.value=="op_exp"&&Q.type=="node_op"&&Q.value=="op_exp"&&(Z.children[0].hash=this.parser.compile(Z.children[0]),Q.children[0].hash=this.parser.compile(Q.children[0]),Z.children[0].hash===Q.children[0].hash))return Z.children[1]=this.createNode("node_op","op_sub",Z.children[1],Q.children[1]),this.mayNotBeSimplified=!0,Z;break;case"op_exp":if(Z=G.children[0],(Q=G.children[1]).type=="node_const"&&Q.value===0)return Q.value=1,Q;if(Q.type=="node_const"&&Q.value==1||Z.type=="node_const"&&Z.value==1||Z.type=="node_const"&&Z.value===0&&Q.type=="node_const"&&Q.value!==0)return Z;if(Z.type=="node_op"&&Z.value=="op_exp")return G.children=[Z.children[0],this.createNode("node_op","op_mul",Z.children[1],Q)],G}switch(G.value){case"op_add":if(Z=G.children[0],Q=G.children[1],Z.type=="node_const"&&Q.type=="node_const"&&Z.value==Q.value)return Z.value+=Q.value,Z;if(Z.type=="node_var"&&Q.type=="node_var"&&Z.value==Q.value)return G.children[0]=this.createNode("node_const",2),G.value="op_mul",G;if(Z.type=="node_op"&&Z.value=="op_neg")return G.value="op_sub",G.children[0]=Q,G.children[1]=Z.children[0],this.mayNotBeSimplified=!0,G;if(Q.type=="node_op"&&Q.value=="op_neg")return G.value="op_sub",G.children[1]=Q.children[0],this.mayNotBeSimplified=!0,G;if(Z.type=="node_op"&&Z.value=="op_mul"&&Q.type=="node_op"&&Q.value=="op_mul"&&(Z.children[1].hash=this.parser.compile(Z.children[1]),Q.children[1].hash=this.parser.compile(Q.children[1]),Z.children[1].hash===Q.children[1].hash))return G.value="op_mul",G.children=[this.createNode("node_op","op_add",Z.children[0],Q.children[0]),Z.children[1]],this.mayNotBeSimplified=!0,G;if(Z.type=="node_op"&&Z.value=="op_mul"&&(Z.children[1].hash=this.parser.compile(Z.children[1]),Q.hash=this.parser.compile(Q),Z.children[1].hash===Q.hash))return G.value="op_mul",G.children=[this.createNode("node_op","op_add",Z.children[0],this.createNode("node_const",1)),Q],this.mayNotBeSimplified=!0,G;if(Q.type=="node_op"&&Q.value=="op_mul"&&(Q.children[1].hash=this.parser.compile(Q.children[1]),Z.hash=this.parser.compile(Z),Q.children[1].hash===Z.hash))return G.value="op_mul",G.children=[this.createNode("node_op","op_add",this.createNode("node_const",1),Q.children[0]),Z],this.mayNotBeSimplified=!0,G;break;case"op_sub":if(Z=G.children[0],(Q=G.children[1]).type=="node_op"&&Q.value=="op_neg")return G.value="op_add",G.children[1]=Q.children[0],this.mayNotBeSimplified=!0,G;break;case"op_execfun":return this.simplifyElementary(G)}return G},simplifyElementary:function(G){var _=G.children[0].value,J=G.children[1];if(J.length==0)return G;switch(_){case"sin":case"tan":if(J[0].type=="node_const"&&J[0].value===0||J[0].type=="node_var"&&J[0].value=="PI"||J[0].type=="node_op"&&J[0].value=="op_mul"&&J[0].children[0].type=="node_const"&&J[0].children[0].value%1==0&&J[0].children[1].type=="node_var"&&J[0].children[1].value=="PI")return G.type="node_const",G.value=0,G;break;case"cos":if(J[0].type=="node_const"&&J[0].value===0)return G.type="node_const",G.value=1,G;if(J[0].type=="node_var"&&J[0].value=="PI")return G.type="node_op",G.value="op_neg",G.children=[this.createNode("node_const",1)],G;break;case"exp":if(J[0].type=="node_const"&&J[0].value===0)return G.type="node_const",G.value=1,G;break;case"pow":if(J[1].type=="node_const"&&J[1].value===0)return G.type="node_const",G.value=1,G}return G}}),jxg.A.CA,jxg.A.Dump={addMarkers:function(G,_,J){var Z,Q,ee;for(Z in utils_type.A.isArray(_)||(_=[_]),utils_type.A.isArray(J)||(J=[J]),Q=Math.min(_.length,J.length),_.length=Q,J.length=Q,G.objects)if(G.objects.hasOwnProperty(Z))for(ee=0;ee<Q;ee++)G.objects[Z][_[ee]]=J[ee]},deleteMarkers:function(G,_){var J,Z,Q;for(J in utils_type.A.isArray(_)||(_=[_]),Z=_.length,_.length=Z,G.objects)if(G.objects.hasOwnProperty(J))for(Q=0;Q<Z;Q++)delete G.objects[J][_[Q]]},str:function(G){return typeof G=="string"&&G.slice(0,7)!=="function"&&(G='"'+G+'"'),G},minimizeObject:function(G,_){var J,Z,Q,ee={},te=utils_type.A.deepCopy(G),ne=[];for(Q=1;Q<arguments.length;Q++)ne.push(arguments[Q]);for(ee=utils_type.A.deepCopy(ee,jxg.A.Options.elements,!0),Q=ne.length;Q>0;Q--)ee=utils_type.A.deepCopy(ee,ne[Q-1],!0);for(J in ee)ee.hasOwnProperty(J)&&(Z=J.toLowerCase(),ee[J]!==null&&typeof ee[J]!="object"&&ee[J]===te[Z]&&delete te[Z]);return te},prepareAttributes:function(G,_){var J,Z;for(Z in J=this.minimizeObject(_.getAttributes(),jxg.A.Options[_.elType]),_.subs)_.subs.hasOwnProperty(Z)&&(J[Z]=this.minimizeObject(_.subs[Z].getAttributes(),jxg.A.Options[_.elType][Z],jxg.A.Options[_.subs[Z].elType]),J[Z].id=_.subs[Z].id,J[Z].name=_.subs[Z].name);return J.id=_.id,J.name=_.name,J},setBoundingBox:function(G,_,J){return G.push({obj:J,method:"setBoundingBox",params:[_.getBoundingBox(),_.keepaspectratio]}),G},dump:function(G){var _,J,Z,Q,ee=[],te=[],ne=G.objectsList.length;for(this.addMarkers(G,"dumped",!1),_=0;_<ne;_++)if(Z={},!(J=G.objectsList[_]).dumped&&J.dump){for(Z.type=J.getType(),Z.parents=J.getParents().slice(),Z.type==="point"&&Z.parents[0]===1&&(Z.parents=Z.parents.slice(1)),Q=0;Q<Z.parents.length;Q++)utils_type.A.isString(Z.parents[Q])&&Z.parents[Q][0]!=="'"&&Z.parents[Q][0]!=='"'?Z.parents[Q]='"'+Z.parents[Q]+'"':utils_type.A.isArray(Z.parents[Q])&&(Z.parents[Q]="["+Z.parents[Q].toString()+"]");Z.attributes=this.prepareAttributes(G,J),Z.type==="glider"&&J.onPolygon&&ee.push({obj:J.id,prop:"onPolygon",val:!0}),te.push(Z)}return this.deleteMarkers(G,"dumped"),{elements:te,props:ee,methods:[]}},arrayToParamStr:function(G,_){var J,Z=[];for(J=0;J<G.length;J++)Z.push(_.call(this,G[J]));return Z.join(", ")},toJCAN:function(G){var _,J,Z;switch(typeof G){case"object":if(G){if(J=[],utils_type.A.isArray(G)){for(_=0;_<G.length;_++)J.push(this.toJCAN(G[_]));return"["+J.join(",")+"]"}for(Z in G)G.hasOwnProperty(Z)&&J.push(Z+": "+this.toJCAN(G[Z]));return"<<"+J.join(", ")+">> "}return"null";case"string":return"'"+G.replace(/\\/g,"\\\\").replace(/(["'])/g,"\\$1")+"'";case"number":case"boolean":return G.toString();case"null":return"null"}},toJessie:function(G){var _,J,Z,Q=this.dump(G),ee=[];for(Q.methods=this.setBoundingBox(Q.methods,G,"$board"),J=Q.elements,_=0;_<J.length;_++)J[_].attributes.name.length>0&&ee.push("// "+J[_].attributes.name),ee.push("s"+_+" = "+J[_].type+"("+J[_].parents.join(", ")+") "+this.toJCAN(J[_].attributes).replace(/\n/,"\\n")+";"),J[_].type==="axis"&&(Z=J[_].attributes.id,G.objects[Z].defaultTicks===null&&ee.push("s"+_+".removeAllTicks();")),ee.push("");for(_=0;_<Q.methods.length;_++)ee.push(Q.methods[_].obj+"."+Q.methods[_].method+"("+this.arrayToParamStr(Q.methods[_].params,this.toJCAN)+");"),ee.push("");for(_=0;_<Q.props.length;_++)ee.push(Q.props[_].obj+"."+Q.props[_].prop+" = "+this.toJCAN(Q.props[_].val)+";"),ee.push("");return ee.join(`
`)},toJavaScript:function(G){var _,J,Z,Q=this.dump(G),ee=[];for(Q.methods=this.setBoundingBox(Q.methods,G,"board"),J=Q.elements,_=0;_<J.length;_++)ee.push('board.create("'+J[_].type+'", ['+J[_].parents.join(", ")+"], "+utils_type.A.toJSON(J[_].attributes)+");"),J[_].type==="axis"&&(Z=J[_].attributes.id,G.objects[Z].defaultTicks===null&&ee.push('board.objects["'+Z+'"].removeTicks(board.objects["'+Z+'"].defaultTicks);'));for(_=0;_<Q.methods.length;_++)ee.push(Q.methods[_].obj+"."+Q.methods[_].method+"("+this.arrayToParamStr(Q.methods[_].params,utils_type.A.toJSON)+");"),ee.push("");for(_=0;_<Q.props.length;_++)ee.push(Q.props[_].obj+"."+Q.props[_].prop+" = "+utils_type.A.toJSON(Q.props[_].val)+";"),ee.push("");return ee.join(`
`)}},jxg.A.Dump,jxg.A.createComb=function(G,_,J){var Z,Q,ee,te,ne;if(_.length!==2)throw ne=_.map(function(ie){return"'"+typeof ie+"'"}),new Error("JSXGraph: Can't create comb with parent types "+ne.join(", ")+`.
Possible parent types: [point,point], [[x1,y1],[x2,y2]]`);if(utils_type.A.isArray(_[0])&&_[0].length>1)te=utils_type.A.copyAttributes(J,G.options,"comb","point1"),Z=G.create("point",_[0],te);else if(utils_type.A.isString(_[0])||utils_type.A.isPoint(_[0]))Z=G.select(_[0]);else if(utils_type.A.isFunction(_[0])&&utils_type.A.isPoint(_[0]()))Z=_[0]();else{if(!(utils_type.A.isFunction(_[0])&&_[0]().length&&_[0]().length>=2))throw new Error("JSXGraph: Can't create comb with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]]`);te=utils_type.A.copyAttributes(J,G.options,"comb","point1"),Z=jxg.A.createPoint(G,_[0](),te)}if(utils_type.A.isArray(_[1])&&_[1].length>1)te=utils_type.A.copyAttributes(J,G.options,"comb","point2"),Q=G.create("point",_[1],te);else if(utils_type.A.isString(_[1])||utils_type.A.isPoint(_[1]))Q=G.select(_[1]);else if(utils_type.A.isFunction(_[1])&&utils_type.A.isPoint(_[1]()))Q=_[1]();else{if(!(utils_type.A.isFunction(_[1])&&_[1]().length&&_[1]().length>=2))throw new Error("JSXGraph: Can't create comb with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]]`);te=utils_type.A.copyAttributes(J,G.options,"comb","point2"),Q=jxg.A.createPoint(G,_[1](),te)}return te=utils_type.A.copyAttributes(J,G.options,"comb"),(ee=G.create("curve",[[0],[0]],te)).updateDataArray=function(){var ie,re,oe,se,ae,ce,ue,de,me,fe,_e=0,ye=Z.Dist(Q),be=Z,Se=Q;for(de=ee.evalVisProp("frequency"),me=-ee.evalVisProp("angle"),fe=ee.evalVisProp("width"),ee.evalVisProp("reverse")&&(be=Q,Se=Z,me=-me),ie=Math.cos(me),re=Math.sin(me),oe=(Se.X()-be.X())/ye,se=(Se.Y()-be.Y())/ye,ie*=fe/Math.abs(re),re*=fe/Math.abs(re),this.dataX=[],this.dataY=[];_e<ye;)ae=be.X()+oe*_e,ce=be.Y()+se*_e,re*=ue=Math.min(ie,ye-_e)/Math.abs(ie),ie*=ue,this.dataX.push(ae),this.dataY.push(ce),this.dataX.push(ae+oe*ie+se*re),this.dataY.push(ce-oe*re+se*ie),this.dataX.push(NaN),this.dataY.push(NaN),_e+=de},ee},jxg.A.registerElement("comb",jxg.A.createComb);var priv={removeSlopeTriangle:function(){polygon.prototype.remove.call(this),this.board.removeObject(this.toppoint),this.board.removeObject(this.glider),this.board.removeObject(this.baseline),this.board.removeObject(this.basepoint),this.board.removeObject(this.label),this._isPrivateTangent&&this.board.removeObject(this.tangent)},Value:function(){return this.tangent.getSlope()},Direction:function(){return this.tangent.Direction()}};jxg.A.createSlopeTriangle=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae=!1;if(_.length===1&&_[0].type===constants.A.OBJECT_TYPE_TANGENT)Q=_[0],ee=Q.glider;else if(_.length===1&&_[0].type===constants.A.OBJECT_TYPE_GLIDER)ee=_[0],se=utils_type.A.copyAttributes(J,G.options,"slopetriangle","tangent"),Q=G.create("tangent",[ee],se),ae=!0;else{if(_.length!==2||_[0].elementClass!==constants.A.OBJECT_CLASS_LINE||!utils_type.A.isPoint(_[1]))throw new Error("JSXGraph: Can't create slope triangle with parent types '"+typeof _[0]+"'.");Q=_[0],ee=_[1]}return se=utils_type.A.copyAttributes(J,G.options,"slopetriangle","basepoint"),re=G.create("point",[function(){return[ee.X()+1,ee.Y()]}],se),se=utils_type.A.copyAttributes(J,G.options,"slopetriangle","baseline"),ie=G.create("line",[ee,re],se),se=utils_type.A.copyAttributes(J,G.options,"slopetriangle","glider"),te=G.create("glider",[ee.X()+1,ee.Y(),ie],se),se=utils_type.A.copyAttributes(J,G.options,"slopetriangle","toppoint"),ne=G.create("point",[function(){return[te.X(),te.Y()+(te.X()-ee.X())*Q.getSlope()]}],se),se=utils_type.A.copyAttributes(J,G.options,"slopetriangle"),(Z=G.create("polygon",[ee,te,ne],se)).Value=priv.Value,Z.Direction=priv.Direction,Z.tangent=Q,Z._isPrivateTangent=ae,Z.borders[2].setArrow(!1,!1),se=utils_type.A.copyAttributes(J,G.options,"slopetriangle","label"),(se=utils_type.A.copyAttributes(se,G.options,"label")).isLabel=!0,se.anchor=Z.borders[1],se.priv=Z.borders[1].visProp.priv,se.id=Z.borders[1].id+"Label",(oe=G.create("text",[0,0,function(){return""}],se)).needsUpdate=!0,oe.dump=!1,Z.borders[1].label=oe,Z.borders[1].hasLabel=!0,Z.borders[1].visProp.withlabel=!0,oe._setText(function(){var ce=oe.evalVisProp("digits");return oe.useLocale()?oe.formatNumberLocale(Z.Value(),ce):utils_type.A.toFixed(Z.Value(),ce)}),oe.fullUpdate(),Z.glider=te,Z.basepoint=re,Z.baseline=ie,Z.toppoint=ne,Z.label=oe,Z.subs={glider:te,basePoint:re,baseLine:ie,topPoint:ne,label:oe},Z.inherits.push(te,re,ie,ne,oe),Z.methodMap=jxg.A.deepCopy(Z.methodMap,{tangent:"tangent",glider:"glider",basepoint:"basepoint",baseline:"baseline",toppoint:"toppoint",label:"label",Value:"Value",V:"Value",Direction:"Direction"}),Z.remove=priv.removeSlopeTriangle,Z},jxg.A.registerElement("slopetriangle",jxg.A.createSlopeTriangle);var checkbox_priv={CheckboxChangeEventHandler:function(){this._value=this.rendNodeCheckbox.checked,this.board.update()}};jxg.A.createCheckbox=function(G,_,J){var Z,Q,ee=utils_type.A.copyAttributes(J,G.options,"checkbox");return Q=[_[0],_[1],'<span style="display:inline"><input type="checkbox" /><label for=""></label></span>'],(Z=G.create("text",Q,ee)).type=utils_type.A.OBJECT_TYPE_CHECKBOX,Z.rendNodeCheckbox=Z.rendNode.childNodes[0].childNodes[0],Z.rendNodeLabel=Z.rendNode.childNodes[0].childNodes[1],Z.rendNodeTag=Z.rendNodeCheckbox,Z.rendNodeTag.disabled=!!ee.disabled,Z.rendNodeCheckbox.id=Z.rendNode.id+"_checkbox",Z.rendNodeLabel.id=Z.rendNode.id+"_label",Z.rendNodeLabel.setAttribute("for",Z.rendNodeCheckbox.id),Z.setText(_[2]),Z.visPropOld.fontsize="0px",G.renderer.updateTextStyle(Z,!1),Z.rendNodeCheckbox.checked=ee.checked,Z._value=ee.checked,Z.Value=function(){return this._value},Z.update=function(){return this.needsUpdate&&(jxg.A.Text.prototype.update.call(this),this._value=this.rendNodeCheckbox.checked),this},env.A.addEvent(Z.rendNodeCheckbox,"change",checkbox_priv.CheckboxChangeEventHandler,Z),Z},jxg.A.registerElement("checkbox",jxg.A.createCheckbox);var input_priv={InputInputEventHandler:function(G){this._value=this.rendNodeInput.value,this.board.update()}};jxg.A.createInput=function(G,_,J){var Z,Q,ee=utils_type.A.copyAttributes(J,G.options,"input");return Q=[_[0],_[1],'<span style="display:inline; white-space:nowrap; padding:0px;"><label></label><input type="text" maxlength="'+ee.maxlength+'" style="width:100%" /></span>'],(Z=G.create("text",Q,ee)).type=utils_type.A.OBJECT_TYPE_INPUT,Z.rendNodeLabel=Z.rendNode.childNodes[0].childNodes[0],Z.rendNodeInput=Z.rendNode.childNodes[0].childNodes[1],Z.rendNodeInput.value=_[2],Z.rendNodeTag=Z.rendNodeInput,Z.rendNodeTag.disabled=!!ee.disabled,Z.rendNodeLabel.id=Z.rendNode.id+"_label",Z.rendNodeInput.id=Z.rendNode.id+"_input",Z.rendNodeInput.setAttribute("aria-labelledby",Z.rendNodeLabel.id),Z.setText(_[3]),Z._value=_[2],Z.rendNodeInput.addEventListener("keydown",te=>{te.key!=="ArrowLeft"&&te.key!=="ArrowRight"||te.stopPropagation()}),Z.update=function(){return this.needsUpdate&&(jxg.A.Text.prototype.update.call(this),this._value=this.rendNodeInput.value),this},Z.Value=function(){return this._value},Z.set=function(te){return this._value=te,this.rendNodeInput.value=te,this},env.A.addEvent(Z.rendNodeInput,"input",input_priv.InputInputEventHandler,Z),env.A.addEvent(Z.rendNodeInput,"mousedown",function(te){utils_type.A.exists(te.stopPropagation)&&te.stopPropagation()},Z),env.A.addEvent(Z.rendNodeInput,"touchstart",function(te){utils_type.A.exists(te.stopPropagation)&&te.stopPropagation()},Z),env.A.addEvent(Z.rendNodeInput,"pointerdown",function(te){utils_type.A.exists(te.stopPropagation)&&te.stopPropagation()},Z),Z.visPropOld.fontsize="0px",G.renderer.updateTextStyle(Z,!1),Z},jxg.A.registerElement("input",jxg.A.createInput);var button_priv={ButtonClickEventHandler:function(){this._handler&&this._handler(),this.board.update()}};jxg.A.createButton=function(G,_,J){var Z,Q,ee=utils_type.A.copyAttributes(J,G.options,"button");return Q=[_[0],_[1],'<button type="button" style="width:100%; height:100%;" tabindex="0"></button>'],(Z=G.create("text",Q,ee)).type=utils_type.A.OBJECT_TYPE_BUTTON,Z.rendNodeButton=Z.rendNode.childNodes[0],Z.rendNodeButton.id=Z.rendNode.id+"_button",Z.rendNodeTag=Z.rendNodeButton,Z.rendNodeTag.disabled=!!ee.disabled,Z.setText(_[2]),Z.visPropOld.fontsize="0px",G.renderer.updateTextStyle(Z,!1),_[3]&&(utils_type.A.isString(_[3])?(Z._jc=new jxg.A.JessieCode,Z._jc.use(G),Z._handler=function(){Z._jc.parse(_[3])}):Z._handler=_[3]),env.A.addEvent(Z.rendNodeButton,"click",button_priv.ButtonClickEventHandler,Z),env.A.addEvent(Z.rendNodeButton,"mousedown",function(te){utils_type.A.exists(te.stopPropagation)&&te.stopPropagation()},Z),env.A.addEvent(Z.rendNodeButton,"touchstart",function(te){utils_type.A.exists(te.stopPropagation)&&te.stopPropagation()},Z),env.A.addEvent(Z.rendNodeButton,"pointerdown",function(te){utils_type.A.exists(te.stopPropagation)&&te.stopPropagation()},Z),Z},jxg.A.registerElement("button",jxg.A.createButton),jxg.A.createVectorField=function(G,_,J){var Z,Q;if(!(_.length>=3&&(utils_type.A.isArray(_[0])||utils_type.A.isFunction(_[0])||utils_type.A.isString(_[0]))&&utils_type.A.isArray(_[1])&&_[1].length===3&&utils_type.A.isArray(_[2])&&_[2].length===3))throw new Error("JSXGraph: Can't create vector field with parent types '"+typeof _[0]+"', '"+typeof _[1]+"', '"+typeof _[2]+"'.");return Q=utils_type.A.copyAttributes(J,G.options,"vectorfield"),(Z=G.create("curve",[[],[]],Q)).elType="vectorfield",Z.setF=function(ee,te){var ne,ie;return utils_type.A.isArray(ee)?(ne=utils_type.A.createFunction(ee[0],this.board,te),ie=utils_type.A.createFunction(ee[1],this.board,te),this.F=function(re,oe){return[ne(re,oe),ie(re,oe)]}):this.F=utils_type.A.createFunction(ee,Z.board,te),this},Z.setF(_[0],"x, y"),Z.xData=_[1],Z.yData=_[2],Z.updateDataArray=function(){var ee,te,ne,ie,re,oe,se,ae,ce,ue,de,me,fe=this.evalVisProp("scale"),_e=utils_type.A.evaluate(this.xData[0]),ye=utils_type.A.evaluate(this.xData[1]),be=(utils_type.A.evaluate(this.xData[2])-_e)/ye,Se=utils_type.A.evaluate(this.yData[0]),Ce=utils_type.A.evaluate(this.yData[1]),Me=(utils_type.A.evaluate(this.yData[2])-Se)/Ce,Re=this.evalVisProp("arrowhead.enabled");for(Re&&(ue=(ce=this.evalVisProp("arrowhead.size"))/G.unitX,de=ce/G.unitY,me=this.evalVisProp("arrowhead.angle")),this.dataX=[],this.dataY=[],ne=0,ee=_e;ne<=ye;ee+=be,ne++)for(ie=0,te=Se;ie<=Ce;te+=Me,ie++)(re=this.F(ee,te))[0]*=fe,re[1]*=fe,utils_type.A.concat(this.dataX,[ee,ee+re[0],NaN]),utils_type.A.concat(this.dataY,[te,te+re[1],NaN]),Re&&Math.abs(re[0])+Math.abs(re[1])>0&&(se=(oe=Math.atan2(re[1],re[0]))+me,ae=oe-me,utils_type.A.concat(this.dataX,[ee+re[0]-Math.cos(se)*ue,ee+re[0],ee+re[0]-Math.cos(ae)*ue,NaN]),utils_type.A.concat(this.dataY,[te+re[1]-Math.sin(se)*de,te+re[1],te+re[1]-Math.sin(ae)*de,NaN]))},Z.methodMap=utils_type.A.deepCopy(Z.methodMap,{setF:"setF"}),Z},jxg.A.registerElement("vectorfield",jxg.A.createVectorField),jxg.A.createSlopeField=function(G,_,J){var Z,Q,ee;if(!(_.length>=3&&(utils_type.A.isFunction(_[0])||utils_type.A.isString(_[0]))&&utils_type.A.isArray(_[1])&&_[1].length===3&&utils_type.A.isArray(_[2])&&_[2].length===3))throw new Error("JSXGraph: Can't create slope field with parent types '"+typeof _[0]+"', '"+typeof _[1]+"', '"+typeof _[2]+"'.");return Q=utils_type.A.createFunction(_[0],G,"x, y"),_[0]=function(te,ne){var ie=Q(te,ne),re=Math.sqrt(1+ie*ie);return[1/re,ie/re]},ee=utils_type.A.copyAttributes(J,G.options,"slopefield"),(Z=G.create("vectorfield",_,ee)).elType="slopefield",Z.setF=function(te,ne){var ie=utils_type.A.createFunction(te,Z.board,ne);this.F=function(re,oe){var se=ie(re,oe),ae=Math.sqrt(1+se*se);return[1/ae,se/ae]}},Z.methodMap=utils_type.A.deepCopy(Z.methodMap,{setF:"setF"}),Z},jxg.A.registerElement("slopefield",jxg.A.createSlopeField),jxg.A.createSmartLabel=function(G,_,J){var Z,Q,ee,te,ne,ie;if(_.length===0||[constants.A.OBJECT_CLASS_POINT,constants.A.OBJECT_CLASS_LINE,constants.A.OBJECT_CLASS_CIRCLE].indexOf(_[0].elementClass)<0&&[constants.A.OBJECT_TYPE_POLYGON,constants.A.OBJECT_TYPE_ANGLE].indexOf(_[0].type)<0)throw new Error("JSXGraph: Can't create smartlabel with parent types '"+typeof _[0]+"', '"+typeof _[1]+"'.");return ee=_[0],te=_[1]||"",ee.elementClass===constants.A.OBJECT_CLASS_POINT?Q=utils_type.A.copyAttributes(J,G.options,"smartlabelpoint"):ee.elementClass===constants.A.OBJECT_CLASS_LINE?((Q=utils_type.A.copyAttributes(J,G.options,"smartlabelline")).rotate=function(){return 180*Math.atan(ee.getSlope())/Math.PI},Q.visible=function(){return!(ee.L()<1.5)}):ee.elementClass===constants.A.OBJECT_CLASS_CIRCLE?(Q=utils_type.A.copyAttributes(J,G.options,"smartlabelcircle")).visible=function(){return!(ee.Radius()<1.5)}:ee.type===constants.A.OBJECT_TYPE_POLYGON?Q=utils_type.A.copyAttributes(J,G.options,"smartlabelpolygon"):ee.type===constants.A.OBJECT_TYPE_ANGLE&&((Q=utils_type.A.copyAttributes(J,G.options,"smartlabelangle")).rotate=function(){var re=ee.center.coords.usrCoords,oe=ee.getLabelAnchor().usrCoords,se=180*Math.atan2(oe[2]-re[2],oe[1]-re[1])/Math.PI;return se>90&&se<270?se+180:se},Q.anchorX=function(){var re=ee.center.coords.usrCoords,oe=ee.getLabelAnchor().usrCoords,se=180*Math.atan2(oe[2]-re[2],oe[1]-re[1])/Math.PI;return se>90&&se<270?"right":"left"}),ne=function(re,oe,se,ae){var ce;switch(ae){case"length":ce=function(){return oe.L()};break;case"slope":ce=function(){return oe.Slope()};break;case"area":ce=function(){return oe.Area()};break;case"radius":ce=function(){return oe.Radius()};break;case"perimeter":ce=function(){return oe.Perimeter()};break;case"rad":ce=function(){return oe.Value()};break;case"deg":ce=function(){return 180*oe.Value()/Math.PI};break;default:ce=function(){return 0}}return function(){var ue,de="",me=utils_type.A.evaluate(te),fe=re.evalVisProp("digits"),_e=re.evalVisProp("unit"),ye=re.evalVisProp("prefix"),be=re.evalVisProp("suffix"),Se=re.evalVisProp("usemathjax")||re.evalVisProp("usekatex");return me===""?(ue=re.useLocale()?re.formatNumberLocale(ce(),fe):utils_type.A.toFixed(ce(),fe),de=Se?["\\(",ye,ue,"\\,",_e,be,"\\)"].join(""):[ye,ue,_e,be].join("")):de=me,de}},ee.elementClass===constants.A.OBJECT_CLASS_POINT?(Z=G.create("text",[function(){return ee.X()},function(){return ee.Y()},""],Q),ie=function(){var re,oe,se="",ae=utils_type.A.evaluate(te),ce=Z.evalVisProp("digits"),ue=Z.evalVisProp("unit"),de=Z.evalVisProp("prefix"),me=Z.evalVisProp("suffix"),fe=Z.evalVisProp("dir"),_e=Z.evalVisProp("usemathjax")||Z.evalVisProp("usekatex");return Z.useLocale()?(re=Z.formatNumberLocale(ee.X(),ce),oe=Z.formatNumberLocale(ee.Y(),ce)):(re=utils_type.A.toFixed(ee.X(),ce),oe=utils_type.A.toFixed(ee.Y(),ce)),ae===""?fe==="row"?se=_e?["\\(",de,re,"\\,",ue," / ",oe,"\\,",ue,me,"\\)"].join(""):[de,re," ",ue," / ",oe," ",ue,me].join(""):fe.indexOf("col")===0&&(se=_e?["\\(",de,"\\left(\\array{",re,"\\,",ue,"\\\\ ",oe,"\\,",ue,"}\\right)",me,"\\)"].join(""):[de,re," ",ue,"<br />",oe," ",ue,me].join("")):se=ae,se}):ee.elementClass===constants.A.OBJECT_CLASS_LINE?Q.measure==="length"?ie=ne(Z=G.create("text",[function(){return .5*(ee.point1.X()+ee.point2.X())},function(){return .5*(ee.point1.Y()+ee.point2.Y())},""],Q),ee,0,"length"):Q.measure==="slope"&&(ie=ne(Z=G.create("text",[function(){return .25*ee.point1.X()+.75*ee.point2.X()},function(){return .25*ee.point1.Y()+.75*ee.point2.Y()},""],Q),ee,0,"slope")):ee.elementClass===constants.A.OBJECT_CLASS_CIRCLE?Q.measure==="radius"?ie=ne(Z=G.create("text",[function(){return ee.center.X()+.5*ee.Radius()},function(){return ee.center.Y()},""],Q),ee,0,"radius"):Q.measure==="area"?ie=ne(Z=G.create("text",[function(){return ee.center.X()},function(){return ee.center.Y()+.5*ee.Radius()},""],Q),ee,0,"area"):Q.measure!=="circumference"&&Q.measure!=="perimeter"||(ie=ne(Z=G.create("text",[function(){return ee.getLabelAnchor()},""],Q),ee,0,"perimeter")):ee.type===constants.A.OBJECT_TYPE_POLYGON?Q.measure==="area"?ie=ne(Z=G.create("text",[function(){return ee.getTextAnchor()},""],Q),ee,0,"area"):Q.measure==="perimeter"&&(ie=ne(Z=G.create("text",[function(){var re=ee.borders.length-1;return re>=0?[.5*(ee.borders[re].point1.X()+ee.borders[re].point2.X()),.5*(ee.borders[re].point1.Y()+ee.borders[re].point2.Y())]:ee.getTextAnchor()},""],Q),ee,0,"perimeter")):ee.type===constants.A.OBJECT_TYPE_ANGLE&&(ie=ne(Z=G.create("text",[function(){return ee.getLabelAnchor()},""],Q),ee,0,Q.measure)),utils_type.A.exists(Z)&&(Z.setText(ie),ee.addChild(Z),Z.setParents([ee])),Z},jxg.A.registerElement("smartlabel",jxg.A.createSmartLabel),jxg.A.ForeignObject=function(G,_,J,Z,Q){this.constructor(G,J,constants.A.OBJECT_TYPE_FOREIGNOBJECT,constants.A.OBJECT_CLASS_OTHER),this.element=this.board.select(J.anchor),this.coordsConstructor(_),this._useUserSize=!1,this.size=[1,1],utils_type.A.exists(Q)&&Q.length>0&&(this._useUserSize=!0,this.W=utils_type.A.createFunction(Q[0],this.board,""),this.H=utils_type.A.createFunction(Q[1],this.board,""),this.addParentsFromJCFunctions([this.W,this.H]),this.usrSize=[this.W(),this.H()]),this.content=Z,this.elType="foreignobject",this.id=this.board.setId(this,"Im"),this.board.renderer.drawForeignObject(this),this.board.finalizeAdding(this),this.methodMap=jxg.A.deepCopy(this.methodMap,{addTransformation:"addTransform",trans:"addTransform",W:"W",Width:"W",H:"H",Height:"H"})},jxg.A.ForeignObject.prototype=new base_element.A,utils_type.A.copyPrototypeMethods(jxg.A.ForeignObject,coordselement.A,"coordsConstructor"),jxg.A.extend(jxg.A.ForeignObject.prototype,{hasPoint:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se=this.transformations.length;return utils_type.A.isObject(this.evalVisProp("precision"))?(ee=this.board._inputDevice,te=this.evalVisProp("precision."+ee)):te=this.board.options.precision.hasPoint,se===0?(J=G-this.coords.scrCoords[1],Z=this.coords.scrCoords[2]-_,J>=-(Q=te)&&J-this.size[0]<=Q&&Z>=-Q&&Z-this.size[1]<=Q):(ie=[(ne=(ne=new base_coords.A(constants.A.COORDS_BY_SCREEN,[G,_],this.board)).usrCoords)[0]-this.span[0][0],ne[1]-this.span[0][1],ne[2]-this.span[0][2]],0<=(re=(oe=math.A.innerProduct)(ie,this.span[1]))&&re<=oe(this.span[1],this.span[1])&&0<=(re=oe(ie,this.span[2]))&&re<=oe(this.span[2],this.span[2]))},update:function(G){return this.needsUpdate?(this.updateCoords(G),this.updateSize(),this):this},updateRenderer:function(){return this.updateRendererGeneric("updateForeignObject")},updateSize:function(){var G=[0,0];return this._useUserSize?(this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*this.board.unitX),Math.abs(this.usrSize[1]*this.board.unitY)]):this.rendNode.hasChildNodes()&&(G=this.rendNode.childNodes[0].getBoundingClientRect(),this.size=[G.width,G.height]),this},updateSpan:function(){var G,_,J=this.transformations.length,Z=[];if(J===0)this.span=[[this.Z(),this.X(),this.Y()],[this.Z(),this.W(),0],[this.Z(),0,this.H()]];else{for(Z[0]=[this.Z(),this.X(),this.Y()],Z[1]=[this.Z(),this.X()+this.W(),this.Y()],Z[2]=[this.Z(),this.X(),this.Y()+this.H()],G=0;G<J;G++)for(_=0;_<3;_++)Z[_]=math.A.matVecMult(this.transformations[G].matrix,Z[_]);for(_=0;_<3;_++)Z[_][1]/=Z[_][0],Z[_][2]/=Z[_][0],Z[_][0]/=Z[_][0];for(_=1;_<3;_++)Z[_][0]-=Z[0][0],Z[_][1]-=Z[0][1],Z[_][2]-=Z[0][2];this.span=Z}return this},addTransform:function(G){var _;if(utils_type.A.isArray(G))for(_=0;_<G.length;_++)this.transformations.push(G[_]);else this.transformations.push(G);return this},getParents:function(){var G=[this.url,[this.Z(),this.X(),this.Y()],this.usrSize];return this.parents.length!==0&&(G=this.parents),G},setSize:function(G,_){return this.W=utils_type.A.createFunction(G,this.board,""),this.H=utils_type.A.createFunction(_,this.board,""),this._useUserSize=!0,this.addParentsFromJCFunctions([this.W,this.H]),this},W:function(){},H:function(){}}),jxg.A.createForeignObject=function(G,_,J){var Z,Q,ee=_[0],te=_[1],ne=[];if(_.length>=2&&(ne=_[2]),Z=utils_type.A.copyAttributes(J,G.options,"foreignobject"),!(Q=coordselement.A.create(jxg.A.ForeignObject,G,te,Z,ee,ne)))throw new Error("JSXGraph: Can't create foreignObject with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [string, [x, y], [w, h]], [string, [x, y]], [element,transformation]`);return Q},jxg.A.registerElement("foreignobject",jxg.A.createForeignObject),jxg.A.registerElement("fo",jxg.A.createForeignObject),jxg.A.ForeignObject,jxg.A.extend(src_options.A,{axes3d:{axesPosition:"center",xAxis:{visible:!0,point2:{name:"x"},strokeColor:jxg.A.palette.red},yAxis:{visible:!0,point2:{name:"y"},strokeColor:jxg.A.palette.green},zAxis:{visible:!0,point2:{name:"z"},strokeColor:jxg.A.palette.blue},xAxisBorder:{name:"x",visible:"nherit",withLabel:!1,label:{position:"50% left",offset:[30,0],fontsize:15},strokeWidth:1,lastArrow:!1,ticks3d:{visible:"nherit",label:{anchorX:"middle",anchorY:"middle"}}},yAxisBorder:{name:"y",visible:"nherit",withLabel:!1,label:{position:"50% right",offset:[0,-30],fontsize:15},strokeWidth:1,lastArrow:!1,ticks3d:{visible:"nherit",label:{anchorX:"middle"}}},zAxisBorder:{name:"z",visible:"nherit",withLabel:!1,label:{position:"50% right",offset:[30,0],fontsize:15},strokeWidth:1,lastArrow:!1,ticks3d:{visible:"nherit",label:{anchorX:"middle",anchorY:"middle"}}},xPlaneRear:{visible:!0,layer:0,strokeWidth:1,strokeColor:"#dddddd",fillColor:"#dddddd",mesh3d:{layer:1}},yPlaneRear:{visible:!0,strokeWidth:1,strokeColor:"#dddddd",fillColor:"#dddddd",layer:0,mesh3d:{layer:1}},zPlaneRear:{visible:!0,strokeWidth:1,strokeColor:"#dddddd",fillColor:"#dddddd",layer:0,mesh3d:{layer:1}},xPlaneFront:{visible:!1,strokeWidth:1,strokeColor:"#dddddd",fillColor:"#dddddd",layer:0,mesh3d:{layer:1}},yPlaneFront:{visible:!1,strokeWidth:1,strokeColor:"#dddddd",fillColor:"#dddddd",layer:0,mesh3d:{layer:1}},zPlaneFront:{visible:!1,strokeWidth:1,strokeColor:"#dddddd",fillColor:"#dddddd",layer:0,mesh3d:{layer:1}},xPlaneRearYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneRearZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneFrontYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneFrontZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneRearXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneRearZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneFrontXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneFrontZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneRearXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneRearYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneFrontXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneFrontYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1}},axis3d:{highlight:!1,fixed:!0,strokeColor:"black",strokeWidth:1,tabindex:null,point1:{visible:!1,name:"",withLabel:!1},point2:{visible:!1,name:"",withLabel:!1,label:{visible:!0}}},circle3d:{layer:12,point:{visible:!1,name:""},needsRegularUpdate:!0},curve3d:{layer:12,highlight:!1,tabindex:-1,strokeWidth:1,numberPointsHigh:200,needsRegularUpdate:!0},face3d:{transitionProperties:[],layer:12,highlight:!1,tabindex:null,strokeWidth:1,fillColor:jxg.A.palette.yellow,fillOpacity:.4,needsRegularUpdate:!0,shader:{enabled:!1,type:"angle",hue:60,saturation:90,minLightness:30,maxLightness:90}},intersectionline3d:{point1:{visible:!1,name:""},point2:{visible:!1,name:""}},line3d:{layer:12,strokeWidth:1,strokeColor:"black",fixed:!0,tabindex:null,needsRegularUpdate:!0,point:{visible:!1,name:""},point1:{visible:!1,name:""},point2:{visible:!1,name:""},straightFirst:!1,straightLast:!1},mesh3d:{layer:12,strokeWidth:1,strokeColor:"#9a9a9a",strokeOpacity:.6,highlight:!1,tabindex:null,needsRegularUpdate:!0,stepWidthU:1,stepWidthV:1},plane3d:{layer:12,strokeWidth:0,strokeColor:"black",strokeOpacity:1,highlight:!1,tabindex:null,needsRegularUpdate:!0,visible:!0,gradient:"linear",gradientSecondColor:"#ffffff",gradientAngle:Math.PI,fillColor:"#a7a7a7",fillOpacity:.6,mesh3d:{visible:"inherit"},threePoints:!1,point:{visible:!1,name:"",fixed:!0},point1:{visible:!1,name:""},point2:{visible:!1,name:""},point3:{visible:!1,name:""}},point3d:{layer:13,infoboxDigits:"auto",strokeWidth:0,gradient:"radial",gradientSecondColor:"#555555",fillColor:"yellow",highlightStrokeColor:"#555555",gradientFX:.7,gradientFY:.3,needsRegularUpdate:!0},polygon3d:{layer:12,highlight:!1,tabindex:-1,strokeWidth:1,fillColor:"none",needsRegularUpdate:!0},polyhedron3d:{fillColorArray:["white","black"],needsRegularUpdate:!0},sphere3d:{layer:12,highlight:!1,strokeWidth:1,strokeColor:"#00ff80",fillColor:"white",gradient:"radial",gradientSecondColor:"#00ff80",gradientFX:.7,gradientFY:.3,fillOpacity:.4,needsRegularUpdate:!0},surface3d:{layer:12,highlight:!1,tabindex:-1,strokeWidth:1,stepsU:30,stepsV:30,needsRegularUpdate:!0},text3d:{withLabel:!1,needsRegularUpdate:!0},ticks3d:{visible:!0,ticksDistance:1,majorHeight:10,minorTicks:0,tickEndings:[0,1],drawLabels:!0,needsRegularUpdate:!0,label:{visible:!0,withLabel:!1}},vectorfield3d:{scale:1,arrowhead:{enabled:!0,size:5,angle:.125*Math.PI},needsRegularUpdate:!0},view3d:{needsRegularUpdate:!0,depthOrder:{enabled:!1,layers:[12,13]},projection:"parallel",verticalDrag:{enabled:!0,key:"shift"},az:{pointer:{enabled:!0,speed:1,outside:!0,button:-1,key:"none"},keyboard:{enabled:!0,step:10,key:"ctrl"},continuous:!0,slider:{visible:"inherit",style:6,point1:{pos:"auto",frozen:!1},point2:{pos:"auto",frozen:!1},min:0,max:2*Math.PI,start:1}},el:{pointer:{enabled:!0,speed:1,outside:!0,button:-1,key:"none"},keyboard:{enabled:!0,step:10,key:"ctrl"},continuous:!0,slider:{visible:"inherit",style:6,point1:{frozen:!1,pos:"auto"},point2:{frozen:!1,pos:"auto"},min:0,max:2*Math.PI,start:.3}},bank:{pointer:{enabled:!0,speed:.08,outside:!0,button:-1,key:"none"},keyboard:{enabled:!0,step:10,key:"ctrl"},continuous:!0,slider:{visible:"inherit",style:6,point1:{frozen:!1,pos:"auto"},point2:{frozen:!1,pos:"auto"},min:-Math.PI,max:Math.PI,start:0}},trackball:{enabled:!1,outside:!0,button:-1,key:"none"},r:"auto",fov:.4*Math.PI,values:[[0,1.57],[.78,.62],[0,0],[5.49,.62],[4.71,0],[3.93,.62],[3.14,0],[2.36,.62],[1.57,1.57]],infobox:{strokeColor:"#000000",fontSize:16,useKatex:!1,useMathjax:!1,intl:{enabled:!0,options:{minimumFractionDigits:2,maximumFractionDigits:3}}},_currentView:-1}}),jxg.A.Options,jxg.A.View3D=function(G,_,J){this.constructor(G,J,constants.A.OBJECT_TYPE_VIEW3D,constants.A.OBJECT_CLASS_3D),this.objects={},this.depthOrdered={},this.elementsByName={},this.defaultAxes=null,this.angles={az:null,el:null,bank:null},this.matrix3DRot=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],this.matrix3DRotShift=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],this.matrix3D=[[1,0,0,0],[0,1,0,0],[0,0,1,0]],this.boxToCam=[],this.llftCorner=_[0],this.size=_[1],this.bbox3D=_[2],this.r=-1,this.focalDist=-1,this.projectionType="parallel",this.trackballEnabled=!1,this.timeoutAzimuth=null,this.zIndexMin=1/0,this.zIndexMax=-1/0,this.id=this.board.setId(this,"V"),this.board.finalizeAdding(this),this.elType="view3d",this.methodMap=utils_type.A.deepCopy(this.methodMap,{})},jxg.A.View3D.prototype=new base_element.A,jxg.A.extend(jxg.A.View3D.prototype,{create:function(G,_,J){var Z=[];return G.indexOf("3d")>0&&Z.push(this),this.board.create(G,Z.concat(_),J)},select:function(G,_){var J,Z,Q,ee,te=G;if(te===null)return te;if(utils_type.A.isString(te)&&te!=="")utils_type.A.exists(this.objects[te])?te=this.objects[te]:utils_type.A.exists(this.elementsByName[te])&&(te=this.elementsByName[te]);else if(!_&&(utils_type.A.isFunction(te)||utils_type.A.isObject(te)&&!utils_type.A.isFunction(te.setAttribute))){for(Z={},ee=(J=utils_type.A.filterElements(this.objectsList,te)).length,Q=0;Q<ee;Q++)Z[J[Q].id]=J[Q];te=new composition(Z)}else utils_type.A.isObject(te)&&utils_type.A.exists(te.id)&&!utils_type.A.exists(this.objects[te.id])&&(te=null);return te},setAnglesFromRotation:function(){var G,_,J,Z,Q,ee,te,ne=this.matrix3DRot;(G=Math.sqrt(ne[1][3]*ne[1][3]+ne[2][3]*ne[2][3]))>math.A.eps?(_=ne[2][3]/G,J=ne[1][3]/G):(_=Math.cos(this.angles.bank),J=Math.sin(this.angles.bank)),ne=math.A.matMatMult([[1,0,0,0],[0,_,-J,0],[0,J,_,0],[0,0,0,1]],ne),this.angles.bank=Math.atan2(J,_),Z=ne[2][3],Q=ne[3][3],ne=math.A.matMatMult([[1,0,0,0],[0,1,0,0],[0,0,Z,Q],[0,0,-Q,Z]],ne),this.angles.el=Math.atan2(Q,Z),ee=-ne[1][1],te=ne[3][1],this.angles.az=Math.atan2(te,ee),this.angles.az<0&&(this.angles.az+=2*Math.PI),this.setSlidersFromAngles()},anglesHaveMoved:function(){return this._hasMoveAz||this._hasMoveEl||Math.abs(this.angles.az-this.az_slide.Value())>math.A.eps||Math.abs(this.angles.el-this.el_slide.Value())>math.A.eps||Math.abs(this.angles.bank-this.bank_slide.Value())>math.A.eps},getAnglesFromSliders:function(){this.angles.az=this.az_slide.Value(),this.angles.el=this.el_slide.Value(),this.angles.bank=this.bank_slide.Value()},setSlidersFromAngles:function(){this.az_slide.setValue(this.angles.az),this.el_slide.setValue(this.angles.el),this.bank_slide.setValue(this.angles.bank)},getRotationFromAngles:function(){var G,_,J,Z,Q,ee,te=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];return G=this.angles.az,_=this.angles.el,J=this.angles.bank,Z=-Math.sin(_),te[1][1]=-Math.cos(G),te[1][2]=Math.sin(G),te[1][3]=0,te[2][1]=Z*Math.sin(G),te[2][2]=Z*Math.cos(G),te[2][3]=Math.cos(_),te[3][1]=Math.cos(_)*Math.sin(G),te[3][2]=Math.cos(_)*Math.cos(G),te[3][3]=Math.sin(_),Q=Math.cos(J),ee=Math.sin(J),te=math.A.matMatMult([[1,0,0,0],[0,Q,ee,0],[0,-ee,Q,0],[0,0,0,1]],te)},_projectToSphere:function(G,_,J){var Z,Q=math.A.hypot(_,J);return Q<.7071067811865475*G?Math.sqrt(G*G-Q*Q):(Z=G/1.414213562373095)*Z/Q},updateProjectionTrackball:function(G){var _,J,Z,Q,ee,te,ne,ie,re,oe,se,ae,ce=100,ue=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];return utils_type.A.exists(this._trackball)?((_=this._trackball.dx)*_+(J=this._trackball.dy)*J>math.A.eps&&(ce=.25*(this.size[0]*this.board.unitX+this.size[1]*this.board.unitY),Q=[ee=this._trackball.x,te=this._trackball.y,this._projectToSphere(ce,ee,te)],Z=[ee-=_,te-=J,this._projectToSphere(ce,ee,te)],ae=math.A.crossProduct(Z,Q),re=math.A.hypot(ae[0],ae[1],ae[2]),ae[0]/=re,ae[1]/=re,ae[2]/=re,ie=(ie=(ie=geometry.A.distance(Q,Z,3)/(2*ce))>1?1:ie)<-1?-1:ie,ne=2*Math.asin(ie),ie=1-(oe=Math.cos(ne)),se=Math.sin(ne),ue[1][1]=oe+ae[0]*ae[0]*ie,ue[2][1]=ae[1]*ae[0]*ie+ae[2]*se,ue[3][1]=ae[2]*ae[0]*ie-ae[1]*se,ue[1][2]=ae[0]*ae[1]*ie-ae[2]*se,ue[2][2]=oe+ae[1]*ae[1]*ie,ue[3][2]=ae[2]*ae[1]*ie+ae[0]*se,ue[1][3]=ae[0]*ae[2]*ie+ae[1]*se,ue[2][3]=ae[1]*ae[2]*ie-ae[0]*se,ue[3][3]=oe+ae[2]*ae[2]*ie),ue=math.A.matMatMult(ue,this.matrix3DRot)):this.matrix3DRot},updateAngleSliderBounds:function(){var G,_,J,Z,Q,ee,te,ne,ie,re,oe;this.trackballEnabled=this.evalVisProp("trackball.enabled"),this.trackballEnabled?(this.az_slide.setMin(0),this.az_slide.setMax(2*Math.PI),this.el_slide.setMin(-.5*Math.PI),this.el_slide.setMax(.5*Math.PI),this.bank_slide.setMin(-Math.PI),this.bank_slide.setMax(Math.PI)):(this.az_slide.setMin(this.visProp.az.slider.min),this.az_slide.setMax(this.visProp.az.slider.max),this.el_slide.setMin(this.visProp.el.slider.min),this.el_slide.setMax(this.visProp.el.slider.max),this.bank_slide.setMin(this.visProp.bank.slider.min),this.bank_slide.setMax(this.visProp.bank.slider.max)),G=this.az_slide._smax,_=this.az_slide._smin,J=this.el_slide._smax,Z=this.el_slide._smin,re=this.bank_slide._smax,oe=this.bank_slide._smin,this.trackballEnabled?(Q=math.A.mod(this.angles.el,2*Math.PI),.5*Math.PI<Q&&Q<1.5*Math.PI&&(this.angles.el=Math.PI-Q,this.angles.az=math.A.wrap(this.angles.az+Math.PI,_,G),this.angles.bank=math.A.wrap(this.angles.bank+Math.PI,oe,re)),this.angles.az=math.A.wrap(this.angles.az,_,G),this.angles.el=math.A.wrap(this.angles.el,Z,J),this.angles.bank=math.A.wrap(this.angles.bank,oe,re)):(ie=function(se){return se<Z?Z-se:J<se?se-J:0},ee=.5*(Z+J),te=math.A.wrap(this.angles.el,ee-Math.PI,ee+Math.PI),ne=math.A.wrap(Math.PI-this.angles.el,ee-Math.PI,ee+Math.PI),ie(te)<=ie(ne)?this.angles.el=math.A.clamp(te,Z,J):(this.angles.el=math.A.clamp(ne,Z,J),this.angles.az=math.A.wrap(this.angles.az+Math.PI,_,G),this.angles.bank=math.A.wrap(this.angles.bank+Math.PI,oe,re)),this.angles.az=math.A.wrapAndClamp(this.angles.az,_,G,2*Math.PI),this.angles.bank=math.A.wrapAndClamp(this.angles.bank,oe,re,2*Math.PI),this.matrix3DRot=this.getRotationFromAngles()),this.setSlidersFromAngles()},_updateCentralProjection:function(){var G,_;return(G=this.evalVisProp("r"))==="auto"&&(G=1.01*math.A.hypot(this.bbox3D[0][0]-this.bbox3D[0][1],this.bbox3D[1][0]-this.bbox3D[1][1],this.bbox3D[2][0]-this.bbox3D[2][1])),this.boxToCam=this.matrix3DRot.map(function(J){return J.slice()}),this.boxToCam[3][0]=-G,this.focalDist=1/Math.tan(.5*this.evalVisProp("fov")),_=[[0,0,0,-1],[0,this.focalDist,0,0],[0,0,this.focalDist,0],[320/-12,0,0,28/-12]],math.A.matMatMult(_,this.boxToCam)},update:function(){var G,_,J,Z,Q,ee=this.r,te=[[1,0,0,0],[0,-ee,0,0],[0,0,-ee,0],[0,0,0,1]];return utils_type.A.exists(this.el_slide)&&utils_type.A.exists(this.az_slide)&&utils_type.A.exists(this.bank_slide)&&this.needsUpdate?(G=[[1,0,0],[0,1,0],[0,0,1]],this.projectionType=this.evalVisProp("projection").toLowerCase(),this.trackballEnabled!==this.evalVisProp("trackball.enabled")&&this.updateAngleSliderBounds(),this._hasMoveTrackball?(this.matrix3DRot=this.updateProjectionTrackball(),this.setAnglesFromRotation()):this.anglesHaveMoved()&&(this.getAnglesFromSliders(),this.matrix3DRot=this.getRotationFromAngles()),this.shift=[[1,0,0,0],[-.5*(this.bbox3D[0][0]+this.bbox3D[0][1]),1,0,0],[-.5*(this.bbox3D[1][0]+this.bbox3D[1][1]),0,1,0],[-.5*(this.bbox3D[2][0]+this.bbox3D[2][1]),0,0,1]],this.projectionType==="central"?(J=.8,G[1][1]=this.size[0]/J,G[2][2]=this.size[1]/J,G[1][0]=this.llftCorner[0]+.5*G[1][1]*J,G[2][0]=this.llftCorner[1]+.5*G[2][2]*J,this.viewPortTransform=G,_=this._updateCentralProjection(),this.matrix3D=math.A.matMatMult(_,this.shift)):(Z=this.bbox3D[0][1]-this.bbox3D[0][0],Q=this.bbox3D[1][1]-this.bbox3D[1][0],G[1][1]=this.size[0]/Z,G[2][2]=this.size[1]/Q,G[1][0]=this.llftCorner[0]+.5*G[1][1]*Z,G[2][0]=this.llftCorner[1]+.5*G[2][2]*Q,this.matrix3D=math.A.matMatMult(G,math.A.matMatMult(math.A.matMatMult(this.matrix3DRot,te),this.shift).slice(0,3))),this.matrix3DRotShift=math.A.matMatMult(this.matrix3DRot,this.shift),this):(this.needsUpdate=!1,this)},compareDepth:function(G,_){return G.zIndex-_.zIndex},updateZIndices:function(){var G,_;for(G in this.objects)this.objects.hasOwnProperty(G)&&((_=this.objects[G]).type===constants.A.OBJECT_TYPE_LINE3D||_.type===constants.A.OBJECT_TYPE_POLYGON3D)&&utils_type.A.exists(_.element2D)&&_.element2D.evalVisProp("visible")&&_.updateZIndex()},updateShaders:function(){var G,_,J;for(G in this.objects)this.objects.hasOwnProperty(G)&&(_=this.objects[G],utils_type.A.exists(_.shader)&&((J=_.shader())<this.zIndexMin?this.zIndexMin=J:J>this.zIndexMax&&(this.zIndexMax=J)))},updateDepthOrdering:function(){var G,_,J,Z,Q,ee,te;for(ee=this.evalVisProp("depthorder.layers"),J=0;J<ee.length;J++)this.depthOrdered[ee[J]]=[];for(G in this.objects)this.objects.hasOwnProperty(G)&&((_=this.objects[G]).type===constants.A.OBJECT_TYPE_FACE3D||_.type===constants.A.OBJECT_TYPE_LINE3D||_.type===constants.A.OBJECT_TYPE_POINT3D||_.type===constants.A.OBJECT_TYPE_POLYGON3D)&&utils_type.A.exists(_.element2D)&&_.element2D.evalVisProp("visible")&&(te=_.element2D.evalVisProp("layer"),ee.indexOf(te)>=0&&this.depthOrdered[te].push(_));if(this.board.renderer&&this.board.renderer.type==="svg")for(J=0;J<ee.length;J++)for(te=ee[J],this.depthOrdered[te].sort(this.compareDepth.bind(this)),Q=this.depthOrdered[te],Z=0;Z<Q.length;Z++)this.board.renderer.setLayer(Q[Z].element2D,te);return this},updateRenderer:function(){return this.needsUpdate?(this.depthOrdered={},this.shift!==void 0&&this.evalVisProp("depthorder.enabled")&&(this.updateZIndices(),this.updateShaders(),this.board.renderer&&this.board.renderer.type==="svg"&&this.updateDepthOrdering()),this.needsUpdate=!1,this):this},removeObject:function(G,_){var J,Z;if(utils_type.A.isArray(G)){for(J=0;J<G.length;J++)this.removeObject(G[J]);return this}if(G=this.select(G),!utils_type.A.exists(G)||utils_type.A.isString(G))return this;try{for(Z in G.childElements)G.childElements.hasOwnProperty(Z)&&this.removeObject(G.childElements[Z]);delete this.objects[G.id]}catch(Q){jxg.A.debug("View3D "+G.id+": Could not be removed: "+Q)}return this.board.removeObject(G,_),this},worldToFocal:function(G,_=!0){var J,Z=math.A.matVecMult(this.boxToCam,math.A.matVecMult(this.shift,G));if(Z[3]-=Z[0]*this.focalDist,_)return Z;for(J=1;J<4;J++)Z[J]/=Z[0];return Z.slice(1,4)},project3DTo2D:function(G,_,J){var Z,Q;return arguments.length===3?Z=[1,G,_,J]:G.length===3?(Z=G.slice()).unshift(1):Z=G,Q=math.A.matVecMult(this.matrix3D,Z),this.projectionType==="central"?(Q[1]/=Q[0],Q[2]/=Q[0],Q[3]/=Q[0],Q[0]/=Q[0],math.A.matVecMult(this.viewPortTransform,Q.slice(0,3))):Q},_getW0:function(G,_,J){var Z,Q=math.A.inverse(G),ee=Q[0][0]+_[1]*Q[0][1]+_[2]*Q[0][2],te=Q[3][0]+_[1]*Q[3][1]+_[2]*Q[3][2];return Z=J*Q[0][3]-Q[3][3],[1/((te*Q[0][3]-ee*Q[3][3])/Z),(te-ee*J)/Z]},project2DTo3DPlane:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se=J.slice(1)||[0,0,0],ae=_.slice(1);if(te=math.A.norm(ae,3),ee=math.A.innerProduct(se,ae,3)/te,this.projectionType==="parallel"){(Z=this.matrix3D.slice(0,3)).push([0,ae[0],ae[1],ae[2]]),(Q=G.coords.usrCoords.slice()).push(ee);try{Z[2][3]===1&&(Z[2][1]=Z[2][2]=.001*math.A.eps),ne=math.A.Numerics.Gauss(Z,Q)}catch{ne=[0,NaN,NaN,NaN]}}else{Z=this.matrix3D,Q=G.coords.usrCoords.slice(),ie=math.A.Numerics.Gauss(this.viewPortTransform,Q),re=(oe=this._getW0(Z,ie,ee))[0],Q=[ie[0]*re,ie[1]*re,ie[2]*re,oe[1]*re];try{Z[2][3]===1&&(Z[2][1]=Z[2][2]=.001*math.A.eps),(ne=math.A.Numerics.Gauss(Z,Q))[1]/=ne[0],ne[2]/=ne[0],ne[3]/=ne[0],ne[0]/=ne[0]}catch{ne=[0,NaN,NaN,NaN]}}return ne},projectScreenToSegment:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe=this.project3DTo2D(_).slice(1,3),se=this.project3DTo2D(J).slice(1,3),ae=[se[0]-oe[0],se[1]-oe[1]],ce=math.A.innerProduct(ae,ae),ue=[G[0]-oe[0],G[1]-oe[1]],de=math.A.innerProduct(ue,ae)/ce;return this.projectionType==="central"?(Z=[.5*(_[0]+J[0]),.5*(_[1]+J[1]),.5*(_[2]+J[2])],ee=[(Q=this.project3DTo2D(Z).slice(1,3))[0]-oe[0],Q[1]-oe[1]],ne=(1-(te=math.A.innerProduct(ee,ae)/ce))*de/((1-2*te)*de+te)):ne=de,[1,(re=1-(ie=Math.min(Math.max(ne,0),1)))*_[0]+ie*J[0],re*_[1]+ie*J[1],re*_[2]+ie*J[2]]},project2DTo3DVertical:function(G,_){var J=G.coords.usrCoords.slice(1,3),Z=[_[1],_[2],this.bbox3D[2][0]],Q=[_[1],_[2],this.bbox3D[2][1]];return this.projectScreenToSegment(J,Z,Q)},project3DToCube:function(G){var _=this.bbox3D,J=!1;return G[1]<_[0][0]&&(G[1]=_[0][0],J=!0),G[1]>_[0][1]&&(G[1]=_[0][1],J=!0),G[2]<_[1][0]&&(G[2]=_[1][0],J=!0),G[2]>_[1][1]&&(G[2]=_[1][1],J=!0),G[3]<=_[2][0]&&(G[3]=_[2][0],J=!0),G[3]>=_[2][1]&&(G[3]=_[2][1],J=!0),[G,J]},intersectionLineCube:function(G,_,J){var Z,Q,ee,te,ne;for(ne=_.length===3?_:_.slice(1),Z=J,Q=0;Q<3;Q++)ne[Q]!==0&&(ee=(this.bbox3D[Q][0]-G[Q+1])/ne[Q],te=(this.bbox3D[Q][1]-G[Q+1])/ne[Q],Z=J<0?Math.max(Z,Math.min(ee,te)):Math.min(Z,Math.max(ee,te)));return Z},isInCube:function(G,_){var J;if(G.length===4){if(G[0]===0)return!1;J=G.slice(1)}return J[0]>this.bbox3D[0][0]-math.A.eps&&J[0]<this.bbox3D[0][1]+math.A.eps&&J[1]>this.bbox3D[1][0]-math.A.eps&&J[1]<this.bbox3D[1][1]+math.A.eps&&J[2]>this.bbox3D[2][0]-math.A.eps&&J[2]<this.bbox3D[2][1]+math.A.eps},intersectionPlanePlane:function(G,_,J){var Z,Q,ee,te,ne,ie=[!1,!1];return J=J||_.d,(te=math.A.crossProduct(G.normal.slice(1),_.normal.slice(1))).unshift(0),Z=math.A.Geometry.meet3Planes(G.normal,G.d,_.normal,J,te,0),ne=math.A.Geometry.meetPlanePlane(G.vec1,G.vec2,_.vec1,_.vec2),ee=this.intersectionLineCube(Z,ne,1/0),Q=math.A.axpy(ee,ne,Z),this.isInCube(Q)&&(ie[0]=Q),ee=this.intersectionLineCube(Z,ne,-1/0),Q=math.A.axpy(ee,ne,Z),this.isInCube(Q)&&(ie[1]=Q),ie},intersectionPlaneFace:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue,de,me,fe,_e=[],ye=[],be=[];for((fe=math.A.crossProduct(G.normal.slice(1),_.normal.slice(1))).unshift(0),Q=geometry.A.meet3Planes(G.normal,G.d,_.normal,_.d,fe,0),de=geometry.A.meetPlanePlane(G.vec1,G.vec2,_.vec1,_.vec2),re=_.polyhedron.faces[_.faceNumber],ee=_.polyhedron.coords,oe=re.length,J=1;J<=oe;J++)te=ee[re[J-1]],me=[0,(ne=ee[re[J%oe]])[1]-te[1],ne[2]-te[2],ne[3]-te[3]],se=Math.random(),ae=Math.random(),ce=Math.random(),ue=Math.random(),ye=[[se*de[1]+ae*de[3],se*-me[1]+ae*-me[3]],[ce*de[2]+ue*de[3],ce*-me[2]+ue*-me[3]]],be=[se*(te[1]-Q[1])+ae*(te[3]-Q[3]),ce*(te[2]-Q[2])+ue*(te[3]-Q[3])],(Z=numerics.A.Gauss(ye,be)[1])>-math.A.eps&&Z<1+math.A.eps&&(ie=[1,te[1]+Z*me[1],te[2]+Z*me[2],te[3]+Z*me[3]],_e.push(ie));return _e},intersectionPlanePolyhedron:function(G,_){var J,Z,Q,ee,te,ne,ie=1e-12,re=[],oe=[],se=[],ae=[];for(J=0;J<_.numberFaces;J++)if(!(_.def.faces[J].length<3||(Q=this.intersectionPlaneFace(G,_.faces[J])).length<2||Q[0].length!==4||Q[1].length!==4)){for(Z=0;Z<re.length&&!(geometry.A.distance(Q[0],re[Z][0],4)<ie&&geometry.A.distance(Q[1],re[Z][1],4)<ie||geometry.A.distance(Q[0],re[Z][1],4)<ie&&geometry.A.distance(Q[1],re[Z][0],4)<ie);Z++);Z===re.length&&re.push(Q.slice())}if(re.length===0)return{X:oe,Y:se,Z:ae};te=0,J=0;do{for((ee=re[te][J]).length===4&&(oe.push(ee[1]),se.push(ee[2]),ae.push(ee[3])),J=(J+1)%2,ee=re[te][J],ne=te,Z=0;Z<re.length;Z++){if(Z!==te&&geometry.A.distance(ee,re[Z][0])<ie){te=Z,J=0;break}if(Z!==te&&geometry.A.distance(ee,re[Z][1])<ie){te=Z,J=1;break}}if(te===ne){console.log("Error face3d intersection update: did not find next",te,J);break}}while(te!==0);return oe.push(oe[0]),se.push(se[0]),ae.push(ae[0]),{X:oe,Y:se,Z:ae}},getMesh:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe=[0,0,0],se=utils_type.A.evaluate(_[2]),ae=utils_type.A.evaluate(J[2]),ce=[],ue=[];for(ie=(utils_type.A.evaluate(_[1])-utils_type.A.evaluate(_[0]))/se,re=(utils_type.A.evaluate(J[1])-utils_type.A.evaluate(J[0]))/ae,Z=0;Z<=se;Z++){for(ee=_[0]+ie*Z,Q=0;Q<=ae;Q++)te=J[0]+re*Q,oe=utils_type.A.isFunction(G)?G(ee,te):[G[0](ee,te),G[1](ee,te),G[2](ee,te)],ne=this.project3DTo2D(oe),ce.push(ne[1]),ue.push(ne[2]);ce.push(NaN),ue.push(NaN)}for(Q=0;Q<=ae;Q++){for(te=J[0]+re*Q,Z=0;Z<=se;Z++)ee=_[0]+ie*Z,oe=utils_type.A.isFunction(G)?G(ee,te):[G[0](ee,te),G[1](ee,te),G[2](ee,te)],ne=this.project3DTo2D(oe),ce.push(ne[1]),ue.push(ne[2]);ce.push(NaN),ue.push(NaN)}return[ce,ue]},animateAzimuth:function(){var G=this.az_slide._smin,_=this.az_slide._smax-G,J=this.az_slide.Value()+.1;this.az_slide.position=(J-G)/_,this.az_slide.position>1&&(this.az_slide.position=0),this.board._change3DView=!0,this.board.update(),this.board._change3DView=!1,this.timeoutAzimuth=setTimeout((function(){this.animateAzimuth()}).bind(this),200)},stopAzimuth:function(){clearTimeout(this.timeoutAzimuth),this.timeoutAzimuth=null},isVerticalDrag:function(){var G=this.board;return!!this.evalVisProp("verticaldrag.enabled")&&G["_"+this.evalVisProp("verticaldrag.key")+"Key"]},setView:function(G,_,J){return J=J||this.r,this.az_slide.setValue(G),this.el_slide.setValue(_),this.r=J,this.board.update(),this},nextView:function(){var G=this.evalVisProp("values"),_=this.visProp._currentview;return _=(_+1)%G.length,this.setCurrentView(_),this},previousView:function(){var G=this.evalVisProp("values"),_=this.visProp._currentview;return _=(_+G.length-1)%G.length,this.setCurrentView(_),this},setCurrentView:function(G){var _=this.evalVisProp("values");return(G<0||G>=_.length)&&(G=(G%_.length+_.length)%_.length),this.setView(_[G][0],_[G][1],_[G][2]),this.visProp._currentview=G,this},_azEventHandler:function(G){var _=this.az_slide._smax,J=this.az_slide._smin,Z=(_-J)/this.board.canvasWidth*this.evalVisProp("az.pointer.speed"),Q=G.movementX,ee=this.az_slide.Value(),te=this.el_slide.Value();return this.board.mode===this.board.BOARD_MODE_DRAG||(this.evalVisProp("az.keyboard.enabled")&&(G.key==="ArrowRight"?ee+=this.evalVisProp("az.keyboard.step")*Math.PI/180:G.key==="ArrowLeft"&&(ee-=this.evalVisProp("az.keyboard.step")*Math.PI/180)),this.evalVisProp("az.pointer.enabled")&&Q!==0&&G.key==null&&(ee+=Q*Z),this.evalVisProp("az.continuous")?ee=math.A.wrap(ee,J,_):ee>0?ee=Math.min(_,ee):ee<0&&(ee=Math.max(J,ee)),this.setView(ee,te)),this},_elEventHandler:function(G){var _=this.el_slide._smax,J=this.el_slide._smin,Z=(_-J)/this.board.canvasHeight*this.evalVisProp("el.pointer.speed"),Q=G.movementY,ee=this.az_slide.Value(),te=this.el_slide.Value();return this.board.mode===this.board.BOARD_MODE_DRAG||(this.evalVisProp("el.keyboard.enabled")&&(G.key==="ArrowUp"?te-=this.evalVisProp("el.keyboard.step")*Math.PI/180:G.key==="ArrowDown"&&(te+=this.evalVisProp("el.keyboard.step")*Math.PI/180)),this.evalVisProp("el.pointer.enabled")&&Q!==0&&G.key==null&&(te+=Q*Z),this.evalVisProp("el.continuous")&&!this.trackballEnabled?te=math.A.wrap(te,J,_):te>0?te=Math.min(_,te):te<0&&(te=Math.max(J,te)),this.setView(ee,te)),this},_bankEventHandler:function(G){var _,J=this.bank_slide._smax,Z=this.bank_slide._smin,Q=G.deltaY,ee=this.bank_slide.Value();return this.board.mode===this.board.BOARD_MODE_DRAG||(this.evalVisProp("bank.keyboard.enabled")&&(_=this.evalVisProp("bank.keyboard.step")*Math.PI/180,G.key==="."||G.key==="<"?ee-=_:G.key!==","&&G.key!==">"||(ee+=_)),this.evalVisProp("bank.pointer.enabled")&&Q!==0&&G.key==null&&(ee+=Q*((J-Z)/this.board.canvasHeight*this.evalVisProp("bank.pointer.speed")),G.preventDefault()),ee=this.evalVisProp("bank.continuous")?math.A.wrap(ee,Z,J):math.A.clamp(ee,Z,J),this.bank_slide.setValue(ee),this.board.update()),this},_trackballHandler:function(G){var _,J,Z,Q=this.board.getMousePosition(G);return Z=new base_coords.A(constants.A.COORDS_BY_USER,[this.llftCorner[0]+.5*this.size[0],this.llftCorner[1]+.5*this.size[1]],this.board),_=Q[0]-Z.scrCoords[1],J=Q[1]-Z.scrCoords[2],this._trackball={dx:G.movementX,dy:-G.movementY,x:_,y:-J},this.board.update(),this},pointerDownHandler:function(G){var _,J,Z;this._hasMoveAz=!1,this._hasMoveEl=!1,this._hasMoveBank=!1,this._hasMoveTrackball=!1,this.board.mode===this.board.BOARD_MODE_NONE&&(this.board._change3DView=!0,this.evalVisProp("trackball.enabled")?(_=this.evalVisProp("trackball.button"),J=this.evalVisProp("trackball.key"),_!==-1&&_!==G.button||!(J==="none"||J.indexOf("shift")>-1&&G.shiftKey||J.indexOf("ctrl")>-1&&G.ctrlKey)||(Z=this.evalVisProp("trackball.outside")?document:this.board.containerObj,env.A.addEvent(Z,"pointermove",this._trackballHandler,this),this._hasMoveTrackball=!0)):(this.evalVisProp("az.pointer.enabled")&&(_=this.evalVisProp("az.pointer.button"),J=this.evalVisProp("az.pointer.key"),_!==-1&&_!==G.button||!(J==="none"||J.indexOf("shift")>-1&&G.shiftKey||J.indexOf("ctrl")>-1&&G.ctrlKey)||(Z=this.evalVisProp("az.pointer.outside")?document:this.board.containerObj,env.A.addEvent(Z,"pointermove",this._azEventHandler,this),this._hasMoveAz=!0)),this.evalVisProp("el.pointer.enabled")&&(_=this.evalVisProp("el.pointer.button"),J=this.evalVisProp("el.pointer.key"),_!==-1&&_!==G.button||!(J==="none"||J.indexOf("shift")>-1&&G.shiftKey||J.indexOf("ctrl")>-1&&G.ctrlKey)||(Z=this.evalVisProp("el.pointer.outside")?document:this.board.containerObj,env.A.addEvent(Z,"pointermove",this._elEventHandler,this),this._hasMoveEl=!0)),this.evalVisProp("bank.pointer.enabled")&&(_=this.evalVisProp("bank.pointer.button"),J=this.evalVisProp("bank.pointer.key"),_!==-1&&_!==G.button||!(J==="none"||J.indexOf("shift")>-1&&G.shiftKey||J.indexOf("ctrl")>-1&&G.ctrlKey)||(Z=this.evalVisProp("bank.pointer.outside")?document:this.board.containerObj,env.A.addEvent(Z,"wheel",this._bankEventHandler,this,{passive:!1}),this._hasMoveBank=!0))),env.A.addEvent(document,"pointerup",this.pointerUpHandler,this))},pointerUpHandler:function(G){var _;this._hasMoveAz&&(_=this.evalVisProp("az.pointer.outside")?document:this.board.containerObj,env.A.removeEvent(_,"pointermove",this._azEventHandler,this),this._hasMoveAz=!1),this._hasMoveEl&&(_=this.evalVisProp("el.pointer.outside")?document:this.board.containerObj,env.A.removeEvent(_,"pointermove",this._elEventHandler,this),this._hasMoveEl=!1),this._hasMoveBank&&(_=this.evalVisProp("bank.pointer.outside")?document:this.board.containerObj,env.A.removeEvent(_,"wheel",this._bankEventHandler,this),this._hasMoveBank=!1),this._hasMoveTrackball&&(_=this.evalVisProp("trackball.outside")?document:this.board.containerObj,env.A.removeEvent(_,"pointermove",this._trackballHandler,this),this._hasMoveTrackball=!1),env.A.removeEvent(document,"pointerup",this.pointerUpHandler,this),this.board._change3DView=!1}}),jxg.A.createView3D=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue,de=_[0],me=_[1];return Q=utils_type.A.copyAttributes(J,G.options,"view3d"),(Z=new jxg.A.View3D(G,_,Q)).defaultAxes=Z.create("axes3d",[],Q),ie=de[0],re=de[1],oe=me[0],se=me[1],(ee=utils_type.A.copyAttributes(Q,G.options,"view3d","az","slider")).name="az",(te=utils_type.A.copyAttributes(Q,G.options,"view3d","el","slider")).name="el",(ne=utils_type.A.copyAttributes(Q,G.options,"view3d","bank","slider")).name="bank",ue=utils_type.A.evaluate(ee.point1.pos),ae=utils_type.A.isArray(ue)?ue:[ie-1,re-2],ue=utils_type.A.evaluate(ee.point2.pos),ce=utils_type.A.isArray(ue)?ue:[ie+oe+1,re-2],Z.az_slide=G.create("slider",[ae,ce,[utils_type.A.evaluate(ee.min),utils_type.A.evaluate(ee.start),utils_type.A.evaluate(ee.max)]],ee),Z.inherits.push(Z.az_slide),Z.az_slide.elType="view3d_slider",ue=utils_type.A.evaluate(te.point1.pos),ae=utils_type.A.isArray(ue)?ue:[ie-1,re],ue=utils_type.A.evaluate(te.point2.pos),ce=utils_type.A.isArray(ue)?ue:[ie-1,re+se],Z.el_slide=G.create("slider",[ae,ce,[utils_type.A.evaluate(te.min),utils_type.A.evaluate(te.start),utils_type.A.evaluate(te.max)]],te),Z.inherits.push(Z.el_slide),Z.el_slide.elType="view3d_slider",ue=utils_type.A.evaluate(ne.point1.pos),ae=utils_type.A.isArray(ue)?ue:[ie-1,re+se+2],ue=utils_type.A.evaluate(ne.point2.pos),ce=utils_type.A.isArray(ue)?ue:[ie+oe+1,re+se+2],Z.bank_slide=G.create("slider",[ae,ce,[utils_type.A.evaluate(ne.min),utils_type.A.evaluate(ne.start),utils_type.A.evaluate(ne.max)]],ne),Z.inherits.push(Z.bank_slide),Z.bank_slide.elType="view3d_slider",Z.board.infobox.visProp=utils_type.A.merge(Z.board.infobox.visProp,Q.infobox),Z.board.highlightInfobox=function(fe,_e,ye){var be,Se,Ce,Me,Re,Te,Ee="",De=ye.board,Le=null;for(this.mode===this.BOARD_MODE_DRAG&&(Ee=Z.isVerticalDrag()?'<span style="color:black; font-size:200%"> &nbsp;</span>':'<span style="color:black; font-size:200%"> &nbsp;</span>'),Se=0;Se<ye.parents.length&&!(Le=De.objects[ye.parents[Se]]).is3D;Se++);if(Le&&utils_type.A.exists(Le.element2D)){if(Me=[1,0,0,Le.coords[3]],Z._w0=math.A.innerProduct(Z.matrix3D[0],Me,4),Ce=Z.project2DTo3DPlane(Le.element2D,[1,0,0,1],Me),!Z.isInCube(Ce))return void Z.board.highlightCustomInfobox("",Le);be=Le.evalVisProp("infoboxdigits"),Te=Z.board.infobox,Re=be==="auto"?Te.useLocale()?[Ee,"(",Te.formatNumberLocale(Le.X())," | ",Te.formatNumberLocale(Le.Y())," | ",Te.formatNumberLocale(Le.Z()),")"]:[Ee,"(",utils_type.A.autoDigits(Le.X())," | ",utils_type.A.autoDigits(Le.Y())," | ",utils_type.A.autoDigits(Le.Z()),")"]:Te.useLocale()?[Ee,"(",Te.formatNumberLocale(Le.X(),be)," | ",Te.formatNumberLocale(Le.Y(),be)," | ",Te.formatNumberLocale(Le.Z(),be),")"]:[Ee,"(",utils_type.A.toFixed(Le.X(),be)," | ",utils_type.A.toFixed(Le.Y(),be)," | ",utils_type.A.toFixed(Le.Z(),be),")"],Z.board.highlightCustomInfobox(Re.join(""),Le)}else Z.board.highlightCustomInfobox("("+fe+", "+_e+")",ye)},Z.BOARD_MODE_NONE=0,env.A.addEvent(G.containerObj,"keydown",function(fe){var _e,ye=!1;!Z.evalVisProp("el.keyboard.enabled")||fe.key!=="ArrowUp"&&fe.key!=="ArrowDown"||((_e=Z.evalVisProp("el.keyboard.key"))==="none"||_e.indexOf("shift")>-1&&fe.shiftKey||_e.indexOf("ctrl")>-1&&fe.ctrlKey)&&(Z._elEventHandler(fe),ye=!0),!Z.evalVisProp("az.keyboard.enabled")||fe.key!=="ArrowLeft"&&fe.key!=="ArrowRight"||((_e=Z.evalVisProp("az.keyboard.key"))==="none"||_e.indexOf("shift")>-1&&fe.shiftKey||_e.indexOf("ctrl")>-1&&fe.ctrlKey)&&(Z._azEventHandler(fe),ye=!0),!Z.evalVisProp("bank.keyboard.enabled")||fe.key!==","&&fe.key!=="<"&&fe.key!=="."&&fe.key!==">"||((_e=Z.evalVisProp("bank.keyboard.key"))==="none"||_e.indexOf("shift")>-1&&fe.shiftKey||_e.indexOf("ctrl")>-1&&fe.ctrlKey)&&(Z._bankEventHandler(fe),ye=!0),fe.key==="PageUp"?(Z.nextView(),ye=!0):fe.key==="PageDown"&&(Z.previousView(),ye=!0),ye&&fe.preventDefault(),this.board._change3DView=!1},Z),env.A.addEvent(G.containerObj,"pointerdown",Z.pointerDownHandler,Z),Z.getAnglesFromSliders(),Z.matrix3DRot=Z.getRotationFromAngles(),Z.updateAngleSliderBounds(),Z.board.update(),Z},jxg.A.registerElement("view3d",jxg.A.createView3D),jxg.A.View3D,jxg.A.GeometryElement3D=function(G,_){this.elType=_,this.view=G,this.id=this.view.board.setId(this,_),this.element2D=null,this.is3D=!0,this.zIndex=0,this.view.objects[this.id]=this,this.name!==""&&(this.view.elementsByName[this.name]=this)},jxg.A.extend(jxg.A.GeometryElement3D.prototype,{setAttr2D:function(G){var _=G;return _.name=this.name,_.element3d=this,_.id=null,_},setAttribute:function(G){var _,J,Z,Q,ee,te={};for(_=0;_<arguments.length;_++)Q=arguments[_],utils_type.A.isString(Q)?(ee=Q.split(":"),te[utils_type.A.trim(ee[0])]=utils_type.A.trim(ee[1])):utils_type.A.isArray(Q)?te[Q[0]]=Q[1]:jxg.A.extend(te,Q);for(_ in te)if(te.hasOwnProperty(_))switch(J=_.replace(/\s+/g,"").toLowerCase(),Z=te[_],J){case"numberpointshigh":case"stepsu":case"stepsv":utils_type.A.exists(this.visProp[J])&&(!jxg.A.Validator[J]||jxg.A.Validator[J]&&jxg.A.Validator[J](Z)||jxg.A.Validator[J]&&utils_type.A.isFunction(Z)&&jxg.A.Validator[J](Z()))&&(Z=(!Z.toLowerCase||Z.toLowerCase()!=="false")&&Z,this._set(J,Z));break;default:utils_type.A.exists(this.element2D)&&this.element2D.setAttribute(te)}},getAttribute:function(G){var _;switch(G=G.toLowerCase()){case"numberpointshigh":case"stepsu":case"stepsv":_=this.visProp[G];break;default:utils_type.A.exists(this.element2D)&&(_=this.element2D.getAttribute(G))}return _},getAttributes:function(){var G,_,J={},Z=["numberpointshigh","stepsu","stepsv"],Q=Z.length;for(utils_type.A.exists(this.element2D)&&(J=utils_type.A.merge(this.element2D.getAttributes())),G=0;G<Q;G++)_=Z[G],utils_type.A.exists(this.visProp[_])&&(J[_]=this.visProp[_]);return J},addTransformGeneric:function(G,_){var J,Z=utils_type.A.isArray(_)?_:[_],Q=Z.length;for(this.transformations.length===0&&(this.baseElement=G),J=0;J<Q;J++)this.transformations.push(Z[J]);return this},setPosition2D:function(G){},projectCoords:function(G,_){},remove:function(){}}),jxg.A.GeometryElement3D,jxg.A.createAxes3D=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue,de,me,fe,_e,ye,be,Se=_[0],Ce=["x","y","z"],Me="Axis",Re=["Rear","Front"],Te=[0,0,0],Ee=[0,0,0],De={};if(utils_type.A.exists(Se.bbox3D))for(Z=0;Z<Ce.length;Z++)Te[Z]=Se.bbox3D[Z][0],Ee[Z]=Se.bbox3D[Z][1];else for(Z=0;Z<Ce.length;Z++)Te[Z]=_[1][Z],Ee[Z]=_[2][1];for(re=(ie=utils_type.A.copyAttributes(J,G.options,"axes3d")).axesposition,Z=0;Z<Ce.length;Z++)_e=(oe=Ce[Z])+Me,re==="center"?(ae=[0,0,0],(ce=[0,0,0])[Z]=Ee[Z],De[_e]=Se.create("axis3d",[ae,ce],ie[_e.toLowerCase()]),De[_e].view=Se):re==="border"&&(_e+="Border",ae=Te.slice(),ce=Ee.slice(),oe==="z"?(ae[1]=Ee[1],ce[0]=Te[0]):oe==="x"?(ae=[Te[0],Ee[1],Te[2]],ce=[Ee[0],Ee[1],Te[2]]):(ae=[Ee[0],Te[1],Te[2]],ce=[Ee[0],Ee[1],Te[2]]),ce[Z]=Ee[Z],De[_e]=Se.create("axis3d",[ae,ce],ie[_e.toLowerCase()]),De[_e].view=Se,(be=ie[_e.toLowerCase()].ticks3d).element3d=!0,se=Ee[Z]-Te[Z],De[_e+"Ticks"]=oe==="x"?Se.create("ticks3d",[ae,[1,0,0],se,[0,1,0]],be):oe==="y"?Se.create("ticks3d",[ae,[0,1,0],se,[1,0,0]],be):Se.create("ticks3d",[ae,[0,0,1],se,[0,1,0]],be),De[_e+"Ticks"].view=Se);for(re==="center"?(De.O=Se.create("intersection",[De[Ce[0]+Me],De[Ce[1]+Me]],{name:"",visible:!1,withLabel:!1}),De.O.view=Se):De.O=null,Z=0;Z<Ce.length;Z++)for(te=(Z+1)%3,ne=(Z+2)%3,oe=Ce[Z],Q=0;Q<Re.length;Q++)_e=oe+"Plane"+Re[Q],(ae=[0,0,0])[Z]=Q===0?Te[Z]:Ee[Z],de=[0,0,0],(ue=[0,0,0])[te]=1,de[ne]=1,me=[Te[te],Ee[te]],fe=[Te[ne],Ee[ne]],ie=utils_type.A.copyAttributes(J,G.options,"axes3d",_e),De[_e]=Se.create("plane3d",[ae,ue,de,me,fe],ie),De[_e].elType="axisplane3d";for(Z=0;Z<Ce.length;Z++)for(oe=Ce[Z],Q=0;Q<Re.length;Q++)for(ee=1;ee<=2;ee++)_e=oe+"Plane"+Re[Q]+Ce[te=(Z+ee)%3].toUpperCase()+"Axis",ye=oe+"Plane"+Re[Q],(ae=[0,0,0])[Z]=(ce=[0,0,0])[Z]=Q===0?Te[Z]:Ee[Z],ae[te]=Te[te],ce[te]=Ee[te],ie=utils_type.A.copyAttributes(J,G.options,"axes3d",_e),De[_e]=Se.create("axis3d",[ae,ce],ie),De[_e].view=Se,De[ye].addChild(De[_e]),De[ye].element2D.inherits.push(De[_e]);return De},jxg.A.registerElement("axes3d",jxg.A.createAxes3D),jxg.A.createAxis3D=function(G,_,J){var Z,Q,ee,te,ne,ie,re=_[0],oe=_[1],se=_[2];return(Z=utils_type.A.copyAttributes(J.point1,G.options,"axis3d","point1")).element3d=!0,Q=re.create("point",[(te=oe[0],ne=oe[1],ie=oe[2],function(){return re.project3DTo2D(te,ne,ie)[1]}),(function(ae,ce,ue){return function(){return re.project3DTo2D(ae,ce,ue)[2]}})(oe[0],oe[1],oe[2])],Z),(Z=utils_type.A.copyAttributes(J.point2,G.options,"axis3d","point2")).element3d=!0,ee=re.create("point",[(function(ae,ce,ue){return function(){return re.project3DTo2D(ae,ce,ue)[1]}})(se[0],se[1],se[2]),(function(ae,ce,ue){return function(){return re.project3DTo2D(ae,ce,ue)[2]}})(se[0],se[1],se[2])],Z),(Z=utils_type.A.copyAttributes(J,G.options,"axis3d")).element3d=!0,re.create("arrow",[Q,ee],Z)},jxg.A.registerElement("axis3d",jxg.A.createAxis3D),jxg.A.createMesh3D=function(G,_,J){var Z,Q,ee=_[0];return(Z=utils_type.A.copyAttributes(J,G.options,"mesh3d")).element3d=!0,(Q=ee.create("curve",[[],[]],Z)).point=_[1],Q.direction1=_[2],Q.direction2=_[3],Q.range1=_[4],Q.range2=_[5],Q.updateDataArray=function(){var te,ne,ie,re,oe=utils_type.A.evaluate(this.range1),se=utils_type.A.evaluate(this.range2),ae=oe[0],ce=oe[1],ue=se[0],de=se[1],me=[0,0,0],fe=[0,0,0],_e=this.evalVisProp("stepwidthu"),ye=this.evalVisProp("stepwidthv"),be=[0,0,0];if(this.dataX=[],this.dataY=[],utils_type.A.isFunction(this.point))be=this.point();else if(utils_type.A.isPoint3D(this.point))be=this.point.coords;else for(re=0;re<this.point.length;re++)be[re]=utils_type.A.evaluate(this.point[re]);if(utils_type.A.isFunction(this.direction1))me=utils_type.A.evaluate(this.direction1);else for(re=0;re<this.direction1.length;re++)me[re]=utils_type.A.evaluate(this.direction1[re]);if(utils_type.A.isFunction(this.direction2))fe=utils_type.A.evaluate(this.direction2);else for(re=0;re<this.direction2.length;re++)fe[re]=utils_type.A.evaluate(this.direction2[re]);for(be.length===4&&(be=be.slice(1)),me.length===4&&(me=me.slice(1)),fe.length===4&&(fe=fe.slice(1)),te=jxg.A.Math.norm(me,3),ne=jxg.A.Math.norm(fe,3),re=0;re<3;re++)me[re]/=te,fe[re]/=ne;ie=ee.getMesh([function(Se,Ce){return be[0]+Se*me[0]+Ce*fe[0]},function(Se,Ce){return be[1]+Se*me[1]+Ce*fe[1]},function(Se,Ce){return be[2]+Se*me[2]+Ce*fe[2]}],[Math.ceil(ae),Math.floor(ce),(Math.ceil(ce)-Math.floor(ae))/_e],[Math.ceil(ue),Math.floor(de),(Math.ceil(de)-Math.floor(ue))/ye]),this.dataX=ie[0],this.dataY=ie[1]},Q},jxg.A.registerElement("mesh3d",jxg.A.createMesh3D),jxg.A.Circle3D=function(G,_,J,Z,Q){var ee,te;this.constructor(G.board,Q,constants.A.OBJECT_TYPE_CIRCLE3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(G,"circle3d"),this.center=this.board.select(_),this.normalFunc=J,this.normal=[0,0,0,0],this.curve,this.frame1,this.frame2,utils_type.A.exists(this.center._is_new)?(this.addChild(this.center),delete this.center._is_new):this.center.addChild(this),this.updateRadius=utils_type.A.createFunction(Z,this.board),this.addParentsFromJCFunctions([this.updateRadius]),this.updateNormal(),this.frame1=math.A.crossProduct(this.normal.slice(1),[1,0,0]),this.frame1.unshift(0),(ee=math.A.crossProduct(this.normal.slice(1),[-.5,.8660254037844386,0])).unshift(0),math.A.norm(ee)>math.A.norm(this.frame1)&&(this.frame1=ee),this.frame2=math.A.crossProduct(this.normal.slice(1),this.frame1.slice(1)),this.frame2.unshift(0),this.normalizeFrame(),te=this,this.curve=G.create("curve3d",[function(ne){var ie=te.Radius(),re=Math.sin(ne),oe=Math.cos(ne);return[te.center.coords[1]+ie*(oe*te.frame1[1]+re*te.frame2[1]),te.center.coords[2]+ie*(oe*te.frame1[2]+re*te.frame2[2]),te.center.coords[3]+ie*(oe*te.frame1[3]+re*te.frame2[3])]},[0,2*Math.PI]],Q)},jxg.A.Circle3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Circle3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Circle3D.prototype,{update:function(){return this.needsUpdate&&(this.updateNormal().updateFrame(),this.curve.visProp.visible=!isNaN(this.Radius())),this},updateRenderer:function(){return this.needsUpdate=!1,this},setRadius:function(G){return this.updateRadius=utils_type.A.createFunction(G,this.board),this.addParentsFromJCFunctions([this.updateRadius]),this.board.update(),this},Radius:function(G){return utils_type.A.exists(G)?(this.setRadius(G),this.Radius()):Math.abs(this.updateRadius())},normalizeFrame:function(){var G,_=math.A.norm(this.frame1),J=math.A.norm(this.frame2);for(G=0;G<4;G++)this.frame1[G]/=_,this.frame2[G]/=J;return this},updateNormal:function(){var G,_;if(this.normal=utils_type.A.evaluate(this.normalFunc),_=math.A.norm(this.normal),Math.abs(_)>1e-12)for(G=0;G<4;G++)this.normal[G]/=_;return this},updateFrame:function(){return this.frame1=math.A.crossProduct(this.frame2.slice(1),this.normal.slice(1)),this.frame1.unshift(0),this.frame2=math.A.crossProduct(this.normal.slice(1),this.frame1.slice(1)),this.frame2.unshift(0),this.normalizeFrame(),this},projectCoords:function(G,_){return this.curve.projectCoords(G,_)}}),jxg.A.createCircle3D=function(G,_,J){var Z,Q=_[0],ee=utils_type.A.copyAttributes(J,G.options,"circle3d"),te=utils_type.A.providePoints3D(Q,[_[1]],J,"circle3d",["point"])[0],ne=_[2],ie=_[3];return(Z=new jxg.A.Circle3D(Q,te,ne,ie,ee)).curve.addParents([Z]),Z.addChild(Z.curve),Z.update(),Z},jxg.A.registerElement("circle3d",jxg.A.createCircle3D),jxg.A.createIntersectionCircle3D=function(G,_,J){var Z,Q,ee,te=_[0],ne=_[1],ie=_[2],re=utils_type.A.copyAttributes(J,G.options,"intersectioncircle3d");ee=geometry.A.intersectionFunction3D(te,ne,ie),Q=te.create("point3d",ee[0],{visible:!1}),Z=te.create("circle3d",[Q,ee[1],ee[2]],re);try{ne.addChild(Z),ie.addChild(Z)}catch{throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof _[1]+"' and '"+typeof _[2]+"'.")}return Z.type=constants.A.OBJECT_TYPE_INTERSECTION_CIRCLE3D,Z.elType="intersectioncircle3d",Z.setParents([ne.id,ie.id]),Z},jxg.A.registerElement("intersectioncircle3d",jxg.A.createIntersectionCircle3D),jxg.A.Point3D=function(G,_,J,Z){this.constructor(G.board,Z,constants.A.OBJECT_TYPE_POINT3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(G,"point3d"),this.board.finalizeAdding(this),this.coords=[0,0,0,0],this.initialCoords=[0,0,0,0],this.F=_,this.slide=J,this.position=[],this.movePath=[],this.moveCallback=null,this.moveInterval=null,this._c2d=null,this.methodMap=utils_type.A.deepCopy(this.methodMap,{})},jxg.A.Point3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Point3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Point3D.prototype,{X:function(){return this.coords[1]},Y:function(){return this.coords[2]},Z:function(){return this.coords[3]},W:function(){return this.coords[0]},updateCoords:function(){var G,_=0;if(utils_type.A.isFunction(this.F))this.coords=utils_type.A.evaluate(this.F),this.coords.length===3&&this.coords.unshift(1);else for(this.F.length===3&&(this.coords[0]=1,_=1),G=0;G<this.F.length;G++)utils_type.A.isFunction(this.F[G])&&(this.coords[_+G]=utils_type.A.evaluate(this.F[G]));return this},initCoords:function(){var G,_=0;if(utils_type.A.isFunction(this.F))this.coords=utils_type.A.evaluate(this.F),this.coords.length===3&&this.coords.unshift(1);else for(this.F.length===3&&(this.coords[0]=1,_=1),G=0;G<this.F.length;G++)this.coords[_+G]=utils_type.A.evaluate(this.F[G]);return this.initialCoords=this.coords.slice(),this},normalizeCoords:function(){return Math.abs(this.coords[0])>1e-14&&(this.coords[1]/=this.coords[0],this.coords[2]/=this.coords[0],this.coords[3]/=this.coords[0],this.coords[0]=1),this},setPosition:function(G,_){var J=this.coords;return G.length===3?(J[0]=1,J[1]=G[0],J[2]=G[1],J[3]=G[2]):(J[0]=G[0],J[1]=G[1],J[2]=G[2],J[3]=G[2],this.normalizeCoords()),this},addTransform:function(G,_){return this.addTransformGeneric(G,_),this},updateTransform:function(){var G,_;if(this.transformations.length===0||this.baseElement===null)return this;for(G=this===this.baseElement?this.initialCoords:this.baseElement.coords,_=0;_<this.transformations.length;_++)this.transformations[_].update(),G=math.A.matVecMult(this.transformations[_].matrix,G);return this.coords=G,this},update:function(G){var _,J,Z;return this.element2D.draggable()&&geometry.A.distance(this._c2d,this.element2D.coords.usrCoords)!==0?(this.view.isVerticalDrag()?_=this.view.project2DTo3DVertical(this.element2D,this.coords):(J=[1,0,0,this.coords[3]],_=this.view.project2DTo3DPlane(this.element2D,[1,0,0,1],J)),_[0]!==0&&(Z=this.view.project3DToCube(_),this.coords=Z[0],Z[1]&&this.element2D.coords.setCoordinates(constants.A.COORDS_BY_USER,this.view.project3DTo2D(this.coords)),this.slide&&(this.coords=this.slide.projectCoords([1,this.X(),this.Y(),this.Z()],this.position),this.element2D.coords.setCoordinates(constants.A.COORDS_BY_USER,this.view.project3DTo2D(this.coords))))):(this.updateCoords().updateTransform(),this.slide&&(this.coords=this.slide.projectCoords([1,this.X(),this.Y(),this.Z()],this.position)),_=this.coords,this.element2D.coords.setCoordinates(constants.A.COORDS_BY_USER,this.view.project3DTo2D(_)),this.zIndex=math.A.innerProduct(this.view.matrix3DRotShift[3],_)),this._c2d=this.element2D.coords.usrCoords.slice(),this},updateRenderer:function(){return this.needsUpdate=!1,this},testIfFinite:function(){return Math.abs(this.coords[0])>1e-12},distance:function(G){var _=this.coords,J=G.coords;return _[0]*_[0]>1e-12&&J[0]*J[0]>1e-12?math.A.hypot(J[1]-_[1],J[2]-_[2],J[3]-_[3]):Number.POSITIVE_INFINITY},moveTo:function(G,_,J){J=J||{};var Z,Q,ee=Math.ceil(_/this.board.attr.animationdelay),te=G[0],ne=G[1],ie=G[2],re=this.coords[1]-te,oe=this.coords[2]-ne,se=this.coords[3]-ie,ae=()=>{};if(J.callback&&(ae=J.callback),Q=function(ce){var ue=ce/ee;if(J.effect){if(J.effect==="<>")return Math.pow(Math.sin(ue*Math.PI/2),2);if(J.effect==="<")return ue*ue*ue;if(J.effect===">")return 1-Math.pow(1-ue,3);if(J.effect==="==")return ce/ee;throw new Error("valid effects are '==', '<>', '>', and '<'.")}return ce/ee},!utils_type.A.exists(_)||_===0)return this.setPosition([te,ne,ie],!0),this.board.update(this);if(!utils_type.A.exists(J.callback)&&Math.abs(re)<math.A.eps&&Math.abs(oe)<math.A.eps&&Math.abs(se)<math.A.eps)return this;for(this.animationPath=[],Z=ee;Z>=0;Z--)this.animationPath[ee-Z]=[te+re*Q(Z),ne+oe*Q(Z),ie+se*Q(Z)];return this.moveAlong(this.animationPath,_,{callback:ae})},moveAlong:function(G,_,J){let Z=_/G.length;if(utils_type.A.isObject(J)&&"callback"in J&&(this.moveCallback=J.callback),!(this.movePath.length>0))return this.movePath=G,new Promise((Q,ee)=>{this.moveInterval=setInterval(()=>{if(this.movePath.length>0){let te=this.movePath.shift();this.setPosition(te,!0),this.board.update(this)}this.movePath.length===0&&(clearInterval(this.moveInterval),Q(),utils_type.A.isFunction(this.moveCallback)&&this.moveCallback())},Z)});this.movePath=G},__evt__update3D:function(G){}}),jxg.A.createPoint3D=function(G,_,J){var Z,Q,ee,te,ne,ie=_[0],re=null,oe=null;if(ee=_.length>2&&utils_type.A.exists(_[_.length-1].is3D)&&!utils_type.A.isTransformationOrArray(_[_.length-1])?_.pop():null,_.length===2)Q=_[1];else if(_.length===3&&utils_type.A.isPoint3D(_[1])&&utils_type.A.isTransformationOrArray(_[2]))Q=[0,0,0],re=_[1],oe=_[2];else if(_.length===4)Q=_.slice(1);else{if(_.length!==5)throw new Error("JSXGraph: Can't create point3d with parent types '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [[x,y,z]], [x,y,z], or [[x,y,z], slide], () => [x, y, z], or [point, transformation(s)]`);Q=_.slice(1)}return Z=utils_type.A.copyAttributes(J,G.options,"point3d"),(ne=new jxg.A.Point3D(ie,Q,ee,Z)).initCoords(),re!==null&&oe!==null&&ne.addTransform(re,oe),te=ie.project3DTo2D(ne.coords),Z=ne.setAttr2D(Z),ne.element2D=ie.create("point",te,Z),ne.element2D.view=ie,ne.addChild(ne.element2D),ne.inherits.push(ne.element2D),ne.element2D.setParents(ne),ne.slide&&(ne.slide.addChild(ne),ne.setParents(ne.slide)),re&&ne.setParents(re),ne._c2d=ne.element2D.coords.usrCoords.slice(),ne},jxg.A.registerElement("point3d",jxg.A.createPoint3D),jxg.A.Curve3D=function(G,_,J,Z,Q,ee,te){this.constructor(G.board,te,constants.A.OBJECT_TYPE_CURVE3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(G,"curve3d"),this.board.finalizeAdding(this),this._F=_,this._X=J,this._Y=Z,this._Z=Q,this.points=[],this.numberPoints=0,this.dataX=null,this.dataY=null,this.dataZ=null,this._F!==null?(this._X=function(ne){return this._F(ne)[0]},this._Y=function(ne){return this._F(ne)[1]},this._Z=function(ne){return this._F(ne)[2]}):utils_type.A.isFunction(this._X)?this._F=function(ne){return[this._X(ne),this._Y(ne),this._Z(ne)]}:this._F=null,this.range=ee,this.methodMap=utils_type.A.deepCopy(this.methodMap,{})},jxg.A.Curve3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Curve3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Curve3D.prototype,{updateCoords:function(){var G,_,J,Z,Q,ee,te=this.evalVisProp("numberpointshigh"),ne=[1,0,0,0];if(this.points=[],utils_type.A.exists(this.dataX))for(te=this.dataX.length,Q=0;Q<te;Q++)this.points.push([1,this.dataX[Q],this.dataY[Q],this.dataZ[Q]]);else if(utils_type.A.isArray(this._X))for(te=this._X.length,Q=0;Q<te;Q++)this.points.push([1,this._X[Q],this._Y[Q],this._Z[Q]]);else for(G=utils_type.A.evaluate(this.range),_=utils_type.A.evaluate(G[0]),Z=((J=utils_type.A.evaluate(G[1]))-_)/(te-1),ee=0,Q=_;ee<te&&Q<=J;ee++,Q+=Z)(ne=this.F(Q)).unshift(1),this.points.push(ne);return this.numberPoints=this.points.length,this},evalF:function(G){var _,J,Z=[0,0,0,0];if(this.transformations.length===0||!utils_type.A.exists(this.baseElement))return Z=utils_type.A.exists(this._F)?this._F(G):[this._X[G],this._Y[G],this._Z[G]];for(_=this.transformations,J=0;J<_.length;J++)_[J].update();for(Z.length===3&&Z.unshift(1),(Z=this===this.baseElement?utils_type.A.exists(this._F)?this._F(G):[this._X[G],this._Y[G],this._Z[G]]:this.baseElement.evalF(G)).unshift(1),Z=math.A.matVecMult(_[0].matrix,Z),J=1;J<_.length;J++)Z=math.A.matVecMult(_[J].matrix,Z);return Z.slice(1)},F:function(G){return this.evalF(G)},X:function(G){return this.evalF(G)[0]},Y:function(G){return this.evalF(G)[1]},Z:function(G){return this.evalF(G)[2]},updateDataArray2D:function(){var G,_,J=[],Z=[],Q=this.points.length;for(G=0;G<Q;G++)_=this.view.project3DTo2D(this.points[G]),J.push(_[1]),Z.push(_[2]);return{X:J,Y:Z}},addTransform:function(G,_){return this.addTransformGeneric(G,_),this},updateTransform:function(){var G,_,J,Z,Q;if(this.transformations.length===0||this.baseElement===null||utils_type.A.exists(this._F))return this;for(G=this.transformations,J=0;J<G.length;J++)G[J].update();for(Q=this.baseElement.numberPoints,J=0;J<Q;J++){for(_=this===this.baseElement?this.points[J]:this.baseElement.points[J],Z=0;Z<G.length;Z++)_=math.A.matVecMult(G[Z].matrix,_);this.points[J]=_}return this.numberPoints=Q,this},updateDataArray:function(){},update:function(){return this.needsUpdate&&(this.updateDataArray(),this.updateCoords().updateTransform()),this},updateRenderer:function(){return this.needsUpdate=!1,this},projectCoords:function(G,_){return geometry.A.projectCoordsToParametric(G,this,1,_)}}),jxg.A.createCurve3D=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se=_[0],ae=null,ce=null;return _.length===3?utils_type.A.isTransformationOrArray(_[2])&&_[1].type===constants.A.OBJECT_TYPE_CURVE3D?(ae=_[1],ce=_[2],Z=null,Q=[],ee=[],te=[]):(Z=_[1],ne=_[2],Q=null,ee=null,te=null):_.length===2&&utils_type.A.isArray(_[1])?(Q=(oe=math.A.transpose(_[1]))[0],ee=oe[1],te=oe[2],Z=null):(Q=_[1],ee=_[2],te=_[3],ne=_[4],Z=null),ie=utils_type.A.copyAttributes(J,G.options,"curve3d"),ie=(re=new jxg.A.Curve3D(se,Z,Q,ee,te,ne,ie)).setAttr2D(ie),re.element2D=se.create("curve",[[],[]],ie),re.element2D.view=se,ae!==null&&(re.addTransform(ae,ce),re.addParents(ae)),re.element2D.updateDataArray=function(){var ue=re.updateDataArray2D();this.dataX=ue.X,this.dataY=ue.Y},re.addChild(re.element2D),re.inherits.push(re.element2D),re.element2D.setParents(re),re.element2D.prepareUpdate().update(),G.isSuspendedUpdate||re.element2D.updateVisibility().updateRenderer(),re},jxg.A.registerElement("curve3d",jxg.A.createCurve3D),jxg.A.createVectorfield3D=function(G,_,J){var Z,Q,ee=_[0];if(!(_.length>=5&&(utils_type.A.isArray(_[1])||utils_type.A.isFunction(_[1])||utils_type.A.isString(_[1]))&&utils_type.A.isArray(_[2])&&_[1].length===3&&utils_type.A.isArray(_[3])&&_[2].length===3&&utils_type.A.isArray(_[4])&&_[3].length===3))throw new Error("JSXGraph: Can't create vector field 3D with parent types '"+typeof _[1]+"', '"+typeof _[2]+"', '"+typeof _[3]+"'.'"+typeof _[4]+"', ");return Q=utils_type.A.copyAttributes(J,G.options,"vectorfield3d"),(Z=ee.create("curve3d",[[],[],[]],Q)).setF=function(te,ne){var ie,re,oe;return utils_type.A.isArray(te)?(ie=utils_type.A.createFunction(te[0],this.board,ne),re=utils_type.A.createFunction(te[1],this.board,ne),oe=utils_type.A.createFunction(te[2],this.board,ne),this.F=function(se,ae,ce){return[ie(se,ae,ce),re(se,ae,ce),oe(se,ae,ce)]}):this.F=utils_type.A.createFunction(te,Z.board,ne),this},Z.setF(_[1],"x, y, z"),Z.xData=_[2],Z.yData=_[3],Z.zData=_[4],Z.updateDataArray=function(){var te,ne,ie,re,oe,se,ae,ce,ue,de,me,fe,_e,ye,be,Se,Ce,Me=this.evalVisProp("scale"),Re=[utils_type.A.evaluate(this.xData[0]),utils_type.A.evaluate(this.yData[0]),utils_type.A.evaluate(this.zData[0])],Te=[utils_type.A.evaluate(this.xData[1]),utils_type.A.evaluate(this.yData[1]),utils_type.A.evaluate(this.zData[1])],Ee=[utils_type.A.evaluate(this.xData[2]),utils_type.A.evaluate(this.yData[2]),utils_type.A.evaluate(this.zData[2])],De=[(Ee[0]-Re[0])/Te[0],(Ee[1]-Re[1])/Te[1],(Ee[2]-Re[2])/Te[2]],Le=this.evalVisProp("arrowhead.enabled");for(Le&&(_e=this.evalVisProp("arrowhead.size"),Ce=this.evalVisProp("arrowhead.angle"),ye=_e/G.unitX,be=_e/G.unitY,Se=_e/Math.sqrt(G.unitX*G.unitY)),this.dataX=[],this.dataY=[],this.dataZ=[],ne=0,se=Re[0];ne<=Te[0];se+=De[0],ne++)for(ie=0,ae=Re[1];ie<=Te[1];ae+=De[1],ie++)for(te=0,ce=Re[2];te<=Te[2];ce+=De[2],te++)re=this.F(se,ae,ce),(oe=math.A.norm(re))<Number.EPSILON||(re[0]*=Me,re[1]*=Me,re[2]*=Me,utils_type.A.concat(this.dataX,[se,se+re[0],NaN]),utils_type.A.concat(this.dataY,[ae,ae+re[1],NaN]),utils_type.A.concat(this.dataZ,[ce,ce+re[2],NaN]),Le&&(oe*=Me,ue=Math.atan2(re[1],re[0]),de=(fe=Math.asin(re[2]/oe))-Ce,me=fe+Ce,utils_type.A.concat(this.dataX,[se+re[0]-ye*Math.cos(ue)*Math.cos(de),se+re[0],se+re[0]-ye*Math.cos(ue)*Math.cos(me),NaN]),utils_type.A.concat(this.dataY,[ae+re[1]-be*Math.sin(ue)*Math.cos(de),ae+re[1],ae+re[1]-be*Math.sin(ue)*Math.cos(me),NaN]),utils_type.A.concat(this.dataZ,[ce+re[2]-Se*Math.sin(me),ce+re[2],ce+re[2]-Se*Math.sin(de),NaN])))},Z.methodMap=utils_type.A.deepCopy(Z.methodMap,{setF:"setF"}),Z},jxg.A.registerElement("vectorfield3D",jxg.A.createVectorfield3D),jxg.A.Line3D=function(G,_,J,Z,Q){this.constructor(G.board,Q,constants.A.OBJECT_TYPE_LINE3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(G,"line3d"),this.point=_,this.direction=J,this.vec=[0,0,0,0],this.range=Z||[-1/0,1/0],this.point1=null,this.point2=null,this.board.finalizeAdding(this),this.methodMap=utils_type.A.deepCopy(this.methodMap,{})},jxg.A.Line3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Line3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Line3D.prototype,{updateCoords:function(){var G,_=0;if(utils_type.A.exists(this.direction.view)&&this.direction.type===constants.A.OBJECT_TYPE_LINE3D)this.vec=this.direction.vec.slice();else if(utils_type.A.isFunction(this.direction))this.vec=utils_type.A.evaluate(this.direction),this.vec.length===3&&this.vec.unshift(0);else for(this.direction.length===3&&(this.vec[0]=0,_=1),G=0;G<this.direction.length;G++)this.vec[_+G]=utils_type.A.evaluate(this.direction[G]);return this},getPointCoords:function(G){var _,J,Z;return _=this.point.coords,J=this.vec,Z=utils_type.A.evaluate(G),G=this.view.intersectionLineCube(_,J,Z),Math.abs(G)===1/0&&(G=0),[_[0]+J[0]*G,_[1]+J[1]*G,_[2]+J[2]*G,_[3]+J[3]*G]},addTransform:function(G,_){return this.point.addTransform(G.point,_),this.addTransformGeneric(G,_),this},updateTransform:function(){var G,_;if(this.transformations.length===0||this.baseElement===null)return this;for(G=this===this.baseElement?this.vec:this.baseElement.vec,_=0;_<this.transformations.length;_++)this.transformations[_].update(),G=math.A.matVecMult(this.transformations[_].matrix,G);return this.vec=G,this},update:function(){return this.needsUpdate&&this.updateCoords().updateTransform(),this},setPosition2D:function(G){var _,J;for(_=0;_<this.parents.length;_++)(J=this.view.select(this.parents[_])).elType==="point3d"&&J.element2D.draggable()&&G.applyOnce(J.element2D);this.endpoints[0].update(),this.endpoints[1].update()},updateRenderer:function(){return this.needsUpdate=!1,this},projectCoords:function(G,_){var J,Z=this.getPointCoords(0),Q=this.getPointCoords(1),ee=[Q[0]-Z[0],Q[1]-Z[1],Q[2]-Z[2]],te=[G[0]-Z[0],G[1]-Z[1],G[2]-Z[2]],ne=math.A.innerProduct(te,ee)/math.A.innerProduct(ee,ee),ie=Math.min(Math.max(ne,utils_type.A.evaluate(this.range[0])),utils_type.A.evaluate(this.range[1]));return J=this.getPointCoords(ie).slice(),_[0]=ie,J},updateZIndex:function(){var G=this.endpoints[0],_=this.endpoints[1],J=[1,G.X()+_.X(),G.Y()+_.Y(),G.Z()+_.Z()];return J[1]*=.5,J[2]*=.5,J[3]*=.5,this.zIndex=math.A.innerProduct(this.view.matrix3DRotShift[3],J),this}}),jxg.A.createLine3D=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae=_[0],ce=null,ue=null;if(Z=utils_type.A.copyAttributes(J,G.options,"line3d"),_[1].type===constants.A.OBJECT_TYPE_LINE3D&&utils_type.A.isTransformationOrArray(_[2])&&(ce=_[1],ue=_[2],Q=utils_type.A.providePoints3D(ae,[[0,0,0,0],[0,0,0,0]],J,"line3d",["point1","point2"])),ce===null&&(utils_type.A.isPoint3D(_[2])||_.length===3&&(utils_type.A.isArray(_[2])||utils_type.A.isFunction(_[2]))))ie=utils_type.A.providePoints3D(ae,[_[1]],J,"line3d",["point1"])[0],re=utils_type.A.providePoints3D(ae,[_[2]],J,"line3d",["point2"])[0],te=function(){return[0,re.X()-ie.X(),re.Y()-ie.Y(),re.Z()-ie.Z()]},ne=[0,1],(se=new jxg.A.Line3D(ae,ie,te,ne,Z)).prepareUpdate().update(),(oe=utils_type.A.providePoints3D(ae,[[1,0,0,0],[1,0,0,0]],{visible:!0},"line3d",["point1","point2"]))[0].F=function(){var de=0;return se.evalVisProp("straightfirst")&&(de=-1/0),se.getPointCoords(de)},oe[1].F=function(){var de=1;return se.evalVisProp("straightlast")&&(de=1/0),se.getPointCoords(de)},oe[0].prepareUpdate().update(),oe[1].prepareUpdate().update(),(Z=se.setAttr2D(Z)).straightfirst=!1,Z.straightlast=!1,se.element2D=ae.create("segment",[oe[0].element2D,oe[1].element2D],Z),se.element2D.view=ae,se.endpoints=oe,se.addChild(oe[0]),se.addChild(oe[1]),se.addParents([ie,re]);else{if(ce!==null)ee=utils_type.A.providePoints3D(ae,[[0,0,0]],J,"line3d",["point"])[0],te=[0,0,0,1e-4],ne=_[3]||[-1/0,1/0];else{if(!(utils_type.A.exists(_[2].view)&&_[2].type===constants.A.OBJECT_TYPE_LINE3D||utils_type.A.isFunction(_[2])||_[2].length===3||_[2].length===4))throw new Error("JSXGraph: Can't create line3d with parents of type '"+typeof _[1]+", "+typeof _[2]+", "+typeof _[3]+"'.");ee=utils_type.A.providePoints3D(ae,[_[1]],J,"line3d",["point"])[0],te=_[2],ne=_[3]}Q=utils_type.A.providePoints3D(ae,[[1,0,0,0],[1,0,0,0]],J,"line3d",["point1","point2"]),(se=new jxg.A.Line3D(ae,ee,te,ne,Z)).prepareUpdate().update(),Q[0].F=function(){return se.getPointCoords(utils_type.A.evaluate(se.range[0]))},Q[0].prepareUpdate().update(),ie=Q[0],Q[1].F=function(){return se.getPointCoords(utils_type.A.evaluate(se.range[1]))},Q[1].prepareUpdate().update(),re=Q[1],(Z=se.setAttr2D(Z)).straightfirst=!1,Z.straightlast=!1,se.element2D=ae.create("segment",[ie.element2D,re.element2D],Z),se.element2D.view=ae,se.endpoints=Q,se.addParents(ee),ce!==null&&ue!==null&&(se.addTransform(ce,ue),se.addParents(ce))}return se.addChild(se.element2D),se.inherits.push(se.element2D),se.element2D.addParents(se),se.point1=ie,se.point2=re,se.point1._is_new?(se.addChild(se.point1),delete se.point1._is_new):se.point1.addChild(se),se.point2._is_new?(se.addChild(se.point2),delete se.point2._is_new):se.point2.addChild(se),utils_type.A.exists(ee)&&(ee._is_new?(se.addChild(ee),delete ee._is_new):ee.addChild(se)),se.update(),se.element2D.prepareUpdate().update().updateRenderer(),se},jxg.A.registerElement("line3d",jxg.A.createLine3D),jxg.A.Plane3D=function(G,_,J,Z,Q,ee,te){this.constructor(G.board,te,constants.A.OBJECT_TYPE_PLANE3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(G,"plane3d"),this.board.finalizeAdding(this),this.point=_,this.direction1=J,this.direction2=Q,this.range_u=Z||[-1/0,1/0],this.range_v=ee||[-1/0,1/0],this.vec1=[0,0,0,0],this.vec2=[0,0,0,0],this.mesh3d=null,this.normal=[0,0,0,0],this.d=0,this.updateCoords(),this.updateNormal(),this.methodMap=utils_type.A.deepCopy(this.methodMap,{})},jxg.A.Plane3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Plane3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Plane3D.prototype,{F:function(G,_){var J,Z,Q,ee,te;for(Z=this.vec1.slice(),Q=this.vec2.slice(),ee=math.A.norm(Z,3),te=math.A.norm(Q,3),J=0;J<3;J++)Z[J]/=ee,Q[J]/=te;return[this.point.X()+G*Z[0]+_*Q[0],this.point.Y()+G*Z[1]+_*Q[1],this.point.Z()+G*Z[2]+_*Q[2]]},X:function(G,_){return this.F(G,_)[0]},Y:function(G,_){return this.F(G,_)[1]},Z:function(G,_){return this.F(G,_)[2]},updateCoords:function(){var G,_;if(utils_type.A.exists(this.direction1.view)&&this.direction1.type===constants.A.OBJECT_TYPE_LINE3D)this.vec1=this.direction1.vec.slice();else if(utils_type.A.isFunction(this.direction1))this.vec1=utils_type.A.evaluate(this.direction1),this.vec1.length===3&&this.vec1.unshift(0);else for(_=0,this.direction1.length===3&&(this.vec1[0]=0,_=1),G=0;G<this.direction1.length;G++)this.vec1[_+G]=utils_type.A.evaluate(this.direction1[G]);if(utils_type.A.exists(this.direction2.view)&&this.direction2.type===constants.A.OBJECT_TYPE_LINE3D)this.vec2=this.direction2.vec.slice();else if(utils_type.A.isFunction(this.direction2))this.vec2=utils_type.A.evaluate(this.direction2),this.vec2.length===3&&this.vec2.unshift(0);else for(_=0,this.direction2.length===3&&(this.vec2[0]=0,_=1),G=0;G<this.direction2.length;G++)this.vec2[_+G]=utils_type.A.evaluate(this.direction2[G]);return this},updateNormal:function(){var G,_;if(this.needsUpdate,this.normal=math.A.crossProduct(this.vec1.slice(1),this.vec2.slice(1)),_=math.A.norm(this.normal),Math.abs(_)>math.A.eps*math.A.eps)for(G=0;G<3;G++)this.normal[G]/=_;return this.normal.unshift(0),this.d=math.A.innerProduct(this.point.coords,this.normal,4),this},updateDataArray:function(){var G,_,J,Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue=["xPlaneRear","yPlaneRear","zPlaneRear"],de=[],me=[0,0,0],fe=[0,0,0],_e=[0,0,0],ye=[0,0,0],be=1e-12,Se=this.view;if(this.dataX=[],this.dataY=[],this.updateNormal(),this.elType!=="axisplane3d"&&Se.defaultAxes&&utils_type.A.evaluate(this.range_u[0])===-1/0&&utils_type.A.evaluate(this.range_u[1])===1/0&&utils_type.A.evaluate(this.range_v[0])===-1/0&&utils_type.A.evaluate(this.range_v[1])===1/0){for(re=0;re<ue.length;re++){if((ye=Se.intersectionPlanePlane(this,Se.defaultAxes[ue[re]]))[0]!==!1&&ye[1]!==!1){for(ie=0;ie<de.length&&!(geometry.A.distance(ye[0],de[ie][0],4)<be&&geometry.A.distance(ye[1],de[ie][1],4)<be||geometry.A.distance(ye[0],de[ie][1],4)<be&&geometry.A.distance(ye[1],de[ie][0],4)<be);ie++);ie===de.length&&de.push(ye.slice())}if((ye=[1,0,0,0])[re+1]=Se.bbox3D[re][1],ne=math.A.innerProduct(ye,Se.defaultAxes[ue[re]].normal,4),(ye=Se.intersectionPlanePlane(this,Se.defaultAxes[ue[re]],ne))[0]!==!1&&ye[1]!==!1){for(ie=0;ie<de.length&&!(geometry.A.distance(ye[0],de[ie][0],4)<be&&geometry.A.distance(ye[1],de[ie][1],4)<be||geometry.A.distance(ye[0],de[ie][1],4)<be&&geometry.A.distance(ye[1],de[ie][0],4)<be);ie++);ie===de.length&&de.push(ye.slice())}}if(de.length===0)return{X:this.dataX,Y:this.dataY};ae=0,ie=0;do{for((ye=de[ae][ie]).length===4&&(Q=Se.project3DTo2D(ye),this.dataX.push(Q[1]),this.dataY.push(Q[2])),ie=(ie+1)%2,ye=de[ae][ie],ce=ae,re=0;re<de.length;re++){if(re!==ae&&geometry.A.distance(ye,de[re][0])<be){ae=re,ie=0;break}if(re!==ae&&geometry.A.distance(ye,de[re][1])<be){ae=re,ie=1;break}}if(ae===ce){console.log("Error plane3d update: did not find next",ae);break}}while(ae!==0);Q=Se.project3DTo2D(de[0][0]),this.dataX.push(Q[1]),this.dataY.push(Q[2])}else{for(G=utils_type.A.evaluate(this.range_u[0]),_=utils_type.A.evaluate(this.range_u[1]),J=utils_type.A.evaluate(this.range_v[0]),Z=utils_type.A.evaluate(this.range_v[1]),_e=this.point.coords,me=this.vec1.slice(),fe=this.vec2.slice(),ee=math.A.norm(me,4),te=math.A.norm(fe,4),ie=1;ie<4;ie++)me[ie]/=ee,fe[ie]/=te;for(re=0;re<4;re++){switch(re){case 0:oe=G,se=J;break;case 1:oe=_,se=J;break;case 2:oe=_,se=Z;break;case 3:oe=G,se=Z}for(ie=0;ie<4;ie++)ye[ie]=_e[ie]+oe*me[ie]+se*fe[ie];Q=Se.project3DTo2D(ye),this.dataX.push(Q[1]),this.dataY.push(Q[2])}this.dataX.push(this.dataX[0]),this.dataY.push(this.dataY[0])}return{X:this.dataX,Y:this.dataY}},addTransform:function(G,_){return this.addTransformGeneric(G,_),this.point.addTransform(G.point,_),this},updateTransform:function(){var G,_,J;if(this.transformations.length===0||this.baseElement===null)return this;for(this===this.baseElement?(G=this.vec1,_=this.vec2):(G=this.baseElement.vec1,_=this.baseElement.vec2),J=0;J<this.transformations.length;J++)this.transformations[J].update(),G=math.A.matVecMult(this.transformations[J].matrix,G),_=math.A.matVecMult(this.transformations[J].matrix,_);return this.vec1=G,this.vec2=_,this},update:function(){return this.needsUpdate&&this.updateCoords().updateTransform(),this},updateRenderer:function(){return this.needsUpdate=!1,this},projectCoords:function(G,_){return geometry.A.projectCoordsToParametric(G,this,2,_)}}),jxg.A.createPlane3D=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,ce=_[0],ue=null,de=null;if((Z=utils_type.A.copyAttributes(J,G.options,"plane3d")).threepoints||utils_type.A.isPoint3D(_[2])||utils_type.A.isPoint3D(_[3]))Q=utils_type.A.providePoints3D(ce,[_[1]],J,"plane3d",["point1"])[0],ee=utils_type.A.providePoints3D(ce,[_[2]],J,"plane3d",["point2"])[0],te=utils_type.A.providePoints3D(ce,[_[3]],J,"plane3d",["point3"])[0],ne=function(){return[ee.X()-Q.X(),ee.Y()-Q.Y(),ee.Z()-Q.Z()]},ie=function(){return[te.X()-Q.X(),te.Y()-Q.Y(),te.Z()-Q.Z()]},re=_[4]||[-1/0,1/0],oe=_[5]||[-1/0,1/0];else{if(_[1].type===constants.A.OBJECT_TYPE_PLANE3D&&utils_type.A.isTransformationOrArray(_[2])?(ue=_[1],de=_[2],Q=utils_type.A.providePoints3D(ce,[[0,0,0,0]],J,"plane3d",["point"])[0],ne=[0,1e-4,0,0],ie=[0,0,1e-4,0],re=_[3]||[-1/0,1/0],oe=_[4]||[-1/0,1/0]):(Q=utils_type.A.providePoints3D(ce,[_[1]],J,"plane3d",["point"])[0],ne=_[2],ie=_[3],re=_[4]||[-1/0,1/0],oe=_[5]||[-1/0,1/0]),Q===!1)throw new Error("JSXGraph: Can't create plane3d with first parent of type '"+typeof _[1]+`'.
Possible first parent types are: point3d, array of length 3, function returning an array of length 3.`);if(ue!==null&&_<3||ue===null&&_.length<4)throw new Error("JSXGraph: Can't create plane3d with parents of type '"+typeof _[1]+", "+typeof _[2]+", "+typeof _[3]+", "+typeof _[4]+", "+typeof _[5]+"'.")}return se=new jxg.A.Plane3D(ce,Q,ne,re,ie,oe,Z),Q.addChild(se),Z=se.setAttr2D(Z),se.element2D=ce.create("curve",[[],[]],Z),se.element2D.view=ce,ue!==null&&de!==null&&(se.addTransform(ue,de),se.addParents(ue)),se.element2D.updateDataArray=function(){var me=se.updateDataArray();this.dataX=me.X,this.dataY=me.Y},se.addChild(se.element2D),se.inherits.push(se.element2D),se.element2D.setParents(se),Math.abs(se.range_u[0])!==1/0&&Math.abs(se.range_u[1])!==1/0&&Math.abs(se.range_v[0])!==1/0&&Math.abs(se.range_v[1])!==1/0&&(Z=utils_type.A.copyAttributes(Z.mesh3d,G.options,"mesh3d"),ae=ce.create("mesh3d",[function(){return Q.coords},function(){return se.vec1},function(){return se.vec2},se.range_u,se.range_v],Z),se.mesh3d=ae,se.addChild(ae),se.inherits.push(ae),se.element2D.inherits.push(ae),ae.setParents(se),se.mesh3d.view=ce),se.element2D.prepareUpdate().update(),G.isSuspendedUpdate||se.element2D.updateVisibility().updateRenderer(),se},jxg.A.registerElement("plane3d",jxg.A.createPlane3D),jxg.A.createIntersectionLine3D=function(G,_,J){var Z,Q,ee,te=_[0],ne=_[1],ie=_[2],re=utils_type.A.copyAttributes(J,G.options,"intersectionline3d"),oe=[];for(ee=geometry.A.intersectionFunction3D(te,ne,ie),Q=0;Q<2;Q++)oe[Q]=te.create("point3d",ee[Q],re["point"+(Q+1)]);Z=te.create("line3d",oe,re);try{ne.addChild(Z),ie.addChild(Z)}catch{throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof _[1]+"' and '"+typeof _[2]+"'.")}return Z.type=constants.A.OBJECT_TYPE_INTERSECTION_LINE3D,Z.elType="intersectionline3d",Z.setParents([ne.id,ie.id]),Z},jxg.A.registerElement("intersectionline3d",jxg.A.createIntersectionLine3D),jxg.A.Text3D=function(G,_,J,Z,Q){this.constructor(G.board,Q,constants.A.OBJECT_TYPE_TEXT3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(G,"text3d"),this.board.finalizeAdding(this),this.coords=[0,0,0,0],this.F=_,this.slide=Z,this.X=function(){return this.coords[1]},this.Y=function(){return this.coords[2]},this.Z=function(){return this.coords[3]},this.position=[],this._c2d=null,this.methodMap=utils_type.A.deepCopy(this.methodMap,{})},jxg.A.Text3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Text3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Text3D.prototype,{updateCoords:function(){var G;if(utils_type.A.isFunction(this.F))this.coords=utils_type.A.evaluate(this.F),this.coords.unshift(1);else for(this.coords[0]=1,G=0;G<3;G++)utils_type.A.isFunction(this.F[G])&&(this.coords[G+1]=utils_type.A.evaluate(this.F[G]));return this},initCoords:function(){var G;if(utils_type.A.isFunction(this.F))this.coords=utils_type.A.evaluate(this.F),this.coords.unshift(1);else for(this.coords[0]=1,G=0;G<3;G++)this.coords[G+1]=utils_type.A.evaluate(this.F[G]);return this},normalizeCoords:function(){return Math.abs(this.coords[0])>math.A.eps&&(this.coords[1]/=this.coords[0],this.coords[2]/=this.coords[0],this.coords[3]/=this.coords[0],this.coords[0]=1),this},setPosition:function(G,_){var J=this.coords;return G.length===3?(J[0]=1,J[1]=G[0],J[2]=G[1],J[3]=G[2]):(J[0]=G[0],J[1]=G[1],J[2]=G[2],J[3]=G[2],this.normalizeCoords()),this},update:function(G){var _,J,Z;return this.element2D.draggable()&&geometry.A.distance(this._c2d,this.element2D.coords.usrCoords)!==0?(this.view.isVerticalDrag()?_=this.view.project2DTo3DVertical(this.element2D,this.coords):(J=[1,0,0,this.coords[3]],_=this.view.project2DTo3DPlane(this.element2D,[1,0,0,1],J)),_[0]!==0&&(Z=this.view.project3DToCube(_),this.coords=Z[0],Z[1]&&this.element2D.coords.setCoordinates(constants.A.COORDS_BY_USER,this.view.project3DTo2D(this.coords)),this.slide&&(this.coords=this.slide.projectCoords([this.X(),this.Y(),this.Z()],this.position),this.element2D.coords.setCoordinates(constants.A.COORDS_BY_USER,this.view.project3DTo2D(this.coords))))):(this.updateCoords(),this.slide&&(this.coords=this.slide.projectCoords([this.X(),this.Y(),this.Z()],this.position)),_=this.coords,this.element2D.coords.setCoordinates(constants.A.COORDS_BY_USER,this.view.project3DTo2D(_)),this.zIndex=math.A.innerProduct(this.view.matrix3DRotShift[3],_),this.element2D.prepareUpdate().update()),this._c2d=this.element2D.coords.usrCoords.slice(),this},updateRenderer:function(){return this.needsUpdate=!1,this},testIfFinite:function(){return Math.abs(this.coords[0])>math.A.eps},__evt__update3D:function(G){}}),jxg.A.createText3D=function(G,_,J){var Z,Q,ee,te,ne,ie,re=_[0];if(ee=_.length>2&&utils_type.A.exists(_[_.length-1].is3D)?_.pop():null,_.length===3)Q=_[1],te=_[2];else{if(_.length!==5)throw new Error("JSXGraph: Can't create text3d with parent types '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [[x,y,z], text], [x,y,z, text]`);Q=_.slice(1,4),te=_[4]}return Z=utils_type.A.copyAttributes(J,G.options,"text3d"),(ie=new jxg.A.Text3D(re,Q,te,ee,Z)).initCoords(),ne=re.project3DTo2D(ie.coords),Z=ie.setAttr2D(Z),ie.element2D=re.create("text",[ne[1],ne[2],te],Z),ie.element2D.view=re,ie.addChild(ie.element2D),ie.inherits.push(ie.element2D),ie.element2D.setParents(ie),ie.slide&&(ie.slide.addChild(ie),ie.setParents(ie.slide)),ie._c2d=ie.element2D.coords.usrCoords.slice(),ie},jxg.A.registerElement("text3d",jxg.A.createText3D),jxg.A.createTicks3D=function(G,_,J){var Z,Q,ee=_[0],te=_[1],ne=_[2],ie=_[3],re=_[4];return Q=utils_type.A.copyAttributes(J,G.options,"ticks3d"),(Z=ee.create("curve",[[],[]],Q)).point=te,Z.direction1=ne,Z.len=ie,Z.direction2=re,Z.drawLabels=function(oe){var se,ae,ce,ue,de,me,fe,_e=this.len,ye=this.evalVisProp("ticksdistance"),be=this.evalVisProp("tickendings"),Se=this.evalVisProp("majorheight"),Ce=[0,0,0],Me=[0,0,0],Re=[0,0,0],Te=[];if(se=(Se/=Math.sqrt(G.unitX*G.unitY))*be[1]*2,this.dataX=[],this.dataY=[],utils_type.A.isFunction(this.point))Re=this.point().slice(1);else for(ue=0;ue<3;ue++)Re[ue]=utils_type.A.evaluate(this.point[ue]);for(ue=0;ue<3;ue++)Ce[ue]=utils_type.A.evaluate(this.direction1[ue]),Me[ue]=utils_type.A.evaluate(this.direction2[ue]);for(ae=jxg.A.Math.norm(Ce,3),ce=jxg.A.Math.norm(Me,3),ue=0;ue<3;ue++)Ce[ue]/=ae,Me[ue]/=ce;if(!(Math.abs(ye)<math.A.eps)){for(de=0;de<=_e;de+=ye){for(fe=[Re[0]+de*Ce[0]+se*Me[0],Re[1]+de*Ce[1]+se*Me[1],Re[2]+de*Ce[2]+se*Me[2]],ue=0;ue<3;ue++)Ce[ue]!==0&&(me=Re[ue]+de*Ce[ue]);Te.push(ee.create("text3d",[fe,me],oe))}return Te}},Z.evalVisProp("drawlabels")&&(Z.labels=Z.drawLabels(Q.label)),Z.updateDataArray=function(){var oe,se,ae,ce,ue,de,me,fe,_e=this.len,ye=this.evalVisProp("ticksdistance"),be=this.evalVisProp("tickendings"),Se=this.evalVisProp("majorheight"),Ce=[0,0,0],Me=[0,0,0],Re=[0,0,0];if(oe=(Se/=Math.sqrt(G.unitX*G.unitY))*-be[0],se=Se*be[1],this.dataX=[],this.dataY=[],utils_type.A.isFunction(this.point))Re=this.point().slice(1);else for(ue=0;ue<3;ue++)Re[ue]=utils_type.A.evaluate(this.point[ue]);for(ue=0;ue<3;ue++)Ce[ue]=utils_type.A.evaluate(this.direction1[ue]),Me[ue]=utils_type.A.evaluate(this.direction2[ue]);for(ae=jxg.A.Math.norm(Ce,3),ce=jxg.A.Math.norm(Me,3),ue=0;ue<3;ue++)Ce[ue]/=ae,Me[ue]/=ce;if(!(Math.abs(ye)<math.A.eps))for(de=0;de<=_e;de+=ye)fe=[Re[0]+de*Ce[0]+oe*Me[0],Re[1]+de*Ce[1]+oe*Me[1],Re[2]+de*Ce[2]+oe*Me[2]],me=ee.project3DTo2D(fe),this.dataX.push(me[1]),this.dataY.push(me[2]),fe=[Re[0]+de*Ce[0]+se*Me[0],Re[1]+de*Ce[1]+se*Me[1],Re[2]+de*Ce[2]+se*Me[2]],me=ee.project3DTo2D(fe),this.dataX.push(me[1]),this.dataY.push(me[2]),this.dataX.push(NaN),this.dataY.push(NaN)},Z},jxg.A.registerElement("ticks3d",jxg.A.createTicks3D),jxg.A.Polygon3D=function(G,_,J){var Z;for(this.constructor(G.board,J,constants.A.OBJECT_TYPE_POLYGON3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(G,"polygon3d"),this.board.finalizeAdding(this),this.vertices=[],Z=0;Z<_.length;Z++)this.vertices[Z]=this.board.select(_[Z]),this.vertices[Z]._is_new&&(delete this.vertices[Z]._is_new,this.vertices[Z]._is_new_pol=!0)},jxg.A.Polygon3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Polygon3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Polygon3D.prototype,{update:function(){return this},updateRenderer:function(){return this.needsUpdate=!1,this},updateZIndex:function(){var G,_=this.vertices.length,J=[1,0,0,0];if(_<=0)return[NaN,NaN,NaN,NaN];for(G=0;G<_;G++)J[1]+=this.vertices[G].coords[1],J[2]+=this.vertices[G].coords[2],J[3]+=this.vertices[G].coords[3];return J[1]/=_,J[2]/=_,J[3]/=_,this.zIndex=math.A.innerProduct(this.view.matrix3DRotShift[3],J),this}}),jxg.A.createPolygon3D=function(G,_,J){var Z,Q,ee,te,ne,ie,re=_[0],oe=[],se=[],ae=!1;if(ne=utils_type.A.copyAttributes(J,G.options,"polygon3d"),(te=G.select(_[1]))===null&&(te=_[1]),utils_type.A.isObject(te)&&te.type===constants.A.OBJECT_TYPE_POLYGON3D&&utils_type.A.isTransformationOrArray(_[2]))for(ae=!0,ee=te.vertices.length-1,ie=utils_type.A.copyAttributes(J,G.options,"polygon3d","vertices"),Q=0;Q<ee;Q++)ie.withlabel&&(ie.name=te.vertices[Q].name===""?"":te.vertices[Q].name+"'"),oe.push(G.create("point3d",[te.vertices[Q],_[2]],ie));else if(utils_type.A.isArray(_[1])&&_[1].every(ce=>utils_type.A.isPoint3D(ce)))oe=_[1];else if((oe=utils_type.A.providePoints3D(re,_.slice(1),J,"polygon3d",["vertices"]))===!1)throw new Error("JSXGraph: Can't create polygon3d with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates. Alternatively, a polygon3d and a transformation can be supplied");for((Z=new jxg.A.Polygon3D(re,oe,ne)).isDraggable=!0,ne=Z.setAttr2D(ne),Q=0;Q<oe.length;Q++)se.push(oe[Q].element2D);if(Z.element2D=G.create("polygon",se,ne),Z.element2D.view=re,Z.addChild(Z.element2D),Z.inherits.push(Z.element2D),Z.element2D.setParents(Z),ae)for(Z.prepareUpdate().update().updateVisibility().updateRenderer(),ee=te.vertices.length-1,Q=0;Q<ee;Q++)oe[Q].prepareUpdate().update().updateVisibility().updateRenderer();return Z},jxg.A.registerElement("polygon3d",jxg.A.createPolygon3D),jxg.A.Face3D=function(G,_,J,Z){this.constructor(G.board,Z,constants.A.OBJECT_TYPE_FACE3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(G,"face3d"),this.board.finalizeAdding(this),this.polyhedron=_,this.faceNumber=J,this.normal=[0,0,0,0],this.d=0,this.vec1=[0,0,0,0],this.vec2=[0,0,0,0],this.faceNumber===0&&this.updateCoords(),this.methodMap=utils_type.A.deepCopy(this.methodMap,{})},jxg.A.Face3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Face3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Face3D.prototype,{updateCoords:function(){var G,_,J,Z,Q=this.polyhedron;for(G in Q.vertices){if(Z=Q.vertices[G],utils_type.A.isFunction(Z))Q.coords[G]=utils_type.A.evaluate(Z);else if(utils_type.A.isArray(Z))for(Q.coords[G]=[],J=Z.length,_=0;_<J;_++)Q.coords[G][_]=utils_type.A.evaluate(Z[_]);else{if(Z=Q.view.select(Z),!utils_type.A.isPoint3D(Z))throw new Error("Polyhedron3D.updateCoords: unknown vertices type!");Q.coords[G]=Z.coords}Q.coords[G].length===3&&Q.coords[G].unshift(1)}return this},updateDataArray2D:function(){var G,_,J,Z,Q=[],ee=[],te=this.polyhedron,ne=te.faces[this.faceNumber];if(this.faceNumber===0)for(G in te.vertices)te.coords2D[G]=[];for(_=ne.length,this.zIndex=0,G=0;G<_;G++)(Z=te.coords2D[ne[G]]).length===0&&(J=te.coords[ne[G]],Z=this.view.project3DTo2D(J),te.coords2D[ne[G]]=Z,te.zIndex[ne[G]]=math.A.innerProduct(this.view.matrix3DRotShift[3],J)),Q.push(Z[1]),ee.push(Z[2]),this.zIndex+=te.zIndex[ne[G]];return _>0&&(this.zIndex/=_),_!==2&&(Q.push(Q[0]),ee.push(ee[0])),{X:Q,Y:ee}},addTransform:function(G,_){return this.faceNumber===0&&this.addTransformGeneric(G,_),this},updateTransform:function(){var G,_,J,Z,Q;if(this.faceNumber!==0)return this;if(this.transformations.length===0||this.baseElement===null)return this;for(G=this.transformations,J=0;J<G.length;J++)G[J].update();for(J in(Q=this===this.baseElement?this.polyhedron:this.baseElement.polyhedron).coords)if(Q.coords.hasOwnProperty(J)){for(_=Q.coords[J],Z=0;Z<G.length;Z++)_=math.A.matVecMult(G[Z].matrix,_);this.polyhedron.coords[J]=_}return this},update:function(){var G,_,J,Z,Q,ee;if(this.needsUpdate&&!this.view.board._change3DView){if(_=this.polyhedron,this.faceNumber===0&&this.updateCoords().updateTransform(),(ee=_.faces[this.faceNumber]).length<3)return this;if(Z=_.coords[ee[0]],Q=_.coords[ee[1]],this.vec1=[Q[0]-Z[0],Q[1]-Z[1],Q[2]-Z[2],Q[3]-Z[3]],Q=_.coords[ee[2]],this.vec2=[Q[0]-Z[0],Q[1]-Z[1],Q[2]-Z[2],Q[3]-Z[3]],this.normal=math.A.crossProduct(this.vec1.slice(1),this.vec2.slice(1)),J=math.A.norm(this.normal),this.normal.unshift(0),Math.abs(J)>1e-12)for(G=1;G<4;G++)this.normal[G]/=J;this.d=math.A.innerProduct(Z,this.normal,4)}return this},updateRenderer:function(){return this.needsUpdate&&(this.needsUpdate=!1,this.shader()),this},shader:function(){var G,_,J,Z,Q,ee,te,ne,ie;if(this.evalVisProp("shader.enabled"))return G=this.evalVisProp("shader.hue"),_=this.evalVisProp("shader.saturation"),ne=this.evalVisProp("shader.minlightness"),ie=this.evalVisProp("shader.maxlightness"),this.evalVisProp("shader.type").toLowerCase()==="angle"?(Z=math.A.innerProduct(this.view.matrix3DRotShift[3],this.normal),J=ne+(ie-ne)*(Z=Math.abs(Z))):(te=this.view.zIndexMax,ee=this.view.zIndexMin,J=ne+(ie-ne)*((this.zIndex-ee)/(te-ee))),Q="hsl("+G+","+_+"%,"+J+"%)",this.element2D.visProp.fillcolor=Q,this.zIndex}}),jxg.A.createFace3D=function(G,_,J){var Z,Q,ee=_[0],te=_[1],ne=_[2];return Z=utils_type.A.copyAttributes(J,G.options,"face3d"),Z=(Q=new jxg.A.Face3D(ee,te,ne,Z)).setAttr2D(Z),Q.element2D=ee.create("curve",[[],[]],Z),Q.element2D.view=ee,Q.element2D.updateDataArray=function(){var ie=Q.updateDataArray2D();this.dataX=ie.X,this.dataY=ie.Y},Q.addChild(Q.element2D),Q.inherits.push(Q.element2D),Q.element2D.setParents(Q),Q.element2D.prepareUpdate().update(),G.isSuspendedUpdate||Q.element2D.updateVisibility().updateRenderer(),Q},jxg.A.registerElement("face3d",jxg.A.createFace3D),jxg.A.Polyhedron3D=function(G,_,J,Z){var Q,ee,te,ne=this;for(this.constructor(G.board,Z,constants.A.OBJECT_TYPE_POLYHEDRON3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(G,"polyhedron3d"),this.board.finalizeAdding(this),this.elType="polyhedron3d",this.faces=J,this.numberFaces=J.length,this.def=_,ee=["setAttribute","setParents","prepareUpdate","updateRenderer","update","fullUpdate","highlight","noHighlight"],te=function(ie){return function(){var re;for(re in ne.faces)ne.faces.hasOwnProperty(re)&&utils_type.A.exists(ne.faces[re][ie])&&ne.faces[re][ie].apply(ne.faces[re],arguments);return ne}},Q=0;Q<ee.length;Q++)this[ee[Q]]=te(ee[Q]);this.methodMap=utils_type.A.deepCopy(this.methodMap,{setAttribute:"setAttribute",setParents:"setParents",addTransform:"addTransform"})},jxg.A.Polyhedron3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Polyhedron3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Polyhedron3D.prototype,{addTransform:function(G,_){if(!(this.faces.length>0&&G.faces.length>0))throw new Error("Adding transformation failed. At least one of the two polyhedra has no faces.");return this.faces[0].addTransform(G.faces[0],_),this},toSTL:function(G){var _,J,Z,Q,ee,te,ne="solid ";for(G===void 0&&(G=this.name),ne+=G+`
`,_=0;_<this.def.faces.length;_++){for(ne+=` facet normal 0 0 0
  outer loop
`,te=(Q=this.def.faces[_]).length,Z=this.def.coords,J=0;J<te;J++)ne+="   vertex "+(ee=Z[Q[J]])[1]+" "+ee[2]+" "+ee[3]+`
`;ne+=`  endloop
 endfacet
`}return ne+="endsolid "+G+`
`}}),jxg.A.createPolyhedron3D=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe=_[0],se=[],ae=null,ce=null,ue={view:oe,vertices:{},coords:{},coords2D:{},zIndex:{},faces:[]};if(utils_type.A.exists(_[1].type)&&_[1].type===constants.A.OBJECT_TYPE_POLYHEDRON3D)ae=_[1],ce=_[2],ue.vertices=ae.def.vertices,ue.faces=ae.def.faces;else{if(utils_type.A.isArray(_[1]))for(Q=_[1].length,Z=0;Z<Q;Z++)ue.vertices[Z]=_[1][Z];else if(utils_type.A.isObject(_[1]))for(Z in _[1])_[1].hasOwnProperty(Z)&&(ue.vertices[Z]=_[1][Z]);ue.faces=_[2]}for(re=utils_type.A.copyAttributes(J,G.options,"polyhedron3d"),console.time("polyhedron"),oe.board.suspendUpdate(),Q=ue.faces.length,Z=0;Z<Q;Z++)ie=utils_type.A.copyAttributes(J,G.options,"face3d"),re.fillcolorarray.length>0&&(ie.fillcolor=re.fillcolorarray[Z%re.fillcolorarray.length]),te=ue.faces[Z],utils_type.A.isArray(te)&&te.length===2&&utils_type.A.isObject(te[1])&&utils_type.A.isArray(te[0])&&(utils_type.A.mergeAttr(ie,te[1]),ue.faces[Z]=te[0]),ee=oe.create("face3d",[ue,Z],ie),se.push(ee);for((ne=new jxg.A.Polyhedron3D(oe,ue,se,re)).setParents(ne),Z=0;Z<Q;Z++)ne.inherits.push(ne.faces[Z]),ne.addChild(ne.faces[Z]);return ae!==null&&(ne.addTransform(ae,ce),ne.addParents(ae)),oe.board.unsuspendUpdate(),console.timeEnd("polyhedron"),ne},jxg.A.registerElement("polyhedron3d",jxg.A.createPolyhedron3D),jxg.A.Sphere3D=function(G,_,J,Z,Q){this.constructor(G.board,Q,constants.A.OBJECT_TYPE_SPHERE3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(G,"sphere3d"),this.board.finalizeAdding(this),this.method=_,this.center=this.board.select(J),this.point2=null,this.points=[],this.element2D=null,this.aux2D=[],this.projectionType=G.projectionType,_==="twoPoints"?(this.point2=this.board.select(Z),this.radius=this.Radius()):_==="pointRadius"&&(this.updateRadius=utils_type.A.createFunction(Z,this.board),this.updateRadius(),this.addParentsFromJCFunctions([this.updateRadius])),utils_type.A.exists(this.center._is_new)?(this.addChild(this.center),delete this.center._is_new):this.center.addChild(this),_==="twoPoints"&&(utils_type.A.exists(this.point2._is_new)?(this.addChild(this.point2),delete this.point2._is_new):this.point2.addChild(this)),this.methodMap=utils_type.A.deepCopy(this.methodMap,{center:"center",point2:"point2",Radius:"Radius"})},jxg.A.Sphere3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Sphere3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Sphere3D.prototype,{X:function(G,_){return this.Radius()*Math.sin(G)*Math.cos(_)},Y:function(G,_){return this.Radius()*Math.sin(G)*Math.sin(_)},Z:function(G,_){return this.Radius()*Math.cos(G)},range_u:[0,2*Math.PI],range_v:[0,Math.PI],update:function(){return this.projectionType!==this.view.projectionType&&this.rebuildProjection(),this},updateRenderer:function(){return this.needsUpdate=!1,this},setRadius:function(G){return this.updateRadius=utils_type.A.createFunction(G,this.board),this.addParentsFromJCFunctions([this.updateRadius]),this.board.update(),this},Radius:function(G){return utils_type.A.exists(G)?(this.setRadius(G),this.Radius()):this.method==="twoPoints"?this.center.testIfFinite()&&this.point2.testIfFinite()?this.center.distance(this.point2):NaN:this.method==="pointRadius"?Math.abs(this.updateRadius()):NaN},focusFn:function(G){var _=this;return function(){var J=_.view.boxToCam[3],Z=_.Radius();return _.view.project3DTo2D([_.center.X()+G*Z*J[1],_.center.Y()+G*Z*J[2],_.center.Z()+G*Z*J[3]]).slice(1,3)}},innerVertexFn:function(){var G=this;return function(){var _,J=G.view,Z=J.worldToFocal(G.center.coords,!1),Q=math.A.hypot(Z[0],Z[1]),ee=J.boxToCam,te=G.Radius(),ne=Math.atan(-Q/Z[2])+Math.acos(te/math.A.norm(Z)),ie=Math.cos(ne),re=Math.sin(ne);return _=Q>1e-8?[-(Z[0]*ee[1][1]+Z[1]*ee[2][1])/Q,-(Z[0]*ee[1][2]+Z[1]*ee[2][2])/Q,-(Z[0]*ee[1][3]+Z[1]*ee[2][3])/Q]:[ee[1][1],ee[1][2],ee[1][3]],J.project3DTo2D([G.center.X()+te*(re*_[0]+ie*ee[3][1]),G.center.Y()+te*(re*_[1]+ie*ee[3][2]),G.center.Z()+te*(re*_[2]+ie*ee[3][3])])}},buildCentralProjection:function(G){var _=this.view,J={visible:!1,withLabel:!1},Z=_.create("point",this.focusFn(-1),J),Q=_.create("point",this.focusFn(1),J),ee=_.create("point",this.innerVertexFn(_),J);this.aux2D=[Z,Q,ee],this.element2D=_.create("ellipse",this.aux2D,G===void 0?this.visProp:G)},buildParallelProjection:function(G){var _=this;this.aux2D=[],this.element2D=this.view.create("circle",[_.center.element2D,function(){var J=_.view.bbox3D[0][1]-_.view.bbox3D[0][0];return _.Radius()*_.view.size[0]/J}],G===void 0?this.visProp:G)},rebuildProjection:function(G){var _;if(this.element2D)for(_ in this.view.board.removeObject(this.element2D),this.aux2D)this.aux2D.hasOwnProperty(_)&&this.view.board.removeObject(this.aux2D[_]);this.projectionType=this.view.projectionType,this.projectionType==="central"?this.buildCentralProjection(G):this.buildParallelProjection(G),this.addChild(this.element2D),this.inherits.push(this.element2D),this.element2D.view=this.view},projectCoords:function(G,_){var J=this.Radius(),Z=[1].concat(G),Q=this.center.coords,ee=geometry.A.distance(Q,Z,4),te=statistics.A.subtract(Z,Q);return ee===0?(_[0]=0,_[1]=0,[1,J,0,0]):J===0?(_[0]=0,_[1]=0,this.center.coords):(ee=J/ee,te[0]=1,te[1]*=ee,te[2]*=ee,te[3]*=ee,_[1]=Math.atan2(te[2],te[1]),_[1]+=_[1]<0?Math.PI:0,_[1]!==0?_[0]=Math.atan2(te[2],te[3]*Math.sin(_[1])):_[0]=Math.atan2(te[1],te[3]*Math.cos(_[1])),_[0]+=_[0]<0?2*Math.PI:0,te)}}),jxg.A.createSphere3D=function(G,_,J){var Z,Q,ee,te,ne,ie,re=_[0];for(Z=utils_type.A.copyAttributes(J,G.options,"sphere3d"),Q=[],ie=1;ie<_.length;ie++)if(utils_type.A.isPointType3D(G,_[ie])){if(ee=Q.length===0?"center":"point",(te=utils_type.A.providePoints3D(re,[_[ie]],J,"sphere3d",[ee])[0])===!1)throw new Error("JSXGraph: Can't create sphere3d from this type. Please provide a point type.");Q.push(te)}else Q.push(_[ie]);if(utils_type.A.isPoint3D(Q[0])&&utils_type.A.isPoint3D(Q[1]))ne=new jxg.A.Sphere3D(re,"twoPoints",Q[0],Q[1],Z);else{if(!utils_type.A.isPoint3D(Q[0])||!(utils_type.A.isNumber(Q[1])||utils_type.A.isFunction(Q[1])||utils_type.A.isString(Q[1])))throw new Error("JSXGraph: Can't create sphere3d with parent types '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [point,point], [point,number], [point,function]`);ne=new jxg.A.Sphere3D(re,"pointRadius",Q[0],Q[1],Z)}return Z=ne.setAttr2D(Z),ne.rebuildProjection(Z),ne.element2D.prepareUpdate().update(),G.isSuspendedUpdate||ne.element2D.updateVisibility().updateRenderer(),ne},jxg.A.registerElement("sphere3d",jxg.A.createSphere3D),jxg.A.Surface3D=function(G,_,J,Z,Q,ee,te,ne){this.constructor(G.board,ne,constants.A.OBJECT_TYPE_SURFACE3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(G,"surface3d"),this.board.finalizeAdding(this),this._F=_,this._X=J,this._Y=Z,this._Z=Q,this._F!==null?(this._X=function(ie,re){return this._F(ie,re)[0]},this._Y=function(ie,re){return this._F(ie,re)[1]},this._Z=function(ie,re){return this._F(ie,re)[2]}):this._X!==null&&(this._F=function(ie,re){return[this._X(ie,re),this._Y(ie,re),this._Z(ie,re)]}),this.range_u=ee,this.range_v=te,this.dataX=null,this.dataY=null,this.dataZ=null,this.points=[],this.methodMap=utils_type.A.deepCopy(this.methodMap,{})},jxg.A.Surface3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Surface3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Surface3D.prototype,{updateWireframe:function(){var G,_,J,Z,Q,ee,te,ne,ie,re,oe,se,ae=[1,0,0,0];for(this.points=[],G=this.evalVisProp("stepsu"),_=this.evalVisProp("stepsv"),Q=utils_type.A.evaluate(this.range_u),ee=utils_type.A.evaluate(this.range_v),te=utils_type.A.evaluate(Q[0]),ne=utils_type.A.evaluate(ee[0]),ie=(utils_type.A.evaluate(Q[1])-te)/G,re=(utils_type.A.evaluate(ee[1])-ne)/_,J=0,oe=te;J<=G;J++,oe+=ie)for(this.points.push([]),Z=0,se=ne;Z<=_;Z++,se+=re)(ae=this.F(oe,se)).unshift(1),this.points[J].push(ae);return this},updateCoords:function(){return this._F!==null?this.updateWireframe():this.updateTransform(),this},evalF:function(G,_){var J,Z,Q=[0,0,0,0];if(this.transformations.length===0||!utils_type.A.exists(this.baseElement))return Q=this._F(G,_);for(J=this.transformations,Z=0;Z<J.length;Z++)J[Z].update();for((Q=this===this.baseElement?this._F(G,_):this.baseElement.evalF(G,_)).unshift(1),Q=math.A.matVecMult(J[0].matrix,Q),Z=1;Z<J.length;Z++)Q=math.A.matVecMult(J[Z].matrix,Q);return Q.slice(1)},F:function(G,_){return this.evalF(G,_)},X:function(G,_){return this.evalF(G,_)[0]},Y:function(G,_){return this.evalF(G,_)[1]},Z:function(G,_){return this.evalF(G,_)[2]},updateDataArray2D:function(){var G,_,J,Z,Q,ee=[],te=[];if((J=this.points.length)!==0){for(Z=this.points[0].length,G=0;G<J;G++){for(_=0;_<Z;_++)Q=this.view.project3DTo2D(this.points[G][_]),ee.push(Q[1]),te.push(Q[2]);ee.push(NaN),te.push(NaN)}for(_=0;_<Z;_++){for(G=0;G<J;G++)Q=this.view.project3DTo2D(this.points[G][_]),ee.push(Q[1]),te.push(Q[2]);ee.push(NaN),te.push(NaN)}}return{X:ee,Y:te}},addTransform:function(G,_){return this.addTransformGeneric(G,_),this},updateTransform:function(){var G,_,J,Z,Q,ee,te;if(this.transformations.length===0||this.baseElement===null||utils_type.A.exists(this._F))return this;for(G=this.transformations,J=0;J<G.length;J++)G[J].update();if(this!==this.baseElement&&(this.points=[]),(ee=this.baseElement.points.length)>0)for(te=this.baseElement.points[0].length,J=0;J<ee;J++)for(this!==this.baseElement&&this.points.push([]),Z=0;Z<te;Z++){for(_=this===this.baseElement?this.points[J][Z]:this.baseElement.points[J][Z],Q=0;Q<G.length;Q++)_=math.A.matVecMult(G[Q].matrix,_);this===this.baseElement?this.points[J][Z]=_:this.points[J].push(_)}return this},updateDataArray:function(){},update:function(){return this.needsUpdate&&(this.updateDataArray(),this.updateCoords()),this},updateRenderer:function(){return this.needsUpdate=!1,this},projectCoords:function(G,_){return geometry.A.projectCoordsToParametric(G,this,2,_)}}),jxg.A.createParametricSurface3D=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se=_[0],ae=null,ce=null;return _.length===3?(ae=_[1],ce=_[2],Z=null,Q=null,ee=null,te=null):_.length===4?(Z=_[1],ne=_[2],ie=_[3],Q=null,ee=null,te=null):(Q=_[1],ee=_[2],te=_[3],ne=_[4],ie=_[5],Z=null),re=utils_type.A.copyAttributes(J,G.options,"surface3d"),re=(oe=new jxg.A.Surface3D(se,Z,Q,ee,te,ne,ie,re)).setAttr2D(re),oe.element2D=se.create("curve",[[],[]],re),oe.element2D.view=se,ae!==null&&(oe.addTransform(ae,ce),oe.addParents(ae)),oe.element2D.updateDataArray=function(){var ue=oe.updateDataArray2D();this.dataX=ue.X,this.dataY=ue.Y},oe.addChild(oe.element2D),oe.inherits.push(oe.element2D),oe.element2D.setParents(oe),oe.element2D.prepareUpdate().update(),G.isSuspendedUpdate||oe.element2D.updateVisibility().updateRenderer(),oe},jxg.A.registerElement("parametricsurface3d",jxg.A.createParametricSurface3D),jxg.A.createFunctiongraph3D=function(G,_,J){var Z,Q=_[0],ee=utils_type.A.createFunction(_[1],G,"x, y"),te=_[2],ne=_[3];return(Z=Q.create("parametricsurface3d",[function(ie,re){return ie},function(ie,re){return re},ee,te,ne],J)).elType="functiongraph3d",Z},jxg.A.registerElement("functiongraph3d",jxg.A.createFunctiongraph3D),jxg.A.Parse3D={STL:function(G){var _,J,Z,Q,ee,te,ne,ie,re,oe=[],se=[],ae=[];for(Q=(te=G.split(`
`)).length,_=0;_<Q;_++)if((ee=te[_].trim()).indexOf("solid")===0)ie=-1,se=[],ae=[];else if(ee.indexOf("endsolid")===0)oe.push([se.slice(),ae.slice()]);else if(ee.indexOf("facet")===0)ie++,ae.push([]);else{if(ee.indexOf("outer loop")===0||ee.indexOf("endloop")===0)continue;if(ee.indexOf("vertex")===0){for(ne=ee.split(" ").slice(1).map(ce=>parseFloat(ce)),re=!1,J=0;J<se.length;J++)if(jxg.A.Math.Geometry.distance(se[J],ne,3)<jxg.A.Math.eps){re=!0,Z=J;break}re===!1&&(Z=se.length,se.push(ne)),ae[ie].push(Z)}}return oe}},jxg.A.Parse3D;let size=.75,color="#000";jxg.A.themes.mono_thin={board:{showInfobox:!1,showCopyright:!0,defaultAxes:{x:{ticks:{minorTicks:0,majorHeight:10,majorTickEndings:[1,0]}},y:{ticks:{minorTicks:0,majorHeight:10,majorTickEndings:[0,1]}}}},navbar:{strokeColor:"#bbb",fillColor:"none"},elements:{strokeColor:color,highlightStrokeColor:color,fillColor:"none",highlightFillColor:"none",strokeOpacity:.6,highlightStrokeOpacity:1},angle:{strokeColor:color,fillColor:"#aaaaaa55",fillOpacity:.3,highlightFillColor:"#aaaaaa33",highlightFillOpacity:.3,label:{strokeColor:color}},arc:{strokeColor:color,strokeWidth:size,highlightStrokeColor:color,highlightStrokeWidth:size},axis:{},boxplot:{strokeWidth:size,strokeColor:color,fillColor:color,fillOpacity:.2,highlightStrokeWidth:size,highlightStrokeColor:color,highlightFillColor:color,highlightFillOpacity:.1},circle:{strokeWidth:size,highlightStrokeWidth:1.5*size,strokeColor:color,highlightFillColor:"none",highlightStrokeColor:color,center:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color},point2:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color}},circumcircle:{strokeWidth:size,highlightStrokeWidth:1.5*size,strokeColor:color,highlightFillColor:"none",highlightStrokeColor:color,center:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color}},circumcirclearc:{strokeColor:color,strokeWidth:size,highlightStrokeColor:color,highlightStrokeWidth:size},circumcirclesector:{strokeColor:color,fillColor:"#aaaaaa55",fillOpacity:.3,highlightFillColor:"#aaaaaa33",highlightFillOpacity:.3},comb:{strokeColor:color,strokeWidth:size},conic:{strokeWidth:size,highlightStrokeWidth:1.5*size,strokeColor:color,highlightStrokeColor:color,fillColor:"none",highlightFillColor:"none"},curve:{strokeColor:color,strokeWidth:size,highlightStrokeColor:color,highlightStrokeWidth:size},grid:{strokeWidth:size},hatch:{strokeColor:color,strokeWidth:size},incircle:{strokeWidth:size,highlightStrokeWidth:1.5*size,strokeColor:color,highlightFillColor:"none",highlightStrokeColor:color,center:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color}},inequality:{fillColor:"#aaaaaa55",fillOpacity:.2},integral:{fillColor:"#aaaaaa55",highlightFillColor:"#aaaaa33",fillOpacity:.3,highlightFillOpacity:.3,curveLeft:{color},baseLeft:{color},curveRight:{color},baseRight:{color}},label:{strokeColor:color},line:{strokeColor:color,strokeWidth:size,highlightStrokeColor:color,highlightStrokeWidth:size,point1:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color},point2:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color}},normal:{strokeColor:color},parallel:{strokeColor:color},perpendicular:{strokeColor:color},perpendicularsegment:{strokeColor:color},point:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color},polygon:{fillColor:"#aaaaaa55",highlightFillColor:"#aaaaaa33",fillOpacity:.3,highlightFillOpacity:.3,vertices:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color},borders:{strokeColor:color,strokeWidth:size,highlightStrokeColor:color,highlightStrokeWidth:size}},sector:{strokeColor:color,fillColor:"#aaaaaa55",fillOpacity:.3,highlightFillColor:"#aaaaaa33",highlightFillOpacity:.3},semicircle:{center:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color}},slider:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color,baseline:{strokeWidth:size,strokeColor:color,highlightStrokeColor:color},label:{strokeColor:color},highline:{strokeWidth:3*size,name:"",strokeColor:color,highlightStrokeColor:color},ticks:{strokeColor:color}},slopefield:{strokeWidth:.75*size,highlightStrokeWidth:size,highlightStrokeColor:color,highlightStrokeOpacity:.8},tapemeasure:{strokeColor:color,strokeWidth:size,highlightStrokeColor:color,highlightStrokeWidth:size,point1:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color},point2:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color},ticks:{strokeWidth:size}},text:{strokeColor:color},tracecurve:{strokeColor:color},turtle:{strokeWidth:size,strokeColor:color,arrow:{strokeWidth:2*size,strokeColor:"#aaaaaa55"}},vectorfield:{strokeWidth:.75*size,highlightStrokeWidth:size,highlightStrokeColor:color,highlightStrokeOpacity:.8}},jxg.A.COORDS_BY_SCREEN,jxg.A.COORDS_BY_USER,jxg.A.Dump,jxg.A.Expect,jxg.A.JSXGraph,jxg.A.Math,jxg.A.Options,jxg.A.boards,jxg.A.elements,jxg.A.palette,jxg.A.paletteWong,jxg.A.Board,jxg.A.Chart,jxg.A.Circle,jxg.A.Complex,jxg.A.Composition,jxg.A.Coords,jxg.A.CoordsElement,jxg.A.Curve,jxg.A.GeometryElement,jxg.A.Group,jxg.A.Image,jxg.A.JessieCode,jxg.A.PrefixParser,jxg.A.Line,jxg.A.Point,jxg.A.Polygon,jxg.A.Text,jxg.A.Ticks,jxg.A.Transformation,jxg.A.Turtle,jxg.A.View3D,jxg.A.LMS2rgb,jxg.A.addEvent,jxg.A.autoDigits,jxg.A.autoHighlight,jxg.A.bind,jxg.A.capitalize,jxg.A.clearVisPropOld,jxg.A.clone,jxg.A.cloneAndCopy,jxg.A.cmpArrays,jxg.A.coordsArrayToMatrix,jxg.A.copyAttributes,jxg.A.createEvalFunction,jxg.A.createFunction,jxg.A.createHTMLSlider,jxg.A.darkenColor,jxg.A.debug,jxg.A.debugInt,jxg.A.debugLine,jxg.A.debugWST,jxg.A.deepCopy,jxg.A.def,jxg.A.deprecated,jxg.A.eliminateDuplicates,jxg.A.escapeHTML,jxg.A.evalSlider,jxg.A.evaluate,jxg.A.filterElements,jxg.A.getBoardByContainerId,jxg.A.getCSSTransformMatrix,jxg.A.getCSSTransform,jxg.A.getDimensions,jxg.A.getOffset,jxg.A.getPosition,jxg.A.getProp,jxg.A.hex2rgb,jxg.A.hsv2rgb,jxg.A.isAndroid,jxg.A.isApple,jxg.A.isArray,jxg.A.isDesktop,jxg.A.isInArray,jxg.A.isInObject,jxg.A.isMetroApp,jxg.A.isMobile,jxg.A.isMozilla,jxg.A.isBoard,jxg.A.isName,jxg.A.isNode,jxg.A.isNumber,jxg.A.isObject,jxg.A.isPoint,jxg.A.isPoint3D,jxg.A.isPointType,jxg.A.isPointType3D,jxg.A.isString,jxg.A.isTouchDevice,jxg.A.isTransformationOrArray,jxg.A.isWebWorker,jxg.A.isWebkitAndroid,jxg.A.isWebkitApple,jxg.A.keys,jxg.A.lightenColor,jxg.A.merge,jxg.A.normalizePointFace,jxg.A.providePoints,jxg.A.registerElement,jxg.A.registerReader,jxg.A.removeAllEvents,jxg.A.removeElementFromArray,jxg.A.removeEvent,jxg.A.rgb2LMS,jxg.A.rgb2bw,jxg.A.rgb2cb,jxg.A.rgb2css,jxg.A.rgb2hex,jxg.A.rgb2hsv,jxg.A.rgbParser,jxg.A.rgba2rgbo,jxg.A.rgbo2rgba,jxg.A.sanitizeHTML,jxg.A.shortcut,jxg.A.str2Bool,jxg.A.supportsCanvas,jxg.A.supportsPointerEvents,jxg.A.supportsSVG,jxg.A.supportsVML,jxg.A.swap,jxg.A.timedChunk,jxg.A.toFixed,jxg.A.toFullscreen,jxg.A.toJSON,jxg.A.trim,jxg.A.trimNumber,jxg.A.truncate,jxg.A.unescapeHTML,jxg.A.uniqueArray,jxg.A.useBlackWhiteOptions,jxg.A.useStandardOptions,jxg.A.warn,env.A.isBrowser?window.JXG=jxg.A:env.A.isWebWorker()&&(self.JXG=jxg.A);var src=jxg.A;return __webpack_exports__=__webpack_exports__.default,__webpack_exports__})()});var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs(reactDomExports);function Annotated({content:G,glossary:_={A:"A \\in \\mathbb{R}^{M\\times N}",b:"b \\in  \\mathbb{R}^{M}",c:"c \\in \\mathbb{R}",e:"e \\in  \\mathbb{R}_{\\ge 0}","\\vec{z}":"z \\in \\mathbb{R}^N"},revealReady:J=!1,popupFontSize:Z="1vmin",popupMaxWidth:Q=520,popupOffset:ee="-12vmin",className:te="",exclude:ne=[],style:ie}){const re=reactExports.useRef(null),oe=reactExports.useRef(null),[se,ae]=reactExports.useState({intentVisible:!1,mounted:!1,measuring:!1,html:"",left:0,top:0,maxWidth:Q,anchorRect:null,cursor:null,offsetCss:ee}),ce={"\\le":"","\\ge":"","\\times":"","\\cdot":"","\\in":"","'":""},ue={};Object.keys(_).forEach(Le=>{ue[Le]=ce[Le]||Le});const de=Object.keys(ue).sort((Le,Ue)=>ue[Ue].length-ue[Le].length);function me(Le){const Ue=[],Ge=/(\$[^$]+\$)/g;let Ye=0,ke;for(;(ke=Ge.exec(Le))!==null;)ke.index>Ye&&Ue.push({type:"text",text:Le.slice(Ye,ke.index)}),Ue.push({type:"math",text:ke[0].slice(1,-1)}),Ye=ke.index+ke[0].length;return Ye<Le.length&&Ue.push({type:"text",text:Le.slice(Ye)}),Ue}function fe(Le,Ue){if(window&&window.katex&&typeof window.katex.renderToString=="function")try{return Ue.innerHTML=window.katex.renderToString(Le,{throwOnError:!1,displayMode:!1}),!0}catch(Ge){console.warn("katex.renderToString error:",Ge)}if(window&&typeof window.renderMathInElement=="function")try{return Ue.textContent=`$${Le}$`,window.renderMathInElement(Ue,{delimiters:[{left:"$",right:"$",display:!1},{left:"$$",right:"$$",display:!0}]}),!0}catch(Ge){console.warn("renderMathInElement error:",Ge)}return!1}function _e(Le){if(!de.length)return;const Ue=document.createTreeWalker(Le,NodeFilter.SHOW_TEXT,null,!1),Ge=[];for(;Ue.nextNode();){const Ye=Ue.currentNode,ke=Ye.nodeValue;if(!ke)continue;let Fe=-1,Ve=null,$e=-1;for(let Xe of de){const ze=ue[Xe];if(!ze)continue;const qe=ke.indexOf(ze);qe>=0&&(Fe===-1||qe<Fe)&&(Fe=qe,Ve=Xe,$e=qe)}Fe>=0&&Ve&&Ge.push({node:Ye,start:$e,end:$e+ue[Ve].length,key:Ve})}for(let Ye=Ge.length-1;Ye>=0;--Ye){const{node:ke,start:Fe,end:Ve,key:$e}=Ge[Ye],Xe=ke.nodeValue,ze=Xe.slice(0,Fe),qe=Xe.slice(Fe,Ve),et=Xe.slice(Ve),ot=ke.parentNode;if(!ot)continue;ze&&ot.insertBefore(document.createTextNode(ze),ke);const St=document.createElement("span");St.className="gloss-target",St.setAttribute("data-gloss-key",$e),St.setAttribute("tabindex","0"),St.textContent=qe,ot.insertBefore(St,ke),et&&ot.insertBefore(document.createTextNode(et),ke),ot.removeChild(ke)}}reactExports.useEffect(()=>{const Le=re.current;return Le?(Le.innerHTML="",me(G).forEach(Ge=>{if(Ge.type==="text"){const Ye=document.createElement("span");Ye.className="plain-text",Ye.textContent=Ge.text,Le.appendChild(Ye)}else{const Ye=document.createElement("span");Ye.className="inline-math",Ye.setAttribute("data-tex",Ge.text),Ye.textContent=`$${Ge.text}$`,Le.appendChild(Ye)}}),setTimeout(()=>{_e(Le),ye(Le)},30),()=>be(Le)):void 0},[G]),reactExports.useEffect(()=>{if(!J)return;const Le=re.current;return Le?(Array.from(Le.querySelectorAll(".inline-math[data-tex]")).forEach(Ge=>{const Ye=Ge.getAttribute("data-tex");if(!Ye)return;const ke=fe(Ye,Ge);Ge.removeAttribute("data-tex"),ke&&_e(Ge)}),ye(Le),()=>be(Le)):void 0},[J,JSON.stringify(_)]);function ye(Le=re.current){if(!Le)return;Le.querySelectorAll(".gloss-target").forEach(Ge=>{Ge.addEventListener("mouseenter",Re),Ge.addEventListener("mousemove",Me),Ge.addEventListener("mouseleave",Te),Ge.addEventListener("focus",Re),Ge.addEventListener("blur",Te),Ge.addEventListener("keydown",De),Ge.addEventListener("touchstart",Ee,{passive:!1})})}function be(Le=re.current){if(!Le)return;Le.querySelectorAll(".gloss-target").forEach(Ge=>{Ge.removeEventListener("mouseenter",Re),Ge.removeEventListener("mousemove",Me),Ge.removeEventListener("mouseleave",Te),Ge.removeEventListener("focus",Re),Ge.removeEventListener("blur",Te),Ge.removeEventListener("keydown",De),Ge.removeEventListener("touchstart",Ee)})}function Se(Le){try{const Ue=document.createElement("div");Ue.style.position="absolute",Ue.style.left="-9999px",Ue.style.marginTop=Le,document.body.appendChild(Ue);const Ge=parseFloat(getComputedStyle(Ue).marginTop||"0");return document.body.removeChild(Ue),isFinite(Ge)?Ge:0}catch{return 0}}let Ce=null;function Me(Le){se.intentVisible&&ae(Ue=>({...Ue,cursor:{clientX:Le.clientX,clientY:Le.clientY}}))}function Re(Le){Ce&&(clearTimeout(Ce),Ce=null);const Ue=Le.currentTarget,Ge=Ue.getAttribute("data-gloss-key");if(!Ge)return;const Ye=_[Ge];if(!Ye)return;const ke=typeof Le.clientX=="number"&&typeof Le.clientY=="number"?{clientX:Le.clientX,clientY:Le.clientY}:null,Fe=Ue.getBoundingClientRect();let Ve="";if(window&&window.katex&&typeof window.katex.renderToString=="function")try{Ve=window.katex.renderToString(Ye,{displayMode:!1,throwOnError:!1})}catch{Ve=`<span>$${escapeHtml(Ye)}$</span>`}else Ve=`<span style="white-space:pre-wrap;">$${escapeHtml(Ye)}$</span>`;ae({intentVisible:!0,mounted:!0,measuring:!0,html:Ve,left:-9999,top:-9999,maxWidth:Q,anchorRect:Fe,cursor:ke,offsetCss:ee})}function Te(){Ce=setTimeout(()=>{ae(Le=>({...Le,intentVisible:!1})),setTimeout(()=>{ae(Le=>({...Le,mounted:!1,measuring:!1}))},260),Ce=null},120)}function Ee(Le){Le.preventDefault();const Ue=Le.currentTarget;se.intentVisible&&oe.current&&oe.current.contains(Le.target)?(ae(Ye=>({...Ye,intentVisible:!1})),setTimeout(()=>{ae(Ye=>({...Ye,mounted:!1,measuring:!1}))},260)):Re({currentTarget:Ue,clientX:null,clientY:null})}function De(Le){Le.key==="Enter"||Le.key===" "?(Le.preventDefault(),Re({currentTarget:Le.currentTarget,clientX:null,clientY:null})):Le.key==="Escape"&&(ae(Ue=>({...Ue,intentVisible:!1})),setTimeout(()=>{ae(Ue=>({...Ue,mounted:!1,measuring:!1}))},260))}return reactExports.useEffect(()=>{if(!se.mounted)return;const Le=oe.current;if(!Le)return;function Ue(){Ce&&(clearTimeout(Ce),Ce=null)}function Ge(){Ce=setTimeout(()=>{ae(Ye=>({...Ye,intentVisible:!1})),setTimeout(()=>{ae(Ye=>({...Ye,mounted:!1,measuring:!1}))},260),Ce=null},120)}return Le.addEventListener("mouseenter",Ue),Le.addEventListener("mouseleave",Ge),()=>{Le.removeEventListener("mouseenter",Ue),Le.removeEventListener("mouseleave",Ge)}},[se.mounted]),reactExports.useEffect(()=>{!se.mounted||!se.measuring||requestAnimationFrame(()=>{const Le=oe.current;if(!Le)return;const Ue=Se(se.offsetCss||ee)||0;Le.style.maxWidth=`${se.maxWidth}px`,Le.style.width="auto";const Ge=Le.getBoundingClientRect(),Ye=Ge.width,ke=Ge.height;let Fe;se.cursor&&typeof se.cursor.clientX=="number"?Fe=se.cursor.clientX+window.scrollX:se.anchorRect?Fe=se.anchorRect.left+window.scrollX+se.anchorRect.width/2:Fe=window.scrollX+window.innerWidth/2;let Ve=Fe-Ye/2;const $e=window.scrollX+8,Xe=window.scrollX+window.innerWidth-Ye-8;Ve<$e&&(Ve=$e),Ve>Xe&&(Ve=Xe);let ze;se.cursor&&typeof se.cursor.clientY=="number"?ze=se.cursor.clientY+window.scrollY-Ue-ke:se.anchorRect?ze=se.anchorRect.top+window.scrollY-Ue-ke:ze=window.scrollY+8;const qe=window.scrollY+8;ze<qe&&se.anchorRect&&(ze=se.anchorRect.bottom+window.scrollY+Ue);const et=window.scrollY+window.innerHeight-ke-8;ze>et&&(ze=et),ae(ot=>({...ot,left:Ve,top:ze,measuring:!1}))})},[se.mounted,se.measuring,se.html,se.cursor,se.anchorRect]),jsxRuntimeExports.jsxs("div",{style:{...ie},children:[jsxRuntimeExports.jsx("div",{className:`math-with-glossary ${te}`,ref:re,style:{display:"inline"}}),se.mounted&&ReactDOM.createPortal(jsxRuntimeExports.jsx("div",{ref:oe,className:`gloss-popup ${se.intentVisible&&!se.measuring?"gloss-visible":"gloss-hidden"}`,role:"dialog","aria-modal":"false",style:{position:"absolute",top:se.measuring?-9999:se.top,left:se.measuring?-9999:se.left,zIndex:9999,boxShadow:"0 10px 34px rgba(0,0,0,0.14)",borderRadius:8,background:"var(--gloss-bg, white)",padding:"8px 10px",fontSize:Z,maxWidth:`${se.maxWidth}px`,whiteSpace:"normal",display:"inline-block",lineHeight:1.25,pointerEvents:se.measuring?"none":"auto"},dangerouslySetInnerHTML:{__html:se.html}}),document.body),jsxRuntimeExports.jsx("style",{children:`
        .gloss-target{
            z-index: 99;
            position: relative;
        }
        .math-with-glossary .gloss-target {
          text-decoration: underline dotted rgba(0,0,0,0.06);
          cursor: pointer;
          padding: 20px 2px;
          border-radius: 2px;
          display: inline;
        }
        .math-with-glossary .gloss-target:hover {
          text-decoration-color: rgba(0,0,0,0.12);
        }
        .math-with-glossary .gloss-target:focus {
          outline: 2px solid rgba(0,0,0,0.06);
          outline-offset: 2px;
        }

        /* Popup hidden/measuring: don't paint and no pointer events */
        .gloss-popup.gloss-hidden {
          visibility: hidden;
          opacity: 0;
          transform: translateY(6px) scale(0.985);
          transition: none;
        }

        /* Popup visible: fade+scale in */
        .gloss-popup.gloss-visible {
          visibility: visible;
          opacity: 1;
          transform: translateY(0) scale(1);
          transition: opacity 180ms ease, transform 180ms ease;
        }

        /* KaTeX inside popup sizing */
        .gloss-popup .katex { font-size: 1em; }
      `})]})}function escapeHtml(G){return(G+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}var constants={exports:{}},reactReconcilerConstants_production={};var hasRequiredReactReconcilerConstants_production;function requireReactReconcilerConstants_production(){return hasRequiredReactReconcilerConstants_production||(hasRequiredReactReconcilerConstants_production=1,reactReconcilerConstants_production.ConcurrentRoot=1,reactReconcilerConstants_production.ContinuousEventPriority=8,reactReconcilerConstants_production.DefaultEventPriority=32,reactReconcilerConstants_production.DiscreteEventPriority=2,reactReconcilerConstants_production.IdleEventPriority=268435456,reactReconcilerConstants_production.LegacyRoot=0,reactReconcilerConstants_production.NoEventPriority=0),reactReconcilerConstants_production}var hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,constants.exports=requireReactReconcilerConstants_production()),constants.exports}var constantsExports=requireConstants();const REVISION="181",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,ConstantColorFactor=211,OneMinusConstantColorFactor=212,ConstantAlphaFactor=213,OneMinusConstantAlphaFactor=214,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,AgXToneMapping=6,NeutralToneMapping=7,AttachedBindMode="attached",DetachedBindMode="detached",UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,UnsignedInt5999Type=35902,UnsignedInt101111Type=35899,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBIntegerFormat=1032,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,RGB_BPTC_SIGNED_Format=36494,RGB_BPTC_UNSIGNED_Format=36495,RED_RGTC1_Format=36283,SIGNED_RED_RGTC1_Format=36284,RED_GREEN_RGTC2_Format=36285,SIGNED_RED_GREEN_RGTC2_Format=36286,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,BasicDepthPacking=3200,RGBADepthPacking=3201,RGBDepthPacking=3202,RGDepthPacking=3203,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,NoColorSpace="",SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",LinearTransfer="linear",SRGBTransfer="srgb",ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,NeverCompare=512,LessCompare=513,EqualCompare=514,LessEqualCompare=515,GreaterCompare=516,NotEqualCompare=517,GreaterEqualCompare=518,AlwaysCompare=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042,GLSL1="100",GLSL3="300 es",WebGLCoordinateSystem=2e3,WebGPUCoordinateSystem=2001,TimestampQuery={COMPUTE:"compute",RENDER:"render"},InterpolationSamplingType={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},InterpolationSamplingMode={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function arrayNeedsUint32(G){for(let _=G.length-1;_>=0;--_)if(G[_]>=65535)return!0;return!1}const TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function getTypedArray(G,_){return new TYPED_ARRAYS[G](_)}function createElementNS(G){return document.createElementNS("http://www.w3.org/1999/xhtml",G)}function createCanvasElement(){const G=createElementNS("canvas");return G.style.display="block",G}const _cache={};let _setConsoleFunction=null;function setConsoleFunction(G){_setConsoleFunction=G}function getConsoleFunction(){return _setConsoleFunction}function log(...G){const _="THREE."+G.shift();_setConsoleFunction?_setConsoleFunction("log",_,...G):console.log(_,...G)}function warn(...G){const _="THREE."+G.shift();_setConsoleFunction?_setConsoleFunction("warn",_,...G):console.warn(_,...G)}function error(...G){const _="THREE."+G.shift();_setConsoleFunction?_setConsoleFunction("error",_,...G):console.error(_,...G)}function warnOnce(...G){const _=G.join(" ");_ in _cache||(_cache[_]=!0,warn(...G))}function probeAsync(G,_,J){return new Promise(function(Z,Q){function ee(){switch(G.clientWaitSync(_,G.SYNC_FLUSH_COMMANDS_BIT,0)){case G.WAIT_FAILED:Q();break;case G.TIMEOUT_EXPIRED:setTimeout(ee,J);break;default:Z()}}setTimeout(ee,J)})}let EventDispatcher$1=class{addEventListener(_,J){this._listeners===void 0&&(this._listeners={});const Z=this._listeners;Z[_]===void 0&&(Z[_]=[]),Z[_].indexOf(J)===-1&&Z[_].push(J)}hasEventListener(_,J){const Z=this._listeners;return Z===void 0?!1:Z[_]!==void 0&&Z[_].indexOf(J)!==-1}removeEventListener(_,J){const Z=this._listeners;if(Z===void 0)return;const Q=Z[_];if(Q!==void 0){const ee=Q.indexOf(J);ee!==-1&&Q.splice(ee,1)}}dispatchEvent(_){const J=this._listeners;if(J===void 0)return;const Z=J[_.type];if(Z!==void 0){_.target=this;const Q=Z.slice(0);for(let ee=0,te=Q.length;ee<te;ee++)Q[ee].call(this,_);_.target=null}}};const _lut=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID(){const G=Math.random()*4294967295|0,_=Math.random()*4294967295|0,J=Math.random()*4294967295|0,Z=Math.random()*4294967295|0;return(_lut[G&255]+_lut[G>>8&255]+_lut[G>>16&255]+_lut[G>>24&255]+"-"+_lut[_&255]+_lut[_>>8&255]+"-"+_lut[_>>16&15|64]+_lut[_>>24&255]+"-"+_lut[J&63|128]+_lut[J>>8&255]+"-"+_lut[J>>16&255]+_lut[J>>24&255]+_lut[Z&255]+_lut[Z>>8&255]+_lut[Z>>16&255]+_lut[Z>>24&255]).toLowerCase()}function clamp(G,_,J){return Math.max(_,Math.min(J,G))}function euclideanModulo(G,_){return(G%_+_)%_}function mapLinear(G,_,J,Z,Q){return Z+(G-_)*(Q-Z)/(J-_)}function inverseLerp(G,_,J){return G!==_?(J-G)/(_-G):0}function lerp(G,_,J){return(1-J)*G+J*_}function damp(G,_,J,Z){return lerp(G,_,1-Math.exp(-J*Z))}function pingpong(G,_=1){return _-Math.abs(euclideanModulo(G,_*2)-_)}function smoothstep(G,_,J){return G<=_?0:G>=J?1:(G=(G-_)/(J-_),G*G*(3-2*G))}function smootherstep(G,_,J){return G<=_?0:G>=J?1:(G=(G-_)/(J-_),G*G*G*(G*(G*6-15)+10))}function randInt(G,_){return G+Math.floor(Math.random()*(_-G+1))}function randFloat(G,_){return G+Math.random()*(_-G)}function randFloatSpread(G){return G*(.5-Math.random())}function seededRandom(G){G!==void 0&&(_seed=G);let _=_seed+=1831565813;return _=Math.imul(_^_>>>15,_|1),_^=_+Math.imul(_^_>>>7,_|61),((_^_>>>14)>>>0)/4294967296}function degToRad(G){return G*DEG2RAD}function radToDeg(G){return G*RAD2DEG}function isPowerOfTwo(G){return(G&G-1)===0&&G!==0}function ceilPowerOfTwo(G){return Math.pow(2,Math.ceil(Math.log(G)/Math.LN2))}function floorPowerOfTwo(G){return Math.pow(2,Math.floor(Math.log(G)/Math.LN2))}function setQuaternionFromProperEuler(G,_,J,Z,Q){const ee=Math.cos,te=Math.sin,ne=ee(J/2),ie=te(J/2),re=ee((_+Z)/2),oe=te((_+Z)/2),se=ee((_-Z)/2),ae=te((_-Z)/2),ce=ee((Z-_)/2),ue=te((Z-_)/2);switch(Q){case"XYX":G.set(ne*oe,ie*se,ie*ae,ne*re);break;case"YZY":G.set(ie*ae,ne*oe,ie*se,ne*re);break;case"ZXZ":G.set(ie*se,ie*ae,ne*oe,ne*re);break;case"XZX":G.set(ne*oe,ie*ue,ie*ce,ne*re);break;case"YXY":G.set(ie*ce,ne*oe,ie*ue,ne*re);break;case"ZYZ":G.set(ie*ue,ie*ce,ne*oe,ne*re);break;default:warn("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+Q)}}function denormalize(G,_){switch(_.constructor){case Float32Array:return G;case Uint32Array:return G/4294967295;case Uint16Array:return G/65535;case Uint8Array:return G/255;case Int32Array:return Math.max(G/2147483647,-1);case Int16Array:return Math.max(G/32767,-1);case Int8Array:return Math.max(G/127,-1);default:throw new Error("Invalid component type.")}}function normalize(G,_){switch(_.constructor){case Float32Array:return G;case Uint32Array:return Math.round(G*4294967295);case Uint16Array:return Math.round(G*65535);case Uint8Array:return Math.round(G*255);case Int32Array:return Math.round(G*2147483647);case Int16Array:return Math.round(G*32767);case Int8Array:return Math.round(G*127);default:throw new Error("Invalid component type.")}}const MathUtils={DEG2RAD,RAD2DEG,generateUUID,clamp,euclideanModulo,mapLinear,inverseLerp,lerp,damp,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler,normalize,denormalize};class Vector2{constructor(_=0,J=0){Vector2.prototype.isVector2=!0,this.x=_,this.y=J}get width(){return this.x}set width(_){this.x=_}get height(){return this.y}set height(_){this.y=_}set(_,J){return this.x=_,this.y=J,this}setScalar(_){return this.x=_,this.y=_,this}setX(_){return this.x=_,this}setY(_){return this.y=_,this}setComponent(_,J){switch(_){case 0:this.x=J;break;case 1:this.y=J;break;default:throw new Error("index is out of range: "+_)}return this}getComponent(_){switch(_){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+_)}}clone(){return new this.constructor(this.x,this.y)}copy(_){return this.x=_.x,this.y=_.y,this}add(_){return this.x+=_.x,this.y+=_.y,this}addScalar(_){return this.x+=_,this.y+=_,this}addVectors(_,J){return this.x=_.x+J.x,this.y=_.y+J.y,this}addScaledVector(_,J){return this.x+=_.x*J,this.y+=_.y*J,this}sub(_){return this.x-=_.x,this.y-=_.y,this}subScalar(_){return this.x-=_,this.y-=_,this}subVectors(_,J){return this.x=_.x-J.x,this.y=_.y-J.y,this}multiply(_){return this.x*=_.x,this.y*=_.y,this}multiplyScalar(_){return this.x*=_,this.y*=_,this}divide(_){return this.x/=_.x,this.y/=_.y,this}divideScalar(_){return this.multiplyScalar(1/_)}applyMatrix3(_){const J=this.x,Z=this.y,Q=_.elements;return this.x=Q[0]*J+Q[3]*Z+Q[6],this.y=Q[1]*J+Q[4]*Z+Q[7],this}min(_){return this.x=Math.min(this.x,_.x),this.y=Math.min(this.y,_.y),this}max(_){return this.x=Math.max(this.x,_.x),this.y=Math.max(this.y,_.y),this}clamp(_,J){return this.x=clamp(this.x,_.x,J.x),this.y=clamp(this.y,_.y,J.y),this}clampScalar(_,J){return this.x=clamp(this.x,_,J),this.y=clamp(this.y,_,J),this}clampLength(_,J){const Z=this.length();return this.divideScalar(Z||1).multiplyScalar(clamp(Z,_,J))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(_){return this.x*_.x+this.y*_.y}cross(_){return this.x*_.y-this.y*_.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(_){const J=Math.sqrt(this.lengthSq()*_.lengthSq());if(J===0)return Math.PI/2;const Z=this.dot(_)/J;return Math.acos(clamp(Z,-1,1))}distanceTo(_){return Math.sqrt(this.distanceToSquared(_))}distanceToSquared(_){const J=this.x-_.x,Z=this.y-_.y;return J*J+Z*Z}manhattanDistanceTo(_){return Math.abs(this.x-_.x)+Math.abs(this.y-_.y)}setLength(_){return this.normalize().multiplyScalar(_)}lerp(_,J){return this.x+=(_.x-this.x)*J,this.y+=(_.y-this.y)*J,this}lerpVectors(_,J,Z){return this.x=_.x+(J.x-_.x)*Z,this.y=_.y+(J.y-_.y)*Z,this}equals(_){return _.x===this.x&&_.y===this.y}fromArray(_,J=0){return this.x=_[J],this.y=_[J+1],this}toArray(_=[],J=0){return _[J]=this.x,_[J+1]=this.y,_}fromBufferAttribute(_,J){return this.x=_.getX(J),this.y=_.getY(J),this}rotateAround(_,J){const Z=Math.cos(J),Q=Math.sin(J),ee=this.x-_.x,te=this.y-_.y;return this.x=ee*Z-te*Q+_.x,this.y=ee*Q+te*Z+_.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Quaternion{constructor(_=0,J=0,Z=0,Q=1){this.isQuaternion=!0,this._x=_,this._y=J,this._z=Z,this._w=Q}static slerpFlat(_,J,Z,Q,ee,te,ne){let ie=Z[Q+0],re=Z[Q+1],oe=Z[Q+2],se=Z[Q+3],ae=ee[te+0],ce=ee[te+1],ue=ee[te+2],de=ee[te+3];if(ne<=0){_[J+0]=ie,_[J+1]=re,_[J+2]=oe,_[J+3]=se;return}if(ne>=1){_[J+0]=ae,_[J+1]=ce,_[J+2]=ue,_[J+3]=de;return}if(se!==de||ie!==ae||re!==ce||oe!==ue){let me=ie*ae+re*ce+oe*ue+se*de;me<0&&(ae=-ae,ce=-ce,ue=-ue,de=-de,me=-me);let fe=1-ne;if(me<.9995){const _e=Math.acos(me),ye=Math.sin(_e);fe=Math.sin(fe*_e)/ye,ne=Math.sin(ne*_e)/ye,ie=ie*fe+ae*ne,re=re*fe+ce*ne,oe=oe*fe+ue*ne,se=se*fe+de*ne}else{ie=ie*fe+ae*ne,re=re*fe+ce*ne,oe=oe*fe+ue*ne,se=se*fe+de*ne;const _e=1/Math.sqrt(ie*ie+re*re+oe*oe+se*se);ie*=_e,re*=_e,oe*=_e,se*=_e}}_[J]=ie,_[J+1]=re,_[J+2]=oe,_[J+3]=se}static multiplyQuaternionsFlat(_,J,Z,Q,ee,te){const ne=Z[Q],ie=Z[Q+1],re=Z[Q+2],oe=Z[Q+3],se=ee[te],ae=ee[te+1],ce=ee[te+2],ue=ee[te+3];return _[J]=ne*ue+oe*se+ie*ce-re*ae,_[J+1]=ie*ue+oe*ae+re*se-ne*ce,_[J+2]=re*ue+oe*ce+ne*ae-ie*se,_[J+3]=oe*ue-ne*se-ie*ae-re*ce,_}get x(){return this._x}set x(_){this._x=_,this._onChangeCallback()}get y(){return this._y}set y(_){this._y=_,this._onChangeCallback()}get z(){return this._z}set z(_){this._z=_,this._onChangeCallback()}get w(){return this._w}set w(_){this._w=_,this._onChangeCallback()}set(_,J,Z,Q){return this._x=_,this._y=J,this._z=Z,this._w=Q,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(_){return this._x=_.x,this._y=_.y,this._z=_.z,this._w=_.w,this._onChangeCallback(),this}setFromEuler(_,J=!0){const Z=_._x,Q=_._y,ee=_._z,te=_._order,ne=Math.cos,ie=Math.sin,re=ne(Z/2),oe=ne(Q/2),se=ne(ee/2),ae=ie(Z/2),ce=ie(Q/2),ue=ie(ee/2);switch(te){case"XYZ":this._x=ae*oe*se+re*ce*ue,this._y=re*ce*se-ae*oe*ue,this._z=re*oe*ue+ae*ce*se,this._w=re*oe*se-ae*ce*ue;break;case"YXZ":this._x=ae*oe*se+re*ce*ue,this._y=re*ce*se-ae*oe*ue,this._z=re*oe*ue-ae*ce*se,this._w=re*oe*se+ae*ce*ue;break;case"ZXY":this._x=ae*oe*se-re*ce*ue,this._y=re*ce*se+ae*oe*ue,this._z=re*oe*ue+ae*ce*se,this._w=re*oe*se-ae*ce*ue;break;case"ZYX":this._x=ae*oe*se-re*ce*ue,this._y=re*ce*se+ae*oe*ue,this._z=re*oe*ue-ae*ce*se,this._w=re*oe*se+ae*ce*ue;break;case"YZX":this._x=ae*oe*se+re*ce*ue,this._y=re*ce*se+ae*oe*ue,this._z=re*oe*ue-ae*ce*se,this._w=re*oe*se-ae*ce*ue;break;case"XZY":this._x=ae*oe*se-re*ce*ue,this._y=re*ce*se-ae*oe*ue,this._z=re*oe*ue+ae*ce*se,this._w=re*oe*se+ae*ce*ue;break;default:warn("Quaternion: .setFromEuler() encountered an unknown order: "+te)}return J===!0&&this._onChangeCallback(),this}setFromAxisAngle(_,J){const Z=J/2,Q=Math.sin(Z);return this._x=_.x*Q,this._y=_.y*Q,this._z=_.z*Q,this._w=Math.cos(Z),this._onChangeCallback(),this}setFromRotationMatrix(_){const J=_.elements,Z=J[0],Q=J[4],ee=J[8],te=J[1],ne=J[5],ie=J[9],re=J[2],oe=J[6],se=J[10],ae=Z+ne+se;if(ae>0){const ce=.5/Math.sqrt(ae+1);this._w=.25/ce,this._x=(oe-ie)*ce,this._y=(ee-re)*ce,this._z=(te-Q)*ce}else if(Z>ne&&Z>se){const ce=2*Math.sqrt(1+Z-ne-se);this._w=(oe-ie)/ce,this._x=.25*ce,this._y=(Q+te)/ce,this._z=(ee+re)/ce}else if(ne>se){const ce=2*Math.sqrt(1+ne-Z-se);this._w=(ee-re)/ce,this._x=(Q+te)/ce,this._y=.25*ce,this._z=(ie+oe)/ce}else{const ce=2*Math.sqrt(1+se-Z-ne);this._w=(te-Q)/ce,this._x=(ee+re)/ce,this._y=(ie+oe)/ce,this._z=.25*ce}return this._onChangeCallback(),this}setFromUnitVectors(_,J){let Z=_.dot(J)+1;return Z<1e-8?(Z=0,Math.abs(_.x)>Math.abs(_.z)?(this._x=-_.y,this._y=_.x,this._z=0,this._w=Z):(this._x=0,this._y=-_.z,this._z=_.y,this._w=Z)):(this._x=_.y*J.z-_.z*J.y,this._y=_.z*J.x-_.x*J.z,this._z=_.x*J.y-_.y*J.x,this._w=Z),this.normalize()}angleTo(_){return 2*Math.acos(Math.abs(clamp(this.dot(_),-1,1)))}rotateTowards(_,J){const Z=this.angleTo(_);if(Z===0)return this;const Q=Math.min(1,J/Z);return this.slerp(_,Q),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(_){return this._x*_._x+this._y*_._y+this._z*_._z+this._w*_._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let _=this.length();return _===0?(this._x=0,this._y=0,this._z=0,this._w=1):(_=1/_,this._x=this._x*_,this._y=this._y*_,this._z=this._z*_,this._w=this._w*_),this._onChangeCallback(),this}multiply(_){return this.multiplyQuaternions(this,_)}premultiply(_){return this.multiplyQuaternions(_,this)}multiplyQuaternions(_,J){const Z=_._x,Q=_._y,ee=_._z,te=_._w,ne=J._x,ie=J._y,re=J._z,oe=J._w;return this._x=Z*oe+te*ne+Q*re-ee*ie,this._y=Q*oe+te*ie+ee*ne-Z*re,this._z=ee*oe+te*re+Z*ie-Q*ne,this._w=te*oe-Z*ne-Q*ie-ee*re,this._onChangeCallback(),this}slerp(_,J){if(J<=0)return this;if(J>=1)return this.copy(_);let Z=_._x,Q=_._y,ee=_._z,te=_._w,ne=this.dot(_);ne<0&&(Z=-Z,Q=-Q,ee=-ee,te=-te,ne=-ne);let ie=1-J;if(ne<.9995){const re=Math.acos(ne),oe=Math.sin(re);ie=Math.sin(ie*re)/oe,J=Math.sin(J*re)/oe,this._x=this._x*ie+Z*J,this._y=this._y*ie+Q*J,this._z=this._z*ie+ee*J,this._w=this._w*ie+te*J,this._onChangeCallback()}else this._x=this._x*ie+Z*J,this._y=this._y*ie+Q*J,this._z=this._z*ie+ee*J,this._w=this._w*ie+te*J,this.normalize();return this}slerpQuaternions(_,J,Z){return this.copy(_).slerp(J,Z)}random(){const _=2*Math.PI*Math.random(),J=2*Math.PI*Math.random(),Z=Math.random(),Q=Math.sqrt(1-Z),ee=Math.sqrt(Z);return this.set(Q*Math.sin(_),Q*Math.cos(_),ee*Math.sin(J),ee*Math.cos(J))}equals(_){return _._x===this._x&&_._y===this._y&&_._z===this._z&&_._w===this._w}fromArray(_,J=0){return this._x=_[J],this._y=_[J+1],this._z=_[J+2],this._w=_[J+3],this._onChangeCallback(),this}toArray(_=[],J=0){return _[J]=this._x,_[J+1]=this._y,_[J+2]=this._z,_[J+3]=this._w,_}fromBufferAttribute(_,J){return this._x=_.getX(J),this._y=_.getY(J),this._z=_.getZ(J),this._w=_.getW(J),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(_){return this._onChangeCallback=_,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(_=0,J=0,Z=0){Vector3.prototype.isVector3=!0,this.x=_,this.y=J,this.z=Z}set(_,J,Z){return Z===void 0&&(Z=this.z),this.x=_,this.y=J,this.z=Z,this}setScalar(_){return this.x=_,this.y=_,this.z=_,this}setX(_){return this.x=_,this}setY(_){return this.y=_,this}setZ(_){return this.z=_,this}setComponent(_,J){switch(_){case 0:this.x=J;break;case 1:this.y=J;break;case 2:this.z=J;break;default:throw new Error("index is out of range: "+_)}return this}getComponent(_){switch(_){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+_)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(_){return this.x=_.x,this.y=_.y,this.z=_.z,this}add(_){return this.x+=_.x,this.y+=_.y,this.z+=_.z,this}addScalar(_){return this.x+=_,this.y+=_,this.z+=_,this}addVectors(_,J){return this.x=_.x+J.x,this.y=_.y+J.y,this.z=_.z+J.z,this}addScaledVector(_,J){return this.x+=_.x*J,this.y+=_.y*J,this.z+=_.z*J,this}sub(_){return this.x-=_.x,this.y-=_.y,this.z-=_.z,this}subScalar(_){return this.x-=_,this.y-=_,this.z-=_,this}subVectors(_,J){return this.x=_.x-J.x,this.y=_.y-J.y,this.z=_.z-J.z,this}multiply(_){return this.x*=_.x,this.y*=_.y,this.z*=_.z,this}multiplyScalar(_){return this.x*=_,this.y*=_,this.z*=_,this}multiplyVectors(_,J){return this.x=_.x*J.x,this.y=_.y*J.y,this.z=_.z*J.z,this}applyEuler(_){return this.applyQuaternion(_quaternion$4.setFromEuler(_))}applyAxisAngle(_,J){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(_,J))}applyMatrix3(_){const J=this.x,Z=this.y,Q=this.z,ee=_.elements;return this.x=ee[0]*J+ee[3]*Z+ee[6]*Q,this.y=ee[1]*J+ee[4]*Z+ee[7]*Q,this.z=ee[2]*J+ee[5]*Z+ee[8]*Q,this}applyNormalMatrix(_){return this.applyMatrix3(_).normalize()}applyMatrix4(_){const J=this.x,Z=this.y,Q=this.z,ee=_.elements,te=1/(ee[3]*J+ee[7]*Z+ee[11]*Q+ee[15]);return this.x=(ee[0]*J+ee[4]*Z+ee[8]*Q+ee[12])*te,this.y=(ee[1]*J+ee[5]*Z+ee[9]*Q+ee[13])*te,this.z=(ee[2]*J+ee[6]*Z+ee[10]*Q+ee[14])*te,this}applyQuaternion(_){const J=this.x,Z=this.y,Q=this.z,ee=_.x,te=_.y,ne=_.z,ie=_.w,re=2*(te*Q-ne*Z),oe=2*(ne*J-ee*Q),se=2*(ee*Z-te*J);return this.x=J+ie*re+te*se-ne*oe,this.y=Z+ie*oe+ne*re-ee*se,this.z=Q+ie*se+ee*oe-te*re,this}project(_){return this.applyMatrix4(_.matrixWorldInverse).applyMatrix4(_.projectionMatrix)}unproject(_){return this.applyMatrix4(_.projectionMatrixInverse).applyMatrix4(_.matrixWorld)}transformDirection(_){const J=this.x,Z=this.y,Q=this.z,ee=_.elements;return this.x=ee[0]*J+ee[4]*Z+ee[8]*Q,this.y=ee[1]*J+ee[5]*Z+ee[9]*Q,this.z=ee[2]*J+ee[6]*Z+ee[10]*Q,this.normalize()}divide(_){return this.x/=_.x,this.y/=_.y,this.z/=_.z,this}divideScalar(_){return this.multiplyScalar(1/_)}min(_){return this.x=Math.min(this.x,_.x),this.y=Math.min(this.y,_.y),this.z=Math.min(this.z,_.z),this}max(_){return this.x=Math.max(this.x,_.x),this.y=Math.max(this.y,_.y),this.z=Math.max(this.z,_.z),this}clamp(_,J){return this.x=clamp(this.x,_.x,J.x),this.y=clamp(this.y,_.y,J.y),this.z=clamp(this.z,_.z,J.z),this}clampScalar(_,J){return this.x=clamp(this.x,_,J),this.y=clamp(this.y,_,J),this.z=clamp(this.z,_,J),this}clampLength(_,J){const Z=this.length();return this.divideScalar(Z||1).multiplyScalar(clamp(Z,_,J))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(_){return this.x*_.x+this.y*_.y+this.z*_.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(_){return this.normalize().multiplyScalar(_)}lerp(_,J){return this.x+=(_.x-this.x)*J,this.y+=(_.y-this.y)*J,this.z+=(_.z-this.z)*J,this}lerpVectors(_,J,Z){return this.x=_.x+(J.x-_.x)*Z,this.y=_.y+(J.y-_.y)*Z,this.z=_.z+(J.z-_.z)*Z,this}cross(_){return this.crossVectors(this,_)}crossVectors(_,J){const Z=_.x,Q=_.y,ee=_.z,te=J.x,ne=J.y,ie=J.z;return this.x=Q*ie-ee*ne,this.y=ee*te-Z*ie,this.z=Z*ne-Q*te,this}projectOnVector(_){const J=_.lengthSq();if(J===0)return this.set(0,0,0);const Z=_.dot(this)/J;return this.copy(_).multiplyScalar(Z)}projectOnPlane(_){return _vector$c.copy(this).projectOnVector(_),this.sub(_vector$c)}reflect(_){return this.sub(_vector$c.copy(_).multiplyScalar(2*this.dot(_)))}angleTo(_){const J=Math.sqrt(this.lengthSq()*_.lengthSq());if(J===0)return Math.PI/2;const Z=this.dot(_)/J;return Math.acos(clamp(Z,-1,1))}distanceTo(_){return Math.sqrt(this.distanceToSquared(_))}distanceToSquared(_){const J=this.x-_.x,Z=this.y-_.y,Q=this.z-_.z;return J*J+Z*Z+Q*Q}manhattanDistanceTo(_){return Math.abs(this.x-_.x)+Math.abs(this.y-_.y)+Math.abs(this.z-_.z)}setFromSpherical(_){return this.setFromSphericalCoords(_.radius,_.phi,_.theta)}setFromSphericalCoords(_,J,Z){const Q=Math.sin(J)*_;return this.x=Q*Math.sin(Z),this.y=Math.cos(J)*_,this.z=Q*Math.cos(Z),this}setFromCylindrical(_){return this.setFromCylindricalCoords(_.radius,_.theta,_.y)}setFromCylindricalCoords(_,J,Z){return this.x=_*Math.sin(J),this.y=Z,this.z=_*Math.cos(J),this}setFromMatrixPosition(_){const J=_.elements;return this.x=J[12],this.y=J[13],this.z=J[14],this}setFromMatrixScale(_){const J=this.setFromMatrixColumn(_,0).length(),Z=this.setFromMatrixColumn(_,1).length(),Q=this.setFromMatrixColumn(_,2).length();return this.x=J,this.y=Z,this.z=Q,this}setFromMatrixColumn(_,J){return this.fromArray(_.elements,J*4)}setFromMatrix3Column(_,J){return this.fromArray(_.elements,J*3)}setFromEuler(_){return this.x=_._x,this.y=_._y,this.z=_._z,this}setFromColor(_){return this.x=_.r,this.y=_.g,this.z=_.b,this}equals(_){return _.x===this.x&&_.y===this.y&&_.z===this.z}fromArray(_,J=0){return this.x=_[J],this.y=_[J+1],this.z=_[J+2],this}toArray(_=[],J=0){return _[J]=this.x,_[J+1]=this.y,_[J+2]=this.z,_}fromBufferAttribute(_,J){return this.x=_.getX(J),this.y=_.getY(J),this.z=_.getZ(J),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const _=Math.random()*Math.PI*2,J=Math.random()*2-1,Z=Math.sqrt(1-J*J);return this.x=Z*Math.cos(_),this.y=J,this.z=Z*Math.sin(_),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$c=new Vector3,_quaternion$4=new Quaternion;class Matrix3{constructor(_,J,Z,Q,ee,te,ne,ie,re){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],_!==void 0&&this.set(_,J,Z,Q,ee,te,ne,ie,re)}set(_,J,Z,Q,ee,te,ne,ie,re){const oe=this.elements;return oe[0]=_,oe[1]=Q,oe[2]=ne,oe[3]=J,oe[4]=ee,oe[5]=ie,oe[6]=Z,oe[7]=te,oe[8]=re,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(_){const J=this.elements,Z=_.elements;return J[0]=Z[0],J[1]=Z[1],J[2]=Z[2],J[3]=Z[3],J[4]=Z[4],J[5]=Z[5],J[6]=Z[6],J[7]=Z[7],J[8]=Z[8],this}extractBasis(_,J,Z){return _.setFromMatrix3Column(this,0),J.setFromMatrix3Column(this,1),Z.setFromMatrix3Column(this,2),this}setFromMatrix4(_){const J=_.elements;return this.set(J[0],J[4],J[8],J[1],J[5],J[9],J[2],J[6],J[10]),this}multiply(_){return this.multiplyMatrices(this,_)}premultiply(_){return this.multiplyMatrices(_,this)}multiplyMatrices(_,J){const Z=_.elements,Q=J.elements,ee=this.elements,te=Z[0],ne=Z[3],ie=Z[6],re=Z[1],oe=Z[4],se=Z[7],ae=Z[2],ce=Z[5],ue=Z[8],de=Q[0],me=Q[3],fe=Q[6],_e=Q[1],ye=Q[4],be=Q[7],Se=Q[2],Ce=Q[5],Me=Q[8];return ee[0]=te*de+ne*_e+ie*Se,ee[3]=te*me+ne*ye+ie*Ce,ee[6]=te*fe+ne*be+ie*Me,ee[1]=re*de+oe*_e+se*Se,ee[4]=re*me+oe*ye+se*Ce,ee[7]=re*fe+oe*be+se*Me,ee[2]=ae*de+ce*_e+ue*Se,ee[5]=ae*me+ce*ye+ue*Ce,ee[8]=ae*fe+ce*be+ue*Me,this}multiplyScalar(_){const J=this.elements;return J[0]*=_,J[3]*=_,J[6]*=_,J[1]*=_,J[4]*=_,J[7]*=_,J[2]*=_,J[5]*=_,J[8]*=_,this}determinant(){const _=this.elements,J=_[0],Z=_[1],Q=_[2],ee=_[3],te=_[4],ne=_[5],ie=_[6],re=_[7],oe=_[8];return J*te*oe-J*ne*re-Z*ee*oe+Z*ne*ie+Q*ee*re-Q*te*ie}invert(){const _=this.elements,J=_[0],Z=_[1],Q=_[2],ee=_[3],te=_[4],ne=_[5],ie=_[6],re=_[7],oe=_[8],se=oe*te-ne*re,ae=ne*ie-oe*ee,ce=re*ee-te*ie,ue=J*se+Z*ae+Q*ce;if(ue===0)return this.set(0,0,0,0,0,0,0,0,0);const de=1/ue;return _[0]=se*de,_[1]=(Q*re-oe*Z)*de,_[2]=(ne*Z-Q*te)*de,_[3]=ae*de,_[4]=(oe*J-Q*ie)*de,_[5]=(Q*ee-ne*J)*de,_[6]=ce*de,_[7]=(Z*ie-re*J)*de,_[8]=(te*J-Z*ee)*de,this}transpose(){let _;const J=this.elements;return _=J[1],J[1]=J[3],J[3]=_,_=J[2],J[2]=J[6],J[6]=_,_=J[5],J[5]=J[7],J[7]=_,this}getNormalMatrix(_){return this.setFromMatrix4(_).invert().transpose()}transposeIntoArray(_){const J=this.elements;return _[0]=J[0],_[1]=J[3],_[2]=J[6],_[3]=J[1],_[4]=J[4],_[5]=J[7],_[6]=J[2],_[7]=J[5],_[8]=J[8],this}setUvTransform(_,J,Z,Q,ee,te,ne){const ie=Math.cos(ee),re=Math.sin(ee);return this.set(Z*ie,Z*re,-Z*(ie*te+re*ne)+te+_,-Q*re,Q*ie,-Q*(-re*te+ie*ne)+ne+J,0,0,1),this}scale(_,J){return this.premultiply(_m3.makeScale(_,J)),this}rotate(_){return this.premultiply(_m3.makeRotation(-_)),this}translate(_,J){return this.premultiply(_m3.makeTranslation(_,J)),this}makeTranslation(_,J){return _.isVector2?this.set(1,0,_.x,0,1,_.y,0,0,1):this.set(1,0,_,0,1,J,0,0,1),this}makeRotation(_){const J=Math.cos(_),Z=Math.sin(_);return this.set(J,-Z,0,Z,J,0,0,0,1),this}makeScale(_,J){return this.set(_,0,0,0,J,0,0,0,1),this}equals(_){const J=this.elements,Z=_.elements;for(let Q=0;Q<9;Q++)if(J[Q]!==Z[Q])return!1;return!0}fromArray(_,J=0){for(let Z=0;Z<9;Z++)this.elements[Z]=_[Z+J];return this}toArray(_=[],J=0){const Z=this.elements;return _[J]=Z[0],_[J+1]=Z[1],_[J+2]=Z[2],_[J+3]=Z[3],_[J+4]=Z[4],_[J+5]=Z[5],_[J+6]=Z[6],_[J+7]=Z[7],_[J+8]=Z[8],_}clone(){return new this.constructor().fromArray(this.elements)}}const _m3=new Matrix3,LINEAR_REC709_TO_XYZ=new Matrix3().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),XYZ_TO_LINEAR_REC709=new Matrix3().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function createColorManagement(){const G={enabled:!0,workingColorSpace:LinearSRGBColorSpace,spaces:{},convert:function(Q,ee,te){return this.enabled===!1||ee===te||!ee||!te||(this.spaces[ee].transfer===SRGBTransfer&&(Q.r=SRGBToLinear(Q.r),Q.g=SRGBToLinear(Q.g),Q.b=SRGBToLinear(Q.b)),this.spaces[ee].primaries!==this.spaces[te].primaries&&(Q.applyMatrix3(this.spaces[ee].toXYZ),Q.applyMatrix3(this.spaces[te].fromXYZ)),this.spaces[te].transfer===SRGBTransfer&&(Q.r=LinearToSRGB(Q.r),Q.g=LinearToSRGB(Q.g),Q.b=LinearToSRGB(Q.b))),Q},workingToColorSpace:function(Q,ee){return this.convert(Q,this.workingColorSpace,ee)},colorSpaceToWorking:function(Q,ee){return this.convert(Q,ee,this.workingColorSpace)},getPrimaries:function(Q){return this.spaces[Q].primaries},getTransfer:function(Q){return Q===NoColorSpace?LinearTransfer:this.spaces[Q].transfer},getToneMappingMode:function(Q){return this.spaces[Q].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(Q,ee=this.workingColorSpace){return Q.fromArray(this.spaces[ee].luminanceCoefficients)},define:function(Q){Object.assign(this.spaces,Q)},_getMatrix:function(Q,ee,te){return Q.copy(this.spaces[ee].toXYZ).multiply(this.spaces[te].fromXYZ)},_getDrawingBufferColorSpace:function(Q){return this.spaces[Q].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(Q=this.workingColorSpace){return this.spaces[Q].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(Q,ee){return warnOnce("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),G.workingToColorSpace(Q,ee)},toWorkingColorSpace:function(Q,ee){return warnOnce("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),G.colorSpaceToWorking(Q,ee)}},_=[.64,.33,.3,.6,.15,.06],J=[.2126,.7152,.0722],Z=[.3127,.329];return G.define({[LinearSRGBColorSpace]:{primaries:_,whitePoint:Z,transfer:LinearTransfer,toXYZ:LINEAR_REC709_TO_XYZ,fromXYZ:XYZ_TO_LINEAR_REC709,luminanceCoefficients:J,workingColorSpaceConfig:{unpackColorSpace:SRGBColorSpace},outputColorSpaceConfig:{drawingBufferColorSpace:SRGBColorSpace}},[SRGBColorSpace]:{primaries:_,whitePoint:Z,transfer:SRGBTransfer,toXYZ:LINEAR_REC709_TO_XYZ,fromXYZ:XYZ_TO_LINEAR_REC709,luminanceCoefficients:J,outputColorSpaceConfig:{drawingBufferColorSpace:SRGBColorSpace}}}),G}const ColorManagement=createColorManagement();function SRGBToLinear(G){return G<.04045?G*.0773993808:Math.pow(G*.9478672986+.0521327014,2.4)}function LinearToSRGB(G){return G<.0031308?G*12.92:1.055*Math.pow(G,.41666)-.055}let _canvas;class ImageUtils{static getDataURL(_,J="image/png"){if(/^data:/i.test(_.src)||typeof HTMLCanvasElement>"u")return _.src;let Z;if(_ instanceof HTMLCanvasElement)Z=_;else{_canvas===void 0&&(_canvas=createElementNS("canvas")),_canvas.width=_.width,_canvas.height=_.height;const Q=_canvas.getContext("2d");_ instanceof ImageData?Q.putImageData(_,0,0):Q.drawImage(_,0,0,_.width,_.height),Z=_canvas}return Z.toDataURL(J)}static sRGBToLinear(_){if(typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&_ instanceof ImageBitmap){const J=createElementNS("canvas");J.width=_.width,J.height=_.height;const Z=J.getContext("2d");Z.drawImage(_,0,0,_.width,_.height);const Q=Z.getImageData(0,0,_.width,_.height),ee=Q.data;for(let te=0;te<ee.length;te++)ee[te]=SRGBToLinear(ee[te]/255)*255;return Z.putImageData(Q,0,0),J}else if(_.data){const J=_.data.slice(0);for(let Z=0;Z<J.length;Z++)J instanceof Uint8Array||J instanceof Uint8ClampedArray?J[Z]=Math.floor(SRGBToLinear(J[Z]/255)*255):J[Z]=SRGBToLinear(J[Z]);return{data:J,width:_.width,height:_.height}}else return warn("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),_}}let _sourceId=0;class Source{constructor(_=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_sourceId++}),this.uuid=generateUUID(),this.data=_,this.dataReady=!0,this.version=0}getSize(_){const J=this.data;return typeof HTMLVideoElement<"u"&&J instanceof HTMLVideoElement?_.set(J.videoWidth,J.videoHeight,0):J instanceof VideoFrame?_.set(J.displayHeight,J.displayWidth,0):J!==null?_.set(J.width,J.height,J.depth||0):_.set(0,0,0),_}set needsUpdate(_){_===!0&&this.version++}toJSON(_){const J=_===void 0||typeof _=="string";if(!J&&_.images[this.uuid]!==void 0)return _.images[this.uuid];const Z={uuid:this.uuid,url:""},Q=this.data;if(Q!==null){let ee;if(Array.isArray(Q)){ee=[];for(let te=0,ne=Q.length;te<ne;te++)Q[te].isDataTexture?ee.push(serializeImage(Q[te].image)):ee.push(serializeImage(Q[te]))}else ee=serializeImage(Q);Z.url=ee}return J||(_.images[this.uuid]=Z),Z}}function serializeImage(G){return typeof HTMLImageElement<"u"&&G instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&G instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&G instanceof ImageBitmap?ImageUtils.getDataURL(G):G.data?{data:Array.from(G.data),width:G.width,height:G.height,type:G.data.constructor.name}:(warn("Texture: Unable to serialize Texture."),{})}let _textureId=0;const _tempVec3=new Vector3;class Texture extends EventDispatcher$1{constructor(_=Texture.DEFAULT_IMAGE,J=Texture.DEFAULT_MAPPING,Z=ClampToEdgeWrapping,Q=ClampToEdgeWrapping,ee=LinearFilter,te=LinearMipmapLinearFilter,ne=RGBAFormat,ie=UnsignedByteType,re=Texture.DEFAULT_ANISOTROPY,oe=NoColorSpace){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_textureId++}),this.uuid=generateUUID(),this.name="",this.source=new Source(_),this.mipmaps=[],this.mapping=J,this.channel=0,this.wrapS=Z,this.wrapT=Q,this.magFilter=ee,this.minFilter=te,this.anisotropy=re,this.format=ne,this.internalFormat=null,this.type=ie,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=oe,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(_&&_.depth&&_.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(_tempVec3).x}get height(){return this.source.getSize(_tempVec3).y}get depth(){return this.source.getSize(_tempVec3).z}get image(){return this.source.data}set image(_=null){this.source.data=_}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(_,J){this.updateRanges.push({start:_,count:J})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(_){return this.name=_.name,this.source=_.source,this.mipmaps=_.mipmaps.slice(0),this.mapping=_.mapping,this.channel=_.channel,this.wrapS=_.wrapS,this.wrapT=_.wrapT,this.magFilter=_.magFilter,this.minFilter=_.minFilter,this.anisotropy=_.anisotropy,this.format=_.format,this.internalFormat=_.internalFormat,this.type=_.type,this.offset.copy(_.offset),this.repeat.copy(_.repeat),this.center.copy(_.center),this.rotation=_.rotation,this.matrixAutoUpdate=_.matrixAutoUpdate,this.matrix.copy(_.matrix),this.generateMipmaps=_.generateMipmaps,this.premultiplyAlpha=_.premultiplyAlpha,this.flipY=_.flipY,this.unpackAlignment=_.unpackAlignment,this.colorSpace=_.colorSpace,this.renderTarget=_.renderTarget,this.isRenderTargetTexture=_.isRenderTargetTexture,this.isArrayTexture=_.isArrayTexture,this.userData=JSON.parse(JSON.stringify(_.userData)),this.needsUpdate=!0,this}setValues(_){for(const J in _){const Z=_[J];if(Z===void 0){warn(`Texture.setValues(): parameter '${J}' has value of undefined.`);continue}const Q=this[J];if(Q===void 0){warn(`Texture.setValues(): property '${J}' does not exist.`);continue}Q&&Z&&Q.isVector2&&Z.isVector2||Q&&Z&&Q.isVector3&&Z.isVector3||Q&&Z&&Q.isMatrix3&&Z.isMatrix3?Q.copy(Z):this[J]=Z}}toJSON(_){const J=_===void 0||typeof _=="string";if(!J&&_.textures[this.uuid]!==void 0)return _.textures[this.uuid];const Z={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(_).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(Z.userData=this.userData),J||(_.textures[this.uuid]=Z),Z}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(_){if(this.mapping!==UVMapping)return _;if(_.applyMatrix3(this.matrix),_.x<0||_.x>1)switch(this.wrapS){case RepeatWrapping:_.x=_.x-Math.floor(_.x);break;case ClampToEdgeWrapping:_.x=_.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(_.x)%2)===1?_.x=Math.ceil(_.x)-_.x:_.x=_.x-Math.floor(_.x);break}if(_.y<0||_.y>1)switch(this.wrapT){case RepeatWrapping:_.y=_.y-Math.floor(_.y);break;case ClampToEdgeWrapping:_.y=_.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(_.y)%2)===1?_.y=Math.ceil(_.y)-_.y:_.y=_.y-Math.floor(_.y);break}return this.flipY&&(_.y=1-_.y),_}set needsUpdate(_){_===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(_){_===!0&&this.pmremVersion++}}Texture.DEFAULT_IMAGE=null;Texture.DEFAULT_MAPPING=UVMapping;Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(_=0,J=0,Z=0,Q=1){Vector4.prototype.isVector4=!0,this.x=_,this.y=J,this.z=Z,this.w=Q}get width(){return this.z}set width(_){this.z=_}get height(){return this.w}set height(_){this.w=_}set(_,J,Z,Q){return this.x=_,this.y=J,this.z=Z,this.w=Q,this}setScalar(_){return this.x=_,this.y=_,this.z=_,this.w=_,this}setX(_){return this.x=_,this}setY(_){return this.y=_,this}setZ(_){return this.z=_,this}setW(_){return this.w=_,this}setComponent(_,J){switch(_){case 0:this.x=J;break;case 1:this.y=J;break;case 2:this.z=J;break;case 3:this.w=J;break;default:throw new Error("index is out of range: "+_)}return this}getComponent(_){switch(_){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+_)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(_){return this.x=_.x,this.y=_.y,this.z=_.z,this.w=_.w!==void 0?_.w:1,this}add(_){return this.x+=_.x,this.y+=_.y,this.z+=_.z,this.w+=_.w,this}addScalar(_){return this.x+=_,this.y+=_,this.z+=_,this.w+=_,this}addVectors(_,J){return this.x=_.x+J.x,this.y=_.y+J.y,this.z=_.z+J.z,this.w=_.w+J.w,this}addScaledVector(_,J){return this.x+=_.x*J,this.y+=_.y*J,this.z+=_.z*J,this.w+=_.w*J,this}sub(_){return this.x-=_.x,this.y-=_.y,this.z-=_.z,this.w-=_.w,this}subScalar(_){return this.x-=_,this.y-=_,this.z-=_,this.w-=_,this}subVectors(_,J){return this.x=_.x-J.x,this.y=_.y-J.y,this.z=_.z-J.z,this.w=_.w-J.w,this}multiply(_){return this.x*=_.x,this.y*=_.y,this.z*=_.z,this.w*=_.w,this}multiplyScalar(_){return this.x*=_,this.y*=_,this.z*=_,this.w*=_,this}applyMatrix4(_){const J=this.x,Z=this.y,Q=this.z,ee=this.w,te=_.elements;return this.x=te[0]*J+te[4]*Z+te[8]*Q+te[12]*ee,this.y=te[1]*J+te[5]*Z+te[9]*Q+te[13]*ee,this.z=te[2]*J+te[6]*Z+te[10]*Q+te[14]*ee,this.w=te[3]*J+te[7]*Z+te[11]*Q+te[15]*ee,this}divide(_){return this.x/=_.x,this.y/=_.y,this.z/=_.z,this.w/=_.w,this}divideScalar(_){return this.multiplyScalar(1/_)}setAxisAngleFromQuaternion(_){this.w=2*Math.acos(_.w);const J=Math.sqrt(1-_.w*_.w);return J<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=_.x/J,this.y=_.y/J,this.z=_.z/J),this}setAxisAngleFromRotationMatrix(_){let J,Z,Q,ee;const ie=_.elements,re=ie[0],oe=ie[4],se=ie[8],ae=ie[1],ce=ie[5],ue=ie[9],de=ie[2],me=ie[6],fe=ie[10];if(Math.abs(oe-ae)<.01&&Math.abs(se-de)<.01&&Math.abs(ue-me)<.01){if(Math.abs(oe+ae)<.1&&Math.abs(se+de)<.1&&Math.abs(ue+me)<.1&&Math.abs(re+ce+fe-3)<.1)return this.set(1,0,0,0),this;J=Math.PI;const ye=(re+1)/2,be=(ce+1)/2,Se=(fe+1)/2,Ce=(oe+ae)/4,Me=(se+de)/4,Re=(ue+me)/4;return ye>be&&ye>Se?ye<.01?(Z=0,Q=.707106781,ee=.707106781):(Z=Math.sqrt(ye),Q=Ce/Z,ee=Me/Z):be>Se?be<.01?(Z=.707106781,Q=0,ee=.707106781):(Q=Math.sqrt(be),Z=Ce/Q,ee=Re/Q):Se<.01?(Z=.707106781,Q=.707106781,ee=0):(ee=Math.sqrt(Se),Z=Me/ee,Q=Re/ee),this.set(Z,Q,ee,J),this}let _e=Math.sqrt((me-ue)*(me-ue)+(se-de)*(se-de)+(ae-oe)*(ae-oe));return Math.abs(_e)<.001&&(_e=1),this.x=(me-ue)/_e,this.y=(se-de)/_e,this.z=(ae-oe)/_e,this.w=Math.acos((re+ce+fe-1)/2),this}setFromMatrixPosition(_){const J=_.elements;return this.x=J[12],this.y=J[13],this.z=J[14],this.w=J[15],this}min(_){return this.x=Math.min(this.x,_.x),this.y=Math.min(this.y,_.y),this.z=Math.min(this.z,_.z),this.w=Math.min(this.w,_.w),this}max(_){return this.x=Math.max(this.x,_.x),this.y=Math.max(this.y,_.y),this.z=Math.max(this.z,_.z),this.w=Math.max(this.w,_.w),this}clamp(_,J){return this.x=clamp(this.x,_.x,J.x),this.y=clamp(this.y,_.y,J.y),this.z=clamp(this.z,_.z,J.z),this.w=clamp(this.w,_.w,J.w),this}clampScalar(_,J){return this.x=clamp(this.x,_,J),this.y=clamp(this.y,_,J),this.z=clamp(this.z,_,J),this.w=clamp(this.w,_,J),this}clampLength(_,J){const Z=this.length();return this.divideScalar(Z||1).multiplyScalar(clamp(Z,_,J))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(_){return this.x*_.x+this.y*_.y+this.z*_.z+this.w*_.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(_){return this.normalize().multiplyScalar(_)}lerp(_,J){return this.x+=(_.x-this.x)*J,this.y+=(_.y-this.y)*J,this.z+=(_.z-this.z)*J,this.w+=(_.w-this.w)*J,this}lerpVectors(_,J,Z){return this.x=_.x+(J.x-_.x)*Z,this.y=_.y+(J.y-_.y)*Z,this.z=_.z+(J.z-_.z)*Z,this.w=_.w+(J.w-_.w)*Z,this}equals(_){return _.x===this.x&&_.y===this.y&&_.z===this.z&&_.w===this.w}fromArray(_,J=0){return this.x=_[J],this.y=_[J+1],this.z=_[J+2],this.w=_[J+3],this}toArray(_=[],J=0){return _[J]=this.x,_[J+1]=this.y,_[J+2]=this.z,_[J+3]=this.w,_}fromBufferAttribute(_,J){return this.x=_.getX(J),this.y=_.getY(J),this.z=_.getZ(J),this.w=_.getW(J),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class RenderTarget extends EventDispatcher$1{constructor(_=1,J=1,Z={}){super(),Z=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:LinearFilter,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},Z),this.isRenderTarget=!0,this.width=_,this.height=J,this.depth=Z.depth,this.scissor=new Vector4(0,0,_,J),this.scissorTest=!1,this.viewport=new Vector4(0,0,_,J);const Q={width:_,height:J,depth:Z.depth},ee=new Texture(Q);this.textures=[];const te=Z.count;for(let ne=0;ne<te;ne++)this.textures[ne]=ee.clone(),this.textures[ne].isRenderTargetTexture=!0,this.textures[ne].renderTarget=this;this._setTextureOptions(Z),this.depthBuffer=Z.depthBuffer,this.stencilBuffer=Z.stencilBuffer,this.resolveDepthBuffer=Z.resolveDepthBuffer,this.resolveStencilBuffer=Z.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=Z.depthTexture,this.samples=Z.samples,this.multiview=Z.multiview}_setTextureOptions(_={}){const J={minFilter:LinearFilter,generateMipmaps:!1,flipY:!1,internalFormat:null};_.mapping!==void 0&&(J.mapping=_.mapping),_.wrapS!==void 0&&(J.wrapS=_.wrapS),_.wrapT!==void 0&&(J.wrapT=_.wrapT),_.wrapR!==void 0&&(J.wrapR=_.wrapR),_.magFilter!==void 0&&(J.magFilter=_.magFilter),_.minFilter!==void 0&&(J.minFilter=_.minFilter),_.format!==void 0&&(J.format=_.format),_.type!==void 0&&(J.type=_.type),_.anisotropy!==void 0&&(J.anisotropy=_.anisotropy),_.colorSpace!==void 0&&(J.colorSpace=_.colorSpace),_.flipY!==void 0&&(J.flipY=_.flipY),_.generateMipmaps!==void 0&&(J.generateMipmaps=_.generateMipmaps),_.internalFormat!==void 0&&(J.internalFormat=_.internalFormat);for(let Z=0;Z<this.textures.length;Z++)this.textures[Z].setValues(J)}get texture(){return this.textures[0]}set texture(_){this.textures[0]=_}set depthTexture(_){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),_!==null&&(_.renderTarget=this),this._depthTexture=_}get depthTexture(){return this._depthTexture}setSize(_,J,Z=1){if(this.width!==_||this.height!==J||this.depth!==Z){this.width=_,this.height=J,this.depth=Z;for(let Q=0,ee=this.textures.length;Q<ee;Q++)this.textures[Q].image.width=_,this.textures[Q].image.height=J,this.textures[Q].image.depth=Z,this.textures[Q].isData3DTexture!==!0&&(this.textures[Q].isArrayTexture=this.textures[Q].image.depth>1);this.dispose()}this.viewport.set(0,0,_,J),this.scissor.set(0,0,_,J)}clone(){return new this.constructor().copy(this)}copy(_){this.width=_.width,this.height=_.height,this.depth=_.depth,this.scissor.copy(_.scissor),this.scissorTest=_.scissorTest,this.viewport.copy(_.viewport),this.textures.length=0;for(let J=0,Z=_.textures.length;J<Z;J++){this.textures[J]=_.textures[J].clone(),this.textures[J].isRenderTargetTexture=!0,this.textures[J].renderTarget=this;const Q=Object.assign({},_.textures[J].image);this.textures[J].source=new Source(Q)}return this.depthBuffer=_.depthBuffer,this.stencilBuffer=_.stencilBuffer,this.resolveDepthBuffer=_.resolveDepthBuffer,this.resolveStencilBuffer=_.resolveStencilBuffer,_.depthTexture!==null&&(this.depthTexture=_.depthTexture.clone()),this.samples=_.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class WebGLRenderTarget extends RenderTarget{constructor(_=1,J=1,Z={}){super(_,J,Z),this.isWebGLRenderTarget=!0}}class DataArrayTexture extends Texture{constructor(_=null,J=1,Z=1,Q=1){super(null),this.isDataArrayTexture=!0,this.image={data:_,width:J,height:Z,depth:Q},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(_){this.layerUpdates.add(_)}clearLayerUpdates(){this.layerUpdates.clear()}}class WebGLArrayRenderTarget extends WebGLRenderTarget{constructor(_=1,J=1,Z=1,Q={}){super(_,J,Q),this.isWebGLArrayRenderTarget=!0,this.depth=Z,this.texture=new DataArrayTexture(null,_,J,Z),this._setTextureOptions(Q),this.texture.isRenderTargetTexture=!0}}class Data3DTexture extends Texture{constructor(_=null,J=1,Z=1,Q=1){super(null),this.isData3DTexture=!0,this.image={data:_,width:J,height:Z,depth:Q},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGL3DRenderTarget extends WebGLRenderTarget{constructor(_=1,J=1,Z=1,Q={}){super(_,J,Q),this.isWebGL3DRenderTarget=!0,this.depth=Z,this.texture=new Data3DTexture(null,_,J,Z),this._setTextureOptions(Q),this.texture.isRenderTargetTexture=!0}}class Box3{constructor(_=new Vector3(1/0,1/0,1/0),J=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=_,this.max=J}set(_,J){return this.min.copy(_),this.max.copy(J),this}setFromArray(_){this.makeEmpty();for(let J=0,Z=_.length;J<Z;J+=3)this.expandByPoint(_vector$b.fromArray(_,J));return this}setFromBufferAttribute(_){this.makeEmpty();for(let J=0,Z=_.count;J<Z;J++)this.expandByPoint(_vector$b.fromBufferAttribute(_,J));return this}setFromPoints(_){this.makeEmpty();for(let J=0,Z=_.length;J<Z;J++)this.expandByPoint(_[J]);return this}setFromCenterAndSize(_,J){const Z=_vector$b.copy(J).multiplyScalar(.5);return this.min.copy(_).sub(Z),this.max.copy(_).add(Z),this}setFromObject(_,J=!1){return this.makeEmpty(),this.expandByObject(_,J)}clone(){return new this.constructor().copy(this)}copy(_){return this.min.copy(_.min),this.max.copy(_.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(_){return this.isEmpty()?_.set(0,0,0):_.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(_){return this.isEmpty()?_.set(0,0,0):_.subVectors(this.max,this.min)}expandByPoint(_){return this.min.min(_),this.max.max(_),this}expandByVector(_){return this.min.sub(_),this.max.add(_),this}expandByScalar(_){return this.min.addScalar(-_),this.max.addScalar(_),this}expandByObject(_,J=!1){_.updateWorldMatrix(!1,!1);const Z=_.geometry;if(Z!==void 0){const ee=Z.getAttribute("position");if(J===!0&&ee!==void 0&&_.isInstancedMesh!==!0)for(let te=0,ne=ee.count;te<ne;te++)_.isMesh===!0?_.getVertexPosition(te,_vector$b):_vector$b.fromBufferAttribute(ee,te),_vector$b.applyMatrix4(_.matrixWorld),this.expandByPoint(_vector$b);else _.boundingBox!==void 0?(_.boundingBox===null&&_.computeBoundingBox(),_box$4.copy(_.boundingBox)):(Z.boundingBox===null&&Z.computeBoundingBox(),_box$4.copy(Z.boundingBox)),_box$4.applyMatrix4(_.matrixWorld),this.union(_box$4)}const Q=_.children;for(let ee=0,te=Q.length;ee<te;ee++)this.expandByObject(Q[ee],J);return this}containsPoint(_){return _.x>=this.min.x&&_.x<=this.max.x&&_.y>=this.min.y&&_.y<=this.max.y&&_.z>=this.min.z&&_.z<=this.max.z}containsBox(_){return this.min.x<=_.min.x&&_.max.x<=this.max.x&&this.min.y<=_.min.y&&_.max.y<=this.max.y&&this.min.z<=_.min.z&&_.max.z<=this.max.z}getParameter(_,J){return J.set((_.x-this.min.x)/(this.max.x-this.min.x),(_.y-this.min.y)/(this.max.y-this.min.y),(_.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(_){return _.max.x>=this.min.x&&_.min.x<=this.max.x&&_.max.y>=this.min.y&&_.min.y<=this.max.y&&_.max.z>=this.min.z&&_.min.z<=this.max.z}intersectsSphere(_){return this.clampPoint(_.center,_vector$b),_vector$b.distanceToSquared(_.center)<=_.radius*_.radius}intersectsPlane(_){let J,Z;return _.normal.x>0?(J=_.normal.x*this.min.x,Z=_.normal.x*this.max.x):(J=_.normal.x*this.max.x,Z=_.normal.x*this.min.x),_.normal.y>0?(J+=_.normal.y*this.min.y,Z+=_.normal.y*this.max.y):(J+=_.normal.y*this.max.y,Z+=_.normal.y*this.min.y),_.normal.z>0?(J+=_.normal.z*this.min.z,Z+=_.normal.z*this.max.z):(J+=_.normal.z*this.max.z,Z+=_.normal.z*this.min.z),J<=-_.constant&&Z>=-_.constant}intersectsTriangle(_){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$2.subVectors(_.a,_center),_v1$7.subVectors(_.b,_center),_v2$4.subVectors(_.c,_center),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$2,_v2$4);let J=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(J,_v0$2,_v1$7,_v2$4,_extents)||(J=[1,0,0,0,1,0,0,0,1],!satForAxes(J,_v0$2,_v1$7,_v2$4,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),J=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(J,_v0$2,_v1$7,_v2$4,_extents))}clampPoint(_,J){return J.copy(_).clamp(this.min,this.max)}distanceToPoint(_){return this.clampPoint(_,_vector$b).distanceTo(_)}getBoundingSphere(_){return this.isEmpty()?_.makeEmpty():(this.getCenter(_.center),_.radius=this.getSize(_vector$b).length()*.5),_}intersect(_){return this.min.max(_.min),this.max.min(_.max),this.isEmpty()&&this.makeEmpty(),this}union(_){return this.min.min(_.min),this.max.max(_.max),this}applyMatrix4(_){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(_),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(_),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(_),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(_),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(_),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(_),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(_),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(_),this.setFromPoints(_points),this)}translate(_){return this.min.add(_),this.max.add(_),this}equals(_){return _.min.equals(this.min)&&_.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(_){return this.min.fromArray(_.min),this.max.fromArray(_.max),this}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$b=new Vector3,_box$4=new Box3,_v0$2=new Vector3,_v1$7=new Vector3,_v2$4=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(G,_,J,Z,Q){for(let ee=0,te=G.length-3;ee<=te;ee+=3){_testAxis.fromArray(G,ee);const ne=Q.x*Math.abs(_testAxis.x)+Q.y*Math.abs(_testAxis.y)+Q.z*Math.abs(_testAxis.z),ie=_.dot(_testAxis),re=J.dot(_testAxis),oe=Z.dot(_testAxis);if(Math.max(-Math.max(ie,re,oe),Math.min(ie,re,oe))>ne)return!1}return!0}const _box$3=new Box3,_v1$6=new Vector3,_v2$3=new Vector3;let Sphere$1=class{constructor(_=new Vector3,J=-1){this.isSphere=!0,this.center=_,this.radius=J}set(_,J){return this.center.copy(_),this.radius=J,this}setFromPoints(_,J){const Z=this.center;J!==void 0?Z.copy(J):_box$3.setFromPoints(_).getCenter(Z);let Q=0;for(let ee=0,te=_.length;ee<te;ee++)Q=Math.max(Q,Z.distanceToSquared(_[ee]));return this.radius=Math.sqrt(Q),this}copy(_){return this.center.copy(_.center),this.radius=_.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(_){return _.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(_){return _.distanceTo(this.center)-this.radius}intersectsSphere(_){const J=this.radius+_.radius;return _.center.distanceToSquared(this.center)<=J*J}intersectsBox(_){return _.intersectsSphere(this)}intersectsPlane(_){return Math.abs(_.distanceToPoint(this.center))<=this.radius}clampPoint(_,J){const Z=this.center.distanceToSquared(_);return J.copy(_),Z>this.radius*this.radius&&(J.sub(this.center).normalize(),J.multiplyScalar(this.radius).add(this.center)),J}getBoundingBox(_){return this.isEmpty()?(_.makeEmpty(),_):(_.set(this.center,this.center),_.expandByScalar(this.radius),_)}applyMatrix4(_){return this.center.applyMatrix4(_),this.radius=this.radius*_.getMaxScaleOnAxis(),this}translate(_){return this.center.add(_),this}expandByPoint(_){if(this.isEmpty())return this.center.copy(_),this.radius=0,this;_v1$6.subVectors(_,this.center);const J=_v1$6.lengthSq();if(J>this.radius*this.radius){const Z=Math.sqrt(J),Q=(Z-this.radius)*.5;this.center.addScaledVector(_v1$6,Q/Z),this.radius+=Q}return this}union(_){return _.isEmpty()?this:this.isEmpty()?(this.copy(_),this):(this.center.equals(_.center)===!0?this.radius=Math.max(this.radius,_.radius):(_v2$3.subVectors(_.center,this.center).setLength(_.radius),this.expandByPoint(_v1$6.copy(_.center).add(_v2$3)),this.expandByPoint(_v1$6.copy(_.center).sub(_v2$3))),this)}equals(_){return _.center.equals(this.center)&&_.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(_){return this.radius=_.radius,this.center.fromArray(_.center),this}};const _vector$a=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(_=new Vector3,J=new Vector3(0,0,-1)){this.origin=_,this.direction=J}set(_,J){return this.origin.copy(_),this.direction.copy(J),this}copy(_){return this.origin.copy(_.origin),this.direction.copy(_.direction),this}at(_,J){return J.copy(this.origin).addScaledVector(this.direction,_)}lookAt(_){return this.direction.copy(_).sub(this.origin).normalize(),this}recast(_){return this.origin.copy(this.at(_,_vector$a)),this}closestPointToPoint(_,J){J.subVectors(_,this.origin);const Z=J.dot(this.direction);return Z<0?J.copy(this.origin):J.copy(this.origin).addScaledVector(this.direction,Z)}distanceToPoint(_){return Math.sqrt(this.distanceSqToPoint(_))}distanceSqToPoint(_){const J=_vector$a.subVectors(_,this.origin).dot(this.direction);return J<0?this.origin.distanceToSquared(_):(_vector$a.copy(this.origin).addScaledVector(this.direction,J),_vector$a.distanceToSquared(_))}distanceSqToSegment(_,J,Z,Q){_segCenter.copy(_).add(J).multiplyScalar(.5),_segDir.copy(J).sub(_).normalize(),_diff.copy(this.origin).sub(_segCenter);const ee=_.distanceTo(J)*.5,te=-this.direction.dot(_segDir),ne=_diff.dot(this.direction),ie=-_diff.dot(_segDir),re=_diff.lengthSq(),oe=Math.abs(1-te*te);let se,ae,ce,ue;if(oe>0)if(se=te*ie-ne,ae=te*ne-ie,ue=ee*oe,se>=0)if(ae>=-ue)if(ae<=ue){const de=1/oe;se*=de,ae*=de,ce=se*(se+te*ae+2*ne)+ae*(te*se+ae+2*ie)+re}else ae=ee,se=Math.max(0,-(te*ae+ne)),ce=-se*se+ae*(ae+2*ie)+re;else ae=-ee,se=Math.max(0,-(te*ae+ne)),ce=-se*se+ae*(ae+2*ie)+re;else ae<=-ue?(se=Math.max(0,-(-te*ee+ne)),ae=se>0?-ee:Math.min(Math.max(-ee,-ie),ee),ce=-se*se+ae*(ae+2*ie)+re):ae<=ue?(se=0,ae=Math.min(Math.max(-ee,-ie),ee),ce=ae*(ae+2*ie)+re):(se=Math.max(0,-(te*ee+ne)),ae=se>0?ee:Math.min(Math.max(-ee,-ie),ee),ce=-se*se+ae*(ae+2*ie)+re);else ae=te>0?-ee:ee,se=Math.max(0,-(te*ae+ne)),ce=-se*se+ae*(ae+2*ie)+re;return Z&&Z.copy(this.origin).addScaledVector(this.direction,se),Q&&Q.copy(_segCenter).addScaledVector(_segDir,ae),ce}intersectSphere(_,J){_vector$a.subVectors(_.center,this.origin);const Z=_vector$a.dot(this.direction),Q=_vector$a.dot(_vector$a)-Z*Z,ee=_.radius*_.radius;if(Q>ee)return null;const te=Math.sqrt(ee-Q),ne=Z-te,ie=Z+te;return ie<0?null:ne<0?this.at(ie,J):this.at(ne,J)}intersectsSphere(_){return _.radius<0?!1:this.distanceSqToPoint(_.center)<=_.radius*_.radius}distanceToPlane(_){const J=_.normal.dot(this.direction);if(J===0)return _.distanceToPoint(this.origin)===0?0:null;const Z=-(this.origin.dot(_.normal)+_.constant)/J;return Z>=0?Z:null}intersectPlane(_,J){const Z=this.distanceToPlane(_);return Z===null?null:this.at(Z,J)}intersectsPlane(_){const J=_.distanceToPoint(this.origin);return J===0||_.normal.dot(this.direction)*J<0}intersectBox(_,J){let Z,Q,ee,te,ne,ie;const re=1/this.direction.x,oe=1/this.direction.y,se=1/this.direction.z,ae=this.origin;return re>=0?(Z=(_.min.x-ae.x)*re,Q=(_.max.x-ae.x)*re):(Z=(_.max.x-ae.x)*re,Q=(_.min.x-ae.x)*re),oe>=0?(ee=(_.min.y-ae.y)*oe,te=(_.max.y-ae.y)*oe):(ee=(_.max.y-ae.y)*oe,te=(_.min.y-ae.y)*oe),Z>te||ee>Q||((ee>Z||isNaN(Z))&&(Z=ee),(te<Q||isNaN(Q))&&(Q=te),se>=0?(ne=(_.min.z-ae.z)*se,ie=(_.max.z-ae.z)*se):(ne=(_.max.z-ae.z)*se,ie=(_.min.z-ae.z)*se),Z>ie||ne>Q)||((ne>Z||Z!==Z)&&(Z=ne),(ie<Q||Q!==Q)&&(Q=ie),Q<0)?null:this.at(Z>=0?Z:Q,J)}intersectsBox(_){return this.intersectBox(_,_vector$a)!==null}intersectTriangle(_,J,Z,Q,ee){_edge1.subVectors(J,_),_edge2.subVectors(Z,_),_normal$1.crossVectors(_edge1,_edge2);let te=this.direction.dot(_normal$1),ne;if(te>0){if(Q)return null;ne=1}else if(te<0)ne=-1,te=-te;else return null;_diff.subVectors(this.origin,_);const ie=ne*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(ie<0)return null;const re=ne*this.direction.dot(_edge1.cross(_diff));if(re<0||ie+re>te)return null;const oe=-ne*_diff.dot(_normal$1);return oe<0?null:this.at(oe/te,ee)}applyMatrix4(_){return this.origin.applyMatrix4(_),this.direction.transformDirection(_),this}equals(_){return _.origin.equals(this.origin)&&_.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Matrix4{constructor(_,J,Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue,de,me){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],_!==void 0&&this.set(_,J,Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue,de,me)}set(_,J,Z,Q,ee,te,ne,ie,re,oe,se,ae,ce,ue,de,me){const fe=this.elements;return fe[0]=_,fe[4]=J,fe[8]=Z,fe[12]=Q,fe[1]=ee,fe[5]=te,fe[9]=ne,fe[13]=ie,fe[2]=re,fe[6]=oe,fe[10]=se,fe[14]=ae,fe[3]=ce,fe[7]=ue,fe[11]=de,fe[15]=me,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(_){const J=this.elements,Z=_.elements;return J[0]=Z[0],J[1]=Z[1],J[2]=Z[2],J[3]=Z[3],J[4]=Z[4],J[5]=Z[5],J[6]=Z[6],J[7]=Z[7],J[8]=Z[8],J[9]=Z[9],J[10]=Z[10],J[11]=Z[11],J[12]=Z[12],J[13]=Z[13],J[14]=Z[14],J[15]=Z[15],this}copyPosition(_){const J=this.elements,Z=_.elements;return J[12]=Z[12],J[13]=Z[13],J[14]=Z[14],this}setFromMatrix3(_){const J=_.elements;return this.set(J[0],J[3],J[6],0,J[1],J[4],J[7],0,J[2],J[5],J[8],0,0,0,0,1),this}extractBasis(_,J,Z){return _.setFromMatrixColumn(this,0),J.setFromMatrixColumn(this,1),Z.setFromMatrixColumn(this,2),this}makeBasis(_,J,Z){return this.set(_.x,J.x,Z.x,0,_.y,J.y,Z.y,0,_.z,J.z,Z.z,0,0,0,0,1),this}extractRotation(_){const J=this.elements,Z=_.elements,Q=1/_v1$5.setFromMatrixColumn(_,0).length(),ee=1/_v1$5.setFromMatrixColumn(_,1).length(),te=1/_v1$5.setFromMatrixColumn(_,2).length();return J[0]=Z[0]*Q,J[1]=Z[1]*Q,J[2]=Z[2]*Q,J[3]=0,J[4]=Z[4]*ee,J[5]=Z[5]*ee,J[6]=Z[6]*ee,J[7]=0,J[8]=Z[8]*te,J[9]=Z[9]*te,J[10]=Z[10]*te,J[11]=0,J[12]=0,J[13]=0,J[14]=0,J[15]=1,this}makeRotationFromEuler(_){const J=this.elements,Z=_.x,Q=_.y,ee=_.z,te=Math.cos(Z),ne=Math.sin(Z),ie=Math.cos(Q),re=Math.sin(Q),oe=Math.cos(ee),se=Math.sin(ee);if(_.order==="XYZ"){const ae=te*oe,ce=te*se,ue=ne*oe,de=ne*se;J[0]=ie*oe,J[4]=-ie*se,J[8]=re,J[1]=ce+ue*re,J[5]=ae-de*re,J[9]=-ne*ie,J[2]=de-ae*re,J[6]=ue+ce*re,J[10]=te*ie}else if(_.order==="YXZ"){const ae=ie*oe,ce=ie*se,ue=re*oe,de=re*se;J[0]=ae+de*ne,J[4]=ue*ne-ce,J[8]=te*re,J[1]=te*se,J[5]=te*oe,J[9]=-ne,J[2]=ce*ne-ue,J[6]=de+ae*ne,J[10]=te*ie}else if(_.order==="ZXY"){const ae=ie*oe,ce=ie*se,ue=re*oe,de=re*se;J[0]=ae-de*ne,J[4]=-te*se,J[8]=ue+ce*ne,J[1]=ce+ue*ne,J[5]=te*oe,J[9]=de-ae*ne,J[2]=-te*re,J[6]=ne,J[10]=te*ie}else if(_.order==="ZYX"){const ae=te*oe,ce=te*se,ue=ne*oe,de=ne*se;J[0]=ie*oe,J[4]=ue*re-ce,J[8]=ae*re+de,J[1]=ie*se,J[5]=de*re+ae,J[9]=ce*re-ue,J[2]=-re,J[6]=ne*ie,J[10]=te*ie}else if(_.order==="YZX"){const ae=te*ie,ce=te*re,ue=ne*ie,de=ne*re;J[0]=ie*oe,J[4]=de-ae*se,J[8]=ue*se+ce,J[1]=se,J[5]=te*oe,J[9]=-ne*oe,J[2]=-re*oe,J[6]=ce*se+ue,J[10]=ae-de*se}else if(_.order==="XZY"){const ae=te*ie,ce=te*re,ue=ne*ie,de=ne*re;J[0]=ie*oe,J[4]=-se,J[8]=re*oe,J[1]=ae*se+de,J[5]=te*oe,J[9]=ce*se-ue,J[2]=ue*se-ce,J[6]=ne*oe,J[10]=de*se+ae}return J[3]=0,J[7]=0,J[11]=0,J[12]=0,J[13]=0,J[14]=0,J[15]=1,this}makeRotationFromQuaternion(_){return this.compose(_zero,_,_one)}lookAt(_,J,Z){const Q=this.elements;return _z.subVectors(_,J),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(Z,_z),_x.lengthSq()===0&&(Math.abs(Z.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(Z,_z)),_x.normalize(),_y.crossVectors(_z,_x),Q[0]=_x.x,Q[4]=_y.x,Q[8]=_z.x,Q[1]=_x.y,Q[5]=_y.y,Q[9]=_z.y,Q[2]=_x.z,Q[6]=_y.z,Q[10]=_z.z,this}multiply(_){return this.multiplyMatrices(this,_)}premultiply(_){return this.multiplyMatrices(_,this)}multiplyMatrices(_,J){const Z=_.elements,Q=J.elements,ee=this.elements,te=Z[0],ne=Z[4],ie=Z[8],re=Z[12],oe=Z[1],se=Z[5],ae=Z[9],ce=Z[13],ue=Z[2],de=Z[6],me=Z[10],fe=Z[14],_e=Z[3],ye=Z[7],be=Z[11],Se=Z[15],Ce=Q[0],Me=Q[4],Re=Q[8],Te=Q[12],Ee=Q[1],De=Q[5],Le=Q[9],Ue=Q[13],Ge=Q[2],Ye=Q[6],ke=Q[10],Fe=Q[14],Ve=Q[3],$e=Q[7],Xe=Q[11],ze=Q[15];return ee[0]=te*Ce+ne*Ee+ie*Ge+re*Ve,ee[4]=te*Me+ne*De+ie*Ye+re*$e,ee[8]=te*Re+ne*Le+ie*ke+re*Xe,ee[12]=te*Te+ne*Ue+ie*Fe+re*ze,ee[1]=oe*Ce+se*Ee+ae*Ge+ce*Ve,ee[5]=oe*Me+se*De+ae*Ye+ce*$e,ee[9]=oe*Re+se*Le+ae*ke+ce*Xe,ee[13]=oe*Te+se*Ue+ae*Fe+ce*ze,ee[2]=ue*Ce+de*Ee+me*Ge+fe*Ve,ee[6]=ue*Me+de*De+me*Ye+fe*$e,ee[10]=ue*Re+de*Le+me*ke+fe*Xe,ee[14]=ue*Te+de*Ue+me*Fe+fe*ze,ee[3]=_e*Ce+ye*Ee+be*Ge+Se*Ve,ee[7]=_e*Me+ye*De+be*Ye+Se*$e,ee[11]=_e*Re+ye*Le+be*ke+Se*Xe,ee[15]=_e*Te+ye*Ue+be*Fe+Se*ze,this}multiplyScalar(_){const J=this.elements;return J[0]*=_,J[4]*=_,J[8]*=_,J[12]*=_,J[1]*=_,J[5]*=_,J[9]*=_,J[13]*=_,J[2]*=_,J[6]*=_,J[10]*=_,J[14]*=_,J[3]*=_,J[7]*=_,J[11]*=_,J[15]*=_,this}determinant(){const _=this.elements,J=_[0],Z=_[4],Q=_[8],ee=_[12],te=_[1],ne=_[5],ie=_[9],re=_[13],oe=_[2],se=_[6],ae=_[10],ce=_[14],ue=_[3],de=_[7],me=_[11],fe=_[15];return ue*(+ee*ie*se-Q*re*se-ee*ne*ae+Z*re*ae+Q*ne*ce-Z*ie*ce)+de*(+J*ie*ce-J*re*ae+ee*te*ae-Q*te*ce+Q*re*oe-ee*ie*oe)+me*(+J*re*se-J*ne*ce-ee*te*se+Z*te*ce+ee*ne*oe-Z*re*oe)+fe*(-Q*ne*oe-J*ie*se+J*ne*ae+Q*te*se-Z*te*ae+Z*ie*oe)}transpose(){const _=this.elements;let J;return J=_[1],_[1]=_[4],_[4]=J,J=_[2],_[2]=_[8],_[8]=J,J=_[6],_[6]=_[9],_[9]=J,J=_[3],_[3]=_[12],_[12]=J,J=_[7],_[7]=_[13],_[13]=J,J=_[11],_[11]=_[14],_[14]=J,this}setPosition(_,J,Z){const Q=this.elements;return _.isVector3?(Q[12]=_.x,Q[13]=_.y,Q[14]=_.z):(Q[12]=_,Q[13]=J,Q[14]=Z),this}invert(){const _=this.elements,J=_[0],Z=_[1],Q=_[2],ee=_[3],te=_[4],ne=_[5],ie=_[6],re=_[7],oe=_[8],se=_[9],ae=_[10],ce=_[11],ue=_[12],de=_[13],me=_[14],fe=_[15],_e=se*me*re-de*ae*re+de*ie*ce-ne*me*ce-se*ie*fe+ne*ae*fe,ye=ue*ae*re-oe*me*re-ue*ie*ce+te*me*ce+oe*ie*fe-te*ae*fe,be=oe*de*re-ue*se*re+ue*ne*ce-te*de*ce-oe*ne*fe+te*se*fe,Se=ue*se*ie-oe*de*ie-ue*ne*ae+te*de*ae+oe*ne*me-te*se*me,Ce=J*_e+Z*ye+Q*be+ee*Se;if(Ce===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Me=1/Ce;return _[0]=_e*Me,_[1]=(de*ae*ee-se*me*ee-de*Q*ce+Z*me*ce+se*Q*fe-Z*ae*fe)*Me,_[2]=(ne*me*ee-de*ie*ee+de*Q*re-Z*me*re-ne*Q*fe+Z*ie*fe)*Me,_[3]=(se*ie*ee-ne*ae*ee-se*Q*re+Z*ae*re+ne*Q*ce-Z*ie*ce)*Me,_[4]=ye*Me,_[5]=(oe*me*ee-ue*ae*ee+ue*Q*ce-J*me*ce-oe*Q*fe+J*ae*fe)*Me,_[6]=(ue*ie*ee-te*me*ee-ue*Q*re+J*me*re+te*Q*fe-J*ie*fe)*Me,_[7]=(te*ae*ee-oe*ie*ee+oe*Q*re-J*ae*re-te*Q*ce+J*ie*ce)*Me,_[8]=be*Me,_[9]=(ue*se*ee-oe*de*ee-ue*Z*ce+J*de*ce+oe*Z*fe-J*se*fe)*Me,_[10]=(te*de*ee-ue*ne*ee+ue*Z*re-J*de*re-te*Z*fe+J*ne*fe)*Me,_[11]=(oe*ne*ee-te*se*ee-oe*Z*re+J*se*re+te*Z*ce-J*ne*ce)*Me,_[12]=Se*Me,_[13]=(oe*de*Q-ue*se*Q+ue*Z*ae-J*de*ae-oe*Z*me+J*se*me)*Me,_[14]=(ue*ne*Q-te*de*Q-ue*Z*ie+J*de*ie+te*Z*me-J*ne*me)*Me,_[15]=(te*se*Q-oe*ne*Q+oe*Z*ie-J*se*ie-te*Z*ae+J*ne*ae)*Me,this}scale(_){const J=this.elements,Z=_.x,Q=_.y,ee=_.z;return J[0]*=Z,J[4]*=Q,J[8]*=ee,J[1]*=Z,J[5]*=Q,J[9]*=ee,J[2]*=Z,J[6]*=Q,J[10]*=ee,J[3]*=Z,J[7]*=Q,J[11]*=ee,this}getMaxScaleOnAxis(){const _=this.elements,J=_[0]*_[0]+_[1]*_[1]+_[2]*_[2],Z=_[4]*_[4]+_[5]*_[5]+_[6]*_[6],Q=_[8]*_[8]+_[9]*_[9]+_[10]*_[10];return Math.sqrt(Math.max(J,Z,Q))}makeTranslation(_,J,Z){return _.isVector3?this.set(1,0,0,_.x,0,1,0,_.y,0,0,1,_.z,0,0,0,1):this.set(1,0,0,_,0,1,0,J,0,0,1,Z,0,0,0,1),this}makeRotationX(_){const J=Math.cos(_),Z=Math.sin(_);return this.set(1,0,0,0,0,J,-Z,0,0,Z,J,0,0,0,0,1),this}makeRotationY(_){const J=Math.cos(_),Z=Math.sin(_);return this.set(J,0,Z,0,0,1,0,0,-Z,0,J,0,0,0,0,1),this}makeRotationZ(_){const J=Math.cos(_),Z=Math.sin(_);return this.set(J,-Z,0,0,Z,J,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(_,J){const Z=Math.cos(J),Q=Math.sin(J),ee=1-Z,te=_.x,ne=_.y,ie=_.z,re=ee*te,oe=ee*ne;return this.set(re*te+Z,re*ne-Q*ie,re*ie+Q*ne,0,re*ne+Q*ie,oe*ne+Z,oe*ie-Q*te,0,re*ie-Q*ne,oe*ie+Q*te,ee*ie*ie+Z,0,0,0,0,1),this}makeScale(_,J,Z){return this.set(_,0,0,0,0,J,0,0,0,0,Z,0,0,0,0,1),this}makeShear(_,J,Z,Q,ee,te){return this.set(1,Z,ee,0,_,1,te,0,J,Q,1,0,0,0,0,1),this}compose(_,J,Z){const Q=this.elements,ee=J._x,te=J._y,ne=J._z,ie=J._w,re=ee+ee,oe=te+te,se=ne+ne,ae=ee*re,ce=ee*oe,ue=ee*se,de=te*oe,me=te*se,fe=ne*se,_e=ie*re,ye=ie*oe,be=ie*se,Se=Z.x,Ce=Z.y,Me=Z.z;return Q[0]=(1-(de+fe))*Se,Q[1]=(ce+be)*Se,Q[2]=(ue-ye)*Se,Q[3]=0,Q[4]=(ce-be)*Ce,Q[5]=(1-(ae+fe))*Ce,Q[6]=(me+_e)*Ce,Q[7]=0,Q[8]=(ue+ye)*Me,Q[9]=(me-_e)*Me,Q[10]=(1-(ae+de))*Me,Q[11]=0,Q[12]=_.x,Q[13]=_.y,Q[14]=_.z,Q[15]=1,this}decompose(_,J,Z){const Q=this.elements;let ee=_v1$5.set(Q[0],Q[1],Q[2]).length();const te=_v1$5.set(Q[4],Q[5],Q[6]).length(),ne=_v1$5.set(Q[8],Q[9],Q[10]).length();this.determinant()<0&&(ee=-ee),_.x=Q[12],_.y=Q[13],_.z=Q[14],_m1$2.copy(this);const re=1/ee,oe=1/te,se=1/ne;return _m1$2.elements[0]*=re,_m1$2.elements[1]*=re,_m1$2.elements[2]*=re,_m1$2.elements[4]*=oe,_m1$2.elements[5]*=oe,_m1$2.elements[6]*=oe,_m1$2.elements[8]*=se,_m1$2.elements[9]*=se,_m1$2.elements[10]*=se,J.setFromRotationMatrix(_m1$2),Z.x=ee,Z.y=te,Z.z=ne,this}makePerspective(_,J,Z,Q,ee,te,ne=WebGLCoordinateSystem,ie=!1){const re=this.elements,oe=2*ee/(J-_),se=2*ee/(Z-Q),ae=(J+_)/(J-_),ce=(Z+Q)/(Z-Q);let ue,de;if(ie)ue=ee/(te-ee),de=te*ee/(te-ee);else if(ne===WebGLCoordinateSystem)ue=-(te+ee)/(te-ee),de=-2*te*ee/(te-ee);else if(ne===WebGPUCoordinateSystem)ue=-te/(te-ee),de=-te*ee/(te-ee);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+ne);return re[0]=oe,re[4]=0,re[8]=ae,re[12]=0,re[1]=0,re[5]=se,re[9]=ce,re[13]=0,re[2]=0,re[6]=0,re[10]=ue,re[14]=de,re[3]=0,re[7]=0,re[11]=-1,re[15]=0,this}makeOrthographic(_,J,Z,Q,ee,te,ne=WebGLCoordinateSystem,ie=!1){const re=this.elements,oe=2/(J-_),se=2/(Z-Q),ae=-(J+_)/(J-_),ce=-(Z+Q)/(Z-Q);let ue,de;if(ie)ue=1/(te-ee),de=te/(te-ee);else if(ne===WebGLCoordinateSystem)ue=-2/(te-ee),de=-(te+ee)/(te-ee);else if(ne===WebGPUCoordinateSystem)ue=-1/(te-ee),de=-ee/(te-ee);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+ne);return re[0]=oe,re[4]=0,re[8]=0,re[12]=ae,re[1]=0,re[5]=se,re[9]=0,re[13]=ce,re[2]=0,re[6]=0,re[10]=ue,re[14]=de,re[3]=0,re[7]=0,re[11]=0,re[15]=1,this}equals(_){const J=this.elements,Z=_.elements;for(let Q=0;Q<16;Q++)if(J[Q]!==Z[Q])return!1;return!0}fromArray(_,J=0){for(let Z=0;Z<16;Z++)this.elements[Z]=_[Z+J];return this}toArray(_=[],J=0){const Z=this.elements;return _[J]=Z[0],_[J+1]=Z[1],_[J+2]=Z[2],_[J+3]=Z[3],_[J+4]=Z[4],_[J+5]=Z[5],_[J+6]=Z[6],_[J+7]=Z[7],_[J+8]=Z[8],_[J+9]=Z[9],_[J+10]=Z[10],_[J+11]=Z[11],_[J+12]=Z[12],_[J+13]=Z[13],_[J+14]=Z[14],_[J+15]=Z[15],_}}const _v1$5=new Vector3,_m1$2=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix$2=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(_=0,J=0,Z=0,Q=Euler.DEFAULT_ORDER){this.isEuler=!0,this._x=_,this._y=J,this._z=Z,this._order=Q}get x(){return this._x}set x(_){this._x=_,this._onChangeCallback()}get y(){return this._y}set y(_){this._y=_,this._onChangeCallback()}get z(){return this._z}set z(_){this._z=_,this._onChangeCallback()}get order(){return this._order}set order(_){this._order=_,this._onChangeCallback()}set(_,J,Z,Q=this._order){return this._x=_,this._y=J,this._z=Z,this._order=Q,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(_){return this._x=_._x,this._y=_._y,this._z=_._z,this._order=_._order,this._onChangeCallback(),this}setFromRotationMatrix(_,J=this._order,Z=!0){const Q=_.elements,ee=Q[0],te=Q[4],ne=Q[8],ie=Q[1],re=Q[5],oe=Q[9],se=Q[2],ae=Q[6],ce=Q[10];switch(J){case"XYZ":this._y=Math.asin(clamp(ne,-1,1)),Math.abs(ne)<.9999999?(this._x=Math.atan2(-oe,ce),this._z=Math.atan2(-te,ee)):(this._x=Math.atan2(ae,re),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp(oe,-1,1)),Math.abs(oe)<.9999999?(this._y=Math.atan2(ne,ce),this._z=Math.atan2(ie,re)):(this._y=Math.atan2(-se,ee),this._z=0);break;case"ZXY":this._x=Math.asin(clamp(ae,-1,1)),Math.abs(ae)<.9999999?(this._y=Math.atan2(-se,ce),this._z=Math.atan2(-te,re)):(this._y=0,this._z=Math.atan2(ie,ee));break;case"ZYX":this._y=Math.asin(-clamp(se,-1,1)),Math.abs(se)<.9999999?(this._x=Math.atan2(ae,ce),this._z=Math.atan2(ie,ee)):(this._x=0,this._z=Math.atan2(-te,re));break;case"YZX":this._z=Math.asin(clamp(ie,-1,1)),Math.abs(ie)<.9999999?(this._x=Math.atan2(-oe,re),this._y=Math.atan2(-se,ee)):(this._x=0,this._y=Math.atan2(ne,ce));break;case"XZY":this._z=Math.asin(-clamp(te,-1,1)),Math.abs(te)<.9999999?(this._x=Math.atan2(ae,re),this._y=Math.atan2(ne,ee)):(this._x=Math.atan2(-oe,ce),this._y=0);break;default:warn("Euler: .setFromRotationMatrix() encountered an unknown order: "+J)}return this._order=J,Z===!0&&this._onChangeCallback(),this}setFromQuaternion(_,J,Z){return _matrix$2.makeRotationFromQuaternion(_),this.setFromRotationMatrix(_matrix$2,J,Z)}setFromVector3(_,J=this._order){return this.set(_.x,_.y,_.z,J)}reorder(_){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,_)}equals(_){return _._x===this._x&&_._y===this._y&&_._z===this._z&&_._order===this._order}fromArray(_){return this._x=_[0],this._y=_[1],this._z=_[2],_[3]!==void 0&&(this._order=_[3]),this._onChangeCallback(),this}toArray(_=[],J=0){return _[J]=this._x,_[J+1]=this._y,_[J+2]=this._z,_[J+3]=this._order,_}_onChange(_){return this._onChangeCallback=_,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";class Layers{constructor(){this.mask=1}set(_){this.mask=(1<<_|0)>>>0}enable(_){this.mask|=1<<_|0}enableAll(){this.mask=-1}toggle(_){this.mask^=1<<_|0}disable(_){this.mask&=~(1<<_|0)}disableAll(){this.mask=0}test(_){return(this.mask&_.mask)!==0}isEnabled(_){return(this.mask&(1<<_|0))!==0}}let _object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$1$1=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"},_childaddedEvent={type:"childadded",child:null},_childremovedEvent={type:"childremoved",child:null};class Object3D extends EventDispatcher$1{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const _=new Vector3,J=new Euler,Z=new Quaternion,Q=new Vector3(1,1,1);function ee(){Z.setFromEuler(J,!1)}function te(){J.setFromQuaternion(Z,void 0,!1)}J._onChange(ee),Z._onChange(te),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:_},rotation:{configurable:!0,enumerable:!0,value:J},quaternion:{configurable:!0,enumerable:!0,value:Z},scale:{configurable:!0,enumerable:!0,value:Q},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(_){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(_),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(_){return this.quaternion.premultiply(_),this}setRotationFromAxisAngle(_,J){this.quaternion.setFromAxisAngle(_,J)}setRotationFromEuler(_){this.quaternion.setFromEuler(_,!0)}setRotationFromMatrix(_){this.quaternion.setFromRotationMatrix(_)}setRotationFromQuaternion(_){this.quaternion.copy(_)}rotateOnAxis(_,J){return _q1.setFromAxisAngle(_,J),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(_,J){return _q1.setFromAxisAngle(_,J),this.quaternion.premultiply(_q1),this}rotateX(_){return this.rotateOnAxis(_xAxis,_)}rotateY(_){return this.rotateOnAxis(_yAxis,_)}rotateZ(_){return this.rotateOnAxis(_zAxis,_)}translateOnAxis(_,J){return _v1$4.copy(_).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(J)),this}translateX(_){return this.translateOnAxis(_xAxis,_)}translateY(_){return this.translateOnAxis(_yAxis,_)}translateZ(_){return this.translateOnAxis(_zAxis,_)}localToWorld(_){return this.updateWorldMatrix(!0,!1),_.applyMatrix4(this.matrixWorld)}worldToLocal(_){return this.updateWorldMatrix(!0,!1),_.applyMatrix4(_m1$1$1.copy(this.matrixWorld).invert())}lookAt(_,J,Z){_.isVector3?_target.copy(_):_target.set(_,J,Z);const Q=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1$1.lookAt(_position$3,_target,this.up):_m1$1$1.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$1$1),Q&&(_m1$1$1.extractRotation(Q.matrixWorld),_q1.setFromRotationMatrix(_m1$1$1),this.quaternion.premultiply(_q1.invert()))}add(_){if(arguments.length>1){for(let J=0;J<arguments.length;J++)this.add(arguments[J]);return this}return _===this?(error("Object3D.add: object can't be added as a child of itself.",_),this):(_&&_.isObject3D?(_.removeFromParent(),_.parent=this,this.children.push(_),_.dispatchEvent(_addedEvent),_childaddedEvent.child=_,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null):error("Object3D.add: object not an instance of THREE.Object3D.",_),this)}remove(_){if(arguments.length>1){for(let Z=0;Z<arguments.length;Z++)this.remove(arguments[Z]);return this}const J=this.children.indexOf(_);return J!==-1&&(_.parent=null,this.children.splice(J,1),_.dispatchEvent(_removedEvent),_childremovedEvent.child=_,this.dispatchEvent(_childremovedEvent),_childremovedEvent.child=null),this}removeFromParent(){const _=this.parent;return _!==null&&_.remove(this),this}clear(){return this.remove(...this.children)}attach(_){return this.updateWorldMatrix(!0,!1),_m1$1$1.copy(this.matrixWorld).invert(),_.parent!==null&&(_.parent.updateWorldMatrix(!0,!1),_m1$1$1.multiply(_.parent.matrixWorld)),_.applyMatrix4(_m1$1$1),_.removeFromParent(),_.parent=this,this.children.push(_),_.updateWorldMatrix(!1,!0),_.dispatchEvent(_addedEvent),_childaddedEvent.child=_,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null,this}getObjectById(_){return this.getObjectByProperty("id",_)}getObjectByName(_){return this.getObjectByProperty("name",_)}getObjectByProperty(_,J){if(this[_]===J)return this;for(let Z=0,Q=this.children.length;Z<Q;Z++){const te=this.children[Z].getObjectByProperty(_,J);if(te!==void 0)return te}}getObjectsByProperty(_,J,Z=[]){this[_]===J&&Z.push(this);const Q=this.children;for(let ee=0,te=Q.length;ee<te;ee++)Q[ee].getObjectsByProperty(_,J,Z);return Z}getWorldPosition(_){return this.updateWorldMatrix(!0,!1),_.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(_){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_,_scale$2),_}getWorldScale(_){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,_),_}getWorldDirection(_){this.updateWorldMatrix(!0,!1);const J=this.matrixWorld.elements;return _.set(J[8],J[9],J[10]).normalize()}raycast(){}traverse(_){_(this);const J=this.children;for(let Z=0,Q=J.length;Z<Q;Z++)J[Z].traverse(_)}traverseVisible(_){if(this.visible===!1)return;_(this);const J=this.children;for(let Z=0,Q=J.length;Z<Q;Z++)J[Z].traverseVisible(_)}traverseAncestors(_){const J=this.parent;J!==null&&(_(J),J.traverseAncestors(_))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(_){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||_)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,_=!0);const J=this.children;for(let Z=0,Q=J.length;Z<Q;Z++)J[Z].updateMatrixWorld(_)}updateWorldMatrix(_,J){const Z=this.parent;if(_===!0&&Z!==null&&Z.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),J===!0){const Q=this.children;for(let ee=0,te=Q.length;ee<te;ee++)Q[ee].updateWorldMatrix(!1,!0)}}toJSON(_){const J=_===void 0||typeof _=="string",Z={};J&&(_={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},Z.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const Q={};Q.uuid=this.uuid,Q.type=this.type,this.name!==""&&(Q.name=this.name),this.castShadow===!0&&(Q.castShadow=!0),this.receiveShadow===!0&&(Q.receiveShadow=!0),this.visible===!1&&(Q.visible=!1),this.frustumCulled===!1&&(Q.frustumCulled=!1),this.renderOrder!==0&&(Q.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(Q.userData=this.userData),Q.layers=this.layers.mask,Q.matrix=this.matrix.toArray(),Q.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(Q.matrixAutoUpdate=!1),this.isInstancedMesh&&(Q.type="InstancedMesh",Q.count=this.count,Q.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(Q.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(Q.type="BatchedMesh",Q.perObjectFrustumCulled=this.perObjectFrustumCulled,Q.sortObjects=this.sortObjects,Q.drawRanges=this._drawRanges,Q.reservedRanges=this._reservedRanges,Q.geometryInfo=this._geometryInfo.map(ne=>({...ne,boundingBox:ne.boundingBox?ne.boundingBox.toJSON():void 0,boundingSphere:ne.boundingSphere?ne.boundingSphere.toJSON():void 0})),Q.instanceInfo=this._instanceInfo.map(ne=>({...ne})),Q.availableInstanceIds=this._availableInstanceIds.slice(),Q.availableGeometryIds=this._availableGeometryIds.slice(),Q.nextIndexStart=this._nextIndexStart,Q.nextVertexStart=this._nextVertexStart,Q.geometryCount=this._geometryCount,Q.maxInstanceCount=this._maxInstanceCount,Q.maxVertexCount=this._maxVertexCount,Q.maxIndexCount=this._maxIndexCount,Q.geometryInitialized=this._geometryInitialized,Q.matricesTexture=this._matricesTexture.toJSON(_),Q.indirectTexture=this._indirectTexture.toJSON(_),this._colorsTexture!==null&&(Q.colorsTexture=this._colorsTexture.toJSON(_)),this.boundingSphere!==null&&(Q.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(Q.boundingBox=this.boundingBox.toJSON()));function ee(ne,ie){return ne[ie.uuid]===void 0&&(ne[ie.uuid]=ie.toJSON(_)),ie.uuid}if(this.isScene)this.background&&(this.background.isColor?Q.background=this.background.toJSON():this.background.isTexture&&(Q.background=this.background.toJSON(_).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(Q.environment=this.environment.toJSON(_).uuid);else if(this.isMesh||this.isLine||this.isPoints){Q.geometry=ee(_.geometries,this.geometry);const ne=this.geometry.parameters;if(ne!==void 0&&ne.shapes!==void 0){const ie=ne.shapes;if(Array.isArray(ie))for(let re=0,oe=ie.length;re<oe;re++){const se=ie[re];ee(_.shapes,se)}else ee(_.shapes,ie)}}if(this.isSkinnedMesh&&(Q.bindMode=this.bindMode,Q.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(ee(_.skeletons,this.skeleton),Q.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const ne=[];for(let ie=0,re=this.material.length;ie<re;ie++)ne.push(ee(_.materials,this.material[ie]));Q.material=ne}else Q.material=ee(_.materials,this.material);if(this.children.length>0){Q.children=[];for(let ne=0;ne<this.children.length;ne++)Q.children.push(this.children[ne].toJSON(_).object)}if(this.animations.length>0){Q.animations=[];for(let ne=0;ne<this.animations.length;ne++){const ie=this.animations[ne];Q.animations.push(ee(_.animations,ie))}}if(J){const ne=te(_.geometries),ie=te(_.materials),re=te(_.textures),oe=te(_.images),se=te(_.shapes),ae=te(_.skeletons),ce=te(_.animations),ue=te(_.nodes);ne.length>0&&(Z.geometries=ne),ie.length>0&&(Z.materials=ie),re.length>0&&(Z.textures=re),oe.length>0&&(Z.images=oe),se.length>0&&(Z.shapes=se),ae.length>0&&(Z.skeletons=ae),ce.length>0&&(Z.animations=ce),ue.length>0&&(Z.nodes=ue)}return Z.object=Q,Z;function te(ne){const ie=[];for(const re in ne){const oe=ne[re];delete oe.metadata,ie.push(oe)}return ie}}clone(_){return new this.constructor().copy(this,_)}copy(_,J=!0){if(this.name=_.name,this.up.copy(_.up),this.position.copy(_.position),this.rotation.order=_.rotation.order,this.quaternion.copy(_.quaternion),this.scale.copy(_.scale),this.matrix.copy(_.matrix),this.matrixWorld.copy(_.matrixWorld),this.matrixAutoUpdate=_.matrixAutoUpdate,this.matrixWorldAutoUpdate=_.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=_.matrixWorldNeedsUpdate,this.layers.mask=_.layers.mask,this.visible=_.visible,this.castShadow=_.castShadow,this.receiveShadow=_.receiveShadow,this.frustumCulled=_.frustumCulled,this.renderOrder=_.renderOrder,this.animations=_.animations.slice(),this.userData=JSON.parse(JSON.stringify(_.userData)),J===!0)for(let Z=0;Z<_.children.length;Z++){const Q=_.children[Z];this.add(Q.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0);Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0;Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _v0$1=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$2=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3,_v40=new Vector4,_v41=new Vector4,_v42=new Vector4;class Triangle{constructor(_=new Vector3,J=new Vector3,Z=new Vector3){this.a=_,this.b=J,this.c=Z}static getNormal(_,J,Z,Q){Q.subVectors(Z,J),_v0$1.subVectors(_,J),Q.cross(_v0$1);const ee=Q.lengthSq();return ee>0?Q.multiplyScalar(1/Math.sqrt(ee)):Q.set(0,0,0)}static getBarycoord(_,J,Z,Q,ee){_v0$1.subVectors(Q,J),_v1$3.subVectors(Z,J),_v2$2.subVectors(_,J);const te=_v0$1.dot(_v0$1),ne=_v0$1.dot(_v1$3),ie=_v0$1.dot(_v2$2),re=_v1$3.dot(_v1$3),oe=_v1$3.dot(_v2$2),se=te*re-ne*ne;if(se===0)return ee.set(0,0,0),null;const ae=1/se,ce=(re*ie-ne*oe)*ae,ue=(te*oe-ne*ie)*ae;return ee.set(1-ce-ue,ue,ce)}static containsPoint(_,J,Z,Q){return this.getBarycoord(_,J,Z,Q,_v3$2)===null?!1:_v3$2.x>=0&&_v3$2.y>=0&&_v3$2.x+_v3$2.y<=1}static getInterpolation(_,J,Z,Q,ee,te,ne,ie){return this.getBarycoord(_,J,Z,Q,_v3$2)===null?(ie.x=0,ie.y=0,"z"in ie&&(ie.z=0),"w"in ie&&(ie.w=0),null):(ie.setScalar(0),ie.addScaledVector(ee,_v3$2.x),ie.addScaledVector(te,_v3$2.y),ie.addScaledVector(ne,_v3$2.z),ie)}static getInterpolatedAttribute(_,J,Z,Q,ee,te){return _v40.setScalar(0),_v41.setScalar(0),_v42.setScalar(0),_v40.fromBufferAttribute(_,J),_v41.fromBufferAttribute(_,Z),_v42.fromBufferAttribute(_,Q),te.setScalar(0),te.addScaledVector(_v40,ee.x),te.addScaledVector(_v41,ee.y),te.addScaledVector(_v42,ee.z),te}static isFrontFacing(_,J,Z,Q){return _v0$1.subVectors(Z,J),_v1$3.subVectors(_,J),_v0$1.cross(_v1$3).dot(Q)<0}set(_,J,Z){return this.a.copy(_),this.b.copy(J),this.c.copy(Z),this}setFromPointsAndIndices(_,J,Z,Q){return this.a.copy(_[J]),this.b.copy(_[Z]),this.c.copy(_[Q]),this}setFromAttributeAndIndices(_,J,Z,Q){return this.a.fromBufferAttribute(_,J),this.b.fromBufferAttribute(_,Z),this.c.fromBufferAttribute(_,Q),this}clone(){return new this.constructor().copy(this)}copy(_){return this.a.copy(_.a),this.b.copy(_.b),this.c.copy(_.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5}getMidpoint(_){return _.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(_){return Triangle.getNormal(this.a,this.b,this.c,_)}getPlane(_){return _.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(_,J){return Triangle.getBarycoord(_,this.a,this.b,this.c,J)}getInterpolation(_,J,Z,Q,ee){return Triangle.getInterpolation(_,this.a,this.b,this.c,J,Z,Q,ee)}containsPoint(_){return Triangle.containsPoint(_,this.a,this.b,this.c)}isFrontFacing(_){return Triangle.isFrontFacing(this.a,this.b,this.c,_)}intersectsBox(_){return _.intersectsTriangle(this)}closestPointToPoint(_,J){const Z=this.a,Q=this.b,ee=this.c;let te,ne;_vab.subVectors(Q,Z),_vac.subVectors(ee,Z),_vap.subVectors(_,Z);const ie=_vab.dot(_vap),re=_vac.dot(_vap);if(ie<=0&&re<=0)return J.copy(Z);_vbp.subVectors(_,Q);const oe=_vab.dot(_vbp),se=_vac.dot(_vbp);if(oe>=0&&se<=oe)return J.copy(Q);const ae=ie*se-oe*re;if(ae<=0&&ie>=0&&oe<=0)return te=ie/(ie-oe),J.copy(Z).addScaledVector(_vab,te);_vcp.subVectors(_,ee);const ce=_vab.dot(_vcp),ue=_vac.dot(_vcp);if(ue>=0&&ce<=ue)return J.copy(ee);const de=ce*re-ie*ue;if(de<=0&&re>=0&&ue<=0)return ne=re/(re-ue),J.copy(Z).addScaledVector(_vac,ne);const me=oe*ue-ce*se;if(me<=0&&se-oe>=0&&ce-ue>=0)return _vbc.subVectors(ee,Q),ne=(se-oe)/(se-oe+(ce-ue)),J.copy(Q).addScaledVector(_vbc,ne);const fe=1/(me+de+ae);return te=de*fe,ne=ae*fe,J.copy(Z).addScaledVector(_vab,te).addScaledVector(_vac,ne)}equals(_){return _.a.equals(this.a)&&_.b.equals(this.b)&&_.c.equals(this.c)}}const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb$1(G,_,J){return J<0&&(J+=1),J>1&&(J-=1),J<1/6?G+(_-G)*6*J:J<1/2?_:J<2/3?G+(_-G)*6*(2/3-J):G}class Color{constructor(_,J,Z){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(_,J,Z)}set(_,J,Z){if(J===void 0&&Z===void 0){const Q=_;Q&&Q.isColor?this.copy(Q):typeof Q=="number"?this.setHex(Q):typeof Q=="string"&&this.setStyle(Q)}else this.setRGB(_,J,Z);return this}setScalar(_){return this.r=_,this.g=_,this.b=_,this}setHex(_,J=SRGBColorSpace){return _=Math.floor(_),this.r=(_>>16&255)/255,this.g=(_>>8&255)/255,this.b=(_&255)/255,ColorManagement.colorSpaceToWorking(this,J),this}setRGB(_,J,Z,Q=ColorManagement.workingColorSpace){return this.r=_,this.g=J,this.b=Z,ColorManagement.colorSpaceToWorking(this,Q),this}setHSL(_,J,Z,Q=ColorManagement.workingColorSpace){if(_=euclideanModulo(_,1),J=clamp(J,0,1),Z=clamp(Z,0,1),J===0)this.r=this.g=this.b=Z;else{const ee=Z<=.5?Z*(1+J):Z+J-Z*J,te=2*Z-ee;this.r=hue2rgb$1(te,ee,_+1/3),this.g=hue2rgb$1(te,ee,_),this.b=hue2rgb$1(te,ee,_-1/3)}return ColorManagement.colorSpaceToWorking(this,Q),this}setStyle(_,J=SRGBColorSpace){function Z(ee){ee!==void 0&&parseFloat(ee)<1&&warn("Color: Alpha component of "+_+" will be ignored.")}let Q;if(Q=/^(\w+)\(([^\)]*)\)/.exec(_)){let ee;const te=Q[1],ne=Q[2];switch(te){case"rgb":case"rgba":if(ee=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(ne))return Z(ee[4]),this.setRGB(Math.min(255,parseInt(ee[1],10))/255,Math.min(255,parseInt(ee[2],10))/255,Math.min(255,parseInt(ee[3],10))/255,J);if(ee=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(ne))return Z(ee[4]),this.setRGB(Math.min(100,parseInt(ee[1],10))/100,Math.min(100,parseInt(ee[2],10))/100,Math.min(100,parseInt(ee[3],10))/100,J);break;case"hsl":case"hsla":if(ee=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(ne))return Z(ee[4]),this.setHSL(parseFloat(ee[1])/360,parseFloat(ee[2])/100,parseFloat(ee[3])/100,J);break;default:warn("Color: Unknown color model "+_)}}else if(Q=/^\#([A-Fa-f\d]+)$/.exec(_)){const ee=Q[1],te=ee.length;if(te===3)return this.setRGB(parseInt(ee.charAt(0),16)/15,parseInt(ee.charAt(1),16)/15,parseInt(ee.charAt(2),16)/15,J);if(te===6)return this.setHex(parseInt(ee,16),J);warn("Color: Invalid hex color "+_)}else if(_&&_.length>0)return this.setColorName(_,J);return this}setColorName(_,J=SRGBColorSpace){const Z=_colorKeywords[_.toLowerCase()];return Z!==void 0?this.setHex(Z,J):warn("Color: Unknown color "+_),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(_){return this.r=_.r,this.g=_.g,this.b=_.b,this}copySRGBToLinear(_){return this.r=SRGBToLinear(_.r),this.g=SRGBToLinear(_.g),this.b=SRGBToLinear(_.b),this}copyLinearToSRGB(_){return this.r=LinearToSRGB(_.r),this.g=LinearToSRGB(_.g),this.b=LinearToSRGB(_.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(_=SRGBColorSpace){return ColorManagement.workingToColorSpace(_color.copy(this),_),Math.round(clamp(_color.r*255,0,255))*65536+Math.round(clamp(_color.g*255,0,255))*256+Math.round(clamp(_color.b*255,0,255))}getHexString(_=SRGBColorSpace){return("000000"+this.getHex(_).toString(16)).slice(-6)}getHSL(_,J=ColorManagement.workingColorSpace){ColorManagement.workingToColorSpace(_color.copy(this),J);const Z=_color.r,Q=_color.g,ee=_color.b,te=Math.max(Z,Q,ee),ne=Math.min(Z,Q,ee);let ie,re;const oe=(ne+te)/2;if(ne===te)ie=0,re=0;else{const se=te-ne;switch(re=oe<=.5?se/(te+ne):se/(2-te-ne),te){case Z:ie=(Q-ee)/se+(Q<ee?6:0);break;case Q:ie=(ee-Z)/se+2;break;case ee:ie=(Z-Q)/se+4;break}ie/=6}return _.h=ie,_.s=re,_.l=oe,_}getRGB(_,J=ColorManagement.workingColorSpace){return ColorManagement.workingToColorSpace(_color.copy(this),J),_.r=_color.r,_.g=_color.g,_.b=_color.b,_}getStyle(_=SRGBColorSpace){ColorManagement.workingToColorSpace(_color.copy(this),_);const J=_color.r,Z=_color.g,Q=_color.b;return _!==SRGBColorSpace?`color(${_} ${J.toFixed(3)} ${Z.toFixed(3)} ${Q.toFixed(3)})`:`rgb(${Math.round(J*255)},${Math.round(Z*255)},${Math.round(Q*255)})`}offsetHSL(_,J,Z){return this.getHSL(_hslA),this.setHSL(_hslA.h+_,_hslA.s+J,_hslA.l+Z)}add(_){return this.r+=_.r,this.g+=_.g,this.b+=_.b,this}addColors(_,J){return this.r=_.r+J.r,this.g=_.g+J.g,this.b=_.b+J.b,this}addScalar(_){return this.r+=_,this.g+=_,this.b+=_,this}sub(_){return this.r=Math.max(0,this.r-_.r),this.g=Math.max(0,this.g-_.g),this.b=Math.max(0,this.b-_.b),this}multiply(_){return this.r*=_.r,this.g*=_.g,this.b*=_.b,this}multiplyScalar(_){return this.r*=_,this.g*=_,this.b*=_,this}lerp(_,J){return this.r+=(_.r-this.r)*J,this.g+=(_.g-this.g)*J,this.b+=(_.b-this.b)*J,this}lerpColors(_,J,Z){return this.r=_.r+(J.r-_.r)*Z,this.g=_.g+(J.g-_.g)*Z,this.b=_.b+(J.b-_.b)*Z,this}lerpHSL(_,J){this.getHSL(_hslA),_.getHSL(_hslB);const Z=lerp(_hslA.h,_hslB.h,J),Q=lerp(_hslA.s,_hslB.s,J),ee=lerp(_hslA.l,_hslB.l,J);return this.setHSL(Z,Q,ee),this}setFromVector3(_){return this.r=_.x,this.g=_.y,this.b=_.z,this}applyMatrix3(_){const J=this.r,Z=this.g,Q=this.b,ee=_.elements;return this.r=ee[0]*J+ee[3]*Z+ee[6]*Q,this.g=ee[1]*J+ee[4]*Z+ee[7]*Q,this.b=ee[2]*J+ee[5]*Z+ee[8]*Q,this}equals(_){return _.r===this.r&&_.g===this.g&&_.b===this.b}fromArray(_,J=0){return this.r=_[J],this.g=_[J+1],this.b=_[J+2],this}toArray(_=[],J=0){return _[J]=this.r,_[J+1]=this.g,_[J+2]=this.b,_}fromBufferAttribute(_,J){return this.r=_.getX(J),this.g=_.getY(J),this.b=_.getZ(J),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _color=new Color;Color.NAMES=_colorKeywords;let _materialId=0;class Material extends EventDispatcher$1{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_materialId++}),this.uuid=generateUUID(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Color(0,0,0),this.blendAlpha=0,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(_){this._alphaTest>0!=_>0&&this.version++,this._alphaTest=_}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(_){if(_!==void 0)for(const J in _){const Z=_[J];if(Z===void 0){warn(`Material: parameter '${J}' has value of undefined.`);continue}const Q=this[J];if(Q===void 0){warn(`Material: '${J}' is not a property of THREE.${this.type}.`);continue}Q&&Q.isColor?Q.set(Z):Q&&Q.isVector3&&Z&&Z.isVector3?Q.copy(Z):this[J]=Z}}toJSON(_){const J=_===void 0||typeof _=="string";J&&(_={textures:{},images:{}});const Z={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};Z.uuid=this.uuid,Z.type=this.type,this.name!==""&&(Z.name=this.name),this.color&&this.color.isColor&&(Z.color=this.color.getHex()),this.roughness!==void 0&&(Z.roughness=this.roughness),this.metalness!==void 0&&(Z.metalness=this.metalness),this.sheen!==void 0&&(Z.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(Z.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(Z.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(Z.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(Z.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(Z.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(Z.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(Z.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(Z.shininess=this.shininess),this.clearcoat!==void 0&&(Z.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(Z.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(Z.clearcoatMap=this.clearcoatMap.toJSON(_).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(Z.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(_).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(Z.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(_).uuid,Z.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(Z.sheenColorMap=this.sheenColorMap.toJSON(_).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(Z.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(_).uuid),this.dispersion!==void 0&&(Z.dispersion=this.dispersion),this.iridescence!==void 0&&(Z.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(Z.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(Z.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(Z.iridescenceMap=this.iridescenceMap.toJSON(_).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(Z.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(_).uuid),this.anisotropy!==void 0&&(Z.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(Z.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(Z.anisotropyMap=this.anisotropyMap.toJSON(_).uuid),this.map&&this.map.isTexture&&(Z.map=this.map.toJSON(_).uuid),this.matcap&&this.matcap.isTexture&&(Z.matcap=this.matcap.toJSON(_).uuid),this.alphaMap&&this.alphaMap.isTexture&&(Z.alphaMap=this.alphaMap.toJSON(_).uuid),this.lightMap&&this.lightMap.isTexture&&(Z.lightMap=this.lightMap.toJSON(_).uuid,Z.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(Z.aoMap=this.aoMap.toJSON(_).uuid,Z.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(Z.bumpMap=this.bumpMap.toJSON(_).uuid,Z.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(Z.normalMap=this.normalMap.toJSON(_).uuid,Z.normalMapType=this.normalMapType,Z.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(Z.displacementMap=this.displacementMap.toJSON(_).uuid,Z.displacementScale=this.displacementScale,Z.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(Z.roughnessMap=this.roughnessMap.toJSON(_).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(Z.metalnessMap=this.metalnessMap.toJSON(_).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(Z.emissiveMap=this.emissiveMap.toJSON(_).uuid),this.specularMap&&this.specularMap.isTexture&&(Z.specularMap=this.specularMap.toJSON(_).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(Z.specularIntensityMap=this.specularIntensityMap.toJSON(_).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(Z.specularColorMap=this.specularColorMap.toJSON(_).uuid),this.envMap&&this.envMap.isTexture&&(Z.envMap=this.envMap.toJSON(_).uuid,this.combine!==void 0&&(Z.combine=this.combine)),this.envMapRotation!==void 0&&(Z.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(Z.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(Z.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(Z.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(Z.gradientMap=this.gradientMap.toJSON(_).uuid),this.transmission!==void 0&&(Z.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(Z.transmissionMap=this.transmissionMap.toJSON(_).uuid),this.thickness!==void 0&&(Z.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(Z.thicknessMap=this.thicknessMap.toJSON(_).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(Z.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(Z.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(Z.size=this.size),this.shadowSide!==null&&(Z.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(Z.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(Z.blending=this.blending),this.side!==FrontSide&&(Z.side=this.side),this.vertexColors===!0&&(Z.vertexColors=!0),this.opacity<1&&(Z.opacity=this.opacity),this.transparent===!0&&(Z.transparent=!0),this.blendSrc!==SrcAlphaFactor&&(Z.blendSrc=this.blendSrc),this.blendDst!==OneMinusSrcAlphaFactor&&(Z.blendDst=this.blendDst),this.blendEquation!==AddEquation&&(Z.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(Z.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(Z.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(Z.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(Z.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(Z.blendAlpha=this.blendAlpha),this.depthFunc!==LessEqualDepth&&(Z.depthFunc=this.depthFunc),this.depthTest===!1&&(Z.depthTest=this.depthTest),this.depthWrite===!1&&(Z.depthWrite=this.depthWrite),this.colorWrite===!1&&(Z.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(Z.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==AlwaysStencilFunc&&(Z.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(Z.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(Z.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==KeepStencilOp&&(Z.stencilFail=this.stencilFail),this.stencilZFail!==KeepStencilOp&&(Z.stencilZFail=this.stencilZFail),this.stencilZPass!==KeepStencilOp&&(Z.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(Z.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(Z.rotation=this.rotation),this.polygonOffset===!0&&(Z.polygonOffset=!0),this.polygonOffsetFactor!==0&&(Z.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(Z.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(Z.linewidth=this.linewidth),this.dashSize!==void 0&&(Z.dashSize=this.dashSize),this.gapSize!==void 0&&(Z.gapSize=this.gapSize),this.scale!==void 0&&(Z.scale=this.scale),this.dithering===!0&&(Z.dithering=!0),this.alphaTest>0&&(Z.alphaTest=this.alphaTest),this.alphaHash===!0&&(Z.alphaHash=!0),this.alphaToCoverage===!0&&(Z.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(Z.premultipliedAlpha=!0),this.forceSinglePass===!0&&(Z.forceSinglePass=!0),this.wireframe===!0&&(Z.wireframe=!0),this.wireframeLinewidth>1&&(Z.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(Z.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(Z.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(Z.flatShading=!0),this.visible===!1&&(Z.visible=!1),this.toneMapped===!1&&(Z.toneMapped=!1),this.fog===!1&&(Z.fog=!1),Object.keys(this.userData).length>0&&(Z.userData=this.userData);function Q(ee){const te=[];for(const ne in ee){const ie=ee[ne];delete ie.metadata,te.push(ie)}return te}if(J){const ee=Q(_.textures),te=Q(_.images);ee.length>0&&(Z.textures=ee),te.length>0&&(Z.images=te)}return Z}clone(){return new this.constructor().copy(this)}copy(_){this.name=_.name,this.blending=_.blending,this.side=_.side,this.vertexColors=_.vertexColors,this.opacity=_.opacity,this.transparent=_.transparent,this.blendSrc=_.blendSrc,this.blendDst=_.blendDst,this.blendEquation=_.blendEquation,this.blendSrcAlpha=_.blendSrcAlpha,this.blendDstAlpha=_.blendDstAlpha,this.blendEquationAlpha=_.blendEquationAlpha,this.blendColor.copy(_.blendColor),this.blendAlpha=_.blendAlpha,this.depthFunc=_.depthFunc,this.depthTest=_.depthTest,this.depthWrite=_.depthWrite,this.stencilWriteMask=_.stencilWriteMask,this.stencilFunc=_.stencilFunc,this.stencilRef=_.stencilRef,this.stencilFuncMask=_.stencilFuncMask,this.stencilFail=_.stencilFail,this.stencilZFail=_.stencilZFail,this.stencilZPass=_.stencilZPass,this.stencilWrite=_.stencilWrite;const J=_.clippingPlanes;let Z=null;if(J!==null){const Q=J.length;Z=new Array(Q);for(let ee=0;ee!==Q;++ee)Z[ee]=J[ee].clone()}return this.clippingPlanes=Z,this.clipIntersection=_.clipIntersection,this.clipShadows=_.clipShadows,this.shadowSide=_.shadowSide,this.colorWrite=_.colorWrite,this.precision=_.precision,this.polygonOffset=_.polygonOffset,this.polygonOffsetFactor=_.polygonOffsetFactor,this.polygonOffsetUnits=_.polygonOffsetUnits,this.dithering=_.dithering,this.alphaTest=_.alphaTest,this.alphaHash=_.alphaHash,this.alphaToCoverage=_.alphaToCoverage,this.premultipliedAlpha=_.premultipliedAlpha,this.forceSinglePass=_.forceSinglePass,this.visible=_.visible,this.toneMapped=_.toneMapped,this.userData=JSON.parse(JSON.stringify(_.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(_){_===!0&&this.version++}}class MeshBasicMaterial extends Material{constructor(_){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.specularMap=_.specularMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.envMapRotation.copy(_.envMapRotation),this.combine=_.combine,this.reflectivity=_.reflectivity,this.refractionRatio=_.refractionRatio,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.fog=_.fog,this}}const _tables=_generateTables();function _generateTables(){const G=new ArrayBuffer(4),_=new Float32Array(G),J=new Uint32Array(G),Z=new Uint32Array(512),Q=new Uint32Array(512);for(let ie=0;ie<256;++ie){const re=ie-127;re<-27?(Z[ie]=0,Z[ie|256]=32768,Q[ie]=24,Q[ie|256]=24):re<-14?(Z[ie]=1024>>-re-14,Z[ie|256]=1024>>-re-14|32768,Q[ie]=-re-1,Q[ie|256]=-re-1):re<=15?(Z[ie]=re+15<<10,Z[ie|256]=re+15<<10|32768,Q[ie]=13,Q[ie|256]=13):re<128?(Z[ie]=31744,Z[ie|256]=64512,Q[ie]=24,Q[ie|256]=24):(Z[ie]=31744,Z[ie|256]=64512,Q[ie]=13,Q[ie|256]=13)}const ee=new Uint32Array(2048),te=new Uint32Array(64),ne=new Uint32Array(64);for(let ie=1;ie<1024;++ie){let re=ie<<13,oe=0;for(;(re&8388608)===0;)re<<=1,oe-=8388608;re&=-8388609,oe+=947912704,ee[ie]=re|oe}for(let ie=1024;ie<2048;++ie)ee[ie]=939524096+(ie-1024<<13);for(let ie=1;ie<31;++ie)te[ie]=ie<<23;te[31]=1199570944,te[32]=2147483648;for(let ie=33;ie<63;++ie)te[ie]=2147483648+(ie-32<<23);te[63]=3347054592;for(let ie=1;ie<64;++ie)ie!==32&&(ne[ie]=1024);return{floatView:_,uint32View:J,baseTable:Z,shiftTable:Q,mantissaTable:ee,exponentTable:te,offsetTable:ne}}function toHalfFloat(G){Math.abs(G)>65504&&warn("DataUtils.toHalfFloat(): Value out of range."),G=clamp(G,-65504,65504),_tables.floatView[0]=G;const _=_tables.uint32View[0],J=_>>23&511;return _tables.baseTable[J]+((_&8388607)>>_tables.shiftTable[J])}function fromHalfFloat(G){const _=G>>10;return _tables.uint32View[0]=_tables.mantissaTable[_tables.offsetTable[_]+(G&1023)]+_tables.exponentTable[_],_tables.floatView[0]}class DataUtils{static toHalfFloat(_){return toHalfFloat(_)}static fromHalfFloat(_){return fromHalfFloat(_)}}const _vector$9=new Vector3,_vector2$1=new Vector2;let _id$2=0;class BufferAttribute{constructor(_,J,Z=!1){if(Array.isArray(_))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:_id$2++}),this.name="",this.array=_,this.itemSize=J,this.count=_!==void 0?_.length/J:0,this.normalized=Z,this.usage=StaticDrawUsage,this.updateRanges=[],this.gpuType=FloatType,this.version=0}onUploadCallback(){}set needsUpdate(_){_===!0&&this.version++}setUsage(_){return this.usage=_,this}addUpdateRange(_,J){this.updateRanges.push({start:_,count:J})}clearUpdateRanges(){this.updateRanges.length=0}copy(_){return this.name=_.name,this.array=new _.array.constructor(_.array),this.itemSize=_.itemSize,this.count=_.count,this.normalized=_.normalized,this.usage=_.usage,this.gpuType=_.gpuType,this}copyAt(_,J,Z){_*=this.itemSize,Z*=J.itemSize;for(let Q=0,ee=this.itemSize;Q<ee;Q++)this.array[_+Q]=J.array[Z+Q];return this}copyArray(_){return this.array.set(_),this}applyMatrix3(_){if(this.itemSize===2)for(let J=0,Z=this.count;J<Z;J++)_vector2$1.fromBufferAttribute(this,J),_vector2$1.applyMatrix3(_),this.setXY(J,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let J=0,Z=this.count;J<Z;J++)_vector$9.fromBufferAttribute(this,J),_vector$9.applyMatrix3(_),this.setXYZ(J,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyMatrix4(_){for(let J=0,Z=this.count;J<Z;J++)_vector$9.fromBufferAttribute(this,J),_vector$9.applyMatrix4(_),this.setXYZ(J,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyNormalMatrix(_){for(let J=0,Z=this.count;J<Z;J++)_vector$9.fromBufferAttribute(this,J),_vector$9.applyNormalMatrix(_),this.setXYZ(J,_vector$9.x,_vector$9.y,_vector$9.z);return this}transformDirection(_){for(let J=0,Z=this.count;J<Z;J++)_vector$9.fromBufferAttribute(this,J),_vector$9.transformDirection(_),this.setXYZ(J,_vector$9.x,_vector$9.y,_vector$9.z);return this}set(_,J=0){return this.array.set(_,J),this}getComponent(_,J){let Z=this.array[_*this.itemSize+J];return this.normalized&&(Z=denormalize(Z,this.array)),Z}setComponent(_,J,Z){return this.normalized&&(Z=normalize(Z,this.array)),this.array[_*this.itemSize+J]=Z,this}getX(_){let J=this.array[_*this.itemSize];return this.normalized&&(J=denormalize(J,this.array)),J}setX(_,J){return this.normalized&&(J=normalize(J,this.array)),this.array[_*this.itemSize]=J,this}getY(_){let J=this.array[_*this.itemSize+1];return this.normalized&&(J=denormalize(J,this.array)),J}setY(_,J){return this.normalized&&(J=normalize(J,this.array)),this.array[_*this.itemSize+1]=J,this}getZ(_){let J=this.array[_*this.itemSize+2];return this.normalized&&(J=denormalize(J,this.array)),J}setZ(_,J){return this.normalized&&(J=normalize(J,this.array)),this.array[_*this.itemSize+2]=J,this}getW(_){let J=this.array[_*this.itemSize+3];return this.normalized&&(J=denormalize(J,this.array)),J}setW(_,J){return this.normalized&&(J=normalize(J,this.array)),this.array[_*this.itemSize+3]=J,this}setXY(_,J,Z){return _*=this.itemSize,this.normalized&&(J=normalize(J,this.array),Z=normalize(Z,this.array)),this.array[_+0]=J,this.array[_+1]=Z,this}setXYZ(_,J,Z,Q){return _*=this.itemSize,this.normalized&&(J=normalize(J,this.array),Z=normalize(Z,this.array),Q=normalize(Q,this.array)),this.array[_+0]=J,this.array[_+1]=Z,this.array[_+2]=Q,this}setXYZW(_,J,Z,Q,ee){return _*=this.itemSize,this.normalized&&(J=normalize(J,this.array),Z=normalize(Z,this.array),Q=normalize(Q,this.array),ee=normalize(ee,this.array)),this.array[_+0]=J,this.array[_+1]=Z,this.array[_+2]=Q,this.array[_+3]=ee,this}onUpload(_){return this.onUploadCallback=_,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const _={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(_.name=this.name),this.usage!==StaticDrawUsage&&(_.usage=this.usage),_}}class Int8BufferAttribute extends BufferAttribute{constructor(_,J,Z){super(new Int8Array(_),J,Z)}}class Uint8BufferAttribute extends BufferAttribute{constructor(_,J,Z){super(new Uint8Array(_),J,Z)}}class Uint8ClampedBufferAttribute extends BufferAttribute{constructor(_,J,Z){super(new Uint8ClampedArray(_),J,Z)}}class Int16BufferAttribute extends BufferAttribute{constructor(_,J,Z){super(new Int16Array(_),J,Z)}}class Uint16BufferAttribute extends BufferAttribute{constructor(_,J,Z){super(new Uint16Array(_),J,Z)}}class Int32BufferAttribute extends BufferAttribute{constructor(_,J,Z){super(new Int32Array(_),J,Z)}}class Uint32BufferAttribute extends BufferAttribute{constructor(_,J,Z){super(new Uint32Array(_),J,Z)}}class Float16BufferAttribute extends BufferAttribute{constructor(_,J,Z){super(new Uint16Array(_),J,Z),this.isFloat16BufferAttribute=!0}getX(_){let J=fromHalfFloat(this.array[_*this.itemSize]);return this.normalized&&(J=denormalize(J,this.array)),J}setX(_,J){return this.normalized&&(J=normalize(J,this.array)),this.array[_*this.itemSize]=toHalfFloat(J),this}getY(_){let J=fromHalfFloat(this.array[_*this.itemSize+1]);return this.normalized&&(J=denormalize(J,this.array)),J}setY(_,J){return this.normalized&&(J=normalize(J,this.array)),this.array[_*this.itemSize+1]=toHalfFloat(J),this}getZ(_){let J=fromHalfFloat(this.array[_*this.itemSize+2]);return this.normalized&&(J=denormalize(J,this.array)),J}setZ(_,J){return this.normalized&&(J=normalize(J,this.array)),this.array[_*this.itemSize+2]=toHalfFloat(J),this}getW(_){let J=fromHalfFloat(this.array[_*this.itemSize+3]);return this.normalized&&(J=denormalize(J,this.array)),J}setW(_,J){return this.normalized&&(J=normalize(J,this.array)),this.array[_*this.itemSize+3]=toHalfFloat(J),this}setXY(_,J,Z){return _*=this.itemSize,this.normalized&&(J=normalize(J,this.array),Z=normalize(Z,this.array)),this.array[_+0]=toHalfFloat(J),this.array[_+1]=toHalfFloat(Z),this}setXYZ(_,J,Z,Q){return _*=this.itemSize,this.normalized&&(J=normalize(J,this.array),Z=normalize(Z,this.array),Q=normalize(Q,this.array)),this.array[_+0]=toHalfFloat(J),this.array[_+1]=toHalfFloat(Z),this.array[_+2]=toHalfFloat(Q),this}setXYZW(_,J,Z,Q,ee){return _*=this.itemSize,this.normalized&&(J=normalize(J,this.array),Z=normalize(Z,this.array),Q=normalize(Q,this.array),ee=normalize(ee,this.array)),this.array[_+0]=toHalfFloat(J),this.array[_+1]=toHalfFloat(Z),this.array[_+2]=toHalfFloat(Q),this.array[_+3]=toHalfFloat(ee),this}}class Float32BufferAttribute extends BufferAttribute{constructor(_,J,Z){super(new Float32Array(_),J,Z)}}let _id$1=0;const _m1$3=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$8=new Vector3;class BufferGeometry extends EventDispatcher$1{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$1++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(_){return Array.isArray(_)?this.index=new(arrayNeedsUint32(_)?Uint32BufferAttribute:Uint16BufferAttribute)(_,1):this.index=_,this}setIndirect(_){return this.indirect=_,this}getIndirect(){return this.indirect}getAttribute(_){return this.attributes[_]}setAttribute(_,J){return this.attributes[_]=J,this}deleteAttribute(_){return delete this.attributes[_],this}hasAttribute(_){return this.attributes[_]!==void 0}addGroup(_,J,Z=0){this.groups.push({start:_,count:J,materialIndex:Z})}clearGroups(){this.groups=[]}setDrawRange(_,J){this.drawRange.start=_,this.drawRange.count=J}applyMatrix4(_){const J=this.attributes.position;J!==void 0&&(J.applyMatrix4(_),J.needsUpdate=!0);const Z=this.attributes.normal;if(Z!==void 0){const ee=new Matrix3().getNormalMatrix(_);Z.applyNormalMatrix(ee),Z.needsUpdate=!0}const Q=this.attributes.tangent;return Q!==void 0&&(Q.transformDirection(_),Q.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(_){return _m1$3.makeRotationFromQuaternion(_),this.applyMatrix4(_m1$3),this}rotateX(_){return _m1$3.makeRotationX(_),this.applyMatrix4(_m1$3),this}rotateY(_){return _m1$3.makeRotationY(_),this.applyMatrix4(_m1$3),this}rotateZ(_){return _m1$3.makeRotationZ(_),this.applyMatrix4(_m1$3),this}translate(_,J,Z){return _m1$3.makeTranslation(_,J,Z),this.applyMatrix4(_m1$3),this}scale(_,J,Z){return _m1$3.makeScale(_,J,Z),this.applyMatrix4(_m1$3),this}lookAt(_){return _obj.lookAt(_),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(_){const J=this.getAttribute("position");if(J===void 0){const Z=[];for(let Q=0,ee=_.length;Q<ee;Q++){const te=_[Q];Z.push(te.x,te.y,te.z||0)}this.setAttribute("position",new Float32BufferAttribute(Z,3))}else{const Z=Math.min(_.length,J.count);for(let Q=0;Q<Z;Q++){const ee=_[Q];J.setXYZ(Q,ee.x,ee.y,ee.z||0)}_.length>J.count&&warn("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),J.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const _=this.attributes.position,J=this.morphAttributes.position;if(_&&_.isGLBufferAttribute){error("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(_!==void 0){if(this.boundingBox.setFromBufferAttribute(_),J)for(let Z=0,Q=J.length;Z<Q;Z++){const ee=J[Z];_box$2.setFromBufferAttribute(ee),this.morphTargetsRelative?(_vector$8.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$8),_vector$8.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$8)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&error('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere$1);const _=this.attributes.position,J=this.morphAttributes.position;if(_&&_.isGLBufferAttribute){error("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Vector3,1/0);return}if(_){const Z=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(_),J)for(let ee=0,te=J.length;ee<te;ee++){const ne=J[ee];_boxMorphTargets.setFromBufferAttribute(ne),this.morphTargetsRelative?(_vector$8.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$8),_vector$8.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$8)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(Z);let Q=0;for(let ee=0,te=_.count;ee<te;ee++)_vector$8.fromBufferAttribute(_,ee),Q=Math.max(Q,Z.distanceToSquared(_vector$8));if(J)for(let ee=0,te=J.length;ee<te;ee++){const ne=J[ee],ie=this.morphTargetsRelative;for(let re=0,oe=ne.count;re<oe;re++)_vector$8.fromBufferAttribute(ne,re),ie&&(_offset.fromBufferAttribute(_,re),_vector$8.add(_offset)),Q=Math.max(Q,Z.distanceToSquared(_vector$8))}this.boundingSphere.radius=Math.sqrt(Q),isNaN(this.boundingSphere.radius)&&error('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const _=this.index,J=this.attributes;if(_===null||J.position===void 0||J.normal===void 0||J.uv===void 0){error("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const Z=J.position,Q=J.normal,ee=J.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*Z.count),4));const te=this.getAttribute("tangent"),ne=[],ie=[];for(let Re=0;Re<Z.count;Re++)ne[Re]=new Vector3,ie[Re]=new Vector3;const re=new Vector3,oe=new Vector3,se=new Vector3,ae=new Vector2,ce=new Vector2,ue=new Vector2,de=new Vector3,me=new Vector3;function fe(Re,Te,Ee){re.fromBufferAttribute(Z,Re),oe.fromBufferAttribute(Z,Te),se.fromBufferAttribute(Z,Ee),ae.fromBufferAttribute(ee,Re),ce.fromBufferAttribute(ee,Te),ue.fromBufferAttribute(ee,Ee),oe.sub(re),se.sub(re),ce.sub(ae),ue.sub(ae);const De=1/(ce.x*ue.y-ue.x*ce.y);isFinite(De)&&(de.copy(oe).multiplyScalar(ue.y).addScaledVector(se,-ce.y).multiplyScalar(De),me.copy(se).multiplyScalar(ce.x).addScaledVector(oe,-ue.x).multiplyScalar(De),ne[Re].add(de),ne[Te].add(de),ne[Ee].add(de),ie[Re].add(me),ie[Te].add(me),ie[Ee].add(me))}let _e=this.groups;_e.length===0&&(_e=[{start:0,count:_.count}]);for(let Re=0,Te=_e.length;Re<Te;++Re){const Ee=_e[Re],De=Ee.start,Le=Ee.count;for(let Ue=De,Ge=De+Le;Ue<Ge;Ue+=3)fe(_.getX(Ue+0),_.getX(Ue+1),_.getX(Ue+2))}const ye=new Vector3,be=new Vector3,Se=new Vector3,Ce=new Vector3;function Me(Re){Se.fromBufferAttribute(Q,Re),Ce.copy(Se);const Te=ne[Re];ye.copy(Te),ye.sub(Se.multiplyScalar(Se.dot(Te))).normalize(),be.crossVectors(Ce,Te);const De=be.dot(ie[Re])<0?-1:1;te.setXYZW(Re,ye.x,ye.y,ye.z,De)}for(let Re=0,Te=_e.length;Re<Te;++Re){const Ee=_e[Re],De=Ee.start,Le=Ee.count;for(let Ue=De,Ge=De+Le;Ue<Ge;Ue+=3)Me(_.getX(Ue+0)),Me(_.getX(Ue+1)),Me(_.getX(Ue+2))}}computeVertexNormals(){const _=this.index,J=this.getAttribute("position");if(J!==void 0){let Z=this.getAttribute("normal");if(Z===void 0)Z=new BufferAttribute(new Float32Array(J.count*3),3),this.setAttribute("normal",Z);else for(let ae=0,ce=Z.count;ae<ce;ae++)Z.setXYZ(ae,0,0,0);const Q=new Vector3,ee=new Vector3,te=new Vector3,ne=new Vector3,ie=new Vector3,re=new Vector3,oe=new Vector3,se=new Vector3;if(_)for(let ae=0,ce=_.count;ae<ce;ae+=3){const ue=_.getX(ae+0),de=_.getX(ae+1),me=_.getX(ae+2);Q.fromBufferAttribute(J,ue),ee.fromBufferAttribute(J,de),te.fromBufferAttribute(J,me),oe.subVectors(te,ee),se.subVectors(Q,ee),oe.cross(se),ne.fromBufferAttribute(Z,ue),ie.fromBufferAttribute(Z,de),re.fromBufferAttribute(Z,me),ne.add(oe),ie.add(oe),re.add(oe),Z.setXYZ(ue,ne.x,ne.y,ne.z),Z.setXYZ(de,ie.x,ie.y,ie.z),Z.setXYZ(me,re.x,re.y,re.z)}else for(let ae=0,ce=J.count;ae<ce;ae+=3)Q.fromBufferAttribute(J,ae+0),ee.fromBufferAttribute(J,ae+1),te.fromBufferAttribute(J,ae+2),oe.subVectors(te,ee),se.subVectors(Q,ee),oe.cross(se),Z.setXYZ(ae+0,oe.x,oe.y,oe.z),Z.setXYZ(ae+1,oe.x,oe.y,oe.z),Z.setXYZ(ae+2,oe.x,oe.y,oe.z);this.normalizeNormals(),Z.needsUpdate=!0}}normalizeNormals(){const _=this.attributes.normal;for(let J=0,Z=_.count;J<Z;J++)_vector$8.fromBufferAttribute(_,J),_vector$8.normalize(),_.setXYZ(J,_vector$8.x,_vector$8.y,_vector$8.z)}toNonIndexed(){function _(ne,ie){const re=ne.array,oe=ne.itemSize,se=ne.normalized,ae=new re.constructor(ie.length*oe);let ce=0,ue=0;for(let de=0,me=ie.length;de<me;de++){ne.isInterleavedBufferAttribute?ce=ie[de]*ne.data.stride+ne.offset:ce=ie[de]*oe;for(let fe=0;fe<oe;fe++)ae[ue++]=re[ce++]}return new BufferAttribute(ae,oe,se)}if(this.index===null)return warn("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const J=new BufferGeometry,Z=this.index.array,Q=this.attributes;for(const ne in Q){const ie=Q[ne],re=_(ie,Z);J.setAttribute(ne,re)}const ee=this.morphAttributes;for(const ne in ee){const ie=[],re=ee[ne];for(let oe=0,se=re.length;oe<se;oe++){const ae=re[oe],ce=_(ae,Z);ie.push(ce)}J.morphAttributes[ne]=ie}J.morphTargetsRelative=this.morphTargetsRelative;const te=this.groups;for(let ne=0,ie=te.length;ne<ie;ne++){const re=te[ne];J.addGroup(re.start,re.count,re.materialIndex)}return J}toJSON(){const _={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(_.uuid=this.uuid,_.type=this.type,this.name!==""&&(_.name=this.name),Object.keys(this.userData).length>0&&(_.userData=this.userData),this.parameters!==void 0){const ie=this.parameters;for(const re in ie)ie[re]!==void 0&&(_[re]=ie[re]);return _}_.data={attributes:{}};const J=this.index;J!==null&&(_.data.index={type:J.array.constructor.name,array:Array.prototype.slice.call(J.array)});const Z=this.attributes;for(const ie in Z){const re=Z[ie];_.data.attributes[ie]=re.toJSON(_.data)}const Q={};let ee=!1;for(const ie in this.morphAttributes){const re=this.morphAttributes[ie],oe=[];for(let se=0,ae=re.length;se<ae;se++){const ce=re[se];oe.push(ce.toJSON(_.data))}oe.length>0&&(Q[ie]=oe,ee=!0)}ee&&(_.data.morphAttributes=Q,_.data.morphTargetsRelative=this.morphTargetsRelative);const te=this.groups;te.length>0&&(_.data.groups=JSON.parse(JSON.stringify(te)));const ne=this.boundingSphere;return ne!==null&&(_.data.boundingSphere=ne.toJSON()),_}clone(){return new this.constructor().copy(this)}copy(_){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const J={};this.name=_.name;const Z=_.index;Z!==null&&this.setIndex(Z.clone());const Q=_.attributes;for(const re in Q){const oe=Q[re];this.setAttribute(re,oe.clone(J))}const ee=_.morphAttributes;for(const re in ee){const oe=[],se=ee[re];for(let ae=0,ce=se.length;ae<ce;ae++)oe.push(se[ae].clone(J));this.morphAttributes[re]=oe}this.morphTargetsRelative=_.morphTargetsRelative;const te=_.groups;for(let re=0,oe=te.length;re<oe;re++){const se=te[re];this.addGroup(se.start,se.count,se.materialIndex)}const ne=_.boundingBox;ne!==null&&(this.boundingBox=ne.clone());const ie=_.boundingSphere;return ie!==null&&(this.boundingSphere=ie.clone()),this.drawRange.start=_.drawRange.start,this.drawRange.count=_.drawRange.count,this.userData=_.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$3=new Matrix4,_ray$3=new Ray,_sphere$6=new Sphere$1,_sphereHitAt=new Vector3,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_morphA=new Vector3,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(_=new BufferGeometry,J=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=_,this.material=J,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(_,J){return super.copy(_,J),_.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=_.morphTargetInfluences.slice()),_.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},_.morphTargetDictionary)),this.material=Array.isArray(_.material)?_.material.slice():_.material,this.geometry=_.geometry,this}updateMorphTargets(){const J=this.geometry.morphAttributes,Z=Object.keys(J);if(Z.length>0){const Q=J[Z[0]];if(Q!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let ee=0,te=Q.length;ee<te;ee++){const ne=Q[ee].name||String(ee);this.morphTargetInfluences.push(0),this.morphTargetDictionary[ne]=ee}}}}getVertexPosition(_,J){const Z=this.geometry,Q=Z.attributes.position,ee=Z.morphAttributes.position,te=Z.morphTargetsRelative;J.fromBufferAttribute(Q,_);const ne=this.morphTargetInfluences;if(ee&&ne){_morphA.set(0,0,0);for(let ie=0,re=ee.length;ie<re;ie++){const oe=ne[ie],se=ee[ie];oe!==0&&(_tempA.fromBufferAttribute(se,_),te?_morphA.addScaledVector(_tempA,oe):_morphA.addScaledVector(_tempA.sub(J),oe))}J.add(_morphA)}return J}raycast(_,J){const Z=this.geometry,Q=this.material,ee=this.matrixWorld;Q!==void 0&&(Z.boundingSphere===null&&Z.computeBoundingSphere(),_sphere$6.copy(Z.boundingSphere),_sphere$6.applyMatrix4(ee),_ray$3.copy(_.ray).recast(_.near),!(_sphere$6.containsPoint(_ray$3.origin)===!1&&(_ray$3.intersectSphere(_sphere$6,_sphereHitAt)===null||_ray$3.origin.distanceToSquared(_sphereHitAt)>(_.far-_.near)**2))&&(_inverseMatrix$3.copy(ee).invert(),_ray$3.copy(_.ray).applyMatrix4(_inverseMatrix$3),!(Z.boundingBox!==null&&_ray$3.intersectsBox(Z.boundingBox)===!1)&&this._computeIntersections(_,J,_ray$3)))}_computeIntersections(_,J,Z){let Q;const ee=this.geometry,te=this.material,ne=ee.index,ie=ee.attributes.position,re=ee.attributes.uv,oe=ee.attributes.uv1,se=ee.attributes.normal,ae=ee.groups,ce=ee.drawRange;if(ne!==null)if(Array.isArray(te))for(let ue=0,de=ae.length;ue<de;ue++){const me=ae[ue],fe=te[me.materialIndex],_e=Math.max(me.start,ce.start),ye=Math.min(ne.count,Math.min(me.start+me.count,ce.start+ce.count));for(let be=_e,Se=ye;be<Se;be+=3){const Ce=ne.getX(be),Me=ne.getX(be+1),Re=ne.getX(be+2);Q=checkGeometryIntersection(this,fe,_,Z,re,oe,se,Ce,Me,Re),Q&&(Q.faceIndex=Math.floor(be/3),Q.face.materialIndex=me.materialIndex,J.push(Q))}}else{const ue=Math.max(0,ce.start),de=Math.min(ne.count,ce.start+ce.count);for(let me=ue,fe=de;me<fe;me+=3){const _e=ne.getX(me),ye=ne.getX(me+1),be=ne.getX(me+2);Q=checkGeometryIntersection(this,te,_,Z,re,oe,se,_e,ye,be),Q&&(Q.faceIndex=Math.floor(me/3),J.push(Q))}}else if(ie!==void 0)if(Array.isArray(te))for(let ue=0,de=ae.length;ue<de;ue++){const me=ae[ue],fe=te[me.materialIndex],_e=Math.max(me.start,ce.start),ye=Math.min(ie.count,Math.min(me.start+me.count,ce.start+ce.count));for(let be=_e,Se=ye;be<Se;be+=3){const Ce=be,Me=be+1,Re=be+2;Q=checkGeometryIntersection(this,fe,_,Z,re,oe,se,Ce,Me,Re),Q&&(Q.faceIndex=Math.floor(be/3),Q.face.materialIndex=me.materialIndex,J.push(Q))}}else{const ue=Math.max(0,ce.start),de=Math.min(ie.count,ce.start+ce.count);for(let me=ue,fe=de;me<fe;me+=3){const _e=me,ye=me+1,be=me+2;Q=checkGeometryIntersection(this,te,_,Z,re,oe,se,_e,ye,be),Q&&(Q.faceIndex=Math.floor(me/3),J.push(Q))}}}}function checkIntersection$1(G,_,J,Z,Q,ee,te,ne){let ie;if(_.side===BackSide?ie=Z.intersectTriangle(te,ee,Q,!0,ne):ie=Z.intersectTriangle(Q,ee,te,_.side===FrontSide,ne),ie===null)return null;_intersectionPointWorld.copy(ne),_intersectionPointWorld.applyMatrix4(G.matrixWorld);const re=J.ray.origin.distanceTo(_intersectionPointWorld);return re<J.near||re>J.far?null:{distance:re,point:_intersectionPointWorld.clone(),object:G}}function checkGeometryIntersection(G,_,J,Z,Q,ee,te,ne,ie,re){G.getVertexPosition(ne,_vA$1),G.getVertexPosition(ie,_vB$1),G.getVertexPosition(re,_vC$1);const oe=checkIntersection$1(G,_,J,Z,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(oe){const se=new Vector3;Triangle.getBarycoord(_intersectionPoint,_vA$1,_vB$1,_vC$1,se),Q&&(oe.uv=Triangle.getInterpolatedAttribute(Q,ne,ie,re,se,new Vector2)),ee&&(oe.uv1=Triangle.getInterpolatedAttribute(ee,ne,ie,re,se,new Vector2)),te&&(oe.normal=Triangle.getInterpolatedAttribute(te,ne,ie,re,se,new Vector3),oe.normal.dot(Z.direction)>0&&oe.normal.multiplyScalar(-1));const ae={a:ne,b:ie,c:re,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,ae.normal),oe.face=ae,oe.barycoord=se}return oe}class BoxGeometry extends BufferGeometry{constructor(_=1,J=1,Z=1,Q=1,ee=1,te=1){super(),this.type="BoxGeometry",this.parameters={width:_,height:J,depth:Z,widthSegments:Q,heightSegments:ee,depthSegments:te};const ne=this;Q=Math.floor(Q),ee=Math.floor(ee),te=Math.floor(te);const ie=[],re=[],oe=[],se=[];let ae=0,ce=0;ue("z","y","x",-1,-1,Z,J,_,te,ee,0),ue("z","y","x",1,-1,Z,J,-_,te,ee,1),ue("x","z","y",1,1,_,Z,J,Q,te,2),ue("x","z","y",1,-1,_,Z,-J,Q,te,3),ue("x","y","z",1,-1,_,J,Z,Q,ee,4),ue("x","y","z",-1,-1,_,J,-Z,Q,ee,5),this.setIndex(ie),this.setAttribute("position",new Float32BufferAttribute(re,3)),this.setAttribute("normal",new Float32BufferAttribute(oe,3)),this.setAttribute("uv",new Float32BufferAttribute(se,2));function ue(de,me,fe,_e,ye,be,Se,Ce,Me,Re,Te){const Ee=be/Me,De=Se/Re,Le=be/2,Ue=Se/2,Ge=Ce/2,Ye=Me+1,ke=Re+1;let Fe=0,Ve=0;const $e=new Vector3;for(let Xe=0;Xe<ke;Xe++){const ze=Xe*De-Ue;for(let qe=0;qe<Ye;qe++){const et=qe*Ee-Le;$e[de]=et*_e,$e[me]=ze*ye,$e[fe]=Ge,re.push($e.x,$e.y,$e.z),$e[de]=0,$e[me]=0,$e[fe]=Ce>0?1:-1,oe.push($e.x,$e.y,$e.z),se.push(qe/Me),se.push(1-Xe/Re),Fe+=1}}for(let Xe=0;Xe<Re;Xe++)for(let ze=0;ze<Me;ze++){const qe=ae+ze+Ye*Xe,et=ae+ze+Ye*(Xe+1),ot=ae+(ze+1)+Ye*(Xe+1),St=ae+(ze+1)+Ye*Xe;ie.push(qe,et,St),ie.push(et,ot,St),Ve+=6}ne.addGroup(ce,Ve,Te),ce+=Ve,ae+=Fe}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new BoxGeometry(_.width,_.height,_.depth,_.widthSegments,_.heightSegments,_.depthSegments)}}function cloneUniforms(G){const _={};for(const J in G){_[J]={};for(const Z in G[J]){const Q=G[J][Z];Q&&(Q.isColor||Q.isMatrix3||Q.isMatrix4||Q.isVector2||Q.isVector3||Q.isVector4||Q.isTexture||Q.isQuaternion)?Q.isRenderTargetTexture?(warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),_[J][Z]=null):_[J][Z]=Q.clone():Array.isArray(Q)?_[J][Z]=Q.slice():_[J][Z]=Q}}return _}function mergeUniforms(G){const _={};for(let J=0;J<G.length;J++){const Z=cloneUniforms(G[J]);for(const Q in Z)_[Q]=Z[Q]}return _}function cloneUniformsGroups(G){const _=[];for(let J=0;J<G.length;J++)_.push(G[J].clone());return _}function getUnlitUniformColorSpace(G){const _=G.getRenderTarget();return _===null?G.outputColorSpace:_.isXRRenderTarget===!0?_.texture.colorSpace:ColorManagement.workingColorSpace}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor(_){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,_!==void 0&&this.setValues(_)}copy(_){return super.copy(_),this.fragmentShader=_.fragmentShader,this.vertexShader=_.vertexShader,this.uniforms=cloneUniforms(_.uniforms),this.uniformsGroups=cloneUniformsGroups(_.uniformsGroups),this.defines=Object.assign({},_.defines),this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.fog=_.fog,this.lights=_.lights,this.clipping=_.clipping,this.extensions=Object.assign({},_.extensions),this.glslVersion=_.glslVersion,this}toJSON(_){const J=super.toJSON(_);J.glslVersion=this.glslVersion,J.uniforms={};for(const Q in this.uniforms){const te=this.uniforms[Q].value;te&&te.isTexture?J.uniforms[Q]={type:"t",value:te.toJSON(_).uuid}:te&&te.isColor?J.uniforms[Q]={type:"c",value:te.getHex()}:te&&te.isVector2?J.uniforms[Q]={type:"v2",value:te.toArray()}:te&&te.isVector3?J.uniforms[Q]={type:"v3",value:te.toArray()}:te&&te.isVector4?J.uniforms[Q]={type:"v4",value:te.toArray()}:te&&te.isMatrix3?J.uniforms[Q]={type:"m3",value:te.toArray()}:te&&te.isMatrix4?J.uniforms[Q]={type:"m4",value:te.toArray()}:J.uniforms[Q]={value:te}}Object.keys(this.defines).length>0&&(J.defines=this.defines),J.vertexShader=this.vertexShader,J.fragmentShader=this.fragmentShader,J.lights=this.lights,J.clipping=this.clipping;const Z={};for(const Q in this.extensions)this.extensions[Q]===!0&&(Z[Q]=!0);return Object.keys(Z).length>0&&(J.extensions=Z),J}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4,this.coordinateSystem=WebGLCoordinateSystem,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(_,J){return super.copy(_,J),this.matrixWorldInverse.copy(_.matrixWorldInverse),this.projectionMatrix.copy(_.projectionMatrix),this.projectionMatrixInverse.copy(_.projectionMatrixInverse),this.coordinateSystem=_.coordinateSystem,this}getWorldDirection(_){return super.getWorldDirection(_).negate()}updateMatrixWorld(_){super.updateMatrixWorld(_),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(_,J){super.updateWorldMatrix(_,J),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const _v3$1=new Vector3,_minTarget=new Vector2,_maxTarget=new Vector2;class PerspectiveCamera extends Camera{constructor(_=50,J=1,Z=.1,Q=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=_,this.zoom=1,this.near=Z,this.far=Q,this.focus=10,this.aspect=J,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(_,J){return super.copy(_,J),this.fov=_.fov,this.zoom=_.zoom,this.near=_.near,this.far=_.far,this.focus=_.focus,this.aspect=_.aspect,this.view=_.view===null?null:Object.assign({},_.view),this.filmGauge=_.filmGauge,this.filmOffset=_.filmOffset,this}setFocalLength(_){const J=.5*this.getFilmHeight()/_;this.fov=RAD2DEG*2*Math.atan(J),this.updateProjectionMatrix()}getFocalLength(){const _=Math.tan(DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/_}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(_,J,Z){_v3$1.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),J.set(_v3$1.x,_v3$1.y).multiplyScalar(-_/_v3$1.z),_v3$1.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),Z.set(_v3$1.x,_v3$1.y).multiplyScalar(-_/_v3$1.z)}getViewSize(_,J){return this.getViewBounds(_,_minTarget,_maxTarget),J.subVectors(_maxTarget,_minTarget)}setViewOffset(_,J,Z,Q,ee,te){this.aspect=_/J,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=_,this.view.fullHeight=J,this.view.offsetX=Z,this.view.offsetY=Q,this.view.width=ee,this.view.height=te,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const _=this.near;let J=_*Math.tan(DEG2RAD*.5*this.fov)/this.zoom,Z=2*J,Q=this.aspect*Z,ee=-.5*Q;const te=this.view;if(this.view!==null&&this.view.enabled){const ie=te.fullWidth,re=te.fullHeight;ee+=te.offsetX*Q/ie,J-=te.offsetY*Z/re,Q*=te.width/ie,Z*=te.height/re}const ne=this.filmOffset;ne!==0&&(ee+=_*ne/this.getFilmWidth()),this.projectionMatrix.makePerspective(ee,ee+Q,J,J-Z,_,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(_){const J=super.toJSON(_);return J.object.fov=this.fov,J.object.zoom=this.zoom,J.object.near=this.near,J.object.far=this.far,J.object.focus=this.focus,J.object.aspect=this.aspect,this.view!==null&&(J.object.view=Object.assign({},this.view)),J.object.filmGauge=this.filmGauge,J.object.filmOffset=this.filmOffset,J}}const fov=-90,aspect=1;class CubeCamera extends Object3D{constructor(_,J,Z){super(),this.type="CubeCamera",this.renderTarget=Z,this.coordinateSystem=null,this.activeMipmapLevel=0;const Q=new PerspectiveCamera(fov,aspect,_,J);Q.layers=this.layers,this.add(Q);const ee=new PerspectiveCamera(fov,aspect,_,J);ee.layers=this.layers,this.add(ee);const te=new PerspectiveCamera(fov,aspect,_,J);te.layers=this.layers,this.add(te);const ne=new PerspectiveCamera(fov,aspect,_,J);ne.layers=this.layers,this.add(ne);const ie=new PerspectiveCamera(fov,aspect,_,J);ie.layers=this.layers,this.add(ie);const re=new PerspectiveCamera(fov,aspect,_,J);re.layers=this.layers,this.add(re)}updateCoordinateSystem(){const _=this.coordinateSystem,J=this.children.concat(),[Z,Q,ee,te,ne,ie]=J;for(const re of J)this.remove(re);if(_===WebGLCoordinateSystem)Z.up.set(0,1,0),Z.lookAt(1,0,0),Q.up.set(0,1,0),Q.lookAt(-1,0,0),ee.up.set(0,0,-1),ee.lookAt(0,1,0),te.up.set(0,0,1),te.lookAt(0,-1,0),ne.up.set(0,1,0),ne.lookAt(0,0,1),ie.up.set(0,1,0),ie.lookAt(0,0,-1);else if(_===WebGPUCoordinateSystem)Z.up.set(0,-1,0),Z.lookAt(-1,0,0),Q.up.set(0,-1,0),Q.lookAt(1,0,0),ee.up.set(0,0,1),ee.lookAt(0,1,0),te.up.set(0,0,-1),te.lookAt(0,-1,0),ne.up.set(0,-1,0),ne.lookAt(0,0,1),ie.up.set(0,-1,0),ie.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+_);for(const re of J)this.add(re),re.updateMatrixWorld()}update(_,J){this.parent===null&&this.updateMatrixWorld();const{renderTarget:Z,activeMipmapLevel:Q}=this;this.coordinateSystem!==_.coordinateSystem&&(this.coordinateSystem=_.coordinateSystem,this.updateCoordinateSystem());const[ee,te,ne,ie,re,oe]=this.children,se=_.getRenderTarget(),ae=_.getActiveCubeFace(),ce=_.getActiveMipmapLevel(),ue=_.xr.enabled;_.xr.enabled=!1;const de=Z.texture.generateMipmaps;Z.texture.generateMipmaps=!1,_.setRenderTarget(Z,0,Q),_.render(J,ee),_.setRenderTarget(Z,1,Q),_.render(J,te),_.setRenderTarget(Z,2,Q),_.render(J,ne),_.setRenderTarget(Z,3,Q),_.render(J,ie),_.setRenderTarget(Z,4,Q),_.render(J,re),Z.texture.generateMipmaps=de,_.setRenderTarget(Z,5,Q),_.render(J,oe),_.setRenderTarget(se,ae,ce),_.xr.enabled=ue,Z.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(_=[],J=CubeReflectionMapping,Z,Q,ee,te,ne,ie,re,oe){super(_,J,Z,Q,ee,te,ne,ie,re,oe),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(_){this.image=_}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(_=1,J={}){super(_,_,J),this.isWebGLCubeRenderTarget=!0;const Z={width:_,height:_,depth:1},Q=[Z,Z,Z,Z,Z,Z];this.texture=new CubeTexture(Q),this._setTextureOptions(J),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(_,J){this.texture.type=J.type,this.texture.colorSpace=J.colorSpace,this.texture.generateMipmaps=J.generateMipmaps,this.texture.minFilter=J.minFilter,this.texture.magFilter=J.magFilter;const Z={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},Q=new BoxGeometry(5,5,5),ee=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(Z.uniforms),vertexShader:Z.vertexShader,fragmentShader:Z.fragmentShader,side:BackSide,blending:NoBlending});ee.uniforms.tEquirect.value=J;const te=new Mesh(Q,ee),ne=J.minFilter;return J.minFilter===LinearMipmapLinearFilter&&(J.minFilter=LinearFilter),new CubeCamera(1,10,this).update(_,te),J.minFilter=ne,te.geometry.dispose(),te.material.dispose(),this}clear(_,J=!0,Z=!0,Q=!0){const ee=_.getRenderTarget();for(let te=0;te<6;te++)_.setRenderTarget(this,te),_.clear(J,Z,Q);_.setRenderTarget(ee)}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(_){return this._targetRay!==null&&this._targetRay.dispatchEvent(_),this._grip!==null&&this._grip.dispatchEvent(_),this._hand!==null&&this._hand.dispatchEvent(_),this}connect(_){if(_&&_.hand){const J=this._hand;if(J)for(const Z of _.hand.values())this._getHandJoint(J,Z)}return this.dispatchEvent({type:"connected",data:_}),this}disconnect(_){return this.dispatchEvent({type:"disconnected",data:_}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(_,J,Z){let Q=null,ee=null,te=null;const ne=this._targetRay,ie=this._grip,re=this._hand;if(_&&J.session.visibilityState!=="visible-blurred"){if(re&&_.hand){te=!0;for(const de of _.hand.values()){const me=J.getJointPose(de,Z),fe=this._getHandJoint(re,de);me!==null&&(fe.matrix.fromArray(me.transform.matrix),fe.matrix.decompose(fe.position,fe.rotation,fe.scale),fe.matrixWorldNeedsUpdate=!0,fe.jointRadius=me.radius),fe.visible=me!==null}const oe=re.joints["index-finger-tip"],se=re.joints["thumb-tip"],ae=oe.position.distanceTo(se.position),ce=.02,ue=.005;re.inputState.pinching&&ae>ce+ue?(re.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:_.handedness,target:this})):!re.inputState.pinching&&ae<=ce-ue&&(re.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:_.handedness,target:this}))}else ie!==null&&_.gripSpace&&(ee=J.getPose(_.gripSpace,Z),ee!==null&&(ie.matrix.fromArray(ee.transform.matrix),ie.matrix.decompose(ie.position,ie.rotation,ie.scale),ie.matrixWorldNeedsUpdate=!0,ee.linearVelocity?(ie.hasLinearVelocity=!0,ie.linearVelocity.copy(ee.linearVelocity)):ie.hasLinearVelocity=!1,ee.angularVelocity?(ie.hasAngularVelocity=!0,ie.angularVelocity.copy(ee.angularVelocity)):ie.hasAngularVelocity=!1));ne!==null&&(Q=J.getPose(_.targetRaySpace,Z),Q===null&&ee!==null&&(Q=ee),Q!==null&&(ne.matrix.fromArray(Q.transform.matrix),ne.matrix.decompose(ne.position,ne.rotation,ne.scale),ne.matrixWorldNeedsUpdate=!0,Q.linearVelocity?(ne.hasLinearVelocity=!0,ne.linearVelocity.copy(Q.linearVelocity)):ne.hasLinearVelocity=!1,Q.angularVelocity?(ne.hasAngularVelocity=!0,ne.angularVelocity.copy(Q.angularVelocity)):ne.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return ne!==null&&(ne.visible=Q!==null),ie!==null&&(ie.visible=ee!==null),re!==null&&(re.visible=te!==null),this}_getHandJoint(_,J){if(_.joints[J.jointName]===void 0){const Z=new Group;Z.matrixAutoUpdate=!1,Z.visible=!1,_.joints[J.jointName]=Z,_.add(Z)}return _.joints[J.jointName]}}class FogExp2{constructor(_,J=25e-5){this.isFogExp2=!0,this.name="",this.color=new Color(_),this.density=J}clone(){return new FogExp2(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Fog{constructor(_,J=1,Z=1e3){this.isFog=!0,this.name="",this.color=new Color(_),this.near=J,this.far=Z}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Euler,this.environmentIntensity=1,this.environmentRotation=new Euler,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(_,J){return super.copy(_,J),_.background!==null&&(this.background=_.background.clone()),_.environment!==null&&(this.environment=_.environment.clone()),_.fog!==null&&(this.fog=_.fog.clone()),this.backgroundBlurriness=_.backgroundBlurriness,this.backgroundIntensity=_.backgroundIntensity,this.backgroundRotation.copy(_.backgroundRotation),this.environmentIntensity=_.environmentIntensity,this.environmentRotation.copy(_.environmentRotation),_.overrideMaterial!==null&&(this.overrideMaterial=_.overrideMaterial.clone()),this.matrixAutoUpdate=_.matrixAutoUpdate,this}toJSON(_){const J=super.toJSON(_);return this.fog!==null&&(J.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(J.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(J.object.backgroundIntensity=this.backgroundIntensity),J.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(J.object.environmentIntensity=this.environmentIntensity),J.object.environmentRotation=this.environmentRotation.toArray(),J}}class InterleavedBuffer{constructor(_,J){this.isInterleavedBuffer=!0,this.array=_,this.stride=J,this.count=_!==void 0?_.length/J:0,this.usage=StaticDrawUsage,this.updateRanges=[],this.version=0,this.uuid=generateUUID()}onUploadCallback(){}set needsUpdate(_){_===!0&&this.version++}setUsage(_){return this.usage=_,this}addUpdateRange(_,J){this.updateRanges.push({start:_,count:J})}clearUpdateRanges(){this.updateRanges.length=0}copy(_){return this.array=new _.array.constructor(_.array),this.count=_.count,this.stride=_.stride,this.usage=_.usage,this}copyAt(_,J,Z){_*=this.stride,Z*=J.stride;for(let Q=0,ee=this.stride;Q<ee;Q++)this.array[_+Q]=J.array[Z+Q];return this}set(_,J=0){return this.array.set(_,J),this}clone(_){_.arrayBuffers===void 0&&(_.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),_.arrayBuffers[this.array.buffer._uuid]===void 0&&(_.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const J=new this.array.constructor(_.arrayBuffers[this.array.buffer._uuid]),Z=new this.constructor(J,this.stride);return Z.setUsage(this.usage),Z}onUpload(_){return this.onUploadCallback=_,this}toJSON(_){return _.arrayBuffers===void 0&&(_.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),_.arrayBuffers[this.array.buffer._uuid]===void 0&&(_.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _vector$7=new Vector3;class InterleavedBufferAttribute{constructor(_,J,Z,Q=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=_,this.itemSize=J,this.offset=Z,this.normalized=Q}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(_){this.data.needsUpdate=_}applyMatrix4(_){for(let J=0,Z=this.data.count;J<Z;J++)_vector$7.fromBufferAttribute(this,J),_vector$7.applyMatrix4(_),this.setXYZ(J,_vector$7.x,_vector$7.y,_vector$7.z);return this}applyNormalMatrix(_){for(let J=0,Z=this.count;J<Z;J++)_vector$7.fromBufferAttribute(this,J),_vector$7.applyNormalMatrix(_),this.setXYZ(J,_vector$7.x,_vector$7.y,_vector$7.z);return this}transformDirection(_){for(let J=0,Z=this.count;J<Z;J++)_vector$7.fromBufferAttribute(this,J),_vector$7.transformDirection(_),this.setXYZ(J,_vector$7.x,_vector$7.y,_vector$7.z);return this}getComponent(_,J){let Z=this.array[_*this.data.stride+this.offset+J];return this.normalized&&(Z=denormalize(Z,this.array)),Z}setComponent(_,J,Z){return this.normalized&&(Z=normalize(Z,this.array)),this.data.array[_*this.data.stride+this.offset+J]=Z,this}setX(_,J){return this.normalized&&(J=normalize(J,this.array)),this.data.array[_*this.data.stride+this.offset]=J,this}setY(_,J){return this.normalized&&(J=normalize(J,this.array)),this.data.array[_*this.data.stride+this.offset+1]=J,this}setZ(_,J){return this.normalized&&(J=normalize(J,this.array)),this.data.array[_*this.data.stride+this.offset+2]=J,this}setW(_,J){return this.normalized&&(J=normalize(J,this.array)),this.data.array[_*this.data.stride+this.offset+3]=J,this}getX(_){let J=this.data.array[_*this.data.stride+this.offset];return this.normalized&&(J=denormalize(J,this.array)),J}getY(_){let J=this.data.array[_*this.data.stride+this.offset+1];return this.normalized&&(J=denormalize(J,this.array)),J}getZ(_){let J=this.data.array[_*this.data.stride+this.offset+2];return this.normalized&&(J=denormalize(J,this.array)),J}getW(_){let J=this.data.array[_*this.data.stride+this.offset+3];return this.normalized&&(J=denormalize(J,this.array)),J}setXY(_,J,Z){return _=_*this.data.stride+this.offset,this.normalized&&(J=normalize(J,this.array),Z=normalize(Z,this.array)),this.data.array[_+0]=J,this.data.array[_+1]=Z,this}setXYZ(_,J,Z,Q){return _=_*this.data.stride+this.offset,this.normalized&&(J=normalize(J,this.array),Z=normalize(Z,this.array),Q=normalize(Q,this.array)),this.data.array[_+0]=J,this.data.array[_+1]=Z,this.data.array[_+2]=Q,this}setXYZW(_,J,Z,Q,ee){return _=_*this.data.stride+this.offset,this.normalized&&(J=normalize(J,this.array),Z=normalize(Z,this.array),Q=normalize(Q,this.array),ee=normalize(ee,this.array)),this.data.array[_+0]=J,this.data.array[_+1]=Z,this.data.array[_+2]=Q,this.data.array[_+3]=ee,this}clone(_){if(_===void 0){log("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const J=[];for(let Z=0;Z<this.count;Z++){const Q=Z*this.data.stride+this.offset;for(let ee=0;ee<this.itemSize;ee++)J.push(this.data.array[Q+ee])}return new BufferAttribute(new this.array.constructor(J),this.itemSize,this.normalized)}else return _.interleavedBuffers===void 0&&(_.interleavedBuffers={}),_.interleavedBuffers[this.data.uuid]===void 0&&(_.interleavedBuffers[this.data.uuid]=this.data.clone(_)),new InterleavedBufferAttribute(_.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(_){if(_===void 0){log("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const J=[];for(let Z=0;Z<this.count;Z++){const Q=Z*this.data.stride+this.offset;for(let ee=0;ee<this.itemSize;ee++)J.push(this.data.array[Q+ee])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:J,normalized:this.normalized}}else return _.interleavedBuffers===void 0&&(_.interleavedBuffers={}),_.interleavedBuffers[this.data.uuid]===void 0&&(_.interleavedBuffers[this.data.uuid]=this.data.toJSON(_)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class SpriteMaterial extends Material{constructor(_){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.alphaMap=_.alphaMap,this.rotation=_.rotation,this.sizeAttenuation=_.sizeAttenuation,this.fog=_.fog,this}}let _geometry;const _intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2;class Sprite extends Object3D{constructor(_=new SpriteMaterial){if(super(),this.isSprite=!0,this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;const J=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),Z=new InterleavedBuffer(J,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(Z,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(Z,2,3,!1))}this.geometry=_geometry,this.material=_,this.center=new Vector2(.5,.5),this.count=1}raycast(_,J){_.camera===null&&error('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(_.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(_.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),_.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);const Z=this.material.rotation;let Q,ee;Z!==0&&(ee=Math.cos(Z),Q=Math.sin(Z));const te=this.center;transformVertex(_vA.set(-.5,-.5,0),_mvPosition,te,_worldScale,Q,ee),transformVertex(_vB.set(.5,-.5,0),_mvPosition,te,_worldScale,Q,ee),transformVertex(_vC.set(.5,.5,0),_mvPosition,te,_worldScale,Q,ee),_uvA.set(0,0),_uvB.set(1,0),_uvC.set(1,1);let ne=_.ray.intersectTriangle(_vA,_vB,_vC,!1,_intersectPoint);if(ne===null&&(transformVertex(_vB.set(-.5,.5,0),_mvPosition,te,_worldScale,Q,ee),_uvB.set(0,1),ne=_.ray.intersectTriangle(_vA,_vC,_vB,!1,_intersectPoint),ne===null))return;const ie=_.ray.origin.distanceTo(_intersectPoint);ie<_.near||ie>_.far||J.push({distance:ie,point:_intersectPoint.clone(),uv:Triangle.getInterpolation(_intersectPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2),face:null,object:this})}copy(_,J){return super.copy(_,J),_.center!==void 0&&this.center.copy(_.center),this.material=_.material,this}}function transformVertex(G,_,J,Z,Q,ee){_alignedPosition.subVectors(G,J).addScalar(.5).multiply(Z),Q!==void 0?(_rotatedPosition.x=ee*_alignedPosition.x-Q*_alignedPosition.y,_rotatedPosition.y=Q*_alignedPosition.x+ee*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),G.copy(_),G.x+=_rotatedPosition.x,G.y+=_rotatedPosition.y,G.applyMatrix4(_viewWorldMatrix)}const _v1$2=new Vector3,_v2$1=new Vector3;class LOD extends Object3D{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(_){super.copy(_,!1);const J=_.levels;for(let Z=0,Q=J.length;Z<Q;Z++){const ee=J[Z];this.addLevel(ee.object.clone(),ee.distance,ee.hysteresis)}return this.autoUpdate=_.autoUpdate,this}addLevel(_,J=0,Z=0){J=Math.abs(J);const Q=this.levels;let ee;for(ee=0;ee<Q.length&&!(J<Q[ee].distance);ee++);return Q.splice(ee,0,{distance:J,hysteresis:Z,object:_}),this.add(_),this}removeLevel(_){const J=this.levels;for(let Z=0;Z<J.length;Z++)if(J[Z].distance===_){const Q=J.splice(Z,1);return this.remove(Q[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(_){const J=this.levels;if(J.length>0){let Z,Q;for(Z=1,Q=J.length;Z<Q;Z++){let ee=J[Z].distance;if(J[Z].object.visible&&(ee-=ee*J[Z].hysteresis),_<ee)break}return J[Z-1].object}return null}raycast(_,J){if(this.levels.length>0){_v1$2.setFromMatrixPosition(this.matrixWorld);const Q=_.ray.origin.distanceTo(_v1$2);this.getObjectForDistance(Q).raycast(_,J)}}update(_){const J=this.levels;if(J.length>1){_v1$2.setFromMatrixPosition(_.matrixWorld),_v2$1.setFromMatrixPosition(this.matrixWorld);const Z=_v1$2.distanceTo(_v2$1)/_.zoom;J[0].object.visible=!0;let Q,ee;for(Q=1,ee=J.length;Q<ee;Q++){let te=J[Q].distance;if(J[Q].object.visible&&(te-=te*J[Q].hysteresis),Z>=te)J[Q-1].object.visible=!1,J[Q].object.visible=!0;else break}for(this._currentLevel=Q-1;Q<ee;Q++)J[Q].object.visible=!1}}toJSON(_){const J=super.toJSON(_);this.autoUpdate===!1&&(J.object.autoUpdate=!1),J.object.levels=[];const Z=this.levels;for(let Q=0,ee=Z.length;Q<ee;Q++){const te=Z[Q];J.object.levels.push({object:te.object.uuid,distance:te.distance,hysteresis:te.hysteresis})}return J}}const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector3=new Vector3,_matrix4=new Matrix4,_vertex=new Vector3,_sphere$5=new Sphere$1,_inverseMatrix$2=new Matrix4,_ray$2=new Ray;class SkinnedMesh extends Mesh{constructor(_,J){super(_,J),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=AttachedBindMode,this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const _=this.geometry;this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.makeEmpty();const J=_.getAttribute("position");for(let Z=0;Z<J.count;Z++)this.getVertexPosition(Z,_vertex),this.boundingBox.expandByPoint(_vertex)}computeBoundingSphere(){const _=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Sphere$1),this.boundingSphere.makeEmpty();const J=_.getAttribute("position");for(let Z=0;Z<J.count;Z++)this.getVertexPosition(Z,_vertex),this.boundingSphere.expandByPoint(_vertex)}copy(_,J){return super.copy(_,J),this.bindMode=_.bindMode,this.bindMatrix.copy(_.bindMatrix),this.bindMatrixInverse.copy(_.bindMatrixInverse),this.skeleton=_.skeleton,_.boundingBox!==null&&(this.boundingBox=_.boundingBox.clone()),_.boundingSphere!==null&&(this.boundingSphere=_.boundingSphere.clone()),this}raycast(_,J){const Z=this.material,Q=this.matrixWorld;Z!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$5.copy(this.boundingSphere),_sphere$5.applyMatrix4(Q),_.ray.intersectsSphere(_sphere$5)!==!1&&(_inverseMatrix$2.copy(Q).invert(),_ray$2.copy(_.ray).applyMatrix4(_inverseMatrix$2),!(this.boundingBox!==null&&_ray$2.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(_,J,_ray$2)))}getVertexPosition(_,J){return super.getVertexPosition(_,J),this.applyBoneTransform(_,J),J}bind(_,J){this.skeleton=_,J===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),J=this.matrixWorld),this.bindMatrix.copy(J),this.bindMatrixInverse.copy(J).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const _=new Vector4,J=this.geometry.attributes.skinWeight;for(let Z=0,Q=J.count;Z<Q;Z++){_.fromBufferAttribute(J,Z);const ee=1/_.manhattanLength();ee!==1/0?_.multiplyScalar(ee):_.set(1,0,0,0),J.setXYZW(Z,_.x,_.y,_.z,_.w)}}updateMatrixWorld(_){super.updateMatrixWorld(_),this.bindMode===AttachedBindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===DetachedBindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():warn("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(_,J){const Z=this.skeleton,Q=this.geometry;_skinIndex.fromBufferAttribute(Q.attributes.skinIndex,_),_skinWeight.fromBufferAttribute(Q.attributes.skinWeight,_),_basePosition.copy(J).applyMatrix4(this.bindMatrix),J.set(0,0,0);for(let ee=0;ee<4;ee++){const te=_skinWeight.getComponent(ee);if(te!==0){const ne=_skinIndex.getComponent(ee);_matrix4.multiplyMatrices(Z.bones[ne].matrixWorld,Z.boneInverses[ne]),J.addScaledVector(_vector3.copy(_basePosition).applyMatrix4(_matrix4),te)}}return J.applyMatrix4(this.bindMatrixInverse)}}class Bone extends Object3D{constructor(){super(),this.isBone=!0,this.type="Bone"}}class DataTexture extends Texture{constructor(_=null,J=1,Z=1,Q,ee,te,ne,ie,re=NearestFilter,oe=NearestFilter,se,ae){super(null,te,ne,ie,re,oe,Q,ee,se,ae),this.isDataTexture=!0,this.image={data:_,width:J,height:Z},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _offsetMatrix=new Matrix4,_identityMatrix=new Matrix4;class Skeleton{constructor(_=[],J=[]){this.uuid=generateUUID(),this.bones=_.slice(0),this.boneInverses=J,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const _=this.bones,J=this.boneInverses;if(this.boneMatrices=new Float32Array(_.length*16),J.length===0)this.calculateInverses();else if(_.length!==J.length){warn("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let Z=0,Q=this.bones.length;Z<Q;Z++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let _=0,J=this.bones.length;_<J;_++){const Z=new Matrix4;this.bones[_]&&Z.copy(this.bones[_].matrixWorld).invert(),this.boneInverses.push(Z)}}pose(){for(let _=0,J=this.bones.length;_<J;_++){const Z=this.bones[_];Z&&Z.matrixWorld.copy(this.boneInverses[_]).invert()}for(let _=0,J=this.bones.length;_<J;_++){const Z=this.bones[_];Z&&(Z.parent&&Z.parent.isBone?(Z.matrix.copy(Z.parent.matrixWorld).invert(),Z.matrix.multiply(Z.matrixWorld)):Z.matrix.copy(Z.matrixWorld),Z.matrix.decompose(Z.position,Z.quaternion,Z.scale))}}update(){const _=this.bones,J=this.boneInverses,Z=this.boneMatrices,Q=this.boneTexture;for(let ee=0,te=_.length;ee<te;ee++){const ne=_[ee]?_[ee].matrixWorld:_identityMatrix;_offsetMatrix.multiplyMatrices(ne,J[ee]),_offsetMatrix.toArray(Z,ee*16)}Q!==null&&(Q.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let _=Math.sqrt(this.bones.length*4);_=Math.ceil(_/4)*4,_=Math.max(_,4);const J=new Float32Array(_*_*4);J.set(this.boneMatrices);const Z=new DataTexture(J,_,_,RGBAFormat,FloatType);return Z.needsUpdate=!0,this.boneMatrices=J,this.boneTexture=Z,this}getBoneByName(_){for(let J=0,Z=this.bones.length;J<Z;J++){const Q=this.bones[J];if(Q.name===_)return Q}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(_,J){this.uuid=_.uuid;for(let Z=0,Q=_.bones.length;Z<Q;Z++){const ee=_.bones[Z];let te=J[ee];te===void 0&&(warn("Skeleton: No bone found with UUID:",ee),te=new Bone),this.bones.push(te),this.boneInverses.push(new Matrix4().fromArray(_.boneInverses[Z]))}return this.init(),this}toJSON(){const _={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};_.uuid=this.uuid;const J=this.bones,Z=this.boneInverses;for(let Q=0,ee=J.length;Q<ee;Q++){const te=J[Q];_.bones.push(te.uuid);const ne=Z[Q];_.boneInverses.push(ne.toArray())}return _}}class InstancedBufferAttribute extends BufferAttribute{constructor(_,J,Z,Q=1){super(_,J,Z),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=Q}copy(_){return super.copy(_),this.meshPerAttribute=_.meshPerAttribute,this}toJSON(){const _=super.toJSON();return _.meshPerAttribute=this.meshPerAttribute,_.isInstancedBufferAttribute=!0,_}}const _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_box3=new Box3,_identity=new Matrix4,_mesh$1=new Mesh,_sphere$4=new Sphere$1;class InstancedMesh extends Mesh{constructor(_,J,Z){super(_,J),this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(Z*16),16),this.instanceColor=null,this.morphTexture=null,this.count=Z,this.boundingBox=null,this.boundingSphere=null;for(let Q=0;Q<Z;Q++)this.setMatrixAt(Q,_identity)}computeBoundingBox(){const _=this.geometry,J=this.count;this.boundingBox===null&&(this.boundingBox=new Box3),_.boundingBox===null&&_.computeBoundingBox(),this.boundingBox.makeEmpty();for(let Z=0;Z<J;Z++)this.getMatrixAt(Z,_instanceLocalMatrix),_box3.copy(_.boundingBox).applyMatrix4(_instanceLocalMatrix),this.boundingBox.union(_box3)}computeBoundingSphere(){const _=this.geometry,J=this.count;this.boundingSphere===null&&(this.boundingSphere=new Sphere$1),_.boundingSphere===null&&_.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let Z=0;Z<J;Z++)this.getMatrixAt(Z,_instanceLocalMatrix),_sphere$4.copy(_.boundingSphere).applyMatrix4(_instanceLocalMatrix),this.boundingSphere.union(_sphere$4)}copy(_,J){return super.copy(_,J),this.instanceMatrix.copy(_.instanceMatrix),_.morphTexture!==null&&(this.morphTexture=_.morphTexture.clone()),_.instanceColor!==null&&(this.instanceColor=_.instanceColor.clone()),this.count=_.count,_.boundingBox!==null&&(this.boundingBox=_.boundingBox.clone()),_.boundingSphere!==null&&(this.boundingSphere=_.boundingSphere.clone()),this}getColorAt(_,J){J.fromArray(this.instanceColor.array,_*3)}getMatrixAt(_,J){J.fromArray(this.instanceMatrix.array,_*16)}getMorphAt(_,J){const Z=J.morphTargetInfluences,Q=this.morphTexture.source.data.data,ee=Z.length+1,te=_*ee+1;for(let ne=0;ne<Z.length;ne++)Z[ne]=Q[te+ne]}raycast(_,J){const Z=this.matrixWorld,Q=this.count;if(_mesh$1.geometry=this.geometry,_mesh$1.material=this.material,_mesh$1.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$4.copy(this.boundingSphere),_sphere$4.applyMatrix4(Z),_.ray.intersectsSphere(_sphere$4)!==!1))for(let ee=0;ee<Q;ee++){this.getMatrixAt(ee,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(Z,_instanceLocalMatrix),_mesh$1.matrixWorld=_instanceWorldMatrix,_mesh$1.raycast(_,_instanceIntersects);for(let te=0,ne=_instanceIntersects.length;te<ne;te++){const ie=_instanceIntersects[te];ie.instanceId=ee,ie.object=this,J.push(ie)}_instanceIntersects.length=0}}setColorAt(_,J){this.instanceColor===null&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),J.toArray(this.instanceColor.array,_*3)}setMatrixAt(_,J){J.toArray(this.instanceMatrix.array,_*16)}setMorphAt(_,J){const Z=J.morphTargetInfluences,Q=Z.length+1;this.morphTexture===null&&(this.morphTexture=new DataTexture(new Float32Array(Q*this.count),Q,this.count,RedFormat,FloatType));const ee=this.morphTexture.source.data.data;let te=0;for(let re=0;re<Z.length;re++)te+=Z[re];const ne=this.geometry.morphTargetsRelative?1:1-te,ie=Q*_;ee[ie]=ne,ee.set(Z,ie+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;class Plane{constructor(_=new Vector3(1,0,0),J=0){this.isPlane=!0,this.normal=_,this.constant=J}set(_,J){return this.normal.copy(_),this.constant=J,this}setComponents(_,J,Z,Q){return this.normal.set(_,J,Z),this.constant=Q,this}setFromNormalAndCoplanarPoint(_,J){return this.normal.copy(_),this.constant=-J.dot(this.normal),this}setFromCoplanarPoints(_,J,Z){const Q=_vector1.subVectors(Z,J).cross(_vector2.subVectors(_,J)).normalize();return this.setFromNormalAndCoplanarPoint(Q,_),this}copy(_){return this.normal.copy(_.normal),this.constant=_.constant,this}normalize(){const _=1/this.normal.length();return this.normal.multiplyScalar(_),this.constant*=_,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(_){return this.normal.dot(_)+this.constant}distanceToSphere(_){return this.distanceToPoint(_.center)-_.radius}projectPoint(_,J){return J.copy(_).addScaledVector(this.normal,-this.distanceToPoint(_))}intersectLine(_,J){const Z=_.delta(_vector1),Q=this.normal.dot(Z);if(Q===0)return this.distanceToPoint(_.start)===0?J.copy(_.start):null;const ee=-(_.start.dot(this.normal)+this.constant)/Q;return ee<0||ee>1?null:J.copy(_.start).addScaledVector(Z,ee)}intersectsLine(_){const J=this.distanceToPoint(_.start),Z=this.distanceToPoint(_.end);return J<0&&Z>0||Z<0&&J>0}intersectsBox(_){return _.intersectsPlane(this)}intersectsSphere(_){return _.intersectsPlane(this)}coplanarPoint(_){return _.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(_,J){const Z=J||_normalMatrix.getNormalMatrix(_),Q=this.coplanarPoint(_vector1).applyMatrix4(_),ee=this.normal.applyMatrix3(Z).normalize();return this.constant=-Q.dot(ee),this}translate(_){return this.constant-=_.dot(this.normal),this}equals(_){return _.normal.equals(this.normal)&&_.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _sphere$3=new Sphere$1,_defaultSpriteCenter=new Vector2(.5,.5),_vector$6=new Vector3;class Frustum{constructor(_=new Plane,J=new Plane,Z=new Plane,Q=new Plane,ee=new Plane,te=new Plane){this.planes=[_,J,Z,Q,ee,te]}set(_,J,Z,Q,ee,te){const ne=this.planes;return ne[0].copy(_),ne[1].copy(J),ne[2].copy(Z),ne[3].copy(Q),ne[4].copy(ee),ne[5].copy(te),this}copy(_){const J=this.planes;for(let Z=0;Z<6;Z++)J[Z].copy(_.planes[Z]);return this}setFromProjectionMatrix(_,J=WebGLCoordinateSystem,Z=!1){const Q=this.planes,ee=_.elements,te=ee[0],ne=ee[1],ie=ee[2],re=ee[3],oe=ee[4],se=ee[5],ae=ee[6],ce=ee[7],ue=ee[8],de=ee[9],me=ee[10],fe=ee[11],_e=ee[12],ye=ee[13],be=ee[14],Se=ee[15];if(Q[0].setComponents(re-te,ce-oe,fe-ue,Se-_e).normalize(),Q[1].setComponents(re+te,ce+oe,fe+ue,Se+_e).normalize(),Q[2].setComponents(re+ne,ce+se,fe+de,Se+ye).normalize(),Q[3].setComponents(re-ne,ce-se,fe-de,Se-ye).normalize(),Z)Q[4].setComponents(ie,ae,me,be).normalize(),Q[5].setComponents(re-ie,ce-ae,fe-me,Se-be).normalize();else if(Q[4].setComponents(re-ie,ce-ae,fe-me,Se-be).normalize(),J===WebGLCoordinateSystem)Q[5].setComponents(re+ie,ce+ae,fe+me,Se+be).normalize();else if(J===WebGPUCoordinateSystem)Q[5].setComponents(ie,ae,me,be).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+J);return this}intersectsObject(_){if(_.boundingSphere!==void 0)_.boundingSphere===null&&_.computeBoundingSphere(),_sphere$3.copy(_.boundingSphere).applyMatrix4(_.matrixWorld);else{const J=_.geometry;J.boundingSphere===null&&J.computeBoundingSphere(),_sphere$3.copy(J.boundingSphere).applyMatrix4(_.matrixWorld)}return this.intersectsSphere(_sphere$3)}intersectsSprite(_){_sphere$3.center.set(0,0,0);const J=_defaultSpriteCenter.distanceTo(_.center);return _sphere$3.radius=.7071067811865476+J,_sphere$3.applyMatrix4(_.matrixWorld),this.intersectsSphere(_sphere$3)}intersectsSphere(_){const J=this.planes,Z=_.center,Q=-_.radius;for(let ee=0;ee<6;ee++)if(J[ee].distanceToPoint(Z)<Q)return!1;return!0}intersectsBox(_){const J=this.planes;for(let Z=0;Z<6;Z++){const Q=J[Z];if(_vector$6.x=Q.normal.x>0?_.max.x:_.min.x,_vector$6.y=Q.normal.y>0?_.max.y:_.min.y,_vector$6.z=Q.normal.z>0?_.max.z:_.min.z,Q.distanceToPoint(_vector$6)<0)return!1}return!0}containsPoint(_){const J=this.planes;for(let Z=0;Z<6;Z++)if(J[Z].distanceToPoint(_)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const _projScreenMatrix$2=new Matrix4,_frustum$1=new Frustum;class FrustumArray{constructor(){this.coordinateSystem=WebGLCoordinateSystem}intersectsObject(_,J){if(!J.isArrayCamera||J.cameras.length===0)return!1;for(let Z=0;Z<J.cameras.length;Z++){const Q=J.cameras[Z];if(_projScreenMatrix$2.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$2,Q.coordinateSystem,Q.reversedDepth),_frustum$1.intersectsObject(_))return!0}return!1}intersectsSprite(_,J){if(!J||!J.cameras||J.cameras.length===0)return!1;for(let Z=0;Z<J.cameras.length;Z++){const Q=J.cameras[Z];if(_projScreenMatrix$2.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$2,Q.coordinateSystem,Q.reversedDepth),_frustum$1.intersectsSprite(_))return!0}return!1}intersectsSphere(_,J){if(!J||!J.cameras||J.cameras.length===0)return!1;for(let Z=0;Z<J.cameras.length;Z++){const Q=J.cameras[Z];if(_projScreenMatrix$2.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$2,Q.coordinateSystem,Q.reversedDepth),_frustum$1.intersectsSphere(_))return!0}return!1}intersectsBox(_,J){if(!J||!J.cameras||J.cameras.length===0)return!1;for(let Z=0;Z<J.cameras.length;Z++){const Q=J.cameras[Z];if(_projScreenMatrix$2.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$2,Q.coordinateSystem,Q.reversedDepth),_frustum$1.intersectsBox(_))return!0}return!1}containsPoint(_,J){if(!J||!J.cameras||J.cameras.length===0)return!1;for(let Z=0;Z<J.cameras.length;Z++){const Q=J.cameras[Z];if(_projScreenMatrix$2.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$2,Q.coordinateSystem,Q.reversedDepth),_frustum$1.containsPoint(_))return!0}return!1}clone(){return new FrustumArray}}function ascIdSort(G,_){return G-_}function sortOpaque(G,_){return G.z-_.z}function sortTransparent(G,_){return _.z-G.z}class MultiDrawRenderList{constructor(){this.index=0,this.pool=[],this.list=[]}push(_,J,Z,Q){const ee=this.pool,te=this.list;this.index>=ee.length&&ee.push({start:-1,count:-1,z:-1,index:-1});const ne=ee[this.index];te.push(ne),this.index++,ne.start=_,ne.count=J,ne.z=Z,ne.index=Q}reset(){this.list.length=0,this.index=0}}const _matrix$1=new Matrix4,_whiteColor=new Color(1,1,1),_frustum=new Frustum,_frustumArray=new FrustumArray,_box$1=new Box3,_sphere$2=new Sphere$1,_vector$5=new Vector3,_forward$1=new Vector3,_temp=new Vector3,_renderList=new MultiDrawRenderList,_mesh=new Mesh,_batchIntersects=[];function copyAttributeData(G,_,J=0){const Z=_.itemSize;if(G.isInterleavedBufferAttribute||G.array.constructor!==_.array.constructor){const Q=G.count;for(let ee=0;ee<Q;ee++)for(let te=0;te<Z;te++)_.setComponent(ee+J,te,G.getComponent(ee,te))}else _.array.set(G.array,J*Z);_.needsUpdate=!0}function copyArrayContents(G,_){if(G.constructor!==_.constructor){const J=Math.min(G.length,_.length);for(let Z=0;Z<J;Z++)_[Z]=G[Z]}else{const J=Math.min(G.length,_.length);_.set(new G.constructor(G.buffer,0,J))}}class BatchedMesh extends Mesh{constructor(_,J,Z=J*2,Q){super(new BufferGeometry,Q),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=_,this._maxVertexCount=J,this._maxIndexCount=Z,this._multiDrawCounts=new Int32Array(_),this._multiDrawStarts=new Int32Array(_),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let _=Math.sqrt(this._maxInstanceCount*4);_=Math.ceil(_/4)*4,_=Math.max(_,4);const J=new Float32Array(_*_*4),Z=new DataTexture(J,_,_,RGBAFormat,FloatType);this._matricesTexture=Z}_initIndirectTexture(){let _=Math.sqrt(this._maxInstanceCount);_=Math.ceil(_);const J=new Uint32Array(_*_),Z=new DataTexture(J,_,_,RedIntegerFormat,UnsignedIntType);this._indirectTexture=Z}_initColorsTexture(){let _=Math.sqrt(this._maxInstanceCount);_=Math.ceil(_);const J=new Float32Array(_*_*4).fill(1),Z=new DataTexture(J,_,_,RGBAFormat,FloatType);Z.colorSpace=ColorManagement.workingColorSpace,this._colorsTexture=Z}_initializeGeometry(_){const J=this.geometry,Z=this._maxVertexCount,Q=this._maxIndexCount;if(this._geometryInitialized===!1){for(const ee in _.attributes){const te=_.getAttribute(ee),{array:ne,itemSize:ie,normalized:re}=te,oe=new ne.constructor(Z*ie),se=new BufferAttribute(oe,ie,re);J.setAttribute(ee,se)}if(_.getIndex()!==null){const ee=Z>65535?new Uint32Array(Q):new Uint16Array(Q);J.setIndex(new BufferAttribute(ee,1))}this._geometryInitialized=!0}}_validateGeometry(_){const J=this.geometry;if(!!_.getIndex()!=!!J.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const Z in J.attributes){if(!_.hasAttribute(Z))throw new Error(`THREE.BatchedMesh: Added geometry missing "${Z}". All geometries must have consistent attributes.`);const Q=_.getAttribute(Z),ee=J.getAttribute(Z);if(Q.itemSize!==ee.itemSize||Q.normalized!==ee.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(_){const J=this._instanceInfo;if(_<0||_>=J.length||J[_].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${_}. Instance is either out of range or has been deleted.`)}validateGeometryId(_){const J=this._geometryInfo;if(_<0||_>=J.length||J[_].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${_}. Geometry is either out of range or has been deleted.`)}setCustomSort(_){return this.customSort=_,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const _=this.boundingBox,J=this._instanceInfo;_.makeEmpty();for(let Z=0,Q=J.length;Z<Q;Z++){if(J[Z].active===!1)continue;const ee=J[Z].geometryIndex;this.getMatrixAt(Z,_matrix$1),this.getBoundingBoxAt(ee,_box$1).applyMatrix4(_matrix$1),_.union(_box$1)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere$1);const _=this.boundingSphere,J=this._instanceInfo;_.makeEmpty();for(let Z=0,Q=J.length;Z<Q;Z++){if(J[Z].active===!1)continue;const ee=J[Z].geometryIndex;this.getMatrixAt(Z,_matrix$1),this.getBoundingSphereAt(ee,_sphere$2).applyMatrix4(_matrix$1),_.union(_sphere$2)}}addInstance(_){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const Z={visible:!0,active:!0,geometryIndex:_};let Q=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(ascIdSort),Q=this._availableInstanceIds.shift(),this._instanceInfo[Q]=Z):(Q=this._instanceInfo.length,this._instanceInfo.push(Z));const ee=this._matricesTexture;_matrix$1.identity().toArray(ee.image.data,Q*16),ee.needsUpdate=!0;const te=this._colorsTexture;return te&&(_whiteColor.toArray(te.image.data,Q*4),te.needsUpdate=!0),this._visibilityChanged=!0,Q}addGeometry(_,J=-1,Z=-1){this._initializeGeometry(_),this._validateGeometry(_);const Q={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},ee=this._geometryInfo;Q.vertexStart=this._nextVertexStart,Q.reservedVertexCount=J===-1?_.getAttribute("position").count:J;const te=_.getIndex();if(te!==null&&(Q.indexStart=this._nextIndexStart,Q.reservedIndexCount=Z===-1?te.count:Z),Q.indexStart!==-1&&Q.indexStart+Q.reservedIndexCount>this._maxIndexCount||Q.vertexStart+Q.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let ie;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(ascIdSort),ie=this._availableGeometryIds.shift(),ee[ie]=Q):(ie=this._geometryCount,this._geometryCount++,ee.push(Q)),this.setGeometryAt(ie,_),this._nextIndexStart=Q.indexStart+Q.reservedIndexCount,this._nextVertexStart=Q.vertexStart+Q.reservedVertexCount,ie}setGeometryAt(_,J){if(_>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(J);const Z=this.geometry,Q=Z.getIndex()!==null,ee=Z.getIndex(),te=J.getIndex(),ne=this._geometryInfo[_];if(Q&&te.count>ne.reservedIndexCount||J.attributes.position.count>ne.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const ie=ne.vertexStart,re=ne.reservedVertexCount;ne.vertexCount=J.getAttribute("position").count;for(const oe in Z.attributes){const se=J.getAttribute(oe),ae=Z.getAttribute(oe);copyAttributeData(se,ae,ie);const ce=se.itemSize;for(let ue=se.count,de=re;ue<de;ue++){const me=ie+ue;for(let fe=0;fe<ce;fe++)ae.setComponent(me,fe,0)}ae.needsUpdate=!0,ae.addUpdateRange(ie*ce,re*ce)}if(Q){const oe=ne.indexStart,se=ne.reservedIndexCount;ne.indexCount=J.getIndex().count;for(let ae=0;ae<te.count;ae++)ee.setX(oe+ae,ie+te.getX(ae));for(let ae=te.count,ce=se;ae<ce;ae++)ee.setX(oe+ae,ie);ee.needsUpdate=!0,ee.addUpdateRange(oe,ne.reservedIndexCount)}return ne.start=Q?ne.indexStart:ne.vertexStart,ne.count=Q?ne.indexCount:ne.vertexCount,ne.boundingBox=null,J.boundingBox!==null&&(ne.boundingBox=J.boundingBox.clone()),ne.boundingSphere=null,J.boundingSphere!==null&&(ne.boundingSphere=J.boundingSphere.clone()),this._visibilityChanged=!0,_}deleteGeometry(_){const J=this._geometryInfo;if(_>=J.length||J[_].active===!1)return this;const Z=this._instanceInfo;for(let Q=0,ee=Z.length;Q<ee;Q++)Z[Q].active&&Z[Q].geometryIndex===_&&this.deleteInstance(Q);return J[_].active=!1,this._availableGeometryIds.push(_),this._visibilityChanged=!0,this}deleteInstance(_){return this.validateInstanceId(_),this._instanceInfo[_].active=!1,this._availableInstanceIds.push(_),this._visibilityChanged=!0,this}optimize(){let _=0,J=0;const Z=this._geometryInfo,Q=Z.map((te,ne)=>ne).sort((te,ne)=>Z[te].vertexStart-Z[ne].vertexStart),ee=this.geometry;for(let te=0,ne=Z.length;te<ne;te++){const ie=Q[te],re=Z[ie];if(re.active!==!1){if(ee.index!==null){if(re.indexStart!==J){const{indexStart:oe,vertexStart:se,reservedIndexCount:ae}=re,ce=ee.index,ue=ce.array,de=_-se;for(let me=oe;me<oe+ae;me++)ue[me]=ue[me]+de;ce.array.copyWithin(J,oe,oe+ae),ce.addUpdateRange(J,ae),re.indexStart=J}J+=re.reservedIndexCount}if(re.vertexStart!==_){const{vertexStart:oe,reservedVertexCount:se}=re,ae=ee.attributes;for(const ce in ae){const ue=ae[ce],{array:de,itemSize:me}=ue;de.copyWithin(_*me,oe*me,(oe+se)*me),ue.addUpdateRange(_*me,se*me)}re.vertexStart=_}_+=re.reservedVertexCount,re.start=ee.index?re.indexStart:re.vertexStart,this._nextIndexStart=ee.index?re.indexStart+re.reservedIndexCount:0,this._nextVertexStart=re.vertexStart+re.reservedVertexCount}}return this}getBoundingBoxAt(_,J){if(_>=this._geometryCount)return null;const Z=this.geometry,Q=this._geometryInfo[_];if(Q.boundingBox===null){const ee=new Box3,te=Z.index,ne=Z.attributes.position;for(let ie=Q.start,re=Q.start+Q.count;ie<re;ie++){let oe=ie;te&&(oe=te.getX(oe)),ee.expandByPoint(_vector$5.fromBufferAttribute(ne,oe))}Q.boundingBox=ee}return J.copy(Q.boundingBox),J}getBoundingSphereAt(_,J){if(_>=this._geometryCount)return null;const Z=this.geometry,Q=this._geometryInfo[_];if(Q.boundingSphere===null){const ee=new Sphere$1;this.getBoundingBoxAt(_,_box$1),_box$1.getCenter(ee.center);const te=Z.index,ne=Z.attributes.position;let ie=0;for(let re=Q.start,oe=Q.start+Q.count;re<oe;re++){let se=re;te&&(se=te.getX(se)),_vector$5.fromBufferAttribute(ne,se),ie=Math.max(ie,ee.center.distanceToSquared(_vector$5))}ee.radius=Math.sqrt(ie),Q.boundingSphere=ee}return J.copy(Q.boundingSphere),J}setMatrixAt(_,J){this.validateInstanceId(_);const Z=this._matricesTexture,Q=this._matricesTexture.image.data;return J.toArray(Q,_*16),Z.needsUpdate=!0,this}getMatrixAt(_,J){return this.validateInstanceId(_),J.fromArray(this._matricesTexture.image.data,_*16)}setColorAt(_,J){return this.validateInstanceId(_),this._colorsTexture===null&&this._initColorsTexture(),J.toArray(this._colorsTexture.image.data,_*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(_,J){return this.validateInstanceId(_),J.fromArray(this._colorsTexture.image.data,_*4)}setVisibleAt(_,J){return this.validateInstanceId(_),this._instanceInfo[_].visible===J?this:(this._instanceInfo[_].visible=J,this._visibilityChanged=!0,this)}getVisibleAt(_){return this.validateInstanceId(_),this._instanceInfo[_].visible}setGeometryIdAt(_,J){return this.validateInstanceId(_),this.validateGeometryId(J),this._instanceInfo[_].geometryIndex=J,this}getGeometryIdAt(_){return this.validateInstanceId(_),this._instanceInfo[_].geometryIndex}getGeometryRangeAt(_,J={}){this.validateGeometryId(_);const Z=this._geometryInfo[_];return J.vertexStart=Z.vertexStart,J.vertexCount=Z.vertexCount,J.reservedVertexCount=Z.reservedVertexCount,J.indexStart=Z.indexStart,J.indexCount=Z.indexCount,J.reservedIndexCount=Z.reservedIndexCount,J.start=Z.start,J.count=Z.count,J}setInstanceCount(_){const J=this._availableInstanceIds,Z=this._instanceInfo;for(J.sort(ascIdSort);J[J.length-1]===Z.length-1;)Z.pop(),J.pop();if(_<Z.length)throw new Error(`BatchedMesh: Instance ids outside the range ${_} are being used. Cannot shrink instance count.`);const Q=new Int32Array(_),ee=new Int32Array(_);copyArrayContents(this._multiDrawCounts,Q),copyArrayContents(this._multiDrawStarts,ee),this._multiDrawCounts=Q,this._multiDrawStarts=ee,this._maxInstanceCount=_;const te=this._indirectTexture,ne=this._matricesTexture,ie=this._colorsTexture;te.dispose(),this._initIndirectTexture(),copyArrayContents(te.image.data,this._indirectTexture.image.data),ne.dispose(),this._initMatricesTexture(),copyArrayContents(ne.image.data,this._matricesTexture.image.data),ie&&(ie.dispose(),this._initColorsTexture(),copyArrayContents(ie.image.data,this._colorsTexture.image.data))}setGeometrySize(_,J){const Z=[...this._geometryInfo].filter(ne=>ne.active);if(Math.max(...Z.map(ne=>ne.vertexStart+ne.reservedVertexCount))>_)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${J}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...Z.map(ie=>ie.indexStart+ie.reservedIndexCount))>J)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${J}. Cannot shrink further.`);const ee=this.geometry;ee.dispose(),this._maxVertexCount=_,this._maxIndexCount=J,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new BufferGeometry,this._initializeGeometry(ee));const te=this.geometry;ee.index&&copyArrayContents(ee.index.array,te.index.array);for(const ne in ee.attributes)copyArrayContents(ee.attributes[ne].array,te.attributes[ne].array)}raycast(_,J){const Z=this._instanceInfo,Q=this._geometryInfo,ee=this.matrixWorld,te=this.geometry;_mesh.material=this.material,_mesh.geometry.index=te.index,_mesh.geometry.attributes=te.attributes,_mesh.geometry.boundingBox===null&&(_mesh.geometry.boundingBox=new Box3),_mesh.geometry.boundingSphere===null&&(_mesh.geometry.boundingSphere=new Sphere$1);for(let ne=0,ie=Z.length;ne<ie;ne++){if(!Z[ne].visible||!Z[ne].active)continue;const re=Z[ne].geometryIndex,oe=Q[re];_mesh.geometry.setDrawRange(oe.start,oe.count),this.getMatrixAt(ne,_mesh.matrixWorld).premultiply(ee),this.getBoundingBoxAt(re,_mesh.geometry.boundingBox),this.getBoundingSphereAt(re,_mesh.geometry.boundingSphere),_mesh.raycast(_,_batchIntersects);for(let se=0,ae=_batchIntersects.length;se<ae;se++){const ce=_batchIntersects[se];ce.object=this,ce.batchId=ne,J.push(ce)}_batchIntersects.length=0}_mesh.material=null,_mesh.geometry.index=null,_mesh.geometry.attributes={},_mesh.geometry.setDrawRange(0,1/0)}copy(_){return super.copy(_),this.geometry=_.geometry.clone(),this.perObjectFrustumCulled=_.perObjectFrustumCulled,this.sortObjects=_.sortObjects,this.boundingBox=_.boundingBox!==null?_.boundingBox.clone():null,this.boundingSphere=_.boundingSphere!==null?_.boundingSphere.clone():null,this._geometryInfo=_._geometryInfo.map(J=>({...J,boundingBox:J.boundingBox!==null?J.boundingBox.clone():null,boundingSphere:J.boundingSphere!==null?J.boundingSphere.clone():null})),this._instanceInfo=_._instanceInfo.map(J=>({...J})),this._availableInstanceIds=_._availableInstanceIds.slice(),this._availableGeometryIds=_._availableGeometryIds.slice(),this._nextIndexStart=_._nextIndexStart,this._nextVertexStart=_._nextVertexStart,this._geometryCount=_._geometryCount,this._maxInstanceCount=_._maxInstanceCount,this._maxVertexCount=_._maxVertexCount,this._maxIndexCount=_._maxIndexCount,this._geometryInitialized=_._geometryInitialized,this._multiDrawCounts=_._multiDrawCounts.slice(),this._multiDrawStarts=_._multiDrawStarts.slice(),this._indirectTexture=_._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=_._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=_._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(_,J,Z,Q,ee){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const te=Q.getIndex(),ne=te===null?1:te.array.BYTES_PER_ELEMENT,ie=this._instanceInfo,re=this._multiDrawStarts,oe=this._multiDrawCounts,se=this._geometryInfo,ae=this.perObjectFrustumCulled,ce=this._indirectTexture,ue=ce.image.data,de=Z.isArrayCamera?_frustumArray:_frustum;ae&&!Z.isArrayCamera&&(_matrix$1.multiplyMatrices(Z.projectionMatrix,Z.matrixWorldInverse).multiply(this.matrixWorld),_frustum.setFromProjectionMatrix(_matrix$1,Z.coordinateSystem,Z.reversedDepth));let me=0;if(this.sortObjects){_matrix$1.copy(this.matrixWorld).invert(),_vector$5.setFromMatrixPosition(Z.matrixWorld).applyMatrix4(_matrix$1),_forward$1.set(0,0,-1).transformDirection(Z.matrixWorld).transformDirection(_matrix$1);for(let ye=0,be=ie.length;ye<be;ye++)if(ie[ye].visible&&ie[ye].active){const Se=ie[ye].geometryIndex;this.getMatrixAt(ye,_matrix$1),this.getBoundingSphereAt(Se,_sphere$2).applyMatrix4(_matrix$1);let Ce=!1;if(ae&&(Ce=!de.intersectsSphere(_sphere$2,Z)),!Ce){const Me=se[Se],Re=_temp.subVectors(_sphere$2.center,_vector$5).dot(_forward$1);_renderList.push(Me.start,Me.count,Re,ye)}}const fe=_renderList.list,_e=this.customSort;_e===null?fe.sort(ee.transparent?sortTransparent:sortOpaque):_e.call(this,fe,Z);for(let ye=0,be=fe.length;ye<be;ye++){const Se=fe[ye];re[me]=Se.start*ne,oe[me]=Se.count,ue[me]=Se.index,me++}_renderList.reset()}else for(let fe=0,_e=ie.length;fe<_e;fe++)if(ie[fe].visible&&ie[fe].active){const ye=ie[fe].geometryIndex;let be=!1;if(ae&&(this.getMatrixAt(fe,_matrix$1),this.getBoundingSphereAt(ye,_sphere$2).applyMatrix4(_matrix$1),be=!de.intersectsSphere(_sphere$2,Z)),!be){const Se=se[ye];re[me]=Se.start*ne,oe[me]=Se.count,ue[me]=fe,me++}}ce.needsUpdate=!0,this._multiDrawCount=me,this._visibilityChanged=!1}onBeforeShadow(_,J,Z,Q,ee,te){this.onBeforeRender(_,null,Q,ee,te)}}class LineBasicMaterial extends Material{constructor(_){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.linewidth=_.linewidth,this.linecap=_.linecap,this.linejoin=_.linejoin,this.fog=_.fog,this}}const _vStart=new Vector3,_vEnd=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1$1=new Ray,_sphere$1=new Sphere$1,_intersectPointOnRay=new Vector3,_intersectPointOnSegment=new Vector3;class Line extends Object3D{constructor(_=new BufferGeometry,J=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=_,this.material=J,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(_,J){return super.copy(_,J),this.material=Array.isArray(_.material)?_.material.slice():_.material,this.geometry=_.geometry,this}computeLineDistances(){const _=this.geometry;if(_.index===null){const J=_.attributes.position,Z=[0];for(let Q=1,ee=J.count;Q<ee;Q++)_vStart.fromBufferAttribute(J,Q-1),_vEnd.fromBufferAttribute(J,Q),Z[Q]=Z[Q-1],Z[Q]+=_vStart.distanceTo(_vEnd);_.setAttribute("lineDistance",new Float32BufferAttribute(Z,1))}else warn("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(_,J){const Z=this.geometry,Q=this.matrixWorld,ee=_.params.Line.threshold,te=Z.drawRange;if(Z.boundingSphere===null&&Z.computeBoundingSphere(),_sphere$1.copy(Z.boundingSphere),_sphere$1.applyMatrix4(Q),_sphere$1.radius+=ee,_.ray.intersectsSphere(_sphere$1)===!1)return;_inverseMatrix$1.copy(Q).invert(),_ray$1$1.copy(_.ray).applyMatrix4(_inverseMatrix$1);const ne=ee/((this.scale.x+this.scale.y+this.scale.z)/3),ie=ne*ne,re=this.isLineSegments?2:1,oe=Z.index,ae=Z.attributes.position;if(oe!==null){const ce=Math.max(0,te.start),ue=Math.min(oe.count,te.start+te.count);for(let de=ce,me=ue-1;de<me;de+=re){const fe=oe.getX(de),_e=oe.getX(de+1),ye=checkIntersection(this,_,_ray$1$1,ie,fe,_e,de);ye&&J.push(ye)}if(this.isLineLoop){const de=oe.getX(ue-1),me=oe.getX(ce),fe=checkIntersection(this,_,_ray$1$1,ie,de,me,ue-1);fe&&J.push(fe)}}else{const ce=Math.max(0,te.start),ue=Math.min(ae.count,te.start+te.count);for(let de=ce,me=ue-1;de<me;de+=re){const fe=checkIntersection(this,_,_ray$1$1,ie,de,de+1,de);fe&&J.push(fe)}if(this.isLineLoop){const de=checkIntersection(this,_,_ray$1$1,ie,ue-1,ce,ue-1);de&&J.push(de)}}}updateMorphTargets(){const J=this.geometry.morphAttributes,Z=Object.keys(J);if(Z.length>0){const Q=J[Z[0]];if(Q!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let ee=0,te=Q.length;ee<te;ee++){const ne=Q[ee].name||String(ee);this.morphTargetInfluences.push(0),this.morphTargetDictionary[ne]=ee}}}}}function checkIntersection(G,_,J,Z,Q,ee,te){const ne=G.geometry.attributes.position;if(_vStart.fromBufferAttribute(ne,Q),_vEnd.fromBufferAttribute(ne,ee),J.distanceSqToSegment(_vStart,_vEnd,_intersectPointOnRay,_intersectPointOnSegment)>Z)return;_intersectPointOnRay.applyMatrix4(G.matrixWorld);const re=_.ray.origin.distanceTo(_intersectPointOnRay);if(!(re<_.near||re>_.far))return{distance:re,point:_intersectPointOnSegment.clone().applyMatrix4(G.matrixWorld),index:te,face:null,faceIndex:null,barycoord:null,object:G}}const _start=new Vector3,_end=new Vector3;class LineSegments extends Line{constructor(_,J){super(_,J),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const _=this.geometry;if(_.index===null){const J=_.attributes.position,Z=[];for(let Q=0,ee=J.count;Q<ee;Q+=2)_start.fromBufferAttribute(J,Q),_end.fromBufferAttribute(J,Q+1),Z[Q]=Q===0?0:Z[Q-1],Z[Q+1]=Z[Q]+_start.distanceTo(_end);_.setAttribute("lineDistance",new Float32BufferAttribute(Z,1))}else warn("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LineLoop extends Line{constructor(_,J){super(_,J),this.isLineLoop=!0,this.type="LineLoop"}}class PointsMaterial extends Material{constructor(_){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.alphaMap=_.alphaMap,this.size=_.size,this.sizeAttenuation=_.sizeAttenuation,this.fog=_.fog,this}}const _inverseMatrix$4=new Matrix4,_ray$4=new Ray,_sphere$7=new Sphere$1,_position$2=new Vector3;let Points$1=class extends Object3D{constructor(_=new BufferGeometry,J=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=_,this.material=J,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(_,J){return super.copy(_,J),this.material=Array.isArray(_.material)?_.material.slice():_.material,this.geometry=_.geometry,this}raycast(_,J){const Z=this.geometry,Q=this.matrixWorld,ee=_.params.Points.threshold,te=Z.drawRange;if(Z.boundingSphere===null&&Z.computeBoundingSphere(),_sphere$7.copy(Z.boundingSphere),_sphere$7.applyMatrix4(Q),_sphere$7.radius+=ee,_.ray.intersectsSphere(_sphere$7)===!1)return;_inverseMatrix$4.copy(Q).invert(),_ray$4.copy(_.ray).applyMatrix4(_inverseMatrix$4);const ne=ee/((this.scale.x+this.scale.y+this.scale.z)/3),ie=ne*ne,re=Z.index,se=Z.attributes.position;if(re!==null){const ae=Math.max(0,te.start),ce=Math.min(re.count,te.start+te.count);for(let ue=ae,de=ce;ue<de;ue++){const me=re.getX(ue);_position$2.fromBufferAttribute(se,me),testPoint(_position$2,me,ie,Q,_,J,this)}}else{const ae=Math.max(0,te.start),ce=Math.min(se.count,te.start+te.count);for(let ue=ae,de=ce;ue<de;ue++)_position$2.fromBufferAttribute(se,ue),testPoint(_position$2,ue,ie,Q,_,J,this)}}updateMorphTargets(){const J=this.geometry.morphAttributes,Z=Object.keys(J);if(Z.length>0){const Q=J[Z[0]];if(Q!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let ee=0,te=Q.length;ee<te;ee++){const ne=Q[ee].name||String(ee);this.morphTargetInfluences.push(0),this.morphTargetDictionary[ne]=ee}}}}};function testPoint(G,_,J,Z,Q,ee,te){const ne=_ray$4.distanceSqToPoint(G);if(ne<J){const ie=new Vector3;_ray$4.closestPointToPoint(G,ie),ie.applyMatrix4(Z);const re=Q.ray.origin.distanceTo(ie);if(re<Q.near||re>Q.far)return;ee.push({distance:re,distanceToRay:Math.sqrt(ne),point:ie,index:_,face:null,faceIndex:null,barycoord:null,object:te})}}class VideoTexture extends Texture{constructor(_,J,Z,Q,ee=LinearFilter,te=LinearFilter,ne,ie,re){super(_,J,Z,Q,ee,te,ne,ie,re),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const oe=this;function se(){oe.needsUpdate=!0,oe._requestVideoFrameCallbackId=_.requestVideoFrameCallback(se)}"requestVideoFrameCallback"in _&&(this._requestVideoFrameCallbackId=_.requestVideoFrameCallback(se))}clone(){return new this.constructor(this.image).copy(this)}update(){const _=this.image;"requestVideoFrameCallback"in _===!1&&_.readyState>=_.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class VideoFrameTexture extends VideoTexture{constructor(_,J,Z,Q,ee,te,ne,ie){super({},_,J,Z,Q,ee,te,ne,ie),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(_){this.image=_,this.needsUpdate=!0}}class FramebufferTexture extends Texture{constructor(_,J){super({width:_,height:J}),this.isFramebufferTexture=!0,this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.generateMipmaps=!1,this.needsUpdate=!0}}class CompressedTexture extends Texture{constructor(_,J,Z,Q,ee,te,ne,ie,re,oe,se,ae){super(null,te,ne,ie,re,oe,Q,ee,se,ae),this.isCompressedTexture=!0,this.image={width:J,height:Z},this.mipmaps=_,this.flipY=!1,this.generateMipmaps=!1}}class CompressedArrayTexture extends CompressedTexture{constructor(_,J,Z,Q,ee,te){super(_,J,Z,ee,te),this.isCompressedArrayTexture=!0,this.image.depth=Q,this.wrapR=ClampToEdgeWrapping,this.layerUpdates=new Set}addLayerUpdate(_){this.layerUpdates.add(_)}clearLayerUpdates(){this.layerUpdates.clear()}}class CompressedCubeTexture extends CompressedTexture{constructor(_,J,Z){super(void 0,_[0].width,_[0].height,J,Z,CubeReflectionMapping),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=_}}class CanvasTexture extends Texture{constructor(_,J,Z,Q,ee,te,ne,ie,re){super(_,J,Z,Q,ee,te,ne,ie,re),this.isCanvasTexture=!0,this.needsUpdate=!0}}class DepthTexture extends Texture{constructor(_,J,Z=UnsignedIntType,Q,ee,te,ne=NearestFilter,ie=NearestFilter,re,oe=DepthFormat,se=1){if(oe!==DepthFormat&&oe!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const ae={width:_,height:J,depth:se};super(ae,Q,ee,te,ne,ie,oe,Z,re),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(_){return super.copy(_),this.source=new Source(Object.assign({},_.image)),this.compareFunction=_.compareFunction,this}toJSON(_){const J=super.toJSON(_);return this.compareFunction!==null&&(J.compareFunction=this.compareFunction),J}}class ExternalTexture extends Texture{constructor(_=null){super(),this.sourceTexture=_,this.isExternalTexture=!0}copy(_){return super.copy(_),this.sourceTexture=_.sourceTexture,this}}class CapsuleGeometry extends BufferGeometry{constructor(_=1,J=1,Z=4,Q=8,ee=1){super(),this.type="CapsuleGeometry",this.parameters={radius:_,height:J,capSegments:Z,radialSegments:Q,heightSegments:ee},J=Math.max(0,J),Z=Math.max(1,Math.floor(Z)),Q=Math.max(3,Math.floor(Q)),ee=Math.max(1,Math.floor(ee));const te=[],ne=[],ie=[],re=[],oe=J/2,se=Math.PI/2*_,ae=J,ce=2*se+ae,ue=Z*2+ee,de=Q+1,me=new Vector3,fe=new Vector3;for(let _e=0;_e<=ue;_e++){let ye=0,be=0,Se=0,Ce=0;if(_e<=Z){const Te=_e/Z,Ee=Te*Math.PI/2;be=-oe-_*Math.cos(Ee),Se=_*Math.sin(Ee),Ce=-_*Math.cos(Ee),ye=Te*se}else if(_e<=Z+ee){const Te=(_e-Z)/ee;be=-oe+Te*J,Se=_,Ce=0,ye=se+Te*ae}else{const Te=(_e-Z-ee)/Z,Ee=Te*Math.PI/2;be=oe+_*Math.sin(Ee),Se=_*Math.cos(Ee),Ce=_*Math.sin(Ee),ye=se+ae+Te*se}const Me=Math.max(0,Math.min(1,ye/ce));let Re=0;_e===0?Re=.5/Q:_e===ue&&(Re=-.5/Q);for(let Te=0;Te<=Q;Te++){const Ee=Te/Q,De=Ee*Math.PI*2,Le=Math.sin(De),Ue=Math.cos(De);fe.x=-Se*Ue,fe.y=be,fe.z=Se*Le,ne.push(fe.x,fe.y,fe.z),me.set(-Se*Ue,Ce,Se*Le),me.normalize(),ie.push(me.x,me.y,me.z),re.push(Ee+Re,Me)}if(_e>0){const Te=(_e-1)*de;for(let Ee=0;Ee<Q;Ee++){const De=Te+Ee,Le=Te+Ee+1,Ue=_e*de+Ee,Ge=_e*de+Ee+1;te.push(De,Le,Ue),te.push(Le,Ge,Ue)}}}this.setIndex(te),this.setAttribute("position",new Float32BufferAttribute(ne,3)),this.setAttribute("normal",new Float32BufferAttribute(ie,3)),this.setAttribute("uv",new Float32BufferAttribute(re,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new CapsuleGeometry(_.radius,_.height,_.capSegments,_.radialSegments,_.heightSegments)}}class CircleGeometry extends BufferGeometry{constructor(_=1,J=32,Z=0,Q=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:_,segments:J,thetaStart:Z,thetaLength:Q},J=Math.max(3,J);const ee=[],te=[],ne=[],ie=[],re=new Vector3,oe=new Vector2;te.push(0,0,0),ne.push(0,0,1),ie.push(.5,.5);for(let se=0,ae=3;se<=J;se++,ae+=3){const ce=Z+se/J*Q;re.x=_*Math.cos(ce),re.y=_*Math.sin(ce),te.push(re.x,re.y,re.z),ne.push(0,0,1),oe.x=(te[ae]/_+1)/2,oe.y=(te[ae+1]/_+1)/2,ie.push(oe.x,oe.y)}for(let se=1;se<=J;se++)ee.push(se,se+1,0);this.setIndex(ee),this.setAttribute("position",new Float32BufferAttribute(te,3)),this.setAttribute("normal",new Float32BufferAttribute(ne,3)),this.setAttribute("uv",new Float32BufferAttribute(ie,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new CircleGeometry(_.radius,_.segments,_.thetaStart,_.thetaLength)}}class CylinderGeometry extends BufferGeometry{constructor(_=1,J=1,Z=1,Q=32,ee=1,te=!1,ne=0,ie=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:_,radiusBottom:J,height:Z,radialSegments:Q,heightSegments:ee,openEnded:te,thetaStart:ne,thetaLength:ie};const re=this;Q=Math.floor(Q),ee=Math.floor(ee);const oe=[],se=[],ae=[],ce=[];let ue=0;const de=[],me=Z/2;let fe=0;_e(),te===!1&&(_>0&&ye(!0),J>0&&ye(!1)),this.setIndex(oe),this.setAttribute("position",new Float32BufferAttribute(se,3)),this.setAttribute("normal",new Float32BufferAttribute(ae,3)),this.setAttribute("uv",new Float32BufferAttribute(ce,2));function _e(){const be=new Vector3,Se=new Vector3;let Ce=0;const Me=(J-_)/Z;for(let Re=0;Re<=ee;Re++){const Te=[],Ee=Re/ee,De=Ee*(J-_)+_;for(let Le=0;Le<=Q;Le++){const Ue=Le/Q,Ge=Ue*ie+ne,Ye=Math.sin(Ge),ke=Math.cos(Ge);Se.x=De*Ye,Se.y=-Ee*Z+me,Se.z=De*ke,se.push(Se.x,Se.y,Se.z),be.set(Ye,Me,ke).normalize(),ae.push(be.x,be.y,be.z),ce.push(Ue,1-Ee),Te.push(ue++)}de.push(Te)}for(let Re=0;Re<Q;Re++)for(let Te=0;Te<ee;Te++){const Ee=de[Te][Re],De=de[Te+1][Re],Le=de[Te+1][Re+1],Ue=de[Te][Re+1];(_>0||Te!==0)&&(oe.push(Ee,De,Ue),Ce+=3),(J>0||Te!==ee-1)&&(oe.push(De,Le,Ue),Ce+=3)}re.addGroup(fe,Ce,0),fe+=Ce}function ye(be){const Se=ue,Ce=new Vector2,Me=new Vector3;let Re=0;const Te=be===!0?_:J,Ee=be===!0?1:-1;for(let Le=1;Le<=Q;Le++)se.push(0,me*Ee,0),ae.push(0,Ee,0),ce.push(.5,.5),ue++;const De=ue;for(let Le=0;Le<=Q;Le++){const Ge=Le/Q*ie+ne,Ye=Math.cos(Ge),ke=Math.sin(Ge);Me.x=Te*ke,Me.y=me*Ee,Me.z=Te*Ye,se.push(Me.x,Me.y,Me.z),ae.push(0,Ee,0),Ce.x=Ye*.5+.5,Ce.y=ke*.5*Ee+.5,ce.push(Ce.x,Ce.y),ue++}for(let Le=0;Le<Q;Le++){const Ue=Se+Le,Ge=De+Le;be===!0?oe.push(Ge,Ge+1,Ue):oe.push(Ge+1,Ge,Ue),Re+=3}re.addGroup(fe,Re,be===!0?1:2),fe+=Re}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new CylinderGeometry(_.radiusTop,_.radiusBottom,_.height,_.radialSegments,_.heightSegments,_.openEnded,_.thetaStart,_.thetaLength)}}class ConeGeometry extends CylinderGeometry{constructor(_=1,J=1,Z=32,Q=1,ee=!1,te=0,ne=Math.PI*2){super(0,_,J,Z,Q,ee,te,ne),this.type="ConeGeometry",this.parameters={radius:_,height:J,radialSegments:Z,heightSegments:Q,openEnded:ee,thetaStart:te,thetaLength:ne}}static fromJSON(_){return new ConeGeometry(_.radius,_.height,_.radialSegments,_.heightSegments,_.openEnded,_.thetaStart,_.thetaLength)}}class PolyhedronGeometry extends BufferGeometry{constructor(_=[],J=[],Z=1,Q=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:_,indices:J,radius:Z,detail:Q};const ee=[],te=[];ne(Q),re(Z),oe(),this.setAttribute("position",new Float32BufferAttribute(ee,3)),this.setAttribute("normal",new Float32BufferAttribute(ee.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(te,2)),Q===0?this.computeVertexNormals():this.normalizeNormals();function ne(_e){const ye=new Vector3,be=new Vector3,Se=new Vector3;for(let Ce=0;Ce<J.length;Ce+=3)ce(J[Ce+0],ye),ce(J[Ce+1],be),ce(J[Ce+2],Se),ie(ye,be,Se,_e)}function ie(_e,ye,be,Se){const Ce=Se+1,Me=[];for(let Re=0;Re<=Ce;Re++){Me[Re]=[];const Te=_e.clone().lerp(be,Re/Ce),Ee=ye.clone().lerp(be,Re/Ce),De=Ce-Re;for(let Le=0;Le<=De;Le++)Le===0&&Re===Ce?Me[Re][Le]=Te:Me[Re][Le]=Te.clone().lerp(Ee,Le/De)}for(let Re=0;Re<Ce;Re++)for(let Te=0;Te<2*(Ce-Re)-1;Te++){const Ee=Math.floor(Te/2);Te%2===0?(ae(Me[Re][Ee+1]),ae(Me[Re+1][Ee]),ae(Me[Re][Ee])):(ae(Me[Re][Ee+1]),ae(Me[Re+1][Ee+1]),ae(Me[Re+1][Ee]))}}function re(_e){const ye=new Vector3;for(let be=0;be<ee.length;be+=3)ye.x=ee[be+0],ye.y=ee[be+1],ye.z=ee[be+2],ye.normalize().multiplyScalar(_e),ee[be+0]=ye.x,ee[be+1]=ye.y,ee[be+2]=ye.z}function oe(){const _e=new Vector3;for(let ye=0;ye<ee.length;ye+=3){_e.x=ee[ye+0],_e.y=ee[ye+1],_e.z=ee[ye+2];const be=me(_e)/2/Math.PI+.5,Se=fe(_e)/Math.PI+.5;te.push(be,1-Se)}ue(),se()}function se(){for(let _e=0;_e<te.length;_e+=6){const ye=te[_e+0],be=te[_e+2],Se=te[_e+4],Ce=Math.max(ye,be,Se),Me=Math.min(ye,be,Se);Ce>.9&&Me<.1&&(ye<.2&&(te[_e+0]+=1),be<.2&&(te[_e+2]+=1),Se<.2&&(te[_e+4]+=1))}}function ae(_e){ee.push(_e.x,_e.y,_e.z)}function ce(_e,ye){const be=_e*3;ye.x=_[be+0],ye.y=_[be+1],ye.z=_[be+2]}function ue(){const _e=new Vector3,ye=new Vector3,be=new Vector3,Se=new Vector3,Ce=new Vector2,Me=new Vector2,Re=new Vector2;for(let Te=0,Ee=0;Te<ee.length;Te+=9,Ee+=6){_e.set(ee[Te+0],ee[Te+1],ee[Te+2]),ye.set(ee[Te+3],ee[Te+4],ee[Te+5]),be.set(ee[Te+6],ee[Te+7],ee[Te+8]),Ce.set(te[Ee+0],te[Ee+1]),Me.set(te[Ee+2],te[Ee+3]),Re.set(te[Ee+4],te[Ee+5]),Se.copy(_e).add(ye).add(be).divideScalar(3);const De=me(Se);de(Ce,Ee+0,_e,De),de(Me,Ee+2,ye,De),de(Re,Ee+4,be,De)}}function de(_e,ye,be,Se){Se<0&&_e.x===1&&(te[ye]=_e.x-1),be.x===0&&be.z===0&&(te[ye]=Se/2/Math.PI+.5)}function me(_e){return Math.atan2(_e.z,-_e.x)}function fe(_e){return Math.atan2(-_e.y,Math.sqrt(_e.x*_e.x+_e.z*_e.z))}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new PolyhedronGeometry(_.vertices,_.indices,_.radius,_.details)}}class DodecahedronGeometry extends PolyhedronGeometry{constructor(_=1,J=0){const Z=(1+Math.sqrt(5))/2,Q=1/Z,ee=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-Q,-Z,0,-Q,Z,0,Q,-Z,0,Q,Z,-Q,-Z,0,-Q,Z,0,Q,-Z,0,Q,Z,0,-Z,0,-Q,Z,0,-Q,-Z,0,Q,Z,0,Q],te=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(ee,te,_,J),this.type="DodecahedronGeometry",this.parameters={radius:_,detail:J}}static fromJSON(_){return new DodecahedronGeometry(_.radius,_.detail)}}const _v0$3=new Vector3,_v1$1=new Vector3,_normal=new Vector3,_triangle$1=new Triangle;class EdgesGeometry extends BufferGeometry{constructor(_=null,J=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:_,thresholdAngle:J},_!==null){const Q=Math.pow(10,4),ee=Math.cos(DEG2RAD*J),te=_.getIndex(),ne=_.getAttribute("position"),ie=te?te.count:ne.count,re=[0,0,0],oe=["a","b","c"],se=new Array(3),ae={},ce=[];for(let ue=0;ue<ie;ue+=3){te?(re[0]=te.getX(ue),re[1]=te.getX(ue+1),re[2]=te.getX(ue+2)):(re[0]=ue,re[1]=ue+1,re[2]=ue+2);const{a:de,b:me,c:fe}=_triangle$1;if(de.fromBufferAttribute(ne,re[0]),me.fromBufferAttribute(ne,re[1]),fe.fromBufferAttribute(ne,re[2]),_triangle$1.getNormal(_normal),se[0]=`${Math.round(de.x*Q)},${Math.round(de.y*Q)},${Math.round(de.z*Q)}`,se[1]=`${Math.round(me.x*Q)},${Math.round(me.y*Q)},${Math.round(me.z*Q)}`,se[2]=`${Math.round(fe.x*Q)},${Math.round(fe.y*Q)},${Math.round(fe.z*Q)}`,!(se[0]===se[1]||se[1]===se[2]||se[2]===se[0]))for(let _e=0;_e<3;_e++){const ye=(_e+1)%3,be=se[_e],Se=se[ye],Ce=_triangle$1[oe[_e]],Me=_triangle$1[oe[ye]],Re=`${be}_${Se}`,Te=`${Se}_${be}`;Te in ae&&ae[Te]?(_normal.dot(ae[Te].normal)<=ee&&(ce.push(Ce.x,Ce.y,Ce.z),ce.push(Me.x,Me.y,Me.z)),ae[Te]=null):Re in ae||(ae[Re]={index0:re[_e],index1:re[ye],normal:_normal.clone()})}}for(const ue in ae)if(ae[ue]){const{index0:de,index1:me}=ae[ue];_v0$3.fromBufferAttribute(ne,de),_v1$1.fromBufferAttribute(ne,me),ce.push(_v0$3.x,_v0$3.y,_v0$3.z),ce.push(_v1$1.x,_v1$1.y,_v1$1.z)}this.setAttribute("position",new Float32BufferAttribute(ce,3))}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}}class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){warn("Curve: .getPoint() not implemented.")}getPointAt(_,J){const Z=this.getUtoTmapping(_);return this.getPoint(Z,J)}getPoints(_=5){const J=[];for(let Z=0;Z<=_;Z++)J.push(this.getPoint(Z/_));return J}getSpacedPoints(_=5){const J=[];for(let Z=0;Z<=_;Z++)J.push(this.getPointAt(Z/_));return J}getLength(){const _=this.getLengths();return _[_.length-1]}getLengths(_=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===_+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const J=[];let Z,Q=this.getPoint(0),ee=0;J.push(0);for(let te=1;te<=_;te++)Z=this.getPoint(te/_),ee+=Z.distanceTo(Q),J.push(ee),Q=Z;return this.cacheArcLengths=J,J}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(_,J=null){const Z=this.getLengths();let Q=0;const ee=Z.length;let te;J?te=J:te=_*Z[ee-1];let ne=0,ie=ee-1,re;for(;ne<=ie;)if(Q=Math.floor(ne+(ie-ne)/2),re=Z[Q]-te,re<0)ne=Q+1;else if(re>0)ie=Q-1;else{ie=Q;break}if(Q=ie,Z[Q]===te)return Q/(ee-1);const oe=Z[Q],ae=Z[Q+1]-oe,ce=(te-oe)/ae;return(Q+ce)/(ee-1)}getTangent(_,J){let Q=_-1e-4,ee=_+1e-4;Q<0&&(Q=0),ee>1&&(ee=1);const te=this.getPoint(Q),ne=this.getPoint(ee),ie=J||(te.isVector2?new Vector2:new Vector3);return ie.copy(ne).sub(te).normalize(),ie}getTangentAt(_,J){const Z=this.getUtoTmapping(_);return this.getTangent(Z,J)}computeFrenetFrames(_,J=!1){const Z=new Vector3,Q=[],ee=[],te=[],ne=new Vector3,ie=new Matrix4;for(let ce=0;ce<=_;ce++){const ue=ce/_;Q[ce]=this.getTangentAt(ue,new Vector3)}ee[0]=new Vector3,te[0]=new Vector3;let re=Number.MAX_VALUE;const oe=Math.abs(Q[0].x),se=Math.abs(Q[0].y),ae=Math.abs(Q[0].z);oe<=re&&(re=oe,Z.set(1,0,0)),se<=re&&(re=se,Z.set(0,1,0)),ae<=re&&Z.set(0,0,1),ne.crossVectors(Q[0],Z).normalize(),ee[0].crossVectors(Q[0],ne),te[0].crossVectors(Q[0],ee[0]);for(let ce=1;ce<=_;ce++){if(ee[ce]=ee[ce-1].clone(),te[ce]=te[ce-1].clone(),ne.crossVectors(Q[ce-1],Q[ce]),ne.length()>Number.EPSILON){ne.normalize();const ue=Math.acos(clamp(Q[ce-1].dot(Q[ce]),-1,1));ee[ce].applyMatrix4(ie.makeRotationAxis(ne,ue))}te[ce].crossVectors(Q[ce],ee[ce])}if(J===!0){let ce=Math.acos(clamp(ee[0].dot(ee[_]),-1,1));ce/=_,Q[0].dot(ne.crossVectors(ee[0],ee[_]))>0&&(ce=-ce);for(let ue=1;ue<=_;ue++)ee[ue].applyMatrix4(ie.makeRotationAxis(Q[ue],ce*ue)),te[ue].crossVectors(Q[ue],ee[ue])}return{tangents:Q,normals:ee,binormals:te}}clone(){return new this.constructor().copy(this)}copy(_){return this.arcLengthDivisions=_.arcLengthDivisions,this}toJSON(){const _={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return _.arcLengthDivisions=this.arcLengthDivisions,_.type=this.type,_}fromJSON(_){return this.arcLengthDivisions=_.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor(_=0,J=0,Z=1,Q=1,ee=0,te=Math.PI*2,ne=!1,ie=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=_,this.aY=J,this.xRadius=Z,this.yRadius=Q,this.aStartAngle=ee,this.aEndAngle=te,this.aClockwise=ne,this.aRotation=ie}getPoint(_,J=new Vector2){const Z=J,Q=Math.PI*2;let ee=this.aEndAngle-this.aStartAngle;const te=Math.abs(ee)<Number.EPSILON;for(;ee<0;)ee+=Q;for(;ee>Q;)ee-=Q;ee<Number.EPSILON&&(te?ee=0:ee=Q),this.aClockwise===!0&&!te&&(ee===Q?ee=-Q:ee=ee-Q);const ne=this.aStartAngle+_*ee;let ie=this.aX+this.xRadius*Math.cos(ne),re=this.aY+this.yRadius*Math.sin(ne);if(this.aRotation!==0){const oe=Math.cos(this.aRotation),se=Math.sin(this.aRotation),ae=ie-this.aX,ce=re-this.aY;ie=ae*oe-ce*se+this.aX,re=ae*se+ce*oe+this.aY}return Z.set(ie,re)}copy(_){return super.copy(_),this.aX=_.aX,this.aY=_.aY,this.xRadius=_.xRadius,this.yRadius=_.yRadius,this.aStartAngle=_.aStartAngle,this.aEndAngle=_.aEndAngle,this.aClockwise=_.aClockwise,this.aRotation=_.aRotation,this}toJSON(){const _=super.toJSON();return _.aX=this.aX,_.aY=this.aY,_.xRadius=this.xRadius,_.yRadius=this.yRadius,_.aStartAngle=this.aStartAngle,_.aEndAngle=this.aEndAngle,_.aClockwise=this.aClockwise,_.aRotation=this.aRotation,_}fromJSON(_){return super.fromJSON(_),this.aX=_.aX,this.aY=_.aY,this.xRadius=_.xRadius,this.yRadius=_.yRadius,this.aStartAngle=_.aStartAngle,this.aEndAngle=_.aEndAngle,this.aClockwise=_.aClockwise,this.aRotation=_.aRotation,this}}class ArcCurve extends EllipseCurve{constructor(_,J,Z,Q,ee,te){super(_,J,Z,Z,Q,ee,te),this.isArcCurve=!0,this.type="ArcCurve"}}function CubicPoly(){let G=0,_=0,J=0,Z=0;function Q(ee,te,ne,ie){G=ee,_=ne,J=-3*ee+3*te-2*ne-ie,Z=2*ee-2*te+ne+ie}return{initCatmullRom:function(ee,te,ne,ie,re){Q(te,ne,re*(ne-ee),re*(ie-te))},initNonuniformCatmullRom:function(ee,te,ne,ie,re,oe,se){let ae=(te-ee)/re-(ne-ee)/(re+oe)+(ne-te)/oe,ce=(ne-te)/oe-(ie-te)/(oe+se)+(ie-ne)/se;ae*=oe,ce*=oe,Q(te,ne,ae,ce)},calc:function(ee){const te=ee*ee,ne=te*ee;return G+_*ee+J*te+Z*ne}}}const tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(_=[],J=!1,Z="centripetal",Q=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=_,this.closed=J,this.curveType=Z,this.tension=Q}getPoint(_,J=new Vector3){const Z=J,Q=this.points,ee=Q.length,te=(ee-(this.closed?0:1))*_;let ne=Math.floor(te),ie=te-ne;this.closed?ne+=ne>0?0:(Math.floor(Math.abs(ne)/ee)+1)*ee:ie===0&&ne===ee-1&&(ne=ee-2,ie=1);let re,oe;this.closed||ne>0?re=Q[(ne-1)%ee]:(tmp.subVectors(Q[0],Q[1]).add(Q[0]),re=tmp);const se=Q[ne%ee],ae=Q[(ne+1)%ee];if(this.closed||ne+2<ee?oe=Q[(ne+2)%ee]:(tmp.subVectors(Q[ee-1],Q[ee-2]).add(Q[ee-1]),oe=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){const ce=this.curveType==="chordal"?.5:.25;let ue=Math.pow(re.distanceToSquared(se),ce),de=Math.pow(se.distanceToSquared(ae),ce),me=Math.pow(ae.distanceToSquared(oe),ce);de<1e-4&&(de=1),ue<1e-4&&(ue=de),me<1e-4&&(me=de),px.initNonuniformCatmullRom(re.x,se.x,ae.x,oe.x,ue,de,me),py.initNonuniformCatmullRom(re.y,se.y,ae.y,oe.y,ue,de,me),pz.initNonuniformCatmullRom(re.z,se.z,ae.z,oe.z,ue,de,me)}else this.curveType==="catmullrom"&&(px.initCatmullRom(re.x,se.x,ae.x,oe.x,this.tension),py.initCatmullRom(re.y,se.y,ae.y,oe.y,this.tension),pz.initCatmullRom(re.z,se.z,ae.z,oe.z,this.tension));return Z.set(px.calc(ie),py.calc(ie),pz.calc(ie)),Z}copy(_){super.copy(_),this.points=[];for(let J=0,Z=_.points.length;J<Z;J++){const Q=_.points[J];this.points.push(Q.clone())}return this.closed=_.closed,this.curveType=_.curveType,this.tension=_.tension,this}toJSON(){const _=super.toJSON();_.points=[];for(let J=0,Z=this.points.length;J<Z;J++){const Q=this.points[J];_.points.push(Q.toArray())}return _.closed=this.closed,_.curveType=this.curveType,_.tension=this.tension,_}fromJSON(_){super.fromJSON(_),this.points=[];for(let J=0,Z=_.points.length;J<Z;J++){const Q=_.points[J];this.points.push(new Vector3().fromArray(Q))}return this.closed=_.closed,this.curveType=_.curveType,this.tension=_.tension,this}}function CatmullRom(G,_,J,Z,Q){const ee=(Z-_)*.5,te=(Q-J)*.5,ne=G*G,ie=G*ne;return(2*J-2*Z+ee+te)*ie+(-3*J+3*Z-2*ee-te)*ne+ee*G+J}function QuadraticBezierP0(G,_){const J=1-G;return J*J*_}function QuadraticBezierP1(G,_){return 2*(1-G)*G*_}function QuadraticBezierP2(G,_){return G*G*_}function QuadraticBezier(G,_,J,Z){return QuadraticBezierP0(G,_)+QuadraticBezierP1(G,J)+QuadraticBezierP2(G,Z)}function CubicBezierP0(G,_){const J=1-G;return J*J*J*_}function CubicBezierP1(G,_){const J=1-G;return 3*J*J*G*_}function CubicBezierP2(G,_){return 3*(1-G)*G*G*_}function CubicBezierP3(G,_){return G*G*G*_}function CubicBezier(G,_,J,Z,Q){return CubicBezierP0(G,_)+CubicBezierP1(G,J)+CubicBezierP2(G,Z)+CubicBezierP3(G,Q)}class CubicBezierCurve extends Curve{constructor(_=new Vector2,J=new Vector2,Z=new Vector2,Q=new Vector2){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=_,this.v1=J,this.v2=Z,this.v3=Q}getPoint(_,J=new Vector2){const Z=J,Q=this.v0,ee=this.v1,te=this.v2,ne=this.v3;return Z.set(CubicBezier(_,Q.x,ee.x,te.x,ne.x),CubicBezier(_,Q.y,ee.y,te.y,ne.y)),Z}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this.v3.copy(_.v3),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_.v3=this.v3.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this.v3.fromArray(_.v3),this}}class CubicBezierCurve3 extends Curve{constructor(_=new Vector3,J=new Vector3,Z=new Vector3,Q=new Vector3){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=_,this.v1=J,this.v2=Z,this.v3=Q}getPoint(_,J=new Vector3){const Z=J,Q=this.v0,ee=this.v1,te=this.v2,ne=this.v3;return Z.set(CubicBezier(_,Q.x,ee.x,te.x,ne.x),CubicBezier(_,Q.y,ee.y,te.y,ne.y),CubicBezier(_,Q.z,ee.z,te.z,ne.z)),Z}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this.v3.copy(_.v3),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_.v3=this.v3.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this.v3.fromArray(_.v3),this}}class LineCurve extends Curve{constructor(_=new Vector2,J=new Vector2){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=_,this.v2=J}getPoint(_,J=new Vector2){const Z=J;return _===1?Z.copy(this.v2):(Z.copy(this.v2).sub(this.v1),Z.multiplyScalar(_).add(this.v1)),Z}getPointAt(_,J){return this.getPoint(_,J)}getTangent(_,J=new Vector2){return J.subVectors(this.v2,this.v1).normalize()}getTangentAt(_,J){return this.getTangent(_,J)}copy(_){return super.copy(_),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class LineCurve3 extends Curve{constructor(_=new Vector3,J=new Vector3){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=_,this.v2=J}getPoint(_,J=new Vector3){const Z=J;return _===1?Z.copy(this.v2):(Z.copy(this.v2).sub(this.v1),Z.multiplyScalar(_).add(this.v1)),Z}getPointAt(_,J){return this.getPoint(_,J)}getTangent(_,J=new Vector3){return J.subVectors(this.v2,this.v1).normalize()}getTangentAt(_,J){return this.getTangent(_,J)}copy(_){return super.copy(_),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class QuadraticBezierCurve extends Curve{constructor(_=new Vector2,J=new Vector2,Z=new Vector2){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=_,this.v1=J,this.v2=Z}getPoint(_,J=new Vector2){const Z=J,Q=this.v0,ee=this.v1,te=this.v2;return Z.set(QuadraticBezier(_,Q.x,ee.x,te.x),QuadraticBezier(_,Q.y,ee.y,te.y)),Z}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class QuadraticBezierCurve3 extends Curve{constructor(_=new Vector3,J=new Vector3,Z=new Vector3){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=_,this.v1=J,this.v2=Z}getPoint(_,J=new Vector3){const Z=J,Q=this.v0,ee=this.v1,te=this.v2;return Z.set(QuadraticBezier(_,Q.x,ee.x,te.x),QuadraticBezier(_,Q.y,ee.y,te.y),QuadraticBezier(_,Q.z,ee.z,te.z)),Z}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class SplineCurve extends Curve{constructor(_=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=_}getPoint(_,J=new Vector2){const Z=J,Q=this.points,ee=(Q.length-1)*_,te=Math.floor(ee),ne=ee-te,ie=Q[te===0?te:te-1],re=Q[te],oe=Q[te>Q.length-2?Q.length-1:te+1],se=Q[te>Q.length-3?Q.length-1:te+2];return Z.set(CatmullRom(ne,ie.x,re.x,oe.x,se.x),CatmullRom(ne,ie.y,re.y,oe.y,se.y)),Z}copy(_){super.copy(_),this.points=[];for(let J=0,Z=_.points.length;J<Z;J++){const Q=_.points[J];this.points.push(Q.clone())}return this}toJSON(){const _=super.toJSON();_.points=[];for(let J=0,Z=this.points.length;J<Z;J++){const Q=this.points[J];_.points.push(Q.toArray())}return _}fromJSON(_){super.fromJSON(_),this.points=[];for(let J=0,Z=_.points.length;J<Z;J++){const Q=_.points[J];this.points.push(new Vector2().fromArray(Q))}return this}}var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(_){this.curves.push(_)}closePath(){const _=this.curves[0].getPoint(0),J=this.curves[this.curves.length-1].getPoint(1);if(!_.equals(J)){const Z=_.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Curves[Z](J,_))}return this}getPoint(_,J){const Z=_*this.getLength(),Q=this.getCurveLengths();let ee=0;for(;ee<Q.length;){if(Q[ee]>=Z){const te=Q[ee]-Z,ne=this.curves[ee],ie=ne.getLength(),re=ie===0?0:1-te/ie;return ne.getPointAt(re,J)}ee++}return null}getLength(){const _=this.getCurveLengths();return _[_.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const _=[];let J=0;for(let Z=0,Q=this.curves.length;Z<Q;Z++)J+=this.curves[Z].getLength(),_.push(J);return this.cacheLengths=_,_}getSpacedPoints(_=40){const J=[];for(let Z=0;Z<=_;Z++)J.push(this.getPoint(Z/_));return this.autoClose&&J.push(J[0]),J}getPoints(_=12){const J=[];let Z;for(let Q=0,ee=this.curves;Q<ee.length;Q++){const te=ee[Q],ne=te.isEllipseCurve?_*2:te.isLineCurve||te.isLineCurve3?1:te.isSplineCurve?_*te.points.length:_,ie=te.getPoints(ne);for(let re=0;re<ie.length;re++){const oe=ie[re];Z&&Z.equals(oe)||(J.push(oe),Z=oe)}}return this.autoClose&&J.length>1&&!J[J.length-1].equals(J[0])&&J.push(J[0]),J}copy(_){super.copy(_),this.curves=[];for(let J=0,Z=_.curves.length;J<Z;J++){const Q=_.curves[J];this.curves.push(Q.clone())}return this.autoClose=_.autoClose,this}toJSON(){const _=super.toJSON();_.autoClose=this.autoClose,_.curves=[];for(let J=0,Z=this.curves.length;J<Z;J++){const Q=this.curves[J];_.curves.push(Q.toJSON())}return _}fromJSON(_){super.fromJSON(_),this.autoClose=_.autoClose,this.curves=[];for(let J=0,Z=_.curves.length;J<Z;J++){const Q=_.curves[J];this.curves.push(new Curves[Q.type]().fromJSON(Q))}return this}}class Path extends CurvePath{constructor(_){super(),this.type="Path",this.currentPoint=new Vector2,_&&this.setFromPoints(_)}setFromPoints(_){this.moveTo(_[0].x,_[0].y);for(let J=1,Z=_.length;J<Z;J++)this.lineTo(_[J].x,_[J].y);return this}moveTo(_,J){return this.currentPoint.set(_,J),this}lineTo(_,J){const Z=new LineCurve(this.currentPoint.clone(),new Vector2(_,J));return this.curves.push(Z),this.currentPoint.set(_,J),this}quadraticCurveTo(_,J,Z,Q){const ee=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(_,J),new Vector2(Z,Q));return this.curves.push(ee),this.currentPoint.set(Z,Q),this}bezierCurveTo(_,J,Z,Q,ee,te){const ne=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(_,J),new Vector2(Z,Q),new Vector2(ee,te));return this.curves.push(ne),this.currentPoint.set(ee,te),this}splineThru(_){const J=[this.currentPoint.clone()].concat(_),Z=new SplineCurve(J);return this.curves.push(Z),this.currentPoint.copy(_[_.length-1]),this}arc(_,J,Z,Q,ee,te){const ne=this.currentPoint.x,ie=this.currentPoint.y;return this.absarc(_+ne,J+ie,Z,Q,ee,te),this}absarc(_,J,Z,Q,ee,te){return this.absellipse(_,J,Z,Z,Q,ee,te),this}ellipse(_,J,Z,Q,ee,te,ne,ie){const re=this.currentPoint.x,oe=this.currentPoint.y;return this.absellipse(_+re,J+oe,Z,Q,ee,te,ne,ie),this}absellipse(_,J,Z,Q,ee,te,ne,ie){const re=new EllipseCurve(_,J,Z,Q,ee,te,ne,ie);if(this.curves.length>0){const se=re.getPoint(0);se.equals(this.currentPoint)||this.lineTo(se.x,se.y)}this.curves.push(re);const oe=re.getPoint(1);return this.currentPoint.copy(oe),this}copy(_){return super.copy(_),this.currentPoint.copy(_.currentPoint),this}toJSON(){const _=super.toJSON();return _.currentPoint=this.currentPoint.toArray(),_}fromJSON(_){return super.fromJSON(_),this.currentPoint.fromArray(_.currentPoint),this}}class Shape extends Path{constructor(_){super(_),this.uuid=generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(_){const J=[];for(let Z=0,Q=this.holes.length;Z<Q;Z++)J[Z]=this.holes[Z].getPoints(_);return J}extractPoints(_){return{shape:this.getPoints(_),holes:this.getPointsHoles(_)}}copy(_){super.copy(_),this.holes=[];for(let J=0,Z=_.holes.length;J<Z;J++){const Q=_.holes[J];this.holes.push(Q.clone())}return this}toJSON(){const _=super.toJSON();_.uuid=this.uuid,_.holes=[];for(let J=0,Z=this.holes.length;J<Z;J++){const Q=this.holes[J];_.holes.push(Q.toJSON())}return _}fromJSON(_){super.fromJSON(_),this.uuid=_.uuid,this.holes=[];for(let J=0,Z=_.holes.length;J<Z;J++){const Q=_.holes[J];this.holes.push(new Path().fromJSON(Q))}return this}}function earcut(G,_,J=2){const Z=_&&_.length,Q=Z?_[0]*J:G.length;let ee=linkedList(G,0,Q,J,!0);const te=[];if(!ee||ee.next===ee.prev)return te;let ne,ie,re;if(Z&&(ee=eliminateHoles(G,_,ee,J)),G.length>80*J){ne=G[0],ie=G[1];let oe=ne,se=ie;for(let ae=J;ae<Q;ae+=J){const ce=G[ae],ue=G[ae+1];ce<ne&&(ne=ce),ue<ie&&(ie=ue),ce>oe&&(oe=ce),ue>se&&(se=ue)}re=Math.max(oe-ne,se-ie),re=re!==0?32767/re:0}return earcutLinked(ee,te,J,ne,ie,re,0),te}function linkedList(G,_,J,Z,Q){let ee;if(Q===signedArea(G,_,J,Z)>0)for(let te=_;te<J;te+=Z)ee=insertNode(te/Z|0,G[te],G[te+1],ee);else for(let te=J-Z;te>=_;te-=Z)ee=insertNode(te/Z|0,G[te],G[te+1],ee);return ee&&equals(ee,ee.next)&&(removeNode(ee),ee=ee.next),ee}function filterPoints(G,_){if(!G)return G;_||(_=G);let J=G,Z;do if(Z=!1,!J.steiner&&(equals(J,J.next)||area(J.prev,J,J.next)===0)){if(removeNode(J),J=_=J.prev,J===J.next)break;Z=!0}else J=J.next;while(Z||J!==_);return _}function earcutLinked(G,_,J,Z,Q,ee,te){if(!G)return;!te&&ee&&indexCurve(G,Z,Q,ee);let ne=G;for(;G.prev!==G.next;){const ie=G.prev,re=G.next;if(ee?isEarHashed(G,Z,Q,ee):isEar(G)){_.push(ie.i,G.i,re.i),removeNode(G),G=re.next,ne=re.next;continue}if(G=re,G===ne){te?te===1?(G=cureLocalIntersections(filterPoints(G),_),earcutLinked(G,_,J,Z,Q,ee,2)):te===2&&splitEarcut(G,_,J,Z,Q,ee):earcutLinked(filterPoints(G),_,J,Z,Q,ee,1);break}}}function isEar(G){const _=G.prev,J=G,Z=G.next;if(area(_,J,Z)>=0)return!1;const Q=_.x,ee=J.x,te=Z.x,ne=_.y,ie=J.y,re=Z.y,oe=Math.min(Q,ee,te),se=Math.min(ne,ie,re),ae=Math.max(Q,ee,te),ce=Math.max(ne,ie,re);let ue=Z.next;for(;ue!==_;){if(ue.x>=oe&&ue.x<=ae&&ue.y>=se&&ue.y<=ce&&pointInTriangleExceptFirst(Q,ne,ee,ie,te,re,ue.x,ue.y)&&area(ue.prev,ue,ue.next)>=0)return!1;ue=ue.next}return!0}function isEarHashed(G,_,J,Z){const Q=G.prev,ee=G,te=G.next;if(area(Q,ee,te)>=0)return!1;const ne=Q.x,ie=ee.x,re=te.x,oe=Q.y,se=ee.y,ae=te.y,ce=Math.min(ne,ie,re),ue=Math.min(oe,se,ae),de=Math.max(ne,ie,re),me=Math.max(oe,se,ae),fe=zOrder(ce,ue,_,J,Z),_e=zOrder(de,me,_,J,Z);let ye=G.prevZ,be=G.nextZ;for(;ye&&ye.z>=fe&&be&&be.z<=_e;){if(ye.x>=ce&&ye.x<=de&&ye.y>=ue&&ye.y<=me&&ye!==Q&&ye!==te&&pointInTriangleExceptFirst(ne,oe,ie,se,re,ae,ye.x,ye.y)&&area(ye.prev,ye,ye.next)>=0||(ye=ye.prevZ,be.x>=ce&&be.x<=de&&be.y>=ue&&be.y<=me&&be!==Q&&be!==te&&pointInTriangleExceptFirst(ne,oe,ie,se,re,ae,be.x,be.y)&&area(be.prev,be,be.next)>=0))return!1;be=be.nextZ}for(;ye&&ye.z>=fe;){if(ye.x>=ce&&ye.x<=de&&ye.y>=ue&&ye.y<=me&&ye!==Q&&ye!==te&&pointInTriangleExceptFirst(ne,oe,ie,se,re,ae,ye.x,ye.y)&&area(ye.prev,ye,ye.next)>=0)return!1;ye=ye.prevZ}for(;be&&be.z<=_e;){if(be.x>=ce&&be.x<=de&&be.y>=ue&&be.y<=me&&be!==Q&&be!==te&&pointInTriangleExceptFirst(ne,oe,ie,se,re,ae,be.x,be.y)&&area(be.prev,be,be.next)>=0)return!1;be=be.nextZ}return!0}function cureLocalIntersections(G,_){let J=G;do{const Z=J.prev,Q=J.next.next;!equals(Z,Q)&&intersects(Z,J,J.next,Q)&&locallyInside(Z,Q)&&locallyInside(Q,Z)&&(_.push(Z.i,J.i,Q.i),removeNode(J),removeNode(J.next),J=G=Q),J=J.next}while(J!==G);return filterPoints(J)}function splitEarcut(G,_,J,Z,Q,ee){let te=G;do{let ne=te.next.next;for(;ne!==te.prev;){if(te.i!==ne.i&&isValidDiagonal(te,ne)){let ie=splitPolygon(te,ne);te=filterPoints(te,te.next),ie=filterPoints(ie,ie.next),earcutLinked(te,_,J,Z,Q,ee,0),earcutLinked(ie,_,J,Z,Q,ee,0);return}ne=ne.next}te=te.next}while(te!==G)}function eliminateHoles(G,_,J,Z){const Q=[];for(let ee=0,te=_.length;ee<te;ee++){const ne=_[ee]*Z,ie=ee<te-1?_[ee+1]*Z:G.length,re=linkedList(G,ne,ie,Z,!1);re===re.next&&(re.steiner=!0),Q.push(getLeftmost(re))}Q.sort(compareXYSlope);for(let ee=0;ee<Q.length;ee++)J=eliminateHole(Q[ee],J);return J}function compareXYSlope(G,_){let J=G.x-_.x;if(J===0&&(J=G.y-_.y,J===0)){const Z=(G.next.y-G.y)/(G.next.x-G.x),Q=(_.next.y-_.y)/(_.next.x-_.x);J=Z-Q}return J}function eliminateHole(G,_){const J=findHoleBridge(G,_);if(!J)return _;const Z=splitPolygon(J,G);return filterPoints(Z,Z.next),filterPoints(J,J.next)}function findHoleBridge(G,_){let J=_;const Z=G.x,Q=G.y;let ee=-1/0,te;if(equals(G,J))return J;do{if(equals(G,J.next))return J.next;if(Q<=J.y&&Q>=J.next.y&&J.next.y!==J.y){const se=J.x+(Q-J.y)*(J.next.x-J.x)/(J.next.y-J.y);if(se<=Z&&se>ee&&(ee=se,te=J.x<J.next.x?J:J.next,se===Z))return te}J=J.next}while(J!==_);if(!te)return null;const ne=te,ie=te.x,re=te.y;let oe=1/0;J=te;do{if(Z>=J.x&&J.x>=ie&&Z!==J.x&&pointInTriangle(Q<re?Z:ee,Q,ie,re,Q<re?ee:Z,Q,J.x,J.y)){const se=Math.abs(Q-J.y)/(Z-J.x);locallyInside(J,G)&&(se<oe||se===oe&&(J.x>te.x||J.x===te.x&&sectorContainsSector(te,J)))&&(te=J,oe=se)}J=J.next}while(J!==ne);return te}function sectorContainsSector(G,_){return area(G.prev,G,_.prev)<0&&area(_.next,G,G.next)<0}function indexCurve(G,_,J,Z){let Q=G;do Q.z===0&&(Q.z=zOrder(Q.x,Q.y,_,J,Z)),Q.prevZ=Q.prev,Q.nextZ=Q.next,Q=Q.next;while(Q!==G);Q.prevZ.nextZ=null,Q.prevZ=null,sortLinked(Q)}function sortLinked(G){let _,J=1;do{let Z=G,Q;G=null;let ee=null;for(_=0;Z;){_++;let te=Z,ne=0;for(let re=0;re<J&&(ne++,te=te.nextZ,!!te);re++);let ie=J;for(;ne>0||ie>0&&te;)ne!==0&&(ie===0||!te||Z.z<=te.z)?(Q=Z,Z=Z.nextZ,ne--):(Q=te,te=te.nextZ,ie--),ee?ee.nextZ=Q:G=Q,Q.prevZ=ee,ee=Q;Z=te}ee.nextZ=null,J*=2}while(_>1);return G}function zOrder(G,_,J,Z,Q){return G=(G-J)*Q|0,_=(_-Z)*Q|0,G=(G|G<<8)&16711935,G=(G|G<<4)&252645135,G=(G|G<<2)&858993459,G=(G|G<<1)&1431655765,_=(_|_<<8)&16711935,_=(_|_<<4)&252645135,_=(_|_<<2)&858993459,_=(_|_<<1)&1431655765,G|_<<1}function getLeftmost(G){let _=G,J=G;do(_.x<J.x||_.x===J.x&&_.y<J.y)&&(J=_),_=_.next;while(_!==G);return J}function pointInTriangle(G,_,J,Z,Q,ee,te,ne){return(Q-te)*(_-ne)>=(G-te)*(ee-ne)&&(G-te)*(Z-ne)>=(J-te)*(_-ne)&&(J-te)*(ee-ne)>=(Q-te)*(Z-ne)}function pointInTriangleExceptFirst(G,_,J,Z,Q,ee,te,ne){return!(G===te&&_===ne)&&pointInTriangle(G,_,J,Z,Q,ee,te,ne)}function isValidDiagonal(G,_){return G.next.i!==_.i&&G.prev.i!==_.i&&!intersectsPolygon(G,_)&&(locallyInside(G,_)&&locallyInside(_,G)&&middleInside(G,_)&&(area(G.prev,G,_.prev)||area(G,_.prev,_))||equals(G,_)&&area(G.prev,G,G.next)>0&&area(_.prev,_,_.next)>0)}function area(G,_,J){return(_.y-G.y)*(J.x-_.x)-(_.x-G.x)*(J.y-_.y)}function equals(G,_){return G.x===_.x&&G.y===_.y}function intersects(G,_,J,Z){const Q=sign(area(G,_,J)),ee=sign(area(G,_,Z)),te=sign(area(J,Z,G)),ne=sign(area(J,Z,_));return!!(Q!==ee&&te!==ne||Q===0&&onSegment(G,J,_)||ee===0&&onSegment(G,Z,_)||te===0&&onSegment(J,G,Z)||ne===0&&onSegment(J,_,Z))}function onSegment(G,_,J){return _.x<=Math.max(G.x,J.x)&&_.x>=Math.min(G.x,J.x)&&_.y<=Math.max(G.y,J.y)&&_.y>=Math.min(G.y,J.y)}function sign(G){return G>0?1:G<0?-1:0}function intersectsPolygon(G,_){let J=G;do{if(J.i!==G.i&&J.next.i!==G.i&&J.i!==_.i&&J.next.i!==_.i&&intersects(J,J.next,G,_))return!0;J=J.next}while(J!==G);return!1}function locallyInside(G,_){return area(G.prev,G,G.next)<0?area(G,_,G.next)>=0&&area(G,G.prev,_)>=0:area(G,_,G.prev)<0||area(G,G.next,_)<0}function middleInside(G,_){let J=G,Z=!1;const Q=(G.x+_.x)/2,ee=(G.y+_.y)/2;do J.y>ee!=J.next.y>ee&&J.next.y!==J.y&&Q<(J.next.x-J.x)*(ee-J.y)/(J.next.y-J.y)+J.x&&(Z=!Z),J=J.next;while(J!==G);return Z}function splitPolygon(G,_){const J=createNode(G.i,G.x,G.y),Z=createNode(_.i,_.x,_.y),Q=G.next,ee=_.prev;return G.next=_,_.prev=G,J.next=Q,Q.prev=J,Z.next=J,J.prev=Z,ee.next=Z,Z.prev=ee,Z}function insertNode(G,_,J,Z){const Q=createNode(G,_,J);return Z?(Q.next=Z.next,Q.prev=Z,Z.next.prev=Q,Z.next=Q):(Q.prev=Q,Q.next=Q),Q}function removeNode(G){G.next.prev=G.prev,G.prev.next=G.next,G.prevZ&&(G.prevZ.nextZ=G.nextZ),G.nextZ&&(G.nextZ.prevZ=G.prevZ)}function createNode(G,_,J){return{i:G,x:_,y:J,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function signedArea(G,_,J,Z){let Q=0;for(let ee=_,te=J-Z;ee<J;ee+=Z)Q+=(G[te]-G[ee])*(G[ee+1]+G[te+1]),te=ee;return Q}class Earcut{static triangulate(_,J,Z=2){return earcut(_,J,Z)}}class ShapeUtils{static area(_){const J=_.length;let Z=0;for(let Q=J-1,ee=0;ee<J;Q=ee++)Z+=_[Q].x*_[ee].y-_[ee].x*_[Q].y;return Z*.5}static isClockWise(_){return ShapeUtils.area(_)<0}static triangulateShape(_,J){const Z=[],Q=[],ee=[];removeDupEndPts(_),addContour(Z,_);let te=_.length;J.forEach(removeDupEndPts);for(let ie=0;ie<J.length;ie++)Q.push(te),te+=J[ie].length,addContour(Z,J[ie]);const ne=Earcut.triangulate(Z,Q);for(let ie=0;ie<ne.length;ie+=3)ee.push(ne.slice(ie,ie+3));return ee}}function removeDupEndPts(G){const _=G.length;_>2&&G[_-1].equals(G[0])&&G.pop()}function addContour(G,_){for(let J=0;J<_.length;J++)G.push(_[J].x),G.push(_[J].y)}class ExtrudeGeometry extends BufferGeometry{constructor(_=new Shape([new Vector2(.5,.5),new Vector2(-.5,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),J={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:_,options:J},_=Array.isArray(_)?_:[_];const Z=this,Q=[],ee=[];for(let ne=0,ie=_.length;ne<ie;ne++){const re=_[ne];te(re)}this.setAttribute("position",new Float32BufferAttribute(Q,3)),this.setAttribute("uv",new Float32BufferAttribute(ee,2)),this.computeVertexNormals();function te(ne){const ie=[],re=J.curveSegments!==void 0?J.curveSegments:12,oe=J.steps!==void 0?J.steps:1,se=J.depth!==void 0?J.depth:1;let ae=J.bevelEnabled!==void 0?J.bevelEnabled:!0,ce=J.bevelThickness!==void 0?J.bevelThickness:.2,ue=J.bevelSize!==void 0?J.bevelSize:ce-.1,de=J.bevelOffset!==void 0?J.bevelOffset:0,me=J.bevelSegments!==void 0?J.bevelSegments:3;const fe=J.extrudePath,_e=J.UVGenerator!==void 0?J.UVGenerator:WorldUVGenerator;let ye,be=!1,Se,Ce,Me,Re;fe&&(ye=fe.getSpacedPoints(oe),be=!0,ae=!1,Se=fe.computeFrenetFrames(oe,!1),Ce=new Vector3,Me=new Vector3,Re=new Vector3),ae||(me=0,ce=0,ue=0,de=0);const Te=ne.extractPoints(re);let Ee=Te.shape;const De=Te.holes;if(!ShapeUtils.isClockWise(Ee)){Ee=Ee.reverse();for(let vt=0,Ke=De.length;vt<Ke;vt++){const Tt=De[vt];ShapeUtils.isClockWise(Tt)&&(De[vt]=Tt.reverse())}}function Ue(vt){const Tt=10000000000000001e-36;let Ut=vt[0];for(let Lt=1;Lt<=vt.length;Lt++){const jt=Lt%vt.length,ri=vt[jt],ti=ri.x-Ut.x,di=ri.y-Ut.y,Qe=ti*ti+di*di,He=Math.max(Math.abs(ri.x),Math.abs(ri.y),Math.abs(Ut.x),Math.abs(Ut.y)),_t=Tt*He*He;if(Qe<=_t){vt.splice(jt,1),Lt--;continue}Ut=ri}}Ue(Ee),De.forEach(Ue);const Ge=De.length,Ye=Ee;for(let vt=0;vt<Ge;vt++){const Ke=De[vt];Ee=Ee.concat(Ke)}function ke(vt,Ke,Tt){return Ke||error("ExtrudeGeometry: vec does not exist"),vt.clone().addScaledVector(Ke,Tt)}const Fe=Ee.length;function Ve(vt,Ke,Tt){let Ut,Lt,jt;const ri=vt.x-Ke.x,ti=vt.y-Ke.y,di=Tt.x-vt.x,Qe=Tt.y-vt.y,He=ri*ri+ti*ti,_t=ri*Qe-ti*di;if(Math.abs(_t)>Number.EPSILON){const dt=Math.sqrt(He),At=Math.sqrt(di*di+Qe*Qe),Nt=Ke.x-ti/dt,fi=Ke.y+ri/dt,Kt=Tt.x-Qe/At,It=Tt.y+di/At,Yt=((Kt-Nt)*Qe-(It-fi)*di)/(ri*Qe-ti*di);Ut=Nt+ri*Yt-vt.x,Lt=fi+ti*Yt-vt.y;const Rt=Ut*Ut+Lt*Lt;if(Rt<=2)return new Vector2(Ut,Lt);jt=Math.sqrt(Rt/2)}else{let dt=!1;ri>Number.EPSILON?di>Number.EPSILON&&(dt=!0):ri<-Number.EPSILON?di<-Number.EPSILON&&(dt=!0):Math.sign(ti)===Math.sign(Qe)&&(dt=!0),dt?(Ut=-ti,Lt=ri,jt=Math.sqrt(He)):(Ut=ri,Lt=ti,jt=Math.sqrt(He/2))}return new Vector2(Ut/jt,Lt/jt)}const $e=[];for(let vt=0,Ke=Ye.length,Tt=Ke-1,Ut=vt+1;vt<Ke;vt++,Tt++,Ut++)Tt===Ke&&(Tt=0),Ut===Ke&&(Ut=0),$e[vt]=Ve(Ye[vt],Ye[Tt],Ye[Ut]);const Xe=[];let ze,qe=$e.concat();for(let vt=0,Ke=Ge;vt<Ke;vt++){const Tt=De[vt];ze=[];for(let Ut=0,Lt=Tt.length,jt=Lt-1,ri=Ut+1;Ut<Lt;Ut++,jt++,ri++)jt===Lt&&(jt=0),ri===Lt&&(ri=0),ze[Ut]=Ve(Tt[Ut],Tt[jt],Tt[ri]);Xe.push(ze),qe=qe.concat(ze)}let et;if(me===0)et=ShapeUtils.triangulateShape(Ye,De);else{const vt=[],Ke=[];for(let Tt=0;Tt<me;Tt++){const Ut=Tt/me,Lt=ce*Math.cos(Ut*Math.PI/2),jt=ue*Math.sin(Ut*Math.PI/2)+de;for(let ri=0,ti=Ye.length;ri<ti;ri++){const di=ke(Ye[ri],$e[ri],jt);kt(di.x,di.y,-Lt),Ut===0&&vt.push(di)}for(let ri=0,ti=Ge;ri<ti;ri++){const di=De[ri];ze=Xe[ri];const Qe=[];for(let He=0,_t=di.length;He<_t;He++){const dt=ke(di[He],ze[He],jt);kt(dt.x,dt.y,-Lt),Ut===0&&Qe.push(dt)}Ut===0&&Ke.push(Qe)}}et=ShapeUtils.triangulateShape(vt,Ke)}const ot=et.length,St=ue+de;for(let vt=0;vt<Fe;vt++){const Ke=ae?ke(Ee[vt],qe[vt],St):Ee[vt];be?(Me.copy(Se.normals[0]).multiplyScalar(Ke.x),Ce.copy(Se.binormals[0]).multiplyScalar(Ke.y),Re.copy(ye[0]).add(Me).add(Ce),kt(Re.x,Re.y,Re.z)):kt(Ke.x,Ke.y,0)}for(let vt=1;vt<=oe;vt++)for(let Ke=0;Ke<Fe;Ke++){const Tt=ae?ke(Ee[Ke],qe[Ke],St):Ee[Ke];be?(Me.copy(Se.normals[vt]).multiplyScalar(Tt.x),Ce.copy(Se.binormals[vt]).multiplyScalar(Tt.y),Re.copy(ye[vt]).add(Me).add(Ce),kt(Re.x,Re.y,Re.z)):kt(Tt.x,Tt.y,se/oe*vt)}for(let vt=me-1;vt>=0;vt--){const Ke=vt/me,Tt=ce*Math.cos(Ke*Math.PI/2),Ut=ue*Math.sin(Ke*Math.PI/2)+de;for(let Lt=0,jt=Ye.length;Lt<jt;Lt++){const ri=ke(Ye[Lt],$e[Lt],Ut);kt(ri.x,ri.y,se+Tt)}for(let Lt=0,jt=De.length;Lt<jt;Lt++){const ri=De[Lt];ze=Xe[Lt];for(let ti=0,di=ri.length;ti<di;ti++){const Qe=ke(ri[ti],ze[ti],Ut);be?kt(Qe.x,Qe.y+ye[oe-1].y,ye[oe-1].x+Tt):kt(Qe.x,Qe.y,se+Tt)}}}it(),lt();function it(){const vt=Q.length/3;if(ae){let Ke=0,Tt=Fe*Ke;for(let Ut=0;Ut<ot;Ut++){const Lt=et[Ut];Jt(Lt[2]+Tt,Lt[1]+Tt,Lt[0]+Tt)}Ke=oe+me*2,Tt=Fe*Ke;for(let Ut=0;Ut<ot;Ut++){const Lt=et[Ut];Jt(Lt[0]+Tt,Lt[1]+Tt,Lt[2]+Tt)}}else{for(let Ke=0;Ke<ot;Ke++){const Tt=et[Ke];Jt(Tt[2],Tt[1],Tt[0])}for(let Ke=0;Ke<ot;Ke++){const Tt=et[Ke];Jt(Tt[0]+Fe*oe,Tt[1]+Fe*oe,Tt[2]+Fe*oe)}}Z.addGroup(vt,Q.length/3-vt,0)}function lt(){const vt=Q.length/3;let Ke=0;gt(Ye,Ke),Ke+=Ye.length;for(let Tt=0,Ut=De.length;Tt<Ut;Tt++){const Lt=De[Tt];gt(Lt,Ke),Ke+=Lt.length}Z.addGroup(vt,Q.length/3-vt,1)}function gt(vt,Ke){let Tt=vt.length;for(;--Tt>=0;){const Ut=Tt;let Lt=Tt-1;Lt<0&&(Lt=vt.length-1);for(let jt=0,ri=oe+me*2;jt<ri;jt++){const ti=Fe*jt,di=Fe*(jt+1),Qe=Ke+Ut+ti,He=Ke+Lt+ti,_t=Ke+Lt+di,dt=Ke+Ut+di;li(Qe,He,_t,dt)}}}function kt(vt,Ke,Tt){ie.push(vt),ie.push(Ke),ie.push(Tt)}function Jt(vt,Ke,Tt){si(vt),si(Ke),si(Tt);const Ut=Q.length/3,Lt=_e.generateTopUV(Z,Q,Ut-3,Ut-2,Ut-1);qt(Lt[0]),qt(Lt[1]),qt(Lt[2])}function li(vt,Ke,Tt,Ut){si(vt),si(Ke),si(Ut),si(Ke),si(Tt),si(Ut);const Lt=Q.length/3,jt=_e.generateSideWallUV(Z,Q,Lt-6,Lt-3,Lt-2,Lt-1);qt(jt[0]),qt(jt[1]),qt(jt[3]),qt(jt[1]),qt(jt[2]),qt(jt[3])}function si(vt){Q.push(ie[vt*3+0]),Q.push(ie[vt*3+1]),Q.push(ie[vt*3+2])}function qt(vt){ee.push(vt.x),ee.push(vt.y)}}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}toJSON(){const _=super.toJSON(),J=this.parameters.shapes,Z=this.parameters.options;return toJSON$1(J,Z,_)}static fromJSON(_,J){const Z=[];for(let ee=0,te=_.shapes.length;ee<te;ee++){const ne=J[_.shapes[ee]];Z.push(ne)}const Q=_.options.extrudePath;return Q!==void 0&&(_.options.extrudePath=new Curves[Q.type]().fromJSON(Q)),new ExtrudeGeometry(Z,_.options)}}const WorldUVGenerator={generateTopUV:function(G,_,J,Z,Q){const ee=_[J*3],te=_[J*3+1],ne=_[Z*3],ie=_[Z*3+1],re=_[Q*3],oe=_[Q*3+1];return[new Vector2(ee,te),new Vector2(ne,ie),new Vector2(re,oe)]},generateSideWallUV:function(G,_,J,Z,Q,ee){const te=_[J*3],ne=_[J*3+1],ie=_[J*3+2],re=_[Z*3],oe=_[Z*3+1],se=_[Z*3+2],ae=_[Q*3],ce=_[Q*3+1],ue=_[Q*3+2],de=_[ee*3],me=_[ee*3+1],fe=_[ee*3+2];return Math.abs(ne-oe)<Math.abs(te-re)?[new Vector2(te,1-ie),new Vector2(re,1-se),new Vector2(ae,1-ue),new Vector2(de,1-fe)]:[new Vector2(ne,1-ie),new Vector2(oe,1-se),new Vector2(ce,1-ue),new Vector2(me,1-fe)]}};function toJSON$1(G,_,J){if(J.shapes=[],Array.isArray(G))for(let Z=0,Q=G.length;Z<Q;Z++){const ee=G[Z];J.shapes.push(ee.uuid)}else J.shapes.push(G.uuid);return J.options=Object.assign({},_),_.extrudePath!==void 0&&(J.options.extrudePath=_.extrudePath.toJSON()),J}class IcosahedronGeometry extends PolyhedronGeometry{constructor(_=1,J=0){const Z=(1+Math.sqrt(5))/2,Q=[-1,Z,0,1,Z,0,-1,-Z,0,1,-Z,0,0,-1,Z,0,1,Z,0,-1,-Z,0,1,-Z,Z,0,-1,Z,0,1,-Z,0,-1,-Z,0,1],ee=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(Q,ee,_,J),this.type="IcosahedronGeometry",this.parameters={radius:_,detail:J}}static fromJSON(_){return new IcosahedronGeometry(_.radius,_.detail)}}class LatheGeometry extends BufferGeometry{constructor(_=[new Vector2(0,-.5),new Vector2(.5,0),new Vector2(0,.5)],J=12,Z=0,Q=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:_,segments:J,phiStart:Z,phiLength:Q},J=Math.floor(J),Q=clamp(Q,0,Math.PI*2);const ee=[],te=[],ne=[],ie=[],re=[],oe=1/J,se=new Vector3,ae=new Vector2,ce=new Vector3,ue=new Vector3,de=new Vector3;let me=0,fe=0;for(let _e=0;_e<=_.length-1;_e++)switch(_e){case 0:me=_[_e+1].x-_[_e].x,fe=_[_e+1].y-_[_e].y,ce.x=fe*1,ce.y=-me,ce.z=fe*0,de.copy(ce),ce.normalize(),ie.push(ce.x,ce.y,ce.z);break;case _.length-1:ie.push(de.x,de.y,de.z);break;default:me=_[_e+1].x-_[_e].x,fe=_[_e+1].y-_[_e].y,ce.x=fe*1,ce.y=-me,ce.z=fe*0,ue.copy(ce),ce.x+=de.x,ce.y+=de.y,ce.z+=de.z,ce.normalize(),ie.push(ce.x,ce.y,ce.z),de.copy(ue)}for(let _e=0;_e<=J;_e++){const ye=Z+_e*oe*Q,be=Math.sin(ye),Se=Math.cos(ye);for(let Ce=0;Ce<=_.length-1;Ce++){se.x=_[Ce].x*be,se.y=_[Ce].y,se.z=_[Ce].x*Se,te.push(se.x,se.y,se.z),ae.x=_e/J,ae.y=Ce/(_.length-1),ne.push(ae.x,ae.y);const Me=ie[3*Ce+0]*be,Re=ie[3*Ce+1],Te=ie[3*Ce+0]*Se;re.push(Me,Re,Te)}}for(let _e=0;_e<J;_e++)for(let ye=0;ye<_.length-1;ye++){const be=ye+_e*_.length,Se=be,Ce=be+_.length,Me=be+_.length+1,Re=be+1;ee.push(Se,Ce,Re),ee.push(Me,Re,Ce)}this.setIndex(ee),this.setAttribute("position",new Float32BufferAttribute(te,3)),this.setAttribute("uv",new Float32BufferAttribute(ne,2)),this.setAttribute("normal",new Float32BufferAttribute(re,3))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new LatheGeometry(_.points,_.segments,_.phiStart,_.phiLength)}}class OctahedronGeometry extends PolyhedronGeometry{constructor(_=1,J=0){const Z=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],Q=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(Z,Q,_,J),this.type="OctahedronGeometry",this.parameters={radius:_,detail:J}}static fromJSON(_){return new OctahedronGeometry(_.radius,_.detail)}}class PlaneGeometry extends BufferGeometry{constructor(_=1,J=1,Z=1,Q=1){super(),this.type="PlaneGeometry",this.parameters={width:_,height:J,widthSegments:Z,heightSegments:Q};const ee=_/2,te=J/2,ne=Math.floor(Z),ie=Math.floor(Q),re=ne+1,oe=ie+1,se=_/ne,ae=J/ie,ce=[],ue=[],de=[],me=[];for(let fe=0;fe<oe;fe++){const _e=fe*ae-te;for(let ye=0;ye<re;ye++){const be=ye*se-ee;ue.push(be,-_e,0),de.push(0,0,1),me.push(ye/ne),me.push(1-fe/ie)}}for(let fe=0;fe<ie;fe++)for(let _e=0;_e<ne;_e++){const ye=_e+re*fe,be=_e+re*(fe+1),Se=_e+1+re*(fe+1),Ce=_e+1+re*fe;ce.push(ye,be,Ce),ce.push(be,Se,Ce)}this.setIndex(ce),this.setAttribute("position",new Float32BufferAttribute(ue,3)),this.setAttribute("normal",new Float32BufferAttribute(de,3)),this.setAttribute("uv",new Float32BufferAttribute(me,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new PlaneGeometry(_.width,_.height,_.widthSegments,_.heightSegments)}}class RingGeometry extends BufferGeometry{constructor(_=.5,J=1,Z=32,Q=1,ee=0,te=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:_,outerRadius:J,thetaSegments:Z,phiSegments:Q,thetaStart:ee,thetaLength:te},Z=Math.max(3,Z),Q=Math.max(1,Q);const ne=[],ie=[],re=[],oe=[];let se=_;const ae=(J-_)/Q,ce=new Vector3,ue=new Vector2;for(let de=0;de<=Q;de++){for(let me=0;me<=Z;me++){const fe=ee+me/Z*te;ce.x=se*Math.cos(fe),ce.y=se*Math.sin(fe),ie.push(ce.x,ce.y,ce.z),re.push(0,0,1),ue.x=(ce.x/J+1)/2,ue.y=(ce.y/J+1)/2,oe.push(ue.x,ue.y)}se+=ae}for(let de=0;de<Q;de++){const me=de*(Z+1);for(let fe=0;fe<Z;fe++){const _e=fe+me,ye=_e,be=_e+Z+1,Se=_e+Z+2,Ce=_e+1;ne.push(ye,be,Ce),ne.push(be,Se,Ce)}}this.setIndex(ne),this.setAttribute("position",new Float32BufferAttribute(ie,3)),this.setAttribute("normal",new Float32BufferAttribute(re,3)),this.setAttribute("uv",new Float32BufferAttribute(oe,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new RingGeometry(_.innerRadius,_.outerRadius,_.thetaSegments,_.phiSegments,_.thetaStart,_.thetaLength)}}class ShapeGeometry extends BufferGeometry{constructor(_=new Shape([new Vector2(0,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),J=12){super(),this.type="ShapeGeometry",this.parameters={shapes:_,curveSegments:J};const Z=[],Q=[],ee=[],te=[];let ne=0,ie=0;if(Array.isArray(_)===!1)re(_);else for(let oe=0;oe<_.length;oe++)re(_[oe]),this.addGroup(ne,ie,oe),ne+=ie,ie=0;this.setIndex(Z),this.setAttribute("position",new Float32BufferAttribute(Q,3)),this.setAttribute("normal",new Float32BufferAttribute(ee,3)),this.setAttribute("uv",new Float32BufferAttribute(te,2));function re(oe){const se=Q.length/3,ae=oe.extractPoints(J);let ce=ae.shape;const ue=ae.holes;ShapeUtils.isClockWise(ce)===!1&&(ce=ce.reverse());for(let me=0,fe=ue.length;me<fe;me++){const _e=ue[me];ShapeUtils.isClockWise(_e)===!0&&(ue[me]=_e.reverse())}const de=ShapeUtils.triangulateShape(ce,ue);for(let me=0,fe=ue.length;me<fe;me++){const _e=ue[me];ce=ce.concat(_e)}for(let me=0,fe=ce.length;me<fe;me++){const _e=ce[me];Q.push(_e.x,_e.y,0),ee.push(0,0,1),te.push(_e.x,_e.y)}for(let me=0,fe=de.length;me<fe;me++){const _e=de[me],ye=_e[0]+se,be=_e[1]+se,Se=_e[2]+se;Z.push(ye,be,Se),ie+=3}}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}toJSON(){const _=super.toJSON(),J=this.parameters.shapes;return toJSON(J,_)}static fromJSON(_,J){const Z=[];for(let Q=0,ee=_.shapes.length;Q<ee;Q++){const te=J[_.shapes[Q]];Z.push(te)}return new ShapeGeometry(Z,_.curveSegments)}}function toJSON(G,_){if(_.shapes=[],Array.isArray(G))for(let J=0,Z=G.length;J<Z;J++){const Q=G[J];_.shapes.push(Q.uuid)}else _.shapes.push(G.uuid);return _}class SphereGeometry extends BufferGeometry{constructor(_=1,J=32,Z=16,Q=0,ee=Math.PI*2,te=0,ne=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:_,widthSegments:J,heightSegments:Z,phiStart:Q,phiLength:ee,thetaStart:te,thetaLength:ne},J=Math.max(3,Math.floor(J)),Z=Math.max(2,Math.floor(Z));const ie=Math.min(te+ne,Math.PI);let re=0;const oe=[],se=new Vector3,ae=new Vector3,ce=[],ue=[],de=[],me=[];for(let fe=0;fe<=Z;fe++){const _e=[],ye=fe/Z;let be=0;fe===0&&te===0?be=.5/J:fe===Z&&ie===Math.PI&&(be=-.5/J);for(let Se=0;Se<=J;Se++){const Ce=Se/J;se.x=-_*Math.cos(Q+Ce*ee)*Math.sin(te+ye*ne),se.y=_*Math.cos(te+ye*ne),se.z=_*Math.sin(Q+Ce*ee)*Math.sin(te+ye*ne),ue.push(se.x,se.y,se.z),ae.copy(se).normalize(),de.push(ae.x,ae.y,ae.z),me.push(Ce+be,1-ye),_e.push(re++)}oe.push(_e)}for(let fe=0;fe<Z;fe++)for(let _e=0;_e<J;_e++){const ye=oe[fe][_e+1],be=oe[fe][_e],Se=oe[fe+1][_e],Ce=oe[fe+1][_e+1];(fe!==0||te>0)&&ce.push(ye,be,Ce),(fe!==Z-1||ie<Math.PI)&&ce.push(be,Se,Ce)}this.setIndex(ce),this.setAttribute("position",new Float32BufferAttribute(ue,3)),this.setAttribute("normal",new Float32BufferAttribute(de,3)),this.setAttribute("uv",new Float32BufferAttribute(me,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new SphereGeometry(_.radius,_.widthSegments,_.heightSegments,_.phiStart,_.phiLength,_.thetaStart,_.thetaLength)}}class TetrahedronGeometry extends PolyhedronGeometry{constructor(_=1,J=0){const Z=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],Q=[2,1,0,0,3,2,1,3,0,2,3,1];super(Z,Q,_,J),this.type="TetrahedronGeometry",this.parameters={radius:_,detail:J}}static fromJSON(_){return new TetrahedronGeometry(_.radius,_.detail)}}class TorusGeometry extends BufferGeometry{constructor(_=1,J=.4,Z=12,Q=48,ee=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:_,tube:J,radialSegments:Z,tubularSegments:Q,arc:ee},Z=Math.floor(Z),Q=Math.floor(Q);const te=[],ne=[],ie=[],re=[],oe=new Vector3,se=new Vector3,ae=new Vector3;for(let ce=0;ce<=Z;ce++)for(let ue=0;ue<=Q;ue++){const de=ue/Q*ee,me=ce/Z*Math.PI*2;se.x=(_+J*Math.cos(me))*Math.cos(de),se.y=(_+J*Math.cos(me))*Math.sin(de),se.z=J*Math.sin(me),ne.push(se.x,se.y,se.z),oe.x=_*Math.cos(de),oe.y=_*Math.sin(de),ae.subVectors(se,oe).normalize(),ie.push(ae.x,ae.y,ae.z),re.push(ue/Q),re.push(ce/Z)}for(let ce=1;ce<=Z;ce++)for(let ue=1;ue<=Q;ue++){const de=(Q+1)*ce+ue-1,me=(Q+1)*(ce-1)+ue-1,fe=(Q+1)*(ce-1)+ue,_e=(Q+1)*ce+ue;te.push(de,me,_e),te.push(me,fe,_e)}this.setIndex(te),this.setAttribute("position",new Float32BufferAttribute(ne,3)),this.setAttribute("normal",new Float32BufferAttribute(ie,3)),this.setAttribute("uv",new Float32BufferAttribute(re,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new TorusGeometry(_.radius,_.tube,_.radialSegments,_.tubularSegments,_.arc)}}class TorusKnotGeometry extends BufferGeometry{constructor(_=1,J=.4,Z=64,Q=8,ee=2,te=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:_,tube:J,tubularSegments:Z,radialSegments:Q,p:ee,q:te},Z=Math.floor(Z),Q=Math.floor(Q);const ne=[],ie=[],re=[],oe=[],se=new Vector3,ae=new Vector3,ce=new Vector3,ue=new Vector3,de=new Vector3,me=new Vector3,fe=new Vector3;for(let ye=0;ye<=Z;++ye){const be=ye/Z*ee*Math.PI*2;_e(be,ee,te,_,ce),_e(be+.01,ee,te,_,ue),me.subVectors(ue,ce),fe.addVectors(ue,ce),de.crossVectors(me,fe),fe.crossVectors(de,me),de.normalize(),fe.normalize();for(let Se=0;Se<=Q;++Se){const Ce=Se/Q*Math.PI*2,Me=-J*Math.cos(Ce),Re=J*Math.sin(Ce);se.x=ce.x+(Me*fe.x+Re*de.x),se.y=ce.y+(Me*fe.y+Re*de.y),se.z=ce.z+(Me*fe.z+Re*de.z),ie.push(se.x,se.y,se.z),ae.subVectors(se,ce).normalize(),re.push(ae.x,ae.y,ae.z),oe.push(ye/Z),oe.push(Se/Q)}}for(let ye=1;ye<=Z;ye++)for(let be=1;be<=Q;be++){const Se=(Q+1)*(ye-1)+(be-1),Ce=(Q+1)*ye+(be-1),Me=(Q+1)*ye+be,Re=(Q+1)*(ye-1)+be;ne.push(Se,Ce,Re),ne.push(Ce,Me,Re)}this.setIndex(ne),this.setAttribute("position",new Float32BufferAttribute(ie,3)),this.setAttribute("normal",new Float32BufferAttribute(re,3)),this.setAttribute("uv",new Float32BufferAttribute(oe,2));function _e(ye,be,Se,Ce,Me){const Re=Math.cos(ye),Te=Math.sin(ye),Ee=Se/be*ye,De=Math.cos(Ee);Me.x=Ce*(2+De)*.5*Re,Me.y=Ce*(2+De)*Te*.5,Me.z=Ce*Math.sin(Ee)*.5}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new TorusKnotGeometry(_.radius,_.tube,_.tubularSegments,_.radialSegments,_.p,_.q)}}class TubeGeometry extends BufferGeometry{constructor(_=new QuadraticBezierCurve3(new Vector3(-1,-1,0),new Vector3(-1,1,0),new Vector3(1,1,0)),J=64,Z=1,Q=8,ee=!1){super(),this.type="TubeGeometry",this.parameters={path:_,tubularSegments:J,radius:Z,radialSegments:Q,closed:ee};const te=_.computeFrenetFrames(J,ee);this.tangents=te.tangents,this.normals=te.normals,this.binormals=te.binormals;const ne=new Vector3,ie=new Vector3,re=new Vector2;let oe=new Vector3;const se=[],ae=[],ce=[],ue=[];de(),this.setIndex(ue),this.setAttribute("position",new Float32BufferAttribute(se,3)),this.setAttribute("normal",new Float32BufferAttribute(ae,3)),this.setAttribute("uv",new Float32BufferAttribute(ce,2));function de(){for(let ye=0;ye<J;ye++)me(ye);me(ee===!1?J:0),_e(),fe()}function me(ye){oe=_.getPointAt(ye/J,oe);const be=te.normals[ye],Se=te.binormals[ye];for(let Ce=0;Ce<=Q;Ce++){const Me=Ce/Q*Math.PI*2,Re=Math.sin(Me),Te=-Math.cos(Me);ie.x=Te*be.x+Re*Se.x,ie.y=Te*be.y+Re*Se.y,ie.z=Te*be.z+Re*Se.z,ie.normalize(),ae.push(ie.x,ie.y,ie.z),ne.x=oe.x+Z*ie.x,ne.y=oe.y+Z*ie.y,ne.z=oe.z+Z*ie.z,se.push(ne.x,ne.y,ne.z)}}function fe(){for(let ye=1;ye<=J;ye++)for(let be=1;be<=Q;be++){const Se=(Q+1)*(ye-1)+(be-1),Ce=(Q+1)*ye+(be-1),Me=(Q+1)*ye+be,Re=(Q+1)*(ye-1)+be;ue.push(Se,Ce,Re),ue.push(Ce,Me,Re)}}function _e(){for(let ye=0;ye<=J;ye++)for(let be=0;be<=Q;be++)re.x=ye/J,re.y=be/Q,ce.push(re.x,re.y)}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}toJSON(){const _=super.toJSON();return _.path=this.parameters.path.toJSON(),_}static fromJSON(_){return new TubeGeometry(new Curves[_.path.type]().fromJSON(_.path),_.tubularSegments,_.radius,_.radialSegments,_.closed)}}class WireframeGeometry extends BufferGeometry{constructor(_=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:_},_!==null){const J=[],Z=new Set,Q=new Vector3,ee=new Vector3;if(_.index!==null){const te=_.attributes.position,ne=_.index;let ie=_.groups;ie.length===0&&(ie=[{start:0,count:ne.count,materialIndex:0}]);for(let re=0,oe=ie.length;re<oe;++re){const se=ie[re],ae=se.start,ce=se.count;for(let ue=ae,de=ae+ce;ue<de;ue+=3)for(let me=0;me<3;me++){const fe=ne.getX(ue+me),_e=ne.getX(ue+(me+1)%3);Q.fromBufferAttribute(te,fe),ee.fromBufferAttribute(te,_e),isUniqueEdge(Q,ee,Z)===!0&&(J.push(Q.x,Q.y,Q.z),J.push(ee.x,ee.y,ee.z))}}}else{const te=_.attributes.position;for(let ne=0,ie=te.count/3;ne<ie;ne++)for(let re=0;re<3;re++){const oe=3*ne+re,se=3*ne+(re+1)%3;Q.fromBufferAttribute(te,oe),ee.fromBufferAttribute(te,se),isUniqueEdge(Q,ee,Z)===!0&&(J.push(Q.x,Q.y,Q.z),J.push(ee.x,ee.y,ee.z))}}this.setAttribute("position",new Float32BufferAttribute(J,3))}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}}function isUniqueEdge(G,_,J){const Z=`${G.x},${G.y},${G.z}-${_.x},${_.y},${_.z}`,Q=`${_.x},${_.y},${_.z}-${G.x},${G.y},${G.z}`;return J.has(Z)===!0||J.has(Q)===!0?!1:(J.add(Z),J.add(Q),!0)}var Geometries=Object.freeze({__proto__:null,BoxGeometry,CapsuleGeometry,CircleGeometry,ConeGeometry,CylinderGeometry,DodecahedronGeometry,EdgesGeometry,ExtrudeGeometry,IcosahedronGeometry,LatheGeometry,OctahedronGeometry,PlaneGeometry,PolyhedronGeometry,RingGeometry,ShapeGeometry,SphereGeometry,TetrahedronGeometry,TorusGeometry,TorusKnotGeometry,TubeGeometry,WireframeGeometry});class ShadowMaterial extends Material{constructor(_){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.fog=_.fog,this}}class RawShaderMaterial extends ShaderMaterial{constructor(_){super(_),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class MeshStandardMaterial extends Material{constructor(_){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.defines={STANDARD:""},this.color.copy(_.color),this.roughness=_.roughness,this.metalness=_.metalness,this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.roughnessMap=_.roughnessMap,this.metalnessMap=_.metalnessMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.envMapRotation.copy(_.envMapRotation),this.envMapIntensity=_.envMapIntensity,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.flatShading=_.flatShading,this.fog=_.fog,this}}class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(_){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(J){this.ior=(1+.4*J)/(1-.4*J)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Color(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Color(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(_)}get anisotropy(){return this._anisotropy}set anisotropy(_){this._anisotropy>0!=_>0&&this.version++,this._anisotropy=_}get clearcoat(){return this._clearcoat}set clearcoat(_){this._clearcoat>0!=_>0&&this.version++,this._clearcoat=_}get iridescence(){return this._iridescence}set iridescence(_){this._iridescence>0!=_>0&&this.version++,this._iridescence=_}get dispersion(){return this._dispersion}set dispersion(_){this._dispersion>0!=_>0&&this.version++,this._dispersion=_}get sheen(){return this._sheen}set sheen(_){this._sheen>0!=_>0&&this.version++,this._sheen=_}get transmission(){return this._transmission}set transmission(_){this._transmission>0!=_>0&&this.version++,this._transmission=_}copy(_){return super.copy(_),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=_.anisotropy,this.anisotropyRotation=_.anisotropyRotation,this.anisotropyMap=_.anisotropyMap,this.clearcoat=_.clearcoat,this.clearcoatMap=_.clearcoatMap,this.clearcoatRoughness=_.clearcoatRoughness,this.clearcoatRoughnessMap=_.clearcoatRoughnessMap,this.clearcoatNormalMap=_.clearcoatNormalMap,this.clearcoatNormalScale.copy(_.clearcoatNormalScale),this.dispersion=_.dispersion,this.ior=_.ior,this.iridescence=_.iridescence,this.iridescenceMap=_.iridescenceMap,this.iridescenceIOR=_.iridescenceIOR,this.iridescenceThicknessRange=[..._.iridescenceThicknessRange],this.iridescenceThicknessMap=_.iridescenceThicknessMap,this.sheen=_.sheen,this.sheenColor.copy(_.sheenColor),this.sheenColorMap=_.sheenColorMap,this.sheenRoughness=_.sheenRoughness,this.sheenRoughnessMap=_.sheenRoughnessMap,this.transmission=_.transmission,this.transmissionMap=_.transmissionMap,this.thickness=_.thickness,this.thicknessMap=_.thicknessMap,this.attenuationDistance=_.attenuationDistance,this.attenuationColor.copy(_.attenuationColor),this.specularIntensity=_.specularIntensity,this.specularIntensityMap=_.specularIntensityMap,this.specularColor.copy(_.specularColor),this.specularColorMap=_.specularColorMap,this}}class MeshPhongMaterial extends Material{constructor(_){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.specular.copy(_.specular),this.shininess=_.shininess,this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.specularMap=_.specularMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.envMapRotation.copy(_.envMapRotation),this.combine=_.combine,this.reflectivity=_.reflectivity,this.refractionRatio=_.refractionRatio,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.flatShading=_.flatShading,this.fog=_.fog,this}}class MeshToonMaterial extends Material{constructor(_){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.gradientMap=_.gradientMap,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.alphaMap=_.alphaMap,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.fog=_.fog,this}}class MeshNormalMaterial extends Material{constructor(_){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(_)}copy(_){return super.copy(_),this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.flatShading=_.flatShading,this}}class MeshLambertMaterial extends Material{constructor(_){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.specularMap=_.specularMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.envMapRotation.copy(_.envMapRotation),this.combine=_.combine,this.reflectivity=_.reflectivity,this.refractionRatio=_.refractionRatio,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.flatShading=_.flatShading,this.fog=_.fog,this}}class MeshDepthMaterial extends Material{constructor(_){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(_)}copy(_){return super.copy(_),this.depthPacking=_.depthPacking,this.map=_.map,this.alphaMap=_.alphaMap,this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(_){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(_)}copy(_){return super.copy(_),this.map=_.map,this.alphaMap=_.alphaMap,this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this}}class MeshMatcapMaterial extends Material{constructor(_){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.defines={MATCAP:""},this.color.copy(_.color),this.matcap=_.matcap,this.map=_.map,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.alphaMap=_.alphaMap,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.flatShading=_.flatShading,this.fog=_.fog,this}}class LineDashedMaterial extends LineBasicMaterial{constructor(_){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(_)}copy(_){return super.copy(_),this.scale=_.scale,this.dashSize=_.dashSize,this.gapSize=_.gapSize,this}}function convertArray(G,_){return!G||G.constructor===_?G:typeof _.BYTES_PER_ELEMENT=="number"?new _(G):Array.prototype.slice.call(G)}function isTypedArray(G){return ArrayBuffer.isView(G)&&!(G instanceof DataView)}function getKeyframeOrder(G){function _(Q,ee){return G[Q]-G[ee]}const J=G.length,Z=new Array(J);for(let Q=0;Q!==J;++Q)Z[Q]=Q;return Z.sort(_),Z}function sortedArray(G,_,J){const Z=G.length,Q=new G.constructor(Z);for(let ee=0,te=0;te!==Z;++ee){const ne=J[ee]*_;for(let ie=0;ie!==_;++ie)Q[te++]=G[ne+ie]}return Q}function flattenJSON(G,_,J,Z){let Q=1,ee=G[0];for(;ee!==void 0&&ee[Z]===void 0;)ee=G[Q++];if(ee===void 0)return;let te=ee[Z];if(te!==void 0)if(Array.isArray(te))do te=ee[Z],te!==void 0&&(_.push(ee.time),J.push(...te)),ee=G[Q++];while(ee!==void 0);else if(te.toArray!==void 0)do te=ee[Z],te!==void 0&&(_.push(ee.time),te.toArray(J,J.length)),ee=G[Q++];while(ee!==void 0);else do te=ee[Z],te!==void 0&&(_.push(ee.time),J.push(te)),ee=G[Q++];while(ee!==void 0)}function subclip(G,_,J,Z,Q=30){const ee=G.clone();ee.name=_;const te=[];for(let ie=0;ie<ee.tracks.length;++ie){const re=ee.tracks[ie],oe=re.getValueSize(),se=[],ae=[];for(let ce=0;ce<re.times.length;++ce){const ue=re.times[ce]*Q;if(!(ue<J||ue>=Z)){se.push(re.times[ce]);for(let de=0;de<oe;++de)ae.push(re.values[ce*oe+de])}}se.length!==0&&(re.times=convertArray(se,re.times.constructor),re.values=convertArray(ae,re.values.constructor),te.push(re))}ee.tracks=te;let ne=1/0;for(let ie=0;ie<ee.tracks.length;++ie)ne>ee.tracks[ie].times[0]&&(ne=ee.tracks[ie].times[0]);for(let ie=0;ie<ee.tracks.length;++ie)ee.tracks[ie].shift(-1*ne);return ee.resetDuration(),ee}function makeClipAdditive(G,_=0,J=G,Z=30){Z<=0&&(Z=30);const Q=J.tracks.length,ee=_/Z;for(let te=0;te<Q;++te){const ne=J.tracks[te],ie=ne.ValueTypeName;if(ie==="bool"||ie==="string")continue;const re=G.tracks.find(function(fe){return fe.name===ne.name&&fe.ValueTypeName===ie});if(re===void 0)continue;let oe=0;const se=ne.getValueSize();ne.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(oe=se/3);let ae=0;const ce=re.getValueSize();re.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(ae=ce/3);const ue=ne.times.length-1;let de;if(ee<=ne.times[0]){const fe=oe,_e=se-oe;de=ne.values.slice(fe,_e)}else if(ee>=ne.times[ue]){const fe=ue*se+oe,_e=fe+se-oe;de=ne.values.slice(fe,_e)}else{const fe=ne.createInterpolant(),_e=oe,ye=se-oe;fe.evaluate(ee),de=fe.resultBuffer.slice(_e,ye)}ie==="quaternion"&&new Quaternion().fromArray(de).normalize().conjugate().toArray(de);const me=re.times.length;for(let fe=0;fe<me;++fe){const _e=fe*ce+ae;if(ie==="quaternion")Quaternion.multiplyQuaternionsFlat(re.values,_e,de,0,re.values,_e);else{const ye=ce-ae*2;for(let be=0;be<ye;++be)re.values[_e+be]-=de[be]}}}return G.blendMode=AdditiveAnimationBlendMode,G}class AnimationUtils{static convertArray(_,J){return convertArray(_,J)}static isTypedArray(_){return isTypedArray(_)}static getKeyframeOrder(_){return getKeyframeOrder(_)}static sortedArray(_,J,Z){return sortedArray(_,J,Z)}static flattenJSON(_,J,Z,Q){flattenJSON(_,J,Z,Q)}static subclip(_,J,Z,Q,ee=30){return subclip(_,J,Z,Q,ee)}static makeClipAdditive(_,J=0,Z=_,Q=30){return makeClipAdditive(_,J,Z,Q)}}class Interpolant{constructor(_,J,Z,Q){this.parameterPositions=_,this._cachedIndex=0,this.resultBuffer=Q!==void 0?Q:new J.constructor(Z),this.sampleValues=J,this.valueSize=Z,this.settings=null,this.DefaultSettings_={}}evaluate(_){const J=this.parameterPositions;let Z=this._cachedIndex,Q=J[Z],ee=J[Z-1];e:{t:{let te;i:{n:if(!(_<Q)){for(let ne=Z+2;;){if(Q===void 0){if(_<ee)break n;return Z=J.length,this._cachedIndex=Z,this.copySampleValue_(Z-1)}if(Z===ne)break;if(ee=Q,Q=J[++Z],_<Q)break t}te=J.length;break i}if(!(_>=ee)){const ne=J[1];_<ne&&(Z=2,ee=ne);for(let ie=Z-2;;){if(ee===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(Z===ie)break;if(Q=ee,ee=J[--Z-1],_>=ee)break t}te=Z,Z=0;break i}break e}for(;Z<te;){const ne=Z+te>>>1;_<J[ne]?te=ne:Z=ne+1}if(Q=J[Z],ee=J[Z-1],ee===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(Q===void 0)return Z=J.length,this._cachedIndex=Z,this.copySampleValue_(Z-1)}this._cachedIndex=Z,this.intervalChanged_(Z,ee,Q)}return this.interpolate_(Z,ee,_,Q)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(_){const J=this.resultBuffer,Z=this.sampleValues,Q=this.valueSize,ee=_*Q;for(let te=0;te!==Q;++te)J[te]=Z[ee+te];return J}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor(_,J,Z,Q){super(_,J,Z,Q),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding}}intervalChanged_(_,J,Z){const Q=this.parameterPositions;let ee=_-2,te=_+1,ne=Q[ee],ie=Q[te];if(ne===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:ee=_,ne=2*J-Z;break;case WrapAroundEnding:ee=Q.length-2,ne=J+Q[ee]-Q[ee+1];break;default:ee=_,ne=Z}if(ie===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:te=_,ie=2*Z-J;break;case WrapAroundEnding:te=1,ie=Z+Q[1]-Q[0];break;default:te=_-1,ie=J}const re=(Z-J)*.5,oe=this.valueSize;this._weightPrev=re/(J-ne),this._weightNext=re/(ie-Z),this._offsetPrev=ee*oe,this._offsetNext=te*oe}interpolate_(_,J,Z,Q){const ee=this.resultBuffer,te=this.sampleValues,ne=this.valueSize,ie=_*ne,re=ie-ne,oe=this._offsetPrev,se=this._offsetNext,ae=this._weightPrev,ce=this._weightNext,ue=(Z-J)/(Q-J),de=ue*ue,me=de*ue,fe=-ae*me+2*ae*de-ae*ue,_e=(1+ae)*me+(-1.5-2*ae)*de+(-.5+ae)*ue+1,ye=(-1-ce)*me+(1.5+ce)*de+.5*ue,be=ce*me-ce*de;for(let Se=0;Se!==ne;++Se)ee[Se]=fe*te[oe+Se]+_e*te[re+Se]+ye*te[ie+Se]+be*te[se+Se];return ee}}class LinearInterpolant extends Interpolant{constructor(_,J,Z,Q){super(_,J,Z,Q)}interpolate_(_,J,Z,Q){const ee=this.resultBuffer,te=this.sampleValues,ne=this.valueSize,ie=_*ne,re=ie-ne,oe=(Z-J)/(Q-J),se=1-oe;for(let ae=0;ae!==ne;++ae)ee[ae]=te[re+ae]*se+te[ie+ae]*oe;return ee}}class DiscreteInterpolant extends Interpolant{constructor(_,J,Z,Q){super(_,J,Z,Q)}interpolate_(_){return this.copySampleValue_(_-1)}}class KeyframeTrack{constructor(_,J,Z,Q){if(_===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(J===void 0||J.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+_);this.name=_,this.times=convertArray(J,this.TimeBufferType),this.values=convertArray(Z,this.ValueBufferType),this.setInterpolation(Q||this.DefaultInterpolation)}static toJSON(_){const J=_.constructor;let Z;if(J.toJSON!==this.toJSON)Z=J.toJSON(_);else{Z={name:_.name,times:convertArray(_.times,Array),values:convertArray(_.values,Array)};const Q=_.getInterpolation();Q!==_.DefaultInterpolation&&(Z.interpolation=Q)}return Z.type=_.ValueTypeName,Z}InterpolantFactoryMethodDiscrete(_){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),_)}InterpolantFactoryMethodLinear(_){return new LinearInterpolant(this.times,this.values,this.getValueSize(),_)}InterpolantFactoryMethodSmooth(_){return new CubicInterpolant(this.times,this.values,this.getValueSize(),_)}setInterpolation(_){let J;switch(_){case InterpolateDiscrete:J=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:J=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:J=this.InterpolantFactoryMethodSmooth;break}if(J===void 0){const Z="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(_!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(Z);return warn("KeyframeTrack:",Z),this}return this.createInterpolant=J,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}}getValueSize(){return this.values.length/this.times.length}shift(_){if(_!==0){const J=this.times;for(let Z=0,Q=J.length;Z!==Q;++Z)J[Z]+=_}return this}scale(_){if(_!==1){const J=this.times;for(let Z=0,Q=J.length;Z!==Q;++Z)J[Z]*=_}return this}trim(_,J){const Z=this.times,Q=Z.length;let ee=0,te=Q-1;for(;ee!==Q&&Z[ee]<_;)++ee;for(;te!==-1&&Z[te]>J;)--te;if(++te,ee!==0||te!==Q){ee>=te&&(te=Math.max(te,1),ee=te-1);const ne=this.getValueSize();this.times=Z.slice(ee,te),this.values=this.values.slice(ee*ne,te*ne)}return this}validate(){let _=!0;const J=this.getValueSize();J-Math.floor(J)!==0&&(error("KeyframeTrack: Invalid value size in track.",this),_=!1);const Z=this.times,Q=this.values,ee=Z.length;ee===0&&(error("KeyframeTrack: Track is empty.",this),_=!1);let te=null;for(let ne=0;ne!==ee;ne++){const ie=Z[ne];if(typeof ie=="number"&&isNaN(ie)){error("KeyframeTrack: Time is not a valid number.",this,ne,ie),_=!1;break}if(te!==null&&te>ie){error("KeyframeTrack: Out of order keys.",this,ne,ie,te),_=!1;break}te=ie}if(Q!==void 0&&isTypedArray(Q))for(let ne=0,ie=Q.length;ne!==ie;++ne){const re=Q[ne];if(isNaN(re)){error("KeyframeTrack: Value is not a valid number.",this,ne,re),_=!1;break}}return _}optimize(){const _=this.times.slice(),J=this.values.slice(),Z=this.getValueSize(),Q=this.getInterpolation()===InterpolateSmooth,ee=_.length-1;let te=1;for(let ne=1;ne<ee;++ne){let ie=!1;const re=_[ne],oe=_[ne+1];if(re!==oe&&(ne!==1||re!==_[0]))if(Q)ie=!0;else{const se=ne*Z,ae=se-Z,ce=se+Z;for(let ue=0;ue!==Z;++ue){const de=J[se+ue];if(de!==J[ae+ue]||de!==J[ce+ue]){ie=!0;break}}}if(ie){if(ne!==te){_[te]=_[ne];const se=ne*Z,ae=te*Z;for(let ce=0;ce!==Z;++ce)J[ae+ce]=J[se+ce]}++te}}if(ee>0){_[te]=_[ee];for(let ne=ee*Z,ie=te*Z,re=0;re!==Z;++re)J[ie+re]=J[ne+re];++te}return te!==_.length?(this.times=_.slice(0,te),this.values=J.slice(0,te*Z)):(this.times=_,this.values=J),this}clone(){const _=this.times.slice(),J=this.values.slice(),Z=this.constructor,Q=new Z(this.name,_,J);return Q.createInterpolant=this.createInterpolant,Q}}KeyframeTrack.prototype.ValueTypeName="";KeyframeTrack.prototype.TimeBufferType=Float32Array;KeyframeTrack.prototype.ValueBufferType=Float32Array;KeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;class BooleanKeyframeTrack extends KeyframeTrack{constructor(_,J,Z){super(_,J,Z)}}BooleanKeyframeTrack.prototype.ValueTypeName="bool";BooleanKeyframeTrack.prototype.ValueBufferType=Array;BooleanKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{constructor(_,J,Z,Q){super(_,J,Z,Q)}}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{constructor(_,J,Z,Q){super(_,J,Z,Q)}}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(_,J,Z,Q){super(_,J,Z,Q)}interpolate_(_,J,Z,Q){const ee=this.resultBuffer,te=this.sampleValues,ne=this.valueSize,ie=(Z-J)/(Q-J);let re=_*ne;for(let oe=re+ne;re!==oe;re+=4)Quaternion.slerpFlat(ee,0,te,re-ne,te,re,ie);return ee}}class QuaternionKeyframeTrack extends KeyframeTrack{constructor(_,J,Z,Q){super(_,J,Z,Q)}InterpolantFactoryMethodLinear(_){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),_)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion";QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{constructor(_,J,Z){super(_,J,Z)}}StringKeyframeTrack.prototype.ValueTypeName="string";StringKeyframeTrack.prototype.ValueBufferType=Array;StringKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{constructor(_,J,Z,Q){super(_,J,Z,Q)}}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(_="",J=-1,Z=[],Q=NormalAnimationBlendMode){this.name=_,this.tracks=Z,this.duration=J,this.blendMode=Q,this.uuid=generateUUID(),this.userData={},this.duration<0&&this.resetDuration()}static parse(_){const J=[],Z=_.tracks,Q=1/(_.fps||1);for(let te=0,ne=Z.length;te!==ne;++te)J.push(parseKeyframeTrack(Z[te]).scale(Q));const ee=new this(_.name,_.duration,J,_.blendMode);return ee.uuid=_.uuid,ee.userData=JSON.parse(_.userData||"{}"),ee}static toJSON(_){const J=[],Z=_.tracks,Q={name:_.name,duration:_.duration,tracks:J,uuid:_.uuid,blendMode:_.blendMode,userData:JSON.stringify(_.userData)};for(let ee=0,te=Z.length;ee!==te;++ee)J.push(KeyframeTrack.toJSON(Z[ee]));return Q}static CreateFromMorphTargetSequence(_,J,Z,Q){const ee=J.length,te=[];for(let ne=0;ne<ee;ne++){let ie=[],re=[];ie.push((ne+ee-1)%ee,ne,(ne+1)%ee),re.push(0,1,0);const oe=getKeyframeOrder(ie);ie=sortedArray(ie,1,oe),re=sortedArray(re,1,oe),!Q&&ie[0]===0&&(ie.push(ee),re.push(re[0])),te.push(new NumberKeyframeTrack(".morphTargetInfluences["+J[ne].name+"]",ie,re).scale(1/Z))}return new this(_,-1,te)}static findByName(_,J){let Z=_;if(!Array.isArray(_)){const Q=_;Z=Q.geometry&&Q.geometry.animations||Q.animations}for(let Q=0;Q<Z.length;Q++)if(Z[Q].name===J)return Z[Q];return null}static CreateClipsFromMorphTargetSequences(_,J,Z){const Q={},ee=/^([\w-]*?)([\d]+)$/;for(let ne=0,ie=_.length;ne<ie;ne++){const re=_[ne],oe=re.name.match(ee);if(oe&&oe.length>1){const se=oe[1];let ae=Q[se];ae||(Q[se]=ae=[]),ae.push(re)}}const te=[];for(const ne in Q)te.push(this.CreateFromMorphTargetSequence(ne,Q[ne],J,Z));return te}static parseAnimation(_,J){if(warn("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!_)return error("AnimationClip: No animation in JSONLoader data."),null;const Z=function(se,ae,ce,ue,de){if(ce.length!==0){const me=[],fe=[];flattenJSON(ce,me,fe,ue),me.length!==0&&de.push(new se(ae,me,fe))}},Q=[],ee=_.name||"default",te=_.fps||30,ne=_.blendMode;let ie=_.length||-1;const re=_.hierarchy||[];for(let se=0;se<re.length;se++){const ae=re[se].keys;if(!(!ae||ae.length===0))if(ae[0].morphTargets){const ce={};let ue;for(ue=0;ue<ae.length;ue++)if(ae[ue].morphTargets)for(let de=0;de<ae[ue].morphTargets.length;de++)ce[ae[ue].morphTargets[de]]=-1;for(const de in ce){const me=[],fe=[];for(let _e=0;_e!==ae[ue].morphTargets.length;++_e){const ye=ae[ue];me.push(ye.time),fe.push(ye.morphTarget===de?1:0)}Q.push(new NumberKeyframeTrack(".morphTargetInfluence["+de+"]",me,fe))}ie=ce.length*te}else{const ce=".bones["+J[se].name+"]";Z(VectorKeyframeTrack,ce+".position",ae,"pos",Q),Z(QuaternionKeyframeTrack,ce+".quaternion",ae,"rot",Q),Z(VectorKeyframeTrack,ce+".scale",ae,"scl",Q)}}return Q.length===0?null:new this(ee,ie,Q,ne)}resetDuration(){const _=this.tracks;let J=0;for(let Z=0,Q=_.length;Z!==Q;++Z){const ee=this.tracks[Z];J=Math.max(J,ee.times[ee.times.length-1])}return this.duration=J,this}trim(){for(let _=0;_<this.tracks.length;_++)this.tracks[_].trim(0,this.duration);return this}validate(){let _=!0;for(let J=0;J<this.tracks.length;J++)_=_&&this.tracks[J].validate();return _}optimize(){for(let _=0;_<this.tracks.length;_++)this.tracks[_].optimize();return this}clone(){const _=[];for(let Z=0;Z<this.tracks.length;Z++)_.push(this.tracks[Z].clone());const J=new this.constructor(this.name,this.duration,_,this.blendMode);return J.userData=JSON.parse(JSON.stringify(this.userData)),J}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName(G){switch(G.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+G)}function parseKeyframeTrack(G){if(G.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const _=getTrackTypeForValueTypeName(G.type);if(G.times===void 0){const J=[],Z=[];flattenJSON(G.keys,J,Z,"value"),G.times=J,G.values=Z}return _.parse!==void 0?_.parse(G):new _(G.name,G.times,G.values,G.interpolation)}const Cache={enabled:!1,files:{},add:function(G,_){this.enabled!==!1&&(this.files[G]=_)},get:function(G){if(this.enabled!==!1)return this.files[G]},remove:function(G){delete this.files[G]},clear:function(){this.files={}}};class LoadingManager{constructor(_,J,Z){const Q=this;let ee=!1,te=0,ne=0,ie;const re=[];this.onStart=void 0,this.onLoad=_,this.onProgress=J,this.onError=Z,this._abortController=null,this.itemStart=function(oe){ne++,ee===!1&&Q.onStart!==void 0&&Q.onStart(oe,te,ne),ee=!0},this.itemEnd=function(oe){te++,Q.onProgress!==void 0&&Q.onProgress(oe,te,ne),te===ne&&(ee=!1,Q.onLoad!==void 0&&Q.onLoad())},this.itemError=function(oe){Q.onError!==void 0&&Q.onError(oe)},this.resolveURL=function(oe){return ie?ie(oe):oe},this.setURLModifier=function(oe){return ie=oe,this},this.addHandler=function(oe,se){return re.push(oe,se),this},this.removeHandler=function(oe){const se=re.indexOf(oe);return se!==-1&&re.splice(se,2),this},this.getHandler=function(oe){for(let se=0,ae=re.length;se<ae;se+=2){const ce=re[se],ue=re[se+1];if(ce.global&&(ce.lastIndex=0),ce.test(oe))return ue}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const DefaultLoadingManager=new LoadingManager;class Loader{constructor(_){this.manager=_!==void 0?_:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(_,J){const Z=this;return new Promise(function(Q,ee){Z.load(_,Q,J,ee)})}parse(){}setCrossOrigin(_){return this.crossOrigin=_,this}setWithCredentials(_){return this.withCredentials=_,this}setPath(_){return this.path=_,this}setResourcePath(_){return this.resourcePath=_,this}setRequestHeader(_){return this.requestHeader=_,this}abort(){return this}}Loader.DEFAULT_MATERIAL_NAME="__DEFAULT";const loading={};class HttpError extends Error{constructor(_,J){super(_),this.response=J}}class FileLoader extends Loader{constructor(_){super(_),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(_,J,Z,Q){_===void 0&&(_=""),this.path!==void 0&&(_=this.path+_),_=this.manager.resolveURL(_);const ee=Cache.get(`file:${_}`);if(ee!==void 0)return this.manager.itemStart(_),setTimeout(()=>{J&&J(ee),this.manager.itemEnd(_)},0),ee;if(loading[_]!==void 0){loading[_].push({onLoad:J,onProgress:Z,onError:Q});return}loading[_]=[],loading[_].push({onLoad:J,onProgress:Z,onError:Q});const te=new Request(_,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),ne=this.mimeType,ie=this.responseType;fetch(te).then(re=>{if(re.status===200||re.status===0){if(re.status===0&&warn("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||re.body===void 0||re.body.getReader===void 0)return re;const oe=loading[_],se=re.body.getReader(),ae=re.headers.get("X-File-Size")||re.headers.get("Content-Length"),ce=ae?parseInt(ae):0,ue=ce!==0;let de=0;const me=new ReadableStream({start(fe){_e();function _e(){se.read().then(({done:ye,value:be})=>{if(ye)fe.close();else{de+=be.byteLength;const Se=new ProgressEvent("progress",{lengthComputable:ue,loaded:de,total:ce});for(let Ce=0,Me=oe.length;Ce<Me;Ce++){const Re=oe[Ce];Re.onProgress&&Re.onProgress(Se)}fe.enqueue(be),_e()}},ye=>{fe.error(ye)})}}});return new Response(me)}else throw new HttpError(`fetch for "${re.url}" responded with ${re.status}: ${re.statusText}`,re)}).then(re=>{switch(ie){case"arraybuffer":return re.arrayBuffer();case"blob":return re.blob();case"document":return re.text().then(oe=>new DOMParser().parseFromString(oe,ne));case"json":return re.json();default:if(ne==="")return re.text();{const se=/charset="?([^;"\s]*)"?/i.exec(ne),ae=se&&se[1]?se[1].toLowerCase():void 0,ce=new TextDecoder(ae);return re.arrayBuffer().then(ue=>ce.decode(ue))}}}).then(re=>{Cache.add(`file:${_}`,re);const oe=loading[_];delete loading[_];for(let se=0,ae=oe.length;se<ae;se++){const ce=oe[se];ce.onLoad&&ce.onLoad(re)}}).catch(re=>{const oe=loading[_];if(oe===void 0)throw this.manager.itemError(_),re;delete loading[_];for(let se=0,ae=oe.length;se<ae;se++){const ce=oe[se];ce.onError&&ce.onError(re)}this.manager.itemError(_)}).finally(()=>{this.manager.itemEnd(_)}),this.manager.itemStart(_)}setResponseType(_){return this.responseType=_,this}setMimeType(_){return this.mimeType=_,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class AnimationLoader extends Loader{constructor(_){super(_)}load(_,J,Z,Q){const ee=this,te=new FileLoader(this.manager);te.setPath(this.path),te.setRequestHeader(this.requestHeader),te.setWithCredentials(this.withCredentials),te.load(_,function(ne){try{J(ee.parse(JSON.parse(ne)))}catch(ie){Q?Q(ie):error(ie),ee.manager.itemError(_)}},Z,Q)}parse(_){const J=[];for(let Z=0;Z<_.length;Z++){const Q=AnimationClip.parse(_[Z]);J.push(Q)}return J}}class CompressedTextureLoader extends Loader{constructor(_){super(_)}load(_,J,Z,Q){const ee=this,te=[],ne=new CompressedTexture,ie=new FileLoader(this.manager);ie.setPath(this.path),ie.setResponseType("arraybuffer"),ie.setRequestHeader(this.requestHeader),ie.setWithCredentials(ee.withCredentials);let re=0;function oe(se){ie.load(_[se],function(ae){const ce=ee.parse(ae,!0);te[se]={width:ce.width,height:ce.height,format:ce.format,mipmaps:ce.mipmaps},re+=1,re===6&&(ce.mipmapCount===1&&(ne.minFilter=LinearFilter),ne.image=te,ne.format=ce.format,ne.needsUpdate=!0,J&&J(ne))},Z,Q)}if(Array.isArray(_))for(let se=0,ae=_.length;se<ae;++se)oe(se);else ie.load(_,function(se){const ae=ee.parse(se,!0);if(ae.isCubemap){const ce=ae.mipmaps.length/ae.mipmapCount;for(let ue=0;ue<ce;ue++){te[ue]={mipmaps:[]};for(let de=0;de<ae.mipmapCount;de++)te[ue].mipmaps.push(ae.mipmaps[ue*ae.mipmapCount+de]),te[ue].format=ae.format,te[ue].width=ae.width,te[ue].height=ae.height}ne.image=te}else ne.image.width=ae.width,ne.image.height=ae.height,ne.mipmaps=ae.mipmaps;ae.mipmapCount===1&&(ne.minFilter=LinearFilter),ne.format=ae.format,ne.needsUpdate=!0,J&&J(ne)},Z,Q);return ne}}const _loading=new WeakMap;class ImageLoader extends Loader{constructor(_){super(_)}load(_,J,Z,Q){this.path!==void 0&&(_=this.path+_),_=this.manager.resolveURL(_);const ee=this,te=Cache.get(`image:${_}`);if(te!==void 0){if(te.complete===!0)ee.manager.itemStart(_),setTimeout(function(){J&&J(te),ee.manager.itemEnd(_)},0);else{let se=_loading.get(te);se===void 0&&(se=[],_loading.set(te,se)),se.push({onLoad:J,onError:Q})}return te}const ne=createElementNS("img");function ie(){oe(),J&&J(this);const se=_loading.get(this)||[];for(let ae=0;ae<se.length;ae++){const ce=se[ae];ce.onLoad&&ce.onLoad(this)}_loading.delete(this),ee.manager.itemEnd(_)}function re(se){oe(),Q&&Q(se),Cache.remove(`image:${_}`);const ae=_loading.get(this)||[];for(let ce=0;ce<ae.length;ce++){const ue=ae[ce];ue.onError&&ue.onError(se)}_loading.delete(this),ee.manager.itemError(_),ee.manager.itemEnd(_)}function oe(){ne.removeEventListener("load",ie,!1),ne.removeEventListener("error",re,!1)}return ne.addEventListener("load",ie,!1),ne.addEventListener("error",re,!1),_.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(ne.crossOrigin=this.crossOrigin),Cache.add(`image:${_}`,ne),ee.manager.itemStart(_),ne.src=_,ne}}class CubeTextureLoader extends Loader{constructor(_){super(_)}load(_,J,Z,Q){const ee=new CubeTexture;ee.colorSpace=SRGBColorSpace;const te=new ImageLoader(this.manager);te.setCrossOrigin(this.crossOrigin),te.setPath(this.path);let ne=0;function ie(re){te.load(_[re],function(oe){ee.images[re]=oe,ne++,ne===6&&(ee.needsUpdate=!0,J&&J(ee))},void 0,Q)}for(let re=0;re<_.length;++re)ie(re);return ee}}class DataTextureLoader extends Loader{constructor(_){super(_)}load(_,J,Z,Q){const ee=this,te=new DataTexture,ne=new FileLoader(this.manager);return ne.setResponseType("arraybuffer"),ne.setRequestHeader(this.requestHeader),ne.setPath(this.path),ne.setWithCredentials(ee.withCredentials),ne.load(_,function(ie){let re;try{re=ee.parse(ie)}catch(oe){if(Q!==void 0)Q(oe);else{oe(oe);return}}re.image!==void 0?te.image=re.image:re.data!==void 0&&(te.image.width=re.width,te.image.height=re.height,te.image.data=re.data),te.wrapS=re.wrapS!==void 0?re.wrapS:ClampToEdgeWrapping,te.wrapT=re.wrapT!==void 0?re.wrapT:ClampToEdgeWrapping,te.magFilter=re.magFilter!==void 0?re.magFilter:LinearFilter,te.minFilter=re.minFilter!==void 0?re.minFilter:LinearFilter,te.anisotropy=re.anisotropy!==void 0?re.anisotropy:1,re.colorSpace!==void 0&&(te.colorSpace=re.colorSpace),re.flipY!==void 0&&(te.flipY=re.flipY),re.format!==void 0&&(te.format=re.format),re.type!==void 0&&(te.type=re.type),re.mipmaps!==void 0&&(te.mipmaps=re.mipmaps,te.minFilter=LinearMipmapLinearFilter),re.mipmapCount===1&&(te.minFilter=LinearFilter),re.generateMipmaps!==void 0&&(te.generateMipmaps=re.generateMipmaps),te.needsUpdate=!0,J&&J(te,re)},Z,Q),te}}class TextureLoader extends Loader{constructor(_){super(_)}load(_,J,Z,Q){const ee=new Texture,te=new ImageLoader(this.manager);return te.setCrossOrigin(this.crossOrigin),te.setPath(this.path),te.load(_,function(ne){ee.image=ne,ee.needsUpdate=!0,J!==void 0&&J(ee)},Z,Q),ee}}class Light extends Object3D{constructor(_,J=1){super(),this.isLight=!0,this.type="Light",this.color=new Color(_),this.intensity=J}dispose(){}copy(_,J){return super.copy(_,J),this.color.copy(_.color),this.intensity=_.intensity,this}toJSON(_){const J=super.toJSON(_);return J.object.color=this.color.getHex(),J.object.intensity=this.intensity,this.groundColor!==void 0&&(J.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(J.object.distance=this.distance),this.angle!==void 0&&(J.object.angle=this.angle),this.decay!==void 0&&(J.object.decay=this.decay),this.penumbra!==void 0&&(J.object.penumbra=this.penumbra),this.shadow!==void 0&&(J.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(J.object.target=this.target.uuid),J}}class HemisphereLight extends Light{constructor(_,J,Z){super(_,Z),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Color(J)}copy(_,J){return super.copy(_,J),this.groundColor.copy(_.groundColor),this}}const _projScreenMatrix$1=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(_){this.camera=_,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.mapType=UnsignedByteType,this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(_){const J=this.camera,Z=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(_.matrixWorld),J.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(_.target.matrixWorld),J.lookAt(_lookTarget$1),J.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(J.projectionMatrix,J.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1,J.coordinateSystem,J.reversedDepth),J.reversedDepth?Z.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):Z.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),Z.multiply(_projScreenMatrix$1)}getViewport(_){return this._viewports[_]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(_){return this.camera=_.camera.clone(),this.intensity=_.intensity,this.bias=_.bias,this.radius=_.radius,this.autoUpdate=_.autoUpdate,this.needsUpdate=_.needsUpdate,this.normalBias=_.normalBias,this.blurSamples=_.blurSamples,this.mapSize.copy(_.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const _={};return this.intensity!==1&&(_.intensity=this.intensity),this.bias!==0&&(_.bias=this.bias),this.normalBias!==0&&(_.normalBias=this.normalBias),this.radius!==1&&(_.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(_.mapSize=this.mapSize.toArray()),_.camera=this.camera.toJSON(!1).object,delete _.camera.matrix,_}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(_){const J=this.camera,Z=RAD2DEG*2*_.angle*this.focus,Q=this.mapSize.width/this.mapSize.height*this.aspect,ee=_.distance||J.far;(Z!==J.fov||Q!==J.aspect||ee!==J.far)&&(J.fov=Z,J.aspect=Q,J.far=ee,J.updateProjectionMatrix()),super.updateMatrices(_)}copy(_){return super.copy(_),this.focus=_.focus,this}}class SpotLight extends Light{constructor(_,J,Z=0,Q=Math.PI/3,ee=0,te=2){super(_,J),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.distance=Z,this.angle=Q,this.penumbra=ee,this.decay=te,this.map=null,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(_){this.intensity=_/Math.PI}dispose(){this.shadow.dispose()}copy(_,J){return super.copy(_,J),this.distance=_.distance,this.angle=_.angle,this.penumbra=_.penumbra,this.decay=_.decay,this.target=_.target.clone(),this.shadow=_.shadow.clone(),this}}const _projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(_,J=0){const Z=this.camera,Q=this.matrix,ee=_.distance||Z.far;ee!==Z.far&&(Z.far=ee,Z.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(_.matrixWorld),Z.position.copy(_lightPositionWorld),_lookTarget.copy(Z.position),_lookTarget.add(this._cubeDirections[J]),Z.up.copy(this._cubeUps[J]),Z.lookAt(_lookTarget),Z.updateMatrixWorld(),Q.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(Z.projectionMatrix,Z.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix,Z.coordinateSystem,Z.reversedDepth)}}class PointLight extends Light{constructor(_,J,Z=0,Q=2){super(_,J),this.isPointLight=!0,this.type="PointLight",this.distance=Z,this.decay=Q,this.shadow=new PointLightShadow}get power(){return this.intensity*4*Math.PI}set power(_){this.intensity=_/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(_,J){return super.copy(_,J),this.distance=_.distance,this.decay=_.decay,this.shadow=_.shadow.clone(),this}}class OrthographicCamera extends Camera{constructor(_=-1,J=1,Z=1,Q=-1,ee=.1,te=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=_,this.right=J,this.top=Z,this.bottom=Q,this.near=ee,this.far=te,this.updateProjectionMatrix()}copy(_,J){return super.copy(_,J),this.left=_.left,this.right=_.right,this.top=_.top,this.bottom=_.bottom,this.near=_.near,this.far=_.far,this.zoom=_.zoom,this.view=_.view===null?null:Object.assign({},_.view),this}setViewOffset(_,J,Z,Q,ee,te){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=_,this.view.fullHeight=J,this.view.offsetX=Z,this.view.offsetY=Q,this.view.width=ee,this.view.height=te,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const _=(this.right-this.left)/(2*this.zoom),J=(this.top-this.bottom)/(2*this.zoom),Z=(this.right+this.left)/2,Q=(this.top+this.bottom)/2;let ee=Z-_,te=Z+_,ne=Q+J,ie=Q-J;if(this.view!==null&&this.view.enabled){const re=(this.right-this.left)/this.view.fullWidth/this.zoom,oe=(this.top-this.bottom)/this.view.fullHeight/this.zoom;ee+=re*this.view.offsetX,te=ee+re*this.view.width,ne-=oe*this.view.offsetY,ie=ne-oe*this.view.height}this.projectionMatrix.makeOrthographic(ee,te,ne,ie,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(_){const J=super.toJSON(_);return J.object.zoom=this.zoom,J.object.left=this.left,J.object.right=this.right,J.object.top=this.top,J.object.bottom=this.bottom,J.object.near=this.near,J.object.far=this.far,this.view!==null&&(J.object.view=Object.assign({},this.view)),J}}class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class DirectionalLight extends Light{constructor(_,J){super(_,J),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(_){return super.copy(_),this.target=_.target.clone(),this.shadow=_.shadow.clone(),this}}class AmbientLight extends Light{constructor(_,J){super(_,J),this.isAmbientLight=!0,this.type="AmbientLight"}}class RectAreaLight extends Light{constructor(_,J,Z=10,Q=10){super(_,J),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=Z,this.height=Q}get power(){return this.intensity*this.width*this.height*Math.PI}set power(_){this.intensity=_/(this.width*this.height*Math.PI)}copy(_){return super.copy(_),this.width=_.width,this.height=_.height,this}toJSON(_){const J=super.toJSON(_);return J.object.width=this.width,J.object.height=this.height,J}}class SphericalHarmonics3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let _=0;_<9;_++)this.coefficients.push(new Vector3)}set(_){for(let J=0;J<9;J++)this.coefficients[J].copy(_[J]);return this}zero(){for(let _=0;_<9;_++)this.coefficients[_].set(0,0,0);return this}getAt(_,J){const Z=_.x,Q=_.y,ee=_.z,te=this.coefficients;return J.copy(te[0]).multiplyScalar(.282095),J.addScaledVector(te[1],.488603*Q),J.addScaledVector(te[2],.488603*ee),J.addScaledVector(te[3],.488603*Z),J.addScaledVector(te[4],1.092548*(Z*Q)),J.addScaledVector(te[5],1.092548*(Q*ee)),J.addScaledVector(te[6],.315392*(3*ee*ee-1)),J.addScaledVector(te[7],1.092548*(Z*ee)),J.addScaledVector(te[8],.546274*(Z*Z-Q*Q)),J}getIrradianceAt(_,J){const Z=_.x,Q=_.y,ee=_.z,te=this.coefficients;return J.copy(te[0]).multiplyScalar(.886227),J.addScaledVector(te[1],2*.511664*Q),J.addScaledVector(te[2],2*.511664*ee),J.addScaledVector(te[3],2*.511664*Z),J.addScaledVector(te[4],2*.429043*Z*Q),J.addScaledVector(te[5],2*.429043*Q*ee),J.addScaledVector(te[6],.743125*ee*ee-.247708),J.addScaledVector(te[7],2*.429043*Z*ee),J.addScaledVector(te[8],.429043*(Z*Z-Q*Q)),J}add(_){for(let J=0;J<9;J++)this.coefficients[J].add(_.coefficients[J]);return this}addScaledSH(_,J){for(let Z=0;Z<9;Z++)this.coefficients[Z].addScaledVector(_.coefficients[Z],J);return this}scale(_){for(let J=0;J<9;J++)this.coefficients[J].multiplyScalar(_);return this}lerp(_,J){for(let Z=0;Z<9;Z++)this.coefficients[Z].lerp(_.coefficients[Z],J);return this}equals(_){for(let J=0;J<9;J++)if(!this.coefficients[J].equals(_.coefficients[J]))return!1;return!0}copy(_){return this.set(_.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(_,J=0){const Z=this.coefficients;for(let Q=0;Q<9;Q++)Z[Q].fromArray(_,J+Q*3);return this}toArray(_=[],J=0){const Z=this.coefficients;for(let Q=0;Q<9;Q++)Z[Q].toArray(_,J+Q*3);return _}static getBasisAt(_,J){const Z=_.x,Q=_.y,ee=_.z;J[0]=.282095,J[1]=.488603*Q,J[2]=.488603*ee,J[3]=.488603*Z,J[4]=1.092548*Z*Q,J[5]=1.092548*Q*ee,J[6]=.315392*(3*ee*ee-1),J[7]=1.092548*Z*ee,J[8]=.546274*(Z*Z-Q*Q)}}class LightProbe extends Light{constructor(_=new SphericalHarmonics3,J=1){super(void 0,J),this.isLightProbe=!0,this.sh=_}copy(_){return super.copy(_),this.sh.copy(_.sh),this}fromJSON(_){return this.intensity=_.intensity,this.sh.fromArray(_.sh),this}toJSON(_){const J=super.toJSON(_);return J.object.sh=this.sh.toArray(),J}}class MaterialLoader extends Loader{constructor(_){super(_),this.textures={}}load(_,J,Z,Q){const ee=this,te=new FileLoader(ee.manager);te.setPath(ee.path),te.setRequestHeader(ee.requestHeader),te.setWithCredentials(ee.withCredentials),te.load(_,function(ne){try{J(ee.parse(JSON.parse(ne)))}catch(ie){Q?Q(ie):error(ie),ee.manager.itemError(_)}},Z,Q)}parse(_){const J=this.textures;function Z(ee){return J[ee]===void 0&&warn("MaterialLoader: Undefined texture",ee),J[ee]}const Q=this.createMaterialFromType(_.type);if(_.uuid!==void 0&&(Q.uuid=_.uuid),_.name!==void 0&&(Q.name=_.name),_.color!==void 0&&Q.color!==void 0&&Q.color.setHex(_.color),_.roughness!==void 0&&(Q.roughness=_.roughness),_.metalness!==void 0&&(Q.metalness=_.metalness),_.sheen!==void 0&&(Q.sheen=_.sheen),_.sheenColor!==void 0&&(Q.sheenColor=new Color().setHex(_.sheenColor)),_.sheenRoughness!==void 0&&(Q.sheenRoughness=_.sheenRoughness),_.emissive!==void 0&&Q.emissive!==void 0&&Q.emissive.setHex(_.emissive),_.specular!==void 0&&Q.specular!==void 0&&Q.specular.setHex(_.specular),_.specularIntensity!==void 0&&(Q.specularIntensity=_.specularIntensity),_.specularColor!==void 0&&Q.specularColor!==void 0&&Q.specularColor.setHex(_.specularColor),_.shininess!==void 0&&(Q.shininess=_.shininess),_.clearcoat!==void 0&&(Q.clearcoat=_.clearcoat),_.clearcoatRoughness!==void 0&&(Q.clearcoatRoughness=_.clearcoatRoughness),_.dispersion!==void 0&&(Q.dispersion=_.dispersion),_.iridescence!==void 0&&(Q.iridescence=_.iridescence),_.iridescenceIOR!==void 0&&(Q.iridescenceIOR=_.iridescenceIOR),_.iridescenceThicknessRange!==void 0&&(Q.iridescenceThicknessRange=_.iridescenceThicknessRange),_.transmission!==void 0&&(Q.transmission=_.transmission),_.thickness!==void 0&&(Q.thickness=_.thickness),_.attenuationDistance!==void 0&&(Q.attenuationDistance=_.attenuationDistance),_.attenuationColor!==void 0&&Q.attenuationColor!==void 0&&Q.attenuationColor.setHex(_.attenuationColor),_.anisotropy!==void 0&&(Q.anisotropy=_.anisotropy),_.anisotropyRotation!==void 0&&(Q.anisotropyRotation=_.anisotropyRotation),_.fog!==void 0&&(Q.fog=_.fog),_.flatShading!==void 0&&(Q.flatShading=_.flatShading),_.blending!==void 0&&(Q.blending=_.blending),_.combine!==void 0&&(Q.combine=_.combine),_.side!==void 0&&(Q.side=_.side),_.shadowSide!==void 0&&(Q.shadowSide=_.shadowSide),_.opacity!==void 0&&(Q.opacity=_.opacity),_.transparent!==void 0&&(Q.transparent=_.transparent),_.alphaTest!==void 0&&(Q.alphaTest=_.alphaTest),_.alphaHash!==void 0&&(Q.alphaHash=_.alphaHash),_.depthFunc!==void 0&&(Q.depthFunc=_.depthFunc),_.depthTest!==void 0&&(Q.depthTest=_.depthTest),_.depthWrite!==void 0&&(Q.depthWrite=_.depthWrite),_.colorWrite!==void 0&&(Q.colorWrite=_.colorWrite),_.blendSrc!==void 0&&(Q.blendSrc=_.blendSrc),_.blendDst!==void 0&&(Q.blendDst=_.blendDst),_.blendEquation!==void 0&&(Q.blendEquation=_.blendEquation),_.blendSrcAlpha!==void 0&&(Q.blendSrcAlpha=_.blendSrcAlpha),_.blendDstAlpha!==void 0&&(Q.blendDstAlpha=_.blendDstAlpha),_.blendEquationAlpha!==void 0&&(Q.blendEquationAlpha=_.blendEquationAlpha),_.blendColor!==void 0&&Q.blendColor!==void 0&&Q.blendColor.setHex(_.blendColor),_.blendAlpha!==void 0&&(Q.blendAlpha=_.blendAlpha),_.stencilWriteMask!==void 0&&(Q.stencilWriteMask=_.stencilWriteMask),_.stencilFunc!==void 0&&(Q.stencilFunc=_.stencilFunc),_.stencilRef!==void 0&&(Q.stencilRef=_.stencilRef),_.stencilFuncMask!==void 0&&(Q.stencilFuncMask=_.stencilFuncMask),_.stencilFail!==void 0&&(Q.stencilFail=_.stencilFail),_.stencilZFail!==void 0&&(Q.stencilZFail=_.stencilZFail),_.stencilZPass!==void 0&&(Q.stencilZPass=_.stencilZPass),_.stencilWrite!==void 0&&(Q.stencilWrite=_.stencilWrite),_.wireframe!==void 0&&(Q.wireframe=_.wireframe),_.wireframeLinewidth!==void 0&&(Q.wireframeLinewidth=_.wireframeLinewidth),_.wireframeLinecap!==void 0&&(Q.wireframeLinecap=_.wireframeLinecap),_.wireframeLinejoin!==void 0&&(Q.wireframeLinejoin=_.wireframeLinejoin),_.rotation!==void 0&&(Q.rotation=_.rotation),_.linewidth!==void 0&&(Q.linewidth=_.linewidth),_.dashSize!==void 0&&(Q.dashSize=_.dashSize),_.gapSize!==void 0&&(Q.gapSize=_.gapSize),_.scale!==void 0&&(Q.scale=_.scale),_.polygonOffset!==void 0&&(Q.polygonOffset=_.polygonOffset),_.polygonOffsetFactor!==void 0&&(Q.polygonOffsetFactor=_.polygonOffsetFactor),_.polygonOffsetUnits!==void 0&&(Q.polygonOffsetUnits=_.polygonOffsetUnits),_.dithering!==void 0&&(Q.dithering=_.dithering),_.alphaToCoverage!==void 0&&(Q.alphaToCoverage=_.alphaToCoverage),_.premultipliedAlpha!==void 0&&(Q.premultipliedAlpha=_.premultipliedAlpha),_.forceSinglePass!==void 0&&(Q.forceSinglePass=_.forceSinglePass),_.visible!==void 0&&(Q.visible=_.visible),_.toneMapped!==void 0&&(Q.toneMapped=_.toneMapped),_.userData!==void 0&&(Q.userData=_.userData),_.vertexColors!==void 0&&(typeof _.vertexColors=="number"?Q.vertexColors=_.vertexColors>0:Q.vertexColors=_.vertexColors),_.uniforms!==void 0)for(const ee in _.uniforms){const te=_.uniforms[ee];switch(Q.uniforms[ee]={},te.type){case"t":Q.uniforms[ee].value=Z(te.value);break;case"c":Q.uniforms[ee].value=new Color().setHex(te.value);break;case"v2":Q.uniforms[ee].value=new Vector2().fromArray(te.value);break;case"v3":Q.uniforms[ee].value=new Vector3().fromArray(te.value);break;case"v4":Q.uniforms[ee].value=new Vector4().fromArray(te.value);break;case"m3":Q.uniforms[ee].value=new Matrix3().fromArray(te.value);break;case"m4":Q.uniforms[ee].value=new Matrix4().fromArray(te.value);break;default:Q.uniforms[ee].value=te.value}}if(_.defines!==void 0&&(Q.defines=_.defines),_.vertexShader!==void 0&&(Q.vertexShader=_.vertexShader),_.fragmentShader!==void 0&&(Q.fragmentShader=_.fragmentShader),_.glslVersion!==void 0&&(Q.glslVersion=_.glslVersion),_.extensions!==void 0)for(const ee in _.extensions)Q.extensions[ee]=_.extensions[ee];if(_.lights!==void 0&&(Q.lights=_.lights),_.clipping!==void 0&&(Q.clipping=_.clipping),_.size!==void 0&&(Q.size=_.size),_.sizeAttenuation!==void 0&&(Q.sizeAttenuation=_.sizeAttenuation),_.map!==void 0&&(Q.map=Z(_.map)),_.matcap!==void 0&&(Q.matcap=Z(_.matcap)),_.alphaMap!==void 0&&(Q.alphaMap=Z(_.alphaMap)),_.bumpMap!==void 0&&(Q.bumpMap=Z(_.bumpMap)),_.bumpScale!==void 0&&(Q.bumpScale=_.bumpScale),_.normalMap!==void 0&&(Q.normalMap=Z(_.normalMap)),_.normalMapType!==void 0&&(Q.normalMapType=_.normalMapType),_.normalScale!==void 0){let ee=_.normalScale;Array.isArray(ee)===!1&&(ee=[ee,ee]),Q.normalScale=new Vector2().fromArray(ee)}return _.displacementMap!==void 0&&(Q.displacementMap=Z(_.displacementMap)),_.displacementScale!==void 0&&(Q.displacementScale=_.displacementScale),_.displacementBias!==void 0&&(Q.displacementBias=_.displacementBias),_.roughnessMap!==void 0&&(Q.roughnessMap=Z(_.roughnessMap)),_.metalnessMap!==void 0&&(Q.metalnessMap=Z(_.metalnessMap)),_.emissiveMap!==void 0&&(Q.emissiveMap=Z(_.emissiveMap)),_.emissiveIntensity!==void 0&&(Q.emissiveIntensity=_.emissiveIntensity),_.specularMap!==void 0&&(Q.specularMap=Z(_.specularMap)),_.specularIntensityMap!==void 0&&(Q.specularIntensityMap=Z(_.specularIntensityMap)),_.specularColorMap!==void 0&&(Q.specularColorMap=Z(_.specularColorMap)),_.envMap!==void 0&&(Q.envMap=Z(_.envMap)),_.envMapRotation!==void 0&&Q.envMapRotation.fromArray(_.envMapRotation),_.envMapIntensity!==void 0&&(Q.envMapIntensity=_.envMapIntensity),_.reflectivity!==void 0&&(Q.reflectivity=_.reflectivity),_.refractionRatio!==void 0&&(Q.refractionRatio=_.refractionRatio),_.lightMap!==void 0&&(Q.lightMap=Z(_.lightMap)),_.lightMapIntensity!==void 0&&(Q.lightMapIntensity=_.lightMapIntensity),_.aoMap!==void 0&&(Q.aoMap=Z(_.aoMap)),_.aoMapIntensity!==void 0&&(Q.aoMapIntensity=_.aoMapIntensity),_.gradientMap!==void 0&&(Q.gradientMap=Z(_.gradientMap)),_.clearcoatMap!==void 0&&(Q.clearcoatMap=Z(_.clearcoatMap)),_.clearcoatRoughnessMap!==void 0&&(Q.clearcoatRoughnessMap=Z(_.clearcoatRoughnessMap)),_.clearcoatNormalMap!==void 0&&(Q.clearcoatNormalMap=Z(_.clearcoatNormalMap)),_.clearcoatNormalScale!==void 0&&(Q.clearcoatNormalScale=new Vector2().fromArray(_.clearcoatNormalScale)),_.iridescenceMap!==void 0&&(Q.iridescenceMap=Z(_.iridescenceMap)),_.iridescenceThicknessMap!==void 0&&(Q.iridescenceThicknessMap=Z(_.iridescenceThicknessMap)),_.transmissionMap!==void 0&&(Q.transmissionMap=Z(_.transmissionMap)),_.thicknessMap!==void 0&&(Q.thicknessMap=Z(_.thicknessMap)),_.anisotropyMap!==void 0&&(Q.anisotropyMap=Z(_.anisotropyMap)),_.sheenColorMap!==void 0&&(Q.sheenColorMap=Z(_.sheenColorMap)),_.sheenRoughnessMap!==void 0&&(Q.sheenRoughnessMap=Z(_.sheenRoughnessMap)),Q}setTextures(_){return this.textures=_,this}createMaterialFromType(_){return MaterialLoader.createMaterialFromType(_)}static createMaterialFromType(_){const J={ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material};return new J[_]}}class LoaderUtils{static extractUrlBase(_){const J=_.lastIndexOf("/");return J===-1?"./":_.slice(0,J+1)}static resolveURL(_,J){return typeof _!="string"||_===""?"":(/^https?:\/\//i.test(J)&&/^\//.test(_)&&(J=J.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(_)||/^data:.*,.*$/i.test(_)||/^blob:.*$/i.test(_)?_:J+_)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(_){return super.copy(_),this.instanceCount=_.instanceCount,this}toJSON(){const _=super.toJSON();return _.instanceCount=this.instanceCount,_.isInstancedBufferGeometry=!0,_}}class BufferGeometryLoader extends Loader{constructor(_){super(_)}load(_,J,Z,Q){const ee=this,te=new FileLoader(ee.manager);te.setPath(ee.path),te.setRequestHeader(ee.requestHeader),te.setWithCredentials(ee.withCredentials),te.load(_,function(ne){try{J(ee.parse(JSON.parse(ne)))}catch(ie){Q?Q(ie):error(ie),ee.manager.itemError(_)}},Z,Q)}parse(_){const J={},Z={};function Q(ce,ue){if(J[ue]!==void 0)return J[ue];const me=ce.interleavedBuffers[ue],fe=ee(ce,me.buffer),_e=getTypedArray(me.type,fe),ye=new InterleavedBuffer(_e,me.stride);return ye.uuid=me.uuid,J[ue]=ye,ye}function ee(ce,ue){if(Z[ue]!==void 0)return Z[ue];const me=ce.arrayBuffers[ue],fe=new Uint32Array(me).buffer;return Z[ue]=fe,fe}const te=_.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,ne=_.data.index;if(ne!==void 0){const ce=getTypedArray(ne.type,ne.array);te.setIndex(new BufferAttribute(ce,1))}const ie=_.data.attributes;for(const ce in ie){const ue=ie[ce];let de;if(ue.isInterleavedBufferAttribute){const me=Q(_.data,ue.data);de=new InterleavedBufferAttribute(me,ue.itemSize,ue.offset,ue.normalized)}else{const me=getTypedArray(ue.type,ue.array),fe=ue.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute;de=new fe(me,ue.itemSize,ue.normalized)}ue.name!==void 0&&(de.name=ue.name),ue.usage!==void 0&&de.setUsage(ue.usage),te.setAttribute(ce,de)}const re=_.data.morphAttributes;if(re)for(const ce in re){const ue=re[ce],de=[];for(let me=0,fe=ue.length;me<fe;me++){const _e=ue[me];let ye;if(_e.isInterleavedBufferAttribute){const be=Q(_.data,_e.data);ye=new InterleavedBufferAttribute(be,_e.itemSize,_e.offset,_e.normalized)}else{const be=getTypedArray(_e.type,_e.array);ye=new BufferAttribute(be,_e.itemSize,_e.normalized)}_e.name!==void 0&&(ye.name=_e.name),de.push(ye)}te.morphAttributes[ce]=de}_.data.morphTargetsRelative&&(te.morphTargetsRelative=!0);const se=_.data.groups||_.data.drawcalls||_.data.offsets;if(se!==void 0)for(let ce=0,ue=se.length;ce!==ue;++ce){const de=se[ce];te.addGroup(de.start,de.count,de.materialIndex)}const ae=_.data.boundingSphere;return ae!==void 0&&(te.boundingSphere=new Sphere$1().fromJSON(ae)),_.name&&(te.name=_.name),_.userData&&(te.userData=_.userData),te}}class ObjectLoader extends Loader{constructor(_){super(_)}load(_,J,Z,Q){const ee=this,te=this.path===""?LoaderUtils.extractUrlBase(_):this.path;this.resourcePath=this.resourcePath||te;const ne=new FileLoader(this.manager);ne.setPath(this.path),ne.setRequestHeader(this.requestHeader),ne.setWithCredentials(this.withCredentials),ne.load(_,function(ie){let re=null;try{re=JSON.parse(ie)}catch(se){Q!==void 0&&Q(se),se("ObjectLoader: Can't parse "+_+".",se.message);return}const oe=re.metadata;if(oe===void 0||oe.type===void 0||oe.type.toLowerCase()==="geometry"){Q!==void 0&&Q(new Error("THREE.ObjectLoader: Can't load "+_)),error("ObjectLoader: Can't load "+_);return}ee.parse(re,J)},Z,Q)}async loadAsync(_,J){const Z=this,Q=this.path===""?LoaderUtils.extractUrlBase(_):this.path;this.resourcePath=this.resourcePath||Q;const ee=new FileLoader(this.manager);ee.setPath(this.path),ee.setRequestHeader(this.requestHeader),ee.setWithCredentials(this.withCredentials);const te=await ee.loadAsync(_,J),ne=JSON.parse(te),ie=ne.metadata;if(ie===void 0||ie.type===void 0||ie.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+_);return await Z.parseAsync(ne)}parse(_,J){const Z=this.parseAnimations(_.animations),Q=this.parseShapes(_.shapes),ee=this.parseGeometries(_.geometries,Q),te=this.parseImages(_.images,function(){J!==void 0&&J(re)}),ne=this.parseTextures(_.textures,te),ie=this.parseMaterials(_.materials,ne),re=this.parseObject(_.object,ee,ie,ne,Z),oe=this.parseSkeletons(_.skeletons,re);if(this.bindSkeletons(re,oe),this.bindLightTargets(re),J!==void 0){let se=!1;for(const ae in te)if(te[ae].data instanceof HTMLImageElement){se=!0;break}se===!1&&J(re)}return re}async parseAsync(_){const J=this.parseAnimations(_.animations),Z=this.parseShapes(_.shapes),Q=this.parseGeometries(_.geometries,Z),ee=await this.parseImagesAsync(_.images),te=this.parseTextures(_.textures,ee),ne=this.parseMaterials(_.materials,te),ie=this.parseObject(_.object,Q,ne,te,J),re=this.parseSkeletons(_.skeletons,ie);return this.bindSkeletons(ie,re),this.bindLightTargets(ie),ie}parseShapes(_){const J={};if(_!==void 0)for(let Z=0,Q=_.length;Z<Q;Z++){const ee=new Shape().fromJSON(_[Z]);J[ee.uuid]=ee}return J}parseSkeletons(_,J){const Z={},Q={};if(J.traverse(function(ee){ee.isBone&&(Q[ee.uuid]=ee)}),_!==void 0)for(let ee=0,te=_.length;ee<te;ee++){const ne=new Skeleton().fromJSON(_[ee],Q);Z[ne.uuid]=ne}return Z}parseGeometries(_,J){const Z={};if(_!==void 0){const Q=new BufferGeometryLoader;for(let ee=0,te=_.length;ee<te;ee++){let ne;const ie=_[ee];switch(ie.type){case"BufferGeometry":case"InstancedBufferGeometry":ne=Q.parse(ie);break;default:ie.type in Geometries?ne=Geometries[ie.type].fromJSON(ie,J):warn(`ObjectLoader: Unsupported geometry type "${ie.type}"`)}ne.uuid=ie.uuid,ie.name!==void 0&&(ne.name=ie.name),ie.userData!==void 0&&(ne.userData=ie.userData),Z[ie.uuid]=ne}}return Z}parseMaterials(_,J){const Z={},Q={};if(_!==void 0){const ee=new MaterialLoader;ee.setTextures(J);for(let te=0,ne=_.length;te<ne;te++){const ie=_[te];Z[ie.uuid]===void 0&&(Z[ie.uuid]=ee.parse(ie)),Q[ie.uuid]=Z[ie.uuid]}}return Q}parseAnimations(_){const J={};if(_!==void 0)for(let Z=0;Z<_.length;Z++){const Q=_[Z],ee=AnimationClip.parse(Q);J[ee.uuid]=ee}return J}parseImages(_,J){const Z=this,Q={};let ee;function te(ie){return Z.manager.itemStart(ie),ee.load(ie,function(){Z.manager.itemEnd(ie)},void 0,function(){Z.manager.itemError(ie),Z.manager.itemEnd(ie)})}function ne(ie){if(typeof ie=="string"){const re=ie,oe=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(re)?re:Z.resourcePath+re;return te(oe)}else return ie.data?{data:getTypedArray(ie.type,ie.data),width:ie.width,height:ie.height}:null}if(_!==void 0&&_.length>0){const ie=new LoadingManager(J);ee=new ImageLoader(ie),ee.setCrossOrigin(this.crossOrigin);for(let re=0,oe=_.length;re<oe;re++){const se=_[re],ae=se.url;if(Array.isArray(ae)){const ce=[];for(let ue=0,de=ae.length;ue<de;ue++){const me=ae[ue],fe=ne(me);fe!==null&&(fe instanceof HTMLImageElement?ce.push(fe):ce.push(new DataTexture(fe.data,fe.width,fe.height)))}Q[se.uuid]=new Source(ce)}else{const ce=ne(se.url);Q[se.uuid]=new Source(ce)}}}return Q}async parseImagesAsync(_){const J=this,Z={};let Q;async function ee(te){if(typeof te=="string"){const ne=te,ie=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(ne)?ne:J.resourcePath+ne;return await Q.loadAsync(ie)}else return te.data?{data:getTypedArray(te.type,te.data),width:te.width,height:te.height}:null}if(_!==void 0&&_.length>0){Q=new ImageLoader(this.manager),Q.setCrossOrigin(this.crossOrigin);for(let te=0,ne=_.length;te<ne;te++){const ie=_[te],re=ie.url;if(Array.isArray(re)){const oe=[];for(let se=0,ae=re.length;se<ae;se++){const ce=re[se],ue=await ee(ce);ue!==null&&(ue instanceof HTMLImageElement?oe.push(ue):oe.push(new DataTexture(ue.data,ue.width,ue.height)))}Z[ie.uuid]=new Source(oe)}else{const oe=await ee(ie.url);Z[ie.uuid]=new Source(oe)}}}return Z}parseTextures(_,J){function Z(ee,te){return typeof ee=="number"?ee:(warn("ObjectLoader.parseTexture: Constant should be in numeric form.",ee),te[ee])}const Q={};if(_!==void 0)for(let ee=0,te=_.length;ee<te;ee++){const ne=_[ee];ne.image===void 0&&warn('ObjectLoader: No "image" specified for',ne.uuid),J[ne.image]===void 0&&warn("ObjectLoader: Undefined image",ne.image);const ie=J[ne.image],re=ie.data;let oe;Array.isArray(re)?(oe=new CubeTexture,re.length===6&&(oe.needsUpdate=!0)):(re&&re.data?oe=new DataTexture:oe=new Texture,re&&(oe.needsUpdate=!0)),oe.source=ie,oe.uuid=ne.uuid,ne.name!==void 0&&(oe.name=ne.name),ne.mapping!==void 0&&(oe.mapping=Z(ne.mapping,TEXTURE_MAPPING)),ne.channel!==void 0&&(oe.channel=ne.channel),ne.offset!==void 0&&oe.offset.fromArray(ne.offset),ne.repeat!==void 0&&oe.repeat.fromArray(ne.repeat),ne.center!==void 0&&oe.center.fromArray(ne.center),ne.rotation!==void 0&&(oe.rotation=ne.rotation),ne.wrap!==void 0&&(oe.wrapS=Z(ne.wrap[0],TEXTURE_WRAPPING),oe.wrapT=Z(ne.wrap[1],TEXTURE_WRAPPING)),ne.format!==void 0&&(oe.format=ne.format),ne.internalFormat!==void 0&&(oe.internalFormat=ne.internalFormat),ne.type!==void 0&&(oe.type=ne.type),ne.colorSpace!==void 0&&(oe.colorSpace=ne.colorSpace),ne.minFilter!==void 0&&(oe.minFilter=Z(ne.minFilter,TEXTURE_FILTER)),ne.magFilter!==void 0&&(oe.magFilter=Z(ne.magFilter,TEXTURE_FILTER)),ne.anisotropy!==void 0&&(oe.anisotropy=ne.anisotropy),ne.flipY!==void 0&&(oe.flipY=ne.flipY),ne.generateMipmaps!==void 0&&(oe.generateMipmaps=ne.generateMipmaps),ne.premultiplyAlpha!==void 0&&(oe.premultiplyAlpha=ne.premultiplyAlpha),ne.unpackAlignment!==void 0&&(oe.unpackAlignment=ne.unpackAlignment),ne.compareFunction!==void 0&&(oe.compareFunction=ne.compareFunction),ne.userData!==void 0&&(oe.userData=ne.userData),Q[ne.uuid]=oe}return Q}parseObject(_,J,Z,Q,ee){let te;function ne(ae){return J[ae]===void 0&&warn("ObjectLoader: Undefined geometry",ae),J[ae]}function ie(ae){if(ae!==void 0){if(Array.isArray(ae)){const ce=[];for(let ue=0,de=ae.length;ue<de;ue++){const me=ae[ue];Z[me]===void 0&&warn("ObjectLoader: Undefined material",me),ce.push(Z[me])}return ce}return Z[ae]===void 0&&warn("ObjectLoader: Undefined material",ae),Z[ae]}}function re(ae){return Q[ae]===void 0&&warn("ObjectLoader: Undefined texture",ae),Q[ae]}let oe,se;switch(_.type){case"Scene":te=new Scene,_.background!==void 0&&(Number.isInteger(_.background)?te.background=new Color(_.background):te.background=re(_.background)),_.environment!==void 0&&(te.environment=re(_.environment)),_.fog!==void 0&&(_.fog.type==="Fog"?te.fog=new Fog(_.fog.color,_.fog.near,_.fog.far):_.fog.type==="FogExp2"&&(te.fog=new FogExp2(_.fog.color,_.fog.density)),_.fog.name!==""&&(te.fog.name=_.fog.name)),_.backgroundBlurriness!==void 0&&(te.backgroundBlurriness=_.backgroundBlurriness),_.backgroundIntensity!==void 0&&(te.backgroundIntensity=_.backgroundIntensity),_.backgroundRotation!==void 0&&te.backgroundRotation.fromArray(_.backgroundRotation),_.environmentIntensity!==void 0&&(te.environmentIntensity=_.environmentIntensity),_.environmentRotation!==void 0&&te.environmentRotation.fromArray(_.environmentRotation);break;case"PerspectiveCamera":te=new PerspectiveCamera(_.fov,_.aspect,_.near,_.far),_.focus!==void 0&&(te.focus=_.focus),_.zoom!==void 0&&(te.zoom=_.zoom),_.filmGauge!==void 0&&(te.filmGauge=_.filmGauge),_.filmOffset!==void 0&&(te.filmOffset=_.filmOffset),_.view!==void 0&&(te.view=Object.assign({},_.view));break;case"OrthographicCamera":te=new OrthographicCamera(_.left,_.right,_.top,_.bottom,_.near,_.far),_.zoom!==void 0&&(te.zoom=_.zoom),_.view!==void 0&&(te.view=Object.assign({},_.view));break;case"AmbientLight":te=new AmbientLight(_.color,_.intensity);break;case"DirectionalLight":te=new DirectionalLight(_.color,_.intensity),te.target=_.target||"";break;case"PointLight":te=new PointLight(_.color,_.intensity,_.distance,_.decay);break;case"RectAreaLight":te=new RectAreaLight(_.color,_.intensity,_.width,_.height);break;case"SpotLight":te=new SpotLight(_.color,_.intensity,_.distance,_.angle,_.penumbra,_.decay),te.target=_.target||"";break;case"HemisphereLight":te=new HemisphereLight(_.color,_.groundColor,_.intensity);break;case"LightProbe":te=new LightProbe().fromJSON(_);break;case"SkinnedMesh":oe=ne(_.geometry),se=ie(_.material),te=new SkinnedMesh(oe,se),_.bindMode!==void 0&&(te.bindMode=_.bindMode),_.bindMatrix!==void 0&&te.bindMatrix.fromArray(_.bindMatrix),_.skeleton!==void 0&&(te.skeleton=_.skeleton);break;case"Mesh":oe=ne(_.geometry),se=ie(_.material),te=new Mesh(oe,se);break;case"InstancedMesh":oe=ne(_.geometry),se=ie(_.material);const ae=_.count,ce=_.instanceMatrix,ue=_.instanceColor;te=new InstancedMesh(oe,se,ae),te.instanceMatrix=new InstancedBufferAttribute(new Float32Array(ce.array),16),ue!==void 0&&(te.instanceColor=new InstancedBufferAttribute(new Float32Array(ue.array),ue.itemSize));break;case"BatchedMesh":oe=ne(_.geometry),se=ie(_.material),te=new BatchedMesh(_.maxInstanceCount,_.maxVertexCount,_.maxIndexCount,se),te.geometry=oe,te.perObjectFrustumCulled=_.perObjectFrustumCulled,te.sortObjects=_.sortObjects,te._drawRanges=_.drawRanges,te._reservedRanges=_.reservedRanges,te._geometryInfo=_.geometryInfo.map(de=>{let me=null,fe=null;return de.boundingBox!==void 0&&(me=new Box3().fromJSON(de.boundingBox)),de.boundingSphere!==void 0&&(fe=new Sphere$1().fromJSON(de.boundingSphere)),{...de,boundingBox:me,boundingSphere:fe}}),te._instanceInfo=_.instanceInfo,te._availableInstanceIds=_._availableInstanceIds,te._availableGeometryIds=_._availableGeometryIds,te._nextIndexStart=_.nextIndexStart,te._nextVertexStart=_.nextVertexStart,te._geometryCount=_.geometryCount,te._maxInstanceCount=_.maxInstanceCount,te._maxVertexCount=_.maxVertexCount,te._maxIndexCount=_.maxIndexCount,te._geometryInitialized=_.geometryInitialized,te._matricesTexture=re(_.matricesTexture.uuid),te._indirectTexture=re(_.indirectTexture.uuid),_.colorsTexture!==void 0&&(te._colorsTexture=re(_.colorsTexture.uuid)),_.boundingSphere!==void 0&&(te.boundingSphere=new Sphere$1().fromJSON(_.boundingSphere)),_.boundingBox!==void 0&&(te.boundingBox=new Box3().fromJSON(_.boundingBox));break;case"LOD":te=new LOD;break;case"Line":te=new Line(ne(_.geometry),ie(_.material));break;case"LineLoop":te=new LineLoop(ne(_.geometry),ie(_.material));break;case"LineSegments":te=new LineSegments(ne(_.geometry),ie(_.material));break;case"PointCloud":case"Points":te=new Points$1(ne(_.geometry),ie(_.material));break;case"Sprite":te=new Sprite(ie(_.material));break;case"Group":te=new Group;break;case"Bone":te=new Bone;break;default:te=new Object3D}if(te.uuid=_.uuid,_.name!==void 0&&(te.name=_.name),_.matrix!==void 0?(te.matrix.fromArray(_.matrix),_.matrixAutoUpdate!==void 0&&(te.matrixAutoUpdate=_.matrixAutoUpdate),te.matrixAutoUpdate&&te.matrix.decompose(te.position,te.quaternion,te.scale)):(_.position!==void 0&&te.position.fromArray(_.position),_.rotation!==void 0&&te.rotation.fromArray(_.rotation),_.quaternion!==void 0&&te.quaternion.fromArray(_.quaternion),_.scale!==void 0&&te.scale.fromArray(_.scale)),_.up!==void 0&&te.up.fromArray(_.up),_.castShadow!==void 0&&(te.castShadow=_.castShadow),_.receiveShadow!==void 0&&(te.receiveShadow=_.receiveShadow),_.shadow&&(_.shadow.intensity!==void 0&&(te.shadow.intensity=_.shadow.intensity),_.shadow.bias!==void 0&&(te.shadow.bias=_.shadow.bias),_.shadow.normalBias!==void 0&&(te.shadow.normalBias=_.shadow.normalBias),_.shadow.radius!==void 0&&(te.shadow.radius=_.shadow.radius),_.shadow.mapSize!==void 0&&te.shadow.mapSize.fromArray(_.shadow.mapSize),_.shadow.camera!==void 0&&(te.shadow.camera=this.parseObject(_.shadow.camera))),_.visible!==void 0&&(te.visible=_.visible),_.frustumCulled!==void 0&&(te.frustumCulled=_.frustumCulled),_.renderOrder!==void 0&&(te.renderOrder=_.renderOrder),_.userData!==void 0&&(te.userData=_.userData),_.layers!==void 0&&(te.layers.mask=_.layers),_.children!==void 0){const ae=_.children;for(let ce=0;ce<ae.length;ce++)te.add(this.parseObject(ae[ce],J,Z,Q,ee))}if(_.animations!==void 0){const ae=_.animations;for(let ce=0;ce<ae.length;ce++){const ue=ae[ce];te.animations.push(ee[ue])}}if(_.type==="LOD"){_.autoUpdate!==void 0&&(te.autoUpdate=_.autoUpdate);const ae=_.levels;for(let ce=0;ce<ae.length;ce++){const ue=ae[ce],de=te.getObjectByProperty("uuid",ue.object);de!==void 0&&te.addLevel(de,ue.distance,ue.hysteresis)}}return te}bindSkeletons(_,J){Object.keys(J).length!==0&&_.traverse(function(Z){if(Z.isSkinnedMesh===!0&&Z.skeleton!==void 0){const Q=J[Z.skeleton];Q===void 0?warn("ObjectLoader: No skeleton found with UUID:",Z.skeleton):Z.bind(Q,Z.bindMatrix)}})}bindLightTargets(_){_.traverse(function(J){if(J.isDirectionalLight||J.isSpotLight){const Z=J.target,Q=_.getObjectByProperty("uuid",Z);Q!==void 0?J.target=Q:J.target=new Object3D}})}}const TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,CubeUVReflectionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter},_errorMap=new WeakMap;class ImageBitmapLoader extends Loader{constructor(_){super(_),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&warn("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&warn("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(_){return this.options=_,this}load(_,J,Z,Q){_===void 0&&(_=""),this.path!==void 0&&(_=this.path+_),_=this.manager.resolveURL(_);const ee=this,te=Cache.get(`image-bitmap:${_}`);if(te!==void 0){if(ee.manager.itemStart(_),te.then){te.then(re=>{if(_errorMap.has(te)===!0)Q&&Q(_errorMap.get(te)),ee.manager.itemError(_),ee.manager.itemEnd(_);else return J&&J(re),ee.manager.itemEnd(_),re});return}return setTimeout(function(){J&&J(te),ee.manager.itemEnd(_)},0),te}const ne={};ne.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",ne.headers=this.requestHeader,ne.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const ie=fetch(_,ne).then(function(re){return re.blob()}).then(function(re){return createImageBitmap(re,Object.assign(ee.options,{colorSpaceConversion:"none"}))}).then(function(re){return Cache.add(`image-bitmap:${_}`,re),J&&J(re),ee.manager.itemEnd(_),re}).catch(function(re){Q&&Q(re),_errorMap.set(ie,re),Cache.remove(`image-bitmap:${_}`),ee.manager.itemError(_),ee.manager.itemEnd(_)});Cache.add(`image-bitmap:${_}`,ie),ee.manager.itemStart(_)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let _context;class AudioContext{static getContext(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context}static setContext(_){_context=_}}class AudioLoader extends Loader{constructor(_){super(_)}load(_,J,Z,Q){const ee=this,te=new FileLoader(this.manager);te.setResponseType("arraybuffer"),te.setPath(this.path),te.setRequestHeader(this.requestHeader),te.setWithCredentials(this.withCredentials),te.load(_,function(ie){try{const re=ie.slice(0);AudioContext.getContext().decodeAudioData(re,function(se){J(se)}).catch(ne)}catch(re){ne(re)}},Z,Q);function ne(ie){Q?Q(ie):error(ie),ee.manager.itemError(_)}}}const _eyeRight=new Matrix4,_eyeLeft=new Matrix4,_projectionMatrix=new Matrix4;class StereoCamera{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(_){const J=this._cache;if(J.focus!==_.focus||J.fov!==_.fov||J.aspect!==_.aspect*this.aspect||J.near!==_.near||J.far!==_.far||J.zoom!==_.zoom||J.eyeSep!==this.eyeSep){J.focus=_.focus,J.fov=_.fov,J.aspect=_.aspect*this.aspect,J.near=_.near,J.far=_.far,J.zoom=_.zoom,J.eyeSep=this.eyeSep,_projectionMatrix.copy(_.projectionMatrix);const Q=J.eyeSep/2,ee=Q*J.near/J.focus,te=J.near*Math.tan(DEG2RAD*J.fov*.5)/J.zoom;let ne,ie;_eyeLeft.elements[12]=-Q,_eyeRight.elements[12]=Q,ne=-te*J.aspect+ee,ie=te*J.aspect+ee,_projectionMatrix.elements[0]=2*J.near/(ie-ne),_projectionMatrix.elements[8]=(ie+ne)/(ie-ne),this.cameraL.projectionMatrix.copy(_projectionMatrix),ne=-te*J.aspect-ee,ie=te*J.aspect-ee,_projectionMatrix.elements[0]=2*J.near/(ie-ne),_projectionMatrix.elements[8]=(ie+ne)/(ie-ne),this.cameraR.projectionMatrix.copy(_projectionMatrix)}this.cameraL.matrixWorld.copy(_.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(_.matrixWorld).multiply(_eyeRight)}}class ArrayCamera extends PerspectiveCamera{constructor(_=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=_}}class Clock{constructor(_=!0){this.autoStart=_,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let _=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const J=performance.now();_=(J-this.oldTime)/1e3,this.oldTime=J,this.elapsedTime+=_}return _}}const _position$1=new Vector3,_quaternion$1=new Quaternion,_scale$1=new Vector3,_forward=new Vector3,_up=new Vector3;class AudioListener extends Object3D{constructor(){super(),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(_){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=_,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(_){return this.gain.gain.setTargetAtTime(_,this.context.currentTime,.01),this}updateMatrixWorld(_){super.updateMatrixWorld(_);const J=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$1,_quaternion$1,_scale$1),_forward.set(0,0,-1).applyQuaternion(_quaternion$1),_up.set(0,1,0).applyQuaternion(_quaternion$1),J.positionX){const Z=this.context.currentTime+this.timeDelta;J.positionX.linearRampToValueAtTime(_position$1.x,Z),J.positionY.linearRampToValueAtTime(_position$1.y,Z),J.positionZ.linearRampToValueAtTime(_position$1.z,Z),J.forwardX.linearRampToValueAtTime(_forward.x,Z),J.forwardY.linearRampToValueAtTime(_forward.y,Z),J.forwardZ.linearRampToValueAtTime(_forward.z,Z),J.upX.linearRampToValueAtTime(_up.x,Z),J.upY.linearRampToValueAtTime(_up.y,Z),J.upZ.linearRampToValueAtTime(_up.z,Z)}else J.setPosition(_position$1.x,_position$1.y,_position$1.z),J.setOrientation(_forward.x,_forward.y,_forward.z,_up.x,_up.y,_up.z)}}class Audio extends Object3D{constructor(_){super(),this.type="Audio",this.listener=_,this.context=_.context,this.gain=this.context.createGain(),this.gain.connect(_.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(_){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=_,this.connect(),this}setMediaElementSource(_){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(_),this.connect(),this}setMediaStreamSource(_){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(_),this.connect(),this}setBuffer(_){return this.buffer=_,this.sourceType="buffer",this.autoplay&&this.play(),this}play(_=0){if(this.isPlaying===!0){warn("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){warn("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+_;const J=this.context.createBufferSource();return J.buffer=this.buffer,J.loop=this.loop,J.loopStart=this.loopStart,J.loopEnd=this.loopEnd,J.onended=this.onEnded.bind(this),J.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=J,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){warn("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(_=0){if(this.hasPlaybackControl===!1){warn("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+_),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let _=1,J=this.filters.length;_<J;_++)this.filters[_-1].connect(this.filters[_]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let _=1,J=this.filters.length;_<J;_++)this.filters[_-1].disconnect(this.filters[_]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(_){return _||(_=[]),this._connected===!0?(this.disconnect(),this.filters=_.slice(),this.connect()):this.filters=_.slice(),this}setDetune(_){return this.detune=_,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(_){return this.setFilters(_?[_]:[])}setPlaybackRate(_){if(this.hasPlaybackControl===!1){warn("Audio: this Audio has no playback control.");return}return this.playbackRate=_,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(warn("Audio: this Audio has no playback control."),!1):this.loop}setLoop(_){if(this.hasPlaybackControl===!1){warn("Audio: this Audio has no playback control.");return}return this.loop=_,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(_){return this.loopStart=_,this}setLoopEnd(_){return this.loopEnd=_,this}getVolume(){return this.gain.gain.value}setVolume(_){return this.gain.gain.setTargetAtTime(_,this.context.currentTime,.01),this}copy(_,J){return super.copy(_,J),_.sourceType!=="buffer"?(warn("Audio: Audio source type cannot be copied."),this):(this.autoplay=_.autoplay,this.buffer=_.buffer,this.detune=_.detune,this.loop=_.loop,this.loopStart=_.loopStart,this.loopEnd=_.loopEnd,this.offset=_.offset,this.duration=_.duration,this.playbackRate=_.playbackRate,this.hasPlaybackControl=_.hasPlaybackControl,this.sourceType=_.sourceType,this.filters=_.filters.slice(),this)}clone(_){return new this.constructor(this.listener).copy(this,_)}}const _position$4=new Vector3,_quaternion=new Quaternion,_scale=new Vector3,_orientation=new Vector3;class PositionalAudio extends Audio{constructor(_){super(_),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(_){return this.panner.refDistance=_,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(_){return this.panner.rolloffFactor=_,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(_){return this.panner.distanceModel=_,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(_){return this.panner.maxDistance=_,this}setDirectionalCone(_,J,Z){return this.panner.coneInnerAngle=_,this.panner.coneOuterAngle=J,this.panner.coneOuterGain=Z,this}updateMatrixWorld(_){if(super.updateMatrixWorld(_),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_position$4,_quaternion,_scale),_orientation.set(0,0,1).applyQuaternion(_quaternion);const J=this.panner;if(J.positionX){const Z=this.context.currentTime+this.listener.timeDelta;J.positionX.linearRampToValueAtTime(_position$4.x,Z),J.positionY.linearRampToValueAtTime(_position$4.y,Z),J.positionZ.linearRampToValueAtTime(_position$4.z,Z),J.orientationX.linearRampToValueAtTime(_orientation.x,Z),J.orientationY.linearRampToValueAtTime(_orientation.y,Z),J.orientationZ.linearRampToValueAtTime(_orientation.z,Z)}else J.setPosition(_position$4.x,_position$4.y,_position$4.z),J.setOrientation(_orientation.x,_orientation.y,_orientation.z)}}class AudioAnalyser{constructor(_,J=2048){this.analyser=_.context.createAnalyser(),this.analyser.fftSize=J,this.data=new Uint8Array(this.analyser.frequencyBinCount),_.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let _=0;const J=this.getFrequencyData();for(let Z=0;Z<J.length;Z++)_+=J[Z];return _/J.length}}class PropertyMixer{constructor(_,J,Z){this.binding=_,this.valueSize=Z;let Q,ee,te;switch(J){case"quaternion":Q=this._slerp,ee=this._slerpAdditive,te=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(Z*6),this._workIndex=5;break;case"string":case"bool":Q=this._select,ee=this._select,te=this._setAdditiveIdentityOther,this.buffer=new Array(Z*5);break;default:Q=this._lerp,ee=this._lerpAdditive,te=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(Z*5)}this._mixBufferRegion=Q,this._mixBufferRegionAdditive=ee,this._setIdentity=te,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(_,J){const Z=this.buffer,Q=this.valueSize,ee=_*Q+Q;let te=this.cumulativeWeight;if(te===0){for(let ne=0;ne!==Q;++ne)Z[ee+ne]=Z[ne];te=J}else{te+=J;const ne=J/te;this._mixBufferRegion(Z,ee,0,ne,Q)}this.cumulativeWeight=te}accumulateAdditive(_){const J=this.buffer,Z=this.valueSize,Q=Z*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(J,Q,0,_,Z),this.cumulativeWeightAdditive+=_}apply(_){const J=this.valueSize,Z=this.buffer,Q=_*J+J,ee=this.cumulativeWeight,te=this.cumulativeWeightAdditive,ne=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,ee<1){const ie=J*this._origIndex;this._mixBufferRegion(Z,Q,ie,1-ee,J)}te>0&&this._mixBufferRegionAdditive(Z,Q,this._addIndex*J,1,J);for(let ie=J,re=J+J;ie!==re;++ie)if(Z[ie]!==Z[ie+J]){ne.setValue(Z,Q);break}}saveOriginalState(){const _=this.binding,J=this.buffer,Z=this.valueSize,Q=Z*this._origIndex;_.getValue(J,Q);for(let ee=Z,te=Q;ee!==te;++ee)J[ee]=J[Q+ee%Z];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const _=this.valueSize*3;this.binding.setValue(this.buffer,_)}_setAdditiveIdentityNumeric(){const _=this._addIndex*this.valueSize,J=_+this.valueSize;for(let Z=_;Z<J;Z++)this.buffer[Z]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const _=this._origIndex*this.valueSize,J=this._addIndex*this.valueSize;for(let Z=0;Z<this.valueSize;Z++)this.buffer[J+Z]=this.buffer[_+Z]}_select(_,J,Z,Q,ee){if(Q>=.5)for(let te=0;te!==ee;++te)_[J+te]=_[Z+te]}_slerp(_,J,Z,Q){Quaternion.slerpFlat(_,J,_,J,_,Z,Q)}_slerpAdditive(_,J,Z,Q,ee){const te=this._workIndex*ee;Quaternion.multiplyQuaternionsFlat(_,te,_,J,_,Z),Quaternion.slerpFlat(_,J,_,J,_,te,Q)}_lerp(_,J,Z,Q,ee){const te=1-Q;for(let ne=0;ne!==ee;++ne){const ie=J+ne;_[ie]=_[ie]*te+_[Z+ne]*Q}}_lerpAdditive(_,J,Z,Q,ee){for(let te=0;te!==ee;++te){const ne=J+te;_[ne]=_[ne]+_[Z+te]*Q}}}const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones","map"];class Composite{constructor(_,J,Z){const Q=Z||PropertyBinding.parseTrackName(J);this._targetGroup=_,this._bindings=_.subscribe_(J,Q)}getValue(_,J){this.bind();const Z=this._targetGroup.nCachedObjects_,Q=this._bindings[Z];Q!==void 0&&Q.getValue(_,J)}setValue(_,J){const Z=this._bindings;for(let Q=this._targetGroup.nCachedObjects_,ee=Z.length;Q!==ee;++Q)Z[Q].setValue(_,J)}bind(){const _=this._bindings;for(let J=this._targetGroup.nCachedObjects_,Z=_.length;J!==Z;++J)_[J].bind()}unbind(){const _=this._bindings;for(let J=this._targetGroup.nCachedObjects_,Z=_.length;J!==Z;++J)_[J].unbind()}}class PropertyBinding{constructor(_,J,Z){this.path=J,this.parsedPath=Z||PropertyBinding.parseTrackName(J),this.node=PropertyBinding.findNode(_,this.parsedPath.nodeName),this.rootNode=_,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(_,J,Z){return _&&_.isAnimationObjectGroup?new PropertyBinding.Composite(_,J,Z):new PropertyBinding(_,J,Z)}static sanitizeNodeName(_){return _.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName(_){const J=_trackRe.exec(_);if(J===null)throw new Error("PropertyBinding: Cannot parse trackName: "+_);const Z={nodeName:J[2],objectName:J[3],objectIndex:J[4],propertyName:J[5],propertyIndex:J[6]},Q=Z.nodeName&&Z.nodeName.lastIndexOf(".");if(Q!==void 0&&Q!==-1){const ee=Z.nodeName.substring(Q+1);_supportedObjectNames.indexOf(ee)!==-1&&(Z.nodeName=Z.nodeName.substring(0,Q),Z.objectName=ee)}if(Z.propertyName===null||Z.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+_);return Z}static findNode(_,J){if(J===void 0||J===""||J==="."||J===-1||J===_.name||J===_.uuid)return _;if(_.skeleton){const Z=_.skeleton.getBoneByName(J);if(Z!==void 0)return Z}if(_.children){const Z=function(ee){for(let te=0;te<ee.length;te++){const ne=ee[te];if(ne.name===J||ne.uuid===J)return ne;const ie=Z(ne.children);if(ie)return ie}return null},Q=Z(_.children);if(Q)return Q}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(_,J){_[J]=this.targetObject[this.propertyName]}_getValue_array(_,J){const Z=this.resolvedProperty;for(let Q=0,ee=Z.length;Q!==ee;++Q)_[J++]=Z[Q]}_getValue_arrayElement(_,J){_[J]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(_,J){this.resolvedProperty.toArray(_,J)}_setValue_direct(_,J){this.targetObject[this.propertyName]=_[J]}_setValue_direct_setNeedsUpdate(_,J){this.targetObject[this.propertyName]=_[J],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(_,J){this.targetObject[this.propertyName]=_[J],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(_,J){const Z=this.resolvedProperty;for(let Q=0,ee=Z.length;Q!==ee;++Q)Z[Q]=_[J++]}_setValue_array_setNeedsUpdate(_,J){const Z=this.resolvedProperty;for(let Q=0,ee=Z.length;Q!==ee;++Q)Z[Q]=_[J++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(_,J){const Z=this.resolvedProperty;for(let Q=0,ee=Z.length;Q!==ee;++Q)Z[Q]=_[J++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(_,J){this.resolvedProperty[this.propertyIndex]=_[J]}_setValue_arrayElement_setNeedsUpdate(_,J){this.resolvedProperty[this.propertyIndex]=_[J],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(_,J){this.resolvedProperty[this.propertyIndex]=_[J],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(_,J){this.resolvedProperty.fromArray(_,J)}_setValue_fromArray_setNeedsUpdate(_,J){this.resolvedProperty.fromArray(_,J),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(_,J){this.resolvedProperty.fromArray(_,J),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(_,J){this.bind(),this.getValue(_,J)}_setValue_unbound(_,J){this.bind(),this.setValue(_,J)}bind(){let _=this.node;const J=this.parsedPath,Z=J.objectName,Q=J.propertyName;let ee=J.propertyIndex;if(_||(_=PropertyBinding.findNode(this.rootNode,J.nodeName),this.node=_),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!_){warn("PropertyBinding: No target node found for track: "+this.path+".");return}if(Z){let re=J.objectIndex;switch(Z){case"materials":if(!_.material){error("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!_.material.materials){error("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}_=_.material.materials;break;case"bones":if(!_.skeleton){error("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}_=_.skeleton.bones;for(let oe=0;oe<_.length;oe++)if(_[oe].name===re){re=oe;break}break;case"map":if("map"in _){_=_.map;break}if(!_.material){error("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!_.material.map){error("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}_=_.material.map;break;default:if(_[Z]===void 0){error("PropertyBinding: Can not bind to objectName of node undefined.",this);return}_=_[Z]}if(re!==void 0){if(_[re]===void 0){error("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,_);return}_=_[re]}}const te=_[Q];if(te===void 0){const re=J.nodeName;error("PropertyBinding: Trying to update property for track: "+re+"."+Q+" but it wasn't found.",_);return}let ne=this.Versioning.None;this.targetObject=_,_.isMaterial===!0?ne=this.Versioning.NeedsUpdate:_.isObject3D===!0&&(ne=this.Versioning.MatrixWorldNeedsUpdate);let ie=this.BindingType.Direct;if(ee!==void 0){if(Q==="morphTargetInfluences"){if(!_.geometry){error("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!_.geometry.morphAttributes){error("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}_.morphTargetDictionary[ee]!==void 0&&(ee=_.morphTargetDictionary[ee])}ie=this.BindingType.ArrayElement,this.resolvedProperty=te,this.propertyIndex=ee}else te.fromArray!==void 0&&te.toArray!==void 0?(ie=this.BindingType.HasFromToArray,this.resolvedProperty=te):Array.isArray(te)?(ie=this.BindingType.EntireArray,this.resolvedProperty=te):this.propertyName=Q;this.getValue=this.GetterByBindingType[ie],this.setValue=this.SetterByBindingTypeAndVersioning[ie][ne]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=Composite;PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray];PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AnimationObjectGroup{constructor(){this.isAnimationObjectGroup=!0,this.uuid=generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const _={};this._indicesByUUID=_;for(let Z=0,Q=arguments.length;Z!==Q;++Z)_[arguments[Z].uuid]=Z;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const J=this;this.stats={objects:{get total(){return J._objects.length},get inUse(){return this.total-J.nCachedObjects_}},get bindingsPerObject(){return J._bindings.length}}}add(){const _=this._objects,J=this._indicesByUUID,Z=this._paths,Q=this._parsedPaths,ee=this._bindings,te=ee.length;let ne,ie=_.length,re=this.nCachedObjects_;for(let oe=0,se=arguments.length;oe!==se;++oe){const ae=arguments[oe],ce=ae.uuid;let ue=J[ce];if(ue===void 0){ue=ie++,J[ce]=ue,_.push(ae);for(let de=0,me=te;de!==me;++de)ee[de].push(new PropertyBinding(ae,Z[de],Q[de]))}else if(ue<re){ne=_[ue];const de=--re,me=_[de];J[me.uuid]=ue,_[ue]=me,J[ce]=de,_[de]=ae;for(let fe=0,_e=te;fe!==_e;++fe){const ye=ee[fe],be=ye[de];let Se=ye[ue];ye[ue]=be,Se===void 0&&(Se=new PropertyBinding(ae,Z[fe],Q[fe])),ye[de]=Se}}else _[ue]!==ne&&error("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=re}remove(){const _=this._objects,J=this._indicesByUUID,Z=this._bindings,Q=Z.length;let ee=this.nCachedObjects_;for(let te=0,ne=arguments.length;te!==ne;++te){const ie=arguments[te],re=ie.uuid,oe=J[re];if(oe!==void 0&&oe>=ee){const se=ee++,ae=_[se];J[ae.uuid]=oe,_[oe]=ae,J[re]=se,_[se]=ie;for(let ce=0,ue=Q;ce!==ue;++ce){const de=Z[ce],me=de[se],fe=de[oe];de[oe]=me,de[se]=fe}}}this.nCachedObjects_=ee}uncache(){const _=this._objects,J=this._indicesByUUID,Z=this._bindings,Q=Z.length;let ee=this.nCachedObjects_,te=_.length;for(let ne=0,ie=arguments.length;ne!==ie;++ne){const re=arguments[ne],oe=re.uuid,se=J[oe];if(se!==void 0)if(delete J[oe],se<ee){const ae=--ee,ce=_[ae],ue=--te,de=_[ue];J[ce.uuid]=se,_[se]=ce,J[de.uuid]=ae,_[ae]=de,_.pop();for(let me=0,fe=Q;me!==fe;++me){const _e=Z[me],ye=_e[ae],be=_e[ue];_e[se]=ye,_e[ae]=be,_e.pop()}}else{const ae=--te,ce=_[ae];ae>0&&(J[ce.uuid]=se),_[se]=ce,_.pop();for(let ue=0,de=Q;ue!==de;++ue){const me=Z[ue];me[se]=me[ae],me.pop()}}}this.nCachedObjects_=ee}subscribe_(_,J){const Z=this._bindingsIndicesByPath;let Q=Z[_];const ee=this._bindings;if(Q!==void 0)return ee[Q];const te=this._paths,ne=this._parsedPaths,ie=this._objects,re=ie.length,oe=this.nCachedObjects_,se=new Array(re);Q=ee.length,Z[_]=Q,te.push(_),ne.push(J),ee.push(se);for(let ae=oe,ce=ie.length;ae!==ce;++ae){const ue=ie[ae];se[ae]=new PropertyBinding(ue,_,J)}return se}unsubscribe_(_){const J=this._bindingsIndicesByPath,Z=J[_];if(Z!==void 0){const Q=this._paths,ee=this._parsedPaths,te=this._bindings,ne=te.length-1,ie=te[ne],re=_[ne];J[re]=Z,te[Z]=ie,te.pop(),ee[Z]=ee[ne],ee.pop(),Q[Z]=Q[ne],Q.pop()}}}class AnimationAction{constructor(_,J,Z=null,Q=J.blendMode){this._mixer=_,this._clip=J,this._localRoot=Z,this.blendMode=Q;const ee=J.tracks,te=ee.length,ne=new Array(te),ie={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding};for(let re=0;re!==te;++re){const oe=ee[re].createInterpolant(null);ne[re]=oe,oe.settings=ie}this._interpolantSettings=ie,this._interpolants=ne,this._propertyBindings=new Array(te),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(_){return this._startTime=_,this}setLoop(_,J){return this.loop=_,this.repetitions=J,this}setEffectiveWeight(_){return this.weight=_,this._effectiveWeight=this.enabled?_:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(_){return this._scheduleFading(_,0,1)}fadeOut(_){return this._scheduleFading(_,1,0)}crossFadeFrom(_,J,Z=!1){if(_.fadeOut(J),this.fadeIn(J),Z===!0){const Q=this._clip.duration,ee=_._clip.duration,te=ee/Q,ne=Q/ee;_.warp(1,te,J),this.warp(ne,1,J)}return this}crossFadeTo(_,J,Z=!1){return _.crossFadeFrom(this,J,Z)}stopFading(){const _=this._weightInterpolant;return _!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(_)),this}setEffectiveTimeScale(_){return this.timeScale=_,this._effectiveTimeScale=this.paused?0:_,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(_){return this.timeScale=this._clip.duration/_,this.stopWarping()}syncWith(_){return this.time=_.time,this.timeScale=_.timeScale,this.stopWarping()}halt(_){return this.warp(this._effectiveTimeScale,0,_)}warp(_,J,Z){const Q=this._mixer,ee=Q.time,te=this.timeScale;let ne=this._timeScaleInterpolant;ne===null&&(ne=Q._lendControlInterpolant(),this._timeScaleInterpolant=ne);const ie=ne.parameterPositions,re=ne.sampleValues;return ie[0]=ee,ie[1]=ee+Z,re[0]=_/te,re[1]=J/te,this}stopWarping(){const _=this._timeScaleInterpolant;return _!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(_)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(_,J,Z,Q){if(!this.enabled){this._updateWeight(_);return}const ee=this._startTime;if(ee!==null){const ie=(_-ee)*Z;ie<0||Z===0?J=0:(this._startTime=null,J=Z*ie)}J*=this._updateTimeScale(_);const te=this._updateTime(J),ne=this._updateWeight(_);if(ne>0){const ie=this._interpolants,re=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(let oe=0,se=ie.length;oe!==se;++oe)ie[oe].evaluate(te),re[oe].accumulateAdditive(ne);break;case NormalAnimationBlendMode:default:for(let oe=0,se=ie.length;oe!==se;++oe)ie[oe].evaluate(te),re[oe].accumulate(Q,ne)}}}_updateWeight(_){let J=0;if(this.enabled){J=this.weight;const Z=this._weightInterpolant;if(Z!==null){const Q=Z.evaluate(_)[0];J*=Q,_>Z.parameterPositions[1]&&(this.stopFading(),Q===0&&(this.enabled=!1))}}return this._effectiveWeight=J,J}_updateTimeScale(_){let J=0;if(!this.paused){J=this.timeScale;const Z=this._timeScaleInterpolant;if(Z!==null){const Q=Z.evaluate(_)[0];J*=Q,_>Z.parameterPositions[1]&&(this.stopWarping(),J===0?this.paused=!0:this.timeScale=J)}}return this._effectiveTimeScale=J,J}_updateTime(_){const J=this._clip.duration,Z=this.loop;let Q=this.time+_,ee=this._loopCount;const te=Z===LoopPingPong;if(_===0)return ee===-1?Q:te&&(ee&1)===1?J-Q:Q;if(Z===LoopOnce){ee===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(Q>=J)Q=J;else if(Q<0)Q=0;else{this.time=Q;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=Q,this._mixer.dispatchEvent({type:"finished",action:this,direction:_<0?-1:1})}}else{if(ee===-1&&(_>=0?(ee=0,this._setEndings(!0,this.repetitions===0,te)):this._setEndings(this.repetitions===0,!0,te)),Q>=J||Q<0){const ne=Math.floor(Q/J);Q-=J*ne,ee+=Math.abs(ne);const ie=this.repetitions-ee;if(ie<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,Q=_>0?J:0,this.time=Q,this._mixer.dispatchEvent({type:"finished",action:this,direction:_>0?1:-1});else{if(ie===1){const re=_<0;this._setEndings(re,!re,te)}else this._setEndings(!1,!1,te);this._loopCount=ee,this.time=Q,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:ne})}}else this.time=Q;if(te&&(ee&1)===1)return J-Q}return Q}_setEndings(_,J,Z){const Q=this._interpolantSettings;Z?(Q.endingStart=ZeroSlopeEnding,Q.endingEnd=ZeroSlopeEnding):(_?Q.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:Q.endingStart=WrapAroundEnding,J?Q.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:Q.endingEnd=WrapAroundEnding)}_scheduleFading(_,J,Z){const Q=this._mixer,ee=Q.time;let te=this._weightInterpolant;te===null&&(te=Q._lendControlInterpolant(),this._weightInterpolant=te);const ne=te.parameterPositions,ie=te.sampleValues;return ne[0]=ee,ie[0]=J,ne[1]=ee+_,ie[1]=Z,this}}const _controlInterpolantsResultBuffer=new Float32Array(1);class AnimationMixer extends EventDispatcher$1{constructor(_){super(),this._root=_,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(_,J){const Z=_._localRoot||this._root,Q=_._clip.tracks,ee=Q.length,te=_._propertyBindings,ne=_._interpolants,ie=Z.uuid,re=this._bindingsByRootAndName;let oe=re[ie];oe===void 0&&(oe={},re[ie]=oe);for(let se=0;se!==ee;++se){const ae=Q[se],ce=ae.name;let ue=oe[ce];if(ue!==void 0)++ue.referenceCount,te[se]=ue;else{if(ue=te[se],ue!==void 0){ue._cacheIndex===null&&(++ue.referenceCount,this._addInactiveBinding(ue,ie,ce));continue}const de=J&&J._propertyBindings[se].binding.parsedPath;ue=new PropertyMixer(PropertyBinding.create(Z,ce,de),ae.ValueTypeName,ae.getValueSize()),++ue.referenceCount,this._addInactiveBinding(ue,ie,ce),te[se]=ue}ne[se].resultBuffer=ue.buffer}}_activateAction(_){if(!this._isActiveAction(_)){if(_._cacheIndex===null){const Z=(_._localRoot||this._root).uuid,Q=_._clip.uuid,ee=this._actionsByClip[Q];this._bindAction(_,ee&&ee.knownActions[0]),this._addInactiveAction(_,Q,Z)}const J=_._propertyBindings;for(let Z=0,Q=J.length;Z!==Q;++Z){const ee=J[Z];ee.useCount++===0&&(this._lendBinding(ee),ee.saveOriginalState())}this._lendAction(_)}}_deactivateAction(_){if(this._isActiveAction(_)){const J=_._propertyBindings;for(let Z=0,Q=J.length;Z!==Q;++Z){const ee=J[Z];--ee.useCount===0&&(ee.restoreOriginalState(),this._takeBackBinding(ee))}this._takeBackAction(_)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const _=this;this.stats={actions:{get total(){return _._actions.length},get inUse(){return _._nActiveActions}},bindings:{get total(){return _._bindings.length},get inUse(){return _._nActiveBindings}},controlInterpolants:{get total(){return _._controlInterpolants.length},get inUse(){return _._nActiveControlInterpolants}}}}_isActiveAction(_){const J=_._cacheIndex;return J!==null&&J<this._nActiveActions}_addInactiveAction(_,J,Z){const Q=this._actions,ee=this._actionsByClip;let te=ee[J];if(te===void 0)te={knownActions:[_],actionByRoot:{}},_._byClipCacheIndex=0,ee[J]=te;else{const ne=te.knownActions;_._byClipCacheIndex=ne.length,ne.push(_)}_._cacheIndex=Q.length,Q.push(_),te.actionByRoot[Z]=_}_removeInactiveAction(_){const J=this._actions,Z=J[J.length-1],Q=_._cacheIndex;Z._cacheIndex=Q,J[Q]=Z,J.pop(),_._cacheIndex=null;const ee=_._clip.uuid,te=this._actionsByClip,ne=te[ee],ie=ne.knownActions,re=ie[ie.length-1],oe=_._byClipCacheIndex;re._byClipCacheIndex=oe,ie[oe]=re,ie.pop(),_._byClipCacheIndex=null;const se=ne.actionByRoot,ae=(_._localRoot||this._root).uuid;delete se[ae],ie.length===0&&delete te[ee],this._removeInactiveBindingsForAction(_)}_removeInactiveBindingsForAction(_){const J=_._propertyBindings;for(let Z=0,Q=J.length;Z!==Q;++Z){const ee=J[Z];--ee.referenceCount===0&&this._removeInactiveBinding(ee)}}_lendAction(_){const J=this._actions,Z=_._cacheIndex,Q=this._nActiveActions++,ee=J[Q];_._cacheIndex=Q,J[Q]=_,ee._cacheIndex=Z,J[Z]=ee}_takeBackAction(_){const J=this._actions,Z=_._cacheIndex,Q=--this._nActiveActions,ee=J[Q];_._cacheIndex=Q,J[Q]=_,ee._cacheIndex=Z,J[Z]=ee}_addInactiveBinding(_,J,Z){const Q=this._bindingsByRootAndName,ee=this._bindings;let te=Q[J];te===void 0&&(te={},Q[J]=te),te[Z]=_,_._cacheIndex=ee.length,ee.push(_)}_removeInactiveBinding(_){const J=this._bindings,Z=_.binding,Q=Z.rootNode.uuid,ee=Z.path,te=this._bindingsByRootAndName,ne=te[Q],ie=J[J.length-1],re=_._cacheIndex;ie._cacheIndex=re,J[re]=ie,J.pop(),delete ne[ee],Object.keys(ne).length===0&&delete te[Q]}_lendBinding(_){const J=this._bindings,Z=_._cacheIndex,Q=this._nActiveBindings++,ee=J[Q];_._cacheIndex=Q,J[Q]=_,ee._cacheIndex=Z,J[Z]=ee}_takeBackBinding(_){const J=this._bindings,Z=_._cacheIndex,Q=--this._nActiveBindings,ee=J[Q];_._cacheIndex=Q,J[Q]=_,ee._cacheIndex=Z,J[Z]=ee}_lendControlInterpolant(){const _=this._controlInterpolants,J=this._nActiveControlInterpolants++;let Z=_[J];return Z===void 0&&(Z=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,_controlInterpolantsResultBuffer),Z.__cacheIndex=J,_[J]=Z),Z}_takeBackControlInterpolant(_){const J=this._controlInterpolants,Z=_.__cacheIndex,Q=--this._nActiveControlInterpolants,ee=J[Q];_.__cacheIndex=Q,J[Q]=_,ee.__cacheIndex=Z,J[Z]=ee}clipAction(_,J,Z){const Q=J||this._root,ee=Q.uuid;let te=typeof _=="string"?AnimationClip.findByName(Q,_):_;const ne=te!==null?te.uuid:_,ie=this._actionsByClip[ne];let re=null;if(Z===void 0&&(te!==null?Z=te.blendMode:Z=NormalAnimationBlendMode),ie!==void 0){const se=ie.actionByRoot[ee];if(se!==void 0&&se.blendMode===Z)return se;re=ie.knownActions[0],te===null&&(te=re._clip)}if(te===null)return null;const oe=new AnimationAction(this,te,J,Z);return this._bindAction(oe,re),this._addInactiveAction(oe,ne,ee),oe}existingAction(_,J){const Z=J||this._root,Q=Z.uuid,ee=typeof _=="string"?AnimationClip.findByName(Z,_):_,te=ee?ee.uuid:_,ne=this._actionsByClip[te];return ne!==void 0&&ne.actionByRoot[Q]||null}stopAllAction(){const _=this._actions,J=this._nActiveActions;for(let Z=J-1;Z>=0;--Z)_[Z].stop();return this}update(_){_*=this.timeScale;const J=this._actions,Z=this._nActiveActions,Q=this.time+=_,ee=Math.sign(_),te=this._accuIndex^=1;for(let re=0;re!==Z;++re)J[re]._update(Q,_,ee,te);const ne=this._bindings,ie=this._nActiveBindings;for(let re=0;re!==ie;++re)ne[re].apply(te);return this}setTime(_){this.time=0;for(let J=0;J<this._actions.length;J++)this._actions[J].time=0;return this.update(_)}getRoot(){return this._root}uncacheClip(_){const J=this._actions,Z=_.uuid,Q=this._actionsByClip,ee=Q[Z];if(ee!==void 0){const te=ee.knownActions;for(let ne=0,ie=te.length;ne!==ie;++ne){const re=te[ne];this._deactivateAction(re);const oe=re._cacheIndex,se=J[J.length-1];re._cacheIndex=null,re._byClipCacheIndex=null,se._cacheIndex=oe,J[oe]=se,J.pop(),this._removeInactiveBindingsForAction(re)}delete Q[Z]}}uncacheRoot(_){const J=_.uuid,Z=this._actionsByClip;for(const te in Z){const ne=Z[te].actionByRoot,ie=ne[J];ie!==void 0&&(this._deactivateAction(ie),this._removeInactiveAction(ie))}const Q=this._bindingsByRootAndName,ee=Q[J];if(ee!==void 0)for(const te in ee){const ne=ee[te];ne.restoreOriginalState(),this._removeInactiveBinding(ne)}}uncacheAction(_,J){const Z=this.existingAction(_,J);Z!==null&&(this._deactivateAction(Z),this._removeInactiveAction(Z))}}class RenderTarget3D extends RenderTarget{constructor(_=1,J=1,Z=1,Q={}){super(_,J,Q),this.isRenderTarget3D=!0,this.depth=Z,this.texture=new Data3DTexture(null,_,J,Z),this._setTextureOptions(Q),this.texture.isRenderTargetTexture=!0}}class Uniform{constructor(_){this.value=_}clone(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())}}let _id$3=0;class UniformsGroup extends EventDispatcher$1{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:_id$3++}),this.name="",this.usage=StaticDrawUsage,this.uniforms=[]}add(_){return this.uniforms.push(_),this}remove(_){const J=this.uniforms.indexOf(_);return J!==-1&&this.uniforms.splice(J,1),this}setName(_){return this.name=_,this}setUsage(_){return this.usage=_,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(_){this.name=_.name,this.usage=_.usage;const J=_.uniforms;this.uniforms.length=0;for(let Z=0,Q=J.length;Z<Q;Z++){const ee=Array.isArray(J[Z])?J[Z]:[J[Z]];for(let te=0;te<ee.length;te++)this.uniforms.push(ee[te].clone())}return this}clone(){return new this.constructor().copy(this)}}class InstancedInterleavedBuffer extends InterleavedBuffer{constructor(_,J,Z=1){super(_,J),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=Z}copy(_){return super.copy(_),this.meshPerAttribute=_.meshPerAttribute,this}clone(_){const J=super.clone(_);return J.meshPerAttribute=this.meshPerAttribute,J}toJSON(_){const J=super.toJSON(_);return J.isInstancedInterleavedBuffer=!0,J.meshPerAttribute=this.meshPerAttribute,J}}class GLBufferAttribute{constructor(_,J,Z,Q,ee,te=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=_,this.type=J,this.itemSize=Z,this.elementSize=Q,this.count=ee,this.normalized=te,this.version=0}set needsUpdate(_){_===!0&&this.version++}setBuffer(_){return this.buffer=_,this}setType(_,J){return this.type=_,this.elementSize=J,this}setItemSize(_){return this.itemSize=_,this}setCount(_){return this.count=_,this}}const _matrix=new Matrix4;class Raycaster{constructor(_,J,Z=0,Q=1/0){this.ray=new Ray(_,J),this.near=Z,this.far=Q,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(_,J){this.ray.set(_,J)}setFromCamera(_,J){J.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(J.matrixWorld),this.ray.direction.set(_.x,_.y,.5).unproject(J).sub(this.ray.origin).normalize(),this.camera=J):J.isOrthographicCamera?(this.ray.origin.set(_.x,_.y,(J.near+J.far)/(J.near-J.far)).unproject(J),this.ray.direction.set(0,0,-1).transformDirection(J.matrixWorld),this.camera=J):error("Raycaster: Unsupported camera type: "+J.type)}setFromXRController(_){return _matrix.identity().extractRotation(_.matrixWorld),this.ray.origin.setFromMatrixPosition(_.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(_matrix),this}intersectObject(_,J=!0,Z=[]){return intersect(_,this,Z,J),Z.sort(ascSort),Z}intersectObjects(_,J=!0,Z=[]){for(let Q=0,ee=_.length;Q<ee;Q++)intersect(_[Q],this,Z,J);return Z.sort(ascSort),Z}}function ascSort(G,_){return G.distance-_.distance}function intersect(G,_,J,Z){let Q=!0;if(G.layers.test(_.layers)&&G.raycast(_,J)===!1&&(Q=!1),Q===!0&&Z===!0){const ee=G.children;for(let te=0,ne=ee.length;te<ne;te++)intersect(ee[te],_,J,!0)}}class Timer{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(_){this._document=_,_.hidden!==void 0&&(this._pageVisibilityHandler=handleVisibilityChange.bind(this),_.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(_){return this._timescale=_,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(_){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(_!==void 0?_:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function handleVisibilityChange(){this._document.hidden===!1&&this.reset()}class Spherical{constructor(_=1,J=0,Z=0){this.radius=_,this.phi=J,this.theta=Z}set(_,J,Z){return this.radius=_,this.phi=J,this.theta=Z,this}copy(_){return this.radius=_.radius,this.phi=_.phi,this.theta=_.theta,this}makeSafe(){return this.phi=clamp(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(_){return this.setFromCartesianCoords(_.x,_.y,_.z)}setFromCartesianCoords(_,J,Z){return this.radius=Math.sqrt(_*_+J*J+Z*Z),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(_,Z),this.phi=Math.acos(clamp(J/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Cylindrical{constructor(_=1,J=0,Z=0){this.radius=_,this.theta=J,this.y=Z}set(_,J,Z){return this.radius=_,this.theta=J,this.y=Z,this}copy(_){return this.radius=_.radius,this.theta=_.theta,this.y=_.y,this}setFromVector3(_){return this.setFromCartesianCoords(_.x,_.y,_.z)}setFromCartesianCoords(_,J,Z){return this.radius=Math.sqrt(_*_+Z*Z),this.theta=Math.atan2(_,Z),this.y=J,this}clone(){return new this.constructor().copy(this)}}class Matrix2{constructor(_,J,Z,Q){Matrix2.prototype.isMatrix2=!0,this.elements=[1,0,0,1],_!==void 0&&this.set(_,J,Z,Q)}identity(){return this.set(1,0,0,1),this}fromArray(_,J=0){for(let Z=0;Z<4;Z++)this.elements[Z]=_[Z+J];return this}set(_,J,Z,Q){const ee=this.elements;return ee[0]=_,ee[2]=J,ee[1]=Z,ee[3]=Q,this}}const _vector$4=new Vector2;class Box2{constructor(_=new Vector2(1/0,1/0),J=new Vector2(-1/0,-1/0)){this.isBox2=!0,this.min=_,this.max=J}set(_,J){return this.min.copy(_),this.max.copy(J),this}setFromPoints(_){this.makeEmpty();for(let J=0,Z=_.length;J<Z;J++)this.expandByPoint(_[J]);return this}setFromCenterAndSize(_,J){const Z=_vector$4.copy(J).multiplyScalar(.5);return this.min.copy(_).sub(Z),this.max.copy(_).add(Z),this}clone(){return new this.constructor().copy(this)}copy(_){return this.min.copy(_.min),this.max.copy(_.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(_){return this.isEmpty()?_.set(0,0):_.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(_){return this.isEmpty()?_.set(0,0):_.subVectors(this.max,this.min)}expandByPoint(_){return this.min.min(_),this.max.max(_),this}expandByVector(_){return this.min.sub(_),this.max.add(_),this}expandByScalar(_){return this.min.addScalar(-_),this.max.addScalar(_),this}containsPoint(_){return _.x>=this.min.x&&_.x<=this.max.x&&_.y>=this.min.y&&_.y<=this.max.y}containsBox(_){return this.min.x<=_.min.x&&_.max.x<=this.max.x&&this.min.y<=_.min.y&&_.max.y<=this.max.y}getParameter(_,J){return J.set((_.x-this.min.x)/(this.max.x-this.min.x),(_.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(_){return _.max.x>=this.min.x&&_.min.x<=this.max.x&&_.max.y>=this.min.y&&_.min.y<=this.max.y}clampPoint(_,J){return J.copy(_).clamp(this.min,this.max)}distanceToPoint(_){return this.clampPoint(_,_vector$4).distanceTo(_)}intersect(_){return this.min.max(_.min),this.max.min(_.max),this.isEmpty()&&this.makeEmpty(),this}union(_){return this.min.min(_.min),this.max.max(_.max),this}translate(_){return this.min.add(_),this.max.add(_),this}equals(_){return _.min.equals(this.min)&&_.max.equals(this.max)}}const _startP=new Vector3,_startEnd=new Vector3,_d1=new Vector3,_d2=new Vector3,_r=new Vector3,_c1=new Vector3,_c2=new Vector3;class Line3{constructor(_=new Vector3,J=new Vector3){this.start=_,this.end=J}set(_,J){return this.start.copy(_),this.end.copy(J),this}copy(_){return this.start.copy(_.start),this.end.copy(_.end),this}getCenter(_){return _.addVectors(this.start,this.end).multiplyScalar(.5)}delta(_){return _.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(_,J){return this.delta(J).multiplyScalar(_).add(this.start)}closestPointToPointParameter(_,J){_startP.subVectors(_,this.start),_startEnd.subVectors(this.end,this.start);const Z=_startEnd.dot(_startEnd);let ee=_startEnd.dot(_startP)/Z;return J&&(ee=clamp(ee,0,1)),ee}closestPointToPoint(_,J,Z){const Q=this.closestPointToPointParameter(_,J);return this.delta(Z).multiplyScalar(Q).add(this.start)}distanceSqToLine3(_,J=_c1,Z=_c2){const Q=10000000000000001e-32;let ee,te;const ne=this.start,ie=_.start,re=this.end,oe=_.end;_d1.subVectors(re,ne),_d2.subVectors(oe,ie),_r.subVectors(ne,ie);const se=_d1.dot(_d1),ae=_d2.dot(_d2),ce=_d2.dot(_r);if(se<=Q&&ae<=Q)return J.copy(ne),Z.copy(ie),J.sub(Z),J.dot(J);if(se<=Q)ee=0,te=ce/ae,te=clamp(te,0,1);else{const ue=_d1.dot(_r);if(ae<=Q)te=0,ee=clamp(-ue/se,0,1);else{const de=_d1.dot(_d2),me=se*ae-de*de;me!==0?ee=clamp((de*ce-ue*ae)/me,0,1):ee=0,te=(de*ee+ce)/ae,te<0?(te=0,ee=clamp(-ue/se,0,1)):te>1&&(te=1,ee=clamp((de-ue)/se,0,1))}}return J.copy(ne).add(_d1.multiplyScalar(ee)),Z.copy(ie).add(_d2.multiplyScalar(te)),J.sub(Z),J.dot(J)}applyMatrix4(_){return this.start.applyMatrix4(_),this.end.applyMatrix4(_),this}equals(_){return _.start.equals(this.start)&&_.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _vector$3=new Vector3;class SpotLightHelper extends Object3D{constructor(_,J){super(),this.light=_,this.matrixAutoUpdate=!1,this.color=J,this.type="SpotLightHelper";const Z=new BufferGeometry,Q=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let te=0,ne=1,ie=32;te<ie;te++,ne++){const re=te/ie*Math.PI*2,oe=ne/ie*Math.PI*2;Q.push(Math.cos(re),Math.sin(re),1,Math.cos(oe),Math.sin(oe),1)}Z.setAttribute("position",new Float32BufferAttribute(Q,3));const ee=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(Z,ee),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const _=this.light.distance?this.light.distance:1e3,J=_*Math.tan(this.light.angle);this.cone.scale.set(J,J,_),_vector$3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const _vector$2=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;class SkeletonHelper extends LineSegments{constructor(_){const J=getBoneList(_),Z=new BufferGeometry,Q=[],ee=[];for(let re=0;re<J.length;re++){const oe=J[re];oe.parent&&oe.parent.isBone&&(Q.push(0,0,0),Q.push(0,0,0),ee.push(0,0,0),ee.push(0,0,0))}Z.setAttribute("position",new Float32BufferAttribute(Q,3)),Z.setAttribute("color",new Float32BufferAttribute(ee,3));const te=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(Z,te),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=_,this.bones=J,this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1;const ne=new Color(255),ie=new Color(65280);this.setColors(ne,ie)}updateMatrixWorld(_){const J=this.bones,Z=this.geometry,Q=Z.getAttribute("position");_matrixWorldInv.copy(this.root.matrixWorld).invert();for(let ee=0,te=0;ee<J.length;ee++){const ne=J[ee];ne.parent&&ne.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,ne.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),Q.setXYZ(te,_vector$2.x,_vector$2.y,_vector$2.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,ne.parent.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),Q.setXYZ(te+1,_vector$2.x,_vector$2.y,_vector$2.z),te+=2)}Z.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(_)}setColors(_,J){const Q=this.geometry.getAttribute("color");for(let ee=0;ee<Q.count;ee+=2)Q.setXYZ(ee,_.r,_.g,_.b),Q.setXYZ(ee+1,J.r,J.g,J.b);return Q.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function getBoneList(G){const _=[];G.isBone===!0&&_.push(G);for(let J=0;J<G.children.length;J++)_.push(...getBoneList(G.children[J]));return _}class PointLightHelper extends Mesh{constructor(_,J,Z){const Q=new SphereGeometry(J,4,2),ee=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});super(Q,ee),this.light=_,this.color=Z,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _vector$1=new Vector3,_color1=new Color,_color2=new Color;class HemisphereLightHelper extends Object3D{constructor(_,J,Z){super(),this.light=_,this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1,this.color=Z,this.type="HemisphereLightHelper";const Q=new OctahedronGeometry(J);Q.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const ee=Q.getAttribute("position"),te=new Float32Array(ee.count*3);Q.setAttribute("color",new BufferAttribute(te,3)),this.add(new Mesh(Q,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const _=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const J=_.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(let Z=0,Q=J.count;Z<Q;Z++){const ee=Z<Q/2?_color1:_color2;J.setXYZ(Z,ee.r,ee.g,ee.b)}J.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),_.lookAt(_vector$1.setFromMatrixPosition(this.light.matrixWorld).negate())}}class GridHelper extends LineSegments{constructor(_=10,J=10,Z=4473924,Q=8947848){Z=new Color(Z),Q=new Color(Q);const ee=J/2,te=_/J,ne=_/2,ie=[],re=[];for(let ae=0,ce=0,ue=-ne;ae<=J;ae++,ue+=te){ie.push(-ne,0,ue,ne,0,ue),ie.push(ue,0,-ne,ue,0,ne);const de=ae===ee?Z:Q;de.toArray(re,ce),ce+=3,de.toArray(re,ce),ce+=3,de.toArray(re,ce),ce+=3,de.toArray(re,ce),ce+=3}const oe=new BufferGeometry;oe.setAttribute("position",new Float32BufferAttribute(ie,3)),oe.setAttribute("color",new Float32BufferAttribute(re,3));const se=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(oe,se),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class PolarGridHelper extends LineSegments{constructor(_=10,J=16,Z=8,Q=64,ee=4473924,te=8947848){ee=new Color(ee),te=new Color(te);const ne=[],ie=[];if(J>1)for(let se=0;se<J;se++){const ae=se/J*(Math.PI*2),ce=Math.sin(ae)*_,ue=Math.cos(ae)*_;ne.push(0,0,0),ne.push(ce,0,ue);const de=se&1?ee:te;ie.push(de.r,de.g,de.b),ie.push(de.r,de.g,de.b)}for(let se=0;se<Z;se++){const ae=se&1?ee:te,ce=_-_/Z*se;for(let ue=0;ue<Q;ue++){let de=ue/Q*(Math.PI*2),me=Math.sin(de)*ce,fe=Math.cos(de)*ce;ne.push(me,0,fe),ie.push(ae.r,ae.g,ae.b),de=(ue+1)/Q*(Math.PI*2),me=Math.sin(de)*ce,fe=Math.cos(de)*ce,ne.push(me,0,fe),ie.push(ae.r,ae.g,ae.b)}}const re=new BufferGeometry;re.setAttribute("position",new Float32BufferAttribute(ne,3)),re.setAttribute("color",new Float32BufferAttribute(ie,3));const oe=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(re,oe),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const _v1$8=new Vector3,_v2=new Vector3,_v3=new Vector3;class DirectionalLightHelper extends Object3D{constructor(_,J,Z){super(),this.light=_,this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1,this.color=Z,this.type="DirectionalLightHelper",J===void 0&&(J=1);let Q=new BufferGeometry;Q.setAttribute("position",new Float32BufferAttribute([-J,J,0,J,J,0,J,-J,0,-J,-J,0,-J,J,0],3));const ee=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line(Q,ee),this.add(this.lightPlane),Q=new BufferGeometry,Q.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line(Q,ee),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),_v1$8.setFromMatrixPosition(this.light.matrixWorld),_v2.setFromMatrixPosition(this.light.target.matrixWorld),_v3.subVectors(_v2,_v1$8),this.lightPlane.lookAt(_v2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2),this.targetLine.scale.z=_v3.length()}}const _vector=new Vector3,_camera=new Camera;class CameraHelper extends LineSegments{constructor(_){const J=new BufferGeometry,Z=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),Q=[],ee=[],te={};ne("n1","n2"),ne("n2","n4"),ne("n4","n3"),ne("n3","n1"),ne("f1","f2"),ne("f2","f4"),ne("f4","f3"),ne("f3","f1"),ne("n1","f1"),ne("n2","f2"),ne("n3","f3"),ne("n4","f4"),ne("p","n1"),ne("p","n2"),ne("p","n3"),ne("p","n4"),ne("u1","u2"),ne("u2","u3"),ne("u3","u1"),ne("c","t"),ne("p","c"),ne("cn1","cn2"),ne("cn3","cn4"),ne("cf1","cf2"),ne("cf3","cf4");function ne(ue,de){ie(ue),ie(de)}function ie(ue){Q.push(0,0,0),ee.push(0,0,0),te[ue]===void 0&&(te[ue]=[]),te[ue].push(Q.length/3-1)}J.setAttribute("position",new Float32BufferAttribute(Q,3)),J.setAttribute("color",new Float32BufferAttribute(ee,3)),super(J,Z),this.type="CameraHelper",this.camera=_,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=te,this.update();const re=new Color(16755200),oe=new Color(16711680),se=new Color(43775),ae=new Color(16777215),ce=new Color(3355443);this.setColors(re,oe,se,ae,ce)}setColors(_,J,Z,Q,ee){const ne=this.geometry.getAttribute("color");return ne.setXYZ(0,_.r,_.g,_.b),ne.setXYZ(1,_.r,_.g,_.b),ne.setXYZ(2,_.r,_.g,_.b),ne.setXYZ(3,_.r,_.g,_.b),ne.setXYZ(4,_.r,_.g,_.b),ne.setXYZ(5,_.r,_.g,_.b),ne.setXYZ(6,_.r,_.g,_.b),ne.setXYZ(7,_.r,_.g,_.b),ne.setXYZ(8,_.r,_.g,_.b),ne.setXYZ(9,_.r,_.g,_.b),ne.setXYZ(10,_.r,_.g,_.b),ne.setXYZ(11,_.r,_.g,_.b),ne.setXYZ(12,_.r,_.g,_.b),ne.setXYZ(13,_.r,_.g,_.b),ne.setXYZ(14,_.r,_.g,_.b),ne.setXYZ(15,_.r,_.g,_.b),ne.setXYZ(16,_.r,_.g,_.b),ne.setXYZ(17,_.r,_.g,_.b),ne.setXYZ(18,_.r,_.g,_.b),ne.setXYZ(19,_.r,_.g,_.b),ne.setXYZ(20,_.r,_.g,_.b),ne.setXYZ(21,_.r,_.g,_.b),ne.setXYZ(22,_.r,_.g,_.b),ne.setXYZ(23,_.r,_.g,_.b),ne.setXYZ(24,J.r,J.g,J.b),ne.setXYZ(25,J.r,J.g,J.b),ne.setXYZ(26,J.r,J.g,J.b),ne.setXYZ(27,J.r,J.g,J.b),ne.setXYZ(28,J.r,J.g,J.b),ne.setXYZ(29,J.r,J.g,J.b),ne.setXYZ(30,J.r,J.g,J.b),ne.setXYZ(31,J.r,J.g,J.b),ne.setXYZ(32,Z.r,Z.g,Z.b),ne.setXYZ(33,Z.r,Z.g,Z.b),ne.setXYZ(34,Z.r,Z.g,Z.b),ne.setXYZ(35,Z.r,Z.g,Z.b),ne.setXYZ(36,Z.r,Z.g,Z.b),ne.setXYZ(37,Z.r,Z.g,Z.b),ne.setXYZ(38,Q.r,Q.g,Q.b),ne.setXYZ(39,Q.r,Q.g,Q.b),ne.setXYZ(40,ee.r,ee.g,ee.b),ne.setXYZ(41,ee.r,ee.g,ee.b),ne.setXYZ(42,ee.r,ee.g,ee.b),ne.setXYZ(43,ee.r,ee.g,ee.b),ne.setXYZ(44,ee.r,ee.g,ee.b),ne.setXYZ(45,ee.r,ee.g,ee.b),ne.setXYZ(46,ee.r,ee.g,ee.b),ne.setXYZ(47,ee.r,ee.g,ee.b),ne.setXYZ(48,ee.r,ee.g,ee.b),ne.setXYZ(49,ee.r,ee.g,ee.b),ne.needsUpdate=!0,this}update(){const _=this.geometry,J=this.pointMap,Z=1,Q=1;let ee,te;if(_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)ee=1,te=0;else if(this.camera.coordinateSystem===WebGLCoordinateSystem)ee=-1,te=1;else if(this.camera.coordinateSystem===WebGPUCoordinateSystem)ee=0,te=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);setPoint("c",J,_,_camera,0,0,ee),setPoint("t",J,_,_camera,0,0,te),setPoint("n1",J,_,_camera,-Z,-Q,ee),setPoint("n2",J,_,_camera,Z,-Q,ee),setPoint("n3",J,_,_camera,-Z,Q,ee),setPoint("n4",J,_,_camera,Z,Q,ee),setPoint("f1",J,_,_camera,-Z,-Q,te),setPoint("f2",J,_,_camera,Z,-Q,te),setPoint("f3",J,_,_camera,-Z,Q,te),setPoint("f4",J,_,_camera,Z,Q,te),setPoint("u1",J,_,_camera,Z*.7,Q*1.1,ee),setPoint("u2",J,_,_camera,-Z*.7,Q*1.1,ee),setPoint("u3",J,_,_camera,0,Q*2,ee),setPoint("cf1",J,_,_camera,-Z,0,te),setPoint("cf2",J,_,_camera,Z,0,te),setPoint("cf3",J,_,_camera,0,-Q,te),setPoint("cf4",J,_,_camera,0,Q,te),setPoint("cn1",J,_,_camera,-Z,0,ee),setPoint("cn2",J,_,_camera,Z,0,ee),setPoint("cn3",J,_,_camera,0,-Q,ee),setPoint("cn4",J,_,_camera,0,Q,ee),_.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function setPoint(G,_,J,Z,Q,ee,te){_vector.set(Q,ee,te).unproject(Z);const ne=_[G];if(ne!==void 0){const ie=J.getAttribute("position");for(let re=0,oe=ne.length;re<oe;re++)ie.setXYZ(ne[re],_vector.x,_vector.y,_vector.z)}}const _box=new Box3;class BoxHelper extends LineSegments{constructor(_,J=16776960){const Z=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Q=new Float32Array(24),ee=new BufferGeometry;ee.setIndex(new BufferAttribute(Z,1)),ee.setAttribute("position",new BufferAttribute(Q,3)),super(ee,new LineBasicMaterial({color:J,toneMapped:!1})),this.object=_,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&_box.setFromObject(this.object),_box.isEmpty())return;const _=_box.min,J=_box.max,Z=this.geometry.attributes.position,Q=Z.array;Q[0]=J.x,Q[1]=J.y,Q[2]=J.z,Q[3]=_.x,Q[4]=J.y,Q[5]=J.z,Q[6]=_.x,Q[7]=_.y,Q[8]=J.z,Q[9]=J.x,Q[10]=_.y,Q[11]=J.z,Q[12]=J.x,Q[13]=J.y,Q[14]=_.z,Q[15]=_.x,Q[16]=J.y,Q[17]=_.z,Q[18]=_.x,Q[19]=_.y,Q[20]=_.z,Q[21]=J.x,Q[22]=_.y,Q[23]=_.z,Z.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(_){return this.object=_,this.update(),this}copy(_,J){return super.copy(_,J),this.object=_.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Box3Helper extends LineSegments{constructor(_,J=16776960){const Z=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Q=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],ee=new BufferGeometry;ee.setIndex(new BufferAttribute(Z,1)),ee.setAttribute("position",new Float32BufferAttribute(Q,3)),super(ee,new LineBasicMaterial({color:J,toneMapped:!1})),this.box=_,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(_){const J=this.box;J.isEmpty()||(J.getCenter(this.position),J.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(_))}dispose(){this.geometry.dispose(),this.material.dispose()}}class PlaneHelper extends Line{constructor(_,J=1,Z=16776960){const Q=Z,ee=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],te=new BufferGeometry;te.setAttribute("position",new Float32BufferAttribute(ee,3)),te.computeBoundingSphere(),super(te,new LineBasicMaterial({color:Q,toneMapped:!1})),this.type="PlaneHelper",this.plane=_,this.size=J;const ne=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],ie=new BufferGeometry;ie.setAttribute("position",new Float32BufferAttribute(ne,3)),ie.computeBoundingSphere(),this.add(new Mesh(ie,new MeshBasicMaterial({color:Q,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(_){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(_)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const _axis=new Vector3;let _lineGeometry,_coneGeometry;class ArrowHelper extends Object3D{constructor(_=new Vector3(0,0,1),J=new Vector3(0,0,0),Z=1,Q=16776960,ee=Z*.2,te=ee*.2){super(),this.type="ArrowHelper",_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new ConeGeometry(.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(J),this.line=new Line(_lineGeometry,new LineBasicMaterial({color:Q,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:Q,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(_),this.setLength(Z,ee,te)}setDirection(_){if(_.y>.99999)this.quaternion.set(0,0,0,1);else if(_.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(_.z,0,-_.x).normalize();const J=Math.acos(_.y);this.quaternion.setFromAxisAngle(_axis,J)}}setLength(_,J=_*.2,Z=J*.2){this.line.scale.set(1,Math.max(1e-4,_-J),1),this.line.updateMatrix(),this.cone.scale.set(Z,J,Z),this.cone.position.y=_,this.cone.updateMatrix()}setColor(_){this.line.material.color.set(_),this.cone.material.color.set(_)}copy(_){return super.copy(_,!1),this.line.copy(_.line),this.cone.copy(_.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class AxesHelper extends LineSegments{constructor(_=1){const J=[0,0,0,_,0,0,0,0,0,0,_,0,0,0,0,0,0,_],Z=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],Q=new BufferGeometry;Q.setAttribute("position",new Float32BufferAttribute(J,3)),Q.setAttribute("color",new Float32BufferAttribute(Z,3));const ee=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(Q,ee),this.type="AxesHelper"}setColors(_,J,Z){const Q=new Color,ee=this.geometry.attributes.color.array;return Q.set(_),Q.toArray(ee,0),Q.toArray(ee,3),Q.set(J),Q.toArray(ee,6),Q.toArray(ee,9),Q.set(Z),Q.toArray(ee,12),Q.toArray(ee,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ShapePath{constructor(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}moveTo(_,J){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(_,J),this}lineTo(_,J){return this.currentPath.lineTo(_,J),this}quadraticCurveTo(_,J,Z,Q){return this.currentPath.quadraticCurveTo(_,J,Z,Q),this}bezierCurveTo(_,J,Z,Q,ee,te){return this.currentPath.bezierCurveTo(_,J,Z,Q,ee,te),this}splineThru(_){return this.currentPath.splineThru(_),this}toShapes(_){function J(fe){const _e=[];for(let ye=0,be=fe.length;ye<be;ye++){const Se=fe[ye],Ce=new Shape;Ce.curves=Se.curves,_e.push(Ce)}return _e}function Z(fe,_e){const ye=_e.length;let be=!1;for(let Se=ye-1,Ce=0;Ce<ye;Se=Ce++){let Me=_e[Se],Re=_e[Ce],Te=Re.x-Me.x,Ee=Re.y-Me.y;if(Math.abs(Ee)>Number.EPSILON){if(Ee<0&&(Me=_e[Ce],Te=-Te,Re=_e[Se],Ee=-Ee),fe.y<Me.y||fe.y>Re.y)continue;if(fe.y===Me.y){if(fe.x===Me.x)return!0}else{const De=Ee*(fe.x-Me.x)-Te*(fe.y-Me.y);if(De===0)return!0;if(De<0)continue;be=!be}}else{if(fe.y!==Me.y)continue;if(Re.x<=fe.x&&fe.x<=Me.x||Me.x<=fe.x&&fe.x<=Re.x)return!0}}return be}const Q=ShapeUtils.isClockWise,ee=this.subPaths;if(ee.length===0)return[];let te,ne,ie;const re=[];if(ee.length===1)return ne=ee[0],ie=new Shape,ie.curves=ne.curves,re.push(ie),re;let oe=!Q(ee[0].getPoints());oe=_?!oe:oe;const se=[],ae=[];let ce=[],ue=0,de;ae[ue]=void 0,ce[ue]=[];for(let fe=0,_e=ee.length;fe<_e;fe++)ne=ee[fe],de=ne.getPoints(),te=Q(de),te=_?!te:te,te?(!oe&&ae[ue]&&ue++,ae[ue]={s:new Shape,p:de},ae[ue].s.curves=ne.curves,oe&&ue++,ce[ue]=[]):ce[ue].push({h:ne,p:de[0]});if(!ae[0])return J(ee);if(ae.length>1){let fe=!1,_e=0;for(let ye=0,be=ae.length;ye<be;ye++)se[ye]=[];for(let ye=0,be=ae.length;ye<be;ye++){const Se=ce[ye];for(let Ce=0;Ce<Se.length;Ce++){const Me=Se[Ce];let Re=!0;for(let Te=0;Te<ae.length;Te++)Z(Me.p,ae[Te].p)&&(ye!==Te&&_e++,Re?(Re=!1,se[Te].push(Me)):fe=!0);Re&&se[ye].push(Me)}}_e>0&&fe===!1&&(ce=se)}let me;for(let fe=0,_e=ae.length;fe<_e;fe++){ie=ae[fe].s,re.push(ie),me=ce[fe];for(let ye=0,be=me.length;ye<be;ye++)ie.holes.push(me[ye].h)}return re}}class Controls extends EventDispatcher$1{constructor(_,J=null){super(),this.object=_,this.domElement=J,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(_){if(_===void 0){warn("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=_}disconnect(){}dispose(){}update(){}}function contain(G,_){const J=G.image&&G.image.width?G.image.width/G.image.height:1;return J>_?(G.repeat.x=1,G.repeat.y=J/_,G.offset.x=0,G.offset.y=(1-G.repeat.y)/2):(G.repeat.x=_/J,G.repeat.y=1,G.offset.x=(1-G.repeat.x)/2,G.offset.y=0),G}function cover(G,_){const J=G.image&&G.image.width?G.image.width/G.image.height:1;return J>_?(G.repeat.x=_/J,G.repeat.y=1,G.offset.x=(1-G.repeat.x)/2,G.offset.y=0):(G.repeat.x=1,G.repeat.y=J/_,G.offset.x=0,G.offset.y=(1-G.repeat.y)/2),G}function fill(G){return G.repeat.x=1,G.repeat.y=1,G.offset.x=0,G.offset.y=0,G}function getByteLength(G,_,J,Z){const Q=getTextureTypeByteLength(Z);switch(J){case AlphaFormat:return G*_;case RedFormat:return G*_/Q.components*Q.byteLength;case RedIntegerFormat:return G*_/Q.components*Q.byteLength;case RGFormat:return G*_*2/Q.components*Q.byteLength;case RGIntegerFormat:return G*_*2/Q.components*Q.byteLength;case RGBFormat:return G*_*3/Q.components*Q.byteLength;case RGBAFormat:return G*_*4/Q.components*Q.byteLength;case RGBAIntegerFormat:return G*_*4/Q.components*Q.byteLength;case RGB_S3TC_DXT1_Format:case RGBA_S3TC_DXT1_Format:return Math.floor((G+3)/4)*Math.floor((_+3)/4)*8;case RGBA_S3TC_DXT3_Format:case RGBA_S3TC_DXT5_Format:return Math.floor((G+3)/4)*Math.floor((_+3)/4)*16;case RGB_PVRTC_2BPPV1_Format:case RGBA_PVRTC_2BPPV1_Format:return Math.max(G,16)*Math.max(_,8)/4;case RGB_PVRTC_4BPPV1_Format:case RGBA_PVRTC_4BPPV1_Format:return Math.max(G,8)*Math.max(_,8)/2;case RGB_ETC1_Format:case RGB_ETC2_Format:return Math.floor((G+3)/4)*Math.floor((_+3)/4)*8;case RGBA_ETC2_EAC_Format:return Math.floor((G+3)/4)*Math.floor((_+3)/4)*16;case RGBA_ASTC_4x4_Format:return Math.floor((G+3)/4)*Math.floor((_+3)/4)*16;case RGBA_ASTC_5x4_Format:return Math.floor((G+4)/5)*Math.floor((_+3)/4)*16;case RGBA_ASTC_5x5_Format:return Math.floor((G+4)/5)*Math.floor((_+4)/5)*16;case RGBA_ASTC_6x5_Format:return Math.floor((G+5)/6)*Math.floor((_+4)/5)*16;case RGBA_ASTC_6x6_Format:return Math.floor((G+5)/6)*Math.floor((_+5)/6)*16;case RGBA_ASTC_8x5_Format:return Math.floor((G+7)/8)*Math.floor((_+4)/5)*16;case RGBA_ASTC_8x6_Format:return Math.floor((G+7)/8)*Math.floor((_+5)/6)*16;case RGBA_ASTC_8x8_Format:return Math.floor((G+7)/8)*Math.floor((_+7)/8)*16;case RGBA_ASTC_10x5_Format:return Math.floor((G+9)/10)*Math.floor((_+4)/5)*16;case RGBA_ASTC_10x6_Format:return Math.floor((G+9)/10)*Math.floor((_+5)/6)*16;case RGBA_ASTC_10x8_Format:return Math.floor((G+9)/10)*Math.floor((_+7)/8)*16;case RGBA_ASTC_10x10_Format:return Math.floor((G+9)/10)*Math.floor((_+9)/10)*16;case RGBA_ASTC_12x10_Format:return Math.floor((G+11)/12)*Math.floor((_+9)/10)*16;case RGBA_ASTC_12x12_Format:return Math.floor((G+11)/12)*Math.floor((_+11)/12)*16;case RGBA_BPTC_Format:case RGB_BPTC_SIGNED_Format:case RGB_BPTC_UNSIGNED_Format:return Math.ceil(G/4)*Math.ceil(_/4)*16;case RED_RGTC1_Format:case SIGNED_RED_RGTC1_Format:return Math.ceil(G/4)*Math.ceil(_/4)*8;case RED_GREEN_RGTC2_Format:case SIGNED_RED_GREEN_RGTC2_Format:return Math.ceil(G/4)*Math.ceil(_/4)*16}throw new Error(`Unable to determine texture byte length for ${J} format.`)}function getTextureTypeByteLength(G){switch(G){case UnsignedByteType:case ByteType:return{byteLength:1,components:1};case UnsignedShortType:case ShortType:case HalfFloatType:return{byteLength:2,components:1};case UnsignedShort4444Type:case UnsignedShort5551Type:return{byteLength:2,components:4};case UnsignedIntType:case IntType:case FloatType:return{byteLength:4,components:1};case UnsignedInt5999Type:case UnsignedInt101111Type:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${G}.`)}class TextureUtils{static contain(_,J){return contain(_,J)}static cover(_,J){return cover(_,J)}static fill(_){return fill(_)}static getByteLength(_,J,Z,Q){return getByteLength(_,J,Z,Q)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));typeof window<"u"&&(window.__THREE__?warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);function WebGLAnimation(){let G=null,_=!1,J=null,Z=null;function Q(ee,te){J(ee,te),Z=G.requestAnimationFrame(Q)}return{start:function(){_!==!0&&J!==null&&(Z=G.requestAnimationFrame(Q),_=!0)},stop:function(){G.cancelAnimationFrame(Z),_=!1},setAnimationLoop:function(ee){J=ee},setContext:function(ee){G=ee}}}function WebGLAttributes(G){const _=new WeakMap;function J(ne,ie){const re=ne.array,oe=ne.usage,se=re.byteLength,ae=G.createBuffer();G.bindBuffer(ie,ae),G.bufferData(ie,re,oe),ne.onUploadCallback();let ce;if(re instanceof Float32Array)ce=G.FLOAT;else if(typeof Float16Array<"u"&&re instanceof Float16Array)ce=G.HALF_FLOAT;else if(re instanceof Uint16Array)ne.isFloat16BufferAttribute?ce=G.HALF_FLOAT:ce=G.UNSIGNED_SHORT;else if(re instanceof Int16Array)ce=G.SHORT;else if(re instanceof Uint32Array)ce=G.UNSIGNED_INT;else if(re instanceof Int32Array)ce=G.INT;else if(re instanceof Int8Array)ce=G.BYTE;else if(re instanceof Uint8Array)ce=G.UNSIGNED_BYTE;else if(re instanceof Uint8ClampedArray)ce=G.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+re);return{buffer:ae,type:ce,bytesPerElement:re.BYTES_PER_ELEMENT,version:ne.version,size:se}}function Z(ne,ie,re){const oe=ie.array,se=ie.updateRanges;if(G.bindBuffer(re,ne),se.length===0)G.bufferSubData(re,0,oe);else{se.sort((ce,ue)=>ce.start-ue.start);let ae=0;for(let ce=1;ce<se.length;ce++){const ue=se[ae],de=se[ce];de.start<=ue.start+ue.count+1?ue.count=Math.max(ue.count,de.start+de.count-ue.start):(++ae,se[ae]=de)}se.length=ae+1;for(let ce=0,ue=se.length;ce<ue;ce++){const de=se[ce];G.bufferSubData(re,de.start*oe.BYTES_PER_ELEMENT,oe,de.start,de.count)}ie.clearUpdateRanges()}ie.onUploadCallback()}function Q(ne){return ne.isInterleavedBufferAttribute&&(ne=ne.data),_.get(ne)}function ee(ne){ne.isInterleavedBufferAttribute&&(ne=ne.data);const ie=_.get(ne);ie&&(G.deleteBuffer(ie.buffer),_.delete(ne))}function te(ne,ie){if(ne.isInterleavedBufferAttribute&&(ne=ne.data),ne.isGLBufferAttribute){const oe=_.get(ne);(!oe||oe.version<ne.version)&&_.set(ne,{buffer:ne.buffer,type:ne.type,bytesPerElement:ne.elementSize,version:ne.version});return}const re=_.get(ne);if(re===void 0)_.set(ne,J(ne,ie));else if(re.version<ne.version){if(re.size!==ne.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");Z(re.buffer,ne,ie),re.version=ne.version}}return{get:Q,remove:ee,update:te}}var alphahash_fragment=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,alphahash_pars_fragment=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,batching_pars_vertex=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,batching_vertex=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,begin_vertex=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iridescence_fragment=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,colorspace_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,lights_physical_pars_fragment=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 uv = vec2( roughness, dotNV );
	return texture2D( dfgLUT, uv ).rg;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNV * dotNV), 0.0, dotNV), material.roughness );
	vec2 dfgL = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNL * dotNL), 0.0, dotNL), material.roughness );
	vec3 FssEss_V = material.specularColor * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColor * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColor + ( 1.0 - material.specularColor ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphinstance_vertex=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,morphcolor_vertex=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,normal_fragment_maps=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,iridescence_pars_fragment=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,opaque_fragment$1=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,shadowmap_pars_vertex=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,uv_pars_fragment=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_pars_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$h=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$h=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$g=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$g=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,vertex$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphahash_fragment,alphahash_pars_fragment,alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,batching_pars_vertex,batching_vertex,begin_vertex,beginnormal_vertex,bsdfs,iridescence_fragment,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,colorspace_fragment,colorspace_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_pars_fragment,lights_lambert_fragment,lights_lambert_pars_fragment,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphinstance_vertex,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,iridescence_pars_fragment,opaque_fragment:opaque_fragment$1,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Matrix3}},envmap:{envMap:{value:null},envMapRotation:{value:new Matrix3},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Matrix3}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Matrix3}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Matrix3},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Matrix3},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Matrix3},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Matrix3}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Matrix3}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Matrix3}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Matrix3}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Matrix3},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Matrix3},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Matrix3},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Matrix3},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Matrix3},sheen:{value:0},sheenColor:{value:new Color(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Matrix3},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Matrix3},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Matrix3},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Matrix3},attenuationDistance:{value:0},attenuationColor:{value:new Color(0)},specularColor:{value:new Color(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Matrix3},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Matrix3},anisotropyVector:{value:new Vector2},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Matrix3}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0},_e1$1=new Euler,_m1$1=new Matrix4;function WebGLBackground(G,_,J,Z,Q,ee,te){const ne=new Color(0);let ie=ee===!0?0:1,re,oe,se=null,ae=0,ce=null;function ue(ye){let be=ye.isScene===!0?ye.background:null;return be&&be.isTexture&&(be=(ye.backgroundBlurriness>0?J:_).get(be)),be}function de(ye){let be=!1;const Se=ue(ye);Se===null?fe(ne,ie):Se&&Se.isColor&&(fe(Se,1),be=!0);const Ce=G.xr.getEnvironmentBlendMode();Ce==="additive"?Z.buffers.color.setClear(0,0,0,1,te):Ce==="alpha-blend"&&Z.buffers.color.setClear(0,0,0,0,te),(G.autoClear||be)&&(Z.buffers.depth.setTest(!0),Z.buffers.depth.setMask(!0),Z.buffers.color.setMask(!0),G.clear(G.autoClearColor,G.autoClearDepth,G.autoClearStencil))}function me(ye,be){const Se=ue(be);Se&&(Se.isCubeTexture||Se.mapping===CubeUVReflectionMapping)?(oe===void 0&&(oe=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),oe.geometry.deleteAttribute("normal"),oe.geometry.deleteAttribute("uv"),oe.onBeforeRender=function(Ce,Me,Re){this.matrixWorld.copyPosition(Re.matrixWorld)},Object.defineProperty(oe.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),Q.update(oe)),_e1$1.copy(be.backgroundRotation),_e1$1.x*=-1,_e1$1.y*=-1,_e1$1.z*=-1,Se.isCubeTexture&&Se.isRenderTargetTexture===!1&&(_e1$1.y*=-1,_e1$1.z*=-1),oe.material.uniforms.envMap.value=Se,oe.material.uniforms.flipEnvMap.value=Se.isCubeTexture&&Se.isRenderTargetTexture===!1?-1:1,oe.material.uniforms.backgroundBlurriness.value=be.backgroundBlurriness,oe.material.uniforms.backgroundIntensity.value=be.backgroundIntensity,oe.material.uniforms.backgroundRotation.value.setFromMatrix4(_m1$1.makeRotationFromEuler(_e1$1)),oe.material.toneMapped=ColorManagement.getTransfer(Se.colorSpace)!==SRGBTransfer,(se!==Se||ae!==Se.version||ce!==G.toneMapping)&&(oe.material.needsUpdate=!0,se=Se,ae=Se.version,ce=G.toneMapping),oe.layers.enableAll(),ye.unshift(oe,oe.geometry,oe.material,0,0,null)):Se&&Se.isTexture&&(re===void 0&&(re=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),re.geometry.deleteAttribute("normal"),Object.defineProperty(re.material,"map",{get:function(){return this.uniforms.t2D.value}}),Q.update(re)),re.material.uniforms.t2D.value=Se,re.material.uniforms.backgroundIntensity.value=be.backgroundIntensity,re.material.toneMapped=ColorManagement.getTransfer(Se.colorSpace)!==SRGBTransfer,Se.matrixAutoUpdate===!0&&Se.updateMatrix(),re.material.uniforms.uvTransform.value.copy(Se.matrix),(se!==Se||ae!==Se.version||ce!==G.toneMapping)&&(re.material.needsUpdate=!0,se=Se,ae=Se.version,ce=G.toneMapping),re.layers.enableAll(),ye.unshift(re,re.geometry,re.material,0,0,null))}function fe(ye,be){ye.getRGB(_rgb,getUnlitUniformColorSpace(G)),Z.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,be,te)}function _e(){oe!==void 0&&(oe.geometry.dispose(),oe.material.dispose(),oe=void 0),re!==void 0&&(re.geometry.dispose(),re.material.dispose(),re=void 0)}return{getClearColor:function(){return ne},setClearColor:function(ye,be=1){ne.set(ye),ie=be,fe(ne,ie)},getClearAlpha:function(){return ie},setClearAlpha:function(ye){ie=ye,fe(ne,ie)},render:de,addToRenderList:me,dispose:_e}}function WebGLBindingStates(G,_){const J=G.getParameter(G.MAX_VERTEX_ATTRIBS),Z={},Q=ae(null);let ee=Q,te=!1;function ne(Ee,De,Le,Ue,Ge){let Ye=!1;const ke=se(Ue,Le,De);ee!==ke&&(ee=ke,re(ee.object)),Ye=ce(Ee,Ue,Le,Ge),Ye&&ue(Ee,Ue,Le,Ge),Ge!==null&&_.update(Ge,G.ELEMENT_ARRAY_BUFFER),(Ye||te)&&(te=!1,be(Ee,De,Le,Ue),Ge!==null&&G.bindBuffer(G.ELEMENT_ARRAY_BUFFER,_.get(Ge).buffer))}function ie(){return G.createVertexArray()}function re(Ee){return G.bindVertexArray(Ee)}function oe(Ee){return G.deleteVertexArray(Ee)}function se(Ee,De,Le){const Ue=Le.wireframe===!0;let Ge=Z[Ee.id];Ge===void 0&&(Ge={},Z[Ee.id]=Ge);let Ye=Ge[De.id];Ye===void 0&&(Ye={},Ge[De.id]=Ye);let ke=Ye[Ue];return ke===void 0&&(ke=ae(ie()),Ye[Ue]=ke),ke}function ae(Ee){const De=[],Le=[],Ue=[];for(let Ge=0;Ge<J;Ge++)De[Ge]=0,Le[Ge]=0,Ue[Ge]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:De,enabledAttributes:Le,attributeDivisors:Ue,object:Ee,attributes:{},index:null}}function ce(Ee,De,Le,Ue){const Ge=ee.attributes,Ye=De.attributes;let ke=0;const Fe=Le.getAttributes();for(const Ve in Fe)if(Fe[Ve].location>=0){const Xe=Ge[Ve];let ze=Ye[Ve];if(ze===void 0&&(Ve==="instanceMatrix"&&Ee.instanceMatrix&&(ze=Ee.instanceMatrix),Ve==="instanceColor"&&Ee.instanceColor&&(ze=Ee.instanceColor)),Xe===void 0||Xe.attribute!==ze||ze&&Xe.data!==ze.data)return!0;ke++}return ee.attributesNum!==ke||ee.index!==Ue}function ue(Ee,De,Le,Ue){const Ge={},Ye=De.attributes;let ke=0;const Fe=Le.getAttributes();for(const Ve in Fe)if(Fe[Ve].location>=0){let Xe=Ye[Ve];Xe===void 0&&(Ve==="instanceMatrix"&&Ee.instanceMatrix&&(Xe=Ee.instanceMatrix),Ve==="instanceColor"&&Ee.instanceColor&&(Xe=Ee.instanceColor));const ze={};ze.attribute=Xe,Xe&&Xe.data&&(ze.data=Xe.data),Ge[Ve]=ze,ke++}ee.attributes=Ge,ee.attributesNum=ke,ee.index=Ue}function de(){const Ee=ee.newAttributes;for(let De=0,Le=Ee.length;De<Le;De++)Ee[De]=0}function me(Ee){fe(Ee,0)}function fe(Ee,De){const Le=ee.newAttributes,Ue=ee.enabledAttributes,Ge=ee.attributeDivisors;Le[Ee]=1,Ue[Ee]===0&&(G.enableVertexAttribArray(Ee),Ue[Ee]=1),Ge[Ee]!==De&&(G.vertexAttribDivisor(Ee,De),Ge[Ee]=De)}function _e(){const Ee=ee.newAttributes,De=ee.enabledAttributes;for(let Le=0,Ue=De.length;Le<Ue;Le++)De[Le]!==Ee[Le]&&(G.disableVertexAttribArray(Le),De[Le]=0)}function ye(Ee,De,Le,Ue,Ge,Ye,ke){ke===!0?G.vertexAttribIPointer(Ee,De,Le,Ge,Ye):G.vertexAttribPointer(Ee,De,Le,Ue,Ge,Ye)}function be(Ee,De,Le,Ue){de();const Ge=Ue.attributes,Ye=Le.getAttributes(),ke=De.defaultAttributeValues;for(const Fe in Ye){const Ve=Ye[Fe];if(Ve.location>=0){let $e=Ge[Fe];if($e===void 0&&(Fe==="instanceMatrix"&&Ee.instanceMatrix&&($e=Ee.instanceMatrix),Fe==="instanceColor"&&Ee.instanceColor&&($e=Ee.instanceColor)),$e!==void 0){const Xe=$e.normalized,ze=$e.itemSize,qe=_.get($e);if(qe===void 0)continue;const et=qe.buffer,ot=qe.type,St=qe.bytesPerElement,it=ot===G.INT||ot===G.UNSIGNED_INT||$e.gpuType===IntType;if($e.isInterleavedBufferAttribute){const lt=$e.data,gt=lt.stride,kt=$e.offset;if(lt.isInstancedInterleavedBuffer){for(let Jt=0;Jt<Ve.locationSize;Jt++)fe(Ve.location+Jt,lt.meshPerAttribute);Ee.isInstancedMesh!==!0&&Ue._maxInstanceCount===void 0&&(Ue._maxInstanceCount=lt.meshPerAttribute*lt.count)}else for(let Jt=0;Jt<Ve.locationSize;Jt++)me(Ve.location+Jt);G.bindBuffer(G.ARRAY_BUFFER,et);for(let Jt=0;Jt<Ve.locationSize;Jt++)ye(Ve.location+Jt,ze/Ve.locationSize,ot,Xe,gt*St,(kt+ze/Ve.locationSize*Jt)*St,it)}else{if($e.isInstancedBufferAttribute){for(let lt=0;lt<Ve.locationSize;lt++)fe(Ve.location+lt,$e.meshPerAttribute);Ee.isInstancedMesh!==!0&&Ue._maxInstanceCount===void 0&&(Ue._maxInstanceCount=$e.meshPerAttribute*$e.count)}else for(let lt=0;lt<Ve.locationSize;lt++)me(Ve.location+lt);G.bindBuffer(G.ARRAY_BUFFER,et);for(let lt=0;lt<Ve.locationSize;lt++)ye(Ve.location+lt,ze/Ve.locationSize,ot,Xe,ze*St,ze/Ve.locationSize*lt*St,it)}}else if(ke!==void 0){const Xe=ke[Fe];if(Xe!==void 0)switch(Xe.length){case 2:G.vertexAttrib2fv(Ve.location,Xe);break;case 3:G.vertexAttrib3fv(Ve.location,Xe);break;case 4:G.vertexAttrib4fv(Ve.location,Xe);break;default:G.vertexAttrib1fv(Ve.location,Xe)}}}}_e()}function Se(){Re();for(const Ee in Z){const De=Z[Ee];for(const Le in De){const Ue=De[Le];for(const Ge in Ue)oe(Ue[Ge].object),delete Ue[Ge];delete De[Le]}delete Z[Ee]}}function Ce(Ee){if(Z[Ee.id]===void 0)return;const De=Z[Ee.id];for(const Le in De){const Ue=De[Le];for(const Ge in Ue)oe(Ue[Ge].object),delete Ue[Ge];delete De[Le]}delete Z[Ee.id]}function Me(Ee){for(const De in Z){const Le=Z[De];if(Le[Ee.id]===void 0)continue;const Ue=Le[Ee.id];for(const Ge in Ue)oe(Ue[Ge].object),delete Ue[Ge];delete Le[Ee.id]}}function Re(){Te(),te=!0,ee!==Q&&(ee=Q,re(ee.object))}function Te(){Q.geometry=null,Q.program=null,Q.wireframe=!1}return{setup:ne,reset:Re,resetDefaultState:Te,dispose:Se,releaseStatesOfGeometry:Ce,releaseStatesOfProgram:Me,initAttributes:de,enableAttribute:me,disableUnusedAttributes:_e}}function WebGLBufferRenderer(G,_,J){let Z;function Q(re){Z=re}function ee(re,oe){G.drawArrays(Z,re,oe),J.update(oe,Z,1)}function te(re,oe,se){se!==0&&(G.drawArraysInstanced(Z,re,oe,se),J.update(oe,Z,se))}function ne(re,oe,se){if(se===0)return;_.get("WEBGL_multi_draw").multiDrawArraysWEBGL(Z,re,0,oe,0,se);let ce=0;for(let ue=0;ue<se;ue++)ce+=oe[ue];J.update(ce,Z,1)}function ie(re,oe,se,ae){if(se===0)return;const ce=_.get("WEBGL_multi_draw");if(ce===null)for(let ue=0;ue<re.length;ue++)te(re[ue],oe[ue],ae[ue]);else{ce.multiDrawArraysInstancedWEBGL(Z,re,0,oe,0,ae,0,se);let ue=0;for(let de=0;de<se;de++)ue+=oe[de]*ae[de];J.update(ue,Z,1)}}this.setMode=Q,this.render=ee,this.renderInstances=te,this.renderMultiDraw=ne,this.renderMultiDrawInstances=ie}function WebGLCapabilities(G,_,J,Z){let Q;function ee(){if(Q!==void 0)return Q;if(_.has("EXT_texture_filter_anisotropic")===!0){const Me=_.get("EXT_texture_filter_anisotropic");Q=G.getParameter(Me.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else Q=0;return Q}function te(Me){return!(Me!==RGBAFormat&&Z.convert(Me)!==G.getParameter(G.IMPLEMENTATION_COLOR_READ_FORMAT))}function ne(Me){const Re=Me===HalfFloatType&&(_.has("EXT_color_buffer_half_float")||_.has("EXT_color_buffer_float"));return!(Me!==UnsignedByteType&&Z.convert(Me)!==G.getParameter(G.IMPLEMENTATION_COLOR_READ_TYPE)&&Me!==FloatType&&!Re)}function ie(Me){if(Me==="highp"){if(G.getShaderPrecisionFormat(G.VERTEX_SHADER,G.HIGH_FLOAT).precision>0&&G.getShaderPrecisionFormat(G.FRAGMENT_SHADER,G.HIGH_FLOAT).precision>0)return"highp";Me="mediump"}return Me==="mediump"&&G.getShaderPrecisionFormat(G.VERTEX_SHADER,G.MEDIUM_FLOAT).precision>0&&G.getShaderPrecisionFormat(G.FRAGMENT_SHADER,G.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let re=J.precision!==void 0?J.precision:"highp";const oe=ie(re);oe!==re&&(warn("WebGLRenderer:",re,"not supported, using",oe,"instead."),re=oe);const se=J.logarithmicDepthBuffer===!0,ae=J.reversedDepthBuffer===!0&&_.has("EXT_clip_control"),ce=G.getParameter(G.MAX_TEXTURE_IMAGE_UNITS),ue=G.getParameter(G.MAX_VERTEX_TEXTURE_IMAGE_UNITS),de=G.getParameter(G.MAX_TEXTURE_SIZE),me=G.getParameter(G.MAX_CUBE_MAP_TEXTURE_SIZE),fe=G.getParameter(G.MAX_VERTEX_ATTRIBS),_e=G.getParameter(G.MAX_VERTEX_UNIFORM_VECTORS),ye=G.getParameter(G.MAX_VARYING_VECTORS),be=G.getParameter(G.MAX_FRAGMENT_UNIFORM_VECTORS),Se=ue>0,Ce=G.getParameter(G.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:ee,getMaxPrecision:ie,textureFormatReadable:te,textureTypeReadable:ne,precision:re,logarithmicDepthBuffer:se,reversedDepthBuffer:ae,maxTextures:ce,maxVertexTextures:ue,maxTextureSize:de,maxCubemapSize:me,maxAttributes:fe,maxVertexUniforms:_e,maxVaryings:ye,maxFragmentUniforms:be,vertexTextures:Se,maxSamples:Ce}}function WebGLClipping(G){const _=this;let J=null,Z=0,Q=!1,ee=!1;const te=new Plane,ne=new Matrix3,ie={value:null,needsUpdate:!1};this.uniform=ie,this.numPlanes=0,this.numIntersection=0,this.init=function(se,ae){const ce=se.length!==0||ae||Z!==0||Q;return Q=ae,Z=se.length,ce},this.beginShadows=function(){ee=!0,oe(null)},this.endShadows=function(){ee=!1},this.setGlobalState=function(se,ae){J=oe(se,ae,0)},this.setState=function(se,ae,ce){const ue=se.clippingPlanes,de=se.clipIntersection,me=se.clipShadows,fe=G.get(se);if(!Q||ue===null||ue.length===0||ee&&!me)ee?oe(null):re();else{const _e=ee?0:Z,ye=_e*4;let be=fe.clippingState||null;ie.value=be,be=oe(ue,ae,ye,ce);for(let Se=0;Se!==ye;++Se)be[Se]=J[Se];fe.clippingState=be,this.numIntersection=de?this.numPlanes:0,this.numPlanes+=_e}};function re(){ie.value!==J&&(ie.value=J,ie.needsUpdate=Z>0),_.numPlanes=Z,_.numIntersection=0}function oe(se,ae,ce,ue){const de=se!==null?se.length:0;let me=null;if(de!==0){if(me=ie.value,ue!==!0||me===null){const fe=ce+de*4,_e=ae.matrixWorldInverse;ne.getNormalMatrix(_e),(me===null||me.length<fe)&&(me=new Float32Array(fe));for(let ye=0,be=ce;ye!==de;++ye,be+=4)te.copy(se[ye]).applyMatrix4(_e,ne),te.normal.toArray(me,be),me[be+3]=te.constant}ie.value=me,ie.needsUpdate=!0}return _.numPlanes=de,_.numIntersection=0,me}}function WebGLCubeMaps(G){let _=new WeakMap;function J(te,ne){return ne===EquirectangularReflectionMapping?te.mapping=CubeReflectionMapping:ne===EquirectangularRefractionMapping&&(te.mapping=CubeRefractionMapping),te}function Z(te){if(te&&te.isTexture){const ne=te.mapping;if(ne===EquirectangularReflectionMapping||ne===EquirectangularRefractionMapping)if(_.has(te)){const ie=_.get(te).texture;return J(ie,te.mapping)}else{const ie=te.image;if(ie&&ie.height>0){const re=new WebGLCubeRenderTarget(ie.height);return re.fromEquirectangularTexture(G,te),_.set(te,re),te.addEventListener("dispose",Q),J(re.texture,te.mapping)}else return null}}return te}function Q(te){const ne=te.target;ne.removeEventListener("dispose",Q);const ie=_.get(ne);ie!==void 0&&(_.delete(ne),ie.dispose())}function ee(){_=new WeakMap}return{get:Z,dispose:ee}}const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,GGX_SAMPLES=256,_flatCamera=new OrthographicCamera,_clearColor=new Color;let _oldTarget=null,_oldActiveCubeFace=0,_oldActiveMipmapLevel=0,_oldXrEnabled=!1;const _origin=new Vector3;class PMREMGenerator{constructor(_){this._renderer=_,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(_,J=0,Z=.1,Q=100,ee={}){const{size:te=256,position:ne=_origin}=ee;_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(te);const ie=this._allocateTargets();return ie.depthBuffer=!0,this._sceneToCubeUV(_,Z,Q,ie,ne),J>0&&this._blur(ie,0,0,J),this._applyPMREM(ie),this._cleanup(ie),ie}fromEquirectangular(_,J=null){return this._fromTexture(_,J)}fromCubemap(_,J=null){return this._fromTexture(_,J)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(_){this._lodMax=Math.floor(Math.log2(_)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let _=0;_<this._lodMeshes.length;_++)this._lodMeshes[_].geometry.dispose()}_cleanup(_){this._renderer.setRenderTarget(_oldTarget,_oldActiveCubeFace,_oldActiveMipmapLevel),this._renderer.xr.enabled=_oldXrEnabled,_.scissorTest=!1,_setViewport(_,0,0,_.width,_.height)}_fromTexture(_,J){_.mapping===CubeReflectionMapping||_.mapping===CubeRefractionMapping?this._setSize(_.image.length===0?16:_.image[0].width||_.image[0].image.width):this._setSize(_.image.width/4),_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const Z=J||this._allocateTargets();return this._textureToCubeUV(_,Z),this._applyPMREM(Z),this._cleanup(Z),Z}_allocateTargets(){const _=3*Math.max(this._cubeSize,112),J=4*this._cubeSize,Z={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,colorSpace:LinearSRGBColorSpace,depthBuffer:!1},Q=_createRenderTarget(_,J,Z);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==_||this._pingPongRenderTarget.height!==J){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(_,J,Z);const{_lodMax:ee}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=_createPlanes(ee)),this._blurMaterial=_getBlurShader(ee,_,J)}return Q}_compileMaterial(_){const J=new Mesh(new BufferGeometry,_);this._renderer.compile(J,_flatCamera)}_sceneToCubeUV(_,J,Z,Q,ee){const ie=new PerspectiveCamera(90,1,J,Z),re=[1,-1,1,1,1,1],oe=[1,1,1,-1,-1,-1],se=this._renderer,ae=se.autoClear,ce=se.toneMapping;se.getClearColor(_clearColor),se.toneMapping=NoToneMapping,se.autoClear=!1,se.state.buffers.depth.getReversed()&&(se.setRenderTarget(Q),se.clearDepth(),se.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new Mesh(new BoxGeometry,new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1})));const de=this._backgroundBox,me=de.material;let fe=!1;const _e=_.background;_e?_e.isColor&&(me.color.copy(_e),_.background=null,fe=!0):(me.color.copy(_clearColor),fe=!0);for(let ye=0;ye<6;ye++){const be=ye%3;be===0?(ie.up.set(0,re[ye],0),ie.position.set(ee.x,ee.y,ee.z),ie.lookAt(ee.x+oe[ye],ee.y,ee.z)):be===1?(ie.up.set(0,0,re[ye]),ie.position.set(ee.x,ee.y,ee.z),ie.lookAt(ee.x,ee.y+oe[ye],ee.z)):(ie.up.set(0,re[ye],0),ie.position.set(ee.x,ee.y,ee.z),ie.lookAt(ee.x,ee.y,ee.z+oe[ye]));const Se=this._cubeSize;_setViewport(Q,be*Se,ye>2?Se:0,Se,Se),se.setRenderTarget(Q),fe&&se.render(de,ie),se.render(_,ie)}se.toneMapping=ce,se.autoClear=ae,_.background=_e}_textureToCubeUV(_,J){const Z=this._renderer,Q=_.mapping===CubeReflectionMapping||_.mapping===CubeRefractionMapping;Q?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=_.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const ee=Q?this._cubemapMaterial:this._equirectMaterial,te=this._lodMeshes[0];te.material=ee;const ne=ee.uniforms;ne.envMap.value=_;const ie=this._cubeSize;_setViewport(J,0,0,3*ie,2*ie),Z.setRenderTarget(J),Z.render(te,_flatCamera)}_applyPMREM(_){const J=this._renderer,Z=J.autoClear;J.autoClear=!1;const Q=this._lodMeshes.length;for(let ee=1;ee<Q;ee++)this._applyGGXFilter(_,ee-1,ee);J.autoClear=Z}_applyGGXFilter(_,J,Z){const Q=this._renderer,ee=this._pingPongRenderTarget;if(this._ggxMaterial===null){const _e=3*Math.max(this._cubeSize,16),ye=4*this._cubeSize;this._ggxMaterial=_getGGXShader(this._lodMax,_e,ye)}const te=this._ggxMaterial,ne=this._lodMeshes[Z];ne.material=te;const ie=te.uniforms,re=Z/(this._lodMeshes.length-1),oe=J/(this._lodMeshes.length-1),se=Math.sqrt(re*re-oe*oe),ae=.05+re*.95,ce=se*ae,{_lodMax:ue}=this,de=this._sizeLods[Z],me=3*de*(Z>ue-LOD_MIN?Z-ue+LOD_MIN:0),fe=4*(this._cubeSize-de);ie.envMap.value=_.texture,ie.roughness.value=ce,ie.mipInt.value=ue-J,_setViewport(ee,me,fe,3*de,2*de),Q.setRenderTarget(ee),Q.render(ne,_flatCamera),ie.envMap.value=ee.texture,ie.roughness.value=0,ie.mipInt.value=ue-Z,_setViewport(_,me,fe,3*de,2*de),Q.setRenderTarget(_),Q.render(ne,_flatCamera)}_blur(_,J,Z,Q,ee){const te=this._pingPongRenderTarget;this._halfBlur(_,te,J,Z,Q,"latitudinal",ee),this._halfBlur(te,_,Z,Z,Q,"longitudinal",ee)}_halfBlur(_,J,Z,Q,ee,te,ne){const ie=this._renderer,re=this._blurMaterial;te!=="latitudinal"&&te!=="longitudinal"&&error("blur direction must be either latitudinal or longitudinal!");const oe=3,se=this._lodMeshes[Q];se.material=re;const ae=re.uniforms,ce=this._sizeLods[Z]-1,ue=isFinite(ee)?Math.PI/(2*ce):2*Math.PI/(2*MAX_SAMPLES-1),de=ee/ue,me=isFinite(ee)?1+Math.floor(oe*de):MAX_SAMPLES;me>MAX_SAMPLES&&warn(`sigmaRadians, ${ee}, is too large and will clip, as it requested ${me} samples when the maximum is set to ${MAX_SAMPLES}`);const fe=[];let _e=0;for(let Me=0;Me<MAX_SAMPLES;++Me){const Re=Me/de,Te=Math.exp(-Re*Re/2);fe.push(Te),Me===0?_e+=Te:Me<me&&(_e+=2*Te)}for(let Me=0;Me<fe.length;Me++)fe[Me]=fe[Me]/_e;ae.envMap.value=_.texture,ae.samples.value=me,ae.weights.value=fe,ae.latitudinal.value=te==="latitudinal",ne&&(ae.poleAxis.value=ne);const{_lodMax:ye}=this;ae.dTheta.value=ue,ae.mipInt.value=ye-Z;const be=this._sizeLods[Q],Se=3*be*(Q>ye-LOD_MIN?Q-ye+LOD_MIN:0),Ce=4*(this._cubeSize-be);_setViewport(J,Se,Ce,3*be,2*be),ie.setRenderTarget(J),ie.render(se,_flatCamera)}}function _createPlanes(G){const _=[],J=[],Z=[];let Q=G;const ee=G-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let te=0;te<ee;te++){const ne=Math.pow(2,Q);_.push(ne);let ie=1/ne;te>G-LOD_MIN?ie=EXTRA_LOD_SIGMA[te-G+LOD_MIN-1]:te===0&&(ie=0),J.push(ie);const re=1/(ne-2),oe=-re,se=1+re,ae=[oe,oe,se,oe,se,se,oe,oe,se,se,oe,se],ce=6,ue=6,de=3,me=2,fe=1,_e=new Float32Array(de*ue*ce),ye=new Float32Array(me*ue*ce),be=new Float32Array(fe*ue*ce);for(let Ce=0;Ce<ce;Ce++){const Me=Ce%3*2/3-1,Re=Ce>2?0:-1,Te=[Me,Re,0,Me+2/3,Re,0,Me+2/3,Re+1,0,Me,Re,0,Me+2/3,Re+1,0,Me,Re+1,0];_e.set(Te,de*ue*Ce),ye.set(ae,me*ue*Ce);const Ee=[Ce,Ce,Ce,Ce,Ce,Ce];be.set(Ee,fe*ue*Ce)}const Se=new BufferGeometry;Se.setAttribute("position",new BufferAttribute(_e,de)),Se.setAttribute("uv",new BufferAttribute(ye,me)),Se.setAttribute("faceIndex",new BufferAttribute(be,fe)),Z.push(new Mesh(Se,null)),Q>LOD_MIN&&Q--}return{lodMeshes:Z,sizeLods:_,sigmas:J}}function _createRenderTarget(G,_,J){const Z=new WebGLRenderTarget(G,_,J);return Z.texture.mapping=CubeUVReflectionMapping,Z.texture.name="PMREM.cubeUv",Z.scissorTest=!0,Z}function _setViewport(G,_,J,Z,Q){G.viewport.set(_,J,Z,Q),G.scissor.set(_,J,Z,Q)}function _getGGXShader(G,_,J){return new ShaderMaterial({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/_,CUBEUV_TEXEL_HEIGHT:1/J,CUBEUV_MAX_MIP:`${G}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getBlurShader(G,_,J){const Z=new Float32Array(MAX_SAMPLES),Q=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/_,CUBEUV_TEXEL_HEIGHT:1/J,CUBEUV_MAX_MIP:`${G}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:Z},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:Q}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WebGLCubeUVMaps(G){let _=new WeakMap,J=null;function Z(ne){if(ne&&ne.isTexture){const ie=ne.mapping,re=ie===EquirectangularReflectionMapping||ie===EquirectangularRefractionMapping,oe=ie===CubeReflectionMapping||ie===CubeRefractionMapping;if(re||oe){let se=_.get(ne);const ae=se!==void 0?se.texture.pmremVersion:0;if(ne.isRenderTargetTexture&&ne.pmremVersion!==ae)return J===null&&(J=new PMREMGenerator(G)),se=re?J.fromEquirectangular(ne,se):J.fromCubemap(ne,se),se.texture.pmremVersion=ne.pmremVersion,_.set(ne,se),se.texture;if(se!==void 0)return se.texture;{const ce=ne.image;return re&&ce&&ce.height>0||oe&&ce&&Q(ce)?(J===null&&(J=new PMREMGenerator(G)),se=re?J.fromEquirectangular(ne):J.fromCubemap(ne),se.texture.pmremVersion=ne.pmremVersion,_.set(ne,se),ne.addEventListener("dispose",ee),se.texture):null}}}return ne}function Q(ne){let ie=0;const re=6;for(let oe=0;oe<re;oe++)ne[oe]!==void 0&&ie++;return ie===re}function ee(ne){const ie=ne.target;ie.removeEventListener("dispose",ee);const re=_.get(ie);re!==void 0&&(_.delete(ie),re.dispose())}function te(){_=new WeakMap,J!==null&&(J.dispose(),J=null)}return{get:Z,dispose:te}}function WebGLExtensions(G){const _={};function J(Z){if(_[Z]!==void 0)return _[Z];const Q=G.getExtension(Z);return _[Z]=Q,Q}return{has:function(Z){return J(Z)!==null},init:function(){J("EXT_color_buffer_float"),J("WEBGL_clip_cull_distance"),J("OES_texture_float_linear"),J("EXT_color_buffer_half_float"),J("WEBGL_multisampled_render_to_texture"),J("WEBGL_render_shared_exponent")},get:function(Z){const Q=J(Z);return Q===null&&warnOnce("WebGLRenderer: "+Z+" extension not supported."),Q}}}function WebGLGeometries(G,_,J,Z){const Q={},ee=new WeakMap;function te(se){const ae=se.target;ae.index!==null&&_.remove(ae.index);for(const ue in ae.attributes)_.remove(ae.attributes[ue]);ae.removeEventListener("dispose",te),delete Q[ae.id];const ce=ee.get(ae);ce&&(_.remove(ce),ee.delete(ae)),Z.releaseStatesOfGeometry(ae),ae.isInstancedBufferGeometry===!0&&delete ae._maxInstanceCount,J.memory.geometries--}function ne(se,ae){return Q[ae.id]===!0||(ae.addEventListener("dispose",te),Q[ae.id]=!0,J.memory.geometries++),ae}function ie(se){const ae=se.attributes;for(const ce in ae)_.update(ae[ce],G.ARRAY_BUFFER)}function re(se){const ae=[],ce=se.index,ue=se.attributes.position;let de=0;if(ce!==null){const _e=ce.array;de=ce.version;for(let ye=0,be=_e.length;ye<be;ye+=3){const Se=_e[ye+0],Ce=_e[ye+1],Me=_e[ye+2];ae.push(Se,Ce,Ce,Me,Me,Se)}}else if(ue!==void 0){const _e=ue.array;de=ue.version;for(let ye=0,be=_e.length/3-1;ye<be;ye+=3){const Se=ye+0,Ce=ye+1,Me=ye+2;ae.push(Se,Ce,Ce,Me,Me,Se)}}else return;const me=new(arrayNeedsUint32(ae)?Uint32BufferAttribute:Uint16BufferAttribute)(ae,1);me.version=de;const fe=ee.get(se);fe&&_.remove(fe),ee.set(se,me)}function oe(se){const ae=ee.get(se);if(ae){const ce=se.index;ce!==null&&ae.version<ce.version&&re(se)}else re(se);return ee.get(se)}return{get:ne,update:ie,getWireframeAttribute:oe}}function WebGLIndexedBufferRenderer(G,_,J){let Z;function Q(ae){Z=ae}let ee,te;function ne(ae){ee=ae.type,te=ae.bytesPerElement}function ie(ae,ce){G.drawElements(Z,ce,ee,ae*te),J.update(ce,Z,1)}function re(ae,ce,ue){ue!==0&&(G.drawElementsInstanced(Z,ce,ee,ae*te,ue),J.update(ce,Z,ue))}function oe(ae,ce,ue){if(ue===0)return;_.get("WEBGL_multi_draw").multiDrawElementsWEBGL(Z,ce,0,ee,ae,0,ue);let me=0;for(let fe=0;fe<ue;fe++)me+=ce[fe];J.update(me,Z,1)}function se(ae,ce,ue,de){if(ue===0)return;const me=_.get("WEBGL_multi_draw");if(me===null)for(let fe=0;fe<ae.length;fe++)re(ae[fe]/te,ce[fe],de[fe]);else{me.multiDrawElementsInstancedWEBGL(Z,ce,0,ee,ae,0,de,0,ue);let fe=0;for(let _e=0;_e<ue;_e++)fe+=ce[_e]*de[_e];J.update(fe,Z,1)}}this.setMode=Q,this.setIndex=ne,this.render=ie,this.renderInstances=re,this.renderMultiDraw=oe,this.renderMultiDrawInstances=se}function WebGLInfo(G){const _={geometries:0,textures:0},J={frame:0,calls:0,triangles:0,points:0,lines:0};function Z(ee,te,ne){switch(J.calls++,te){case G.TRIANGLES:J.triangles+=ne*(ee/3);break;case G.LINES:J.lines+=ne*(ee/2);break;case G.LINE_STRIP:J.lines+=ne*(ee-1);break;case G.LINE_LOOP:J.lines+=ne*ee;break;case G.POINTS:J.points+=ne*ee;break;default:error("WebGLInfo: Unknown draw mode:",te);break}}function Q(){J.calls=0,J.triangles=0,J.points=0,J.lines=0}return{memory:_,render:J,programs:null,autoReset:!0,reset:Q,update:Z}}function WebGLMorphtargets(G,_,J){const Z=new WeakMap,Q=new Vector4;function ee(te,ne,ie){const re=te.morphTargetInfluences,oe=ne.morphAttributes.position||ne.morphAttributes.normal||ne.morphAttributes.color,se=oe!==void 0?oe.length:0;let ae=Z.get(ne);if(ae===void 0||ae.count!==se){let Ee=function(){Re.dispose(),Z.delete(ne),ne.removeEventListener("dispose",Ee)};var ce=Ee;ae!==void 0&&ae.texture.dispose();const ue=ne.morphAttributes.position!==void 0,de=ne.morphAttributes.normal!==void 0,me=ne.morphAttributes.color!==void 0,fe=ne.morphAttributes.position||[],_e=ne.morphAttributes.normal||[],ye=ne.morphAttributes.color||[];let be=0;ue===!0&&(be=1),de===!0&&(be=2),me===!0&&(be=3);let Se=ne.attributes.position.count*be,Ce=1;Se>_.maxTextureSize&&(Ce=Math.ceil(Se/_.maxTextureSize),Se=_.maxTextureSize);const Me=new Float32Array(Se*Ce*4*se),Re=new DataArrayTexture(Me,Se,Ce,se);Re.type=FloatType,Re.needsUpdate=!0;const Te=be*4;for(let De=0;De<se;De++){const Le=fe[De],Ue=_e[De],Ge=ye[De],Ye=Se*Ce*4*De;for(let ke=0;ke<Le.count;ke++){const Fe=ke*Te;ue===!0&&(Q.fromBufferAttribute(Le,ke),Me[Ye+Fe+0]=Q.x,Me[Ye+Fe+1]=Q.y,Me[Ye+Fe+2]=Q.z,Me[Ye+Fe+3]=0),de===!0&&(Q.fromBufferAttribute(Ue,ke),Me[Ye+Fe+4]=Q.x,Me[Ye+Fe+5]=Q.y,Me[Ye+Fe+6]=Q.z,Me[Ye+Fe+7]=0),me===!0&&(Q.fromBufferAttribute(Ge,ke),Me[Ye+Fe+8]=Q.x,Me[Ye+Fe+9]=Q.y,Me[Ye+Fe+10]=Q.z,Me[Ye+Fe+11]=Ge.itemSize===4?Q.w:1)}}ae={count:se,texture:Re,size:new Vector2(Se,Ce)},Z.set(ne,ae),ne.addEventListener("dispose",Ee)}if(te.isInstancedMesh===!0&&te.morphTexture!==null)ie.getUniforms().setValue(G,"morphTexture",te.morphTexture,J);else{let ue=0;for(let me=0;me<re.length;me++)ue+=re[me];const de=ne.morphTargetsRelative?1:1-ue;ie.getUniforms().setValue(G,"morphTargetBaseInfluence",de),ie.getUniforms().setValue(G,"morphTargetInfluences",re)}ie.getUniforms().setValue(G,"morphTargetsTexture",ae.texture,J),ie.getUniforms().setValue(G,"morphTargetsTextureSize",ae.size)}return{update:ee}}function WebGLObjects(G,_,J,Z){let Q=new WeakMap;function ee(ie){const re=Z.render.frame,oe=ie.geometry,se=_.get(ie,oe);if(Q.get(se)!==re&&(_.update(se),Q.set(se,re)),ie.isInstancedMesh&&(ie.hasEventListener("dispose",ne)===!1&&ie.addEventListener("dispose",ne),Q.get(ie)!==re&&(J.update(ie.instanceMatrix,G.ARRAY_BUFFER),ie.instanceColor!==null&&J.update(ie.instanceColor,G.ARRAY_BUFFER),Q.set(ie,re))),ie.isSkinnedMesh){const ae=ie.skeleton;Q.get(ae)!==re&&(ae.update(),Q.set(ae,re))}return se}function te(){Q=new WeakMap}function ne(ie){const re=ie.target;re.removeEventListener("dispose",ne),J.remove(re.instanceMatrix),re.instanceColor!==null&&J.remove(re.instanceColor)}return{update:ee,dispose:te}}const emptyTexture=new Texture,emptyShadowTexture=new DepthTexture(1,1),emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(G,_,J){const Z=G[0];if(Z<=0||Z>0)return G;const Q=_*J;let ee=arrayCacheF32[Q];if(ee===void 0&&(ee=new Float32Array(Q),arrayCacheF32[Q]=ee),_!==0){Z.toArray(ee,0);for(let te=1,ne=0;te!==_;++te)ne+=J,G[te].toArray(ee,ne)}return ee}function arraysEqual(G,_){if(G.length!==_.length)return!1;for(let J=0,Z=G.length;J<Z;J++)if(G[J]!==_[J])return!1;return!0}function copyArray(G,_){for(let J=0,Z=_.length;J<Z;J++)G[J]=_[J]}function allocTexUnits(G,_){let J=arrayCacheI32[_];J===void 0&&(J=new Int32Array(_),arrayCacheI32[_]=J);for(let Z=0;Z!==_;++Z)J[Z]=G.allocateTextureUnit();return J}function setValueV1f(G,_){const J=this.cache;J[0]!==_&&(G.uniform1f(this.addr,_),J[0]=_)}function setValueV2f(G,_){const J=this.cache;if(_.x!==void 0)(J[0]!==_.x||J[1]!==_.y)&&(G.uniform2f(this.addr,_.x,_.y),J[0]=_.x,J[1]=_.y);else{if(arraysEqual(J,_))return;G.uniform2fv(this.addr,_),copyArray(J,_)}}function setValueV3f(G,_){const J=this.cache;if(_.x!==void 0)(J[0]!==_.x||J[1]!==_.y||J[2]!==_.z)&&(G.uniform3f(this.addr,_.x,_.y,_.z),J[0]=_.x,J[1]=_.y,J[2]=_.z);else if(_.r!==void 0)(J[0]!==_.r||J[1]!==_.g||J[2]!==_.b)&&(G.uniform3f(this.addr,_.r,_.g,_.b),J[0]=_.r,J[1]=_.g,J[2]=_.b);else{if(arraysEqual(J,_))return;G.uniform3fv(this.addr,_),copyArray(J,_)}}function setValueV4f(G,_){const J=this.cache;if(_.x!==void 0)(J[0]!==_.x||J[1]!==_.y||J[2]!==_.z||J[3]!==_.w)&&(G.uniform4f(this.addr,_.x,_.y,_.z,_.w),J[0]=_.x,J[1]=_.y,J[2]=_.z,J[3]=_.w);else{if(arraysEqual(J,_))return;G.uniform4fv(this.addr,_),copyArray(J,_)}}function setValueM2(G,_){const J=this.cache,Z=_.elements;if(Z===void 0){if(arraysEqual(J,_))return;G.uniformMatrix2fv(this.addr,!1,_),copyArray(J,_)}else{if(arraysEqual(J,Z))return;mat2array.set(Z),G.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(J,Z)}}function setValueM3(G,_){const J=this.cache,Z=_.elements;if(Z===void 0){if(arraysEqual(J,_))return;G.uniformMatrix3fv(this.addr,!1,_),copyArray(J,_)}else{if(arraysEqual(J,Z))return;mat3array.set(Z),G.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(J,Z)}}function setValueM4(G,_){const J=this.cache,Z=_.elements;if(Z===void 0){if(arraysEqual(J,_))return;G.uniformMatrix4fv(this.addr,!1,_),copyArray(J,_)}else{if(arraysEqual(J,Z))return;mat4array.set(Z),G.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(J,Z)}}function setValueV1i(G,_){const J=this.cache;J[0]!==_&&(G.uniform1i(this.addr,_),J[0]=_)}function setValueV2i(G,_){const J=this.cache;if(_.x!==void 0)(J[0]!==_.x||J[1]!==_.y)&&(G.uniform2i(this.addr,_.x,_.y),J[0]=_.x,J[1]=_.y);else{if(arraysEqual(J,_))return;G.uniform2iv(this.addr,_),copyArray(J,_)}}function setValueV3i(G,_){const J=this.cache;if(_.x!==void 0)(J[0]!==_.x||J[1]!==_.y||J[2]!==_.z)&&(G.uniform3i(this.addr,_.x,_.y,_.z),J[0]=_.x,J[1]=_.y,J[2]=_.z);else{if(arraysEqual(J,_))return;G.uniform3iv(this.addr,_),copyArray(J,_)}}function setValueV4i(G,_){const J=this.cache;if(_.x!==void 0)(J[0]!==_.x||J[1]!==_.y||J[2]!==_.z||J[3]!==_.w)&&(G.uniform4i(this.addr,_.x,_.y,_.z,_.w),J[0]=_.x,J[1]=_.y,J[2]=_.z,J[3]=_.w);else{if(arraysEqual(J,_))return;G.uniform4iv(this.addr,_),copyArray(J,_)}}function setValueV1ui(G,_){const J=this.cache;J[0]!==_&&(G.uniform1ui(this.addr,_),J[0]=_)}function setValueV2ui(G,_){const J=this.cache;if(_.x!==void 0)(J[0]!==_.x||J[1]!==_.y)&&(G.uniform2ui(this.addr,_.x,_.y),J[0]=_.x,J[1]=_.y);else{if(arraysEqual(J,_))return;G.uniform2uiv(this.addr,_),copyArray(J,_)}}function setValueV3ui(G,_){const J=this.cache;if(_.x!==void 0)(J[0]!==_.x||J[1]!==_.y||J[2]!==_.z)&&(G.uniform3ui(this.addr,_.x,_.y,_.z),J[0]=_.x,J[1]=_.y,J[2]=_.z);else{if(arraysEqual(J,_))return;G.uniform3uiv(this.addr,_),copyArray(J,_)}}function setValueV4ui(G,_){const J=this.cache;if(_.x!==void 0)(J[0]!==_.x||J[1]!==_.y||J[2]!==_.z||J[3]!==_.w)&&(G.uniform4ui(this.addr,_.x,_.y,_.z,_.w),J[0]=_.x,J[1]=_.y,J[2]=_.z,J[3]=_.w);else{if(arraysEqual(J,_))return;G.uniform4uiv(this.addr,_),copyArray(J,_)}}function setValueT1(G,_,J){const Z=this.cache,Q=J.allocateTextureUnit();Z[0]!==Q&&(G.uniform1i(this.addr,Q),Z[0]=Q);let ee;this.type===G.SAMPLER_2D_SHADOW?(emptyShadowTexture.compareFunction=LessEqualCompare,ee=emptyShadowTexture):ee=emptyTexture,J.setTexture2D(_||ee,Q)}function setValueT3D1(G,_,J){const Z=this.cache,Q=J.allocateTextureUnit();Z[0]!==Q&&(G.uniform1i(this.addr,Q),Z[0]=Q),J.setTexture3D(_||empty3dTexture,Q)}function setValueT6(G,_,J){const Z=this.cache,Q=J.allocateTextureUnit();Z[0]!==Q&&(G.uniform1i(this.addr,Q),Z[0]=Q),J.setTextureCube(_||emptyCubeTexture,Q)}function setValueT2DArray1(G,_,J){const Z=this.cache,Q=J.allocateTextureUnit();Z[0]!==Q&&(G.uniform1i(this.addr,Q),Z[0]=Q),J.setTexture2DArray(_||emptyArrayTexture,Q)}function getSingularSetter(G){switch(G){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(G,_){G.uniform1fv(this.addr,_)}function setValueV2fArray(G,_){const J=flatten(_,this.size,2);G.uniform2fv(this.addr,J)}function setValueV3fArray(G,_){const J=flatten(_,this.size,3);G.uniform3fv(this.addr,J)}function setValueV4fArray(G,_){const J=flatten(_,this.size,4);G.uniform4fv(this.addr,J)}function setValueM2Array(G,_){const J=flatten(_,this.size,4);G.uniformMatrix2fv(this.addr,!1,J)}function setValueM3Array(G,_){const J=flatten(_,this.size,9);G.uniformMatrix3fv(this.addr,!1,J)}function setValueM4Array(G,_){const J=flatten(_,this.size,16);G.uniformMatrix4fv(this.addr,!1,J)}function setValueV1iArray(G,_){G.uniform1iv(this.addr,_)}function setValueV2iArray(G,_){G.uniform2iv(this.addr,_)}function setValueV3iArray(G,_){G.uniform3iv(this.addr,_)}function setValueV4iArray(G,_){G.uniform4iv(this.addr,_)}function setValueV1uiArray(G,_){G.uniform1uiv(this.addr,_)}function setValueV2uiArray(G,_){G.uniform2uiv(this.addr,_)}function setValueV3uiArray(G,_){G.uniform3uiv(this.addr,_)}function setValueV4uiArray(G,_){G.uniform4uiv(this.addr,_)}function setValueT1Array(G,_,J){const Z=this.cache,Q=_.length,ee=allocTexUnits(J,Q);arraysEqual(Z,ee)||(G.uniform1iv(this.addr,ee),copyArray(Z,ee));for(let te=0;te!==Q;++te)J.setTexture2D(_[te]||emptyTexture,ee[te])}function setValueT3DArray(G,_,J){const Z=this.cache,Q=_.length,ee=allocTexUnits(J,Q);arraysEqual(Z,ee)||(G.uniform1iv(this.addr,ee),copyArray(Z,ee));for(let te=0;te!==Q;++te)J.setTexture3D(_[te]||empty3dTexture,ee[te])}function setValueT6Array(G,_,J){const Z=this.cache,Q=_.length,ee=allocTexUnits(J,Q);arraysEqual(Z,ee)||(G.uniform1iv(this.addr,ee),copyArray(Z,ee));for(let te=0;te!==Q;++te)J.setTextureCube(_[te]||emptyCubeTexture,ee[te])}function setValueT2DArrayArray(G,_,J){const Z=this.cache,Q=_.length,ee=allocTexUnits(J,Q);arraysEqual(Z,ee)||(G.uniform1iv(this.addr,ee),copyArray(Z,ee));for(let te=0;te!==Q;++te)J.setTexture2DArray(_[te]||emptyArrayTexture,ee[te])}function getPureArraySetter(G){switch(G){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(_,J,Z){this.id=_,this.addr=Z,this.cache=[],this.type=J.type,this.setValue=getSingularSetter(J.type)}}class PureArrayUniform{constructor(_,J,Z){this.id=_,this.addr=Z,this.cache=[],this.type=J.type,this.size=J.size,this.setValue=getPureArraySetter(J.type)}}class StructuredUniform{constructor(_){this.id=_,this.seq=[],this.map={}}setValue(_,J,Z){const Q=this.seq;for(let ee=0,te=Q.length;ee!==te;++ee){const ne=Q[ee];ne.setValue(_,J[ne.id],Z)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(G,_){G.seq.push(_),G.map[_.id]=_}function parseUniform(G,_,J){const Z=G.name,Q=Z.length;for(RePathPart.lastIndex=0;;){const ee=RePathPart.exec(Z),te=RePathPart.lastIndex;let ne=ee[1];const ie=ee[2]==="]",re=ee[3];if(ie&&(ne=ne|0),re===void 0||re==="["&&te+2===Q){addUniform(J,re===void 0?new SingleUniform(ne,G,_):new PureArrayUniform(ne,G,_));break}else{let se=J.map[ne];se===void 0&&(se=new StructuredUniform(ne),addUniform(J,se)),J=se}}}class WebGLUniforms{constructor(_,J){this.seq=[],this.map={};const Z=_.getProgramParameter(J,_.ACTIVE_UNIFORMS);for(let Q=0;Q<Z;++Q){const ee=_.getActiveUniform(J,Q),te=_.getUniformLocation(J,ee.name);parseUniform(ee,te,this)}}setValue(_,J,Z,Q){const ee=this.map[J];ee!==void 0&&ee.setValue(_,Z,Q)}setOptional(_,J,Z){const Q=J[Z];Q!==void 0&&this.setValue(_,Z,Q)}static upload(_,J,Z,Q){for(let ee=0,te=J.length;ee!==te;++ee){const ne=J[ee],ie=Z[ne.id];ie.needsUpdate!==!1&&ne.setValue(_,ie.value,Q)}}static seqWithValue(_,J){const Z=[];for(let Q=0,ee=_.length;Q!==ee;++Q){const te=_[Q];te.id in J&&Z.push(te)}return Z}}function WebGLShader(G,_,J){const Z=G.createShader(_);return G.shaderSource(Z,J),G.compileShader(Z),Z}const COMPLETION_STATUS_KHR=37297;let programIdCount=0;function handleSource(G,_){const J=G.split(`
`),Z=[],Q=Math.max(_-6,0),ee=Math.min(_+6,J.length);for(let te=Q;te<ee;te++){const ne=te+1;Z.push(`${ne===_?">":" "} ${ne}: ${J[te]}`)}return Z.join(`
`)}const _m0=new Matrix3;function getEncodingComponents(G){ColorManagement._getMatrix(_m0,ColorManagement.workingColorSpace,G);const _=`mat3( ${_m0.elements.map(J=>J.toFixed(4))} )`;switch(ColorManagement.getTransfer(G)){case LinearTransfer:return[_,"LinearTransferOETF"];case SRGBTransfer:return[_,"sRGBTransferOETF"];default:return warn("WebGLProgram: Unsupported color space: ",G),[_,"LinearTransferOETF"]}}function getShaderErrors(G,_,J){const Z=G.getShaderParameter(_,G.COMPILE_STATUS),ee=(G.getShaderInfoLog(_)||"").trim();if(Z&&ee==="")return"";const te=/ERROR: 0:(\d+)/.exec(ee);if(te){const ne=parseInt(te[1]);return J.toUpperCase()+`

`+ee+`

`+handleSource(G.getShaderSource(_),ne)}else return ee}function getTexelEncodingFunction(G,_){const J=getEncodingComponents(_);return[`vec4 ${G}( vec4 value ) {`,`	return ${J[1]}( vec4( value.rgb * ${J[0]}, value.a ) );`,"}"].join(`
`)}function getToneMappingFunction(G,_){let J;switch(_){case LinearToneMapping:J="Linear";break;case ReinhardToneMapping:J="Reinhard";break;case CineonToneMapping:J="Cineon";break;case ACESFilmicToneMapping:J="ACESFilmic";break;case AgXToneMapping:J="AgX";break;case NeutralToneMapping:J="Neutral";break;case CustomToneMapping:J="Custom";break;default:warn("WebGLProgram: Unsupported toneMapping:",_),J="Linear"}return"vec3 "+G+"( vec3 color ) { return "+J+"ToneMapping( color ); }"}const _v0=new Vector3;function getLuminanceFunction(){ColorManagement.getLuminanceCoefficients(_v0);const G=_v0.x.toFixed(4),_=_v0.y.toFixed(4),J=_v0.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${G}, ${_}, ${J} );`,"	return dot( weights, rgb );","}"].join(`
`)}function generateVertexExtensions(G){return[G.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",G.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(filterEmptyLine).join(`
`)}function generateDefines(G){const _=[];for(const J in G){const Z=G[J];Z!==!1&&_.push("#define "+J+" "+Z)}return _.join(`
`)}function fetchAttributeLocations(G,_){const J={},Z=G.getProgramParameter(_,G.ACTIVE_ATTRIBUTES);for(let Q=0;Q<Z;Q++){const ee=G.getActiveAttrib(_,Q),te=ee.name;let ne=1;ee.type===G.FLOAT_MAT2&&(ne=2),ee.type===G.FLOAT_MAT3&&(ne=3),ee.type===G.FLOAT_MAT4&&(ne=4),J[te]={type:ee.type,location:G.getAttribLocation(_,te),locationSize:ne}}return J}function filterEmptyLine(G){return G!==""}function replaceLightNums(G,_){const J=_.numSpotLightShadows+_.numSpotLightMaps-_.numSpotLightShadowsWithMaps;return G.replace(/NUM_DIR_LIGHTS/g,_.numDirLights).replace(/NUM_SPOT_LIGHTS/g,_.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,_.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,J).replace(/NUM_RECT_AREA_LIGHTS/g,_.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,_.numPointLights).replace(/NUM_HEMI_LIGHTS/g,_.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,_.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,_.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,_.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,_.numPointLightShadows)}function replaceClippingPlaneNums(G,_){return G.replace(/NUM_CLIPPING_PLANES/g,_.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,_.numClippingPlanes-_.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(G){return G.replace(includePattern,includeReplacer)}const shaderChunkMap=new Map;function includeReplacer(G,_){let J=ShaderChunk[_];if(J===void 0){const Z=shaderChunkMap.get(_);if(Z!==void 0)J=ShaderChunk[Z],warn('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',_,Z);else throw new Error("Can not resolve #include <"+_+">")}return resolveIncludes(J)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(G){return G.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(G,_,J,Z){let Q="";for(let ee=parseInt(_);ee<parseInt(J);ee++)Q+=Z.replace(/\[\s*i\s*\]/g,"[ "+ee+" ]").replace(/UNROLLED_LOOP_INDEX/g,ee);return Q}function generatePrecision(G){let _=`precision ${G.precision} float;
	precision ${G.precision} int;
	precision ${G.precision} sampler2D;
	precision ${G.precision} samplerCube;
	precision ${G.precision} sampler3D;
	precision ${G.precision} sampler2DArray;
	precision ${G.precision} sampler2DShadow;
	precision ${G.precision} samplerCubeShadow;
	precision ${G.precision} sampler2DArrayShadow;
	precision ${G.precision} isampler2D;
	precision ${G.precision} isampler3D;
	precision ${G.precision} isamplerCube;
	precision ${G.precision} isampler2DArray;
	precision ${G.precision} usampler2D;
	precision ${G.precision} usampler3D;
	precision ${G.precision} usamplerCube;
	precision ${G.precision} usampler2DArray;
	`;return G.precision==="highp"?_+=`
#define HIGH_PRECISION`:G.precision==="mediump"?_+=`
#define MEDIUM_PRECISION`:G.precision==="lowp"&&(_+=`
#define LOW_PRECISION`),_}function generateShadowMapTypeDefine(G){let _="SHADOWMAP_TYPE_BASIC";return G.shadowMapType===PCFShadowMap?_="SHADOWMAP_TYPE_PCF":G.shadowMapType===PCFSoftShadowMap?_="SHADOWMAP_TYPE_PCF_SOFT":G.shadowMapType===VSMShadowMap&&(_="SHADOWMAP_TYPE_VSM"),_}function generateEnvMapTypeDefine(G){let _="ENVMAP_TYPE_CUBE";if(G.envMap)switch(G.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:_="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:_="ENVMAP_TYPE_CUBE_UV";break}return _}function generateEnvMapModeDefine(G){let _="ENVMAP_MODE_REFLECTION";if(G.envMap)switch(G.envMapMode){case CubeRefractionMapping:_="ENVMAP_MODE_REFRACTION";break}return _}function generateEnvMapBlendingDefine(G){let _="ENVMAP_BLENDING_NONE";if(G.envMap)switch(G.combine){case MultiplyOperation:_="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:_="ENVMAP_BLENDING_MIX";break;case AddOperation:_="ENVMAP_BLENDING_ADD";break}return _}function generateCubeUVSize(G){const _=G.envMapCubeUVHeight;if(_===null)return null;const J=Math.log2(_)-2,Z=1/_;return{texelWidth:1/(3*Math.max(Math.pow(2,J),112)),texelHeight:Z,maxMip:J}}function WebGLProgram(G,_,J,Z){const Q=G.getContext(),ee=J.defines;let te=J.vertexShader,ne=J.fragmentShader;const ie=generateShadowMapTypeDefine(J),re=generateEnvMapTypeDefine(J),oe=generateEnvMapModeDefine(J),se=generateEnvMapBlendingDefine(J),ae=generateCubeUVSize(J),ce=generateVertexExtensions(J),ue=generateDefines(ee),de=Q.createProgram();let me,fe,_e=J.glslVersion?"#version "+J.glslVersion+`
`:"";J.isRawShaderMaterial?(me=["#define SHADER_TYPE "+J.shaderType,"#define SHADER_NAME "+J.shaderName,ue].filter(filterEmptyLine).join(`
`),me.length>0&&(me+=`
`),fe=["#define SHADER_TYPE "+J.shaderType,"#define SHADER_NAME "+J.shaderName,ue].filter(filterEmptyLine).join(`
`),fe.length>0&&(fe+=`
`)):(me=[generatePrecision(J),"#define SHADER_TYPE "+J.shaderType,"#define SHADER_NAME "+J.shaderName,ue,J.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",J.batching?"#define USE_BATCHING":"",J.batchingColor?"#define USE_BATCHING_COLOR":"",J.instancing?"#define USE_INSTANCING":"",J.instancingColor?"#define USE_INSTANCING_COLOR":"",J.instancingMorph?"#define USE_INSTANCING_MORPH":"",J.useFog&&J.fog?"#define USE_FOG":"",J.useFog&&J.fogExp2?"#define FOG_EXP2":"",J.map?"#define USE_MAP":"",J.envMap?"#define USE_ENVMAP":"",J.envMap?"#define "+oe:"",J.lightMap?"#define USE_LIGHTMAP":"",J.aoMap?"#define USE_AOMAP":"",J.bumpMap?"#define USE_BUMPMAP":"",J.normalMap?"#define USE_NORMALMAP":"",J.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",J.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",J.displacementMap?"#define USE_DISPLACEMENTMAP":"",J.emissiveMap?"#define USE_EMISSIVEMAP":"",J.anisotropy?"#define USE_ANISOTROPY":"",J.anisotropyMap?"#define USE_ANISOTROPYMAP":"",J.clearcoatMap?"#define USE_CLEARCOATMAP":"",J.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",J.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",J.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",J.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",J.specularMap?"#define USE_SPECULARMAP":"",J.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",J.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",J.roughnessMap?"#define USE_ROUGHNESSMAP":"",J.metalnessMap?"#define USE_METALNESSMAP":"",J.alphaMap?"#define USE_ALPHAMAP":"",J.alphaHash?"#define USE_ALPHAHASH":"",J.transmission?"#define USE_TRANSMISSION":"",J.transmissionMap?"#define USE_TRANSMISSIONMAP":"",J.thicknessMap?"#define USE_THICKNESSMAP":"",J.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",J.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",J.mapUv?"#define MAP_UV "+J.mapUv:"",J.alphaMapUv?"#define ALPHAMAP_UV "+J.alphaMapUv:"",J.lightMapUv?"#define LIGHTMAP_UV "+J.lightMapUv:"",J.aoMapUv?"#define AOMAP_UV "+J.aoMapUv:"",J.emissiveMapUv?"#define EMISSIVEMAP_UV "+J.emissiveMapUv:"",J.bumpMapUv?"#define BUMPMAP_UV "+J.bumpMapUv:"",J.normalMapUv?"#define NORMALMAP_UV "+J.normalMapUv:"",J.displacementMapUv?"#define DISPLACEMENTMAP_UV "+J.displacementMapUv:"",J.metalnessMapUv?"#define METALNESSMAP_UV "+J.metalnessMapUv:"",J.roughnessMapUv?"#define ROUGHNESSMAP_UV "+J.roughnessMapUv:"",J.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+J.anisotropyMapUv:"",J.clearcoatMapUv?"#define CLEARCOATMAP_UV "+J.clearcoatMapUv:"",J.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+J.clearcoatNormalMapUv:"",J.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+J.clearcoatRoughnessMapUv:"",J.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+J.iridescenceMapUv:"",J.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+J.iridescenceThicknessMapUv:"",J.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+J.sheenColorMapUv:"",J.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+J.sheenRoughnessMapUv:"",J.specularMapUv?"#define SPECULARMAP_UV "+J.specularMapUv:"",J.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+J.specularColorMapUv:"",J.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+J.specularIntensityMapUv:"",J.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+J.transmissionMapUv:"",J.thicknessMapUv?"#define THICKNESSMAP_UV "+J.thicknessMapUv:"",J.vertexTangents&&J.flatShading===!1?"#define USE_TANGENT":"",J.vertexColors?"#define USE_COLOR":"",J.vertexAlphas?"#define USE_COLOR_ALPHA":"",J.vertexUv1s?"#define USE_UV1":"",J.vertexUv2s?"#define USE_UV2":"",J.vertexUv3s?"#define USE_UV3":"",J.pointsUvs?"#define USE_POINTS_UV":"",J.flatShading?"#define FLAT_SHADED":"",J.skinning?"#define USE_SKINNING":"",J.morphTargets?"#define USE_MORPHTARGETS":"",J.morphNormals&&J.flatShading===!1?"#define USE_MORPHNORMALS":"",J.morphColors?"#define USE_MORPHCOLORS":"",J.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+J.morphTextureStride:"",J.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+J.morphTargetsCount:"",J.doubleSided?"#define DOUBLE_SIDED":"",J.flipSided?"#define FLIP_SIDED":"",J.shadowMapEnabled?"#define USE_SHADOWMAP":"",J.shadowMapEnabled?"#define "+ie:"",J.sizeAttenuation?"#define USE_SIZEATTENUATION":"",J.numLightProbes>0?"#define USE_LIGHT_PROBES":"",J.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",J.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),fe=[generatePrecision(J),"#define SHADER_TYPE "+J.shaderType,"#define SHADER_NAME "+J.shaderName,ue,J.useFog&&J.fog?"#define USE_FOG":"",J.useFog&&J.fogExp2?"#define FOG_EXP2":"",J.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",J.map?"#define USE_MAP":"",J.matcap?"#define USE_MATCAP":"",J.envMap?"#define USE_ENVMAP":"",J.envMap?"#define "+re:"",J.envMap?"#define "+oe:"",J.envMap?"#define "+se:"",ae?"#define CUBEUV_TEXEL_WIDTH "+ae.texelWidth:"",ae?"#define CUBEUV_TEXEL_HEIGHT "+ae.texelHeight:"",ae?"#define CUBEUV_MAX_MIP "+ae.maxMip+".0":"",J.lightMap?"#define USE_LIGHTMAP":"",J.aoMap?"#define USE_AOMAP":"",J.bumpMap?"#define USE_BUMPMAP":"",J.normalMap?"#define USE_NORMALMAP":"",J.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",J.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",J.emissiveMap?"#define USE_EMISSIVEMAP":"",J.anisotropy?"#define USE_ANISOTROPY":"",J.anisotropyMap?"#define USE_ANISOTROPYMAP":"",J.clearcoat?"#define USE_CLEARCOAT":"",J.clearcoatMap?"#define USE_CLEARCOATMAP":"",J.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",J.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",J.dispersion?"#define USE_DISPERSION":"",J.iridescence?"#define USE_IRIDESCENCE":"",J.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",J.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",J.specularMap?"#define USE_SPECULARMAP":"",J.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",J.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",J.roughnessMap?"#define USE_ROUGHNESSMAP":"",J.metalnessMap?"#define USE_METALNESSMAP":"",J.alphaMap?"#define USE_ALPHAMAP":"",J.alphaTest?"#define USE_ALPHATEST":"",J.alphaHash?"#define USE_ALPHAHASH":"",J.sheen?"#define USE_SHEEN":"",J.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",J.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",J.transmission?"#define USE_TRANSMISSION":"",J.transmissionMap?"#define USE_TRANSMISSIONMAP":"",J.thicknessMap?"#define USE_THICKNESSMAP":"",J.vertexTangents&&J.flatShading===!1?"#define USE_TANGENT":"",J.vertexColors||J.instancingColor||J.batchingColor?"#define USE_COLOR":"",J.vertexAlphas?"#define USE_COLOR_ALPHA":"",J.vertexUv1s?"#define USE_UV1":"",J.vertexUv2s?"#define USE_UV2":"",J.vertexUv3s?"#define USE_UV3":"",J.pointsUvs?"#define USE_POINTS_UV":"",J.gradientMap?"#define USE_GRADIENTMAP":"",J.flatShading?"#define FLAT_SHADED":"",J.doubleSided?"#define DOUBLE_SIDED":"",J.flipSided?"#define FLIP_SIDED":"",J.shadowMapEnabled?"#define USE_SHADOWMAP":"",J.shadowMapEnabled?"#define "+ie:"",J.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",J.numLightProbes>0?"#define USE_LIGHT_PROBES":"",J.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",J.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",J.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",J.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",J.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",J.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",J.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",J.toneMapping):"",J.dithering?"#define DITHERING":"",J.opaque?"#define OPAQUE":"",ShaderChunk.colorspace_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",J.outputColorSpace),getLuminanceFunction(),J.useDepthPacking?"#define DEPTH_PACKING "+J.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),te=resolveIncludes(te),te=replaceLightNums(te,J),te=replaceClippingPlaneNums(te,J),ne=resolveIncludes(ne),ne=replaceLightNums(ne,J),ne=replaceClippingPlaneNums(ne,J),te=unrollLoops(te),ne=unrollLoops(ne),J.isRawShaderMaterial!==!0&&(_e=`#version 300 es
`,me=[ce,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+me,fe=["#define varying in",J.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",J.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+fe);const ye=_e+me+te,be=_e+fe+ne,Se=WebGLShader(Q,Q.VERTEX_SHADER,ye),Ce=WebGLShader(Q,Q.FRAGMENT_SHADER,be);Q.attachShader(de,Se),Q.attachShader(de,Ce),J.index0AttributeName!==void 0?Q.bindAttribLocation(de,0,J.index0AttributeName):J.morphTargets===!0&&Q.bindAttribLocation(de,0,"position"),Q.linkProgram(de);function Me(De){if(G.debug.checkShaderErrors){const Le=Q.getProgramInfoLog(de)||"",Ue=Q.getShaderInfoLog(Se)||"",Ge=Q.getShaderInfoLog(Ce)||"",Ye=Le.trim(),ke=Ue.trim(),Fe=Ge.trim();let Ve=!0,$e=!0;if(Q.getProgramParameter(de,Q.LINK_STATUS)===!1)if(Ve=!1,typeof G.debug.onShaderError=="function")G.debug.onShaderError(Q,de,Se,Ce);else{const Xe=getShaderErrors(Q,Se,"vertex"),ze=getShaderErrors(Q,Ce,"fragment");error("THREE.WebGLProgram: Shader Error "+Q.getError()+" - VALIDATE_STATUS "+Q.getProgramParameter(de,Q.VALIDATE_STATUS)+`

Material Name: `+De.name+`
Material Type: `+De.type+`

Program Info Log: `+Ye+`
`+Xe+`
`+ze)}else Ye!==""?warn("WebGLProgram: Program Info Log:",Ye):(ke===""||Fe==="")&&($e=!1);$e&&(De.diagnostics={runnable:Ve,programLog:Ye,vertexShader:{log:ke,prefix:me},fragmentShader:{log:Fe,prefix:fe}})}Q.deleteShader(Se),Q.deleteShader(Ce),Re=new WebGLUniforms(Q,de),Te=fetchAttributeLocations(Q,de)}let Re;this.getUniforms=function(){return Re===void 0&&Me(this),Re};let Te;this.getAttributes=function(){return Te===void 0&&Me(this),Te};let Ee=J.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return Ee===!1&&(Ee=Q.getProgramParameter(de,COMPLETION_STATUS_KHR)),Ee},this.destroy=function(){Z.releaseStatesOfProgram(this),Q.deleteProgram(de),this.program=void 0},this.type=J.shaderType,this.name=J.shaderName,this.id=programIdCount++,this.cacheKey=_,this.usedTimes=1,this.program=de,this.vertexShader=Se,this.fragmentShader=Ce,this}let _id=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(_){const J=_.vertexShader,Z=_.fragmentShader,Q=this._getShaderStage(J),ee=this._getShaderStage(Z),te=this._getShaderCacheForMaterial(_);return te.has(Q)===!1&&(te.add(Q),Q.usedTimes++),te.has(ee)===!1&&(te.add(ee),ee.usedTimes++),this}remove(_){const J=this.materialCache.get(_);for(const Z of J)Z.usedTimes--,Z.usedTimes===0&&this.shaderCache.delete(Z.code);return this.materialCache.delete(_),this}getVertexShaderID(_){return this._getShaderStage(_.vertexShader).id}getFragmentShaderID(_){return this._getShaderStage(_.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(_){const J=this.materialCache;let Z=J.get(_);return Z===void 0&&(Z=new Set,J.set(_,Z)),Z}_getShaderStage(_){const J=this.shaderCache;let Z=J.get(_);return Z===void 0&&(Z=new WebGLShaderStage(_),J.set(_,Z)),Z}}class WebGLShaderStage{constructor(_){this.id=_id++,this.code=_,this.usedTimes=0}}function WebGLPrograms(G,_,J,Z,Q,ee,te){const ne=new Layers,ie=new WebGLShaderCache,re=new Set,oe=[],se=Q.logarithmicDepthBuffer,ae=Q.vertexTextures;let ce=Q.precision;const ue={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function de(Te){return re.add(Te),Te===0?"uv":`uv${Te}`}function me(Te,Ee,De,Le,Ue){const Ge=Le.fog,Ye=Ue.geometry,ke=Te.isMeshStandardMaterial?Le.environment:null,Fe=(Te.isMeshStandardMaterial?J:_).get(Te.envMap||ke),Ve=Fe&&Fe.mapping===CubeUVReflectionMapping?Fe.image.height:null,$e=ue[Te.type];Te.precision!==null&&(ce=Q.getMaxPrecision(Te.precision),ce!==Te.precision&&warn("WebGLProgram.getParameters:",Te.precision,"not supported, using",ce,"instead."));const Xe=Ye.morphAttributes.position||Ye.morphAttributes.normal||Ye.morphAttributes.color,ze=Xe!==void 0?Xe.length:0;let qe=0;Ye.morphAttributes.position!==void 0&&(qe=1),Ye.morphAttributes.normal!==void 0&&(qe=2),Ye.morphAttributes.color!==void 0&&(qe=3);let et,ot,St,it;if($e){const Si=ShaderLib[$e];et=Si.vertexShader,ot=Si.fragmentShader}else et=Te.vertexShader,ot=Te.fragmentShader,ie.update(Te),St=ie.getVertexShaderID(Te),it=ie.getFragmentShaderID(Te);const lt=G.getRenderTarget(),gt=G.state.buffers.depth.getReversed(),kt=Ue.isInstancedMesh===!0,Jt=Ue.isBatchedMesh===!0,li=!!Te.map,si=!!Te.matcap,qt=!!Fe,vt=!!Te.aoMap,Ke=!!Te.lightMap,Tt=!!Te.bumpMap,Ut=!!Te.normalMap,Lt=!!Te.displacementMap,jt=!!Te.emissiveMap,ri=!!Te.metalnessMap,ti=!!Te.roughnessMap,di=Te.anisotropy>0,Qe=Te.clearcoat>0,He=Te.dispersion>0,_t=Te.iridescence>0,dt=Te.sheen>0,At=Te.transmission>0,Nt=di&&!!Te.anisotropyMap,fi=Qe&&!!Te.clearcoatMap,Kt=Qe&&!!Te.clearcoatNormalMap,It=Qe&&!!Te.clearcoatRoughnessMap,Yt=_t&&!!Te.iridescenceMap,Rt=_t&&!!Te.iridescenceThicknessMap,Pt=dt&&!!Te.sheenColorMap,mt=dt&&!!Te.sheenRoughnessMap,tt=!!Te.specularMap,Ze=!!Te.specularColorMap,Zt=!!Te.specularIntensityMap,rt=At&&!!Te.transmissionMap,Qt=At&&!!Te.thicknessMap,zt=!!Te.gradientMap,ei=!!Te.alphaMap,Wt=Te.alphaTest>0,Ft=!!Te.alphaHash,hi=!!Te.extensions;let pi=NoToneMapping;Te.toneMapped&&(lt===null||lt.isXRRenderTarget===!0)&&(pi=G.toneMapping);const Di={shaderID:$e,shaderType:Te.type,shaderName:Te.name,vertexShader:et,fragmentShader:ot,defines:Te.defines,customVertexShaderID:St,customFragmentShaderID:it,isRawShaderMaterial:Te.isRawShaderMaterial===!0,glslVersion:Te.glslVersion,precision:ce,batching:Jt,batchingColor:Jt&&Ue._colorsTexture!==null,instancing:kt,instancingColor:kt&&Ue.instanceColor!==null,instancingMorph:kt&&Ue.morphTexture!==null,supportsVertexTextures:ae,outputColorSpace:lt===null?G.outputColorSpace:lt.isXRRenderTarget===!0?lt.texture.colorSpace:LinearSRGBColorSpace,alphaToCoverage:!!Te.alphaToCoverage,map:li,matcap:si,envMap:qt,envMapMode:qt&&Fe.mapping,envMapCubeUVHeight:Ve,aoMap:vt,lightMap:Ke,bumpMap:Tt,normalMap:Ut,displacementMap:ae&&Lt,emissiveMap:jt,normalMapObjectSpace:Ut&&Te.normalMapType===ObjectSpaceNormalMap,normalMapTangentSpace:Ut&&Te.normalMapType===TangentSpaceNormalMap,metalnessMap:ri,roughnessMap:ti,anisotropy:di,anisotropyMap:Nt,clearcoat:Qe,clearcoatMap:fi,clearcoatNormalMap:Kt,clearcoatRoughnessMap:It,dispersion:He,iridescence:_t,iridescenceMap:Yt,iridescenceThicknessMap:Rt,sheen:dt,sheenColorMap:Pt,sheenRoughnessMap:mt,specularMap:tt,specularColorMap:Ze,specularIntensityMap:Zt,transmission:At,transmissionMap:rt,thicknessMap:Qt,gradientMap:zt,opaque:Te.transparent===!1&&Te.blending===NormalBlending&&Te.alphaToCoverage===!1,alphaMap:ei,alphaTest:Wt,alphaHash:Ft,combine:Te.combine,mapUv:li&&de(Te.map.channel),aoMapUv:vt&&de(Te.aoMap.channel),lightMapUv:Ke&&de(Te.lightMap.channel),bumpMapUv:Tt&&de(Te.bumpMap.channel),normalMapUv:Ut&&de(Te.normalMap.channel),displacementMapUv:Lt&&de(Te.displacementMap.channel),emissiveMapUv:jt&&de(Te.emissiveMap.channel),metalnessMapUv:ri&&de(Te.metalnessMap.channel),roughnessMapUv:ti&&de(Te.roughnessMap.channel),anisotropyMapUv:Nt&&de(Te.anisotropyMap.channel),clearcoatMapUv:fi&&de(Te.clearcoatMap.channel),clearcoatNormalMapUv:Kt&&de(Te.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:It&&de(Te.clearcoatRoughnessMap.channel),iridescenceMapUv:Yt&&de(Te.iridescenceMap.channel),iridescenceThicknessMapUv:Rt&&de(Te.iridescenceThicknessMap.channel),sheenColorMapUv:Pt&&de(Te.sheenColorMap.channel),sheenRoughnessMapUv:mt&&de(Te.sheenRoughnessMap.channel),specularMapUv:tt&&de(Te.specularMap.channel),specularColorMapUv:Ze&&de(Te.specularColorMap.channel),specularIntensityMapUv:Zt&&de(Te.specularIntensityMap.channel),transmissionMapUv:rt&&de(Te.transmissionMap.channel),thicknessMapUv:Qt&&de(Te.thicknessMap.channel),alphaMapUv:ei&&de(Te.alphaMap.channel),vertexTangents:!!Ye.attributes.tangent&&(Ut||di),vertexColors:Te.vertexColors,vertexAlphas:Te.vertexColors===!0&&!!Ye.attributes.color&&Ye.attributes.color.itemSize===4,pointsUvs:Ue.isPoints===!0&&!!Ye.attributes.uv&&(li||ei),fog:!!Ge,useFog:Te.fog===!0,fogExp2:!!Ge&&Ge.isFogExp2,flatShading:Te.flatShading===!0&&Te.wireframe===!1,sizeAttenuation:Te.sizeAttenuation===!0,logarithmicDepthBuffer:se,reversedDepthBuffer:gt,skinning:Ue.isSkinnedMesh===!0,morphTargets:Ye.morphAttributes.position!==void 0,morphNormals:Ye.morphAttributes.normal!==void 0,morphColors:Ye.morphAttributes.color!==void 0,morphTargetsCount:ze,morphTextureStride:qe,numDirLights:Ee.directional.length,numPointLights:Ee.point.length,numSpotLights:Ee.spot.length,numSpotLightMaps:Ee.spotLightMap.length,numRectAreaLights:Ee.rectArea.length,numHemiLights:Ee.hemi.length,numDirLightShadows:Ee.directionalShadowMap.length,numPointLightShadows:Ee.pointShadowMap.length,numSpotLightShadows:Ee.spotShadowMap.length,numSpotLightShadowsWithMaps:Ee.numSpotLightShadowsWithMaps,numLightProbes:Ee.numLightProbes,numClippingPlanes:te.numPlanes,numClipIntersection:te.numIntersection,dithering:Te.dithering,shadowMapEnabled:G.shadowMap.enabled&&De.length>0,shadowMapType:G.shadowMap.type,toneMapping:pi,decodeVideoTexture:li&&Te.map.isVideoTexture===!0&&ColorManagement.getTransfer(Te.map.colorSpace)===SRGBTransfer,decodeVideoTextureEmissive:jt&&Te.emissiveMap.isVideoTexture===!0&&ColorManagement.getTransfer(Te.emissiveMap.colorSpace)===SRGBTransfer,premultipliedAlpha:Te.premultipliedAlpha,doubleSided:Te.side===DoubleSide,flipSided:Te.side===BackSide,useDepthPacking:Te.depthPacking>=0,depthPacking:Te.depthPacking||0,index0AttributeName:Te.index0AttributeName,extensionClipCullDistance:hi&&Te.extensions.clipCullDistance===!0&&Z.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(hi&&Te.extensions.multiDraw===!0||Jt)&&Z.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:Z.has("KHR_parallel_shader_compile"),customProgramCacheKey:Te.customProgramCacheKey()};return Di.vertexUv1s=re.has(1),Di.vertexUv2s=re.has(2),Di.vertexUv3s=re.has(3),re.clear(),Di}function fe(Te){const Ee=[];if(Te.shaderID?Ee.push(Te.shaderID):(Ee.push(Te.customVertexShaderID),Ee.push(Te.customFragmentShaderID)),Te.defines!==void 0)for(const De in Te.defines)Ee.push(De),Ee.push(Te.defines[De]);return Te.isRawShaderMaterial===!1&&(_e(Ee,Te),ye(Ee,Te),Ee.push(G.outputColorSpace)),Ee.push(Te.customProgramCacheKey),Ee.join()}function _e(Te,Ee){Te.push(Ee.precision),Te.push(Ee.outputColorSpace),Te.push(Ee.envMapMode),Te.push(Ee.envMapCubeUVHeight),Te.push(Ee.mapUv),Te.push(Ee.alphaMapUv),Te.push(Ee.lightMapUv),Te.push(Ee.aoMapUv),Te.push(Ee.bumpMapUv),Te.push(Ee.normalMapUv),Te.push(Ee.displacementMapUv),Te.push(Ee.emissiveMapUv),Te.push(Ee.metalnessMapUv),Te.push(Ee.roughnessMapUv),Te.push(Ee.anisotropyMapUv),Te.push(Ee.clearcoatMapUv),Te.push(Ee.clearcoatNormalMapUv),Te.push(Ee.clearcoatRoughnessMapUv),Te.push(Ee.iridescenceMapUv),Te.push(Ee.iridescenceThicknessMapUv),Te.push(Ee.sheenColorMapUv),Te.push(Ee.sheenRoughnessMapUv),Te.push(Ee.specularMapUv),Te.push(Ee.specularColorMapUv),Te.push(Ee.specularIntensityMapUv),Te.push(Ee.transmissionMapUv),Te.push(Ee.thicknessMapUv),Te.push(Ee.combine),Te.push(Ee.fogExp2),Te.push(Ee.sizeAttenuation),Te.push(Ee.morphTargetsCount),Te.push(Ee.morphAttributeCount),Te.push(Ee.numDirLights),Te.push(Ee.numPointLights),Te.push(Ee.numSpotLights),Te.push(Ee.numSpotLightMaps),Te.push(Ee.numHemiLights),Te.push(Ee.numRectAreaLights),Te.push(Ee.numDirLightShadows),Te.push(Ee.numPointLightShadows),Te.push(Ee.numSpotLightShadows),Te.push(Ee.numSpotLightShadowsWithMaps),Te.push(Ee.numLightProbes),Te.push(Ee.shadowMapType),Te.push(Ee.toneMapping),Te.push(Ee.numClippingPlanes),Te.push(Ee.numClipIntersection),Te.push(Ee.depthPacking)}function ye(Te,Ee){ne.disableAll(),Ee.supportsVertexTextures&&ne.enable(0),Ee.instancing&&ne.enable(1),Ee.instancingColor&&ne.enable(2),Ee.instancingMorph&&ne.enable(3),Ee.matcap&&ne.enable(4),Ee.envMap&&ne.enable(5),Ee.normalMapObjectSpace&&ne.enable(6),Ee.normalMapTangentSpace&&ne.enable(7),Ee.clearcoat&&ne.enable(8),Ee.iridescence&&ne.enable(9),Ee.alphaTest&&ne.enable(10),Ee.vertexColors&&ne.enable(11),Ee.vertexAlphas&&ne.enable(12),Ee.vertexUv1s&&ne.enable(13),Ee.vertexUv2s&&ne.enable(14),Ee.vertexUv3s&&ne.enable(15),Ee.vertexTangents&&ne.enable(16),Ee.anisotropy&&ne.enable(17),Ee.alphaHash&&ne.enable(18),Ee.batching&&ne.enable(19),Ee.dispersion&&ne.enable(20),Ee.batchingColor&&ne.enable(21),Ee.gradientMap&&ne.enable(22),Te.push(ne.mask),ne.disableAll(),Ee.fog&&ne.enable(0),Ee.useFog&&ne.enable(1),Ee.flatShading&&ne.enable(2),Ee.logarithmicDepthBuffer&&ne.enable(3),Ee.reversedDepthBuffer&&ne.enable(4),Ee.skinning&&ne.enable(5),Ee.morphTargets&&ne.enable(6),Ee.morphNormals&&ne.enable(7),Ee.morphColors&&ne.enable(8),Ee.premultipliedAlpha&&ne.enable(9),Ee.shadowMapEnabled&&ne.enable(10),Ee.doubleSided&&ne.enable(11),Ee.flipSided&&ne.enable(12),Ee.useDepthPacking&&ne.enable(13),Ee.dithering&&ne.enable(14),Ee.transmission&&ne.enable(15),Ee.sheen&&ne.enable(16),Ee.opaque&&ne.enable(17),Ee.pointsUvs&&ne.enable(18),Ee.decodeVideoTexture&&ne.enable(19),Ee.decodeVideoTextureEmissive&&ne.enable(20),Ee.alphaToCoverage&&ne.enable(21),Te.push(ne.mask)}function be(Te){const Ee=ue[Te.type];let De;if(Ee){const Le=ShaderLib[Ee];De=UniformsUtils.clone(Le.uniforms)}else De=Te.uniforms;return De}function Se(Te,Ee){let De;for(let Le=0,Ue=oe.length;Le<Ue;Le++){const Ge=oe[Le];if(Ge.cacheKey===Ee){De=Ge,++De.usedTimes;break}}return De===void 0&&(De=new WebGLProgram(G,Ee,Te,ee),oe.push(De)),De}function Ce(Te){if(--Te.usedTimes===0){const Ee=oe.indexOf(Te);oe[Ee]=oe[oe.length-1],oe.pop(),Te.destroy()}}function Me(Te){ie.remove(Te)}function Re(){ie.dispose()}return{getParameters:me,getProgramCacheKey:fe,getUniforms:be,acquireProgram:Se,releaseProgram:Ce,releaseShaderCache:Me,programs:oe,dispose:Re}}function WebGLProperties(){let G=new WeakMap;function _(te){return G.has(te)}function J(te){let ne=G.get(te);return ne===void 0&&(ne={},G.set(te,ne)),ne}function Z(te){G.delete(te)}function Q(te,ne,ie){G.get(te)[ne]=ie}function ee(){G=new WeakMap}return{has:_,get:J,remove:Z,update:Q,dispose:ee}}function painterSortStable(G,_){return G.groupOrder!==_.groupOrder?G.groupOrder-_.groupOrder:G.renderOrder!==_.renderOrder?G.renderOrder-_.renderOrder:G.material.id!==_.material.id?G.material.id-_.material.id:G.z!==_.z?G.z-_.z:G.id-_.id}function reversePainterSortStable(G,_){return G.groupOrder!==_.groupOrder?G.groupOrder-_.groupOrder:G.renderOrder!==_.renderOrder?G.renderOrder-_.renderOrder:G.z!==_.z?_.z-G.z:G.id-_.id}function WebGLRenderList(){const G=[];let _=0;const J=[],Z=[],Q=[];function ee(){_=0,J.length=0,Z.length=0,Q.length=0}function te(se,ae,ce,ue,de,me){let fe=G[_];return fe===void 0?(fe={id:se.id,object:se,geometry:ae,material:ce,groupOrder:ue,renderOrder:se.renderOrder,z:de,group:me},G[_]=fe):(fe.id=se.id,fe.object=se,fe.geometry=ae,fe.material=ce,fe.groupOrder=ue,fe.renderOrder=se.renderOrder,fe.z=de,fe.group=me),_++,fe}function ne(se,ae,ce,ue,de,me){const fe=te(se,ae,ce,ue,de,me);ce.transmission>0?Z.push(fe):ce.transparent===!0?Q.push(fe):J.push(fe)}function ie(se,ae,ce,ue,de,me){const fe=te(se,ae,ce,ue,de,me);ce.transmission>0?Z.unshift(fe):ce.transparent===!0?Q.unshift(fe):J.unshift(fe)}function re(se,ae){J.length>1&&J.sort(se||painterSortStable),Z.length>1&&Z.sort(ae||reversePainterSortStable),Q.length>1&&Q.sort(ae||reversePainterSortStable)}function oe(){for(let se=_,ae=G.length;se<ae;se++){const ce=G[se];if(ce.id===null)break;ce.id=null,ce.object=null,ce.geometry=null,ce.material=null,ce.group=null}}return{opaque:J,transmissive:Z,transparent:Q,init:ee,push:ne,unshift:ie,finish:oe,sort:re}}function WebGLRenderLists(){let G=new WeakMap;function _(Z,Q){const ee=G.get(Z);let te;return ee===void 0?(te=new WebGLRenderList,G.set(Z,[te])):Q>=ee.length?(te=new WebGLRenderList,ee.push(te)):te=ee[Q],te}function J(){G=new WeakMap}return{get:_,dispose:J}}function UniformsCache(){const G={};return{get:function(_){if(G[_.id]!==void 0)return G[_.id];let J;switch(_.type){case"DirectionalLight":J={direction:new Vector3,color:new Color};break;case"SpotLight":J={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":J={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":J={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":J={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return G[_.id]=J,J}}}function ShadowUniformsCache(){const G={};return{get:function(_){if(G[_.id]!==void 0)return G[_.id];let J;switch(_.type){case"DirectionalLight":J={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":J={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":J={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return G[_.id]=J,J}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst(G,_){return(_.castShadow?2:0)-(G.castShadow?2:0)+(_.map?1:0)-(G.map?1:0)}function WebGLLights(G){const _=new UniformsCache,J=ShadowUniformsCache(),Z={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let re=0;re<9;re++)Z.probe.push(new Vector3);const Q=new Vector3,ee=new Matrix4,te=new Matrix4;function ne(re){let oe=0,se=0,ae=0;for(let Te=0;Te<9;Te++)Z.probe[Te].set(0,0,0);let ce=0,ue=0,de=0,me=0,fe=0,_e=0,ye=0,be=0,Se=0,Ce=0,Me=0;re.sort(shadowCastingAndTexturingLightsFirst);for(let Te=0,Ee=re.length;Te<Ee;Te++){const De=re[Te],Le=De.color,Ue=De.intensity,Ge=De.distance,Ye=De.shadow&&De.shadow.map?De.shadow.map.texture:null;if(De.isAmbientLight)oe+=Le.r*Ue,se+=Le.g*Ue,ae+=Le.b*Ue;else if(De.isLightProbe){for(let ke=0;ke<9;ke++)Z.probe[ke].addScaledVector(De.sh.coefficients[ke],Ue);Me++}else if(De.isDirectionalLight){const ke=_.get(De);if(ke.color.copy(De.color).multiplyScalar(De.intensity),De.castShadow){const Fe=De.shadow,Ve=J.get(De);Ve.shadowIntensity=Fe.intensity,Ve.shadowBias=Fe.bias,Ve.shadowNormalBias=Fe.normalBias,Ve.shadowRadius=Fe.radius,Ve.shadowMapSize=Fe.mapSize,Z.directionalShadow[ce]=Ve,Z.directionalShadowMap[ce]=Ye,Z.directionalShadowMatrix[ce]=De.shadow.matrix,_e++}Z.directional[ce]=ke,ce++}else if(De.isSpotLight){const ke=_.get(De);ke.position.setFromMatrixPosition(De.matrixWorld),ke.color.copy(Le).multiplyScalar(Ue),ke.distance=Ge,ke.coneCos=Math.cos(De.angle),ke.penumbraCos=Math.cos(De.angle*(1-De.penumbra)),ke.decay=De.decay,Z.spot[de]=ke;const Fe=De.shadow;if(De.map&&(Z.spotLightMap[Se]=De.map,Se++,Fe.updateMatrices(De),De.castShadow&&Ce++),Z.spotLightMatrix[de]=Fe.matrix,De.castShadow){const Ve=J.get(De);Ve.shadowIntensity=Fe.intensity,Ve.shadowBias=Fe.bias,Ve.shadowNormalBias=Fe.normalBias,Ve.shadowRadius=Fe.radius,Ve.shadowMapSize=Fe.mapSize,Z.spotShadow[de]=Ve,Z.spotShadowMap[de]=Ye,be++}de++}else if(De.isRectAreaLight){const ke=_.get(De);ke.color.copy(Le).multiplyScalar(Ue),ke.halfWidth.set(De.width*.5,0,0),ke.halfHeight.set(0,De.height*.5,0),Z.rectArea[me]=ke,me++}else if(De.isPointLight){const ke=_.get(De);if(ke.color.copy(De.color).multiplyScalar(De.intensity),ke.distance=De.distance,ke.decay=De.decay,De.castShadow){const Fe=De.shadow,Ve=J.get(De);Ve.shadowIntensity=Fe.intensity,Ve.shadowBias=Fe.bias,Ve.shadowNormalBias=Fe.normalBias,Ve.shadowRadius=Fe.radius,Ve.shadowMapSize=Fe.mapSize,Ve.shadowCameraNear=Fe.camera.near,Ve.shadowCameraFar=Fe.camera.far,Z.pointShadow[ue]=Ve,Z.pointShadowMap[ue]=Ye,Z.pointShadowMatrix[ue]=De.shadow.matrix,ye++}Z.point[ue]=ke,ue++}else if(De.isHemisphereLight){const ke=_.get(De);ke.skyColor.copy(De.color).multiplyScalar(Ue),ke.groundColor.copy(De.groundColor).multiplyScalar(Ue),Z.hemi[fe]=ke,fe++}}me>0&&(G.has("OES_texture_float_linear")===!0?(Z.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,Z.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):(Z.rectAreaLTC1=UniformsLib.LTC_HALF_1,Z.rectAreaLTC2=UniformsLib.LTC_HALF_2)),Z.ambient[0]=oe,Z.ambient[1]=se,Z.ambient[2]=ae;const Re=Z.hash;(Re.directionalLength!==ce||Re.pointLength!==ue||Re.spotLength!==de||Re.rectAreaLength!==me||Re.hemiLength!==fe||Re.numDirectionalShadows!==_e||Re.numPointShadows!==ye||Re.numSpotShadows!==be||Re.numSpotMaps!==Se||Re.numLightProbes!==Me)&&(Z.directional.length=ce,Z.spot.length=de,Z.rectArea.length=me,Z.point.length=ue,Z.hemi.length=fe,Z.directionalShadow.length=_e,Z.directionalShadowMap.length=_e,Z.pointShadow.length=ye,Z.pointShadowMap.length=ye,Z.spotShadow.length=be,Z.spotShadowMap.length=be,Z.directionalShadowMatrix.length=_e,Z.pointShadowMatrix.length=ye,Z.spotLightMatrix.length=be+Se-Ce,Z.spotLightMap.length=Se,Z.numSpotLightShadowsWithMaps=Ce,Z.numLightProbes=Me,Re.directionalLength=ce,Re.pointLength=ue,Re.spotLength=de,Re.rectAreaLength=me,Re.hemiLength=fe,Re.numDirectionalShadows=_e,Re.numPointShadows=ye,Re.numSpotShadows=be,Re.numSpotMaps=Se,Re.numLightProbes=Me,Z.version=nextVersion++)}function ie(re,oe){let se=0,ae=0,ce=0,ue=0,de=0;const me=oe.matrixWorldInverse;for(let fe=0,_e=re.length;fe<_e;fe++){const ye=re[fe];if(ye.isDirectionalLight){const be=Z.directional[se];be.direction.setFromMatrixPosition(ye.matrixWorld),Q.setFromMatrixPosition(ye.target.matrixWorld),be.direction.sub(Q),be.direction.transformDirection(me),se++}else if(ye.isSpotLight){const be=Z.spot[ce];be.position.setFromMatrixPosition(ye.matrixWorld),be.position.applyMatrix4(me),be.direction.setFromMatrixPosition(ye.matrixWorld),Q.setFromMatrixPosition(ye.target.matrixWorld),be.direction.sub(Q),be.direction.transformDirection(me),ce++}else if(ye.isRectAreaLight){const be=Z.rectArea[ue];be.position.setFromMatrixPosition(ye.matrixWorld),be.position.applyMatrix4(me),te.identity(),ee.copy(ye.matrixWorld),ee.premultiply(me),te.extractRotation(ee),be.halfWidth.set(ye.width*.5,0,0),be.halfHeight.set(0,ye.height*.5,0),be.halfWidth.applyMatrix4(te),be.halfHeight.applyMatrix4(te),ue++}else if(ye.isPointLight){const be=Z.point[ae];be.position.setFromMatrixPosition(ye.matrixWorld),be.position.applyMatrix4(me),ae++}else if(ye.isHemisphereLight){const be=Z.hemi[de];be.direction.setFromMatrixPosition(ye.matrixWorld),be.direction.transformDirection(me),de++}}}return{setup:ne,setupView:ie,state:Z}}function WebGLRenderState(G){const _=new WebGLLights(G),J=[],Z=[];function Q(oe){re.camera=oe,J.length=0,Z.length=0}function ee(oe){J.push(oe)}function te(oe){Z.push(oe)}function ne(){_.setup(J)}function ie(oe){_.setupView(J,oe)}const re={lightsArray:J,shadowsArray:Z,camera:null,lights:_,transmissionRenderTarget:{}};return{init:Q,state:re,setupLights:ne,setupLightsView:ie,pushLight:ee,pushShadow:te}}function WebGLRenderStates(G){let _=new WeakMap;function J(Q,ee=0){const te=_.get(Q);let ne;return te===void 0?(ne=new WebGLRenderState(G),_.set(Q,[ne])):ee>=te.length?(ne=new WebGLRenderState(G),te.push(ne)):ne=te[ee],ne}function Z(){_=new WeakMap}return{get:J,dispose:Z}}const vertex=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WebGLShadowMap(G,_,J){let Z=new Frustum;const Q=new Vector2,ee=new Vector2,te=new Vector4,ne=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),ie=new MeshDistanceMaterial,re={},oe=J.maxTextureSize,se={[FrontSide]:BackSide,[BackSide]:FrontSide,[DoubleSide]:DoubleSide},ae=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),ce=ae.clone();ce.defines.HORIZONTAL_PASS=1;const ue=new BufferGeometry;ue.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const de=new Mesh(ue,ae),me=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap;let fe=this.type;this.render=function(Ce,Me,Re){if(me.enabled===!1||me.autoUpdate===!1&&me.needsUpdate===!1||Ce.length===0)return;const Te=G.getRenderTarget(),Ee=G.getActiveCubeFace(),De=G.getActiveMipmapLevel(),Le=G.state;Le.setBlending(NoBlending),Le.buffers.depth.getReversed()===!0?Le.buffers.color.setClear(0,0,0,0):Le.buffers.color.setClear(1,1,1,1),Le.buffers.depth.setTest(!0),Le.setScissorTest(!1);const Ue=fe!==VSMShadowMap&&this.type===VSMShadowMap,Ge=fe===VSMShadowMap&&this.type!==VSMShadowMap;for(let Ye=0,ke=Ce.length;Ye<ke;Ye++){const Fe=Ce[Ye],Ve=Fe.shadow;if(Ve===void 0){warn("WebGLShadowMap:",Fe,"has no shadow.");continue}if(Ve.autoUpdate===!1&&Ve.needsUpdate===!1)continue;Q.copy(Ve.mapSize);const $e=Ve.getFrameExtents();if(Q.multiply($e),ee.copy(Ve.mapSize),(Q.x>oe||Q.y>oe)&&(Q.x>oe&&(ee.x=Math.floor(oe/$e.x),Q.x=ee.x*$e.x,Ve.mapSize.x=ee.x),Q.y>oe&&(ee.y=Math.floor(oe/$e.y),Q.y=ee.y*$e.y,Ve.mapSize.y=ee.y)),Ve.map===null||Ue===!0||Ge===!0){const ze=this.type!==VSMShadowMap?{minFilter:NearestFilter,magFilter:NearestFilter}:{};Ve.map!==null&&Ve.map.dispose(),Ve.map=new WebGLRenderTarget(Q.x,Q.y,ze),Ve.map.texture.name=Fe.name+".shadowMap",Ve.camera.updateProjectionMatrix()}G.setRenderTarget(Ve.map),G.clear();const Xe=Ve.getViewportCount();for(let ze=0;ze<Xe;ze++){const qe=Ve.getViewport(ze);te.set(ee.x*qe.x,ee.y*qe.y,ee.x*qe.z,ee.y*qe.w),Le.viewport(te),Ve.updateMatrices(Fe,ze),Z=Ve.getFrustum(),be(Me,Re,Ve.camera,Fe,this.type)}Ve.isPointLightShadow!==!0&&this.type===VSMShadowMap&&_e(Ve,Re),Ve.needsUpdate=!1}fe=this.type,me.needsUpdate=!1,G.setRenderTarget(Te,Ee,De)};function _e(Ce,Me){const Re=_.update(de);ae.defines.VSM_SAMPLES!==Ce.blurSamples&&(ae.defines.VSM_SAMPLES=Ce.blurSamples,ce.defines.VSM_SAMPLES=Ce.blurSamples,ae.needsUpdate=!0,ce.needsUpdate=!0),Ce.mapPass===null&&(Ce.mapPass=new WebGLRenderTarget(Q.x,Q.y)),ae.uniforms.shadow_pass.value=Ce.map.texture,ae.uniforms.resolution.value=Ce.mapSize,ae.uniforms.radius.value=Ce.radius,G.setRenderTarget(Ce.mapPass),G.clear(),G.renderBufferDirect(Me,null,Re,ae,de,null),ce.uniforms.shadow_pass.value=Ce.mapPass.texture,ce.uniforms.resolution.value=Ce.mapSize,ce.uniforms.radius.value=Ce.radius,G.setRenderTarget(Ce.map),G.clear(),G.renderBufferDirect(Me,null,Re,ce,de,null)}function ye(Ce,Me,Re,Te){let Ee=null;const De=Re.isPointLight===!0?Ce.customDistanceMaterial:Ce.customDepthMaterial;if(De!==void 0)Ee=De;else if(Ee=Re.isPointLight===!0?ie:ne,G.localClippingEnabled&&Me.clipShadows===!0&&Array.isArray(Me.clippingPlanes)&&Me.clippingPlanes.length!==0||Me.displacementMap&&Me.displacementScale!==0||Me.alphaMap&&Me.alphaTest>0||Me.map&&Me.alphaTest>0||Me.alphaToCoverage===!0){const Le=Ee.uuid,Ue=Me.uuid;let Ge=re[Le];Ge===void 0&&(Ge={},re[Le]=Ge);let Ye=Ge[Ue];Ye===void 0&&(Ye=Ee.clone(),Ge[Ue]=Ye,Me.addEventListener("dispose",Se)),Ee=Ye}if(Ee.visible=Me.visible,Ee.wireframe=Me.wireframe,Te===VSMShadowMap?Ee.side=Me.shadowSide!==null?Me.shadowSide:Me.side:Ee.side=Me.shadowSide!==null?Me.shadowSide:se[Me.side],Ee.alphaMap=Me.alphaMap,Ee.alphaTest=Me.alphaToCoverage===!0?.5:Me.alphaTest,Ee.map=Me.map,Ee.clipShadows=Me.clipShadows,Ee.clippingPlanes=Me.clippingPlanes,Ee.clipIntersection=Me.clipIntersection,Ee.displacementMap=Me.displacementMap,Ee.displacementScale=Me.displacementScale,Ee.displacementBias=Me.displacementBias,Ee.wireframeLinewidth=Me.wireframeLinewidth,Ee.linewidth=Me.linewidth,Re.isPointLight===!0&&Ee.isMeshDistanceMaterial===!0){const Le=G.properties.get(Ee);Le.light=Re}return Ee}function be(Ce,Me,Re,Te,Ee){if(Ce.visible===!1)return;if(Ce.layers.test(Me.layers)&&(Ce.isMesh||Ce.isLine||Ce.isPoints)&&(Ce.castShadow||Ce.receiveShadow&&Ee===VSMShadowMap)&&(!Ce.frustumCulled||Z.intersectsObject(Ce))){Ce.modelViewMatrix.multiplyMatrices(Re.matrixWorldInverse,Ce.matrixWorld);const Ue=_.update(Ce),Ge=Ce.material;if(Array.isArray(Ge)){const Ye=Ue.groups;for(let ke=0,Fe=Ye.length;ke<Fe;ke++){const Ve=Ye[ke],$e=Ge[Ve.materialIndex];if($e&&$e.visible){const Xe=ye(Ce,$e,Te,Ee);Ce.onBeforeShadow(G,Ce,Me,Re,Ue,Xe,Ve),G.renderBufferDirect(Re,null,Ue,Xe,Ce,Ve),Ce.onAfterShadow(G,Ce,Me,Re,Ue,Xe,Ve)}}}else if(Ge.visible){const Ye=ye(Ce,Ge,Te,Ee);Ce.onBeforeShadow(G,Ce,Me,Re,Ue,Ye,null),G.renderBufferDirect(Re,null,Ue,Ye,Ce,null),Ce.onAfterShadow(G,Ce,Me,Re,Ue,Ye,null)}}const Le=Ce.children;for(let Ue=0,Ge=Le.length;Ue<Ge;Ue++)be(Le[Ue],Me,Re,Te,Ee)}function Se(Ce){Ce.target.removeEventListener("dispose",Se);for(const Re in re){const Te=re[Re],Ee=Ce.target.uuid;Ee in Te&&(Te[Ee].dispose(),delete Te[Ee])}}}const reversedFuncs={[NeverDepth]:AlwaysDepth,[LessDepth]:GreaterDepth,[EqualDepth]:NotEqualDepth,[LessEqualDepth]:GreaterEqualDepth,[AlwaysDepth]:NeverDepth,[GreaterDepth]:LessDepth,[NotEqualDepth]:EqualDepth,[GreaterEqualDepth]:LessEqualDepth};function WebGLState(G,_){function J(){let rt=!1;const Qt=new Vector4;let zt=null;const ei=new Vector4(0,0,0,0);return{setMask:function(Wt){zt!==Wt&&!rt&&(G.colorMask(Wt,Wt,Wt,Wt),zt=Wt)},setLocked:function(Wt){rt=Wt},setClear:function(Wt,Ft,hi,pi,Di){Di===!0&&(Wt*=pi,Ft*=pi,hi*=pi),Qt.set(Wt,Ft,hi,pi),ei.equals(Qt)===!1&&(G.clearColor(Wt,Ft,hi,pi),ei.copy(Qt))},reset:function(){rt=!1,zt=null,ei.set(-1,0,0,0)}}}function Z(){let rt=!1,Qt=!1,zt=null,ei=null,Wt=null;return{setReversed:function(Ft){if(Qt!==Ft){const hi=_.get("EXT_clip_control");Ft?hi.clipControlEXT(hi.LOWER_LEFT_EXT,hi.ZERO_TO_ONE_EXT):hi.clipControlEXT(hi.LOWER_LEFT_EXT,hi.NEGATIVE_ONE_TO_ONE_EXT),Qt=Ft;const pi=Wt;Wt=null,this.setClear(pi)}},getReversed:function(){return Qt},setTest:function(Ft){Ft?lt(G.DEPTH_TEST):gt(G.DEPTH_TEST)},setMask:function(Ft){zt!==Ft&&!rt&&(G.depthMask(Ft),zt=Ft)},setFunc:function(Ft){if(Qt&&(Ft=reversedFuncs[Ft]),ei!==Ft){switch(Ft){case NeverDepth:G.depthFunc(G.NEVER);break;case AlwaysDepth:G.depthFunc(G.ALWAYS);break;case LessDepth:G.depthFunc(G.LESS);break;case LessEqualDepth:G.depthFunc(G.LEQUAL);break;case EqualDepth:G.depthFunc(G.EQUAL);break;case GreaterEqualDepth:G.depthFunc(G.GEQUAL);break;case GreaterDepth:G.depthFunc(G.GREATER);break;case NotEqualDepth:G.depthFunc(G.NOTEQUAL);break;default:G.depthFunc(G.LEQUAL)}ei=Ft}},setLocked:function(Ft){rt=Ft},setClear:function(Ft){Wt!==Ft&&(Qt&&(Ft=1-Ft),G.clearDepth(Ft),Wt=Ft)},reset:function(){rt=!1,zt=null,ei=null,Wt=null,Qt=!1}}}function Q(){let rt=!1,Qt=null,zt=null,ei=null,Wt=null,Ft=null,hi=null,pi=null,Di=null;return{setTest:function(Si){rt||(Si?lt(G.STENCIL_TEST):gt(G.STENCIL_TEST))},setMask:function(Si){Qt!==Si&&!rt&&(G.stencilMask(Si),Qt=Si)},setFunc:function(Si,Ii,vn){(zt!==Si||ei!==Ii||Wt!==vn)&&(G.stencilFunc(Si,Ii,vn),zt=Si,ei=Ii,Wt=vn)},setOp:function(Si,Ii,vn){(Ft!==Si||hi!==Ii||pi!==vn)&&(G.stencilOp(Si,Ii,vn),Ft=Si,hi=Ii,pi=vn)},setLocked:function(Si){rt=Si},setClear:function(Si){Di!==Si&&(G.clearStencil(Si),Di=Si)},reset:function(){rt=!1,Qt=null,zt=null,ei=null,Wt=null,Ft=null,hi=null,pi=null,Di=null}}}const ee=new J,te=new Z,ne=new Q,ie=new WeakMap,re=new WeakMap;let oe={},se={},ae=new WeakMap,ce=[],ue=null,de=!1,me=null,fe=null,_e=null,ye=null,be=null,Se=null,Ce=null,Me=new Color(0,0,0),Re=0,Te=!1,Ee=null,De=null,Le=null,Ue=null,Ge=null;const Ye=G.getParameter(G.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ke=!1,Fe=0;const Ve=G.getParameter(G.VERSION);Ve.indexOf("WebGL")!==-1?(Fe=parseFloat(/^WebGL (\d)/.exec(Ve)[1]),ke=Fe>=1):Ve.indexOf("OpenGL ES")!==-1&&(Fe=parseFloat(/^OpenGL ES (\d)/.exec(Ve)[1]),ke=Fe>=2);let $e=null,Xe={};const ze=G.getParameter(G.SCISSOR_BOX),qe=G.getParameter(G.VIEWPORT),et=new Vector4().fromArray(ze),ot=new Vector4().fromArray(qe);function St(rt,Qt,zt,ei){const Wt=new Uint8Array(4),Ft=G.createTexture();G.bindTexture(rt,Ft),G.texParameteri(rt,G.TEXTURE_MIN_FILTER,G.NEAREST),G.texParameteri(rt,G.TEXTURE_MAG_FILTER,G.NEAREST);for(let hi=0;hi<zt;hi++)rt===G.TEXTURE_3D||rt===G.TEXTURE_2D_ARRAY?G.texImage3D(Qt,0,G.RGBA,1,1,ei,0,G.RGBA,G.UNSIGNED_BYTE,Wt):G.texImage2D(Qt+hi,0,G.RGBA,1,1,0,G.RGBA,G.UNSIGNED_BYTE,Wt);return Ft}const it={};it[G.TEXTURE_2D]=St(G.TEXTURE_2D,G.TEXTURE_2D,1),it[G.TEXTURE_CUBE_MAP]=St(G.TEXTURE_CUBE_MAP,G.TEXTURE_CUBE_MAP_POSITIVE_X,6),it[G.TEXTURE_2D_ARRAY]=St(G.TEXTURE_2D_ARRAY,G.TEXTURE_2D_ARRAY,1,1),it[G.TEXTURE_3D]=St(G.TEXTURE_3D,G.TEXTURE_3D,1,1),ee.setClear(0,0,0,1),te.setClear(1),ne.setClear(0),lt(G.DEPTH_TEST),te.setFunc(LessEqualDepth),Tt(!1),Ut(CullFaceBack),lt(G.CULL_FACE),vt(NoBlending);function lt(rt){oe[rt]!==!0&&(G.enable(rt),oe[rt]=!0)}function gt(rt){oe[rt]!==!1&&(G.disable(rt),oe[rt]=!1)}function kt(rt,Qt){return se[rt]!==Qt?(G.bindFramebuffer(rt,Qt),se[rt]=Qt,rt===G.DRAW_FRAMEBUFFER&&(se[G.FRAMEBUFFER]=Qt),rt===G.FRAMEBUFFER&&(se[G.DRAW_FRAMEBUFFER]=Qt),!0):!1}function Jt(rt,Qt){let zt=ce,ei=!1;if(rt){zt=ae.get(Qt),zt===void 0&&(zt=[],ae.set(Qt,zt));const Wt=rt.textures;if(zt.length!==Wt.length||zt[0]!==G.COLOR_ATTACHMENT0){for(let Ft=0,hi=Wt.length;Ft<hi;Ft++)zt[Ft]=G.COLOR_ATTACHMENT0+Ft;zt.length=Wt.length,ei=!0}}else zt[0]!==G.BACK&&(zt[0]=G.BACK,ei=!0);ei&&G.drawBuffers(zt)}function li(rt){return ue!==rt?(G.useProgram(rt),ue=rt,!0):!1}const si={[AddEquation]:G.FUNC_ADD,[SubtractEquation]:G.FUNC_SUBTRACT,[ReverseSubtractEquation]:G.FUNC_REVERSE_SUBTRACT};si[MinEquation]=G.MIN,si[MaxEquation]=G.MAX;const qt={[ZeroFactor]:G.ZERO,[OneFactor]:G.ONE,[SrcColorFactor]:G.SRC_COLOR,[SrcAlphaFactor]:G.SRC_ALPHA,[SrcAlphaSaturateFactor]:G.SRC_ALPHA_SATURATE,[DstColorFactor]:G.DST_COLOR,[DstAlphaFactor]:G.DST_ALPHA,[OneMinusSrcColorFactor]:G.ONE_MINUS_SRC_COLOR,[OneMinusSrcAlphaFactor]:G.ONE_MINUS_SRC_ALPHA,[OneMinusDstColorFactor]:G.ONE_MINUS_DST_COLOR,[OneMinusDstAlphaFactor]:G.ONE_MINUS_DST_ALPHA,[ConstantColorFactor]:G.CONSTANT_COLOR,[OneMinusConstantColorFactor]:G.ONE_MINUS_CONSTANT_COLOR,[ConstantAlphaFactor]:G.CONSTANT_ALPHA,[OneMinusConstantAlphaFactor]:G.ONE_MINUS_CONSTANT_ALPHA};function vt(rt,Qt,zt,ei,Wt,Ft,hi,pi,Di,Si){if(rt===NoBlending){de===!0&&(gt(G.BLEND),de=!1);return}if(de===!1&&(lt(G.BLEND),de=!0),rt!==CustomBlending){if(rt!==me||Si!==Te){if((fe!==AddEquation||be!==AddEquation)&&(G.blendEquation(G.FUNC_ADD),fe=AddEquation,be=AddEquation),Si)switch(rt){case NormalBlending:G.blendFuncSeparate(G.ONE,G.ONE_MINUS_SRC_ALPHA,G.ONE,G.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:G.blendFunc(G.ONE,G.ONE);break;case SubtractiveBlending:G.blendFuncSeparate(G.ZERO,G.ONE_MINUS_SRC_COLOR,G.ZERO,G.ONE);break;case MultiplyBlending:G.blendFuncSeparate(G.DST_COLOR,G.ONE_MINUS_SRC_ALPHA,G.ZERO,G.ONE);break;default:error("WebGLState: Invalid blending: ",rt);break}else switch(rt){case NormalBlending:G.blendFuncSeparate(G.SRC_ALPHA,G.ONE_MINUS_SRC_ALPHA,G.ONE,G.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:G.blendFuncSeparate(G.SRC_ALPHA,G.ONE,G.ONE,G.ONE);break;case SubtractiveBlending:error("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case MultiplyBlending:error("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:error("WebGLState: Invalid blending: ",rt);break}_e=null,ye=null,Se=null,Ce=null,Me.set(0,0,0),Re=0,me=rt,Te=Si}return}Wt=Wt||Qt,Ft=Ft||zt,hi=hi||ei,(Qt!==fe||Wt!==be)&&(G.blendEquationSeparate(si[Qt],si[Wt]),fe=Qt,be=Wt),(zt!==_e||ei!==ye||Ft!==Se||hi!==Ce)&&(G.blendFuncSeparate(qt[zt],qt[ei],qt[Ft],qt[hi]),_e=zt,ye=ei,Se=Ft,Ce=hi),(pi.equals(Me)===!1||Di!==Re)&&(G.blendColor(pi.r,pi.g,pi.b,Di),Me.copy(pi),Re=Di),me=rt,Te=!1}function Ke(rt,Qt){rt.side===DoubleSide?gt(G.CULL_FACE):lt(G.CULL_FACE);let zt=rt.side===BackSide;Qt&&(zt=!zt),Tt(zt),rt.blending===NormalBlending&&rt.transparent===!1?vt(NoBlending):vt(rt.blending,rt.blendEquation,rt.blendSrc,rt.blendDst,rt.blendEquationAlpha,rt.blendSrcAlpha,rt.blendDstAlpha,rt.blendColor,rt.blendAlpha,rt.premultipliedAlpha),te.setFunc(rt.depthFunc),te.setTest(rt.depthTest),te.setMask(rt.depthWrite),ee.setMask(rt.colorWrite);const ei=rt.stencilWrite;ne.setTest(ei),ei&&(ne.setMask(rt.stencilWriteMask),ne.setFunc(rt.stencilFunc,rt.stencilRef,rt.stencilFuncMask),ne.setOp(rt.stencilFail,rt.stencilZFail,rt.stencilZPass)),jt(rt.polygonOffset,rt.polygonOffsetFactor,rt.polygonOffsetUnits),rt.alphaToCoverage===!0?lt(G.SAMPLE_ALPHA_TO_COVERAGE):gt(G.SAMPLE_ALPHA_TO_COVERAGE)}function Tt(rt){Ee!==rt&&(rt?G.frontFace(G.CW):G.frontFace(G.CCW),Ee=rt)}function Ut(rt){rt!==CullFaceNone?(lt(G.CULL_FACE),rt!==De&&(rt===CullFaceBack?G.cullFace(G.BACK):rt===CullFaceFront?G.cullFace(G.FRONT):G.cullFace(G.FRONT_AND_BACK))):gt(G.CULL_FACE),De=rt}function Lt(rt){rt!==Le&&(ke&&G.lineWidth(rt),Le=rt)}function jt(rt,Qt,zt){rt?(lt(G.POLYGON_OFFSET_FILL),(Ue!==Qt||Ge!==zt)&&(G.polygonOffset(Qt,zt),Ue=Qt,Ge=zt)):gt(G.POLYGON_OFFSET_FILL)}function ri(rt){rt?lt(G.SCISSOR_TEST):gt(G.SCISSOR_TEST)}function ti(rt){rt===void 0&&(rt=G.TEXTURE0+Ye-1),$e!==rt&&(G.activeTexture(rt),$e=rt)}function di(rt,Qt,zt){zt===void 0&&($e===null?zt=G.TEXTURE0+Ye-1:zt=$e);let ei=Xe[zt];ei===void 0&&(ei={type:void 0,texture:void 0},Xe[zt]=ei),(ei.type!==rt||ei.texture!==Qt)&&($e!==zt&&(G.activeTexture(zt),$e=zt),G.bindTexture(rt,Qt||it[rt]),ei.type=rt,ei.texture=Qt)}function Qe(){const rt=Xe[$e];rt!==void 0&&rt.type!==void 0&&(G.bindTexture(rt.type,null),rt.type=void 0,rt.texture=void 0)}function He(){try{G.compressedTexImage2D(...arguments)}catch(rt){rt("WebGLState:",rt)}}function _t(){try{G.compressedTexImage3D(...arguments)}catch(rt){rt("WebGLState:",rt)}}function dt(){try{G.texSubImage2D(...arguments)}catch(rt){rt("WebGLState:",rt)}}function At(){try{G.texSubImage3D(...arguments)}catch(rt){rt("WebGLState:",rt)}}function Nt(){try{G.compressedTexSubImage2D(...arguments)}catch(rt){rt("WebGLState:",rt)}}function fi(){try{G.compressedTexSubImage3D(...arguments)}catch(rt){rt("WebGLState:",rt)}}function Kt(){try{G.texStorage2D(...arguments)}catch(rt){rt("WebGLState:",rt)}}function It(){try{G.texStorage3D(...arguments)}catch(rt){rt("WebGLState:",rt)}}function Yt(){try{G.texImage2D(...arguments)}catch(rt){rt("WebGLState:",rt)}}function Rt(){try{G.texImage3D(...arguments)}catch(rt){rt("WebGLState:",rt)}}function Pt(rt){et.equals(rt)===!1&&(G.scissor(rt.x,rt.y,rt.z,rt.w),et.copy(rt))}function mt(rt){ot.equals(rt)===!1&&(G.viewport(rt.x,rt.y,rt.z,rt.w),ot.copy(rt))}function tt(rt,Qt){let zt=re.get(Qt);zt===void 0&&(zt=new WeakMap,re.set(Qt,zt));let ei=zt.get(rt);ei===void 0&&(ei=G.getUniformBlockIndex(Qt,rt.name),zt.set(rt,ei))}function Ze(rt,Qt){const ei=re.get(Qt).get(rt);ie.get(Qt)!==ei&&(G.uniformBlockBinding(Qt,ei,rt.__bindingPointIndex),ie.set(Qt,ei))}function Zt(){G.disable(G.BLEND),G.disable(G.CULL_FACE),G.disable(G.DEPTH_TEST),G.disable(G.POLYGON_OFFSET_FILL),G.disable(G.SCISSOR_TEST),G.disable(G.STENCIL_TEST),G.disable(G.SAMPLE_ALPHA_TO_COVERAGE),G.blendEquation(G.FUNC_ADD),G.blendFunc(G.ONE,G.ZERO),G.blendFuncSeparate(G.ONE,G.ZERO,G.ONE,G.ZERO),G.blendColor(0,0,0,0),G.colorMask(!0,!0,!0,!0),G.clearColor(0,0,0,0),G.depthMask(!0),G.depthFunc(G.LESS),te.setReversed(!1),G.clearDepth(1),G.stencilMask(4294967295),G.stencilFunc(G.ALWAYS,0,4294967295),G.stencilOp(G.KEEP,G.KEEP,G.KEEP),G.clearStencil(0),G.cullFace(G.BACK),G.frontFace(G.CCW),G.polygonOffset(0,0),G.activeTexture(G.TEXTURE0),G.bindFramebuffer(G.FRAMEBUFFER,null),G.bindFramebuffer(G.DRAW_FRAMEBUFFER,null),G.bindFramebuffer(G.READ_FRAMEBUFFER,null),G.useProgram(null),G.lineWidth(1),G.scissor(0,0,G.canvas.width,G.canvas.height),G.viewport(0,0,G.canvas.width,G.canvas.height),oe={},$e=null,Xe={},se={},ae=new WeakMap,ce=[],ue=null,de=!1,me=null,fe=null,_e=null,ye=null,be=null,Se=null,Ce=null,Me=new Color(0,0,0),Re=0,Te=!1,Ee=null,De=null,Le=null,Ue=null,Ge=null,et.set(0,0,G.canvas.width,G.canvas.height),ot.set(0,0,G.canvas.width,G.canvas.height),ee.reset(),te.reset(),ne.reset()}return{buffers:{color:ee,depth:te,stencil:ne},enable:lt,disable:gt,bindFramebuffer:kt,drawBuffers:Jt,useProgram:li,setBlending:vt,setMaterial:Ke,setFlipSided:Tt,setCullFace:Ut,setLineWidth:Lt,setPolygonOffset:jt,setScissorTest:ri,activeTexture:ti,bindTexture:di,unbindTexture:Qe,compressedTexImage2D:He,compressedTexImage3D:_t,texImage2D:Yt,texImage3D:Rt,updateUBOMapping:tt,uniformBlockBinding:Ze,texStorage2D:Kt,texStorage3D:It,texSubImage2D:dt,texSubImage3D:At,compressedTexSubImage2D:Nt,compressedTexSubImage3D:fi,scissor:Pt,viewport:mt,reset:Zt}}function WebGLTextures(G,_,J,Z,Q,ee,te){const ne=_.has("WEBGL_multisampled_render_to_texture")?_.get("WEBGL_multisampled_render_to_texture"):null,ie=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),re=new Vector2,oe=new WeakMap;let se;const ae=new WeakMap;let ce=!1;try{ce=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function ue(Qe,He){return ce?new OffscreenCanvas(Qe,He):createElementNS("canvas")}function de(Qe,He,_t){let dt=1;const At=di(Qe);if((At.width>_t||At.height>_t)&&(dt=_t/Math.max(At.width,At.height)),dt<1)if(typeof HTMLImageElement<"u"&&Qe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Qe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Qe instanceof ImageBitmap||typeof VideoFrame<"u"&&Qe instanceof VideoFrame){const Nt=Math.floor(dt*At.width),fi=Math.floor(dt*At.height);se===void 0&&(se=ue(Nt,fi));const Kt=He?ue(Nt,fi):se;return Kt.width=Nt,Kt.height=fi,Kt.getContext("2d").drawImage(Qe,0,0,Nt,fi),warn("WebGLRenderer: Texture has been resized from ("+At.width+"x"+At.height+") to ("+Nt+"x"+fi+")."),Kt}else return"data"in Qe&&warn("WebGLRenderer: Image in DataTexture is too big ("+At.width+"x"+At.height+")."),Qe;return Qe}function me(Qe){return Qe.generateMipmaps}function fe(Qe){G.generateMipmap(Qe)}function _e(Qe){return Qe.isWebGLCubeRenderTarget?G.TEXTURE_CUBE_MAP:Qe.isWebGL3DRenderTarget?G.TEXTURE_3D:Qe.isWebGLArrayRenderTarget||Qe.isCompressedArrayTexture?G.TEXTURE_2D_ARRAY:G.TEXTURE_2D}function ye(Qe,He,_t,dt,At=!1){if(Qe!==null){if(G[Qe]!==void 0)return G[Qe];warn("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Qe+"'")}let Nt=He;if(He===G.RED&&(_t===G.FLOAT&&(Nt=G.R32F),_t===G.HALF_FLOAT&&(Nt=G.R16F),_t===G.UNSIGNED_BYTE&&(Nt=G.R8)),He===G.RED_INTEGER&&(_t===G.UNSIGNED_BYTE&&(Nt=G.R8UI),_t===G.UNSIGNED_SHORT&&(Nt=G.R16UI),_t===G.UNSIGNED_INT&&(Nt=G.R32UI),_t===G.BYTE&&(Nt=G.R8I),_t===G.SHORT&&(Nt=G.R16I),_t===G.INT&&(Nt=G.R32I)),He===G.RG&&(_t===G.FLOAT&&(Nt=G.RG32F),_t===G.HALF_FLOAT&&(Nt=G.RG16F),_t===G.UNSIGNED_BYTE&&(Nt=G.RG8)),He===G.RG_INTEGER&&(_t===G.UNSIGNED_BYTE&&(Nt=G.RG8UI),_t===G.UNSIGNED_SHORT&&(Nt=G.RG16UI),_t===G.UNSIGNED_INT&&(Nt=G.RG32UI),_t===G.BYTE&&(Nt=G.RG8I),_t===G.SHORT&&(Nt=G.RG16I),_t===G.INT&&(Nt=G.RG32I)),He===G.RGB_INTEGER&&(_t===G.UNSIGNED_BYTE&&(Nt=G.RGB8UI),_t===G.UNSIGNED_SHORT&&(Nt=G.RGB16UI),_t===G.UNSIGNED_INT&&(Nt=G.RGB32UI),_t===G.BYTE&&(Nt=G.RGB8I),_t===G.SHORT&&(Nt=G.RGB16I),_t===G.INT&&(Nt=G.RGB32I)),He===G.RGBA_INTEGER&&(_t===G.UNSIGNED_BYTE&&(Nt=G.RGBA8UI),_t===G.UNSIGNED_SHORT&&(Nt=G.RGBA16UI),_t===G.UNSIGNED_INT&&(Nt=G.RGBA32UI),_t===G.BYTE&&(Nt=G.RGBA8I),_t===G.SHORT&&(Nt=G.RGBA16I),_t===G.INT&&(Nt=G.RGBA32I)),He===G.RGB&&(_t===G.UNSIGNED_INT_5_9_9_9_REV&&(Nt=G.RGB9_E5),_t===G.UNSIGNED_INT_10F_11F_11F_REV&&(Nt=G.R11F_G11F_B10F)),He===G.RGBA){const fi=At?LinearTransfer:ColorManagement.getTransfer(dt);_t===G.FLOAT&&(Nt=G.RGBA32F),_t===G.HALF_FLOAT&&(Nt=G.RGBA16F),_t===G.UNSIGNED_BYTE&&(Nt=fi===SRGBTransfer?G.SRGB8_ALPHA8:G.RGBA8),_t===G.UNSIGNED_SHORT_4_4_4_4&&(Nt=G.RGBA4),_t===G.UNSIGNED_SHORT_5_5_5_1&&(Nt=G.RGB5_A1)}return(Nt===G.R16F||Nt===G.R32F||Nt===G.RG16F||Nt===G.RG32F||Nt===G.RGBA16F||Nt===G.RGBA32F)&&_.get("EXT_color_buffer_float"),Nt}function be(Qe,He){let _t;return Qe?He===null||He===UnsignedIntType||He===UnsignedInt248Type?_t=G.DEPTH24_STENCIL8:He===FloatType?_t=G.DEPTH32F_STENCIL8:He===UnsignedShortType&&(_t=G.DEPTH24_STENCIL8,warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):He===null||He===UnsignedIntType||He===UnsignedInt248Type?_t=G.DEPTH_COMPONENT24:He===FloatType?_t=G.DEPTH_COMPONENT32F:He===UnsignedShortType&&(_t=G.DEPTH_COMPONENT16),_t}function Se(Qe,He){return me(Qe)===!0||Qe.isFramebufferTexture&&Qe.minFilter!==NearestFilter&&Qe.minFilter!==LinearFilter?Math.log2(Math.max(He.width,He.height))+1:Qe.mipmaps!==void 0&&Qe.mipmaps.length>0?Qe.mipmaps.length:Qe.isCompressedTexture&&Array.isArray(Qe.image)?He.mipmaps.length:1}function Ce(Qe){const He=Qe.target;He.removeEventListener("dispose",Ce),Re(He),He.isVideoTexture&&oe.delete(He)}function Me(Qe){const He=Qe.target;He.removeEventListener("dispose",Me),Ee(He)}function Re(Qe){const He=Z.get(Qe);if(He.__webglInit===void 0)return;const _t=Qe.source,dt=ae.get(_t);if(dt){const At=dt[He.__cacheKey];At.usedTimes--,At.usedTimes===0&&Te(Qe),Object.keys(dt).length===0&&ae.delete(_t)}Z.remove(Qe)}function Te(Qe){const He=Z.get(Qe);G.deleteTexture(He.__webglTexture);const _t=Qe.source,dt=ae.get(_t);delete dt[He.__cacheKey],te.memory.textures--}function Ee(Qe){const He=Z.get(Qe);if(Qe.depthTexture&&(Qe.depthTexture.dispose(),Z.remove(Qe.depthTexture)),Qe.isWebGLCubeRenderTarget)for(let dt=0;dt<6;dt++){if(Array.isArray(He.__webglFramebuffer[dt]))for(let At=0;At<He.__webglFramebuffer[dt].length;At++)G.deleteFramebuffer(He.__webglFramebuffer[dt][At]);else G.deleteFramebuffer(He.__webglFramebuffer[dt]);He.__webglDepthbuffer&&G.deleteRenderbuffer(He.__webglDepthbuffer[dt])}else{if(Array.isArray(He.__webglFramebuffer))for(let dt=0;dt<He.__webglFramebuffer.length;dt++)G.deleteFramebuffer(He.__webglFramebuffer[dt]);else G.deleteFramebuffer(He.__webglFramebuffer);if(He.__webglDepthbuffer&&G.deleteRenderbuffer(He.__webglDepthbuffer),He.__webglMultisampledFramebuffer&&G.deleteFramebuffer(He.__webglMultisampledFramebuffer),He.__webglColorRenderbuffer)for(let dt=0;dt<He.__webglColorRenderbuffer.length;dt++)He.__webglColorRenderbuffer[dt]&&G.deleteRenderbuffer(He.__webglColorRenderbuffer[dt]);He.__webglDepthRenderbuffer&&G.deleteRenderbuffer(He.__webglDepthRenderbuffer)}const _t=Qe.textures;for(let dt=0,At=_t.length;dt<At;dt++){const Nt=Z.get(_t[dt]);Nt.__webglTexture&&(G.deleteTexture(Nt.__webglTexture),te.memory.textures--),Z.remove(_t[dt])}Z.remove(Qe)}let De=0;function Le(){De=0}function Ue(){const Qe=De;return Qe>=Q.maxTextures&&warn("WebGLTextures: Trying to use "+Qe+" texture units while this GPU supports only "+Q.maxTextures),De+=1,Qe}function Ge(Qe){const He=[];return He.push(Qe.wrapS),He.push(Qe.wrapT),He.push(Qe.wrapR||0),He.push(Qe.magFilter),He.push(Qe.minFilter),He.push(Qe.anisotropy),He.push(Qe.internalFormat),He.push(Qe.format),He.push(Qe.type),He.push(Qe.generateMipmaps),He.push(Qe.premultiplyAlpha),He.push(Qe.flipY),He.push(Qe.unpackAlignment),He.push(Qe.colorSpace),He.join()}function Ye(Qe,He){const _t=Z.get(Qe);if(Qe.isVideoTexture&&ri(Qe),Qe.isRenderTargetTexture===!1&&Qe.isExternalTexture!==!0&&Qe.version>0&&_t.__version!==Qe.version){const dt=Qe.image;if(dt===null)warn("WebGLRenderer: Texture marked for update but no image data found.");else if(dt.complete===!1)warn("WebGLRenderer: Texture marked for update but image is incomplete");else{it(_t,Qe,He);return}}else Qe.isExternalTexture&&(_t.__webglTexture=Qe.sourceTexture?Qe.sourceTexture:null);J.bindTexture(G.TEXTURE_2D,_t.__webglTexture,G.TEXTURE0+He)}function ke(Qe,He){const _t=Z.get(Qe);if(Qe.isRenderTargetTexture===!1&&Qe.version>0&&_t.__version!==Qe.version){it(_t,Qe,He);return}else Qe.isExternalTexture&&(_t.__webglTexture=Qe.sourceTexture?Qe.sourceTexture:null);J.bindTexture(G.TEXTURE_2D_ARRAY,_t.__webglTexture,G.TEXTURE0+He)}function Fe(Qe,He){const _t=Z.get(Qe);if(Qe.isRenderTargetTexture===!1&&Qe.version>0&&_t.__version!==Qe.version){it(_t,Qe,He);return}J.bindTexture(G.TEXTURE_3D,_t.__webglTexture,G.TEXTURE0+He)}function Ve(Qe,He){const _t=Z.get(Qe);if(Qe.version>0&&_t.__version!==Qe.version){lt(_t,Qe,He);return}J.bindTexture(G.TEXTURE_CUBE_MAP,_t.__webglTexture,G.TEXTURE0+He)}const $e={[RepeatWrapping]:G.REPEAT,[ClampToEdgeWrapping]:G.CLAMP_TO_EDGE,[MirroredRepeatWrapping]:G.MIRRORED_REPEAT},Xe={[NearestFilter]:G.NEAREST,[NearestMipmapNearestFilter]:G.NEAREST_MIPMAP_NEAREST,[NearestMipmapLinearFilter]:G.NEAREST_MIPMAP_LINEAR,[LinearFilter]:G.LINEAR,[LinearMipmapNearestFilter]:G.LINEAR_MIPMAP_NEAREST,[LinearMipmapLinearFilter]:G.LINEAR_MIPMAP_LINEAR},ze={[NeverCompare]:G.NEVER,[AlwaysCompare]:G.ALWAYS,[LessCompare]:G.LESS,[LessEqualCompare]:G.LEQUAL,[EqualCompare]:G.EQUAL,[GreaterEqualCompare]:G.GEQUAL,[GreaterCompare]:G.GREATER,[NotEqualCompare]:G.NOTEQUAL};function qe(Qe,He){if(He.type===FloatType&&_.has("OES_texture_float_linear")===!1&&(He.magFilter===LinearFilter||He.magFilter===LinearMipmapNearestFilter||He.magFilter===NearestMipmapLinearFilter||He.magFilter===LinearMipmapLinearFilter||He.minFilter===LinearFilter||He.minFilter===LinearMipmapNearestFilter||He.minFilter===NearestMipmapLinearFilter||He.minFilter===LinearMipmapLinearFilter)&&warn("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),G.texParameteri(Qe,G.TEXTURE_WRAP_S,$e[He.wrapS]),G.texParameteri(Qe,G.TEXTURE_WRAP_T,$e[He.wrapT]),(Qe===G.TEXTURE_3D||Qe===G.TEXTURE_2D_ARRAY)&&G.texParameteri(Qe,G.TEXTURE_WRAP_R,$e[He.wrapR]),G.texParameteri(Qe,G.TEXTURE_MAG_FILTER,Xe[He.magFilter]),G.texParameteri(Qe,G.TEXTURE_MIN_FILTER,Xe[He.minFilter]),He.compareFunction&&(G.texParameteri(Qe,G.TEXTURE_COMPARE_MODE,G.COMPARE_REF_TO_TEXTURE),G.texParameteri(Qe,G.TEXTURE_COMPARE_FUNC,ze[He.compareFunction])),_.has("EXT_texture_filter_anisotropic")===!0){if(He.magFilter===NearestFilter||He.minFilter!==NearestMipmapLinearFilter&&He.minFilter!==LinearMipmapLinearFilter||He.type===FloatType&&_.has("OES_texture_float_linear")===!1)return;if(He.anisotropy>1||Z.get(He).__currentAnisotropy){const _t=_.get("EXT_texture_filter_anisotropic");G.texParameterf(Qe,_t.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(He.anisotropy,Q.getMaxAnisotropy())),Z.get(He).__currentAnisotropy=He.anisotropy}}}function et(Qe,He){let _t=!1;Qe.__webglInit===void 0&&(Qe.__webglInit=!0,He.addEventListener("dispose",Ce));const dt=He.source;let At=ae.get(dt);At===void 0&&(At={},ae.set(dt,At));const Nt=Ge(He);if(Nt!==Qe.__cacheKey){At[Nt]===void 0&&(At[Nt]={texture:G.createTexture(),usedTimes:0},te.memory.textures++,_t=!0),At[Nt].usedTimes++;const fi=At[Qe.__cacheKey];fi!==void 0&&(At[Qe.__cacheKey].usedTimes--,fi.usedTimes===0&&Te(He)),Qe.__cacheKey=Nt,Qe.__webglTexture=At[Nt].texture}return _t}function ot(Qe,He,_t){return Math.floor(Math.floor(Qe/_t)/He)}function St(Qe,He,_t,dt){const Nt=Qe.updateRanges;if(Nt.length===0)J.texSubImage2D(G.TEXTURE_2D,0,0,0,He.width,He.height,_t,dt,He.data);else{Nt.sort((Rt,Pt)=>Rt.start-Pt.start);let fi=0;for(let Rt=1;Rt<Nt.length;Rt++){const Pt=Nt[fi],mt=Nt[Rt],tt=Pt.start+Pt.count,Ze=ot(mt.start,He.width,4),Zt=ot(Pt.start,He.width,4);mt.start<=tt+1&&Ze===Zt&&ot(mt.start+mt.count-1,He.width,4)===Ze?Pt.count=Math.max(Pt.count,mt.start+mt.count-Pt.start):(++fi,Nt[fi]=mt)}Nt.length=fi+1;const Kt=G.getParameter(G.UNPACK_ROW_LENGTH),It=G.getParameter(G.UNPACK_SKIP_PIXELS),Yt=G.getParameter(G.UNPACK_SKIP_ROWS);G.pixelStorei(G.UNPACK_ROW_LENGTH,He.width);for(let Rt=0,Pt=Nt.length;Rt<Pt;Rt++){const mt=Nt[Rt],tt=Math.floor(mt.start/4),Ze=Math.ceil(mt.count/4),Zt=tt%He.width,rt=Math.floor(tt/He.width),Qt=Ze,zt=1;G.pixelStorei(G.UNPACK_SKIP_PIXELS,Zt),G.pixelStorei(G.UNPACK_SKIP_ROWS,rt),J.texSubImage2D(G.TEXTURE_2D,0,Zt,rt,Qt,zt,_t,dt,He.data)}Qe.clearUpdateRanges(),G.pixelStorei(G.UNPACK_ROW_LENGTH,Kt),G.pixelStorei(G.UNPACK_SKIP_PIXELS,It),G.pixelStorei(G.UNPACK_SKIP_ROWS,Yt)}}function it(Qe,He,_t){let dt=G.TEXTURE_2D;(He.isDataArrayTexture||He.isCompressedArrayTexture)&&(dt=G.TEXTURE_2D_ARRAY),He.isData3DTexture&&(dt=G.TEXTURE_3D);const At=et(Qe,He),Nt=He.source;J.bindTexture(dt,Qe.__webglTexture,G.TEXTURE0+_t);const fi=Z.get(Nt);if(Nt.version!==fi.__version||At===!0){J.activeTexture(G.TEXTURE0+_t);const Kt=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),It=He.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(He.colorSpace),Yt=He.colorSpace===NoColorSpace||Kt===It?G.NONE:G.BROWSER_DEFAULT_WEBGL;G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,He.flipY),G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,He.premultiplyAlpha),G.pixelStorei(G.UNPACK_ALIGNMENT,He.unpackAlignment),G.pixelStorei(G.UNPACK_COLORSPACE_CONVERSION_WEBGL,Yt);let Rt=de(He.image,!1,Q.maxTextureSize);Rt=ti(He,Rt);const Pt=ee.convert(He.format,He.colorSpace),mt=ee.convert(He.type);let tt=ye(He.internalFormat,Pt,mt,He.colorSpace,He.isVideoTexture);qe(dt,He);let Ze;const Zt=He.mipmaps,rt=He.isVideoTexture!==!0,Qt=fi.__version===void 0||At===!0,zt=Nt.dataReady,ei=Se(He,Rt);if(He.isDepthTexture)tt=be(He.format===DepthStencilFormat,He.type),Qt&&(rt?J.texStorage2D(G.TEXTURE_2D,1,tt,Rt.width,Rt.height):J.texImage2D(G.TEXTURE_2D,0,tt,Rt.width,Rt.height,0,Pt,mt,null));else if(He.isDataTexture)if(Zt.length>0){rt&&Qt&&J.texStorage2D(G.TEXTURE_2D,ei,tt,Zt[0].width,Zt[0].height);for(let Wt=0,Ft=Zt.length;Wt<Ft;Wt++)Ze=Zt[Wt],rt?zt&&J.texSubImage2D(G.TEXTURE_2D,Wt,0,0,Ze.width,Ze.height,Pt,mt,Ze.data):J.texImage2D(G.TEXTURE_2D,Wt,tt,Ze.width,Ze.height,0,Pt,mt,Ze.data);He.generateMipmaps=!1}else rt?(Qt&&J.texStorage2D(G.TEXTURE_2D,ei,tt,Rt.width,Rt.height),zt&&St(He,Rt,Pt,mt)):J.texImage2D(G.TEXTURE_2D,0,tt,Rt.width,Rt.height,0,Pt,mt,Rt.data);else if(He.isCompressedTexture)if(He.isCompressedArrayTexture){rt&&Qt&&J.texStorage3D(G.TEXTURE_2D_ARRAY,ei,tt,Zt[0].width,Zt[0].height,Rt.depth);for(let Wt=0,Ft=Zt.length;Wt<Ft;Wt++)if(Ze=Zt[Wt],He.format!==RGBAFormat)if(Pt!==null)if(rt){if(zt)if(He.layerUpdates.size>0){const hi=getByteLength(Ze.width,Ze.height,He.format,He.type);for(const pi of He.layerUpdates){const Di=Ze.data.subarray(pi*hi/Ze.data.BYTES_PER_ELEMENT,(pi+1)*hi/Ze.data.BYTES_PER_ELEMENT);J.compressedTexSubImage3D(G.TEXTURE_2D_ARRAY,Wt,0,0,pi,Ze.width,Ze.height,1,Pt,Di)}He.clearLayerUpdates()}else J.compressedTexSubImage3D(G.TEXTURE_2D_ARRAY,Wt,0,0,0,Ze.width,Ze.height,Rt.depth,Pt,Ze.data)}else J.compressedTexImage3D(G.TEXTURE_2D_ARRAY,Wt,tt,Ze.width,Ze.height,Rt.depth,0,Ze.data,0,0);else warn("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else rt?zt&&J.texSubImage3D(G.TEXTURE_2D_ARRAY,Wt,0,0,0,Ze.width,Ze.height,Rt.depth,Pt,mt,Ze.data):J.texImage3D(G.TEXTURE_2D_ARRAY,Wt,tt,Ze.width,Ze.height,Rt.depth,0,Pt,mt,Ze.data)}else{rt&&Qt&&J.texStorage2D(G.TEXTURE_2D,ei,tt,Zt[0].width,Zt[0].height);for(let Wt=0,Ft=Zt.length;Wt<Ft;Wt++)Ze=Zt[Wt],He.format!==RGBAFormat?Pt!==null?rt?zt&&J.compressedTexSubImage2D(G.TEXTURE_2D,Wt,0,0,Ze.width,Ze.height,Pt,Ze.data):J.compressedTexImage2D(G.TEXTURE_2D,Wt,tt,Ze.width,Ze.height,0,Ze.data):warn("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):rt?zt&&J.texSubImage2D(G.TEXTURE_2D,Wt,0,0,Ze.width,Ze.height,Pt,mt,Ze.data):J.texImage2D(G.TEXTURE_2D,Wt,tt,Ze.width,Ze.height,0,Pt,mt,Ze.data)}else if(He.isDataArrayTexture)if(rt){if(Qt&&J.texStorage3D(G.TEXTURE_2D_ARRAY,ei,tt,Rt.width,Rt.height,Rt.depth),zt)if(He.layerUpdates.size>0){const Wt=getByteLength(Rt.width,Rt.height,He.format,He.type);for(const Ft of He.layerUpdates){const hi=Rt.data.subarray(Ft*Wt/Rt.data.BYTES_PER_ELEMENT,(Ft+1)*Wt/Rt.data.BYTES_PER_ELEMENT);J.texSubImage3D(G.TEXTURE_2D_ARRAY,0,0,0,Ft,Rt.width,Rt.height,1,Pt,mt,hi)}He.clearLayerUpdates()}else J.texSubImage3D(G.TEXTURE_2D_ARRAY,0,0,0,0,Rt.width,Rt.height,Rt.depth,Pt,mt,Rt.data)}else J.texImage3D(G.TEXTURE_2D_ARRAY,0,tt,Rt.width,Rt.height,Rt.depth,0,Pt,mt,Rt.data);else if(He.isData3DTexture)rt?(Qt&&J.texStorage3D(G.TEXTURE_3D,ei,tt,Rt.width,Rt.height,Rt.depth),zt&&J.texSubImage3D(G.TEXTURE_3D,0,0,0,0,Rt.width,Rt.height,Rt.depth,Pt,mt,Rt.data)):J.texImage3D(G.TEXTURE_3D,0,tt,Rt.width,Rt.height,Rt.depth,0,Pt,mt,Rt.data);else if(He.isFramebufferTexture){if(Qt)if(rt)J.texStorage2D(G.TEXTURE_2D,ei,tt,Rt.width,Rt.height);else{let Wt=Rt.width,Ft=Rt.height;for(let hi=0;hi<ei;hi++)J.texImage2D(G.TEXTURE_2D,hi,tt,Wt,Ft,0,Pt,mt,null),Wt>>=1,Ft>>=1}}else if(Zt.length>0){if(rt&&Qt){const Wt=di(Zt[0]);J.texStorage2D(G.TEXTURE_2D,ei,tt,Wt.width,Wt.height)}for(let Wt=0,Ft=Zt.length;Wt<Ft;Wt++)Ze=Zt[Wt],rt?zt&&J.texSubImage2D(G.TEXTURE_2D,Wt,0,0,Pt,mt,Ze):J.texImage2D(G.TEXTURE_2D,Wt,tt,Pt,mt,Ze);He.generateMipmaps=!1}else if(rt){if(Qt){const Wt=di(Rt);J.texStorage2D(G.TEXTURE_2D,ei,tt,Wt.width,Wt.height)}zt&&J.texSubImage2D(G.TEXTURE_2D,0,0,0,Pt,mt,Rt)}else J.texImage2D(G.TEXTURE_2D,0,tt,Pt,mt,Rt);me(He)&&fe(dt),fi.__version=Nt.version,He.onUpdate&&He.onUpdate(He)}Qe.__version=He.version}function lt(Qe,He,_t){if(He.image.length!==6)return;const dt=et(Qe,He),At=He.source;J.bindTexture(G.TEXTURE_CUBE_MAP,Qe.__webglTexture,G.TEXTURE0+_t);const Nt=Z.get(At);if(At.version!==Nt.__version||dt===!0){J.activeTexture(G.TEXTURE0+_t);const fi=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),Kt=He.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(He.colorSpace),It=He.colorSpace===NoColorSpace||fi===Kt?G.NONE:G.BROWSER_DEFAULT_WEBGL;G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,He.flipY),G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,He.premultiplyAlpha),G.pixelStorei(G.UNPACK_ALIGNMENT,He.unpackAlignment),G.pixelStorei(G.UNPACK_COLORSPACE_CONVERSION_WEBGL,It);const Yt=He.isCompressedTexture||He.image[0].isCompressedTexture,Rt=He.image[0]&&He.image[0].isDataTexture,Pt=[];for(let Ft=0;Ft<6;Ft++)!Yt&&!Rt?Pt[Ft]=de(He.image[Ft],!0,Q.maxCubemapSize):Pt[Ft]=Rt?He.image[Ft].image:He.image[Ft],Pt[Ft]=ti(He,Pt[Ft]);const mt=Pt[0],tt=ee.convert(He.format,He.colorSpace),Ze=ee.convert(He.type),Zt=ye(He.internalFormat,tt,Ze,He.colorSpace),rt=He.isVideoTexture!==!0,Qt=Nt.__version===void 0||dt===!0,zt=At.dataReady;let ei=Se(He,mt);qe(G.TEXTURE_CUBE_MAP,He);let Wt;if(Yt){rt&&Qt&&J.texStorage2D(G.TEXTURE_CUBE_MAP,ei,Zt,mt.width,mt.height);for(let Ft=0;Ft<6;Ft++){Wt=Pt[Ft].mipmaps;for(let hi=0;hi<Wt.length;hi++){const pi=Wt[hi];He.format!==RGBAFormat?tt!==null?rt?zt&&J.compressedTexSubImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,hi,0,0,pi.width,pi.height,tt,pi.data):J.compressedTexImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,hi,Zt,pi.width,pi.height,0,pi.data):warn("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):rt?zt&&J.texSubImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,hi,0,0,pi.width,pi.height,tt,Ze,pi.data):J.texImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,hi,Zt,pi.width,pi.height,0,tt,Ze,pi.data)}}}else{if(Wt=He.mipmaps,rt&&Qt){Wt.length>0&&ei++;const Ft=di(Pt[0]);J.texStorage2D(G.TEXTURE_CUBE_MAP,ei,Zt,Ft.width,Ft.height)}for(let Ft=0;Ft<6;Ft++)if(Rt){rt?zt&&J.texSubImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,0,0,0,Pt[Ft].width,Pt[Ft].height,tt,Ze,Pt[Ft].data):J.texImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,0,Zt,Pt[Ft].width,Pt[Ft].height,0,tt,Ze,Pt[Ft].data);for(let hi=0;hi<Wt.length;hi++){const Di=Wt[hi].image[Ft].image;rt?zt&&J.texSubImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,hi+1,0,0,Di.width,Di.height,tt,Ze,Di.data):J.texImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,hi+1,Zt,Di.width,Di.height,0,tt,Ze,Di.data)}}else{rt?zt&&J.texSubImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,0,0,0,tt,Ze,Pt[Ft]):J.texImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,0,Zt,tt,Ze,Pt[Ft]);for(let hi=0;hi<Wt.length;hi++){const pi=Wt[hi];rt?zt&&J.texSubImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,hi+1,0,0,tt,Ze,pi.image[Ft]):J.texImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,hi+1,Zt,tt,Ze,pi.image[Ft])}}}me(He)&&fe(G.TEXTURE_CUBE_MAP),Nt.__version=At.version,He.onUpdate&&He.onUpdate(He)}Qe.__version=He.version}function gt(Qe,He,_t,dt,At,Nt){const fi=ee.convert(_t.format,_t.colorSpace),Kt=ee.convert(_t.type),It=ye(_t.internalFormat,fi,Kt,_t.colorSpace),Yt=Z.get(He),Rt=Z.get(_t);if(Rt.__renderTarget=He,!Yt.__hasExternalTextures){const Pt=Math.max(1,He.width>>Nt),mt=Math.max(1,He.height>>Nt);At===G.TEXTURE_3D||At===G.TEXTURE_2D_ARRAY?J.texImage3D(At,Nt,It,Pt,mt,He.depth,0,fi,Kt,null):J.texImage2D(At,Nt,It,Pt,mt,0,fi,Kt,null)}J.bindFramebuffer(G.FRAMEBUFFER,Qe),jt(He)?ne.framebufferTexture2DMultisampleEXT(G.FRAMEBUFFER,dt,At,Rt.__webglTexture,0,Lt(He)):(At===G.TEXTURE_2D||At>=G.TEXTURE_CUBE_MAP_POSITIVE_X&&At<=G.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&G.framebufferTexture2D(G.FRAMEBUFFER,dt,At,Rt.__webglTexture,Nt),J.bindFramebuffer(G.FRAMEBUFFER,null)}function kt(Qe,He,_t){if(G.bindRenderbuffer(G.RENDERBUFFER,Qe),He.depthBuffer){const dt=He.depthTexture,At=dt&&dt.isDepthTexture?dt.type:null,Nt=be(He.stencilBuffer,At),fi=He.stencilBuffer?G.DEPTH_STENCIL_ATTACHMENT:G.DEPTH_ATTACHMENT,Kt=Lt(He);jt(He)?ne.renderbufferStorageMultisampleEXT(G.RENDERBUFFER,Kt,Nt,He.width,He.height):_t?G.renderbufferStorageMultisample(G.RENDERBUFFER,Kt,Nt,He.width,He.height):G.renderbufferStorage(G.RENDERBUFFER,Nt,He.width,He.height),G.framebufferRenderbuffer(G.FRAMEBUFFER,fi,G.RENDERBUFFER,Qe)}else{const dt=He.textures;for(let At=0;At<dt.length;At++){const Nt=dt[At],fi=ee.convert(Nt.format,Nt.colorSpace),Kt=ee.convert(Nt.type),It=ye(Nt.internalFormat,fi,Kt,Nt.colorSpace),Yt=Lt(He);_t&&jt(He)===!1?G.renderbufferStorageMultisample(G.RENDERBUFFER,Yt,It,He.width,He.height):jt(He)?ne.renderbufferStorageMultisampleEXT(G.RENDERBUFFER,Yt,It,He.width,He.height):G.renderbufferStorage(G.RENDERBUFFER,It,He.width,He.height)}}G.bindRenderbuffer(G.RENDERBUFFER,null)}function Jt(Qe,He){if(He&&He.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(J.bindFramebuffer(G.FRAMEBUFFER,Qe),!(He.depthTexture&&He.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const dt=Z.get(He.depthTexture);dt.__renderTarget=He,(!dt.__webglTexture||He.depthTexture.image.width!==He.width||He.depthTexture.image.height!==He.height)&&(He.depthTexture.image.width=He.width,He.depthTexture.image.height=He.height,He.depthTexture.needsUpdate=!0),Ye(He.depthTexture,0);const At=dt.__webglTexture,Nt=Lt(He);if(He.depthTexture.format===DepthFormat)jt(He)?ne.framebufferTexture2DMultisampleEXT(G.FRAMEBUFFER,G.DEPTH_ATTACHMENT,G.TEXTURE_2D,At,0,Nt):G.framebufferTexture2D(G.FRAMEBUFFER,G.DEPTH_ATTACHMENT,G.TEXTURE_2D,At,0);else if(He.depthTexture.format===DepthStencilFormat)jt(He)?ne.framebufferTexture2DMultisampleEXT(G.FRAMEBUFFER,G.DEPTH_STENCIL_ATTACHMENT,G.TEXTURE_2D,At,0,Nt):G.framebufferTexture2D(G.FRAMEBUFFER,G.DEPTH_STENCIL_ATTACHMENT,G.TEXTURE_2D,At,0);else throw new Error("Unknown depthTexture format")}function li(Qe){const He=Z.get(Qe),_t=Qe.isWebGLCubeRenderTarget===!0;if(He.__boundDepthTexture!==Qe.depthTexture){const dt=Qe.depthTexture;if(He.__depthDisposeCallback&&He.__depthDisposeCallback(),dt){const At=()=>{delete He.__boundDepthTexture,delete He.__depthDisposeCallback,dt.removeEventListener("dispose",At)};dt.addEventListener("dispose",At),He.__depthDisposeCallback=At}He.__boundDepthTexture=dt}if(Qe.depthTexture&&!He.__autoAllocateDepthBuffer){if(_t)throw new Error("target.depthTexture not supported in Cube render targets");const dt=Qe.texture.mipmaps;dt&&dt.length>0?Jt(He.__webglFramebuffer[0],Qe):Jt(He.__webglFramebuffer,Qe)}else if(_t){He.__webglDepthbuffer=[];for(let dt=0;dt<6;dt++)if(J.bindFramebuffer(G.FRAMEBUFFER,He.__webglFramebuffer[dt]),He.__webglDepthbuffer[dt]===void 0)He.__webglDepthbuffer[dt]=G.createRenderbuffer(),kt(He.__webglDepthbuffer[dt],Qe,!1);else{const At=Qe.stencilBuffer?G.DEPTH_STENCIL_ATTACHMENT:G.DEPTH_ATTACHMENT,Nt=He.__webglDepthbuffer[dt];G.bindRenderbuffer(G.RENDERBUFFER,Nt),G.framebufferRenderbuffer(G.FRAMEBUFFER,At,G.RENDERBUFFER,Nt)}}else{const dt=Qe.texture.mipmaps;if(dt&&dt.length>0?J.bindFramebuffer(G.FRAMEBUFFER,He.__webglFramebuffer[0]):J.bindFramebuffer(G.FRAMEBUFFER,He.__webglFramebuffer),He.__webglDepthbuffer===void 0)He.__webglDepthbuffer=G.createRenderbuffer(),kt(He.__webglDepthbuffer,Qe,!1);else{const At=Qe.stencilBuffer?G.DEPTH_STENCIL_ATTACHMENT:G.DEPTH_ATTACHMENT,Nt=He.__webglDepthbuffer;G.bindRenderbuffer(G.RENDERBUFFER,Nt),G.framebufferRenderbuffer(G.FRAMEBUFFER,At,G.RENDERBUFFER,Nt)}}J.bindFramebuffer(G.FRAMEBUFFER,null)}function si(Qe,He,_t){const dt=Z.get(Qe);He!==void 0&&gt(dt.__webglFramebuffer,Qe,Qe.texture,G.COLOR_ATTACHMENT0,G.TEXTURE_2D,0),_t!==void 0&&li(Qe)}function qt(Qe){const He=Qe.texture,_t=Z.get(Qe),dt=Z.get(He);Qe.addEventListener("dispose",Me);const At=Qe.textures,Nt=Qe.isWebGLCubeRenderTarget===!0,fi=At.length>1;if(fi||(dt.__webglTexture===void 0&&(dt.__webglTexture=G.createTexture()),dt.__version=He.version,te.memory.textures++),Nt){_t.__webglFramebuffer=[];for(let Kt=0;Kt<6;Kt++)if(He.mipmaps&&He.mipmaps.length>0){_t.__webglFramebuffer[Kt]=[];for(let It=0;It<He.mipmaps.length;It++)_t.__webglFramebuffer[Kt][It]=G.createFramebuffer()}else _t.__webglFramebuffer[Kt]=G.createFramebuffer()}else{if(He.mipmaps&&He.mipmaps.length>0){_t.__webglFramebuffer=[];for(let Kt=0;Kt<He.mipmaps.length;Kt++)_t.__webglFramebuffer[Kt]=G.createFramebuffer()}else _t.__webglFramebuffer=G.createFramebuffer();if(fi)for(let Kt=0,It=At.length;Kt<It;Kt++){const Yt=Z.get(At[Kt]);Yt.__webglTexture===void 0&&(Yt.__webglTexture=G.createTexture(),te.memory.textures++)}if(Qe.samples>0&&jt(Qe)===!1){_t.__webglMultisampledFramebuffer=G.createFramebuffer(),_t.__webglColorRenderbuffer=[],J.bindFramebuffer(G.FRAMEBUFFER,_t.__webglMultisampledFramebuffer);for(let Kt=0;Kt<At.length;Kt++){const It=At[Kt];_t.__webglColorRenderbuffer[Kt]=G.createRenderbuffer(),G.bindRenderbuffer(G.RENDERBUFFER,_t.__webglColorRenderbuffer[Kt]);const Yt=ee.convert(It.format,It.colorSpace),Rt=ee.convert(It.type),Pt=ye(It.internalFormat,Yt,Rt,It.colorSpace,Qe.isXRRenderTarget===!0),mt=Lt(Qe);G.renderbufferStorageMultisample(G.RENDERBUFFER,mt,Pt,Qe.width,Qe.height),G.framebufferRenderbuffer(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0+Kt,G.RENDERBUFFER,_t.__webglColorRenderbuffer[Kt])}G.bindRenderbuffer(G.RENDERBUFFER,null),Qe.depthBuffer&&(_t.__webglDepthRenderbuffer=G.createRenderbuffer(),kt(_t.__webglDepthRenderbuffer,Qe,!0)),J.bindFramebuffer(G.FRAMEBUFFER,null)}}if(Nt){J.bindTexture(G.TEXTURE_CUBE_MAP,dt.__webglTexture),qe(G.TEXTURE_CUBE_MAP,He);for(let Kt=0;Kt<6;Kt++)if(He.mipmaps&&He.mipmaps.length>0)for(let It=0;It<He.mipmaps.length;It++)gt(_t.__webglFramebuffer[Kt][It],Qe,He,G.COLOR_ATTACHMENT0,G.TEXTURE_CUBE_MAP_POSITIVE_X+Kt,It);else gt(_t.__webglFramebuffer[Kt],Qe,He,G.COLOR_ATTACHMENT0,G.TEXTURE_CUBE_MAP_POSITIVE_X+Kt,0);me(He)&&fe(G.TEXTURE_CUBE_MAP),J.unbindTexture()}else if(fi){for(let Kt=0,It=At.length;Kt<It;Kt++){const Yt=At[Kt],Rt=Z.get(Yt);let Pt=G.TEXTURE_2D;(Qe.isWebGL3DRenderTarget||Qe.isWebGLArrayRenderTarget)&&(Pt=Qe.isWebGL3DRenderTarget?G.TEXTURE_3D:G.TEXTURE_2D_ARRAY),J.bindTexture(Pt,Rt.__webglTexture),qe(Pt,Yt),gt(_t.__webglFramebuffer,Qe,Yt,G.COLOR_ATTACHMENT0+Kt,Pt,0),me(Yt)&&fe(Pt)}J.unbindTexture()}else{let Kt=G.TEXTURE_2D;if((Qe.isWebGL3DRenderTarget||Qe.isWebGLArrayRenderTarget)&&(Kt=Qe.isWebGL3DRenderTarget?G.TEXTURE_3D:G.TEXTURE_2D_ARRAY),J.bindTexture(Kt,dt.__webglTexture),qe(Kt,He),He.mipmaps&&He.mipmaps.length>0)for(let It=0;It<He.mipmaps.length;It++)gt(_t.__webglFramebuffer[It],Qe,He,G.COLOR_ATTACHMENT0,Kt,It);else gt(_t.__webglFramebuffer,Qe,He,G.COLOR_ATTACHMENT0,Kt,0);me(He)&&fe(Kt),J.unbindTexture()}Qe.depthBuffer&&li(Qe)}function vt(Qe){const He=Qe.textures;for(let _t=0,dt=He.length;_t<dt;_t++){const At=He[_t];if(me(At)){const Nt=_e(Qe),fi=Z.get(At).__webglTexture;J.bindTexture(Nt,fi),fe(Nt),J.unbindTexture()}}}const Ke=[],Tt=[];function Ut(Qe){if(Qe.samples>0){if(jt(Qe)===!1){const He=Qe.textures,_t=Qe.width,dt=Qe.height;let At=G.COLOR_BUFFER_BIT;const Nt=Qe.stencilBuffer?G.DEPTH_STENCIL_ATTACHMENT:G.DEPTH_ATTACHMENT,fi=Z.get(Qe),Kt=He.length>1;if(Kt)for(let Yt=0;Yt<He.length;Yt++)J.bindFramebuffer(G.FRAMEBUFFER,fi.__webglMultisampledFramebuffer),G.framebufferRenderbuffer(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0+Yt,G.RENDERBUFFER,null),J.bindFramebuffer(G.FRAMEBUFFER,fi.__webglFramebuffer),G.framebufferTexture2D(G.DRAW_FRAMEBUFFER,G.COLOR_ATTACHMENT0+Yt,G.TEXTURE_2D,null,0);J.bindFramebuffer(G.READ_FRAMEBUFFER,fi.__webglMultisampledFramebuffer);const It=Qe.texture.mipmaps;It&&It.length>0?J.bindFramebuffer(G.DRAW_FRAMEBUFFER,fi.__webglFramebuffer[0]):J.bindFramebuffer(G.DRAW_FRAMEBUFFER,fi.__webglFramebuffer);for(let Yt=0;Yt<He.length;Yt++){if(Qe.resolveDepthBuffer&&(Qe.depthBuffer&&(At|=G.DEPTH_BUFFER_BIT),Qe.stencilBuffer&&Qe.resolveStencilBuffer&&(At|=G.STENCIL_BUFFER_BIT)),Kt){G.framebufferRenderbuffer(G.READ_FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.RENDERBUFFER,fi.__webglColorRenderbuffer[Yt]);const Rt=Z.get(He[Yt]).__webglTexture;G.framebufferTexture2D(G.DRAW_FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.TEXTURE_2D,Rt,0)}G.blitFramebuffer(0,0,_t,dt,0,0,_t,dt,At,G.NEAREST),ie===!0&&(Ke.length=0,Tt.length=0,Ke.push(G.COLOR_ATTACHMENT0+Yt),Qe.depthBuffer&&Qe.resolveDepthBuffer===!1&&(Ke.push(Nt),Tt.push(Nt),G.invalidateFramebuffer(G.DRAW_FRAMEBUFFER,Tt)),G.invalidateFramebuffer(G.READ_FRAMEBUFFER,Ke))}if(J.bindFramebuffer(G.READ_FRAMEBUFFER,null),J.bindFramebuffer(G.DRAW_FRAMEBUFFER,null),Kt)for(let Yt=0;Yt<He.length;Yt++){J.bindFramebuffer(G.FRAMEBUFFER,fi.__webglMultisampledFramebuffer),G.framebufferRenderbuffer(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0+Yt,G.RENDERBUFFER,fi.__webglColorRenderbuffer[Yt]);const Rt=Z.get(He[Yt]).__webglTexture;J.bindFramebuffer(G.FRAMEBUFFER,fi.__webglFramebuffer),G.framebufferTexture2D(G.DRAW_FRAMEBUFFER,G.COLOR_ATTACHMENT0+Yt,G.TEXTURE_2D,Rt,0)}J.bindFramebuffer(G.DRAW_FRAMEBUFFER,fi.__webglMultisampledFramebuffer)}else if(Qe.depthBuffer&&Qe.resolveDepthBuffer===!1&&ie){const He=Qe.stencilBuffer?G.DEPTH_STENCIL_ATTACHMENT:G.DEPTH_ATTACHMENT;G.invalidateFramebuffer(G.DRAW_FRAMEBUFFER,[He])}}}function Lt(Qe){return Math.min(Q.maxSamples,Qe.samples)}function jt(Qe){const He=Z.get(Qe);return Qe.samples>0&&_.has("WEBGL_multisampled_render_to_texture")===!0&&He.__useRenderToTexture!==!1}function ri(Qe){const He=te.render.frame;oe.get(Qe)!==He&&(oe.set(Qe,He),Qe.update())}function ti(Qe,He){const _t=Qe.colorSpace,dt=Qe.format,At=Qe.type;return Qe.isCompressedTexture===!0||Qe.isVideoTexture===!0||_t!==LinearSRGBColorSpace&&_t!==NoColorSpace&&(ColorManagement.getTransfer(_t)===SRGBTransfer?(dt!==RGBAFormat||At!==UnsignedByteType)&&warn("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):error("WebGLTextures: Unsupported texture color space:",_t)),He}function di(Qe){return typeof HTMLImageElement<"u"&&Qe instanceof HTMLImageElement?(re.width=Qe.naturalWidth||Qe.width,re.height=Qe.naturalHeight||Qe.height):typeof VideoFrame<"u"&&Qe instanceof VideoFrame?(re.width=Qe.displayWidth,re.height=Qe.displayHeight):(re.width=Qe.width,re.height=Qe.height),re}this.allocateTextureUnit=Ue,this.resetTextureUnits=Le,this.setTexture2D=Ye,this.setTexture2DArray=ke,this.setTexture3D=Fe,this.setTextureCube=Ve,this.rebindTextures=si,this.setupRenderTarget=qt,this.updateRenderTargetMipmap=vt,this.updateMultisampleRenderTarget=Ut,this.setupDepthRenderbuffer=li,this.setupFrameBufferTexture=gt,this.useMultisampledRTT=jt}function WebGLUtils(G,_){function J(Z,Q=NoColorSpace){let ee;const te=ColorManagement.getTransfer(Q);if(Z===UnsignedByteType)return G.UNSIGNED_BYTE;if(Z===UnsignedShort4444Type)return G.UNSIGNED_SHORT_4_4_4_4;if(Z===UnsignedShort5551Type)return G.UNSIGNED_SHORT_5_5_5_1;if(Z===UnsignedInt5999Type)return G.UNSIGNED_INT_5_9_9_9_REV;if(Z===UnsignedInt101111Type)return G.UNSIGNED_INT_10F_11F_11F_REV;if(Z===ByteType)return G.BYTE;if(Z===ShortType)return G.SHORT;if(Z===UnsignedShortType)return G.UNSIGNED_SHORT;if(Z===IntType)return G.INT;if(Z===UnsignedIntType)return G.UNSIGNED_INT;if(Z===FloatType)return G.FLOAT;if(Z===HalfFloatType)return G.HALF_FLOAT;if(Z===AlphaFormat)return G.ALPHA;if(Z===RGBFormat)return G.RGB;if(Z===RGBAFormat)return G.RGBA;if(Z===DepthFormat)return G.DEPTH_COMPONENT;if(Z===DepthStencilFormat)return G.DEPTH_STENCIL;if(Z===RedFormat)return G.RED;if(Z===RedIntegerFormat)return G.RED_INTEGER;if(Z===RGFormat)return G.RG;if(Z===RGIntegerFormat)return G.RG_INTEGER;if(Z===RGBAIntegerFormat)return G.RGBA_INTEGER;if(Z===RGB_S3TC_DXT1_Format||Z===RGBA_S3TC_DXT1_Format||Z===RGBA_S3TC_DXT3_Format||Z===RGBA_S3TC_DXT5_Format)if(te===SRGBTransfer)if(ee=_.get("WEBGL_compressed_texture_s3tc_srgb"),ee!==null){if(Z===RGB_S3TC_DXT1_Format)return ee.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(Z===RGBA_S3TC_DXT1_Format)return ee.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(Z===RGBA_S3TC_DXT3_Format)return ee.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(Z===RGBA_S3TC_DXT5_Format)return ee.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(ee=_.get("WEBGL_compressed_texture_s3tc"),ee!==null){if(Z===RGB_S3TC_DXT1_Format)return ee.COMPRESSED_RGB_S3TC_DXT1_EXT;if(Z===RGBA_S3TC_DXT1_Format)return ee.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(Z===RGBA_S3TC_DXT3_Format)return ee.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(Z===RGBA_S3TC_DXT5_Format)return ee.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(Z===RGB_PVRTC_4BPPV1_Format||Z===RGB_PVRTC_2BPPV1_Format||Z===RGBA_PVRTC_4BPPV1_Format||Z===RGBA_PVRTC_2BPPV1_Format)if(ee=_.get("WEBGL_compressed_texture_pvrtc"),ee!==null){if(Z===RGB_PVRTC_4BPPV1_Format)return ee.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(Z===RGB_PVRTC_2BPPV1_Format)return ee.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(Z===RGBA_PVRTC_4BPPV1_Format)return ee.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(Z===RGBA_PVRTC_2BPPV1_Format)return ee.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(Z===RGB_ETC1_Format||Z===RGB_ETC2_Format||Z===RGBA_ETC2_EAC_Format)if(ee=_.get("WEBGL_compressed_texture_etc"),ee!==null){if(Z===RGB_ETC1_Format||Z===RGB_ETC2_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ETC2:ee.COMPRESSED_RGB8_ETC2;if(Z===RGBA_ETC2_EAC_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:ee.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(Z===RGBA_ASTC_4x4_Format||Z===RGBA_ASTC_5x4_Format||Z===RGBA_ASTC_5x5_Format||Z===RGBA_ASTC_6x5_Format||Z===RGBA_ASTC_6x6_Format||Z===RGBA_ASTC_8x5_Format||Z===RGBA_ASTC_8x6_Format||Z===RGBA_ASTC_8x8_Format||Z===RGBA_ASTC_10x5_Format||Z===RGBA_ASTC_10x6_Format||Z===RGBA_ASTC_10x8_Format||Z===RGBA_ASTC_10x10_Format||Z===RGBA_ASTC_12x10_Format||Z===RGBA_ASTC_12x12_Format)if(ee=_.get("WEBGL_compressed_texture_astc"),ee!==null){if(Z===RGBA_ASTC_4x4_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:ee.COMPRESSED_RGBA_ASTC_4x4_KHR;if(Z===RGBA_ASTC_5x4_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:ee.COMPRESSED_RGBA_ASTC_5x4_KHR;if(Z===RGBA_ASTC_5x5_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:ee.COMPRESSED_RGBA_ASTC_5x5_KHR;if(Z===RGBA_ASTC_6x5_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:ee.COMPRESSED_RGBA_ASTC_6x5_KHR;if(Z===RGBA_ASTC_6x6_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:ee.COMPRESSED_RGBA_ASTC_6x6_KHR;if(Z===RGBA_ASTC_8x5_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:ee.COMPRESSED_RGBA_ASTC_8x5_KHR;if(Z===RGBA_ASTC_8x6_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:ee.COMPRESSED_RGBA_ASTC_8x6_KHR;if(Z===RGBA_ASTC_8x8_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:ee.COMPRESSED_RGBA_ASTC_8x8_KHR;if(Z===RGBA_ASTC_10x5_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:ee.COMPRESSED_RGBA_ASTC_10x5_KHR;if(Z===RGBA_ASTC_10x6_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:ee.COMPRESSED_RGBA_ASTC_10x6_KHR;if(Z===RGBA_ASTC_10x8_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:ee.COMPRESSED_RGBA_ASTC_10x8_KHR;if(Z===RGBA_ASTC_10x10_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:ee.COMPRESSED_RGBA_ASTC_10x10_KHR;if(Z===RGBA_ASTC_12x10_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:ee.COMPRESSED_RGBA_ASTC_12x10_KHR;if(Z===RGBA_ASTC_12x12_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:ee.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(Z===RGBA_BPTC_Format||Z===RGB_BPTC_SIGNED_Format||Z===RGB_BPTC_UNSIGNED_Format)if(ee=_.get("EXT_texture_compression_bptc"),ee!==null){if(Z===RGBA_BPTC_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:ee.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(Z===RGB_BPTC_SIGNED_Format)return ee.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(Z===RGB_BPTC_UNSIGNED_Format)return ee.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(Z===RED_RGTC1_Format||Z===SIGNED_RED_RGTC1_Format||Z===RED_GREEN_RGTC2_Format||Z===SIGNED_RED_GREEN_RGTC2_Format)if(ee=_.get("EXT_texture_compression_rgtc"),ee!==null){if(Z===RED_RGTC1_Format)return ee.COMPRESSED_RED_RGTC1_EXT;if(Z===SIGNED_RED_RGTC1_Format)return ee.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(Z===RED_GREEN_RGTC2_Format)return ee.COMPRESSED_RED_GREEN_RGTC2_EXT;if(Z===SIGNED_RED_GREEN_RGTC2_Format)return ee.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return Z===UnsignedInt248Type?G.UNSIGNED_INT_24_8:G[Z]!==void 0?G[Z]:null}return{convert:J}}const _occlusion_vertex=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,_occlusion_fragment=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class WebXRDepthSensing{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(_,J){if(this.texture===null){const Z=new ExternalTexture(_.texture);(_.depthNear!==J.depthNear||_.depthFar!==J.depthFar)&&(this.depthNear=_.depthNear,this.depthFar=_.depthFar),this.texture=Z}}getMesh(_){if(this.texture!==null&&this.mesh===null){const J=_.cameras[0].viewport,Z=new ShaderMaterial({vertexShader:_occlusion_vertex,fragmentShader:_occlusion_fragment,uniforms:{depthColor:{value:this.texture},depthWidth:{value:J.z},depthHeight:{value:J.w}}});this.mesh=new Mesh(new PlaneGeometry(20,20),Z)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class WebXRManager extends EventDispatcher$1{constructor(_,J){super();const Z=this;let Q=null,ee=1,te=null,ne="local-floor",ie=1,re=null,oe=null,se=null,ae=null,ce=null,ue=null;const de=typeof XRWebGLBinding<"u",me=new WebXRDepthSensing,fe={},_e=J.getContextAttributes();let ye=null,be=null;const Se=[],Ce=[],Me=new Vector2;let Re=null;const Te=new PerspectiveCamera;Te.viewport=new Vector4;const Ee=new PerspectiveCamera;Ee.viewport=new Vector4;const De=[Te,Ee],Le=new ArrayCamera;let Ue=null,Ge=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(it){let lt=Se[it];return lt===void 0&&(lt=new WebXRController,Se[it]=lt),lt.getTargetRaySpace()},this.getControllerGrip=function(it){let lt=Se[it];return lt===void 0&&(lt=new WebXRController,Se[it]=lt),lt.getGripSpace()},this.getHand=function(it){let lt=Se[it];return lt===void 0&&(lt=new WebXRController,Se[it]=lt),lt.getHandSpace()};function Ye(it){const lt=Ce.indexOf(it.inputSource);if(lt===-1)return;const gt=Se[lt];gt!==void 0&&(gt.update(it.inputSource,it.frame,re||te),gt.dispatchEvent({type:it.type,data:it.inputSource}))}function ke(){Q.removeEventListener("select",Ye),Q.removeEventListener("selectstart",Ye),Q.removeEventListener("selectend",Ye),Q.removeEventListener("squeeze",Ye),Q.removeEventListener("squeezestart",Ye),Q.removeEventListener("squeezeend",Ye),Q.removeEventListener("end",ke),Q.removeEventListener("inputsourceschange",Fe);for(let it=0;it<Se.length;it++){const lt=Ce[it];lt!==null&&(Ce[it]=null,Se[it].disconnect(lt))}Ue=null,Ge=null,me.reset();for(const it in fe)delete fe[it];_.setRenderTarget(ye),ce=null,ae=null,se=null,Q=null,be=null,St.stop(),Z.isPresenting=!1,_.setPixelRatio(Re),_.setSize(Me.width,Me.height,!1),Z.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(it){ee=it,Z.isPresenting===!0&&warn("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(it){ne=it,Z.isPresenting===!0&&warn("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return re||te},this.setReferenceSpace=function(it){re=it},this.getBaseLayer=function(){return ae!==null?ae:ce},this.getBinding=function(){return se===null&&de&&(se=new XRWebGLBinding(Q,J)),se},this.getFrame=function(){return ue},this.getSession=function(){return Q},this.setSession=async function(it){if(Q=it,Q!==null){if(ye=_.getRenderTarget(),Q.addEventListener("select",Ye),Q.addEventListener("selectstart",Ye),Q.addEventListener("selectend",Ye),Q.addEventListener("squeeze",Ye),Q.addEventListener("squeezestart",Ye),Q.addEventListener("squeezeend",Ye),Q.addEventListener("end",ke),Q.addEventListener("inputsourceschange",Fe),_e.xrCompatible!==!0&&await J.makeXRCompatible(),Re=_.getPixelRatio(),_.getSize(Me),de&&"createProjectionLayer"in XRWebGLBinding.prototype){let gt=null,kt=null,Jt=null;_e.depth&&(Jt=_e.stencil?J.DEPTH24_STENCIL8:J.DEPTH_COMPONENT24,gt=_e.stencil?DepthStencilFormat:DepthFormat,kt=_e.stencil?UnsignedInt248Type:UnsignedIntType);const li={colorFormat:J.RGBA8,depthFormat:Jt,scaleFactor:ee};se=this.getBinding(),ae=se.createProjectionLayer(li),Q.updateRenderState({layers:[ae]}),_.setPixelRatio(1),_.setSize(ae.textureWidth,ae.textureHeight,!1),be=new WebGLRenderTarget(ae.textureWidth,ae.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(ae.textureWidth,ae.textureHeight,kt,void 0,void 0,void 0,void 0,void 0,void 0,gt),stencilBuffer:_e.stencil,colorSpace:_.outputColorSpace,samples:_e.antialias?4:0,resolveDepthBuffer:ae.ignoreDepthValues===!1,resolveStencilBuffer:ae.ignoreDepthValues===!1})}else{const gt={antialias:_e.antialias,alpha:!0,depth:_e.depth,stencil:_e.stencil,framebufferScaleFactor:ee};ce=new XRWebGLLayer(Q,J,gt),Q.updateRenderState({baseLayer:ce}),_.setPixelRatio(1),_.setSize(ce.framebufferWidth,ce.framebufferHeight,!1),be=new WebGLRenderTarget(ce.framebufferWidth,ce.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,colorSpace:_.outputColorSpace,stencilBuffer:_e.stencil,resolveDepthBuffer:ce.ignoreDepthValues===!1,resolveStencilBuffer:ce.ignoreDepthValues===!1})}be.isXRRenderTarget=!0,this.setFoveation(ie),re=null,te=await Q.requestReferenceSpace(ne),St.setContext(Q),St.start(),Z.isPresenting=!0,Z.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(Q!==null)return Q.environmentBlendMode},this.getDepthTexture=function(){return me.getDepthTexture()};function Fe(it){for(let lt=0;lt<it.removed.length;lt++){const gt=it.removed[lt],kt=Ce.indexOf(gt);kt>=0&&(Ce[kt]=null,Se[kt].disconnect(gt))}for(let lt=0;lt<it.added.length;lt++){const gt=it.added[lt];let kt=Ce.indexOf(gt);if(kt===-1){for(let li=0;li<Se.length;li++)if(li>=Ce.length){Ce.push(gt),kt=li;break}else if(Ce[li]===null){Ce[li]=gt,kt=li;break}if(kt===-1)break}const Jt=Se[kt];Jt&&Jt.connect(gt)}}const Ve=new Vector3,$e=new Vector3;function Xe(it,lt,gt){Ve.setFromMatrixPosition(lt.matrixWorld),$e.setFromMatrixPosition(gt.matrixWorld);const kt=Ve.distanceTo($e),Jt=lt.projectionMatrix.elements,li=gt.projectionMatrix.elements,si=Jt[14]/(Jt[10]-1),qt=Jt[14]/(Jt[10]+1),vt=(Jt[9]+1)/Jt[5],Ke=(Jt[9]-1)/Jt[5],Tt=(Jt[8]-1)/Jt[0],Ut=(li[8]+1)/li[0],Lt=si*Tt,jt=si*Ut,ri=kt/(-Tt+Ut),ti=ri*-Tt;if(lt.matrixWorld.decompose(it.position,it.quaternion,it.scale),it.translateX(ti),it.translateZ(ri),it.matrixWorld.compose(it.position,it.quaternion,it.scale),it.matrixWorldInverse.copy(it.matrixWorld).invert(),Jt[10]===-1)it.projectionMatrix.copy(lt.projectionMatrix),it.projectionMatrixInverse.copy(lt.projectionMatrixInverse);else{const di=si+ri,Qe=qt+ri,He=Lt-ti,_t=jt+(kt-ti),dt=vt*qt/Qe*di,At=Ke*qt/Qe*di;it.projectionMatrix.makePerspective(He,_t,dt,At,di,Qe),it.projectionMatrixInverse.copy(it.projectionMatrix).invert()}}function ze(it,lt){lt===null?it.matrixWorld.copy(it.matrix):it.matrixWorld.multiplyMatrices(lt.matrixWorld,it.matrix),it.matrixWorldInverse.copy(it.matrixWorld).invert()}this.updateCamera=function(it){if(Q===null)return;let lt=it.near,gt=it.far;me.texture!==null&&(me.depthNear>0&&(lt=me.depthNear),me.depthFar>0&&(gt=me.depthFar)),Le.near=Ee.near=Te.near=lt,Le.far=Ee.far=Te.far=gt,(Ue!==Le.near||Ge!==Le.far)&&(Q.updateRenderState({depthNear:Le.near,depthFar:Le.far}),Ue=Le.near,Ge=Le.far),Le.layers.mask=it.layers.mask|6,Te.layers.mask=Le.layers.mask&3,Ee.layers.mask=Le.layers.mask&5;const kt=it.parent,Jt=Le.cameras;ze(Le,kt);for(let li=0;li<Jt.length;li++)ze(Jt[li],kt);Jt.length===2?Xe(Le,Te,Ee):Le.projectionMatrix.copy(Te.projectionMatrix),qe(it,Le,kt)};function qe(it,lt,gt){gt===null?it.matrix.copy(lt.matrixWorld):(it.matrix.copy(gt.matrixWorld),it.matrix.invert(),it.matrix.multiply(lt.matrixWorld)),it.matrix.decompose(it.position,it.quaternion,it.scale),it.updateMatrixWorld(!0),it.projectionMatrix.copy(lt.projectionMatrix),it.projectionMatrixInverse.copy(lt.projectionMatrixInverse),it.isPerspectiveCamera&&(it.fov=RAD2DEG*2*Math.atan(1/it.projectionMatrix.elements[5]),it.zoom=1)}this.getCamera=function(){return Le},this.getFoveation=function(){if(!(ae===null&&ce===null))return ie},this.setFoveation=function(it){ie=it,ae!==null&&(ae.fixedFoveation=it),ce!==null&&ce.fixedFoveation!==void 0&&(ce.fixedFoveation=it)},this.hasDepthSensing=function(){return me.texture!==null},this.getDepthSensingMesh=function(){return me.getMesh(Le)},this.getCameraTexture=function(it){return fe[it]};let et=null;function ot(it,lt){if(oe=lt.getViewerPose(re||te),ue=lt,oe!==null){const gt=oe.views;ce!==null&&(_.setRenderTargetFramebuffer(be,ce.framebuffer),_.setRenderTarget(be));let kt=!1;gt.length!==Le.cameras.length&&(Le.cameras.length=0,kt=!0);for(let qt=0;qt<gt.length;qt++){const vt=gt[qt];let Ke=null;if(ce!==null)Ke=ce.getViewport(vt);else{const Ut=se.getViewSubImage(ae,vt);Ke=Ut.viewport,qt===0&&(_.setRenderTargetTextures(be,Ut.colorTexture,Ut.depthStencilTexture),_.setRenderTarget(be))}let Tt=De[qt];Tt===void 0&&(Tt=new PerspectiveCamera,Tt.layers.enable(qt),Tt.viewport=new Vector4,De[qt]=Tt),Tt.matrix.fromArray(vt.transform.matrix),Tt.matrix.decompose(Tt.position,Tt.quaternion,Tt.scale),Tt.projectionMatrix.fromArray(vt.projectionMatrix),Tt.projectionMatrixInverse.copy(Tt.projectionMatrix).invert(),Tt.viewport.set(Ke.x,Ke.y,Ke.width,Ke.height),qt===0&&(Le.matrix.copy(Tt.matrix),Le.matrix.decompose(Le.position,Le.quaternion,Le.scale)),kt===!0&&Le.cameras.push(Tt)}const Jt=Q.enabledFeatures;if(Jt&&Jt.includes("depth-sensing")&&Q.depthUsage=="gpu-optimized"&&de){se=Z.getBinding();const qt=se.getDepthInformation(gt[0]);qt&&qt.isValid&&qt.texture&&me.init(qt,Q.renderState)}if(Jt&&Jt.includes("camera-access")&&de){_.state.unbindTexture(),se=Z.getBinding();for(let qt=0;qt<gt.length;qt++){const vt=gt[qt].camera;if(vt){let Ke=fe[vt];Ke||(Ke=new ExternalTexture,fe[vt]=Ke);const Tt=se.getCameraImage(vt);Ke.sourceTexture=Tt}}}}for(let gt=0;gt<Se.length;gt++){const kt=Ce[gt],Jt=Se[gt];kt!==null&&Jt!==void 0&&Jt.update(kt,lt,re||te)}et&&et(it,lt),lt.detectedPlanes&&Z.dispatchEvent({type:"planesdetected",data:lt}),ue=null}const St=new WebGLAnimation;St.setAnimationLoop(ot),this.setAnimationLoop=function(it){et=it},this.dispose=function(){}}}const _e1=new Euler,_m1=new Matrix4;function WebGLMaterials(G,_){function J(me,fe){me.matrixAutoUpdate===!0&&me.updateMatrix(),fe.value.copy(me.matrix)}function Z(me,fe){fe.color.getRGB(me.fogColor.value,getUnlitUniformColorSpace(G)),fe.isFog?(me.fogNear.value=fe.near,me.fogFar.value=fe.far):fe.isFogExp2&&(me.fogDensity.value=fe.density)}function Q(me,fe,_e,ye,be){fe.isMeshBasicMaterial||fe.isMeshLambertMaterial?ee(me,fe):fe.isMeshToonMaterial?(ee(me,fe),se(me,fe)):fe.isMeshPhongMaterial?(ee(me,fe),oe(me,fe)):fe.isMeshStandardMaterial?(ee(me,fe),ae(me,fe),fe.isMeshPhysicalMaterial&&ce(me,fe,be)):fe.isMeshMatcapMaterial?(ee(me,fe),ue(me,fe)):fe.isMeshDepthMaterial?ee(me,fe):fe.isMeshDistanceMaterial?(ee(me,fe),de(me,fe)):fe.isMeshNormalMaterial?ee(me,fe):fe.isLineBasicMaterial?(te(me,fe),fe.isLineDashedMaterial&&ne(me,fe)):fe.isPointsMaterial?ie(me,fe,_e,ye):fe.isSpriteMaterial?re(me,fe):fe.isShadowMaterial?(me.color.value.copy(fe.color),me.opacity.value=fe.opacity):fe.isShaderMaterial&&(fe.uniformsNeedUpdate=!1)}function ee(me,fe){me.opacity.value=fe.opacity,fe.color&&me.diffuse.value.copy(fe.color),fe.emissive&&me.emissive.value.copy(fe.emissive).multiplyScalar(fe.emissiveIntensity),fe.map&&(me.map.value=fe.map,J(fe.map,me.mapTransform)),fe.alphaMap&&(me.alphaMap.value=fe.alphaMap,J(fe.alphaMap,me.alphaMapTransform)),fe.bumpMap&&(me.bumpMap.value=fe.bumpMap,J(fe.bumpMap,me.bumpMapTransform),me.bumpScale.value=fe.bumpScale,fe.side===BackSide&&(me.bumpScale.value*=-1)),fe.normalMap&&(me.normalMap.value=fe.normalMap,J(fe.normalMap,me.normalMapTransform),me.normalScale.value.copy(fe.normalScale),fe.side===BackSide&&me.normalScale.value.negate()),fe.displacementMap&&(me.displacementMap.value=fe.displacementMap,J(fe.displacementMap,me.displacementMapTransform),me.displacementScale.value=fe.displacementScale,me.displacementBias.value=fe.displacementBias),fe.emissiveMap&&(me.emissiveMap.value=fe.emissiveMap,J(fe.emissiveMap,me.emissiveMapTransform)),fe.specularMap&&(me.specularMap.value=fe.specularMap,J(fe.specularMap,me.specularMapTransform)),fe.alphaTest>0&&(me.alphaTest.value=fe.alphaTest);const _e=_.get(fe),ye=_e.envMap,be=_e.envMapRotation;ye&&(me.envMap.value=ye,_e1.copy(be),_e1.x*=-1,_e1.y*=-1,_e1.z*=-1,ye.isCubeTexture&&ye.isRenderTargetTexture===!1&&(_e1.y*=-1,_e1.z*=-1),me.envMapRotation.value.setFromMatrix4(_m1.makeRotationFromEuler(_e1)),me.flipEnvMap.value=ye.isCubeTexture&&ye.isRenderTargetTexture===!1?-1:1,me.reflectivity.value=fe.reflectivity,me.ior.value=fe.ior,me.refractionRatio.value=fe.refractionRatio),fe.lightMap&&(me.lightMap.value=fe.lightMap,me.lightMapIntensity.value=fe.lightMapIntensity,J(fe.lightMap,me.lightMapTransform)),fe.aoMap&&(me.aoMap.value=fe.aoMap,me.aoMapIntensity.value=fe.aoMapIntensity,J(fe.aoMap,me.aoMapTransform))}function te(me,fe){me.diffuse.value.copy(fe.color),me.opacity.value=fe.opacity,fe.map&&(me.map.value=fe.map,J(fe.map,me.mapTransform))}function ne(me,fe){me.dashSize.value=fe.dashSize,me.totalSize.value=fe.dashSize+fe.gapSize,me.scale.value=fe.scale}function ie(me,fe,_e,ye){me.diffuse.value.copy(fe.color),me.opacity.value=fe.opacity,me.size.value=fe.size*_e,me.scale.value=ye*.5,fe.map&&(me.map.value=fe.map,J(fe.map,me.uvTransform)),fe.alphaMap&&(me.alphaMap.value=fe.alphaMap,J(fe.alphaMap,me.alphaMapTransform)),fe.alphaTest>0&&(me.alphaTest.value=fe.alphaTest)}function re(me,fe){me.diffuse.value.copy(fe.color),me.opacity.value=fe.opacity,me.rotation.value=fe.rotation,fe.map&&(me.map.value=fe.map,J(fe.map,me.mapTransform)),fe.alphaMap&&(me.alphaMap.value=fe.alphaMap,J(fe.alphaMap,me.alphaMapTransform)),fe.alphaTest>0&&(me.alphaTest.value=fe.alphaTest)}function oe(me,fe){me.specular.value.copy(fe.specular),me.shininess.value=Math.max(fe.shininess,1e-4)}function se(me,fe){fe.gradientMap&&(me.gradientMap.value=fe.gradientMap)}function ae(me,fe){me.metalness.value=fe.metalness,fe.metalnessMap&&(me.metalnessMap.value=fe.metalnessMap,J(fe.metalnessMap,me.metalnessMapTransform)),me.roughness.value=fe.roughness,fe.roughnessMap&&(me.roughnessMap.value=fe.roughnessMap,J(fe.roughnessMap,me.roughnessMapTransform)),fe.envMap&&(me.envMapIntensity.value=fe.envMapIntensity)}function ce(me,fe,_e){me.ior.value=fe.ior,fe.sheen>0&&(me.sheenColor.value.copy(fe.sheenColor).multiplyScalar(fe.sheen),me.sheenRoughness.value=fe.sheenRoughness,fe.sheenColorMap&&(me.sheenColorMap.value=fe.sheenColorMap,J(fe.sheenColorMap,me.sheenColorMapTransform)),fe.sheenRoughnessMap&&(me.sheenRoughnessMap.value=fe.sheenRoughnessMap,J(fe.sheenRoughnessMap,me.sheenRoughnessMapTransform))),fe.clearcoat>0&&(me.clearcoat.value=fe.clearcoat,me.clearcoatRoughness.value=fe.clearcoatRoughness,fe.clearcoatMap&&(me.clearcoatMap.value=fe.clearcoatMap,J(fe.clearcoatMap,me.clearcoatMapTransform)),fe.clearcoatRoughnessMap&&(me.clearcoatRoughnessMap.value=fe.clearcoatRoughnessMap,J(fe.clearcoatRoughnessMap,me.clearcoatRoughnessMapTransform)),fe.clearcoatNormalMap&&(me.clearcoatNormalMap.value=fe.clearcoatNormalMap,J(fe.clearcoatNormalMap,me.clearcoatNormalMapTransform),me.clearcoatNormalScale.value.copy(fe.clearcoatNormalScale),fe.side===BackSide&&me.clearcoatNormalScale.value.negate())),fe.dispersion>0&&(me.dispersion.value=fe.dispersion),fe.iridescence>0&&(me.iridescence.value=fe.iridescence,me.iridescenceIOR.value=fe.iridescenceIOR,me.iridescenceThicknessMinimum.value=fe.iridescenceThicknessRange[0],me.iridescenceThicknessMaximum.value=fe.iridescenceThicknessRange[1],fe.iridescenceMap&&(me.iridescenceMap.value=fe.iridescenceMap,J(fe.iridescenceMap,me.iridescenceMapTransform)),fe.iridescenceThicknessMap&&(me.iridescenceThicknessMap.value=fe.iridescenceThicknessMap,J(fe.iridescenceThicknessMap,me.iridescenceThicknessMapTransform))),fe.transmission>0&&(me.transmission.value=fe.transmission,me.transmissionSamplerMap.value=_e.texture,me.transmissionSamplerSize.value.set(_e.width,_e.height),fe.transmissionMap&&(me.transmissionMap.value=fe.transmissionMap,J(fe.transmissionMap,me.transmissionMapTransform)),me.thickness.value=fe.thickness,fe.thicknessMap&&(me.thicknessMap.value=fe.thicknessMap,J(fe.thicknessMap,me.thicknessMapTransform)),me.attenuationDistance.value=fe.attenuationDistance,me.attenuationColor.value.copy(fe.attenuationColor)),fe.anisotropy>0&&(me.anisotropyVector.value.set(fe.anisotropy*Math.cos(fe.anisotropyRotation),fe.anisotropy*Math.sin(fe.anisotropyRotation)),fe.anisotropyMap&&(me.anisotropyMap.value=fe.anisotropyMap,J(fe.anisotropyMap,me.anisotropyMapTransform))),me.specularIntensity.value=fe.specularIntensity,me.specularColor.value.copy(fe.specularColor),fe.specularColorMap&&(me.specularColorMap.value=fe.specularColorMap,J(fe.specularColorMap,me.specularColorMapTransform)),fe.specularIntensityMap&&(me.specularIntensityMap.value=fe.specularIntensityMap,J(fe.specularIntensityMap,me.specularIntensityMapTransform))}function ue(me,fe){fe.matcap&&(me.matcap.value=fe.matcap)}function de(me,fe){const _e=_.get(fe).light;me.referencePosition.value.setFromMatrixPosition(_e.matrixWorld),me.nearDistance.value=_e.shadow.camera.near,me.farDistance.value=_e.shadow.camera.far}return{refreshFogUniforms:Z,refreshMaterialUniforms:Q}}function WebGLUniformsGroups(G,_,J,Z){let Q={},ee={},te=[];const ne=G.getParameter(G.MAX_UNIFORM_BUFFER_BINDINGS);function ie(_e,ye){const be=ye.program;Z.uniformBlockBinding(_e,be)}function re(_e,ye){let be=Q[_e.id];be===void 0&&(ue(_e),be=oe(_e),Q[_e.id]=be,_e.addEventListener("dispose",me));const Se=ye.program;Z.updateUBOMapping(_e,Se);const Ce=_.render.frame;ee[_e.id]!==Ce&&(ae(_e),ee[_e.id]=Ce)}function oe(_e){const ye=se();_e.__bindingPointIndex=ye;const be=G.createBuffer(),Se=_e.__size,Ce=_e.usage;return G.bindBuffer(G.UNIFORM_BUFFER,be),G.bufferData(G.UNIFORM_BUFFER,Se,Ce),G.bindBuffer(G.UNIFORM_BUFFER,null),G.bindBufferBase(G.UNIFORM_BUFFER,ye,be),be}function se(){for(let _e=0;_e<ne;_e++)if(te.indexOf(_e)===-1)return te.push(_e),_e;return error("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function ae(_e){const ye=Q[_e.id],be=_e.uniforms,Se=_e.__cache;G.bindBuffer(G.UNIFORM_BUFFER,ye);for(let Ce=0,Me=be.length;Ce<Me;Ce++){const Re=Array.isArray(be[Ce])?be[Ce]:[be[Ce]];for(let Te=0,Ee=Re.length;Te<Ee;Te++){const De=Re[Te];if(ce(De,Ce,Te,Se)===!0){const Le=De.__offset,Ue=Array.isArray(De.value)?De.value:[De.value];let Ge=0;for(let Ye=0;Ye<Ue.length;Ye++){const ke=Ue[Ye],Fe=de(ke);typeof ke=="number"||typeof ke=="boolean"?(De.__data[0]=ke,G.bufferSubData(G.UNIFORM_BUFFER,Le+Ge,De.__data)):ke.isMatrix3?(De.__data[0]=ke.elements[0],De.__data[1]=ke.elements[1],De.__data[2]=ke.elements[2],De.__data[3]=0,De.__data[4]=ke.elements[3],De.__data[5]=ke.elements[4],De.__data[6]=ke.elements[5],De.__data[7]=0,De.__data[8]=ke.elements[6],De.__data[9]=ke.elements[7],De.__data[10]=ke.elements[8],De.__data[11]=0):(ke.toArray(De.__data,Ge),Ge+=Fe.storage/Float32Array.BYTES_PER_ELEMENT)}G.bufferSubData(G.UNIFORM_BUFFER,Le,De.__data)}}}G.bindBuffer(G.UNIFORM_BUFFER,null)}function ce(_e,ye,be,Se){const Ce=_e.value,Me=ye+"_"+be;if(Se[Me]===void 0)return typeof Ce=="number"||typeof Ce=="boolean"?Se[Me]=Ce:Se[Me]=Ce.clone(),!0;{const Re=Se[Me];if(typeof Ce=="number"||typeof Ce=="boolean"){if(Re!==Ce)return Se[Me]=Ce,!0}else if(Re.equals(Ce)===!1)return Re.copy(Ce),!0}return!1}function ue(_e){const ye=_e.uniforms;let be=0;const Se=16;for(let Me=0,Re=ye.length;Me<Re;Me++){const Te=Array.isArray(ye[Me])?ye[Me]:[ye[Me]];for(let Ee=0,De=Te.length;Ee<De;Ee++){const Le=Te[Ee],Ue=Array.isArray(Le.value)?Le.value:[Le.value];for(let Ge=0,Ye=Ue.length;Ge<Ye;Ge++){const ke=Ue[Ge],Fe=de(ke),Ve=be%Se,$e=Ve%Fe.boundary,Xe=Ve+$e;be+=$e,Xe!==0&&Se-Xe<Fe.storage&&(be+=Se-Xe),Le.__data=new Float32Array(Fe.storage/Float32Array.BYTES_PER_ELEMENT),Le.__offset=be,be+=Fe.storage}}}const Ce=be%Se;return Ce>0&&(be+=Se-Ce),_e.__size=be,_e.__cache={},this}function de(_e){const ye={boundary:0,storage:0};return typeof _e=="number"||typeof _e=="boolean"?(ye.boundary=4,ye.storage=4):_e.isVector2?(ye.boundary=8,ye.storage=8):_e.isVector3||_e.isColor?(ye.boundary=16,ye.storage=12):_e.isVector4?(ye.boundary=16,ye.storage=16):_e.isMatrix3?(ye.boundary=48,ye.storage=48):_e.isMatrix4?(ye.boundary=64,ye.storage=64):_e.isTexture?warn("WebGLRenderer: Texture samplers can not be part of an uniforms group."):warn("WebGLRenderer: Unsupported uniform value type.",_e),ye}function me(_e){const ye=_e.target;ye.removeEventListener("dispose",me);const be=te.indexOf(ye.__bindingPointIndex);te.splice(be,1),G.deleteBuffer(Q[ye.id]),delete Q[ye.id],delete ee[ye.id]}function fe(){for(const _e in Q)G.deleteBuffer(Q[_e]);te=[],Q={},ee={}}return{bind:ie,update:re,dispose:fe}}const DATA=new Uint16Array([11481,15204,11534,15171,11808,15015,12385,14843,12894,14716,13396,14600,13693,14483,13976,14366,14237,14171,14405,13961,14511,13770,14605,13598,14687,13444,14760,13305,14822,13066,14876,12857,14923,12675,14963,12517,14997,12379,15025,12230,15049,12023,15070,11843,15086,11687,15100,11551,15111,11433,15120,11330,15127,11217,15132,11060,15135,10922,15138,10801,15139,10695,15139,10600,13012,14923,13020,14917,13064,14886,13176,14800,13349,14666,13513,14526,13724,14398,13960,14230,14200,14020,14383,13827,14488,13651,14583,13491,14667,13348,14740,13132,14803,12908,14856,12713,14901,12542,14938,12394,14968,12241,14992,12017,15010,11822,15024,11654,15034,11507,15041,11380,15044,11269,15044,11081,15042,10913,15037,10764,15031,10635,15023,10520,15014,10419,15003,10330,13657,14676,13658,14673,13670,14660,13698,14622,13750,14547,13834,14442,13956,14317,14112,14093,14291,13889,14407,13704,14499,13538,14586,13389,14664,13201,14733,12966,14792,12758,14842,12577,14882,12418,14915,12272,14940,12033,14959,11826,14972,11646,14980,11490,14983,11355,14983,11212,14979,11008,14971,10830,14961,10675,14950,10540,14936,10420,14923,10315,14909,10204,14894,10041,14089,14460,14090,14459,14096,14452,14112,14431,14141,14388,14186,14305,14252,14130,14341,13941,14399,13756,14467,13585,14539,13430,14610,13272,14677,13026,14737,12808,14790,12617,14833,12449,14869,12303,14896,12065,14916,11845,14929,11655,14937,11490,14939,11347,14936,11184,14930,10970,14921,10783,14912,10621,14900,10480,14885,10356,14867,10247,14848,10062,14827,9894,14805,9745,14400,14208,14400,14206,14402,14198,14406,14174,14415,14122,14427,14035,14444,13913,14469,13767,14504,13613,14548,13463,14598,13324,14651,13082,14704,12858,14752,12658,14795,12483,14831,12330,14860,12106,14881,11875,14895,11675,14903,11501,14905,11351,14903,11178,14900,10953,14892,10757,14880,10589,14865,10442,14847,10313,14827,10162,14805,9965,14782,9792,14757,9642,14731,9507,14562,13883,14562,13883,14563,13877,14566,13862,14570,13830,14576,13773,14584,13689,14595,13582,14613,13461,14637,13336,14668,13120,14704,12897,14741,12695,14776,12516,14808,12358,14835,12150,14856,11910,14870,11701,14878,11519,14882,11361,14884,11187,14880,10951,14871,10748,14858,10572,14842,10418,14823,10286,14801,10099,14777,9897,14751,9722,14725,9567,14696,9430,14666,9309,14702,13604,14702,13604,14702,13600,14703,13591,14705,13570,14707,13533,14709,13477,14712,13400,14718,13305,14727,13106,14743,12907,14762,12716,14784,12539,14807,12380,14827,12190,14844,11943,14855,11727,14863,11539,14870,11376,14871,11204,14868,10960,14858,10748,14845,10565,14829,10406,14809,10269,14786,10058,14761,9852,14734,9671,14705,9512,14674,9374,14641,9253,14608,9076,14821,13366,14821,13365,14821,13364,14821,13358,14821,13344,14821,13320,14819,13252,14817,13145,14815,13011,14814,12858,14817,12698,14823,12539,14832,12389,14841,12214,14850,11968,14856,11750,14861,11558,14866,11390,14867,11226,14862,10972,14853,10754,14840,10565,14823,10401,14803,10259,14780,10032,14754,9820,14725,9635,14694,9473,14661,9333,14627,9203,14593,8988,14557,8798,14923,13014,14922,13014,14922,13012,14922,13004,14920,12987,14919,12957,14915,12907,14909,12834,14902,12738,14894,12623,14888,12498,14883,12370,14880,12203,14878,11970,14875,11759,14873,11569,14874,11401,14872,11243,14865,10986,14855,10762,14842,10568,14825,10401,14804,10255,14781,10017,14754,9799,14725,9611,14692,9445,14658,9301,14623,9139,14587,8920,14548,8729,14509,8562,15008,12672,15008,12672,15008,12671,15007,12667,15005,12656,15001,12637,14997,12605,14989,12556,14978,12490,14966,12407,14953,12313,14940,12136,14927,11934,14914,11742,14903,11563,14896,11401,14889,11247,14879,10992,14866,10767,14851,10570,14833,10400,14812,10252,14789,10007,14761,9784,14731,9592,14698,9424,14663,9279,14627,9088,14588,8868,14548,8676,14508,8508,14467,8360,15080,12386,15080,12386,15079,12385,15078,12383,15076,12378,15072,12367,15066,12347,15057,12315,15045,12253,15030,12138,15012,11998,14993,11845,14972,11685,14951,11530,14935,11383,14920,11228,14904,10981,14887,10762,14870,10567,14850,10397,14827,10248,14803,9997,14774,9771,14743,9578,14710,9407,14674,9259,14637,9048,14596,8826,14555,8632,14514,8464,14471,8317,14427,8182,15139,12008,15139,12008,15138,12008,15137,12007,15135,12003,15130,11990,15124,11969,15115,11929,15102,11872,15086,11794,15064,11693,15041,11581,15013,11459,14987,11336,14966,11170,14944,10944,14921,10738,14898,10552,14875,10387,14850,10239,14824,9983,14794,9758,14762,9563,14728,9392,14692,9244,14653,9014,14611,8791,14569,8597,14526,8427,14481,8281,14436,8110,14391,7885,15188,11617,15188,11617,15187,11617,15186,11618,15183,11617,15179,11612,15173,11601,15163,11581,15150,11546,15133,11495,15110,11427,15083,11346,15051,11246,15024,11057,14996,10868,14967,10687,14938,10517,14911,10362,14882,10206,14853,9956,14821,9737,14787,9543,14752,9375,14715,9228,14675,8980,14632,8760,14589,8565,14544,8395,14498,8248,14451,8049,14404,7824,14357,7630,15228,11298,15228,11298,15227,11299,15226,11301,15223,11303,15219,11302,15213,11299,15204,11290,15191,11271,15174,11217,15150,11129,15119,11015,15087,10886,15057,10744,15024,10599,14990,10455,14957,10318,14924,10143,14891,9911,14856,9701,14820,9516,14782,9352,14744,9200,14703,8946,14659,8725,14615,8533,14568,8366,14521,8220,14472,7992,14423,7770,14374,7578,14315,7408,15260,10819,15260,10819,15259,10822,15258,10826,15256,10832,15251,10836,15246,10841,15237,10838,15225,10821,15207,10788,15183,10734,15151,10660,15120,10571,15087,10469,15049,10359,15012,10249,14974,10041,14937,9837,14900,9647,14860,9475,14820,9320,14779,9147,14736,8902,14691,8688,14646,8499,14598,8335,14549,8189,14499,7940,14448,7720,14397,7529,14347,7363,14256,7218,15285,10410,15285,10411,15285,10413,15284,10418,15282,10425,15278,10434,15272,10442,15264,10449,15252,10445,15235,10433,15210,10403,15179,10358,15149,10301,15113,10218,15073,10059,15033,9894,14991,9726,14951,9565,14909,9413,14865,9273,14822,9073,14777,8845,14730,8641,14682,8459,14633,8300,14583,8129,14531,7883,14479,7670,14426,7482,14373,7321,14305,7176,14201,6939,15305,9939,15305,9940,15305,9945,15304,9955,15302,9967,15298,9989,15293,10010,15286,10033,15274,10044,15258,10045,15233,10022,15205,9975,15174,9903,15136,9808,15095,9697,15053,9578,15009,9451,14965,9327,14918,9198,14871,8973,14825,8766,14775,8579,14725,8408,14675,8259,14622,8058,14569,7821,14515,7615,14460,7435,14405,7276,14350,7108,14256,6866,14149,6653,15321,9444,15321,9445,15321,9448,15320,9458,15317,9470,15314,9490,15310,9515,15302,9540,15292,9562,15276,9579,15251,9577,15226,9559,15195,9519,15156,9463,15116,9389,15071,9304,15025,9208,14978,9023,14927,8838,14878,8661,14827,8496,14774,8344,14722,8206,14667,7973,14612,7749,14556,7555,14499,7382,14443,7229,14385,7025,14322,6791,14210,6588,14100,6409,15333,8920,15333,8921,15332,8927,15332,8943,15329,8965,15326,9002,15322,9048,15316,9106,15307,9162,15291,9204,15267,9221,15244,9221,15212,9196,15175,9134,15133,9043,15088,8930,15040,8801,14990,8665,14938,8526,14886,8391,14830,8261,14775,8087,14719,7866,14661,7664,14603,7482,14544,7322,14485,7178,14426,6936,14367,6713,14281,6517,14166,6348,14054,6198,15341,8360,15341,8361,15341,8366,15341,8379,15339,8399,15336,8431,15332,8473,15326,8527,15318,8585,15302,8632,15281,8670,15258,8690,15227,8690,15191,8664,15149,8612,15104,8543,15055,8456,15001,8360,14948,8259,14892,8122,14834,7923,14776,7734,14716,7558,14656,7397,14595,7250,14534,7070,14472,6835,14410,6628,14350,6443,14243,6283,14125,6135,14010,5889,15348,7715,15348,7717,15348,7725,15347,7745,15345,7780,15343,7836,15339,7905,15334,8e3,15326,8103,15310,8193,15293,8239,15270,8270,15240,8287,15204,8283,15163,8260,15118,8223,15067,8143,15014,8014,14958,7873,14899,7723,14839,7573,14778,7430,14715,7293,14652,7164,14588,6931,14524,6720,14460,6531,14396,6362,14330,6210,14207,6015,14086,5781,13969,5576,15352,7114,15352,7116,15352,7128,15352,7159,15350,7195,15348,7237,15345,7299,15340,7374,15332,7457,15317,7544,15301,7633,15280,7703,15251,7754,15216,7775,15176,7767,15131,7733,15079,7670,15026,7588,14967,7492,14906,7387,14844,7278,14779,7171,14714,6965,14648,6770,14581,6587,14515,6420,14448,6269,14382,6123,14299,5881,14172,5665,14049,5477,13929,5310,15355,6329,15355,6330,15355,6339,15355,6362,15353,6410,15351,6472,15349,6572,15344,6688,15337,6835,15323,6985,15309,7142,15287,7220,15260,7277,15226,7310,15188,7326,15142,7318,15090,7285,15036,7239,14976,7177,14914,7045,14849,6892,14782,6736,14714,6581,14645,6433,14576,6293,14506,6164,14438,5946,14369,5733,14270,5540,14140,5369,14014,5216,13892,5043,15357,5483,15357,5484,15357,5496,15357,5528,15356,5597,15354,5692,15351,5835,15347,6011,15339,6195,15328,6317,15314,6446,15293,6566,15268,6668,15235,6746,15197,6796,15152,6811,15101,6790,15046,6748,14985,6673,14921,6583,14854,6479,14785,6371,14714,6259,14643,6149,14571,5946,14499,5750,14428,5567,14358,5401,14242,5250,14109,5111,13980,4870,13856,4657,15359,4555,15359,4557,15358,4573,15358,4633,15357,4715,15355,4841,15353,5061,15349,5216,15342,5391,15331,5577,15318,5770,15299,5967,15274,6150,15243,6223,15206,6280,15161,6310,15111,6317,15055,6300,14994,6262,14928,6208,14860,6141,14788,5994,14715,5838,14641,5684,14566,5529,14492,5384,14418,5247,14346,5121,14216,4892,14079,4682,13948,4496,13822,4330,15359,3498,15359,3501,15359,3520,15359,3598,15358,3719,15356,3860,15355,4137,15351,4305,15344,4563,15334,4809,15321,5116,15303,5273,15280,5418,15250,5547,15214,5653,15170,5722,15120,5761,15064,5763,15002,5733,14935,5673,14865,5597,14792,5504,14716,5400,14640,5294,14563,5185,14486,5041,14410,4841,14335,4655,14191,4482,14051,4325,13918,4183,13790,4012,15360,2282,15360,2285,15360,2306,15360,2401,15359,2547,15357,2748,15355,3103,15352,3349,15345,3675,15336,4020,15324,4272,15307,4496,15285,4716,15255,4908,15220,5086,15178,5170,15128,5214,15072,5234,15010,5231,14943,5206,14871,5166,14796,5102,14718,4971,14639,4833,14559,4687,14480,4541,14402,4401,14315,4268,14167,4142,14025,3958,13888,3747,13759,3556,15360,923,15360,925,15360,946,15360,1052,15359,1214,15357,1494,15356,1892,15352,2274,15346,2663,15338,3099,15326,3393,15309,3679,15288,3980,15260,4183,15226,4325,15185,4437,15136,4517,15080,4570,15018,4591,14950,4581,14877,4545,14800,4485,14720,4411,14638,4325,14556,4231,14475,4136,14395,3988,14297,3803,14145,3628,13999,3465,13861,3314,13729,3177,15360,263,15360,264,15360,272,15360,325,15359,407,15358,548,15356,780,15352,1144,15347,1580,15339,2099,15328,2425,15312,2795,15292,3133,15264,3329,15232,3517,15191,3689,15143,3819,15088,3923,15025,3978,14956,3999,14882,3979,14804,3931,14722,3855,14639,3756,14554,3645,14470,3529,14388,3409,14279,3289,14124,3173,13975,3055,13834,2848,13701,2658,15360,49,15360,49,15360,52,15360,75,15359,111,15358,201,15356,283,15353,519,15348,726,15340,1045,15329,1415,15314,1795,15295,2173,15269,2410,15237,2649,15197,2866,15150,3054,15095,3140,15032,3196,14963,3228,14888,3236,14808,3224,14725,3191,14639,3146,14553,3088,14466,2976,14382,2836,14262,2692,14103,2549,13952,2409,13808,2278,13674,2154,15360,4,15360,4,15360,4,15360,13,15359,33,15358,59,15357,112,15353,199,15348,302,15341,456,15331,628,15316,827,15297,1082,15272,1332,15241,1601,15202,1851,15156,2069,15101,2172,15039,2256,14970,2314,14894,2348,14813,2358,14728,2344,14640,2311,14551,2263,14463,2203,14376,2133,14247,2059,14084,1915,13930,1761,13784,1609,13648,1464,15360,0,15360,0,15360,0,15360,3,15359,18,15358,26,15357,53,15354,80,15348,97,15341,165,15332,238,15318,326,15299,427,15275,529,15245,654,15207,771,15161,885,15108,994,15046,1089,14976,1170,14900,1229,14817,1266,14731,1284,14641,1282,14550,1260,14460,1223,14370,1174,14232,1116,14066,1050,13909,981,13761,910,13623,839]);let lut=null;function getDFGLUT(){return lut===null&&(lut=new DataTexture(DATA,32,32,RGFormat,HalfFloatType),lut.minFilter=LinearFilter,lut.magFilter=LinearFilter,lut.wrapS=ClampToEdgeWrapping,lut.wrapT=ClampToEdgeWrapping,lut.generateMipmaps=!1,lut.needsUpdate=!0),lut}class WebGLRenderer{constructor(_={}){const{canvas:J=createCanvasElement(),context:Z=null,depth:Q=!0,stencil:ee=!1,alpha:te=!1,antialias:ne=!1,premultipliedAlpha:ie=!0,preserveDrawingBuffer:re=!1,powerPreference:oe="default",failIfMajorPerformanceCaveat:se=!1,reversedDepthBuffer:ae=!1}=_;this.isWebGLRenderer=!0;let ce;if(Z!==null){if(typeof WebGLRenderingContext<"u"&&Z instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");ce=Z.getContextAttributes().alpha}else ce=te;const ue=new Set([RGBAIntegerFormat,RGIntegerFormat,RedIntegerFormat]),de=new Set([UnsignedByteType,UnsignedIntType,UnsignedShortType,UnsignedInt248Type,UnsignedShort4444Type,UnsignedShort5551Type]),me=new Uint32Array(4),fe=new Int32Array(4);let _e=null,ye=null;const be=[],Se=[];this.domElement=J,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const Ce=this;let Me=!1;this._outputColorSpace=SRGBColorSpace;let Re=0,Te=0,Ee=null,De=-1,Le=null;const Ue=new Vector4,Ge=new Vector4;let Ye=null;const ke=new Color(0);let Fe=0,Ve=J.width,$e=J.height,Xe=1,ze=null,qe=null;const et=new Vector4(0,0,Ve,$e),ot=new Vector4(0,0,Ve,$e);let St=!1;const it=new Frustum;let lt=!1,gt=!1;const kt=new Matrix4,Jt=new Vector3,li=new Vector4,si={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let qt=!1;function vt(){return Ee===null?Xe:1}let Ke=Z;function Tt(je,nt){return J.getContext(je,nt)}try{const je={alpha:!0,depth:Q,stencil:ee,antialias:ne,premultipliedAlpha:ie,preserveDrawingBuffer:re,powerPreference:oe,failIfMajorPerformanceCaveat:se};if("setAttribute"in J&&J.setAttribute("data-engine",`three.js r${REVISION}`),J.addEventListener("webglcontextlost",Wt,!1),J.addEventListener("webglcontextrestored",Ft,!1),J.addEventListener("webglcontextcreationerror",hi,!1),Ke===null){const nt="webgl2";if(Ke=Tt(nt,je),Ke===null)throw Tt(nt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(je){throw je("WebGLRenderer: "+je.message),je}let Ut,Lt,jt,ri,ti,di,Qe,He,_t,dt,At,Nt,fi,Kt,It,Yt,Rt,Pt,mt,tt,Ze,Zt,rt,Qt;function zt(){Ut=new WebGLExtensions(Ke),Ut.init(),Zt=new WebGLUtils(Ke,Ut),Lt=new WebGLCapabilities(Ke,Ut,_,Zt),jt=new WebGLState(Ke,Ut),Lt.reversedDepthBuffer&&ae&&jt.buffers.depth.setReversed(!0),ri=new WebGLInfo(Ke),ti=new WebGLProperties,di=new WebGLTextures(Ke,Ut,jt,ti,Lt,Zt,ri),Qe=new WebGLCubeMaps(Ce),He=new WebGLCubeUVMaps(Ce),_t=new WebGLAttributes(Ke),rt=new WebGLBindingStates(Ke,_t),dt=new WebGLGeometries(Ke,_t,ri,rt),At=new WebGLObjects(Ke,dt,_t,ri),mt=new WebGLMorphtargets(Ke,Lt,di),Yt=new WebGLClipping(ti),Nt=new WebGLPrograms(Ce,Qe,He,Ut,Lt,rt,Yt),fi=new WebGLMaterials(Ce,ti),Kt=new WebGLRenderLists,It=new WebGLRenderStates(Ut),Pt=new WebGLBackground(Ce,Qe,He,jt,At,ce,ie),Rt=new WebGLShadowMap(Ce,At,Lt),Qt=new WebGLUniformsGroups(Ke,ri,Lt,jt),tt=new WebGLBufferRenderer(Ke,Ut,ri),Ze=new WebGLIndexedBufferRenderer(Ke,Ut,ri),ri.programs=Nt.programs,Ce.capabilities=Lt,Ce.extensions=Ut,Ce.properties=ti,Ce.renderLists=Kt,Ce.shadowMap=Rt,Ce.state=jt,Ce.info=ri}zt();const ei=new WebXRManager(Ce,Ke);this.xr=ei,this.getContext=function(){return Ke},this.getContextAttributes=function(){return Ke.getContextAttributes()},this.forceContextLoss=function(){const je=Ut.get("WEBGL_lose_context");je&&je.loseContext()},this.forceContextRestore=function(){const je=Ut.get("WEBGL_lose_context");je&&je.restoreContext()},this.getPixelRatio=function(){return Xe},this.setPixelRatio=function(je){je!==void 0&&(Xe=je,this.setSize(Ve,$e,!1))},this.getSize=function(je){return je.set(Ve,$e)},this.setSize=function(je,nt,pt=!0){if(ei.isPresenting){warn("WebGLRenderer: Can't change size while VR device is presenting.");return}Ve=je,$e=nt,J.width=Math.floor(je*Xe),J.height=Math.floor(nt*Xe),pt===!0&&(J.style.width=je+"px",J.style.height=nt+"px"),this.setViewport(0,0,je,nt)},this.getDrawingBufferSize=function(je){return je.set(Ve*Xe,$e*Xe).floor()},this.setDrawingBufferSize=function(je,nt,pt){Ve=je,$e=nt,Xe=pt,J.width=Math.floor(je*pt),J.height=Math.floor(nt*pt),this.setViewport(0,0,je,nt)},this.getCurrentViewport=function(je){return je.copy(Ue)},this.getViewport=function(je){return je.copy(et)},this.setViewport=function(je,nt,pt,ft){je.isVector4?et.set(je.x,je.y,je.z,je.w):et.set(je,nt,pt,ft),jt.viewport(Ue.copy(et).multiplyScalar(Xe).round())},this.getScissor=function(je){return je.copy(ot)},this.setScissor=function(je,nt,pt,ft){je.isVector4?ot.set(je.x,je.y,je.z,je.w):ot.set(je,nt,pt,ft),jt.scissor(Ge.copy(ot).multiplyScalar(Xe).round())},this.getScissorTest=function(){return St},this.setScissorTest=function(je){jt.setScissorTest(St=je)},this.setOpaqueSort=function(je){ze=je},this.setTransparentSort=function(je){qe=je},this.getClearColor=function(je){return je.copy(Pt.getClearColor())},this.setClearColor=function(){Pt.setClearColor(...arguments)},this.getClearAlpha=function(){return Pt.getClearAlpha()},this.setClearAlpha=function(){Pt.setClearAlpha(...arguments)},this.clear=function(je=!0,nt=!0,pt=!0){let ft=0;if(je){let ut=!1;if(Ee!==null){const ii=Ee.texture.format;ut=ue.has(ii)}if(ut){const ii=Ee.texture.type,ci=de.has(ii),ui=Pt.getClearColor(),ai=Pt.getClearAlpha(),vi=ui.r,Ti=ui.g,bi=ui.b;ci?(me[0]=vi,me[1]=Ti,me[2]=bi,me[3]=ai,Ke.clearBufferuiv(Ke.COLOR,0,me)):(fe[0]=vi,fe[1]=Ti,fe[2]=bi,fe[3]=ai,Ke.clearBufferiv(Ke.COLOR,0,fe))}else ft|=Ke.COLOR_BUFFER_BIT}nt&&(ft|=Ke.DEPTH_BUFFER_BIT),pt&&(ft|=Ke.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Ke.clear(ft)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){J.removeEventListener("webglcontextlost",Wt,!1),J.removeEventListener("webglcontextrestored",Ft,!1),J.removeEventListener("webglcontextcreationerror",hi,!1),Pt.dispose(),Kt.dispose(),It.dispose(),ti.dispose(),Qe.dispose(),He.dispose(),At.dispose(),rt.dispose(),Qt.dispose(),Nt.dispose(),ei.dispose(),ei.removeEventListener("sessionstart",Ln),ei.removeEventListener("sessionend",wr),_n.stop()};function Wt(je){je.preventDefault(),log("WebGLRenderer: Context Lost."),Me=!0}function Ft(){log("WebGLRenderer: Context Restored."),Me=!1;const je=ri.autoReset,nt=Rt.enabled,pt=Rt.autoUpdate,ft=Rt.needsUpdate,ut=Rt.type;zt(),ri.autoReset=je,Rt.enabled=nt,Rt.autoUpdate=pt,Rt.needsUpdate=ft,Rt.type=ut}function hi(je){error("WebGLRenderer: A WebGL context could not be created. Reason: ",je.statusMessage)}function pi(je){const nt=je.target;nt.removeEventListener("dispose",pi),Di(nt)}function Di(je){Si(je),ti.remove(je)}function Si(je){const nt=ti.get(je).programs;nt!==void 0&&(nt.forEach(function(pt){Nt.releaseProgram(pt)}),je.isShaderMaterial&&Nt.releaseShaderCache(je))}this.renderBufferDirect=function(je,nt,pt,ft,ut,ii){nt===null&&(nt=si);const ci=ut.isMesh&&ut.matrixWorld.determinant()<0,ui=ra(je,nt,pt,ft,ut);jt.setMaterial(ft,ci);let ai=pt.index,vi=1;if(ft.wireframe===!0){if(ai=dt.getWireframeAttribute(pt),ai===void 0)return;vi=2}const Ti=pt.drawRange,bi=pt.attributes.position;let Ui=Ti.start*vi,Ji=(Ti.start+Ti.count)*vi;ii!==null&&(Ui=Math.max(Ui,ii.start*vi),Ji=Math.min(Ji,(ii.start+ii.count)*vi)),ai!==null?(Ui=Math.max(Ui,0),Ji=Math.min(Ji,ai.count)):bi!=null&&(Ui=Math.max(Ui,0),Ji=Math.min(Ji,bi.count));const Ki=Ji-Ui;if(Ki<0||Ki===1/0)return;rt.setup(ut,ft,ui,pt,ai);let Hi,on=tt;if(ai!==null&&(Hi=_t.get(ai),on=Ze,on.setIndex(Hi)),ut.isMesh)ft.wireframe===!0?(jt.setLineWidth(ft.wireframeLinewidth*vt()),on.setMode(Ke.LINES)):on.setMode(Ke.TRIANGLES);else if(ut.isLine){let Ei=ft.linewidth;Ei===void 0&&(Ei=1),jt.setLineWidth(Ei*vt()),ut.isLineSegments?on.setMode(Ke.LINES):ut.isLineLoop?on.setMode(Ke.LINE_LOOP):on.setMode(Ke.LINE_STRIP)}else ut.isPoints?on.setMode(Ke.POINTS):ut.isSprite&&on.setMode(Ke.TRIANGLES);if(ut.isBatchedMesh)if(ut._multiDrawInstances!==null)warnOnce("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),on.renderMultiDrawInstances(ut._multiDrawStarts,ut._multiDrawCounts,ut._multiDrawCount,ut._multiDrawInstances);else if(Ut.get("WEBGL_multi_draw"))on.renderMultiDraw(ut._multiDrawStarts,ut._multiDrawCounts,ut._multiDrawCount);else{const Ei=ut._multiDrawStarts,pn=ut._multiDrawCounts,Yi=ut._multiDrawCount,Wn=ai?_t.get(ai).bytesPerElement:1,aa=ti.get(ft).currentProgram.getUniforms();for(let yn=0;yn<Yi;yn++)aa.setValue(Ke,"_gl_DrawID",yn),on.render(Ei[yn]/Wn,pn[yn])}else if(ut.isInstancedMesh)on.renderInstances(Ui,Ki,ut.count);else if(pt.isInstancedBufferGeometry){const Ei=pt._maxInstanceCount!==void 0?pt._maxInstanceCount:1/0,pn=Math.min(pt.instanceCount,Ei);on.renderInstances(Ui,Ki,pn)}else on.render(Ui,Ki)};function Ii(je,nt,pt){je.transparent===!0&&je.side===DoubleSide&&je.forceSinglePass===!1?(je.side=BackSide,je.needsUpdate=!0,On(je,nt,pt),je.side=FrontSide,je.needsUpdate=!0,On(je,nt,pt),je.side=DoubleSide):On(je,nt,pt)}this.compile=function(je,nt,pt=null){pt===null&&(pt=je),ye=It.get(pt),ye.init(nt),Se.push(ye),pt.traverseVisible(function(ut){ut.isLight&&ut.layers.test(nt.layers)&&(ye.pushLight(ut),ut.castShadow&&ye.pushShadow(ut))}),je!==pt&&je.traverseVisible(function(ut){ut.isLight&&ut.layers.test(nt.layers)&&(ye.pushLight(ut),ut.castShadow&&ye.pushShadow(ut))}),ye.setupLights();const ft=new Set;return je.traverse(function(ut){if(!(ut.isMesh||ut.isPoints||ut.isLine||ut.isSprite))return;const ii=ut.material;if(ii)if(Array.isArray(ii))for(let ci=0;ci<ii.length;ci++){const ui=ii[ci];Ii(ui,pt,ut),ft.add(ui)}else Ii(ii,pt,ut),ft.add(ii)}),ye=Se.pop(),ft},this.compileAsync=function(je,nt,pt=null){const ft=this.compile(je,nt,pt);return new Promise(ut=>{function ii(){if(ft.forEach(function(ci){ti.get(ci).currentProgram.isReady()&&ft.delete(ci)}),ft.size===0){ut(je);return}setTimeout(ii,10)}Ut.get("KHR_parallel_shader_compile")!==null?ii():setTimeout(ii,10)})};let vn=null;function Tr(je){vn&&vn(je)}function Ln(){_n.stop()}function wr(){_n.start()}const _n=new WebGLAnimation;_n.setAnimationLoop(Tr),typeof self<"u"&&_n.setContext(self),this.setAnimationLoop=function(je){vn=je,ei.setAnimationLoop(je),je===null?_n.stop():_n.start()},ei.addEventListener("sessionstart",Ln),ei.addEventListener("sessionend",wr),this.render=function(je,nt){if(nt!==void 0&&nt.isCamera!==!0){error("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(Me===!0)return;if(je.matrixWorldAutoUpdate===!0&&je.updateMatrixWorld(),nt.parent===null&&nt.matrixWorldAutoUpdate===!0&&nt.updateMatrixWorld(),ei.enabled===!0&&ei.isPresenting===!0&&(ei.cameraAutoUpdate===!0&&ei.updateCamera(nt),nt=ei.getCamera()),je.isScene===!0&&je.onBeforeRender(Ce,je,nt,Ee),ye=It.get(je,Se.length),ye.init(nt),Se.push(ye),kt.multiplyMatrices(nt.projectionMatrix,nt.matrixWorldInverse),it.setFromProjectionMatrix(kt,WebGLCoordinateSystem,nt.reversedDepth),gt=this.localClippingEnabled,lt=Yt.init(this.clippingPlanes,gt),_e=Kt.get(je,be.length),_e.init(),be.push(_e),ei.enabled===!0&&ei.isPresenting===!0){const ii=Ce.xr.getDepthSensingMesh();ii!==null&&Ur(ii,nt,-1/0,Ce.sortObjects)}Ur(je,nt,0,Ce.sortObjects),_e.finish(),Ce.sortObjects===!0&&_e.sort(ze,qe),qt=ei.enabled===!1||ei.isPresenting===!1||ei.hasDepthSensing()===!1,qt&&Pt.addToRenderList(_e,je),this.info.render.frame++,lt===!0&&Yt.beginShadows();const pt=ye.state.shadowsArray;Rt.render(pt,je,nt),lt===!0&&Yt.endShadows(),this.info.autoReset===!0&&this.info.reset();const ft=_e.opaque,ut=_e.transmissive;if(ye.setupLights(),nt.isArrayCamera){const ii=nt.cameras;if(ut.length>0)for(let ci=0,ui=ii.length;ci<ui;ci++){const ai=ii[ci];$n(ft,ut,je,ai)}qt&&Pt.render(je);for(let ci=0,ui=ii.length;ci<ui;ci++){const ai=ii[ci];Bn(_e,je,ai,ai.viewport)}}else ut.length>0&&$n(ft,ut,je,nt),qt&&Pt.render(je),Bn(_e,je,nt);Ee!==null&&Te===0&&(di.updateMultisampleRenderTarget(Ee),di.updateRenderTargetMipmap(Ee)),je.isScene===!0&&je.onAfterRender(Ce,je,nt),rt.resetDefaultState(),De=-1,Le=null,Se.pop(),Se.length>0?(ye=Se[Se.length-1],lt===!0&&Yt.setGlobalState(Ce.clippingPlanes,ye.state.camera)):ye=null,be.pop(),be.length>0?_e=be[be.length-1]:_e=null};function Ur(je,nt,pt,ft){if(je.visible===!1)return;if(je.layers.test(nt.layers)){if(je.isGroup)pt=je.renderOrder;else if(je.isLOD)je.autoUpdate===!0&&je.update(nt);else if(je.isLight)ye.pushLight(je),je.castShadow&&ye.pushShadow(je);else if(je.isSprite){if(!je.frustumCulled||it.intersectsSprite(je)){ft&&li.setFromMatrixPosition(je.matrixWorld).applyMatrix4(kt);const ci=At.update(je),ui=je.material;ui.visible&&_e.push(je,ci,ui,pt,li.z,null)}}else if((je.isMesh||je.isLine||je.isPoints)&&(!je.frustumCulled||it.intersectsObject(je))){const ci=At.update(je),ui=je.material;if(ft&&(je.boundingSphere!==void 0?(je.boundingSphere===null&&je.computeBoundingSphere(),li.copy(je.boundingSphere.center)):(ci.boundingSphere===null&&ci.computeBoundingSphere(),li.copy(ci.boundingSphere.center)),li.applyMatrix4(je.matrixWorld).applyMatrix4(kt)),Array.isArray(ui)){const ai=ci.groups;for(let vi=0,Ti=ai.length;vi<Ti;vi++){const bi=ai[vi],Ui=ui[bi.materialIndex];Ui&&Ui.visible&&_e.push(je,ci,Ui,pt,li.z,bi)}}else ui.visible&&_e.push(je,ci,ui,pt,li.z,null)}}const ii=je.children;for(let ci=0,ui=ii.length;ci<ui;ci++)Ur(ii[ci],nt,pt,ft)}function Bn(je,nt,pt,ft){const{opaque:ut,transmissive:ii,transparent:ci}=je;ye.setupLightsView(pt),lt===!0&&Yt.setGlobalState(Ce.clippingPlanes,pt),ft&&jt.viewport(Ue.copy(ft)),ut.length>0&&En(ut,nt,pt),ii.length>0&&En(ii,nt,pt),ci.length>0&&En(ci,nt,pt),jt.buffers.depth.setTest(!0),jt.buffers.depth.setMask(!0),jt.buffers.color.setMask(!0),jt.setPolygonOffset(!1)}function $n(je,nt,pt,ft){if((pt.isScene===!0?pt.overrideMaterial:null)!==null)return;ye.state.transmissionRenderTarget[ft.id]===void 0&&(ye.state.transmissionRenderTarget[ft.id]=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:Ut.has("EXT_color_buffer_half_float")||Ut.has("EXT_color_buffer_float")?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:4,stencilBuffer:ee,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ColorManagement.workingColorSpace}));const ii=ye.state.transmissionRenderTarget[ft.id],ci=ft.viewport||Ue;ii.setSize(ci.z*Ce.transmissionResolutionScale,ci.w*Ce.transmissionResolutionScale);const ui=Ce.getRenderTarget(),ai=Ce.getActiveCubeFace(),vi=Ce.getActiveMipmapLevel();Ce.setRenderTarget(ii),Ce.getClearColor(ke),Fe=Ce.getClearAlpha(),Fe<1&&Ce.setClearColor(16777215,.5),Ce.clear(),qt&&Pt.render(pt);const Ti=Ce.toneMapping;Ce.toneMapping=NoToneMapping;const bi=ft.viewport;if(ft.viewport!==void 0&&(ft.viewport=void 0),ye.setupLightsView(ft),lt===!0&&Yt.setGlobalState(Ce.clippingPlanes,ft),En(je,pt,ft),di.updateMultisampleRenderTarget(ii),di.updateRenderTargetMipmap(ii),Ut.has("WEBGL_multisampled_render_to_texture")===!1){let Ui=!1;for(let Ji=0,Ki=nt.length;Ji<Ki;Ji++){const Hi=nt[Ji],{object:on,geometry:Ei,material:pn,group:Yi}=Hi;if(pn.side===DoubleSide&&on.layers.test(ft.layers)){const Wn=pn.side;pn.side=BackSide,pn.needsUpdate=!0,ki(on,pt,ft,Ei,pn,Yi),pn.side=Wn,pn.needsUpdate=!0,Ui=!0}}Ui===!0&&(di.updateMultisampleRenderTarget(ii),di.updateRenderTargetMipmap(ii))}Ce.setRenderTarget(ui,ai,vi),Ce.setClearColor(ke,Fe),bi!==void 0&&(ft.viewport=bi),Ce.toneMapping=Ti}function En(je,nt,pt){const ft=nt.isScene===!0?nt.overrideMaterial:null;for(let ut=0,ii=je.length;ut<ii;ut++){const ci=je[ut],{object:ui,geometry:ai,group:vi}=ci;let Ti=ci.material;Ti.allowOverride===!0&&ft!==null&&(Ti=ft),ui.layers.test(pt.layers)&&ki(ui,nt,pt,ai,Ti,vi)}}function ki(je,nt,pt,ft,ut,ii){je.onBeforeRender(Ce,nt,pt,ft,ut,ii),je.modelViewMatrix.multiplyMatrices(pt.matrixWorldInverse,je.matrixWorld),je.normalMatrix.getNormalMatrix(je.modelViewMatrix),ut.onBeforeRender(Ce,nt,pt,ft,je,ii),ut.transparent===!0&&ut.side===DoubleSide&&ut.forceSinglePass===!1?(ut.side=BackSide,ut.needsUpdate=!0,Ce.renderBufferDirect(pt,nt,ft,ut,je,ii),ut.side=FrontSide,ut.needsUpdate=!0,Ce.renderBufferDirect(pt,nt,ft,ut,je,ii),ut.side=DoubleSide):Ce.renderBufferDirect(pt,nt,ft,ut,je,ii),je.onAfterRender(Ce,nt,pt,ft,ut,ii)}function On(je,nt,pt){nt.isScene!==!0&&(nt=si);const ft=ti.get(je),ut=ye.state.lights,ii=ye.state.shadowsArray,ci=ut.state.version,ui=Nt.getParameters(je,ut.state,ii,nt,pt),ai=Nt.getProgramCacheKey(ui);let vi=ft.programs;ft.environment=je.isMeshStandardMaterial?nt.environment:null,ft.fog=nt.fog,ft.envMap=(je.isMeshStandardMaterial?He:Qe).get(je.envMap||ft.environment),ft.envMapRotation=ft.environment!==null&&je.envMap===null?nt.environmentRotation:je.envMapRotation,vi===void 0&&(je.addEventListener("dispose",pi),vi=new Map,ft.programs=vi);let Ti=vi.get(ai);if(Ti!==void 0){if(ft.currentProgram===Ti&&ft.lightsStateVersion===ci)return ks(je,ui),Ti}else ui.uniforms=Nt.getUniforms(je),je.onBeforeCompile(ui,Ce),Ti=Nt.acquireProgram(ui,ai),vi.set(ai,Ti),ft.uniforms=ui.uniforms;const bi=ft.uniforms;return(!je.isShaderMaterial&&!je.isRawShaderMaterial||je.clipping===!0)&&(bi.clippingPlanes=Yt.uniform),ks(je,ui),ft.needsLights=sa(je),ft.lightsStateVersion=ci,ft.needsLights&&(bi.ambientLightColor.value=ut.state.ambient,bi.lightProbe.value=ut.state.probe,bi.directionalLights.value=ut.state.directional,bi.directionalLightShadows.value=ut.state.directionalShadow,bi.spotLights.value=ut.state.spot,bi.spotLightShadows.value=ut.state.spotShadow,bi.rectAreaLights.value=ut.state.rectArea,bi.ltc_1.value=ut.state.rectAreaLTC1,bi.ltc_2.value=ut.state.rectAreaLTC2,bi.pointLights.value=ut.state.point,bi.pointLightShadows.value=ut.state.pointShadow,bi.hemisphereLights.value=ut.state.hemi,bi.directionalShadowMap.value=ut.state.directionalShadowMap,bi.directionalShadowMatrix.value=ut.state.directionalShadowMatrix,bi.spotShadowMap.value=ut.state.spotShadowMap,bi.spotLightMatrix.value=ut.state.spotLightMatrix,bi.spotLightMap.value=ut.state.spotLightMap,bi.pointShadowMap.value=ut.state.pointShadowMap,bi.pointShadowMatrix.value=ut.state.pointShadowMatrix),ft.currentProgram=Ti,ft.uniformsList=null,Ti}function Ir(je){if(je.uniformsList===null){const nt=je.currentProgram.getUniforms();je.uniformsList=WebGLUniforms.seqWithValue(nt.seq,je.uniforms)}return je.uniformsList}function ks(je,nt){const pt=ti.get(je);pt.outputColorSpace=nt.outputColorSpace,pt.batching=nt.batching,pt.batchingColor=nt.batchingColor,pt.instancing=nt.instancing,pt.instancingColor=nt.instancingColor,pt.instancingMorph=nt.instancingMorph,pt.skinning=nt.skinning,pt.morphTargets=nt.morphTargets,pt.morphNormals=nt.morphNormals,pt.morphColors=nt.morphColors,pt.morphTargetsCount=nt.morphTargetsCount,pt.numClippingPlanes=nt.numClippingPlanes,pt.numIntersection=nt.numClipIntersection,pt.vertexAlphas=nt.vertexAlphas,pt.vertexTangents=nt.vertexTangents,pt.toneMapping=nt.toneMapping}function ra(je,nt,pt,ft,ut){nt.isScene!==!0&&(nt=si),di.resetTextureUnits();const ii=nt.fog,ci=ft.isMeshStandardMaterial?nt.environment:null,ui=Ee===null?Ce.outputColorSpace:Ee.isXRRenderTarget===!0?Ee.texture.colorSpace:LinearSRGBColorSpace,ai=(ft.isMeshStandardMaterial?He:Qe).get(ft.envMap||ci),vi=ft.vertexColors===!0&&!!pt.attributes.color&&pt.attributes.color.itemSize===4,Ti=!!pt.attributes.tangent&&(!!ft.normalMap||ft.anisotropy>0),bi=!!pt.morphAttributes.position,Ui=!!pt.morphAttributes.normal,Ji=!!pt.morphAttributes.color;let Ki=NoToneMapping;ft.toneMapped&&(Ee===null||Ee.isXRRenderTarget===!0)&&(Ki=Ce.toneMapping);const Hi=pt.morphAttributes.position||pt.morphAttributes.normal||pt.morphAttributes.color,on=Hi!==void 0?Hi.length:0,Ei=ti.get(ft),pn=ye.state.lights;if(lt===!0&&(gt===!0||je!==Le)){const tr=je===Le&&ft.id===De;Yt.setState(ft,je,tr)}let Yi=!1;ft.version===Ei.__version?(Ei.needsLights&&Ei.lightsStateVersion!==pn.state.version||Ei.outputColorSpace!==ui||ut.isBatchedMesh&&Ei.batching===!1||!ut.isBatchedMesh&&Ei.batching===!0||ut.isBatchedMesh&&Ei.batchingColor===!0&&ut.colorTexture===null||ut.isBatchedMesh&&Ei.batchingColor===!1&&ut.colorTexture!==null||ut.isInstancedMesh&&Ei.instancing===!1||!ut.isInstancedMesh&&Ei.instancing===!0||ut.isSkinnedMesh&&Ei.skinning===!1||!ut.isSkinnedMesh&&Ei.skinning===!0||ut.isInstancedMesh&&Ei.instancingColor===!0&&ut.instanceColor===null||ut.isInstancedMesh&&Ei.instancingColor===!1&&ut.instanceColor!==null||ut.isInstancedMesh&&Ei.instancingMorph===!0&&ut.morphTexture===null||ut.isInstancedMesh&&Ei.instancingMorph===!1&&ut.morphTexture!==null||Ei.envMap!==ai||ft.fog===!0&&Ei.fog!==ii||Ei.numClippingPlanes!==void 0&&(Ei.numClippingPlanes!==Yt.numPlanes||Ei.numIntersection!==Yt.numIntersection)||Ei.vertexAlphas!==vi||Ei.vertexTangents!==Ti||Ei.morphTargets!==bi||Ei.morphNormals!==Ui||Ei.morphColors!==Ji||Ei.toneMapping!==Ki||Ei.morphTargetsCount!==on)&&(Yi=!0):(Yi=!0,Ei.__version=ft.version);let Wn=Ei.currentProgram;Yi===!0&&(Wn=On(ft,nt,ut));let aa=!1,yn=!1,Us=!1;const bn=Wn.getUniforms(),Qn=Ei.uniforms;if(jt.useProgram(Wn.program)&&(aa=!0,yn=!0,Us=!0),ft.id!==De&&(De=ft.id,yn=!0),aa||Le!==je){jt.buffers.depth.getReversed()&&je.reversedDepth!==!0&&(je._reversedDepth=!0,je.updateProjectionMatrix()),bn.setValue(Ke,"projectionMatrix",je.projectionMatrix),bn.setValue(Ke,"viewMatrix",je.matrixWorldInverse);const kn=bn.map.cameraPosition;kn!==void 0&&kn.setValue(Ke,Jt.setFromMatrixPosition(je.matrixWorld)),Lt.logarithmicDepthBuffer&&bn.setValue(Ke,"logDepthBufFC",2/(Math.log(je.far+1)/Math.LN2)),(ft.isMeshPhongMaterial||ft.isMeshToonMaterial||ft.isMeshLambertMaterial||ft.isMeshBasicMaterial||ft.isMeshStandardMaterial||ft.isShaderMaterial)&&bn.setValue(Ke,"isOrthographic",je.isOrthographicCamera===!0),Le!==je&&(Le=je,yn=!0,Us=!0)}if(ut.isSkinnedMesh){bn.setOptional(Ke,ut,"bindMatrix"),bn.setOptional(Ke,ut,"bindMatrixInverse");const tr=ut.skeleton;tr&&(tr.boneTexture===null&&tr.computeBoneTexture(),bn.setValue(Ke,"boneTexture",tr.boneTexture,di))}ut.isBatchedMesh&&(bn.setOptional(Ke,ut,"batchingTexture"),bn.setValue(Ke,"batchingTexture",ut._matricesTexture,di),bn.setOptional(Ke,ut,"batchingIdTexture"),bn.setValue(Ke,"batchingIdTexture",ut._indirectTexture,di),bn.setOptional(Ke,ut,"batchingColorTexture"),ut._colorsTexture!==null&&bn.setValue(Ke,"batchingColorTexture",ut._colorsTexture,di));const er=pt.morphAttributes;if((er.position!==void 0||er.normal!==void 0||er.color!==void 0)&&mt.update(ut,pt,Wn),(yn||Ei.receiveShadow!==ut.receiveShadow)&&(Ei.receiveShadow=ut.receiveShadow,bn.setValue(Ke,"receiveShadow",ut.receiveShadow)),ft.isMeshGouraudMaterial&&ft.envMap!==null&&(Qn.envMap.value=ai,Qn.flipEnvMap.value=ai.isCubeTexture&&ai.isRenderTargetTexture===!1?-1:1),ft.isMeshStandardMaterial&&ft.envMap===null&&nt.environment!==null&&(Qn.envMapIntensity.value=nt.environmentIntensity),Qn.dfgLUT!==void 0&&(Qn.dfgLUT.value=getDFGLUT()),yn&&(bn.setValue(Ke,"toneMappingExposure",Ce.toneMappingExposure),Ei.needsLights&&Al(Qn,Us),ii&&ft.fog===!0&&fi.refreshFogUniforms(Qn,ii),fi.refreshMaterialUniforms(Qn,ft,Xe,$e,ye.state.transmissionRenderTarget[je.id]),WebGLUniforms.upload(Ke,Ir(Ei),Qn,di)),ft.isShaderMaterial&&ft.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(Ke,Ir(Ei),Qn,di),ft.uniformsNeedUpdate=!1),ft.isSpriteMaterial&&bn.setValue(Ke,"center",ut.center),bn.setValue(Ke,"modelViewMatrix",ut.modelViewMatrix),bn.setValue(Ke,"normalMatrix",ut.normalMatrix),bn.setValue(Ke,"modelMatrix",ut.matrixWorld),ft.isShaderMaterial||ft.isRawShaderMaterial){const tr=ft.uniformsGroups;for(let kn=0,Cs=tr.length;kn<Cs;kn++){const ms=tr[kn];Qt.update(ms,Wn),Qt.bind(ms,Wn)}}return Wn}function Al(je,nt){je.ambientLightColor.needsUpdate=nt,je.lightProbe.needsUpdate=nt,je.directionalLights.needsUpdate=nt,je.directionalLightShadows.needsUpdate=nt,je.pointLights.needsUpdate=nt,je.pointLightShadows.needsUpdate=nt,je.spotLights.needsUpdate=nt,je.spotLightShadows.needsUpdate=nt,je.rectAreaLights.needsUpdate=nt,je.hemisphereLights.needsUpdate=nt}function sa(je){return je.isMeshLambertMaterial||je.isMeshToonMaterial||je.isMeshPhongMaterial||je.isMeshStandardMaterial||je.isShadowMaterial||je.isShaderMaterial&&je.lights===!0}this.getActiveCubeFace=function(){return Re},this.getActiveMipmapLevel=function(){return Te},this.getRenderTarget=function(){return Ee},this.setRenderTargetTextures=function(je,nt,pt){const ft=ti.get(je);ft.__autoAllocateDepthBuffer=je.resolveDepthBuffer===!1,ft.__autoAllocateDepthBuffer===!1&&(ft.__useRenderToTexture=!1),ti.get(je.texture).__webglTexture=nt,ti.get(je.depthTexture).__webglTexture=ft.__autoAllocateDepthBuffer?void 0:pt,ft.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(je,nt){const pt=ti.get(je);pt.__webglFramebuffer=nt,pt.__useDefaultFramebuffer=nt===void 0};const ct=Ke.createFramebuffer();this.setRenderTarget=function(je,nt=0,pt=0){Ee=je,Re=nt,Te=pt;let ft=!0,ut=null,ii=!1,ci=!1;if(je){const ai=ti.get(je);if(ai.__useDefaultFramebuffer!==void 0)jt.bindFramebuffer(Ke.FRAMEBUFFER,null),ft=!1;else if(ai.__webglFramebuffer===void 0)di.setupRenderTarget(je);else if(ai.__hasExternalTextures)di.rebindTextures(je,ti.get(je.texture).__webglTexture,ti.get(je.depthTexture).__webglTexture);else if(je.depthBuffer){const bi=je.depthTexture;if(ai.__boundDepthTexture!==bi){if(bi!==null&&ti.has(bi)&&(je.width!==bi.image.width||je.height!==bi.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");di.setupDepthRenderbuffer(je)}}const vi=je.texture;(vi.isData3DTexture||vi.isDataArrayTexture||vi.isCompressedArrayTexture)&&(ci=!0);const Ti=ti.get(je).__webglFramebuffer;je.isWebGLCubeRenderTarget?(Array.isArray(Ti[nt])?ut=Ti[nt][pt]:ut=Ti[nt],ii=!0):je.samples>0&&di.useMultisampledRTT(je)===!1?ut=ti.get(je).__webglMultisampledFramebuffer:Array.isArray(Ti)?ut=Ti[pt]:ut=Ti,Ue.copy(je.viewport),Ge.copy(je.scissor),Ye=je.scissorTest}else Ue.copy(et).multiplyScalar(Xe).floor(),Ge.copy(ot).multiplyScalar(Xe).floor(),Ye=St;if(pt!==0&&(ut=ct),jt.bindFramebuffer(Ke.FRAMEBUFFER,ut)&&ft&&jt.drawBuffers(je,ut),jt.viewport(Ue),jt.scissor(Ge),jt.setScissorTest(Ye),ii){const ai=ti.get(je.texture);Ke.framebufferTexture2D(Ke.FRAMEBUFFER,Ke.COLOR_ATTACHMENT0,Ke.TEXTURE_CUBE_MAP_POSITIVE_X+nt,ai.__webglTexture,pt)}else if(ci){const ai=nt;for(let vi=0;vi<je.textures.length;vi++){const Ti=ti.get(je.textures[vi]);Ke.framebufferTextureLayer(Ke.FRAMEBUFFER,Ke.COLOR_ATTACHMENT0+vi,Ti.__webglTexture,pt,ai)}}else if(je!==null&&pt!==0){const ai=ti.get(je.texture);Ke.framebufferTexture2D(Ke.FRAMEBUFFER,Ke.COLOR_ATTACHMENT0,Ke.TEXTURE_2D,ai.__webglTexture,pt)}De=-1},this.readRenderTargetPixels=function(je,nt,pt,ft,ut,ii,ci,ui=0){if(!(je&&je.isWebGLRenderTarget)){error("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ai=ti.get(je).__webglFramebuffer;if(je.isWebGLCubeRenderTarget&&ci!==void 0&&(ai=ai[ci]),ai){jt.bindFramebuffer(Ke.FRAMEBUFFER,ai);try{const vi=je.textures[ui],Ti=vi.format,bi=vi.type;if(!Lt.textureFormatReadable(Ti)){error("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Lt.textureTypeReadable(bi)){error("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}nt>=0&&nt<=je.width-ft&&pt>=0&&pt<=je.height-ut&&(je.textures.length>1&&Ke.readBuffer(Ke.COLOR_ATTACHMENT0+ui),Ke.readPixels(nt,pt,ft,ut,Zt.convert(Ti),Zt.convert(bi),ii))}finally{const vi=Ee!==null?ti.get(Ee).__webglFramebuffer:null;jt.bindFramebuffer(Ke.FRAMEBUFFER,vi)}}},this.readRenderTargetPixelsAsync=async function(je,nt,pt,ft,ut,ii,ci,ui=0){if(!(je&&je.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ai=ti.get(je).__webglFramebuffer;if(je.isWebGLCubeRenderTarget&&ci!==void 0&&(ai=ai[ci]),ai)if(nt>=0&&nt<=je.width-ft&&pt>=0&&pt<=je.height-ut){jt.bindFramebuffer(Ke.FRAMEBUFFER,ai);const vi=je.textures[ui],Ti=vi.format,bi=vi.type;if(!Lt.textureFormatReadable(Ti))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Lt.textureTypeReadable(bi))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Ui=Ke.createBuffer();Ke.bindBuffer(Ke.PIXEL_PACK_BUFFER,Ui),Ke.bufferData(Ke.PIXEL_PACK_BUFFER,ii.byteLength,Ke.STREAM_READ),je.textures.length>1&&Ke.readBuffer(Ke.COLOR_ATTACHMENT0+ui),Ke.readPixels(nt,pt,ft,ut,Zt.convert(Ti),Zt.convert(bi),0);const Ji=Ee!==null?ti.get(Ee).__webglFramebuffer:null;jt.bindFramebuffer(Ke.FRAMEBUFFER,Ji);const Ki=Ke.fenceSync(Ke.SYNC_GPU_COMMANDS_COMPLETE,0);return Ke.flush(),await probeAsync(Ke,Ki,4),Ke.bindBuffer(Ke.PIXEL_PACK_BUFFER,Ui),Ke.getBufferSubData(Ke.PIXEL_PACK_BUFFER,0,ii),Ke.deleteBuffer(Ui),Ke.deleteSync(Ki),ii}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(je,nt=null,pt=0){const ft=Math.pow(2,-pt),ut=Math.floor(je.image.width*ft),ii=Math.floor(je.image.height*ft),ci=nt!==null?nt.x:0,ui=nt!==null?nt.y:0;di.setTexture2D(je,0),Ke.copyTexSubImage2D(Ke.TEXTURE_2D,pt,0,0,ci,ui,ut,ii),jt.unbindTexture()};const Et=Ke.createFramebuffer(),Ht=Ke.createFramebuffer();this.copyTextureToTexture=function(je,nt,pt=null,ft=null,ut=0,ii=null){ii===null&&(ut!==0?(warnOnce("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),ii=ut,ut=0):ii=0);let ci,ui,ai,vi,Ti,bi,Ui,Ji,Ki;const Hi=je.isCompressedTexture?je.mipmaps[ii]:je.image;if(pt!==null)ci=pt.max.x-pt.min.x,ui=pt.max.y-pt.min.y,ai=pt.isBox3?pt.max.z-pt.min.z:1,vi=pt.min.x,Ti=pt.min.y,bi=pt.isBox3?pt.min.z:0;else{const er=Math.pow(2,-ut);ci=Math.floor(Hi.width*er),ui=Math.floor(Hi.height*er),je.isDataArrayTexture?ai=Hi.depth:je.isData3DTexture?ai=Math.floor(Hi.depth*er):ai=1,vi=0,Ti=0,bi=0}ft!==null?(Ui=ft.x,Ji=ft.y,Ki=ft.z):(Ui=0,Ji=0,Ki=0);const on=Zt.convert(nt.format),Ei=Zt.convert(nt.type);let pn;nt.isData3DTexture?(di.setTexture3D(nt,0),pn=Ke.TEXTURE_3D):nt.isDataArrayTexture||nt.isCompressedArrayTexture?(di.setTexture2DArray(nt,0),pn=Ke.TEXTURE_2D_ARRAY):(di.setTexture2D(nt,0),pn=Ke.TEXTURE_2D),Ke.pixelStorei(Ke.UNPACK_FLIP_Y_WEBGL,nt.flipY),Ke.pixelStorei(Ke.UNPACK_PREMULTIPLY_ALPHA_WEBGL,nt.premultiplyAlpha),Ke.pixelStorei(Ke.UNPACK_ALIGNMENT,nt.unpackAlignment);const Yi=Ke.getParameter(Ke.UNPACK_ROW_LENGTH),Wn=Ke.getParameter(Ke.UNPACK_IMAGE_HEIGHT),aa=Ke.getParameter(Ke.UNPACK_SKIP_PIXELS),yn=Ke.getParameter(Ke.UNPACK_SKIP_ROWS),Us=Ke.getParameter(Ke.UNPACK_SKIP_IMAGES);Ke.pixelStorei(Ke.UNPACK_ROW_LENGTH,Hi.width),Ke.pixelStorei(Ke.UNPACK_IMAGE_HEIGHT,Hi.height),Ke.pixelStorei(Ke.UNPACK_SKIP_PIXELS,vi),Ke.pixelStorei(Ke.UNPACK_SKIP_ROWS,Ti),Ke.pixelStorei(Ke.UNPACK_SKIP_IMAGES,bi);const bn=je.isDataArrayTexture||je.isData3DTexture,Qn=nt.isDataArrayTexture||nt.isData3DTexture;if(je.isDepthTexture){const er=ti.get(je),tr=ti.get(nt),kn=ti.get(er.__renderTarget),Cs=ti.get(tr.__renderTarget);jt.bindFramebuffer(Ke.READ_FRAMEBUFFER,kn.__webglFramebuffer),jt.bindFramebuffer(Ke.DRAW_FRAMEBUFFER,Cs.__webglFramebuffer);for(let ms=0;ms<ai;ms++)bn&&(Ke.framebufferTextureLayer(Ke.READ_FRAMEBUFFER,Ke.COLOR_ATTACHMENT0,ti.get(je).__webglTexture,ut,bi+ms),Ke.framebufferTextureLayer(Ke.DRAW_FRAMEBUFFER,Ke.COLOR_ATTACHMENT0,ti.get(nt).__webglTexture,ii,Ki+ms)),Ke.blitFramebuffer(vi,Ti,ci,ui,Ui,Ji,ci,ui,Ke.DEPTH_BUFFER_BIT,Ke.NEAREST);jt.bindFramebuffer(Ke.READ_FRAMEBUFFER,null),jt.bindFramebuffer(Ke.DRAW_FRAMEBUFFER,null)}else if(ut!==0||je.isRenderTargetTexture||ti.has(je)){const er=ti.get(je),tr=ti.get(nt);jt.bindFramebuffer(Ke.READ_FRAMEBUFFER,Et),jt.bindFramebuffer(Ke.DRAW_FRAMEBUFFER,Ht);for(let kn=0;kn<ai;kn++)bn?Ke.framebufferTextureLayer(Ke.READ_FRAMEBUFFER,Ke.COLOR_ATTACHMENT0,er.__webglTexture,ut,bi+kn):Ke.framebufferTexture2D(Ke.READ_FRAMEBUFFER,Ke.COLOR_ATTACHMENT0,Ke.TEXTURE_2D,er.__webglTexture,ut),Qn?Ke.framebufferTextureLayer(Ke.DRAW_FRAMEBUFFER,Ke.COLOR_ATTACHMENT0,tr.__webglTexture,ii,Ki+kn):Ke.framebufferTexture2D(Ke.DRAW_FRAMEBUFFER,Ke.COLOR_ATTACHMENT0,Ke.TEXTURE_2D,tr.__webglTexture,ii),ut!==0?Ke.blitFramebuffer(vi,Ti,ci,ui,Ui,Ji,ci,ui,Ke.COLOR_BUFFER_BIT,Ke.NEAREST):Qn?Ke.copyTexSubImage3D(pn,ii,Ui,Ji,Ki+kn,vi,Ti,ci,ui):Ke.copyTexSubImage2D(pn,ii,Ui,Ji,vi,Ti,ci,ui);jt.bindFramebuffer(Ke.READ_FRAMEBUFFER,null),jt.bindFramebuffer(Ke.DRAW_FRAMEBUFFER,null)}else Qn?je.isDataTexture||je.isData3DTexture?Ke.texSubImage3D(pn,ii,Ui,Ji,Ki,ci,ui,ai,on,Ei,Hi.data):nt.isCompressedArrayTexture?Ke.compressedTexSubImage3D(pn,ii,Ui,Ji,Ki,ci,ui,ai,on,Hi.data):Ke.texSubImage3D(pn,ii,Ui,Ji,Ki,ci,ui,ai,on,Ei,Hi):je.isDataTexture?Ke.texSubImage2D(Ke.TEXTURE_2D,ii,Ui,Ji,ci,ui,on,Ei,Hi.data):je.isCompressedTexture?Ke.compressedTexSubImage2D(Ke.TEXTURE_2D,ii,Ui,Ji,Hi.width,Hi.height,on,Hi.data):Ke.texSubImage2D(Ke.TEXTURE_2D,ii,Ui,Ji,ci,ui,on,Ei,Hi);Ke.pixelStorei(Ke.UNPACK_ROW_LENGTH,Yi),Ke.pixelStorei(Ke.UNPACK_IMAGE_HEIGHT,Wn),Ke.pixelStorei(Ke.UNPACK_SKIP_PIXELS,aa),Ke.pixelStorei(Ke.UNPACK_SKIP_ROWS,yn),Ke.pixelStorei(Ke.UNPACK_SKIP_IMAGES,Us),ii===0&&nt.generateMipmaps&&Ke.generateMipmap(pn),jt.unbindTexture()},this.initRenderTarget=function(je){ti.get(je).__webglFramebuffer===void 0&&di.setupRenderTarget(je)},this.initTexture=function(je){je.isCubeTexture?di.setTextureCube(je,0):je.isData3DTexture?di.setTexture3D(je,0):je.isDataArrayTexture||je.isCompressedArrayTexture?di.setTexture2DArray(je,0):di.setTexture2D(je,0),jt.unbindTexture()},this.resetState=function(){Re=0,Te=0,Ee=null,jt.reset(),rt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return WebGLCoordinateSystem}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(_){this._outputColorSpace=_;const J=this.getContext();J.drawingBufferColorSpace=ColorManagement._getDrawingBufferColorSpace(_),J.unpackColorSpace=ColorManagement._getUnpackColorSpace()}}const THREE=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AgXToneMapping,AlphaFormat,AlwaysCompare,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AnimationAction,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,AttachedBindMode,Audio,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,BackSide,BasicDepthPacking,BasicShadowMap,BatchedMesh,Bone,BooleanKeyframeTrack,Box2,Box3,Box3Helper,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasTexture,CapsuleGeometry,CatmullRomCurve3,CineonToneMapping,CircleGeometry,ClampToEdgeWrapping,Clock,Color,ColorKeyframeTrack,ColorManagement,CompressedArrayTexture,CompressedCubeTexture,CompressedTexture,CompressedTextureLoader,ConeGeometry,ConstantAlphaFactor,ConstantColorFactor,Controls,CubeCamera,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CustomToneMapping,CylinderGeometry,Cylindrical,Data3DTexture,DataArrayTexture,DataTexture,DataTextureLoader,DataUtils,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DetachedBindMode,DirectionalLight,DirectionalLightHelper,DiscreteInterpolant,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EllipseCurve,EqualCompare,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher:EventDispatcher$1,ExternalTexture,ExtrudeGeometry,FileLoader,Float16BufferAttribute,Float32BufferAttribute,FloatType,Fog,FogExp2,FramebufferTexture,FrontSide,Frustum,FrustumArray,GLBufferAttribute,GLSL1,GLSL3,GreaterCompare,GreaterDepth,GreaterEqualCompare,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group,HalfFloatType,HemisphereLight,HemisphereLightHelper,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16BufferAttribute,Int32BufferAttribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InterpolationSamplingMode,InterpolationSamplingType,InvertStencilOp,KeepStencilOp,KeyframeTrack,LOD,LatheGeometry,Layers,LessCompare,LessDepth,LessEqualCompare,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,Line,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LineSegments,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearSRGBColorSpace,LinearToneMapping,LinearTransfer,Loader,LoaderUtils,LoadingManager,LoopOnce,LoopPingPong,LoopRepeat,MOUSE,Material,MaterialLoader,MathUtils,Matrix2,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeutralToneMapping,NeverCompare,NeverDepth,NeverStencilFunc,NoBlending,NoColorSpace,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualCompare,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronGeometry,OneFactor,OneMinusConstantAlphaFactor,OneMinusConstantColorFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,Path,PerspectiveCamera,Plane,PlaneGeometry,PlaneHelper,PointLight,PointLightHelper,Points:Points$1,PointsMaterial,PolarGridHelper,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,RED_GREEN_RGTC2_Format,RED_RGTC1_Format,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGBDepthPacking,RGBFormat,RGBIntegerFormat,RGB_BPTC_SIGNED_Format,RGB_BPTC_UNSIGNED_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGDepthPacking,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RenderTarget,RenderTarget3D,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingGeometry,SIGNED_RED_GREEN_RGTC2_Format,SIGNED_RED_RGTC1_Format,SRGBColorSpace,SRGBTransfer,Scene,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,Source,Sphere:Sphere$1,SphereGeometry,Spherical,SphericalHarmonics3,SplineCurve,SpotLight,SpotLightHelper,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronGeometry,Texture,TextureLoader,TextureUtils,Timer,TimestampQuery,TorusGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeGeometry,UVMapping,Uint16BufferAttribute,Uint32BufferAttribute,Uint8BufferAttribute,Uint8ClampedBufferAttribute,Uniform,UniformsGroup,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt101111Type,UnsignedInt248Type,UnsignedInt5999Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,VideoFrameTexture,VideoTexture,WebGL3DRenderTarget,WebGLArrayRenderTarget,WebGLCoordinateSystem,WebGLCubeRenderTarget,WebGLRenderTarget,WebGLRenderer,WebGLUtils,WebGPUCoordinateSystem,WebXRController,WireframeGeometry,WrapAroundEnding,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,createCanvasElement,error,getConsoleFunction,log,setConsoleFunction,warn,warnOnce},Symbol.toStringTag,{value:"Module"}));var withSelector={exports:{}},withSelector_production={},shim={exports:{}},useSyncExternalStoreShim_production={};var hasRequiredUseSyncExternalStoreShim_production;function requireUseSyncExternalStoreShim_production(){if(hasRequiredUseSyncExternalStoreShim_production)return useSyncExternalStoreShim_production;hasRequiredUseSyncExternalStoreShim_production=1;var G=requireReact();function _(se,ae){return se===ae&&(se!==0||1/se===1/ae)||se!==se&&ae!==ae}var J=typeof Object.is=="function"?Object.is:_,Z=G.useState,Q=G.useEffect,ee=G.useLayoutEffect,te=G.useDebugValue;function ne(se,ae){var ce=ae(),ue=Z({inst:{value:ce,getSnapshot:ae}}),de=ue[0].inst,me=ue[1];return ee(function(){de.value=ce,de.getSnapshot=ae,ie(de)&&me({inst:de})},[se,ce,ae]),Q(function(){return ie(de)&&me({inst:de}),se(function(){ie(de)&&me({inst:de})})},[se]),te(ce),ce}function ie(se){var ae=se.getSnapshot;se=se.value;try{var ce=ae();return!J(se,ce)}catch{return!0}}function re(se,ae){return ae()}var oe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?re:ne;return useSyncExternalStoreShim_production.useSyncExternalStore=G.useSyncExternalStore!==void 0?G.useSyncExternalStore:oe,useSyncExternalStoreShim_production}var hasRequiredShim;function requireShim(){return hasRequiredShim||(hasRequiredShim=1,shim.exports=requireUseSyncExternalStoreShim_production()),shim.exports}var hasRequiredWithSelector_production;function requireWithSelector_production(){if(hasRequiredWithSelector_production)return withSelector_production;hasRequiredWithSelector_production=1;var G=requireReact(),_=requireShim();function J(re,oe){return re===oe&&(re!==0||1/re===1/oe)||re!==re&&oe!==oe}var Z=typeof Object.is=="function"?Object.is:J,Q=_.useSyncExternalStore,ee=G.useRef,te=G.useEffect,ne=G.useMemo,ie=G.useDebugValue;return withSelector_production.useSyncExternalStoreWithSelector=function(re,oe,se,ae,ce){var ue=ee(null);if(ue.current===null){var de={hasValue:!1,value:null};ue.current=de}else de=ue.current;ue=ne(function(){function fe(Ce){if(!_e){if(_e=!0,ye=Ce,Ce=ae(Ce),ce!==void 0&&de.hasValue){var Me=de.value;if(ce(Me,Ce))return be=Me}return be=Ce}if(Me=be,Z(ye,Ce))return Me;var Re=ae(Ce);return ce!==void 0&&ce(Me,Re)?(ye=Ce,Me):(ye=Ce,be=Re)}var _e=!1,ye,be,Se=se===void 0?null:se;return[function(){return fe(oe())},Se===null?void 0:function(){return fe(Se())}]},[oe,se,ae,ce]);var me=Q(re,ue[0],ue[1]);return te(function(){de.hasValue=!0,de.value=me},[me]),ie(me),me},withSelector_production}var hasRequiredWithSelector;function requireWithSelector(){return hasRequiredWithSelector||(hasRequiredWithSelector=1,withSelector.exports=requireWithSelector_production()),withSelector.exports}var withSelectorExports=requireWithSelector();const useSyncExternalStoreExports=getDefaultExportFromCjs(withSelectorExports),createStoreImpl=G=>{let _;const J=new Set,Z=(re,oe)=>{const se=typeof re=="function"?re(_):re;if(!Object.is(se,_)){const ae=_;_=oe??(typeof se!="object"||se===null)?se:Object.assign({},_,se),J.forEach(ce=>ce(_,ae))}},Q=()=>_,ne={setState:Z,getState:Q,getInitialState:()=>ie,subscribe:re=>(J.add(re),()=>J.delete(re))},ie=_=G(Z,Q,ne);return ne},createStore$1=(G=>G?createStoreImpl(G):createStoreImpl),{useSyncExternalStoreWithSelector}=useSyncExternalStoreExports,identity$1=G=>G;function useStoreWithEqualityFn(G,_=identity$1,J){const Z=useSyncExternalStoreWithSelector(G.subscribe,G.getState,G.getInitialState,_,J);return React.useDebugValue(Z),Z}const createWithEqualityFnImpl=(G,_)=>{const J=createStore$1(G),Z=(Q,ee=_)=>useStoreWithEqualityFn(J,Q,ee);return Object.assign(Z,J),Z},createWithEqualityFn=((G,_)=>G?createWithEqualityFnImpl(G,_):createWithEqualityFnImpl);var reactReconciler={exports:{}},reactReconciler_production={exports:{}},scheduler$1={exports:{}},scheduler_production$1={};var hasRequiredScheduler_production$1;function requireScheduler_production$1(){return hasRequiredScheduler_production$1||(hasRequiredScheduler_production$1=1,(function(G){function _(ke,Fe){var Ve=ke.length;ke.push(Fe);e:for(;0<Ve;){var $e=Ve-1>>>1,Xe=ke[$e];if(0<Q(Xe,Fe))ke[$e]=Fe,ke[Ve]=Xe,Ve=$e;else break e}}function J(ke){return ke.length===0?null:ke[0]}function Z(ke){if(ke.length===0)return null;var Fe=ke[0],Ve=ke.pop();if(Ve!==Fe){ke[0]=Ve;e:for(var $e=0,Xe=ke.length,ze=Xe>>>1;$e<ze;){var qe=2*($e+1)-1,et=ke[qe],ot=qe+1,St=ke[ot];if(0>Q(et,Ve))ot<Xe&&0>Q(St,et)?(ke[$e]=St,ke[ot]=Ve,$e=ot):(ke[$e]=et,ke[qe]=Ve,$e=qe);else if(ot<Xe&&0>Q(St,Ve))ke[$e]=St,ke[ot]=Ve,$e=ot;else break e}}return Fe}function Q(ke,Fe){var Ve=ke.sortIndex-Fe.sortIndex;return Ve!==0?Ve:ke.id-Fe.id}if(G.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var ee=performance;G.unstable_now=function(){return ee.now()}}else{var te=Date,ne=te.now();G.unstable_now=function(){return te.now()-ne}}var ie=[],re=[],oe=1,se=null,ae=3,ce=!1,ue=!1,de=!1,me=typeof setTimeout=="function"?setTimeout:null,fe=typeof clearTimeout=="function"?clearTimeout:null,_e=typeof setImmediate<"u"?setImmediate:null;function ye(ke){for(var Fe=J(re);Fe!==null;){if(Fe.callback===null)Z(re);else if(Fe.startTime<=ke)Z(re),Fe.sortIndex=Fe.expirationTime,_(ie,Fe);else break;Fe=J(re)}}function be(ke){if(de=!1,ye(ke),!ue)if(J(ie)!==null)ue=!0,Ge();else{var Fe=J(re);Fe!==null&&Ye(be,Fe.startTime-ke)}}var Se=!1,Ce=-1,Me=5,Re=-1;function Te(){return!(G.unstable_now()-Re<Me)}function Ee(){if(Se){var ke=G.unstable_now();Re=ke;var Fe=!0;try{e:{ue=!1,de&&(de=!1,fe(Ce),Ce=-1),ce=!0;var Ve=ae;try{t:{for(ye(ke),se=J(ie);se!==null&&!(se.expirationTime>ke&&Te());){var $e=se.callback;if(typeof $e=="function"){se.callback=null,ae=se.priorityLevel;var Xe=$e(se.expirationTime<=ke);if(ke=G.unstable_now(),typeof Xe=="function"){se.callback=Xe,ye(ke),Fe=!0;break t}se===J(ie)&&Z(ie),ye(ke)}else Z(ie);se=J(ie)}if(se!==null)Fe=!0;else{var ze=J(re);ze!==null&&Ye(be,ze.startTime-ke),Fe=!1}}break e}finally{se=null,ae=Ve,ce=!1}Fe=void 0}}finally{Fe?De():Se=!1}}}var De;if(typeof _e=="function")De=function(){_e(Ee)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,Ue=Le.port2;Le.port1.onmessage=Ee,De=function(){Ue.postMessage(null)}}else De=function(){me(Ee,0)};function Ge(){Se||(Se=!0,De())}function Ye(ke,Fe){Ce=me(function(){ke(G.unstable_now())},Fe)}G.unstable_IdlePriority=5,G.unstable_ImmediatePriority=1,G.unstable_LowPriority=4,G.unstable_NormalPriority=3,G.unstable_Profiling=null,G.unstable_UserBlockingPriority=2,G.unstable_cancelCallback=function(ke){ke.callback=null},G.unstable_continueExecution=function(){ue||ce||(ue=!0,Ge())},G.unstable_forceFrameRate=function(ke){0>ke||125<ke?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Me=0<ke?Math.floor(1e3/ke):5},G.unstable_getCurrentPriorityLevel=function(){return ae},G.unstable_getFirstCallbackNode=function(){return J(ie)},G.unstable_next=function(ke){switch(ae){case 1:case 2:case 3:var Fe=3;break;default:Fe=ae}var Ve=ae;ae=Fe;try{return ke()}finally{ae=Ve}},G.unstable_pauseExecution=function(){},G.unstable_requestPaint=function(){},G.unstable_runWithPriority=function(ke,Fe){switch(ke){case 1:case 2:case 3:case 4:case 5:break;default:ke=3}var Ve=ae;ae=ke;try{return Fe()}finally{ae=Ve}},G.unstable_scheduleCallback=function(ke,Fe,Ve){var $e=G.unstable_now();switch(typeof Ve=="object"&&Ve!==null?(Ve=Ve.delay,Ve=typeof Ve=="number"&&0<Ve?$e+Ve:$e):Ve=$e,ke){case 1:var Xe=-1;break;case 2:Xe=250;break;case 5:Xe=1073741823;break;case 4:Xe=1e4;break;default:Xe=5e3}return Xe=Ve+Xe,ke={id:oe++,callback:Fe,priorityLevel:ke,startTime:Ve,expirationTime:Xe,sortIndex:-1},Ve>$e?(ke.sortIndex=Ve,_(re,ke),J(ie)===null&&ke===J(re)&&(de?(fe(Ce),Ce=-1):de=!0,Ye(be,Ve-$e))):(ke.sortIndex=Xe,_(ie,ke),ue||ce||(ue=!0,Ge())),ke},G.unstable_shouldYield=Te,G.unstable_wrapCallback=function(ke){var Fe=ae;return function(){var Ve=ae;ae=Fe;try{return ke.apply(this,arguments)}finally{ae=Ve}}}})(scheduler_production$1)),scheduler_production$1}var hasRequiredScheduler$1;function requireScheduler$1(){return hasRequiredScheduler$1||(hasRequiredScheduler$1=1,scheduler$1.exports=requireScheduler_production$1()),scheduler$1.exports}var hasRequiredReactReconciler_production;function requireReactReconciler_production(){return hasRequiredReactReconciler_production||(hasRequiredReactReconciler_production=1,(function(G){G.exports=function(_){function J(pe,ge,Ae,Pe){return new $u(pe,ge,Ae,Pe)}function Z(){}function Q(pe){var ge="https://react.dev/errors/"+pe;if(1<arguments.length){ge+="?args[]="+encodeURIComponent(arguments[1]);for(var Ae=2;Ae<arguments.length;Ae++)ge+="&args[]="+encodeURIComponent(arguments[Ae])}return"Minified React error #"+pe+"; visit "+ge+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ee(pe){return pe===null||typeof pe!="object"?null:(pe=th&&pe[th]||pe["@@iterator"],typeof pe=="function"?pe:null)}function te(pe){if(pe==null)return null;if(typeof pe=="function")return pe.$$typeof===So?null:pe.displayName||pe.name||null;if(typeof pe=="string")return pe;switch(pe){case Qo:return"Fragment";case ws:return"Portal";case eh:return"Profiler";case Qu:return"StrictMode";case Gc:return"Suspense";case qa:return"SuspenseList"}if(typeof pe=="object")switch(pe.$$typeof){case Ys:return(pe.displayName||"Context")+".Provider";case Xa:return(pe._context.displayName||"Context")+".Consumer";case el:var ge=pe.render;return pe=pe.displayName,pe||(pe=ge.displayName||ge.name||"",pe=pe!==""?"ForwardRef("+pe+")":"ForwardRef"),pe;case Hl:return ge=pe.displayName||null,ge!==null?ge:te(pe.type)||"Memo";case Ps:ge=pe._payload,pe=pe._init;try{return te(pe(ge))}catch{}}return null}function ne(pe){if(Hc===void 0)try{throw Error()}catch(Ae){var ge=Ae.stack.trim().match(/\n( *(at )?)/);Hc=ge&&ge[1]||"",ih=-1<Ae.stack.indexOf(`
    at`)?" (<anonymous>)":-1<Ae.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hc+pe+ih}function ie(pe,ge){if(!pe||$a)return"";$a=!0;var Ae=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var Pe={DetermineComponentFrameRoot:function(){try{if(ge){var mi=function(){throw Error()};if(Object.defineProperty(mi.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(mi,[])}catch(Li){var gi=Li}Reflect.construct(pe,[],mi)}else{try{mi.call()}catch(Li){gi=Li}pe.call(mi.prototype)}}else{try{throw Error()}catch(Li){gi=Li}(mi=pe())&&typeof mi.catch=="function"&&mi.catch(function(){})}}catch(Li){if(Li&&gi&&typeof Li.stack=="string")return[Li.stack,gi.stack]}return[null,null]}};Pe.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Ne=Object.getOwnPropertyDescriptor(Pe.DetermineComponentFrameRoot,"name");Ne&&Ne.configurable&&Object.defineProperty(Pe.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Be=Pe.DetermineComponentFrameRoot(),Je=Be[0],st=Be[1];if(Je&&st){var xt=Je.split(`
`),Gt=st.split(`
`);for(Ne=Pe=0;Pe<xt.length&&!xt[Pe].includes("DetermineComponentFrameRoot");)Pe++;for(;Ne<Gt.length&&!Gt[Ne].includes("DetermineComponentFrameRoot");)Ne++;if(Pe===xt.length||Ne===Gt.length)for(Pe=xt.length-1,Ne=Gt.length-1;1<=Pe&&0<=Ne&&xt[Pe]!==Gt[Ne];)Ne--;for(;1<=Pe&&0<=Ne;Pe--,Ne--)if(xt[Pe]!==Gt[Ne]){if(Pe!==1||Ne!==1)do if(Pe--,Ne--,0>Ne||xt[Pe]!==Gt[Ne]){var oi=`
`+xt[Pe].replace(" at new "," at ");return pe.displayName&&oi.includes("<anonymous>")&&(oi=oi.replace("<anonymous>",pe.displayName)),oi}while(1<=Pe&&0<=Ne);break}}}finally{$a=!1,Error.prepareStackTrace=Ae}return(Ae=pe?pe.displayName||pe.name:"")?ne(Ae):""}function re(pe){switch(pe.tag){case 26:case 27:case 5:return ne(pe.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 15:return pe=ie(pe.type,!1),pe;case 11:return pe=ie(pe.type.render,!1),pe;case 1:return pe=ie(pe.type,!0),pe;default:return""}}function oe(pe){try{var ge="";do ge+=re(pe),pe=pe.return;while(pe);return ge}catch(Ae){return`
Error generating stack: `+Ae.message+`
`+Ae.stack}}function se(pe){var ge=pe,Ae=pe;if(pe.alternate)for(;ge.return;)ge=ge.return;else{pe=ge;do ge=pe,(ge.flags&4098)!==0&&(Ae=ge.return),pe=ge.return;while(pe)}return ge.tag===3?Ae:null}function ae(pe){if(se(pe)!==pe)throw Error(Q(188))}function ce(pe){var ge=pe.alternate;if(!ge){if(ge=se(pe),ge===null)throw Error(Q(188));return ge!==pe?null:pe}for(var Ae=pe,Pe=ge;;){var Ne=Ae.return;if(Ne===null)break;var Be=Ne.alternate;if(Be===null){if(Pe=Ne.return,Pe!==null){Ae=Pe;continue}break}if(Ne.child===Be.child){for(Be=Ne.child;Be;){if(Be===Ae)return ae(Ne),pe;if(Be===Pe)return ae(Ne),ge;Be=Be.sibling}throw Error(Q(188))}if(Ae.return!==Pe.return)Ae=Ne,Pe=Be;else{for(var Je=!1,st=Ne.child;st;){if(st===Ae){Je=!0,Ae=Ne,Pe=Be;break}if(st===Pe){Je=!0,Pe=Ne,Ae=Be;break}st=st.sibling}if(!Je){for(st=Be.child;st;){if(st===Ae){Je=!0,Ae=Be,Pe=Ne;break}if(st===Pe){Je=!0,Pe=Be,Ae=Ne;break}st=st.sibling}if(!Je)throw Error(Q(189))}}if(Ae.alternate!==Pe)throw Error(Q(190))}if(Ae.tag!==3)throw Error(Q(188));return Ae.stateNode.current===Ae?pe:ge}function ue(pe){var ge=pe.tag;if(ge===5||ge===26||ge===27||ge===6)return pe;for(pe=pe.child;pe!==null;){if(ge=ue(pe),ge!==null)return ge;pe=pe.sibling}return null}function de(pe){var ge=pe.tag;if(ge===5||ge===26||ge===27||ge===6)return pe;for(pe=pe.child;pe!==null;){if(pe.tag!==4&&(ge=de(pe),ge!==null))return ge;pe=pe.sibling}return null}function me(pe){return{current:pe}}function fe(pe){0>ba||(pe.current=Ql[ba],Ql[ba]=null,ba--)}function _e(pe,ge){ba++,Ql[ba]=pe.current,pe.current=ge}function ye(pe){return pe>>>=0,pe===0?32:31-(ec(pe)/Vd|0)|0}function be(pe){var ge=pe&42;if(ge!==0)return ge;switch(pe&-pe){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return pe&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return pe&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return pe}}function Se(pe,ge){var Ae=pe.pendingLanes;if(Ae===0)return 0;var Pe=0,Ne=pe.suspendedLanes,Be=pe.pingedLanes,Je=pe.warmLanes;pe=pe.finishedLanes!==0;var st=Ae&134217727;return st!==0?(Ae=st&~Ne,Ae!==0?Pe=be(Ae):(Be&=st,Be!==0?Pe=be(Be):pe||(Je=st&~Je,Je!==0&&(Pe=be(Je))))):(st=Ae&~Ne,st!==0?Pe=be(st):Be!==0?Pe=be(Be):pe||(Je=Ae&~Je,Je!==0&&(Pe=be(Je)))),Pe===0?0:ge!==0&&ge!==Pe&&(ge&Ne)===0&&(Ne=Pe&-Pe,Je=ge&-ge,Ne>=Je||Ne===32&&(Je&4194176)!==0)?ge:Pe}function Ce(pe,ge){return(pe.pendingLanes&~(pe.suspendedLanes&~pe.pingedLanes)&ge)===0}function Me(pe,ge){switch(pe){case 1:case 2:case 4:case 8:return ge+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return ge+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Re(){var pe=rl;return rl<<=1,(rl&4194176)===0&&(rl=128),pe}function Te(){var pe=tc;return tc<<=1,(tc&62914560)===0&&(tc=4194304),pe}function Ee(pe){for(var ge=[],Ae=0;31>Ae;Ae++)ge.push(pe);return ge}function De(pe,ge){pe.pendingLanes|=ge,ge!==268435456&&(pe.suspendedLanes=0,pe.pingedLanes=0,pe.warmLanes=0)}function Le(pe,ge,Ae,Pe,Ne,Be){var Je=pe.pendingLanes;pe.pendingLanes=Ae,pe.suspendedLanes=0,pe.pingedLanes=0,pe.warmLanes=0,pe.expiredLanes&=Ae,pe.entangledLanes&=Ae,pe.errorRecoveryDisabledLanes&=Ae,pe.shellSuspendCounter=0;var st=pe.entanglements,xt=pe.expirationTimes,Gt=pe.hiddenUpdates;for(Ae=Je&~Ae;0<Ae;){var oi=31-Gr(Ae),mi=1<<oi;st[oi]=0,xt[oi]=-1;var gi=Gt[oi];if(gi!==null)for(Gt[oi]=null,oi=0;oi<gi.length;oi++){var Li=gi[oi];Li!==null&&(Li.lane&=-536870913)}Ae&=~mi}Pe!==0&&Ue(pe,Pe,0),Be!==0&&Ne===0&&pe.tag!==0&&(pe.suspendedLanes|=Be&~(Je&~ge))}function Ue(pe,ge,Ae){pe.pendingLanes|=ge,pe.suspendedLanes&=~ge;var Pe=31-Gr(ge);pe.entangledLanes|=ge,pe.entanglements[Pe]=pe.entanglements[Pe]|1073741824|Ae&4194218}function Ge(pe,ge){var Ae=pe.entangledLanes|=ge;for(pe=pe.entanglements;Ae;){var Pe=31-Gr(Ae),Ne=1<<Pe;Ne&ge|pe[Pe]&ge&&(pe[Pe]|=ge),Ae&=~Ne}}function Ye(pe){return pe&=-pe,2<pe?8<pe?(pe&134217727)!==0?32:268435456:8:2}function ke(pe){if(Hr&&typeof Hr.onCommitFiberRoot=="function")try{Hr.onCommitFiberRoot(al,pe,void 0,(pe.current.flags&128)===128)}catch{}}function Fe(pe){if(typeof Yd=="function"&&Lh(pe),Hr&&typeof Hr.setStrictMode=="function")try{Hr.setStrictMode(al,pe)}catch{}}function Ve(pe,ge){return pe===ge&&(pe!==0||1/pe===1/ge)||pe!==pe&&ge!==ge}function $e(pe,ge){if(typeof pe=="object"&&pe!==null){var Ae=ou.get(pe);return Ae!==void 0?Ae:(ge={value:pe,source:ge,stack:oe(ge)},ou.set(pe,ge),ge)}return{value:pe,source:ge,stack:oe(ge)}}function Xe(pe,ge){Pn[zn++]=rc,Pn[zn++]=nc,nc=pe,rc=ge}function ze(pe,ge,Ae){ss[as++]=Js,ss[as++]=_s,ss[as++]=Rs,Rs=pe;var Pe=Js;pe=_s;var Ne=32-Gr(Pe)-1;Pe&=~(1<<Ne),Ae+=1;var Be=32-Gr(ge)+Ne;if(30<Be){var Je=Ne-Ne%5;Be=(Pe&(1<<Je)-1).toString(32),Pe>>=Je,Ne-=Je,Js=1<<32-Gr(ge)+Ne|Ae<<Ne|Pe,_s=Be+pe}else Js=1<<Be|Ae<<Ne|Pe,_s=pe}function qe(pe){pe.return!==null&&(Xe(pe,1),ze(pe,1,0))}function et(pe){for(;pe===nc;)nc=Pn[--zn],Pn[zn]=null,rc=Pn[--zn],Pn[zn]=null;for(;pe===Rs;)Rs=ss[--as],ss[as]=null,_s=ss[--as],ss[as]=null,Js=ss[--as],ss[as]=null}function ot(pe,ge){_e(Os,ge),_e(sc,pe),_e(cr,null),pe=Co(ge),fe(cr),_e(cr,pe)}function St(){fe(cr),fe(sc),fe(Os)}function it(pe){pe.memoizedState!==null&&_e(ol,pe);var ge=cr.current,Ae=bd(ge,pe.type);ge!==Ae&&(_e(sc,pe),_e(cr,Ae))}function lt(pe){sc.current===pe&&(fe(cr),fe(sc)),ol.current===pe&&(fe(ol),qs?Oi._currentValue=jr:Oi._currentValue2=jr)}function gt(pe){var ge=Error(Q(418,""));throw qt($e(ge,pe)),ac}function kt(pe,ge){if(!Nr)throw Error(Q(175));_f(pe.stateNode,pe.type,pe.memoizedProps,ge,pe)||gt(pe)}function Jt(pe){for(Sr=pe.return;Sr;)switch(Sr.tag){case 3:case 27:ys=!0;return;case 5:case 13:ys=!1;return;default:Sr=Sr.return}}function li(pe){if(!Nr||pe!==Sr)return!1;if(!tn)return Jt(pe),tn=!0,!1;var ge=!1;if(pr?pe.tag!==3&&pe.tag!==27&&(pe.tag!==5||kd(pe.type)&&!Ka(pe.type,pe.memoizedProps))&&(ge=!0):pe.tag!==3&&(pe.tag!==5||kd(pe.type)&&!Ka(pe.type,pe.memoizedProps))&&(ge=!0),ge&&gr&&gt(pe),Jt(pe),pe.tag===13){if(!Nr)throw Error(Q(316));if(pe=pe.memoizedState,pe=pe!==null?pe.dehydrated:null,!pe)throw Error(Q(317));gr=Ld(pe)}else gr=Sr?xh(pe.stateNode):null;return!0}function si(){Nr&&(gr=Sr=null,tn=!1)}function qt(pe){os===null?os=[pe]:os.push(pe)}function vt(){for(var pe=Qa,ge=ll=Qa=0;ge<pe;){var Ae=ls[ge];ls[ge++]=null;var Pe=ls[ge];ls[ge++]=null;var Ne=ls[ge];ls[ge++]=null;var Be=ls[ge];if(ls[ge++]=null,Pe!==null&&Ne!==null){var Je=Pe.pending;Je===null?Ne.next=Ne:(Ne.next=Je.next,Je.next=Ne),Pe.pending=Ne}Be!==0&&Lt(Ae,Ne,Be)}}function Ke(pe,ge,Ae,Pe){ls[Qa++]=pe,ls[Qa++]=ge,ls[Qa++]=Ae,ls[Qa++]=Pe,ll|=Pe,pe.lanes|=Pe,pe=pe.alternate,pe!==null&&(pe.lanes|=Pe)}function Tt(pe,ge,Ae,Pe){return Ke(pe,ge,Ae,Pe),jt(pe)}function Ut(pe,ge){return Ke(pe,null,null,ge),jt(pe)}function Lt(pe,ge,Ae){pe.lanes|=Ae;var Pe=pe.alternate;Pe!==null&&(Pe.lanes|=Ae);for(var Ne=!1,Be=pe.return;Be!==null;)Be.childLanes|=Ae,Pe=Be.alternate,Pe!==null&&(Pe.childLanes|=Ae),Be.tag===22&&(pe=Be.stateNode,pe===null||pe._visibility&1||(Ne=!0)),pe=Be,Be=Be.return;Ne&&ge!==null&&pe.tag===3&&(Be=pe.stateNode,Ne=31-Gr(Ae),Be=Be.hiddenUpdates,pe=Be[Ne],pe===null?Be[Ne]=[ge]:pe.push(ge),ge.lane=Ae|536870912)}function jt(pe){if(50<Bo)throw Bo=0,Br=null,Error(Q(185));for(var ge=pe.return;ge!==null;)pe=ge,ge=pe.return;return pe.tag===3?pe.stateNode:null}function ri(pe){pe!==wo&&pe.next===null&&(wo===null?cl=wo=pe:wo=wo.next=pe),lc=!0,oc||(oc=!0,dt(di))}function ti(pe,ge){if(!Ns&&lc){Ns=!0;do for(var Ae=!1,Pe=cl;Pe!==null;){if(pe!==0){var Ne=Pe.pendingLanes;if(Ne===0)var Be=0;else{var Je=Pe.suspendedLanes,st=Pe.pingedLanes;Be=(1<<31-Gr(42|pe)+1)-1,Be&=Ne&~(Je&~st),Be=Be&201326677?Be&201326677|1:Be?Be|2:0}Be!==0&&(Ae=!0,_t(Pe,Be))}else Be=Vi,Be=Se(Pe,Pe===Gi?Be:0),(Be&3)===0||Ce(Pe,Be)||(Ae=!0,_t(Pe,Be));Pe=Pe.next}while(Ae);Ns=!1}}function di(){lc=oc=!1;var pe=0;eo!==0&&(Za()&&(pe=eo),eo=0);for(var ge=mr(),Ae=null,Pe=cl;Pe!==null;){var Ne=Pe.next,Be=Qe(Pe,ge);Be===0?(Pe.next=null,Ae===null?cl=Ne:Ae.next=Ne,Ne===null&&(wo=Ae)):(Ae=Pe,(pe!==0||(Be&3)!==0)&&(lc=!0)),Pe=Ne}ti(pe)}function Qe(pe,ge){for(var Ae=pe.suspendedLanes,Pe=pe.pingedLanes,Ne=pe.expirationTimes,Be=pe.pendingLanes&-62914561;0<Be;){var Je=31-Gr(Be),st=1<<Je,xt=Ne[Je];xt===-1?((st&Ae)===0||(st&Pe)!==0)&&(Ne[Je]=Me(st,ge)):xt<=ge&&(pe.expiredLanes|=st),Be&=~st}if(ge=Gi,Ae=Vi,Ae=Se(pe,pe===ge?Ae:0),Pe=pe.callbackNode,Ae===0||pe===ge&&gn===2||pe.cancelPendingCommit!==null)return Pe!==null&&Pe!==null&&ic(Pe),pe.callbackNode=null,pe.callbackPriority=0;if((Ae&3)===0||Ce(pe,Ae)){if(ge=Ae&-Ae,ge===pe.callbackPriority)return ge;switch(Pe!==null&&ic(Pe),Ye(Ae)){case 2:case 8:Ae=Hd;break;case 32:Ae=su;break;case 268435456:Ae=au;break;default:Ae=su}return Pe=He.bind(null,pe),Ae=sl(Ae,Pe),pe.callbackPriority=ge,pe.callbackNode=Ae,ge}return Pe!==null&&Pe!==null&&ic(Pe),pe.callbackPriority=2,pe.callbackNode=null,2}function He(pe,ge){var Ae=pe.callbackNode;if(or()&&pe.callbackNode!==Ae)return null;var Pe=Vi;return Pe=Se(pe,pe===Gi?Pe:0),Pe===0?null:(zl(pe,Pe,ge),Qe(pe,mr()),pe.callbackNode!=null&&pe.callbackNode===Ae?He.bind(null,pe):null)}function _t(pe,ge){if(or())return null;zl(pe,ge,!0)}function dt(pe){Jn?$c(function(){(Mi&6)!==0?sl(Dh,pe):pe()}):sl(Dh,pe)}function At(){return eo===0&&(eo=Re()),eo}function Nt(pe,ge){if(cc===null){var Ae=cc=[];lu=0,Yr=At(),io={status:"pending",value:void 0,then:function(Pe){Ae.push(Pe)}}}return lu++,ge.then(fi,fi),ge}function fi(){if(--lu===0&&cc!==null){io!==null&&(io.status="fulfilled");var pe=cc;cc=null,Yr=0,io=null;for(var ge=0;ge<pe.length;ge++)(0,pe[ge])()}}function Kt(pe,ge){var Ae=[],Pe={status:"pending",value:null,reason:null,then:function(Ne){Ae.push(Ne)}};return pe.then(function(){Pe.status="fulfilled",Pe.value=ge;for(var Ne=0;Ne<Ae.length;Ne++)(0,Ae[Ne])(ge)},function(Ne){for(Pe.status="rejected",Pe.reason=Ne,Ne=0;Ne<Ae.length;Ne++)(0,Ae[Ne])(void 0)}),Pe}function It(pe){pe.updateQueue={baseState:pe.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yt(pe,ge){pe=pe.updateQueue,ge.updateQueue===pe&&(ge.updateQueue={baseState:pe.baseState,firstBaseUpdate:pe.firstBaseUpdate,lastBaseUpdate:pe.lastBaseUpdate,shared:pe.shared,callbacks:null})}function Rt(pe){return{lane:pe,tag:0,payload:null,callback:null,next:null}}function Pt(pe,ge,Ae){var Pe=pe.updateQueue;if(Pe===null)return null;if(Pe=Pe.shared,(Mi&2)!==0){var Ne=Pe.pending;return Ne===null?ge.next=ge:(ge.next=Ne.next,Ne.next=ge),Pe.pending=ge,ge=jt(pe),Lt(pe,null,Ae),ge}return Ke(pe,Pe,ge,Ae),jt(pe)}function mt(pe,ge,Ae){if(ge=ge.updateQueue,ge!==null&&(ge=ge.shared,(Ae&4194176)!==0)){var Pe=ge.lanes;Pe&=pe.pendingLanes,Ae|=Pe,ge.lanes=Ae,Ge(pe,Ae)}}function tt(pe,ge){var Ae=pe.updateQueue,Pe=pe.alternate;if(Pe!==null&&(Pe=Pe.updateQueue,Ae===Pe)){var Ne=null,Be=null;if(Ae=Ae.firstBaseUpdate,Ae!==null){do{var Je={lane:Ae.lane,tag:Ae.tag,payload:Ae.payload,callback:null,next:null};Be===null?Ne=Be=Je:Be=Be.next=Je,Ae=Ae.next}while(Ae!==null);Be===null?Ne=Be=ge:Be=Be.next=ge}else Ne=Be=ge;Ae={baseState:Pe.baseState,firstBaseUpdate:Ne,lastBaseUpdate:Be,shared:Pe.shared,callbacks:Pe.callbacks},pe.updateQueue=Ae;return}pe=Ae.lastBaseUpdate,pe===null?Ae.firstBaseUpdate=ge:pe.next=ge,Ae.lastBaseUpdate=ge}function Ze(){if(ul){var pe=io;if(pe!==null)throw pe}}function Zt(pe,ge,Ae,Pe){ul=!1;var Ne=pe.updateQueue;xa=!1;var Be=Ne.firstBaseUpdate,Je=Ne.lastBaseUpdate,st=Ne.shared.pending;if(st!==null){Ne.shared.pending=null;var xt=st,Gt=xt.next;xt.next=null,Je===null?Be=Gt:Je.next=Gt,Je=xt;var oi=pe.alternate;oi!==null&&(oi=oi.updateQueue,st=oi.lastBaseUpdate,st!==Je&&(st===null?oi.firstBaseUpdate=Gt:st.next=Gt,oi.lastBaseUpdate=xt))}if(Be!==null){var mi=Ne.baseState;Je=0,oi=Gt=xt=null,st=Be;do{var gi=st.lane&-536870913,Li=gi!==st.lane;if(Li?(Vi&gi)===gi:(Pe&gi)===gi){gi!==0&&gi===Yr&&(ul=!0),oi!==null&&(oi=oi.next={lane:0,tag:st.tag,payload:st.payload,callback:null,next:null});e:{var Wr=pe,fc=st;gi=ge;var ko=Ae;switch(fc.tag){case 1:if(Wr=fc.payload,typeof Wr=="function"){mi=Wr.call(ko,mi,gi);break e}mi=Wr;break e;case 3:Wr.flags=Wr.flags&-65537|128;case 0:if(Wr=fc.payload,gi=typeof Wr=="function"?Wr.call(ko,mi,gi):Wr,gi==null)break e;mi=Ao({},mi,gi);break e;case 2:xa=!0}}gi=st.callback,gi!==null&&(pe.flags|=64,Li&&(pe.flags|=8192),Li=Ne.callbacks,Li===null?Ne.callbacks=[gi]:Li.push(gi))}else Li={lane:gi,tag:st.tag,payload:st.payload,callback:st.callback,next:null},oi===null?(Gt=oi=Li,xt=mi):oi=oi.next=Li,Je|=gi;if(st=st.next,st===null){if(st=Ne.shared.pending,st===null)break;Li=st,st=Li.next,Li.next=null,Ne.lastBaseUpdate=Li,Ne.shared.pending=null}}while(!0);oi===null&&(xt=mi),Ne.baseState=xt,Ne.firstBaseUpdate=Gt,Ne.lastBaseUpdate=oi,Be===null&&(Ne.shared.lanes=0),ds|=Je,pe.lanes=Je,pe.memoizedState=mi}}function rt(pe,ge){if(typeof pe!="function")throw Error(Q(191,pe));pe.call(ge)}function Qt(pe,ge){var Ae=pe.callbacks;if(Ae!==null)for(pe.callbacks=null,pe=0;pe<Ae.length;pe++)rt(Ae[pe],ge)}function zt(pe,ge){if(rs(pe,ge))return!0;if(typeof pe!="object"||pe===null||typeof ge!="object"||ge===null)return!1;var Ae=Object.keys(pe),Pe=Object.keys(ge);if(Ae.length!==Pe.length)return!1;for(Pe=0;Pe<Ae.length;Pe++){var Ne=Ae[Pe];if(!uc.call(ge,Ne)||!rs(pe[Ne],ge[Ne]))return!1}return!0}function ei(pe){return pe=pe.status,pe==="fulfilled"||pe==="rejected"}function Wt(){}function Ft(pe,ge,Ae){switch(Ae=pe[Ae],Ae===void 0?pe.push(ge):Ae!==ge&&(ge.then(Wt,Wt),ge=Ae),ge.status){case"fulfilled":return ge.value;case"rejected":throw pe=ge.reason,pe===fn?Error(Q(483)):pe;default:if(typeof ge.status=="string")ge.then(Wt,Wt);else{if(pe=Gi,pe!==null&&100<pe.shellSuspendCounter)throw Error(Q(482));pe=ge,pe.status="pending",pe.then(function(Pe){if(ge.status==="pending"){var Ne=ge;Ne.status="fulfilled",Ne.value=Pe}},function(Pe){if(ge.status==="pending"){var Ne=ge;Ne.status="rejected",Ne.reason=Pe}})}switch(ge.status){case"fulfilled":return ge.value;case"rejected":throw pe=ge.reason,pe===fn?Error(Q(483)):pe}throw Po=ge,fn}}function hi(){if(Po===null)throw Error(Q(459));var pe=Po;return Po=null,pe}function pi(pe){var ge=bs;return bs+=1,Ks===null&&(Ks=[]),Ft(Ks,pe,ge)}function Di(pe,ge){ge=ge.props.ref,pe.ref=ge!==void 0?ge:null}function Si(pe,ge){throw ge.$$typeof===Zu?Error(Q(525)):(pe=Object.prototype.toString.call(ge),Error(Q(31,pe==="[object Object]"?"object with keys {"+Object.keys(ge).join(", ")+"}":pe)))}function Ii(pe){var ge=pe._init;return ge(pe._payload)}function vn(pe){function ge(wt,yt){if(pe){var Dt=wt.deletions;Dt===null?(wt.deletions=[yt],wt.flags|=16):Dt.push(yt)}}function Ae(wt,yt){if(!pe)return null;for(;yt!==null;)ge(wt,yt),yt=yt.sibling;return null}function Pe(wt){for(var yt=new Map;wt!==null;)wt.key!==null?yt.set(wt.key,wt):yt.set(wt.index,wt),wt=wt.sibling;return yt}function Ne(wt,yt){return wt=xr(wt,yt),wt.index=0,wt.sibling=null,wt}function Be(wt,yt,Dt){return wt.index=Dt,pe?(Dt=wt.alternate,Dt!==null?(Dt=Dt.index,Dt<yt?(wt.flags|=33554434,yt):Dt):(wt.flags|=33554434,yt)):(wt.flags|=1048576,yt)}function Je(wt){return pe&&wt.alternate===null&&(wt.flags|=33554434),wt}function st(wt,yt,Dt,ni){return yt===null||yt.tag!==6?(yt=Ya(Dt,wt.mode,ni),yt.return=wt,yt):(yt=Ne(yt,Dt),yt.return=wt,yt)}function xt(wt,yt,Dt,ni){var Ai=Dt.type;return Ai===Qo?oi(wt,yt,Dt.props.children,ni,Dt.key):yt!==null&&(yt.elementType===Ai||typeof Ai=="object"&&Ai!==null&&Ai.$$typeof===Ps&&Ii(Ai)===yt.type)?(yt=Ne(yt,Dt.props),Di(yt,Dt),yt.return=wt,yt):(yt=gs(Dt.type,Dt.key,Dt.props,null,wt.mode,ni),Di(yt,Dt),yt.return=wt,yt)}function Gt(wt,yt,Dt,ni){return yt===null||yt.tag!==4||yt.stateNode.containerInfo!==Dt.containerInfo||yt.stateNode.implementation!==Dt.implementation?(yt=Zo(Dt,wt.mode,ni),yt.return=wt,yt):(yt=Ne(yt,Dt.children||[]),yt.return=wt,yt)}function oi(wt,yt,Dt,ni,Ai){return yt===null||yt.tag!==7?(yt=ma(Dt,wt.mode,ni,Ai),yt.return=wt,yt):(yt=Ne(yt,Dt),yt.return=wt,yt)}function mi(wt,yt,Dt){if(typeof yt=="string"&&yt!==""||typeof yt=="number"||typeof yt=="bigint")return yt=Ya(""+yt,wt.mode,Dt),yt.return=wt,yt;if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case ga:return Dt=gs(yt.type,yt.key,yt.props,null,wt.mode,Dt),Di(Dt,yt),Dt.return=wt,Dt;case ws:return yt=Zo(yt,wt.mode,Dt),yt.return=wt,yt;case Ps:var ni=yt._init;return yt=ni(yt._payload),mi(wt,yt,Dt)}if(Wa(yt)||ee(yt))return yt=ma(yt,wt.mode,Dt,null),yt.return=wt,yt;if(typeof yt.then=="function")return mi(wt,pi(yt),Dt);if(yt.$$typeof===Ys)return mi(wt,Ll(wt,yt),Dt);Si(wt,yt)}return null}function gi(wt,yt,Dt,ni){var Ai=yt!==null?yt.key:null;if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint")return Ai!==null?null:st(wt,yt,""+Dt,ni);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case ga:return Dt.key===Ai?xt(wt,yt,Dt,ni):null;case ws:return Dt.key===Ai?Gt(wt,yt,Dt,ni):null;case Ps:return Ai=Dt._init,Dt=Ai(Dt._payload),gi(wt,yt,Dt,ni)}if(Wa(Dt)||ee(Dt))return Ai!==null?null:oi(wt,yt,Dt,ni,null);if(typeof Dt.then=="function")return gi(wt,yt,pi(Dt),ni);if(Dt.$$typeof===Ys)return gi(wt,yt,Ll(wt,Dt),ni);Si(wt,Dt)}return null}function Li(wt,yt,Dt,ni,Ai){if(typeof ni=="string"&&ni!==""||typeof ni=="number"||typeof ni=="bigint")return wt=wt.get(Dt)||null,st(yt,wt,""+ni,Ai);if(typeof ni=="object"&&ni!==null){switch(ni.$$typeof){case ga:return wt=wt.get(ni.key===null?Dt:ni.key)||null,xt(yt,wt,ni,Ai);case ws:return wt=wt.get(ni.key===null?Dt:ni.key)||null,Gt(yt,wt,ni,Ai);case Ps:var Sn=ni._init;return ni=Sn(ni._payload),Li(wt,yt,Dt,ni,Ai)}if(Wa(ni)||ee(ni))return wt=wt.get(Dt)||null,oi(yt,wt,ni,Ai,null);if(typeof ni.then=="function")return Li(wt,yt,Dt,pi(ni),Ai);if(ni.$$typeof===Ys)return Li(wt,yt,Dt,Ll(yt,ni),Ai);Si(yt,ni)}return null}function Wr(wt,yt,Dt,ni){for(var Ai=null,Sn=null,Ni=yt,rn=yt=0,rr=null;Ni!==null&&rn<Dt.length;rn++){Ni.index>rn?(rr=Ni,Ni=null):rr=Ni.sibling;var sn=gi(wt,Ni,Dt[rn],ni);if(sn===null){Ni===null&&(Ni=rr);break}pe&&Ni&&sn.alternate===null&&ge(wt,Ni),yt=Be(sn,yt,rn),Sn===null?Ai=sn:Sn.sibling=sn,Sn=sn,Ni=rr}if(rn===Dt.length)return Ae(wt,Ni),tn&&Xe(wt,rn),Ai;if(Ni===null){for(;rn<Dt.length;rn++)Ni=mi(wt,Dt[rn],ni),Ni!==null&&(yt=Be(Ni,yt,rn),Sn===null?Ai=Ni:Sn.sibling=Ni,Sn=Ni);return tn&&Xe(wt,rn),Ai}for(Ni=Pe(Ni);rn<Dt.length;rn++)rr=Li(Ni,wt,rn,Dt[rn],ni),rr!==null&&(pe&&rr.alternate!==null&&Ni.delete(rr.key===null?rn:rr.key),yt=Be(rr,yt,rn),Sn===null?Ai=rr:Sn.sibling=rr,Sn=rr);return pe&&Ni.forEach(function(wa){return ge(wt,wa)}),tn&&Xe(wt,rn),Ai}function fc(wt,yt,Dt,ni){if(Dt==null)throw Error(Q(151));for(var Ai=null,Sn=null,Ni=yt,rn=yt=0,rr=null,sn=Dt.next();Ni!==null&&!sn.done;rn++,sn=Dt.next()){Ni.index>rn?(rr=Ni,Ni=null):rr=Ni.sibling;var wa=gi(wt,Ni,sn.value,ni);if(wa===null){Ni===null&&(Ni=rr);break}pe&&Ni&&wa.alternate===null&&ge(wt,Ni),yt=Be(wa,yt,rn),Sn===null?Ai=wa:Sn.sibling=wa,Sn=wa,Ni=rr}if(sn.done)return Ae(wt,Ni),tn&&Xe(wt,rn),Ai;if(Ni===null){for(;!sn.done;rn++,sn=Dt.next())sn=mi(wt,sn.value,ni),sn!==null&&(yt=Be(sn,yt,rn),Sn===null?Ai=sn:Sn.sibling=sn,Sn=sn);return tn&&Xe(wt,rn),Ai}for(Ni=Pe(Ni);!sn.done;rn++,sn=Dt.next())sn=Li(Ni,wt,rn,sn.value,ni),sn!==null&&(pe&&sn.alternate!==null&&Ni.delete(sn.key===null?rn:sn.key),yt=Be(sn,yt,rn),Sn===null?Ai=sn:Sn.sibling=sn,Sn=sn);return pe&&Ni.forEach(function(vu){return ge(wt,vu)}),tn&&Xe(wt,rn),Ai}function ko(wt,yt,Dt,ni){if(typeof Dt=="object"&&Dt!==null&&Dt.type===Qo&&Dt.key===null&&(Dt=Dt.props.children),typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case ga:e:{for(var Ai=Dt.key;yt!==null;){if(yt.key===Ai){if(Ai=Dt.type,Ai===Qo){if(yt.tag===7){Ae(wt,yt.sibling),ni=Ne(yt,Dt.props.children),ni.return=wt,wt=ni;break e}}else if(yt.elementType===Ai||typeof Ai=="object"&&Ai!==null&&Ai.$$typeof===Ps&&Ii(Ai)===yt.type){Ae(wt,yt.sibling),ni=Ne(yt,Dt.props),Di(ni,Dt),ni.return=wt,wt=ni;break e}Ae(wt,yt);break}else ge(wt,yt);yt=yt.sibling}Dt.type===Qo?(ni=ma(Dt.props.children,wt.mode,ni,Dt.key),ni.return=wt,wt=ni):(ni=gs(Dt.type,Dt.key,Dt.props,null,wt.mode,ni),Di(ni,Dt),ni.return=wt,wt=ni)}return Je(wt);case ws:e:{for(Ai=Dt.key;yt!==null;){if(yt.key===Ai)if(yt.tag===4&&yt.stateNode.containerInfo===Dt.containerInfo&&yt.stateNode.implementation===Dt.implementation){Ae(wt,yt.sibling),ni=Ne(yt,Dt.children||[]),ni.return=wt,wt=ni;break e}else{Ae(wt,yt);break}else ge(wt,yt);yt=yt.sibling}ni=Zo(Dt,wt.mode,ni),ni.return=wt,wt=ni}return Je(wt);case Ps:return Ai=Dt._init,Dt=Ai(Dt._payload),ko(wt,yt,Dt,ni)}if(Wa(Dt))return Wr(wt,yt,Dt,ni);if(ee(Dt)){if(Ai=ee(Dt),typeof Ai!="function")throw Error(Q(150));return Dt=Ai.call(Dt),fc(wt,yt,Dt,ni)}if(typeof Dt.then=="function")return ko(wt,yt,pi(Dt),ni);if(Dt.$$typeof===Ys)return ko(wt,yt,Ll(wt,Dt),ni);Si(wt,Dt)}return typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint"?(Dt=""+Dt,yt!==null&&yt.tag===6?(Ae(wt,yt.sibling),ni=Ne(yt,Dt),ni.return=wt,wt=ni):(Ae(wt,yt),ni=Ya(Dt,wt.mode,ni),ni.return=wt,wt=ni),Je(wt)):Ae(wt,yt)}return function(wt,yt,Dt,ni){try{bs=0;var Ai=ko(wt,yt,Dt,ni);return Ks=null,Ai}catch(Ni){if(Ni===fn)throw Ni;var Sn=J(29,Ni,null,wt.mode);return Sn.lanes=ni,Sn.return=wt,Sn}finally{}}}function Tr(pe,ge){pe=Ds,_e(cs,pe),_e(Zs,ge),Ds=pe|ge.baseLanes}function Ln(){_e(cs,Ds),_e(Zs,Zs.current)}function wr(){Ds=cs.current,fe(Zs),fe(cs)}function _n(pe){var ge=pe.alternate;_e(Kn,Kn.current&1),_e(us,pe),xs===null&&(ge===null||Zs.current!==null||ge.memoizedState!==null)&&(xs=pe)}function Ur(pe){if(pe.tag===22){if(_e(Kn,Kn.current),_e(us,pe),xs===null){var ge=pe.alternate;ge!==null&&ge.memoizedState!==null&&(xs=pe)}}else Bn()}function Bn(){_e(Kn,Kn.current),_e(us,us.current)}function $n(pe){fe(us),xs===pe&&(xs=null),fe(Kn)}function En(pe){for(var ge=pe;ge!==null;){if(ge.tag===13){var Ae=ge.memoizedState;if(Ae!==null&&(Ae=Ae.dehydrated,Ae===null||Qc(Ae)||Zl(Ae)))return ge}else if(ge.tag===19&&ge.memoizedProps.revealOrder!==void 0){if((ge.flags&128)!==0)return ge}else if(ge.child!==null){ge.child.return=ge,ge=ge.child;continue}if(ge===pe)break;for(;ge.sibling===null;){if(ge.return===null||ge.return===pe)return null;ge=ge.return}ge.sibling.return=ge.return,ge=ge.sibling}return null}function ki(){throw Error(Q(321))}function On(pe,ge){if(ge===null)return!1;for(var Ae=0;Ae<ge.length&&Ae<pe.length;Ae++)if(!rs(pe[Ae],ge[Ae]))return!1;return!0}function Ir(pe,ge,Ae,Pe,Ne,Be){return Qs=Be,zi=ge,ge.memoizedState=null,ge.updateQueue=null,ge.lanes=0,Pi.H=pe===null||pe.memoizedState===null?Zn:Cr,Aa=!1,Be=Ae(Pe,Ne),Aa=!1,Rn&&(Be=ra(ge,Ae,Pe,Ne)),ks(pe),Be}function ks(pe){Pi.H=nn;var ge=an!==null&&an.next!==null;if(Qs=0,Hn=an=zi=null,As=!1,Fn=0,hl=null,ge)throw Error(Q(300));pe===null||Yn||(pe=pe.dependencies,pe!==null&&La(pe)&&(Yn=!0))}function ra(pe,ge,Ae,Pe){zi=pe;var Ne=0;do{if(Rn&&(hl=null),Fn=0,Rn=!1,25<=Ne)throw Error(Q(301));if(Ne+=1,Hn=an=null,pe.updateQueue!=null){var Be=pe.updateQueue;Be.lastEffect=null,Be.events=null,Be.stores=null,Be.memoCache!=null&&(Be.memoCache.index=0)}Pi.H=so,Be=ge(Ae,Pe)}while(Rn);return Be}function Al(){var pe=Pi.H,ge=pe.useState()[0];return ge=typeof ge.then=="function"?nt(ge):ge,pe=pe.useState()[0],(an!==null?an.memoizedState:null)!==pe&&(zi.flags|=1024),ge}function sa(){var pe=hc!==0;return hc=0,pe}function ct(pe,ge,Ae){ge.updateQueue=pe.updateQueue,ge.flags&=-2053,pe.lanes&=~Ae}function Et(pe){if(As){for(pe=pe.memoizedState;pe!==null;){var ge=pe.queue;ge!==null&&(ge.pending=null),pe=pe.next}As=!1}Qs=0,Hn=an=zi=null,Rn=!1,Fn=hc=0,hl=null}function Ht(){var pe={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?zi.memoizedState=Hn=pe:Hn=Hn.next=pe,Hn}function je(){if(an===null){var pe=zi.alternate;pe=pe!==null?pe.memoizedState:null}else pe=an.next;var ge=Hn===null?zi.memoizedState:Hn.next;if(ge!==null)Hn=ge,an=pe;else{if(pe===null)throw zi.alternate===null?Error(Q(467)):Error(Q(310));an=pe,pe={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},Hn===null?zi.memoizedState=Hn=pe:Hn=Hn.next=pe}return Hn}function nt(pe){var ge=Fn;return Fn+=1,hl===null&&(hl=[]),pe=Ft(hl,pe,ge),ge=zi,(Hn===null?ge.memoizedState:Hn.next)===null&&(ge=ge.alternate,Pi.H=ge===null||ge.memoizedState===null?Zn:Cr),pe}function pt(pe){if(pe!==null&&typeof pe=="object"){if(typeof pe.then=="function")return nt(pe);if(pe.$$typeof===Ys)return hr(pe)}throw Error(Q(438,String(pe)))}function ft(pe){var ge=null,Ae=zi.updateQueue;if(Ae!==null&&(ge=Ae.memoCache),ge==null){var Pe=zi.alternate;Pe!==null&&(Pe=Pe.updateQueue,Pe!==null&&(Pe=Pe.memoCache,Pe!=null&&(ge={data:Pe.data.map(function(Ne){return Ne.slice()}),index:0})))}if(ge==null&&(ge={data:[],index:0}),Ae===null&&(Ae=uu(),zi.updateQueue=Ae),Ae.memoCache=ge,Ae=ge.data[ge.index],Ae===void 0)for(Ae=ge.data[ge.index]=Array(pe),Pe=0;Pe<pe;Pe++)Ae[Pe]=yd;return ge.index++,Ae}function ut(pe,ge){return typeof ge=="function"?ge(pe):ge}function ii(pe){var ge=je();return ci(ge,an,pe)}function ci(pe,ge,Ae){var Pe=pe.queue;if(Pe===null)throw Error(Q(311));Pe.lastRenderedReducer=Ae;var Ne=pe.baseQueue,Be=Pe.pending;if(Be!==null){if(Ne!==null){var Je=Ne.next;Ne.next=Be.next,Be.next=Je}ge.baseQueue=Ne=Be,Pe.pending=null}if(Be=pe.baseState,Ne===null)pe.memoizedState=Be;else{ge=Ne.next;var st=Je=null,xt=null,Gt=ge,oi=!1;do{var mi=Gt.lane&-536870913;if(mi!==Gt.lane?(Vi&mi)===mi:(Qs&mi)===mi){var gi=Gt.revertLane;if(gi===0)xt!==null&&(xt=xt.next={lane:0,revertLane:0,action:Gt.action,hasEagerState:Gt.hasEagerState,eagerState:Gt.eagerState,next:null}),mi===Yr&&(oi=!0);else if((Qs&gi)===gi){Gt=Gt.next,gi===Yr&&(oi=!0);continue}else mi={lane:0,revertLane:Gt.revertLane,action:Gt.action,hasEagerState:Gt.hasEagerState,eagerState:Gt.eagerState,next:null},xt===null?(st=xt=mi,Je=Be):xt=xt.next=mi,zi.lanes|=gi,ds|=gi;mi=Gt.action,Aa&&Ae(Be,mi),Be=Gt.hasEagerState?Gt.eagerState:Ae(Be,mi)}else gi={lane:mi,revertLane:Gt.revertLane,action:Gt.action,hasEagerState:Gt.hasEagerState,eagerState:Gt.eagerState,next:null},xt===null?(st=xt=gi,Je=Be):xt=xt.next=gi,zi.lanes|=mi,ds|=mi;Gt=Gt.next}while(Gt!==null&&Gt!==ge);if(xt===null?Je=Be:xt.next=st,!rs(Be,pe.memoizedState)&&(Yn=!0,oi&&(Ae=io,Ae!==null)))throw Ae;pe.memoizedState=Be,pe.baseState=Je,pe.baseQueue=xt,Pe.lastRenderedState=Be}return Ne===null&&(Pe.lanes=0),[pe.memoizedState,Pe.dispatch]}function ui(pe){var ge=je(),Ae=ge.queue;if(Ae===null)throw Error(Q(311));Ae.lastRenderedReducer=pe;var Pe=Ae.dispatch,Ne=Ae.pending,Be=ge.memoizedState;if(Ne!==null){Ae.pending=null;var Je=Ne=Ne.next;do Be=pe(Be,Je.action),Je=Je.next;while(Je!==Ne);rs(Be,ge.memoizedState)||(Yn=!0),ge.memoizedState=Be,ge.baseQueue===null&&(ge.baseState=Be),Ae.lastRenderedState=Be}return[Be,Pe]}function ai(pe,ge,Ae){var Pe=zi,Ne=je(),Be=tn;if(Be){if(Ae===void 0)throw Error(Q(407));Ae=Ae()}else Ae=ge();var Je=!rs((an||Ne).memoizedState,Ae);if(Je&&(Ne.memoizedState=Ae,Yn=!0),Ne=Ne.queue,Cl(bi.bind(null,Pe,Ne,pe),[pe]),Ne.getSnapshot!==ge||Je||Hn!==null&&Hn.memoizedState.tag&1){if(Pe.flags|=2048,kn(9,Ti.bind(null,Pe,Ne,Ae,ge),{destroy:void 0},null),Gi===null)throw Error(Q(349));Be||(Qs&60)!==0||vi(Pe,ge,Ae)}return Ae}function vi(pe,ge,Ae){pe.flags|=16384,pe={getSnapshot:ge,value:Ae},ge=zi.updateQueue,ge===null?(ge=uu(),zi.updateQueue=ge,ge.stores=[pe]):(Ae=ge.stores,Ae===null?ge.stores=[pe]:Ae.push(pe))}function Ti(pe,ge,Ae,Pe){ge.value=Ae,ge.getSnapshot=Pe,Ui(ge)&&Ji(pe)}function bi(pe,ge,Ae){return Ae(function(){Ui(ge)&&Ji(pe)})}function Ui(pe){var ge=pe.getSnapshot;pe=pe.value;try{var Ae=ge();return!rs(pe,Ae)}catch{return!0}}function Ji(pe){var ge=Ut(pe,2);ge!==null&&br(ge,pe,2)}function Ki(pe){var ge=Ht();if(typeof pe=="function"){var Ae=pe;if(pe=Ae(),Aa){Fe(!0);try{Ae()}finally{Fe(!1)}}}return ge.memoizedState=ge.baseState=pe,ge.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ut,lastRenderedState:pe},ge}function Hi(pe,ge,Ae,Pe){return pe.baseState=Ae,ci(pe,an,typeof Pe=="function"?Pe:ut)}function on(pe,ge,Ae,Pe,Ne){if(ho(pe))throw Error(Q(485));if(pe=ge.action,pe!==null){var Be={payload:Ne,action:pe,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Je){Be.listeners.push(Je)}};Pi.T!==null?Ae(!0):Be.isTransition=!1,Pe(Be),Ae=ge.pending,Ae===null?(Be.next=ge.pending=Be,Ei(ge,Be)):(Be.next=Ae.next,ge.pending=Ae.next=Be)}}function Ei(pe,ge){var Ae=ge.action,Pe=ge.payload,Ne=pe.state;if(ge.isTransition){var Be=Pi.T,Je={};Pi.T=Je;try{var st=Ae(Ne,Pe),xt=Pi.S;xt!==null&&xt(Je,st),pn(pe,ge,st)}catch(Gt){Wn(pe,ge,Gt)}finally{Pi.T=Be}}else try{Be=Ae(Ne,Pe),pn(pe,ge,Be)}catch(Gt){Wn(pe,ge,Gt)}}function pn(pe,ge,Ae){Ae!==null&&typeof Ae=="object"&&typeof Ae.then=="function"?Ae.then(function(Pe){Yi(pe,ge,Pe)},function(Pe){return Wn(pe,ge,Pe)}):Yi(pe,ge,Ae)}function Yi(pe,ge,Ae){ge.status="fulfilled",ge.value=Ae,aa(ge),pe.state=Ae,ge=pe.pending,ge!==null&&(Ae=ge.next,Ae===ge?pe.pending=null:(Ae=Ae.next,ge.next=Ae,Ei(pe,Ae)))}function Wn(pe,ge,Ae){var Pe=pe.pending;if(pe.pending=null,Pe!==null){Pe=Pe.next;do ge.status="rejected",ge.reason=Ae,aa(ge),ge=ge.next;while(ge!==Pe)}pe.action=null}function aa(pe){pe=pe.listeners;for(var ge=0;ge<pe.length;ge++)(0,pe[ge])()}function yn(pe,ge){return ge}function Us(pe,ge){if(tn){var Ae=Gi.formState;if(Ae!==null){e:{var Pe=zi;if(tn){if(gr){var Ne=Ed(gr,ys);if(Ne){gr=xh(Ne),Pe=Td(Ne);break e}}gt(Pe)}Pe=!1}Pe&&(ge=Ae[0])}}Ae=Ht(),Ae.memoizedState=Ae.baseState=ge,Pe={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yn,lastRenderedState:ge},Ae.queue=Pe,Ae=vc.bind(null,zi,Pe),Pe.dispatch=Ae,Pe=Ki(!1);var Be=_c.bind(null,zi,!1,Pe.queue);return Pe=Ht(),Ne={state:ge,dispatch:null,action:pe,pending:null},Pe.queue=Ne,Ae=on.bind(null,zi,Ne,Be,Ae),Ne.dispatch=Ae,Pe.memoizedState=pe,[ge,Ae,!1]}function bn(pe){var ge=je();return Qn(ge,an,pe)}function Qn(pe,ge,Ae){ge=ci(pe,ge,yn)[0],pe=ii(ut)[0],ge=typeof ge=="object"&&ge!==null&&typeof ge.then=="function"?nt(ge):ge;var Pe=je(),Ne=Pe.queue,Be=Ne.dispatch;return Ae!==Pe.memoizedState&&(zi.flags|=2048,kn(9,er.bind(null,Ne,Ae),{destroy:void 0},null)),[ge,Be,pe]}function er(pe,ge){pe.action=ge}function tr(pe){var ge=je(),Ae=an;if(Ae!==null)return Qn(ge,Ae,pe);je(),ge=ge.memoizedState,Ae=je();var Pe=Ae.queue.dispatch;return Ae.memoizedState=pe,[ge,Pe,!1]}function kn(pe,ge,Ae,Pe){return pe={tag:pe,create:ge,inst:Ae,deps:Pe,next:null},ge=zi.updateQueue,ge===null&&(ge=uu(),zi.updateQueue=ge),Ae=ge.lastEffect,Ae===null?ge.lastEffect=pe.next=pe:(Pe=Ae.next,Ae.next=pe,pe.next=Pe,ge.lastEffect=pe),pe}function Cs(){return je().memoizedState}function ms(pe,ge,Ae,Pe){var Ne=Ht();zi.flags|=pe,Ne.memoizedState=kn(1|ge,Ae,{destroy:void 0},Pe===void 0?null:Pe)}function Sl(pe,ge,Ae,Pe){var Ne=je();Pe=Pe===void 0?null:Pe;var Be=Ne.memoizedState.inst;an!==null&&Pe!==null&&On(Pe,an.memoizedState.deps)?Ne.memoizedState=kn(ge,Ae,Be,Pe):(zi.flags|=pe,Ne.memoizedState=kn(1|ge,Ae,Be,Pe))}function Su(pe,ge){ms(8390656,8,pe,ge)}function Cl(pe,ge){Sl(2048,8,pe,ge)}function $h(pe,ge){return Sl(4,2,pe,ge)}function Wh(pe,ge){return Sl(4,4,pe,ge)}function Ml(pe,ge){if(typeof ge=="function"){pe=pe();var Ae=ge(pe);return function(){typeof Ae=="function"?Ae():ge(null)}}if(ge!=null)return pe=pe(),ge.current=pe,function(){ge.current=null}}function Is(pe,ge,Ae){Ae=Ae!=null?Ae.concat([pe]):null,Sl(4,4,Ml.bind(null,ge,pe),Ae)}function El(){}function pc(pe,ge){var Ae=je();ge=ge===void 0?null:ge;var Pe=Ae.memoizedState;return ge!==null&&On(ge,Pe[1])?Pe[0]:(Ae.memoizedState=[pe,ge],pe)}function co(pe,ge){var Ae=je();ge=ge===void 0?null:ge;var Pe=Ae.memoizedState;if(ge!==null&&On(ge,Pe[1]))return Pe[0];if(Pe=pe(),Aa){Fe(!0);try{pe()}finally{Fe(!1)}}return Ae.memoizedState=[Pe,ge],Pe}function Pa(pe,ge,Ae){return Ae===void 0||(Qs&1073741824)!==0?pe.memoizedState=ge:(pe.memoizedState=Ae,pe=Vs(),zi.lanes|=pe,ds|=pe,Ae)}function Cu(pe,ge,Ae,Pe){return rs(Ae,ge)?Ae:Zs.current!==null?(pe=Pa(pe,Ae,Pe),rs(pe,ge)||(Yn=!0),pe):(Qs&42)===0?(Yn=!0,pe.memoizedState=Ae):(pe=Vs(),zi.lanes|=pe,ds|=pe,ge)}function mc(pe,ge,Ae,Pe,Ne){var Be=ir();Ar(Be!==0&&8>Be?Be:8);var Je=Pi.T,st={};Pi.T=st,_c(pe,!1,ge,Ae);try{var xt=Ne(),Gt=Pi.S;if(Gt!==null&&Gt(st,xt),xt!==null&&typeof xt=="object"&&typeof xt.then=="function"){var oi=Kt(xt,Pe);Oa(pe,ge,oi,Or(pe))}else Oa(pe,ge,Pe,Or(pe))}catch(mi){Oa(pe,ge,{then:function(){},status:"rejected",reason:mi},Or())}finally{Ar(Be),Pi.T=Je}}function Mu(pe){var ge=pe.memoizedState;if(ge!==null)return ge;ge={memoizedState:jr,baseState:jr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ut,lastRenderedState:jr},next:null};var Ae={};return ge.next={memoizedState:Ae,baseState:Ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ut,lastRenderedState:Ae},next:null},pe.memoizedState=ge,pe=pe.alternate,pe!==null&&(pe.memoizedState=ge),ge}function uo(){return hr(Oi)}function zs(){return je().memoizedState}function gc(){return je().memoizedState}function Tl(pe){for(var ge=pe.return;ge!==null;){switch(ge.tag){case 24:case 3:var Ae=Or();pe=Rt(Ae);var Pe=Pt(ge,pe,Ae);Pe!==null&&(br(Pe,ge,Ae),mt(Pe,ge,Ae)),ge={cache:Cc()},pe.payload=ge;return}ge=ge.return}}function Ra(pe,ge,Ae){var Pe=Or();Ae={lane:Pe,revertLane:0,action:Ae,hasEagerState:!1,eagerState:null,next:null},ho(pe)?wl(ge,Ae):(Ae=Tt(pe,ge,Ae,Pe),Ae!==null&&(br(Ae,pe,Pe),Eu(Ae,ge,Pe)))}function vc(pe,ge,Ae){var Pe=Or();Oa(pe,ge,Ae,Pe)}function Oa(pe,ge,Ae,Pe){var Ne={lane:Pe,revertLane:0,action:Ae,hasEagerState:!1,eagerState:null,next:null};if(ho(pe))wl(ge,Ne);else{var Be=pe.alternate;if(pe.lanes===0&&(Be===null||Be.lanes===0)&&(Be=ge.lastRenderedReducer,Be!==null))try{var Je=ge.lastRenderedState,st=Be(Je,Ae);if(Ne.hasEagerState=!0,Ne.eagerState=st,rs(st,Je))return Ke(pe,ge,Ne,0),Gi===null&&vt(),!1}catch{}finally{}if(Ae=Tt(pe,ge,Ne,Pe),Ae!==null)return br(Ae,pe,Pe),Eu(Ae,ge,Pe),!0}return!1}function _c(pe,ge,Ae,Pe){if(Pe={lane:2,revertLane:At(),action:Pe,hasEagerState:!1,eagerState:null,next:null},ho(pe)){if(ge)throw Error(Q(479))}else ge=Tt(pe,Ae,Pe,2),ge!==null&&br(ge,pe,2)}function ho(pe){var ge=pe.alternate;return pe===zi||ge!==null&&ge===zi}function wl(pe,ge){Rn=As=!0;var Ae=pe.pending;Ae===null?ge.next=ge:(ge.next=Ae.next,Ae.next=ge),pe.pending=ge}function Eu(pe,ge,Ae){if((Ae&4194176)!==0){var Pe=ge.lanes;Pe&=pe.pendingLanes,Ae|=Pe,ge.lanes=Ae,Ge(pe,Ae)}}function vr(pe,ge,Ae,Pe){ge=pe.memoizedState,Ae=Ae(Pe,ge),Ae=Ae==null?ge:Ao({},ge,Ae),pe.memoizedState=Ae,pe.lanes===0&&(pe.updateQueue.baseState=Ae)}function Na(pe,ge,Ae,Pe,Ne,Be,Je){return pe=pe.stateNode,typeof pe.shouldComponentUpdate=="function"?pe.shouldComponentUpdate(Pe,Be,Je):ge.prototype&&ge.prototype.isPureReactComponent?!zt(Ae,Pe)||!zt(Ne,Be):!0}function Pl(pe,ge,Ae,Pe){pe=ge.state,typeof ge.componentWillReceiveProps=="function"&&ge.componentWillReceiveProps(Ae,Pe),typeof ge.UNSAFE_componentWillReceiveProps=="function"&&ge.UNSAFE_componentWillReceiveProps(Ae,Pe),ge.state!==pe&&hu.enqueueReplaceState(ge,ge.state,null)}function Ms(pe,ge){var Ae=ge;if("ref"in ge){Ae={};for(var Pe in ge)Pe!=="ref"&&(Ae[Pe]=ge[Pe])}if(pe=pe.defaultProps){Ae===ge&&(Ae=Ao({},Ae));for(var Ne in pe)Ae[Ne]===void 0&&(Ae[Ne]=pe[Ne])}return Ae}function yc(pe,ge){try{var Ae=pe.onUncaughtError;Ae(ge.value,{componentStack:ge.stack})}catch(Pe){setTimeout(function(){throw Pe})}}function bc(pe,ge,Ae){try{var Pe=pe.onCaughtError;Pe(Ae.value,{componentStack:Ae.stack,errorBoundary:ge.tag===1?ge.stateNode:null})}catch(Ne){setTimeout(function(){throw Ne})}}function Rl(pe,ge,Ae){return Ae=Rt(Ae),Ae.tag=3,Ae.payload={element:null},Ae.callback=function(){yc(pe,ge)},Ae}function Io(pe){return pe=Rt(pe),pe.tag=3,pe}function Ol(pe,ge,Ae,Pe){var Ne=Ae.type.getDerivedStateFromError;if(typeof Ne=="function"){var Be=Pe.value;pe.payload=function(){return Ne(Be)},pe.callback=function(){bc(ge,Ae,Pe)}}var Je=Ae.stateNode;Je!==null&&typeof Je.componentDidCatch=="function"&&(pe.callback=function(){bc(ge,Ae,Pe),typeof Ne!="function"&&(ps===null?ps=new Set([this]):ps.add(this));var st=Pe.stack;this.componentDidCatch(Pe.value,{componentStack:st!==null?st:""})})}function Jh(pe,ge,Ae,Pe,Ne){if(Ae.flags|=32768,Pe!==null&&typeof Pe=="object"&&typeof Pe.then=="function"){if(ge=Ae.alternate,ge!==null&&fo(ge,Ae,Ne,!0),Ae=us.current,Ae!==null){switch(Ae.tag){case 13:return xs===null?Vr():Ae.alternate===null&&Qi===0&&(Qi=3),Ae.flags&=-257,Ae.flags|=65536,Ae.lanes=Ne,Pe===cu?Ae.flags|=16384:(ge=Ae.updateQueue,ge===null?Ae.updateQueue=new Set([Pe]):ge.add(Pe),Fc(pe,Pe,Ne)),!1;case 22:return Ae.flags|=65536,Pe===cu?Ae.flags|=16384:(ge=Ae.updateQueue,ge===null?(ge={transitions:null,markerInstances:null,retryQueue:new Set([Pe])},Ae.updateQueue=ge):(Ae=ge.retryQueue,Ae===null?ge.retryQueue=new Set([Pe]):Ae.add(Pe)),Fc(pe,Pe,Ne)),!1}throw Error(Q(435,Ae.tag))}return Fc(pe,Pe,Ne),Vr(),!1}if(tn)return ge=us.current,ge!==null?((ge.flags&65536)===0&&(ge.flags|=256),ge.flags|=65536,ge.lanes=Ne,Pe!==ac&&(pe=Error(Q(422),{cause:Pe}),qt($e(pe,Ae)))):(Pe!==ac&&(ge=Error(Q(423),{cause:Pe}),qt($e(ge,Ae))),pe=pe.current.alternate,pe.flags|=65536,Ne&=-Ne,pe.lanes|=Ne,Pe=$e(Pe,Ae),Ne=Rl(pe.stateNode,Pe,Ne),tt(pe,Ne),Qi!==4&&(Qi=2)),!1;var Be=Error(Q(520),{cause:Pe});if(Be=$e(Be,Ae),fl===null?fl=[Be]:fl.push(Be),Qi!==4&&(Qi=2),ge===null)return!0;Pe=$e(Pe,Ae),Ae=ge;do{switch(Ae.tag){case 3:return Ae.flags|=65536,pe=Ne&-Ne,Ae.lanes|=pe,pe=Rl(Ae.stateNode,Pe,pe),tt(Ae,pe),!1;case 1:if(ge=Ae.type,Be=Ae.stateNode,(Ae.flags&128)===0&&(typeof ge.getDerivedStateFromError=="function"||Be!==null&&typeof Be.componentDidCatch=="function"&&(ps===null||!ps.has(Be))))return Ae.flags|=65536,Ne&=-Ne,Ae.lanes|=Ne,Ne=Io(Ne),Ol(Ne,pe,Ae,Pe),tt(Ae,Ne),!1}Ae=Ae.return}while(Ae!==null);return!1}function ur(pe,ge,Ae,Pe){ge.child=pe===null?kh(ge,null,Ae,Pe):ro(ge,pe.child,Ae,Pe)}function Kh(pe,ge,Ae,Pe,Ne){Ae=Ae.render;var Be=ge.ref;if("ref"in Pe){var Je={};for(var st in Pe)st!=="ref"&&(Je[st]=Pe[st])}else Je=Pe;return po(ge),Pe=Ir(pe,ge,Ae,Je,Be,Ne),st=sa(),pe!==null&&!Yn?(ct(pe,ge,Ne),oa(pe,ge,Ne)):(tn&&st&&qe(ge),ge.flags|=1,ur(pe,ge,Pe,Ne),ge.child)}function Zh(pe,ge,Ae,Pe,Ne){if(pe===null){var Be=Ae.type;return typeof Be=="function"&&!fa(Be)&&Be.defaultProps===void 0&&Ae.compare===null?(ge.tag=15,ge.type=Be,xc(pe,ge,Be,Pe,Ne)):(pe=gs(Ae.type,null,Pe,ge,ge.mode,Ne),pe.ref=ge.ref,pe.return=ge,ge.child=pe)}if(Be=pe.child,!Du(pe,Ne)){var Je=Be.memoizedProps;if(Ae=Ae.compare,Ae=Ae!==null?Ae:zt,Ae(Je,Pe)&&pe.ref===ge.ref)return oa(pe,ge,Ne)}return ge.flags|=1,pe=xr(Be,Pe),pe.ref=ge.ref,pe.return=ge,ge.child=pe}function xc(pe,ge,Ae,Pe,Ne){if(pe!==null){var Be=pe.memoizedProps;if(zt(Be,Pe)&&pe.ref===ge.ref)if(Yn=!1,ge.pendingProps=Pe=Be,Du(pe,Ne))(pe.flags&131072)!==0&&(Yn=!0);else return ge.lanes=pe.lanes,oa(pe,ge,Ne)}return Tu(pe,ge,Ae,Pe,Ne)}function Qh(pe,ge,Ae){var Pe=ge.pendingProps,Ne=Pe.children,Be=(ge.stateNode._pendingVisibility&2)!==0,Je=pe!==null?pe.memoizedState:null;if(Nl(pe,ge),Pe.mode==="hidden"||Be){if((ge.flags&128)!==0){if(Pe=Je!==null?Je.baseLanes|Ae:Ae,pe!==null){for(Ne=ge.child=pe.child,Be=0;Ne!==null;)Be=Be|Ne.lanes|Ne.childLanes,Ne=Ne.sibling;ge.childLanes=Be&~Pe}else ge.childLanes=0,ge.child=null;return ed(pe,ge,Pe,Ae)}if((Ae&536870912)!==0)ge.memoizedState={baseLanes:0,cachePool:null},pe!==null&&Mc(ge,Je!==null?Je.cachePool:null),Je!==null?Tr(ge,Je):Ln(),Ur(ge);else return ge.lanes=ge.childLanes=536870912,ed(pe,ge,Je!==null?Je.baseLanes|Ae:Ae,Ae)}else Je!==null?(Mc(ge,Je.cachePool),Tr(ge,Je),Bn(),ge.memoizedState=null):(pe!==null&&Mc(ge,null),Ln(),Bn());return ur(pe,ge,Ne,Ae),ge.child}function ed(pe,ge,Ae,Pe){var Ne=Ba();return Ne=Ne===null?null:{parent:qs?ln._currentValue:ln._currentValue2,pool:Ne},ge.memoizedState={baseLanes:Ae,cachePool:Ne},pe!==null&&Mc(ge,null),Ln(),Ur(ge),pe!==null&&fo(pe,ge,Pe,!0),null}function Nl(pe,ge){var Ae=ge.ref;if(Ae===null)pe!==null&&pe.ref!==null&&(ge.flags|=2097664);else{if(typeof Ae!="function"&&typeof Ae!="object")throw Error(Q(284));(pe===null||pe.ref!==Ae)&&(ge.flags|=2097664)}}function Tu(pe,ge,Ae,Pe,Ne){return po(ge),Ae=Ir(pe,ge,Ae,Pe,void 0,Ne),Pe=sa(),pe!==null&&!Yn?(ct(pe,ge,Ne),oa(pe,ge,Ne)):(tn&&Pe&&qe(ge),ge.flags|=1,ur(pe,ge,Ae,Ne),ge.child)}function td(pe,ge,Ae,Pe,Ne,Be){return po(ge),ge.updateQueue=null,Ae=ra(ge,Pe,Ae,Ne),ks(pe),Pe=sa(),pe!==null&&!Yn?(ct(pe,ge,Be),oa(pe,ge,Be)):(tn&&Pe&&qe(ge),ge.flags|=1,ur(pe,ge,Ae,Be),ge.child)}function wu(pe,ge,Ae,Pe,Ne){if(po(ge),ge.stateNode===null){var Be=To,Je=Ae.contextType;typeof Je=="object"&&Je!==null&&(Be=hr(Je)),Be=new Ae(Pe,Be),ge.memoizedState=Be.state!==null&&Be.state!==void 0?Be.state:null,Be.updater=hu,ge.stateNode=Be,Be._reactInternals=ge,Be=ge.stateNode,Be.props=Pe,Be.state=ge.memoizedState,Be.refs={},It(ge),Je=Ae.contextType,Be.context=typeof Je=="object"&&Je!==null?hr(Je):To,Be.state=ge.memoizedState,Je=Ae.getDerivedStateFromProps,typeof Je=="function"&&(vr(ge,Ae,Je,Pe),Be.state=ge.memoizedState),typeof Ae.getDerivedStateFromProps=="function"||typeof Be.getSnapshotBeforeUpdate=="function"||typeof Be.UNSAFE_componentWillMount!="function"&&typeof Be.componentWillMount!="function"||(Je=Be.state,typeof Be.componentWillMount=="function"&&Be.componentWillMount(),typeof Be.UNSAFE_componentWillMount=="function"&&Be.UNSAFE_componentWillMount(),Je!==Be.state&&hu.enqueueReplaceState(Be,Be.state,null),Zt(ge,Pe,Be,Ne),Ze(),Be.state=ge.memoizedState),typeof Be.componentDidMount=="function"&&(ge.flags|=4194308),Pe=!0}else if(pe===null){Be=ge.stateNode;var st=ge.memoizedProps,xt=Ms(Ae,st);Be.props=xt;var Gt=Be.context,oi=Ae.contextType;Je=To,typeof oi=="object"&&oi!==null&&(Je=hr(oi));var mi=Ae.getDerivedStateFromProps;oi=typeof mi=="function"||typeof Be.getSnapshotBeforeUpdate=="function",st=ge.pendingProps!==st,oi||typeof Be.UNSAFE_componentWillReceiveProps!="function"&&typeof Be.componentWillReceiveProps!="function"||(st||Gt!==Je)&&Pl(ge,Be,Pe,Je),xa=!1;var gi=ge.memoizedState;Be.state=gi,Zt(ge,Pe,Be,Ne),Ze(),Gt=ge.memoizedState,st||gi!==Gt||xa?(typeof mi=="function"&&(vr(ge,Ae,mi,Pe),Gt=ge.memoizedState),(xt=xa||Na(ge,Ae,xt,Pe,gi,Gt,Je))?(oi||typeof Be.UNSAFE_componentWillMount!="function"&&typeof Be.componentWillMount!="function"||(typeof Be.componentWillMount=="function"&&Be.componentWillMount(),typeof Be.UNSAFE_componentWillMount=="function"&&Be.UNSAFE_componentWillMount()),typeof Be.componentDidMount=="function"&&(ge.flags|=4194308)):(typeof Be.componentDidMount=="function"&&(ge.flags|=4194308),ge.memoizedProps=Pe,ge.memoizedState=Gt),Be.props=Pe,Be.state=Gt,Be.context=Je,Pe=xt):(typeof Be.componentDidMount=="function"&&(ge.flags|=4194308),Pe=!1)}else{Be=ge.stateNode,Yt(pe,ge),Je=ge.memoizedProps,oi=Ms(Ae,Je),Be.props=oi,mi=ge.pendingProps,gi=Be.context,Gt=Ae.contextType,xt=To,typeof Gt=="object"&&Gt!==null&&(xt=hr(Gt)),st=Ae.getDerivedStateFromProps,(Gt=typeof st=="function"||typeof Be.getSnapshotBeforeUpdate=="function")||typeof Be.UNSAFE_componentWillReceiveProps!="function"&&typeof Be.componentWillReceiveProps!="function"||(Je!==mi||gi!==xt)&&Pl(ge,Be,Pe,xt),xa=!1,gi=ge.memoizedState,Be.state=gi,Zt(ge,Pe,Be,Ne),Ze();var Li=ge.memoizedState;Je!==mi||gi!==Li||xa||pe!==null&&pe.dependencies!==null&&La(pe.dependencies)?(typeof st=="function"&&(vr(ge,Ae,st,Pe),Li=ge.memoizedState),(oi=xa||Na(ge,Ae,oi,Pe,gi,Li,xt)||pe!==null&&pe.dependencies!==null&&La(pe.dependencies))?(Gt||typeof Be.UNSAFE_componentWillUpdate!="function"&&typeof Be.componentWillUpdate!="function"||(typeof Be.componentWillUpdate=="function"&&Be.componentWillUpdate(Pe,Li,xt),typeof Be.UNSAFE_componentWillUpdate=="function"&&Be.UNSAFE_componentWillUpdate(Pe,Li,xt)),typeof Be.componentDidUpdate=="function"&&(ge.flags|=4),typeof Be.getSnapshotBeforeUpdate=="function"&&(ge.flags|=1024)):(typeof Be.componentDidUpdate!="function"||Je===pe.memoizedProps&&gi===pe.memoizedState||(ge.flags|=4),typeof Be.getSnapshotBeforeUpdate!="function"||Je===pe.memoizedProps&&gi===pe.memoizedState||(ge.flags|=1024),ge.memoizedProps=Pe,ge.memoizedState=Li),Be.props=Pe,Be.state=Li,Be.context=xt,Pe=oi):(typeof Be.componentDidUpdate!="function"||Je===pe.memoizedProps&&gi===pe.memoizedState||(ge.flags|=4),typeof Be.getSnapshotBeforeUpdate!="function"||Je===pe.memoizedProps&&gi===pe.memoizedState||(ge.flags|=1024),Pe=!1)}return Be=Pe,Nl(pe,ge),Pe=(ge.flags&128)!==0,Be||Pe?(Be=ge.stateNode,Ae=Pe&&typeof Ae.getDerivedStateFromError!="function"?null:Be.render(),ge.flags|=1,pe!==null&&Pe?(ge.child=ro(ge,pe.child,null,Ne),ge.child=ro(ge,null,Ae,Ne)):ur(pe,ge,Ae,Ne),ge.memoizedState=Be.state,pe=ge.child):pe=oa(pe,ge,Ne),pe}function id(pe,ge,Ae,Pe){return si(),ge.flags|=256,ur(pe,ge,Ae,Pe),ge.child}function Pu(pe){return{baseLanes:pe,cachePool:od()}}function Ru(pe,ge,Ae){return pe=pe!==null?pe.childLanes&~Ae:0,ge&&(pe|=$r),pe}function nd(pe,ge,Ae){var Pe=ge.pendingProps,Ne=!1,Be=(ge.flags&128)!==0,Je;if((Je=Be)||(Je=pe!==null&&pe.memoizedState===null?!1:(Kn.current&2)!==0),Je&&(Ne=!0,ge.flags&=-129),Je=(ge.flags&32)!==0,ge.flags&=-33,pe===null){if(tn){if(Ne?_n(ge):Bn(),tn){var st=gr,xt;(xt=st)&&(st=Nd(st,ys),st!==null?(ge.memoizedState={dehydrated:st,treeContext:Rs!==null?{id:Js,overflow:_s}:null,retryLane:536870912},xt=J(18,null,null,0),xt.stateNode=st,xt.return=ge,ge.child=xt,Sr=ge,gr=null,xt=!0):xt=!1),xt||gt(ge)}if(st=ge.memoizedState,st!==null&&(st=st.dehydrated,st!==null))return Zl(st)?ge.lanes=16:ge.lanes=536870912,null;$n(ge)}return st=Pe.children,Pe=Pe.fallback,Ne?(Bn(),Ne=ge.mode,st=Ou({mode:"hidden",children:st},Ne),Pe=ma(Pe,Ne,Ae,null),st.return=ge,Pe.return=ge,st.sibling=Pe,ge.child=st,Ne=ge.child,Ne.memoizedState=Pu(Ae),Ne.childLanes=Ru(pe,Je,Ae),ge.memoizedState=Mr,Pe):(_n(ge),Dl(ge,st))}if(xt=pe.memoizedState,xt!==null&&(st=xt.dehydrated,st!==null)){if(Be)ge.flags&256?(_n(ge),ge.flags&=-257,ge=Nu(pe,ge,Ae)):ge.memoizedState!==null?(Bn(),ge.child=pe.child,ge.flags|=128,ge=null):(Bn(),Ne=Pe.fallback,st=ge.mode,Pe=Ou({mode:"visible",children:Pe.children},st),Ne=ma(Ne,st,Ae,null),Ne.flags|=2,Pe.return=ge,Ne.return=ge,Pe.sibling=Ne,ge.child=Pe,ro(ge,pe.child,null,Ae),Pe=ge.child,Pe.memoizedState=Pu(Ae),Pe.childLanes=Ru(pe,Je,Ae),ge.memoizedState=Mr,ge=Ne);else if(_n(ge),Zl(st))Je=Md(st).digest,Pe=Error(Q(419)),Pe.stack="",Pe.digest=Je,qt({value:Pe,source:null,stack:null}),ge=Nu(pe,ge,Ae);else if(Yn||fo(pe,ge,Ae,!1),Je=(Ae&pe.childLanes)!==0,Yn||Je){if(Je=Gi,Je!==null){if(Pe=Ae&-Ae,(Pe&42)!==0)Pe=1;else switch(Pe){case 2:Pe=1;break;case 8:Pe=4;break;case 32:Pe=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:Pe=64;break;case 268435456:Pe=134217728;break;default:Pe=0}if(Pe=(Pe&(Je.suspendedLanes|Ae))!==0?0:Pe,Pe!==0&&Pe!==xt.retryLane)throw xt.retryLane=Pe,Ut(pe,Pe),br(Je,pe,Pe),qd}Qc(st)||Vr(),ge=Nu(pe,ge,Ae)}else Qc(st)?(ge.flags|=128,ge.child=pe.child,ge=bo.bind(null,pe),vf(st,ge),ge=null):(pe=xt.treeContext,Nr&&(gr=Pd(st),Sr=ge,tn=!0,os=null,ys=!1,pe!==null&&(ss[as++]=Js,ss[as++]=_s,ss[as++]=Rs,Js=pe.id,_s=pe.overflow,Rs=ge)),ge=Dl(ge,Pe.children),ge.flags|=4096);return ge}return Ne?(Bn(),Ne=Pe.fallback,st=ge.mode,xt=pe.child,Be=xt.sibling,Pe=xr(xt,{mode:"hidden",children:Pe.children}),Pe.subtreeFlags=xt.subtreeFlags&31457280,Be!==null?Ne=xr(Be,Ne):(Ne=ma(Ne,st,Ae,null),Ne.flags|=2),Ne.return=ge,Pe.return=ge,Pe.sibling=Ne,ge.child=Pe,Pe=Ne,Ne=ge.child,st=pe.child.memoizedState,st===null?st=Pu(Ae):(xt=st.cachePool,xt!==null?(Be=qs?ln._currentValue:ln._currentValue2,xt=xt.parent!==Be?{parent:Be,pool:Be}:xt):xt=od(),st={baseLanes:st.baseLanes|Ae,cachePool:xt}),Ne.memoizedState=st,Ne.childLanes=Ru(pe,Je,Ae),ge.memoizedState=Mr,Pe):(_n(ge),Ae=pe.child,pe=Ae.sibling,Ae=xr(Ae,{mode:"visible",children:Pe.children}),Ae.return=ge,Ae.sibling=null,pe!==null&&(Je=ge.deletions,Je===null?(ge.deletions=[pe],ge.flags|=16):Je.push(pe)),ge.child=Ae,ge.memoizedState=null,Ae)}function Dl(pe,ge){return ge=Ou({mode:"visible",children:ge},pe.mode),ge.return=pe,pe.child=ge}function Ou(pe,ge){return Vc(pe,ge,0,null)}function Nu(pe,ge,Ae){return ro(ge,pe.child,null,Ae),pe=Dl(ge,ge.pendingProps.children),pe.flags|=2,ge.memoizedState=null,pe}function rd(pe,ge,Ae){pe.lanes|=ge;var Pe=pe.alternate;Pe!==null&&(Pe.lanes|=ge),Lu(pe.return,ge,Ae)}function Ac(pe,ge,Ae,Pe,Ne){var Be=pe.memoizedState;Be===null?pe.memoizedState={isBackwards:ge,rendering:null,renderingStartTime:0,last:Pe,tail:Ae,tailMode:Ne}:(Be.isBackwards=ge,Be.rendering=null,Be.renderingStartTime=0,Be.last=Pe,Be.tail=Ae,Be.tailMode=Ne)}function sd(pe,ge,Ae){var Pe=ge.pendingProps,Ne=Pe.revealOrder,Be=Pe.tail;if(ur(pe,ge,Pe.children,Ae),Pe=Kn.current,(Pe&2)!==0)Pe=Pe&1|2,ge.flags|=128;else{if(pe!==null&&(pe.flags&128)!==0)e:for(pe=ge.child;pe!==null;){if(pe.tag===13)pe.memoizedState!==null&&rd(pe,Ae,ge);else if(pe.tag===19)rd(pe,Ae,ge);else if(pe.child!==null){pe.child.return=pe,pe=pe.child;continue}if(pe===ge)break e;for(;pe.sibling===null;){if(pe.return===null||pe.return===ge)break e;pe=pe.return}pe.sibling.return=pe.return,pe=pe.sibling}Pe&=1}switch(_e(Kn,Pe),Ne){case"forwards":for(Ae=ge.child,Ne=null;Ae!==null;)pe=Ae.alternate,pe!==null&&En(pe)===null&&(Ne=Ae),Ae=Ae.sibling;Ae=Ne,Ae===null?(Ne=ge.child,ge.child=null):(Ne=Ae.sibling,Ae.sibling=null),Ac(ge,!1,Ne,Ae,Be);break;case"backwards":for(Ae=null,Ne=ge.child,ge.child=null;Ne!==null;){if(pe=Ne.alternate,pe!==null&&En(pe)===null){ge.child=Ne;break}pe=Ne.sibling,Ne.sibling=Ae,Ae=Ne,Ne=pe}Ac(ge,!0,Ae,null,Be);break;case"together":Ac(ge,!1,null,null,void 0);break;default:ge.memoizedState=null}return ge.child}function oa(pe,ge,Ae){if(pe!==null&&(ge.dependencies=pe.dependencies),ds|=ge.lanes,(Ae&ge.childLanes)===0)if(pe!==null){if(fo(pe,ge,Ae,!1),(Ae&ge.childLanes)===0)return null}else return null;if(pe!==null&&ge.child!==pe.child)throw Error(Q(153));if(ge.child!==null){for(pe=ge.child,Ae=xr(pe,pe.pendingProps),ge.child=Ae,Ae.return=ge;pe.sibling!==null;)pe=pe.sibling,Ae=Ae.sibling=xr(pe,pe.pendingProps),Ae.return=ge;Ae.sibling=null}return ge.child}function Du(pe,ge){return(pe.lanes&ge)!==0?!0:(pe=pe.dependencies,!!(pe!==null&&La(pe)))}function pf(pe,ge,Ae){switch(ge.tag){case 3:ot(ge,ge.stateNode.containerInfo),Da(ge,ln,pe.memoizedState.cache),si();break;case 27:case 5:it(ge);break;case 4:ot(ge,ge.stateNode.containerInfo);break;case 10:Da(ge,ge.type,ge.memoizedProps.value);break;case 13:var Pe=ge.memoizedState;if(Pe!==null)return Pe.dehydrated!==null?(_n(ge),ge.flags|=128,null):(Ae&ge.child.childLanes)!==0?nd(pe,ge,Ae):(_n(ge),pe=oa(pe,ge,Ae),pe!==null?pe.sibling:null);_n(ge);break;case 19:var Ne=(pe.flags&128)!==0;if(Pe=(Ae&ge.childLanes)!==0,Pe||(fo(pe,ge,Ae,!1),Pe=(Ae&ge.childLanes)!==0),Ne){if(Pe)return sd(pe,ge,Ae);ge.flags|=128}if(Ne=ge.memoizedState,Ne!==null&&(Ne.rendering=null,Ne.tail=null,Ne.lastEffect=null),_e(Kn,Kn.current),Pe)break;return null;case 22:case 23:return ge.lanes=0,Qh(pe,ge,Ae);case 24:Da(ge,ln,pe.memoizedState.cache)}return oa(pe,ge,Ae)}function ad(pe,ge,Ae){if(pe!==null)if(pe.memoizedProps!==ge.pendingProps)Yn=!0;else{if(!Du(pe,Ae)&&(ge.flags&128)===0)return Yn=!1,pf(pe,ge,Ae);Yn=(pe.flags&131072)!==0}else Yn=!1,tn&&(ge.flags&1048576)!==0&&ze(ge,rc,ge.index);switch(ge.lanes=0,ge.tag){case 16:e:{pe=ge.pendingProps;var Pe=ge.elementType,Ne=Pe._init;if(Pe=Ne(Pe._payload),ge.type=Pe,typeof Pe=="function")fa(Pe)?(pe=Ms(Pe,pe),ge.tag=1,ge=wu(null,ge,Pe,pe,Ae)):(ge.tag=0,ge=Tu(null,ge,Pe,pe,Ae));else{if(Pe!=null){if(Ne=Pe.$$typeof,Ne===el){ge.tag=11,ge=Kh(null,ge,Pe,pe,Ae);break e}else if(Ne===Hl){ge.tag=14,ge=Zh(null,ge,Pe,pe,Ae);break e}}throw ge=te(Pe)||Pe,Error(Q(306,ge,""))}}return ge;case 0:return Tu(pe,ge,ge.type,ge.pendingProps,Ae);case 1:return Pe=ge.type,Ne=Ms(Pe,ge.pendingProps),wu(pe,ge,Pe,Ne,Ae);case 3:e:{if(ot(ge,ge.stateNode.containerInfo),pe===null)throw Error(Q(387));var Be=ge.pendingProps;Ne=ge.memoizedState,Pe=Ne.element,Yt(pe,ge),Zt(ge,Be,null,Ae);var Je=ge.memoizedState;if(Be=Je.cache,Da(ge,ln,Be),Be!==Ne.cache&&Bu(ge,[ln],Ae,!0),Ze(),Be=Je.element,Nr&&Ne.isDehydrated)if(Ne={element:Be,isDehydrated:!1,cache:Je.cache},ge.updateQueue.baseState=Ne,ge.memoizedState=Ne,ge.flags&256){ge=id(pe,ge,Be,Ae);break e}else if(Be!==Pe){Pe=$e(Error(Q(424)),ge),qt(Pe),ge=id(pe,ge,Be,Ae);break e}else for(Nr&&(gr=wd(ge.stateNode.containerInfo),Sr=ge,tn=!0,os=null,ys=!0),Ae=kh(ge,null,Be,Ae),ge.child=Ae;Ae;)Ae.flags=Ae.flags&-3|4096,Ae=Ae.sibling;else{if(si(),Be===Pe){ge=oa(pe,ge,Ae);break e}ur(pe,ge,Be,Ae)}ge=ge.child}return ge;case 26:if(ns)return Nl(pe,ge),pe===null?(Ae=ru(ge.type,null,ge.pendingProps,null))?ge.memoizedState=Ae:tn||(ge.stateNode=yf(ge.type,ge.pendingProps,Os.current,ge)):ge.memoizedState=ru(ge.type,pe.memoizedProps,ge.pendingProps,pe.memoizedState),null;case 27:if(pr)return it(ge),pe===null&&pr&&tn&&(Pe=ge.stateNode=Nh(ge.type,ge.pendingProps,Os.current,cr.current,!1),Sr=ge,ys=!0,gr=eu(Pe)),Pe=ge.pendingProps.children,pe!==null||tn?ur(pe,ge,Pe,Ae):ge.child=ro(ge,null,Pe,Ae),Nl(pe,ge),ge.child;case 5:return pe===null&&tn&&(Ud(ge.type,ge.pendingProps,cr.current),(Ne=Pe=gr)&&(Pe=Rd(Pe,ge.type,ge.pendingProps,ys),Pe!==null?(ge.stateNode=Pe,Sr=ge,gr=eu(Pe),ys=!1,Ne=!0):Ne=!1),Ne||gt(ge)),it(ge),Ne=ge.type,Be=ge.pendingProps,Je=pe!==null?pe.memoizedProps:null,Pe=Be.children,Ka(Ne,Be)?Pe=null:Je!==null&&Ka(Ne,Je)&&(ge.flags|=32),ge.memoizedState!==null&&(Ne=Ir(pe,ge,Al,null,null,Ae),qs?Oi._currentValue=Ne:Oi._currentValue2=Ne),Nl(pe,ge),ur(pe,ge,Pe,Ae),ge.child;case 6:return pe===null&&tn&&(Id(ge.pendingProps,cr.current),(pe=Ae=gr)&&(Ae=Od(Ae,ge.pendingProps,ys),Ae!==null?(ge.stateNode=Ae,Sr=ge,gr=null,pe=!0):pe=!1),pe||gt(ge)),null;case 13:return nd(pe,ge,Ae);case 4:return ot(ge,ge.stateNode.containerInfo),Pe=ge.pendingProps,pe===null?ge.child=ro(ge,null,Pe,Ae):ur(pe,ge,Pe,Ae),ge.child;case 11:return Kh(pe,ge,ge.type,ge.pendingProps,Ae);case 7:return ur(pe,ge,ge.pendingProps,Ae),ge.child;case 8:return ur(pe,ge,ge.pendingProps.children,Ae),ge.child;case 12:return ur(pe,ge,ge.pendingProps.children,Ae),ge.child;case 10:return Pe=ge.pendingProps,Da(ge,ge.type,Pe.value),ur(pe,ge,Pe.children,Ae),ge.child;case 9:return Ne=ge.type._context,Pe=ge.pendingProps.children,po(ge),Ne=hr(Ne),Pe=Pe(Ne),ge.flags|=1,ur(pe,ge,Pe,Ae),ge.child;case 14:return Zh(pe,ge,ge.type,ge.pendingProps,Ae);case 15:return xc(pe,ge,ge.type,ge.pendingProps,Ae);case 19:return sd(pe,ge,Ae);case 22:return Qh(pe,ge,Ae);case 24:return po(ge),Pe=hr(ln),pe===null?(Ne=Ba(),Ne===null&&(Ne=Gi,Be=Cc(),Ne.pooledCache=Be,Be.refCount++,Be!==null&&(Ne.pooledCacheLanes|=Ae),Ne=Be),ge.memoizedState={parent:Pe,cache:Ne},It(ge),Da(ge,ln,Ne)):((pe.lanes&Ae)!==0&&(Yt(pe,ge),Zt(ge,null,null,Ae),Ze()),Ne=pe.memoizedState,Be=ge.memoizedState,Ne.parent!==Pe?(Ne={parent:Pe,cache:Pe},ge.memoizedState=Ne,ge.lanes===0&&(ge.memoizedState=ge.updateQueue.baseState=Ne),Da(ge,ln,Pe)):(Pe=Be.cache,Da(ge,ln,Pe),Pe!==Ne.cache&&Bu(ge,[ln],Ae,!0))),ur(pe,ge,ge.pendingProps.children,Ae),ge.child;case 29:throw ge.pendingProps}throw Error(Q(156,ge.tag))}function Da(pe,ge,Ae){qs?(_e(Xr,ge._currentValue),ge._currentValue=Ae):(_e(Xr,ge._currentValue2),ge._currentValue2=Ae)}function la(pe){var ge=Xr.current;qs?pe._currentValue=ge:pe._currentValue2=ge,fe(Xr)}function Lu(pe,ge,Ae){for(;pe!==null;){var Pe=pe.alternate;if((pe.childLanes&ge)!==ge?(pe.childLanes|=ge,Pe!==null&&(Pe.childLanes|=ge)):Pe!==null&&(Pe.childLanes&ge)!==ge&&(Pe.childLanes|=ge),pe===Ae)break;pe=pe.return}}function Bu(pe,ge,Ae,Pe){var Ne=pe.child;for(Ne!==null&&(Ne.return=pe);Ne!==null;){var Be=Ne.dependencies;if(Be!==null){var Je=Ne.child;Be=Be.firstContext;e:for(;Be!==null;){var st=Be;Be=Ne;for(var xt=0;xt<ge.length;xt++)if(st.context===ge[xt]){Be.lanes|=Ae,st=Be.alternate,st!==null&&(st.lanes|=Ae),Lu(Be.return,Ae,pe),Pe||(Je=null);break e}Be=st.next}}else if(Ne.tag===18){if(Je=Ne.return,Je===null)throw Error(Q(341));Je.lanes|=Ae,Be=Je.alternate,Be!==null&&(Be.lanes|=Ae),Lu(Je,Ae,pe),Je=null}else Je=Ne.child;if(Je!==null)Je.return=Ne;else for(Je=Ne;Je!==null;){if(Je===pe){Je=null;break}if(Ne=Je.sibling,Ne!==null){Ne.return=Je.return,Je=Ne;break}Je=Je.return}Ne=Je}}function fo(pe,ge,Ae,Pe){pe=null;for(var Ne=ge,Be=!1;Ne!==null;){if(!Be){if((Ne.flags&524288)!==0)Be=!0;else if((Ne.flags&262144)!==0)break}if(Ne.tag===10){var Je=Ne.alternate;if(Je===null)throw Error(Q(387));if(Je=Je.memoizedProps,Je!==null){var st=Ne.type;rs(Ne.pendingProps.value,Je.value)||(pe!==null?pe.push(st):pe=[st])}}else if(Ne===ol.current){if(Je=Ne.alternate,Je===null)throw Error(Q(387));Je.memoizedState.memoizedState!==Ne.memoizedState.memoizedState&&(pe!==null?pe.push(Oi):pe=[Oi])}Ne=Ne.return}pe!==null&&Bu(ge,pe,Ae,Pe),ge.flags|=262144}function La(pe){for(pe=pe.firstContext;pe!==null;){var ge=pe.context;if(!rs(qs?ge._currentValue:ge._currentValue2,pe.memoizedValue))return!0;pe=pe.next}return!1}function po(pe){ao=pe,Vn=null,pe=pe.dependencies,pe!==null&&(pe.firstContext=null)}function hr(pe){return ku(ao,pe)}function Ll(pe,ge){return ao===null&&po(pe),ku(pe,ge)}function ku(pe,ge){var Ae=qs?ge._currentValue:ge._currentValue2;if(ge={context:ge,memoizedValue:Ae,next:null},Vn===null){if(pe===null)throw Error(Q(308));Vn=ge,pe.dependencies={lanes:0,firstContext:ge},pe.flags|=524288}else Vn=Vn.next=ge;return Ae}function Cc(){return{controller:new $d,data:new Map,refCount:0}}function zo(pe){pe.refCount--,pe.refCount===0&&Sa(Ro,function(){pe.controller.abort()})}function Ba(){var pe=Ca.current;return pe!==null?pe:Gi.pooledCache}function Mc(pe,ge){ge===null?_e(Ca,Ca.current):_e(Ca,ge.pool)}function od(){var pe=Ba();return pe===null?null:{parent:qs?ln._currentValue:ln._currentValue2,pool:pe}}function Jr(pe){pe.flags|=4}function Uu(pe,ge){if(pe!==null&&pe.child===ge.child)return!1;if((ge.flags&16)!==0)return!0;for(pe=ge.child;pe!==null;){if((pe.flags&13878)!==0||(pe.subtreeFlags&13878)!==0)return!0;pe=pe.sibling}return!1}function Ec(pe,ge,Ae,Pe){if(fr)for(Ae=ge.child;Ae!==null;){if(Ae.tag===5||Ae.tag===6)Xs(pe,Ae.stateNode);else if(!(Ae.tag===4||pr&&Ae.tag===27)&&Ae.child!==null){Ae.child.return=Ae,Ae=Ae.child;continue}if(Ae===ge)break;for(;Ae.sibling===null;){if(Ae.return===null||Ae.return===ge)return;Ae=Ae.return}Ae.sibling.return=Ae.return,Ae=Ae.sibling}else if(Qr)for(var Ne=ge.child;Ne!==null;){if(Ne.tag===5){var Be=Ne.stateNode;Ae&&Pe&&(Be=yh(Be,Ne.type,Ne.memoizedProps)),Xs(pe,Be)}else if(Ne.tag===6)Be=Ne.stateNode,Ae&&Pe&&(Be=bh(Be,Ne.memoizedProps)),Xs(pe,Be);else if(Ne.tag!==4){if(Ne.tag===22&&Ne.memoizedState!==null)Be=Ne.child,Be!==null&&(Be.return=Ne),Ec(pe,Ne,!0,!0);else if(Ne.child!==null){Ne.child.return=Ne,Ne=Ne.child;continue}}if(Ne===ge)break;for(;Ne.sibling===null;){if(Ne.return===null||Ne.return===ge)return;Ne=Ne.return}Ne.sibling.return=Ne.return,Ne=Ne.sibling}}function Fo(pe,ge,Ae,Pe){if(Qr)for(var Ne=ge.child;Ne!==null;){if(Ne.tag===5){var Be=Ne.stateNode;Ae&&Pe&&(Be=yh(Be,Ne.type,Ne.memoizedProps)),vh(pe,Be)}else if(Ne.tag===6)Be=Ne.stateNode,Ae&&Pe&&(Be=bh(Be,Ne.memoizedProps)),vh(pe,Be);else if(Ne.tag!==4){if(Ne.tag===22&&Ne.memoizedState!==null)Be=Ne.child,Be!==null&&(Be.return=Ne),Fo(pe,Ne,!(Ne.memoizedProps!==null&&Ne.memoizedProps.mode==="manual"),!0);else if(Ne.child!==null){Ne.child.return=Ne,Ne=Ne.child;continue}}if(Ne===ge)break;for(;Ne.sibling===null;){if(Ne.return===null||Ne.return===ge)return;Ne=Ne.return}Ne.sibling.return=Ne.return,Ne=Ne.sibling}}function Vo(pe,ge){if(Qr&&Uu(pe,ge)){pe=ge.stateNode;var Ae=pe.containerInfo,Pe=Zc();Fo(Pe,ge,!1,!1),pe.pendingChildren=Pe,Jr(ge),Cd(Ae,Pe)}}function Iu(pe,ge,Ae,Pe){if(fr)pe.memoizedProps!==Pe&&Jr(ge);else if(Qr){var Ne=pe.stateNode,Be=pe.memoizedProps;if((pe=Uu(pe,ge))||Be!==Pe){var Je=cr.current;Be=gh(Ne,Ae,Be,Pe,!pe,null),Be===Ne?ge.stateNode=Ne:(va(Be,Ae,Pe,Je)&&Jr(ge),ge.stateNode=Be,pe?Ec(Be,ge,!1,!1):Jr(ge))}else ge.stateNode=Ne}}function jo(pe,ge,Ae){if(xd(ge,Ae)){if(pe.flags|=16777216,!_a(ge,Ae))if(Fl())pe.flags|=8192;else throw Po=cu,Bh}else pe.flags&=-16777217}function zu(pe,ge){if(zd(ge)){if(pe.flags|=16777216,!Rh(ge))if(Fl())pe.flags|=8192;else throw Po=cu,Bh}else pe.flags&=-16777217}function Bl(pe,ge){ge!==null&&(pe.flags|=4),pe.flags&16384&&(ge=pe.tag!==22?Te():536870912,pe.lanes|=ge,Ea|=ge)}function mo(pe,ge){if(!tn)switch(pe.tailMode){case"hidden":ge=pe.tail;for(var Ae=null;ge!==null;)ge.alternate!==null&&(Ae=ge),ge=ge.sibling;Ae===null?pe.tail=null:Ae.sibling=null;break;case"collapsed":Ae=pe.tail;for(var Pe=null;Ae!==null;)Ae.alternate!==null&&(Pe=Ae),Ae=Ae.sibling;Pe===null?ge||pe.tail===null?pe.tail=null:pe.tail.sibling=null:Pe.sibling=null}}function Tn(pe){var ge=pe.alternate!==null&&pe.alternate.child===pe.child,Ae=0,Pe=0;if(ge)for(var Ne=pe.child;Ne!==null;)Ae|=Ne.lanes|Ne.childLanes,Pe|=Ne.subtreeFlags&31457280,Pe|=Ne.flags&31457280,Ne.return=pe,Ne=Ne.sibling;else for(Ne=pe.child;Ne!==null;)Ae|=Ne.lanes|Ne.childLanes,Pe|=Ne.subtreeFlags,Pe|=Ne.flags,Ne.return=pe,Ne=Ne.sibling;return pe.subtreeFlags|=Pe,pe.childLanes=Ae,ge}function ld(pe,ge,Ae){var Pe=ge.pendingProps;switch(et(ge),ge.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tn(ge),null;case 1:return Tn(ge),null;case 3:return Ae=ge.stateNode,Pe=null,pe!==null&&(Pe=pe.memoizedState.cache),ge.memoizedState.cache!==Pe&&(ge.flags|=2048),la(ln),St(),Ae.pendingContext&&(Ae.context=Ae.pendingContext,Ae.pendingContext=null),(pe===null||pe.child===null)&&(li(ge)?Jr(ge):pe===null||pe.memoizedState.isDehydrated&&(ge.flags&256)===0||(ge.flags|=1024,os!==null&&(ua(os),os=null))),Vo(pe,ge),Tn(ge),null;case 26:if(ns){Ae=ge.type;var Ne=ge.memoizedState;return pe===null?(Jr(ge),Ne!==null?(Tn(ge),zu(ge,Ne)):(Tn(ge),jo(ge,Ae,Pe))):Ne?Ne!==pe.memoizedState?(Jr(ge),Tn(ge),zu(ge,Ne)):(Tn(ge),ge.flags&=-16777217):(fr?pe.memoizedProps!==Pe&&Jr(ge):Iu(pe,ge,Ae,Pe),Tn(ge),jo(ge,Ae,Pe)),null}case 27:if(pr){if(lt(ge),Ae=Os.current,Ne=ge.type,pe!==null&&ge.stateNode!=null)fr?pe.memoizedProps!==Pe&&Jr(ge):Iu(pe,ge,Ne,Pe);else{if(!Pe){if(ge.stateNode===null)throw Error(Q(166));return Tn(ge),null}pe=cr.current,li(ge)?kt(ge,pe):(pe=Nh(Ne,Pe,Ae,pe,!0),ge.stateNode=pe,Jr(ge))}return Tn(ge),null}case 5:if(lt(ge),Ae=ge.type,pe!==null&&ge.stateNode!=null)Iu(pe,ge,Ae,Pe);else{if(!Pe){if(ge.stateNode===null)throw Error(Q(166));return Tn(ge),null}pe=cr.current,li(ge)?kt(ge,pe):(Ne=rh(Ae,Pe,Os.current,pe,ge),Ec(Ne,ge,!1,!1),ge.stateNode=Ne,va(Ne,Ae,Pe,pe)&&Jr(ge))}return Tn(ge),jo(ge,ge.type,ge.pendingProps),null;case 6:if(pe&&ge.stateNode!=null)Ae=pe.memoizedProps,fr?Ae!==Pe&&Jr(ge):Qr&&(Ae!==Pe?(ge.stateNode=Xc(Pe,Os.current,cr.current,ge),Jr(ge)):ge.stateNode=pe.stateNode);else{if(typeof Pe!="string"&&ge.stateNode===null)throw Error(Q(166));if(pe=Os.current,Ae=cr.current,li(ge)){if(!Nr)throw Error(Q(176));if(pe=ge.stateNode,Ae=ge.memoizedProps,Pe=null,Ne=Sr,Ne!==null)switch(Ne.tag){case 27:case 5:Pe=Ne.memoizedProps}Dd(pe,Ae,ge,Pe)||gt(ge)}else ge.stateNode=Xc(Pe,pe,Ae,ge)}return Tn(ge),null;case 13:if(Pe=ge.memoizedState,pe===null||pe.memoizedState!==null&&pe.memoizedState.dehydrated!==null){if(Ne=li(ge),Pe!==null&&Pe.dehydrated!==null){if(pe===null){if(!Ne)throw Error(Q(318));if(!Nr)throw Error(Q(344));if(Ne=ge.memoizedState,Ne=Ne!==null?Ne.dehydrated:null,!Ne)throw Error(Q(317));il(Ne,ge)}else si(),(ge.flags&128)===0&&(ge.memoizedState=null),ge.flags|=4;Tn(ge),Ne=!1}else os!==null&&(ua(os),os=null),Ne=!0;if(!Ne)return ge.flags&256?($n(ge),ge):($n(ge),null)}if($n(ge),(ge.flags&128)!==0)return ge.lanes=Ae,ge;if(Ae=Pe!==null,pe=pe!==null&&pe.memoizedState!==null,Ae){Pe=ge.child,Ne=null,Pe.alternate!==null&&Pe.alternate.memoizedState!==null&&Pe.alternate.memoizedState.cachePool!==null&&(Ne=Pe.alternate.memoizedState.cachePool.pool);var Be=null;Pe.memoizedState!==null&&Pe.memoizedState.cachePool!==null&&(Be=Pe.memoizedState.cachePool.pool),Be!==Ne&&(Pe.flags|=2048)}return Ae!==pe&&Ae&&(ge.child.flags|=8192),Bl(ge,ge.updateQueue),Tn(ge),null;case 4:return St(),Vo(pe,ge),pe===null&&oh(ge.stateNode.containerInfo),Tn(ge),null;case 10:return la(ge.type),Tn(ge),null;case 19:if(fe(Kn),Ne=ge.memoizedState,Ne===null)return Tn(ge),null;if(Pe=(ge.flags&128)!==0,Be=Ne.rendering,Be===null)if(Pe)mo(Ne,!1);else{if(Qi!==0||pe!==null&&(pe.flags&128)!==0)for(pe=ge.child;pe!==null;){if(Be=En(pe),Be!==null){for(ge.flags|=128,mo(Ne,!1),pe=Be.updateQueue,ge.updateQueue=pe,Bl(ge,pe),ge.subtreeFlags=0,pe=Ae,Ae=ge.child;Ae!==null;)pa(Ae,pe),Ae=Ae.sibling;return _e(Kn,Kn.current&1|2),ge.child}pe=pe.sibling}Ne.tail!==null&&mr()>Dn&&(ge.flags|=128,Pe=!0,mo(Ne,!1),ge.lanes=4194304)}else{if(!Pe)if(pe=En(Be),pe!==null){if(ge.flags|=128,Pe=!0,pe=pe.updateQueue,ge.updateQueue=pe,Bl(ge,pe),mo(Ne,!0),Ne.tail===null&&Ne.tailMode==="hidden"&&!Be.alternate&&!tn)return Tn(ge),null}else 2*mr()-Ne.renderingStartTime>Dn&&Ae!==536870912&&(ge.flags|=128,Pe=!0,mo(Ne,!1),ge.lanes=4194304);Ne.isBackwards?(Be.sibling=ge.child,ge.child=Be):(pe=Ne.last,pe!==null?pe.sibling=Be:ge.child=Be,Ne.last=Be)}return Ne.tail!==null?(ge=Ne.tail,Ne.rendering=ge,Ne.tail=ge.sibling,Ne.renderingStartTime=mr(),ge.sibling=null,pe=Kn.current,_e(Kn,Pe?pe&1|2:pe&1),ge):(Tn(ge),null);case 22:case 23:return $n(ge),wr(),Pe=ge.memoizedState!==null,pe!==null?pe.memoizedState!==null!==Pe&&(ge.flags|=8192):Pe&&(ge.flags|=8192),Pe?(Ae&536870912)!==0&&(ge.flags&128)===0&&(Tn(ge),ge.subtreeFlags&6&&(ge.flags|=8192)):Tn(ge),Ae=ge.updateQueue,Ae!==null&&Bl(ge,Ae.retryQueue),Ae=null,pe!==null&&pe.memoizedState!==null&&pe.memoizedState.cachePool!==null&&(Ae=pe.memoizedState.cachePool.pool),Pe=null,ge.memoizedState!==null&&ge.memoizedState.cachePool!==null&&(Pe=ge.memoizedState.cachePool.pool),Pe!==Ae&&(ge.flags|=2048),pe!==null&&fe(Ca),null;case 24:return Ae=null,pe!==null&&(Ae=pe.memoizedState.cache),ge.memoizedState.cache!==Ae&&(ge.flags|=2048),la(ln),Tn(ge),null;case 25:return null}throw Error(Q(156,ge.tag))}function cd(pe,ge){switch(et(ge),ge.tag){case 1:return pe=ge.flags,pe&65536?(ge.flags=pe&-65537|128,ge):null;case 3:return la(ln),St(),pe=ge.flags,(pe&65536)!==0&&(pe&128)===0?(ge.flags=pe&-65537|128,ge):null;case 26:case 27:case 5:return lt(ge),null;case 13:if($n(ge),pe=ge.memoizedState,pe!==null&&pe.dehydrated!==null){if(ge.alternate===null)throw Error(Q(340));si()}return pe=ge.flags,pe&65536?(ge.flags=pe&-65537|128,ge):null;case 19:return fe(Kn),null;case 4:return St(),null;case 10:return la(ge.type),null;case 22:case 23:return $n(ge),wr(),pe!==null&&fe(Ca),pe=ge.flags,pe&65536?(ge.flags=pe&-65537|128,ge):null;case 24:return la(ln),null;case 25:return null;default:return null}}function Fu(pe,ge){switch(et(ge),ge.tag){case 3:la(ln),St();break;case 26:case 27:case 5:lt(ge);break;case 4:St();break;case 13:$n(ge);break;case 19:fe(Kn);break;case 10:la(ge.type);break;case 22:case 23:$n(ge),wr(),pe!==null&&fe(Ca);break;case 24:la(ln)}}function kl(pe,ge){try{var Ae=ge.updateQueue,Pe=Ae!==null?Ae.lastEffect:null;if(Pe!==null){var Ne=Pe.next;Ae=Ne;do{if((Ae.tag&pe)===pe){Pe=void 0;var Be=Ae.create,Je=Ae.inst;Pe=Be(),Je.destroy=Pe}Ae=Ae.next}while(Ae!==Ne)}}catch(st){Xi(ge,ge.return,st)}}function ka(pe,ge,Ae){try{var Pe=ge.updateQueue,Ne=Pe!==null?Pe.lastEffect:null;if(Ne!==null){var Be=Ne.next;Pe=Be;do{if((Pe.tag&pe)===pe){var Je=Pe.inst,st=Je.destroy;if(st!==void 0){Je.destroy=void 0,Ne=ge;var xt=Ae;try{st()}catch(Gt){Xi(Ne,xt,Gt)}}}Pe=Pe.next}while(Pe!==Be)}}catch(Gt){Xi(ge,ge.return,Gt)}}function ud(pe){var ge=pe.updateQueue;if(ge!==null){var Ae=pe.stateNode;try{Qt(ge,Ae)}catch(Pe){Xi(pe,pe.return,Pe)}}}function hd(pe,ge,Ae){Ae.props=Ms(pe.type,pe.memoizedProps),Ae.state=pe.memoizedState;try{Ae.componentWillUnmount()}catch(Pe){Xi(pe,ge,Pe)}}function go(pe,ge){try{var Ae=pe.ref;if(Ae!==null){var Pe=pe.stateNode;switch(pe.tag){case 26:case 27:case 5:var Ne=tl(Pe);break;default:Ne=Pe}typeof Ae=="function"?pe.refCleanup=Ae(Ne):Ae.current=Ne}}catch(Be){Xi(pe,ge,Be)}}function wn(pe,ge){var Ae=pe.ref,Pe=pe.refCleanup;if(Ae!==null)if(typeof Pe=="function")try{Pe()}catch(Ne){Xi(pe,ge,Ne)}finally{pe.refCleanup=null,pe=pe.alternate,pe!=null&&(pe.refCleanup=null)}else if(typeof Ae=="function")try{Ae(null)}catch(Ne){Xi(pe,ge,Ne)}else Ae.current=null}function Go(pe){var ge=pe.type,Ae=pe.memoizedProps,Pe=pe.stateNode;try{gf(Pe,ge,Ae,pe)}catch(Ne){Xi(pe,pe.return,Ne)}}function Vu(pe,ge,Ae){try{dh(pe.stateNode,pe.type,Ae,ge,pe)}catch(Pe){Xi(pe,pe.return,Pe)}}function ju(pe){return pe.tag===5||pe.tag===3||(ns?pe.tag===26:!1)||(pr?pe.tag===27:!1)||pe.tag===4}function wc(pe){e:for(;;){for(;pe.sibling===null;){if(pe.return===null||ju(pe.return))return null;pe=pe.return}for(pe.sibling.return=pe.return,pe=pe.sibling;pe.tag!==5&&pe.tag!==6&&(!pr||pe.tag!==27)&&pe.tag!==18;){if(pe.flags&2||pe.child===null||pe.tag===4)continue e;pe.child.return=pe,pe=pe.child}if(!(pe.flags&2))return pe.stateNode}}function Pc(pe,ge,Ae){var Pe=pe.tag;if(Pe===5||Pe===6)pe=pe.stateNode,ge?ph(Ae,pe,ge):Ad(Ae,pe);else if(!(Pe===4||pr&&Pe===27)&&(pe=pe.child,pe!==null))for(Pc(pe,ge,Ae),pe=pe.sibling;pe!==null;)Pc(pe,ge,Ae),pe=pe.sibling}function Ho(pe,ge,Ae){var Pe=pe.tag;if(Pe===5||Pe===6)pe=pe.stateNode,ge?fh(Ae,pe,ge):hh(Ae,pe);else if(!(Pe===4||pr&&Pe===27)&&(pe=pe.child,pe!==null))for(Ho(pe,ge,Ae),pe=pe.sibling;pe!==null;)Ho(pe,ge,Ae),pe=pe.sibling}function dd(pe,ge,Ae){pe=pe.containerInfo;try{_h(pe,Ae)}catch(Pe){Xi(ge,ge.return,Pe)}}function Yo(pe,ge){for(Ja(pe.containerInfo),jn=ge;jn!==null;)if(pe=jn,ge=pe.child,(pe.subtreeFlags&1028)!==0&&ge!==null)ge.return=pe,jn=ge;else for(;jn!==null;){pe=jn;var Ae=pe.alternate;switch(ge=pe.flags,pe.tag){case 0:break;case 11:case 15:break;case 1:if((ge&1024)!==0&&Ae!==null){ge=void 0;var Pe=pe,Ne=Ae.memoizedProps;Ae=Ae.memoizedState;var Be=Pe.stateNode;try{var Je=Ms(Pe.type,Ne,Pe.elementType===Pe.type);ge=Be.getSnapshotBeforeUpdate(Je,Ae),Be.__reactInternalSnapshotBeforeUpdate=ge}catch(st){Xi(Pe,Pe.return,st)}}break;case 3:(ge&1024)!==0&&fr&&Kc(pe.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((ge&1024)!==0)throw Error(Q(163))}if(ge=pe.sibling,ge!==null){ge.return=pe.return,jn=ge;break}jn=pe.return}return Je=Oo,Oo=!1,Je}function Rc(pe,ge,Ae){var Pe=Ae.flags;switch(Ae.tag){case 0:case 11:case 15:Fs(pe,Ae),Pe&4&&kl(5,Ae);break;case 1:if(Fs(pe,Ae),Pe&4)if(pe=Ae.stateNode,ge===null)try{pe.componentDidMount()}catch(st){Xi(Ae,Ae.return,st)}else{var Ne=Ms(Ae.type,ge.memoizedProps);ge=ge.memoizedState;try{pe.componentDidUpdate(Ne,ge,pe.__reactInternalSnapshotBeforeUpdate)}catch(st){Xi(Ae,Ae.return,st)}}Pe&64&&ud(Ae),Pe&512&&go(Ae,Ae.return);break;case 3:if(Fs(pe,Ae),Pe&64&&(Pe=Ae.updateQueue,Pe!==null)){if(pe=null,Ae.child!==null)switch(Ae.child.tag){case 27:case 5:pe=tl(Ae.child.stateNode);break;case 1:pe=Ae.child.stateNode}try{Qt(Pe,pe)}catch(st){Xi(Ae,Ae.return,st)}}break;case 26:if(ns){Fs(pe,Ae),Pe&512&&go(Ae,Ae.return);break}case 27:case 5:Fs(pe,Ae),ge===null&&Pe&4&&Go(Ae),Pe&512&&go(Ae,Ae.return);break;case 12:Fs(pe,Ae);break;case 13:Fs(pe,Ae),Pe&4&&Ua(pe,Ae);break;case 22:if(Ne=Ae.memoizedState!==null||nr,!Ne){ge=ge!==null&&ge.memoizedState!==null||Nn;var Be=nr,Je=Nn;nr=Ne,(Nn=ge)&&!Je?za(pe,Ae,(Ae.subtreeFlags&8772)!==0):Fs(pe,Ae),nr=Be,Nn=Je}Pe&512&&(Ae.memoizedProps.mode==="manual"?go(Ae,Ae.return):wn(Ae,Ae.return));break;default:Fs(pe,Ae)}}function Xo(pe){var ge=pe.alternate;ge!==null&&(pe.alternate=null,Xo(ge)),pe.child=null,pe.deletions=null,pe.sibling=null,pe.tag===5&&(ge=pe.stateNode,ge!==null&&lh(ge)),pe.stateNode=null,pe.return=null,pe.dependencies=null,pe.memoizedProps=null,pe.memoizedState=null,pe.pendingProps=null,pe.stateNode=null,pe.updateQueue=null}function Kr(pe,ge,Ae){for(Ae=Ae.child;Ae!==null;)Oc(pe,ge,Ae),Ae=Ae.sibling}function Oc(pe,ge,Ae){if(Hr&&typeof Hr.onCommitFiberUnmount=="function")try{Hr.onCommitFiberUnmount(al,Ae)}catch{}switch(Ae.tag){case 26:if(ns){Nn||wn(Ae,ge),Kr(pe,ge,Ae),Ae.memoizedState?Mh(Ae.memoizedState):Ae.stateNode&&wh(Ae.stateNode);break}case 27:if(pr){Nn||wn(Ae,ge);var Pe=Xn,Ne=qr;Xn=Ae.stateNode,Kr(pe,ge,Ae),Fd(Ae.stateNode),Xn=Pe,qr=Ne;break}case 5:Nn||wn(Ae,ge);case 6:if(fr){if(Pe=Xn,Ne=qr,Xn=null,Kr(pe,ge,Ae),Xn=Pe,qr=Ne,Xn!==null)if(qr)try{Gn(Xn,Ae.stateNode)}catch(Be){Xi(Ae,ge,Be)}else try{Dr(Xn,Ae.stateNode)}catch(Be){Xi(Ae,ge,Be)}}else Kr(pe,ge,Ae);break;case 18:fr&&Xn!==null&&(qr?Ah(Xn,Ae.stateNode):Bd(Xn,Ae.stateNode));break;case 4:fr?(Pe=Xn,Ne=qr,Xn=Ae.stateNode.containerInfo,qr=!0,Kr(pe,ge,Ae),Xn=Pe,qr=Ne):(Qr&&dd(Ae.stateNode,Ae,Zc()),Kr(pe,ge,Ae));break;case 0:case 11:case 14:case 15:Nn||ka(2,Ae,ge),Nn||ka(4,Ae,ge),Kr(pe,ge,Ae);break;case 1:Nn||(wn(Ae,ge),Pe=Ae.stateNode,typeof Pe.componentWillUnmount=="function"&&hd(Ae,ge,Pe)),Kr(pe,ge,Ae);break;case 21:Kr(pe,ge,Ae);break;case 22:Nn||wn(Ae,ge),Nn=(Pe=Nn)||Ae.memoizedState!==null,Kr(pe,ge,Ae),Nn=Pe;break;default:Kr(pe,ge,Ae)}}function Ua(pe,ge){if(Nr&&ge.memoizedState===null&&(pe=ge.alternate,pe!==null&&(pe=pe.memoizedState,pe!==null&&(pe=pe.dehydrated,pe!==null))))try{iu(pe)}catch(Ae){Xi(ge,ge.return,Ae)}}function qo(pe){switch(pe.tag){case 13:case 19:var ge=pe.stateNode;return ge===null&&(ge=pe.stateNode=new dl),ge;case 22:return pe=pe.stateNode,ge=pe._retryCache,ge===null&&(ge=pe._retryCache=new dl),ge;default:throw Error(Q(435,pe.tag))}}function Ul(pe,ge){var Ae=qo(pe);ge.forEach(function(Pe){var Ne=qu.bind(null,pe,Pe);Ae.has(Pe)||(Ae.add(Pe),Pe.then(Ne,Ne))})}function Pr(pe,ge){var Ae=ge.deletions;if(Ae!==null)for(var Pe=0;Pe<Ae.length;Pe++){var Ne=Ae[Pe],Be=pe,Je=ge;if(fr){var st=Je;e:for(;st!==null;){switch(st.tag){case 27:case 5:Xn=st.stateNode,qr=!1;break e;case 3:Xn=st.stateNode.containerInfo,qr=!0;break e;case 4:Xn=st.stateNode.containerInfo,qr=!0;break e}st=st.return}if(Xn===null)throw Error(Q(160));Oc(Be,Je,Ne),Xn=null,qr=!1}else Oc(Be,Je,Ne);Be=Ne.alternate,Be!==null&&(Be.return=null),Ne.return=null}if(ge.subtreeFlags&13878)for(ge=ge.child;ge!==null;)Ia(ge,pe),ge=ge.sibling}function Ia(pe,ge){var Ae=pe.alternate,Pe=pe.flags;switch(pe.tag){case 0:case 11:case 14:case 15:Pr(ge,pe),zr(pe),Pe&4&&(ka(3,pe,pe.return),kl(3,pe),ka(5,pe,pe.return));break;case 1:Pr(ge,pe),zr(pe),Pe&512&&(Nn||Ae===null||wn(Ae,Ae.return)),Pe&64&&nr&&(pe=pe.updateQueue,pe!==null&&(Pe=pe.callbacks,Pe!==null&&(Ae=pe.shared.hiddenCallbacks,pe.shared.hiddenCallbacks=Ae===null?Pe:Ae.concat(Pe))));break;case 26:if(ns){var Ne=Lr;Pr(ge,pe),zr(pe),Pe&512&&(Nn||Ae===null||wn(Ae,Ae.return)),Pe&4&&(Pe=Ae!==null?Ae.memoizedState:null,ge=pe.memoizedState,Ae===null?ge===null?pe.stateNode===null?pe.stateNode=Eh(Ne,pe.type,pe.memoizedProps,pe):Th(Ne,pe.type,pe.stateNode):pe.stateNode=Ch(Ne,ge,pe.memoizedProps):Pe!==ge?(Pe===null?Ae.stateNode!==null&&wh(Ae.stateNode):Mh(Pe),ge===null?Th(Ne,pe.type,pe.stateNode):Ch(Ne,ge,pe.memoizedProps)):ge===null&&pe.stateNode!==null&&Vu(pe,pe.memoizedProps,Ae.memoizedProps));break}case 27:if(pr&&Pe&4&&pe.alternate===null){Ne=pe.stateNode;var Be=pe.memoizedProps;try{bf(Ne),xf(pe.type,Be,Ne,pe)}catch(oi){Xi(pe,pe.return,oi)}}case 5:if(Pr(ge,pe),zr(pe),Pe&512&&(Nn||Ae===null||wn(Ae,Ae.return)),fr){if(pe.flags&32){ge=pe.stateNode;try{Jl(ge)}catch(oi){Xi(pe,pe.return,oi)}}Pe&4&&pe.stateNode!=null&&(ge=pe.memoizedProps,Vu(pe,ge,Ae!==null?Ae.memoizedProps:ge)),Pe&1024&&(oo=!0)}break;case 6:if(Pr(ge,pe),zr(pe),Pe&4&&fr){if(pe.stateNode===null)throw Error(Q(162));Pe=pe.memoizedProps,Ae=Ae!==null?Ae.memoizedProps:Pe,ge=pe.stateNode;try{Sd(ge,Ae,Pe)}catch(oi){Xi(pe,pe.return,oi)}}break;case 3:if(ns?(Ph(),Ne=Lr,Lr=nu(ge.containerInfo),Pr(ge,pe),Lr=Ne):Pr(ge,pe),zr(pe),Pe&4){if(fr&&Nr&&Ae!==null&&Ae.memoizedState.isDehydrated)try{tu(ge.containerInfo)}catch(oi){Xi(pe,pe.return,oi)}if(Qr){Pe=ge.containerInfo,Ae=ge.pendingChildren;try{_h(Pe,Ae)}catch(oi){Xi(pe,pe.return,oi)}}}oo&&(oo=!1,Gu(pe));break;case 4:ns?(Ae=Lr,Lr=nu(pe.stateNode.containerInfo),Pr(ge,pe),zr(pe),Lr=Ae):(Pr(ge,pe),zr(pe)),Pe&4&&Qr&&dd(pe.stateNode,pe,pe.stateNode.pendingChildren);break;case 12:Pr(ge,pe),zr(pe);break;case 13:Pr(ge,pe),zr(pe),pe.child.flags&8192&&pe.memoizedState!==null!=(Ae!==null&&Ae.memoizedState!==null)&&(ea=mr()),Pe&4&&(Pe=pe.updateQueue,Pe!==null&&(pe.updateQueue=null,Ul(pe,Pe)));break;case 22:Pe&512&&(Nn||Ae===null||wn(Ae,Ae.return)),Ne=pe.memoizedState!==null;var Je=Ae!==null&&Ae.memoizedState!==null,st=nr,xt=Nn;if(nr=st||Ne,Nn=xt||Je,Pr(ge,pe),Nn=xt,nr=st,zr(pe),ge=pe.stateNode,ge._current=pe,ge._visibility&=-3,ge._visibility|=ge._pendingVisibility&2,Pe&8192&&(ge._visibility=Ne?ge._visibility&-2:ge._visibility|1,Ne&&(ge=nr||Nn,Ae===null||Je||ge||$o(pe)),fr&&(pe.memoizedProps===null||pe.memoizedProps.mode!=="manual"))){e:if(Ae=null,fr)for(ge=pe;;){if(ge.tag===5||ns&&ge.tag===26||pr&&ge.tag===27){if(Ae===null){Je=Ae=ge;try{Be=Je.stateNode,Ne?Kl(Be):mh(Je.stateNode,Je.memoizedProps)}catch(oi){Xi(Je,Je.return,oi)}}}else if(ge.tag===6){if(Ae===null){Je=ge;try{var Gt=Je.stateNode;Ne?Jc(Gt):ya(Gt,Je.memoizedProps)}catch(oi){Xi(Je,Je.return,oi)}}}else if((ge.tag!==22&&ge.tag!==23||ge.memoizedState===null||ge===pe)&&ge.child!==null){ge.child.return=ge,ge=ge.child;continue}if(ge===pe)break e;for(;ge.sibling===null;){if(ge.return===null||ge.return===pe)break e;Ae===ge&&(Ae=null),ge=ge.return}Ae===ge&&(Ae=null),ge.sibling.return=ge.return,ge=ge.sibling}}Pe&4&&(Pe=pe.updateQueue,Pe!==null&&(Ae=Pe.retryQueue,Ae!==null&&(Pe.retryQueue=null,Ul(pe,Ae))));break;case 19:Pr(ge,pe),zr(pe),Pe&4&&(Pe=pe.updateQueue,Pe!==null&&(pe.updateQueue=null,Ul(pe,Pe)));break;case 21:break;default:Pr(ge,pe),zr(pe)}}function zr(pe){var ge=pe.flags;if(ge&2){try{if(fr&&(!pr||pe.tag!==27)){e:{for(var Ae=pe.return;Ae!==null;){if(ju(Ae)){var Pe=Ae;break e}Ae=Ae.return}throw Error(Q(160))}switch(Pe.tag){case 27:if(pr){var Ne=Pe.stateNode,Be=wc(pe);Ho(pe,Be,Ne);break}case 5:var Je=Pe.stateNode;Pe.flags&32&&(Jl(Je),Pe.flags&=-33);var st=wc(pe);Ho(pe,st,Je);break;case 3:case 4:var xt=Pe.stateNode.containerInfo,Gt=wc(pe);Pc(pe,Gt,xt);break;default:throw Error(Q(161))}}}catch(oi){Xi(pe,pe.return,oi)}pe.flags&=-3}ge&4096&&(pe.flags&=-4097)}function Gu(pe){if(pe.subtreeFlags&1024)for(pe=pe.child;pe!==null;){var ge=pe;Gu(ge),ge.tag===5&&ge.flags&1024&&mn(ge.stateNode),pe=pe.sibling}}function Fs(pe,ge){if(ge.subtreeFlags&8772)for(ge=ge.child;ge!==null;)Rc(pe,ge.alternate,ge),ge=ge.sibling}function $o(pe){for(pe=pe.child;pe!==null;){var ge=pe;switch(ge.tag){case 0:case 11:case 14:case 15:ka(4,ge,ge.return),$o(ge);break;case 1:wn(ge,ge.return);var Ae=ge.stateNode;typeof Ae.componentWillUnmount=="function"&&hd(ge,ge.return,Ae),$o(ge);break;case 26:case 27:case 5:wn(ge,ge.return),$o(ge);break;case 22:wn(ge,ge.return),ge.memoizedState===null&&$o(ge);break;default:$o(ge)}pe=pe.sibling}}function za(pe,ge,Ae){for(Ae=Ae&&(ge.subtreeFlags&8772)!==0,ge=ge.child;ge!==null;){var Pe=ge.alternate,Ne=pe,Be=ge,Je=Be.flags;switch(Be.tag){case 0:case 11:case 15:za(Ne,Be,Ae),kl(4,Be);break;case 1:if(za(Ne,Be,Ae),Pe=Be,Ne=Pe.stateNode,typeof Ne.componentDidMount=="function")try{Ne.componentDidMount()}catch(Gt){Xi(Pe,Pe.return,Gt)}if(Pe=Be,Ne=Pe.updateQueue,Ne!==null){var st=Pe.stateNode;try{var xt=Ne.shared.hiddenCallbacks;if(xt!==null)for(Ne.shared.hiddenCallbacks=null,Ne=0;Ne<xt.length;Ne++)rt(xt[Ne],st)}catch(Gt){Xi(Pe,Pe.return,Gt)}}Ae&&Je&64&&ud(Be),go(Be,Be.return);break;case 26:case 27:case 5:za(Ne,Be,Ae),Ae&&Pe===null&&Je&4&&Go(Be),go(Be,Be.return);break;case 12:za(Ne,Be,Ae);break;case 13:za(Ne,Be,Ae),Ae&&Je&4&&Ua(Ne,Be);break;case 22:Be.memoizedState===null&&za(Ne,Be,Ae),go(Be,Be.return);break;default:za(Ne,Be,Ae)}ge=ge.sibling}}function Hu(pe,ge){var Ae=null;pe!==null&&pe.memoizedState!==null&&pe.memoizedState.cachePool!==null&&(Ae=pe.memoizedState.cachePool.pool),pe=null,ge.memoizedState!==null&&ge.memoizedState.cachePool!==null&&(pe=ge.memoizedState.cachePool.pool),pe!==Ae&&(pe!=null&&pe.refCount++,Ae!=null&&zo(Ae))}function Nc(pe,ge){pe=null,ge.alternate!==null&&(pe=ge.alternate.memoizedState.cache),ge=ge.memoizedState.cache,ge!==pe&&(ge.refCount++,pe!=null&&zo(pe))}function ca(pe,ge,Ae,Pe){if(ge.subtreeFlags&10256)for(ge=ge.child;ge!==null;)Lc(pe,ge,Ae,Pe),ge=ge.sibling}function Lc(pe,ge,Ae,Pe){var Ne=ge.flags;switch(ge.tag){case 0:case 11:case 15:ca(pe,ge,Ae,Pe),Ne&2048&&kl(9,ge);break;case 3:ca(pe,ge,Ae,Pe),Ne&2048&&(pe=null,ge.alternate!==null&&(pe=ge.alternate.memoizedState.cache),ge=ge.memoizedState.cache,ge!==pe&&(ge.refCount++,pe!=null&&zo(pe)));break;case 12:if(Ne&2048){ca(pe,ge,Ae,Pe),pe=ge.stateNode;try{var Be=ge.memoizedProps,Je=Be.id,st=Be.onPostCommit;typeof st=="function"&&st(Je,ge.alternate===null?"mount":"update",pe.passiveEffectDuration,-0)}catch(xt){Xi(ge,ge.return,xt)}}else ca(pe,ge,Ae,Pe);break;case 23:break;case 22:Be=ge.stateNode,ge.memoizedState!==null?Be._visibility&4?ca(pe,ge,Ae,Pe):Fa(pe,ge):Be._visibility&4?ca(pe,ge,Ae,Pe):(Be._visibility|=4,yr(pe,ge,Ae,Pe,(ge.subtreeFlags&10256)!==0)),Ne&2048&&Hu(ge.alternate,ge);break;case 24:ca(pe,ge,Ae,Pe),Ne&2048&&Nc(ge.alternate,ge);break;default:ca(pe,ge,Ae,Pe)}}function yr(pe,ge,Ae,Pe,Ne){for(Ne=Ne&&(ge.subtreeFlags&10256)!==0,ge=ge.child;ge!==null;){var Be=pe,Je=ge,st=Ae,xt=Pe,Gt=Je.flags;switch(Je.tag){case 0:case 11:case 15:yr(Be,Je,st,xt,Ne),kl(8,Je);break;case 23:break;case 22:var oi=Je.stateNode;Je.memoizedState!==null?oi._visibility&4?yr(Be,Je,st,xt,Ne):Fa(Be,Je):(oi._visibility|=4,yr(Be,Je,st,xt,Ne)),Ne&&Gt&2048&&Hu(Je.alternate,Je);break;case 24:yr(Be,Je,st,xt,Ne),Ne&&Gt&2048&&Nc(Je.alternate,Je);break;default:yr(Be,Je,st,xt,Ne)}ge=ge.sibling}}function Fa(pe,ge){if(ge.subtreeFlags&10256)for(ge=ge.child;ge!==null;){var Ae=pe,Pe=ge,Ne=Pe.flags;switch(Pe.tag){case 22:Fa(Ae,Pe),Ne&2048&&Hu(Pe.alternate,Pe);break;case 24:Fa(Ae,Pe),Ne&2048&&Nc(Pe.alternate,Pe);break;default:Fa(Ae,Pe)}ge=ge.sibling}}function sr(pe){if(pe.subtreeFlags&No)for(pe=pe.child;pe!==null;)vo(pe),pe=pe.sibling}function vo(pe){switch(pe.tag){case 26:sr(pe),pe.flags&No&&(pe.memoizedState!==null?Oh(Lr,pe.memoizedState,pe.memoizedProps):Un(pe.type,pe.memoizedProps));break;case 5:sr(pe),pe.flags&No&&Un(pe.type,pe.memoizedProps);break;case 3:case 4:if(ns){var ge=Lr;Lr=nu(pe.stateNode.containerInfo),sr(pe),Lr=ge}else sr(pe);break;case 22:pe.memoizedState===null&&(ge=pe.alternate,ge!==null&&ge.memoizedState!==null?(ge=No,No=16777216,sr(pe),No=ge):sr(pe));break;default:sr(pe)}}function Bc(pe){var ge=pe.alternate;if(ge!==null&&(pe=ge.child,pe!==null)){ge.child=null;do ge=pe.sibling,pe.sibling=null,pe=ge;while(pe!==null)}}function Va(pe){var ge=pe.deletions;if((pe.flags&16)!==0){if(ge!==null)for(var Ae=0;Ae<ge.length;Ae++){var Pe=ge[Ae];jn=Pe,ja(Pe,pe)}Bc(pe)}if(pe.subtreeFlags&10256)for(pe=pe.child;pe!==null;)Il(pe),pe=pe.sibling}function Il(pe){switch(pe.tag){case 0:case 11:case 15:Va(pe),pe.flags&2048&&ka(9,pe,pe.return);break;case 3:Va(pe);break;case 12:Va(pe);break;case 22:var ge=pe.stateNode;pe.memoizedState!==null&&ge._visibility&4&&(pe.return===null||pe.return.tag!==13)?(ge._visibility&=-5,Wo(pe)):Va(pe);break;default:Va(pe)}}function Wo(pe){var ge=pe.deletions;if((pe.flags&16)!==0){if(ge!==null)for(var Ae=0;Ae<ge.length;Ae++){var Pe=ge[Ae];jn=Pe,ja(Pe,pe)}Bc(pe)}for(pe=pe.child;pe!==null;){switch(ge=pe,ge.tag){case 0:case 11:case 15:ka(8,ge,ge.return),Wo(ge);break;case 22:Ae=ge.stateNode,Ae._visibility&4&&(Ae._visibility&=-5,Wo(ge));break;default:Wo(ge)}pe=pe.sibling}}function ja(pe,ge){for(;jn!==null;){var Ae=jn;switch(Ae.tag){case 0:case 11:case 15:ka(8,Ae,ge);break;case 23:case 22:if(Ae.memoizedState!==null&&Ae.memoizedState.cachePool!==null){var Pe=Ae.memoizedState.cachePool.pool;Pe!=null&&Pe.refCount++}break;case 24:zo(Ae.memoizedState.cache)}if(Pe=Ae.child,Pe!==null)Pe.return=Ae,jn=Pe;else e:for(Ae=pe;jn!==null;){Pe=jn;var Ne=Pe.sibling,Be=Pe.return;if(Xo(Pe),Pe===Ae){jn=null;break e}if(Ne!==null){Ne.return=Be,jn=Ne;break e}jn=Be}}}function kc(pe){var ge=ah(pe);if(ge!=null){if(typeof ge.memoizedProps["data-testname"]!="string")throw Error(Q(364));return ge}if(pe=Eo(pe),pe===null)throw Error(Q(362));return pe.stateNode.current}function Jo(pe,ge){var Ae=pe.tag;switch(ge.$$typeof){case dc:if(pe.type===ge.value)return!0;break;case pu:e:{for(ge=ge.value,pe=[pe,0],Ae=0;Ae<pe.length;){var Pe=pe[Ae++],Ne=Pe.tag,Be=pe[Ae++],Je=ge[Be];if(Ne!==5&&Ne!==26&&Ne!==27||!Ws(Pe)){for(;Je!=null&&Jo(Pe,Je);)Be++,Je=ge[Be];if(Be===ge.length){ge=!0;break e}else for(Pe=Pe.child;Pe!==null;)pe.push(Pe,Be),Pe=Pe.sibling}}ge=!1}return ge;case mu:if((Ae===5||Ae===26||Ae===27)&&mf(pe.stateNode,ge.value))return!0;break;case cn:if((Ae===5||Ae===6||Ae===26||Ae===27)&&(pe=Wl(pe),pe!==null&&0<=pe.indexOf(ge.value)))return!0;break;case Zi:if((Ae===5||Ae===26||Ae===27)&&(pe=pe.memoizedProps["data-testname"],typeof pe=="string"&&pe.toLowerCase()===ge.value.toLowerCase()))return!0;break;default:throw Error(Q(365))}return!1}function Ga(pe){switch(pe.$$typeof){case dc:return"<"+(te(pe.value)||"Unknown")+">";case pu:return":has("+(Ga(pe)||"")+")";case mu:return'[role="'+pe.value+'"]';case cn:return'"'+pe.value+'"';case Zi:return'[data-testname="'+pe.value+'"]';default:throw Error(Q(365))}}function fd(pe,ge){var Ae=[];pe=[pe,0];for(var Pe=0;Pe<pe.length;){var Ne=pe[Pe++],Be=Ne.tag,Je=pe[Pe++],st=ge[Je];if(Be!==5&&Be!==26&&Be!==27||!Ws(Ne)){for(;st!=null&&Jo(Ne,st);)Je++,st=ge[Je];if(Je===ge.length)Ae.push(Ne);else for(Ne=Ne.child;Ne!==null;)pe.push(Ne,Je),Ne=Ne.sibling}}return Ae}function Rr(pe,ge){if(!$s)throw Error(Q(363));pe=kc(pe),pe=fd(pe,ge),ge=[],pe=Array.from(pe);for(var Ae=0;Ae<pe.length;){var Pe=pe[Ae++],Ne=Pe.tag;if(Ne===5||Ne===26||Ne===27)Ws(Pe)||ge.push(Pe.stateNode);else for(Pe=Pe.child;Pe!==null;)pe.push(Pe),Pe=Pe.sibling}return ge}function Or(){if((Mi&2)!==0&&Vi!==0)return Vi&-Vi;if(Pi.T!==null){var pe=Yr;return pe!==0?pe:At()}return vs()}function Vs(){$r===0&&($r=(Vi&536870912)===0||tn?Re():536870912);var pe=us.current;return pe!==null&&(pe.flags|=32),$r}function br(pe,ge,Ae){(pe===Gi&&gn===2||pe.cancelPendingCommit!==null)&&(Ts(pe,0),Es(pe,Vi,$r,!1)),De(pe,Ae),((Mi&2)===0||pe!==Gi)&&(pe===Gi&&((Mi&2)===0&&(Ls|=Ae),Qi===4&&Es(pe,Vi,$r,!1)),ri(pe))}function zl(pe,ge,Ae){if((Mi&6)!==0)throw Error(Q(327));var Pe=!Ae&&(ge&60)===0&&(ge&pe.expiredLanes)===0||Ce(pe,ge),Ne=Pe?Hs(pe,ge):js(pe,ge,!0),Be=Pe;do{if(Ne===0){hs&&!Pe&&Es(pe,ge,0,!1);break}else if(Ne===6)Es(pe,ge,0,!un);else{if(Ae=pe.current.alternate,Be&&!pd(Ae)){Ne=js(pe,ge,!1),Be=!1;continue}if(Ne===2){if(Be=ge,pe.errorRecoveryDisabledLanes&Be)var Je=0;else Je=pe.pendingLanes&-536870913,Je=Je!==0?Je:Je&536870912?536870912:0;if(Je!==0){ge=Je;e:{var st=pe;Ne=fl;var xt=Nr&&st.current.memoizedState.isDehydrated;if(xt&&(Ts(st,Je).flags|=256),Je=js(st,Je,!1),Je!==2){if(Ma&&!xt){st.errorRecoveryDisabledLanes|=Be,Ls|=Be,Ne=4;break e}Be=fs,fs=Ne,Be!==null&&ua(Be)}Ne=Je}if(Be=!1,Ne!==2)continue}}if(Ne===1){Ts(pe,0),Es(pe,ge,0,!0);break}e:{switch(Pe=pe,Ne){case 0:case 1:throw Error(Q(345));case 4:if((ge&4194176)===ge){Es(Pe,ge,$r,!un);break e}break;case 2:fs=null;break;case 3:case 5:break;default:throw Error(Q(329))}if(Pe.finishedWork=Ae,Pe.finishedLanes=ge,(ge&62914560)===ge&&(Be=ea+300-mr(),10<Be)){if(Es(Pe,ge,$r,!un),Se(Pe,0)!==0)break e;Pe.timeoutHandle=sh(Uc.bind(null,Pe,Ae,fs,Bs,pl,ge,$r,Ls,Ea,un,2,-0,0),Be);break e}Uc(Pe,Ae,fs,Bs,pl,ge,$r,Ls,Ea,un,0,-0,0)}}break}while(!0);ri(pe)}function ua(pe){fs===null?fs=pe:fs.push.apply(fs,pe)}function Uc(pe,ge,Ae,Pe,Ne,Be,Je,st,xt,Gt,oi,mi,gi){var Li=ge.subtreeFlags;if((Li&8192||(Li&16785408)===16785408)&&(es(),vo(ge),ge=qc(),ge!==null)){pe.cancelPendingCommit=ge(An.bind(null,pe,Ae,Pe,Ne,Je,st,xt,1,mi,gi)),Es(pe,Be,Je,!Gt);return}An(pe,Ae,Pe,Ne,Je,st,xt,oi,mi,gi)}function pd(pe){for(var ge=pe;;){var Ae=ge.tag;if((Ae===0||Ae===11||Ae===15)&&ge.flags&16384&&(Ae=ge.updateQueue,Ae!==null&&(Ae=Ae.stores,Ae!==null)))for(var Pe=0;Pe<Ae.length;Pe++){var Ne=Ae[Pe],Be=Ne.getSnapshot;Ne=Ne.value;try{if(!rs(Be(),Ne))return!1}catch{return!1}}if(Ae=ge.child,ge.subtreeFlags&16384&&Ae!==null)Ae.return=ge,ge=Ae;else{if(ge===pe)break;for(;ge.sibling===null;){if(ge.return===null||ge.return===pe)return!0;ge=ge.return}ge.sibling.return=ge.return,ge=ge.sibling}}return!0}function Es(pe,ge,Ae,Pe){ge&=~Er,ge&=~Ls,pe.suspendedLanes|=ge,pe.pingedLanes&=~ge,Pe&&(pe.warmLanes|=ge),Pe=pe.expirationTimes;for(var Ne=ge;0<Ne;){var Be=31-Gr(Ne),Je=1<<Be;Pe[Be]=-1,Ne&=~Je}Ae!==0&&Ue(pe,Ae,ge)}function Yu(){return(Mi&6)===0?(ti(0),!1):!0}function Fr(){if(Bi!==null){if(gn===0)var pe=Bi.return;else pe=Bi,Vn=ao=null,Et(pe),Ks=null,bs=0,pe=Bi;for(;pe!==null;)Fu(pe.alternate,pe),pe=pe.return;Bi=null}}function Ts(pe,ge){pe.finishedWork=null,pe.finishedLanes=0;var Ae=pe.timeoutHandle;Ae!==Mo&&(pe.timeoutHandle=Mo,$l(Ae)),Ae=pe.cancelPendingCommit,Ae!==null&&(pe.cancelPendingCommit=null,Ae()),Fr(),Gi=pe,Bi=Ae=xr(pe.current,null),Vi=ge,gn=0,qn=null,un=!1,hs=Ce(pe,ge),Ma=!1,Ea=$r=Er=Ls=ds=Qi=0,fs=fl=null,pl=!1,(ge&8)!==0&&(ge|=ge&32);var Pe=pe.entangledLanes;if(Pe!==0)for(pe=pe.entanglements,Pe&=ge;0<Pe;){var Ne=31-Gr(Pe),Be=1<<Ne;ge|=pe[Ne],Pe&=~Be}return Ds=ge,vt(),Ae}function _o(pe,ge){zi=null,Pi.H=nn,ge===fn?(ge=hi(),gn=3):ge===Bh?(ge=hi(),gn=4):gn=ge===qd?8:ge!==null&&typeof ge=="object"&&typeof ge.then=="function"?6:1,qn=ge,Bi===null&&(Qi=1,yc(pe,$e(ge,pe.current)))}function Fl(){var pe=us.current;return pe===null?!0:(Vi&4194176)===Vi?xs===null:(Vi&62914560)===Vi||(Vi&536870912)!==0?pe===xs:!1}function Ko(){var pe=Pi.H;return Pi.H=nn,pe===null?nn:pe}function Zr(){var pe=Pi.A;return Pi.A=fu,pe}function Vr(){Qi=4,un||(Vi&4194176)!==Vi&&us.current!==null||(hs=!0),(ds&134217727)===0&&(Ls&134217727)===0||Gi===null||Es(Gi,Vi,$r,!1)}function js(pe,ge,Ae){var Pe=Mi;Mi|=2;var Ne=Ko(),Be=Zr();(Gi!==pe||Vi!==ge)&&(Bs=null,Ts(pe,ge)),ge=!1;var Je=Qi;e:do try{if(gn!==0&&Bi!==null){var st=Bi,xt=qn;switch(gn){case 8:Fr(),Je=6;break e;case 3:case 2:case 6:us.current===null&&(ge=!0);var Gt=gn;if(gn=0,qn=null,Ha(pe,st,xt,Gt),Ae&&hs){Je=0;break e}break;default:Gt=gn,gn=0,qn=null,Ha(pe,st,xt,Gt)}}Gs(),Je=Qi;break}catch(oi){_o(pe,oi)}while(!0);return ge&&pe.shellSuspendCounter++,Vn=ao=null,Mi=Pe,Pi.H=Ne,Pi.A=Be,Bi===null&&(Gi=null,Vi=0,vt()),Je}function Gs(){for(;Bi!==null;)Xu(Bi)}function Hs(pe,ge){var Ae=Mi;Mi|=2;var Pe=Ko(),Ne=Zr();Gi!==pe||Vi!==ge?(Bs=null,Dn=mr()+500,Ts(pe,ge)):hs=Ce(pe,ge);e:do try{if(gn!==0&&Bi!==null){ge=Bi;var Be=qn;t:switch(gn){case 1:gn=0,qn=null,Ha(pe,ge,Be,1);break;case 2:if(ei(Be)){gn=0,qn=null,Ic(ge);break}ge=function(){gn===2&&Gi===pe&&(gn=7),ri(pe)},Be.then(ge,ge);break e;case 3:gn=7;break e;case 4:gn=5;break e;case 7:ei(Be)?(gn=0,qn=null,Ic(ge)):(gn=0,qn=null,Ha(pe,ge,Be,7));break;case 5:var Je=null;switch(Bi.tag){case 26:Je=Bi.memoizedState;case 5:case 27:var st=Bi,xt=st.type,Gt=st.pendingProps;if(Je?Rh(Je):_a(xt,Gt)){gn=0,qn=null;var oi=st.sibling;if(oi!==null)Bi=oi;else{var mi=st.return;mi!==null?(Bi=mi,Vl(mi)):Bi=null}break t}}gn=0,qn=null,Ha(pe,ge,Be,5);break;case 6:gn=0,qn=null,Ha(pe,ge,Be,6);break;case 8:Fr(),Qi=6;break e;default:throw Error(Q(462))}}ha();break}catch(gi){_o(pe,gi)}while(!0);return Vn=ao=null,Pi.H=Pe,Pi.A=Ne,Mi=Ae,Bi!==null?0:(Gi=null,Vi=0,vt(),Qi)}function ha(){for(;Bi!==null&&!jd();)Xu(Bi)}function Xu(pe){var ge=ad(pe.alternate,pe,Ds);pe.memoizedProps=pe.pendingProps,ge===null?Vl(pe):Bi=ge}function Ic(pe){var ge=pe,Ae=ge.alternate;switch(ge.tag){case 15:case 0:ge=td(Ae,ge,ge.pendingProps,ge.type,void 0,Vi);break;case 11:ge=td(Ae,ge,ge.pendingProps,ge.type.render,ge.ref,Vi);break;case 5:Et(ge);default:Fu(Ae,ge),ge=Bi=pa(ge,Ds),ge=ad(Ae,ge,Ds)}pe.memoizedProps=pe.pendingProps,ge===null?Vl(pe):Bi=ge}function Ha(pe,ge,Ae,Pe){Vn=ao=null,Et(ge),Ks=null,bs=0;var Ne=ge.return;try{if(Jh(pe,Ne,ge,Ae,Vi)){Qi=1,yc(pe,$e(Ae,pe.current)),Bi=null;return}}catch(Be){if(Ne!==null)throw Bi=Ne,Be;Qi=1,yc(pe,$e(Ae,pe.current)),Bi=null;return}ge.flags&32768?(tn||Pe===1?pe=!0:hs||(Vi&536870912)!==0?pe=!1:(un=pe=!0,(Pe===2||Pe===3||Pe===6)&&(Pe=us.current,Pe!==null&&Pe.tag===13&&(Pe.flags|=16384))),ar(ge,pe)):Vl(ge)}function Vl(pe){var ge=pe;do{if((ge.flags&32768)!==0){ar(ge,un);return}pe=ge.return;var Ae=ld(ge.alternate,ge,Ds);if(Ae!==null){Bi=Ae;return}if(ge=ge.sibling,ge!==null){Bi=ge;return}Bi=ge=pe}while(ge!==null);Qi===0&&(Qi=5)}function ar(pe,ge){do{var Ae=cd(pe.alternate,pe);if(Ae!==null){Ae.flags&=32767,Bi=Ae;return}if(Ae=pe.return,Ae!==null&&(Ae.flags|=32768,Ae.subtreeFlags=0,Ae.deletions=null),!ge&&(pe=pe.sibling,pe!==null)){Bi=pe;return}Bi=pe=Ae}while(pe!==null);Qi=6,Bi=null}function An(pe,ge,Ae,Pe,Ne,Be,Je,st,xt,Gt){var oi=Pi.T,mi=ir();try{Ar(2),Pi.T=null,$i(pe,ge,Ae,Pe,mi,Ne,Be,Je,st,xt,Gt)}finally{Pi.T=oi,Ar(mi)}}function $i(pe,ge,Ae,Pe,Ne,Be,Je,st){do or();while(Ta!==null);if((Mi&6)!==0)throw Error(Q(327));var xt=pe.finishedWork;if(Pe=pe.finishedLanes,xt===null)return null;if(pe.finishedWork=null,pe.finishedLanes=0,xt===pe.current)throw Error(Q(177));pe.callbackNode=null,pe.callbackPriority=0,pe.cancelPendingCommit=null;var Gt=xt.lanes|xt.childLanes;if(Gt|=ll,Le(pe,Pe,Gt,Be,Je,st),pe===Gi&&(Bi=Gi=null,Vi=0),(xt.subtreeFlags&10256)===0&&(xt.flags&10256)===0||Ss||(Ss=!0,gu=Gt,Lo=Ae,jl(su,function(){return or(),null})),Ae=(xt.flags&15990)!==0,(xt.subtreeFlags&15990)!==0||Ae?(Ae=Pi.T,Pi.T=null,Be=ir(),Ar(2),Je=Mi,Mi|=4,Yo(pe,xt),Ia(xt,pe),nh(pe.containerInfo),pe.current=xt,Rc(pe,xt.alternate,xt),Gd(),Mi=Je,Ar(Be),Pi.T=Ae):pe.current=xt,Ss?(Ss=!1,Ta=pe,Do=Pe):da(pe,Gt),Gt=pe.pendingLanes,Gt===0&&(ps=null),ke(xt.stateNode),ri(pe),ge!==null)for(Ne=pe.onRecoverableError,xt=0;xt<ge.length;xt++)Gt=ge[xt],Ne(Gt.value,{componentStack:Gt.stack});return(Do&3)!==0&&or(),Gt=pe.pendingLanes,(Pe&4194218)!==0&&(Gt&42)!==0?pe===Br?Bo++:(Bo=0,Br=pe):Bo=0,ti(0),null}function da(pe,ge){(pe.pooledCacheLanes&=ge)===0&&(ge=pe.pooledCache,ge!=null&&(pe.pooledCache=null,zo(ge)))}function or(){if(Ta!==null){var pe=Ta,ge=gu;gu=0;var Ae=Ye(Do),Pe=32>Ae?32:Ae;Ae=Pi.T;var Ne=ir();try{if(Ar(Pe),Pi.T=null,Ta===null)var Be=!1;else{Pe=Lo,Lo=null;var Je=Ta,st=Do;if(Ta=null,Do=0,(Mi&6)!==0)throw Error(Q(331));var xt=Mi;if(Mi|=4,Il(Je.current),Lc(Je,Je.current,st,Pe),Mi=xt,ti(0,!1),Hr&&typeof Hr.onPostCommitFiberRoot=="function")try{Hr.onPostCommitFiberRoot(al,Je)}catch{}Be=!0}return Be}finally{Ar(Ne),Pi.T=Ae,da(pe,ge)}}return!1}function zc(pe,ge,Ae){ge=$e(Ae,ge),ge=Rl(pe.stateNode,ge,2),pe=Pt(pe,ge,2),pe!==null&&(De(pe,2),ri(pe))}function Xi(pe,ge,Ae){if(pe.tag===3)zc(pe,pe,Ae);else for(;ge!==null;){if(ge.tag===3){zc(ge,pe,Ae);break}else if(ge.tag===1){var Pe=ge.stateNode;if(typeof ge.type.getDerivedStateFromError=="function"||typeof Pe.componentDidCatch=="function"&&(ps===null||!ps.has(Pe))){pe=$e(Ae,pe),Ae=Io(2),Pe=Pt(ge,Ae,2),Pe!==null&&(Ol(Ae,Pe,ge,pe),De(Pe,2),ri(Pe));break}}ge=ge.return}}function Fc(pe,ge,Ae){var Pe=pe.pingCache;if(Pe===null){Pe=pe.pingCache=new qi;var Ne=new Set;Pe.set(ge,Ne)}else Ne=Pe.get(ge),Ne===void 0&&(Ne=new Set,Pe.set(ge,Ne));Ne.has(Ae)||(Ma=!0,Ne.add(Ae),pe=md.bind(null,pe,ge,Ae),ge.then(pe,pe))}function md(pe,ge,Ae){var Pe=pe.pingCache;Pe!==null&&Pe.delete(ge),pe.pingedLanes|=pe.suspendedLanes&Ae,pe.warmLanes&=~Ae,Gi===pe&&(Vi&Ae)===Ae&&(Qi===4||Qi===3&&(Vi&62914560)===Vi&&300>mr()-ea?(Mi&2)===0&&Ts(pe,0):Er|=Ae,Ea===Vi&&(Ea=0)),ri(pe)}function yo(pe,ge){ge===0&&(ge=Te()),pe=Ut(pe,ge),pe!==null&&(De(pe,ge),ri(pe))}function bo(pe){var ge=pe.memoizedState,Ae=0;ge!==null&&(Ae=ge.retryLane),yo(pe,Ae)}function qu(pe,ge){var Ae=0;switch(pe.tag){case 13:var Pe=pe.stateNode,Ne=pe.memoizedState;Ne!==null&&(Ae=Ne.retryLane);break;case 19:Pe=pe.stateNode;break;case 22:Pe=pe.stateNode._retryCache;break;default:throw Error(Q(314))}Pe!==null&&Pe.delete(ge),yo(pe,Ae)}function jl(pe,ge){return sl(pe,ge)}function $u(pe,ge,Ae,Pe){this.tag=pe,this.key=Ae,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=ge,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Pe,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fa(pe){return pe=pe.prototype,!(!pe||!pe.isReactComponent)}function xr(pe,ge){var Ae=pe.alternate;return Ae===null?(Ae=J(pe.tag,ge,pe.key,pe.mode),Ae.elementType=pe.elementType,Ae.type=pe.type,Ae.stateNode=pe.stateNode,Ae.alternate=pe,pe.alternate=Ae):(Ae.pendingProps=ge,Ae.type=pe.type,Ae.flags=0,Ae.subtreeFlags=0,Ae.deletions=null),Ae.flags=pe.flags&31457280,Ae.childLanes=pe.childLanes,Ae.lanes=pe.lanes,Ae.child=pe.child,Ae.memoizedProps=pe.memoizedProps,Ae.memoizedState=pe.memoizedState,Ae.updateQueue=pe.updateQueue,ge=pe.dependencies,Ae.dependencies=ge===null?null:{lanes:ge.lanes,firstContext:ge.firstContext},Ae.sibling=pe.sibling,Ae.index=pe.index,Ae.ref=pe.ref,Ae.refCleanup=pe.refCleanup,Ae}function pa(pe,ge){pe.flags&=31457282;var Ae=pe.alternate;return Ae===null?(pe.childLanes=0,pe.lanes=ge,pe.child=null,pe.subtreeFlags=0,pe.memoizedProps=null,pe.memoizedState=null,pe.updateQueue=null,pe.dependencies=null,pe.stateNode=null):(pe.childLanes=Ae.childLanes,pe.lanes=Ae.lanes,pe.child=Ae.child,pe.subtreeFlags=0,pe.deletions=null,pe.memoizedProps=Ae.memoizedProps,pe.memoizedState=Ae.memoizedState,pe.updateQueue=Ae.updateQueue,pe.type=Ae.type,ge=Ae.dependencies,pe.dependencies=ge===null?null:{lanes:ge.lanes,firstContext:ge.firstContext}),pe}function gs(pe,ge,Ae,Pe,Ne,Be){var Je=0;if(Pe=pe,typeof pe=="function")fa(pe)&&(Je=1);else if(typeof pe=="string")Je=ns&&pr?Sh(pe,Ae,cr.current)?26:nl(pe)?27:5:ns?Sh(pe,Ae,cr.current)?26:5:pr&&nl(pe)?27:5;else e:switch(pe){case Qo:return ma(Ae.children,Ne,Be,ge);case Qu:Je=8,Ne|=24;break;case eh:return pe=J(12,Ae,ge,Ne|2),pe.elementType=eh,pe.lanes=Be,pe;case Gc:return pe=J(13,Ae,ge,Ne),pe.elementType=Gc,pe.lanes=Be,pe;case qa:return pe=J(19,Ae,ge,Ne),pe.elementType=qa,pe.lanes=Be,pe;case Yl:return Vc(Ae,Ne,Be,ge);default:if(typeof pe=="object"&&pe!==null)switch(pe.$$typeof){case _d:case Ys:Je=10;break e;case Xa:Je=9;break e;case el:Je=11;break e;case Hl:Je=14;break e;case Ps:Je=16,Pe=null;break e}Je=29,Ae=Error(Q(130,pe===null?"null":typeof pe,"")),Pe=null}return ge=J(Je,Ae,ge,Ne),ge.elementType=pe,ge.type=Pe,ge.lanes=Be,ge}function ma(pe,ge,Ae,Pe){return pe=J(7,pe,Pe,ge),pe.lanes=Ae,pe}function Vc(pe,ge,Ae,Pe){pe=J(22,pe,Pe,ge),pe.elementType=Yl,pe.lanes=Ae;var Ne={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var Be=Ne._current;if(Be===null)throw Error(Q(456));if((Ne._pendingVisibility&2)===0){var Je=Ut(Be,2);Je!==null&&(Ne._pendingVisibility|=2,br(Je,Be,2))}},attach:function(){var Be=Ne._current;if(Be===null)throw Error(Q(456));if((Ne._pendingVisibility&2)!==0){var Je=Ut(Be,2);Je!==null&&(Ne._pendingVisibility&=-3,br(Je,Be,2))}}};return pe.stateNode=Ne,pe}function Ya(pe,ge,Ae){return pe=J(6,pe,null,ge),pe.lanes=Ae,pe}function Zo(pe,ge,Ae){return ge=J(4,pe.children!==null?pe.children:[],pe.key,ge),ge.lanes=Ae,ge.stateNode={containerInfo:pe.containerInfo,pendingChildren:null,implementation:pe.implementation},ge}function xo(pe,ge,Ae,Pe,Ne,Be,Je,st){this.tag=1,this.containerInfo=pe,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Mo,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ee(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ee(0),this.hiddenUpdates=Ee(null),this.identifierPrefix=Pe,this.onUncaughtError=Ne,this.onCaughtError=Be,this.onRecoverableError=Je,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=st,this.incompleteTransitions=new Map}function lr(pe,ge,Ae,Pe,Ne,Be,Je,st,xt,Gt,oi,mi){return pe=new xo(pe,ge,Ae,Je,st,xt,Gt,mi),ge=1,Be===!0&&(ge|=24),Be=J(3,null,null,ge),pe.current=Be,Be.stateNode=pe,ge=Cc(),ge.refCount++,pe.pooledCache=ge,ge.refCount++,Be.memoizedState={element:Pe,isDehydrated:Ae,cache:ge},It(Be),pe}function Gl(pe){return pe?(pe=To,pe):To}function Wu(pe){var ge=pe._reactInternals;if(ge===void 0)throw typeof pe.render=="function"?Error(Q(188)):(pe=Object.keys(pe).join(","),Error(Q(268,pe)));return pe=ce(ge),pe=pe!==null?ue(pe):null,pe===null?null:tl(pe.stateNode)}function gd(pe,ge,Ae,Pe,Ne,Be){Ne=Gl(Ne),Pe.context===null?Pe.context=Ne:Pe.pendingContext=Ne,Pe=Rt(ge),Pe.payload={element:Ae},Be=Be===void 0?null:Be,Be!==null&&(Pe.callback=Be),Ae=Pt(pe,Pe,ge),Ae!==null&&(br(Ae,pe,ge),mt(Ae,pe,ge))}function vd(pe,ge){if(pe=pe.memoizedState,pe!==null&&pe.dehydrated!==null){var Ae=pe.retryLane;pe.retryLane=Ae!==0&&Ae<ge?Ae:ge}}function Ju(pe,ge){vd(pe,ge),(pe=pe.alternate)&&vd(pe,ge)}var Ci={},Ku=requireReact(),dr=requireScheduler$1(),Ao=Object.assign,Zu=Symbol.for("react.element"),ga=Symbol.for("react.transitional.element"),ws=Symbol.for("react.portal"),Qo=Symbol.for("react.fragment"),Qu=Symbol.for("react.strict_mode"),eh=Symbol.for("react.profiler"),_d=Symbol.for("react.provider"),Xa=Symbol.for("react.consumer"),Ys=Symbol.for("react.context"),el=Symbol.for("react.forward_ref"),Gc=Symbol.for("react.suspense"),qa=Symbol.for("react.suspense_list"),Hl=Symbol.for("react.memo"),Ps=Symbol.for("react.lazy"),Yl=Symbol.for("react.offscreen"),yd=Symbol.for("react.memo_cache_sentinel"),th=Symbol.iterator,So=Symbol.for("react.client.reference"),Pi=Ku.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Hc,ih,$a=!1,Wa=Array.isArray,Yc=_.rendererVersion,Xl=_.rendererPackageName,ql=_.extraDevToolsConfig,tl=_.getPublicInstance,Co=_.getRootHostContext,bd=_.getChildHostContext,Ja=_.prepareForCommit,nh=_.resetAfterCommit,rh=_.createInstance,Xs=_.appendInitialChild,va=_.finalizeInitialChildren,Ka=_.shouldSetTextContent,Xc=_.createTextInstance,sh=_.scheduleTimeout,$l=_.cancelTimeout,Mo=_.noTimeout,qs=_.isPrimaryRenderer;_.warnsIfNotActing;var fr=_.supportsMutation,Qr=_.supportsPersistence,Nr=_.supportsHydration,ah=_.getInstanceFromNode;_.beforeActiveInstanceBlur,_.afterActiveInstanceBlur;var oh=_.preparePortalMount;_.prepareScopeUpdate,_.getInstanceFromScope;var Ar=_.setCurrentUpdatePriority,ir=_.getCurrentUpdatePriority,vs=_.resolveUpdatePriority;_.resolveEventType,_.resolveEventTimeStamp;var Za=_.shouldAttemptEagerTransition,lh=_.detachDeletedInstance;_.requestPostPaintCallback;var xd=_.maySuspendCommit,_a=_.preloadInstance,es=_.startSuspendingCommit,Un=_.suspendInstance,qc=_.waitForCommitToBeReady,jr=_.NotPendingTransition,Oi=_.HostTransitionContext,mn=_.resetFormInstance;_.bindToConsole;var Jn=_.supportsMicrotasks,$c=_.scheduleMicrotask,$s=_.supportsTestSelectors,Eo=_.findFiberRoot,Wc=_.getBoundingRect,Wl=_.getTextContent,Ws=_.isHiddenSubtree,mf=_.matchAccessibilityRole,In=_.setFocusIfFocusable,uh=_.setupIntersectionObserver,hh=_.appendChild,Ad=_.appendChildToContainer,Sd=_.commitTextUpdate,gf=_.commitMount,dh=_.commitUpdate,fh=_.insertBefore,ph=_.insertInContainerBefore,Dr=_.removeChild,Gn=_.removeChildFromContainer,Jl=_.resetTextContent,Kl=_.hideInstance,Jc=_.hideTextInstance,mh=_.unhideInstance,ya=_.unhideTextInstance,Kc=_.clearContainer,gh=_.cloneInstance,Zc=_.createContainerChildSet,vh=_.appendChildToContainerChildSet,Cd=_.finalizeContainerChildren,_h=_.replaceContainerChildren,yh=_.cloneHiddenInstance,bh=_.cloneHiddenTextInstance,Qc=_.isSuspenseInstancePending,Zl=_.isSuspenseInstanceFallback,Md=_.getSuspenseInstanceFallbackErrorDetails,vf=_.registerSuspenseInstanceRetry,Ed=_.canHydrateFormStateMarker,Td=_.isFormStateMarkerMatching,xh=_.getNextHydratableSibling,eu=_.getFirstHydratableChild,wd=_.getFirstHydratableChildWithinContainer,Pd=_.getFirstHydratableChildWithinSuspenseInstance,Rd=_.canHydrateInstance,Od=_.canHydrateTextInstance,Nd=_.canHydrateSuspenseInstance,_f=_.hydrateInstance,Dd=_.hydrateTextInstance,il=_.hydrateSuspenseInstance,Ld=_.getNextHydratableInstanceAfterSuspenseInstance,tu=_.commitHydratedContainer,iu=_.commitHydratedSuspenseInstance,Bd=_.clearSuspenseBoundary,Ah=_.clearSuspenseBoundaryFromContainer,kd=_.shouldDeleteUnhydratedTailInstances;_.diffHydratedPropsForDevWarnings,_.diffHydratedTextForDevWarnings,_.describeHydratableInstanceForDevWarnings;var Ud=_.validateHydratableInstance,Id=_.validateHydratableTextInstance,ns=_.supportsResources,Sh=_.isHostHoistableType,nu=_.getHoistableRoot,ru=_.getResource,Ch=_.acquireResource,Mh=_.releaseResource,Eh=_.hydrateHoistable,Th=_.mountHoistable,wh=_.unmountHoistable,yf=_.createHoistableInstance,Ph=_.prepareToCommitHoistables,zd=_.mayResourceSuspendCommit,Rh=_.preloadResource,Oh=_.suspendResource,pr=_.supportsSingletons,Nh=_.resolveSingletonInstance,bf=_.clearSingleton,xf=_.acquireSingletonInstance,Fd=_.releaseSingletonInstance,nl=_.isHostSingletonType,Ql=[],ba=-1,To={},Gr=Math.clz32?Math.clz32:ye,ec=Math.log,Vd=Math.LN2,rl=128,tc=4194304,sl=dr.unstable_scheduleCallback,ic=dr.unstable_cancelCallback,jd=dr.unstable_shouldYield,Gd=dr.unstable_requestPaint,mr=dr.unstable_now,Dh=dr.unstable_ImmediatePriority,Hd=dr.unstable_UserBlockingPriority,su=dr.unstable_NormalPriority,au=dr.unstable_IdlePriority,Yd=dr.log,Lh=dr.unstable_setDisableYieldValue,al=null,Hr=null,rs=typeof Object.is=="function"?Object.is:Ve,ou=new WeakMap,Pn=[],zn=0,nc=null,rc=0,ss=[],as=0,Rs=null,Js=1,_s="",cr=me(null),sc=me(null),Os=me(null),ol=me(null),Sr=null,gr=null,tn=!1,os=null,ys=!1,ac=Error(Q(519)),ls=[],Qa=0,ll=0,cl=null,wo=null,oc=!1,lc=!1,Ns=!1,eo=0,cc=null,lu=0,Yr=0,io=null,xa=!1,ul=!1,uc=Object.prototype.hasOwnProperty,fn=Error(Q(460)),Bh=Error(Q(474)),cu={then:function(){}},Po=null,Ks=null,bs=0,ro=vn(!0),kh=vn(!1),Zs=me(null),cs=me(0),us=me(null),xs=null,Kn=me(0),Qs=0,zi=null,an=null,Hn=null,As=!1,Rn=!1,Aa=!1,hc=0,Fn=0,hl=null,Xd=0,uu=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},nn={readContext:hr,use:pt,useCallback:ki,useContext:ki,useEffect:ki,useImperativeHandle:ki,useLayoutEffect:ki,useInsertionEffect:ki,useMemo:ki,useReducer:ki,useRef:ki,useState:ki,useDebugValue:ki,useDeferredValue:ki,useTransition:ki,useSyncExternalStore:ki,useId:ki};nn.useCacheRefresh=ki,nn.useMemoCache=ki,nn.useHostTransitionStatus=ki,nn.useFormState=ki,nn.useActionState=ki,nn.useOptimistic=ki;var Zn={readContext:hr,use:pt,useCallback:function(pe,ge){return Ht().memoizedState=[pe,ge===void 0?null:ge],pe},useContext:hr,useEffect:Su,useImperativeHandle:function(pe,ge,Ae){Ae=Ae!=null?Ae.concat([pe]):null,ms(4194308,4,Ml.bind(null,ge,pe),Ae)},useLayoutEffect:function(pe,ge){return ms(4194308,4,pe,ge)},useInsertionEffect:function(pe,ge){ms(4,2,pe,ge)},useMemo:function(pe,ge){var Ae=Ht();ge=ge===void 0?null:ge;var Pe=pe();if(Aa){Fe(!0);try{pe()}finally{Fe(!1)}}return Ae.memoizedState=[Pe,ge],Pe},useReducer:function(pe,ge,Ae){var Pe=Ht();if(Ae!==void 0){var Ne=Ae(ge);if(Aa){Fe(!0);try{Ae(ge)}finally{Fe(!1)}}}else Ne=ge;return Pe.memoizedState=Pe.baseState=Ne,pe={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pe,lastRenderedState:Ne},Pe.queue=pe,pe=pe.dispatch=Ra.bind(null,zi,pe),[Pe.memoizedState,pe]},useRef:function(pe){var ge=Ht();return pe={current:pe},ge.memoizedState=pe},useState:function(pe){pe=Ki(pe);var ge=pe.queue,Ae=vc.bind(null,zi,ge);return ge.dispatch=Ae,[pe.memoizedState,Ae]},useDebugValue:El,useDeferredValue:function(pe,ge){var Ae=Ht();return Pa(Ae,pe,ge)},useTransition:function(){var pe=Ki(!1);return pe=mc.bind(null,zi,pe.queue,!0,!1),Ht().memoizedState=pe,[!1,pe]},useSyncExternalStore:function(pe,ge,Ae){var Pe=zi,Ne=Ht();if(tn){if(Ae===void 0)throw Error(Q(407));Ae=Ae()}else{if(Ae=ge(),Gi===null)throw Error(Q(349));(Vi&60)!==0||vi(Pe,ge,Ae)}Ne.memoizedState=Ae;var Be={value:Ae,getSnapshot:ge};return Ne.queue=Be,Su(bi.bind(null,Pe,Be,pe),[pe]),Pe.flags|=2048,kn(9,Ti.bind(null,Pe,Be,Ae,ge),{destroy:void 0},null),Ae},useId:function(){var pe=Ht(),ge=Gi.identifierPrefix;if(tn){var Ae=_s,Pe=Js;Ae=(Pe&~(1<<32-Gr(Pe)-1)).toString(32)+Ae,ge=":"+ge+"R"+Ae,Ae=hc++,0<Ae&&(ge+="H"+Ae.toString(32)),ge+=":"}else Ae=Xd++,ge=":"+ge+"r"+Ae.toString(32)+":";return pe.memoizedState=ge},useCacheRefresh:function(){return Ht().memoizedState=Tl.bind(null,zi)}};Zn.useMemoCache=ft,Zn.useHostTransitionStatus=uo,Zn.useFormState=Us,Zn.useActionState=Us,Zn.useOptimistic=function(pe){var ge=Ht();ge.memoizedState=ge.baseState=pe;var Ae={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return ge.queue=Ae,ge=_c.bind(null,zi,!0,Ae),Ae.dispatch=ge,[pe,ge]};var Cr={readContext:hr,use:pt,useCallback:pc,useContext:hr,useEffect:Cl,useImperativeHandle:Is,useInsertionEffect:$h,useLayoutEffect:Wh,useMemo:co,useReducer:ii,useRef:Cs,useState:function(){return ii(ut)},useDebugValue:El,useDeferredValue:function(pe,ge){var Ae=je();return Cu(Ae,an.memoizedState,pe,ge)},useTransition:function(){var pe=ii(ut)[0],ge=je().memoizedState;return[typeof pe=="boolean"?pe:nt(pe),ge]},useSyncExternalStore:ai,useId:zs};Cr.useCacheRefresh=gc,Cr.useMemoCache=ft,Cr.useHostTransitionStatus=uo,Cr.useFormState=bn,Cr.useActionState=bn,Cr.useOptimistic=function(pe,ge){var Ae=je();return Hi(Ae,an,pe,ge)};var so={readContext:hr,use:pt,useCallback:pc,useContext:hr,useEffect:Cl,useImperativeHandle:Is,useInsertionEffect:$h,useLayoutEffect:Wh,useMemo:co,useReducer:ui,useRef:Cs,useState:function(){return ui(ut)},useDebugValue:El,useDeferredValue:function(pe,ge){var Ae=je();return an===null?Pa(Ae,pe,ge):Cu(Ae,an.memoizedState,pe,ge)},useTransition:function(){var pe=ui(ut)[0],ge=je().memoizedState;return[typeof pe=="boolean"?pe:nt(pe),ge]},useSyncExternalStore:ai,useId:zs};so.useCacheRefresh=gc,so.useMemoCache=ft,so.useHostTransitionStatus=uo,so.useFormState=tr,so.useActionState=tr,so.useOptimistic=function(pe,ge){var Ae=je();return an!==null?Hi(Ae,an,pe,ge):(Ae.baseState=pe,[pe,Ae.queue.dispatch])};var hu={isMounted:function(pe){return(pe=pe._reactInternals)?se(pe)===pe:!1},enqueueSetState:function(pe,ge,Ae){pe=pe._reactInternals;var Pe=Or(),Ne=Rt(Pe);Ne.payload=ge,Ae!=null&&(Ne.callback=Ae),ge=Pt(pe,Ne,Pe),ge!==null&&(br(ge,pe,Pe),mt(ge,pe,Pe))},enqueueReplaceState:function(pe,ge,Ae){pe=pe._reactInternals;var Pe=Or(),Ne=Rt(Pe);Ne.tag=1,Ne.payload=ge,Ae!=null&&(Ne.callback=Ae),ge=Pt(pe,Ne,Pe),ge!==null&&(br(ge,pe,Pe),mt(ge,pe,Pe))},enqueueForceUpdate:function(pe,ge){pe=pe._reactInternals;var Ae=Or(),Pe=Rt(Ae);Pe.tag=2,ge!=null&&(Pe.callback=ge),ge=Pt(pe,Pe,Ae),ge!==null&&(br(ge,pe,Ae),mt(ge,pe,Ae))}},Uh=typeof reportError=="function"?reportError:function(pe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ge=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof pe=="object"&&pe!==null&&typeof pe.message=="string"?String(pe.message):String(pe),error:pe});if(!window.dispatchEvent(ge))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",pe);return}console.error(pe)},qd=Error(Q(461)),Yn=!1,Mr={dehydrated:null,treeContext:null,retryLane:0},Xr=me(null),ao=null,Vn=null,$d=typeof AbortController<"u"?AbortController:function(){var pe=[],ge=this.signal={aborted:!1,addEventListener:function(Ae,Pe){pe.push(Pe)}};this.abort=function(){ge.aborted=!0,pe.forEach(function(Ae){return Ae()})}},Sa=dr.unstable_scheduleCallback,Ro=dr.unstable_NormalPriority,ln={$$typeof:Ys,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},du=Pi.S;Pi.S=function(pe,ge){typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&Nt(pe,ge),du!==null&&du(pe,ge)};var Ca=me(null),nr=!1,Nn=!1,oo=!1,dl=typeof WeakSet=="function"?WeakSet:Set,jn=null,Oo=!1,Xn=null,qr=!1,Lr=null,No=8192,fu={getCacheForType:function(pe){var ge=hr(ln),Ae=ge.data.get(pe);return Ae===void 0&&(Ae=pe(),ge.data.set(pe,Ae)),Ae}},dc=0,pu=1,mu=2,Zi=3,cn=4;if(typeof Symbol=="function"&&Symbol.for){var Fi=Symbol.for;dc=Fi("selector.component"),pu=Fi("selector.has_pseudo_class"),mu=Fi("selector.role"),Zi=Fi("selector.test_id"),cn=Fi("selector.text")}var qi=typeof WeakMap=="function"?WeakMap:Map,Mi=0,Gi=null,Bi=null,Vi=0,gn=0,qn=null,un=!1,hs=!1,Ma=!1,Ds=0,Qi=0,ds=0,Ls=0,Er=0,$r=0,Ea=0,fl=null,fs=null,pl=!1,ea=0,Dn=1/0,Bs=null,ps=null,Ss=!1,Ta=null,Do=0,gu=0,Lo=null,Bo=0,Br=null;return Ci.attemptContinuousHydration=function(pe){if(pe.tag===13){var ge=Ut(pe,67108864);ge!==null&&br(ge,pe,67108864),Ju(pe,67108864)}},Ci.attemptHydrationAtCurrentPriority=function(pe){if(pe.tag===13){var ge=Or(),Ae=Ut(pe,ge);Ae!==null&&br(Ae,pe,ge),Ju(pe,ge)}},Ci.attemptSynchronousHydration=function(pe){switch(pe.tag){case 3:if(pe=pe.stateNode,pe.current.memoizedState.isDehydrated){var ge=be(pe.pendingLanes);if(ge!==0){for(pe.pendingLanes|=2,pe.entangledLanes|=2;ge;){var Ae=1<<31-Gr(ge);pe.entanglements[1]|=Ae,ge&=~Ae}ri(pe),(Mi&6)===0&&(Dn=mr()+500,ti(0))}}break;case 13:ge=Ut(pe,2),ge!==null&&br(ge,pe,2),Yu(),Ju(pe,2)}},Ci.batchedUpdates=function(pe,ge){return pe(ge)},Ci.createComponentSelector=function(pe){return{$$typeof:dc,value:pe}},Ci.createContainer=function(pe,ge,Ae,Pe,Ne,Be,Je,st,xt,Gt){return lr(pe,ge,!1,null,Ae,Pe,Be,Je,st,xt,Gt,null)},Ci.createHasPseudoClassSelector=function(pe){return{$$typeof:pu,value:pe}},Ci.createHydrationContainer=function(pe,ge,Ae,Pe,Ne,Be,Je,st,xt,Gt,oi,mi,gi){return pe=lr(Ae,Pe,!0,pe,Ne,Be,st,xt,Gt,oi,mi,gi),pe.context=Gl(null),Ae=pe.current,Pe=Or(),Ne=Rt(Pe),Ne.callback=ge??null,Pt(Ae,Ne,Pe),pe.current.lanes=Pe,De(pe,Pe),ri(pe),pe},Ci.createPortal=function(pe,ge,Ae){var Pe=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ws,key:Pe==null?null:""+Pe,children:pe,containerInfo:ge,implementation:Ae}},Ci.createRoleSelector=function(pe){return{$$typeof:mu,value:pe}},Ci.createTestNameSelector=function(pe){return{$$typeof:Zi,value:pe}},Ci.createTextSelector=function(pe){return{$$typeof:cn,value:pe}},Ci.defaultOnCaughtError=function(pe){console.error(pe)},Ci.defaultOnRecoverableError=function(pe){Uh(pe)},Ci.defaultOnUncaughtError=function(pe){Uh(pe)},Ci.deferredUpdates=function(pe){var ge=Pi.T,Ae=ir();try{return Ar(32),Pi.T=null,pe()}finally{Ar(Ae),Pi.T=ge}},Ci.discreteUpdates=function(pe,ge,Ae,Pe,Ne){var Be=Pi.T,Je=ir();try{return Ar(2),Pi.T=null,pe(ge,Ae,Pe,Ne)}finally{Ar(Je),Pi.T=Be,Mi===0&&(Dn=mr()+500)}},Ci.findAllNodes=Rr,Ci.findBoundingRects=function(pe,ge){if(!$s)throw Error(Q(363));ge=Rr(pe,ge),pe=[];for(var Ae=0;Ae<ge.length;Ae++)pe.push(Wc(ge[Ae]));for(ge=pe.length-1;0<ge;ge--){Ae=pe[ge];for(var Pe=Ae.x,Ne=Pe+Ae.width,Be=Ae.y,Je=Be+Ae.height,st=ge-1;0<=st;st--)if(ge!==st){var xt=pe[st],Gt=xt.x,oi=Gt+xt.width,mi=xt.y,gi=mi+xt.height;if(Pe>=Gt&&Be>=mi&&Ne<=oi&&Je<=gi){pe.splice(ge,1);break}else if(Pe!==Gt||Ae.width!==xt.width||gi<Be||mi>Je){if(!(Be!==mi||Ae.height!==xt.height||oi<Pe||Gt>Ne)){Gt>Pe&&(xt.width+=Gt-Pe,xt.x=Pe),oi<Ne&&(xt.width=Ne-Gt),pe.splice(ge,1);break}}else{mi>Be&&(xt.height+=mi-Be,xt.y=Be),gi<Je&&(xt.height=Je-mi),pe.splice(ge,1);break}}}return pe},Ci.findHostInstance=Wu,Ci.findHostInstanceWithNoPortals=function(pe){return pe=ce(pe),pe=pe!==null?de(pe):null,pe===null?null:tl(pe.stateNode)},Ci.findHostInstanceWithWarning=function(pe){return Wu(pe)},Ci.flushPassiveEffects=or,Ci.flushSyncFromReconciler=function(pe){var ge=Mi;Mi|=1;var Ae=Pi.T,Pe=ir();try{if(Ar(2),Pi.T=null,pe)return pe()}finally{Ar(Pe),Pi.T=Ae,Mi=ge,(Mi&6)===0&&ti(0)}},Ci.flushSyncWork=Yu,Ci.focusWithin=function(pe,ge){if(!$s)throw Error(Q(363));for(pe=kc(pe),ge=fd(pe,ge),ge=Array.from(ge),pe=0;pe<ge.length;){var Ae=ge[pe++],Pe=Ae.tag;if(!Ws(Ae)){if((Pe===5||Pe===26||Pe===27)&&In(Ae.stateNode))return!0;for(Ae=Ae.child;Ae!==null;)ge.push(Ae),Ae=Ae.sibling}}return!1},Ci.getFindAllNodesFailureDescription=function(pe,ge){if(!$s)throw Error(Q(363));var Ae=0,Pe=[];pe=[kc(pe),0];for(var Ne=0;Ne<pe.length;){var Be=pe[Ne++],Je=Be.tag,st=pe[Ne++],xt=ge[st];if((Je!==5&&Je!==26&&Je!==27||!Ws(Be))&&(Jo(Be,xt)&&(Pe.push(Ga(xt)),st++,st>Ae&&(Ae=st)),st<ge.length))for(Be=Be.child;Be!==null;)pe.push(Be,st),Be=Be.sibling}if(Ae<ge.length){for(pe=[];Ae<ge.length;Ae++)pe.push(Ga(ge[Ae]));return`findAllNodes was able to match part of the selector:
  `+(Pe.join(" > ")+`

No matching component was found for:
  `)+pe.join(" > ")}return null},Ci.getPublicRootInstance=function(pe){if(pe=pe.current,!pe.child)return null;switch(pe.child.tag){case 27:case 5:return tl(pe.child.stateNode);default:return pe.child.stateNode}},Ci.injectIntoDevTools=function(){var pe={bundleType:0,version:Yc,rendererPackageName:Xl,currentDispatcherRef:Pi,findFiberByHostInstance:ah,reconcilerVersion:"19.0.0"};if(ql!==null&&(pe.rendererConfig=ql),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")pe=!1;else{var ge=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(ge.isDisabled||!ge.supportsFiber)pe=!0;else{try{al=ge.inject(pe),Hr=ge}catch{}pe=!!ge.checkDCE}}return pe},Ci.isAlreadyRendering=function(){return!1},Ci.observeVisibleRects=function(pe,ge,Ae,Pe){if(!$s)throw Error(Q(363));pe=Rr(pe,ge);var Ne=uh(pe,Ae,Pe).disconnect;return{disconnect:function(){Ne()}}},Ci.shouldError=function(){return null},Ci.shouldSuspend=function(){return!1},Ci.startHostTransition=function(pe,ge,Ae,Pe){if(pe.tag!==5)throw Error(Q(476));var Ne=Mu(pe).queue;mc(pe,Ne,ge,jr,Ae===null?Z:function(){var Be=Mu(pe).next.queue;return Oa(pe,Be,{},Or()),Ae(Pe)})},Ci.updateContainer=function(pe,ge,Ae,Pe){var Ne=ge.current,Be=Or();return gd(Ne,Be,pe,ge,Ae,Pe),Be},Ci.updateContainerSync=function(pe,ge,Ae,Pe){return ge.tag===0&&or(),gd(ge.current,2,pe,ge,Ae,Pe),2},Ci},G.exports.default=G.exports,Object.defineProperty(G.exports,"__esModule",{value:!0})})(reactReconciler_production)),reactReconciler_production.exports}var hasRequiredReactReconciler;function requireReactReconciler(){return hasRequiredReactReconciler||(hasRequiredReactReconciler=1,reactReconciler.exports=requireReactReconciler_production()),reactReconciler.exports}var reactReconcilerExports=requireReactReconciler();const Reconciler=getDefaultExportFromCjs(reactReconcilerExports);var scheduler={exports:{}},scheduler_production={};var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(G){function _(ke,Fe){var Ve=ke.length;ke.push(Fe);e:for(;0<Ve;){var $e=Ve-1>>>1,Xe=ke[$e];if(0<Q(Xe,Fe))ke[$e]=Fe,ke[Ve]=Xe,Ve=$e;else break e}}function J(ke){return ke.length===0?null:ke[0]}function Z(ke){if(ke.length===0)return null;var Fe=ke[0],Ve=ke.pop();if(Ve!==Fe){ke[0]=Ve;e:for(var $e=0,Xe=ke.length,ze=Xe>>>1;$e<ze;){var qe=2*($e+1)-1,et=ke[qe],ot=qe+1,St=ke[ot];if(0>Q(et,Ve))ot<Xe&&0>Q(St,et)?(ke[$e]=St,ke[ot]=Ve,$e=ot):(ke[$e]=et,ke[qe]=Ve,$e=qe);else if(ot<Xe&&0>Q(St,Ve))ke[$e]=St,ke[ot]=Ve,$e=ot;else break e}}return Fe}function Q(ke,Fe){var Ve=ke.sortIndex-Fe.sortIndex;return Ve!==0?Ve:ke.id-Fe.id}if(G.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var ee=performance;G.unstable_now=function(){return ee.now()}}else{var te=Date,ne=te.now();G.unstable_now=function(){return te.now()-ne}}var ie=[],re=[],oe=1,se=null,ae=3,ce=!1,ue=!1,de=!1,me=typeof setTimeout=="function"?setTimeout:null,fe=typeof clearTimeout=="function"?clearTimeout:null,_e=typeof setImmediate<"u"?setImmediate:null;function ye(ke){for(var Fe=J(re);Fe!==null;){if(Fe.callback===null)Z(re);else if(Fe.startTime<=ke)Z(re),Fe.sortIndex=Fe.expirationTime,_(ie,Fe);else break;Fe=J(re)}}function be(ke){if(de=!1,ye(ke),!ue)if(J(ie)!==null)ue=!0,Ge();else{var Fe=J(re);Fe!==null&&Ye(be,Fe.startTime-ke)}}var Se=!1,Ce=-1,Me=5,Re=-1;function Te(){return!(G.unstable_now()-Re<Me)}function Ee(){if(Se){var ke=G.unstable_now();Re=ke;var Fe=!0;try{e:{ue=!1,de&&(de=!1,fe(Ce),Ce=-1),ce=!0;var Ve=ae;try{t:{for(ye(ke),se=J(ie);se!==null&&!(se.expirationTime>ke&&Te());){var $e=se.callback;if(typeof $e=="function"){se.callback=null,ae=se.priorityLevel;var Xe=$e(se.expirationTime<=ke);if(ke=G.unstable_now(),typeof Xe=="function"){se.callback=Xe,ye(ke),Fe=!0;break t}se===J(ie)&&Z(ie),ye(ke)}else Z(ie);se=J(ie)}if(se!==null)Fe=!0;else{var ze=J(re);ze!==null&&Ye(be,ze.startTime-ke),Fe=!1}}break e}finally{se=null,ae=Ve,ce=!1}Fe=void 0}}finally{Fe?De():Se=!1}}}var De;if(typeof _e=="function")De=function(){_e(Ee)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,Ue=Le.port2;Le.port1.onmessage=Ee,De=function(){Ue.postMessage(null)}}else De=function(){me(Ee,0)};function Ge(){Se||(Se=!0,De())}function Ye(ke,Fe){Ce=me(function(){ke(G.unstable_now())},Fe)}G.unstable_IdlePriority=5,G.unstable_ImmediatePriority=1,G.unstable_LowPriority=4,G.unstable_NormalPriority=3,G.unstable_Profiling=null,G.unstable_UserBlockingPriority=2,G.unstable_cancelCallback=function(ke){ke.callback=null},G.unstable_continueExecution=function(){ue||ce||(ue=!0,Ge())},G.unstable_forceFrameRate=function(ke){0>ke||125<ke?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Me=0<ke?Math.floor(1e3/ke):5},G.unstable_getCurrentPriorityLevel=function(){return ae},G.unstable_getFirstCallbackNode=function(){return J(ie)},G.unstable_next=function(ke){switch(ae){case 1:case 2:case 3:var Fe=3;break;default:Fe=ae}var Ve=ae;ae=Fe;try{return ke()}finally{ae=Ve}},G.unstable_pauseExecution=function(){},G.unstable_requestPaint=function(){},G.unstable_runWithPriority=function(ke,Fe){switch(ke){case 1:case 2:case 3:case 4:case 5:break;default:ke=3}var Ve=ae;ae=ke;try{return Fe()}finally{ae=Ve}},G.unstable_scheduleCallback=function(ke,Fe,Ve){var $e=G.unstable_now();switch(typeof Ve=="object"&&Ve!==null?(Ve=Ve.delay,Ve=typeof Ve=="number"&&0<Ve?$e+Ve:$e):Ve=$e,ke){case 1:var Xe=-1;break;case 2:Xe=250;break;case 5:Xe=1073741823;break;case 4:Xe=1e4;break;default:Xe=5e3}return Xe=Ve+Xe,ke={id:oe++,callback:Fe,priorityLevel:ke,startTime:Ve,expirationTime:Xe,sortIndex:-1},Ve>$e?(ke.sortIndex=Ve,_(re,ke),J(ie)===null&&ke===J(re)&&(de?(fe(Ce),Ce=-1):de=!0,Ye(be,Ve-$e))):(ke.sortIndex=Xe,_(ie,ke),ue||ce||(ue=!0,Ge())),ke},G.unstable_shouldYield=Te,G.unstable_wrapCallback=function(ke){var Fe=ae;return function(){var Ve=ae;ae=Fe;try{return ke.apply(this,arguments)}finally{ae=Ve}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var schedulerExports=requireScheduler();function i$2(G,_,J){if(!G)return;if(J(G)===!0)return G;let Z=_?G.return:G.child;for(;Z;){const Q=i$2(Z,_,J);if(Q)return Q;Z=_?null:Z.sibling}}function l(G){try{return Object.defineProperties(G,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return G}}const a=l(reactExports.createContext(null));class m extends reactExports.Component{render(){return reactExports.createElement(a.Provider,{value:this._reactInternals},this.props.children)}}function c(){const G=reactExports.useContext(a);if(G===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const _=reactExports.useId();return reactExports.useMemo(()=>{for(const J of[G,G?.alternate]){if(!J)continue;const Z=i$2(J,!1,Q=>{let ee=Q.memoizedState;for(;ee;){if(ee.memoizedState===_)return!0;ee=ee.next}});if(Z)return Z}},[G,_])}const p=Symbol.for("react.context"),b=G=>G!==null&&typeof G=="object"&&"$$typeof"in G&&G.$$typeof===p;function h(){const G=c(),[_]=reactExports.useState(()=>new Map);_.clear();let J=G;for(;J;){const Z=J.type;b(Z)&&Z!==a&&!_.has(Z)&&_.set(Z,reactExports.use(l(Z))),J=J.return}return _}function x(){const G=h();return reactExports.useMemo(()=>Array.from(G.keys()).reduce((_,J)=>Z=>reactExports.createElement(_,null,reactExports.createElement(J.Provider,{...Z,value:G.get(J)})),_=>reactExports.createElement(m,{..._})),[G])}function findInitialRoot(G){let _=G.root;for(;_.getState().previousRoot;)_=_.getState().previousRoot;return _}const isOrthographicCamera=G=>G&&G.isOrthographicCamera,isRef=G=>G&&G.hasOwnProperty("current"),isColorRepresentation=G=>G!=null&&(typeof G=="string"||typeof G=="number"||G.isColor),useIsomorphicLayoutEffect$1=((G,_)=>typeof window<"u"&&(((G=window.document)==null?void 0:G.createElement)||((_=window.navigator)==null?void 0:_.product)==="ReactNative"))()?reactExports.useLayoutEffect:reactExports.useEffect;function useMutableCallback(G){const _=reactExports.useRef(G);return useIsomorphicLayoutEffect$1(()=>void(_.current=G),[G]),_}function useBridge(){const G=c(),_=x();return reactExports.useMemo(()=>({children:J})=>{const Q=!!i$2(G,!0,ee=>ee.type===reactExports.StrictMode)?reactExports.StrictMode:reactExports.Fragment;return jsxRuntimeExports.jsx(Q,{children:jsxRuntimeExports.jsx(_,{children:J})})},[G,_])}function Block({set:G}){return useIsomorphicLayoutEffect$1(()=>(G(new Promise(()=>null)),()=>G(!1)),[G]),null}const ErrorBoundary=(G=>(G=class extends reactExports.Component{constructor(...J){super(...J),this.state={error:!1}}componentDidCatch(J){this.props.set(J)}render(){return this.state.error?null:this.props.children}},G.getDerivedStateFromError=()=>({error:!0}),G))();function calculateDpr(G){var _;const J=typeof window<"u"?(_=window.devicePixelRatio)!=null?_:2:1;return Array.isArray(G)?Math.min(Math.max(G[0],J),G[1]):G}function getRootState(G){var _;return(_=G.__r3f)==null?void 0:_.root.getState()}const is$1={obj:G=>G===Object(G)&&!is$1.arr(G)&&typeof G!="function",fun:G=>typeof G=="function",str:G=>typeof G=="string",num:G=>typeof G=="number",boo:G=>typeof G=="boolean",und:G=>G===void 0,nul:G=>G===null,arr:G=>Array.isArray(G),equ(G,_,{arrays:J="shallow",objects:Z="reference",strict:Q=!0}={}){if(typeof G!=typeof _||!!G!=!!_)return!1;if(is$1.str(G)||is$1.num(G)||is$1.boo(G))return G===_;const ee=is$1.obj(G);if(ee&&Z==="reference")return G===_;const te=is$1.arr(G);if(te&&J==="reference")return G===_;if((te||ee)&&G===_)return!0;let ne;for(ne in G)if(!(ne in _))return!1;if(ee&&J==="shallow"&&Z==="shallow"){for(ne in Q?_:G)if(!is$1.equ(G[ne],_[ne],{strict:Q,objects:"reference"}))return!1}else for(ne in Q?_:G)if(G[ne]!==_[ne])return!1;if(is$1.und(ne)){if(te&&G.length===0&&_.length===0||ee&&Object.keys(G).length===0&&Object.keys(_).length===0)return!0;if(G!==_)return!1}return!0}};function dispose(G){G.type!=="Scene"&&(G.dispose==null||G.dispose());for(const _ in G){const J=G[_];J?.type!=="Scene"&&(J==null||J.dispose==null||J.dispose())}}const REACT_INTERNAL_PROPS=["children","key","ref"];function getInstanceProps(G){const _={};for(const J in G)REACT_INTERNAL_PROPS.includes(J)||(_[J]=G[J]);return _}function prepare(G,_,J,Z){const Q=G;let ee=Q?.__r3f;return ee||(ee={root:_,type:J,parent:null,children:[],props:getInstanceProps(Z),object:Q,eventCount:0,handlers:{},isHidden:!1},Q&&(Q.__r3f=ee)),ee}function resolve(G,_){if(!_.includes("-"))return{root:G,key:_,target:G[_]};if(_ in G)return{root:G,key:_,target:G[_]};let J=G;const Z=_.split("-");for(const Q of Z){if(typeof J!="object"||J===null){if(J!==void 0){const ee=Z.slice(Z.indexOf(Q)).join("-");return{root:J,key:ee,target:void 0}}return{root:G,key:_,target:void 0}}_=Q,G=J,J=J[_]}return{root:G,key:_,target:J}}const INDEX_REGEX=/-\d+$/;function attach(G,_){if(is$1.str(_.props.attach)){if(INDEX_REGEX.test(_.props.attach)){const Q=_.props.attach.replace(INDEX_REGEX,""),{root:ee,key:te}=resolve(G.object,Q);Array.isArray(ee[te])||(ee[te]=[])}const{root:J,key:Z}=resolve(G.object,_.props.attach);_.previousAttach=J[Z],J[Z]=_.object}else is$1.fun(_.props.attach)&&(_.previousAttach=_.props.attach(G.object,_.object))}function detach(G,_){if(is$1.str(_.props.attach)){const{root:J,key:Z}=resolve(G.object,_.props.attach),Q=_.previousAttach;Q===void 0?delete J[Z]:J[Z]=Q}else _.previousAttach==null||_.previousAttach(G.object,_.object);delete _.previousAttach}const RESERVED_PROPS$1=[...REACT_INTERNAL_PROPS,"args","dispose","attach","object","onUpdate","dispose"],MEMOIZED_PROTOTYPES=new Map;function getMemoizedPrototype(G){let _=MEMOIZED_PROTOTYPES.get(G.constructor);try{_||(_=new G.constructor,MEMOIZED_PROTOTYPES.set(G.constructor,_))}catch{}return _}function diffProps(G,_){const J={};for(const Z in _)if(!RESERVED_PROPS$1.includes(Z)&&!is$1.equ(_[Z],G.props[Z])){J[Z]=_[Z];for(const Q in _)Q.startsWith(`${Z}-`)&&(J[Q]=_[Q])}for(const Z in G.props){if(RESERVED_PROPS$1.includes(Z)||_.hasOwnProperty(Z))continue;const{root:Q,key:ee}=resolve(G.object,Z);if(Q.constructor&&Q.constructor.length===0){const te=getMemoizedPrototype(Q);is$1.und(te)||(J[ee]=te[ee])}else J[ee]=0}return J}const colorMaps=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],EVENT_REGEX=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function applyProps(G,_){var J;const Z=G.__r3f,Q=Z&&findInitialRoot(Z).getState(),ee=Z?.eventCount;for(const ne in _){let ie=_[ne];if(RESERVED_PROPS$1.includes(ne))continue;if(Z&&EVENT_REGEX.test(ne)){typeof ie=="function"?Z.handlers[ne]=ie:delete Z.handlers[ne],Z.eventCount=Object.keys(Z.handlers).length;continue}if(ie===void 0)continue;let{root:re,key:oe,target:se}=resolve(G,ne);if(se===void 0&&(typeof re!="object"||re===null))throw Error(`R3F: Cannot set "${ne}". Ensure it is an object before setting "${oe}".`);if(se instanceof Layers&&ie instanceof Layers)se.mask=ie.mask;else if(se instanceof Color&&isColorRepresentation(ie))se.set(ie);else if(se!==null&&typeof se=="object"&&typeof se.set=="function"&&typeof se.copy=="function"&&ie!=null&&ie.constructor&&se.constructor===ie.constructor)se.copy(ie);else if(se!==null&&typeof se=="object"&&typeof se.set=="function"&&Array.isArray(ie))typeof se.fromArray=="function"?se.fromArray(ie):se.set(...ie);else if(se!==null&&typeof se=="object"&&typeof se.set=="function"&&typeof ie=="number")typeof se.setScalar=="function"?se.setScalar(ie):se.set(ie);else{var te;re[oe]=ie,Q&&!Q.linear&&colorMaps.includes(oe)&&(te=re[oe])!=null&&te.isTexture&&re[oe].format===RGBAFormat&&re[oe].type===UnsignedByteType&&(re[oe].colorSpace=SRGBColorSpace)}}if(Z!=null&&Z.parent&&Q!=null&&Q.internal&&(J=Z.object)!=null&&J.isObject3D&&ee!==Z.eventCount){const ne=Z.object,ie=Q.internal.interaction.indexOf(ne);ie>-1&&Q.internal.interaction.splice(ie,1),Z.eventCount&&ne.raycast!==null&&Q.internal.interaction.push(ne)}return Z&&Z.props.attach===void 0&&(Z.object.isBufferGeometry?Z.props.attach="geometry":Z.object.isMaterial&&(Z.props.attach="material")),Z&&invalidateInstance(Z),G}function invalidateInstance(G){var _;if(!G.parent)return;G.props.onUpdate==null||G.props.onUpdate(G.object);const J=(_=G.root)==null||_.getState==null?void 0:_.getState();J&&J.internal.frames===0&&J.invalidate()}function updateCamera(G,_){G.manual||(isOrthographicCamera(G)?(G.left=_.width/-2,G.right=_.width/2,G.top=_.height/2,G.bottom=_.height/-2):G.aspect=_.width/_.height,G.updateProjectionMatrix())}const isObject3D=G=>G?.isObject3D;function makeId(G){return(G.eventObject||G.object).uuid+"/"+G.index+G.instanceId}function releaseInternalPointerCapture(G,_,J,Z){const Q=J.get(_);Q&&(J.delete(_),J.size===0&&(G.delete(Z),Q.target.releasePointerCapture(Z)))}function removeInteractivity(G,_){const{internal:J}=G.getState();J.interaction=J.interaction.filter(Z=>Z!==_),J.initialHits=J.initialHits.filter(Z=>Z!==_),J.hovered.forEach((Z,Q)=>{(Z.eventObject===_||Z.object===_)&&J.hovered.delete(Q)}),J.capturedMap.forEach((Z,Q)=>{releaseInternalPointerCapture(J.capturedMap,_,Z,Q)})}function createEvents(G){function _(ie){const{internal:re}=G.getState(),oe=ie.offsetX-re.initialClick[0],se=ie.offsetY-re.initialClick[1];return Math.round(Math.sqrt(oe*oe+se*se))}function J(ie){return ie.filter(re=>["Move","Over","Enter","Out","Leave"].some(oe=>{var se;return(se=re.__r3f)==null?void 0:se.handlers["onPointer"+oe]}))}function Z(ie,re){const oe=G.getState(),se=new Set,ae=[],ce=re?re(oe.internal.interaction):oe.internal.interaction;for(let fe=0;fe<ce.length;fe++){const _e=getRootState(ce[fe]);_e&&(_e.raycaster.camera=void 0)}oe.previousRoot||oe.events.compute==null||oe.events.compute(ie,oe);function ue(fe){const _e=getRootState(fe);if(!_e||!_e.events.enabled||_e.raycaster.camera===null)return[];if(_e.raycaster.camera===void 0){var ye;_e.events.compute==null||_e.events.compute(ie,_e,(ye=_e.previousRoot)==null?void 0:ye.getState()),_e.raycaster.camera===void 0&&(_e.raycaster.camera=null)}return _e.raycaster.camera?_e.raycaster.intersectObject(fe,!0):[]}let de=ce.flatMap(ue).sort((fe,_e)=>{const ye=getRootState(fe.object),be=getRootState(_e.object);return!ye||!be?fe.distance-_e.distance:be.events.priority-ye.events.priority||fe.distance-_e.distance}).filter(fe=>{const _e=makeId(fe);return se.has(_e)?!1:(se.add(_e),!0)});oe.events.filter&&(de=oe.events.filter(de,oe));for(const fe of de){let _e=fe.object;for(;_e;){var me;(me=_e.__r3f)!=null&&me.eventCount&&ae.push({...fe,eventObject:_e}),_e=_e.parent}}if("pointerId"in ie&&oe.internal.capturedMap.has(ie.pointerId))for(let fe of oe.internal.capturedMap.get(ie.pointerId).values())se.has(makeId(fe.intersection))||ae.push(fe.intersection);return ae}function Q(ie,re,oe,se){if(ie.length){const ae={stopped:!1};for(const ce of ie){let ue=getRootState(ce.object);if(ue||ce.object.traverseAncestors(de=>{const me=getRootState(de);if(me)return ue=me,!1}),ue){const{raycaster:de,pointer:me,camera:fe,internal:_e}=ue,ye=new Vector3(me.x,me.y,0).unproject(fe),be=Te=>{var Ee,De;return(Ee=(De=_e.capturedMap.get(Te))==null?void 0:De.has(ce.eventObject))!=null?Ee:!1},Se=Te=>{const Ee={intersection:ce,target:re.target};_e.capturedMap.has(Te)?_e.capturedMap.get(Te).set(ce.eventObject,Ee):_e.capturedMap.set(Te,new Map([[ce.eventObject,Ee]])),re.target.setPointerCapture(Te)},Ce=Te=>{const Ee=_e.capturedMap.get(Te);Ee&&releaseInternalPointerCapture(_e.capturedMap,ce.eventObject,Ee,Te)};let Me={};for(let Te in re){let Ee=re[Te];typeof Ee!="function"&&(Me[Te]=Ee)}let Re={...ce,...Me,pointer:me,intersections:ie,stopped:ae.stopped,delta:oe,unprojectedPoint:ye,ray:de.ray,camera:fe,stopPropagation(){const Te="pointerId"in re&&_e.capturedMap.get(re.pointerId);if((!Te||Te.has(ce.eventObject))&&(Re.stopped=ae.stopped=!0,_e.hovered.size&&Array.from(_e.hovered.values()).find(Ee=>Ee.eventObject===ce.eventObject))){const Ee=ie.slice(0,ie.indexOf(ce));ee([...Ee,ce])}},target:{hasPointerCapture:be,setPointerCapture:Se,releasePointerCapture:Ce},currentTarget:{hasPointerCapture:be,setPointerCapture:Se,releasePointerCapture:Ce},nativeEvent:re};if(se(Re),ae.stopped===!0)break}}}return ie}function ee(ie){const{internal:re}=G.getState();for(const oe of re.hovered.values())if(!ie.length||!ie.find(se=>se.object===oe.object&&se.index===oe.index&&se.instanceId===oe.instanceId)){const ae=oe.eventObject.__r3f;if(re.hovered.delete(makeId(oe)),ae!=null&&ae.eventCount){const ce=ae.handlers,ue={...oe,intersections:ie};ce.onPointerOut==null||ce.onPointerOut(ue),ce.onPointerLeave==null||ce.onPointerLeave(ue)}}}function te(ie,re){for(let oe=0;oe<re.length;oe++){const se=re[oe].__r3f;se==null||se.handlers.onPointerMissed==null||se.handlers.onPointerMissed(ie)}}function ne(ie){switch(ie){case"onPointerLeave":case"onPointerCancel":return()=>ee([]);case"onLostPointerCapture":return re=>{const{internal:oe}=G.getState();"pointerId"in re&&oe.capturedMap.has(re.pointerId)&&requestAnimationFrame(()=>{oe.capturedMap.has(re.pointerId)&&(oe.capturedMap.delete(re.pointerId),ee([]))})}}return function(oe){const{onPointerMissed:se,internal:ae}=G.getState();ae.lastEvent.current=oe;const ce=ie==="onPointerMove",ue=ie==="onClick"||ie==="onContextMenu"||ie==="onDoubleClick",me=Z(oe,ce?J:void 0),fe=ue?_(oe):0;ie==="onPointerDown"&&(ae.initialClick=[oe.offsetX,oe.offsetY],ae.initialHits=me.map(ye=>ye.eventObject)),ue&&!me.length&&fe<=2&&(te(oe,ae.interaction),se&&se(oe)),ce&&ee(me);function _e(ye){const be=ye.eventObject,Se=be.__r3f;if(!(Se!=null&&Se.eventCount))return;const Ce=Se.handlers;if(ce){if(Ce.onPointerOver||Ce.onPointerEnter||Ce.onPointerOut||Ce.onPointerLeave){const Me=makeId(ye),Re=ae.hovered.get(Me);Re?Re.stopped&&ye.stopPropagation():(ae.hovered.set(Me,ye),Ce.onPointerOver==null||Ce.onPointerOver(ye),Ce.onPointerEnter==null||Ce.onPointerEnter(ye))}Ce.onPointerMove==null||Ce.onPointerMove(ye)}else{const Me=Ce[ie];Me?(!ue||ae.initialHits.includes(be))&&(te(oe,ae.interaction.filter(Re=>!ae.initialHits.includes(Re))),Me(ye)):ue&&ae.initialHits.includes(be)&&te(oe,ae.interaction.filter(Re=>!ae.initialHits.includes(Re)))}}Q(me,oe,fe,_e)}}return{handlePointer:ne}}const isRenderer=G=>!!(G!=null&&G.render),context$1=reactExports.createContext(null),createStore=(G,_)=>{const J=createWithEqualityFn((ne,ie)=>{const re=new Vector3,oe=new Vector3,se=new Vector3;function ae(fe=ie().camera,_e=oe,ye=ie().size){const{width:be,height:Se,top:Ce,left:Me}=ye,Re=be/Se;_e.isVector3?se.copy(_e):se.set(..._e);const Te=fe.getWorldPosition(re).distanceTo(se);if(isOrthographicCamera(fe))return{width:be/fe.zoom,height:Se/fe.zoom,top:Ce,left:Me,factor:1,distance:Te,aspect:Re};{const Ee=fe.fov*Math.PI/180,De=2*Math.tan(Ee/2)*Te,Le=De*(be/Se);return{width:Le,height:De,top:Ce,left:Me,factor:be/Le,distance:Te,aspect:Re}}}let ce;const ue=fe=>ne(_e=>({performance:{..._e.performance,current:fe}})),de=new Vector2;return{set:ne,get:ie,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(fe=1)=>G(ie(),fe),advance:(fe,_e)=>_(fe,_e,ie()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Clock,pointer:de,mouse:de,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const fe=ie();ce&&clearTimeout(ce),fe.performance.current!==fe.performance.min&&ue(fe.performance.min),ce=setTimeout(()=>ue(ie().performance.max),fe.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:ae},setEvents:fe=>ne(_e=>({..._e,events:{..._e.events,...fe}})),setSize:(fe,_e,ye=0,be=0)=>{const Se=ie().camera,Ce={width:fe,height:_e,top:ye,left:be};ne(Me=>({size:Ce,viewport:{...Me.viewport,...ae(Se,oe,Ce)}}))},setDpr:fe=>ne(_e=>{const ye=calculateDpr(fe);return{viewport:{..._e.viewport,dpr:ye,initialDpr:_e.viewport.initialDpr||ye}}}),setFrameloop:(fe="always")=>{const _e=ie().clock;_e.stop(),_e.elapsedTime=0,fe!=="never"&&(_e.start(),_e.elapsedTime=0),ne(()=>({frameloop:fe}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:reactExports.createRef(),active:!1,frames:0,priority:0,subscribe:(fe,_e,ye)=>{const be=ie().internal;return be.priority=be.priority+(_e>0?1:0),be.subscribers.push({ref:fe,priority:_e,store:ye}),be.subscribers=be.subscribers.sort((Se,Ce)=>Se.priority-Ce.priority),()=>{const Se=ie().internal;Se!=null&&Se.subscribers&&(Se.priority=Se.priority-(_e>0?1:0),Se.subscribers=Se.subscribers.filter(Ce=>Ce.ref!==fe))}}}}}),Z=J.getState();let Q=Z.size,ee=Z.viewport.dpr,te=Z.camera;return J.subscribe(()=>{const{camera:ne,size:ie,viewport:re,gl:oe,set:se}=J.getState();if(ie.width!==Q.width||ie.height!==Q.height||re.dpr!==ee){Q=ie,ee=re.dpr,updateCamera(ne,ie),re.dpr>0&&oe.setPixelRatio(re.dpr);const ae=typeof HTMLCanvasElement<"u"&&oe.domElement instanceof HTMLCanvasElement;oe.setSize(ie.width,ie.height,ae)}ne!==te&&(te=ne,se(ae=>({viewport:{...ae.viewport,...ae.viewport.getCurrentViewport(ne)}})))}),J.subscribe(ne=>G(ne)),J};function useStore$2(){const G=reactExports.useContext(context$1);if(!G)throw new Error("R3F: Hooks can only be used within the Canvas component!");return G}function useThree(G=J=>J,_){return useStore$2()(G,_)}function useFrame(G,_=0){const J=useStore$2(),Z=J.getState().internal.subscribe,Q=useMutableCallback(G);return useIsomorphicLayoutEffect$1(()=>Z(Q,_,J),[_,Z,J]),null}function createReconciler(G){const _=Reconciler(G);return _.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:reactExports.version}),_}const NoEventPriority=0,catalogue={},PREFIX_REGEX=/^three(?=[A-Z])/,toPascalCase=G=>`${G[0].toUpperCase()}${G.slice(1)}`;let i$1=0;const isConstructor=G=>typeof G=="function";function extend(G){if(isConstructor(G)){const _=`${i$1++}`;return catalogue[_]=G,_}else Object.assign(catalogue,G)}function validateInstance(G,_){const J=toPascalCase(G),Z=catalogue[J];if(G!=="primitive"&&!Z)throw new Error(`R3F: ${J} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(G==="primitive"&&!_.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(_.args!==void 0&&!Array.isArray(_.args))throw new Error("R3F: The args prop must be an array!")}function createInstance(G,_,J){var Z;return G=toPascalCase(G)in catalogue?G:G.replace(PREFIX_REGEX,""),validateInstance(G,_),G==="primitive"&&(Z=_.object)!=null&&Z.__r3f&&delete _.object.__r3f,prepare(_.object,J,G,_)}function hideInstance(G){if(!G.isHidden){var _;G.props.attach&&(_=G.parent)!=null&&_.object?detach(G.parent,G):isObject3D(G.object)&&(G.object.visible=!1),G.isHidden=!0,invalidateInstance(G)}}function unhideInstance(G){if(G.isHidden){var _;G.props.attach&&(_=G.parent)!=null&&_.object?attach(G.parent,G):isObject3D(G.object)&&G.props.visible!==!1&&(G.object.visible=!0),G.isHidden=!1,invalidateInstance(G)}}function handleContainerEffects(G,_,J){const Z=_.root.getState();if(!(!G.parent&&G.object!==Z.scene)){if(!_.object){var Q,ee;const te=catalogue[toPascalCase(_.type)];_.object=(Q=_.props.object)!=null?Q:new te(...(ee=_.props.args)!=null?ee:[]),_.object.__r3f=_}if(applyProps(_.object,_.props),_.props.attach)attach(G,_);else if(isObject3D(_.object)&&isObject3D(G.object)){const te=G.object.children.indexOf(J?.object);if(J&&te!==-1){const ne=G.object.children.indexOf(_.object);if(ne!==-1){G.object.children.splice(ne,1);const ie=ne<te?te-1:te;G.object.children.splice(ie,0,_.object)}else _.object.parent=G.object,G.object.children.splice(te,0,_.object),_.object.dispatchEvent({type:"added"}),G.object.dispatchEvent({type:"childadded",child:_.object})}else G.object.add(_.object)}for(const te of _.children)handleContainerEffects(_,te);invalidateInstance(_)}}function appendChild(G,_){_&&(_.parent=G,G.children.push(_),handleContainerEffects(G,_))}function insertBefore(G,_,J){if(!_||!J)return;_.parent=G;const Z=G.children.indexOf(J);Z!==-1?G.children.splice(Z,0,_):G.children.push(_),handleContainerEffects(G,_,J)}function disposeOnIdle(G){if(typeof G.dispose=="function"){const _=()=>{try{G.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?_():schedulerExports.unstable_scheduleCallback(schedulerExports.unstable_IdlePriority,_)}}function removeChild(G,_,J){if(!_)return;_.parent=null;const Z=G.children.indexOf(_);Z!==-1&&G.children.splice(Z,1),_.props.attach?detach(G,_):isObject3D(_.object)&&isObject3D(G.object)&&(G.object.remove(_.object),removeInteractivity(findInitialRoot(_),_.object));const Q=_.props.dispose!==null&&J!==!1;for(let ee=_.children.length-1;ee>=0;ee--){const te=_.children[ee];removeChild(_,te,Q)}_.children.length=0,delete _.object.__r3f,Q&&_.type!=="primitive"&&_.object.type!=="Scene"&&disposeOnIdle(_.object),J===void 0&&invalidateInstance(_)}function setFiberRef(G,_){for(const J of[G,G.alternate])if(J!==null)if(typeof J.ref=="function"){J.refCleanup==null||J.refCleanup();const Z=J.ref(_);typeof Z=="function"&&(J.refCleanup=Z)}else J.ref&&(J.ref.current=_)}const reconstructed=[];function swapInstances(){for(const[J]of reconstructed){const Z=J.parent;if(Z){J.props.attach?detach(Z,J):isObject3D(J.object)&&isObject3D(Z.object)&&Z.object.remove(J.object);for(const Q of J.children)Q.props.attach?detach(J,Q):isObject3D(Q.object)&&isObject3D(J.object)&&J.object.remove(Q.object)}J.isHidden&&unhideInstance(J),J.object.__r3f&&delete J.object.__r3f,J.type!=="primitive"&&disposeOnIdle(J.object)}for(const[J,Z,Q]of reconstructed){J.props=Z;const ee=J.parent;if(ee){var G,_;const te=catalogue[toPascalCase(J.type)];J.object=(G=J.props.object)!=null?G:new te(...(_=J.props.args)!=null?_:[]),J.object.__r3f=J,setFiberRef(Q,J.object),applyProps(J.object,J.props),J.props.attach?attach(ee,J):isObject3D(J.object)&&isObject3D(ee.object)&&ee.object.add(J.object);for(const ne of J.children)ne.props.attach?attach(J,ne):isObject3D(ne.object)&&isObject3D(J.object)&&J.object.add(ne.object);invalidateInstance(J)}}reconstructed.length=0}const handleTextInstance=()=>{},NO_CONTEXT={};let currentUpdatePriority=NoEventPriority;const NoFlags=0,Update=4,reconciler=createReconciler({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance,removeChild,appendChild,appendInitialChild:appendChild,insertBefore,appendChildToContainer(G,_){const J=G.getState().scene.__r3f;!_||!J||appendChild(J,_)},removeChildFromContainer(G,_){const J=G.getState().scene.__r3f;!_||!J||removeChild(J,_)},insertInContainerBefore(G,_,J){const Z=G.getState().scene.__r3f;!_||!J||!Z||insertBefore(Z,_,J)},getRootHostContext:()=>NO_CONTEXT,getChildHostContext:()=>NO_CONTEXT,commitUpdate(G,_,J,Z,Q){var ee,te,ne;validateInstance(_,Z);let ie=!1;if((G.type==="primitive"&&J.object!==Z.object||((ee=Z.args)==null?void 0:ee.length)!==((te=J.args)==null?void 0:te.length)||(ne=Z.args)!=null&&ne.some((oe,se)=>{var ae;return oe!==((ae=J.args)==null?void 0:ae[se])}))&&(ie=!0),ie)reconstructed.push([G,{...Z},Q]);else{const oe=diffProps(G,Z);Object.keys(oe).length&&(Object.assign(G.props,oe),applyProps(G.object,oe))}(Q.sibling===null||(Q.flags&Update)===NoFlags)&&swapInstances()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:G=>G?.object,prepareForCommit:()=>null,preparePortalMount:G=>prepare(G.getState().scene,G,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance,unhideInstance,createTextInstance:handleTextInstance,hideTextInstance:handleTextInstance,unhideTextInstance:handleTextInstance,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:reactExports.createContext(null),setCurrentUpdatePriority(G){currentUpdatePriority=G},getCurrentUpdatePriority(){return currentUpdatePriority},resolveUpdatePriority(){var G;if(currentUpdatePriority!==NoEventPriority)return currentUpdatePriority;switch(typeof window<"u"&&((G=window.event)==null?void 0:G.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return constantsExports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return constantsExports.ContinuousEventPriority;default:return constantsExports.DefaultEventPriority}},resetFormInstance(){}}),_roots=new Map,shallowLoose={objects:"shallow",strict:!1};function computeInitialSize(G,_){if(!_&&typeof HTMLCanvasElement<"u"&&G instanceof HTMLCanvasElement&&G.parentElement){const{width:J,height:Z,top:Q,left:ee}=G.parentElement.getBoundingClientRect();return{width:J,height:Z,top:Q,left:ee}}else if(!_&&typeof OffscreenCanvas<"u"&&G instanceof OffscreenCanvas)return{width:G.width,height:G.height,top:0,left:0};return{width:0,height:0,top:0,left:0,..._}}function createRoot(G){const _=_roots.get(G),J=_?.fiber,Z=_?.store;_&&console.warn("R3F.createRoot should only be called once!");const Q=typeof reportError=="function"?reportError:console.error,ee=Z||createStore(invalidate,advance$1),te=J||reconciler.createContainer(ee,constantsExports.ConcurrentRoot,null,!1,null,"",Q,Q,Q,null);_||_roots.set(G,{fiber:te,store:ee});let ne,ie,re=!1,oe=null;return{async configure(se={}){let ae;oe=new Promise(ze=>ae=ze);let{gl:ce,size:ue,scene:de,events:me,onCreated:fe,shadows:_e=!1,linear:ye=!1,flat:be=!1,legacy:Se=!1,orthographic:Ce=!1,frameloop:Me="always",dpr:Re=[1,2],performance:Te,raycaster:Ee,camera:De,onPointerMissed:Le}=se,Ue=ee.getState(),Ge=Ue.gl;if(!Ue.gl){const ze={canvas:G,powerPreference:"high-performance",antialias:!0,alpha:!0},qe=typeof ce=="function"?await ce(ze):ce;isRenderer(qe)?Ge=qe:Ge=new WebGLRenderer({...ze,...ce}),Ue.set({gl:Ge})}let Ye=Ue.raycaster;Ye||Ue.set({raycaster:Ye=new Raycaster});const{params:ke,...Fe}=Ee||{};if(is$1.equ(Fe,Ye,shallowLoose)||applyProps(Ye,{...Fe}),is$1.equ(ke,Ye.params,shallowLoose)||applyProps(Ye,{params:{...Ye.params,...ke}}),!Ue.camera||Ue.camera===ie&&!is$1.equ(ie,De,shallowLoose)){ie=De;const ze=De?.isCamera,qe=ze?De:Ce?new OrthographicCamera(0,0,0,0,.1,1e3):new PerspectiveCamera(75,0,.1,1e3);ze||(qe.position.z=5,De&&(applyProps(qe,De),qe.manual||("aspect"in De||"left"in De||"right"in De||"bottom"in De||"top"in De)&&(qe.manual=!0,qe.updateProjectionMatrix())),!Ue.camera&&!(De!=null&&De.rotation)&&qe.lookAt(0,0,0)),Ue.set({camera:qe}),Ye.camera=qe}if(!Ue.scene){let ze;de!=null&&de.isScene?(ze=de,prepare(ze,ee,"",{})):(ze=new Scene,prepare(ze,ee,"",{}),de&&applyProps(ze,de)),Ue.set({scene:ze})}me&&!Ue.events.handlers&&Ue.set({events:me(ee)});const Ve=computeInitialSize(G,ue);if(is$1.equ(Ve,Ue.size,shallowLoose)||Ue.setSize(Ve.width,Ve.height,Ve.top,Ve.left),Re&&Ue.viewport.dpr!==calculateDpr(Re)&&Ue.setDpr(Re),Ue.frameloop!==Me&&Ue.setFrameloop(Me),Ue.onPointerMissed||Ue.set({onPointerMissed:Le}),Te&&!is$1.equ(Te,Ue.performance,shallowLoose)&&Ue.set(ze=>({performance:{...ze.performance,...Te}})),!Ue.xr){var $e;const ze=(ot,St)=>{const it=ee.getState();it.frameloop!=="never"&&advance$1(ot,!0,it,St)},qe=()=>{const ot=ee.getState();ot.gl.xr.enabled=ot.gl.xr.isPresenting,ot.gl.xr.setAnimationLoop(ot.gl.xr.isPresenting?ze:null),ot.gl.xr.isPresenting||invalidate(ot)},et={connect(){const ot=ee.getState().gl;ot.xr.addEventListener("sessionstart",qe),ot.xr.addEventListener("sessionend",qe)},disconnect(){const ot=ee.getState().gl;ot.xr.removeEventListener("sessionstart",qe),ot.xr.removeEventListener("sessionend",qe)}};typeof(($e=Ge.xr)==null?void 0:$e.addEventListener)=="function"&&et.connect(),Ue.set({xr:et})}if(Ge.shadowMap){const ze=Ge.shadowMap.enabled,qe=Ge.shadowMap.type;if(Ge.shadowMap.enabled=!!_e,is$1.boo(_e))Ge.shadowMap.type=PCFSoftShadowMap;else if(is$1.str(_e)){var Xe;const et={basic:BasicShadowMap,percentage:PCFShadowMap,soft:PCFSoftShadowMap,variance:VSMShadowMap};Ge.shadowMap.type=(Xe=et[_e])!=null?Xe:PCFSoftShadowMap}else is$1.obj(_e)&&Object.assign(Ge.shadowMap,_e);(ze!==Ge.shadowMap.enabled||qe!==Ge.shadowMap.type)&&(Ge.shadowMap.needsUpdate=!0)}return ColorManagement.enabled=!Se,re||(Ge.outputColorSpace=ye?LinearSRGBColorSpace:SRGBColorSpace,Ge.toneMapping=be?NoToneMapping:ACESFilmicToneMapping),Ue.legacy!==Se&&Ue.set(()=>({legacy:Se})),Ue.linear!==ye&&Ue.set(()=>({linear:ye})),Ue.flat!==be&&Ue.set(()=>({flat:be})),ce&&!is$1.fun(ce)&&!isRenderer(ce)&&!is$1.equ(ce,Ge,shallowLoose)&&applyProps(Ge,ce),ne=fe,re=!0,ae(),this},render(se){return!re&&!oe&&this.configure(),oe.then(()=>{reconciler.updateContainer(jsxRuntimeExports.jsx(Provider,{store:ee,children:se,onCreated:ne,rootElement:G}),te,null,()=>{})}),ee},unmount(){unmountComponentAtNode(G)}}}function Provider({store:G,children:_,onCreated:J,rootElement:Z}){return useIsomorphicLayoutEffect$1(()=>{const Q=G.getState();Q.set(ee=>({internal:{...ee.internal,active:!0}})),J&&J(Q),G.getState().events.connected||Q.events.connect==null||Q.events.connect(Z)},[]),jsxRuntimeExports.jsx(context$1.Provider,{value:G,children:_})}function unmountComponentAtNode(G,_){const J=_roots.get(G),Z=J?.fiber;if(Z){const Q=J?.store.getState();Q&&(Q.internal.active=!1),reconciler.updateContainer(null,Z,null,()=>{Q&&setTimeout(()=>{try{var ee,te,ne,ie;Q.events.disconnect==null||Q.events.disconnect(),(ee=Q.gl)==null||(te=ee.renderLists)==null||te.dispose==null||te.dispose(),(ne=Q.gl)==null||ne.forceContextLoss==null||ne.forceContextLoss(),(ie=Q.gl)!=null&&ie.xr&&Q.xr.disconnect(),dispose(Q.scene),_roots.delete(G)}catch{}},500)})}}function createSubs(G,_){const J={callback:G};return _.add(J),()=>void _.delete(J)}const globalEffects=new Set,globalAfterEffects=new Set,globalTailEffects=new Set,addEffect=G=>createSubs(G,globalEffects);function run(G,_){if(G.size)for(const{callback:J}of G.values())J(_)}function flushGlobalEffects(G,_){switch(G){case"before":return run(globalEffects,_);case"after":return run(globalAfterEffects,_);case"tail":return run(globalTailEffects,_)}}let subscribers,subscription;function update$1(G,_,J){let Z=_.clock.getDelta();_.frameloop==="never"&&typeof G=="number"&&(Z=G-_.clock.elapsedTime,_.clock.oldTime=_.clock.elapsedTime,_.clock.elapsedTime=G),subscribers=_.internal.subscribers;for(let Q=0;Q<subscribers.length;Q++)subscription=subscribers[Q],subscription.ref.current(subscription.store.getState(),Z,J);return!_.internal.priority&&_.gl.render&&_.gl.render(_.scene,_.camera),_.internal.frames=Math.max(0,_.internal.frames-1),_.frameloop==="always"?1:_.internal.frames}let running=!1,useFrameInProgress=!1,repeat,frame,state;function loop$1(G){frame=requestAnimationFrame(loop$1),running=!0,repeat=0,flushGlobalEffects("before",G),useFrameInProgress=!0;for(const J of _roots.values()){var _;state=J.store.getState(),state.internal.active&&(state.frameloop==="always"||state.internal.frames>0)&&!((_=state.gl.xr)!=null&&_.isPresenting)&&(repeat+=update$1(G,state))}if(useFrameInProgress=!1,flushGlobalEffects("after",G),repeat===0)return flushGlobalEffects("tail",G),running=!1,cancelAnimationFrame(frame)}function invalidate(G,_=1){var J;if(!G)return _roots.forEach(Z=>invalidate(Z.store.getState(),_));(J=G.gl.xr)!=null&&J.isPresenting||!G.internal.active||G.frameloop==="never"||(_>1?G.internal.frames=Math.min(60,G.internal.frames+_):useFrameInProgress?G.internal.frames=2:G.internal.frames=1,running||(running=!0,requestAnimationFrame(loop$1)))}function advance$1(G,_=!0,J,Z){if(_&&flushGlobalEffects("before",G),J)update$1(G,J,Z);else for(const Q of _roots.values())update$1(G,Q.store.getState());_&&flushGlobalEffects("after",G)}const DOM_EVENTS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function createPointerEvents(G){const{handlePointer:_}=createEvents(G);return{priority:1,enabled:!0,compute(J,Z,Q){Z.pointer.set(J.offsetX/Z.size.width*2-1,-(J.offsetY/Z.size.height)*2+1),Z.raycaster.setFromCamera(Z.pointer,Z.camera)},connected:void 0,handlers:Object.keys(DOM_EVENTS).reduce((J,Z)=>({...J,[Z]:_(Z)}),{}),update:()=>{var J;const{events:Z,internal:Q}=G.getState();(J=Q.lastEvent)!=null&&J.current&&Z.handlers&&Z.handlers.onPointerMove(Q.lastEvent.current)},connect:J=>{const{set:Z,events:Q}=G.getState();if(Q.disconnect==null||Q.disconnect(),Z(ee=>({events:{...ee.events,connected:J}})),Q.handlers)for(const ee in Q.handlers){const te=Q.handlers[ee],[ne,ie]=DOM_EVENTS[ee];J.addEventListener(ne,te,{passive:ie})}},disconnect:()=>{const{set:J,events:Z}=G.getState();if(Z.connected){if(Z.handlers)for(const Q in Z.handlers){const ee=Z.handlers[Q],[te]=DOM_EVENTS[Q];Z.connected.removeEventListener(te,ee)}J(Q=>({events:{...Q.events,connected:void 0}}))}}}}function g(G,_){let J;return(...Z)=>{window.clearTimeout(J),J=window.setTimeout(()=>G(...Z),_)}}function j({debounce:G,scroll:_,polyfill:J,offsetSize:Z}={debounce:0,scroll:!1,offsetSize:!1}){const Q=J||(typeof window>"u"?class{}:window.ResizeObserver);if(!Q)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[ee,te]=reactExports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),ne=reactExports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:ee,orientationHandler:null}),ie=G?typeof G=="number"?G:G.scroll:null,re=G?typeof G=="number"?G:G.resize:null,oe=reactExports.useRef(!1);reactExports.useEffect(()=>(oe.current=!0,()=>void(oe.current=!1)));const[se,ae,ce]=reactExports.useMemo(()=>{const fe=()=>{if(!ne.current.element)return;const{left:_e,top:ye,width:be,height:Se,bottom:Ce,right:Me,x:Re,y:Te}=ne.current.element.getBoundingClientRect(),Ee={left:_e,top:ye,width:be,height:Se,bottom:Ce,right:Me,x:Re,y:Te};ne.current.element instanceof HTMLElement&&Z&&(Ee.height=ne.current.element.offsetHeight,Ee.width=ne.current.element.offsetWidth),Object.freeze(Ee),oe.current&&!D(ne.current.lastBounds,Ee)&&te(ne.current.lastBounds=Ee)};return[fe,re?g(fe,re):fe,ie?g(fe,ie):fe]},[te,Z,ie,re]);function ue(){ne.current.scrollContainers&&(ne.current.scrollContainers.forEach(fe=>fe.removeEventListener("scroll",ce,!0)),ne.current.scrollContainers=null),ne.current.resizeObserver&&(ne.current.resizeObserver.disconnect(),ne.current.resizeObserver=null),ne.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",ne.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",ne.current.orientationHandler))}function de(){ne.current.element&&(ne.current.resizeObserver=new Q(ce),ne.current.resizeObserver.observe(ne.current.element),_&&ne.current.scrollContainers&&ne.current.scrollContainers.forEach(fe=>fe.addEventListener("scroll",ce,{capture:!0,passive:!0})),ne.current.orientationHandler=()=>{ce()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",ne.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",ne.current.orientationHandler))}const me=fe=>{!fe||fe===ne.current.element||(ue(),ne.current.element=fe,ne.current.scrollContainers=E(fe),de())};return X(ce,!!_),W(ae),reactExports.useEffect(()=>{ue(),de()},[_,ce,ae]),reactExports.useEffect(()=>ue,[]),[me,ee,se]}function W(G){reactExports.useEffect(()=>{const _=G;return window.addEventListener("resize",_),()=>void window.removeEventListener("resize",_)},[G])}function X(G,_){reactExports.useEffect(()=>{if(_){const J=G;return window.addEventListener("scroll",J,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",J,!0)}},[G,_])}function E(G){const _=[];if(!G||G===document.body)return _;const{overflow:J,overflowX:Z,overflowY:Q}=window.getComputedStyle(G);return[J,Z,Q].some(ee=>ee==="auto"||ee==="scroll")&&_.push(G),[..._,...E(G.parentElement)]}const k=["x","y","top","bottom","left","right","width","height"],D=(G,_)=>k.every(J=>G[J]===_[J]);function CanvasImpl({ref:G,children:_,fallback:J,resize:Z,style:Q,gl:ee,events:te=createPointerEvents,eventSource:ne,eventPrefix:ie,shadows:re,linear:oe,flat:se,legacy:ae,orthographic:ce,frameloop:ue,dpr:de,performance:me,raycaster:fe,camera:_e,scene:ye,onPointerMissed:be,onCreated:Se,...Ce}){reactExports.useMemo(()=>extend(THREE),[]);const Me=useBridge(),[Re,Te]=j({scroll:!0,debounce:{scroll:50,resize:0},...Z}),Ee=reactExports.useRef(null),De=reactExports.useRef(null);reactExports.useImperativeHandle(G,()=>Ee.current);const Le=useMutableCallback(be),[Ue,Ge]=reactExports.useState(!1),[Ye,ke]=reactExports.useState(!1);if(Ue)throw Ue;if(Ye)throw Ye;const Fe=reactExports.useRef(null);useIsomorphicLayoutEffect$1(()=>{const $e=Ee.current;if(Te.width>0&&Te.height>0&&$e){Fe.current||(Fe.current=createRoot($e));async function Xe(){await Fe.current.configure({gl:ee,scene:ye,events:te,shadows:re,linear:oe,flat:se,legacy:ae,orthographic:ce,frameloop:ue,dpr:de,performance:me,raycaster:fe,camera:_e,size:Te,onPointerMissed:(...ze)=>Le.current==null?void 0:Le.current(...ze),onCreated:ze=>{ze.events.connect==null||ze.events.connect(ne?isRef(ne)?ne.current:ne:De.current),ie&&ze.setEvents({compute:(qe,et)=>{const ot=qe[ie+"X"],St=qe[ie+"Y"];et.pointer.set(ot/et.size.width*2-1,-(St/et.size.height)*2+1),et.raycaster.setFromCamera(et.pointer,et.camera)}}),Se?.(ze)}}),Fe.current.render(jsxRuntimeExports.jsx(Me,{children:jsxRuntimeExports.jsx(ErrorBoundary,{set:ke,children:jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(Block,{set:Ge}),children:_??null})})}))}Xe()}}),reactExports.useEffect(()=>{const $e=Ee.current;if($e)return()=>unmountComponentAtNode($e)},[]);const Ve=ne?"none":"auto";return jsxRuntimeExports.jsx("div",{ref:De,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Ve,...Q},...Ce,children:jsxRuntimeExports.jsx("div",{ref:Re,style:{width:"100%",height:"100%"},children:jsxRuntimeExports.jsx("canvas",{ref:Ee,style:{display:"block"},children:J})})})}function Canvas(G){return jsxRuntimeExports.jsx(m,{children:jsxRuntimeExports.jsx(CanvasImpl,{...G})})}function _extends(){return _extends=Object.assign?Object.assign.bind():function(G){for(var _=1;_<arguments.length;_++){var J=arguments[_];for(var Z in J)({}).hasOwnProperty.call(J,Z)&&(G[Z]=J[Z])}return G},_extends.apply(null,arguments)}const identity=G=>G;function useStore$1(G,_=identity){const J=React.useSyncExternalStore(G.subscribe,React.useCallback(()=>_(G.getState()),[G,_]),React.useCallback(()=>_(G.getInitialState()),[G,_]));return React.useDebugValue(J),J}const createImpl=G=>{const _=createStore$1(G),J=Z=>useStore$1(_,Z);return Object.assign(J,_),J},create$1=(G=>G?createImpl(G):createImpl);var __defProp$2=Object.defineProperty,__defNormalProp$1=(G,_,J)=>_ in G?__defProp$2(G,_,{enumerable:!0,configurable:!0,writable:!0,value:J}):G[_]=J,__publicField$1=(G,_,J)=>(__defNormalProp$1(G,_+"",J),J);class EventDispatcher{constructor(){__publicField$1(this,"_listeners")}addEventListener(_,J){this._listeners===void 0&&(this._listeners={});const Z=this._listeners;Z[_]===void 0&&(Z[_]=[]),Z[_].indexOf(J)===-1&&Z[_].push(J)}hasEventListener(_,J){if(this._listeners===void 0)return!1;const Z=this._listeners;return Z[_]!==void 0&&Z[_].indexOf(J)!==-1}removeEventListener(_,J){if(this._listeners===void 0)return;const Q=this._listeners[_];if(Q!==void 0){const ee=Q.indexOf(J);ee!==-1&&Q.splice(ee,1)}}dispatchEvent(_){if(this._listeners===void 0)return;const Z=this._listeners[_.type];if(Z!==void 0){_.target=this;const Q=Z.slice(0);for(let ee=0,te=Q.length;ee<te;ee++)Q[ee].call(this,_);_.target=null}}}var __defProp$1=Object.defineProperty,__defNormalProp=(G,_,J)=>_ in G?__defProp$1(G,_,{enumerable:!0,configurable:!0,writable:!0,value:J}):G[_]=J,__publicField=(G,_,J)=>(__defNormalProp(G,typeof _!="symbol"?_+"":_,J),J);const _ray$1=new Ray,_plane$1=new Plane,TILT_LIMIT=Math.cos(70*(Math.PI/180)),moduloWrapAround=(G,_)=>(G%_+_)%_;let OrbitControls$1=class extends EventDispatcher{constructor(_,J){super(),__publicField(this,"object"),__publicField(this,"domElement"),__publicField(this,"enabled",!0),__publicField(this,"target",new Vector3),__publicField(this,"minDistance",0),__publicField(this,"maxDistance",1/0),__publicField(this,"minZoom",0),__publicField(this,"maxZoom",1/0),__publicField(this,"minPolarAngle",0),__publicField(this,"maxPolarAngle",Math.PI),__publicField(this,"minAzimuthAngle",-1/0),__publicField(this,"maxAzimuthAngle",1/0),__publicField(this,"enableDamping",!1),__publicField(this,"dampingFactor",.05),__publicField(this,"enableZoom",!0),__publicField(this,"zoomSpeed",1),__publicField(this,"enableRotate",!0),__publicField(this,"rotateSpeed",1),__publicField(this,"enablePan",!0),__publicField(this,"panSpeed",1),__publicField(this,"screenSpacePanning",!0),__publicField(this,"keyPanSpeed",7),__publicField(this,"zoomToCursor",!1),__publicField(this,"autoRotate",!1),__publicField(this,"autoRotateSpeed",2),__publicField(this,"reverseOrbit",!1),__publicField(this,"reverseHorizontalOrbit",!1),__publicField(this,"reverseVerticalOrbit",!1),__publicField(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),__publicField(this,"mouseButtons",{LEFT:MOUSE.ROTATE,MIDDLE:MOUSE.DOLLY,RIGHT:MOUSE.PAN}),__publicField(this,"touches",{ONE:TOUCH.ROTATE,TWO:TOUCH.DOLLY_PAN}),__publicField(this,"target0"),__publicField(this,"position0"),__publicField(this,"zoom0"),__publicField(this,"_domElementKeyEvents",null),__publicField(this,"getPolarAngle"),__publicField(this,"getAzimuthalAngle"),__publicField(this,"setPolarAngle"),__publicField(this,"setAzimuthalAngle"),__publicField(this,"getDistance"),__publicField(this,"getZoomScale"),__publicField(this,"listenToKeyEvents"),__publicField(this,"stopListenToKeyEvents"),__publicField(this,"saveState"),__publicField(this,"reset"),__publicField(this,"update"),__publicField(this,"connect"),__publicField(this,"dispose"),__publicField(this,"dollyIn"),__publicField(this,"dollyOut"),__publicField(this,"getScale"),__publicField(this,"setScale"),this.object=_,this.domElement=J,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>oe.phi,this.getAzimuthalAngle=()=>oe.theta,this.setPolarAngle=tt=>{let Ze=moduloWrapAround(tt,2*Math.PI),Zt=oe.phi;Zt<0&&(Zt+=2*Math.PI),Ze<0&&(Ze+=2*Math.PI);let rt=Math.abs(Ze-Zt);2*Math.PI-rt<rt&&(Ze<Zt?Ze+=2*Math.PI:Zt+=2*Math.PI),se.phi=Ze-Zt,Z.update()},this.setAzimuthalAngle=tt=>{let Ze=moduloWrapAround(tt,2*Math.PI),Zt=oe.theta;Zt<0&&(Zt+=2*Math.PI),Ze<0&&(Ze+=2*Math.PI);let rt=Math.abs(Ze-Zt);2*Math.PI-rt<rt&&(Ze<Zt?Ze+=2*Math.PI:Zt+=2*Math.PI),se.theta=Ze-Zt,Z.update()},this.getDistance=()=>Z.object.position.distanceTo(Z.target),this.listenToKeyEvents=tt=>{tt.addEventListener("keydown",Nt),this._domElementKeyEvents=tt},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Nt),this._domElementKeyEvents=null},this.saveState=()=>{Z.target0.copy(Z.target),Z.position0.copy(Z.object.position),Z.zoom0=Z.object.zoom},this.reset=()=>{Z.target.copy(Z.target0),Z.object.position.copy(Z.position0),Z.object.zoom=Z.zoom0,Z.object.updateProjectionMatrix(),Z.dispatchEvent(Q),Z.update(),ie=ne.NONE},this.update=(()=>{const tt=new Vector3,Ze=new Vector3(0,1,0),Zt=new Quaternion().setFromUnitVectors(_.up,Ze),rt=Zt.clone().invert(),Qt=new Vector3,zt=new Quaternion,ei=2*Math.PI;return function(){const Ft=Z.object.position;Zt.setFromUnitVectors(_.up,Ze),rt.copy(Zt).invert(),tt.copy(Ft).sub(Z.target),tt.applyQuaternion(Zt),oe.setFromVector3(tt),Z.autoRotate&&ie===ne.NONE&&Ge(Le()),Z.enableDamping?(oe.theta+=se.theta*Z.dampingFactor,oe.phi+=se.phi*Z.dampingFactor):(oe.theta+=se.theta,oe.phi+=se.phi);let hi=Z.minAzimuthAngle,pi=Z.maxAzimuthAngle;isFinite(hi)&&isFinite(pi)&&(hi<-Math.PI?hi+=ei:hi>Math.PI&&(hi-=ei),pi<-Math.PI?pi+=ei:pi>Math.PI&&(pi-=ei),hi<=pi?oe.theta=Math.max(hi,Math.min(pi,oe.theta)):oe.theta=oe.theta>(hi+pi)/2?Math.max(hi,oe.theta):Math.min(pi,oe.theta)),oe.phi=Math.max(Z.minPolarAngle,Math.min(Z.maxPolarAngle,oe.phi)),oe.makeSafe(),Z.enableDamping===!0?Z.target.addScaledVector(ce,Z.dampingFactor):Z.target.add(ce),Z.zoomToCursor&&Te||Z.object.isOrthographicCamera?oe.radius=et(oe.radius):oe.radius=et(oe.radius*ae),tt.setFromSpherical(oe),tt.applyQuaternion(rt),Ft.copy(Z.target).add(tt),Z.object.matrixAutoUpdate||Z.object.updateMatrix(),Z.object.lookAt(Z.target),Z.enableDamping===!0?(se.theta*=1-Z.dampingFactor,se.phi*=1-Z.dampingFactor,ce.multiplyScalar(1-Z.dampingFactor)):(se.set(0,0,0),ce.set(0,0,0));let Di=!1;if(Z.zoomToCursor&&Te){let Si=null;if(Z.object instanceof PerspectiveCamera&&Z.object.isPerspectiveCamera){const Ii=tt.length();Si=et(Ii*ae);const vn=Ii-Si;Z.object.position.addScaledVector(Me,vn),Z.object.updateMatrixWorld()}else if(Z.object.isOrthographicCamera){const Ii=new Vector3(Re.x,Re.y,0);Ii.unproject(Z.object),Z.object.zoom=Math.max(Z.minZoom,Math.min(Z.maxZoom,Z.object.zoom/ae)),Z.object.updateProjectionMatrix(),Di=!0;const vn=new Vector3(Re.x,Re.y,0);vn.unproject(Z.object),Z.object.position.sub(vn).add(Ii),Z.object.updateMatrixWorld(),Si=tt.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),Z.zoomToCursor=!1;Si!==null&&(Z.screenSpacePanning?Z.target.set(0,0,-1).transformDirection(Z.object.matrix).multiplyScalar(Si).add(Z.object.position):(_ray$1.origin.copy(Z.object.position),_ray$1.direction.set(0,0,-1).transformDirection(Z.object.matrix),Math.abs(Z.object.up.dot(_ray$1.direction))<TILT_LIMIT?_.lookAt(Z.target):(_plane$1.setFromNormalAndCoplanarPoint(Z.object.up,Z.target),_ray$1.intersectPlane(_plane$1,Z.target))))}else Z.object instanceof OrthographicCamera&&Z.object.isOrthographicCamera&&(Di=ae!==1,Di&&(Z.object.zoom=Math.max(Z.minZoom,Math.min(Z.maxZoom,Z.object.zoom/ae)),Z.object.updateProjectionMatrix()));return ae=1,Te=!1,Di||Qt.distanceToSquared(Z.object.position)>re||8*(1-zt.dot(Z.object.quaternion))>re?(Z.dispatchEvent(Q),Qt.copy(Z.object.position),zt.copy(Z.object.quaternion),Di=!1,!0):!1}})(),this.connect=tt=>{Z.domElement=tt,Z.domElement.style.touchAction="none",Z.domElement.addEventListener("contextmenu",It),Z.domElement.addEventListener("pointerdown",di),Z.domElement.addEventListener("pointercancel",He),Z.domElement.addEventListener("wheel",At)},this.dispose=()=>{var tt,Ze,Zt,rt,Qt,zt;Z.domElement&&(Z.domElement.style.touchAction="auto"),(tt=Z.domElement)==null||tt.removeEventListener("contextmenu",It),(Ze=Z.domElement)==null||Ze.removeEventListener("pointerdown",di),(Zt=Z.domElement)==null||Zt.removeEventListener("pointercancel",He),(rt=Z.domElement)==null||rt.removeEventListener("wheel",At),(Qt=Z.domElement)==null||Qt.ownerDocument.removeEventListener("pointermove",Qe),(zt=Z.domElement)==null||zt.ownerDocument.removeEventListener("pointerup",He),Z._domElementKeyEvents!==null&&Z._domElementKeyEvents.removeEventListener("keydown",Nt)};const Z=this,Q={type:"change"},ee={type:"start"},te={type:"end"},ne={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let ie=ne.NONE;const re=1e-6,oe=new Spherical,se=new Spherical;let ae=1;const ce=new Vector3,ue=new Vector2,de=new Vector2,me=new Vector2,fe=new Vector2,_e=new Vector2,ye=new Vector2,be=new Vector2,Se=new Vector2,Ce=new Vector2,Me=new Vector3,Re=new Vector2;let Te=!1;const Ee=[],De={};function Le(){return 2*Math.PI/60/60*Z.autoRotateSpeed}function Ue(){return Math.pow(.95,Z.zoomSpeed)}function Ge(tt){Z.reverseOrbit||Z.reverseHorizontalOrbit?se.theta+=tt:se.theta-=tt}function Ye(tt){Z.reverseOrbit||Z.reverseVerticalOrbit?se.phi+=tt:se.phi-=tt}const ke=(()=>{const tt=new Vector3;return function(Zt,rt){tt.setFromMatrixColumn(rt,0),tt.multiplyScalar(-Zt),ce.add(tt)}})(),Fe=(()=>{const tt=new Vector3;return function(Zt,rt){Z.screenSpacePanning===!0?tt.setFromMatrixColumn(rt,1):(tt.setFromMatrixColumn(rt,0),tt.crossVectors(Z.object.up,tt)),tt.multiplyScalar(Zt),ce.add(tt)}})(),Ve=(()=>{const tt=new Vector3;return function(Zt,rt){const Qt=Z.domElement;if(Qt&&Z.object instanceof PerspectiveCamera&&Z.object.isPerspectiveCamera){const zt=Z.object.position;tt.copy(zt).sub(Z.target);let ei=tt.length();ei*=Math.tan(Z.object.fov/2*Math.PI/180),ke(2*Zt*ei/Qt.clientHeight,Z.object.matrix),Fe(2*rt*ei/Qt.clientHeight,Z.object.matrix)}else Qt&&Z.object instanceof OrthographicCamera&&Z.object.isOrthographicCamera?(ke(Zt*(Z.object.right-Z.object.left)/Z.object.zoom/Qt.clientWidth,Z.object.matrix),Fe(rt*(Z.object.top-Z.object.bottom)/Z.object.zoom/Qt.clientHeight,Z.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),Z.enablePan=!1)}})();function $e(tt){Z.object instanceof PerspectiveCamera&&Z.object.isPerspectiveCamera||Z.object instanceof OrthographicCamera&&Z.object.isOrthographicCamera?ae=tt:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),Z.enableZoom=!1)}function Xe(tt){$e(ae/tt)}function ze(tt){$e(ae*tt)}function qe(tt){if(!Z.zoomToCursor||!Z.domElement)return;Te=!0;const Ze=Z.domElement.getBoundingClientRect(),Zt=tt.clientX-Ze.left,rt=tt.clientY-Ze.top,Qt=Ze.width,zt=Ze.height;Re.x=Zt/Qt*2-1,Re.y=-(rt/zt)*2+1,Me.set(Re.x,Re.y,1).unproject(Z.object).sub(Z.object.position).normalize()}function et(tt){return Math.max(Z.minDistance,Math.min(Z.maxDistance,tt))}function ot(tt){ue.set(tt.clientX,tt.clientY)}function St(tt){qe(tt),be.set(tt.clientX,tt.clientY)}function it(tt){fe.set(tt.clientX,tt.clientY)}function lt(tt){de.set(tt.clientX,tt.clientY),me.subVectors(de,ue).multiplyScalar(Z.rotateSpeed);const Ze=Z.domElement;Ze&&(Ge(2*Math.PI*me.x/Ze.clientHeight),Ye(2*Math.PI*me.y/Ze.clientHeight)),ue.copy(de),Z.update()}function gt(tt){Se.set(tt.clientX,tt.clientY),Ce.subVectors(Se,be),Ce.y>0?Xe(Ue()):Ce.y<0&&ze(Ue()),be.copy(Se),Z.update()}function kt(tt){_e.set(tt.clientX,tt.clientY),ye.subVectors(_e,fe).multiplyScalar(Z.panSpeed),Ve(ye.x,ye.y),fe.copy(_e),Z.update()}function Jt(tt){qe(tt),tt.deltaY<0?ze(Ue()):tt.deltaY>0&&Xe(Ue()),Z.update()}function li(tt){let Ze=!1;switch(tt.code){case Z.keys.UP:Ve(0,Z.keyPanSpeed),Ze=!0;break;case Z.keys.BOTTOM:Ve(0,-Z.keyPanSpeed),Ze=!0;break;case Z.keys.LEFT:Ve(Z.keyPanSpeed,0),Ze=!0;break;case Z.keys.RIGHT:Ve(-Z.keyPanSpeed,0),Ze=!0;break}Ze&&(tt.preventDefault(),Z.update())}function si(){if(Ee.length==1)ue.set(Ee[0].pageX,Ee[0].pageY);else{const tt=.5*(Ee[0].pageX+Ee[1].pageX),Ze=.5*(Ee[0].pageY+Ee[1].pageY);ue.set(tt,Ze)}}function qt(){if(Ee.length==1)fe.set(Ee[0].pageX,Ee[0].pageY);else{const tt=.5*(Ee[0].pageX+Ee[1].pageX),Ze=.5*(Ee[0].pageY+Ee[1].pageY);fe.set(tt,Ze)}}function vt(){const tt=Ee[0].pageX-Ee[1].pageX,Ze=Ee[0].pageY-Ee[1].pageY,Zt=Math.sqrt(tt*tt+Ze*Ze);be.set(0,Zt)}function Ke(){Z.enableZoom&&vt(),Z.enablePan&&qt()}function Tt(){Z.enableZoom&&vt(),Z.enableRotate&&si()}function Ut(tt){if(Ee.length==1)de.set(tt.pageX,tt.pageY);else{const Zt=mt(tt),rt=.5*(tt.pageX+Zt.x),Qt=.5*(tt.pageY+Zt.y);de.set(rt,Qt)}me.subVectors(de,ue).multiplyScalar(Z.rotateSpeed);const Ze=Z.domElement;Ze&&(Ge(2*Math.PI*me.x/Ze.clientHeight),Ye(2*Math.PI*me.y/Ze.clientHeight)),ue.copy(de)}function Lt(tt){if(Ee.length==1)_e.set(tt.pageX,tt.pageY);else{const Ze=mt(tt),Zt=.5*(tt.pageX+Ze.x),rt=.5*(tt.pageY+Ze.y);_e.set(Zt,rt)}ye.subVectors(_e,fe).multiplyScalar(Z.panSpeed),Ve(ye.x,ye.y),fe.copy(_e)}function jt(tt){const Ze=mt(tt),Zt=tt.pageX-Ze.x,rt=tt.pageY-Ze.y,Qt=Math.sqrt(Zt*Zt+rt*rt);Se.set(0,Qt),Ce.set(0,Math.pow(Se.y/be.y,Z.zoomSpeed)),Xe(Ce.y),be.copy(Se)}function ri(tt){Z.enableZoom&&jt(tt),Z.enablePan&&Lt(tt)}function ti(tt){Z.enableZoom&&jt(tt),Z.enableRotate&&Ut(tt)}function di(tt){var Ze,Zt;Z.enabled!==!1&&(Ee.length===0&&((Ze=Z.domElement)==null||Ze.ownerDocument.addEventListener("pointermove",Qe),(Zt=Z.domElement)==null||Zt.ownerDocument.addEventListener("pointerup",He)),Yt(tt),tt.pointerType==="touch"?fi(tt):_t(tt))}function Qe(tt){Z.enabled!==!1&&(tt.pointerType==="touch"?Kt(tt):dt(tt))}function He(tt){var Ze,Zt,rt;Rt(tt),Ee.length===0&&((Ze=Z.domElement)==null||Ze.releasePointerCapture(tt.pointerId),(Zt=Z.domElement)==null||Zt.ownerDocument.removeEventListener("pointermove",Qe),(rt=Z.domElement)==null||rt.ownerDocument.removeEventListener("pointerup",He)),Z.dispatchEvent(te),ie=ne.NONE}function _t(tt){let Ze;switch(tt.button){case 0:Ze=Z.mouseButtons.LEFT;break;case 1:Ze=Z.mouseButtons.MIDDLE;break;case 2:Ze=Z.mouseButtons.RIGHT;break;default:Ze=-1}switch(Ze){case MOUSE.DOLLY:if(Z.enableZoom===!1)return;St(tt),ie=ne.DOLLY;break;case MOUSE.ROTATE:if(tt.ctrlKey||tt.metaKey||tt.shiftKey){if(Z.enablePan===!1)return;it(tt),ie=ne.PAN}else{if(Z.enableRotate===!1)return;ot(tt),ie=ne.ROTATE}break;case MOUSE.PAN:if(tt.ctrlKey||tt.metaKey||tt.shiftKey){if(Z.enableRotate===!1)return;ot(tt),ie=ne.ROTATE}else{if(Z.enablePan===!1)return;it(tt),ie=ne.PAN}break;default:ie=ne.NONE}ie!==ne.NONE&&Z.dispatchEvent(ee)}function dt(tt){if(Z.enabled!==!1)switch(ie){case ne.ROTATE:if(Z.enableRotate===!1)return;lt(tt);break;case ne.DOLLY:if(Z.enableZoom===!1)return;gt(tt);break;case ne.PAN:if(Z.enablePan===!1)return;kt(tt);break}}function At(tt){Z.enabled===!1||Z.enableZoom===!1||ie!==ne.NONE&&ie!==ne.ROTATE||(tt.preventDefault(),Z.dispatchEvent(ee),Jt(tt),Z.dispatchEvent(te))}function Nt(tt){Z.enabled===!1||Z.enablePan===!1||li(tt)}function fi(tt){switch(Pt(tt),Ee.length){case 1:switch(Z.touches.ONE){case TOUCH.ROTATE:if(Z.enableRotate===!1)return;si(),ie=ne.TOUCH_ROTATE;break;case TOUCH.PAN:if(Z.enablePan===!1)return;qt(),ie=ne.TOUCH_PAN;break;default:ie=ne.NONE}break;case 2:switch(Z.touches.TWO){case TOUCH.DOLLY_PAN:if(Z.enableZoom===!1&&Z.enablePan===!1)return;Ke(),ie=ne.TOUCH_DOLLY_PAN;break;case TOUCH.DOLLY_ROTATE:if(Z.enableZoom===!1&&Z.enableRotate===!1)return;Tt(),ie=ne.TOUCH_DOLLY_ROTATE;break;default:ie=ne.NONE}break;default:ie=ne.NONE}ie!==ne.NONE&&Z.dispatchEvent(ee)}function Kt(tt){switch(Pt(tt),ie){case ne.TOUCH_ROTATE:if(Z.enableRotate===!1)return;Ut(tt),Z.update();break;case ne.TOUCH_PAN:if(Z.enablePan===!1)return;Lt(tt),Z.update();break;case ne.TOUCH_DOLLY_PAN:if(Z.enableZoom===!1&&Z.enablePan===!1)return;ri(tt),Z.update();break;case ne.TOUCH_DOLLY_ROTATE:if(Z.enableZoom===!1&&Z.enableRotate===!1)return;ti(tt),Z.update();break;default:ie=ne.NONE}}function It(tt){Z.enabled!==!1&&tt.preventDefault()}function Yt(tt){Ee.push(tt)}function Rt(tt){delete De[tt.pointerId];for(let Ze=0;Ze<Ee.length;Ze++)if(Ee[Ze].pointerId==tt.pointerId){Ee.splice(Ze,1);return}}function Pt(tt){let Ze=De[tt.pointerId];Ze===void 0&&(Ze=new Vector2,De[tt.pointerId]=Ze),Ze.set(tt.pageX,tt.pageY)}function mt(tt){const Ze=tt.pointerId===Ee[0].pointerId?Ee[1]:Ee[0];return De[Ze.pointerId]}this.dollyIn=(tt=Ue())=>{ze(tt),Z.update()},this.dollyOut=(tt=Ue())=>{Xe(tt),Z.update()},this.getScale=()=>ae,this.setScale=tt=>{$e(tt),Z.update()},this.getZoomScale=()=>Ue(),J!==void 0&&this.connect(J),this.update()}};function shaderMaterial(G,_,J,Z){var Q;return Q=class extends ShaderMaterial{constructor(ee){super({vertexShader:_,fragmentShader:J,...ee});for(const te in G)this.uniforms[te]=new Uniform(G[te]),Object.defineProperty(this,te,{get(){return this.uniforms[te].value},set(ne){this.uniforms[te].value=ne}});this.uniforms=UniformsUtils.clone(this.uniforms)}},Q.key=MathUtils.generateUUID(),Q}const getVersion=()=>parseInt(REVISION.replace(/\D+/g,"")),version=getVersion(),OrbitControls=reactExports.forwardRef(({makeDefault:G,camera:_,regress:J,domElement:Z,enableDamping:Q=!0,keyEvents:ee=!1,onChange:te,onStart:ne,onEnd:ie,...re},oe)=>{const se=useThree(Ce=>Ce.invalidate),ae=useThree(Ce=>Ce.camera),ce=useThree(Ce=>Ce.gl),ue=useThree(Ce=>Ce.events),de=useThree(Ce=>Ce.setEvents),me=useThree(Ce=>Ce.set),fe=useThree(Ce=>Ce.get),_e=useThree(Ce=>Ce.performance),ye=_||ae,be=Z||ue.connected||ce.domElement,Se=reactExports.useMemo(()=>new OrbitControls$1(ye),[ye]);return useFrame(()=>{Se.enabled&&Se.update()},-1),reactExports.useEffect(()=>(ee&&Se.connect(ee===!0?be:ee),Se.connect(be),()=>void Se.dispose()),[ee,be,J,Se,se]),reactExports.useEffect(()=>{const Ce=Te=>{se(),J&&_e.regress(),te&&te(Te)},Me=Te=>{ne&&ne(Te)},Re=Te=>{ie&&ie(Te)};return Se.addEventListener("change",Ce),Se.addEventListener("start",Me),Se.addEventListener("end",Re),()=>{Se.removeEventListener("start",Me),Se.removeEventListener("end",Re),Se.removeEventListener("change",Ce)}},[te,ne,ie,Se,se,de]),reactExports.useEffect(()=>{if(G){const Ce=fe().controls;return me({controls:Se}),()=>me({controls:Ce})}},[G,Se]),reactExports.createElement("primitive",_extends({ref:oe,object:Se,enableDamping:Q},re))}),GridMaterial=shaderMaterial({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,fadeFrom:1,cellThickness:.5,sectionThickness:1,cellColor:new Color,sectionColor:new Color,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new Vector3,worldPlanePosition:new Vector3},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float fadeFrom;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      vec3 from = worldCamProjPosition*vec3(fadeFrom);
      float dist = distance(from, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${version>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),Grid=reactExports.forwardRef(({args:G,cellColor:_="#000000",sectionColor:J="#2080ff",cellSize:Z=.5,sectionSize:Q=1,followCamera:ee=!1,infiniteGrid:te=!1,fadeDistance:ne=100,fadeStrength:ie=1,fadeFrom:re=1,cellThickness:oe=.5,sectionThickness:se=1,side:ae=BackSide,...ce},ue)=>{extend({GridMaterial});const de=reactExports.useRef(null);reactExports.useImperativeHandle(ue,()=>de.current,[]);const me=new Plane,fe=new Vector3(0,1,0),_e=new Vector3(0,0,0);useFrame(Se=>{me.setFromNormalAndCoplanarPoint(fe,_e).applyMatrix4(de.current.matrixWorld);const Ce=de.current.material,Me=Ce.uniforms.worldCamProjPosition,Re=Ce.uniforms.worldPlanePosition;me.projectPoint(Se.camera.position,Me.value),Re.value.set(0,0,0).applyMatrix4(de.current.matrixWorld)});const ye={cellSize:Z,sectionSize:Q,cellColor:_,sectionColor:J,cellThickness:oe,sectionThickness:se},be={fadeDistance:ne,fadeStrength:ie,fadeFrom:re,infiniteGrid:te,followCamera:ee};return reactExports.createElement("mesh",_extends({ref:de,frustumCulled:!1},ce),reactExports.createElement("gridMaterial",_extends({transparent:!0,"extensions-derivatives":!0,side:ae},ye,be)),reactExports.createElement("planeGeometry",{args:G}))}),opaque_fragment=version>=154?"opaque_fragment":"output_fragment";class PointMaterialImpl extends PointsMaterial{constructor(_){super(_),this.onBeforeCompile=(J,Z)=>{const{isWebGL2:Q}=Z.capabilities;J.fragmentShader=J.fragmentShader.replace(`#include <${opaque_fragment}>`,`
        ${Q?`#include <${opaque_fragment}>`:`#extension GL_OES_standard_derivatives : enable
#include <${opaque_fragment}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${version>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const PointMaterial=reactExports.forwardRef((G,_)=>{const[J]=reactExports.useState(()=>new PointMaterialImpl(null));return reactExports.createElement("primitive",_extends({},G,{object:J,ref:_,attach:"material"}))});function create(G,_){const J=G+"Geometry";return reactExports.forwardRef(({args:Z,children:Q,...ee},te)=>{const ne=reactExports.useRef(null);return reactExports.useImperativeHandle(te,()=>ne.current),reactExports.useLayoutEffect(()=>void _?.(ne.current)),reactExports.createElement("mesh",_extends({ref:ne},ee),reactExports.createElement(J,{attach:"geometry",args:Z}),Q)})}const Box=create("box"),Sphere=create("sphere"),_inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere$1,_position=new Vector3;class PositionPoint extends Group{constructor(){super(),this.size=0,this.color=new Color("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var _;return(_=this.instance.current)==null?void 0:_.geometry}raycast(_,J){var Z,Q;const ee=this.instance.current;if(!ee||!ee.geometry)return;const te=ee.userData.instances.indexOf(this.instanceKey);if(te===-1||te>ee.geometry.drawRange.count)return;const ne=(Z=(Q=_.params.Points)==null?void 0:Q.threshold)!==null&&Z!==void 0?Z:1;if(_sphere.set(this.getWorldPosition(_position),ne),_.ray.intersectsSphere(_sphere)===!1)return;_inverseMatrix.copy(ee.matrixWorld).invert(),_ray.copy(_.ray).applyMatrix4(_inverseMatrix);const ie=ne/((this.scale.x+this.scale.y+this.scale.z)/3),re=ie*ie,oe=_ray.distanceSqToPoint(this.position);if(oe<re){const se=new Vector3;_ray.closestPointToPoint(this.position,se),se.applyMatrix4(this.matrixWorld);const ae=_.ray.origin.distanceTo(se);if(ae<_.near||ae>_.far)return;J.push({distance:ae,distanceToRay:Math.sqrt(oe),point:se,index:te,face:null,object:this})}}}let i,positionRef;const context=reactExports.createContext(null),parentMatrix=new Matrix4,position=new Vector3,PointsInstances=reactExports.forwardRef(({children:G,range:_,limit:J=1e3,...Z},Q)=>{const ee=reactExports.useRef(null);reactExports.useImperativeHandle(Q,()=>ee.current,[]);const[te,ne]=reactExports.useState([]),[[ie,re,oe]]=reactExports.useState(()=>[new Float32Array(J*3),Float32Array.from({length:J*3},()=>1),Float32Array.from({length:J},()=>1)]);reactExports.useEffect(()=>{ee.current.geometry.attributes.position.needsUpdate=!0}),useFrame(()=>{for(ee.current.updateMatrix(),ee.current.updateMatrixWorld(),parentMatrix.copy(ee.current.matrixWorld).invert(),ee.current.geometry.drawRange.count=Math.min(J,_!==void 0?_:J,te.length),i=0;i<te.length;i++)positionRef=te[i].current,positionRef.getWorldPosition(position).applyMatrix4(parentMatrix),position.toArray(ie,i*3),ee.current.geometry.attributes.position.needsUpdate=!0,positionRef.matrixWorldNeedsUpdate=!0,positionRef.color.toArray(re,i*3),ee.current.geometry.attributes.color.needsUpdate=!0,oe.set([positionRef.size],i),ee.current.geometry.attributes.size.needsUpdate=!0});const se=reactExports.useMemo(()=>({getParent:()=>ee,subscribe:ae=>(ne(ce=>[...ce,ae]),()=>ne(ce=>ce.filter(ue=>ue.current!==ae.current)))}),[]);return reactExports.createElement("points",_extends({userData:{instances:te},matrixAutoUpdate:!1,ref:ee,raycast:()=>null},Z),reactExports.createElement("bufferGeometry",null,reactExports.createElement("bufferAttribute",{attach:"attributes-position",args:[ie,3],usage:DynamicDrawUsage}),reactExports.createElement("bufferAttribute",{attach:"attributes-color",args:[re,3],usage:DynamicDrawUsage}),reactExports.createElement("bufferAttribute",{attach:"attributes-size",args:[oe,1],usage:DynamicDrawUsage})),reactExports.createElement(context.Provider,{value:se},G))}),Point=reactExports.forwardRef(({children:G,..._},J)=>{reactExports.useMemo(()=>extend({PositionPoint}),[]);const Z=reactExports.useRef(null);reactExports.useImperativeHandle(J,()=>Z.current,[]);const{subscribe:Q,getParent:ee}=reactExports.useContext(context);return reactExports.useLayoutEffect(()=>Q(Z),[]),reactExports.createElement("positionPoint",_extends({instance:ee(),instanceKey:Z,ref:Z},_),G)}),PointsBuffer=reactExports.forwardRef(({children:G,positions:_,colors:J,sizes:Z,stride:Q=3,...ee},te)=>{const ne=reactExports.useRef(null);return reactExports.useImperativeHandle(te,()=>ne.current,[]),useFrame(()=>{const ie=ne.current.geometry.attributes;ie.position.needsUpdate=!0,J&&(ie.color.needsUpdate=!0),Z&&(ie.size.needsUpdate=!0)}),reactExports.createElement("points",_extends({ref:ne},ee),reactExports.createElement("bufferGeometry",null,reactExports.createElement("bufferAttribute",{attach:"attributes-position",args:[_,Q],usage:DynamicDrawUsage}),J&&reactExports.createElement("bufferAttribute",{attach:"attributes-color",args:[J,Q],count:J.length/Q,usage:DynamicDrawUsage}),Z&&reactExports.createElement("bufferAttribute",{attach:"attributes-size",args:[Z,1],count:Z.length/Q,usage:DynamicDrawUsage})),G)}),Points=reactExports.forwardRef((G,_)=>G.positions instanceof Float32Array?reactExports.createElement(PointsBuffer,_extends({},G,{ref:_})):reactExports.createElement(PointsInstances,_extends({},G,{ref:_})));var updateQueue=makeQueue(),raf=G=>schedule(G,updateQueue),writeQueue=makeQueue();raf.write=G=>schedule(G,writeQueue);var onStartQueue=makeQueue();raf.onStart=G=>schedule(G,onStartQueue);var onFrameQueue=makeQueue();raf.onFrame=G=>schedule(G,onFrameQueue);var onFinishQueue=makeQueue();raf.onFinish=G=>schedule(G,onFinishQueue);var timeouts=[];raf.setTimeout=(G,_)=>{const J=raf.now()+_,Z=()=>{const ee=timeouts.findIndex(te=>te.cancel==Z);~ee&&timeouts.splice(ee,1),pendingCount-=~ee?1:0},Q={time:J,handler:G,cancel:Z};return timeouts.splice(findTimeout(J),0,Q),pendingCount+=1,start(),Q};var findTimeout=G=>~(~timeouts.findIndex(_=>_.time>G)||~timeouts.length);raf.cancel=G=>{onStartQueue.delete(G),onFrameQueue.delete(G),onFinishQueue.delete(G),updateQueue.delete(G),writeQueue.delete(G)};raf.sync=G=>{sync=!0,raf.batchedUpdates(G),sync=!1};raf.throttle=G=>{let _;function J(){try{G(..._)}finally{_=null}}function Z(...Q){_=Q,raf.onStart(J)}return Z.handler=G,Z.cancel=()=>{onStartQueue.delete(J),_=null},Z};var nativeRaf=typeof window<"u"?window.requestAnimationFrame:(()=>{});raf.use=G=>nativeRaf=G;raf.now=typeof performance<"u"?()=>performance.now():Date.now;raf.batchedUpdates=G=>G();raf.catch=console.error;raf.frameLoop="always";raf.advance=()=>{raf.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):update()};var ts=-1,pendingCount=0,sync=!1;function schedule(G,_){sync?(_.delete(G),G(0)):(_.add(G),start())}function start(){ts<0&&(ts=0,raf.frameLoop!=="demand"&&nativeRaf(loop))}function stop(){ts=-1}function loop(){~ts&&(nativeRaf(loop),raf.batchedUpdates(update))}function update(){const G=ts;ts=raf.now();const _=findTimeout(ts);if(_&&(eachSafely(timeouts.splice(0,_),J=>J.handler()),pendingCount-=_),!pendingCount){stop();return}onStartQueue.flush(),updateQueue.flush(G?Math.min(64,ts-G):16.667),onFrameQueue.flush(),writeQueue.flush(),onFinishQueue.flush()}function makeQueue(){let G=new Set,_=G;return{add(J){pendingCount+=_==G&&!G.has(J)?1:0,G.add(J)},delete(J){return pendingCount-=_==G&&G.has(J)?1:0,G.delete(J)},flush(J){_.size&&(G=new Set,pendingCount-=_.size,eachSafely(_,Z=>Z(J)&&G.add(Z)),pendingCount+=G.size,_=G)}}}function eachSafely(G,_){G.forEach(J=>{try{_(J)}catch(Z){raf.catch(Z)}})}var __defProp=Object.defineProperty,__export=(G,_)=>{for(var J in _)__defProp(G,J,{get:_[J],enumerable:!0})},globals_exports={};__export(globals_exports,{assign:()=>assign,colors:()=>colors,createStringInterpolator:()=>createStringInterpolator,skipAnimation:()=>skipAnimation,to:()=>to,willAdvance:()=>willAdvance});function noop(){}var defineHidden=(G,_,J)=>Object.defineProperty(G,_,{value:J,writable:!0,configurable:!0}),is={arr:Array.isArray,obj:G=>!!G&&G.constructor.name==="Object",fun:G=>typeof G=="function",str:G=>typeof G=="string",num:G=>typeof G=="number",und:G=>G===void 0};function isEqual(G,_){if(is.arr(G)){if(!is.arr(_)||G.length!==_.length)return!1;for(let J=0;J<G.length;J++)if(G[J]!==_[J])return!1;return!0}return G===_}var each=(G,_)=>G.forEach(_);function eachProp(G,_,J){if(is.arr(G)){for(let Z=0;Z<G.length;Z++)_.call(J,G[Z],`${Z}`);return}for(const Z in G)G.hasOwnProperty(Z)&&_.call(J,G[Z],Z)}var toArray=G=>is.und(G)?[]:is.arr(G)?G:[G];function flush(G,_){if(G.size){const J=Array.from(G);G.clear(),each(J,_)}}var flushCalls=(G,..._)=>flush(G,J=>J(..._)),isSSR=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),createStringInterpolator,to,colors=null,skipAnimation=!1,willAdvance=noop,assign=G=>{G.to&&(to=G.to),G.now&&(raf.now=G.now),G.colors!==void 0&&(colors=G.colors),G.skipAnimation!=null&&(skipAnimation=G.skipAnimation),G.createStringInterpolator&&(createStringInterpolator=G.createStringInterpolator),G.requestAnimationFrame&&raf.use(G.requestAnimationFrame),G.batchedUpdates&&(raf.batchedUpdates=G.batchedUpdates),G.willAdvance&&(willAdvance=G.willAdvance),G.frameLoop&&(raf.frameLoop=G.frameLoop)},startQueue=new Set,currentFrame=[],prevFrame=[],priority=0,frameLoop={get idle(){return!startQueue.size&&!currentFrame.length},start(G){priority>G.priority?(startQueue.add(G),raf.onStart(flushStartQueue)):(startSafely(G),raf(advance))},advance,sort(G){if(priority)raf.onFrame(()=>frameLoop.sort(G));else{const _=currentFrame.indexOf(G);~_&&(currentFrame.splice(_,1),startUnsafely(G))}},clear(){currentFrame=[],startQueue.clear()}};function flushStartQueue(){startQueue.forEach(startSafely),startQueue.clear(),raf(advance)}function startSafely(G){currentFrame.includes(G)||startUnsafely(G)}function startUnsafely(G){currentFrame.splice(findIndex(currentFrame,_=>_.priority>G.priority),0,G)}function advance(G){const _=prevFrame;for(let J=0;J<currentFrame.length;J++){const Z=currentFrame[J];priority=Z.priority,Z.idle||(willAdvance(Z),Z.advance(G),Z.idle||_.push(Z))}return priority=0,prevFrame=currentFrame,prevFrame.length=0,currentFrame=_,currentFrame.length>0}function findIndex(G,_){const J=G.findIndex(_);return J<0?G.length:J}var colors2={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},NUMBER="[-+]?\\d*\\.?\\d+",PERCENTAGE=NUMBER+"%";function call(...G){return"\\(\\s*("+G.join(")\\s*,\\s*(")+")\\s*\\)"}var rgb=new RegExp("rgb"+call(NUMBER,NUMBER,NUMBER)),rgba=new RegExp("rgba"+call(NUMBER,NUMBER,NUMBER,NUMBER)),hsl=new RegExp("hsl"+call(NUMBER,PERCENTAGE,PERCENTAGE)),hsla=new RegExp("hsla"+call(NUMBER,PERCENTAGE,PERCENTAGE,NUMBER)),hex3=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6=/^#([0-9a-fA-F]{6})$/,hex8=/^#([0-9a-fA-F]{8})$/;function normalizeColor(G){let _;return typeof G=="number"?G>>>0===G&&G>=0&&G<=4294967295?G:null:(_=hex6.exec(G))?parseInt(_[1]+"ff",16)>>>0:colors&&colors[G]!==void 0?colors[G]:(_=rgb.exec(G))?(parse255(_[1])<<24|parse255(_[2])<<16|parse255(_[3])<<8|255)>>>0:(_=rgba.exec(G))?(parse255(_[1])<<24|parse255(_[2])<<16|parse255(_[3])<<8|parse1(_[4]))>>>0:(_=hex3.exec(G))?parseInt(_[1]+_[1]+_[2]+_[2]+_[3]+_[3]+"ff",16)>>>0:(_=hex8.exec(G))?parseInt(_[1],16)>>>0:(_=hex4.exec(G))?parseInt(_[1]+_[1]+_[2]+_[2]+_[3]+_[3]+_[4]+_[4],16)>>>0:(_=hsl.exec(G))?(hslToRgb(parse360(_[1]),parsePercentage(_[2]),parsePercentage(_[3]))|255)>>>0:(_=hsla.exec(G))?(hslToRgb(parse360(_[1]),parsePercentage(_[2]),parsePercentage(_[3]))|parse1(_[4]))>>>0:null}function hue2rgb(G,_,J){return J<0&&(J+=1),J>1&&(J-=1),J<1/6?G+(_-G)*6*J:J<1/2?_:J<2/3?G+(_-G)*(2/3-J)*6:G}function hslToRgb(G,_,J){const Z=J<.5?J*(1+_):J+_-J*_,Q=2*J-Z,ee=hue2rgb(Q,Z,G+1/3),te=hue2rgb(Q,Z,G),ne=hue2rgb(Q,Z,G-1/3);return Math.round(ee*255)<<24|Math.round(te*255)<<16|Math.round(ne*255)<<8}function parse255(G){const _=parseInt(G,10);return _<0?0:_>255?255:_}function parse360(G){return(parseFloat(G)%360+360)%360/360}function parse1(G){const _=parseFloat(G);return _<0?0:_>1?255:Math.round(_*255)}function parsePercentage(G){const _=parseFloat(G);return _<0?0:_>100?1:_/100}function colorToRgba(G){let _=normalizeColor(G);if(_===null)return G;_=_||0;const J=(_&4278190080)>>>24,Z=(_&16711680)>>>16,Q=(_&65280)>>>8,ee=(_&255)/255;return`rgba(${J}, ${Z}, ${Q}, ${ee})`}var createInterpolator=(G,_,J)=>{if(is.fun(G))return G;if(is.arr(G))return createInterpolator({range:G,output:_,extrapolate:J});if(is.str(G.output[0]))return createStringInterpolator(G);const Z=G,Q=Z.output,ee=Z.range||[0,1],te=Z.extrapolateLeft||Z.extrapolate||"extend",ne=Z.extrapolateRight||Z.extrapolate||"extend",ie=Z.easing||(re=>re);return re=>{const oe=findRange(re,ee);return interpolate(re,ee[oe],ee[oe+1],Q[oe],Q[oe+1],ie,te,ne,Z.map)}};function interpolate(G,_,J,Z,Q,ee,te,ne,ie){let re=ie?ie(G):G;if(re<_){if(te==="identity")return re;te==="clamp"&&(re=_)}if(re>J){if(ne==="identity")return re;ne==="clamp"&&(re=J)}return Z===Q?Z:_===J?G<=_?Z:Q:(_===-1/0?re=-re:J===1/0?re=re-_:re=(re-_)/(J-_),re=ee(re),Z===-1/0?re=-re:Q===1/0?re=re+Z:re=re*(Q-Z)+Z,re)}function findRange(G,_){for(var J=1;J<_.length-1&&!(_[J]>=G);++J);return J-1}var easings={linear:G=>G},$get=Symbol.for("FluidValue.get"),$observers=Symbol.for("FluidValue.observers"),hasFluidValue=G=>!!(G&&G[$get]),getFluidValue=G=>G&&G[$get]?G[$get]():G,getFluidObservers=G=>G[$observers]||null;function callFluidObserver(G,_){G.eventObserved?G.eventObserved(_):G(_)}function callFluidObservers(G,_){const J=G[$observers];J&&J.forEach(Z=>{callFluidObserver(Z,_)})}var FluidValue=class{constructor(G){if(!G&&!(G=this.get))throw Error("Unknown getter");setFluidGetter(this,G)}},setFluidGetter=(G,_)=>setHidden(G,$get,_);function addFluidObserver(G,_){if(G[$get]){let J=G[$observers];J||setHidden(G,$observers,J=new Set),J.has(_)||(J.add(_),G.observerAdded&&G.observerAdded(J.size,_))}return _}function removeFluidObserver(G,_){const J=G[$observers];if(J&&J.has(_)){const Z=J.size-1;Z?J.delete(_):G[$observers]=null,G.observerRemoved&&G.observerRemoved(Z,_)}}var setHidden=(G,_,J)=>Object.defineProperty(G,_,{value:J,writable:!0,configurable:!0}),numberRegex=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,colorRegex=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,unitRegex=new RegExp(`(${numberRegex.source})(%|[a-z]+)`,"i"),rgbaRegex=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,cssVariableRegex=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,variableToRgba=G=>{const[_,J]=parseCSSVariable(G);if(!_||isSSR())return G;const Z=window.getComputedStyle(document.documentElement).getPropertyValue(_);if(Z)return Z.trim();if(J&&J.startsWith("--")){const Q=window.getComputedStyle(document.documentElement).getPropertyValue(J);return Q||G}else{if(J&&cssVariableRegex.test(J))return variableToRgba(J);if(J)return J}return G},parseCSSVariable=G=>{const _=cssVariableRegex.exec(G);if(!_)return[,];const[,J,Z]=_;return[J,Z]},namedColorRegex,rgbaRound=(G,_,J,Z,Q)=>`rgba(${Math.round(_)}, ${Math.round(J)}, ${Math.round(Z)}, ${Q})`,createStringInterpolator2=G=>{namedColorRegex||(namedColorRegex=colors?new RegExp(`(${Object.keys(colors).join("|")})(?!\\w)`,"g"):/^\b$/);const _=G.output.map(ee=>getFluidValue(ee).replace(cssVariableRegex,variableToRgba).replace(colorRegex,colorToRgba).replace(namedColorRegex,colorToRgba)),J=_.map(ee=>ee.match(numberRegex).map(Number)),Q=J[0].map((ee,te)=>J.map(ne=>{if(!(te in ne))throw Error('The arity of each "output" value must be equal');return ne[te]})).map(ee=>createInterpolator({...G,output:ee}));return ee=>{const te=!unitRegex.test(_[0])&&_.find(ie=>unitRegex.test(ie))?.replace(numberRegex,"");let ne=0;return _[0].replace(numberRegex,()=>`${Q[ne++](ee)}${te||""}`).replace(rgbaRegex,rgbaRound)}},prefix="react-spring: ",once=G=>{const _=G;let J=!1;if(typeof _!="function")throw new TypeError(`${prefix}once requires a function parameter`);return(...Z)=>{J||(_(...Z),J=!0)}},warnInterpolate=once(console.warn);function deprecateInterpolate(){warnInterpolate(`${prefix}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var warnDirectCall=once(console.warn);function deprecateDirectCall(){warnDirectCall(`${prefix}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function isAnimatedString(G){return is.str(G)&&(G[0]=="#"||/\d/.test(G)||!isSSR()&&cssVariableRegex.test(G)||G in(colors||{}))}var useIsomorphicLayoutEffect=isSSR()?reactExports.useEffect:reactExports.useLayoutEffect,useIsMounted=()=>{const G=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>(G.current=!0,()=>{G.current=!1}),[]),G};function useForceUpdate(){const G=reactExports.useState()[1],_=useIsMounted();return()=>{_.current&&G(Math.random())}}var useOnce=G=>reactExports.useEffect(G,emptyDeps),emptyDeps=[];function usePrev(G){const _=reactExports.useRef(void 0);return reactExports.useEffect(()=>{_.current=G}),_.current}var $node=Symbol.for("Animated:node"),isAnimated=G=>!!G&&G[$node]===G,getAnimated=G=>G&&G[$node],setAnimated=(G,_)=>defineHidden(G,$node,_),getPayload=G=>G&&G[$node]&&G[$node].getPayload(),Animated=class{constructor(){setAnimated(this,this)}getPayload(){return this.payload||[]}},AnimatedValue=class V0 extends Animated{constructor(_){super(),this._value=_,this.done=!0,this.durationProgress=0,is.num(this._value)&&(this.lastPosition=this._value)}static create(_){return new V0(_)}getPayload(){return[this]}getValue(){return this._value}setValue(_,J){return is.num(_)&&(this.lastPosition=_,J&&(_=Math.round(_/J)*J,this.done&&(this.lastPosition=_))),this._value===_?!1:(this._value=_,!0)}reset(){const{done:_}=this;this.done=!1,is.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,_&&(this.lastVelocity=null),this.v0=null)}},AnimatedString=class j0 extends AnimatedValue{constructor(_){super(0),this._string=null,this._toString=createInterpolator({output:[_,_]})}static create(_){return new j0(_)}getValue(){const _=this._string;return _??(this._string=this._toString(this._value))}setValue(_){if(is.str(_)){if(_==this._string)return!1;this._string=_,this._value=1}else if(super.setValue(_))this._string=null;else return!1;return!0}reset(_){_&&(this._toString=createInterpolator({output:[this.getValue(),_]})),this._value=0,super.reset()}},TreeContext={dependencies:null},AnimatedObject=class extends Animated{constructor(G){super(),this.source=G,this.setValue(G)}getValue(G){const _={};return eachProp(this.source,(J,Z)=>{isAnimated(J)?_[Z]=J.getValue(G):hasFluidValue(J)?_[Z]=getFluidValue(J):G||(_[Z]=J)}),_}setValue(G){this.source=G,this.payload=this._makePayload(G)}reset(){this.payload&&each(this.payload,G=>G.reset())}_makePayload(G){if(G){const _=new Set;return eachProp(G,this._addToPayload,_),Array.from(_)}}_addToPayload(G){TreeContext.dependencies&&hasFluidValue(G)&&TreeContext.dependencies.add(G);const _=getPayload(G);_&&each(_,J=>this.add(J))}},AnimatedArray=class G0 extends AnimatedObject{constructor(_){super(_)}static create(_){return new G0(_)}getValue(){return this.source.map(_=>_.getValue())}setValue(_){const J=this.getPayload();return _.length==J.length?J.map((Z,Q)=>Z.setValue(_[Q])).some(Boolean):(super.setValue(_.map(makeAnimated)),!0)}};function makeAnimated(G){return(isAnimatedString(G)?AnimatedString:AnimatedValue).create(G)}function getAnimatedType(G){const _=getAnimated(G);return _?_.constructor:is.arr(G)?AnimatedArray:isAnimatedString(G)?AnimatedString:AnimatedValue}var withAnimated=(G,_)=>{const J=!is.fun(G)||G.prototype&&G.prototype.isReactComponent;return reactExports.forwardRef((Z,Q)=>{const ee=reactExports.useRef(null),te=J&&reactExports.useCallback(ue=>{ee.current=updateRef(Q,ue)},[Q]),[ne,ie]=getAnimatedState(Z,_),re=useForceUpdate(),oe=()=>{const ue=ee.current;if(J&&!ue)return;(ue?_.applyAnimatedValues(ue,ne.getValue(!0)):!1)===!1&&re()},se=new PropsObserver(oe,ie),ae=reactExports.useRef(void 0);useIsomorphicLayoutEffect(()=>(ae.current=se,each(ie,ue=>addFluidObserver(ue,se)),()=>{ae.current&&(each(ae.current.deps,ue=>removeFluidObserver(ue,ae.current)),raf.cancel(ae.current.update))})),reactExports.useEffect(oe,[]),useOnce(()=>()=>{const ue=ae.current;each(ue.deps,de=>removeFluidObserver(de,ue))});const ce=_.getComponentProps(ne.getValue());return reactExports.createElement(G,{...ce,ref:te})})},PropsObserver=class{constructor(G,_){this.update=G,this.deps=_}eventObserved(G){G.type=="change"&&raf.write(this.update)}};function getAnimatedState(G,_){const J=new Set;return TreeContext.dependencies=J,G.style&&(G={...G,style:_.createAnimatedStyle(G.style)}),G=new AnimatedObject(G),TreeContext.dependencies=null,[G,J]}function updateRef(G,_){return G&&(is.fun(G)?G(_):G.current=_),_}var cacheKey=Symbol.for("AnimatedComponent"),createHost=(G,{applyAnimatedValues:_=()=>!1,createAnimatedStyle:J=Q=>new AnimatedObject(Q),getComponentProps:Z=Q=>Q}={})=>{const Q={applyAnimatedValues:_,createAnimatedStyle:J,getComponentProps:Z},ee=te=>{const ne=getDisplayName(te)||"Anonymous";return is.str(te)?te=ee[te]||(ee[te]=withAnimated(te,Q)):te=te[cacheKey]||(te[cacheKey]=withAnimated(te,Q)),te.displayName=`Animated(${ne})`,te};return eachProp(G,(te,ne)=>{is.arr(G)&&(ne=getDisplayName(te)),ee[ne]=ee(te)}),{animated:ee}},getDisplayName=G=>is.str(G)?G:G&&is.str(G.displayName)?G.displayName:is.fun(G)&&G.name||null;function callProp(G,..._){return is.fun(G)?G(..._):G}var matchProp=(G,_)=>G===!0||!!(_&&G&&(is.fun(G)?G(_):toArray(G).includes(_))),resolveProp=(G,_)=>is.obj(G)?_&&G[_]:G,getDefaultProp=(G,_)=>G.default===!0?G[_]:G.default?G.default[_]:void 0,noopTransform=G=>G,getDefaultProps=(G,_=noopTransform)=>{let J=DEFAULT_PROPS;G.default&&G.default!==!0&&(G=G.default,J=Object.keys(G));const Z={};for(const Q of J){const ee=_(G[Q],Q);is.und(ee)||(Z[Q]=ee)}return Z},DEFAULT_PROPS=["config","onProps","onStart","onChange","onPause","onResume","onRest"],RESERVED_PROPS={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function getForwardProps(G){const _={};let J=0;if(eachProp(G,(Z,Q)=>{RESERVED_PROPS[Q]||(_[Q]=Z,J++)}),J)return _}function inferTo(G){const _=getForwardProps(G);if(_){const J={to:_};return eachProp(G,(Z,Q)=>Q in _||(J[Q]=Z)),J}return{...G}}function computeGoal(G){return G=getFluidValue(G),is.arr(G)?G.map(computeGoal):isAnimatedString(G)?globals_exports.createStringInterpolator({range:[0,1],output:[G,G]})(1):G}function hasProps(G){for(const _ in G)return!0;return!1}function isAsyncTo(G){return is.fun(G)||is.arr(G)&&is.obj(G[0])}function detachRefs(G,_){G.ref?.delete(G),_?.delete(G)}function replaceRef(G,_){_&&G.ref!==_&&(G.ref?.delete(G),_.add(G),G.ref=_)}var config={default:{tension:170,friction:26}},defaults={...config.default,mass:1,damping:1,easing:easings.linear,clamp:!1},AnimationConfig=class{constructor(){this.velocity=0,Object.assign(this,defaults)}};function mergeConfig(G,_,J){J&&(J={...J},sanitizeConfig(J,_),_={...J,..._}),sanitizeConfig(G,_),Object.assign(G,_);for(const te in defaults)G[te]==null&&(G[te]=defaults[te]);let{frequency:Z,damping:Q}=G;const{mass:ee}=G;return is.und(Z)||(Z<.01&&(Z=.01),Q<0&&(Q=0),G.tension=Math.pow(2*Math.PI/Z,2)*ee,G.friction=4*Math.PI*Q*ee/Z),G}function sanitizeConfig(G,_){if(!is.und(_.decay))G.duration=void 0;else{const J=!is.und(_.tension)||!is.und(_.friction);(J||!is.und(_.frequency)||!is.und(_.damping)||!is.und(_.mass))&&(G.duration=void 0,G.decay=void 0),J&&(G.frequency=void 0)}}var emptyArray=[],Animation=class{constructor(){this.changed=!1,this.values=emptyArray,this.toValues=null,this.fromValues=emptyArray,this.config=new AnimationConfig,this.immediate=!1}};function scheduleProps(G,{key:_,props:J,defaultProps:Z,state:Q,actions:ee}){return new Promise((te,ne)=>{let ie,re,oe=matchProp(J.cancel??Z?.cancel,_);if(oe)ce();else{is.und(J.pause)||(Q.paused=matchProp(J.pause,_));let ue=Z?.pause;ue!==!0&&(ue=Q.paused||matchProp(ue,_)),ie=callProp(J.delay||0,_),ue?(Q.resumeQueue.add(ae),ee.pause()):(ee.resume(),ae())}function se(){Q.resumeQueue.add(ae),Q.timeouts.delete(re),re.cancel(),ie=re.time-raf.now()}function ae(){ie>0&&!globals_exports.skipAnimation?(Q.delayed=!0,re=raf.setTimeout(ce,ie),Q.pauseQueue.add(se),Q.timeouts.add(re)):ce()}function ce(){Q.delayed&&(Q.delayed=!1),Q.pauseQueue.delete(se),Q.timeouts.delete(re),G<=(Q.cancelId||0)&&(oe=!0);try{ee.start({...J,callId:G,cancel:oe},te)}catch(ue){ne(ue)}}})}var getCombinedResult=(G,_)=>_.length==1?_[0]:_.some(J=>J.cancelled)?getCancelledResult(G.get()):_.every(J=>J.noop)?getNoopResult(G.get()):getFinishedResult(G.get(),_.every(J=>J.finished)),getNoopResult=G=>({value:G,noop:!0,finished:!0,cancelled:!1}),getFinishedResult=(G,_,J=!1)=>({value:G,finished:_,cancelled:J}),getCancelledResult=G=>({value:G,cancelled:!0,finished:!1});function runAsync(G,_,J,Z){const{callId:Q,parentId:ee,onRest:te}=_,{asyncTo:ne,promise:ie}=J;return!ee&&G===ne&&!_.reset?ie:J.promise=(async()=>{J.asyncId=Q,J.asyncTo=G;const re=getDefaultProps(_,(me,fe)=>fe==="onRest"?void 0:me);let oe,se;const ae=new Promise((me,fe)=>(oe=me,se=fe)),ce=me=>{const fe=Q<=(J.cancelId||0)&&getCancelledResult(Z)||Q!==J.asyncId&&getFinishedResult(Z,!1);if(fe)throw me.result=fe,se(me),me},ue=(me,fe)=>{const _e=new BailSignal,ye=new SkipAnimationSignal;return(async()=>{if(globals_exports.skipAnimation)throw stopAsync(J),ye.result=getFinishedResult(Z,!1),se(ye),ye;ce(_e);const be=is.obj(me)?{...me}:{...fe,to:me};be.parentId=Q,eachProp(re,(Ce,Me)=>{is.und(be[Me])&&(be[Me]=Ce)});const Se=await Z.start(be);return ce(_e),J.paused&&await new Promise(Ce=>{J.resumeQueue.add(Ce)}),Se})()};let de;if(globals_exports.skipAnimation)return stopAsync(J),getFinishedResult(Z,!1);try{let me;is.arr(G)?me=(async fe=>{for(const _e of fe)await ue(_e)})(G):me=Promise.resolve(G(ue,Z.stop.bind(Z))),await Promise.all([me.then(oe),ae]),de=getFinishedResult(Z.get(),!0,!1)}catch(me){if(me instanceof BailSignal)de=me.result;else if(me instanceof SkipAnimationSignal)de=me.result;else throw me}finally{Q==J.asyncId&&(J.asyncId=ee,J.asyncTo=ee?ne:void 0,J.promise=ee?ie:void 0)}return is.fun(te)&&raf.batchedUpdates(()=>{te(de,Z,Z.item)}),de})()}function stopAsync(G,_){flush(G.timeouts,J=>J.cancel()),G.pauseQueue.clear(),G.resumeQueue.clear(),G.asyncId=G.asyncTo=G.promise=void 0,_&&(G.cancelId=_)}var BailSignal=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},SkipAnimationSignal=class extends Error{constructor(){super("SkipAnimationSignal")}},isFrameValue=G=>G instanceof FrameValue,nextId=1,FrameValue=class extends FluidValue{constructor(){super(...arguments),this.id=nextId++,this._priority=0}get priority(){return this._priority}set priority(G){this._priority!=G&&(this._priority=G,this._onPriorityChange(G))}get(){const G=getAnimated(this);return G&&G.getValue()}to(...G){return globals_exports.to(this,G)}interpolate(...G){return deprecateInterpolate(),globals_exports.to(this,G)}toJSON(){return this.get()}observerAdded(G){G==1&&this._attach()}observerRemoved(G){G==0&&this._detach()}_attach(){}_detach(){}_onChange(G,_=!1){callFluidObservers(this,{type:"change",parent:this,value:G,idle:_})}_onPriorityChange(G){this.idle||frameLoop.sort(this),callFluidObservers(this,{type:"priority",parent:this,priority:G})}},$P=Symbol.for("SpringPhase"),HAS_ANIMATED=1,IS_ANIMATING=2,IS_PAUSED=4,hasAnimated=G=>(G[$P]&HAS_ANIMATED)>0,isAnimating=G=>(G[$P]&IS_ANIMATING)>0,isPaused=G=>(G[$P]&IS_PAUSED)>0,setActiveBit=(G,_)=>_?G[$P]|=IS_ANIMATING|HAS_ANIMATED:G[$P]&=~IS_ANIMATING,setPausedBit=(G,_)=>_?G[$P]|=IS_PAUSED:G[$P]&=~IS_PAUSED,SpringValue=class extends FrameValue{constructor(G,_){if(super(),this.animation=new Animation,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!is.und(G)||!is.und(_)){const J=is.obj(G)?{...G}:{..._,from:G};is.und(J.default)&&(J.default=!0),this.start(J)}}get idle(){return!(isAnimating(this)||this._state.asyncTo)||isPaused(this)}get goal(){return getFluidValue(this.animation.to)}get velocity(){const G=getAnimated(this);return G instanceof AnimatedValue?G.lastVelocity||0:G.getPayload().map(_=>_.lastVelocity||0)}get hasAnimated(){return hasAnimated(this)}get isAnimating(){return isAnimating(this)}get isPaused(){return isPaused(this)}get isDelayed(){return this._state.delayed}advance(G){let _=!0,J=!1;const Z=this.animation;let{toValues:Q}=Z;const{config:ee}=Z,te=getPayload(Z.to);!te&&hasFluidValue(Z.to)&&(Q=toArray(getFluidValue(Z.to))),Z.values.forEach((re,oe)=>{if(re.done)return;const se=re.constructor==AnimatedString?1:te?te[oe].lastPosition:Q[oe];let ae=Z.immediate,ce=se;if(!ae){if(ce=re.lastPosition,ee.tension<=0){re.done=!0;return}let ue=re.elapsedTime+=G;const de=Z.fromValues[oe],me=re.v0!=null?re.v0:re.v0=is.arr(ee.velocity)?ee.velocity[oe]:ee.velocity;let fe;const _e=ee.precision||(de==se?.005:Math.min(1,Math.abs(se-de)*.001));if(is.und(ee.duration))if(ee.decay){const ye=ee.decay===!0?.998:ee.decay,be=Math.exp(-(1-ye)*ue);ce=de+me/(1-ye)*(1-be),ae=Math.abs(re.lastPosition-ce)<=_e,fe=me*be}else{fe=re.lastVelocity==null?me:re.lastVelocity;const ye=ee.restVelocity||_e/10,be=ee.clamp?0:ee.bounce,Se=!is.und(be),Ce=de==se?re.v0>0:de<se;let Me,Re=!1;const Te=1,Ee=Math.ceil(G/Te);for(let De=0;De<Ee&&(Me=Math.abs(fe)>ye,!(!Me&&(ae=Math.abs(se-ce)<=_e,ae)));++De){Se&&(Re=ce==se||ce>se==Ce,Re&&(fe=-fe*be,ce=se));const Le=-ee.tension*1e-6*(ce-se),Ue=-ee.friction*.001*fe,Ge=(Le+Ue)/ee.mass;fe=fe+Ge*Te,ce=ce+fe*Te}}else{let ye=1;ee.duration>0&&(this._memoizedDuration!==ee.duration&&(this._memoizedDuration=ee.duration,re.durationProgress>0&&(re.elapsedTime=ee.duration*re.durationProgress,ue=re.elapsedTime+=G)),ye=(ee.progress||0)+ue/this._memoizedDuration,ye=ye>1?1:ye<0?0:ye,re.durationProgress=ye),ce=de+ee.easing(ye)*(se-de),fe=(ce-re.lastPosition)/G,ae=ye==1}re.lastVelocity=fe,Number.isNaN(ce)&&(console.warn("Got NaN while animating:",this),ae=!0)}te&&!te[oe].done&&(ae=!1),ae?re.done=!0:_=!1,re.setValue(ce,ee.round)&&(J=!0)});const ne=getAnimated(this),ie=ne.getValue();if(_){const re=getFluidValue(Z.to);(ie!==re||J)&&!ee.decay?(ne.setValue(re),this._onChange(re)):J&&ee.decay&&this._onChange(ie),this._stop()}else J&&this._onChange(ie)}set(G){return raf.batchedUpdates(()=>{this._stop(),this._focus(G),this._set(G)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(isAnimating(this)){const{to:G,config:_}=this.animation;raf.batchedUpdates(()=>{this._onStart(),_.decay||this._set(G,!1),this._stop()})}return this}update(G){return(this.queue||(this.queue=[])).push(G),this}start(G,_){let J;return is.und(G)?(J=this.queue||[],this.queue=[]):J=[is.obj(G)?G:{..._,to:G}],Promise.all(J.map(Z=>this._update(Z))).then(Z=>getCombinedResult(this,Z))}stop(G){const{to:_}=this.animation;return this._focus(this.get()),stopAsync(this._state,G&&this._lastCallId),raf.batchedUpdates(()=>this._stop(_,G)),this}reset(){this._update({reset:!0})}eventObserved(G){G.type=="change"?this._start():G.type=="priority"&&(this.priority=G.priority+1)}_prepareNode(G){const _=this.key||"";let{to:J,from:Z}=G;J=is.obj(J)?J[_]:J,(J==null||isAsyncTo(J))&&(J=void 0),Z=is.obj(Z)?Z[_]:Z,Z==null&&(Z=void 0);const Q={to:J,from:Z};return hasAnimated(this)||(G.reverse&&([J,Z]=[Z,J]),Z=getFluidValue(Z),is.und(Z)?getAnimated(this)||this._set(J):this._set(Z)),Q}_update({...G},_){const{key:J,defaultProps:Z}=this;G.default&&Object.assign(Z,getDefaultProps(G,(te,ne)=>/^on/.test(ne)?resolveProp(te,J):te)),mergeActiveFn(this,G,"onProps"),sendEvent(this,"onProps",G,this);const Q=this._prepareNode(G);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const ee=this._state;return scheduleProps(++this._lastCallId,{key:J,props:G,defaultProps:Z,state:ee,actions:{pause:()=>{isPaused(this)||(setPausedBit(this,!0),flushCalls(ee.pauseQueue),sendEvent(this,"onPause",getFinishedResult(this,checkFinished(this,this.animation.to)),this))},resume:()=>{isPaused(this)&&(setPausedBit(this,!1),isAnimating(this)&&this._resume(),flushCalls(ee.resumeQueue),sendEvent(this,"onResume",getFinishedResult(this,checkFinished(this,this.animation.to)),this))},start:this._merge.bind(this,Q)}}).then(te=>{if(G.loop&&te.finished&&!(_&&te.noop)){const ne=createLoopUpdate(G);if(ne)return this._update(ne,!0)}return te})}_merge(G,_,J){if(_.cancel)return this.stop(!0),J(getCancelledResult(this));const Z=!is.und(G.to),Q=!is.und(G.from);if(Z||Q)if(_.callId>this._lastToId)this._lastToId=_.callId;else return J(getCancelledResult(this));const{key:ee,defaultProps:te,animation:ne}=this,{to:ie,from:re}=ne;let{to:oe=ie,from:se=re}=G;Q&&!Z&&(!_.default||is.und(oe))&&(oe=se),_.reverse&&([oe,se]=[se,oe]);const ae=!isEqual(se,re);ae&&(ne.from=se),se=getFluidValue(se);const ce=!isEqual(oe,ie);ce&&this._focus(oe);const ue=isAsyncTo(_.to),{config:de}=ne,{decay:me,velocity:fe}=de;(Z||Q)&&(de.velocity=0),_.config&&!ue&&mergeConfig(de,callProp(_.config,ee),_.config!==te.config?callProp(te.config,ee):void 0);let _e=getAnimated(this);if(!_e||is.und(oe))return J(getFinishedResult(this,!0));const ye=is.und(_.reset)?Q&&!_.default:!is.und(se)&&matchProp(_.reset,ee),be=ye?se:this.get(),Se=computeGoal(oe),Ce=is.num(Se)||is.arr(Se)||isAnimatedString(Se),Me=!ue&&(!Ce||matchProp(te.immediate||_.immediate,ee));if(ce){const De=getAnimatedType(oe);if(De!==_e.constructor)if(Me)_e=this._set(Se);else throw Error(`Cannot animate between ${_e.constructor.name} and ${De.name}, as the "to" prop suggests`)}const Re=_e.constructor;let Te=hasFluidValue(oe),Ee=!1;if(!Te){const De=ye||!hasAnimated(this)&&ae;(ce||De)&&(Ee=isEqual(computeGoal(be),Se),Te=!Ee),(!isEqual(ne.immediate,Me)&&!Me||!isEqual(de.decay,me)||!isEqual(de.velocity,fe))&&(Te=!0)}if(Ee&&isAnimating(this)&&(ne.changed&&!ye?Te=!0:Te||this._stop(ie)),!ue&&((Te||hasFluidValue(ie))&&(ne.values=_e.getPayload(),ne.toValues=hasFluidValue(oe)?null:Re==AnimatedString?[1]:toArray(Se)),ne.immediate!=Me&&(ne.immediate=Me,!Me&&!ye&&this._set(ie)),Te)){const{onRest:De}=ne;each(ACTIVE_EVENTS,Ue=>mergeActiveFn(this,_,Ue));const Le=getFinishedResult(this,checkFinished(this,ie));flushCalls(this._pendingCalls,Le),this._pendingCalls.add(J),ne.changed&&raf.batchedUpdates(()=>{ne.changed=!ye,De?.(Le,this),ye?callProp(te.onRest,Le):ne.onStart?.(Le,this)})}ye&&this._set(be),ue?J(runAsync(_.to,_,this._state,this)):Te?this._start():isAnimating(this)&&!ce?this._pendingCalls.add(J):J(getNoopResult(be))}_focus(G){const _=this.animation;G!==_.to&&(getFluidObservers(this)&&this._detach(),_.to=G,getFluidObservers(this)&&this._attach())}_attach(){let G=0;const{to:_}=this.animation;hasFluidValue(_)&&(addFluidObserver(_,this),isFrameValue(_)&&(G=_.priority+1)),this.priority=G}_detach(){const{to:G}=this.animation;hasFluidValue(G)&&removeFluidObserver(G,this)}_set(G,_=!0){const J=getFluidValue(G);if(!is.und(J)){const Z=getAnimated(this);if(!Z||!isEqual(J,Z.getValue())){const Q=getAnimatedType(J);!Z||Z.constructor!=Q?setAnimated(this,Q.create(J)):Z.setValue(J),Z&&raf.batchedUpdates(()=>{this._onChange(J,_)})}}return getAnimated(this)}_onStart(){const G=this.animation;G.changed||(G.changed=!0,sendEvent(this,"onStart",getFinishedResult(this,checkFinished(this,G.to)),this))}_onChange(G,_){_||(this._onStart(),callProp(this.animation.onChange,G,this)),callProp(this.defaultProps.onChange,G,this),super._onChange(G,_)}_start(){const G=this.animation;getAnimated(this).reset(getFluidValue(G.to)),G.immediate||(G.fromValues=G.values.map(_=>_.lastPosition)),isAnimating(this)||(setActiveBit(this,!0),isPaused(this)||this._resume())}_resume(){globals_exports.skipAnimation?this.finish():frameLoop.start(this)}_stop(G,_){if(isAnimating(this)){setActiveBit(this,!1);const J=this.animation;each(J.values,Q=>{Q.done=!0}),J.toValues&&(J.onChange=J.onPause=J.onResume=void 0),callFluidObservers(this,{type:"idle",parent:this});const Z=_?getCancelledResult(this.get()):getFinishedResult(this.get(),checkFinished(this,G??J.to));flushCalls(this._pendingCalls,Z),J.changed&&(J.changed=!1,sendEvent(this,"onRest",Z,this))}}};function checkFinished(G,_){const J=computeGoal(_),Z=computeGoal(G.get());return isEqual(Z,J)}function createLoopUpdate(G,_=G.loop,J=G.to){const Z=callProp(_);if(Z){const Q=Z!==!0&&inferTo(Z),ee=(Q||G).reverse,te=!Q||Q.reset;return createUpdate({...G,loop:_,default:!1,pause:void 0,to:!ee||isAsyncTo(J)?J:void 0,from:te?G.from:void 0,reset:te,...Q})}}function createUpdate(G){const{to:_,from:J}=G=inferTo(G),Z=new Set;return is.obj(_)&&findDefined(_,Z),is.obj(J)&&findDefined(J,Z),G.keys=Z.size?Array.from(Z):null,G}function declareUpdate(G){const _=createUpdate(G);return is.und(_.default)&&(_.default=getDefaultProps(_)),_}function findDefined(G,_){eachProp(G,(J,Z)=>J!=null&&_.add(Z))}var ACTIVE_EVENTS=["onStart","onRest","onChange","onPause","onResume"];function mergeActiveFn(G,_,J){G.animation[J]=_[J]!==getDefaultProp(_,J)?resolveProp(_[J],G.key):void 0}function sendEvent(G,_,...J){G.animation[_]?.(...J),G.defaultProps[_]?.(...J)}var BATCHED_EVENTS=["onStart","onChange","onRest"],nextId2=1,Controller=class{constructor(G,_){this.id=nextId2++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),_&&(this._flush=_),G&&this.start({default:!0,...G})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(G=>G.idle&&!G.isDelayed&&!G.isPaused)}get item(){return this._item}set item(G){this._item=G}get(){const G={};return this.each((_,J)=>G[J]=_.get()),G}set(G){for(const _ in G){const J=G[_];is.und(J)||this.springs[_].set(J)}}update(G){return G&&this.queue.push(createUpdate(G)),this}start(G){let{queue:_}=this;return G?_=toArray(G).map(createUpdate):this.queue=[],this._flush?this._flush(this,_):(prepareKeys(this,_),flushUpdateQueue(this,_))}stop(G,_){if(G!==!!G&&(_=G),_){const J=this.springs;each(toArray(_),Z=>J[Z].stop(!!G))}else stopAsync(this._state,this._lastAsyncId),this.each(J=>J.stop(!!G));return this}pause(G){if(is.und(G))this.start({pause:!0});else{const _=this.springs;each(toArray(G),J=>_[J].pause())}return this}resume(G){if(is.und(G))this.start({pause:!1});else{const _=this.springs;each(toArray(G),J=>_[J].resume())}return this}each(G){eachProp(this.springs,G)}_onFrame(){const{onStart:G,onChange:_,onRest:J}=this._events,Z=this._active.size>0,Q=this._changed.size>0;(Z&&!this._started||Q&&!this._started)&&(this._started=!0,flush(G,([ne,ie])=>{ie.value=this.get(),ne(ie,this,this._item)}));const ee=!Z&&this._started,te=Q||ee&&J.size?this.get():null;Q&&_.size&&flush(_,([ne,ie])=>{ie.value=te,ne(ie,this,this._item)}),ee&&(this._started=!1,flush(J,([ne,ie])=>{ie.value=te,ne(ie,this,this._item)}))}eventObserved(G){if(G.type=="change")this._changed.add(G.parent),G.idle||this._active.add(G.parent);else if(G.type=="idle")this._active.delete(G.parent);else return;raf.onFrame(this._onFrame)}};function flushUpdateQueue(G,_){return Promise.all(_.map(J=>flushUpdate(G,J))).then(J=>getCombinedResult(G,J))}async function flushUpdate(G,_,J){const{keys:Z,to:Q,from:ee,loop:te,onRest:ne,onResolve:ie}=_,re=is.obj(_.default)&&_.default;te&&(_.loop=!1),Q===!1&&(_.to=null),ee===!1&&(_.from=null);const oe=is.arr(Q)||is.fun(Q)?Q:void 0;oe?(_.to=void 0,_.onRest=void 0,re&&(re.onRest=void 0)):each(BATCHED_EVENTS,de=>{const me=_[de];if(is.fun(me)){const fe=G._events[de];_[de]=({finished:_e,cancelled:ye})=>{const be=fe.get(me);be?(_e||(be.finished=!1),ye&&(be.cancelled=!0)):fe.set(me,{value:null,finished:_e||!1,cancelled:ye||!1})},re&&(re[de]=_[de])}});const se=G._state;_.pause===!se.paused?(se.paused=_.pause,flushCalls(_.pause?se.pauseQueue:se.resumeQueue)):se.paused&&(_.pause=!0);const ae=(Z||Object.keys(G.springs)).map(de=>G.springs[de].start(_)),ce=_.cancel===!0||getDefaultProp(_,"cancel")===!0;(oe||ce&&se.asyncId)&&ae.push(scheduleProps(++G._lastAsyncId,{props:_,state:se,actions:{pause:noop,resume:noop,start(de,me){ce?(stopAsync(se,G._lastAsyncId),me(getCancelledResult(G))):(de.onRest=ne,me(runAsync(oe,de,se,G)))}}})),se.paused&&await new Promise(de=>{se.resumeQueue.add(de)});const ue=getCombinedResult(G,await Promise.all(ae));if(te&&ue.finished&&!(J&&ue.noop)){const de=createLoopUpdate(_,te,Q);if(de)return prepareKeys(G,[de]),flushUpdate(G,de,!0)}return ie&&raf.batchedUpdates(()=>ie(ue,G,G.item)),ue}function getSprings(G,_){const J={...G.springs};return _&&each(toArray(_),Z=>{is.und(Z.keys)&&(Z=createUpdate(Z)),is.obj(Z.to)||(Z={...Z,to:void 0}),prepareSprings(J,Z,Q=>createSpring(Q))}),setSprings(G,J),J}function setSprings(G,_){eachProp(_,(J,Z)=>{G.springs[Z]||(G.springs[Z]=J,addFluidObserver(J,G))})}function createSpring(G,_){const J=new SpringValue;return J.key=G,_&&addFluidObserver(J,_),J}function prepareSprings(G,_,J){_.keys&&each(_.keys,Z=>{(G[Z]||(G[Z]=J(Z)))._prepareNode(_)})}function prepareKeys(G,_){each(_,J=>{prepareSprings(G.springs,J,Z=>createSpring(Z,G))})}var SpringContext=reactExports.createContext({pause:!1,immediate:!1}),SpringRef=()=>{const G=[],_=function(Z){deprecateDirectCall();const Q=[];return each(G,(ee,te)=>{if(is.und(Z))Q.push(ee.start());else{const ne=J(Z,ee,te);ne&&Q.push(ee.start(ne))}}),Q};_.current=G,_.add=function(Z){G.includes(Z)||G.push(Z)},_.delete=function(Z){const Q=G.indexOf(Z);~Q&&G.splice(Q,1)},_.pause=function(){return each(G,Z=>Z.pause(...arguments)),this},_.resume=function(){return each(G,Z=>Z.resume(...arguments)),this},_.set=function(Z){each(G,(Q,ee)=>{const te=is.fun(Z)?Z(ee,Q):Z;te&&Q.set(te)})},_.start=function(Z){const Q=[];return each(G,(ee,te)=>{if(is.und(Z))Q.push(ee.start());else{const ne=this._getProps(Z,ee,te);ne&&Q.push(ee.start(ne))}}),Q},_.stop=function(){return each(G,Z=>Z.stop(...arguments)),this},_.update=function(Z){return each(G,(Q,ee)=>Q.update(this._getProps(Z,Q,ee))),this};const J=function(Z,Q,ee){return is.fun(Z)?Z(ee,Q):Z};return _._getProps=J,_};function useSprings(G,_,J){const Z=is.fun(_)&&_;Z&&!J&&(J=[]);const Q=reactExports.useMemo(()=>Z||arguments.length==3?SpringRef():void 0,[]),ee=reactExports.useRef(0),te=useForceUpdate(),ne=reactExports.useMemo(()=>({ctrls:[],queue:[],flush(fe,_e){const ye=getSprings(fe,_e);return ee.current>0&&!ne.queue.length&&!Object.keys(ye).some(Se=>!fe.springs[Se])?flushUpdateQueue(fe,_e):new Promise(Se=>{setSprings(fe,ye),ne.queue.push(()=>{Se(flushUpdateQueue(fe,_e))}),te()})}}),[]),ie=reactExports.useRef([...ne.ctrls]),re=reactExports.useRef([]),oe=usePrev(G)||0;reactExports.useMemo(()=>{each(ie.current.slice(G,oe),fe=>{detachRefs(fe,Q),fe.stop(!0)}),ie.current.length=G,se(oe,G)},[G]),reactExports.useMemo(()=>{se(0,Math.min(oe,G))},J);function se(fe,_e){for(let ye=fe;ye<_e;ye++){const be=ie.current[ye]||(ie.current[ye]=new Controller(null,ne.flush)),Se=Z?Z(ye,be):_[ye];Se&&(re.current[ye]=declareUpdate(Se))}}const ae=ie.current.map((fe,_e)=>getSprings(fe,re.current[_e])),ce=reactExports.useContext(SpringContext),ue=usePrev(ce),de=ce!==ue&&hasProps(ce);useIsomorphicLayoutEffect(()=>{ee.current++,ne.ctrls=ie.current;const{queue:fe}=ne;fe.length&&(ne.queue=[],each(fe,_e=>_e())),each(ie.current,(_e,ye)=>{Q?.add(_e),de&&_e.start({default:ce});const be=re.current[ye];be&&(replaceRef(_e,be.ref),_e.ref?_e.queue.push(be):_e.start(be))})}),useOnce(()=>()=>{each(ne.ctrls,fe=>fe.stop(!0))});const me=ae.map(fe=>({...fe}));return Q?[me,Q]:me}function useSpring(G,_){const J=is.fun(G),[[Z],Q]=useSprings(1,J?G:[G],J?[]:_);return J||arguments.length==2?[Z,Q]:Z}var Interpolation=class extends FrameValue{constructor(G,_){super(),this.source=G,this.idle=!0,this._active=new Set,this.calc=createInterpolator(..._);const J=this._get(),Z=getAnimatedType(J);setAnimated(this,Z.create(J))}advance(G){const _=this._get(),J=this.get();isEqual(_,J)||(getAnimated(this).setValue(_),this._onChange(_,this.idle)),!this.idle&&checkIdle(this._active)&&becomeIdle(this)}_get(){const G=is.arr(this.source)?this.source.map(getFluidValue):toArray(getFluidValue(this.source));return this.calc(...G)}_start(){this.idle&&!checkIdle(this._active)&&(this.idle=!1,each(getPayload(this),G=>{G.done=!1}),globals_exports.skipAnimation?(raf.batchedUpdates(()=>this.advance()),becomeIdle(this)):frameLoop.start(this))}_attach(){let G=1;each(toArray(this.source),_=>{hasFluidValue(_)&&addFluidObserver(_,this),isFrameValue(_)&&(_.idle||this._active.add(_),G=Math.max(G,_.priority+1))}),this.priority=G,this._start()}_detach(){each(toArray(this.source),G=>{hasFluidValue(G)&&removeFluidObserver(G,this)}),this._active.clear(),becomeIdle(this)}eventObserved(G){G.type=="change"?G.idle?this.advance():(this._active.add(G.parent),this._start()):G.type=="idle"?this._active.delete(G.parent):G.type=="priority"&&(this.priority=toArray(this.source).reduce((_,J)=>Math.max(_,(isFrameValue(J)?J.priority:0)+1),0))}};function isIdle(G){return G.idle!==!1}function checkIdle(G){return!G.size||Array.from(G).every(isIdle)}function becomeIdle(G){G.idle||(G.idle=!0,each(getPayload(G),_=>{_.done=!0}),callFluidObservers(G,{type:"idle",parent:G}))}globals_exports.assign({createStringInterpolator:createStringInterpolator2,to:(G,_)=>new Interpolation(G,_)});var primitives=["primitive"].concat(Object.keys(THREE).filter(G=>/^[A-Z]/.test(G)).map(G=>G[0].toLowerCase()+G.slice(1)));globals_exports.assign({createStringInterpolator:createStringInterpolator2,colors:colors2,frameLoop:"demand"});addEffect(()=>{raf.advance()});var host=createHost(primitives,{applyAnimatedValues:applyProps}),animated=host.animated;const Visible=0,Deleted=1,_v1=new Vector3,_line3=new Line3,_plane=new Plane,_closestPoint=new Vector3,_triangle=new Triangle;class ConvexHull{constructor(){this.tolerance=-1,this.faces=[],this.newFaces=[],this.assigned=new VertexList,this.unassigned=new VertexList,this.vertices=[]}setFromPoints(_){if(_.length>=4){this.makeEmpty();for(let J=0,Z=_.length;J<Z;J++)this.vertices.push(new VertexNode(_[J]));this._compute()}return this}setFromObject(_){const J=[];return _.updateMatrixWorld(!0),_.traverse(function(Z){const Q=Z.geometry;if(Q!==void 0){const ee=Q.attributes.position;if(ee!==void 0)for(let te=0,ne=ee.count;te<ne;te++){const ie=new Vector3;ie.fromBufferAttribute(ee,te).applyMatrix4(Z.matrixWorld),J.push(ie)}}}),this.setFromPoints(J)}containsPoint(_){const J=this.faces;for(let Z=0,Q=J.length;Z<Q;Z++)if(J[Z].distanceToPoint(_)>this.tolerance)return!1;return!0}intersectRay(_,J){const Z=this.faces;let Q=-1/0,ee=1/0;for(let te=0,ne=Z.length;te<ne;te++){const ie=Z[te],re=ie.distanceToPoint(_.origin),oe=ie.normal.dot(_.direction);if(re>0&&oe>=0)return null;const se=oe!==0?-re/oe:0;if(!(se<=0)&&(oe>0?ee=Math.min(se,ee):Q=Math.max(se,Q),Q>ee))return null}return Q!==-1/0?_.at(Q,J):_.at(ee,J),J}intersectsRay(_){return this.intersectRay(_,_v1)!==null}makeEmpty(){return this.faces=[],this.vertices=[],this}_addVertexToFace(_,J){return _.face=J,J.outside===null?this.assigned.append(_):this.assigned.insertBefore(J.outside,_),J.outside=_,this}_removeVertexFromFace(_,J){return _===J.outside&&(_.next!==null&&_.next.face===J?J.outside=_.next:J.outside=null),this.assigned.remove(_),this}_removeAllVerticesFromFace(_){if(_.outside!==null){const J=_.outside;let Z=_.outside;for(;Z.next!==null&&Z.next.face===_;)Z=Z.next;return this.assigned.removeSubList(J,Z),J.prev=Z.next=null,_.outside=null,J}}_deleteFaceVertices(_,J){const Z=this._removeAllVerticesFromFace(_);if(Z!==void 0)if(J===void 0)this.unassigned.appendChain(Z);else{let Q=Z;do{const ee=Q.next;J.distanceToPoint(Q.point)>this.tolerance?this._addVertexToFace(Q,J):this.unassigned.append(Q),Q=ee}while(Q!==null)}return this}_resolveUnassignedPoints(_){if(this.unassigned.isEmpty()===!1){let J=this.unassigned.first();do{const Z=J.next;let Q=this.tolerance,ee=null;for(let te=0;te<_.length;te++){const ne=_[te];if(ne.mark===Visible){const ie=ne.distanceToPoint(J.point);if(ie>Q&&(Q=ie,ee=ne),Q>1e3*this.tolerance)break}}ee!==null&&this._addVertexToFace(J,ee),J=Z}while(J!==null)}return this}_computeExtremes(){const _=new Vector3,J=new Vector3,Z=[],Q=[];for(let ee=0;ee<3;ee++)Z[ee]=Q[ee]=this.vertices[0];_.copy(this.vertices[0].point),J.copy(this.vertices[0].point);for(let ee=0,te=this.vertices.length;ee<te;ee++){const ne=this.vertices[ee],ie=ne.point;for(let re=0;re<3;re++)ie.getComponent(re)<_.getComponent(re)&&(_.setComponent(re,ie.getComponent(re)),Z[re]=ne);for(let re=0;re<3;re++)ie.getComponent(re)>J.getComponent(re)&&(J.setComponent(re,ie.getComponent(re)),Q[re]=ne)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(_.x),Math.abs(J.x))+Math.max(Math.abs(_.y),Math.abs(J.y))+Math.max(Math.abs(_.z),Math.abs(J.z))),{min:Z,max:Q}}_computeInitialHull(){const _=this.vertices,J=this._computeExtremes(),Z=J.min,Q=J.max;let ee=0,te=0;for(let ae=0;ae<3;ae++){const ce=Q[ae].point.getComponent(ae)-Z[ae].point.getComponent(ae);ce>ee&&(ee=ce,te=ae)}const ne=Z[te],ie=Q[te];let re,oe;ee=0,_line3.set(ne.point,ie.point);for(let ae=0,ce=this.vertices.length;ae<ce;ae++){const ue=_[ae];if(ue!==ne&&ue!==ie){_line3.closestPointToPoint(ue.point,!0,_closestPoint);const de=_closestPoint.distanceToSquared(ue.point);de>ee&&(ee=de,re=ue)}}ee=-1,_plane.setFromCoplanarPoints(ne.point,ie.point,re.point);for(let ae=0,ce=this.vertices.length;ae<ce;ae++){const ue=_[ae];if(ue!==ne&&ue!==ie&&ue!==re){const de=Math.abs(_plane.distanceToPoint(ue.point));de>ee&&(ee=de,oe=ue)}}const se=[];if(_plane.distanceToPoint(oe.point)<0){se.push(Face.create(ne,ie,re),Face.create(oe,ie,ne),Face.create(oe,re,ie),Face.create(oe,ne,re));for(let ae=0;ae<3;ae++){const ce=(ae+1)%3;se[ae+1].getEdge(2).setTwin(se[0].getEdge(ce)),se[ae+1].getEdge(1).setTwin(se[ce+1].getEdge(0))}}else{se.push(Face.create(ne,re,ie),Face.create(oe,ne,ie),Face.create(oe,ie,re),Face.create(oe,re,ne));for(let ae=0;ae<3;ae++){const ce=(ae+1)%3;se[ae+1].getEdge(2).setTwin(se[0].getEdge((3-ae)%3)),se[ae+1].getEdge(0).setTwin(se[ce+1].getEdge(1))}}for(let ae=0;ae<4;ae++)this.faces.push(se[ae]);for(let ae=0,ce=_.length;ae<ce;ae++){const ue=_[ae];if(ue!==ne&&ue!==ie&&ue!==re&&ue!==oe){ee=this.tolerance;let de=null;for(let me=0;me<4;me++){const fe=this.faces[me].distanceToPoint(ue.point);fe>ee&&(ee=fe,de=this.faces[me])}de!==null&&this._addVertexToFace(ue,de)}}return this}_reindexFaces(){const _=[];for(let J=0;J<this.faces.length;J++){const Z=this.faces[J];Z.mark===Visible&&_.push(Z)}return this.faces=_,this}_nextVertexToAdd(){if(this.assigned.isEmpty()===!1){let _,J=0;const Z=this.assigned.first().face;let Q=Z.outside;do{const ee=Z.distanceToPoint(Q.point);ee>J&&(J=ee,_=Q),Q=Q.next}while(Q!==null&&Q.face===Z);return _}}_computeHorizon(_,J,Z,Q){this._deleteFaceVertices(Z),Z.mark=Deleted;let ee;J===null?ee=J=Z.getEdge(0):ee=J.next;do{const te=ee.twin,ne=te.face;ne.mark===Visible&&(ne.distanceToPoint(_)>this.tolerance?this._computeHorizon(_,te,ne,Q):Q.push(ee)),ee=ee.next}while(ee!==J);return this}_addAdjoiningFace(_,J){const Z=Face.create(_,J.tail(),J.head());return this.faces.push(Z),Z.getEdge(-1).setTwin(J.twin),Z.getEdge(0)}_addNewFaces(_,J){this.newFaces=[];let Z=null,Q=null;for(let ee=0;ee<J.length;ee++){const te=J[ee],ne=this._addAdjoiningFace(_,te);Z===null?Z=ne:ne.next.setTwin(Q),this.newFaces.push(ne.face),Q=ne}return Z.next.setTwin(Q),this}_addVertexToHull(_){const J=[];return this.unassigned.clear(),this._removeVertexFromFace(_,_.face),this._computeHorizon(_.point,null,_.face,J),this._addNewFaces(_,J),this._resolveUnassignedPoints(this.newFaces),this}_cleanup(){return this.assigned.clear(),this.unassigned.clear(),this.newFaces=[],this}_compute(){let _;for(this._computeInitialHull();(_=this._nextVertexToAdd())!==void 0;)this._addVertexToHull(_);return this._reindexFaces(),this._cleanup(),this}}class Face{constructor(){this.normal=new Vector3,this.midpoint=new Vector3,this.area=0,this.constant=0,this.outside=null,this.mark=Visible,this.edge=null}static create(_,J,Z){const Q=new Face,ee=new HalfEdge(_,Q),te=new HalfEdge(J,Q),ne=new HalfEdge(Z,Q);return ee.next=ne.prev=te,te.next=ee.prev=ne,ne.next=te.prev=ee,Q.edge=ee,Q.compute()}getEdge(_){let J=this.edge;for(;_>0;)J=J.next,_--;for(;_<0;)J=J.prev,_++;return J}compute(){const _=this.edge.tail(),J=this.edge.head(),Z=this.edge.next.head();return _triangle.set(_.point,J.point,Z.point),_triangle.getNormal(this.normal),_triangle.getMidpoint(this.midpoint),this.area=_triangle.getArea(),this.constant=this.normal.dot(this.midpoint),this}distanceToPoint(_){return this.normal.dot(_)-this.constant}}class HalfEdge{constructor(_,J){this.vertex=_,this.prev=null,this.next=null,this.twin=null,this.face=J}head(){return this.vertex}tail(){return this.prev?this.prev.vertex:null}length(){const _=this.head(),J=this.tail();return J!==null?J.point.distanceTo(_.point):-1}lengthSquared(){const _=this.head(),J=this.tail();return J!==null?J.point.distanceToSquared(_.point):-1}setTwin(_){return this.twin=_,_.twin=this,this}}class VertexNode{constructor(_){this.point=_,this.prev=null,this.next=null,this.face=null}}class VertexList{constructor(){this.head=null,this.tail=null}first(){return this.head}last(){return this.tail}clear(){return this.head=this.tail=null,this}insertBefore(_,J){return J.prev=_.prev,J.next=_,J.prev===null?this.head=J:J.prev.next=J,_.prev=J,this}insertAfter(_,J){return J.prev=_,J.next=_.next,J.next===null?this.tail=J:J.next.prev=J,_.next=J,this}append(_){return this.head===null?this.head=_:this.tail.next=_,_.prev=this.tail,_.next=null,this.tail=_,this}appendChain(_){for(this.head===null?this.head=_:this.tail.next=_,_.prev=this.tail;_.next!==null;)_=_.next;return this.tail=_,this}remove(_){return _.prev===null?this.head=_.next:_.prev.next=_.next,_.next===null?this.tail=_.prev:_.next.prev=_.prev,this}removeSubList(_,J){return _.prev===null?this.head=J.next:_.prev.next=J.next,J.next===null?this.tail=_.prev:J.next.prev=_.prev,this}isEmpty(){return this.head===null}}class ConvexGeometry extends BufferGeometry{constructor(_=[]){super();const J=[],Z=[],ee=new ConvexHull().setFromPoints(_).faces;for(let te=0;te<ee.length;te++){const ne=ee[te];let ie=ne.edge;do{const re=ie.head().point;J.push(re.x,re.y,re.z),Z.push(ne.normal.x,ne.normal.y,ne.normal.z),ie=ie.next}while(ie!==ne.edge)}this.setAttribute("position",new Float32BufferAttribute(J,3)),this.setAttribute("normal",new Float32BufferAttribute(Z,3))}}const EPS=1e-8;function planeFromInequality(G,_,J,Z={}){const[Q,ee,te]=J,ne=G[Q]||0,ie=G[ee]||0,re=G[te]||0;let oe=_||0;for(let ce=0;ce<G.length;ce++){if(ce===ce||ce===ee||ce===te)continue;const ue=Z.hasOwnProperty(ce)?Z[ce]:0;oe+=(G[ce]||0)*ue}const se=new Vector3(ne,ie,re),ae=-oe;return{normal:se,d:ae}}function solve3x3(G,_){const J=G,Z=_.x,Q=_.y,ee=_.z,te=J[0],ne=J[1],ie=J[2],re=J[3],oe=J[4],se=J[5],ae=J[6],ce=J[7],ue=J[8],de=te*(oe*ue-se*ce)-ne*(re*ue-se*ae)+ie*(re*ce-oe*ae);if(Math.abs(de)<EPS)return null;const me=1/de,fe=(Z*(oe*ue-se*ce)-ne*(Q*ue-se*ee)+ie*(Q*ce-oe*ee))*me,_e=(te*(Q*ue-se*ee)-Z*(re*ue-se*ae)+ie*(re*ee-Q*ae))*me,ye=(te*(oe*ee-Q*ce)-ne*(re*ee-Q*ae)+Z*(re*ce-oe*ae))*me;return new Vector3(fe,_e,ye)}function computeFeasibleVertices(G){const _=[],J=G.length;for(let Z=0;Z<J;Z++)for(let Q=Z+1;Q<J;Q++)for(let ee=Q+1;ee<J;ee++){const te=G[Z].normal,ne=G[Q].normal,ie=G[ee].normal,re=[te.x,te.y,te.z,ne.x,ne.y,ne.z,ie.x,ie.y,ie.z],oe=new Vector3(-G[Z].d,-G[Q].d,-G[ee].d),se=solve3x3(re,oe);if(!se)continue;let ae=!0;for(let ue=0;ue<J;ue++)if(G[ue].normal.dot(se)+G[ue].d>1e-6){ae=!1;break}if(!ae)continue;let ce=!1;for(const ue of _)if(ue.distanceToSquared(se)<1e-10){ce=!0;break}ce||_.push(se)}return _}function HalfPlane({normal:G,d:_,size:J=10,color:Z="orange",opacity:Q=.5,showNormal:ee=!0,showArrows:te=!0}){const ne=G.clone(),ie=ne.lengthSq(),re=1+.02,oe=ie>EPS?ne.clone().multiplyScalar(-_/ie*re):new Vector3,se=new Vector3(0,0,1),ae=new Quaternion;return ne.length()>EPS&&ae.setFromUnitVectors(se,ne.clone().normalize()),jsxRuntimeExports.jsxs("group",{children:[jsxRuntimeExports.jsxs("mesh",{position:oe.toArray(),quaternion:ae,children:[jsxRuntimeExports.jsx("circleGeometry",{args:[J,30]}),jsxRuntimeExports.jsx("meshStandardMaterial",{color:Z,transparent:!0,depthTest:!0,depthWrite:!1,opacity:Q,side:DoubleSide})]}),ee&&ne.length()>EPS&&jsxRuntimeExports.jsx("mesh",{position:oe.toArray(),children:te&&jsxRuntimeExports.jsx("primitive",{object:new ArrowHelper(ne.clone().normalize(),new Vector3(0,0,0),1,Z)})})]})}function feasibleGeometry(G){if(!G||G.length<4)return null;const _=G.map(J=>new Vector3(J.x,J.y,J.z));try{const J=new ConvexGeometry(_);return J.computeVertexNormals(),J}catch(J){return console.warn("ConvexGeometry failed",J),null}}function FeasibleVolume({vertices:G,color:_="royalblue",simple:J,opacity:Z=.35}){const Q=reactExports.useMemo(()=>feasibleGeometry(G),[G]);return Q?jsxRuntimeExports.jsx("mesh",{geometry:Q,children:J?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("meshBasicMaterial",{color:_,side:DoubleSide})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("meshStandardMaterial",{color:_,transparent:!0,depthTest:!0,depthWrite:!0,opacity:Z,side:DoubleSide})})}):null}function PointGrid({colour:G="black",xmin:_=-10,xmax:J=10,ymin:Z=0,ymax:Q=0,zmin:ee=-10,zmax:te=10}){let ne=[];for(let ie=_;ie<=J;ie++)for(let re=Z;re<=Q;re++)for(let oe=ee;oe<=te;oe++)ne.push([ie,re+.01,oe]);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(Points,{limit:ne.length,range:1e3,children:[ne.map((ie,re)=>jsxRuntimeExports.jsx(Point,{position:ie},"point"+re)),jsxRuntimeExports.jsx(PointMaterial,{transparent:!0,vertexColors:!0,size:5,sizeAttenuation:!1,depthWrite:!1,color:G})]})})}const AnimatedHalfPlane=animated(HalfPlane),useStore=create$1(G=>({position:[0,10,0],setPosition:_=>G({position:_})}));function ReactiveCamera({controllable:G}){const[_,J,Z]=useStore(Q=>Q.position);useFrame(Q=>{G||(Q.camera.position.lerp({x:_,y:J,z:Z},.05),Q.camera.lookAt(0,0,0),Q.camera.updateProjectionMatrix())})}function Setting({A:G,b:_,c:J,varIndices:Z,phase:Q,style:ee}){const re=[0,10,-.01],oe=[0,4,-8],se=reactExports.useMemo(()=>{if(!G||!_)return[];const fe=[];for(let _e=0;_e<G.length;_e++){const ye=planeFromInequality(G[_e],J*_[_e],Z);fe.push(ye)}return fe},[G,_,J,Z]),ae=reactExports.useMemo(()=>computeFeasibleVertices(se),[se]),ce=useStore(fe=>fe.setPosition),[ue,de]=reactExports.useState(!1);reactExports.useEffect(()=>{Q<2?(ce(re),setTimeout(()=>{de(!1)},500)):(ce(oe),setTimeout(()=>{de(!0)},500))},[Q]);const me=useSpring({size:Q<2?0:Q<3?1:5,opacity:Q<3?.9:.2});return jsxRuntimeExports.jsx("div",{style:{height:"100vh",width:"100%"},children:jsxRuntimeExports.jsxs(Canvas,{camera:{position:re,fov:45},children:[jsxRuntimeExports.jsx(ReactiveCamera,{controllable:ue}),jsxRuntimeExports.jsx("ambientLight",{intensity:Math.PI/2}),jsxRuntimeExports.jsx("spotLight",{position:[10,10,10],angle:.15,penumbra:1,decay:0,intensity:Math.PI}),jsxRuntimeExports.jsx("pointLight",{position:[-10,-10,-10],decay:0,intensity:Math.PI}),se.map((fe,_e)=>jsxRuntimeExports.jsx(AnimatedHalfPlane,{normal:fe.normal,d:fe.d,color:"orange",opacity:me.opacity,size:me.size,showArrows:Q>=2},_e)),Q===1&&jsxRuntimeExports.jsx(PointGrid,{}),jsxRuntimeExports.jsx(FeasibleVolume,{vertices:ae,simple:Q<2,color:"royalblue",opacity:.5}),jsxRuntimeExports.jsx(OrbitControls,{enabled:Q>=2,enablePan:!1}),jsxRuntimeExports.jsx(Grid,{cellSize:50,infiniteGrid:!0,side:2,sectionColor:"#ffffff",position:[0,0,0]})]})})}function DragMove({onPointerDown:G=()=>{},onPointerUp:_=()=>{},onPointerMove:J=()=>{},onDragMove:Z=()=>{},style:Q,className:ee,children:te,grabber:ne}){const[ie,re]=reactExports.useState(!1),oe=reactExports.useRef(!1);reactExports.useEffect(()=>{oe.current=ie},[ie]);const se=ue=>{re(!0),G(ue)},ae=ue=>{re(!1),_(ue)},ce=ue=>{oe.current&&Z(ue),J(ue)};return reactExports.useEffect(()=>(window.addEventListener("pointerup",ae),window.addEventListener("mousemove",ce),()=>{window.removeEventListener("pointerup",ae),window.removeEventListener("mousemove",ce)}),[]),jsxRuntimeExports.jsxs("div",{style:{userSelect:"none",cursor:ie?"grabbing":"grab",...Q},className:ee,children:[jsxRuntimeExports.jsx("div",{onPointerDown:se,children:ne}),te]})}function CubeGraph({}){const G=()=>{const ie=JXG.JSXGraph.initBoard("cubegraph1",{boundingbox:[-6,4,6,-4],axis:!0,grid:!0,gridX:1,gridY:1,showCopyright:!1,showNavigation:!1}),re=[[-12*.4,-6*.4],[-6*.4,8*.4],[6*.4,9*.4],[12*.4,2*.4],[8*.4,-8*.4],[-2*.4,-9*.4]],oe=re.map((Te,Ee)=>ie.create("point",Te,{visible:!1,fixed:!0}));ie.create("polygon",oe,{fillColor:"#eee",strokeColor:"royalblue",opacity:.3,borders:{strokeWidth:2}});const se=ie.create("slider",[[-6+.5,-4+.5],[-6+2.5,-4+.5],[.3,7/3,7]],{name:"e",withLabel:!0,label:{fontSize:20}}),ae=ie.create("point",[0,0],{name:"$\\vec{z}$",size:7,face:"o",color:"red",snapSizeX:0,snapSizeY:0,label:{fontSize:30,offset:[10,-20],opacity:.5}}),ce=ie.create("point",[Math.round(ae.X()),Math.round(ae.Y())],{name:"$\\lceil \\vec{z} \\rfloor$",size:3,face:"o",fixed:!0,color:"green",snapSizeX:1,snapSizeY:1,label:{visible:!0,fontSize:20,offset:[-40,30]}});function ue(){return se.Value()}const de=()=>ue()/2,me=ie.create("point",[()=>ae.X()-de(),()=>ae.Y()-de()],{visible:!1}),fe=ie.create("point",[()=>ae.X()+de(),()=>ae.Y()-de()],{visible:!1}),_e=ie.create("point",[()=>ae.X()+de(),()=>ae.Y()+de()],{visible:!1}),ye=ie.create("point",[()=>ae.X()-de(),()=>ae.Y()+de()],{visible:!1});ie.create("polygon",[me,fe,_e,ye],{opacity:.6,fillColor:"#fdd",strokeColor:"#a33"});function be(Te,Ee){for(var De=Te[0],Le=Te[1],Ue=!1,Ge=0,Ye=Ee.length-1;Ge<Ee.length;Ye=Ge++){var ke=Ee[Ge][0],Fe=Ee[Ge][1],Ve=Ee[Ye][0],$e=Ee[Ye][1],Xe=Fe>Le!=$e>Le&&De<(Ve-ke)*(Le-Fe)/($e-Fe)+ke;Xe&&(Ue=!Ue)}return Ue}function Se(Te=ue(),Ee=ae.X(),De=ae.Y()){let Le=Te/2;return be([Ee-Le,De-Le],re)&&be([Ee+Le,De-Le],re)&&be([Ee-Le,De+Le],re)&&be([Ee+Le,De+Le],re)}let Ce=ae.X(),Me=ae.Y();ae.on("drag",Te=>{if(Se())Ce=ae.X(),Me=ae.Y();else{const Ee=ue(),De=ae.X(),Le=ae.Y();let Ue=De,Ge=Le;for(;!Se(Ee,Ue,Ge);)Ue-=.01*(De-Ce),Ge-=.01*(Le-Me);ae.setPosition(JXG.COORDS_BY_USER,[Ue,Ge])}ce.setPosition(JXG.COORDS_BY_USER,[Math.round(ae.X()),Math.round(ae.Y())]),ie.update()});let Re=ue();se.on("drag",Te=>{if(Se())Re=ue();else{const Ee=ue();let De=Ee;for(;!Se(De);)De-=.01*(Ee-Re);se.setValue(De)}ie.update()}),ie.update()};let _=reactExports.useRef(null);return reactExports.useEffect(()=>{_.current&&G()},[_]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{children:`#cubegraph1_jxgBoard1P55Label > span > span > span{
                font-size: 20pt!important;
            }`}),jsxRuntimeExports.jsx("div",{ref:_,id:"cubegraph1",className:"jxgbox",style:{width:"100vmin",aspectRatio:1.5,marginTop:50}})]})}function SingleConstraint({}){let G=reactExports.useRef(null);const _=()=>{const J=G.current.clientWidth/G.current.clientHeight,Z=2,Q=Z/J,ee=Z,te=.2,ne=JXG.JSXGraph.initBoard("singleconstraint",{boundingbox:[-Z,Q,Z,-Q],axis:!0,grid:!0,gridX:1,gridY:1,showCopyright:!1,showNavigation:!1}),ie=ne.create("slider",[[-Z+te,-Q+te],[-Z+te*5,-Q+te],[0,ee/4,ee]],{name:"e",withLabel:!0,label:{fontSize:20}}),re=ne.create("point",[-1,1],{name:"$z$",size:7,face:"o"}),oe=ne.create("point",[0,0],{visible:!1,fixed:!0}),se=ne.create("point",[.8,.3],{name:"$\\vec{a}$",size:1.5,face:"o",color:"royalblue"});ne.create("line",[oe,se],{color:"black",opacity:.3});const ae=()=>ie.Value()/2,ce=20,ue=!1,de=ne.create("point",[()=>re.X()-ae(),()=>re.Y()-ae()],{name:"x",label:{visible:ue,fontsize:ce}}),me=ne.create("point",[()=>re.X()+ae(),()=>re.Y()-ae()],{name:"x",label:{visible:ue,fontsize:ce}}),fe=ne.create("point",[()=>re.X()+ae(),()=>re.Y()+ae()],{name:"x",label:{visible:ue,fontsize:ce}}),_e=ne.create("point",[()=>re.X()-ae(),()=>re.Y()+ae()],{name:"x",label:{visible:ue,fontsize:ce}}),ye=(De,Le)=>Le.X()*De.X()+Le.Y()*De.Y(),be=()=>Math.sqrt(se.X()*se.X()+se.Y()*se.Y()),Se=(De,Le,Ue)=>ye(De,Le)*(Ue?De.X():De.Y())/be(),Ce={color:"black",opacity:.1},Me={name:"",layer:13},Re=[de,me,fe,_e];for(const De of Re){const Le=ne.create("point",[()=>Se(se,De,!0),()=>Se(se,De,!1)],Me);ne.create("segment",[De,Le],Ce)}const Te=()=>Re.map(De=>ye(se,De)).reduce((De,Le)=>De<Le?De:Le),Ee=()=>Re.map(De=>ye(se,De)).reduce((De,Le)=>De>Le?De:Le);ne.create("segment",[[()=>Te()*se.X()/be(),()=>Te()*se.Y()/be()],[()=>Ee()*se.X()/be(),()=>Ee()*se.Y()/be()]],{color:"#faa",strokeWidth:8,opacity:.5,layer:11}),ne.create("polygon",[de,me,fe,_e],{opacity:.5,fillColor:"#faa",strokeColor:"#a33"}),ne.create("arrow",[oe,se],{name:"$\\vec{a}$",strokeWidth:3,color:"royalblue",layer:10}),ne.update()};return reactExports.useEffect(()=>{G.current&&_()},[G]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{ref:G,id:"singleconstraint",className:"jxgbox",style:{width:"40vw",height:"min(60vh, 40vw)"}})})}function CubeTransform3D({A:G,b:_,e:J,setE:Z,varIndices:Q,chebyshev:ee,style:te}){const ne=[0,4,-8],ie=ye=>ye.reduce((be,Se)=>Math.abs(be)+Math.abs(Se),0),re=ye=>Math.sqrt(ye.reduce((be,Se)=>be+Se*Se,0)),oe=(ye,be,Se)=>be.map((Ce,Me)=>Ce[0]-Se[0][0]*.5*(ee?re(ye[Me]):ie(ye[Me]))),se=reactExports.useMemo(()=>{const ye=[];for(let be=0;be<G.length;be++)ye.push(planeFromInequality(G[be],_[be],Q));return ye},[G,_]),ae=reactExports.useMemo(()=>computeFeasibleVertices(se),[se]),ce=reactExports.useMemo(()=>{const ye=[];for(let be=0;be<G.length;be++)ye.push(planeFromInequality(G[be],oe(G,_,J)[be],Q));return ye},[G,_,J,Q,ee]),ue=reactExports.useMemo(()=>computeFeasibleVertices(ce),[ce]),[de,me]=reactExports.useState(ue),[fe,_e]=reactExports.useState(J);return reactExports.useEffect(()=>{console.log(ue.length),ue.length>0?(me(ue.slice()),_e(J)):Z(fe)},[ue]),jsxRuntimeExports.jsx("div",{style:{height:"100vh",width:"100%"},children:jsxRuntimeExports.jsxs(Canvas,{camera:{position:ne,fov:45},children:[jsxRuntimeExports.jsx("ambientLight",{intensity:Math.PI/2}),jsxRuntimeExports.jsx("spotLight",{position:[10,10,10],angle:.15,penumbra:1,decay:0,intensity:Math.PI}),jsxRuntimeExports.jsx("pointLight",{position:[-10,-10,-10],decay:0,intensity:Math.PI}),jsxRuntimeExports.jsx(FeasibleVolume,{vertices:ue,simple:!0,color:"royalblue",opacity:1}),jsxRuntimeExports.jsx(FeasibleVolume,{vertices:ae,color:"royalblue",opacity:.1}),ee?de.map((ye,be)=>jsxRuntimeExports.jsx(Sphere,{position:[ye.x,ye.y,ye.z],scale:fe[0][0]/2,children:jsxRuntimeExports.jsx("meshStandardMaterial",{wireframe:!0,color:"orange"})})):de.map((ye,be)=>jsxRuntimeExports.jsx(Box,{position:[ye.x,ye.y,ye.z],scale:fe[0][0],children:jsxRuntimeExports.jsx("meshStandardMaterial",{wireframe:!0,color:"orange"})})),jsxRuntimeExports.jsx(OrbitControls,{enabled:!0,enablePan:!1}),jsxRuntimeExports.jsx(Grid,{cellSize:50,infiniteGrid:!0,side:2,sectionColor:"#ffffff",position:[0,0,0]})]})})}function Matrix({mat:G,setMat:_,label:J,style:Z,lower_bound:Q=null,matReset:ee=null,initiallyExpanded:te=!1}){const ne=G[0].length,ie=G.length,[re,oe]=reactExports.useState(G.map(function(fe){return fe.slice()})),se=(fe,_e,ye,be)=>{var Se=fe.map(function(Ce){return Ce.slice()});return Se[_e][ye]=Q!==null?Math.max(Q,be):be,Se},[ae,ce]=reactExports.useState(te),[ue,de]=reactExports.useState({x:0,y:0}),me=fe=>{de(_e=>({x:_e.x+fe.movementX,y:_e.y+fe.movementY}))};return jsxRuntimeExports.jsx(DragMove,{onDragMove:me,style:{transform:`translateX(${ue.x}px) translateY(${ue.y}px)`,position:"absolute",top:15,left:15,background:"rgba(255, 255, 255, 0.8)",borderRadius:15,padding:15,zIndex:1,...Z},grabber:jsxRuntimeExports.jsx("span",{style:{cursor:"pointer"},onClick:()=>{ce(fe=>!fe)},onDoubleClick:()=>{_(ee||re)},children:J}),children:jsxRuntimeExports.jsx("div",{className:"matrix-container",style:{gridTemplateColumns:"auto ".repeat(ne),maxHeight:ae?"1000px":"0px",opacity:ae?1:0,overflow:"hidden",transition:"max-height 0.3s ease, opacity 0.2s ease, height 500ms ease",pointerEvents:ae?"auto":"none"},children:Array.from(Array(ie).keys()).flatMap(fe=>Array.from(Array(ne).keys()).flatMap(_e=>jsxRuntimeExports.jsx(DragInput,{value:G[fe][_e],setValue:ye=>{_(be=>se(be,fe,_e,ye))},init:re[fe][_e]},fe.toString()+_e.toString())))})})}function DragInput({init:G=0,value:_,setValue:J}){const[Z,Q]=reactExports.useState(_),[ee,te]=reactExports.useState(-1);return reactExports.useEffect(()=>{const ne=re=>{ee>=0&&J(Z+(re.clientX-ee)/100),re.stopPropagation()},ie=()=>{te(-1)};return document.addEventListener("pointermove",ne),document.addEventListener("pointerup",ie),()=>{document.removeEventListener("pointermove",ne),document.removeEventListener("pointerup",ie)}},[ee,J,Z]),jsxRuntimeExports.jsx("span",{onMouseDown:ne=>{te(ne.clientX),Q(_)},onDoubleClick:()=>{J(G)},style:{cursor:"ew-resize",userSelect:"none",textAlign:"right"},children:_.toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})})}function App(){const G=reactExports.useRef(null),_=reactExports.useRef(null),[J,Z]=reactExports.useState(!1),[Q,ee]=reactExports.useState(0);reactExports.useEffect(()=>{if(_.current)return;_.current=new X$1(G.current,{transition:"fade",controls:!1,slideNumber:"c/t",jumpToSlide:!0,disableLayout:!0,hash:!0,autoAnimateEasing:"ease",autoAnimateDuration:.5,transitionSpeed:"fast",hideInactiveCursor:!1,katex:{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]},plugins:[RevealMath.KaTeX]}),_.current.initialize().then(()=>{setTimeout(()=>{Z(!0)},100)});const Ce=()=>{setTimeout(()=>{const Me=document.getElementsByClassName("current-fragment"),Re=Me.length==0?-1:parseInt(Me[0].getAttribute("data-fragment-index"));ee(Re+1)},50)};return _.current.on("fragmentshown",Ce),_.current.on("fragmenthidden",Ce),_.current.on("slidechanged",Ce),()=>{try{_.current&&(_.current.destroy(),_.current=null)}catch{console.warn("Reveal.js destroy call failed.")}}},[]);let te=[[1,0,-.7],[-.5,0,.1],[0,0,1],[0,0,-.6],[0,1,0],[0,-1,0]],ne=[[1,0,0],[-1,0,0],[0,0,1],[0,0,-1],[0,1,0],[0,-1,0]],ie=[[1],[1],[1],[1],[1],[1]],re=[[1]],oe=[[0]];const[se,ae]=reactExports.useState(te),[ce,ue]=reactExports.useState(ie),[de,me]=reactExports.useState(re),[fe,_e]=reactExports.useState([[0]]);let ye=[0,1,2];const[be,Se]=reactExports.useState(!1);return jsxRuntimeExports.jsx("div",{className:"reveal",ref:G,children:jsxRuntimeExports.jsxs("div",{className:"slides",children:[jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,children:[jsxRuntimeExports.jsxs("h1",{"data-id":"h1",id:"h1-title",children:["Fast Cube Tests for",jsxRuntimeExports.jsx("br",{}),"LIA Constraint Solving"]}),jsxRuntimeExports.jsx("h3",{children:"Julian Karrer"}),jsxRuntimeExports.jsx("h5",{style:{marginTop:"10vmin"},children:"Paper by Martin Bromberger and Christoph Weidenbach"})]}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,style:{justifyContent:"flex-start"},children:[jsxRuntimeExports.jsx("h1",{className:"top","data-id":"h1",children:Q==0?"Setting":Q==1?"Integers Only":Q==2?"Polyhedra":Q==3?"Half-Spaces":""}),jsxRuntimeExports.jsx(Matrix,{mat:se,setMat:ae,label:"$A$",matReset:ne,style:{opacity:Q<2?0:1,pointerEvents:Q<2?"none":"auto"}}),jsxRuntimeExports.jsx(Matrix,{mat:ce,setMat:ue,label:"$b$",style:{left:340,opacity:Q<2?0:1,pointerEvents:Q<2?"none":"auto"}}),jsxRuntimeExports.jsx(Matrix,{mat:de,setMat:me,label:"$c$",style:{right:100,left:"auto",opacity:Q<2?0:1,pointerEvents:Q<2?"none":"auto"}}),jsxRuntimeExports.jsx(Setting,{A:se,b:ce,c:de[0],varIndices:ye,phase:Q}),jsxRuntimeExports.jsx(Annotated,{style:{opacity:Q>=2?0:1,pointerEvents:Q>=2?"none":"auto",position:"absolute",bottom:"8vh",background:"#f0f0f0ee",padding:"20px",paddingTop:"10px",borderRadius:"20px"},glossary:{"\\le":"\\text{component-wise} \\le",x:"x \\in \\mathbb{Z}^N",A:"A \\in \\mathbb{R}^{M\\times N}",b:"b \\in  \\mathbb{R}^{M}"},content:"$A \\vec{x} \\le \\vec{b}$ with $x \\in \\mathbb{Z}^N$",revealReady:J}),jsxRuntimeExports.jsx(Annotated,{style:{opacity:Q<2?0:1,pointerEvents:Q<2?"none":"auto",position:"absolute",bottom:"8vh",background:"#f0f0f0ee",padding:"20px",paddingTop:"10px",borderRadius:"20px"},glossary:{"\\le":"\\text{component-wise} \\le",x:"x \\in \\mathbb{Z}^N",A:"A \\in \\mathbb{R}^{M\\times N}",b:"b \\in  \\mathbb{R}^{M}",c:"c \\in  \\mathbb{R}"},content:"$A \\vec{x} \\le \\vec{b} \\cdot c$",revealReady:J}),jsxRuntimeExports.jsx("span",{className:"fragment"}),jsxRuntimeExports.jsx("span",{className:"fragment"}),jsxRuntimeExports.jsx("span",{className:"fragment"})]}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,children:[jsxRuntimeExports.jsx("h1",{"data-id":"h1",children:"Cube Tests"}),jsxRuntimeExports.jsxs("div",{className:"leftbound",children:[jsxRuntimeExports.jsxs("div",{className:"top-space",children:["Cube Definition:",jsxRuntimeExports.jsx(Annotated,{content:`$
              \\begin{aligned}
                C_e^N(\\vec{z}) & \\left\\{ \\vec{x} \\in \\mathbb{R}^N \\, \\middle | \\,  \\forall j \\in \\mathbb{N} _1^N :\\quad | \\vec{x}_j-\\vec{z}_j | \\le \\frac{e}{2} \\right \\} \\\\
                =&\\left\\{ \\vec{x} \\in \\mathbb{R}^N \\, \\middle | \\,  
                  \\left|\\left| \\vec{x} - \\vec{z} \\right|\\right|_\\infty \\le \\frac{e}{2}
                \\right \\}
              \\end{aligned}
                $`,glossary:{e:"e\\in\\mathbb{R}_{\\ge 0}",x:"\\vec{x} \\in \\mathbb{R}^N",z:"\\vec{z} \\in \\mathbb{R}^N"},revealReady:J})]}),jsxRuntimeExports.jsx("div",{className:"top-space",children:"Polyhedron Definition: "}),jsxRuntimeExports.jsx(Annotated,{content:"$P^A_b  \\left\\{ \\vec{x} \\in \\mathbb{R}^N \\, \\middle | \\,  A\\vec{x}-\\vec{b} \\le 0 \\right \\}$",glossary:{A:"A \\in \\mathbb{R}^{M\\times N}",b:"b \\in  \\mathbb{R}^{M}",e:"e \\in  \\mathbb{R}_+",c:"c \\in \\mathbb{R}",x:"x \\in \\mathbb{R}^N","\\le":"\\text{component - wise} \\le"},revealReady:J}),jsxRuntimeExports.jsxs("p",{className:"top-space",children:["We test for ","$C_e^N(\\vec{z}) \\subseteq P^A_b$"," ","$\\qquad$"," ","$\\lceil \\vec{z} \\rfloor \\in \\mathbb{Z}^N$"," is candidate"]})]})]}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,children:[jsxRuntimeExports.jsx("h1",{"data-id":"h1",children:"Motivation"}),jsxRuntimeExports.jsx(CubeGraph,{})]}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,children:[jsxRuntimeExports.jsx("h1",{"data-id":"h1",children:"Single Constraint"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",width:"100vw",marginTop:"5vmin"},children:[jsxRuntimeExports.jsx("div",{style:{width:"40vw",height:"60vh",display:"flex",alignItems:"center",marginLeft:"50px"},children:jsxRuntimeExports.jsx(SingleConstraint,{})}),jsxRuntimeExports.jsxs("div",{style:{maxWidth:"60vw",marginLeft:"50px",textAlign:"left"},children:[jsxRuntimeExports.jsx(Annotated,{content:`$\\begin{aligned}
            &\\forall \\vec{x} \\in C_e^N(\\vec{z}): 
            \\underbrace{\\vec{a}_i \\cdot \\vec{x}}_{\\textit{objective}} \\le \\underbrace{b_i}_{\\textit{upper bound}} \\\\ \\\\

            &\\Longleftrightarrow\\max_{x\\in C_e^N(\\vec{z})} \\left\\{\\vec{a}_i \\cdot \\vec{x}\\right\\}  \\le b_i  \\\\
            \\end{aligned}$`,glossary:{},style:{marginBottom:"50px"},revealReady:J}),jsxRuntimeExports.jsxs("div",{"data-id":"vertex-set",children:[jsxRuntimeExports.jsx("span",{style:{width:"100%"},children:"Vertex Set:"}),jsxRuntimeExports.jsx("br",{}),` $$\\mathbb{V}\\left(\\vec{z}, e\\right)   \\left\\{  \\left( z_1 \\pm \\frac{e}{2}, \\dots , z_N \\pm \\frac{e}{2}\\right)^T
              \\right \\}  $$`]})]})]})]}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,style:{textAlign:"left"},children:[jsxRuntimeExports.jsx("h1",{"data-id":"h1",children:"Single Constraint"}),jsxRuntimeExports.jsxs("div",{"data-id":"vertex-set",style:{marginTop:"5vmin"},children:[jsxRuntimeExports.jsx("span",{style:{width:"100%"},children:"Vertex Set into Objective:"}),jsxRuntimeExports.jsx("br",{}),` $$
             \\max_{\\vec{x}\\in\\mathbb{V}\\left(\\vec{z}, e\\right)} \\vec{a}_i^T \\vec{x}
             = \\max\\left\\{ \\vec{a}_i \\cdot \\left( z_1 \\pm \\frac{e}{2}, \\dots , z_N \\pm \\frac{e}{2}\\right)^T
              \\right \\}  $$`]}),jsxRuntimeExports.jsxs("div",{style:{marginTop:"50px"},children:[`$$=
             \\vec{a}_i \\cdot \\vec{z} +  \\frac{e}{2}\\max\\left\\{ 
             \\sum_{j=1}^N \\pm a_i
            \\right\\}$$`,jsxRuntimeExports.jsx("span",{"data-id":"cube-transform-1d-res",children:"$$= \\vec{a}_i\\cdot\\vec{z} + \\frac{e}{2}\\sum_{j=1}^N \\left| a_i\\right|$$"})]})]}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,style:{textAlign:"left"},children:[jsxRuntimeExports.jsx("h1",{"data-id":"h1",children:"Multiple Constraints"}),jsxRuntimeExports.jsx("span",{"data-id":"cube-transform-1d-res",style:{marginTop:"10vmin"},children:`$$
            C_e^N(\\vec{z})\\subseteq P^{a_i}_{b_i}
            \\quad\\Longleftrightarrow \\quad
            \\vec{a}_i\\cdot\\vec{z} + \\frac{e}{2}\\left|\\left| a_i\\right|\\right|_1 \\le b_i 
            $$ `}),jsxRuntimeExports.jsxs("div",{style:{border:"2px black solid",borderRadius:"20px",padding:"3vmin",margin:"15vmin",position:"relative",textAlign:"center"},children:[jsxRuntimeExports.jsx("span",{style:{position:"absolute",top:"-8vmin",width:"100%",left:0,fontWeight:"bold"},children:"Linear Cube Transformation"}),`$$ \\begin{aligned}
            C_e^N(\\vec{z})\\subseteq P^{A}_{b}
            \\Longleftrightarrow 
            &A\\vec{z} \\le \\vec{b}'\\\\
            \\text{where: }\\quad&b_i'  b_i - \\frac{e}{2}\\left|\\left| a_i\\right|\\right|_1 
            \\end{aligned}$$ `]})]}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,children:[jsxRuntimeExports.jsx("h1",{"data-id":"h1",className:"top",children:"Geometric Meaning"}),jsxRuntimeExports.jsx(CubeTransform3D,{A:se,b:ce,e:fe,setE:_e,varIndices:ye,chebyshev:be}),jsxRuntimeExports.jsx(Matrix,{mat:se,setMat:ae,label:"$A$",initiallyExpanded:!1,matReset:ne}),jsxRuntimeExports.jsx(Matrix,{mat:ce,setMat:ue,label:"$b$",initiallyExpanded:!1,style:{top:"50%",left:15}}),jsxRuntimeExports.jsx(Matrix,{mat:fe,setMat:_e,label:"$e$",initiallyExpanded:!0,lower_bound:0,matReset:oe,style:{top:"50%",left:175}}),jsxRuntimeExports.jsxs("div",{style:{position:"absolute",left:15,bottom:15,fontSize:"calc(var(--r-main-font-size) * 0.75)"},children:["Chebyshev",jsxRuntimeExports.jsx("input",{type:"checkbox",checked:be,onChange:Ce=>Se(Ce.target.checked),style:{width:"calc(var(--r-main-font-size) * 0.5)",height:"calc(var(--r-main-font-size) * 0.5)",marginLeft:10}})]})]}),jsxRuntimeExports.jsx("section",{"data-auto-animate":!0,children:jsxRuntimeExports.jsx("h1",{"data-id":"h1",children:"Summary"})}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,children:[jsxRuntimeExports.jsx("h1",{"data-id":"h1",children:"Appendix:  Paper"}),jsxRuntimeExports.jsx("embed",{src:paper,style:{width:"80vw",height:"80vh"},type:"application/pdf"})]})]})})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(App,{}))});export default kp();
