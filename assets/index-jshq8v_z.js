var Bp=(G,_)=>()=>(_||G((_={exports:{}}).exports,_),_.exports);var kp=Bp((exports,module)=>{(function(){const _=document.createElement("link").relList;if(_&&_.supports&&_.supports("modulepreload"))return;for(const Q of document.querySelectorAll('link[rel="modulepreload"]'))Z(Q);new MutationObserver(Q=>{for(const ee of Q)if(ee.type==="childList")for(const te of ee.addedNodes)te.tagName==="LINK"&&te.rel==="modulepreload"&&Z(te)}).observe(document,{childList:!0,subtree:!0});function J(Q){const ee={};return Q.integrity&&(ee.integrity=Q.integrity),Q.referrerPolicy&&(ee.referrerPolicy=Q.referrerPolicy),Q.crossOrigin==="use-credentials"?ee.credentials="include":Q.crossOrigin==="anonymous"?ee.credentials="omit":ee.credentials="same-origin",ee}function Z(Q){if(Q.ep)return;Q.ep=!0;const ee=J(Q);fetch(Q.href,ee)}})();function getDefaultExportFromCjs(G){return G&&G.__esModule&&Object.prototype.hasOwnProperty.call(G,"default")?G.default:G}var jsxRuntime={exports:{}},reactJsxRuntime_production={};var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var G=Symbol.for("react.transitional.element"),_=Symbol.for("react.fragment");function J(Z,Q,ee){var te=null;if(ee!==void 0&&(te=""+ee),Q.key!==void 0&&(te=""+Q.key),"key"in Q){ee={};for(var ne in Q)ne!=="key"&&(ee[ne]=Q[ne])}else ee=Q;return Q=ee.ref,{$$typeof:G,type:Z,key:te,ref:Q!==void 0?Q:null,props:ee}}return reactJsxRuntime_production.Fragment=_,reactJsxRuntime_production.jsx=J,reactJsxRuntime_production.jsxs=J,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var G=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),J=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),ee=Symbol.for("react.consumer"),te=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),re=Symbol.for("react.memo"),oe=Symbol.for("react.lazy"),se=Symbol.for("react.activity"),ae=Symbol.iterator;function le(je){return je===null||typeof je!="object"?null:(je=ae&&je[ae]||je["@@iterator"],typeof je=="function"?je:null)}var ue={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},de=Object.assign,pe={};function fe(je,qe,Ze){this.props=je,this.context=qe,this.refs=pe,this.updater=Ze||ue}fe.prototype.isReactComponent={},fe.prototype.setState=function(je,qe){if(typeof je!="object"&&typeof je!="function"&&je!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,je,qe,"setState")},fe.prototype.forceUpdate=function(je){this.updater.enqueueForceUpdate(this,je,"forceUpdate")};function _e(){}_e.prototype=fe.prototype;function ye(je,qe,Ze){this.props=je,this.context=qe,this.refs=pe,this.updater=Ze||ue}var be=ye.prototype=new _e;be.constructor=ye,de(be,fe.prototype),be.isPureReactComponent=!0;var Ae=Array.isArray;function Ce(){}var Ee={H:null,A:null,T:null,S:null},Re=Object.prototype.hasOwnProperty;function Te(je,qe,Ze){var st=Ze.ref;return{$$typeof:G,type:je,key:qe,ref:st!==void 0?st:null,props:Ze}}function Me(je,qe){return Te(je.type,qe,je.props)}function Ne(je){return typeof je=="object"&&je!==null&&je.$$typeof===G}function Le(je){var qe={"=":"=0",":":"=2"};return"$"+je.replace(/[=:]/g,function(Ze){return qe[Ze]})}var Ie=/\/+/g;function Ge(je,qe){return typeof je=="object"&&je!==null&&je.key!=null?Le(""+je.key):qe.toString(36)}function He(je){switch(je.status){case"fulfilled":return je.value;case"rejected":throw je.reason;default:switch(typeof je.status=="string"?je.then(Ce,Ce):(je.status="pending",je.then(function(qe){je.status==="pending"&&(je.status="fulfilled",je.value=qe)},function(qe){je.status==="pending"&&(je.status="rejected",je.reason=qe)})),je.status){case"fulfilled":return je.value;case"rejected":throw je.reason}}throw je}function Be(je,qe,Ze,st,St){var it=typeof je;(it==="undefined"||it==="boolean")&&(je=null);var lt=!1;if(je===null)lt=!0;else switch(it){case"bigint":case"string":case"number":lt=!0;break;case"object":switch(je.$$typeof){case G:case _:lt=!0;break;case oe:return lt=je._init,Be(lt(je._payload),qe,Ze,st,St)}}if(lt)return St=St(je),lt=st===""?"."+Ge(je,0):st,Ae(St)?(Ze="",lt!=null&&(Ze=lt.replace(Ie,"$&/")+"/"),Be(St,qe,Ze,"",function(Ht){return Ht})):St!=null&&(Ne(St)&&(St=Me(St,Ze+(St.key==null||je&&je.key===St.key?"":(""+St.key).replace(Ie,"$&/")+"/")+lt)),qe.push(St)),1;lt=0;var ft=st===""?".":st+":";if(Ae(je))for(var kt=0;kt<je.length;kt++)st=je[kt],it=ft+Ge(st,kt),lt+=Be(st,qe,Ze,it,St);else if(kt=le(je),typeof kt=="function")for(je=kt.call(je),kt=0;!(st=je.next()).done;)st=st.value,it=ft+Ge(st,kt++),lt+=Be(st,qe,Ze,it,St);else if(it==="object"){if(typeof je.then=="function")return Be(He(je),qe,Ze,st,St);throw qe=String(je),Error("Objects are not valid as a React child (found: "+(qe==="[object Object]"?"object with keys {"+Object.keys(je).join(", ")+"}":qe)+"). If you meant to render a collection of children, use an array instead.")}return lt}function ze(je,qe,Ze){if(je==null)return je;var st=[],St=0;return Be(je,st,"","",function(it){return qe.call(Ze,it,St++)}),st}function Fe(je){if(je._status===-1){var qe=je._result;qe=qe(),qe.then(function(Ze){(je._status===0||je._status===-1)&&(je._status=1,je._result=Ze)},function(Ze){(je._status===0||je._status===-1)&&(je._status=2,je._result=Ze)}),je._status===-1&&(je._status=0,je._result=qe)}if(je._status===1)return je._result.default;throw je._result}var $e=typeof reportError=="function"?reportError:function(je){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var qe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof je=="object"&&je!==null&&typeof je.message=="string"?String(je.message):String(je),error:je});if(!window.dispatchEvent(qe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",je);return}console.error(je)},Xe={map:ze,forEach:function(je,qe,Ze){ze(je,function(){qe.apply(this,arguments)},Ze)},count:function(je){var qe=0;return ze(je,function(){qe++}),qe},toArray:function(je){return ze(je,function(qe){return qe})||[]},only:function(je){if(!Ne(je))throw Error("React.Children.only expected to receive a single React element child.");return je}};return react_production.Activity=se,react_production.Children=Xe,react_production.Component=fe,react_production.Fragment=J,react_production.Profiler=Q,react_production.PureComponent=ye,react_production.StrictMode=Z,react_production.Suspense=ie,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ee,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(je){return Ee.H.useMemoCache(je)}},react_production.cache=function(je){return function(){return je.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(je,qe,Ze){if(je==null)throw Error("The argument must be a React element, but you passed "+je+".");var st=de({},je.props),St=je.key;if(qe!=null)for(it in qe.key!==void 0&&(St=""+qe.key),qe)!Re.call(qe,it)||it==="key"||it==="__self"||it==="__source"||it==="ref"&&qe.ref===void 0||(st[it]=qe[it]);var it=arguments.length-2;if(it===1)st.children=Ze;else if(1<it){for(var lt=Array(it),ft=0;ft<it;ft++)lt[ft]=arguments[ft+2];st.children=lt}return Te(je.type,St,st)},react_production.createContext=function(je){return je={$$typeof:te,_currentValue:je,_currentValue2:je,_threadCount:0,Provider:null,Consumer:null},je.Provider=je,je.Consumer={$$typeof:ee,_context:je},je},react_production.createElement=function(je,qe,Ze){var st,St={},it=null;if(qe!=null)for(st in qe.key!==void 0&&(it=""+qe.key),qe)Re.call(qe,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(St[st]=qe[st]);var lt=arguments.length-2;if(lt===1)St.children=Ze;else if(1<lt){for(var ft=Array(lt),kt=0;kt<lt;kt++)ft[kt]=arguments[kt+2];St.children=ft}if(je&&je.defaultProps)for(st in lt=je.defaultProps,lt)St[st]===void 0&&(St[st]=lt[st]);return Te(je,it,St)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(je){return{$$typeof:ne,render:je}},react_production.isValidElement=Ne,react_production.lazy=function(je){return{$$typeof:oe,_payload:{_status:-1,_result:je},_init:Fe}},react_production.memo=function(je,qe){return{$$typeof:re,type:je,compare:qe===void 0?null:qe}},react_production.startTransition=function(je){var qe=Ee.T,Ze={};Ee.T=Ze;try{var st=je(),St=Ee.S;St!==null&&St(Ze,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(Ce,$e)}catch(it){$e(it)}finally{qe!==null&&Ze.types!==null&&(qe.types=Ze.types),Ee.T=qe}},react_production.unstable_useCacheRefresh=function(){return Ee.H.useCacheRefresh()},react_production.use=function(je){return Ee.H.use(je)},react_production.useActionState=function(je,qe,Ze){return Ee.H.useActionState(je,qe,Ze)},react_production.useCallback=function(je,qe){return Ee.H.useCallback(je,qe)},react_production.useContext=function(je){return Ee.H.useContext(je)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(je,qe){return Ee.H.useDeferredValue(je,qe)},react_production.useEffect=function(je,qe){return Ee.H.useEffect(je,qe)},react_production.useEffectEvent=function(je){return Ee.H.useEffectEvent(je)},react_production.useId=function(){return Ee.H.useId()},react_production.useImperativeHandle=function(je,qe,Ze){return Ee.H.useImperativeHandle(je,qe,Ze)},react_production.useInsertionEffect=function(je,qe){return Ee.H.useInsertionEffect(je,qe)},react_production.useLayoutEffect=function(je,qe){return Ee.H.useLayoutEffect(je,qe)},react_production.useMemo=function(je,qe){return Ee.H.useMemo(je,qe)},react_production.useOptimistic=function(je,qe){return Ee.H.useOptimistic(je,qe)},react_production.useReducer=function(je,qe,Ze){return Ee.H.useReducer(je,qe,Ze)},react_production.useRef=function(je){return Ee.H.useRef(je)},react_production.useState=function(je){return Ee.H.useState(je)},react_production.useSyncExternalStore=function(je,qe,Ze){return Ee.H.useSyncExternalStore(je,qe,Ze)},react_production.useTransition=function(){return Ee.H.useTransition()},react_production.version="19.2.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={exports:{}},reactDomClient_production={},scheduler$2={exports:{}},scheduler_production$2={};var hasRequiredScheduler_production$2;function requireScheduler_production$2(){return hasRequiredScheduler_production$2||(hasRequiredScheduler_production$2=1,(function(G){function _(Be,ze){var Fe=Be.length;Be.push(ze);e:for(;0<Fe;){var $e=Fe-1>>>1,Xe=Be[$e];if(0<Q(Xe,ze))Be[$e]=ze,Be[Fe]=Xe,Fe=$e;else break e}}function J(Be){return Be.length===0?null:Be[0]}function Z(Be){if(Be.length===0)return null;var ze=Be[0],Fe=Be.pop();if(Fe!==ze){Be[0]=Fe;e:for(var $e=0,Xe=Be.length,je=Xe>>>1;$e<je;){var qe=2*($e+1)-1,Ze=Be[qe],st=qe+1,St=Be[st];if(0>Q(Ze,Fe))st<Xe&&0>Q(St,Ze)?(Be[$e]=St,Be[st]=Fe,$e=st):(Be[$e]=Ze,Be[qe]=Fe,$e=qe);else if(st<Xe&&0>Q(St,Fe))Be[$e]=St,Be[st]=Fe,$e=st;else break e}}return ze}function Q(Be,ze){var Fe=Be.sortIndex-ze.sortIndex;return Fe!==0?Fe:Be.id-ze.id}if(G.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var ee=performance;G.unstable_now=function(){return ee.now()}}else{var te=Date,ne=te.now();G.unstable_now=function(){return te.now()-ne}}var ie=[],re=[],oe=1,se=null,ae=3,le=!1,ue=!1,de=!1,pe=!1,fe=typeof setTimeout=="function"?setTimeout:null,_e=typeof clearTimeout=="function"?clearTimeout:null,ye=typeof setImmediate<"u"?setImmediate:null;function be(Be){for(var ze=J(re);ze!==null;){if(ze.callback===null)Z(re);else if(ze.startTime<=Be)Z(re),ze.sortIndex=ze.expirationTime,_(ie,ze);else break;ze=J(re)}}function Ae(Be){if(de=!1,be(Be),!ue)if(J(ie)!==null)ue=!0,Ce||(Ce=!0,Le());else{var ze=J(re);ze!==null&&He(Ae,ze.startTime-Be)}}var Ce=!1,Ee=-1,Re=5,Te=-1;function Me(){return pe?!0:!(G.unstable_now()-Te<Re)}function Ne(){if(pe=!1,Ce){var Be=G.unstable_now();Te=Be;var ze=!0;try{e:{ue=!1,de&&(de=!1,_e(Ee),Ee=-1),le=!0;var Fe=ae;try{t:{for(be(Be),se=J(ie);se!==null&&!(se.expirationTime>Be&&Me());){var $e=se.callback;if(typeof $e=="function"){se.callback=null,ae=se.priorityLevel;var Xe=$e(se.expirationTime<=Be);if(Be=G.unstable_now(),typeof Xe=="function"){se.callback=Xe,be(Be),ze=!0;break t}se===J(ie)&&Z(ie),be(Be)}else Z(ie);se=J(ie)}if(se!==null)ze=!0;else{var je=J(re);je!==null&&He(Ae,je.startTime-Be),ze=!1}}break e}finally{se=null,ae=Fe,le=!1}ze=void 0}}finally{ze?Le():Ce=!1}}}var Le;if(typeof ye=="function")Le=function(){ye(Ne)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,Ge=Ie.port2;Ie.port1.onmessage=Ne,Le=function(){Ge.postMessage(null)}}else Le=function(){fe(Ne,0)};function He(Be,ze){Ee=fe(function(){Be(G.unstable_now())},ze)}G.unstable_IdlePriority=5,G.unstable_ImmediatePriority=1,G.unstable_LowPriority=4,G.unstable_NormalPriority=3,G.unstable_Profiling=null,G.unstable_UserBlockingPriority=2,G.unstable_cancelCallback=function(Be){Be.callback=null},G.unstable_forceFrameRate=function(Be){0>Be||125<Be?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Re=0<Be?Math.floor(1e3/Be):5},G.unstable_getCurrentPriorityLevel=function(){return ae},G.unstable_next=function(Be){switch(ae){case 1:case 2:case 3:var ze=3;break;default:ze=ae}var Fe=ae;ae=ze;try{return Be()}finally{ae=Fe}},G.unstable_requestPaint=function(){pe=!0},G.unstable_runWithPriority=function(Be,ze){switch(Be){case 1:case 2:case 3:case 4:case 5:break;default:Be=3}var Fe=ae;ae=Be;try{return ze()}finally{ae=Fe}},G.unstable_scheduleCallback=function(Be,ze,Fe){var $e=G.unstable_now();switch(typeof Fe=="object"&&Fe!==null?(Fe=Fe.delay,Fe=typeof Fe=="number"&&0<Fe?$e+Fe:$e):Fe=$e,Be){case 1:var Xe=-1;break;case 2:Xe=250;break;case 5:Xe=1073741823;break;case 4:Xe=1e4;break;default:Xe=5e3}return Xe=Fe+Xe,Be={id:oe++,callback:ze,priorityLevel:Be,startTime:Fe,expirationTime:Xe,sortIndex:-1},Fe>$e?(Be.sortIndex=Fe,_(re,Be),J(ie)===null&&Be===J(re)&&(de?(_e(Ee),Ee=-1):de=!0,He(Ae,Fe-$e))):(Be.sortIndex=Xe,_(ie,Be),ue||le||(ue=!0,Ce||(Ce=!0,Le()))),Be},G.unstable_shouldYield=Me,G.unstable_wrapCallback=function(Be){var ze=ae;return function(){var Fe=ae;ae=ze;try{return Be.apply(this,arguments)}finally{ae=Fe}}}})(scheduler_production$2)),scheduler_production$2}var hasRequiredScheduler$2;function requireScheduler$2(){return hasRequiredScheduler$2||(hasRequiredScheduler$2=1,scheduler$2.exports=requireScheduler_production$2()),scheduler$2.exports}var reactDom={exports:{}},reactDom_production={};var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var G=requireReact();function _(ie){var re="https://react.dev/errors/"+ie;if(1<arguments.length){re+="?args[]="+encodeURIComponent(arguments[1]);for(var oe=2;oe<arguments.length;oe++)re+="&args[]="+encodeURIComponent(arguments[oe])}return"Minified React error #"+ie+"; visit "+re+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function J(){}var Z={d:{f:J,r:function(){throw Error(_(522))},D:J,C:J,L:J,m:J,X:J,S:J,M:J},p:0,findDOMNode:null},Q=Symbol.for("react.portal");function ee(ie,re,oe){var se=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Q,key:se==null?null:""+se,children:ie,containerInfo:re,implementation:oe}}var te=G.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function ne(ie,re){if(ie==="font")return"";if(typeof re=="string")return re==="use-credentials"?re:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Z,reactDom_production.createPortal=function(ie,re){var oe=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!re||re.nodeType!==1&&re.nodeType!==9&&re.nodeType!==11)throw Error(_(299));return ee(ie,re,null,oe)},reactDom_production.flushSync=function(ie){var re=te.T,oe=Z.p;try{if(te.T=null,Z.p=2,ie)return ie()}finally{te.T=re,Z.p=oe,Z.d.f()}},reactDom_production.preconnect=function(ie,re){typeof ie=="string"&&(re?(re=re.crossOrigin,re=typeof re=="string"?re==="use-credentials"?re:"":void 0):re=null,Z.d.C(ie,re))},reactDom_production.prefetchDNS=function(ie){typeof ie=="string"&&Z.d.D(ie)},reactDom_production.preinit=function(ie,re){if(typeof ie=="string"&&re&&typeof re.as=="string"){var oe=re.as,se=ne(oe,re.crossOrigin),ae=typeof re.integrity=="string"?re.integrity:void 0,le=typeof re.fetchPriority=="string"?re.fetchPriority:void 0;oe==="style"?Z.d.S(ie,typeof re.precedence=="string"?re.precedence:void 0,{crossOrigin:se,integrity:ae,fetchPriority:le}):oe==="script"&&Z.d.X(ie,{crossOrigin:se,integrity:ae,fetchPriority:le,nonce:typeof re.nonce=="string"?re.nonce:void 0})}},reactDom_production.preinitModule=function(ie,re){if(typeof ie=="string")if(typeof re=="object"&&re!==null){if(re.as==null||re.as==="script"){var oe=ne(re.as,re.crossOrigin);Z.d.M(ie,{crossOrigin:oe,integrity:typeof re.integrity=="string"?re.integrity:void 0,nonce:typeof re.nonce=="string"?re.nonce:void 0})}}else re==null&&Z.d.M(ie)},reactDom_production.preload=function(ie,re){if(typeof ie=="string"&&typeof re=="object"&&re!==null&&typeof re.as=="string"){var oe=re.as,se=ne(oe,re.crossOrigin);Z.d.L(ie,oe,{crossOrigin:se,integrity:typeof re.integrity=="string"?re.integrity:void 0,nonce:typeof re.nonce=="string"?re.nonce:void 0,type:typeof re.type=="string"?re.type:void 0,fetchPriority:typeof re.fetchPriority=="string"?re.fetchPriority:void 0,referrerPolicy:typeof re.referrerPolicy=="string"?re.referrerPolicy:void 0,imageSrcSet:typeof re.imageSrcSet=="string"?re.imageSrcSet:void 0,imageSizes:typeof re.imageSizes=="string"?re.imageSizes:void 0,media:typeof re.media=="string"?re.media:void 0})}},reactDom_production.preloadModule=function(ie,re){if(typeof ie=="string")if(re){var oe=ne(re.as,re.crossOrigin);Z.d.m(ie,{as:typeof re.as=="string"&&re.as!=="script"?re.as:void 0,crossOrigin:oe,integrity:typeof re.integrity=="string"?re.integrity:void 0})}else Z.d.m(ie)},reactDom_production.requestFormReset=function(ie){Z.d.r(ie)},reactDom_production.unstable_batchedUpdates=function(ie,re){return ie(re)},reactDom_production.useFormState=function(ie,re,oe){return te.H.useFormState(ie,re,oe)},reactDom_production.useFormStatus=function(){return te.H.useHostTransitionStatus()},reactDom_production.version="19.2.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function G(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(G)}catch(_){console.error(_)}}return G(),reactDom.exports=requireReactDom_production(),reactDom.exports}var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var G=requireScheduler$2(),_=requireReact(),J=requireReactDom();function Z(ce){var he="https://react.dev/errors/"+ce;if(1<arguments.length){he+="?args[]="+encodeURIComponent(arguments[1]);for(var ve=2;ve<arguments.length;ve++)he+="&args[]="+encodeURIComponent(arguments[ve])}return"Minified React error #"+ce+"; visit "+he+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Q(ce){return!(!ce||ce.nodeType!==1&&ce.nodeType!==9&&ce.nodeType!==11)}function ee(ce){var he=ce,ve=ce;if(ce.alternate)for(;he.return;)he=he.return;else{ce=he;do he=ce,(he.flags&4098)!==0&&(ve=he.return),ce=he.return;while(ce)}return he.tag===3?ve:null}function te(ce){if(ce.tag===13){var he=ce.memoizedState;if(he===null&&(ce=ce.alternate,ce!==null&&(he=ce.memoizedState)),he!==null)return he.dehydrated}return null}function ne(ce){if(ce.tag===31){var he=ce.memoizedState;if(he===null&&(ce=ce.alternate,ce!==null&&(he=ce.memoizedState)),he!==null)return he.dehydrated}return null}function ie(ce){if(ee(ce)!==ce)throw Error(Z(188))}function re(ce){var he=ce.alternate;if(!he){if(he=ee(ce),he===null)throw Error(Z(188));return he!==ce?null:ce}for(var ve=ce,xe=he;;){var we=ve.return;if(we===null)break;var Oe=we.alternate;if(Oe===null){if(xe=we.return,xe!==null){ve=xe;continue}break}if(we.child===Oe.child){for(Oe=we.child;Oe;){if(Oe===ve)return ie(we),ce;if(Oe===xe)return ie(we),he;Oe=Oe.sibling}throw Error(Z(188))}if(ve.return!==xe.return)ve=we,xe=Oe;else{for(var Ue=!1,We=we.child;We;){if(We===ve){Ue=!0,ve=we,xe=Oe;break}if(We===xe){Ue=!0,xe=we,ve=Oe;break}We=We.sibling}if(!Ue){for(We=Oe.child;We;){if(We===ve){Ue=!0,ve=Oe,xe=we;break}if(We===xe){Ue=!0,xe=Oe,ve=we;break}We=We.sibling}if(!Ue)throw Error(Z(189))}}if(ve.alternate!==xe)throw Error(Z(190))}if(ve.tag!==3)throw Error(Z(188));return ve.stateNode.current===ve?ce:he}function oe(ce){var he=ce.tag;if(he===5||he===26||he===27||he===6)return ce;for(ce=ce.child;ce!==null;){if(he=oe(ce),he!==null)return he;ce=ce.sibling}return null}var se=Object.assign,ae=Symbol.for("react.element"),le=Symbol.for("react.transitional.element"),ue=Symbol.for("react.portal"),de=Symbol.for("react.fragment"),pe=Symbol.for("react.strict_mode"),fe=Symbol.for("react.profiler"),_e=Symbol.for("react.consumer"),ye=Symbol.for("react.context"),be=Symbol.for("react.forward_ref"),Ae=Symbol.for("react.suspense"),Ce=Symbol.for("react.suspense_list"),Ee=Symbol.for("react.memo"),Re=Symbol.for("react.lazy"),Te=Symbol.for("react.activity"),Me=Symbol.for("react.memo_cache_sentinel"),Ne=Symbol.iterator;function Le(ce){return ce===null||typeof ce!="object"?null:(ce=Ne&&ce[Ne]||ce["@@iterator"],typeof ce=="function"?ce:null)}var Ie=Symbol.for("react.client.reference");function Ge(ce){if(ce==null)return null;if(typeof ce=="function")return ce.$$typeof===Ie?null:ce.displayName||ce.name||null;if(typeof ce=="string")return ce;switch(ce){case de:return"Fragment";case fe:return"Profiler";case pe:return"StrictMode";case Ae:return"Suspense";case Ce:return"SuspenseList";case Te:return"Activity"}if(typeof ce=="object")switch(ce.$$typeof){case ue:return"Portal";case ye:return ce.displayName||"Context";case _e:return(ce._context.displayName||"Context")+".Consumer";case be:var he=ce.render;return ce=ce.displayName,ce||(ce=he.displayName||he.name||"",ce=ce!==""?"ForwardRef("+ce+")":"ForwardRef"),ce;case Ee:return he=ce.displayName||null,he!==null?he:Ge(ce.type)||"Memo";case Re:he=ce._payload,ce=ce._init;try{return Ge(ce(he))}catch{}}return null}var He=Array.isArray,Be=_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ze=J.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Fe={pending:!1,data:null,method:null,action:null},$e=[],Xe=-1;function je(ce){return{current:ce}}function qe(ce){0>Xe||(ce.current=$e[Xe],$e[Xe]=null,Xe--)}function Ze(ce,he){Xe++,$e[Xe]=ce.current,ce.current=he}var st=je(null),St=je(null),it=je(null),lt=je(null);function ft(ce,he){switch(Ze(it,he),Ze(St,ce),Ze(st,null),he.nodeType){case 9:case 11:ce=(ce=he.documentElement)&&(ce=ce.namespaceURI)?u0(ce):0;break;default:if(ce=he.tagName,he=he.namespaceURI)he=u0(he),ce=h0(he,ce);else switch(ce){case"svg":ce=1;break;case"math":ce=2;break;default:ce=0}}qe(st),Ze(st,ce)}function kt(){qe(st),qe(St),qe(it)}function Ht(ce){ce.memoizedState!==null&&Ze(lt,ce);var he=st.current,ve=h0(he,ce.type);he!==ve&&(Ze(St,ce),Ze(st,ve))}function Wt(ce){St.current===ce&&(qe(st),qe(St)),lt.current===ce&&(qe(lt),Hh._currentValue=Fe)}var ni,jt;function pt(ce){if(ni===void 0)try{throw Error()}catch(ve){var he=ve.stack.trim().match(/\n( *(at )?)/);ni=he&&he[1]||"",jt=-1<ve.stack.indexOf(`
    at`)?" (<anonymous>)":-1<ve.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ni+ce+jt}var Ke=!1;function Mt(ce,he){if(!ce||Ke)return"";Ke=!0;var ve=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var xe={DetermineComponentFrameRoot:function(){try{if(he){var Jt=function(){throw Error()};if(Object.defineProperty(Jt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Jt,[])}catch(It){var Ot=It}Reflect.construct(ce,[],Jt)}else{try{Jt.call()}catch(It){Ot=It}ce.call(Jt.prototype)}}else{try{throw Error()}catch(It){Ot=It}(Jt=ce())&&typeof Jt.catch=="function"&&Jt.catch(function(){})}}catch(It){if(It&&Ot&&typeof It.stack=="string")return[It.stack,Ot.stack]}return[null,null]}};xe.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var we=Object.getOwnPropertyDescriptor(xe.DetermineComponentFrameRoot,"name");we&&we.configurable&&Object.defineProperty(xe.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Oe=xe.DetermineComponentFrameRoot(),Ue=Oe[0],We=Oe[1];if(Ue&&We){var ot=Ue.split(`
`),Et=We.split(`
`);for(we=xe=0;xe<ot.length&&!ot[xe].includes("DetermineComponentFrameRoot");)xe++;for(;we<Et.length&&!Et[we].includes("DetermineComponentFrameRoot");)we++;if(xe===ot.length||we===Et.length)for(xe=ot.length-1,we=Et.length-1;1<=xe&&0<=we&&ot[xe]!==Et[we];)we--;for(;1<=xe&&0<=we;xe--,we--)if(ot[xe]!==Et[we]){if(xe!==1||we!==1)do if(xe--,we--,0>we||ot[xe]!==Et[we]){var Gt=`
`+ot[xe].replace(" at new "," at ");return ce.displayName&&Gt.includes("<anonymous>")&&(Gt=Gt.replace("<anonymous>",ce.displayName)),Gt}while(1<=xe&&0<=we);break}}}finally{Ke=!1,Error.prepareStackTrace=ve}return(ve=ce?ce.displayName||ce.name:"")?pt(ve):""}function Bt(ce,he){switch(ce.tag){case 26:case 27:case 5:return pt(ce.type);case 16:return pt("Lazy");case 13:return ce.child!==he&&he!==null?pt("Suspense Fallback"):pt("Suspense");case 19:return pt("SuspenseList");case 0:case 15:return Mt(ce.type,!1);case 11:return Mt(ce.type.render,!1);case 1:return Mt(ce.type,!0);case 31:return pt("Activity");default:return""}}function Lt(ce){try{var he="",ve=null;do he+=Bt(ce,ve),ve=ce,ce=ce.return;while(ce);return he}catch(xe){return`
Error generating stack: `+xe.message+`
`+xe.stack}}var Ft=Object.prototype.hasOwnProperty,ai=G.unstable_scheduleCallback,Qt=G.unstable_cancelCallback,hi=G.unstable_shouldYield,Qe=G.unstable_requestPaint,Ye=G.unstable_now,_t=G.unstable_getCurrentPriorityLevel,dt=G.unstable_ImmediatePriority,yt=G.unstable_UserBlockingPriority,Nt=G.unstable_NormalPriority,fi=G.unstable_LowPriority,Zt=G.unstable_IdlePriority,Ut=G.log,qt=G.unstable_setDisableYieldValue,Rt=null,Pt=null;function vt(ce){if(typeof Ut=="function"&&qt(ce),Pt&&typeof Pt.setStrictMode=="function")try{Pt.setStrictMode(Rt,ce)}catch{}}var tt=Math.clz32?Math.clz32:rt,et=Math.log,ei=Math.LN2;function rt(ce){return ce>>>=0,ce===0?32:31-(et(ce)/ei|0)|0}var ti=256,zt=262144,ii=4194304;function Kt(ce){var he=ce&42;if(he!==0)return he;switch(ce&-ce){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return ce&261888;case 262144:case 524288:case 1048576:case 2097152:return ce&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return ce&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return ce}}function Vt(ce,he,ve){var xe=ce.pendingLanes;if(xe===0)return 0;var we=0,Oe=ce.suspendedLanes,Ue=ce.pingedLanes;ce=ce.warmLanes;var We=xe&134217727;return We!==0?(xe=We&~Oe,xe!==0?we=Kt(xe):(Ue&=We,Ue!==0?we=Kt(Ue):ve||(ve=We&~ce,ve!==0&&(we=Kt(ve))))):(We=xe&~Oe,We!==0?we=Kt(We):Ue!==0?we=Kt(Ue):ve||(ve=xe&~ce,ve!==0&&(we=Kt(ve)))),we===0?0:he!==0&&he!==we&&(he&Oe)===0&&(Oe=we&-we,ve=he&-he,Oe>=ve||Oe===32&&(ve&4194048)!==0)?he:we}function di(ce,he){return(ce.pendingLanes&~(ce.suspendedLanes&~ce.pingedLanes)&he)===0}function pi(ce,he){switch(ce){case 1:case 2:case 4:case 8:case 64:return he+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return he+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Di(){var ce=ii;return ii<<=1,(ii&62914560)===0&&(ii=4194304),ce}function Si(ce){for(var he=[],ve=0;31>ve;ve++)he.push(ce);return he}function Ui(ce,he){ce.pendingLanes|=he,he!==268435456&&(ce.suspendedLanes=0,ce.pingedLanes=0,ce.warmLanes=0)}function vn(ce,he,ve,xe,we,Oe){var Ue=ce.pendingLanes;ce.pendingLanes=ve,ce.suspendedLanes=0,ce.pingedLanes=0,ce.warmLanes=0,ce.expiredLanes&=ve,ce.entangledLanes&=ve,ce.errorRecoveryDisabledLanes&=ve,ce.shellSuspendCounter=0;var We=ce.entanglements,ot=ce.expirationTimes,Et=ce.hiddenUpdates;for(ve=Ue&~ve;0<ve;){var Gt=31-tt(ve),Jt=1<<Gt;We[Gt]=0,ot[Gt]=-1;var Ot=Et[Gt];if(Ot!==null)for(Et[Gt]=null,Gt=0;Gt<Ot.length;Gt++){var It=Ot[Gt];It!==null&&(It.lane&=-536870913)}ve&=~Jt}xe!==0&&Tr(ce,xe,0),Oe!==0&&we===0&&ce.tag!==0&&(ce.suspendedLanes|=Oe&~(Ue&~he))}function Tr(ce,he,ve){ce.pendingLanes|=he,ce.suspendedLanes&=~he;var xe=31-tt(he);ce.entangledLanes|=he,ce.entanglements[xe]=ce.entanglements[xe]|1073741824|ve&261930}function Ln(ce,he){var ve=ce.entangledLanes|=he;for(ce=ce.entanglements;ve;){var xe=31-tt(ve),we=1<<xe;we&he|ce[xe]&he&&(ce[xe]|=he),ve&=~we}}function wr(ce,he){var ve=he&-he;return ve=(ve&42)!==0?1:_n(ve),(ve&(ce.suspendedLanes|he))!==0?0:ve}function _n(ce){switch(ce){case 2:ce=1;break;case 8:ce=4;break;case 32:ce=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:ce=128;break;case 268435456:ce=134217728;break;default:ce=0}return ce}function Ir(ce){return ce&=-ce,2<ce?8<ce?(ce&134217727)!==0?32:268435456:8:2}function Bn(){var ce=ze.p;return ce!==0?ce:(ce=window.event,ce===void 0?32:L0(ce.type))}function $n(ce,he){var ve=ze.p;try{return ze.p=ce,he()}finally{ze.p=ve}}var Mn=Math.random().toString(36).slice(2),ki="__reactFiber$"+Mn,On="__reactProps$"+Mn,Ur="__reactContainer$"+Mn,ks="__reactEvents$"+Mn,ra="__reactListeners$"+Mn,Al="__reactHandles$"+Mn,sa="__reactResources$"+Mn,ct="__reactMarker$"+Mn;function Tt(ce){delete ce[ki],delete ce[On],delete ce[ks],delete ce[ra],delete ce[Al]}function Xt(ce){var he=ce[ki];if(he)return he;for(var ve=ce.parentNode;ve;){if(he=ve[Ur]||ve[ki]){if(ve=he.alternate,he.child!==null||ve!==null&&ve.child!==null)for(ce=_0(ce);ce!==null;){if(ve=ce[ki])return ve;ce=_0(ce)}return he}ce=ve,ve=ce.parentNode}return null}function Ve(ce){if(ce=ce[ki]||ce[Ur]){var he=ce.tag;if(he===5||he===6||he===13||he===31||he===26||he===27||he===3)return ce}return null}function nt(ce){var he=ce.tag;if(he===5||he===26||he===27||he===6)return ce.stateNode;throw Error(Z(33))}function gt(ce){var he=ce[sa];return he||(he=ce[sa]={hoistableStyles:new Map,hoistableScripts:new Map}),he}function mt(ce){ce[ct]=!0}var ut=new Set,ri={};function ci(ce,he){ui(ce,he),ui(ce+"Capture",he)}function ui(ce,he){for(ri[ce]=he,ce=0;ce<he.length;ce++)ut.add(he[ce])}var oi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vi={},Ti={};function bi(ce){return Ft.call(Ti,ce)?!0:Ft.call(vi,ce)?!1:oi.test(ce)?Ti[ce]=!0:(vi[ce]=!0,!1)}function Ii(ce,he,ve){if(bi(he))if(ve===null)ce.removeAttribute(he);else{switch(typeof ve){case"undefined":case"function":case"symbol":ce.removeAttribute(he);return;case"boolean":var xe=he.toLowerCase().slice(0,5);if(xe!=="data-"&&xe!=="aria-"){ce.removeAttribute(he);return}}ce.setAttribute(he,""+ve)}}function Ji(ce,he,ve){if(ve===null)ce.removeAttribute(he);else{switch(typeof ve){case"undefined":case"function":case"symbol":case"boolean":ce.removeAttribute(he);return}ce.setAttribute(he,""+ve)}}function Ki(ce,he,ve,xe){if(xe===null)ce.removeAttribute(ve);else{switch(typeof xe){case"undefined":case"function":case"symbol":case"boolean":ce.removeAttribute(ve);return}ce.setAttributeNS(he,ve,""+xe)}}function Hi(ce){switch(typeof ce){case"bigint":case"boolean":case"number":case"string":case"undefined":return ce;case"object":return ce;default:return""}}function on(ce){var he=ce.type;return(ce=ce.nodeName)&&ce.toLowerCase()==="input"&&(he==="checkbox"||he==="radio")}function Mi(ce,he,ve){var xe=Object.getOwnPropertyDescriptor(ce.constructor.prototype,he);if(!ce.hasOwnProperty(he)&&typeof xe<"u"&&typeof xe.get=="function"&&typeof xe.set=="function"){var we=xe.get,Oe=xe.set;return Object.defineProperty(ce,he,{configurable:!0,get:function(){return we.call(this)},set:function(Ue){ve=""+Ue,Oe.call(this,Ue)}}),Object.defineProperty(ce,he,{enumerable:xe.enumerable}),{getValue:function(){return ve},setValue:function(Ue){ve=""+Ue},stopTracking:function(){ce._valueTracker=null,delete ce[he]}}}}function pn(ce){if(!ce._valueTracker){var he=on(ce)?"checked":"value";ce._valueTracker=Mi(ce,he,""+ce[he])}}function Yi(ce){if(!ce)return!1;var he=ce._valueTracker;if(!he)return!0;var ve=he.getValue(),xe="";return ce&&(xe=on(ce)?ce.checked?"true":"false":ce.value),ce=xe,ce!==ve?(he.setValue(ce),!0):!1}function Wn(ce){if(ce=ce||(typeof document<"u"?document:void 0),typeof ce>"u")return null;try{return ce.activeElement||ce.body}catch{return ce.body}}var aa=/[\n"\\]/g;function yn(ce){return ce.replace(aa,function(he){return"\\"+he.charCodeAt(0).toString(16)+" "})}function Is(ce,he,ve,xe,we,Oe,Ue,We){ce.name="",Ue!=null&&typeof Ue!="function"&&typeof Ue!="symbol"&&typeof Ue!="boolean"?ce.type=Ue:ce.removeAttribute("type"),he!=null?Ue==="number"?(he===0&&ce.value===""||ce.value!=he)&&(ce.value=""+Hi(he)):ce.value!==""+Hi(he)&&(ce.value=""+Hi(he)):Ue!=="submit"&&Ue!=="reset"||ce.removeAttribute("value"),he!=null?Qn(ce,Ue,Hi(he)):ve!=null?Qn(ce,Ue,Hi(ve)):xe!=null&&ce.removeAttribute("value"),we==null&&Oe!=null&&(ce.defaultChecked=!!Oe),we!=null&&(ce.checked=we&&typeof we!="function"&&typeof we!="symbol"),We!=null&&typeof We!="function"&&typeof We!="symbol"&&typeof We!="boolean"?ce.name=""+Hi(We):ce.removeAttribute("name")}function bn(ce,he,ve,xe,we,Oe,Ue,We){if(Oe!=null&&typeof Oe!="function"&&typeof Oe!="symbol"&&typeof Oe!="boolean"&&(ce.type=Oe),he!=null||ve!=null){if(!(Oe!=="submit"&&Oe!=="reset"||he!=null)){pn(ce);return}ve=ve!=null?""+Hi(ve):"",he=he!=null?""+Hi(he):ve,We||he===ce.value||(ce.value=he),ce.defaultValue=he}xe=xe??we,xe=typeof xe!="function"&&typeof xe!="symbol"&&!!xe,ce.checked=We?ce.checked:!!xe,ce.defaultChecked=!!xe,Ue!=null&&typeof Ue!="function"&&typeof Ue!="symbol"&&typeof Ue!="boolean"&&(ce.name=Ue),pn(ce)}function Qn(ce,he,ve){he==="number"&&Wn(ce.ownerDocument)===ce||ce.defaultValue===""+ve||(ce.defaultValue=""+ve)}function er(ce,he,ve,xe){if(ce=ce.options,he){he={};for(var we=0;we<ve.length;we++)he["$"+ve[we]]=!0;for(ve=0;ve<ce.length;ve++)we=he.hasOwnProperty("$"+ce[ve].value),ce[ve].selected!==we&&(ce[ve].selected=we),we&&xe&&(ce[ve].defaultSelected=!0)}else{for(ve=""+Hi(ve),he=null,we=0;we<ce.length;we++){if(ce[we].value===ve){ce[we].selected=!0,xe&&(ce[we].defaultSelected=!0);return}he!==null||ce[we].disabled||(he=ce[we])}he!==null&&(he.selected=!0)}}function tr(ce,he,ve){if(he!=null&&(he=""+Hi(he),he!==ce.value&&(ce.value=he),ve==null)){ce.defaultValue!==he&&(ce.defaultValue=he);return}ce.defaultValue=ve!=null?""+Hi(ve):""}function kn(ce,he,ve,xe){if(he==null){if(xe!=null){if(ve!=null)throw Error(Z(92));if(He(xe)){if(1<xe.length)throw Error(Z(93));xe=xe[0]}ve=xe}ve==null&&(ve=""),he=ve}ve=Hi(he),ce.defaultValue=ve,xe=ce.textContent,xe===ve&&xe!==""&&xe!==null&&(ce.value=xe),pn(ce)}function Cs(ce,he){if(he){var ve=ce.firstChild;if(ve&&ve===ce.lastChild&&ve.nodeType===3){ve.nodeValue=he;return}}ce.textContent=he}var ms=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sl(ce,he,ve){var xe=he.indexOf("--")===0;ve==null||typeof ve=="boolean"||ve===""?xe?ce.setProperty(he,""):he==="float"?ce.cssFloat="":ce[he]="":xe?ce.setProperty(he,ve):typeof ve!="number"||ve===0||ms.has(he)?he==="float"?ce.cssFloat=ve:ce[he]=(""+ve).trim():ce[he]=ve+"px"}function Su(ce,he,ve){if(he!=null&&typeof he!="object")throw Error(Z(62));if(ce=ce.style,ve!=null){for(var xe in ve)!ve.hasOwnProperty(xe)||he!=null&&he.hasOwnProperty(xe)||(xe.indexOf("--")===0?ce.setProperty(xe,""):xe==="float"?ce.cssFloat="":ce[xe]="");for(var we in he)xe=he[we],he.hasOwnProperty(we)&&ve[we]!==xe&&Sl(ce,we,xe)}else for(var Oe in he)he.hasOwnProperty(Oe)&&Sl(ce,Oe,he[Oe])}function Cl(ce){if(ce.indexOf("-")===-1)return!1;switch(ce){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $h=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function El(ce){return Wh.test(""+ce)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":ce}function Us(){}var Ml=null;function pc(ce){return ce=ce.target||ce.srcElement||window,ce.correspondingUseElement&&(ce=ce.correspondingUseElement),ce.nodeType===3?ce.parentNode:ce}var co=null,Pa=null;function Cu(ce){var he=Ve(ce);if(he&&(ce=he.stateNode)){var ve=ce[On]||null;e:switch(ce=he.stateNode,he.type){case"input":if(Is(ce,ve.value,ve.defaultValue,ve.defaultValue,ve.checked,ve.defaultChecked,ve.type,ve.name),he=ve.name,ve.type==="radio"&&he!=null){for(ve=ce;ve.parentNode;)ve=ve.parentNode;for(ve=ve.querySelectorAll('input[name="'+yn(""+he)+'"][type="radio"]'),he=0;he<ve.length;he++){var xe=ve[he];if(xe!==ce&&xe.form===ce.form){var we=xe[On]||null;if(!we)throw Error(Z(90));Is(xe,we.value,we.defaultValue,we.defaultValue,we.checked,we.defaultChecked,we.type,we.name)}}for(he=0;he<ve.length;he++)xe=ve[he],xe.form===ce.form&&Yi(xe)}break e;case"textarea":tr(ce,ve.value,ve.defaultValue);break e;case"select":he=ve.value,he!=null&&er(ce,!!ve.multiple,he,!1)}}}var mc=!1;function Eu(ce,he,ve){if(mc)return ce(he,ve);mc=!0;try{var xe=ce(he);return xe}finally{if(mc=!1,(co!==null||Pa!==null)&&(Je(),co&&(he=co,ce=Pa,Pa=co=null,Cu(he),ce)))for(he=0;he<ce.length;he++)Cu(ce[he])}}function uo(ce,he){var ve=ce.stateNode;if(ve===null)return null;var xe=ve[On]||null;if(xe===null)return null;ve=xe[he];e:switch(he){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(xe=!xe.disabled)||(ce=ce.type,xe=!(ce==="button"||ce==="input"||ce==="select"||ce==="textarea")),ce=!xe;break e;default:ce=!1}if(ce)return null;if(ve&&typeof ve!="function")throw Error(Z(231,he,typeof ve));return ve}var zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gc=!1;if(zs)try{var Tl={};Object.defineProperty(Tl,"passive",{get:function(){gc=!0}}),window.addEventListener("test",Tl,Tl),window.removeEventListener("test",Tl,Tl)}catch{gc=!1}var Ra=null,vc=null,Oa=null;function _c(){if(Oa)return Oa;var ce,he=vc,ve=he.length,xe,we="value"in Ra?Ra.value:Ra.textContent,Oe=we.length;for(ce=0;ce<ve&&he[ce]===we[ce];ce++);var Ue=ve-ce;for(xe=1;xe<=Ue&&he[ve-xe]===we[Oe-xe];xe++);return Oa=we.slice(ce,1<xe?1-xe:void 0)}function ho(ce){var he=ce.keyCode;return"charCode"in ce?(ce=ce.charCode,ce===0&&he===13&&(ce=13)):ce=he,ce===10&&(ce=13),32<=ce||ce===13?ce:0}function wl(){return!0}function Mu(){return!1}function vr(ce){function he(ve,xe,we,Oe,Ue){this._reactName=ve,this._targetInst=we,this.type=xe,this.nativeEvent=Oe,this.target=Ue,this.currentTarget=null;for(var We in ce)ce.hasOwnProperty(We)&&(ve=ce[We],this[We]=ve?ve(Oe):Oe[We]);return this.isDefaultPrevented=(Oe.defaultPrevented!=null?Oe.defaultPrevented:Oe.returnValue===!1)?wl:Mu,this.isPropagationStopped=Mu,this}return se(he.prototype,{preventDefault:function(){this.defaultPrevented=!0;var ve=this.nativeEvent;ve&&(ve.preventDefault?ve.preventDefault():typeof ve.returnValue!="unknown"&&(ve.returnValue=!1),this.isDefaultPrevented=wl)},stopPropagation:function(){var ve=this.nativeEvent;ve&&(ve.stopPropagation?ve.stopPropagation():typeof ve.cancelBubble!="unknown"&&(ve.cancelBubble=!0),this.isPropagationStopped=wl)},persist:function(){},isPersistent:wl}),he}var Na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(ce){return ce.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pl=vr(Na),Es=se({},Na,{view:0,detail:0}),yc=vr(Es),bc,Rl,Uo,Ol=se({},Es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dl,button:0,buttons:0,relatedTarget:function(ce){return ce.relatedTarget===void 0?ce.fromElement===ce.srcElement?ce.toElement:ce.fromElement:ce.relatedTarget},movementX:function(ce){return"movementX"in ce?ce.movementX:(ce!==Uo&&(Uo&&ce.type==="mousemove"?(bc=ce.screenX-Uo.screenX,Rl=ce.screenY-Uo.screenY):Rl=bc=0,Uo=ce),bc)},movementY:function(ce){return"movementY"in ce?ce.movementY:Rl}}),Jh=vr(Ol),ur=se({},Ol,{dataTransfer:0}),Kh=vr(ur),Zh=se({},Es,{relatedTarget:0}),xc=vr(Zh),Qh=se({},Na,{animationName:0,elapsedTime:0,pseudoElement:0}),ed=vr(Qh),Nl=se({},Na,{clipboardData:function(ce){return"clipboardData"in ce?ce.clipboardData:window.clipboardData}}),Tu=vr(Nl),td=se({},Na,{data:0}),wu=vr(td),id={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ru={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nd(ce){var he=this.nativeEvent;return he.getModifierState?he.getModifierState(ce):(ce=Ru[ce])?!!he[ce]:!1}function Dl(){return nd}var Ou=se({},Es,{key:function(ce){if(ce.key){var he=id[ce.key]||ce.key;if(he!=="Unidentified")return he}return ce.type==="keypress"?(ce=ho(ce),ce===13?"Enter":String.fromCharCode(ce)):ce.type==="keydown"||ce.type==="keyup"?Pu[ce.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dl,charCode:function(ce){return ce.type==="keypress"?ho(ce):0},keyCode:function(ce){return ce.type==="keydown"||ce.type==="keyup"?ce.keyCode:0},which:function(ce){return ce.type==="keypress"?ho(ce):ce.type==="keydown"||ce.type==="keyup"?ce.keyCode:0}}),Nu=vr(Ou),rd=se({},Ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ac=vr(rd),sd=se({},Es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dl}),oa=vr(sd),Du=se({},Na,{propertyName:0,elapsedTime:0,pseudoElement:0}),pf=vr(Du),ad=se({},Ol,{deltaX:function(ce){return"deltaX"in ce?ce.deltaX:"wheelDeltaX"in ce?-ce.wheelDeltaX:0},deltaY:function(ce){return"deltaY"in ce?ce.deltaY:"wheelDeltaY"in ce?-ce.wheelDeltaY:"wheelDelta"in ce?-ce.wheelDelta:0},deltaZ:0,deltaMode:0}),Da=vr(ad),la=se({},Na,{newState:0,oldState:0}),Lu=vr(la),Bu=[9,13,27,32],fo=zs&&"CompositionEvent"in window,La=null;zs&&"documentMode"in document&&(La=document.documentMode);var po=zs&&"TextEvent"in window&&!La,hr=zs&&(!fo||La&&8<La&&11>=La),Ll=" ",ku=!1;function Cc(ce,he){switch(ce){case"keyup":return Bu.indexOf(he.keyCode)!==-1;case"keydown":return he.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zo(ce){return ce=ce.detail,typeof ce=="object"&&"data"in ce?ce.data:null}var Ba=!1;function Ec(ce,he){switch(ce){case"compositionend":return zo(he);case"keypress":return he.which!==32?null:(ku=!0,Ll);case"textInput":return ce=he.data,ce===Ll&&ku?null:ce;default:return null}}function od(ce,he){if(Ba)return ce==="compositionend"||!fo&&Cc(ce,he)?(ce=_c(),Oa=vc=Ra=null,Ba=!1,ce):null;switch(ce){case"paste":return null;case"keypress":if(!(he.ctrlKey||he.altKey||he.metaKey)||he.ctrlKey&&he.altKey){if(he.char&&1<he.char.length)return he.char;if(he.which)return String.fromCharCode(he.which)}return null;case"compositionend":return hr&&he.locale!=="ko"?null:he.data;default:return null}}var Jr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iu(ce){var he=ce&&ce.nodeName&&ce.nodeName.toLowerCase();return he==="input"?!!Jr[ce.type]:he==="textarea"}function Mc(ce,he,ve,xe){co?Pa?Pa.push(xe):Pa=[xe]:co=xe,he=Zd(he,"onChange"),0<he.length&&(ve=new Pl("onChange","change",null,ve,xe),ce.push({event:ve,listeners:he}))}var jo=null,Fo=null;function Uu(ce){r0(ce,0)}function Vo(ce){var he=nt(ce);if(Yi(he))return ce}function zu(ce,he){if(ce==="change")return he}var Bl=!1;if(zs){var mo;if(zs){var Tn="oninput"in document;if(!Tn){var ld=document.createElement("div");ld.setAttribute("oninput","return;"),Tn=typeof ld.oninput=="function"}mo=Tn}else mo=!1;Bl=mo&&(!document.documentMode||9<document.documentMode)}function cd(){jo&&(jo.detachEvent("onpropertychange",ju),Fo=jo=null)}function ju(ce){if(ce.propertyName==="value"&&Vo(Fo)){var he=[];Mc(he,Fo,ce,pc(ce)),Eu(Uu,he)}}function kl(ce,he,ve){ce==="focusin"?(cd(),jo=he,Fo=ve,jo.attachEvent("onpropertychange",ju)):ce==="focusout"&&cd()}function ka(ce){if(ce==="selectionchange"||ce==="keyup"||ce==="keydown")return Vo(Fo)}function ud(ce,he){if(ce==="click")return Vo(he)}function hd(ce,he){if(ce==="input"||ce==="change")return Vo(he)}function go(ce,he){return ce===he&&(ce!==0||1/ce===1/he)||ce!==ce&&he!==he}var wn=typeof Object.is=="function"?Object.is:go;function Go(ce,he){if(wn(ce,he))return!0;if(typeof ce!="object"||ce===null||typeof he!="object"||he===null)return!1;var ve=Object.keys(ce),xe=Object.keys(he);if(ve.length!==xe.length)return!1;for(xe=0;xe<ve.length;xe++){var we=ve[xe];if(!Ft.call(he,we)||!wn(ce[we],he[we]))return!1}return!0}function Fu(ce){for(;ce&&ce.firstChild;)ce=ce.firstChild;return ce}function Vu(ce,he){var ve=Fu(ce);ce=0;for(var xe;ve;){if(ve.nodeType===3){if(xe=ce+ve.textContent.length,ce<=he&&xe>=he)return{node:ve,offset:he-ce};ce=xe}e:{for(;ve;){if(ve.nextSibling){ve=ve.nextSibling;break e}ve=ve.parentNode}ve=void 0}ve=Fu(ve)}}function wc(ce,he){return ce&&he?ce===he?!0:ce&&ce.nodeType===3?!1:he&&he.nodeType===3?wc(ce,he.parentNode):"contains"in ce?ce.contains(he):ce.compareDocumentPosition?!!(ce.compareDocumentPosition(he)&16):!1:!1}function Pc(ce){ce=ce!=null&&ce.ownerDocument!=null&&ce.ownerDocument.defaultView!=null?ce.ownerDocument.defaultView:window;for(var he=Wn(ce.document);he instanceof ce.HTMLIFrameElement;){try{var ve=typeof he.contentWindow.location.href=="string"}catch{ve=!1}if(ve)ce=he.contentWindow;else break;he=Wn(ce.document)}return he}function Ho(ce){var he=ce&&ce.nodeName&&ce.nodeName.toLowerCase();return he&&(he==="input"&&(ce.type==="text"||ce.type==="search"||ce.type==="tel"||ce.type==="url"||ce.type==="password")||he==="textarea"||ce.contentEditable==="true")}var dd=zs&&"documentMode"in document&&11>=document.documentMode,Yo=null,Rc=null,Xo=null,Kr=!1;function Oc(ce,he,ve){var xe=ve.window===ve?ve.document:ve.nodeType===9?ve:ve.ownerDocument;Kr||Yo==null||Yo!==Wn(xe)||(xe=Yo,"selectionStart"in xe&&Ho(xe)?xe={start:xe.selectionStart,end:xe.selectionEnd}:(xe=(xe.ownerDocument&&xe.ownerDocument.defaultView||window).getSelection(),xe={anchorNode:xe.anchorNode,anchorOffset:xe.anchorOffset,focusNode:xe.focusNode,focusOffset:xe.focusOffset}),Xo&&Go(Xo,xe)||(Xo=xe,xe=Zd(Rc,"onSelect"),0<xe.length&&(he=new Pl("onSelect","select",null,he,ve),ce.push({event:he,listeners:xe}),he.target=Yo)))}function Ia(ce,he){var ve={};return ve[ce.toLowerCase()]=he.toLowerCase(),ve["Webkit"+ce]="webkit"+he,ve["Moz"+ce]="moz"+he,ve}var qo={animationend:Ia("Animation","AnimationEnd"),animationiteration:Ia("Animation","AnimationIteration"),animationstart:Ia("Animation","AnimationStart"),transitionrun:Ia("Transition","TransitionRun"),transitionstart:Ia("Transition","TransitionStart"),transitioncancel:Ia("Transition","TransitionCancel"),transitionend:Ia("Transition","TransitionEnd")},Il={},Pr={};zs&&(Pr=document.createElement("div").style,"AnimationEvent"in window||(delete qo.animationend.animation,delete qo.animationiteration.animation,delete qo.animationstart.animation),"TransitionEvent"in window||delete qo.transitionend.transition);function Ua(ce){if(Il[ce])return Il[ce];if(!qo[ce])return ce;var he=qo[ce],ve;for(ve in he)if(he.hasOwnProperty(ve)&&ve in Pr)return Il[ce]=he[ve];return ce}var zr=Ua("animationend"),Gu=Ua("animationiteration"),js=Ua("animationstart"),$o=Ua("transitionrun"),za=Ua("transitionstart"),Hu=Ua("transitioncancel"),Nc=Ua("transitionend"),ca=new Map,Lc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lc.push("scrollEnd");function yr(ce,he){ca.set(ce,he),ci(he,[ce])}var ja=typeof reportError=="function"?reportError:function(ce){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var he=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ce=="object"&&ce!==null&&typeof ce.message=="string"?String(ce.message):String(ce),error:ce});if(!window.dispatchEvent(he))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ce);return}console.error(ce)},sr=[],vo=0,Bc=0;function Fa(){for(var ce=vo,he=Bc=vo=0;he<ce;){var ve=sr[he];sr[he++]=null;var xe=sr[he];sr[he++]=null;var we=sr[he];sr[he++]=null;var Oe=sr[he];if(sr[he++]=null,xe!==null&&we!==null){var Ue=xe.pending;Ue===null?we.next=we:(we.next=Ue.next,Ue.next=we),xe.pending=we}Oe!==0&&kc(ve,we,Oe)}}function Ul(ce,he,ve,xe){sr[vo++]=ce,sr[vo++]=he,sr[vo++]=ve,sr[vo++]=xe,Bc|=xe,ce.lanes|=xe,ce=ce.alternate,ce!==null&&(ce.lanes|=xe)}function Wo(ce,he,ve,xe){return Ul(ce,he,ve,xe),Jo(ce)}function Va(ce,he){return Ul(ce,null,null,he),Jo(ce)}function kc(ce,he,ve){ce.lanes|=ve;var xe=ce.alternate;xe!==null&&(xe.lanes|=ve);for(var we=!1,Oe=ce.return;Oe!==null;)Oe.childLanes|=ve,xe=Oe.alternate,xe!==null&&(xe.childLanes|=ve),Oe.tag===22&&(ce=Oe.stateNode,ce===null||ce._visibility&1||(we=!0)),ce=Oe,Oe=Oe.return;return ce.tag===3?(Oe=ce.stateNode,we&&he!==null&&(we=31-tt(ve),ce=Oe.hiddenUpdates,xe=ce[we],xe===null?ce[we]=[he]:xe.push(he),he.lane=ve|536870912),Oe):null}function Jo(ce){if(50<Lo)throw Lo=0,Bo=null,Error(Z(185));for(var he=ce.return;he!==null;)ce=he,he=ce.return;return ce.tag===3?ce.stateNode:null}var Ga={};function fd(ce,he,ve,xe){this.tag=ce,this.key=ve,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=he,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=xe,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(ce,he,ve,xe){return new fd(ce,he,ve,xe)}function Or(ce){return ce=ce.prototype,!(!ce||!ce.isReactComponent)}function Fs(ce,he){var ve=ce.alternate;return ve===null?(ve=Rr(ce.tag,he,ce.key,ce.mode),ve.elementType=ce.elementType,ve.type=ce.type,ve.stateNode=ce.stateNode,ve.alternate=ce,ce.alternate=ve):(ve.pendingProps=he,ve.type=ce.type,ve.flags=0,ve.subtreeFlags=0,ve.deletions=null),ve.flags=ce.flags&65011712,ve.childLanes=ce.childLanes,ve.lanes=ce.lanes,ve.child=ce.child,ve.memoizedProps=ce.memoizedProps,ve.memoizedState=ce.memoizedState,ve.updateQueue=ce.updateQueue,he=ce.dependencies,ve.dependencies=he===null?null:{lanes:he.lanes,firstContext:he.firstContext},ve.sibling=ce.sibling,ve.index=ce.index,ve.ref=ce.ref,ve.refCleanup=ce.refCleanup,ve}function br(ce,he){ce.flags&=65011714;var ve=ce.alternate;return ve===null?(ce.childLanes=0,ce.lanes=he,ce.child=null,ce.subtreeFlags=0,ce.memoizedProps=null,ce.memoizedState=null,ce.updateQueue=null,ce.dependencies=null,ce.stateNode=null):(ce.childLanes=ve.childLanes,ce.lanes=ve.lanes,ce.child=ve.child,ce.subtreeFlags=0,ce.deletions=null,ce.memoizedProps=ve.memoizedProps,ce.memoizedState=ve.memoizedState,ce.updateQueue=ve.updateQueue,ce.type=ve.type,he=ve.dependencies,ce.dependencies=he===null?null:{lanes:he.lanes,firstContext:he.firstContext}),ce}function zl(ce,he,ve,xe,we,Oe){var Ue=0;if(xe=ce,typeof ce=="function")Or(ce)&&(Ue=1);else if(typeof ce=="string")Ue=Sp(ce,ve,st.current)?26:ce==="html"||ce==="head"||ce==="body"?27:5;else e:switch(ce){case Te:return ce=Rr(31,ve,he,we),ce.elementType=Te,ce.lanes=Oe,ce;case de:return ua(ve.children,we,Oe,he);case pe:Ue=8,we|=24;break;case fe:return ce=Rr(12,ve,he,we|2),ce.elementType=fe,ce.lanes=Oe,ce;case Ae:return ce=Rr(13,ve,he,we),ce.elementType=Ae,ce.lanes=Oe,ce;case Ce:return ce=Rr(19,ve,he,we),ce.elementType=Ce,ce.lanes=Oe,ce;default:if(typeof ce=="object"&&ce!==null)switch(ce.$$typeof){case ye:Ue=10;break e;case _e:Ue=9;break e;case be:Ue=11;break e;case Ee:Ue=14;break e;case Re:Ue=16,xe=null;break e}Ue=29,ve=Error(Z(130,ce===null?"null":typeof ce,"")),xe=null}return he=Rr(Ue,ve,he,we),he.elementType=ce,he.type=xe,he.lanes=Oe,he}function ua(ce,he,ve,xe){return ce=Rr(7,ce,xe,he),ce.lanes=ve,ce}function Ic(ce,he,ve){return ce=Rr(6,ce,null,he),ce.lanes=ve,ce}function pd(ce){var he=Rr(18,null,null,0);return he.stateNode=ce,he}function Ms(ce,he,ve){return he=Rr(4,ce.children!==null?ce.children:[],ce.key,he),he.lanes=ve,he.stateNode={containerInfo:ce.containerInfo,pendingChildren:null,implementation:ce.implementation},he}var Yu=new WeakMap;function jr(ce,he){if(typeof ce=="object"&&ce!==null){var ve=Yu.get(ce);return ve!==void 0?ve:(he={value:ce,source:he,stack:Lt(he)},Yu.set(ce,he),he)}return{value:ce,source:he,stack:Lt(he)}}var Ts=[],_o=0,jl=null,Ko=0,Zr=[],Fr=0,Vs=null,Gs=1,Hs="";function ha(ce,he){Ts[_o++]=Ko,Ts[_o++]=jl,jl=ce,Ko=he}function Xu(ce,he,ve){Zr[Fr++]=Gs,Zr[Fr++]=Hs,Zr[Fr++]=Vs,Vs=ce;var xe=Gs;ce=Hs;var we=32-tt(xe)-1;xe&=~(1<<we),ve+=1;var Oe=32-tt(he)+we;if(30<Oe){var Ue=we-we%5;Oe=(xe&(1<<Ue)-1).toString(32),xe>>=Ue,we-=Ue,Gs=1<<32-tt(he)+we|ve<<we|xe,Hs=Oe+ce}else Gs=1<<Oe|ve<<we|xe,Hs=ce}function Uc(ce){ce.return!==null&&(ha(ce,1),Xu(ce,1,0))}function Ha(ce){for(;ce===jl;)jl=Ts[--_o],Ts[_o]=null,Ko=Ts[--_o],Ts[_o]=null;for(;ce===Vs;)Vs=Zr[--Fr],Zr[Fr]=null,Hs=Zr[--Fr],Zr[Fr]=null,Gs=Zr[--Fr],Zr[Fr]=null}function Fl(ce,he){Zr[Fr++]=Gs,Zr[Fr++]=Hs,Zr[Fr++]=Vs,Gs=he.id,Hs=he.overflow,Vs=ce}var ar=null,An=null,$i=!1,da=null,or=!1,zc=Error(Z(519));function Xi(ce){var he=Error(Z(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Vl(jr(he,ce)),zc}function Fc(ce){var he=ce.stateNode,ve=ce.type,xe=ce.memoizedProps;switch(he[ki]=ce,he[On]=xe,ve){case"dialog":Wi("cancel",he),Wi("close",he);break;case"iframe":case"object":case"embed":Wi("load",he);break;case"video":case"audio":for(ve=0;ve<zh.length;ve++)Wi(zh[ve],he);break;case"source":Wi("error",he);break;case"img":case"image":case"link":Wi("error",he),Wi("load",he);break;case"details":Wi("toggle",he);break;case"input":Wi("invalid",he),bn(he,xe.value,xe.defaultValue,xe.checked,xe.defaultChecked,xe.type,xe.name,!0);break;case"select":Wi("invalid",he);break;case"textarea":Wi("invalid",he),kn(he,xe.value,xe.defaultValue,xe.children)}ve=xe.children,typeof ve!="string"&&typeof ve!="number"&&typeof ve!="bigint"||he.textContent===""+ve||xe.suppressHydrationWarning===!0||l0(he.textContent,ve)?(xe.popover!=null&&(Wi("beforetoggle",he),Wi("toggle",he)),xe.onScroll!=null&&Wi("scroll",he),xe.onScrollEnd!=null&&Wi("scrollend",he),xe.onClick!=null&&(he.onclick=Us),he=!0):he=!1,he||Xi(ce,!0)}function md(ce){for(ar=ce.return;ar;)switch(ar.tag){case 5:case 31:case 13:or=!1;return;case 27:case 3:or=!0;return;default:ar=ar.return}}function yo(ce){if(ce!==ar)return!1;if(!$i)return md(ce),$i=!0,!1;var he=ce.tag,ve;if((ve=he!==3&&he!==27)&&((ve=he===5)&&(ve=ce.type,ve=!(ve!=="form"&&ve!=="button")||Lf(ce.type,ce.memoizedProps)),ve=!ve),ve&&An&&Xi(ce),md(ce),he===13){if(ce=ce.memoizedState,ce=ce!==null?ce.dehydrated:null,!ce)throw Error(Z(317));An=v0(ce)}else if(he===31){if(ce=ce.memoizedState,ce=ce!==null?ce.dehydrated:null,!ce)throw Error(Z(317));An=v0(ce)}else he===27?(he=An,gl(ce.type)?(ce=zf,zf=null,An=ce):An=he):An=ar?ta(ce.stateNode.nextSibling):null;return!0}function bo(){An=ar=null,$i=!1}function qu(){var ce=da;return ce!==null&&(Mr===null?Mr=ce:Mr.push.apply(Mr,ce),da=null),ce}function Vl(ce){da===null?da=[ce]:da.push(ce)}var $u=je(null),fa=null,xr=null;function pa(ce,he,ve){Ze($u,he._currentValue),he._currentValue=ve}function gs(ce){ce._currentValue=$u.current,qe($u)}function ma(ce,he,ve){for(;ce!==null;){var xe=ce.alternate;if((ce.childLanes&he)!==he?(ce.childLanes|=he,xe!==null&&(xe.childLanes|=he)):xe!==null&&(xe.childLanes&he)!==he&&(xe.childLanes|=he),ce===ve)break;ce=ce.return}}function Vc(ce,he,ve,xe){var we=ce.child;for(we!==null&&(we.return=ce);we!==null;){var Oe=we.dependencies;if(Oe!==null){var Ue=we.child;Oe=Oe.firstContext;e:for(;Oe!==null;){var We=Oe;Oe=we;for(var ot=0;ot<he.length;ot++)if(We.context===he[ot]){Oe.lanes|=ve,We=Oe.alternate,We!==null&&(We.lanes|=ve),ma(Oe.return,ve,ce),xe||(Ue=null);break e}Oe=We.next}}else if(we.tag===18){if(Ue=we.return,Ue===null)throw Error(Z(341));Ue.lanes|=ve,Oe=Ue.alternate,Oe!==null&&(Oe.lanes|=ve),ma(Ue,ve,ce),Ue=null}else Ue=we.child;if(Ue!==null)Ue.return=we;else for(Ue=we;Ue!==null;){if(Ue===ce){Ue=null;break}if(we=Ue.sibling,we!==null){we.return=Ue.return,Ue=we;break}Ue=Ue.return}we=Ue}}function Ya(ce,he,ve,xe){ce=null;for(var we=he,Oe=!1;we!==null;){if(!Oe){if((we.flags&524288)!==0)Oe=!0;else if((we.flags&262144)!==0)break}if(we.tag===10){var Ue=we.alternate;if(Ue===null)throw Error(Z(387));if(Ue=Ue.memoizedProps,Ue!==null){var We=we.type;wn(we.pendingProps.value,Ue.value)||(ce!==null?ce.push(We):ce=[We])}}else if(we===lt.current){if(Ue=we.alternate,Ue===null)throw Error(Z(387));Ue.memoizedState.memoizedState!==we.memoizedState.memoizedState&&(ce!==null?ce.push(Hh):ce=[Hh])}we=we.return}ce!==null&&Vc(he,ce,ve,xe),he.flags|=262144}function Zo(ce){for(ce=ce.firstContext;ce!==null;){if(!wn(ce.context._currentValue,ce.memoizedValue))return!0;ce=ce.next}return!1}function xo(ce){fa=ce,xr=null,ce=ce.dependencies,ce!==null&&(ce.firstContext=null)}function lr(ce){return Wu(fa,ce)}function Gl(ce,he){return fa===null&&xo(ce),Wu(ce,he)}function Wu(ce,he){var ve=he._currentValue;if(he={context:he,memoizedValue:ve,next:null},xr===null){if(ce===null)throw Error(Z(308));xr=he,ce.dependencies={lanes:0,firstContext:he},ce.flags|=524288}else xr=xr.next=he;return ve}var gd=typeof AbortController<"u"?AbortController:function(){var ce=[],he=this.signal={aborted:!1,addEventListener:function(ve,xe){ce.push(xe)}};this.abort=function(){he.aborted=!0,ce.forEach(function(ve){return ve()})}},vd=G.unstable_scheduleCallback,Ju=G.unstable_NormalPriority,Ci={$$typeof:ye,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ku(){return{controller:new gd,data:new Map,refCount:0}}function dr(ce){ce.refCount--,ce.refCount===0&&vd(Ju,function(){ce.controller.abort()})}var Ao=null,Zu=0,ga=0,ws=null;function Qo(ce,he){if(Ao===null){var ve=Ao=[];Zu=0,ga=Ef(),ws={status:"pending",value:void 0,then:function(xe){ve.push(xe)}}}return Zu++,he.then(Qu,Qu),he}function Qu(){if(--Zu===0&&Ao!==null){ws!==null&&(ws.status="fulfilled");var ce=Ao;Ao=null,ga=0,ws=null;for(var he=0;he<ce.length;he++)(0,ce[he])()}}function eh(ce,he){var ve=[],xe={status:"pending",value:null,reason:null,then:function(we){ve.push(we)}};return ce.then(function(){xe.status="fulfilled",xe.value=he;for(var we=0;we<ve.length;we++)(0,ve[we])(he)},function(we){for(xe.status="rejected",xe.reason=we,we=0;we<ve.length;we++)(0,ve[we])(void 0)}),xe}var _d=Be.S;Be.S=function(ce,he){fl=Ye(),typeof he=="object"&&he!==null&&typeof he.then=="function"&&Qo(ce,he),_d!==null&&_d(ce,he)};var Xa=je(null);function Ys(){var ce=Xa.current;return ce!==null?ce:cn.pooledCache}function el(ce,he){he===null?Ze(Xa,Xa.current):Ze(Xa,he.pool)}function Gc(){var ce=Ys();return ce===null?null:{parent:Ci._currentValue,pool:ce}}var qa=Error(Z(460)),Hl=Error(Z(474)),Ps=Error(Z(542)),Yl={then:function(){}};function yd(ce){return ce=ce.status,ce==="fulfilled"||ce==="rejected"}function th(ce,he,ve){switch(ve=ce[ve],ve===void 0?ce.push(he):ve!==he&&(he.then(Us,Us),he=ve),he.status){case"fulfilled":return he.value;case"rejected":throw ce=he.reason,ih(ce),ce;default:if(typeof he.status=="string")he.then(Us,Us);else{if(ce=cn,ce!==null&&100<ce.shellSuspendCounter)throw Error(Z(482));ce=he,ce.status="pending",ce.then(function(xe){if(he.status==="pending"){var we=he;we.status="fulfilled",we.value=xe}},function(xe){if(he.status==="pending"){var we=he;we.status="rejected",we.reason=xe}})}switch(he.status){case"fulfilled":return he.value;case"rejected":throw ce=he.reason,ih(ce),ce}throw Pi=he,qa}}function So(ce){try{var he=ce._init;return he(ce._payload)}catch(ve){throw ve!==null&&typeof ve=="object"&&typeof ve.then=="function"?(Pi=ve,qa):ve}}var Pi=null;function Hc(){if(Pi===null)throw Error(Z(459));var ce=Pi;return Pi=null,ce}function ih(ce){if(ce===qa||ce===Ps)throw Error(Z(483))}var $a=null,Wa=0;function Yc(ce){var he=Wa;return Wa+=1,$a===null&&($a=[]),th($a,ce,he)}function Xl(ce,he){he=he.props.ref,ce.ref=he!==void 0?he:null}function ql(ce,he){throw he.$$typeof===ae?Error(Z(525)):(ce=Object.prototype.toString.call(he),Error(Z(31,ce==="[object Object]"?"object with keys {"+Object.keys(he).join(", ")+"}":ce)))}function tl(ce){function he(xt,ht){if(ce){var Ct=xt.deletions;Ct===null?(xt.deletions=[ht],xt.flags|=16):Ct.push(ht)}}function ve(xt,ht){if(!ce)return null;for(;ht!==null;)he(xt,ht),ht=ht.sibling;return null}function xe(xt){for(var ht=new Map;xt!==null;)xt.key!==null?ht.set(xt.key,xt):ht.set(xt.index,xt),xt=xt.sibling;return ht}function we(xt,ht){return xt=Fs(xt,ht),xt.index=0,xt.sibling=null,xt}function Oe(xt,ht,Ct){return xt.index=Ct,ce?(Ct=xt.alternate,Ct!==null?(Ct=Ct.index,Ct<ht?(xt.flags|=67108866,ht):Ct):(xt.flags|=67108866,ht)):(xt.flags|=1048576,ht)}function Ue(xt){return ce&&xt.alternate===null&&(xt.flags|=67108866),xt}function We(xt,ht,Ct,$t){return ht===null||ht.tag!==6?(ht=Ic(Ct,xt.mode,$t),ht.return=xt,ht):(ht=we(ht,Ct),ht.return=xt,ht)}function ot(xt,ht,Ct,$t){var wi=Ct.type;return wi===de?Gt(xt,ht,Ct.props.children,$t,Ct.key):ht!==null&&(ht.elementType===wi||typeof wi=="object"&&wi!==null&&wi.$$typeof===Re&&So(wi)===ht.type)?(ht=we(ht,Ct.props),Xl(ht,Ct),ht.return=xt,ht):(ht=zl(Ct.type,Ct.key,Ct.props,null,xt.mode,$t),Xl(ht,Ct),ht.return=xt,ht)}function Et(xt,ht,Ct,$t){return ht===null||ht.tag!==4||ht.stateNode.containerInfo!==Ct.containerInfo||ht.stateNode.implementation!==Ct.implementation?(ht=Ms(Ct,xt.mode,$t),ht.return=xt,ht):(ht=we(ht,Ct.children||[]),ht.return=xt,ht)}function Gt(xt,ht,Ct,$t,wi){return ht===null||ht.tag!==7?(ht=ua(Ct,xt.mode,$t,wi),ht.return=xt,ht):(ht=we(ht,Ct),ht.return=xt,ht)}function Jt(xt,ht,Ct){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return ht=Ic(""+ht,xt.mode,Ct),ht.return=xt,ht;if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case le:return Ct=zl(ht.type,ht.key,ht.props,null,xt.mode,Ct),Xl(Ct,ht),Ct.return=xt,Ct;case ue:return ht=Ms(ht,xt.mode,Ct),ht.return=xt,ht;case Re:return ht=So(ht),Jt(xt,ht,Ct)}if(He(ht)||Le(ht))return ht=ua(ht,xt.mode,Ct,null),ht.return=xt,ht;if(typeof ht.then=="function")return Jt(xt,Yc(ht),Ct);if(ht.$$typeof===ye)return Jt(xt,Gl(xt,ht),Ct);ql(xt,ht)}return null}function Ot(xt,ht,Ct,$t){var wi=ht!==null?ht.key:null;if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number"||typeof Ct=="bigint")return wi!==null?null:We(xt,ht,""+Ct,$t);if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case le:return Ct.key===wi?ot(xt,ht,Ct,$t):null;case ue:return Ct.key===wi?Et(xt,ht,Ct,$t):null;case Re:return Ct=So(Ct),Ot(xt,ht,Ct,$t)}if(He(Ct)||Le(Ct))return wi!==null?null:Gt(xt,ht,Ct,$t,null);if(typeof Ct.then=="function")return Ot(xt,ht,Yc(Ct),$t);if(Ct.$$typeof===ye)return Ot(xt,ht,Gl(xt,Ct),$t);ql(xt,Ct)}return null}function It(xt,ht,Ct,$t,wi){if(typeof $t=="string"&&$t!==""||typeof $t=="number"||typeof $t=="bigint")return xt=xt.get(Ct)||null,We(ht,xt,""+$t,wi);if(typeof $t=="object"&&$t!==null){switch($t.$$typeof){case le:return xt=xt.get($t.key===null?Ct:$t.key)||null,ot(ht,xt,$t,wi);case ue:return xt=xt.get($t.key===null?Ct:$t.key)||null,Et(ht,xt,$t,wi);case Re:return $t=So($t),It(xt,ht,Ct,$t,wi)}if(He($t)||Le($t))return xt=xt.get(Ct)||null,Gt(ht,xt,$t,wi,null);if(typeof $t.then=="function")return It(xt,ht,Ct,Yc($t),wi);if($t.$$typeof===ye)return It(xt,ht,Ct,Gl(ht,$t),wi);ql(ht,$t)}return null}function yi(xt,ht,Ct,$t){for(var wi=null,hn=null,xi=ht,Vi=ht=0,en=null;xi!==null&&Vi<Ct.length;Vi++){xi.index>Vi?(en=xi,xi=null):en=xi.sibling;var dn=Ot(xt,xi,Ct[Vi],$t);if(dn===null){xi===null&&(xi=en);break}ce&&xi&&dn.alternate===null&&he(xt,xi),ht=Oe(dn,ht,Vi),hn===null?wi=dn:hn.sibling=dn,hn=dn,xi=en}if(Vi===Ct.length)return ve(xt,xi),$i&&ha(xt,Vi),wi;if(xi===null){for(;Vi<Ct.length;Vi++)xi=Jt(xt,Ct[Vi],$t),xi!==null&&(ht=Oe(xi,ht,Vi),hn===null?wi=xi:hn.sibling=xi,hn=xi);return $i&&ha(xt,Vi),wi}for(xi=xe(xi);Vi<Ct.length;Vi++)en=It(xi,xt,Vi,Ct[Vi],$t),en!==null&&(ce&&en.alternate!==null&&xi.delete(en.key===null?Vi:en.key),ht=Oe(en,ht,Vi),hn===null?wi=en:hn.sibling=en,hn=en);return ce&&xi.forEach(function(xl){return he(xt,xl)}),$i&&ha(xt,Vi),wi}function Ri(xt,ht,Ct,$t){if(Ct==null)throw Error(Z(151));for(var wi=null,hn=null,xi=ht,Vi=ht=0,en=null,dn=Ct.next();xi!==null&&!dn.done;Vi++,dn=Ct.next()){xi.index>Vi?(en=xi,xi=null):en=xi.sibling;var xl=Ot(xt,xi,dn.value,$t);if(xl===null){xi===null&&(xi=en);break}ce&&xi&&xl.alternate===null&&he(xt,xi),ht=Oe(xl,ht,Vi),hn===null?wi=xl:hn.sibling=xl,hn=xl,xi=en}if(dn.done)return ve(xt,xi),$i&&ha(xt,Vi),wi;if(xi===null){for(;!dn.done;Vi++,dn=Ct.next())dn=Jt(xt,dn.value,$t),dn!==null&&(ht=Oe(dn,ht,Vi),hn===null?wi=dn:hn.sibling=dn,hn=dn);return $i&&ha(xt,Vi),wi}for(xi=xe(xi);!dn.done;Vi++,dn=Ct.next())dn=It(xi,xt,Vi,dn.value,$t),dn!==null&&(ce&&dn.alternate!==null&&xi.delete(dn.key===null?Vi:dn.key),ht=Oe(dn,ht,Vi),hn===null?wi=dn:hn.sibling=dn,hn=dn);return ce&&xi.forEach(function(Lp){return he(xt,Lp)}),$i&&ha(xt,Vi),wi}function En(xt,ht,Ct,$t){if(typeof Ct=="object"&&Ct!==null&&Ct.type===de&&Ct.key===null&&(Ct=Ct.props.children),typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case le:e:{for(var wi=Ct.key;ht!==null;){if(ht.key===wi){if(wi=Ct.type,wi===de){if(ht.tag===7){ve(xt,ht.sibling),$t=we(ht,Ct.props.children),$t.return=xt,xt=$t;break e}}else if(ht.elementType===wi||typeof wi=="object"&&wi!==null&&wi.$$typeof===Re&&So(wi)===ht.type){ve(xt,ht.sibling),$t=we(ht,Ct.props),Xl($t,Ct),$t.return=xt,xt=$t;break e}ve(xt,ht);break}else he(xt,ht);ht=ht.sibling}Ct.type===de?($t=ua(Ct.props.children,xt.mode,$t,Ct.key),$t.return=xt,xt=$t):($t=zl(Ct.type,Ct.key,Ct.props,null,xt.mode,$t),Xl($t,Ct),$t.return=xt,xt=$t)}return Ue(xt);case ue:e:{for(wi=Ct.key;ht!==null;){if(ht.key===wi)if(ht.tag===4&&ht.stateNode.containerInfo===Ct.containerInfo&&ht.stateNode.implementation===Ct.implementation){ve(xt,ht.sibling),$t=we(ht,Ct.children||[]),$t.return=xt,xt=$t;break e}else{ve(xt,ht);break}else he(xt,ht);ht=ht.sibling}$t=Ms(Ct,xt.mode,$t),$t.return=xt,xt=$t}return Ue(xt);case Re:return Ct=So(Ct),En(xt,ht,Ct,$t)}if(He(Ct))return yi(xt,ht,Ct,$t);if(Le(Ct)){if(wi=Le(Ct),typeof wi!="function")throw Error(Z(150));return Ct=wi.call(Ct),Ri(xt,ht,Ct,$t)}if(typeof Ct.then=="function")return En(xt,ht,Yc(Ct),$t);if(Ct.$$typeof===ye)return En(xt,ht,Gl(xt,Ct),$t);ql(xt,Ct)}return typeof Ct=="string"&&Ct!==""||typeof Ct=="number"||typeof Ct=="bigint"?(Ct=""+Ct,ht!==null&&ht.tag===6?(ve(xt,ht.sibling),$t=we(ht,Ct),$t.return=xt,xt=$t):(ve(xt,ht),$t=Ic(Ct,xt.mode,$t),$t.return=xt,xt=$t),Ue(xt)):ve(xt,ht)}return function(xt,ht,Ct,$t){try{Wa=0;var wi=En(xt,ht,Ct,$t);return $a=null,wi}catch(xi){if(xi===qa||xi===Ps)throw xi;var hn=Rr(29,xi,null,xt.mode);return hn.lanes=$t,hn.return=xt,hn}finally{}}}var Co=tl(!0),bd=tl(!1),Ja=!1;function nh(ce){ce.updateQueue={baseState:ce.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rh(ce,he){ce=ce.updateQueue,he.updateQueue===ce&&(he.updateQueue={baseState:ce.baseState,firstBaseUpdate:ce.firstBaseUpdate,lastBaseUpdate:ce.lastBaseUpdate,shared:ce.shared,callbacks:null})}function Xs(ce){return{lane:ce,tag:0,payload:null,callback:null,next:null}}function va(ce,he,ve){var xe=ce.updateQueue;if(xe===null)return null;if(xe=xe.shared,(Zi&2)!==0){var we=xe.pending;return we===null?he.next=he:(he.next=we.next,we.next=he),xe.pending=he,he=Jo(ce),kc(ce,null,ve),he}return Ul(ce,xe,he,ve),Jo(ce)}function Ka(ce,he,ve){if(he=he.updateQueue,he!==null&&(he=he.shared,(ve&4194048)!==0)){var xe=he.lanes;xe&=ce.pendingLanes,ve|=xe,he.lanes=ve,Ln(ce,ve)}}function Xc(ce,he){var ve=ce.updateQueue,xe=ce.alternate;if(xe!==null&&(xe=xe.updateQueue,ve===xe)){var we=null,Oe=null;if(ve=ve.firstBaseUpdate,ve!==null){do{var Ue={lane:ve.lane,tag:ve.tag,payload:ve.payload,callback:null,next:null};Oe===null?we=Oe=Ue:Oe=Oe.next=Ue,ve=ve.next}while(ve!==null);Oe===null?we=Oe=he:Oe=Oe.next=he}else we=Oe=he;ve={baseState:xe.baseState,firstBaseUpdate:we,lastBaseUpdate:Oe,shared:xe.shared,callbacks:xe.callbacks},ce.updateQueue=ve;return}ce=ve.lastBaseUpdate,ce===null?ve.firstBaseUpdate=he:ce.next=he,ve.lastBaseUpdate=he}var sh=!1;function $l(){if(sh){var ce=ws;if(ce!==null)throw ce}}function Eo(ce,he,ve,xe){sh=!1;var we=ce.updateQueue;Ja=!1;var Oe=we.firstBaseUpdate,Ue=we.lastBaseUpdate,We=we.shared.pending;if(We!==null){we.shared.pending=null;var ot=We,Et=ot.next;ot.next=null,Ue===null?Oe=Et:Ue.next=Et,Ue=ot;var Gt=ce.alternate;Gt!==null&&(Gt=Gt.updateQueue,We=Gt.lastBaseUpdate,We!==Ue&&(We===null?Gt.firstBaseUpdate=Et:We.next=Et,Gt.lastBaseUpdate=ot))}if(Oe!==null){var Jt=we.baseState;Ue=0,Gt=Et=ot=null,We=Oe;do{var Ot=We.lane&-536870913,It=Ot!==We.lane;if(It?(qi&Ot)===Ot:(xe&Ot)===Ot){Ot!==0&&Ot===ga&&(sh=!0),Gt!==null&&(Gt=Gt.next={lane:0,tag:We.tag,payload:We.payload,callback:null,next:null});e:{var yi=ce,Ri=We;Ot=he;var En=ve;switch(Ri.tag){case 1:if(yi=Ri.payload,typeof yi=="function"){Jt=yi.call(En,Jt,Ot);break e}Jt=yi;break e;case 3:yi.flags=yi.flags&-65537|128;case 0:if(yi=Ri.payload,Ot=typeof yi=="function"?yi.call(En,Jt,Ot):yi,Ot==null)break e;Jt=se({},Jt,Ot);break e;case 2:Ja=!0}}Ot=We.callback,Ot!==null&&(ce.flags|=64,It&&(ce.flags|=8192),It=we.callbacks,It===null?we.callbacks=[Ot]:It.push(Ot))}else It={lane:Ot,tag:We.tag,payload:We.payload,callback:We.callback,next:null},Gt===null?(Et=Gt=It,ot=Jt):Gt=Gt.next=It,Ue|=Ot;if(We=We.next,We===null){if(We=we.shared.pending,We===null)break;It=We,We=It.next,It.next=null,we.lastBaseUpdate=It,we.shared.pending=null}}while(!0);Gt===null&&(ot=Jt),we.baseState=ot,we.firstBaseUpdate=Et,we.lastBaseUpdate=Gt,Oe===null&&(we.shared.lanes=0),hs|=Ue,ce.lanes=Ue,ce.memoizedState=Jt}}function qs(ce,he){if(typeof ce!="function")throw Error(Z(191,ce));ce.call(he)}function fr(ce,he){var ve=ce.callbacks;if(ve!==null)for(ce.callbacks=null,ce=0;ce<ve.length;ce++)qs(ve[ce],he)}var Qr=je(null),Nr=je(0);function ah(ce,he){ce=qn,Ze(Nr,ce),Ze(Qr,he),qn=ce|he.baseLanes}function oh(){Ze(Nr,qn),Ze(Qr,Qr.current)}function Ar(){qn=Nr.current,qe(Qr),qe(Nr)}var ir=je(null),vs=null;function Za(ce){var he=ce.alternate;Ze(In,In.current&1),Ze(ir,ce),vs===null&&(he===null||Qr.current!==null||he.memoizedState!==null)&&(vs=ce)}function lh(ce){Ze(In,In.current),Ze(ir,ce),vs===null&&(vs=ce)}function xd(ce){ce.tag===22?(Ze(In,In.current),Ze(ir,ce),vs===null&&(vs=ce)):_a()}function _a(){Ze(In,In.current),Ze(ir,ir.current)}function es(ce){qe(ir),vs===ce&&(vs=null),qe(In)}var In=je(0);function qc(ce){for(var he=ce;he!==null;){if(he.tag===13){var ve=he.memoizedState;if(ve!==null&&(ve=ve.dehydrated,ve===null||If(ve)||Uf(ve)))return he}else if(he.tag===19&&(he.memoizedProps.revealOrder==="forwards"||he.memoizedProps.revealOrder==="backwards"||he.memoizedProps.revealOrder==="unstable_legacy-backwards"||he.memoizedProps.revealOrder==="together")){if((he.flags&128)!==0)return he}else if(he.child!==null){he.child.return=he,he=he.child;continue}if(he===ce)break;for(;he.sibling===null;){if(he.return===null||he.return===ce)return null;he=he.return}he.sibling.return=he.return,he=he.sibling}return null}var Vr=0,Oi=null,mn=null,Jn=null,$c=!1,$s=!1,Mo=!1,Wc=0,Wl=0,Ws=null,mf=0;function Un(){throw Error(Z(321))}function uh(ce,he){if(he===null)return!1;for(var ve=0;ve<he.length&&ve<ce.length;ve++)if(!wn(ce[ve],he[ve]))return!1;return!0}function hh(ce,he,ve,xe,we,Oe){return Vr=Oe,Oi=he,he.memoizedState=null,he.updateQueue=null,he.lanes=0,Be.H=ce===null||ce.memoizedState===null?Fd:rl,Mo=!1,Oe=ve(xe,we),Mo=!1,$s&&(Oe=Sd(he,ve,xe,we)),Ad(ce),Oe}function Ad(ce){Be.H=ec;var he=mn!==null&&mn.next!==null;if(Vr=0,Jn=mn=Oi=null,$c=!1,Wl=0,Ws=null,he)throw Error(Z(300));ce===null||Pn||(ce=ce.dependencies,ce!==null&&Zo(ce)&&(Pn=!0))}function Sd(ce,he,ve,xe){Oi=ce;var we=0;do{if($s&&(Ws=null),Wl=0,$s=!1,25<=we)throw Error(Z(301));if(we+=1,Jn=mn=null,ce.updateQueue!=null){var Oe=ce.updateQueue;Oe.lastEffect=null,Oe.events=null,Oe.stores=null,Oe.memoCache!=null&&(Oe.memoCache.index=0)}Be.H=tc,Oe=he(ve,xe)}while($s);return Oe}function gf(){var ce=Be.H,he=ce.useState()[0];return he=typeof he.then=="function"?Kl(he):he,ce=ce.useState()[0],(mn!==null?mn.memoizedState:null)!==ce&&(Oi.flags|=1024),he}function dh(){var ce=Wc!==0;return Wc=0,ce}function fh(ce,he,ve){he.updateQueue=ce.updateQueue,he.flags&=-2053,ce.lanes&=~ve}function ph(ce){if($c){for(ce=ce.memoizedState;ce!==null;){var he=ce.queue;he!==null&&(he.pending=null),ce=ce.next}$c=!1}Vr=0,Jn=mn=Oi=null,$s=!1,Wl=Wc=0,Ws=null}function Dr(){var ce={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jn===null?Oi.memoizedState=Jn=ce:Jn=Jn.next=ce,Jn}function Gn(){if(mn===null){var ce=Oi.alternate;ce=ce!==null?ce.memoizedState:null}else ce=mn.next;var he=Jn===null?Oi.memoizedState:Jn.next;if(he!==null)Jn=he,mn=ce;else{if(ce===null)throw Oi.alternate===null?Error(Z(467)):Error(Z(310));mn=ce,ce={memoizedState:mn.memoizedState,baseState:mn.baseState,baseQueue:mn.baseQueue,queue:mn.queue,next:null},Jn===null?Oi.memoizedState=Jn=ce:Jn=Jn.next=ce}return Jn}function Jl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kl(ce){var he=Wl;return Wl+=1,Ws===null&&(Ws=[]),ce=th(Ws,ce,he),he=Oi,(Jn===null?he.memoizedState:Jn.next)===null&&(he=he.alternate,Be.H=he===null||he.memoizedState===null?Fd:rl),ce}function Jc(ce){if(ce!==null&&typeof ce=="object"){if(typeof ce.then=="function")return Kl(ce);if(ce.$$typeof===ye)return lr(ce)}throw Error(Z(438,String(ce)))}function mh(ce){var he=null,ve=Oi.updateQueue;if(ve!==null&&(he=ve.memoCache),he==null){var xe=Oi.alternate;xe!==null&&(xe=xe.updateQueue,xe!==null&&(xe=xe.memoCache,xe!=null&&(he={data:xe.data.map(function(we){return we.slice()}),index:0})))}if(he==null&&(he={data:[],index:0}),ve===null&&(ve=Jl(),Oi.updateQueue=ve),ve.memoCache=he,ve=he.data[he.index],ve===void 0)for(ve=he.data[he.index]=Array(ce),xe=0;xe<ce;xe++)ve[xe]=Me;return he.index++,ve}function ya(ce,he){return typeof he=="function"?he(ce):he}function Kc(ce){var he=Gn();return gh(he,mn,ce)}function gh(ce,he,ve){var xe=ce.queue;if(xe===null)throw Error(Z(311));xe.lastRenderedReducer=ve;var we=ce.baseQueue,Oe=xe.pending;if(Oe!==null){if(we!==null){var Ue=we.next;we.next=Oe.next,Oe.next=Ue}he.baseQueue=we=Oe,xe.pending=null}if(Oe=ce.baseState,we===null)ce.memoizedState=Oe;else{he=we.next;var We=Ue=null,ot=null,Et=he,Gt=!1;do{var Jt=Et.lane&-536870913;if(Jt!==Et.lane?(qi&Jt)===Jt:(Vr&Jt)===Jt){var Ot=Et.revertLane;if(Ot===0)ot!==null&&(ot=ot.next={lane:0,revertLane:0,gesture:null,action:Et.action,hasEagerState:Et.hasEagerState,eagerState:Et.eagerState,next:null}),Jt===ga&&(Gt=!0);else if((Vr&Ot)===Ot){Et=Et.next,Ot===ga&&(Gt=!0);continue}else Jt={lane:0,revertLane:Et.revertLane,gesture:null,action:Et.action,hasEagerState:Et.hasEagerState,eagerState:Et.eagerState,next:null},ot===null?(We=ot=Jt,Ue=Oe):ot=ot.next=Jt,Oi.lanes|=Ot,hs|=Ot;Jt=Et.action,Mo&&ve(Oe,Jt),Oe=Et.hasEagerState?Et.eagerState:ve(Oe,Jt)}else Ot={lane:Jt,revertLane:Et.revertLane,gesture:Et.gesture,action:Et.action,hasEagerState:Et.hasEagerState,eagerState:Et.eagerState,next:null},ot===null?(We=ot=Ot,Ue=Oe):ot=ot.next=Ot,Oi.lanes|=Jt,hs|=Jt;Et=Et.next}while(Et!==null&&Et!==he);if(ot===null?Ue=Oe:ot.next=We,!wn(Oe,ce.memoizedState)&&(Pn=!0,Gt&&(ve=ws,ve!==null)))throw ve;ce.memoizedState=Oe,ce.baseState=Ue,ce.baseQueue=ot,xe.lastRenderedState=Oe}return we===null&&(xe.lanes=0),[ce.memoizedState,xe.dispatch]}function Zc(ce){var he=Gn(),ve=he.queue;if(ve===null)throw Error(Z(311));ve.lastRenderedReducer=ce;var xe=ve.dispatch,we=ve.pending,Oe=he.memoizedState;if(we!==null){ve.pending=null;var Ue=we=we.next;do Oe=ce(Oe,Ue.action),Ue=Ue.next;while(Ue!==we);wn(Oe,he.memoizedState)||(Pn=!0),he.memoizedState=Oe,he.baseQueue===null&&(he.baseState=Oe),ve.lastRenderedState=Oe}return[Oe,xe]}function vh(ce,he,ve){var xe=Oi,we=Gn(),Oe=$i;if(Oe){if(ve===void 0)throw Error(Z(407));ve=ve()}else ve=he();var Ue=!wn((mn||we).memoizedState,ve);if(Ue&&(we.memoizedState=ve,Pn=!0),we=we.queue,Ah(yh.bind(null,xe,we,ce),[ce]),we.getSnapshot!==he||Ue||Jn!==null&&Jn.memoizedState.tag&1){if(xe.flags|=2048,il(9,{destroy:void 0},_h.bind(null,xe,we,ve,he),null),cn===null)throw Error(Z(349));Oe||(Vr&127)!==0||Cd(xe,he,ve)}return ve}function Cd(ce,he,ve){ce.flags|=16384,ce={getSnapshot:he,value:ve},he=Oi.updateQueue,he===null?(he=Jl(),Oi.updateQueue=he,he.stores=[ce]):(ve=he.stores,ve===null?he.stores=[ce]:ve.push(ce))}function _h(ce,he,ve,xe){he.value=ve,he.getSnapshot=xe,bh(he)&&Qc(ce)}function yh(ce,he,ve){return ve(function(){bh(he)&&Qc(ce)})}function bh(ce){var he=ce.getSnapshot;ce=ce.value;try{var ve=he();return!wn(ce,ve)}catch{return!0}}function Qc(ce){var he=Va(ce,2);he!==null&&ge(he,ce,2)}function Zl(ce){var he=Dr();if(typeof ce=="function"){var ve=ce;if(ce=ve(),Mo){vt(!0);try{ve()}finally{vt(!1)}}}return he.memoizedState=he.baseState=ce,he.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:ce},he}function Ed(ce,he,ve,xe){return ce.baseState=ve,gh(ce,mn,typeof xe=="function"?xe:ya)}function vf(ce,he,ve,xe,we){if(ba(ce))throw Error(Z(485));if(ce=he.action,ce!==null){var Oe={payload:we,action:ce,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Ue){Oe.listeners.push(Ue)}};Be.T!==null?ve(!0):Oe.isTransition=!1,xe(Oe),ve=he.pending,ve===null?(Oe.next=he.pending=Oe,Md(he,Oe)):(Oe.next=ve.next,he.pending=ve.next=Oe)}}function Md(ce,he){var ve=he.action,xe=he.payload,we=ce.state;if(he.isTransition){var Oe=Be.T,Ue={};Be.T=Ue;try{var We=ve(we,xe),ot=Be.S;ot!==null&&ot(Ue,We),Td(ce,he,We)}catch(Et){eu(ce,he,Et)}finally{Oe!==null&&Ue.types!==null&&(Oe.types=Ue.types),Be.T=Oe}}else try{Oe=ve(we,xe),Td(ce,he,Oe)}catch(Et){eu(ce,he,Et)}}function Td(ce,he,ve){ve!==null&&typeof ve=="object"&&typeof ve.then=="function"?ve.then(function(xe){xh(ce,he,xe)},function(xe){return eu(ce,he,xe)}):xh(ce,he,ve)}function xh(ce,he,ve){he.status="fulfilled",he.value=ve,wd(he),ce.state=ve,he=ce.pending,he!==null&&(ve=he.next,ve===he?ce.pending=null:(ve=ve.next,he.next=ve,Md(ce,ve)))}function eu(ce,he,ve){var xe=ce.pending;if(ce.pending=null,xe!==null){xe=xe.next;do he.status="rejected",he.reason=ve,wd(he),he=he.next;while(he!==xe)}ce.action=null}function wd(ce){ce=ce.listeners;for(var he=0;he<ce.length;he++)(0,ce[he])()}function Pd(ce,he){return he}function Rd(ce,he){if($i){var ve=cn.formState;if(ve!==null){e:{var xe=Oi;if($i){if(An){t:{for(var we=An,Oe=or;we.nodeType!==8;){if(!Oe){we=null;break t}if(we=ta(we.nextSibling),we===null){we=null;break t}}Oe=we.data,we=Oe==="F!"||Oe==="F"?we:null}if(we){An=ta(we.nextSibling),xe=we.data==="F!";break e}}Xi(xe)}xe=!1}xe&&(he=ve[0])}}return ve=Dr(),ve.memoizedState=ve.baseState=he,xe={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pd,lastRenderedState:he},ve.queue=xe,ve=jd.bind(null,Oi,xe),xe.dispatch=ve,xe=Zl(!1),Oe=Ql.bind(null,Oi,!1,xe.queue),xe=Dr(),we={state:he,dispatch:null,action:ce,pending:null},xe.queue=we,ve=vf.bind(null,Oi,we,Oe,ve),we.dispatch=ve,xe.memoizedState=ce,[he,ve,!1]}function Od(ce){var he=Gn();return Nd(he,mn,ce)}function Nd(ce,he,ve){if(he=gh(ce,he,Pd)[0],ce=Kc(ya)[0],typeof he=="object"&&he!==null&&typeof he.then=="function")try{var xe=Kl(he)}catch(Ue){throw Ue===qa?Ps:Ue}else xe=he;he=Gn();var we=he.queue,Oe=we.dispatch;return ve!==he.memoizedState&&(Oi.flags|=2048,il(9,{destroy:void 0},_f.bind(null,we,ve),null)),[xe,Oe,ce]}function _f(ce,he){ce.action=he}function Dd(ce){var he=Gn(),ve=mn;if(ve!==null)return Nd(he,ve,ce);Gn(),he=he.memoizedState,ve=Gn();var xe=ve.queue.dispatch;return ve.memoizedState=ce,[he,xe,!1]}function il(ce,he,ve,xe){return ce={tag:ce,create:ve,deps:xe,inst:he,next:null},he=Oi.updateQueue,he===null&&(he=Jl(),Oi.updateQueue=he),ve=he.lastEffect,ve===null?he.lastEffect=ce.next=ce:(xe=ve.next,ve.next=ce,ce.next=xe,he.lastEffect=ce),ce}function Ld(){return Gn().memoizedState}function tu(ce,he,ve,xe){var we=Dr();Oi.flags|=ce,we.memoizedState=il(1|he,{destroy:void 0},ve,xe===void 0?null:xe)}function iu(ce,he,ve,xe){var we=Gn();xe=xe===void 0?null:xe;var Oe=we.memoizedState.inst;mn!==null&&xe!==null&&uh(xe,mn.memoizedState.deps)?we.memoizedState=il(he,Oe,ve,xe):(Oi.flags|=ce,we.memoizedState=il(1|he,Oe,ve,xe))}function Bd(ce,he){tu(8390656,8,ce,he)}function Ah(ce,he){iu(2048,8,ce,he)}function kd(ce){Oi.flags|=4;var he=Oi.updateQueue;if(he===null)he=Jl(),Oi.updateQueue=he,he.events=[ce];else{var ve=he.events;ve===null?he.events=[ce]:ve.push(ce)}}function Id(ce){var he=Gn().memoizedState;return kd({ref:he,nextImpl:ce}),function(){if((Zi&2)!==0)throw Error(Z(440));return he.impl.apply(void 0,arguments)}}function Ud(ce,he){return iu(4,2,ce,he)}function ns(ce,he){return iu(4,4,ce,he)}function Sh(ce,he){if(typeof he=="function"){ce=ce();var ve=he(ce);return function(){typeof ve=="function"?ve():he(null)}}if(he!=null)return ce=ce(),he.current=ce,function(){he.current=null}}function nu(ce,he,ve){ve=ve!=null?ve.concat([ce]):null,iu(4,4,Sh.bind(null,he,ce),ve)}function ru(){}function Ch(ce,he){var ve=Gn();he=he===void 0?null:he;var xe=ve.memoizedState;return he!==null&&uh(he,xe[1])?xe[0]:(ve.memoizedState=[ce,he],ce)}function Eh(ce,he){var ve=Gn();he=he===void 0?null:he;var xe=ve.memoizedState;if(he!==null&&uh(he,xe[1]))return xe[0];if(xe=ce(),Mo){vt(!0);try{ce()}finally{vt(!1)}}return ve.memoizedState=[xe,he],xe}function Mh(ce,he,ve){return ve===void 0||(Vr&1073741824)!==0&&(qi&261930)===0?ce.memoizedState=he:(ce.memoizedState=ve,ce=me(),Oi.lanes|=ce,hs|=ce,ve)}function Th(ce,he,ve,xe){return wn(ve,he)?ve:Qr.current!==null?(ce=Mh(ce,ve,xe),wn(ce,he)||(Pn=!0),ce):(Vr&42)===0||(Vr&1073741824)!==0&&(qi&261930)===0?(Pn=!0,ce.memoizedState=ve):(ce=me(),Oi.lanes|=ce,hs|=ce,he)}function wh(ce,he,ve,xe,we){var Oe=ze.p;ze.p=Oe!==0&&8>Oe?Oe:8;var Ue=Be.T,We={};Be.T=We,Ql(ce,!1,he,ve);try{var ot=we(),Et=Be.S;if(Et!==null&&Et(We,ot),ot!==null&&typeof ot=="object"&&typeof ot.then=="function"){var Gt=eh(ot,xe);nl(ce,he,Gt,Br(ce))}else nl(ce,he,xe,Br(ce))}catch(Jt){nl(ce,he,{then:function(){},status:"rejected",reason:Jt},Br())}finally{ze.p=Oe,Ue!==null&&We.types!==null&&(Ue.types=We.types),Be.T=Ue}}function yf(){}function Ph(ce,he,ve,xe){if(ce.tag!==5)throw Error(Z(476));var we=zd(ce).queue;wh(ce,we,he,Fe,ve===null?yf:function(){return Rh(ce),ve(xe)})}function zd(ce){var he=ce.memoizedState;if(he!==null)return he;he={memoizedState:Fe,baseState:Fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:Fe},next:null};var ve={};return he.next={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:ve},next:null},ce.memoizedState=he,ce=ce.alternate,ce!==null&&(ce.memoizedState=he),he}function Rh(ce){var he=zd(ce);he.next===null&&(he=ce.alternate.memoizedState),nl(ce,he.next.queue,{},Br())}function Oh(){return lr(Hh)}function pr(){return Gn().memoizedState}function Nh(){return Gn().memoizedState}function bf(ce){for(var he=ce.return;he!==null;){switch(he.tag){case 24:case 3:var ve=Br();ce=Xs(ve);var xe=va(he,ce,ve);xe!==null&&(ge(xe,he,ve),Ka(xe,he,ve)),he={cache:Ku()},ce.payload=he;return}he=he.return}}function xf(ce,he,ve){var xe=Br();ve={lane:xe,revertLane:0,gesture:null,action:ve,hasEagerState:!1,eagerState:null,next:null},ba(ce)?To(he,ve):(ve=Wo(ce,he,ve,xe),ve!==null&&(ge(ve,ce,xe),Gr(ve,he,xe)))}function jd(ce,he,ve){var xe=Br();nl(ce,he,ve,xe)}function nl(ce,he,ve,xe){var we={lane:xe,revertLane:0,gesture:null,action:ve,hasEagerState:!1,eagerState:null,next:null};if(ba(ce))To(he,we);else{var Oe=ce.alternate;if(ce.lanes===0&&(Oe===null||Oe.lanes===0)&&(Oe=he.lastRenderedReducer,Oe!==null))try{var Ue=he.lastRenderedState,We=Oe(Ue,ve);if(we.hasEagerState=!0,we.eagerState=We,wn(We,Ue))return Ul(ce,he,we,0),cn===null&&Fa(),!1}catch{}finally{}if(ve=Wo(ce,he,we,xe),ve!==null)return ge(ve,ce,xe),Gr(ve,he,xe),!0}return!1}function Ql(ce,he,ve,xe){if(xe={lane:2,revertLane:Ef(),gesture:null,action:xe,hasEagerState:!1,eagerState:null,next:null},ba(ce)){if(he)throw Error(Z(479))}else he=Wo(ce,ve,xe,2),he!==null&&ge(he,ce,2)}function ba(ce){var he=ce.alternate;return ce===Oi||he!==null&&he===Oi}function To(ce,he){$s=$c=!0;var ve=ce.pending;ve===null?he.next=he:(he.next=ve.next,ve.next=he),ce.pending=he}function Gr(ce,he,ve){if((ve&4194048)!==0){var xe=he.lanes;xe&=ce.pendingLanes,ve|=xe,he.lanes=ve,Ln(ce,ve)}}var ec={readContext:lr,use:Jc,useCallback:Un,useContext:Un,useEffect:Un,useImperativeHandle:Un,useLayoutEffect:Un,useInsertionEffect:Un,useMemo:Un,useReducer:Un,useRef:Un,useState:Un,useDebugValue:Un,useDeferredValue:Un,useTransition:Un,useSyncExternalStore:Un,useId:Un,useHostTransitionStatus:Un,useFormState:Un,useActionState:Un,useOptimistic:Un,useMemoCache:Un,useCacheRefresh:Un};ec.useEffectEvent=Un;var Fd={readContext:lr,use:Jc,useCallback:function(ce,he){return Dr().memoizedState=[ce,he===void 0?null:he],ce},useContext:lr,useEffect:Bd,useImperativeHandle:function(ce,he,ve){ve=ve!=null?ve.concat([ce]):null,tu(4194308,4,Sh.bind(null,he,ce),ve)},useLayoutEffect:function(ce,he){return tu(4194308,4,ce,he)},useInsertionEffect:function(ce,he){tu(4,2,ce,he)},useMemo:function(ce,he){var ve=Dr();he=he===void 0?null:he;var xe=ce();if(Mo){vt(!0);try{ce()}finally{vt(!1)}}return ve.memoizedState=[xe,he],xe},useReducer:function(ce,he,ve){var xe=Dr();if(ve!==void 0){var we=ve(he);if(Mo){vt(!0);try{ve(he)}finally{vt(!1)}}}else we=he;return xe.memoizedState=xe.baseState=we,ce={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ce,lastRenderedState:we},xe.queue=ce,ce=ce.dispatch=xf.bind(null,Oi,ce),[xe.memoizedState,ce]},useRef:function(ce){var he=Dr();return ce={current:ce},he.memoizedState=ce},useState:function(ce){ce=Zl(ce);var he=ce.queue,ve=jd.bind(null,Oi,he);return he.dispatch=ve,[ce.memoizedState,ve]},useDebugValue:ru,useDeferredValue:function(ce,he){var ve=Dr();return Mh(ve,ce,he)},useTransition:function(){var ce=Zl(!1);return ce=wh.bind(null,Oi,ce.queue,!0,!1),Dr().memoizedState=ce,[!1,ce]},useSyncExternalStore:function(ce,he,ve){var xe=Oi,we=Dr();if($i){if(ve===void 0)throw Error(Z(407));ve=ve()}else{if(ve=he(),cn===null)throw Error(Z(349));(qi&127)!==0||Cd(xe,he,ve)}we.memoizedState=ve;var Oe={value:ve,getSnapshot:he};return we.queue=Oe,Bd(yh.bind(null,xe,Oe,ce),[ce]),xe.flags|=2048,il(9,{destroy:void 0},_h.bind(null,xe,Oe,ve,he),null),ve},useId:function(){var ce=Dr(),he=cn.identifierPrefix;if($i){var ve=Hs,xe=Gs;ve=(xe&~(1<<32-tt(xe)-1)).toString(32)+ve,he="_"+he+"R_"+ve,ve=Wc++,0<ve&&(he+="H"+ve.toString(32)),he+="_"}else ve=mf++,he="_"+he+"r_"+ve.toString(32)+"_";return ce.memoizedState=he},useHostTransitionStatus:Oh,useFormState:Rd,useActionState:Rd,useOptimistic:function(ce){var he=Dr();he.memoizedState=he.baseState=ce;var ve={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return he.queue=ve,he=Ql.bind(null,Oi,!0,ve),ve.dispatch=he,[ce,he]},useMemoCache:mh,useCacheRefresh:function(){return Dr().memoizedState=bf.bind(null,Oi)},useEffectEvent:function(ce){var he=Dr(),ve={impl:ce};return he.memoizedState=ve,function(){if((Zi&2)!==0)throw Error(Z(440));return ve.impl.apply(void 0,arguments)}}},rl={readContext:lr,use:Jc,useCallback:Ch,useContext:lr,useEffect:Ah,useImperativeHandle:nu,useInsertionEffect:Ud,useLayoutEffect:ns,useMemo:Eh,useReducer:Kc,useRef:Ld,useState:function(){return Kc(ya)},useDebugValue:ru,useDeferredValue:function(ce,he){var ve=Gn();return Th(ve,mn.memoizedState,ce,he)},useTransition:function(){var ce=Kc(ya)[0],he=Gn().memoizedState;return[typeof ce=="boolean"?ce:Kl(ce),he]},useSyncExternalStore:vh,useId:pr,useHostTransitionStatus:Oh,useFormState:Od,useActionState:Od,useOptimistic:function(ce,he){var ve=Gn();return Ed(ve,mn,ce,he)},useMemoCache:mh,useCacheRefresh:Nh};rl.useEffectEvent=Id;var tc={readContext:lr,use:Jc,useCallback:Ch,useContext:lr,useEffect:Ah,useImperativeHandle:nu,useInsertionEffect:Ud,useLayoutEffect:ns,useMemo:Eh,useReducer:Zc,useRef:Ld,useState:function(){return Zc(ya)},useDebugValue:ru,useDeferredValue:function(ce,he){var ve=Gn();return mn===null?Mh(ve,ce,he):Th(ve,mn.memoizedState,ce,he)},useTransition:function(){var ce=Zc(ya)[0],he=Gn().memoizedState;return[typeof ce=="boolean"?ce:Kl(ce),he]},useSyncExternalStore:vh,useId:pr,useHostTransitionStatus:Oh,useFormState:Dd,useActionState:Dd,useOptimistic:function(ce,he){var ve=Gn();return mn!==null?Ed(ve,mn,ce,he):(ve.baseState=ce,[ce,ve.queue.dispatch])},useMemoCache:mh,useCacheRefresh:Nh};tc.useEffectEvent=Id;function sl(ce,he,ve,xe){he=ce.memoizedState,ve=ve(xe,he),ve=ve==null?he:se({},he,ve),ce.memoizedState=ve,ce.lanes===0&&(ce.updateQueue.baseState=ve)}var ic={enqueueSetState:function(ce,he,ve){ce=ce._reactInternals;var xe=Br(),we=Xs(xe);we.payload=he,ve!=null&&(we.callback=ve),he=va(ce,we,xe),he!==null&&(ge(he,ce,xe),Ka(he,ce,xe))},enqueueReplaceState:function(ce,he,ve){ce=ce._reactInternals;var xe=Br(),we=Xs(xe);we.tag=1,we.payload=he,ve!=null&&(we.callback=ve),he=va(ce,we,xe),he!==null&&(ge(he,ce,xe),Ka(he,ce,xe))},enqueueForceUpdate:function(ce,he){ce=ce._reactInternals;var ve=Br(),xe=Xs(ve);xe.tag=2,he!=null&&(xe.callback=he),he=va(ce,xe,ve),he!==null&&(ge(he,ce,ve),Ka(he,ce,ve))}};function Vd(ce,he,ve,xe,we,Oe,Ue){return ce=ce.stateNode,typeof ce.shouldComponentUpdate=="function"?ce.shouldComponentUpdate(xe,Oe,Ue):he.prototype&&he.prototype.isPureReactComponent?!Go(ve,xe)||!Go(we,Oe):!0}function Gd(ce,he,ve,xe){ce=he.state,typeof he.componentWillReceiveProps=="function"&&he.componentWillReceiveProps(ve,xe),typeof he.UNSAFE_componentWillReceiveProps=="function"&&he.UNSAFE_componentWillReceiveProps(ve,xe),he.state!==ce&&ic.enqueueReplaceState(he,he.state,null)}function mr(ce,he){var ve=he;if("ref"in he){ve={};for(var xe in he)xe!=="ref"&&(ve[xe]=he[xe])}if(ce=ce.defaultProps){ve===he&&(ve=se({},ve));for(var we in ce)ve[we]===void 0&&(ve[we]=ce[we])}return ve}function Dh(ce){ja(ce)}function Hd(ce){console.error(ce)}function su(ce){ja(ce)}function au(ce,he){try{var ve=ce.onUncaughtError;ve(he.value,{componentStack:he.stack})}catch(xe){setTimeout(function(){throw xe})}}function Yd(ce,he,ve){try{var xe=ce.onCaughtError;xe(ve.value,{componentStack:ve.stack,errorBoundary:he.tag===1?he.stateNode:null})}catch(we){setTimeout(function(){throw we})}}function Lh(ce,he,ve){return ve=Xs(ve),ve.tag=3,ve.payload={element:null},ve.callback=function(){au(ce,he)},ve}function al(ce){return ce=Xs(ce),ce.tag=3,ce}function Hr(ce,he,ve,xe){var we=ve.type.getDerivedStateFromError;if(typeof we=="function"){var Oe=xe.value;ce.payload=function(){return we(Oe)},ce.callback=function(){Yd(he,ve,xe)}}var Ue=ve.stateNode;Ue!==null&&typeof Ue.componentDidCatch=="function"&&(ce.callback=function(){Yd(he,ve,xe),typeof we!="function"&&(ea===null?ea=new Set([this]):ea.add(this));var We=xe.stack;this.componentDidCatch(xe.value,{componentStack:We!==null?We:""})})}function rs(ce,he,ve,xe,we){if(ve.flags|=32768,xe!==null&&typeof xe=="object"&&typeof xe.then=="function"){if(he=ve.alternate,he!==null&&Ya(he,ve,we,!0),ve=ir.current,ve!==null){switch(ve.tag){case 31:case 13:return vs===null?Li():ve.alternate===null&&un===0&&(un=3),ve.flags&=-257,ve.flags|=65536,ve.lanes=we,xe===Yl?ve.flags|=16384:(he=ve.updateQueue,he===null?ve.updateQueue=new Set([xe]):he.add(xe),Af(ce,xe,we)),!1;case 22:return ve.flags|=65536,xe===Yl?ve.flags|=16384:(he=ve.updateQueue,he===null?(he={transitions:null,markerInstances:null,retryQueue:new Set([xe])},ve.updateQueue=he):(ve=he.retryQueue,ve===null?he.retryQueue=new Set([xe]):ve.add(xe)),Af(ce,xe,we)),!1}throw Error(Z(435,ve.tag))}return Af(ce,xe,we),Li(),!1}if($i)return he=ir.current,he!==null?((he.flags&65536)===0&&(he.flags|=256),he.flags|=65536,he.lanes=we,xe!==zc&&(ce=Error(Z(422),{cause:xe}),Vl(jr(ce,ve)))):(xe!==zc&&(he=Error(Z(423),{cause:xe}),Vl(jr(he,ve))),ce=ce.current.alternate,ce.flags|=65536,we&=-we,ce.lanes|=we,xe=jr(xe,ve),we=Lh(ce.stateNode,xe,we),Xc(ce,we),un!==4&&(un=2)),!1;var Oe=Error(Z(520),{cause:xe});if(Oe=jr(Oe,ve),Ls===null?Ls=[Oe]:Ls.push(Oe),un!==4&&(un=2),he===null)return!0;xe=jr(xe,ve),ve=he;do{switch(ve.tag){case 3:return ve.flags|=65536,ce=we&-we,ve.lanes|=ce,ce=Lh(ve.stateNode,xe,ce),Xc(ve,ce),!1;case 1:if(he=ve.type,Oe=ve.stateNode,(ve.flags&128)===0&&(typeof he.getDerivedStateFromError=="function"||Oe!==null&&typeof Oe.componentDidCatch=="function"&&(ea===null||!ea.has(Oe))))return ve.flags|=65536,we&=-we,ve.lanes|=we,we=al(we),Hr(we,ce,ve,xe),Xc(ve,we),!1}ve=ve.return}while(ve!==null);return!1}var ou=Error(Z(461)),Pn=!1;function zn(ce,he,ve,xe){he.child=ce===null?bd(he,null,ve,xe):Co(he,ce.child,ve,xe)}function nc(ce,he,ve,xe,we){ve=ve.render;var Oe=he.ref;if("ref"in xe){var Ue={};for(var We in xe)We!=="ref"&&(Ue[We]=xe[We])}else Ue=xe;return xo(he),xe=hh(ce,he,ve,Ue,Oe,we),We=dh(),ce!==null&&!Pn?(fh(ce,he,we),Ns(ce,he,we)):($i&&We&&Uc(he),he.flags|=1,zn(ce,he,xe,we),he.child)}function rc(ce,he,ve,xe,we){if(ce===null){var Oe=ve.type;return typeof Oe=="function"&&!Or(Oe)&&Oe.defaultProps===void 0&&ve.compare===null?(he.tag=15,he.type=Oe,ss(ce,he,Oe,xe,we)):(ce=zl(ve.type,null,xe,he,he.mode,we),ce.ref=he.ref,ce.return=he,he.child=ce)}if(Oe=ce.child,!eo(ce,we)){var Ue=Oe.memoizedProps;if(ve=ve.compare,ve=ve!==null?ve:Go,ve(Ue,xe)&&ce.ref===he.ref)return Ns(ce,he,we)}return he.flags|=1,ce=Fs(Oe,xe),ce.ref=he.ref,ce.return=he,he.child=ce}function ss(ce,he,ve,xe,we){if(ce!==null){var Oe=ce.memoizedProps;if(Go(Oe,xe)&&ce.ref===he.ref)if(Pn=!1,he.pendingProps=xe=Oe,eo(ce,we))(ce.flags&131072)!==0&&(Pn=!0);else return he.lanes=ce.lanes,Ns(ce,he,we)}return ol(ce,he,ve,xe,we)}function as(ce,he,ve,xe){var we=xe.children,Oe=ce!==null?ce.memoizedState:null;if(ce===null&&he.stateNode===null&&(he.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),xe.mode==="hidden"){if((he.flags&128)!==0){if(Oe=Oe!==null?Oe.baseLanes|ve:ve,ce!==null){for(xe=he.child=ce.child,we=0;xe!==null;)we=we|xe.lanes|xe.childLanes,xe=xe.sibling;xe=we&~Oe}else xe=0,he.child=null;return Js(ce,he,Oe,ve,xe)}if((ve&536870912)!==0)he.memoizedState={baseLanes:0,cachePool:null},ce!==null&&el(he,Oe!==null?Oe.cachePool:null),Oe!==null?ah(he,Oe):oh(),xd(he);else return xe=he.lanes=536870912,Js(ce,he,Oe!==null?Oe.baseLanes|ve:ve,ve,xe)}else Oe!==null?(el(he,Oe.cachePool),ah(he,Oe),_a(),he.memoizedState=null):(ce!==null&&el(he,null),oh(),_a());return zn(ce,he,we,ve),he.child}function Rs(ce,he){return ce!==null&&ce.tag===22||he.stateNode!==null||(he.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),he.sibling}function Js(ce,he,ve,xe,we){var Oe=Ys();return Oe=Oe===null?null:{parent:Ci._currentValue,pool:Oe},he.memoizedState={baseLanes:ve,cachePool:Oe},ce!==null&&el(he,null),oh(),xd(he),ce!==null&&Ya(ce,he,xe,!0),he.childLanes=we,null}function _s(ce,he){return he=ll({mode:he.mode,children:he.children},ce.mode),he.ref=ce.ref,ce.child=he,he.return=ce,he}function cr(ce,he,ve){return Co(he,ce.child,null,ve),ce=_s(he,he.pendingProps),ce.flags|=2,es(he),he.memoizedState=null,ce}function sc(ce,he,ve){var xe=he.pendingProps,we=(he.flags&128)!==0;if(he.flags&=-129,ce===null){if($i){if(xe.mode==="hidden")return ce=_s(he,xe),he.lanes=536870912,Rs(null,ce);if(lh(he),(ce=An)?(ce=g0(ce,or),ce=ce!==null&&ce.data==="&"?ce:null,ce!==null&&(he.memoizedState={dehydrated:ce,treeContext:Vs!==null?{id:Gs,overflow:Hs}:null,retryLane:536870912,hydrationErrors:null},ve=pd(ce),ve.return=he,he.child=ve,ar=he,An=null)):ce=null,ce===null)throw Xi(he);return he.lanes=536870912,null}return _s(he,xe)}var Oe=ce.memoizedState;if(Oe!==null){var Ue=Oe.dehydrated;if(lh(he),we)if(he.flags&256)he.flags&=-257,he=cr(ce,he,ve);else if(he.memoizedState!==null)he.child=ce.child,he.flags|=128,he=null;else throw Error(Z(558));else if(Pn||Ya(ce,he,ve,!1),we=(ve&ce.childLanes)!==0,Pn||we){if(xe=cn,xe!==null&&(Ue=wr(xe,ve),Ue!==0&&Ue!==Oe.retryLane))throw Oe.retryLane=Ue,Va(ce,Ue),ge(xe,ce,Ue),ou;Li(),he=cr(ce,he,ve)}else ce=Oe.treeContext,An=ta(Ue.nextSibling),ar=he,$i=!0,da=null,or=!1,ce!==null&&Fl(he,ce),he=_s(he,xe),he.flags|=4096;return he}return ce=Fs(ce.child,{mode:xe.mode,children:xe.children}),ce.ref=he.ref,he.child=ce,ce.return=he,ce}function Os(ce,he){var ve=he.ref;if(ve===null)ce!==null&&ce.ref!==null&&(he.flags|=4194816);else{if(typeof ve!="function"&&typeof ve!="object")throw Error(Z(284));(ce===null||ce.ref!==ve)&&(he.flags|=4194816)}}function ol(ce,he,ve,xe,we){return xo(he),ve=hh(ce,he,ve,xe,void 0,we),xe=dh(),ce!==null&&!Pn?(fh(ce,he,we),Ns(ce,he,we)):($i&&xe&&Uc(he),he.flags|=1,zn(ce,he,ve,we),he.child)}function Sr(ce,he,ve,xe,we,Oe){return xo(he),he.updateQueue=null,ve=Sd(he,xe,ve,we),Ad(ce),xe=dh(),ce!==null&&!Pn?(fh(ce,he,Oe),Ns(ce,he,Oe)):($i&&xe&&Uc(he),he.flags|=1,zn(ce,he,ve,Oe),he.child)}function gr(ce,he,ve,xe,we){if(xo(he),he.stateNode===null){var Oe=Ga,Ue=ve.contextType;typeof Ue=="object"&&Ue!==null&&(Oe=lr(Ue)),Oe=new ve(xe,Oe),he.memoizedState=Oe.state!==null&&Oe.state!==void 0?Oe.state:null,Oe.updater=ic,he.stateNode=Oe,Oe._reactInternals=he,Oe=he.stateNode,Oe.props=xe,Oe.state=he.memoizedState,Oe.refs={},nh(he),Ue=ve.contextType,Oe.context=typeof Ue=="object"&&Ue!==null?lr(Ue):Ga,Oe.state=he.memoizedState,Ue=ve.getDerivedStateFromProps,typeof Ue=="function"&&(sl(he,ve,Ue,xe),Oe.state=he.memoizedState),typeof ve.getDerivedStateFromProps=="function"||typeof Oe.getSnapshotBeforeUpdate=="function"||typeof Oe.UNSAFE_componentWillMount!="function"&&typeof Oe.componentWillMount!="function"||(Ue=Oe.state,typeof Oe.componentWillMount=="function"&&Oe.componentWillMount(),typeof Oe.UNSAFE_componentWillMount=="function"&&Oe.UNSAFE_componentWillMount(),Ue!==Oe.state&&ic.enqueueReplaceState(Oe,Oe.state,null),Eo(he,xe,Oe,we),$l(),Oe.state=he.memoizedState),typeof Oe.componentDidMount=="function"&&(he.flags|=4194308),xe=!0}else if(ce===null){Oe=he.stateNode;var We=he.memoizedProps,ot=mr(ve,We);Oe.props=ot;var Et=Oe.context,Gt=ve.contextType;Ue=Ga,typeof Gt=="object"&&Gt!==null&&(Ue=lr(Gt));var Jt=ve.getDerivedStateFromProps;Gt=typeof Jt=="function"||typeof Oe.getSnapshotBeforeUpdate=="function",We=he.pendingProps!==We,Gt||typeof Oe.UNSAFE_componentWillReceiveProps!="function"&&typeof Oe.componentWillReceiveProps!="function"||(We||Et!==Ue)&&Gd(he,Oe,xe,Ue),Ja=!1;var Ot=he.memoizedState;Oe.state=Ot,Eo(he,xe,Oe,we),$l(),Et=he.memoizedState,We||Ot!==Et||Ja?(typeof Jt=="function"&&(sl(he,ve,Jt,xe),Et=he.memoizedState),(ot=Ja||Vd(he,ve,ot,xe,Ot,Et,Ue))?(Gt||typeof Oe.UNSAFE_componentWillMount!="function"&&typeof Oe.componentWillMount!="function"||(typeof Oe.componentWillMount=="function"&&Oe.componentWillMount(),typeof Oe.UNSAFE_componentWillMount=="function"&&Oe.UNSAFE_componentWillMount()),typeof Oe.componentDidMount=="function"&&(he.flags|=4194308)):(typeof Oe.componentDidMount=="function"&&(he.flags|=4194308),he.memoizedProps=xe,he.memoizedState=Et),Oe.props=xe,Oe.state=Et,Oe.context=Ue,xe=ot):(typeof Oe.componentDidMount=="function"&&(he.flags|=4194308),xe=!1)}else{Oe=he.stateNode,rh(ce,he),Ue=he.memoizedProps,Gt=mr(ve,Ue),Oe.props=Gt,Jt=he.pendingProps,Ot=Oe.context,Et=ve.contextType,ot=Ga,typeof Et=="object"&&Et!==null&&(ot=lr(Et)),We=ve.getDerivedStateFromProps,(Et=typeof We=="function"||typeof Oe.getSnapshotBeforeUpdate=="function")||typeof Oe.UNSAFE_componentWillReceiveProps!="function"&&typeof Oe.componentWillReceiveProps!="function"||(Ue!==Jt||Ot!==ot)&&Gd(he,Oe,xe,ot),Ja=!1,Ot=he.memoizedState,Oe.state=Ot,Eo(he,xe,Oe,we),$l();var It=he.memoizedState;Ue!==Jt||Ot!==It||Ja||ce!==null&&ce.dependencies!==null&&Zo(ce.dependencies)?(typeof We=="function"&&(sl(he,ve,We,xe),It=he.memoizedState),(Gt=Ja||Vd(he,ve,Gt,xe,Ot,It,ot)||ce!==null&&ce.dependencies!==null&&Zo(ce.dependencies))?(Et||typeof Oe.UNSAFE_componentWillUpdate!="function"&&typeof Oe.componentWillUpdate!="function"||(typeof Oe.componentWillUpdate=="function"&&Oe.componentWillUpdate(xe,It,ot),typeof Oe.UNSAFE_componentWillUpdate=="function"&&Oe.UNSAFE_componentWillUpdate(xe,It,ot)),typeof Oe.componentDidUpdate=="function"&&(he.flags|=4),typeof Oe.getSnapshotBeforeUpdate=="function"&&(he.flags|=1024)):(typeof Oe.componentDidUpdate!="function"||Ue===ce.memoizedProps&&Ot===ce.memoizedState||(he.flags|=4),typeof Oe.getSnapshotBeforeUpdate!="function"||Ue===ce.memoizedProps&&Ot===ce.memoizedState||(he.flags|=1024),he.memoizedProps=xe,he.memoizedState=It),Oe.props=xe,Oe.state=It,Oe.context=ot,xe=Gt):(typeof Oe.componentDidUpdate!="function"||Ue===ce.memoizedProps&&Ot===ce.memoizedState||(he.flags|=4),typeof Oe.getSnapshotBeforeUpdate!="function"||Ue===ce.memoizedProps&&Ot===ce.memoizedState||(he.flags|=1024),xe=!1)}return Oe=xe,Os(ce,he),xe=(he.flags&128)!==0,Oe||xe?(Oe=he.stateNode,ve=xe&&typeof ve.getDerivedStateFromError!="function"?null:Oe.render(),he.flags|=1,ce!==null&&xe?(he.child=Co(he,ce.child,null,we),he.child=Co(he,null,ve,we)):zn(ce,he,ve,we),he.memoizedState=Oe.state,ce=he.child):ce=Ns(ce,he,we),ce}function tn(ce,he,ve,xe){return bo(),he.flags|=256,zn(ce,he,ve,xe),he.child}var os={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ys(ce){return{baseLanes:ce,cachePool:Gc()}}function ac(ce,he,ve){return ce=ce!==null?ce.childLanes&~ve:0,he&&(ce|=Qi),ce}function ls(ce,he,ve){var xe=he.pendingProps,we=!1,Oe=(he.flags&128)!==0,Ue;if((Ue=Oe)||(Ue=ce!==null&&ce.memoizedState===null?!1:(In.current&2)!==0),Ue&&(we=!0,he.flags&=-129),Ue=(he.flags&32)!==0,he.flags&=-33,ce===null){if($i){if(we?Za(he):_a(),(ce=An)?(ce=g0(ce,or),ce=ce!==null&&ce.data!=="&"?ce:null,ce!==null&&(he.memoizedState={dehydrated:ce,treeContext:Vs!==null?{id:Gs,overflow:Hs}:null,retryLane:536870912,hydrationErrors:null},ve=pd(ce),ve.return=he,he.child=ve,ar=he,An=null)):ce=null,ce===null)throw Xi(he);return Uf(ce)?he.lanes=32:he.lanes=536870912,null}var We=xe.children;return xe=xe.fallback,we?(_a(),we=he.mode,We=ll({mode:"hidden",children:We},we),xe=ua(xe,we,ve,null),We.return=he,xe.return=he,We.sibling=xe,he.child=We,xe=he.child,xe.memoizedState=ys(ve),xe.childLanes=ac(ce,Ue,ve),he.memoizedState=os,Rs(null,xe)):(Za(he),Qa(he,We))}var ot=ce.memoizedState;if(ot!==null&&(We=ot.dehydrated,We!==null)){if(Oe)he.flags&256?(Za(he),he.flags&=-257,he=cl(ce,he,ve)):he.memoizedState!==null?(_a(),he.child=ce.child,he.flags|=128,he=null):(_a(),We=xe.fallback,we=he.mode,xe=ll({mode:"visible",children:xe.children},we),We=ua(We,we,ve,null),We.flags|=2,xe.return=he,We.return=he,xe.sibling=We,he.child=xe,Co(he,ce.child,null,ve),xe=he.child,xe.memoizedState=ys(ve),xe.childLanes=ac(ce,Ue,ve),he.memoizedState=os,he=Rs(null,xe));else if(Za(he),Uf(We)){if(Ue=We.nextSibling&&We.nextSibling.dataset,Ue)var Et=Ue.dgst;Ue=Et,xe=Error(Z(419)),xe.stack="",xe.digest=Ue,Vl({value:xe,source:null,stack:null}),he=cl(ce,he,ve)}else if(Pn||Ya(ce,he,ve,!1),Ue=(ve&ce.childLanes)!==0,Pn||Ue){if(Ue=cn,Ue!==null&&(xe=wr(Ue,ve),xe!==0&&xe!==ot.retryLane))throw ot.retryLane=xe,Va(ce,xe),ge(Ue,ce,xe),ou;If(We)||Li(),he=cl(ce,he,ve)}else If(We)?(he.flags|=192,he.child=ce.child,he=null):(ce=ot.treeContext,An=ta(We.nextSibling),ar=he,$i=!0,da=null,or=!1,ce!==null&&Fl(he,ce),he=Qa(he,xe.children),he.flags|=4096);return he}return we?(_a(),We=xe.fallback,we=he.mode,ot=ce.child,Et=ot.sibling,xe=Fs(ot,{mode:"hidden",children:xe.children}),xe.subtreeFlags=ot.subtreeFlags&65011712,Et!==null?We=Fs(Et,We):(We=ua(We,we,ve,null),We.flags|=2),We.return=he,xe.return=he,xe.sibling=We,he.child=xe,Rs(null,xe),xe=he.child,We=ce.child.memoizedState,We===null?We=ys(ve):(we=We.cachePool,we!==null?(ot=Ci._currentValue,we=we.parent!==ot?{parent:ot,pool:ot}:we):we=Gc(),We={baseLanes:We.baseLanes|ve,cachePool:we}),xe.memoizedState=We,xe.childLanes=ac(ce,Ue,ve),he.memoizedState=os,Rs(ce.child,xe)):(Za(he),ve=ce.child,ce=ve.sibling,ve=Fs(ve,{mode:"visible",children:xe.children}),ve.return=he,ve.sibling=null,ce!==null&&(Ue=he.deletions,Ue===null?(he.deletions=[ce],he.flags|=16):Ue.push(ce)),he.child=ve,he.memoizedState=null,ve)}function Qa(ce,he){return he=ll({mode:"visible",children:he},ce.mode),he.return=ce,ce.child=he}function ll(ce,he){return ce=Rr(22,ce,null,he),ce.lanes=0,ce}function cl(ce,he,ve){return Co(he,ce.child,null,ve),ce=Qa(he,he.pendingProps.children),ce.flags|=2,he.memoizedState=null,ce}function wo(ce,he,ve){ce.lanes|=he;var xe=ce.alternate;xe!==null&&(xe.lanes|=he),ma(ce.return,he,ve)}function oc(ce,he,ve,xe,we,Oe){var Ue=ce.memoizedState;Ue===null?ce.memoizedState={isBackwards:he,rendering:null,renderingStartTime:0,last:xe,tail:ve,tailMode:we,treeForkCount:Oe}:(Ue.isBackwards=he,Ue.rendering=null,Ue.renderingStartTime=0,Ue.last=xe,Ue.tail=ve,Ue.tailMode=we,Ue.treeForkCount=Oe)}function lc(ce,he,ve){var xe=he.pendingProps,we=xe.revealOrder,Oe=xe.tail;xe=xe.children;var Ue=In.current,We=(Ue&2)!==0;if(We?(Ue=Ue&1|2,he.flags|=128):Ue&=1,Ze(In,Ue),zn(ce,he,xe,ve),xe=$i?Ko:0,!We&&ce!==null&&(ce.flags&128)!==0)e:for(ce=he.child;ce!==null;){if(ce.tag===13)ce.memoizedState!==null&&wo(ce,ve,he);else if(ce.tag===19)wo(ce,ve,he);else if(ce.child!==null){ce.child.return=ce,ce=ce.child;continue}if(ce===he)break e;for(;ce.sibling===null;){if(ce.return===null||ce.return===he)break e;ce=ce.return}ce.sibling.return=ce.return,ce=ce.sibling}switch(we){case"forwards":for(ve=he.child,we=null;ve!==null;)ce=ve.alternate,ce!==null&&qc(ce)===null&&(we=ve),ve=ve.sibling;ve=we,ve===null?(we=he.child,he.child=null):(we=ve.sibling,ve.sibling=null),oc(he,!1,we,ve,Oe,xe);break;case"backwards":case"unstable_legacy-backwards":for(ve=null,we=he.child,he.child=null;we!==null;){if(ce=we.alternate,ce!==null&&qc(ce)===null){he.child=we;break}ce=we.sibling,we.sibling=ve,ve=we,we=ce}oc(he,!0,ve,null,Oe,xe);break;case"together":oc(he,!1,null,null,void 0,xe);break;default:he.memoizedState=null}return he.child}function Ns(ce,he,ve){if(ce!==null&&(he.dependencies=ce.dependencies),hs|=he.lanes,(ve&he.childLanes)===0)if(ce!==null){if(Ya(ce,he,ve,!1),(ve&he.childLanes)===0)return null}else return null;if(ce!==null&&he.child!==ce.child)throw Error(Z(153));if(he.child!==null){for(ce=he.child,ve=Fs(ce,ce.pendingProps),he.child=ve,ve.return=he;ce.sibling!==null;)ce=ce.sibling,ve=ve.sibling=Fs(ce,ce.pendingProps),ve.return=he;ve.sibling=null}return he.child}function eo(ce,he){return(ce.lanes&he)!==0?!0:(ce=ce.dependencies,!!(ce!==null&&Zo(ce)))}function cc(ce,he,ve){switch(he.tag){case 3:ft(he,he.stateNode.containerInfo),pa(he,Ci,ce.memoizedState.cache),bo();break;case 27:case 5:Ht(he);break;case 4:ft(he,he.stateNode.containerInfo);break;case 10:pa(he,he.type,he.memoizedProps.value);break;case 31:if(he.memoizedState!==null)return he.flags|=128,lh(he),null;break;case 13:var xe=he.memoizedState;if(xe!==null)return xe.dehydrated!==null?(Za(he),he.flags|=128,null):(ve&he.child.childLanes)!==0?ls(ce,he,ve):(Za(he),ce=Ns(ce,he,ve),ce!==null?ce.sibling:null);Za(he);break;case 19:var we=(ce.flags&128)!==0;if(xe=(ve&he.childLanes)!==0,xe||(Ya(ce,he,ve,!1),xe=(ve&he.childLanes)!==0),we){if(xe)return lc(ce,he,ve);he.flags|=128}if(we=he.memoizedState,we!==null&&(we.rendering=null,we.tail=null,we.lastEffect=null),Ze(In,In.current),xe)break;return null;case 22:return he.lanes=0,as(ce,he,ve,he.pendingProps);case 24:pa(he,Ci,ce.memoizedState.cache)}return Ns(ce,he,ve)}function lu(ce,he,ve){if(ce!==null)if(ce.memoizedProps!==he.pendingProps)Pn=!0;else{if(!eo(ce,ve)&&(he.flags&128)===0)return Pn=!1,cc(ce,he,ve);Pn=(ce.flags&131072)!==0}else Pn=!1,$i&&(he.flags&1048576)!==0&&Xu(he,Ko,he.index);switch(he.lanes=0,he.tag){case 16:e:{var xe=he.pendingProps;if(ce=So(he.elementType),he.type=ce,typeof ce=="function")Or(ce)?(xe=mr(ce,xe),he.tag=1,he=gr(null,he,ce,xe,ve)):(he.tag=0,he=ol(null,he,ce,xe,ve));else{if(ce!=null){var we=ce.$$typeof;if(we===be){he.tag=11,he=nc(null,he,ce,xe,ve);break e}else if(we===Ee){he.tag=14,he=rc(null,he,ce,xe,ve);break e}}throw he=Ge(ce)||ce,Error(Z(306,he,""))}}return he;case 0:return ol(ce,he,he.type,he.pendingProps,ve);case 1:return xe=he.type,we=mr(xe,he.pendingProps),gr(ce,he,xe,we,ve);case 3:e:{if(ft(he,he.stateNode.containerInfo),ce===null)throw Error(Z(387));xe=he.pendingProps;var Oe=he.memoizedState;we=Oe.element,rh(ce,he),Eo(he,xe,null,ve);var Ue=he.memoizedState;if(xe=Ue.cache,pa(he,Ci,xe),xe!==Oe.cache&&Vc(he,[Ci],ve,!0),$l(),xe=Ue.element,Oe.isDehydrated)if(Oe={element:xe,isDehydrated:!1,cache:Ue.cache},he.updateQueue.baseState=Oe,he.memoizedState=Oe,he.flags&256){he=tn(ce,he,xe,ve);break e}else if(xe!==we){we=jr(Error(Z(424)),he),Vl(we),he=tn(ce,he,xe,ve);break e}else{switch(ce=he.stateNode.containerInfo,ce.nodeType){case 9:ce=ce.body;break;default:ce=ce.nodeName==="HTML"?ce.ownerDocument.body:ce}for(An=ta(ce.firstChild),ar=he,$i=!0,da=null,or=!0,ve=bd(he,null,xe,ve),he.child=ve;ve;)ve.flags=ve.flags&-3|4096,ve=ve.sibling}else{if(bo(),xe===we){he=Ns(ce,he,ve);break e}zn(ce,he,xe,ve)}he=he.child}return he;case 26:return Os(ce,he),ce===null?(ve=A0(he.type,null,he.pendingProps,null))?he.memoizedState=ve:$i||(ve=he.type,ce=he.pendingProps,xe=Qd(it.current).createElement(ve),xe[ki]=he,xe[On]=ce,kr(xe,ve,ce),mt(xe),he.stateNode=xe):he.memoizedState=A0(he.type,ce.memoizedProps,he.pendingProps,ce.memoizedState),null;case 27:return Ht(he),ce===null&&$i&&(xe=he.stateNode=y0(he.type,he.pendingProps,it.current),ar=he,or=!0,we=An,gl(he.type)?(zf=we,An=ta(xe.firstChild)):An=we),zn(ce,he,he.pendingProps.children,ve),Os(ce,he),ce===null&&(he.flags|=4194304),he.child;case 5:return ce===null&&$i&&((we=xe=An)&&(xe=up(xe,he.type,he.pendingProps,or),xe!==null?(he.stateNode=xe,ar=he,An=ta(xe.firstChild),or=!1,we=!0):we=!1),we||Xi(he)),Ht(he),we=he.type,Oe=he.pendingProps,Ue=ce!==null?ce.memoizedProps:null,xe=Oe.children,Lf(we,Oe)?xe=null:Ue!==null&&Lf(we,Ue)&&(he.flags|=32),he.memoizedState!==null&&(we=hh(ce,he,gf,null,null,ve),Hh._currentValue=we),Os(ce,he),zn(ce,he,xe,ve),he.child;case 6:return ce===null&&$i&&((ce=ve=An)&&(ve=hp(ve,he.pendingProps,or),ve!==null?(he.stateNode=ve,ar=he,An=null,ce=!0):ce=!1),ce||Xi(he)),null;case 13:return ls(ce,he,ve);case 4:return ft(he,he.stateNode.containerInfo),xe=he.pendingProps,ce===null?he.child=Co(he,null,xe,ve):zn(ce,he,xe,ve),he.child;case 11:return nc(ce,he,he.type,he.pendingProps,ve);case 7:return zn(ce,he,he.pendingProps,ve),he.child;case 8:return zn(ce,he,he.pendingProps.children,ve),he.child;case 12:return zn(ce,he,he.pendingProps.children,ve),he.child;case 10:return xe=he.pendingProps,pa(he,he.type,xe.value),zn(ce,he,xe.children,ve),he.child;case 9:return we=he.type._context,xe=he.pendingProps.children,xo(he),we=lr(we),xe=xe(we),he.flags|=1,zn(ce,he,xe,ve),he.child;case 14:return rc(ce,he,he.type,he.pendingProps,ve);case 15:return ss(ce,he,he.type,he.pendingProps,ve);case 19:return lc(ce,he,ve);case 31:return sc(ce,he,ve);case 22:return as(ce,he,ve,he.pendingProps);case 24:return xo(he),xe=lr(Ci),ce===null?(we=Ys(),we===null&&(we=cn,Oe=Ku(),we.pooledCache=Oe,Oe.refCount++,Oe!==null&&(we.pooledCacheLanes|=ve),we=Oe),he.memoizedState={parent:xe,cache:we},nh(he),pa(he,Ci,we)):((ce.lanes&ve)!==0&&(rh(ce,he),Eo(he,null,null,ve),$l()),we=ce.memoizedState,Oe=he.memoizedState,we.parent!==xe?(we={parent:xe,cache:xe},he.memoizedState=we,he.lanes===0&&(he.memoizedState=he.updateQueue.baseState=we),pa(he,Ci,xe)):(xe=Oe.cache,pa(he,Ci,xe),xe!==we.cache&&Vc(he,[Ci],ve,!0))),zn(ce,he,he.pendingProps.children,ve),he.child;case 29:throw he.pendingProps}throw Error(Z(156,he.tag))}function Yr(ce){ce.flags|=4}function io(ce,he,ve,xe,we){if((he=(ce.mode&32)!==0)&&(he=!1),he){if(ce.flags|=16777216,(we&335544128)===we)if(ce.stateNode.complete)ce.flags|=8192;else if(li())ce.flags|=8192;else throw Pi=Yl,Hl}else ce.flags&=-16777217}function xa(ce,he){if(he.type!=="stylesheet"||(he.state.loading&4)!==0)ce.flags&=-16777217;else if(ce.flags|=16777216,!T0(he))if(li())ce.flags|=8192;else throw Pi=Yl,Hl}function ul(ce,he){he!==null&&(ce.flags|=4),ce.flags&16384&&(he=ce.tag!==22?Di():536870912,ce.lanes|=he,ds|=he)}function uc(ce,he){if(!$i)switch(ce.tailMode){case"hidden":he=ce.tail;for(var ve=null;he!==null;)he.alternate!==null&&(ve=he),he=he.sibling;ve===null?ce.tail=null:ve.sibling=null;break;case"collapsed":ve=ce.tail;for(var xe=null;ve!==null;)ve.alternate!==null&&(xe=ve),ve=ve.sibling;xe===null?he||ce.tail===null?ce.tail=null:ce.tail.sibling=null:xe.sibling=null}}function fn(ce){var he=ce.alternate!==null&&ce.alternate.child===ce.child,ve=0,xe=0;if(he)for(var we=ce.child;we!==null;)ve|=we.lanes|we.childLanes,xe|=we.subtreeFlags&65011712,xe|=we.flags&65011712,we.return=ce,we=we.sibling;else for(we=ce.child;we!==null;)ve|=we.lanes|we.childLanes,xe|=we.subtreeFlags,xe|=we.flags,we.return=ce,we=we.sibling;return ce.subtreeFlags|=xe,ce.childLanes=ve,he}function Bh(ce,he,ve){var xe=he.pendingProps;switch(Ha(he),he.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(he),null;case 1:return fn(he),null;case 3:return ve=he.stateNode,xe=null,ce!==null&&(xe=ce.memoizedState.cache),he.memoizedState.cache!==xe&&(he.flags|=2048),gs(Ci),kt(),ve.pendingContext&&(ve.context=ve.pendingContext,ve.pendingContext=null),(ce===null||ce.child===null)&&(yo(he)?Yr(he):ce===null||ce.memoizedState.isDehydrated&&(he.flags&256)===0||(he.flags|=1024,qu())),fn(he),null;case 26:var we=he.type,Oe=he.memoizedState;return ce===null?(Yr(he),Oe!==null?(fn(he),xa(he,Oe)):(fn(he),io(he,we,null,xe,ve))):Oe?Oe!==ce.memoizedState?(Yr(he),fn(he),xa(he,Oe)):(fn(he),he.flags&=-16777217):(ce=ce.memoizedProps,ce!==xe&&Yr(he),fn(he),io(he,we,ce,xe,ve)),null;case 27:if(Wt(he),ve=it.current,we=he.type,ce!==null&&he.stateNode!=null)ce.memoizedProps!==xe&&Yr(he);else{if(!xe){if(he.stateNode===null)throw Error(Z(166));return fn(he),null}ce=st.current,yo(he)?Fc(he):(ce=y0(we,xe,ve),he.stateNode=ce,Yr(he))}return fn(he),null;case 5:if(Wt(he),we=he.type,ce!==null&&he.stateNode!=null)ce.memoizedProps!==xe&&Yr(he);else{if(!xe){if(he.stateNode===null)throw Error(Z(166));return fn(he),null}if(Oe=st.current,yo(he))Fc(he);else{var Ue=Qd(it.current);switch(Oe){case 1:Oe=Ue.createElementNS("http://www.w3.org/2000/svg",we);break;case 2:Oe=Ue.createElementNS("http://www.w3.org/1998/Math/MathML",we);break;default:switch(we){case"svg":Oe=Ue.createElementNS("http://www.w3.org/2000/svg",we);break;case"math":Oe=Ue.createElementNS("http://www.w3.org/1998/Math/MathML",we);break;case"script":Oe=Ue.createElement("div"),Oe.innerHTML="<script><\/script>",Oe=Oe.removeChild(Oe.firstChild);break;case"select":Oe=typeof xe.is=="string"?Ue.createElement("select",{is:xe.is}):Ue.createElement("select"),xe.multiple?Oe.multiple=!0:xe.size&&(Oe.size=xe.size);break;default:Oe=typeof xe.is=="string"?Ue.createElement(we,{is:xe.is}):Ue.createElement(we)}}Oe[ki]=he,Oe[On]=xe;e:for(Ue=he.child;Ue!==null;){if(Ue.tag===5||Ue.tag===6)Oe.appendChild(Ue.stateNode);else if(Ue.tag!==4&&Ue.tag!==27&&Ue.child!==null){Ue.child.return=Ue,Ue=Ue.child;continue}if(Ue===he)break e;for(;Ue.sibling===null;){if(Ue.return===null||Ue.return===he)break e;Ue=Ue.return}Ue.sibling.return=Ue.return,Ue=Ue.sibling}he.stateNode=Oe;e:switch(kr(Oe,we,xe),we){case"button":case"input":case"select":case"textarea":xe=!!xe.autoFocus;break e;case"img":xe=!0;break e;default:xe=!1}xe&&Yr(he)}}return fn(he),io(he,he.type,ce===null?null:ce.memoizedProps,he.pendingProps,ve),null;case 6:if(ce&&he.stateNode!=null)ce.memoizedProps!==xe&&Yr(he);else{if(typeof xe!="string"&&he.stateNode===null)throw Error(Z(166));if(ce=it.current,yo(he)){if(ce=he.stateNode,ve=he.memoizedProps,xe=null,we=ar,we!==null)switch(we.tag){case 27:case 5:xe=we.memoizedProps}ce[ki]=he,ce=!!(ce.nodeValue===ve||xe!==null&&xe.suppressHydrationWarning===!0||l0(ce.nodeValue,ve)),ce||Xi(he,!0)}else ce=Qd(ce).createTextNode(xe),ce[ki]=he,he.stateNode=ce}return fn(he),null;case 31:if(ve=he.memoizedState,ce===null||ce.memoizedState!==null){if(xe=yo(he),ve!==null){if(ce===null){if(!xe)throw Error(Z(318));if(ce=he.memoizedState,ce=ce!==null?ce.dehydrated:null,!ce)throw Error(Z(557));ce[ki]=he}else bo(),(he.flags&128)===0&&(he.memoizedState=null),he.flags|=4;fn(he),ce=!1}else ve=qu(),ce!==null&&ce.memoizedState!==null&&(ce.memoizedState.hydrationErrors=ve),ce=!0;if(!ce)return he.flags&256?(es(he),he):(es(he),null);if((he.flags&128)!==0)throw Error(Z(558))}return fn(he),null;case 13:if(xe=he.memoizedState,ce===null||ce.memoizedState!==null&&ce.memoizedState.dehydrated!==null){if(we=yo(he),xe!==null&&xe.dehydrated!==null){if(ce===null){if(!we)throw Error(Z(318));if(we=he.memoizedState,we=we!==null?we.dehydrated:null,!we)throw Error(Z(317));we[ki]=he}else bo(),(he.flags&128)===0&&(he.memoizedState=null),he.flags|=4;fn(he),we=!1}else we=qu(),ce!==null&&ce.memoizedState!==null&&(ce.memoizedState.hydrationErrors=we),we=!0;if(!we)return he.flags&256?(es(he),he):(es(he),null)}return es(he),(he.flags&128)!==0?(he.lanes=ve,he):(ve=xe!==null,ce=ce!==null&&ce.memoizedState!==null,ve&&(xe=he.child,we=null,xe.alternate!==null&&xe.alternate.memoizedState!==null&&xe.alternate.memoizedState.cachePool!==null&&(we=xe.alternate.memoizedState.cachePool.pool),Oe=null,xe.memoizedState!==null&&xe.memoizedState.cachePool!==null&&(Oe=xe.memoizedState.cachePool.pool),Oe!==we&&(xe.flags|=2048)),ve!==ce&&ve&&(he.child.flags|=8192),ul(he,he.updateQueue),fn(he),null);case 4:return kt(),ce===null&&Pf(he.stateNode.containerInfo),fn(he),null;case 10:return gs(he.type),fn(he),null;case 19:if(qe(In),xe=he.memoizedState,xe===null)return fn(he),null;if(we=(he.flags&128)!==0,Oe=xe.rendering,Oe===null)if(we)uc(xe,!1);else{if(un!==0||ce!==null&&(ce.flags&128)!==0)for(ce=he.child;ce!==null;){if(Oe=qc(ce),Oe!==null){for(he.flags|=128,uc(xe,!1),ce=Oe.updateQueue,he.updateQueue=ce,ul(he,ce),he.subtreeFlags=0,ce=ve,ve=he.child;ve!==null;)br(ve,ce),ve=ve.sibling;return Ze(In,In.current&1|2),$i&&ha(he,xe.treeForkCount),he.child}ce=ce.sibling}xe.tail!==null&&Ye()>fs&&(he.flags|=128,we=!0,uc(xe,!1),he.lanes=4194304)}else{if(!we)if(ce=qc(Oe),ce!==null){if(he.flags|=128,we=!0,ce=ce.updateQueue,he.updateQueue=ce,ul(he,ce),uc(xe,!0),xe.tail===null&&xe.tailMode==="hidden"&&!Oe.alternate&&!$i)return fn(he),null}else 2*Ye()-xe.renderingStartTime>fs&&ve!==536870912&&(he.flags|=128,we=!0,uc(xe,!1),he.lanes=4194304);xe.isBackwards?(Oe.sibling=he.child,he.child=Oe):(ce=xe.last,ce!==null?ce.sibling=Oe:he.child=Oe,xe.last=Oe)}return xe.tail!==null?(ce=xe.tail,xe.rendering=ce,xe.tail=ce.sibling,xe.renderingStartTime=Ye(),ce.sibling=null,ve=In.current,Ze(In,we?ve&1|2:ve&1),$i&&ha(he,xe.treeForkCount),ce):(fn(he),null);case 22:case 23:return es(he),Ar(),xe=he.memoizedState!==null,ce!==null?ce.memoizedState!==null!==xe&&(he.flags|=8192):xe&&(he.flags|=8192),xe?(ve&536870912)!==0&&(he.flags&128)===0&&(fn(he),he.subtreeFlags&6&&(he.flags|=8192)):fn(he),ve=he.updateQueue,ve!==null&&ul(he,ve.retryQueue),ve=null,ce!==null&&ce.memoizedState!==null&&ce.memoizedState.cachePool!==null&&(ve=ce.memoizedState.cachePool.pool),xe=null,he.memoizedState!==null&&he.memoizedState.cachePool!==null&&(xe=he.memoizedState.cachePool.pool),xe!==ve&&(he.flags|=2048),ce!==null&&qe(Xa),null;case 24:return ve=null,ce!==null&&(ve=ce.memoizedState.cache),he.memoizedState.cache!==ve&&(he.flags|=2048),gs(Ci),fn(he),null;case 25:return null;case 30:return null}throw Error(Z(156,he.tag))}function cu(ce,he){switch(Ha(he),he.tag){case 1:return ce=he.flags,ce&65536?(he.flags=ce&-65537|128,he):null;case 3:return gs(Ci),kt(),ce=he.flags,(ce&65536)!==0&&(ce&128)===0?(he.flags=ce&-65537|128,he):null;case 26:case 27:case 5:return Wt(he),null;case 31:if(he.memoizedState!==null){if(es(he),he.alternate===null)throw Error(Z(340));bo()}return ce=he.flags,ce&65536?(he.flags=ce&-65537|128,he):null;case 13:if(es(he),ce=he.memoizedState,ce!==null&&ce.dehydrated!==null){if(he.alternate===null)throw Error(Z(340));bo()}return ce=he.flags,ce&65536?(he.flags=ce&-65537|128,he):null;case 19:return qe(In),null;case 4:return kt(),null;case 10:return gs(he.type),null;case 22:case 23:return es(he),Ar(),ce!==null&&qe(Xa),ce=he.flags,ce&65536?(he.flags=ce&-65537|128,he):null;case 24:return gs(Ci),null;case 25:return null;default:return null}}function Po(ce,he){switch(Ha(he),he.tag){case 3:gs(Ci),kt();break;case 26:case 27:case 5:Wt(he);break;case 4:kt();break;case 31:he.memoizedState!==null&&es(he);break;case 13:es(he);break;case 19:qe(In);break;case 10:gs(he.type);break;case 22:case 23:es(he),Ar(),ce!==null&&qe(Xa);break;case 24:gs(Ci)}}function Ks(ce,he){try{var ve=he.updateQueue,xe=ve!==null?ve.lastEffect:null;if(xe!==null){var we=xe.next;ve=we;do{if((ve.tag&ce)===ce){xe=void 0;var Oe=ve.create,Ue=ve.inst;xe=Oe(),Ue.destroy=xe}ve=ve.next}while(ve!==we)}}catch(We){xn(he,he.return,We)}}function bs(ce,he,ve){try{var xe=he.updateQueue,we=xe!==null?xe.lastEffect:null;if(we!==null){var Oe=we.next;xe=Oe;do{if((xe.tag&ce)===ce){var Ue=xe.inst,We=Ue.destroy;if(We!==void 0){Ue.destroy=void 0,we=he;var ot=ve,Et=We;try{Et()}catch(Gt){xn(we,ot,Gt)}}}xe=xe.next}while(xe!==Oe)}}catch(Gt){xn(he,he.return,Gt)}}function ro(ce){var he=ce.updateQueue;if(he!==null){var ve=ce.stateNode;try{fr(he,ve)}catch(xe){xn(ce,ce.return,xe)}}}function kh(ce,he,ve){ve.props=mr(ce.type,ce.memoizedProps),ve.state=ce.memoizedState;try{ve.componentWillUnmount()}catch(xe){xn(ce,he,xe)}}function Zs(ce,he){try{var ve=ce.ref;if(ve!==null){switch(ce.tag){case 26:case 27:case 5:var xe=ce.stateNode;break;case 30:xe=ce.stateNode;break;default:xe=ce.stateNode}typeof ve=="function"?ce.refCleanup=ve(xe):ve.current=xe}}catch(we){xn(ce,he,we)}}function cs(ce,he){var ve=ce.ref,xe=ce.refCleanup;if(ve!==null)if(typeof xe=="function")try{xe()}catch(we){xn(ce,he,we)}finally{ce.refCleanup=null,ce=ce.alternate,ce!=null&&(ce.refCleanup=null)}else if(typeof ve=="function")try{ve(null)}catch(we){xn(ce,he,we)}else ve.current=null}function us(ce){var he=ce.type,ve=ce.memoizedProps,xe=ce.stateNode;try{e:switch(he){case"button":case"input":case"select":case"textarea":ve.autoFocus&&xe.focus();break e;case"img":ve.src?xe.src=ve.src:ve.srcSet&&(xe.srcset=ve.srcSet)}}catch(we){xn(ce,ce.return,we)}}function xs(ce,he,ve){try{var xe=ce.stateNode;np(xe,ce.type,ve,he),xe[On]=he}catch(we){xn(ce,ce.return,we)}}function Kn(ce){return ce.tag===5||ce.tag===3||ce.tag===26||ce.tag===27&&gl(ce.type)||ce.tag===4}function Qs(ce){e:for(;;){for(;ce.sibling===null;){if(ce.return===null||Kn(ce.return))return null;ce=ce.return}for(ce.sibling.return=ce.return,ce=ce.sibling;ce.tag!==5&&ce.tag!==6&&ce.tag!==18;){if(ce.tag===27&&gl(ce.type)||ce.flags&2||ce.child===null||ce.tag===4)continue e;ce.child.return=ce,ce=ce.child}if(!(ce.flags&2))return ce.stateNode}}function zi(ce,he,ve){var xe=ce.tag;if(xe===5||xe===6)ce=ce.stateNode,he?(ve.nodeType===9?ve.body:ve.nodeName==="HTML"?ve.ownerDocument.body:ve).insertBefore(ce,he):(he=ve.nodeType===9?ve.body:ve.nodeName==="HTML"?ve.ownerDocument.body:ve,he.appendChild(ce),ve=ve._reactRootContainer,ve!=null||he.onclick!==null||(he.onclick=Us));else if(xe!==4&&(xe===27&&gl(ce.type)&&(ve=ce.stateNode,he=null),ce=ce.child,ce!==null))for(zi(ce,he,ve),ce=ce.sibling;ce!==null;)zi(ce,he,ve),ce=ce.sibling}function an(ce,he,ve){var xe=ce.tag;if(xe===5||xe===6)ce=ce.stateNode,he?ve.insertBefore(ce,he):ve.appendChild(ce);else if(xe!==4&&(xe===27&&gl(ce.type)&&(ve=ce.stateNode),ce=ce.child,ce!==null))for(an(ce,he,ve),ce=ce.sibling;ce!==null;)an(ce,he,ve),ce=ce.sibling}function Hn(ce){var he=ce.stateNode,ve=ce.memoizedProps;try{for(var xe=ce.type,we=he.attributes;we.length;)he.removeAttributeNode(we[0]);kr(he,xe,ve),he[ki]=ce,he[On]=ve}catch(Oe){xn(ce,ce.return,Oe)}}var As=!1,Rn=!1,Aa=!1,hc=typeof WeakSet=="function"?WeakSet:Set,jn=null;function hl(ce,he){if(ce=ce.containerInfo,Nf=of,ce=Pc(ce),Ho(ce)){if("selectionStart"in ce)var ve={start:ce.selectionStart,end:ce.selectionEnd};else e:{ve=(ve=ce.ownerDocument)&&ve.defaultView||window;var xe=ve.getSelection&&ve.getSelection();if(xe&&xe.rangeCount!==0){ve=xe.anchorNode;var we=xe.anchorOffset,Oe=xe.focusNode;xe=xe.focusOffset;try{ve.nodeType,Oe.nodeType}catch{ve=null;break e}var Ue=0,We=-1,ot=-1,Et=0,Gt=0,Jt=ce,Ot=null;t:for(;;){for(var It;Jt!==ve||we!==0&&Jt.nodeType!==3||(We=Ue+we),Jt!==Oe||xe!==0&&Jt.nodeType!==3||(ot=Ue+xe),Jt.nodeType===3&&(Ue+=Jt.nodeValue.length),(It=Jt.firstChild)!==null;)Ot=Jt,Jt=It;for(;;){if(Jt===ce)break t;if(Ot===ve&&++Et===we&&(We=Ue),Ot===Oe&&++Gt===xe&&(ot=Ue),(It=Jt.nextSibling)!==null)break;Jt=Ot,Ot=Jt.parentNode}Jt=It}ve=We===-1||ot===-1?null:{start:We,end:ot}}else ve=null}ve=ve||{start:0,end:0}}else ve=null;for(Df={focusedElem:ce,selectionRange:ve},of=!1,jn=he;jn!==null;)if(he=jn,ce=he.child,(he.subtreeFlags&1028)!==0&&ce!==null)ce.return=he,jn=ce;else for(;jn!==null;){switch(he=jn,Oe=he.alternate,ce=he.flags,he.tag){case 0:if((ce&4)!==0&&(ce=he.updateQueue,ce=ce!==null?ce.events:null,ce!==null))for(ve=0;ve<ce.length;ve++)we=ce[ve],we.ref.impl=we.nextImpl;break;case 11:case 15:break;case 1:if((ce&1024)!==0&&Oe!==null){ce=void 0,ve=he,we=Oe.memoizedProps,Oe=Oe.memoizedState,xe=ve.stateNode;try{var yi=mr(ve.type,we);ce=xe.getSnapshotBeforeUpdate(yi,Oe),xe.__reactInternalSnapshotBeforeUpdate=ce}catch(Ri){xn(ve,ve.return,Ri)}}break;case 3:if((ce&1024)!==0){if(ce=he.stateNode.containerInfo,ve=ce.nodeType,ve===9)kf(ce);else if(ve===1)switch(ce.nodeName){case"HEAD":case"HTML":case"BODY":kf(ce);break;default:ce.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((ce&1024)!==0)throw Error(Z(163))}if(ce=he.sibling,ce!==null){ce.return=he.return,jn=ce;break}jn=he.return}}function Xd(ce,he,ve){var xe=ve.flags;switch(ve.tag){case 0:case 11:case 15:Sa(ce,ve),xe&4&&Ks(5,ve);break;case 1:if(Sa(ce,ve),xe&4)if(ce=ve.stateNode,he===null)try{ce.componentDidMount()}catch(Ue){xn(ve,ve.return,Ue)}else{var we=mr(ve.type,he.memoizedProps);he=he.memoizedState;try{ce.componentDidUpdate(we,he,ce.__reactInternalSnapshotBeforeUpdate)}catch(Ue){xn(ve,ve.return,Ue)}}xe&64&&ro(ve),xe&512&&Zs(ve,ve.return);break;case 3:if(Sa(ce,ve),xe&64&&(ce=ve.updateQueue,ce!==null)){if(he=null,ve.child!==null)switch(ve.child.tag){case 27:case 5:he=ve.child.stateNode;break;case 1:he=ve.child.stateNode}try{fr(ce,he)}catch(Ue){xn(ve,ve.return,Ue)}}break;case 27:he===null&&xe&4&&Hn(ve);case 26:case 5:Sa(ce,ve),he===null&&xe&4&&us(ve),xe&512&&Zs(ve,ve.return);break;case 12:Sa(ce,ve);break;case 31:Sa(ce,ve),xe&4&&hu(ce,ve);break;case 13:Sa(ce,ve),xe&4&&Ih(ce,ve),xe&64&&(ce=ve.memoizedState,ce!==null&&(ce=ce.dehydrated,ce!==null&&(ve=Y0.bind(null,ve),dp(ce,ve))));break;case 22:if(xe=ve.memoizedState!==null||As,!xe){he=he!==null&&he.memoizedState!==null||Rn,we=As;var Oe=Rn;As=xe,(Rn=he)&&!Oe?ln(ce,ve,(ve.subtreeFlags&8772)!==0):Sa(ce,ve),As=we,Rn=Oe}break;case 30:break;default:Sa(ce,ve)}}function uu(ce){var he=ce.alternate;he!==null&&(ce.alternate=null,uu(he)),ce.child=null,ce.deletions=null,ce.sibling=null,ce.tag===5&&(he=ce.stateNode,he!==null&&Tt(he)),ce.stateNode=null,ce.return=null,ce.dependencies=null,ce.memoizedProps=null,ce.memoizedState=null,ce.pendingProps=null,ce.stateNode=null,ce.updateQueue=null}var nn=null,Zn=!1;function Cr(ce,he,ve){for(ve=ve.child;ve!==null;)so(ce,he,ve),ve=ve.sibling}function so(ce,he,ve){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(Rt,ve)}catch{}switch(ve.tag){case 26:Rn||cs(ve,he),Cr(ce,he,ve),ve.memoizedState?ve.memoizedState.count--:ve.stateNode&&(ve=ve.stateNode,ve.parentNode.removeChild(ve));break;case 27:Rn||cs(ve,he);var xe=nn,we=Zn;gl(ve.type)&&(nn=ve.stateNode,Zn=!1),Cr(ce,he,ve),Fh(ve.stateNode),nn=xe,Zn=we;break;case 5:Rn||cs(ve,he);case 6:if(xe=nn,we=Zn,nn=null,Cr(ce,he,ve),nn=xe,Zn=we,nn!==null)if(Zn)try{(nn.nodeType===9?nn.body:nn.nodeName==="HTML"?nn.ownerDocument.body:nn).removeChild(ve.stateNode)}catch(Oe){xn(ve,he,Oe)}else try{nn.removeChild(ve.stateNode)}catch(Oe){xn(ve,he,Oe)}break;case 18:nn!==null&&(Zn?(ce=nn,p0(ce.nodeType===9?ce.body:ce.nodeName==="HTML"?ce.ownerDocument.body:ce,ve.stateNode),Au(ce)):p0(nn,ve.stateNode));break;case 4:xe=nn,we=Zn,nn=ve.stateNode.containerInfo,Zn=!0,Cr(ce,he,ve),nn=xe,Zn=we;break;case 0:case 11:case 14:case 15:bs(2,ve,he),Rn||bs(4,ve,he),Cr(ce,he,ve);break;case 1:Rn||(cs(ve,he),xe=ve.stateNode,typeof xe.componentWillUnmount=="function"&&kh(ve,he,xe)),Cr(ce,he,ve);break;case 21:Cr(ce,he,ve);break;case 22:Rn=(xe=Rn)||ve.memoizedState!==null,Cr(ce,he,ve),Rn=xe;break;default:Cr(ce,he,ve)}}function hu(ce,he){if(he.memoizedState===null&&(ce=he.alternate,ce!==null&&(ce=ce.memoizedState,ce!==null))){ce=ce.dehydrated;try{Au(ce)}catch(ve){xn(he,he.return,ve)}}}function Ih(ce,he){if(he.memoizedState===null&&(ce=he.alternate,ce!==null&&(ce=ce.memoizedState,ce!==null&&(ce=ce.dehydrated,ce!==null))))try{Au(ce)}catch(ve){xn(he,he.return,ve)}}function qd(ce){switch(ce.tag){case 31:case 13:case 19:var he=ce.stateNode;return he===null&&(he=ce.stateNode=new hc),he;case 22:return ce=ce.stateNode,he=ce._retryCache,he===null&&(he=ce._retryCache=new hc),he;default:throw Error(Z(435,ce.tag))}}function Yn(ce,he){var ve=qd(ce);he.forEach(function(xe){if(!ve.has(xe)){ve.add(xe);var we=X0.bind(null,ce,xe);xe.then(we,we)}})}function Er(ce,he){var ve=he.deletions;if(ve!==null)for(var xe=0;xe<ve.length;xe++){var we=ve[xe],Oe=ce,Ue=he,We=Ue;e:for(;We!==null;){switch(We.tag){case 27:if(gl(We.type)){nn=We.stateNode,Zn=!1;break e}break;case 5:nn=We.stateNode,Zn=!1;break e;case 3:case 4:nn=We.stateNode.containerInfo,Zn=!0;break e}We=We.return}if(nn===null)throw Error(Z(160));so(Oe,Ue,we),nn=null,Zn=!1,Oe=we.alternate,Oe!==null&&(Oe.return=null),we.return=null}if(he.subtreeFlags&13886)for(he=he.child;he!==null;)ao(he,ce),he=he.sibling}var Xr=null;function ao(ce,he){var ve=ce.alternate,xe=ce.flags;switch(ce.tag){case 0:case 11:case 14:case 15:Er(he,ce),Fn(ce),xe&4&&(bs(3,ce,ce.return),Ks(3,ce),bs(5,ce,ce.return));break;case 1:Er(he,ce),Fn(ce),xe&512&&(Rn||ve===null||cs(ve,ve.return)),xe&64&&As&&(ce=ce.updateQueue,ce!==null&&(xe=ce.callbacks,xe!==null&&(ve=ce.shared.hiddenCallbacks,ce.shared.hiddenCallbacks=ve===null?xe:ve.concat(xe))));break;case 26:var we=Xr;if(Er(he,ce),Fn(ce),xe&512&&(Rn||ve===null||cs(ve,ve.return)),xe&4){var Oe=ve!==null?ve.memoizedState:null;if(xe=ce.memoizedState,ve===null)if(xe===null)if(ce.stateNode===null){e:{xe=ce.type,ve=ce.memoizedProps,we=we.ownerDocument||we;t:switch(xe){case"title":Oe=we.getElementsByTagName("title")[0],(!Oe||Oe[ct]||Oe[ki]||Oe.namespaceURI==="http://www.w3.org/2000/svg"||Oe.hasAttribute("itemprop"))&&(Oe=we.createElement(xe),we.head.insertBefore(Oe,we.querySelector("head > title"))),kr(Oe,xe,ve),Oe[ki]=ce,mt(Oe),xe=Oe;break e;case"link":var Ue=E0("link","href",we).get(xe+(ve.href||""));if(Ue){for(var We=0;We<Ue.length;We++)if(Oe=Ue[We],Oe.getAttribute("href")===(ve.href==null||ve.href===""?null:ve.href)&&Oe.getAttribute("rel")===(ve.rel==null?null:ve.rel)&&Oe.getAttribute("title")===(ve.title==null?null:ve.title)&&Oe.getAttribute("crossorigin")===(ve.crossOrigin==null?null:ve.crossOrigin)){Ue.splice(We,1);break t}}Oe=we.createElement(xe),kr(Oe,xe,ve),we.head.appendChild(Oe);break;case"meta":if(Ue=E0("meta","content",we).get(xe+(ve.content||""))){for(We=0;We<Ue.length;We++)if(Oe=Ue[We],Oe.getAttribute("content")===(ve.content==null?null:""+ve.content)&&Oe.getAttribute("name")===(ve.name==null?null:ve.name)&&Oe.getAttribute("property")===(ve.property==null?null:ve.property)&&Oe.getAttribute("http-equiv")===(ve.httpEquiv==null?null:ve.httpEquiv)&&Oe.getAttribute("charset")===(ve.charSet==null?null:ve.charSet)){Ue.splice(We,1);break t}}Oe=we.createElement(xe),kr(Oe,xe,ve),we.head.appendChild(Oe);break;default:throw Error(Z(468,xe))}Oe[ki]=ce,mt(Oe),xe=Oe}ce.stateNode=xe}else M0(we,ce.type,ce.stateNode);else ce.stateNode=C0(we,xe,ce.memoizedProps);else Oe!==xe?(Oe===null?ve.stateNode!==null&&(ve=ve.stateNode,ve.parentNode.removeChild(ve)):Oe.count--,xe===null?M0(we,ce.type,ce.stateNode):C0(we,xe,ce.memoizedProps)):xe===null&&ce.stateNode!==null&&xs(ce,ce.memoizedProps,ve.memoizedProps)}break;case 27:Er(he,ce),Fn(ce),xe&512&&(Rn||ve===null||cs(ve,ve.return)),ve!==null&&xe&4&&xs(ce,ce.memoizedProps,ve.memoizedProps);break;case 5:if(Er(he,ce),Fn(ce),xe&512&&(Rn||ve===null||cs(ve,ve.return)),ce.flags&32){we=ce.stateNode;try{Cs(we,"")}catch(yi){xn(ce,ce.return,yi)}}xe&4&&ce.stateNode!=null&&(we=ce.memoizedProps,xs(ce,we,ve!==null?ve.memoizedProps:we)),xe&1024&&(Aa=!0);break;case 6:if(Er(he,ce),Fn(ce),xe&4){if(ce.stateNode===null)throw Error(Z(162));xe=ce.memoizedProps,ve=ce.stateNode;try{ve.nodeValue=xe}catch(yi){xn(ce,ce.return,yi)}}break;case 3:if(nf=null,we=Xr,Xr=ef(he.containerInfo),Er(he,ce),Xr=we,Fn(ce),xe&4&&ve!==null&&ve.memoizedState.isDehydrated)try{Au(he.containerInfo)}catch(yi){xn(ce,ce.return,yi)}Aa&&(Aa=!1,$d(ce));break;case 4:xe=Xr,Xr=ef(ce.stateNode.containerInfo),Er(he,ce),Fn(ce),Xr=xe;break;case 12:Er(he,ce),Fn(ce);break;case 31:Er(he,ce),Fn(ce),xe&4&&(xe=ce.updateQueue,xe!==null&&(ce.updateQueue=null,Yn(ce,xe)));break;case 13:Er(he,ce),Fn(ce),ce.child.flags&8192&&ce.memoizedState!==null!=(ve!==null&&ve.memoizedState!==null)&&(Ma=Ye()),xe&4&&(xe=ce.updateQueue,xe!==null&&(ce.updateQueue=null,Yn(ce,xe)));break;case 22:we=ce.memoizedState!==null;var ot=ve!==null&&ve.memoizedState!==null,Et=As,Gt=Rn;if(As=Et||we,Rn=Gt||ot,Er(he,ce),Rn=Gt,As=Et,Fn(ce),xe&8192)e:for(he=ce.stateNode,he._visibility=we?he._visibility&-2:he._visibility|1,we&&(ve===null||ot||As||Rn||Ro(ce)),ve=null,he=ce;;){if(he.tag===5||he.tag===26){if(ve===null){ot=ve=he;try{if(Oe=ot.stateNode,we)Ue=Oe.style,typeof Ue.setProperty=="function"?Ue.setProperty("display","none","important"):Ue.display="none";else{We=ot.stateNode;var Jt=ot.memoizedProps.style,Ot=Jt!=null&&Jt.hasOwnProperty("display")?Jt.display:null;We.style.display=Ot==null||typeof Ot=="boolean"?"":(""+Ot).trim()}}catch(yi){xn(ot,ot.return,yi)}}}else if(he.tag===6){if(ve===null){ot=he;try{ot.stateNode.nodeValue=we?"":ot.memoizedProps}catch(yi){xn(ot,ot.return,yi)}}}else if(he.tag===18){if(ve===null){ot=he;try{var It=ot.stateNode;we?m0(It,!0):m0(ot.stateNode,!1)}catch(yi){xn(ot,ot.return,yi)}}}else if((he.tag!==22&&he.tag!==23||he.memoizedState===null||he===ce)&&he.child!==null){he.child.return=he,he=he.child;continue}if(he===ce)break e;for(;he.sibling===null;){if(he.return===null||he.return===ce)break e;ve===he&&(ve=null),he=he.return}ve===he&&(ve=null),he.sibling.return=he.return,he=he.sibling}xe&4&&(xe=ce.updateQueue,xe!==null&&(ve=xe.retryQueue,ve!==null&&(xe.retryQueue=null,Yn(ce,ve))));break;case 19:Er(he,ce),Fn(ce),xe&4&&(xe=ce.updateQueue,xe!==null&&(ce.updateQueue=null,Yn(ce,xe)));break;case 30:break;case 21:break;default:Er(he,ce),Fn(ce)}}function Fn(ce){var he=ce.flags;if(he&2){try{for(var ve,xe=ce.return;xe!==null;){if(Kn(xe)){ve=xe;break}xe=xe.return}if(ve==null)throw Error(Z(160));switch(ve.tag){case 27:var we=ve.stateNode,Oe=Qs(ce);an(ce,Oe,we);break;case 5:var Ue=ve.stateNode;ve.flags&32&&(Cs(Ue,""),ve.flags&=-33);var We=Qs(ce);an(ce,We,Ue);break;case 3:case 4:var ot=ve.stateNode.containerInfo,Et=Qs(ce);zi(ce,Et,ot);break;default:throw Error(Z(161))}}catch(Gt){xn(ce,ce.return,Gt)}ce.flags&=-3}he&4096&&(ce.flags&=-4097)}function $d(ce){if(ce.subtreeFlags&1024)for(ce=ce.child;ce!==null;){var he=ce;$d(he),he.tag===5&&he.flags&1024&&he.stateNode.reset(),ce=ce.sibling}}function Sa(ce,he){if(he.subtreeFlags&8772)for(he=he.child;he!==null;)Xd(ce,he.alternate,he),he=he.sibling}function Ro(ce){for(ce=ce.child;ce!==null;){var he=ce;switch(he.tag){case 0:case 11:case 14:case 15:bs(4,he,he.return),Ro(he);break;case 1:cs(he,he.return);var ve=he.stateNode;typeof ve.componentWillUnmount=="function"&&kh(he,he.return,ve),Ro(he);break;case 27:Fh(he.stateNode);case 26:case 5:cs(he,he.return),Ro(he);break;case 22:he.memoizedState===null&&Ro(he);break;case 30:Ro(he);break;default:Ro(he)}ce=ce.sibling}}function ln(ce,he,ve){for(ve=ve&&(he.subtreeFlags&8772)!==0,he=he.child;he!==null;){var xe=he.alternate,we=ce,Oe=he,Ue=Oe.flags;switch(Oe.tag){case 0:case 11:case 15:ln(we,Oe,ve),Ks(4,Oe);break;case 1:if(ln(we,Oe,ve),xe=Oe,we=xe.stateNode,typeof we.componentDidMount=="function")try{we.componentDidMount()}catch(Et){xn(xe,xe.return,Et)}if(xe=Oe,we=xe.updateQueue,we!==null){var We=xe.stateNode;try{var ot=we.shared.hiddenCallbacks;if(ot!==null)for(we.shared.hiddenCallbacks=null,we=0;we<ot.length;we++)qs(ot[we],We)}catch(Et){xn(xe,xe.return,Et)}}ve&&Ue&64&&ro(Oe),Zs(Oe,Oe.return);break;case 27:Hn(Oe);case 26:case 5:ln(we,Oe,ve),ve&&xe===null&&Ue&4&&us(Oe),Zs(Oe,Oe.return);break;case 12:ln(we,Oe,ve);break;case 31:ln(we,Oe,ve),ve&&Ue&4&&hu(we,Oe);break;case 13:ln(we,Oe,ve),ve&&Ue&4&&Ih(we,Oe);break;case 22:Oe.memoizedState===null&&ln(we,Oe,ve),Zs(Oe,Oe.return);break;case 30:break;default:ln(we,Oe,ve)}he=he.sibling}}function du(ce,he){var ve=null;ce!==null&&ce.memoizedState!==null&&ce.memoizedState.cachePool!==null&&(ve=ce.memoizedState.cachePool.pool),ce=null,he.memoizedState!==null&&he.memoizedState.cachePool!==null&&(ce=he.memoizedState.cachePool.pool),ce!==ve&&(ce!=null&&ce.refCount++,ve!=null&&dr(ve))}function Ca(ce,he){ce=null,he.alternate!==null&&(ce=he.alternate.memoizedState.cache),he=he.memoizedState.cache,he!==ce&&(he.refCount++,ce!=null&&dr(ce))}function nr(ce,he,ve,xe){if(he.subtreeFlags&10256)for(he=he.child;he!==null;)Nn(ce,he,ve,xe),he=he.sibling}function Nn(ce,he,ve,xe){var we=he.flags;switch(he.tag){case 0:case 11:case 15:nr(ce,he,ve,xe),we&2048&&Ks(9,he);break;case 1:nr(ce,he,ve,xe);break;case 3:nr(ce,he,ve,xe),we&2048&&(ce=null,he.alternate!==null&&(ce=he.alternate.memoizedState.cache),he=he.memoizedState.cache,he!==ce&&(he.refCount++,ce!=null&&dr(ce)));break;case 12:if(we&2048){nr(ce,he,ve,xe),ce=he.stateNode;try{var Oe=he.memoizedProps,Ue=Oe.id,We=Oe.onPostCommit;typeof We=="function"&&We(Ue,he.alternate===null?"mount":"update",ce.passiveEffectDuration,-0)}catch(ot){xn(he,he.return,ot)}}else nr(ce,he,ve,xe);break;case 31:nr(ce,he,ve,xe);break;case 13:nr(ce,he,ve,xe);break;case 23:break;case 22:Oe=he.stateNode,Ue=he.alternate,he.memoizedState!==null?Oe._visibility&2?nr(ce,he,ve,xe):dl(ce,he):Oe._visibility&2?nr(ce,he,ve,xe):(Oe._visibility|=2,oo(ce,he,ve,xe,(he.subtreeFlags&10256)!==0||!1)),we&2048&&du(Ue,he);break;case 24:nr(ce,he,ve,xe),we&2048&&Ca(he.alternate,he);break;default:nr(ce,he,ve,xe)}}function oo(ce,he,ve,xe,we){for(we=we&&((he.subtreeFlags&10256)!==0||!1),he=he.child;he!==null;){var Oe=ce,Ue=he,We=ve,ot=xe,Et=Ue.flags;switch(Ue.tag){case 0:case 11:case 15:oo(Oe,Ue,We,ot,we),Ks(8,Ue);break;case 23:break;case 22:var Gt=Ue.stateNode;Ue.memoizedState!==null?Gt._visibility&2?oo(Oe,Ue,We,ot,we):dl(Oe,Ue):(Gt._visibility|=2,oo(Oe,Ue,We,ot,we)),we&&Et&2048&&du(Ue.alternate,Ue);break;case 24:oo(Oe,Ue,We,ot,we),we&&Et&2048&&Ca(Ue.alternate,Ue);break;default:oo(Oe,Ue,We,ot,we)}he=he.sibling}}function dl(ce,he){if(he.subtreeFlags&10256)for(he=he.child;he!==null;){var ve=ce,xe=he,we=xe.flags;switch(xe.tag){case 22:dl(ve,xe),we&2048&&du(xe.alternate,xe);break;case 24:dl(ve,xe),we&2048&&Ca(xe.alternate,xe);break;default:dl(ve,xe)}he=he.sibling}}var Vn=8192;function Oo(ce,he,ve){if(ce.subtreeFlags&Vn)for(ce=ce.child;ce!==null;)Xn(ce,he,ve),ce=ce.sibling}function Xn(ce,he,ve){switch(ce.tag){case 26:Oo(ce,he,ve),ce.flags&Vn&&ce.memoizedState!==null&&Cp(ve,Xr,ce.memoizedState,ce.memoizedProps);break;case 5:Oo(ce,he,ve);break;case 3:case 4:var xe=Xr;Xr=ef(ce.stateNode.containerInfo),Oo(ce,he,ve),Xr=xe;break;case 22:ce.memoizedState===null&&(xe=ce.alternate,xe!==null&&xe.memoizedState!==null?(xe=Vn,Vn=16777216,Oo(ce,he,ve),Vn=xe):Oo(ce,he,ve));break;default:Oo(ce,he,ve)}}function qr(ce){var he=ce.alternate;if(he!==null&&(ce=he.child,ce!==null)){he.child=null;do he=ce.sibling,ce.sibling=null,ce=he;while(ce!==null)}}function Lr(ce){var he=ce.deletions;if((ce.flags&16)!==0){if(he!==null)for(var ve=0;ve<he.length;ve++){var xe=he[ve];jn=xe,dc(xe,ce)}qr(ce)}if(ce.subtreeFlags&10256)for(ce=ce.child;ce!==null;)No(ce),ce=ce.sibling}function No(ce){switch(ce.tag){case 0:case 11:case 15:Lr(ce),ce.flags&2048&&bs(9,ce,ce.return);break;case 3:Lr(ce);break;case 12:Lr(ce);break;case 22:var he=ce.stateNode;ce.memoizedState!==null&&he._visibility&2&&(ce.return===null||ce.return.tag!==13)?(he._visibility&=-3,fu(ce)):Lr(ce);break;default:Lr(ce)}}function fu(ce){var he=ce.deletions;if((ce.flags&16)!==0){if(he!==null)for(var ve=0;ve<he.length;ve++){var xe=he[ve];jn=xe,dc(xe,ce)}qr(ce)}for(ce=ce.child;ce!==null;){switch(he=ce,he.tag){case 0:case 11:case 15:bs(8,he,he.return),fu(he);break;case 22:ve=he.stateNode,ve._visibility&2&&(ve._visibility&=-3,fu(he));break;default:fu(he)}ce=ce.sibling}}function dc(ce,he){for(;jn!==null;){var ve=jn;switch(ve.tag){case 0:case 11:case 15:bs(8,ve,he);break;case 23:case 22:if(ve.memoizedState!==null&&ve.memoizedState.cachePool!==null){var xe=ve.memoizedState.cachePool.pool;xe!=null&&xe.refCount++}break;case 24:dr(ve.memoizedState.cache)}if(xe=ve.child,xe!==null)xe.return=ve,jn=xe;else e:for(ve=ce;jn!==null;){xe=jn;var we=xe.sibling,Oe=xe.return;if(uu(xe),xe===ve){jn=null;break e}if(we!==null){we.return=Oe,jn=we;break e}jn=Oe}}}var pu={getCacheForType:function(ce){var he=lr(Ci),ve=he.data.get(ce);return ve===void 0&&(ve=ce(),he.data.set(ce,ve)),ve},cacheSignal:function(){return lr(Ci).controller.signal}},mu=typeof WeakMap=="function"?WeakMap:Map,Zi=0,cn=null,ji=null,qi=0,Ei=0,Gi=null,Bi=!1,Fi=!1,gn=!1,qn=0,un=0,hs=0,Ea=0,Ds=0,Qi=0,ds=0,Ls=null,Mr=null,$r=!1,Ma=0,fl=0,fs=1/0,pl=null,ea=null,Dn=0,Bs=null,ps=null,Ss=0,Ta=0,Do=null,gu=null,Lo=0,Bo=null;function Br(){return(Zi&2)!==0&&qi!==0?qi&-qi:Be.T!==null?Ef():Bn()}function me(){if(Qi===0)if((qi&536870912)===0||$i){var ce=zt;zt<<=1,(zt&3932160)===0&&(zt=262144),Qi=ce}else Qi=536870912;return ce=ir.current,ce!==null&&(ce.flags|=32),Qi}function ge(ce,he,ve){(ce===cn&&(Ei===2||Ei===9)||ce.cancelPendingCommit!==null)&&(At(ce,0),ke(ce,qi,Qi,!1)),Ui(ce,ve),((Zi&2)===0||ce!==cn)&&(ce===cn&&((Zi&2)===0&&(Ea|=ve),un===4&&ke(ce,qi,Qi,!1)),lo(ce))}function Se(ce,he,ve){if((Zi&6)!==0)throw Error(Z(327));var xe=!ve&&(he&127)===0&&(he&ce.expiredLanes)===0||di(ce,he),we=xe?ko(ce,he):Wr(ce,he,!0),Oe=xe;do{if(we===0){Fi&&!xe&&ke(ce,he,0,!1);break}else{if(ve=ce.current.alternate,Oe&&!De(ve)){we=Wr(ce,he,!1),Oe=!1;continue}if(we===2){if(Oe=he,ce.errorRecoveryDisabledLanes&Oe)var Ue=0;else Ue=ce.pendingLanes&-536870913,Ue=Ue!==0?Ue:Ue&536870912?536870912:0;if(Ue!==0){he=Ue;e:{var We=ce;we=Ls;var ot=We.current.memoizedState.isDehydrated;if(ot&&(At(We,Ue).flags|=256),Ue=Wr(We,Ue,!1),Ue!==2){if(gn&&!ot){We.errorRecoveryDisabledLanes|=Oe,Ea|=Oe,we=4;break e}Oe=Mr,Mr=we,Oe!==null&&(Mr===null?Mr=Oe:Mr.push.apply(Mr,Oe))}we=Ue}if(Oe=!1,we!==2)continue}}if(we===1){At(ce,0),ke(ce,he,0,!0);break}e:{switch(xe=ce,Oe=we,Oe){case 0:case 1:throw Error(Z(345));case 4:if((he&4194048)!==he)break;case 6:ke(xe,he,Qi,!Bi);break e;case 2:Mr=null;break;case 3:case 5:break;default:throw Error(Z(329))}if((he&62914560)===he&&(we=Ma+300-Ye(),10<we)){if(ke(xe,he,Qi,!Bi),Vt(xe,0,!0)!==0)break e;Ss=he,xe.timeoutHandle=d0(Pe.bind(null,xe,ve,Mr,pl,$r,he,Qi,Ea,ds,Bi,Oe,"Throttled",-0,0),we);break e}Pe(xe,ve,Mr,pl,$r,he,Qi,Ea,ds,Bi,Oe,null,-0,0)}}break}while(!0);lo(ce)}function Pe(ce,he,ve,xe,we,Oe,Ue,We,ot,Et,Gt,Jt,Ot,It){if(ce.timeoutHandle=-1,Jt=he.subtreeFlags,Jt&8192||(Jt&16785408)===16785408){Jt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Us},Xn(he,Oe,Jt);var yi=(Oe&62914560)===Oe?Ma-Ye():(Oe&4194048)===Oe?fl-Ye():0;if(yi=Ep(Jt,yi),yi!==null){Ss=Oe,ce.cancelPendingCommit=yi(Ni.bind(null,ce,he,Oe,ve,xe,we,Ue,We,ot,Gt,Jt,null,Ot,It)),ke(ce,Oe,Ue,!Et);return}}Ni(ce,he,Oe,ve,xe,we,Ue,We,ot)}function De(ce){for(var he=ce;;){var ve=he.tag;if((ve===0||ve===11||ve===15)&&he.flags&16384&&(ve=he.updateQueue,ve!==null&&(ve=ve.stores,ve!==null)))for(var xe=0;xe<ve.length;xe++){var we=ve[xe],Oe=we.getSnapshot;we=we.value;try{if(!wn(Oe(),we))return!1}catch{return!1}}if(ve=he.child,he.subtreeFlags&16384&&ve!==null)ve.return=he,he=ve;else{if(he===ce)break;for(;he.sibling===null;){if(he.return===null||he.return===ce)return!0;he=he.return}he.sibling.return=he.return,he=he.sibling}}return!0}function ke(ce,he,ve,xe){he&=~Ds,he&=~Ea,ce.suspendedLanes|=he,ce.pingedLanes&=~he,xe&&(ce.warmLanes|=he),xe=ce.expirationTimes;for(var we=he;0<we;){var Oe=31-tt(we),Ue=1<<Oe;xe[Oe]=-1,we&=~Ue}ve!==0&&Tr(ce,ve,he)}function Je(){return(Zi&6)===0?(Uh(0),!1):!0}function at(){if(ji!==null){if(Ei===0)var ce=ji.return;else ce=ji,xr=fa=null,ph(ce),$a=null,Wa=0,ce=ji;for(;ce!==null;)Po(ce.alternate,ce),ce=ce.return;ji=null}}function At(ce,he){var ve=ce.timeoutHandle;ve!==-1&&(ce.timeoutHandle=-1,ap(ve)),ve=ce.cancelPendingCommit,ve!==null&&(ce.cancelPendingCommit=null,ve()),Ss=0,at(),cn=ce,ji=ve=Fs(ce.current,null),qi=he,Ei=0,Gi=null,Bi=!1,Fi=di(ce,he),gn=!1,ds=Qi=Ds=Ea=hs=un=0,Mr=Ls=null,$r=!1,(he&8)!==0&&(he|=he&32);var xe=ce.entangledLanes;if(xe!==0)for(ce=ce.entanglements,xe&=he;0<xe;){var we=31-tt(xe),Oe=1<<we;he|=ce[we],xe&=~Oe}return qn=he,Fa(),ve}function Yt(ce,he){Oi=null,Be.H=ec,he===qa||he===Ps?(he=Hc(),Ei=3):he===Hl?(he=Hc(),Ei=4):Ei=he===ou?8:he!==null&&typeof he=="object"&&typeof he.then=="function"?6:1,Gi=he,ji===null&&(un=1,au(ce,jr(he,ce.current)))}function li(){var ce=ir.current;return ce===null?!0:(qi&4194048)===qi?vs===null:(qi&62914560)===qi||(qi&536870912)!==0?ce===vs:!1}function mi(){var ce=Be.H;return Be.H=ec,ce===null?ec:ce}function gi(){var ce=Be.A;return Be.A=pu,ce}function Li(){un=4,Bi||(qi&4194048)!==qi&&ir.current!==null||(Fi=!0),(hs&134217727)===0&&(Ea&134217727)===0||cn===null||ke(cn,qi,Qi,!1)}function Wr(ce,he,ve){var xe=Zi;Zi|=2;var we=mi(),Oe=gi();(cn!==ce||qi!==he)&&(pl=null,At(ce,he)),he=!1;var Ue=un;e:do try{if(Ei!==0&&ji!==null){var We=ji,ot=Gi;switch(Ei){case 8:at(),Ue=6;break e;case 3:case 2:case 9:case 6:ir.current===null&&(he=!0);var Et=Ei;if(Ei=0,Gi=null,si(ce,We,ot,Et),ve&&Fi){Ue=0;break e}break;default:Et=Ei,Ei=0,Gi=null,si(ce,We,ot,Et)}}fc(),Ue=un;break}catch(Gt){Yt(ce,Gt)}while(!0);return he&&ce.shellSuspendCounter++,xr=fa=null,Zi=xe,Be.H=we,Be.A=Oe,ji===null&&(cn=null,qi=0,Fa()),Ue}function fc(){for(;ji!==null;)bt(ji)}function ko(ce,he){var ve=Zi;Zi|=2;var xe=mi(),we=gi();cn!==ce||qi!==he?(pl=null,fs=Ye()+500,At(ce,he)):Fi=di(ce,he);e:do try{if(Ei!==0&&ji!==null){he=ji;var Oe=Gi;t:switch(Ei){case 1:Ei=0,Gi=null,si(ce,he,Oe,1);break;case 2:case 9:if(yd(Oe)){Ei=0,Gi=null,Dt(he);break}he=function(){Ei!==2&&Ei!==9||cn!==ce||(Ei=7),lo(ce)},Oe.then(he,he);break e;case 3:Ei=7;break e;case 4:Ei=5;break e;case 7:yd(Oe)?(Ei=0,Gi=null,Dt(he)):(Ei=0,Gi=null,si(ce,he,Oe,7));break;case 5:var Ue=null;switch(ji.tag){case 26:Ue=ji.memoizedState;case 5:case 27:var We=ji;if(Ue?T0(Ue):We.stateNode.complete){Ei=0,Gi=null;var ot=We.sibling;if(ot!==null)ji=ot;else{var Et=We.return;Et!==null?(ji=Et,Ai(Et)):ji=null}break t}}Ei=0,Gi=null,si(ce,he,Oe,5);break;case 6:Ei=0,Gi=null,si(ce,he,Oe,6);break;case 8:at(),un=6;break e;default:throw Error(Z(462))}}wt();break}catch(Gt){Yt(ce,Gt)}while(!0);return xr=fa=null,Be.H=xe,Be.A=we,Zi=ve,ji!==null?0:(cn=null,qi=0,Fa(),un)}function wt(){for(;ji!==null&&!hi();)bt(ji)}function bt(ce){var he=lu(ce.alternate,ce,qn);ce.memoizedProps=ce.pendingProps,he===null?Ai(ce):ji=he}function Dt(ce){var he=ce,ve=he.alternate;switch(he.tag){case 15:case 0:he=Sr(ve,he,he.pendingProps,he.type,void 0,qi);break;case 11:he=Sr(ve,he,he.pendingProps,he.type.render,he.ref,qi);break;case 5:ph(he);default:Po(ve,he),he=ji=br(he,qn),he=lu(ve,he,qn)}ce.memoizedProps=ce.pendingProps,he===null?Ai(ce):ji=he}function si(ce,he,ve,xe){xr=fa=null,ph(he),$a=null,Wa=0;var we=he.return;try{if(rs(ce,we,he,ve,qi)){un=1,au(ce,jr(ve,ce.current)),ji=null;return}}catch(Oe){if(we!==null)throw ji=we,Oe;un=1,au(ce,jr(ve,ce.current)),ji=null;return}he.flags&32768?($i||xe===1?ce=!0:Fi||(qi&536870912)!==0?ce=!1:(Bi=ce=!0,(xe===2||xe===9||xe===3||xe===6)&&(xe=ir.current,xe!==null&&xe.tag===13&&(xe.flags|=16384))),Sn(he,ce)):Ai(he)}function Ai(ce){var he=ce;do{if((he.flags&32768)!==0){Sn(he,Bi);return}ce=he.return;var ve=Bh(he.alternate,he,qn);if(ve!==null){ji=ve;return}if(he=he.sibling,he!==null){ji=he;return}ji=he=ce}while(he!==null);un===0&&(un=5)}function Sn(ce,he){do{var ve=cu(ce.alternate,ce);if(ve!==null){ve.flags&=32767,ji=ve;return}if(ve=ce.return,ve!==null&&(ve.flags|=32768,ve.subtreeFlags=0,ve.deletions=null),!he&&(ce=ce.sibling,ce!==null)){ji=ce;return}ji=ce=ve}while(ce!==null);un=6,ji=null}function Ni(ce,he,ve,xe,we,Oe,Ue,We,ot){ce.cancelPendingCommit=null;do vu();while(Dn!==0);if((Zi&6)!==0)throw Error(Z(327));if(he!==null){if(he===ce.current)throw Error(Z(177));if(Oe=he.lanes|he.childLanes,Oe|=Bc,vn(ce,ve,Oe,Ue,We,ot),ce===cn&&(ji=cn=null,qi=0),ps=he,Bs=ce,Ss=ve,Ta=Oe,Do=we,gu=xe,(he.subtreeFlags&10256)!==0||(he.flags&10256)!==0?(ce.callbackNode=null,ce.callbackPriority=0,q0(Nt,function(){return Wf(),null})):(ce.callbackNode=null,ce.callbackPriority=0),xe=(he.flags&13878)!==0,(he.subtreeFlags&13878)!==0||xe){xe=Be.T,Be.T=null,we=ze.p,ze.p=2,Ue=Zi,Zi|=4;try{hl(ce,he,ve)}finally{Zi=Ue,ze.p=we,Be.T=xe}}Dn=1,rn(),rr(),sn()}}function rn(){if(Dn===1){Dn=0;var ce=Bs,he=ps,ve=(he.flags&13878)!==0;if((he.subtreeFlags&13878)!==0||ve){ve=Be.T,Be.T=null;var xe=ze.p;ze.p=2;var we=Zi;Zi|=4;try{ao(he,ce);var Oe=Df,Ue=Pc(ce.containerInfo),We=Oe.focusedElem,ot=Oe.selectionRange;if(Ue!==We&&We&&We.ownerDocument&&wc(We.ownerDocument.documentElement,We)){if(ot!==null&&Ho(We)){var Et=ot.start,Gt=ot.end;if(Gt===void 0&&(Gt=Et),"selectionStart"in We)We.selectionStart=Et,We.selectionEnd=Math.min(Gt,We.value.length);else{var Jt=We.ownerDocument||document,Ot=Jt&&Jt.defaultView||window;if(Ot.getSelection){var It=Ot.getSelection(),yi=We.textContent.length,Ri=Math.min(ot.start,yi),En=ot.end===void 0?Ri:Math.min(ot.end,yi);!It.extend&&Ri>En&&(Ue=En,En=Ri,Ri=Ue);var xt=Vu(We,Ri),ht=Vu(We,En);if(xt&&ht&&(It.rangeCount!==1||It.anchorNode!==xt.node||It.anchorOffset!==xt.offset||It.focusNode!==ht.node||It.focusOffset!==ht.offset)){var Ct=Jt.createRange();Ct.setStart(xt.node,xt.offset),It.removeAllRanges(),Ri>En?(It.addRange(Ct),It.extend(ht.node,ht.offset)):(Ct.setEnd(ht.node,ht.offset),It.addRange(Ct))}}}}for(Jt=[],It=We;It=It.parentNode;)It.nodeType===1&&Jt.push({element:It,left:It.scrollLeft,top:It.scrollTop});for(typeof We.focus=="function"&&We.focus(),We=0;We<Jt.length;We++){var $t=Jt[We];$t.element.scrollLeft=$t.left,$t.element.scrollTop=$t.top}}of=!!Nf,Df=Nf=null}finally{Zi=we,ze.p=xe,Be.T=ve}}ce.current=he,Dn=2}}function rr(){if(Dn===2){Dn=0;var ce=Bs,he=ps,ve=(he.flags&8772)!==0;if((he.subtreeFlags&8772)!==0||ve){ve=Be.T,Be.T=null;var xe=ze.p;ze.p=2;var we=Zi;Zi|=4;try{Xd(ce,he.alternate,he)}finally{Zi=we,ze.p=xe,Be.T=ve}}Dn=3}}function sn(){if(Dn===4||Dn===3){Dn=0,Qe();var ce=Bs,he=ps,ve=Ss,xe=gu;(he.subtreeFlags&10256)!==0||(he.flags&10256)!==0?Dn=5:(Dn=0,ps=Bs=null,wa(ce,ce.pendingLanes));var we=ce.pendingLanes;if(we===0&&(ea=null),Ir(ve),he=he.stateNode,Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(Rt,he,void 0,(he.current.flags&128)===128)}catch{}if(xe!==null){he=Be.T,we=ze.p,ze.p=2,Be.T=null;try{for(var Oe=ce.onRecoverableError,Ue=0;Ue<xe.length;Ue++){var We=xe[Ue];Oe(We.value,{componentStack:We.stack})}}finally{Be.T=he,ze.p=we}}(Ss&3)!==0&&vu(),lo(ce),we=ce.pendingLanes,(ve&261930)!==0&&(we&42)!==0?ce===Bo?Lo++:(Lo=0,Bo=ce):Lo=0,Uh(0)}}function wa(ce,he){(ce.pooledCacheLanes&=he)===0&&(he=ce.pooledCache,he!=null&&(ce.pooledCache=null,dr(he)))}function vu(){return rn(),rr(),sn(),Wf()}function Wf(){if(Dn!==5)return!1;var ce=Bs,he=Ta;Ta=0;var ve=Ir(Ss),xe=Be.T,we=ze.p;try{ze.p=32>ve?32:ve,Be.T=null,ve=Do,Do=null;var Oe=Bs,Ue=Ss;if(Dn=0,ps=Bs=null,Ss=0,(Zi&6)!==0)throw Error(Z(331));var We=Zi;if(Zi|=4,No(Oe.current),Nn(Oe,Oe.current,Ue,ve),Zi=We,Uh(0,!1),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(Rt,Oe)}catch{}return!0}finally{ze.p=we,Be.T=xe,wa(ce,he)}}function Jf(ce,he,ve){he=jr(ve,he),he=Lh(ce.stateNode,he,2),ce=va(ce,he,2),ce!==null&&(Ui(ce,2),lo(ce))}function xn(ce,he,ve){if(ce.tag===3)Jf(ce,ce,ve);else for(;he!==null;){if(he.tag===3){Jf(he,ce,ve);break}else if(he.tag===1){var xe=he.stateNode;if(typeof he.type.getDerivedStateFromError=="function"||typeof xe.componentDidCatch=="function"&&(ea===null||!ea.has(xe))){ce=jr(ve,ce),ve=al(2),xe=va(he,ve,2),xe!==null&&(Hr(ve,xe,he,ce),Ui(xe,2),lo(xe));break}}he=he.return}}function Af(ce,he,ve){var xe=ce.pingCache;if(xe===null){xe=ce.pingCache=new mu;var we=new Set;xe.set(he,we)}else we=xe.get(he),we===void 0&&(we=new Set,xe.set(he,we));we.has(ve)||(gn=!0,we.add(ve),ce=H0.bind(null,ce,he,ve),he.then(ce,ce))}function H0(ce,he,ve){var xe=ce.pingCache;xe!==null&&xe.delete(he),ce.pingedLanes|=ce.suspendedLanes&ve,ce.warmLanes&=~ve,cn===ce&&(qi&ve)===ve&&(un===4||un===3&&(qi&62914560)===qi&&300>Ye()-Ma?(Zi&2)===0&&At(ce,0):Ds|=ve,ds===qi&&(ds=0)),lo(ce)}function Kf(ce,he){he===0&&(he=Di()),ce=Va(ce,he),ce!==null&&(Ui(ce,he),lo(ce))}function Y0(ce){var he=ce.memoizedState,ve=0;he!==null&&(ve=he.retryLane),Kf(ce,ve)}function X0(ce,he){var ve=0;switch(ce.tag){case 31:case 13:var xe=ce.stateNode,we=ce.memoizedState;we!==null&&(ve=we.retryLane);break;case 19:xe=ce.stateNode;break;case 22:xe=ce.stateNode._retryCache;break;default:throw Error(Z(314))}xe!==null&&xe.delete(he),Kf(ce,ve)}function q0(ce,he){return ai(ce,he)}var Wd=null,_u=null,Sf=!1,Jd=!1,Cf=!1,ml=0;function lo(ce){ce!==_u&&ce.next===null&&(_u===null?Wd=_u=ce:_u=_u.next=ce),Jd=!0,Sf||(Sf=!0,W0())}function Uh(ce,he){if(!Cf&&Jd){Cf=!0;do for(var ve=!1,xe=Wd;xe!==null;){if(ce!==0){var we=xe.pendingLanes;if(we===0)var Oe=0;else{var Ue=xe.suspendedLanes,We=xe.pingedLanes;Oe=(1<<31-tt(42|ce)+1)-1,Oe&=we&~(Ue&~We),Oe=Oe&201326741?Oe&201326741|1:Oe?Oe|2:0}Oe!==0&&(ve=!0,t0(xe,Oe))}else Oe=qi,Oe=Vt(xe,xe===cn?Oe:0,xe.cancelPendingCommit!==null||xe.timeoutHandle!==-1),(Oe&3)===0||di(xe,Oe)||(ve=!0,t0(xe,Oe));xe=xe.next}while(ve);Cf=!1}}function $0(){Zf()}function Zf(){Jd=Sf=!1;var ce=0;ml!==0&&sp()&&(ce=ml);for(var he=Ye(),ve=null,xe=Wd;xe!==null;){var we=xe.next,Oe=Qf(xe,he);Oe===0?(xe.next=null,ve===null?Wd=we:ve.next=we,we===null&&(_u=ve)):(ve=xe,(ce!==0||(Oe&3)!==0)&&(Jd=!0)),xe=we}Dn!==0&&Dn!==5||Uh(ce),ml!==0&&(ml=0)}function Qf(ce,he){for(var ve=ce.suspendedLanes,xe=ce.pingedLanes,we=ce.expirationTimes,Oe=ce.pendingLanes&-62914561;0<Oe;){var Ue=31-tt(Oe),We=1<<Ue,ot=we[Ue];ot===-1?((We&ve)===0||(We&xe)!==0)&&(we[Ue]=pi(We,he)):ot<=he&&(ce.expiredLanes|=We),Oe&=~We}if(he=cn,ve=qi,ve=Vt(ce,ce===he?ve:0,ce.cancelPendingCommit!==null||ce.timeoutHandle!==-1),xe=ce.callbackNode,ve===0||ce===he&&(Ei===2||Ei===9)||ce.cancelPendingCommit!==null)return xe!==null&&xe!==null&&Qt(xe),ce.callbackNode=null,ce.callbackPriority=0;if((ve&3)===0||di(ce,ve)){if(he=ve&-ve,he===ce.callbackPriority)return he;switch(xe!==null&&Qt(xe),Ir(ve)){case 2:case 8:ve=yt;break;case 32:ve=Nt;break;case 268435456:ve=Zt;break;default:ve=Nt}return xe=e0.bind(null,ce),ve=ai(ve,xe),ce.callbackPriority=he,ce.callbackNode=ve,he}return xe!==null&&xe!==null&&Qt(xe),ce.callbackPriority=2,ce.callbackNode=null,2}function e0(ce,he){if(Dn!==0&&Dn!==5)return ce.callbackNode=null,ce.callbackPriority=0,null;var ve=ce.callbackNode;if(vu()&&ce.callbackNode!==ve)return null;var xe=qi;return xe=Vt(ce,ce===cn?xe:0,ce.cancelPendingCommit!==null||ce.timeoutHandle!==-1),xe===0?null:(Se(ce,xe,he),Qf(ce,Ye()),ce.callbackNode!=null&&ce.callbackNode===ve?e0.bind(null,ce):null)}function t0(ce,he){if(vu())return null;Se(ce,he,!0)}function W0(){lp(function(){(Zi&6)!==0?ai(dt,$0):Zf()})}function Ef(){if(ml===0){var ce=ga;ce===0&&(ce=ti,ti<<=1,(ti&261888)===0&&(ti=256)),ml=ce}return ml}function i0(ce){return ce==null||typeof ce=="symbol"||typeof ce=="boolean"?null:typeof ce=="function"?ce:El(""+ce)}function n0(ce,he){var ve=he.ownerDocument.createElement("input");return ve.name=he.name,ve.value=he.value,ce.id&&ve.setAttribute("form",ce.id),he.parentNode.insertBefore(ve,he),ce=new FormData(ce),ve.parentNode.removeChild(ve),ce}function J0(ce,he,ve,xe,we){if(he==="submit"&&ve&&ve.stateNode===we){var Oe=i0((we[On]||null).action),Ue=xe.submitter;Ue&&(he=(he=Ue[On]||null)?i0(he.formAction):Ue.getAttribute("formAction"),he!==null&&(Oe=he,Ue=null));var We=new Pl("action","action",null,xe,we);ce.push({event:We,listeners:[{instance:null,listener:function(){if(xe.defaultPrevented){if(ml!==0){var ot=Ue?n0(we,Ue):new FormData(we);Ph(ve,{pending:!0,data:ot,method:we.method,action:Oe},null,ot)}}else typeof Oe=="function"&&(We.preventDefault(),ot=Ue?n0(we,Ue):new FormData(we),Ph(ve,{pending:!0,data:ot,method:we.method,action:Oe},Oe,ot))},currentTarget:we}]})}}for(var Mf=0;Mf<Lc.length;Mf++){var Tf=Lc[Mf],K0=Tf.toLowerCase(),Z0=Tf[0].toUpperCase()+Tf.slice(1);yr(K0,"on"+Z0)}yr(zr,"onAnimationEnd"),yr(Gu,"onAnimationIteration"),yr(js,"onAnimationStart"),yr("dblclick","onDoubleClick"),yr("focusin","onFocus"),yr("focusout","onBlur"),yr($o,"onTransitionRun"),yr(za,"onTransitionStart"),yr(Hu,"onTransitionCancel"),yr(Nc,"onTransitionEnd"),ui("onMouseEnter",["mouseout","mouseover"]),ui("onMouseLeave",["mouseout","mouseover"]),ui("onPointerEnter",["pointerout","pointerover"]),ui("onPointerLeave",["pointerout","pointerover"]),ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ci("onBeforeInput",["compositionend","keypress","textInput","paste"]),ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zh));function r0(ce,he){he=(he&4)!==0;for(var ve=0;ve<ce.length;ve++){var xe=ce[ve],we=xe.event;xe=xe.listeners;e:{var Oe=void 0;if(he)for(var Ue=xe.length-1;0<=Ue;Ue--){var We=xe[Ue],ot=We.instance,Et=We.currentTarget;if(We=We.listener,ot!==Oe&&we.isPropagationStopped())break e;Oe=We,we.currentTarget=Et;try{Oe(we)}catch(Gt){ja(Gt)}we.currentTarget=null,Oe=ot}else for(Ue=0;Ue<xe.length;Ue++){if(We=xe[Ue],ot=We.instance,Et=We.currentTarget,We=We.listener,ot!==Oe&&we.isPropagationStopped())break e;Oe=We,we.currentTarget=Et;try{Oe(we)}catch(Gt){ja(Gt)}we.currentTarget=null,Oe=ot}}}}function Wi(ce,he){var ve=he[ks];ve===void 0&&(ve=he[ks]=new Set);var xe=ce+"__bubble";ve.has(xe)||(s0(he,ce,2,!1),ve.add(xe))}function wf(ce,he,ve){var xe=0;he&&(xe|=4),s0(ve,ce,xe,he)}var Kd="_reactListening"+Math.random().toString(36).slice(2);function Pf(ce){if(!ce[Kd]){ce[Kd]=!0,ut.forEach(function(ve){ve!=="selectionchange"&&(Q0.has(ve)||wf(ve,!1,ce),wf(ve,!0,ce))});var he=ce.nodeType===9?ce:ce.ownerDocument;he===null||he[Kd]||(he[Kd]=!0,wf("selectionchange",!1,he))}}function s0(ce,he,ve,xe){switch(L0(he)){case 2:var we=wp;break;case 8:we=Pp;break;default:we=Hf}ve=we.bind(null,he,ve,ce),we=void 0,!gc||he!=="touchstart"&&he!=="touchmove"&&he!=="wheel"||(we=!0),xe?we!==void 0?ce.addEventListener(he,ve,{capture:!0,passive:we}):ce.addEventListener(he,ve,!0):we!==void 0?ce.addEventListener(he,ve,{passive:we}):ce.addEventListener(he,ve,!1)}function Rf(ce,he,ve,xe,we){var Oe=xe;if((he&1)===0&&(he&2)===0&&xe!==null)e:for(;;){if(xe===null)return;var Ue=xe.tag;if(Ue===3||Ue===4){var We=xe.stateNode.containerInfo;if(We===we)break;if(Ue===4)for(Ue=xe.return;Ue!==null;){var ot=Ue.tag;if((ot===3||ot===4)&&Ue.stateNode.containerInfo===we)return;Ue=Ue.return}for(;We!==null;){if(Ue=Xt(We),Ue===null)return;if(ot=Ue.tag,ot===5||ot===6||ot===26||ot===27){xe=Oe=Ue;continue e}We=We.parentNode}}xe=xe.return}Eu(function(){var Et=Oe,Gt=pc(ve),Jt=[];e:{var Ot=ca.get(ce);if(Ot!==void 0){var It=Pl,yi=ce;switch(ce){case"keypress":if(ho(ve)===0)break e;case"keydown":case"keyup":It=Nu;break;case"focusin":yi="focus",It=xc;break;case"focusout":yi="blur",It=xc;break;case"beforeblur":case"afterblur":It=xc;break;case"click":if(ve.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":It=Jh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":It=Kh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":It=oa;break;case zr:case Gu:case js:It=ed;break;case Nc:It=pf;break;case"scroll":case"scrollend":It=yc;break;case"wheel":It=Da;break;case"copy":case"cut":case"paste":It=Tu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":It=Ac;break;case"toggle":case"beforetoggle":It=Lu}var Ri=(he&4)!==0,En=!Ri&&(ce==="scroll"||ce==="scrollend"),xt=Ri?Ot!==null?Ot+"Capture":null:Ot;Ri=[];for(var ht=Et,Ct;ht!==null;){var $t=ht;if(Ct=$t.stateNode,$t=$t.tag,$t!==5&&$t!==26&&$t!==27||Ct===null||xt===null||($t=uo(ht,xt),$t!=null&&Ri.push(jh(ht,$t,Ct))),En)break;ht=ht.return}0<Ri.length&&(Ot=new It(Ot,yi,null,ve,Gt),Jt.push({event:Ot,listeners:Ri}))}}if((he&7)===0){e:{if(Ot=ce==="mouseover"||ce==="pointerover",It=ce==="mouseout"||ce==="pointerout",Ot&&ve!==Ml&&(yi=ve.relatedTarget||ve.fromElement)&&(Xt(yi)||yi[Ur]))break e;if((It||Ot)&&(Ot=Gt.window===Gt?Gt:(Ot=Gt.ownerDocument)?Ot.defaultView||Ot.parentWindow:window,It?(yi=ve.relatedTarget||ve.toElement,It=Et,yi=yi?Xt(yi):null,yi!==null&&(En=ee(yi),Ri=yi.tag,yi!==En||Ri!==5&&Ri!==27&&Ri!==6)&&(yi=null)):(It=null,yi=Et),It!==yi)){if(Ri=Jh,$t="onMouseLeave",xt="onMouseEnter",ht="mouse",(ce==="pointerout"||ce==="pointerover")&&(Ri=Ac,$t="onPointerLeave",xt="onPointerEnter",ht="pointer"),En=It==null?Ot:nt(It),Ct=yi==null?Ot:nt(yi),Ot=new Ri($t,ht+"leave",It,ve,Gt),Ot.target=En,Ot.relatedTarget=Ct,$t=null,Xt(Gt)===Et&&(Ri=new Ri(xt,ht+"enter",yi,ve,Gt),Ri.target=Ct,Ri.relatedTarget=En,$t=Ri),En=$t,It&&yi)t:{for(Ri=ep,xt=It,ht=yi,Ct=0,$t=xt;$t;$t=Ri($t))Ct++;$t=0;for(var wi=ht;wi;wi=Ri(wi))$t++;for(;0<Ct-$t;)xt=Ri(xt),Ct--;for(;0<$t-Ct;)ht=Ri(ht),$t--;for(;Ct--;){if(xt===ht||ht!==null&&xt===ht.alternate){Ri=xt;break t}xt=Ri(xt),ht=Ri(ht)}Ri=null}else Ri=null;It!==null&&a0(Jt,Ot,It,Ri,!1),yi!==null&&En!==null&&a0(Jt,En,yi,Ri,!0)}}e:{if(Ot=Et?nt(Et):window,It=Ot.nodeName&&Ot.nodeName.toLowerCase(),It==="select"||It==="input"&&Ot.type==="file")var hn=zu;else if(Iu(Ot))if(Bl)hn=hd;else{hn=ka;var xi=kl}else It=Ot.nodeName,!It||It.toLowerCase()!=="input"||Ot.type!=="checkbox"&&Ot.type!=="radio"?Et&&Cl(Et.elementType)&&(hn=zu):hn=ud;if(hn&&(hn=hn(ce,Et))){Mc(Jt,hn,ve,Gt);break e}xi&&xi(ce,Ot,Et),ce==="focusout"&&Et&&Ot.type==="number"&&Et.memoizedProps.value!=null&&Qn(Ot,"number",Ot.value)}switch(xi=Et?nt(Et):window,ce){case"focusin":(Iu(xi)||xi.contentEditable==="true")&&(Yo=xi,Rc=Et,Xo=null);break;case"focusout":Xo=Rc=Yo=null;break;case"mousedown":Kr=!0;break;case"contextmenu":case"mouseup":case"dragend":Kr=!1,Oc(Jt,ve,Gt);break;case"selectionchange":if(dd)break;case"keydown":case"keyup":Oc(Jt,ve,Gt)}var Vi;if(fo)e:{switch(ce){case"compositionstart":var en="onCompositionStart";break e;case"compositionend":en="onCompositionEnd";break e;case"compositionupdate":en="onCompositionUpdate";break e}en=void 0}else Ba?Cc(ce,ve)&&(en="onCompositionEnd"):ce==="keydown"&&ve.keyCode===229&&(en="onCompositionStart");en&&(hr&&ve.locale!=="ko"&&(Ba||en!=="onCompositionStart"?en==="onCompositionEnd"&&Ba&&(Vi=_c()):(Ra=Gt,vc="value"in Ra?Ra.value:Ra.textContent,Ba=!0)),xi=Zd(Et,en),0<xi.length&&(en=new wu(en,ce,null,ve,Gt),Jt.push({event:en,listeners:xi}),Vi?en.data=Vi:(Vi=zo(ve),Vi!==null&&(en.data=Vi)))),(Vi=po?Ec(ce,ve):od(ce,ve))&&(en=Zd(Et,"onBeforeInput"),0<en.length&&(xi=new wu("onBeforeInput","beforeinput",null,ve,Gt),Jt.push({event:xi,listeners:en}),xi.data=Vi)),J0(Jt,ce,Et,ve,Gt)}r0(Jt,he)})}function jh(ce,he,ve){return{instance:ce,listener:he,currentTarget:ve}}function Zd(ce,he){for(var ve=he+"Capture",xe=[];ce!==null;){var we=ce,Oe=we.stateNode;if(we=we.tag,we!==5&&we!==26&&we!==27||Oe===null||(we=uo(ce,ve),we!=null&&xe.unshift(jh(ce,we,Oe)),we=uo(ce,he),we!=null&&xe.push(jh(ce,we,Oe))),ce.tag===3)return xe;ce=ce.return}return[]}function ep(ce){if(ce===null)return null;do ce=ce.return;while(ce&&ce.tag!==5&&ce.tag!==27);return ce||null}function a0(ce,he,ve,xe,we){for(var Oe=he._reactName,Ue=[];ve!==null&&ve!==xe;){var We=ve,ot=We.alternate,Et=We.stateNode;if(We=We.tag,ot!==null&&ot===xe)break;We!==5&&We!==26&&We!==27||Et===null||(ot=Et,we?(Et=uo(ve,Oe),Et!=null&&Ue.unshift(jh(ve,Et,ot))):we||(Et=uo(ve,Oe),Et!=null&&Ue.push(jh(ve,Et,ot)))),ve=ve.return}Ue.length!==0&&ce.push({event:he,listeners:Ue})}var tp=/\r\n?/g,ip=/\u0000|\uFFFD/g;function o0(ce){return(typeof ce=="string"?ce:""+ce).replace(tp,`
`).replace(ip,"")}function l0(ce,he){return he=o0(he),o0(ce)===he}function Cn(ce,he,ve,xe,we,Oe){switch(ve){case"children":typeof xe=="string"?he==="body"||he==="textarea"&&xe===""||Cs(ce,xe):(typeof xe=="number"||typeof xe=="bigint")&&he!=="body"&&Cs(ce,""+xe);break;case"className":Ji(ce,"class",xe);break;case"tabIndex":Ji(ce,"tabindex",xe);break;case"dir":case"role":case"viewBox":case"width":case"height":Ji(ce,ve,xe);break;case"style":Su(ce,xe,Oe);break;case"data":if(he!=="object"){Ji(ce,"data",xe);break}case"src":case"href":if(xe===""&&(he!=="a"||ve!=="href")){ce.removeAttribute(ve);break}if(xe==null||typeof xe=="function"||typeof xe=="symbol"||typeof xe=="boolean"){ce.removeAttribute(ve);break}xe=El(""+xe),ce.setAttribute(ve,xe);break;case"action":case"formAction":if(typeof xe=="function"){ce.setAttribute(ve,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Oe=="function"&&(ve==="formAction"?(he!=="input"&&Cn(ce,he,"name",we.name,we,null),Cn(ce,he,"formEncType",we.formEncType,we,null),Cn(ce,he,"formMethod",we.formMethod,we,null),Cn(ce,he,"formTarget",we.formTarget,we,null)):(Cn(ce,he,"encType",we.encType,we,null),Cn(ce,he,"method",we.method,we,null),Cn(ce,he,"target",we.target,we,null)));if(xe==null||typeof xe=="symbol"||typeof xe=="boolean"){ce.removeAttribute(ve);break}xe=El(""+xe),ce.setAttribute(ve,xe);break;case"onClick":xe!=null&&(ce.onclick=Us);break;case"onScroll":xe!=null&&Wi("scroll",ce);break;case"onScrollEnd":xe!=null&&Wi("scrollend",ce);break;case"dangerouslySetInnerHTML":if(xe!=null){if(typeof xe!="object"||!("__html"in xe))throw Error(Z(61));if(ve=xe.__html,ve!=null){if(we.children!=null)throw Error(Z(60));ce.innerHTML=ve}}break;case"multiple":ce.multiple=xe&&typeof xe!="function"&&typeof xe!="symbol";break;case"muted":ce.muted=xe&&typeof xe!="function"&&typeof xe!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(xe==null||typeof xe=="function"||typeof xe=="boolean"||typeof xe=="symbol"){ce.removeAttribute("xlink:href");break}ve=El(""+xe),ce.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",ve);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":xe!=null&&typeof xe!="function"&&typeof xe!="symbol"?ce.setAttribute(ve,""+xe):ce.removeAttribute(ve);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":xe&&typeof xe!="function"&&typeof xe!="symbol"?ce.setAttribute(ve,""):ce.removeAttribute(ve);break;case"capture":case"download":xe===!0?ce.setAttribute(ve,""):xe!==!1&&xe!=null&&typeof xe!="function"&&typeof xe!="symbol"?ce.setAttribute(ve,xe):ce.removeAttribute(ve);break;case"cols":case"rows":case"size":case"span":xe!=null&&typeof xe!="function"&&typeof xe!="symbol"&&!isNaN(xe)&&1<=xe?ce.setAttribute(ve,xe):ce.removeAttribute(ve);break;case"rowSpan":case"start":xe==null||typeof xe=="function"||typeof xe=="symbol"||isNaN(xe)?ce.removeAttribute(ve):ce.setAttribute(ve,xe);break;case"popover":Wi("beforetoggle",ce),Wi("toggle",ce),Ii(ce,"popover",xe);break;case"xlinkActuate":Ki(ce,"http://www.w3.org/1999/xlink","xlink:actuate",xe);break;case"xlinkArcrole":Ki(ce,"http://www.w3.org/1999/xlink","xlink:arcrole",xe);break;case"xlinkRole":Ki(ce,"http://www.w3.org/1999/xlink","xlink:role",xe);break;case"xlinkShow":Ki(ce,"http://www.w3.org/1999/xlink","xlink:show",xe);break;case"xlinkTitle":Ki(ce,"http://www.w3.org/1999/xlink","xlink:title",xe);break;case"xlinkType":Ki(ce,"http://www.w3.org/1999/xlink","xlink:type",xe);break;case"xmlBase":Ki(ce,"http://www.w3.org/XML/1998/namespace","xml:base",xe);break;case"xmlLang":Ki(ce,"http://www.w3.org/XML/1998/namespace","xml:lang",xe);break;case"xmlSpace":Ki(ce,"http://www.w3.org/XML/1998/namespace","xml:space",xe);break;case"is":Ii(ce,"is",xe);break;case"innerText":case"textContent":break;default:(!(2<ve.length)||ve[0]!=="o"&&ve[0]!=="O"||ve[1]!=="n"&&ve[1]!=="N")&&(ve=$h.get(ve)||ve,Ii(ce,ve,xe))}}function Of(ce,he,ve,xe,we,Oe){switch(ve){case"style":Su(ce,xe,Oe);break;case"dangerouslySetInnerHTML":if(xe!=null){if(typeof xe!="object"||!("__html"in xe))throw Error(Z(61));if(ve=xe.__html,ve!=null){if(we.children!=null)throw Error(Z(60));ce.innerHTML=ve}}break;case"children":typeof xe=="string"?Cs(ce,xe):(typeof xe=="number"||typeof xe=="bigint")&&Cs(ce,""+xe);break;case"onScroll":xe!=null&&Wi("scroll",ce);break;case"onScrollEnd":xe!=null&&Wi("scrollend",ce);break;case"onClick":xe!=null&&(ce.onclick=Us);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ri.hasOwnProperty(ve))e:{if(ve[0]==="o"&&ve[1]==="n"&&(we=ve.endsWith("Capture"),he=ve.slice(2,we?ve.length-7:void 0),Oe=ce[On]||null,Oe=Oe!=null?Oe[ve]:null,typeof Oe=="function"&&ce.removeEventListener(he,Oe,we),typeof xe=="function")){typeof Oe!="function"&&Oe!==null&&(ve in ce?ce[ve]=null:ce.hasAttribute(ve)&&ce.removeAttribute(ve)),ce.addEventListener(he,xe,we);break e}ve in ce?ce[ve]=xe:xe===!0?ce.setAttribute(ve,""):Ii(ce,ve,xe)}}}function kr(ce,he,ve){switch(he){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Wi("error",ce),Wi("load",ce);var xe=!1,we=!1,Oe;for(Oe in ve)if(ve.hasOwnProperty(Oe)){var Ue=ve[Oe];if(Ue!=null)switch(Oe){case"src":xe=!0;break;case"srcSet":we=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(Z(137,he));default:Cn(ce,he,Oe,Ue,ve,null)}}we&&Cn(ce,he,"srcSet",ve.srcSet,ve,null),xe&&Cn(ce,he,"src",ve.src,ve,null);return;case"input":Wi("invalid",ce);var We=Oe=Ue=we=null,ot=null,Et=null;for(xe in ve)if(ve.hasOwnProperty(xe)){var Gt=ve[xe];if(Gt!=null)switch(xe){case"name":we=Gt;break;case"type":Ue=Gt;break;case"checked":ot=Gt;break;case"defaultChecked":Et=Gt;break;case"value":Oe=Gt;break;case"defaultValue":We=Gt;break;case"children":case"dangerouslySetInnerHTML":if(Gt!=null)throw Error(Z(137,he));break;default:Cn(ce,he,xe,Gt,ve,null)}}bn(ce,Oe,We,ot,Et,Ue,we,!1);return;case"select":Wi("invalid",ce),xe=Ue=Oe=null;for(we in ve)if(ve.hasOwnProperty(we)&&(We=ve[we],We!=null))switch(we){case"value":Oe=We;break;case"defaultValue":Ue=We;break;case"multiple":xe=We;default:Cn(ce,he,we,We,ve,null)}he=Oe,ve=Ue,ce.multiple=!!xe,he!=null?er(ce,!!xe,he,!1):ve!=null&&er(ce,!!xe,ve,!0);return;case"textarea":Wi("invalid",ce),Oe=we=xe=null;for(Ue in ve)if(ve.hasOwnProperty(Ue)&&(We=ve[Ue],We!=null))switch(Ue){case"value":xe=We;break;case"defaultValue":we=We;break;case"children":Oe=We;break;case"dangerouslySetInnerHTML":if(We!=null)throw Error(Z(91));break;default:Cn(ce,he,Ue,We,ve,null)}kn(ce,xe,we,Oe);return;case"option":for(ot in ve)if(ve.hasOwnProperty(ot)&&(xe=ve[ot],xe!=null))switch(ot){case"selected":ce.selected=xe&&typeof xe!="function"&&typeof xe!="symbol";break;default:Cn(ce,he,ot,xe,ve,null)}return;case"dialog":Wi("beforetoggle",ce),Wi("toggle",ce),Wi("cancel",ce),Wi("close",ce);break;case"iframe":case"object":Wi("load",ce);break;case"video":case"audio":for(xe=0;xe<zh.length;xe++)Wi(zh[xe],ce);break;case"image":Wi("error",ce),Wi("load",ce);break;case"details":Wi("toggle",ce);break;case"embed":case"source":case"link":Wi("error",ce),Wi("load",ce);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Et in ve)if(ve.hasOwnProperty(Et)&&(xe=ve[Et],xe!=null))switch(Et){case"children":case"dangerouslySetInnerHTML":throw Error(Z(137,he));default:Cn(ce,he,Et,xe,ve,null)}return;default:if(Cl(he)){for(Gt in ve)ve.hasOwnProperty(Gt)&&(xe=ve[Gt],xe!==void 0&&Of(ce,he,Gt,xe,ve,void 0));return}}for(We in ve)ve.hasOwnProperty(We)&&(xe=ve[We],xe!=null&&Cn(ce,he,We,xe,ve,null))}function np(ce,he,ve,xe){switch(he){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var we=null,Oe=null,Ue=null,We=null,ot=null,Et=null,Gt=null;for(It in ve){var Jt=ve[It];if(ve.hasOwnProperty(It)&&Jt!=null)switch(It){case"checked":break;case"value":break;case"defaultValue":ot=Jt;default:xe.hasOwnProperty(It)||Cn(ce,he,It,null,xe,Jt)}}for(var Ot in xe){var It=xe[Ot];if(Jt=ve[Ot],xe.hasOwnProperty(Ot)&&(It!=null||Jt!=null))switch(Ot){case"type":Oe=It;break;case"name":we=It;break;case"checked":Et=It;break;case"defaultChecked":Gt=It;break;case"value":Ue=It;break;case"defaultValue":We=It;break;case"children":case"dangerouslySetInnerHTML":if(It!=null)throw Error(Z(137,he));break;default:It!==Jt&&Cn(ce,he,Ot,It,xe,Jt)}}Is(ce,Ue,We,ot,Et,Gt,Oe,we);return;case"select":It=Ue=We=Ot=null;for(Oe in ve)if(ot=ve[Oe],ve.hasOwnProperty(Oe)&&ot!=null)switch(Oe){case"value":break;case"multiple":It=ot;default:xe.hasOwnProperty(Oe)||Cn(ce,he,Oe,null,xe,ot)}for(we in xe)if(Oe=xe[we],ot=ve[we],xe.hasOwnProperty(we)&&(Oe!=null||ot!=null))switch(we){case"value":Ot=Oe;break;case"defaultValue":We=Oe;break;case"multiple":Ue=Oe;default:Oe!==ot&&Cn(ce,he,we,Oe,xe,ot)}he=We,ve=Ue,xe=It,Ot!=null?er(ce,!!ve,Ot,!1):!!xe!=!!ve&&(he!=null?er(ce,!!ve,he,!0):er(ce,!!ve,ve?[]:"",!1));return;case"textarea":It=Ot=null;for(We in ve)if(we=ve[We],ve.hasOwnProperty(We)&&we!=null&&!xe.hasOwnProperty(We))switch(We){case"value":break;case"children":break;default:Cn(ce,he,We,null,xe,we)}for(Ue in xe)if(we=xe[Ue],Oe=ve[Ue],xe.hasOwnProperty(Ue)&&(we!=null||Oe!=null))switch(Ue){case"value":Ot=we;break;case"defaultValue":It=we;break;case"children":break;case"dangerouslySetInnerHTML":if(we!=null)throw Error(Z(91));break;default:we!==Oe&&Cn(ce,he,Ue,we,xe,Oe)}tr(ce,Ot,It);return;case"option":for(var yi in ve)if(Ot=ve[yi],ve.hasOwnProperty(yi)&&Ot!=null&&!xe.hasOwnProperty(yi))switch(yi){case"selected":ce.selected=!1;break;default:Cn(ce,he,yi,null,xe,Ot)}for(ot in xe)if(Ot=xe[ot],It=ve[ot],xe.hasOwnProperty(ot)&&Ot!==It&&(Ot!=null||It!=null))switch(ot){case"selected":ce.selected=Ot&&typeof Ot!="function"&&typeof Ot!="symbol";break;default:Cn(ce,he,ot,Ot,xe,It)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ri in ve)Ot=ve[Ri],ve.hasOwnProperty(Ri)&&Ot!=null&&!xe.hasOwnProperty(Ri)&&Cn(ce,he,Ri,null,xe,Ot);for(Et in xe)if(Ot=xe[Et],It=ve[Et],xe.hasOwnProperty(Et)&&Ot!==It&&(Ot!=null||It!=null))switch(Et){case"children":case"dangerouslySetInnerHTML":if(Ot!=null)throw Error(Z(137,he));break;default:Cn(ce,he,Et,Ot,xe,It)}return;default:if(Cl(he)){for(var En in ve)Ot=ve[En],ve.hasOwnProperty(En)&&Ot!==void 0&&!xe.hasOwnProperty(En)&&Of(ce,he,En,void 0,xe,Ot);for(Gt in xe)Ot=xe[Gt],It=ve[Gt],!xe.hasOwnProperty(Gt)||Ot===It||Ot===void 0&&It===void 0||Of(ce,he,Gt,Ot,xe,It);return}}for(var xt in ve)Ot=ve[xt],ve.hasOwnProperty(xt)&&Ot!=null&&!xe.hasOwnProperty(xt)&&Cn(ce,he,xt,null,xe,Ot);for(Jt in xe)Ot=xe[Jt],It=ve[Jt],!xe.hasOwnProperty(Jt)||Ot===It||Ot==null&&It==null||Cn(ce,he,Jt,Ot,xe,It)}function c0(ce){switch(ce){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function rp(){if(typeof performance.getEntriesByType=="function"){for(var ce=0,he=0,ve=performance.getEntriesByType("resource"),xe=0;xe<ve.length;xe++){var we=ve[xe],Oe=we.transferSize,Ue=we.initiatorType,We=we.duration;if(Oe&&We&&c0(Ue)){for(Ue=0,We=we.responseEnd,xe+=1;xe<ve.length;xe++){var ot=ve[xe],Et=ot.startTime;if(Et>We)break;var Gt=ot.transferSize,Jt=ot.initiatorType;Gt&&c0(Jt)&&(ot=ot.responseEnd,Ue+=Gt*(ot<We?1:(We-Et)/(ot-Et)))}if(--xe,he+=8*(Oe+Ue)/(we.duration/1e3),ce++,10<ce)break}}if(0<ce)return he/ce/1e6}return navigator.connection&&(ce=navigator.connection.downlink,typeof ce=="number")?ce:5}var Nf=null,Df=null;function Qd(ce){return ce.nodeType===9?ce:ce.ownerDocument}function u0(ce){switch(ce){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function h0(ce,he){if(ce===0)switch(he){case"svg":return 1;case"math":return 2;default:return 0}return ce===1&&he==="foreignObject"?0:ce}function Lf(ce,he){return ce==="textarea"||ce==="noscript"||typeof he.children=="string"||typeof he.children=="number"||typeof he.children=="bigint"||typeof he.dangerouslySetInnerHTML=="object"&&he.dangerouslySetInnerHTML!==null&&he.dangerouslySetInnerHTML.__html!=null}var Bf=null;function sp(){var ce=window.event;return ce&&ce.type==="popstate"?ce===Bf?!1:(Bf=ce,!0):(Bf=null,!1)}var d0=typeof setTimeout=="function"?setTimeout:void 0,ap=typeof clearTimeout=="function"?clearTimeout:void 0,f0=typeof Promise=="function"?Promise:void 0,lp=typeof queueMicrotask=="function"?queueMicrotask:typeof f0<"u"?function(ce){return f0.resolve(null).then(ce).catch(cp)}:d0;function cp(ce){setTimeout(function(){throw ce})}function gl(ce){return ce==="head"}function p0(ce,he){var ve=he,xe=0;do{var we=ve.nextSibling;if(ce.removeChild(ve),we&&we.nodeType===8)if(ve=we.data,ve==="/$"||ve==="/&"){if(xe===0){ce.removeChild(we),Au(he);return}xe--}else if(ve==="$"||ve==="$?"||ve==="$~"||ve==="$!"||ve==="&")xe++;else if(ve==="html")Fh(ce.ownerDocument.documentElement);else if(ve==="head"){ve=ce.ownerDocument.head,Fh(ve);for(var Oe=ve.firstChild;Oe;){var Ue=Oe.nextSibling,We=Oe.nodeName;Oe[ct]||We==="SCRIPT"||We==="STYLE"||We==="LINK"&&Oe.rel.toLowerCase()==="stylesheet"||ve.removeChild(Oe),Oe=Ue}}else ve==="body"&&Fh(ce.ownerDocument.body);ve=we}while(ve);Au(he)}function m0(ce,he){var ve=ce;ce=0;do{var xe=ve.nextSibling;if(ve.nodeType===1?he?(ve._stashedDisplay=ve.style.display,ve.style.display="none"):(ve.style.display=ve._stashedDisplay||"",ve.getAttribute("style")===""&&ve.removeAttribute("style")):ve.nodeType===3&&(he?(ve._stashedText=ve.nodeValue,ve.nodeValue=""):ve.nodeValue=ve._stashedText||""),xe&&xe.nodeType===8)if(ve=xe.data,ve==="/$"){if(ce===0)break;ce--}else ve!=="$"&&ve!=="$?"&&ve!=="$~"&&ve!=="$!"||ce++;ve=xe}while(ve)}function kf(ce){var he=ce.firstChild;for(he&&he.nodeType===10&&(he=he.nextSibling);he;){var ve=he;switch(he=he.nextSibling,ve.nodeName){case"HTML":case"HEAD":case"BODY":kf(ve),Tt(ve);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(ve.rel.toLowerCase()==="stylesheet")continue}ce.removeChild(ve)}}function up(ce,he,ve,xe){for(;ce.nodeType===1;){var we=ve;if(ce.nodeName.toLowerCase()!==he.toLowerCase()){if(!xe&&(ce.nodeName!=="INPUT"||ce.type!=="hidden"))break}else if(xe){if(!ce[ct])switch(he){case"meta":if(!ce.hasAttribute("itemprop"))break;return ce;case"link":if(Oe=ce.getAttribute("rel"),Oe==="stylesheet"&&ce.hasAttribute("data-precedence"))break;if(Oe!==we.rel||ce.getAttribute("href")!==(we.href==null||we.href===""?null:we.href)||ce.getAttribute("crossorigin")!==(we.crossOrigin==null?null:we.crossOrigin)||ce.getAttribute("title")!==(we.title==null?null:we.title))break;return ce;case"style":if(ce.hasAttribute("data-precedence"))break;return ce;case"script":if(Oe=ce.getAttribute("src"),(Oe!==(we.src==null?null:we.src)||ce.getAttribute("type")!==(we.type==null?null:we.type)||ce.getAttribute("crossorigin")!==(we.crossOrigin==null?null:we.crossOrigin))&&Oe&&ce.hasAttribute("async")&&!ce.hasAttribute("itemprop"))break;return ce;default:return ce}}else if(he==="input"&&ce.type==="hidden"){var Oe=we.name==null?null:""+we.name;if(we.type==="hidden"&&ce.getAttribute("name")===Oe)return ce}else return ce;if(ce=ta(ce.nextSibling),ce===null)break}return null}function hp(ce,he,ve){if(he==="")return null;for(;ce.nodeType!==3;)if((ce.nodeType!==1||ce.nodeName!=="INPUT"||ce.type!=="hidden")&&!ve||(ce=ta(ce.nextSibling),ce===null))return null;return ce}function g0(ce,he){for(;ce.nodeType!==8;)if((ce.nodeType!==1||ce.nodeName!=="INPUT"||ce.type!=="hidden")&&!he||(ce=ta(ce.nextSibling),ce===null))return null;return ce}function If(ce){return ce.data==="$?"||ce.data==="$~"}function Uf(ce){return ce.data==="$!"||ce.data==="$?"&&ce.ownerDocument.readyState!=="loading"}function dp(ce,he){var ve=ce.ownerDocument;if(ce.data==="$~")ce._reactRetry=he;else if(ce.data!=="$?"||ve.readyState!=="loading")he();else{var xe=function(){he(),ve.removeEventListener("DOMContentLoaded",xe)};ve.addEventListener("DOMContentLoaded",xe),ce._reactRetry=xe}}function ta(ce){for(;ce!=null;ce=ce.nextSibling){var he=ce.nodeType;if(he===1||he===3)break;if(he===8){if(he=ce.data,he==="$"||he==="$!"||he==="$?"||he==="$~"||he==="&"||he==="F!"||he==="F")break;if(he==="/$"||he==="/&")return null}}return ce}var zf=null;function v0(ce){ce=ce.nextSibling;for(var he=0;ce;){if(ce.nodeType===8){var ve=ce.data;if(ve==="/$"||ve==="/&"){if(he===0)return ta(ce.nextSibling);he--}else ve!=="$"&&ve!=="$!"&&ve!=="$?"&&ve!=="$~"&&ve!=="&"||he++}ce=ce.nextSibling}return null}function _0(ce){ce=ce.previousSibling;for(var he=0;ce;){if(ce.nodeType===8){var ve=ce.data;if(ve==="$"||ve==="$!"||ve==="$?"||ve==="$~"||ve==="&"){if(he===0)return ce;he--}else ve!=="/$"&&ve!=="/&"||he++}ce=ce.previousSibling}return null}function y0(ce,he,ve){switch(he=Qd(ve),ce){case"html":if(ce=he.documentElement,!ce)throw Error(Z(452));return ce;case"head":if(ce=he.head,!ce)throw Error(Z(453));return ce;case"body":if(ce=he.body,!ce)throw Error(Z(454));return ce;default:throw Error(Z(451))}}function Fh(ce){for(var he=ce.attributes;he.length;)ce.removeAttributeNode(he[0]);Tt(ce)}var na=new Map,b0=new Set;function ef(ce){return typeof ce.getRootNode=="function"?ce.getRootNode():ce.nodeType===9?ce:ce.ownerDocument}var Io=ze.d;ze.d={f:fp,r:pp,D:mp,C:gp,L:vp,m:_p,X:bp,S:yp,M:xp};function fp(){var ce=Io.f(),he=Je();return ce||he}function pp(ce){var he=Ve(ce);he!==null&&he.tag===5&&he.type==="form"?Rh(he):Io.r(ce)}var yu=typeof document>"u"?null:document;function x0(ce,he,ve){var xe=yu;if(xe&&typeof he=="string"&&he){var we=yn(he);we='link[rel="'+ce+'"][href="'+we+'"]',typeof ve=="string"&&(we+='[crossorigin="'+ve+'"]'),b0.has(we)||(b0.add(we),ce={rel:ce,crossOrigin:ve,href:he},xe.querySelector(we)===null&&(he=xe.createElement("link"),kr(he,"link",ce),mt(he),xe.head.appendChild(he)))}}function mp(ce){Io.D(ce),x0("dns-prefetch",ce,null)}function gp(ce,he){Io.C(ce,he),x0("preconnect",ce,he)}function vp(ce,he,ve){Io.L(ce,he,ve);var xe=yu;if(xe&&ce&&he){var we='link[rel="preload"][as="'+yn(he)+'"]';he==="image"&&ve&&ve.imageSrcSet?(we+='[imagesrcset="'+yn(ve.imageSrcSet)+'"]',typeof ve.imageSizes=="string"&&(we+='[imagesizes="'+yn(ve.imageSizes)+'"]')):we+='[href="'+yn(ce)+'"]';var Oe=we;switch(he){case"style":Oe=bu(ce);break;case"script":Oe=xu(ce)}na.has(Oe)||(ce=se({rel:"preload",href:he==="image"&&ve&&ve.imageSrcSet?void 0:ce,as:he},ve),na.set(Oe,ce),xe.querySelector(we)!==null||he==="style"&&xe.querySelector(Vh(Oe))||he==="script"&&xe.querySelector(Gh(Oe))||(he=xe.createElement("link"),kr(he,"link",ce),mt(he),xe.head.appendChild(he)))}}function _p(ce,he){Io.m(ce,he);var ve=yu;if(ve&&ce){var xe=he&&typeof he.as=="string"?he.as:"script",we='link[rel="modulepreload"][as="'+yn(xe)+'"][href="'+yn(ce)+'"]',Oe=we;switch(xe){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Oe=xu(ce)}if(!na.has(Oe)&&(ce=se({rel:"modulepreload",href:ce},he),na.set(Oe,ce),ve.querySelector(we)===null)){switch(xe){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(ve.querySelector(Gh(Oe)))return}xe=ve.createElement("link"),kr(xe,"link",ce),mt(xe),ve.head.appendChild(xe)}}}function yp(ce,he,ve){Io.S(ce,he,ve);var xe=yu;if(xe&&ce){var we=gt(xe).hoistableStyles,Oe=bu(ce);he=he||"default";var Ue=we.get(Oe);if(!Ue){var We={loading:0,preload:null};if(Ue=xe.querySelector(Vh(Oe)))We.loading=5;else{ce=se({rel:"stylesheet",href:ce,"data-precedence":he},ve),(ve=na.get(Oe))&&jf(ce,ve);var ot=Ue=xe.createElement("link");mt(ot),kr(ot,"link",ce),ot._p=new Promise(function(Et,Gt){ot.onload=Et,ot.onerror=Gt}),ot.addEventListener("load",function(){We.loading|=1}),ot.addEventListener("error",function(){We.loading|=2}),We.loading|=4,tf(Ue,he,xe)}Ue={type:"stylesheet",instance:Ue,count:1,state:We},we.set(Oe,Ue)}}}function bp(ce,he){Io.X(ce,he);var ve=yu;if(ve&&ce){var xe=gt(ve).hoistableScripts,we=xu(ce),Oe=xe.get(we);Oe||(Oe=ve.querySelector(Gh(we)),Oe||(ce=se({src:ce,async:!0},he),(he=na.get(we))&&Ff(ce,he),Oe=ve.createElement("script"),mt(Oe),kr(Oe,"link",ce),ve.head.appendChild(Oe)),Oe={type:"script",instance:Oe,count:1,state:null},xe.set(we,Oe))}}function xp(ce,he){Io.M(ce,he);var ve=yu;if(ve&&ce){var xe=gt(ve).hoistableScripts,we=xu(ce),Oe=xe.get(we);Oe||(Oe=ve.querySelector(Gh(we)),Oe||(ce=se({src:ce,async:!0,type:"module"},he),(he=na.get(we))&&Ff(ce,he),Oe=ve.createElement("script"),mt(Oe),kr(Oe,"link",ce),ve.head.appendChild(Oe)),Oe={type:"script",instance:Oe,count:1,state:null},xe.set(we,Oe))}}function A0(ce,he,ve,xe){var we=(we=it.current)?ef(we):null;if(!we)throw Error(Z(446));switch(ce){case"meta":case"title":return null;case"style":return typeof ve.precedence=="string"&&typeof ve.href=="string"?(he=bu(ve.href),ve=gt(we).hoistableStyles,xe=ve.get(he),xe||(xe={type:"style",instance:null,count:0,state:null},ve.set(he,xe)),xe):{type:"void",instance:null,count:0,state:null};case"link":if(ve.rel==="stylesheet"&&typeof ve.href=="string"&&typeof ve.precedence=="string"){ce=bu(ve.href);var Oe=gt(we).hoistableStyles,Ue=Oe.get(ce);if(Ue||(we=we.ownerDocument||we,Ue={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Oe.set(ce,Ue),(Oe=we.querySelector(Vh(ce)))&&!Oe._p&&(Ue.instance=Oe,Ue.state.loading=5),na.has(ce)||(ve={rel:"preload",as:"style",href:ve.href,crossOrigin:ve.crossOrigin,integrity:ve.integrity,media:ve.media,hrefLang:ve.hrefLang,referrerPolicy:ve.referrerPolicy},na.set(ce,ve),Oe||Ap(we,ce,ve,Ue.state))),he&&xe===null)throw Error(Z(528,""));return Ue}if(he&&xe!==null)throw Error(Z(529,""));return null;case"script":return he=ve.async,ve=ve.src,typeof ve=="string"&&he&&typeof he!="function"&&typeof he!="symbol"?(he=xu(ve),ve=gt(we).hoistableScripts,xe=ve.get(he),xe||(xe={type:"script",instance:null,count:0,state:null},ve.set(he,xe)),xe):{type:"void",instance:null,count:0,state:null};default:throw Error(Z(444,ce))}}function bu(ce){return'href="'+yn(ce)+'"'}function Vh(ce){return'link[rel="stylesheet"]['+ce+"]"}function S0(ce){return se({},ce,{"data-precedence":ce.precedence,precedence:null})}function Ap(ce,he,ve,xe){ce.querySelector('link[rel="preload"][as="style"]['+he+"]")?xe.loading=1:(he=ce.createElement("link"),xe.preload=he,he.addEventListener("load",function(){return xe.loading|=1}),he.addEventListener("error",function(){return xe.loading|=2}),kr(he,"link",ve),mt(he),ce.head.appendChild(he))}function xu(ce){return'[src="'+yn(ce)+'"]'}function Gh(ce){return"script[async]"+ce}function C0(ce,he,ve){if(he.count++,he.instance===null)switch(he.type){case"style":var xe=ce.querySelector('style[data-href~="'+yn(ve.href)+'"]');if(xe)return he.instance=xe,mt(xe),xe;var we=se({},ve,{"data-href":ve.href,"data-precedence":ve.precedence,href:null,precedence:null});return xe=(ce.ownerDocument||ce).createElement("style"),mt(xe),kr(xe,"style",we),tf(xe,ve.precedence,ce),he.instance=xe;case"stylesheet":we=bu(ve.href);var Oe=ce.querySelector(Vh(we));if(Oe)return he.state.loading|=4,he.instance=Oe,mt(Oe),Oe;xe=S0(ve),(we=na.get(we))&&jf(xe,we),Oe=(ce.ownerDocument||ce).createElement("link"),mt(Oe);var Ue=Oe;return Ue._p=new Promise(function(We,ot){Ue.onload=We,Ue.onerror=ot}),kr(Oe,"link",xe),he.state.loading|=4,tf(Oe,ve.precedence,ce),he.instance=Oe;case"script":return Oe=xu(ve.src),(we=ce.querySelector(Gh(Oe)))?(he.instance=we,mt(we),we):(xe=ve,(we=na.get(Oe))&&(xe=se({},ve),Ff(xe,we)),ce=ce.ownerDocument||ce,we=ce.createElement("script"),mt(we),kr(we,"link",xe),ce.head.appendChild(we),he.instance=we);case"void":return null;default:throw Error(Z(443,he.type))}else he.type==="stylesheet"&&(he.state.loading&4)===0&&(xe=he.instance,he.state.loading|=4,tf(xe,ve.precedence,ce));return he.instance}function tf(ce,he,ve){for(var xe=ve.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),we=xe.length?xe[xe.length-1]:null,Oe=we,Ue=0;Ue<xe.length;Ue++){var We=xe[Ue];if(We.dataset.precedence===he)Oe=We;else if(Oe!==we)break}Oe?Oe.parentNode.insertBefore(ce,Oe.nextSibling):(he=ve.nodeType===9?ve.head:ve,he.insertBefore(ce,he.firstChild))}function jf(ce,he){ce.crossOrigin==null&&(ce.crossOrigin=he.crossOrigin),ce.referrerPolicy==null&&(ce.referrerPolicy=he.referrerPolicy),ce.title==null&&(ce.title=he.title)}function Ff(ce,he){ce.crossOrigin==null&&(ce.crossOrigin=he.crossOrigin),ce.referrerPolicy==null&&(ce.referrerPolicy=he.referrerPolicy),ce.integrity==null&&(ce.integrity=he.integrity)}var nf=null;function E0(ce,he,ve){if(nf===null){var xe=new Map,we=nf=new Map;we.set(ve,xe)}else we=nf,xe=we.get(ve),xe||(xe=new Map,we.set(ve,xe));if(xe.has(ce))return xe;for(xe.set(ce,null),ve=ve.getElementsByTagName(ce),we=0;we<ve.length;we++){var Oe=ve[we];if(!(Oe[ct]||Oe[ki]||ce==="link"&&Oe.getAttribute("rel")==="stylesheet")&&Oe.namespaceURI!=="http://www.w3.org/2000/svg"){var Ue=Oe.getAttribute(he)||"";Ue=ce+Ue;var We=xe.get(Ue);We?We.push(Oe):xe.set(Ue,[Oe])}}return xe}function M0(ce,he,ve){ce=ce.ownerDocument||ce,ce.head.insertBefore(ve,he==="title"?ce.querySelector("head > title"):null)}function Sp(ce,he,ve){if(ve===1||he.itemProp!=null)return!1;switch(ce){case"meta":case"title":return!0;case"style":if(typeof he.precedence!="string"||typeof he.href!="string"||he.href==="")break;return!0;case"link":if(typeof he.rel!="string"||typeof he.href!="string"||he.href===""||he.onLoad||he.onError)break;switch(he.rel){case"stylesheet":return ce=he.disabled,typeof he.precedence=="string"&&ce==null;default:return!0}case"script":if(he.async&&typeof he.async!="function"&&typeof he.async!="symbol"&&!he.onLoad&&!he.onError&&he.src&&typeof he.src=="string")return!0}return!1}function T0(ce){return!(ce.type==="stylesheet"&&(ce.state.loading&3)===0)}function Cp(ce,he,ve,xe){if(ve.type==="stylesheet"&&(typeof xe.media!="string"||matchMedia(xe.media).matches!==!1)&&(ve.state.loading&4)===0){if(ve.instance===null){var we=bu(xe.href),Oe=he.querySelector(Vh(we));if(Oe){he=Oe._p,he!==null&&typeof he=="object"&&typeof he.then=="function"&&(ce.count++,ce=rf.bind(ce),he.then(ce,ce)),ve.state.loading|=4,ve.instance=Oe,mt(Oe);return}Oe=he.ownerDocument||he,xe=S0(xe),(we=na.get(we))&&jf(xe,we),Oe=Oe.createElement("link"),mt(Oe);var Ue=Oe;Ue._p=new Promise(function(We,ot){Ue.onload=We,Ue.onerror=ot}),kr(Oe,"link",xe),ve.instance=Oe}ce.stylesheets===null&&(ce.stylesheets=new Map),ce.stylesheets.set(ve,he),(he=ve.state.preload)&&(ve.state.loading&3)===0&&(ce.count++,ve=rf.bind(ce),he.addEventListener("load",ve),he.addEventListener("error",ve))}}var Vf=0;function Ep(ce,he){return ce.stylesheets&&ce.count===0&&af(ce,ce.stylesheets),0<ce.count||0<ce.imgCount?function(ve){var xe=setTimeout(function(){if(ce.stylesheets&&af(ce,ce.stylesheets),ce.unsuspend){var Oe=ce.unsuspend;ce.unsuspend=null,Oe()}},6e4+he);0<ce.imgBytes&&Vf===0&&(Vf=62500*rp());var we=setTimeout(function(){if(ce.waitingForImages=!1,ce.count===0&&(ce.stylesheets&&af(ce,ce.stylesheets),ce.unsuspend)){var Oe=ce.unsuspend;ce.unsuspend=null,Oe()}},(ce.imgBytes>Vf?50:800)+he);return ce.unsuspend=ve,function(){ce.unsuspend=null,clearTimeout(xe),clearTimeout(we)}}:null}function rf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)af(this,this.stylesheets);else if(this.unsuspend){var ce=this.unsuspend;this.unsuspend=null,ce()}}}var sf=null;function af(ce,he){ce.stylesheets=null,ce.unsuspend!==null&&(ce.count++,sf=new Map,he.forEach(Mp,ce),sf=null,rf.call(ce))}function Mp(ce,he){if(!(he.state.loading&4)){var ve=sf.get(ce);if(ve)var xe=ve.get(null);else{ve=new Map,sf.set(ce,ve);for(var we=ce.querySelectorAll("link[data-precedence],style[data-precedence]"),Oe=0;Oe<we.length;Oe++){var Ue=we[Oe];(Ue.nodeName==="LINK"||Ue.getAttribute("media")!=="not all")&&(ve.set(Ue.dataset.precedence,Ue),xe=Ue)}xe&&ve.set(null,xe)}we=he.instance,Ue=we.getAttribute("data-precedence"),Oe=ve.get(Ue)||xe,Oe===xe&&ve.set(null,we),ve.set(Ue,we),this.count++,xe=rf.bind(this),we.addEventListener("load",xe),we.addEventListener("error",xe),Oe?Oe.parentNode.insertBefore(we,Oe.nextSibling):(ce=ce.nodeType===9?ce.head:ce,ce.insertBefore(we,ce.firstChild)),he.state.loading|=4}}var Hh={$$typeof:ye,Provider:null,Consumer:null,_currentValue:Fe,_currentValue2:Fe,_threadCount:0};function Tp(ce,he,ve,xe,we,Oe,Ue,We,ot){this.tag=1,this.containerInfo=ce,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Si(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Si(0),this.hiddenUpdates=Si(null),this.identifierPrefix=xe,this.onUncaughtError=we,this.onCaughtError=Oe,this.onRecoverableError=Ue,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ot,this.incompleteTransitions=new Map}function w0(ce,he,ve,xe,we,Oe,Ue,We,ot,Et,Gt,Jt){return ce=new Tp(ce,he,ve,Ue,ot,Et,Gt,Jt,We),he=1,Oe===!0&&(he|=24),Oe=Rr(3,null,null,he),ce.current=Oe,Oe.stateNode=ce,he=Ku(),he.refCount++,ce.pooledCache=he,he.refCount++,Oe.memoizedState={element:xe,isDehydrated:ve,cache:he},nh(Oe),ce}function P0(ce){return ce?(ce=Ga,ce):Ga}function R0(ce,he,ve,xe,we,Oe){we=P0(we),xe.context===null?xe.context=we:xe.pendingContext=we,xe=Xs(he),xe.payload={element:ve},Oe=Oe===void 0?null:Oe,Oe!==null&&(xe.callback=Oe),ve=va(ce,xe,he),ve!==null&&(ge(ve,ce,he),Ka(ve,ce,he))}function O0(ce,he){if(ce=ce.memoizedState,ce!==null&&ce.dehydrated!==null){var ve=ce.retryLane;ce.retryLane=ve!==0&&ve<he?ve:he}}function Gf(ce,he){O0(ce,he),(ce=ce.alternate)&&O0(ce,he)}function N0(ce){if(ce.tag===13||ce.tag===31){var he=Va(ce,67108864);he!==null&&ge(he,ce,67108864),Gf(ce,67108864)}}function D0(ce){if(ce.tag===13||ce.tag===31){var he=Br();he=_n(he);var ve=Va(ce,he);ve!==null&&ge(ve,ce,he),Gf(ce,he)}}var of=!0;function wp(ce,he,ve,xe){var we=Be.T;Be.T=null;var Oe=ze.p;try{ze.p=2,Hf(ce,he,ve,xe)}finally{ze.p=Oe,Be.T=we}}function Pp(ce,he,ve,xe){var we=Be.T;Be.T=null;var Oe=ze.p;try{ze.p=8,Hf(ce,he,ve,xe)}finally{ze.p=Oe,Be.T=we}}function Hf(ce,he,ve,xe){if(of){var we=Yf(xe);if(we===null)Rf(ce,he,xe,lf,ve),B0(ce,xe);else if(Op(we,ce,he,ve,xe))xe.stopPropagation();else if(B0(ce,xe),he&4&&-1<Rp.indexOf(ce)){for(;we!==null;){var Oe=Ve(we);if(Oe!==null)switch(Oe.tag){case 3:if(Oe=Oe.stateNode,Oe.current.memoizedState.isDehydrated){var Ue=Kt(Oe.pendingLanes);if(Ue!==0){var We=Oe;for(We.pendingLanes|=2,We.entangledLanes|=2;Ue;){var ot=1<<31-tt(Ue);We.entanglements[1]|=ot,Ue&=~ot}lo(Oe),(Zi&6)===0&&(fs=Ye()+500,Uh(0))}}break;case 31:case 13:We=Va(Oe,2),We!==null&&ge(We,Oe,2),Je(),Gf(Oe,2)}if(Oe=Yf(xe),Oe===null&&Rf(ce,he,xe,lf,ve),Oe===we)break;we=Oe}we!==null&&xe.stopPropagation()}else Rf(ce,he,xe,null,ve)}}function Yf(ce){return ce=pc(ce),Xf(ce)}var lf=null;function Xf(ce){if(lf=null,ce=Xt(ce),ce!==null){var he=ee(ce);if(he===null)ce=null;else{var ve=he.tag;if(ve===13){if(ce=te(he),ce!==null)return ce;ce=null}else if(ve===31){if(ce=ne(he),ce!==null)return ce;ce=null}else if(ve===3){if(he.stateNode.current.memoizedState.isDehydrated)return he.tag===3?he.stateNode.containerInfo:null;ce=null}else he!==ce&&(ce=null)}}return lf=ce,null}function L0(ce){switch(ce){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_t()){case dt:return 2;case yt:return 8;case Nt:case fi:return 32;case Zt:return 268435456;default:return 32}default:return 32}}var qf=!1,vl=null,_l=null,yl=null,Yh=new Map,Xh=new Map,bl=[],Rp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function B0(ce,he){switch(ce){case"focusin":case"focusout":vl=null;break;case"dragenter":case"dragleave":_l=null;break;case"mouseover":case"mouseout":yl=null;break;case"pointerover":case"pointerout":Yh.delete(he.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xh.delete(he.pointerId)}}function qh(ce,he,ve,xe,we,Oe){return ce===null||ce.nativeEvent!==Oe?(ce={blockedOn:he,domEventName:ve,eventSystemFlags:xe,nativeEvent:Oe,targetContainers:[we]},he!==null&&(he=Ve(he),he!==null&&N0(he)),ce):(ce.eventSystemFlags|=xe,he=ce.targetContainers,we!==null&&he.indexOf(we)===-1&&he.push(we),ce)}function Op(ce,he,ve,xe,we){switch(he){case"focusin":return vl=qh(vl,ce,he,ve,xe,we),!0;case"dragenter":return _l=qh(_l,ce,he,ve,xe,we),!0;case"mouseover":return yl=qh(yl,ce,he,ve,xe,we),!0;case"pointerover":var Oe=we.pointerId;return Yh.set(Oe,qh(Yh.get(Oe)||null,ce,he,ve,xe,we)),!0;case"gotpointercapture":return Oe=we.pointerId,Xh.set(Oe,qh(Xh.get(Oe)||null,ce,he,ve,xe,we)),!0}return!1}function k0(ce){var he=Xt(ce.target);if(he!==null){var ve=ee(he);if(ve!==null){if(he=ve.tag,he===13){if(he=te(ve),he!==null){ce.blockedOn=he,$n(ce.priority,function(){D0(ve)});return}}else if(he===31){if(he=ne(ve),he!==null){ce.blockedOn=he,$n(ce.priority,function(){D0(ve)});return}}else if(he===3&&ve.stateNode.current.memoizedState.isDehydrated){ce.blockedOn=ve.tag===3?ve.stateNode.containerInfo:null;return}}}ce.blockedOn=null}function cf(ce){if(ce.blockedOn!==null)return!1;for(var he=ce.targetContainers;0<he.length;){var ve=Yf(ce.nativeEvent);if(ve===null){ve=ce.nativeEvent;var xe=new ve.constructor(ve.type,ve);Ml=xe,ve.target.dispatchEvent(xe),Ml=null}else return he=Ve(ve),he!==null&&N0(he),ce.blockedOn=ve,!1;he.shift()}return!0}function I0(ce,he,ve){cf(ce)&&ve.delete(he)}function Np(){qf=!1,vl!==null&&cf(vl)&&(vl=null),_l!==null&&cf(_l)&&(_l=null),yl!==null&&cf(yl)&&(yl=null),Yh.forEach(I0),Xh.forEach(I0)}function uf(ce,he){ce.blockedOn===he&&(ce.blockedOn=null,qf||(qf=!0,G.unstable_scheduleCallback(G.unstable_NormalPriority,Np)))}var hf=null;function U0(ce){hf!==ce&&(hf=ce,G.unstable_scheduleCallback(G.unstable_NormalPriority,function(){hf===ce&&(hf=null);for(var he=0;he<ce.length;he+=3){var ve=ce[he],xe=ce[he+1],we=ce[he+2];if(typeof xe!="function"){if(Xf(xe||ve)===null)continue;break}var Oe=Ve(ve);Oe!==null&&(ce.splice(he,3),he-=3,Ph(Oe,{pending:!0,data:we,method:ve.method,action:xe},xe,we))}}))}function Au(ce){function he(ot){return uf(ot,ce)}vl!==null&&uf(vl,ce),_l!==null&&uf(_l,ce),yl!==null&&uf(yl,ce),Yh.forEach(he),Xh.forEach(he);for(var ve=0;ve<bl.length;ve++){var xe=bl[ve];xe.blockedOn===ce&&(xe.blockedOn=null)}for(;0<bl.length&&(ve=bl[0],ve.blockedOn===null);)k0(ve),ve.blockedOn===null&&bl.shift();if(ve=(ce.ownerDocument||ce).$$reactFormReplay,ve!=null)for(xe=0;xe<ve.length;xe+=3){var we=ve[xe],Oe=ve[xe+1],Ue=we[On]||null;if(typeof Oe=="function")Ue||U0(ve);else if(Ue){var We=null;if(Oe&&Oe.hasAttribute("formAction")){if(we=Oe,Ue=Oe[On]||null)We=Ue.formAction;else if(Xf(we)!==null)continue}else We=Ue.action;typeof We=="function"?ve[xe+1]=We:(ve.splice(xe,3),xe-=3),U0(ve)}}}function z0(){function ce(Oe){Oe.canIntercept&&Oe.info==="react-transition"&&Oe.intercept({handler:function(){return new Promise(function(Ue){return we=Ue})},focusReset:"manual",scroll:"manual"})}function he(){we!==null&&(we(),we=null),xe||setTimeout(ve,20)}function ve(){if(!xe&&!navigation.transition){var Oe=navigation.currentEntry;Oe&&Oe.url!=null&&navigation.navigate(Oe.url,{state:Oe.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var xe=!1,we=null;return navigation.addEventListener("navigate",ce),navigation.addEventListener("navigatesuccess",he),navigation.addEventListener("navigateerror",he),setTimeout(ve,100),function(){xe=!0,navigation.removeEventListener("navigate",ce),navigation.removeEventListener("navigatesuccess",he),navigation.removeEventListener("navigateerror",he),we!==null&&(we(),we=null)}}}function $f(ce){this._internalRoot=ce}df.prototype.render=$f.prototype.render=function(ce){var he=this._internalRoot;if(he===null)throw Error(Z(409));var ve=he.current,xe=Br();R0(ve,xe,ce,he,null,null)},df.prototype.unmount=$f.prototype.unmount=function(){var ce=this._internalRoot;if(ce!==null){this._internalRoot=null;var he=ce.containerInfo;R0(ce.current,2,null,ce,null,null),Je(),he[Ur]=null}};function df(ce){this._internalRoot=ce}df.prototype.unstable_scheduleHydration=function(ce){if(ce){var he=Bn();ce={blockedOn:null,target:ce,priority:he};for(var ve=0;ve<bl.length&&he!==0&&he<bl[ve].priority;ve++);bl.splice(ve,0,ce),ve===0&&k0(ce)}};var j0=_.version;if(j0!=="19.2.0")throw Error(Z(527,j0,"19.2.0"));ze.findDOMNode=function(ce){var he=ce._reactInternals;if(he===void 0)throw typeof ce.render=="function"?Error(Z(188)):(ce=Object.keys(ce).join(","),Error(Z(268,ce)));return ce=re(he),ce=ce!==null?oe(ce):null,ce=ce===null?null:ce.stateNode,ce};var Dp={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Be,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ff=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ff.isDisabled&&ff.supportsFiber)try{Rt=ff.inject(Dp),Pt=ff}catch{}}return reactDomClient_production.createRoot=function(ce,he){if(!Q(ce))throw Error(Z(299));var ve=!1,xe="",we=Dh,Oe=Hd,Ue=su;return he!=null&&(he.unstable_strictMode===!0&&(ve=!0),he.identifierPrefix!==void 0&&(xe=he.identifierPrefix),he.onUncaughtError!==void 0&&(we=he.onUncaughtError),he.onCaughtError!==void 0&&(Oe=he.onCaughtError),he.onRecoverableError!==void 0&&(Ue=he.onRecoverableError)),he=w0(ce,1,!1,null,null,ve,xe,null,we,Oe,Ue,z0),ce[Ur]=he.current,Pf(ce),new $f(he)},reactDomClient_production.hydrateRoot=function(ce,he,ve){if(!Q(ce))throw Error(Z(299));var xe=!1,we="",Oe=Dh,Ue=Hd,We=su,ot=null;return ve!=null&&(ve.unstable_strictMode===!0&&(xe=!0),ve.identifierPrefix!==void 0&&(we=ve.identifierPrefix),ve.onUncaughtError!==void 0&&(Oe=ve.onUncaughtError),ve.onCaughtError!==void 0&&(Ue=ve.onCaughtError),ve.onRecoverableError!==void 0&&(We=ve.onRecoverableError),ve.formState!==void 0&&(ot=ve.formState)),he=w0(ce,1,!0,he,ve??null,xe,we,ot,Oe,Ue,We,z0),he.context=P0(null),ve=he.current,xe=Br(),xe=_n(xe),we=Xs(xe),we.callback=null,va(ve,we,xe),ve=xe,he.current.lanes=ve,Ui(he,ve),lo(he),ce[Ur]=he.current,Pf(ce),new df(he)},reactDomClient_production.version="19.2.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function G(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(G)}catch(_){console.error(_)}}return G(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();class SourceLocation{constructor(_,J,Z){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=_,this.start=J,this.end=Z}static range(_,J){return J?!_||!_.loc||!J.loc||_.loc.lexer!==J.loc.lexer?null:new SourceLocation(_.loc.lexer,_.loc.start,J.loc.end):_&&_.loc}}class Token{constructor(_,J){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=_,this.loc=J}range(_,J){return new Token(J,SourceLocation.range(this,_))}}class ParseError{constructor(_,J){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var Z="KaTeX parse error: "+_,Q,ee,te=J&&J.loc;if(te&&te.start<=te.end){var ne=te.lexer.input;Q=te.start,ee=te.end,Q===ne.length?Z+=" at end of input: ":Z+=" at position "+(Q+1)+": ";var ie=ne.slice(Q,ee).replace(/[^]/g,"$&"),re;Q>15?re=""+ne.slice(Q-15,Q):re=ne.slice(0,Q);var oe;ee+15<ne.length?oe=ne.slice(ee,ee+15)+"":oe=ne.slice(ee),Z+=re+ie+oe}var se=new Error(Z);return se.name="ParseError",se.__proto__=ParseError.prototype,se.position=Q,Q!=null&&ee!=null&&(se.length=ee-Q),se.rawMessage=_,se}}ParseError.prototype.__proto__=Error.prototype;var deflt=function(_,J){return _===void 0?J:_},uppercase=/([A-Z])/g,hyphenate=function(_){return _.replace(uppercase,"-$1").toLowerCase()},ESCAPE_LOOKUP={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},ESCAPE_REGEX=/[&><"']/g;function escape(G){return String(G).replace(ESCAPE_REGEX,_=>ESCAPE_LOOKUP[_])}var getBaseElem=function G(_){return _.type==="ordgroup"||_.type==="color"?_.body.length===1?G(_.body[0]):_:_.type==="font"?G(_.body):_},isCharacterBox=function(_){var J=getBaseElem(_);return J.type==="mathord"||J.type==="textord"||J.type==="atom"},assert=function(_){if(!_)throw new Error("Expected non-null, but got "+String(_));return _},protocolFromUrl=function(_){var J=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(_);return J?J[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(J[1])?null:J[1].toLowerCase():"_relative"},utils={deflt,escape,hyphenate,getBaseElem,isCharacterBox,protocolFromUrl};class Style{constructor(_,J,Z){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=_,this.size=J,this.cramped=Z}sup(){return styles[sup[this.id]]}sub(){return styles[sub[this.id]]}fracNum(){return styles[fracNum[this.id]]}fracDen(){return styles[fracDen[this.id]]}cramp(){return styles[cramp[this.id]]}text(){return styles[text$1[this.id]]}isTight(){return this.size>=2}}var D$2=0,Dc=1,T$1=2,Tc=3,S$1=4,Sc=5,SS=6,SSc=7,styles=[new Style(D$2,0,!1),new Style(Dc,0,!0),new Style(T$1,1,!1),new Style(Tc,1,!0),new Style(S$1,2,!1),new Style(Sc,2,!0),new Style(SS,3,!1),new Style(SSc,3,!0)],sup=[S$1,Sc,S$1,Sc,SS,SSc,SS,SSc],sub=[Sc,Sc,Sc,Sc,SSc,SSc,SSc,SSc],fracNum=[T$1,Tc,S$1,Sc,SS,SSc,SS,SSc],fracDen=[Tc,Tc,Sc,Sc,SSc,SSc,SSc,SSc],cramp=[Dc,Dc,Tc,Tc,Sc,Sc,SSc,SSc],text$1=[D$2,Dc,T$1,Tc,T$1,Tc,T$1,Tc],Style$1={DISPLAY:styles[D$2],TEXT:styles[T$1],SCRIPT:styles[S$1],SCRIPTSCRIPT:styles[SS]},scriptData=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function scriptFromCodepoint(G){for(var _=0;_<scriptData.length;_++)for(var J=scriptData[_],Z=0;Z<J.blocks.length;Z++){var Q=J.blocks[Z];if(G>=Q[0]&&G<=Q[1])return J.name}return null}var allBlocks=[];scriptData.forEach(G=>G.blocks.forEach(_=>allBlocks.push(..._)));function supportedCodepoint(G){for(var _=0;_<allBlocks.length;_+=2)if(G>=allBlocks[_]&&G<=allBlocks[_+1])return!0;return!1}var hLinePad=80,sqrtMain=function(_,J){return"M95,"+(622+_+J)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+_/2.075+" -"+_+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+_)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+_)+" "+J+"h400000v"+(40+_)+"h-400000z"},sqrtSize1=function(_,J){return"M263,"+(601+_+J)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+_/2.084+" -"+_+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+_)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+_)+" "+J+"h400000v"+(40+_)+"h-400000z"},sqrtSize2=function(_,J){return"M983 "+(10+_+J)+`
l`+_/3.13+" -"+_+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+_)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+_)+" "+J+"h400000v"+(40+_)+"h-400000z"},sqrtSize3=function(_,J){return"M424,"+(2398+_+J)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+_/4.223+" -"+_+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+_)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+_)+" "+J+`
h400000v`+(40+_)+"h-400000z"},sqrtSize4=function(_,J){return"M473,"+(2713+_+J)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+_/5.298+" -"+_+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+_)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+_)+" "+J+"h400000v"+(40+_)+"H1017.7z"},phasePath=function(_){var J=_/2;return"M400000 "+_+" H0 L"+J+" 0 l65 45 L145 "+(_-80)+" H400000z"},sqrtTall=function(_,J,Z){var Q=Z-54-J-_;return"M702 "+(_+J)+"H400000"+(40+_)+`
H742v`+Q+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+J+"H400000v"+(40+_)+"H742z"},sqrtPath=function(_,J,Z){J=1e3*J;var Q="";switch(_){case"sqrtMain":Q=sqrtMain(J,hLinePad);break;case"sqrtSize1":Q=sqrtSize1(J,hLinePad);break;case"sqrtSize2":Q=sqrtSize2(J,hLinePad);break;case"sqrtSize3":Q=sqrtSize3(J,hLinePad);break;case"sqrtSize4":Q=sqrtSize4(J,hLinePad);break;case"sqrtTall":Q=sqrtTall(J,hLinePad,Z)}return Q},innerPath=function(_,J){switch(_){case"":return"M291 0 H417 V"+J+" H291z M291 0 H417 V"+J+" H291z";case"":return"M145 0 H188 V"+J+" H145z M145 0 H188 V"+J+" H145z";case"":return"M145 0 H188 V"+J+" H145z M145 0 H188 V"+J+" H145z"+("M367 0 H410 V"+J+" H367z M367 0 H410 V"+J+" H367z");case"":return"M457 0 H583 V"+J+" H457z M457 0 H583 V"+J+" H457z";case"":return"M319 0 H403 V"+J+" H319z M319 0 H403 V"+J+" H319z";case"":return"M263 0 H347 V"+J+" H263z M263 0 H347 V"+J+" H263z";case"":return"M384 0 H504 V"+J+" H384z M384 0 H504 V"+J+" H384z";case"":return"M312 0 H355 V"+J+" H312z M312 0 H355 V"+J+" H312z";case"":return"M257 0 H300 V"+J+" H257z M257 0 H300 V"+J+" H257z"+("M478 0 H521 V"+J+" H478z M478 0 H521 V"+J+" H478z");default:return""}},path={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},tallDelim=function(_,J){switch(_){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+J+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+J+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+J+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+J+" v1759 h84z";case"vert":return"M145 15 v585 v"+J+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-J+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+J+" v585 h43z";case"doublevert":return"M145 15 v585 v"+J+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-J+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+J+` v585 h43z
M367 15 v585 v`+J+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-J+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+J+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+J+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+J+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+J+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+J+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+J+` v602 h84z
M403 1759 V0 H319 V1759 v`+J+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+J+` v602 h84z
M347 1759 V0 h-84 V1759 v`+J+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(J+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(J+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(J+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(J+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class DocumentFragment{constructor(_){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=_,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(_){return this.classes.includes(_)}toNode(){for(var _=document.createDocumentFragment(),J=0;J<this.children.length;J++)_.appendChild(this.children[J].toNode());return _}toMarkup(){for(var _="",J=0;J<this.children.length;J++)_+=this.children[J].toMarkup();return _}toText(){var _=J=>J.toText();return this.children.map(_).join("")}}var fontMetricsData={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},extraCharacterMap={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function getCharacterMetrics(G,_,J){if(!fontMetricsData[_])throw new Error("Font metrics not found for font: "+_+".");var Z=G.charCodeAt(0),Q=fontMetricsData[_][Z];if(!Q&&G[0]in extraCharacterMap&&(Z=extraCharacterMap[G[0]].charCodeAt(0),Q=fontMetricsData[_][Z]),!Q&&J==="text"&&supportedCodepoint(Z)&&(Q=fontMetricsData[_][77]),Q)return{depth:Q[0],height:Q[1],italic:Q[2],skew:Q[3],width:Q[4]}}var ptPerUnit={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},relativeUnit={ex:!0,em:!0,mu:!0},validUnit=function(_){return typeof _!="string"&&(_=_.unit),_ in ptPerUnit||_ in relativeUnit||_==="ex"},calculateSize=function(_,J){var Z;if(_.unit in ptPerUnit)Z=ptPerUnit[_.unit]/J.fontMetrics().ptPerEm/J.sizeMultiplier;else if(_.unit==="mu")Z=J.fontMetrics().cssEmPerMu;else{var Q;if(J.style.isTight()?Q=J.havingStyle(J.style.text()):Q=J,_.unit==="ex")Z=Q.fontMetrics().xHeight;else if(_.unit==="em")Z=Q.fontMetrics().quad;else throw new ParseError("Invalid unit: '"+_.unit+"'");Q!==J&&(Z*=Q.sizeMultiplier/J.sizeMultiplier)}return Math.min(_.number*Z,J.maxSize)},makeEm=function(_){return+_.toFixed(4)+"em"},createClass=function(_){return _.filter(J=>J).join(" ")},initNode=function(_,J,Z){if(this.classes=_||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=Z||{},J){J.style.isTight()&&this.classes.push("mtight");var Q=J.getColor();Q&&(this.style.color=Q)}},toNode=function(_){var J=document.createElement(_);J.className=createClass(this.classes);for(var Z in this.style)this.style.hasOwnProperty(Z)&&(J.style[Z]=this.style[Z]);for(var Q in this.attributes)this.attributes.hasOwnProperty(Q)&&J.setAttribute(Q,this.attributes[Q]);for(var ee=0;ee<this.children.length;ee++)J.appendChild(this.children[ee].toNode());return J},invalidAttributeNameRegex=/[\s"'>/=\x00-\x1f]/,toMarkup=function(_){var J="<"+_;this.classes.length&&(J+=' class="'+utils.escape(createClass(this.classes))+'"');var Z="";for(var Q in this.style)this.style.hasOwnProperty(Q)&&(Z+=utils.hyphenate(Q)+":"+this.style[Q]+";");Z&&(J+=' style="'+utils.escape(Z)+'"');for(var ee in this.attributes)if(this.attributes.hasOwnProperty(ee)){if(invalidAttributeNameRegex.test(ee))throw new ParseError("Invalid attribute name '"+ee+"'");J+=" "+ee+'="'+utils.escape(this.attributes[ee])+'"'}J+=">";for(var te=0;te<this.children.length;te++)J+=this.children[te].toMarkup();return J+="</"+_+">",J};class Span{constructor(_,J,Z,Q){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,initNode.call(this,_,Z,Q),this.children=J||[]}setAttribute(_,J){this.attributes[_]=J}hasClass(_){return this.classes.includes(_)}toNode(){return toNode.call(this,"span")}toMarkup(){return toMarkup.call(this,"span")}}class Anchor{constructor(_,J,Z,Q){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,initNode.call(this,J,Q),this.children=Z||[],this.setAttribute("href",_)}setAttribute(_,J){this.attributes[_]=J}hasClass(_){return this.classes.includes(_)}toNode(){return toNode.call(this,"a")}toMarkup(){return toMarkup.call(this,"a")}}class Img{constructor(_,J,Z){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=J,this.src=_,this.classes=["mord"],this.style=Z}hasClass(_){return this.classes.includes(_)}toNode(){var _=document.createElement("img");_.src=this.src,_.alt=this.alt,_.className="mord";for(var J in this.style)this.style.hasOwnProperty(J)&&(_.style[J]=this.style[J]);return _}toMarkup(){var _='<img src="'+utils.escape(this.src)+'"'+(' alt="'+utils.escape(this.alt)+'"'),J="";for(var Z in this.style)this.style.hasOwnProperty(Z)&&(J+=utils.hyphenate(Z)+":"+this.style[Z]+";");return J&&(_+=' style="'+utils.escape(J)+'"'),_+="'/>",_}}var iCombinations={:"",:"",:"",:""};class SymbolNode{constructor(_,J,Z,Q,ee,te,ne,ie){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=_,this.height=J||0,this.depth=Z||0,this.italic=Q||0,this.skew=ee||0,this.width=te||0,this.classes=ne||[],this.style=ie||{},this.maxFontSize=0;var re=scriptFromCodepoint(this.text.charCodeAt(0));re&&this.classes.push(re+"_fallback"),/[]/.test(this.text)&&(this.text=iCombinations[this.text])}hasClass(_){return this.classes.includes(_)}toNode(){var _=document.createTextNode(this.text),J=null;this.italic>0&&(J=document.createElement("span"),J.style.marginRight=makeEm(this.italic)),this.classes.length>0&&(J=J||document.createElement("span"),J.className=createClass(this.classes));for(var Z in this.style)this.style.hasOwnProperty(Z)&&(J=J||document.createElement("span"),J.style[Z]=this.style[Z]);return J?(J.appendChild(_),J):_}toMarkup(){var _=!1,J="<span";this.classes.length&&(_=!0,J+=' class="',J+=utils.escape(createClass(this.classes)),J+='"');var Z="";this.italic>0&&(Z+="margin-right:"+this.italic+"em;");for(var Q in this.style)this.style.hasOwnProperty(Q)&&(Z+=utils.hyphenate(Q)+":"+this.style[Q]+";");Z&&(_=!0,J+=' style="'+utils.escape(Z)+'"');var ee=utils.escape(this.text);return _?(J+=">",J+=ee,J+="</span>",J):ee}}class SvgNode{constructor(_,J){this.children=void 0,this.attributes=void 0,this.children=_||[],this.attributes=J||{}}toNode(){var _="http://www.w3.org/2000/svg",J=document.createElementNS(_,"svg");for(var Z in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,Z)&&J.setAttribute(Z,this.attributes[Z]);for(var Q=0;Q<this.children.length;Q++)J.appendChild(this.children[Q].toNode());return J}toMarkup(){var _='<svg xmlns="http://www.w3.org/2000/svg"';for(var J in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,J)&&(_+=" "+J+'="'+utils.escape(this.attributes[J])+'"');_+=">";for(var Z=0;Z<this.children.length;Z++)_+=this.children[Z].toMarkup();return _+="</svg>",_}}class PathNode{constructor(_,J){this.pathName=void 0,this.alternate=void 0,this.pathName=_,this.alternate=J}toNode(){var _="http://www.w3.org/2000/svg",J=document.createElementNS(_,"path");return this.alternate?J.setAttribute("d",this.alternate):J.setAttribute("d",path[this.pathName]),J}toMarkup(){return this.alternate?'<path d="'+utils.escape(this.alternate)+'"/>':'<path d="'+utils.escape(path[this.pathName])+'"/>'}}class LineNode{constructor(_){this.attributes=void 0,this.attributes=_||{}}toNode(){var _="http://www.w3.org/2000/svg",J=document.createElementNS(_,"line");for(var Z in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,Z)&&J.setAttribute(Z,this.attributes[Z]);return J}toMarkup(){var _="<line";for(var J in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,J)&&(_+=" "+J+'="'+utils.escape(this.attributes[J])+'"');return _+="/>",_}}function assertSymbolDomNode(G){if(G instanceof SymbolNode)return G;throw new Error("Expected symbolNode but got "+String(G)+".")}function assertSpan(G){if(G instanceof Span)return G;throw new Error("Expected span<HtmlDomNode> but got "+String(G)+".")}var NON_ATOMS={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},symbols={math:{},text:{}};function defineSymbol(G,_,J,Z,Q,ee){symbols[G][Q]={font:_,group:J,replace:Z},ee&&Z&&(symbols[G][Z]=symbols[G][Q])}var math$2="math",text="text",main="main",ams="ams",accent="accent-token",bin="bin",close="close",inner="inner",mathord="mathord",op="op-token",open="open",punct="punct",rel="rel",spacing="spacing",textord="textord";defineSymbol(math$2,main,rel,"","\\equiv",!0);defineSymbol(math$2,main,rel,"","\\prec",!0);defineSymbol(math$2,main,rel,"","\\succ",!0);defineSymbol(math$2,main,rel,"","\\sim",!0);defineSymbol(math$2,main,rel,"","\\perp");defineSymbol(math$2,main,rel,"","\\preceq",!0);defineSymbol(math$2,main,rel,"","\\succeq",!0);defineSymbol(math$2,main,rel,"","\\simeq",!0);defineSymbol(math$2,main,rel,"","\\mid",!0);defineSymbol(math$2,main,rel,"","\\ll",!0);defineSymbol(math$2,main,rel,"","\\gg",!0);defineSymbol(math$2,main,rel,"","\\asymp",!0);defineSymbol(math$2,main,rel,"","\\parallel");defineSymbol(math$2,main,rel,"","\\bowtie",!0);defineSymbol(math$2,main,rel,"","\\smile",!0);defineSymbol(math$2,main,rel,"","\\sqsubseteq",!0);defineSymbol(math$2,main,rel,"","\\sqsupseteq",!0);defineSymbol(math$2,main,rel,"","\\doteq",!0);defineSymbol(math$2,main,rel,"","\\frown",!0);defineSymbol(math$2,main,rel,"","\\ni",!0);defineSymbol(math$2,main,rel,"","\\propto",!0);defineSymbol(math$2,main,rel,"","\\vdash",!0);defineSymbol(math$2,main,rel,"","\\dashv",!0);defineSymbol(math$2,main,rel,"","\\owns");defineSymbol(math$2,main,punct,".","\\ldotp");defineSymbol(math$2,main,punct,"","\\cdotp");defineSymbol(math$2,main,textord,"#","\\#");defineSymbol(text,main,textord,"#","\\#");defineSymbol(math$2,main,textord,"&","\\&");defineSymbol(text,main,textord,"&","\\&");defineSymbol(math$2,main,textord,"","\\aleph",!0);defineSymbol(math$2,main,textord,"","\\forall",!0);defineSymbol(math$2,main,textord,"","\\hbar",!0);defineSymbol(math$2,main,textord,"","\\exists",!0);defineSymbol(math$2,main,textord,"","\\nabla",!0);defineSymbol(math$2,main,textord,"","\\flat",!0);defineSymbol(math$2,main,textord,"","\\ell",!0);defineSymbol(math$2,main,textord,"","\\natural",!0);defineSymbol(math$2,main,textord,"","\\clubsuit",!0);defineSymbol(math$2,main,textord,"","\\wp",!0);defineSymbol(math$2,main,textord,"","\\sharp",!0);defineSymbol(math$2,main,textord,"","\\diamondsuit",!0);defineSymbol(math$2,main,textord,"","\\Re",!0);defineSymbol(math$2,main,textord,"","\\heartsuit",!0);defineSymbol(math$2,main,textord,"","\\Im",!0);defineSymbol(math$2,main,textord,"","\\spadesuit",!0);defineSymbol(math$2,main,textord,"","\\S",!0);defineSymbol(text,main,textord,"","\\S");defineSymbol(math$2,main,textord,"","\\P",!0);defineSymbol(text,main,textord,"","\\P");defineSymbol(math$2,main,textord,"","\\dag");defineSymbol(text,main,textord,"","\\dag");defineSymbol(text,main,textord,"","\\textdagger");defineSymbol(math$2,main,textord,"","\\ddag");defineSymbol(text,main,textord,"","\\ddag");defineSymbol(text,main,textord,"","\\textdaggerdbl");defineSymbol(math$2,main,close,"","\\rmoustache",!0);defineSymbol(math$2,main,open,"","\\lmoustache",!0);defineSymbol(math$2,main,close,"","\\rgroup",!0);defineSymbol(math$2,main,open,"","\\lgroup",!0);defineSymbol(math$2,main,bin,"","\\mp",!0);defineSymbol(math$2,main,bin,"","\\ominus",!0);defineSymbol(math$2,main,bin,"","\\uplus",!0);defineSymbol(math$2,main,bin,"","\\sqcap",!0);defineSymbol(math$2,main,bin,"","\\ast");defineSymbol(math$2,main,bin,"","\\sqcup",!0);defineSymbol(math$2,main,bin,"","\\bigcirc",!0);defineSymbol(math$2,main,bin,"","\\bullet",!0);defineSymbol(math$2,main,bin,"","\\ddagger");defineSymbol(math$2,main,bin,"","\\wr",!0);defineSymbol(math$2,main,bin,"","\\amalg");defineSymbol(math$2,main,bin,"&","\\And");defineSymbol(math$2,main,rel,"","\\longleftarrow",!0);defineSymbol(math$2,main,rel,"","\\Leftarrow",!0);defineSymbol(math$2,main,rel,"","\\Longleftarrow",!0);defineSymbol(math$2,main,rel,"","\\longrightarrow",!0);defineSymbol(math$2,main,rel,"","\\Rightarrow",!0);defineSymbol(math$2,main,rel,"","\\Longrightarrow",!0);defineSymbol(math$2,main,rel,"","\\leftrightarrow",!0);defineSymbol(math$2,main,rel,"","\\longleftrightarrow",!0);defineSymbol(math$2,main,rel,"","\\Leftrightarrow",!0);defineSymbol(math$2,main,rel,"","\\Longleftrightarrow",!0);defineSymbol(math$2,main,rel,"","\\mapsto",!0);defineSymbol(math$2,main,rel,"","\\longmapsto",!0);defineSymbol(math$2,main,rel,"","\\nearrow",!0);defineSymbol(math$2,main,rel,"","\\hookleftarrow",!0);defineSymbol(math$2,main,rel,"","\\hookrightarrow",!0);defineSymbol(math$2,main,rel,"","\\searrow",!0);defineSymbol(math$2,main,rel,"","\\leftharpoonup",!0);defineSymbol(math$2,main,rel,"","\\rightharpoonup",!0);defineSymbol(math$2,main,rel,"","\\swarrow",!0);defineSymbol(math$2,main,rel,"","\\leftharpoondown",!0);defineSymbol(math$2,main,rel,"","\\rightharpoondown",!0);defineSymbol(math$2,main,rel,"","\\nwarrow",!0);defineSymbol(math$2,main,rel,"","\\rightleftharpoons",!0);defineSymbol(math$2,ams,rel,"","\\nless",!0);defineSymbol(math$2,ams,rel,"","\\@nleqslant");defineSymbol(math$2,ams,rel,"","\\@nleqq");defineSymbol(math$2,ams,rel,"","\\lneq",!0);defineSymbol(math$2,ams,rel,"","\\lneqq",!0);defineSymbol(math$2,ams,rel,"","\\@lvertneqq");defineSymbol(math$2,ams,rel,"","\\lnsim",!0);defineSymbol(math$2,ams,rel,"","\\lnapprox",!0);defineSymbol(math$2,ams,rel,"","\\nprec",!0);defineSymbol(math$2,ams,rel,"","\\npreceq",!0);defineSymbol(math$2,ams,rel,"","\\precnsim",!0);defineSymbol(math$2,ams,rel,"","\\precnapprox",!0);defineSymbol(math$2,ams,rel,"","\\nsim",!0);defineSymbol(math$2,ams,rel,"","\\@nshortmid");defineSymbol(math$2,ams,rel,"","\\nmid",!0);defineSymbol(math$2,ams,rel,"","\\nvdash",!0);defineSymbol(math$2,ams,rel,"","\\nvDash",!0);defineSymbol(math$2,ams,rel,"","\\ntriangleleft");defineSymbol(math$2,ams,rel,"","\\ntrianglelefteq",!0);defineSymbol(math$2,ams,rel,"","\\subsetneq",!0);defineSymbol(math$2,ams,rel,"","\\@varsubsetneq");defineSymbol(math$2,ams,rel,"","\\subsetneqq",!0);defineSymbol(math$2,ams,rel,"","\\@varsubsetneqq");defineSymbol(math$2,ams,rel,"","\\ngtr",!0);defineSymbol(math$2,ams,rel,"","\\@ngeqslant");defineSymbol(math$2,ams,rel,"","\\@ngeqq");defineSymbol(math$2,ams,rel,"","\\gneq",!0);defineSymbol(math$2,ams,rel,"","\\gneqq",!0);defineSymbol(math$2,ams,rel,"","\\@gvertneqq");defineSymbol(math$2,ams,rel,"","\\gnsim",!0);defineSymbol(math$2,ams,rel,"","\\gnapprox",!0);defineSymbol(math$2,ams,rel,"","\\nsucc",!0);defineSymbol(math$2,ams,rel,"","\\nsucceq",!0);defineSymbol(math$2,ams,rel,"","\\succnsim",!0);defineSymbol(math$2,ams,rel,"","\\succnapprox",!0);defineSymbol(math$2,ams,rel,"","\\ncong",!0);defineSymbol(math$2,ams,rel,"","\\@nshortparallel");defineSymbol(math$2,ams,rel,"","\\nparallel",!0);defineSymbol(math$2,ams,rel,"","\\nVDash",!0);defineSymbol(math$2,ams,rel,"","\\ntriangleright");defineSymbol(math$2,ams,rel,"","\\ntrianglerighteq",!0);defineSymbol(math$2,ams,rel,"","\\@nsupseteqq");defineSymbol(math$2,ams,rel,"","\\supsetneq",!0);defineSymbol(math$2,ams,rel,"","\\@varsupsetneq");defineSymbol(math$2,ams,rel,"","\\supsetneqq",!0);defineSymbol(math$2,ams,rel,"","\\@varsupsetneqq");defineSymbol(math$2,ams,rel,"","\\nVdash",!0);defineSymbol(math$2,ams,rel,"","\\precneqq",!0);defineSymbol(math$2,ams,rel,"","\\succneqq",!0);defineSymbol(math$2,ams,rel,"","\\@nsubseteqq");defineSymbol(math$2,ams,bin,"","\\unlhd");defineSymbol(math$2,ams,bin,"","\\unrhd");defineSymbol(math$2,ams,rel,"","\\nleftarrow",!0);defineSymbol(math$2,ams,rel,"","\\nrightarrow",!0);defineSymbol(math$2,ams,rel,"","\\nLeftarrow",!0);defineSymbol(math$2,ams,rel,"","\\nRightarrow",!0);defineSymbol(math$2,ams,rel,"","\\nleftrightarrow",!0);defineSymbol(math$2,ams,rel,"","\\nLeftrightarrow",!0);defineSymbol(math$2,ams,rel,"","\\vartriangle");defineSymbol(math$2,ams,textord,"","\\hslash");defineSymbol(math$2,ams,textord,"","\\triangledown");defineSymbol(math$2,ams,textord,"","\\lozenge");defineSymbol(math$2,ams,textord,"","\\circledS");defineSymbol(math$2,ams,textord,"","\\circledR");defineSymbol(text,ams,textord,"","\\circledR");defineSymbol(math$2,ams,textord,"","\\measuredangle",!0);defineSymbol(math$2,ams,textord,"","\\nexists");defineSymbol(math$2,ams,textord,"","\\mho");defineSymbol(math$2,ams,textord,"","\\Finv",!0);defineSymbol(math$2,ams,textord,"","\\Game",!0);defineSymbol(math$2,ams,textord,"","\\backprime");defineSymbol(math$2,ams,textord,"","\\blacktriangle");defineSymbol(math$2,ams,textord,"","\\blacktriangledown");defineSymbol(math$2,ams,textord,"","\\blacksquare");defineSymbol(math$2,ams,textord,"","\\blacklozenge");defineSymbol(math$2,ams,textord,"","\\bigstar");defineSymbol(math$2,ams,textord,"","\\sphericalangle",!0);defineSymbol(math$2,ams,textord,"","\\complement",!0);defineSymbol(math$2,ams,textord,"","\\eth",!0);defineSymbol(text,main,textord,"","");defineSymbol(math$2,ams,textord,"","\\diagup");defineSymbol(math$2,ams,textord,"","\\diagdown");defineSymbol(math$2,ams,textord,"","\\square");defineSymbol(math$2,ams,textord,"","\\Box");defineSymbol(math$2,ams,textord,"","\\Diamond");defineSymbol(math$2,ams,textord,"","\\yen",!0);defineSymbol(text,ams,textord,"","\\yen",!0);defineSymbol(math$2,ams,textord,"","\\checkmark",!0);defineSymbol(text,ams,textord,"","\\checkmark");defineSymbol(math$2,ams,textord,"","\\beth",!0);defineSymbol(math$2,ams,textord,"","\\daleth",!0);defineSymbol(math$2,ams,textord,"","\\gimel",!0);defineSymbol(math$2,ams,textord,"","\\digamma",!0);defineSymbol(math$2,ams,textord,"","\\varkappa");defineSymbol(math$2,ams,open,"","\\@ulcorner",!0);defineSymbol(math$2,ams,close,"","\\@urcorner",!0);defineSymbol(math$2,ams,open,"","\\@llcorner",!0);defineSymbol(math$2,ams,close,"","\\@lrcorner",!0);defineSymbol(math$2,ams,rel,"","\\leqq",!0);defineSymbol(math$2,ams,rel,"","\\leqslant",!0);defineSymbol(math$2,ams,rel,"","\\eqslantless",!0);defineSymbol(math$2,ams,rel,"","\\lesssim",!0);defineSymbol(math$2,ams,rel,"","\\lessapprox",!0);defineSymbol(math$2,ams,rel,"","\\approxeq",!0);defineSymbol(math$2,ams,bin,"","\\lessdot");defineSymbol(math$2,ams,rel,"","\\lll",!0);defineSymbol(math$2,ams,rel,"","\\lessgtr",!0);defineSymbol(math$2,ams,rel,"","\\lesseqgtr",!0);defineSymbol(math$2,ams,rel,"","\\lesseqqgtr",!0);defineSymbol(math$2,ams,rel,"","\\doteqdot");defineSymbol(math$2,ams,rel,"","\\risingdotseq",!0);defineSymbol(math$2,ams,rel,"","\\fallingdotseq",!0);defineSymbol(math$2,ams,rel,"","\\backsim",!0);defineSymbol(math$2,ams,rel,"","\\backsimeq",!0);defineSymbol(math$2,ams,rel,"","\\subseteqq",!0);defineSymbol(math$2,ams,rel,"","\\Subset",!0);defineSymbol(math$2,ams,rel,"","\\sqsubset",!0);defineSymbol(math$2,ams,rel,"","\\preccurlyeq",!0);defineSymbol(math$2,ams,rel,"","\\curlyeqprec",!0);defineSymbol(math$2,ams,rel,"","\\precsim",!0);defineSymbol(math$2,ams,rel,"","\\precapprox",!0);defineSymbol(math$2,ams,rel,"","\\vartriangleleft");defineSymbol(math$2,ams,rel,"","\\trianglelefteq");defineSymbol(math$2,ams,rel,"","\\vDash",!0);defineSymbol(math$2,ams,rel,"","\\Vvdash",!0);defineSymbol(math$2,ams,rel,"","\\smallsmile");defineSymbol(math$2,ams,rel,"","\\smallfrown");defineSymbol(math$2,ams,rel,"","\\bumpeq",!0);defineSymbol(math$2,ams,rel,"","\\Bumpeq",!0);defineSymbol(math$2,ams,rel,"","\\geqq",!0);defineSymbol(math$2,ams,rel,"","\\geqslant",!0);defineSymbol(math$2,ams,rel,"","\\eqslantgtr",!0);defineSymbol(math$2,ams,rel,"","\\gtrsim",!0);defineSymbol(math$2,ams,rel,"","\\gtrapprox",!0);defineSymbol(math$2,ams,bin,"","\\gtrdot");defineSymbol(math$2,ams,rel,"","\\ggg",!0);defineSymbol(math$2,ams,rel,"","\\gtrless",!0);defineSymbol(math$2,ams,rel,"","\\gtreqless",!0);defineSymbol(math$2,ams,rel,"","\\gtreqqless",!0);defineSymbol(math$2,ams,rel,"","\\eqcirc",!0);defineSymbol(math$2,ams,rel,"","\\circeq",!0);defineSymbol(math$2,ams,rel,"","\\triangleq",!0);defineSymbol(math$2,ams,rel,"","\\thicksim");defineSymbol(math$2,ams,rel,"","\\thickapprox");defineSymbol(math$2,ams,rel,"","\\supseteqq",!0);defineSymbol(math$2,ams,rel,"","\\Supset",!0);defineSymbol(math$2,ams,rel,"","\\sqsupset",!0);defineSymbol(math$2,ams,rel,"","\\succcurlyeq",!0);defineSymbol(math$2,ams,rel,"","\\curlyeqsucc",!0);defineSymbol(math$2,ams,rel,"","\\succsim",!0);defineSymbol(math$2,ams,rel,"","\\succapprox",!0);defineSymbol(math$2,ams,rel,"","\\vartriangleright");defineSymbol(math$2,ams,rel,"","\\trianglerighteq");defineSymbol(math$2,ams,rel,"","\\Vdash",!0);defineSymbol(math$2,ams,rel,"","\\shortmid");defineSymbol(math$2,ams,rel,"","\\shortparallel");defineSymbol(math$2,ams,rel,"","\\between",!0);defineSymbol(math$2,ams,rel,"","\\pitchfork",!0);defineSymbol(math$2,ams,rel,"","\\varpropto");defineSymbol(math$2,ams,rel,"","\\blacktriangleleft");defineSymbol(math$2,ams,rel,"","\\therefore",!0);defineSymbol(math$2,ams,rel,"","\\backepsilon");defineSymbol(math$2,ams,rel,"","\\blacktriangleright");defineSymbol(math$2,ams,rel,"","\\because",!0);defineSymbol(math$2,ams,rel,"","\\llless");defineSymbol(math$2,ams,rel,"","\\gggtr");defineSymbol(math$2,ams,bin,"","\\lhd");defineSymbol(math$2,ams,bin,"","\\rhd");defineSymbol(math$2,ams,rel,"","\\eqsim",!0);defineSymbol(math$2,main,rel,"","\\Join");defineSymbol(math$2,ams,rel,"","\\Doteq",!0);defineSymbol(math$2,ams,bin,"","\\dotplus",!0);defineSymbol(math$2,ams,bin,"","\\smallsetminus");defineSymbol(math$2,ams,bin,"","\\Cap",!0);defineSymbol(math$2,ams,bin,"","\\Cup",!0);defineSymbol(math$2,ams,bin,"","\\doublebarwedge",!0);defineSymbol(math$2,ams,bin,"","\\boxminus",!0);defineSymbol(math$2,ams,bin,"","\\boxplus",!0);defineSymbol(math$2,ams,bin,"","\\divideontimes",!0);defineSymbol(math$2,ams,bin,"","\\ltimes",!0);defineSymbol(math$2,ams,bin,"","\\rtimes",!0);defineSymbol(math$2,ams,bin,"","\\leftthreetimes",!0);defineSymbol(math$2,ams,bin,"","\\rightthreetimes",!0);defineSymbol(math$2,ams,bin,"","\\curlywedge",!0);defineSymbol(math$2,ams,bin,"","\\curlyvee",!0);defineSymbol(math$2,ams,bin,"","\\circleddash",!0);defineSymbol(math$2,ams,bin,"","\\circledast",!0);defineSymbol(math$2,ams,bin,"","\\centerdot");defineSymbol(math$2,ams,bin,"","\\intercal",!0);defineSymbol(math$2,ams,bin,"","\\doublecap");defineSymbol(math$2,ams,bin,"","\\doublecup");defineSymbol(math$2,ams,bin,"","\\boxtimes",!0);defineSymbol(math$2,ams,rel,"","\\dashrightarrow",!0);defineSymbol(math$2,ams,rel,"","\\dashleftarrow",!0);defineSymbol(math$2,ams,rel,"","\\leftleftarrows",!0);defineSymbol(math$2,ams,rel,"","\\leftrightarrows",!0);defineSymbol(math$2,ams,rel,"","\\Lleftarrow",!0);defineSymbol(math$2,ams,rel,"","\\twoheadleftarrow",!0);defineSymbol(math$2,ams,rel,"","\\leftarrowtail",!0);defineSymbol(math$2,ams,rel,"","\\looparrowleft",!0);defineSymbol(math$2,ams,rel,"","\\leftrightharpoons",!0);defineSymbol(math$2,ams,rel,"","\\curvearrowleft",!0);defineSymbol(math$2,ams,rel,"","\\circlearrowleft",!0);defineSymbol(math$2,ams,rel,"","\\Lsh",!0);defineSymbol(math$2,ams,rel,"","\\upuparrows",!0);defineSymbol(math$2,ams,rel,"","\\upharpoonleft",!0);defineSymbol(math$2,ams,rel,"","\\downharpoonleft",!0);defineSymbol(math$2,main,rel,"","\\origof",!0);defineSymbol(math$2,main,rel,"","\\imageof",!0);defineSymbol(math$2,ams,rel,"","\\multimap",!0);defineSymbol(math$2,ams,rel,"","\\leftrightsquigarrow",!0);defineSymbol(math$2,ams,rel,"","\\rightrightarrows",!0);defineSymbol(math$2,ams,rel,"","\\rightleftarrows",!0);defineSymbol(math$2,ams,rel,"","\\twoheadrightarrow",!0);defineSymbol(math$2,ams,rel,"","\\rightarrowtail",!0);defineSymbol(math$2,ams,rel,"","\\looparrowright",!0);defineSymbol(math$2,ams,rel,"","\\curvearrowright",!0);defineSymbol(math$2,ams,rel,"","\\circlearrowright",!0);defineSymbol(math$2,ams,rel,"","\\Rsh",!0);defineSymbol(math$2,ams,rel,"","\\downdownarrows",!0);defineSymbol(math$2,ams,rel,"","\\upharpoonright",!0);defineSymbol(math$2,ams,rel,"","\\downharpoonright",!0);defineSymbol(math$2,ams,rel,"","\\rightsquigarrow",!0);defineSymbol(math$2,ams,rel,"","\\leadsto");defineSymbol(math$2,ams,rel,"","\\Rrightarrow",!0);defineSymbol(math$2,ams,rel,"","\\restriction");defineSymbol(math$2,main,textord,"","`");defineSymbol(math$2,main,textord,"$","\\$");defineSymbol(text,main,textord,"$","\\$");defineSymbol(text,main,textord,"$","\\textdollar");defineSymbol(math$2,main,textord,"%","\\%");defineSymbol(text,main,textord,"%","\\%");defineSymbol(math$2,main,textord,"_","\\_");defineSymbol(text,main,textord,"_","\\_");defineSymbol(text,main,textord,"_","\\textunderscore");defineSymbol(math$2,main,textord,"","\\angle",!0);defineSymbol(math$2,main,textord,"","\\infty",!0);defineSymbol(math$2,main,textord,"","\\prime");defineSymbol(math$2,main,textord,"","\\triangle");defineSymbol(math$2,main,textord,"","\\Gamma",!0);defineSymbol(math$2,main,textord,"","\\Delta",!0);defineSymbol(math$2,main,textord,"","\\Theta",!0);defineSymbol(math$2,main,textord,"","\\Lambda",!0);defineSymbol(math$2,main,textord,"","\\Xi",!0);defineSymbol(math$2,main,textord,"","\\Pi",!0);defineSymbol(math$2,main,textord,"","\\Sigma",!0);defineSymbol(math$2,main,textord,"","\\Upsilon",!0);defineSymbol(math$2,main,textord,"","\\Phi",!0);defineSymbol(math$2,main,textord,"","\\Psi",!0);defineSymbol(math$2,main,textord,"","\\Omega",!0);defineSymbol(math$2,main,textord,"A","");defineSymbol(math$2,main,textord,"B","");defineSymbol(math$2,main,textord,"E","");defineSymbol(math$2,main,textord,"Z","");defineSymbol(math$2,main,textord,"H","");defineSymbol(math$2,main,textord,"I","");defineSymbol(math$2,main,textord,"K","");defineSymbol(math$2,main,textord,"M","");defineSymbol(math$2,main,textord,"N","");defineSymbol(math$2,main,textord,"O","");defineSymbol(math$2,main,textord,"P","");defineSymbol(math$2,main,textord,"T","");defineSymbol(math$2,main,textord,"X","");defineSymbol(math$2,main,textord,"","\\neg",!0);defineSymbol(math$2,main,textord,"","\\lnot");defineSymbol(math$2,main,textord,"","\\top");defineSymbol(math$2,main,textord,"","\\bot");defineSymbol(math$2,main,textord,"","\\emptyset");defineSymbol(math$2,ams,textord,"","\\varnothing");defineSymbol(math$2,main,mathord,"","\\alpha",!0);defineSymbol(math$2,main,mathord,"","\\beta",!0);defineSymbol(math$2,main,mathord,"","\\gamma",!0);defineSymbol(math$2,main,mathord,"","\\delta",!0);defineSymbol(math$2,main,mathord,"","\\epsilon",!0);defineSymbol(math$2,main,mathord,"","\\zeta",!0);defineSymbol(math$2,main,mathord,"","\\eta",!0);defineSymbol(math$2,main,mathord,"","\\theta",!0);defineSymbol(math$2,main,mathord,"","\\iota",!0);defineSymbol(math$2,main,mathord,"","\\kappa",!0);defineSymbol(math$2,main,mathord,"","\\lambda",!0);defineSymbol(math$2,main,mathord,"","\\mu",!0);defineSymbol(math$2,main,mathord,"","\\nu",!0);defineSymbol(math$2,main,mathord,"","\\xi",!0);defineSymbol(math$2,main,mathord,"","\\omicron",!0);defineSymbol(math$2,main,mathord,"","\\pi",!0);defineSymbol(math$2,main,mathord,"","\\rho",!0);defineSymbol(math$2,main,mathord,"","\\sigma",!0);defineSymbol(math$2,main,mathord,"","\\tau",!0);defineSymbol(math$2,main,mathord,"","\\upsilon",!0);defineSymbol(math$2,main,mathord,"","\\phi",!0);defineSymbol(math$2,main,mathord,"","\\chi",!0);defineSymbol(math$2,main,mathord,"","\\psi",!0);defineSymbol(math$2,main,mathord,"","\\omega",!0);defineSymbol(math$2,main,mathord,"","\\varepsilon",!0);defineSymbol(math$2,main,mathord,"","\\vartheta",!0);defineSymbol(math$2,main,mathord,"","\\varpi",!0);defineSymbol(math$2,main,mathord,"","\\varrho",!0);defineSymbol(math$2,main,mathord,"","\\varsigma",!0);defineSymbol(math$2,main,mathord,"","\\varphi",!0);defineSymbol(math$2,main,bin,"","*",!0);defineSymbol(math$2,main,bin,"+","+");defineSymbol(math$2,main,bin,"","-",!0);defineSymbol(math$2,main,bin,"","\\cdot",!0);defineSymbol(math$2,main,bin,"","\\circ",!0);defineSymbol(math$2,main,bin,"","\\div",!0);defineSymbol(math$2,main,bin,"","\\pm",!0);defineSymbol(math$2,main,bin,"","\\times",!0);defineSymbol(math$2,main,bin,"","\\cap",!0);defineSymbol(math$2,main,bin,"","\\cup",!0);defineSymbol(math$2,main,bin,"","\\setminus",!0);defineSymbol(math$2,main,bin,"","\\land");defineSymbol(math$2,main,bin,"","\\lor");defineSymbol(math$2,main,bin,"","\\wedge",!0);defineSymbol(math$2,main,bin,"","\\vee",!0);defineSymbol(math$2,main,textord,"","\\surd");defineSymbol(math$2,main,open,"","\\langle",!0);defineSymbol(math$2,main,open,"","\\lvert");defineSymbol(math$2,main,open,"","\\lVert");defineSymbol(math$2,main,close,"?","?");defineSymbol(math$2,main,close,"!","!");defineSymbol(math$2,main,close,"","\\rangle",!0);defineSymbol(math$2,main,close,"","\\rvert");defineSymbol(math$2,main,close,"","\\rVert");defineSymbol(math$2,main,rel,"=","=");defineSymbol(math$2,main,rel,":",":");defineSymbol(math$2,main,rel,"","\\approx",!0);defineSymbol(math$2,main,rel,"","\\cong",!0);defineSymbol(math$2,main,rel,"","\\ge");defineSymbol(math$2,main,rel,"","\\geq",!0);defineSymbol(math$2,main,rel,"","\\gets");defineSymbol(math$2,main,rel,">","\\gt",!0);defineSymbol(math$2,main,rel,"","\\in",!0);defineSymbol(math$2,main,rel,"","\\@not");defineSymbol(math$2,main,rel,"","\\subset",!0);defineSymbol(math$2,main,rel,"","\\supset",!0);defineSymbol(math$2,main,rel,"","\\subseteq",!0);defineSymbol(math$2,main,rel,"","\\supseteq",!0);defineSymbol(math$2,ams,rel,"","\\nsubseteq",!0);defineSymbol(math$2,ams,rel,"","\\nsupseteq",!0);defineSymbol(math$2,main,rel,"","\\models");defineSymbol(math$2,main,rel,"","\\leftarrow",!0);defineSymbol(math$2,main,rel,"","\\le");defineSymbol(math$2,main,rel,"","\\leq",!0);defineSymbol(math$2,main,rel,"<","\\lt",!0);defineSymbol(math$2,main,rel,"","\\rightarrow",!0);defineSymbol(math$2,main,rel,"","\\to");defineSymbol(math$2,ams,rel,"","\\ngeq",!0);defineSymbol(math$2,ams,rel,"","\\nleq",!0);defineSymbol(math$2,main,spacing,"","\\ ");defineSymbol(math$2,main,spacing,"","\\space");defineSymbol(math$2,main,spacing,"","\\nobreakspace");defineSymbol(text,main,spacing,"","\\ ");defineSymbol(text,main,spacing,""," ");defineSymbol(text,main,spacing,"","\\space");defineSymbol(text,main,spacing,"","\\nobreakspace");defineSymbol(math$2,main,spacing,null,"\\nobreak");defineSymbol(math$2,main,spacing,null,"\\allowbreak");defineSymbol(math$2,main,punct,",",",");defineSymbol(math$2,main,punct,";",";");defineSymbol(math$2,ams,bin,"","\\barwedge",!0);defineSymbol(math$2,ams,bin,"","\\veebar",!0);defineSymbol(math$2,main,bin,"","\\odot",!0);defineSymbol(math$2,main,bin,"","\\oplus",!0);defineSymbol(math$2,main,bin,"","\\otimes",!0);defineSymbol(math$2,main,textord,"","\\partial",!0);defineSymbol(math$2,main,bin,"","\\oslash",!0);defineSymbol(math$2,ams,bin,"","\\circledcirc",!0);defineSymbol(math$2,ams,bin,"","\\boxdot",!0);defineSymbol(math$2,main,bin,"","\\bigtriangleup");defineSymbol(math$2,main,bin,"","\\bigtriangledown");defineSymbol(math$2,main,bin,"","\\dagger");defineSymbol(math$2,main,bin,"","\\diamond");defineSymbol(math$2,main,bin,"","\\star");defineSymbol(math$2,main,bin,"","\\triangleleft");defineSymbol(math$2,main,bin,"","\\triangleright");defineSymbol(math$2,main,open,"{","\\{");defineSymbol(text,main,textord,"{","\\{");defineSymbol(text,main,textord,"{","\\textbraceleft");defineSymbol(math$2,main,close,"}","\\}");defineSymbol(text,main,textord,"}","\\}");defineSymbol(text,main,textord,"}","\\textbraceright");defineSymbol(math$2,main,open,"{","\\lbrace");defineSymbol(math$2,main,close,"}","\\rbrace");defineSymbol(math$2,main,open,"[","\\lbrack",!0);defineSymbol(text,main,textord,"[","\\lbrack",!0);defineSymbol(math$2,main,close,"]","\\rbrack",!0);defineSymbol(text,main,textord,"]","\\rbrack",!0);defineSymbol(math$2,main,open,"(","\\lparen",!0);defineSymbol(math$2,main,close,")","\\rparen",!0);defineSymbol(text,main,textord,"<","\\textless",!0);defineSymbol(text,main,textord,">","\\textgreater",!0);defineSymbol(math$2,main,open,"","\\lfloor",!0);defineSymbol(math$2,main,close,"","\\rfloor",!0);defineSymbol(math$2,main,open,"","\\lceil",!0);defineSymbol(math$2,main,close,"","\\rceil",!0);defineSymbol(math$2,main,textord,"\\","\\backslash");defineSymbol(math$2,main,textord,"","|");defineSymbol(math$2,main,textord,"","\\vert");defineSymbol(text,main,textord,"|","\\textbar",!0);defineSymbol(math$2,main,textord,"","\\|");defineSymbol(math$2,main,textord,"","\\Vert");defineSymbol(text,main,textord,"","\\textbardbl");defineSymbol(text,main,textord,"~","\\textasciitilde");defineSymbol(text,main,textord,"\\","\\textbackslash");defineSymbol(text,main,textord,"^","\\textasciicircum");defineSymbol(math$2,main,rel,"","\\uparrow",!0);defineSymbol(math$2,main,rel,"","\\Uparrow",!0);defineSymbol(math$2,main,rel,"","\\downarrow",!0);defineSymbol(math$2,main,rel,"","\\Downarrow",!0);defineSymbol(math$2,main,rel,"","\\updownarrow",!0);defineSymbol(math$2,main,rel,"","\\Updownarrow",!0);defineSymbol(math$2,main,op,"","\\coprod");defineSymbol(math$2,main,op,"","\\bigvee");defineSymbol(math$2,main,op,"","\\bigwedge");defineSymbol(math$2,main,op,"","\\biguplus");defineSymbol(math$2,main,op,"","\\bigcap");defineSymbol(math$2,main,op,"","\\bigcup");defineSymbol(math$2,main,op,"","\\int");defineSymbol(math$2,main,op,"","\\intop");defineSymbol(math$2,main,op,"","\\iint");defineSymbol(math$2,main,op,"","\\iiint");defineSymbol(math$2,main,op,"","\\prod");defineSymbol(math$2,main,op,"","\\sum");defineSymbol(math$2,main,op,"","\\bigotimes");defineSymbol(math$2,main,op,"","\\bigoplus");defineSymbol(math$2,main,op,"","\\bigodot");defineSymbol(math$2,main,op,"","\\oint");defineSymbol(math$2,main,op,"","\\oiint");defineSymbol(math$2,main,op,"","\\oiiint");defineSymbol(math$2,main,op,"","\\bigsqcup");defineSymbol(math$2,main,op,"","\\smallint");defineSymbol(text,main,inner,"","\\textellipsis");defineSymbol(math$2,main,inner,"","\\mathellipsis");defineSymbol(text,main,inner,"","\\ldots",!0);defineSymbol(math$2,main,inner,"","\\ldots",!0);defineSymbol(math$2,main,inner,"","\\@cdots",!0);defineSymbol(math$2,main,inner,"","\\ddots",!0);defineSymbol(math$2,main,textord,"","\\varvdots");defineSymbol(text,main,textord,"","\\varvdots");defineSymbol(math$2,main,accent,"","\\acute");defineSymbol(math$2,main,accent,"","\\grave");defineSymbol(math$2,main,accent,"","\\ddot");defineSymbol(math$2,main,accent,"~","\\tilde");defineSymbol(math$2,main,accent,"","\\bar");defineSymbol(math$2,main,accent,"","\\breve");defineSymbol(math$2,main,accent,"","\\check");defineSymbol(math$2,main,accent,"^","\\hat");defineSymbol(math$2,main,accent,"","\\vec");defineSymbol(math$2,main,accent,"","\\dot");defineSymbol(math$2,main,accent,"","\\mathring");defineSymbol(math$2,main,mathord,"","\\@imath");defineSymbol(math$2,main,mathord,"","\\@jmath");defineSymbol(math$2,main,textord,"","");defineSymbol(math$2,main,textord,"","");defineSymbol(text,main,textord,"","\\i",!0);defineSymbol(text,main,textord,"","\\j",!0);defineSymbol(text,main,textord,"","\\ss",!0);defineSymbol(text,main,textord,"","\\ae",!0);defineSymbol(text,main,textord,"","\\oe",!0);defineSymbol(text,main,textord,"","\\o",!0);defineSymbol(text,main,textord,"","\\AE",!0);defineSymbol(text,main,textord,"","\\OE",!0);defineSymbol(text,main,textord,"","\\O",!0);defineSymbol(text,main,accent,"","\\'");defineSymbol(text,main,accent,"","\\`");defineSymbol(text,main,accent,"","\\^");defineSymbol(text,main,accent,"","\\~");defineSymbol(text,main,accent,"","\\=");defineSymbol(text,main,accent,"","\\u");defineSymbol(text,main,accent,"","\\.");defineSymbol(text,main,accent,"","\\c");defineSymbol(text,main,accent,"","\\r");defineSymbol(text,main,accent,"","\\v");defineSymbol(text,main,accent,"",'\\"');defineSymbol(text,main,accent,"","\\H");defineSymbol(text,main,accent,"","\\textcircled");var ligatures={"--":!0,"---":!0,"``":!0,"''":!0};defineSymbol(text,main,textord,"","--",!0);defineSymbol(text,main,textord,"","\\textendash");defineSymbol(text,main,textord,"","---",!0);defineSymbol(text,main,textord,"","\\textemdash");defineSymbol(text,main,textord,"","`",!0);defineSymbol(text,main,textord,"","\\textquoteleft");defineSymbol(text,main,textord,"","'",!0);defineSymbol(text,main,textord,"","\\textquoteright");defineSymbol(text,main,textord,"","``",!0);defineSymbol(text,main,textord,"","\\textquotedblleft");defineSymbol(text,main,textord,"","''",!0);defineSymbol(text,main,textord,"","\\textquotedblright");defineSymbol(math$2,main,textord,"","\\degree",!0);defineSymbol(text,main,textord,"","\\degree");defineSymbol(text,main,textord,"","\\textdegree",!0);defineSymbol(math$2,main,textord,"","\\pounds");defineSymbol(math$2,main,textord,"","\\mathsterling",!0);defineSymbol(text,main,textord,"","\\pounds");defineSymbol(text,main,textord,"","\\textsterling",!0);defineSymbol(math$2,ams,textord,"","\\maltese");defineSymbol(text,ams,textord,"","\\maltese");var mathTextSymbols='0123456789/@."';for(var i$4=0;i$4<mathTextSymbols.length;i$4++){var ch=mathTextSymbols.charAt(i$4);defineSymbol(math$2,main,textord,ch,ch)}var textSymbols='0123456789!@*()-=+";:?/.,';for(var _i=0;_i<textSymbols.length;_i++){var _ch=textSymbols.charAt(_i);defineSymbol(text,main,textord,_ch,_ch)}var letters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var _i2=0;_i2<letters.length;_i2++){var _ch2=letters.charAt(_i2);defineSymbol(math$2,main,mathord,_ch2,_ch2),defineSymbol(text,main,textord,_ch2,_ch2)}defineSymbol(math$2,ams,textord,"C","");defineSymbol(text,ams,textord,"C","");defineSymbol(math$2,ams,textord,"H","");defineSymbol(text,ams,textord,"H","");defineSymbol(math$2,ams,textord,"N","");defineSymbol(text,ams,textord,"N","");defineSymbol(math$2,ams,textord,"P","");defineSymbol(text,ams,textord,"P","");defineSymbol(math$2,ams,textord,"Q","");defineSymbol(text,ams,textord,"Q","");defineSymbol(math$2,ams,textord,"R","");defineSymbol(text,ams,textord,"R","");defineSymbol(math$2,ams,textord,"Z","");defineSymbol(text,ams,textord,"Z","");defineSymbol(math$2,main,mathord,"h","");defineSymbol(text,main,mathord,"h","");var wideChar="";for(var _i3=0;_i3<letters.length;_i3++){var _ch3=letters.charAt(_i3);wideChar=String.fromCharCode(55349,56320+_i3),defineSymbol(math$2,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56372+_i3),defineSymbol(math$2,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56424+_i3),defineSymbol(math$2,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56580+_i3),defineSymbol(math$2,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56684+_i3),defineSymbol(math$2,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56736+_i3),defineSymbol(math$2,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56788+_i3),defineSymbol(math$2,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56840+_i3),defineSymbol(math$2,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56944+_i3),defineSymbol(math$2,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),_i3<26&&(wideChar=String.fromCharCode(55349,56632+_i3),defineSymbol(math$2,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56476+_i3),defineSymbol(math$2,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar))}wideChar="";defineSymbol(math$2,main,mathord,"k",wideChar);defineSymbol(text,main,textord,"k",wideChar);for(var _i4=0;_i4<10;_i4++){var _ch4=_i4.toString();wideChar=String.fromCharCode(55349,57294+_i4),defineSymbol(math$2,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57314+_i4),defineSymbol(math$2,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57324+_i4),defineSymbol(math$2,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57334+_i4),defineSymbol(math$2,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar)}var extraLatin="";for(var _i5=0;_i5<extraLatin.length;_i5++){var _ch5=extraLatin.charAt(_i5);defineSymbol(math$2,main,mathord,_ch5,_ch5),defineSymbol(text,main,textord,_ch5,_ch5)}var wideLatinLetterData=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],wideNumeralData=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],wideCharacterFont=function(_,J){var Z=_.charCodeAt(0),Q=_.charCodeAt(1),ee=(Z-55296)*1024+(Q-56320)+65536,te=J==="math"?0:1;if(119808<=ee&&ee<120484){var ne=Math.floor((ee-119808)/26);return[wideLatinLetterData[ne][2],wideLatinLetterData[ne][te]]}else if(120782<=ee&&ee<=120831){var ie=Math.floor((ee-120782)/10);return[wideNumeralData[ie][2],wideNumeralData[ie][te]]}else{if(ee===120485||ee===120486)return[wideLatinLetterData[0][2],wideLatinLetterData[0][te]];if(120486<ee&&ee<120782)return["",""];throw new ParseError("Unsupported character: "+_)}},lookupSymbol=function(_,J,Z){return symbols[Z][_]&&symbols[Z][_].replace&&(_=symbols[Z][_].replace),{value:_,metrics:getCharacterMetrics(_,J,Z)}},makeSymbol=function(_,J,Z,Q,ee){var te=lookupSymbol(_,J,Z),ne=te.metrics;_=te.value;var ie;if(ne){var re=ne.italic;(Z==="text"||Q&&Q.font==="mathit")&&(re=0),ie=new SymbolNode(_,ne.height,ne.depth,re,ne.skew,ne.width,ee)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+_+"' in style '"+J+"' and mode '"+Z+"'")),ie=new SymbolNode(_,0,0,0,0,0,ee);if(Q){ie.maxFontSize=Q.sizeMultiplier,Q.style.isTight()&&ie.classes.push("mtight");var oe=Q.getColor();oe&&(ie.style.color=oe)}return ie},mathsym=function(_,J,Z,Q){return Q===void 0&&(Q=[]),Z.font==="boldsymbol"&&lookupSymbol(_,"Main-Bold",J).metrics?makeSymbol(_,"Main-Bold",J,Z,Q.concat(["mathbf"])):_==="\\"||symbols[J][_].font==="main"?makeSymbol(_,"Main-Regular",J,Z,Q):makeSymbol(_,"AMS-Regular",J,Z,Q.concat(["amsrm"]))},boldsymbol=function(_,J,Z,Q,ee){return ee!=="textord"&&lookupSymbol(_,"Math-BoldItalic",J).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},makeOrd=function(_,J,Z){var Q=_.mode,ee=_.text,te=["mord"],ne=Q==="math"||Q==="text"&&J.font,ie=ne?J.font:J.fontFamily,re="",oe="";if(ee.charCodeAt(0)===55349&&([re,oe]=wideCharacterFont(ee,Q)),re.length>0)return makeSymbol(ee,re,Q,J,te.concat(oe));if(ie){var se,ae;if(ie==="boldsymbol"){var le=boldsymbol(ee,Q,J,te,Z);se=le.fontName,ae=[le.fontClass]}else ne?(se=fontMap[ie].fontName,ae=[ie]):(se=retrieveTextFontName(ie,J.fontWeight,J.fontShape),ae=[ie,J.fontWeight,J.fontShape]);if(lookupSymbol(ee,se,Q).metrics)return makeSymbol(ee,se,Q,J,te.concat(ae));if(ligatures.hasOwnProperty(ee)&&se.slice(0,10)==="Typewriter"){for(var ue=[],de=0;de<ee.length;de++)ue.push(makeSymbol(ee[de],se,Q,J,te.concat(ae)));return makeFragment(ue)}}if(Z==="mathord")return makeSymbol(ee,"Math-Italic",Q,J,te.concat(["mathnormal"]));if(Z==="textord"){var pe=symbols[Q][ee]&&symbols[Q][ee].font;if(pe==="ams"){var fe=retrieveTextFontName("amsrm",J.fontWeight,J.fontShape);return makeSymbol(ee,fe,Q,J,te.concat("amsrm",J.fontWeight,J.fontShape))}else if(pe==="main"||!pe){var _e=retrieveTextFontName("textrm",J.fontWeight,J.fontShape);return makeSymbol(ee,_e,Q,J,te.concat(J.fontWeight,J.fontShape))}else{var ye=retrieveTextFontName(pe,J.fontWeight,J.fontShape);return makeSymbol(ee,ye,Q,J,te.concat(ye,J.fontWeight,J.fontShape))}}else throw new Error("unexpected type: "+Z+" in makeOrd")},canCombine=(G,_)=>{if(createClass(G.classes)!==createClass(_.classes)||G.skew!==_.skew||G.maxFontSize!==_.maxFontSize)return!1;if(G.classes.length===1){var J=G.classes[0];if(J==="mbin"||J==="mord")return!1}for(var Z in G.style)if(G.style.hasOwnProperty(Z)&&G.style[Z]!==_.style[Z])return!1;for(var Q in _.style)if(_.style.hasOwnProperty(Q)&&G.style[Q]!==_.style[Q])return!1;return!0},tryCombineChars=G=>{for(var _=0;_<G.length-1;_++){var J=G[_],Z=G[_+1];J instanceof SymbolNode&&Z instanceof SymbolNode&&canCombine(J,Z)&&(J.text+=Z.text,J.height=Math.max(J.height,Z.height),J.depth=Math.max(J.depth,Z.depth),J.italic=Z.italic,G.splice(_+1,1),_--)}return G},sizeElementFromChildren=function(_){for(var J=0,Z=0,Q=0,ee=0;ee<_.children.length;ee++){var te=_.children[ee];te.height>J&&(J=te.height),te.depth>Z&&(Z=te.depth),te.maxFontSize>Q&&(Q=te.maxFontSize)}_.height=J,_.depth=Z,_.maxFontSize=Q},makeSpan$2=function(_,J,Z,Q){var ee=new Span(_,J,Z,Q);return sizeElementFromChildren(ee),ee},makeSvgSpan=(G,_,J,Z)=>new Span(G,_,J,Z),makeLineSpan=function(_,J,Z){var Q=makeSpan$2([_],[],J);return Q.height=Math.max(Z||J.fontMetrics().defaultRuleThickness,J.minRuleThickness),Q.style.borderBottomWidth=makeEm(Q.height),Q.maxFontSize=1,Q},makeAnchor=function(_,J,Z,Q){var ee=new Anchor(_,J,Z,Q);return sizeElementFromChildren(ee),ee},makeFragment=function(_){var J=new DocumentFragment(_);return sizeElementFromChildren(J),J},wrapFragment=function(_,J){return _ instanceof DocumentFragment?makeSpan$2([],[_],J):_},getVListChildrenAndDepth=function(_){if(_.positionType==="individualShift"){for(var J=_.children,Z=[J[0]],Q=-J[0].shift-J[0].elem.depth,ee=Q,te=1;te<J.length;te++){var ne=-J[te].shift-ee-J[te].elem.depth,ie=ne-(J[te-1].elem.height+J[te-1].elem.depth);ee=ee+ne,Z.push({type:"kern",size:ie}),Z.push(J[te])}return{children:Z,depth:Q}}var re;if(_.positionType==="top"){for(var oe=_.positionData,se=0;se<_.children.length;se++){var ae=_.children[se];oe-=ae.type==="kern"?ae.size:ae.elem.height+ae.elem.depth}re=oe}else if(_.positionType==="bottom")re=-_.positionData;else{var le=_.children[0];if(le.type!=="elem")throw new Error('First child must have type "elem".');if(_.positionType==="shift")re=-le.elem.depth-_.positionData;else if(_.positionType==="firstBaseline")re=-le.elem.depth;else throw new Error("Invalid positionType "+_.positionType+".")}return{children:_.children,depth:re}},makeVList=function(_,J){for(var{children:Z,depth:Q}=getVListChildrenAndDepth(_),ee=0,te=0;te<Z.length;te++){var ne=Z[te];if(ne.type==="elem"){var ie=ne.elem;ee=Math.max(ee,ie.maxFontSize,ie.height)}}ee+=2;var re=makeSpan$2(["pstrut"],[]);re.style.height=makeEm(ee);for(var oe=[],se=Q,ae=Q,le=Q,ue=0;ue<Z.length;ue++){var de=Z[ue];if(de.type==="kern")le+=de.size;else{var pe=de.elem,fe=de.wrapperClasses||[],_e=de.wrapperStyle||{},ye=makeSpan$2(fe,[re,pe],void 0,_e);ye.style.top=makeEm(-ee-le-pe.depth),de.marginLeft&&(ye.style.marginLeft=de.marginLeft),de.marginRight&&(ye.style.marginRight=de.marginRight),oe.push(ye),le+=pe.height+pe.depth}se=Math.min(se,le),ae=Math.max(ae,le)}var be=makeSpan$2(["vlist"],oe);be.style.height=makeEm(ae);var Ae;if(se<0){var Ce=makeSpan$2([],[]),Ee=makeSpan$2(["vlist"],[Ce]);Ee.style.height=makeEm(-se);var Re=makeSpan$2(["vlist-s"],[new SymbolNode("")]);Ae=[makeSpan$2(["vlist-r"],[be,Re]),makeSpan$2(["vlist-r"],[Ee])]}else Ae=[makeSpan$2(["vlist-r"],[be])];var Te=makeSpan$2(["vlist-t"],Ae);return Ae.length===2&&Te.classes.push("vlist-t2"),Te.height=ae,Te.depth=-se,Te},makeGlue=(G,_)=>{var J=makeSpan$2(["mspace"],[],_),Z=calculateSize(G,_);return J.style.marginRight=makeEm(Z),J},retrieveTextFontName=function(_,J,Z){var Q="";switch(_){case"amsrm":Q="AMS";break;case"textrm":Q="Main";break;case"textsf":Q="SansSerif";break;case"texttt":Q="Typewriter";break;default:Q=_}var ee;return J==="textbf"&&Z==="textit"?ee="BoldItalic":J==="textbf"?ee="Bold":J==="textit"?ee="Italic":ee="Regular",Q+"-"+ee},fontMap={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},svgData={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},staticSvg=function(_,J){var[Z,Q,ee]=svgData[_],te=new PathNode(Z),ne=new SvgNode([te],{width:makeEm(Q),height:makeEm(ee),style:"width:"+makeEm(Q),viewBox:"0 0 "+1e3*Q+" "+1e3*ee,preserveAspectRatio:"xMinYMin"}),ie=makeSvgSpan(["overlay"],[ne],J);return ie.height=ee,ie.style.height=makeEm(ee),ie.style.width=makeEm(Q),ie},buildCommon={fontMap,makeSymbol,mathsym,makeSpan:makeSpan$2,makeSvgSpan,makeLineSpan,makeAnchor,makeFragment,wrapFragment,makeVList,makeOrd,makeGlue,staticSvg,svgData,tryCombineChars},thinspace={number:3,unit:"mu"},mediumspace={number:4,unit:"mu"},thickspace={number:5,unit:"mu"},spacings={mord:{mop:thinspace,mbin:mediumspace,mrel:thickspace,minner:thinspace},mop:{mord:thinspace,mop:thinspace,mrel:thickspace,minner:thinspace},mbin:{mord:mediumspace,mop:mediumspace,mopen:mediumspace,minner:mediumspace},mrel:{mord:thickspace,mop:thickspace,mopen:thickspace,minner:thickspace},mopen:{},mclose:{mop:thinspace,mbin:mediumspace,mrel:thickspace,minner:thinspace},mpunct:{mord:thinspace,mop:thinspace,mrel:thickspace,mopen:thinspace,mclose:thinspace,mpunct:thinspace,minner:thinspace},minner:{mord:thinspace,mop:thinspace,mbin:mediumspace,mrel:thickspace,mopen:thinspace,mpunct:thinspace,minner:thinspace}},tightSpacings={mord:{mop:thinspace},mop:{mord:thinspace,mop:thinspace},mbin:{},mrel:{},mopen:{},mclose:{mop:thinspace},mpunct:{},minner:{mop:thinspace}},_functions={},_htmlGroupBuilders={},_mathmlGroupBuilders={};function defineFunction(G){for(var{type:_,names:J,props:Z,handler:Q,htmlBuilder:ee,mathmlBuilder:te}=G,ne={type:_,numArgs:Z.numArgs,argTypes:Z.argTypes,allowedInArgument:!!Z.allowedInArgument,allowedInText:!!Z.allowedInText,allowedInMath:Z.allowedInMath===void 0?!0:Z.allowedInMath,numOptionalArgs:Z.numOptionalArgs||0,infix:!!Z.infix,primitive:!!Z.primitive,handler:Q},ie=0;ie<J.length;++ie)_functions[J[ie]]=ne;_&&(ee&&(_htmlGroupBuilders[_]=ee),te&&(_mathmlGroupBuilders[_]=te))}function defineFunctionBuilders(G){var{type:_,htmlBuilder:J,mathmlBuilder:Z}=G;defineFunction({type:_,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:J,mathmlBuilder:Z})}var normalizeArgument=function(_){return _.type==="ordgroup"&&_.body.length===1?_.body[0]:_},ordargument=function(_){return _.type==="ordgroup"?_.body:[_]},makeSpan$1=buildCommon.makeSpan,binLeftCanceller=["leftmost","mbin","mopen","mrel","mop","mpunct"],binRightCanceller=["rightmost","mrel","mclose","mpunct"],styleMap$1={display:Style$1.DISPLAY,text:Style$1.TEXT,script:Style$1.SCRIPT,scriptscript:Style$1.SCRIPTSCRIPT},DomEnum={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},buildExpression$1=function(_,J,Z,Q){Q===void 0&&(Q=[null,null]);for(var ee=[],te=0;te<_.length;te++){var ne=buildGroup$1(_[te],J);if(ne instanceof DocumentFragment){var ie=ne.children;ee.push(...ie)}else ee.push(ne)}if(buildCommon.tryCombineChars(ee),!Z)return ee;var re=J;if(_.length===1){var oe=_[0];oe.type==="sizing"?re=J.havingSize(oe.size):oe.type==="styling"&&(re=J.havingStyle(styleMap$1[oe.style]))}var se=makeSpan$1([Q[0]||"leftmost"],[],J),ae=makeSpan$1([Q[1]||"rightmost"],[],J),le=Z==="root";return traverseNonSpaceNodes(ee,(ue,de)=>{var pe=de.classes[0],fe=ue.classes[0];pe==="mbin"&&binRightCanceller.includes(fe)?de.classes[0]="mord":fe==="mbin"&&binLeftCanceller.includes(pe)&&(ue.classes[0]="mord")},{node:se},ae,le),traverseNonSpaceNodes(ee,(ue,de)=>{var pe=getTypeOfDomTree(de),fe=getTypeOfDomTree(ue),_e=pe&&fe?ue.hasClass("mtight")?tightSpacings[pe][fe]:spacings[pe][fe]:null;if(_e)return buildCommon.makeGlue(_e,re)},{node:se},ae,le),ee},traverseNonSpaceNodes=function G(_,J,Z,Q,ee){Q&&_.push(Q);for(var te=0;te<_.length;te++){var ne=_[te],ie=checkPartialGroup(ne);if(ie){G(ie.children,J,Z,null,ee);continue}var re=!ne.hasClass("mspace");if(re){var oe=J(ne,Z.node);oe&&(Z.insertAfter?Z.insertAfter(oe):(_.unshift(oe),te++))}re?Z.node=ne:ee&&ne.hasClass("newline")&&(Z.node=makeSpan$1(["leftmost"])),Z.insertAfter=(se=>ae=>{_.splice(se+1,0,ae),te++})(te)}Q&&_.pop()},checkPartialGroup=function(_){return _ instanceof DocumentFragment||_ instanceof Anchor||_ instanceof Span&&_.hasClass("enclosing")?_:null},getOutermostNode=function G(_,J){var Z=checkPartialGroup(_);if(Z){var Q=Z.children;if(Q.length){if(J==="right")return G(Q[Q.length-1],"right");if(J==="left")return G(Q[0],"left")}}return _},getTypeOfDomTree=function(_,J){return _?(J&&(_=getOutermostNode(_,J)),DomEnum[_.classes[0]]||null):null},makeNullDelimiter=function(_,J){var Z=["nulldelimiter"].concat(_.baseSizingClasses());return makeSpan$1(J.concat(Z))},buildGroup$1=function(_,J,Z){if(!_)return makeSpan$1();if(_htmlGroupBuilders[_.type]){var Q=_htmlGroupBuilders[_.type](_,J);if(Z&&J.size!==Z.size){Q=makeSpan$1(J.sizingClasses(Z),[Q],J);var ee=J.sizeMultiplier/Z.sizeMultiplier;Q.height*=ee,Q.depth*=ee}return Q}else throw new ParseError("Got group of unknown type: '"+_.type+"'")};function newDocumentFragment(G){return new DocumentFragment(G)}class MathNode{constructor(_,J,Z){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=_,this.attributes={},this.children=J||[],this.classes=Z||[]}setAttribute(_,J){this.attributes[_]=J}getAttribute(_){return this.attributes[_]}toNode(){var _=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var J in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,J)&&_.setAttribute(J,this.attributes[J]);this.classes.length>0&&(_.className=createClass(this.classes));for(var Z=0;Z<this.children.length;Z++)if(this.children[Z]instanceof TextNode&&this.children[Z+1]instanceof TextNode){for(var Q=this.children[Z].toText()+this.children[++Z].toText();this.children[Z+1]instanceof TextNode;)Q+=this.children[++Z].toText();_.appendChild(new TextNode(Q).toNode())}else _.appendChild(this.children[Z].toNode());return _}toMarkup(){var _="<"+this.type;for(var J in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,J)&&(_+=" "+J+'="',_+=utils.escape(this.attributes[J]),_+='"');this.classes.length>0&&(_+=' class ="'+utils.escape(createClass(this.classes))+'"'),_+=">";for(var Z=0;Z<this.children.length;Z++)_+=this.children[Z].toMarkup();return _+="</"+this.type+">",_}toText(){return this.children.map(_=>_.toText()).join("")}}class TextNode{constructor(_){this.text=void 0,this.text=_}toNode(){return document.createTextNode(this.text)}toMarkup(){return utils.escape(this.toText())}toText(){return this.text}}class SpaceNode{constructor(_){this.width=void 0,this.character=void 0,this.width=_,_>=.05555&&_<=.05556?this.character="":_>=.1666&&_<=.1667?this.character="":_>=.2222&&_<=.2223?this.character="":_>=.2777&&_<=.2778?this.character="":_>=-.05556&&_<=-.05555?this.character="":_>=-.1667&&_<=-.1666?this.character="":_>=-.2223&&_<=-.2222?this.character="":_>=-.2778&&_<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var _=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return _.setAttribute("width",makeEm(this.width)),_}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+makeEm(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var mathMLTree={MathNode,TextNode,SpaceNode,newDocumentFragment},makeText=function(_,J,Z){return symbols[J][_]&&symbols[J][_].replace&&_.charCodeAt(0)!==55349&&!(ligatures.hasOwnProperty(_)&&Z&&(Z.fontFamily&&Z.fontFamily.slice(4,6)==="tt"||Z.font&&Z.font.slice(4,6)==="tt"))&&(_=symbols[J][_].replace),new mathMLTree.TextNode(_)},makeRow=function(_){return _.length===1?_[0]:new mathMLTree.MathNode("mrow",_)},getVariant=function(_,J){if(J.fontFamily==="texttt")return"monospace";if(J.fontFamily==="textsf")return J.fontShape==="textit"&&J.fontWeight==="textbf"?"sans-serif-bold-italic":J.fontShape==="textit"?"sans-serif-italic":J.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(J.fontShape==="textit"&&J.fontWeight==="textbf")return"bold-italic";if(J.fontShape==="textit")return"italic";if(J.fontWeight==="textbf")return"bold";var Z=J.font;if(!Z||Z==="mathnormal")return null;var Q=_.mode;if(Z==="mathit")return"italic";if(Z==="boldsymbol")return _.type==="textord"?"bold":"bold-italic";if(Z==="mathbf")return"bold";if(Z==="mathbb")return"double-struck";if(Z==="mathsfit")return"sans-serif-italic";if(Z==="mathfrak")return"fraktur";if(Z==="mathscr"||Z==="mathcal")return"script";if(Z==="mathsf")return"sans-serif";if(Z==="mathtt")return"monospace";var ee=_.text;if(["\\imath","\\jmath"].includes(ee))return null;symbols[Q][ee]&&symbols[Q][ee].replace&&(ee=symbols[Q][ee].replace);var te=buildCommon.fontMap[Z].fontName;return getCharacterMetrics(ee,te,Q)?buildCommon.fontMap[Z].variant:null};function isNumberPunctuation(G){if(!G)return!1;if(G.type==="mi"&&G.children.length===1){var _=G.children[0];return _ instanceof TextNode&&_.text==="."}else if(G.type==="mo"&&G.children.length===1&&G.getAttribute("separator")==="true"&&G.getAttribute("lspace")==="0em"&&G.getAttribute("rspace")==="0em"){var J=G.children[0];return J instanceof TextNode&&J.text===","}else return!1}var buildExpression=function(_,J,Z){if(_.length===1){var Q=buildGroup(_[0],J);return Z&&Q instanceof MathNode&&Q.type==="mo"&&(Q.setAttribute("lspace","0em"),Q.setAttribute("rspace","0em")),[Q]}for(var ee=[],te,ne=0;ne<_.length;ne++){var ie=buildGroup(_[ne],J);if(ie instanceof MathNode&&te instanceof MathNode){if(ie.type==="mtext"&&te.type==="mtext"&&ie.getAttribute("mathvariant")===te.getAttribute("mathvariant")){te.children.push(...ie.children);continue}else if(ie.type==="mn"&&te.type==="mn"){te.children.push(...ie.children);continue}else if(isNumberPunctuation(ie)&&te.type==="mn"){te.children.push(...ie.children);continue}else if(ie.type==="mn"&&isNumberPunctuation(te))ie.children=[...te.children,...ie.children],ee.pop();else if((ie.type==="msup"||ie.type==="msub")&&ie.children.length>=1&&(te.type==="mn"||isNumberPunctuation(te))){var re=ie.children[0];re instanceof MathNode&&re.type==="mn"&&(re.children=[...te.children,...re.children],ee.pop())}else if(te.type==="mi"&&te.children.length===1){var oe=te.children[0];if(oe instanceof TextNode&&oe.text===""&&(ie.type==="mo"||ie.type==="mi"||ie.type==="mn")){var se=ie.children[0];se instanceof TextNode&&se.text.length>0&&(se.text=se.text.slice(0,1)+""+se.text.slice(1),ee.pop())}}}ee.push(ie),te=ie}return ee},buildExpressionRow=function(_,J,Z){return makeRow(buildExpression(_,J,Z))},buildGroup=function(_,J){if(!_)return new mathMLTree.MathNode("mrow");if(_mathmlGroupBuilders[_.type]){var Z=_mathmlGroupBuilders[_.type](_,J);return Z}else throw new ParseError("Got group of unknown type: '"+_.type+"'")},stretchyCodePoint={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},mathMLnode=function(_){var J=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(stretchyCodePoint[_.replace(/^\\/,"")])]);return J.setAttribute("stretchy","true"),J},katexImagesData={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},groupLength=function(_){return _.type==="ordgroup"?_.body.length:1},svgSpan=function(_,J){function Z(){var ne=4e5,ie=_.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(ie)){var re=_,oe=groupLength(re.base),se,ae,le;if(oe>5)ie==="widehat"||ie==="widecheck"?(se=420,ne=2364,le=.42,ae=ie+"4"):(se=312,ne=2340,le=.34,ae="tilde4");else{var ue=[1,1,2,2,3,3][oe];ie==="widehat"||ie==="widecheck"?(ne=[0,1062,2364,2364,2364][ue],se=[0,239,300,360,420][ue],le=[0,.24,.3,.3,.36,.42][ue],ae=ie+ue):(ne=[0,600,1033,2339,2340][ue],se=[0,260,286,306,312][ue],le=[0,.26,.286,.3,.306,.34][ue],ae="tilde"+ue)}var de=new PathNode(ae),pe=new SvgNode([de],{width:"100%",height:makeEm(le),viewBox:"0 0 "+ne+" "+se,preserveAspectRatio:"none"});return{span:buildCommon.makeSvgSpan([],[pe],J),minWidth:0,height:le}}else{var fe=[],_e=katexImagesData[ie],[ye,be,Ae]=_e,Ce=Ae/1e3,Ee=ye.length,Re,Te;if(Ee===1){var Me=_e[3];Re=["hide-tail"],Te=[Me]}else if(Ee===2)Re=["halfarrow-left","halfarrow-right"],Te=["xMinYMin","xMaxYMin"];else if(Ee===3)Re=["brace-left","brace-center","brace-right"],Te=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+Ee+" children.");for(var Ne=0;Ne<Ee;Ne++){var Le=new PathNode(ye[Ne]),Ie=new SvgNode([Le],{width:"400em",height:makeEm(Ce),viewBox:"0 0 "+ne+" "+Ae,preserveAspectRatio:Te[Ne]+" slice"}),Ge=buildCommon.makeSvgSpan([Re[Ne]],[Ie],J);if(Ee===1)return{span:Ge,minWidth:be,height:Ce};Ge.style.height=makeEm(Ce),fe.push(Ge)}return{span:buildCommon.makeSpan(["stretchy"],fe,J),minWidth:be,height:Ce}}}var{span:Q,minWidth:ee,height:te}=Z();return Q.height=te,Q.style.height=makeEm(te),ee>0&&(Q.style.minWidth=makeEm(ee)),Q},encloseSpan=function(_,J,Z,Q,ee){var te,ne=_.height+_.depth+Z+Q;if(/fbox|color|angl/.test(J)){if(te=buildCommon.makeSpan(["stretchy",J],[],ee),J==="fbox"){var ie=ee.color&&ee.getColor();ie&&(te.style.borderColor=ie)}}else{var re=[];/^[bx]cancel$/.test(J)&&re.push(new LineNode({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(J)&&re.push(new LineNode({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var oe=new SvgNode(re,{width:"100%",height:makeEm(ne)});te=buildCommon.makeSvgSpan([],[oe],ee)}return te.height=ne,te.style.height=makeEm(ne),te},stretchy={encloseSpan,mathMLnode,svgSpan};function assertNodeType(G,_){if(!G||G.type!==_)throw new Error("Expected node of type "+_+", but got "+(G?"node of type "+G.type:String(G)));return G}function assertSymbolNodeType(G){var _=checkSymbolNodeType(G);if(!_)throw new Error("Expected node of symbol group type, but got "+(G?"node of type "+G.type:String(G)));return _}function checkSymbolNodeType(G){return G&&(G.type==="atom"||NON_ATOMS.hasOwnProperty(G.type))?G:null}var htmlBuilder$a=(G,_)=>{var J,Z,Q;G&&G.type==="supsub"?(Z=assertNodeType(G.base,"accent"),J=Z.base,G.base=J,Q=assertSpan(buildGroup$1(G,_)),G.base=Z):(Z=assertNodeType(G,"accent"),J=Z.base);var ee=buildGroup$1(J,_.havingCrampedStyle()),te=Z.isShifty&&utils.isCharacterBox(J),ne=0;if(te){var ie=utils.getBaseElem(J),re=buildGroup$1(ie,_.havingCrampedStyle());ne=assertSymbolDomNode(re).skew}var oe=Z.label==="\\c",se=oe?ee.height+ee.depth:Math.min(ee.height,_.fontMetrics().xHeight),ae;if(Z.isStretchy)ae=stretchy.svgSpan(Z,_),ae=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:ee},{type:"elem",elem:ae,wrapperClasses:["svg-align"],wrapperStyle:ne>0?{width:"calc(100% - "+makeEm(2*ne)+")",marginLeft:makeEm(2*ne)}:void 0}]},_);else{var le,ue;Z.label==="\\vec"?(le=buildCommon.staticSvg("vec",_),ue=buildCommon.svgData.vec[1]):(le=buildCommon.makeOrd({mode:Z.mode,text:Z.label},_,"textord"),le=assertSymbolDomNode(le),le.italic=0,ue=le.width,oe&&(se+=le.depth)),ae=buildCommon.makeSpan(["accent-body"],[le]);var de=Z.label==="\\textcircled";de&&(ae.classes.push("accent-full"),se=ee.height);var pe=ne;de||(pe-=ue/2),ae.style.left=makeEm(pe),Z.label==="\\textcircled"&&(ae.style.top=".2em"),ae=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:ee},{type:"kern",size:-se},{type:"elem",elem:ae}]},_)}var fe=buildCommon.makeSpan(["mord","accent"],[ae],_);return Q?(Q.children[0]=fe,Q.height=Math.max(fe.height,Q.height),Q.classes[0]="mord",Q):fe},mathmlBuilder$9=(G,_)=>{var J=G.isStretchy?stretchy.mathMLnode(G.label):new mathMLTree.MathNode("mo",[makeText(G.label,G.mode)]),Z=new mathMLTree.MathNode("mover",[buildGroup(G.base,_),J]);return Z.setAttribute("accent","true"),Z},NON_STRETCHY_ACCENT_REGEX=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(G=>"\\"+G).join("|"));defineFunction({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(G,_)=>{var J=normalizeArgument(_[0]),Z=!NON_STRETCHY_ACCENT_REGEX.test(G.funcName),Q=!Z||G.funcName==="\\widehat"||G.funcName==="\\widetilde"||G.funcName==="\\widecheck";return{type:"accent",mode:G.parser.mode,label:G.funcName,isStretchy:Z,isShifty:Q,base:J}},htmlBuilder:htmlBuilder$a,mathmlBuilder:mathmlBuilder$9});defineFunction({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(G,_)=>{var J=_[0],Z=G.parser.mode;return Z==="math"&&(G.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+G.funcName+" works only in text mode"),Z="text"),{type:"accent",mode:Z,label:G.funcName,isStretchy:!1,isShifty:!0,base:J}},htmlBuilder:htmlBuilder$a,mathmlBuilder:mathmlBuilder$9});defineFunction({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(G,_)=>{var{parser:J,funcName:Z}=G,Q=_[0];return{type:"accentUnder",mode:J.mode,label:Z,base:Q}},htmlBuilder:(G,_)=>{var J=buildGroup$1(G.base,_),Z=stretchy.svgSpan(G,_),Q=G.label==="\\utilde"?.12:0,ee=buildCommon.makeVList({positionType:"top",positionData:J.height,children:[{type:"elem",elem:Z,wrapperClasses:["svg-align"]},{type:"kern",size:Q},{type:"elem",elem:J}]},_);return buildCommon.makeSpan(["mord","accentunder"],[ee],_)},mathmlBuilder:(G,_)=>{var J=stretchy.mathMLnode(G.label),Z=new mathMLTree.MathNode("munder",[buildGroup(G.base,_),J]);return Z.setAttribute("accentunder","true"),Z}});var paddedNode=G=>{var _=new mathMLTree.MathNode("mpadded",G?[G]:[]);return _.setAttribute("width","+0.6em"),_.setAttribute("lspace","0.3em"),_};defineFunction({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(G,_,J){var{parser:Z,funcName:Q}=G;return{type:"xArrow",mode:Z.mode,label:Q,body:_[0],below:J[0]}},htmlBuilder(G,_){var J=_.style,Z=_.havingStyle(J.sup()),Q=buildCommon.wrapFragment(buildGroup$1(G.body,Z,_),_),ee=G.label.slice(0,2)==="\\x"?"x":"cd";Q.classes.push(ee+"-arrow-pad");var te;G.below&&(Z=_.havingStyle(J.sub()),te=buildCommon.wrapFragment(buildGroup$1(G.below,Z,_),_),te.classes.push(ee+"-arrow-pad"));var ne=stretchy.svgSpan(G,_),ie=-_.fontMetrics().axisHeight+.5*ne.height,re=-_.fontMetrics().axisHeight-.5*ne.height-.111;(Q.depth>.25||G.label==="\\xleftequilibrium")&&(re-=Q.depth);var oe;if(te){var se=-_.fontMetrics().axisHeight+te.height+.5*ne.height+.111;oe=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:Q,shift:re},{type:"elem",elem:ne,shift:ie},{type:"elem",elem:te,shift:se}]},_)}else oe=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:Q,shift:re},{type:"elem",elem:ne,shift:ie}]},_);return oe.children[0].children[0].children[1].classes.push("svg-align"),buildCommon.makeSpan(["mrel","x-arrow"],[oe],_)},mathmlBuilder(G,_){var J=stretchy.mathMLnode(G.label);J.setAttribute("minsize",G.label.charAt(0)==="x"?"1.75em":"3.0em");var Z;if(G.body){var Q=paddedNode(buildGroup(G.body,_));if(G.below){var ee=paddedNode(buildGroup(G.below,_));Z=new mathMLTree.MathNode("munderover",[J,ee,Q])}else Z=new mathMLTree.MathNode("mover",[J,Q])}else if(G.below){var te=paddedNode(buildGroup(G.below,_));Z=new mathMLTree.MathNode("munder",[J,te])}else Z=paddedNode(),Z=new mathMLTree.MathNode("mover",[J,Z]);return Z}});var makeSpan=buildCommon.makeSpan;function htmlBuilder$9(G,_){var J=buildExpression$1(G.body,_,!0);return makeSpan([G.mclass],J,_)}function mathmlBuilder$8(G,_){var J,Z=buildExpression(G.body,_);return G.mclass==="minner"?J=new mathMLTree.MathNode("mpadded",Z):G.mclass==="mord"?G.isCharacterBox?(J=Z[0],J.type="mi"):J=new mathMLTree.MathNode("mi",Z):(G.isCharacterBox?(J=Z[0],J.type="mo"):J=new mathMLTree.MathNode("mo",Z),G.mclass==="mbin"?(J.attributes.lspace="0.22em",J.attributes.rspace="0.22em"):G.mclass==="mpunct"?(J.attributes.lspace="0em",J.attributes.rspace="0.17em"):G.mclass==="mopen"||G.mclass==="mclose"?(J.attributes.lspace="0em",J.attributes.rspace="0em"):G.mclass==="minner"&&(J.attributes.lspace="0.0556em",J.attributes.width="+0.1111em")),J}defineFunction({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(G,_){var{parser:J,funcName:Z}=G,Q=_[0];return{type:"mclass",mode:J.mode,mclass:"m"+Z.slice(5),body:ordargument(Q),isCharacterBox:utils.isCharacterBox(Q)}},htmlBuilder:htmlBuilder$9,mathmlBuilder:mathmlBuilder$8});var binrelClass=G=>{var _=G.type==="ordgroup"&&G.body.length?G.body[0]:G;return _.type==="atom"&&(_.family==="bin"||_.family==="rel")?"m"+_.family:"mord"};defineFunction({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(G,_){var{parser:J}=G;return{type:"mclass",mode:J.mode,mclass:binrelClass(_[0]),body:ordargument(_[1]),isCharacterBox:utils.isCharacterBox(_[1])}}});defineFunction({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(G,_){var{parser:J,funcName:Z}=G,Q=_[1],ee=_[0],te;Z!=="\\stackrel"?te=binrelClass(Q):te="mrel";var ne={type:"op",mode:Q.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:Z!=="\\stackrel",body:ordargument(Q)},ie={type:"supsub",mode:ee.mode,base:ne,sup:Z==="\\underset"?null:ee,sub:Z==="\\underset"?ee:null};return{type:"mclass",mode:J.mode,mclass:te,body:[ie],isCharacterBox:utils.isCharacterBox(ie)}},htmlBuilder:htmlBuilder$9,mathmlBuilder:mathmlBuilder$8});defineFunction({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(G,_){var{parser:J}=G;return{type:"pmb",mode:J.mode,mclass:binrelClass(_[0]),body:ordargument(_[0])}},htmlBuilder(G,_){var J=buildExpression$1(G.body,_,!0),Z=buildCommon.makeSpan([G.mclass],J,_);return Z.style.textShadow="0.02em 0.01em 0.04px",Z},mathmlBuilder(G,_){var J=buildExpression(G.body,_),Z=new mathMLTree.MathNode("mstyle",J);return Z.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),Z}});var cdArrowFunctionName={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},newCell=()=>({type:"styling",body:[],mode:"math",style:"display"}),isStartOfArrow=G=>G.type==="textord"&&G.text==="@",isLabelEnd=(G,_)=>(G.type==="mathord"||G.type==="atom")&&G.text===_;function cdArrow(G,_,J){var Z=cdArrowFunctionName[G];switch(Z){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return J.callFunction(Z,[_[0]],[_[1]]);case"\\uparrow":case"\\downarrow":{var Q=J.callFunction("\\\\cdleft",[_[0]],[]),ee={type:"atom",text:Z,mode:"math",family:"rel"},te=J.callFunction("\\Big",[ee],[]),ne=J.callFunction("\\\\cdright",[_[1]],[]),ie={type:"ordgroup",mode:"math",body:[Q,te,ne]};return J.callFunction("\\\\cdparent",[ie],[])}case"\\\\cdlongequal":return J.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var re={type:"textord",text:"\\Vert",mode:"math"};return J.callFunction("\\Big",[re],[])}default:return{type:"textord",text:" ",mode:"math"}}}function parseCD(G){var _=[];for(G.gullet.beginGroup(),G.gullet.macros.set("\\cr","\\\\\\relax"),G.gullet.beginGroup();;){_.push(G.parseExpression(!1,"\\\\")),G.gullet.endGroup(),G.gullet.beginGroup();var J=G.fetch().text;if(J==="&"||J==="\\\\")G.consume();else if(J==="\\end"){_[_.length-1].length===0&&_.pop();break}else throw new ParseError("Expected \\\\ or \\cr or \\end",G.nextToken)}for(var Z=[],Q=[Z],ee=0;ee<_.length;ee++){for(var te=_[ee],ne=newCell(),ie=0;ie<te.length;ie++)if(!isStartOfArrow(te[ie]))ne.body.push(te[ie]);else{Z.push(ne),ie+=1;var re=assertSymbolNodeType(te[ie]).text,oe=new Array(2);if(oe[0]={type:"ordgroup",mode:"math",body:[]},oe[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(re)>-1))if("<>AV".indexOf(re)>-1)for(var se=0;se<2;se++){for(var ae=!0,le=ie+1;le<te.length;le++){if(isLabelEnd(te[le],re)){ae=!1,ie=le;break}if(isStartOfArrow(te[le]))throw new ParseError("Missing a "+re+" character to complete a CD arrow.",te[le]);oe[se].body.push(te[le])}if(ae)throw new ParseError("Missing a "+re+" character to complete a CD arrow.",te[ie])}else throw new ParseError('Expected one of "<>AV=|." after @',te[ie]);var ue=cdArrow(re,oe,G),de={type:"styling",body:[ue],mode:"math",style:"display"};Z.push(de),ne=newCell()}ee%2===0?Z.push(ne):Z.shift(),Z=[],Q.push(Z)}G.gullet.endGroup(),G.gullet.endGroup();var pe=new Array(Q[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:Q,arraystretch:1,addJot:!0,rowGaps:[null],cols:pe,colSeparationType:"CD",hLinesBeforeRow:new Array(Q.length+1).fill([])}}defineFunction({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(G,_){var{parser:J,funcName:Z}=G;return{type:"cdlabel",mode:J.mode,side:Z.slice(4),label:_[0]}},htmlBuilder(G,_){var J=_.havingStyle(_.style.sup()),Z=buildCommon.wrapFragment(buildGroup$1(G.label,J,_),_);return Z.classes.push("cd-label-"+G.side),Z.style.bottom=makeEm(.8-Z.depth),Z.height=0,Z.depth=0,Z},mathmlBuilder(G,_){var J=new mathMLTree.MathNode("mrow",[buildGroup(G.label,_)]);return J=new mathMLTree.MathNode("mpadded",[J]),J.setAttribute("width","0"),G.side==="left"&&J.setAttribute("lspace","-1width"),J.setAttribute("voffset","0.7em"),J=new mathMLTree.MathNode("mstyle",[J]),J.setAttribute("displaystyle","false"),J.setAttribute("scriptlevel","1"),J}});defineFunction({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(G,_){var{parser:J}=G;return{type:"cdlabelparent",mode:J.mode,fragment:_[0]}},htmlBuilder(G,_){var J=buildCommon.wrapFragment(buildGroup$1(G.fragment,_),_);return J.classes.push("cd-vert-arrow"),J},mathmlBuilder(G,_){return new mathMLTree.MathNode("mrow",[buildGroup(G.fragment,_)])}});defineFunction({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(G,_){for(var{parser:J}=G,Z=assertNodeType(_[0],"ordgroup"),Q=Z.body,ee="",te=0;te<Q.length;te++){var ne=assertNodeType(Q[te],"textord");ee+=ne.text}var ie=parseInt(ee),re;if(isNaN(ie))throw new ParseError("\\@char has non-numeric argument "+ee);if(ie<0||ie>=1114111)throw new ParseError("\\@char with invalid code point "+ee);return ie<=65535?re=String.fromCharCode(ie):(ie-=65536,re=String.fromCharCode((ie>>10)+55296,(ie&1023)+56320)),{type:"textord",mode:J.mode,text:re}}});var htmlBuilder$8=(G,_)=>{var J=buildExpression$1(G.body,_.withColor(G.color),!1);return buildCommon.makeFragment(J)},mathmlBuilder$7=(G,_)=>{var J=buildExpression(G.body,_.withColor(G.color)),Z=new mathMLTree.MathNode("mstyle",J);return Z.setAttribute("mathcolor",G.color),Z};defineFunction({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(G,_){var{parser:J}=G,Z=assertNodeType(_[0],"color-token").color,Q=_[1];return{type:"color",mode:J.mode,color:Z,body:ordargument(Q)}},htmlBuilder:htmlBuilder$8,mathmlBuilder:mathmlBuilder$7});defineFunction({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(G,_){var{parser:J,breakOnTokenText:Z}=G,Q=assertNodeType(_[0],"color-token").color;J.gullet.macros.set("\\current@color",Q);var ee=J.parseExpression(!0,Z);return{type:"color",mode:J.mode,color:Q,body:ee}},htmlBuilder:htmlBuilder$8,mathmlBuilder:mathmlBuilder$7});defineFunction({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(G,_,J){var{parser:Z}=G,Q=Z.gullet.future().text==="["?Z.parseSizeGroup(!0):null,ee=!Z.settings.displayMode||!Z.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:Z.mode,newLine:ee,size:Q&&assertNodeType(Q,"size").value}},htmlBuilder(G,_){var J=buildCommon.makeSpan(["mspace"],[],_);return G.newLine&&(J.classes.push("newline"),G.size&&(J.style.marginTop=makeEm(calculateSize(G.size,_)))),J},mathmlBuilder(G,_){var J=new mathMLTree.MathNode("mspace");return G.newLine&&(J.setAttribute("linebreak","newline"),G.size&&J.setAttribute("height",makeEm(calculateSize(G.size,_)))),J}});var globalMap={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},checkControlSequence=G=>{var _=G.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(_))throw new ParseError("Expected a control sequence",G);return _},getRHS=G=>{var _=G.gullet.popToken();return _.text==="="&&(_=G.gullet.popToken(),_.text===" "&&(_=G.gullet.popToken())),_},letCommand=(G,_,J,Z)=>{var Q=G.gullet.macros.get(J.text);Q==null&&(J.noexpand=!0,Q={tokens:[J],numArgs:0,unexpandable:!G.gullet.isExpandable(J.text)}),G.gullet.macros.set(_,Q,Z)};defineFunction({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(G){var{parser:_,funcName:J}=G;_.consumeSpaces();var Z=_.fetch();if(globalMap[Z.text])return(J==="\\global"||J==="\\\\globallong")&&(Z.text=globalMap[Z.text]),assertNodeType(_.parseFunction(),"internal");throw new ParseError("Invalid token after macro prefix",Z)}});defineFunction({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(G){var{parser:_,funcName:J}=G,Z=_.gullet.popToken(),Q=Z.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(Q))throw new ParseError("Expected a control sequence",Z);for(var ee=0,te,ne=[[]];_.gullet.future().text!=="{";)if(Z=_.gullet.popToken(),Z.text==="#"){if(_.gullet.future().text==="{"){te=_.gullet.future(),ne[ee].push("{");break}if(Z=_.gullet.popToken(),!/^[1-9]$/.test(Z.text))throw new ParseError('Invalid argument number "'+Z.text+'"');if(parseInt(Z.text)!==ee+1)throw new ParseError('Argument number "'+Z.text+'" out of order');ee++,ne.push([])}else{if(Z.text==="EOF")throw new ParseError("Expected a macro definition");ne[ee].push(Z.text)}var{tokens:ie}=_.gullet.consumeArg();return te&&ie.unshift(te),(J==="\\edef"||J==="\\xdef")&&(ie=_.gullet.expandTokens(ie),ie.reverse()),_.gullet.macros.set(Q,{tokens:ie,numArgs:ee,delimiters:ne},J===globalMap[J]),{type:"internal",mode:_.mode}}});defineFunction({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(G){var{parser:_,funcName:J}=G,Z=checkControlSequence(_.gullet.popToken());_.gullet.consumeSpaces();var Q=getRHS(_);return letCommand(_,Z,Q,J==="\\\\globallet"),{type:"internal",mode:_.mode}}});defineFunction({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(G){var{parser:_,funcName:J}=G,Z=checkControlSequence(_.gullet.popToken()),Q=_.gullet.popToken(),ee=_.gullet.popToken();return letCommand(_,Z,ee,J==="\\\\globalfuture"),_.gullet.pushToken(ee),_.gullet.pushToken(Q),{type:"internal",mode:_.mode}}});var getMetrics=function(_,J,Z){var Q=symbols.math[_]&&symbols.math[_].replace,ee=getCharacterMetrics(Q||_,J,Z);if(!ee)throw new Error("Unsupported symbol "+_+" and font size "+J+".");return ee},styleWrap=function(_,J,Z,Q){var ee=Z.havingBaseStyle(J),te=buildCommon.makeSpan(Q.concat(ee.sizingClasses(Z)),[_],Z),ne=ee.sizeMultiplier/Z.sizeMultiplier;return te.height*=ne,te.depth*=ne,te.maxFontSize=ee.sizeMultiplier,te},centerSpan=function(_,J,Z){var Q=J.havingBaseStyle(Z),ee=(1-J.sizeMultiplier/Q.sizeMultiplier)*J.fontMetrics().axisHeight;_.classes.push("delimcenter"),_.style.top=makeEm(ee),_.height-=ee,_.depth+=ee},makeSmallDelim=function(_,J,Z,Q,ee,te){var ne=buildCommon.makeSymbol(_,"Main-Regular",ee,Q),ie=styleWrap(ne,J,Q,te);return Z&&centerSpan(ie,Q,J),ie},mathrmSize=function(_,J,Z,Q){return buildCommon.makeSymbol(_,"Size"+J+"-Regular",Z,Q)},makeLargeDelim=function(_,J,Z,Q,ee,te){var ne=mathrmSize(_,J,ee,Q),ie=styleWrap(buildCommon.makeSpan(["delimsizing","size"+J],[ne],Q),Style$1.TEXT,Q,te);return Z&&centerSpan(ie,Q,Style$1.TEXT),ie},makeGlyphSpan=function(_,J,Z){var Q;J==="Size1-Regular"?Q="delim-size1":Q="delim-size4";var ee=buildCommon.makeSpan(["delimsizinginner",Q],[buildCommon.makeSpan([],[buildCommon.makeSymbol(_,J,Z)])]);return{type:"elem",elem:ee}},makeInner=function(_,J,Z){var Q=fontMetricsData["Size4-Regular"][_.charCodeAt(0)]?fontMetricsData["Size4-Regular"][_.charCodeAt(0)][4]:fontMetricsData["Size1-Regular"][_.charCodeAt(0)][4],ee=new PathNode("inner",innerPath(_,Math.round(1e3*J))),te=new SvgNode([ee],{width:makeEm(Q),height:makeEm(J),style:"width:"+makeEm(Q),viewBox:"0 0 "+1e3*Q+" "+Math.round(1e3*J),preserveAspectRatio:"xMinYMin"}),ne=buildCommon.makeSvgSpan([],[te],Z);return ne.height=J,ne.style.height=makeEm(J),ne.style.width=makeEm(Q),{type:"elem",elem:ne}},lapInEms=.008,lap={type:"kern",size:-1*lapInEms},verts=["|","\\lvert","\\rvert","\\vert"],doubleVerts=["\\|","\\lVert","\\rVert","\\Vert"],makeStackedDelim=function(_,J,Z,Q,ee,te){var ne,ie,re,oe,se="",ae=0;ne=re=oe=_,ie=null;var le="Size1-Regular";_==="\\uparrow"?re=oe="":_==="\\Uparrow"?re=oe="":_==="\\downarrow"?ne=re="":_==="\\Downarrow"?ne=re="":_==="\\updownarrow"?(ne="\\uparrow",re="",oe="\\downarrow"):_==="\\Updownarrow"?(ne="\\Uparrow",re="",oe="\\Downarrow"):verts.includes(_)?(re="",se="vert",ae=333):doubleVerts.includes(_)?(re="",se="doublevert",ae=556):_==="["||_==="\\lbrack"?(ne="",re="",oe="",le="Size4-Regular",se="lbrack",ae=667):_==="]"||_==="\\rbrack"?(ne="",re="",oe="",le="Size4-Regular",se="rbrack",ae=667):_==="\\lfloor"||_===""?(re=ne="",oe="",le="Size4-Regular",se="lfloor",ae=667):_==="\\lceil"||_===""?(ne="",re=oe="",le="Size4-Regular",se="lceil",ae=667):_==="\\rfloor"||_===""?(re=ne="",oe="",le="Size4-Regular",se="rfloor",ae=667):_==="\\rceil"||_===""?(ne="",re=oe="",le="Size4-Regular",se="rceil",ae=667):_==="("||_==="\\lparen"?(ne="",re="",oe="",le="Size4-Regular",se="lparen",ae=875):_===")"||_==="\\rparen"?(ne="",re="",oe="",le="Size4-Regular",se="rparen",ae=875):_==="\\{"||_==="\\lbrace"?(ne="",ie="",oe="",re="",le="Size4-Regular"):_==="\\}"||_==="\\rbrace"?(ne="",ie="",oe="",re="",le="Size4-Regular"):_==="\\lgroup"||_===""?(ne="",oe="",re="",le="Size4-Regular"):_==="\\rgroup"||_===""?(ne="",oe="",re="",le="Size4-Regular"):_==="\\lmoustache"||_===""?(ne="",oe="",re="",le="Size4-Regular"):(_==="\\rmoustache"||_==="")&&(ne="",oe="",re="",le="Size4-Regular");var ue=getMetrics(ne,le,ee),de=ue.height+ue.depth,pe=getMetrics(re,le,ee),fe=pe.height+pe.depth,_e=getMetrics(oe,le,ee),ye=_e.height+_e.depth,be=0,Ae=1;if(ie!==null){var Ce=getMetrics(ie,le,ee);be=Ce.height+Ce.depth,Ae=2}var Ee=de+ye+be,Re=Math.max(0,Math.ceil((J-Ee)/(Ae*fe))),Te=Ee+Re*Ae*fe,Me=Q.fontMetrics().axisHeight;Z&&(Me*=Q.sizeMultiplier);var Ne=Te/2-Me,Le=[];if(se.length>0){var Ie=Te-de-ye,Ge=Math.round(Te*1e3),He=tallDelim(se,Math.round(Ie*1e3)),Be=new PathNode(se,He),ze=(ae/1e3).toFixed(3)+"em",Fe=(Ge/1e3).toFixed(3)+"em",$e=new SvgNode([Be],{width:ze,height:Fe,viewBox:"0 0 "+ae+" "+Ge}),Xe=buildCommon.makeSvgSpan([],[$e],Q);Xe.height=Ge/1e3,Xe.style.width=ze,Xe.style.height=Fe,Le.push({type:"elem",elem:Xe})}else{if(Le.push(makeGlyphSpan(oe,le,ee)),Le.push(lap),ie===null){var je=Te-de-ye+2*lapInEms;Le.push(makeInner(re,je,Q))}else{var qe=(Te-de-ye-be)/2+2*lapInEms;Le.push(makeInner(re,qe,Q)),Le.push(lap),Le.push(makeGlyphSpan(ie,le,ee)),Le.push(lap),Le.push(makeInner(re,qe,Q))}Le.push(lap),Le.push(makeGlyphSpan(ne,le,ee))}var Ze=Q.havingBaseStyle(Style$1.TEXT),st=buildCommon.makeVList({positionType:"bottom",positionData:Ne,children:Le},Ze);return styleWrap(buildCommon.makeSpan(["delimsizing","mult"],[st],Ze),Style$1.TEXT,Q,te)},vbPad=80,emPad=.08,sqrtSvg=function(_,J,Z,Q,ee){var te=sqrtPath(_,Q,Z),ne=new PathNode(_,te),ie=new SvgNode([ne],{width:"400em",height:makeEm(J),viewBox:"0 0 400000 "+Z,preserveAspectRatio:"xMinYMin slice"});return buildCommon.makeSvgSpan(["hide-tail"],[ie],ee)},makeSqrtImage=function(_,J){var Z=J.havingBaseSizing(),Q=traverseSequence("\\surd",_*Z.sizeMultiplier,stackLargeDelimiterSequence,Z),ee=Z.sizeMultiplier,te=Math.max(0,J.minRuleThickness-J.fontMetrics().sqrtRuleThickness),ne,ie=0,re=0,oe=0,se;return Q.type==="small"?(oe=1e3+1e3*te+vbPad,_<1?ee=1:_<1.4&&(ee=.7),ie=(1+te+emPad)/ee,re=(1+te)/ee,ne=sqrtSvg("sqrtMain",ie,oe,te,J),ne.style.minWidth="0.853em",se=.833/ee):Q.type==="large"?(oe=(1e3+vbPad)*sizeToMaxHeight[Q.size],re=(sizeToMaxHeight[Q.size]+te)/ee,ie=(sizeToMaxHeight[Q.size]+te+emPad)/ee,ne=sqrtSvg("sqrtSize"+Q.size,ie,oe,te,J),ne.style.minWidth="1.02em",se=1/ee):(ie=_+te+emPad,re=_+te,oe=Math.floor(1e3*_+te)+vbPad,ne=sqrtSvg("sqrtTall",ie,oe,te,J),ne.style.minWidth="0.742em",se=1.056),ne.height=re,ne.style.height=makeEm(ie),{span:ne,advanceWidth:se,ruleWidth:(J.fontMetrics().sqrtRuleThickness+te)*ee}},stackLargeDelimiters=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],stackAlwaysDelimiters=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],stackNeverDelimiters=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],sizeToMaxHeight=[0,1.2,1.8,2.4,3],makeSizedDelim=function(_,J,Z,Q,ee){if(_==="<"||_==="\\lt"||_===""?_="\\langle":(_===">"||_==="\\gt"||_==="")&&(_="\\rangle"),stackLargeDelimiters.includes(_)||stackNeverDelimiters.includes(_))return makeLargeDelim(_,J,!1,Z,Q,ee);if(stackAlwaysDelimiters.includes(_))return makeStackedDelim(_,sizeToMaxHeight[J],!1,Z,Q,ee);throw new ParseError("Illegal delimiter: '"+_+"'")},stackNeverDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],stackAlwaysDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"stack"}],stackLargeDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],delimTypeToFont=function(_){if(_.type==="small")return"Main-Regular";if(_.type==="large")return"Size"+_.size+"-Regular";if(_.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+_.type+"' here.")},traverseSequence=function(_,J,Z,Q){for(var ee=Math.min(2,3-Q.style.size),te=ee;te<Z.length&&Z[te].type!=="stack";te++){var ne=getMetrics(_,delimTypeToFont(Z[te]),"math"),ie=ne.height+ne.depth;if(Z[te].type==="small"){var re=Q.havingBaseStyle(Z[te].style);ie*=re.sizeMultiplier}if(ie>J)return Z[te]}return Z[Z.length-1]},makeCustomSizedDelim=function(_,J,Z,Q,ee,te){_==="<"||_==="\\lt"||_===""?_="\\langle":(_===">"||_==="\\gt"||_==="")&&(_="\\rangle");var ne;stackNeverDelimiters.includes(_)?ne=stackNeverDelimiterSequence:stackLargeDelimiters.includes(_)?ne=stackLargeDelimiterSequence:ne=stackAlwaysDelimiterSequence;var ie=traverseSequence(_,J,ne,Q);return ie.type==="small"?makeSmallDelim(_,ie.style,Z,Q,ee,te):ie.type==="large"?makeLargeDelim(_,ie.size,Z,Q,ee,te):makeStackedDelim(_,J,Z,Q,ee,te)},makeLeftRightDelim=function(_,J,Z,Q,ee,te){var ne=Q.fontMetrics().axisHeight*Q.sizeMultiplier,ie=901,re=5/Q.fontMetrics().ptPerEm,oe=Math.max(J-ne,Z+ne),se=Math.max(oe/500*ie,2*oe-re);return makeCustomSizedDelim(_,se,!0,Q,ee,te)},delimiter={sqrtImage:makeSqrtImage,sizedDelim:makeSizedDelim,sizeToMaxHeight,customSizedDelim:makeCustomSizedDelim,leftRightDelim:makeLeftRightDelim},delimiterSizes={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},delimiters=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function checkDelimiter(G,_){var J=checkSymbolNodeType(G);if(J&&delimiters.includes(J.text))return J;throw J?new ParseError("Invalid delimiter '"+J.text+"' after '"+_.funcName+"'",G):new ParseError("Invalid delimiter type '"+G.type+"'",G)}defineFunction({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(G,_)=>{var J=checkDelimiter(_[0],G);return{type:"delimsizing",mode:G.parser.mode,size:delimiterSizes[G.funcName].size,mclass:delimiterSizes[G.funcName].mclass,delim:J.text}},htmlBuilder:(G,_)=>G.delim==="."?buildCommon.makeSpan([G.mclass]):delimiter.sizedDelim(G.delim,G.size,_,G.mode,[G.mclass]),mathmlBuilder:G=>{var _=[];G.delim!=="."&&_.push(makeText(G.delim,G.mode));var J=new mathMLTree.MathNode("mo",_);G.mclass==="mopen"||G.mclass==="mclose"?J.setAttribute("fence","true"):J.setAttribute("fence","false"),J.setAttribute("stretchy","true");var Z=makeEm(delimiter.sizeToMaxHeight[G.size]);return J.setAttribute("minsize",Z),J.setAttribute("maxsize",Z),J}});function assertParsed(G){if(!G.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}defineFunction({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(G,_)=>{var J=G.parser.gullet.macros.get("\\current@color");if(J&&typeof J!="string")throw new ParseError("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:G.parser.mode,delim:checkDelimiter(_[0],G).text,color:J}}});defineFunction({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(G,_)=>{var J=checkDelimiter(_[0],G),Z=G.parser;++Z.leftrightDepth;var Q=Z.parseExpression(!1);--Z.leftrightDepth,Z.expect("\\right",!1);var ee=assertNodeType(Z.parseFunction(),"leftright-right");return{type:"leftright",mode:Z.mode,body:Q,left:J.text,right:ee.delim,rightColor:ee.color}},htmlBuilder:(G,_)=>{assertParsed(G);for(var J=buildExpression$1(G.body,_,!0,["mopen","mclose"]),Z=0,Q=0,ee=!1,te=0;te<J.length;te++)J[te].isMiddle?ee=!0:(Z=Math.max(J[te].height,Z),Q=Math.max(J[te].depth,Q));Z*=_.sizeMultiplier,Q*=_.sizeMultiplier;var ne;if(G.left==="."?ne=makeNullDelimiter(_,["mopen"]):ne=delimiter.leftRightDelim(G.left,Z,Q,_,G.mode,["mopen"]),J.unshift(ne),ee)for(var ie=1;ie<J.length;ie++){var re=J[ie],oe=re.isMiddle;oe&&(J[ie]=delimiter.leftRightDelim(oe.delim,Z,Q,oe.options,G.mode,[]))}var se;if(G.right===".")se=makeNullDelimiter(_,["mclose"]);else{var ae=G.rightColor?_.withColor(G.rightColor):_;se=delimiter.leftRightDelim(G.right,Z,Q,ae,G.mode,["mclose"])}return J.push(se),buildCommon.makeSpan(["minner"],J,_)},mathmlBuilder:(G,_)=>{assertParsed(G);var J=buildExpression(G.body,_);if(G.left!=="."){var Z=new mathMLTree.MathNode("mo",[makeText(G.left,G.mode)]);Z.setAttribute("fence","true"),J.unshift(Z)}if(G.right!=="."){var Q=new mathMLTree.MathNode("mo",[makeText(G.right,G.mode)]);Q.setAttribute("fence","true"),G.rightColor&&Q.setAttribute("mathcolor",G.rightColor),J.push(Q)}return makeRow(J)}});defineFunction({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(G,_)=>{var J=checkDelimiter(_[0],G);if(!G.parser.leftrightDepth)throw new ParseError("\\middle without preceding \\left",J);return{type:"middle",mode:G.parser.mode,delim:J.text}},htmlBuilder:(G,_)=>{var J;if(G.delim===".")J=makeNullDelimiter(_,[]);else{J=delimiter.sizedDelim(G.delim,1,_,G.mode,[]);var Z={delim:G.delim,options:_};J.isMiddle=Z}return J},mathmlBuilder:(G,_)=>{var J=G.delim==="\\vert"||G.delim==="|"?makeText("|","text"):makeText(G.delim,G.mode),Z=new mathMLTree.MathNode("mo",[J]);return Z.setAttribute("fence","true"),Z.setAttribute("lspace","0.05em"),Z.setAttribute("rspace","0.05em"),Z}});var htmlBuilder$7=(G,_)=>{var J=buildCommon.wrapFragment(buildGroup$1(G.body,_),_),Z=G.label.slice(1),Q=_.sizeMultiplier,ee,te=0,ne=utils.isCharacterBox(G.body);if(Z==="sout")ee=buildCommon.makeSpan(["stretchy","sout"]),ee.height=_.fontMetrics().defaultRuleThickness/Q,te=-.5*_.fontMetrics().xHeight;else if(Z==="phase"){var ie=calculateSize({number:.6,unit:"pt"},_),re=calculateSize({number:.35,unit:"ex"},_),oe=_.havingBaseSizing();Q=Q/oe.sizeMultiplier;var se=J.height+J.depth+ie+re;J.style.paddingLeft=makeEm(se/2+ie);var ae=Math.floor(1e3*se*Q),le=phasePath(ae),ue=new SvgNode([new PathNode("phase",le)],{width:"400em",height:makeEm(ae/1e3),viewBox:"0 0 400000 "+ae,preserveAspectRatio:"xMinYMin slice"});ee=buildCommon.makeSvgSpan(["hide-tail"],[ue],_),ee.style.height=makeEm(se),te=J.depth+ie+re}else{/cancel/.test(Z)?ne||J.classes.push("cancel-pad"):Z==="angl"?J.classes.push("anglpad"):J.classes.push("boxpad");var de=0,pe=0,fe=0;/box/.test(Z)?(fe=Math.max(_.fontMetrics().fboxrule,_.minRuleThickness),de=_.fontMetrics().fboxsep+(Z==="colorbox"?0:fe),pe=de):Z==="angl"?(fe=Math.max(_.fontMetrics().defaultRuleThickness,_.minRuleThickness),de=4*fe,pe=Math.max(0,.25-J.depth)):(de=ne?.2:0,pe=de),ee=stretchy.encloseSpan(J,Z,de,pe,_),/fbox|boxed|fcolorbox/.test(Z)?(ee.style.borderStyle="solid",ee.style.borderWidth=makeEm(fe)):Z==="angl"&&fe!==.049&&(ee.style.borderTopWidth=makeEm(fe),ee.style.borderRightWidth=makeEm(fe)),te=J.depth+pe,G.backgroundColor&&(ee.style.backgroundColor=G.backgroundColor,G.borderColor&&(ee.style.borderColor=G.borderColor))}var _e;if(G.backgroundColor)_e=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:ee,shift:te},{type:"elem",elem:J,shift:0}]},_);else{var ye=/cancel|phase/.test(Z)?["svg-align"]:[];_e=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:J,shift:0},{type:"elem",elem:ee,shift:te,wrapperClasses:ye}]},_)}return/cancel/.test(Z)&&(_e.height=J.height,_e.depth=J.depth),/cancel/.test(Z)&&!ne?buildCommon.makeSpan(["mord","cancel-lap"],[_e],_):buildCommon.makeSpan(["mord"],[_e],_)},mathmlBuilder$6=(G,_)=>{var J=0,Z=new mathMLTree.MathNode(G.label.indexOf("colorbox")>-1?"mpadded":"menclose",[buildGroup(G.body,_)]);switch(G.label){case"\\cancel":Z.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":Z.setAttribute("notation","downdiagonalstrike");break;case"\\phase":Z.setAttribute("notation","phasorangle");break;case"\\sout":Z.setAttribute("notation","horizontalstrike");break;case"\\fbox":Z.setAttribute("notation","box");break;case"\\angl":Z.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(J=_.fontMetrics().fboxsep*_.fontMetrics().ptPerEm,Z.setAttribute("width","+"+2*J+"pt"),Z.setAttribute("height","+"+2*J+"pt"),Z.setAttribute("lspace",J+"pt"),Z.setAttribute("voffset",J+"pt"),G.label==="\\fcolorbox"){var Q=Math.max(_.fontMetrics().fboxrule,_.minRuleThickness);Z.setAttribute("style","border: "+Q+"em solid "+String(G.borderColor))}break;case"\\xcancel":Z.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return G.backgroundColor&&Z.setAttribute("mathbackground",G.backgroundColor),Z};defineFunction({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(G,_,J){var{parser:Z,funcName:Q}=G,ee=assertNodeType(_[0],"color-token").color,te=_[1];return{type:"enclose",mode:Z.mode,label:Q,backgroundColor:ee,body:te}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(G,_,J){var{parser:Z,funcName:Q}=G,ee=assertNodeType(_[0],"color-token").color,te=assertNodeType(_[1],"color-token").color,ne=_[2];return{type:"enclose",mode:Z.mode,label:Q,backgroundColor:te,borderColor:ee,body:ne}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(G,_){var{parser:J}=G;return{type:"enclose",mode:J.mode,label:"\\fbox",body:_[0]}}});defineFunction({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(G,_){var{parser:J,funcName:Z}=G,Q=_[0];return{type:"enclose",mode:J.mode,label:Z,body:Q}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(G,_){var{parser:J}=G;return{type:"enclose",mode:J.mode,label:"\\angl",body:_[0]}}});var _environments={};function defineEnvironment(G){for(var{type:_,names:J,props:Z,handler:Q,htmlBuilder:ee,mathmlBuilder:te}=G,ne={type:_,numArgs:Z.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:Q},ie=0;ie<J.length;++ie)_environments[J[ie]]=ne;ee&&(_htmlGroupBuilders[_]=ee),te&&(_mathmlGroupBuilders[_]=te)}var _macros={};function defineMacro(G,_){_macros[G]=_}function getHLines(G){var _=[];G.consumeSpaces();var J=G.fetch().text;for(J==="\\relax"&&(G.consume(),G.consumeSpaces(),J=G.fetch().text);J==="\\hline"||J==="\\hdashline";)G.consume(),_.push(J==="\\hdashline"),G.consumeSpaces(),J=G.fetch().text;return _}var validateAmsEnvironmentContext=G=>{var _=G.parser.settings;if(!_.displayMode)throw new ParseError("{"+G.envName+"} can be used only in display mode.")};function getAutoTag(G){if(G.indexOf("ed")===-1)return G.indexOf("*")===-1}function parseArray(G,_,J){var{hskipBeforeAndAfter:Z,addJot:Q,cols:ee,arraystretch:te,colSeparationType:ne,autoTag:ie,singleRow:re,emptySingleRow:oe,maxNumCols:se,leqno:ae}=_;if(G.gullet.beginGroup(),re||G.gullet.macros.set("\\cr","\\\\\\relax"),!te){var le=G.gullet.expandMacroAsText("\\arraystretch");if(le==null)te=1;else if(te=parseFloat(le),!te||te<0)throw new ParseError("Invalid \\arraystretch: "+le)}G.gullet.beginGroup();var ue=[],de=[ue],pe=[],fe=[],_e=ie!=null?[]:void 0;function ye(){ie&&G.gullet.macros.set("\\@eqnsw","1",!0)}function be(){_e&&(G.gullet.macros.get("\\df@tag")?(_e.push(G.subparse([new Token("\\df@tag")])),G.gullet.macros.set("\\df@tag",void 0,!0)):_e.push(!!ie&&G.gullet.macros.get("\\@eqnsw")==="1"))}for(ye(),fe.push(getHLines(G));;){var Ae=G.parseExpression(!1,re?"\\end":"\\\\");G.gullet.endGroup(),G.gullet.beginGroup(),Ae={type:"ordgroup",mode:G.mode,body:Ae},J&&(Ae={type:"styling",mode:G.mode,style:J,body:[Ae]}),ue.push(Ae);var Ce=G.fetch().text;if(Ce==="&"){if(se&&ue.length===se){if(re||ne)throw new ParseError("Too many tab characters: &",G.nextToken);G.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}G.consume()}else if(Ce==="\\end"){be(),ue.length===1&&Ae.type==="styling"&&Ae.body[0].body.length===0&&(de.length>1||!oe)&&de.pop(),fe.length<de.length+1&&fe.push([]);break}else if(Ce==="\\\\"){G.consume();var Ee=void 0;G.gullet.future().text!==" "&&(Ee=G.parseSizeGroup(!0)),pe.push(Ee?Ee.value:null),be(),fe.push(getHLines(G)),ue=[],de.push(ue),ye()}else throw new ParseError("Expected & or \\\\ or \\cr or \\end",G.nextToken)}return G.gullet.endGroup(),G.gullet.endGroup(),{type:"array",mode:G.mode,addJot:Q,arraystretch:te,body:de,cols:ee,rowGaps:pe,hskipBeforeAndAfter:Z,hLinesBeforeRow:fe,colSeparationType:ne,tags:_e,leqno:ae}}function dCellStyle(G){return G.slice(0,1)==="d"?"display":"text"}var htmlBuilder$6=function(_,J){var Z,Q,ee=_.body.length,te=_.hLinesBeforeRow,ne=0,ie=new Array(ee),re=[],oe=Math.max(J.fontMetrics().arrayRuleWidth,J.minRuleThickness),se=1/J.fontMetrics().ptPerEm,ae=5*se;if(_.colSeparationType&&_.colSeparationType==="small"){var le=J.havingStyle(Style$1.SCRIPT).sizeMultiplier;ae=.2778*(le/J.sizeMultiplier)}var ue=_.colSeparationType==="CD"?calculateSize({number:3,unit:"ex"},J):12*se,de=3*se,pe=_.arraystretch*ue,fe=.7*pe,_e=.3*pe,ye=0;function be(Lt){for(var Ft=0;Ft<Lt.length;++Ft)Ft>0&&(ye+=.25),re.push({pos:ye,isDashed:Lt[Ft]})}for(be(te[0]),Z=0;Z<_.body.length;++Z){var Ae=_.body[Z],Ce=fe,Ee=_e;ne<Ae.length&&(ne=Ae.length);var Re=new Array(Ae.length);for(Q=0;Q<Ae.length;++Q){var Te=buildGroup$1(Ae[Q],J);Ee<Te.depth&&(Ee=Te.depth),Ce<Te.height&&(Ce=Te.height),Re[Q]=Te}var Me=_.rowGaps[Z],Ne=0;Me&&(Ne=calculateSize(Me,J),Ne>0&&(Ne+=_e,Ee<Ne&&(Ee=Ne),Ne=0)),_.addJot&&(Ee+=de),Re.height=Ce,Re.depth=Ee,ye+=Ce,Re.pos=ye,ye+=Ee+Ne,ie[Z]=Re,be(te[Z+1])}var Le=ye/2+J.fontMetrics().axisHeight,Ie=_.cols||[],Ge=[],He,Be,ze=[];if(_.tags&&_.tags.some(Lt=>Lt))for(Z=0;Z<ee;++Z){var Fe=ie[Z],$e=Fe.pos-Le,Xe=_.tags[Z],je=void 0;Xe===!0?je=buildCommon.makeSpan(["eqn-num"],[],J):Xe===!1?je=buildCommon.makeSpan([],[],J):je=buildCommon.makeSpan([],buildExpression$1(Xe,J,!0),J),je.depth=Fe.depth,je.height=Fe.height,ze.push({type:"elem",elem:je,shift:$e})}for(Q=0,Be=0;Q<ne||Be<Ie.length;++Q,++Be){for(var qe=Ie[Be]||{},Ze=!0;qe.type==="separator";){if(Ze||(He=buildCommon.makeSpan(["arraycolsep"],[]),He.style.width=makeEm(J.fontMetrics().doubleRuleSep),Ge.push(He)),qe.separator==="|"||qe.separator===":"){var st=qe.separator==="|"?"solid":"dashed",St=buildCommon.makeSpan(["vertical-separator"],[],J);St.style.height=makeEm(ye),St.style.borderRightWidth=makeEm(oe),St.style.borderRightStyle=st,St.style.margin="0 "+makeEm(-oe/2);var it=ye-Le;it&&(St.style.verticalAlign=makeEm(-it)),Ge.push(St)}else throw new ParseError("Invalid separator type: "+qe.separator);Be++,qe=Ie[Be]||{},Ze=!1}if(!(Q>=ne)){var lt=void 0;(Q>0||_.hskipBeforeAndAfter)&&(lt=utils.deflt(qe.pregap,ae),lt!==0&&(He=buildCommon.makeSpan(["arraycolsep"],[]),He.style.width=makeEm(lt),Ge.push(He)));var ft=[];for(Z=0;Z<ee;++Z){var kt=ie[Z],Ht=kt[Q];if(Ht){var Wt=kt.pos-Le;Ht.depth=kt.depth,Ht.height=kt.height,ft.push({type:"elem",elem:Ht,shift:Wt})}}ft=buildCommon.makeVList({positionType:"individualShift",children:ft},J),ft=buildCommon.makeSpan(["col-align-"+(qe.align||"c")],[ft]),Ge.push(ft),(Q<ne-1||_.hskipBeforeAndAfter)&&(lt=utils.deflt(qe.postgap,ae),lt!==0&&(He=buildCommon.makeSpan(["arraycolsep"],[]),He.style.width=makeEm(lt),Ge.push(He)))}}if(ie=buildCommon.makeSpan(["mtable"],Ge),re.length>0){for(var ni=buildCommon.makeLineSpan("hline",J,oe),jt=buildCommon.makeLineSpan("hdashline",J,oe),pt=[{type:"elem",elem:ie,shift:0}];re.length>0;){var Ke=re.pop(),Mt=Ke.pos-Le;Ke.isDashed?pt.push({type:"elem",elem:jt,shift:Mt}):pt.push({type:"elem",elem:ni,shift:Mt})}ie=buildCommon.makeVList({positionType:"individualShift",children:pt},J)}if(ze.length===0)return buildCommon.makeSpan(["mord"],[ie],J);var Bt=buildCommon.makeVList({positionType:"individualShift",children:ze},J);return Bt=buildCommon.makeSpan(["tag"],[Bt],J),buildCommon.makeFragment([ie,Bt])},alignMap={c:"center ",l:"left ",r:"right "},mathmlBuilder$5=function(_,J){for(var Z=[],Q=new mathMLTree.MathNode("mtd",[],["mtr-glue"]),ee=new mathMLTree.MathNode("mtd",[],["mml-eqn-num"]),te=0;te<_.body.length;te++){for(var ne=_.body[te],ie=[],re=0;re<ne.length;re++)ie.push(new mathMLTree.MathNode("mtd",[buildGroup(ne[re],J)]));_.tags&&_.tags[te]&&(ie.unshift(Q),ie.push(Q),_.leqno?ie.unshift(ee):ie.push(ee)),Z.push(new mathMLTree.MathNode("mtr",ie))}var oe=new mathMLTree.MathNode("mtable",Z),se=_.arraystretch===.5?.1:.16+_.arraystretch-1+(_.addJot?.09:0);oe.setAttribute("rowspacing",makeEm(se));var ae="",le="";if(_.cols&&_.cols.length>0){var ue=_.cols,de="",pe=!1,fe=0,_e=ue.length;ue[0].type==="separator"&&(ae+="top ",fe=1),ue[ue.length-1].type==="separator"&&(ae+="bottom ",_e-=1);for(var ye=fe;ye<_e;ye++)ue[ye].type==="align"?(le+=alignMap[ue[ye].align],pe&&(de+="none "),pe=!0):ue[ye].type==="separator"&&pe&&(de+=ue[ye].separator==="|"?"solid ":"dashed ",pe=!1);oe.setAttribute("columnalign",le.trim()),/[sd]/.test(de)&&oe.setAttribute("columnlines",de.trim())}if(_.colSeparationType==="align"){for(var be=_.cols||[],Ae="",Ce=1;Ce<be.length;Ce++)Ae+=Ce%2?"0em ":"1em ";oe.setAttribute("columnspacing",Ae.trim())}else _.colSeparationType==="alignat"||_.colSeparationType==="gather"?oe.setAttribute("columnspacing","0em"):_.colSeparationType==="small"?oe.setAttribute("columnspacing","0.2778em"):_.colSeparationType==="CD"?oe.setAttribute("columnspacing","0.5em"):oe.setAttribute("columnspacing","1em");var Ee="",Re=_.hLinesBeforeRow;ae+=Re[0].length>0?"left ":"",ae+=Re[Re.length-1].length>0?"right ":"";for(var Te=1;Te<Re.length-1;Te++)Ee+=Re[Te].length===0?"none ":Re[Te][0]?"dashed ":"solid ";return/[sd]/.test(Ee)&&oe.setAttribute("rowlines",Ee.trim()),ae!==""&&(oe=new mathMLTree.MathNode("menclose",[oe]),oe.setAttribute("notation",ae.trim())),_.arraystretch&&_.arraystretch<1&&(oe=new mathMLTree.MathNode("mstyle",[oe]),oe.setAttribute("scriptlevel","1")),oe},alignedHandler=function(_,J){_.envName.indexOf("ed")===-1&&validateAmsEnvironmentContext(_);var Z=[],Q=_.envName.indexOf("at")>-1?"alignat":"align",ee=_.envName==="split",te=parseArray(_.parser,{cols:Z,addJot:!0,autoTag:ee?void 0:getAutoTag(_.envName),emptySingleRow:!0,colSeparationType:Q,maxNumCols:ee?2:void 0,leqno:_.parser.settings.leqno},"display"),ne,ie=0,re={type:"ordgroup",mode:_.mode,body:[]};if(J[0]&&J[0].type==="ordgroup"){for(var oe="",se=0;se<J[0].body.length;se++){var ae=assertNodeType(J[0].body[se],"textord");oe+=ae.text}ne=Number(oe),ie=ne*2}var le=!ie;te.body.forEach(function(fe){for(var _e=1;_e<fe.length;_e+=2){var ye=assertNodeType(fe[_e],"styling"),be=assertNodeType(ye.body[0],"ordgroup");be.body.unshift(re)}if(le)ie<fe.length&&(ie=fe.length);else{var Ae=fe.length/2;if(ne<Ae)throw new ParseError("Too many math in a row: "+("expected "+ne+", but got "+Ae),fe[0])}});for(var ue=0;ue<ie;++ue){var de="r",pe=0;ue%2===1?de="l":ue>0&&le&&(pe=1),Z[ue]={type:"align",align:de,pregap:pe,postgap:0}}return te.colSeparationType=le?"align":"alignat",te};defineEnvironment({type:"array",names:["array","darray"],props:{numArgs:1},handler(G,_){var J=checkSymbolNodeType(_[0]),Z=J?[_[0]]:assertNodeType(_[0],"ordgroup").body,Q=Z.map(function(te){var ne=assertSymbolNodeType(te),ie=ne.text;if("lcr".indexOf(ie)!==-1)return{type:"align",align:ie};if(ie==="|")return{type:"separator",separator:"|"};if(ie===":")return{type:"separator",separator:":"};throw new ParseError("Unknown column alignment: "+ie,te)}),ee={cols:Q,hskipBeforeAndAfter:!0,maxNumCols:Q.length};return parseArray(G.parser,ee,dCellStyle(G.envName))},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(G){var _={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[G.envName.replace("*","")],J="c",Z={hskipBeforeAndAfter:!1,cols:[{type:"align",align:J}]};if(G.envName.charAt(G.envName.length-1)==="*"){var Q=G.parser;if(Q.consumeSpaces(),Q.fetch().text==="["){if(Q.consume(),Q.consumeSpaces(),J=Q.fetch().text,"lcr".indexOf(J)===-1)throw new ParseError("Expected l or c or r",Q.nextToken);Q.consume(),Q.consumeSpaces(),Q.expect("]"),Q.consume(),Z.cols=[{type:"align",align:J}]}}var ee=parseArray(G.parser,Z,dCellStyle(G.envName)),te=Math.max(0,...ee.body.map(ne=>ne.length));return ee.cols=new Array(te).fill({type:"align",align:J}),_?{type:"leftright",mode:G.mode,body:[ee],left:_[0],right:_[1],rightColor:void 0}:ee},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(G){var _={arraystretch:.5},J=parseArray(G.parser,_,"script");return J.colSeparationType="small",J},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["subarray"],props:{numArgs:1},handler(G,_){var J=checkSymbolNodeType(_[0]),Z=J?[_[0]]:assertNodeType(_[0],"ordgroup").body,Q=Z.map(function(te){var ne=assertSymbolNodeType(te),ie=ne.text;if("lc".indexOf(ie)!==-1)return{type:"align",align:ie};throw new ParseError("Unknown column alignment: "+ie,te)});if(Q.length>1)throw new ParseError("{subarray} can contain only one column");var ee={cols:Q,hskipBeforeAndAfter:!1,arraystretch:.5};if(ee=parseArray(G.parser,ee,"script"),ee.body.length>0&&ee.body[0].length>1)throw new ParseError("{subarray} can contain only one column");return ee},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(G){var _={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},J=parseArray(G.parser,_,dCellStyle(G.envName));return{type:"leftright",mode:G.mode,body:[J],left:G.envName.indexOf("r")>-1?".":"\\{",right:G.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:alignedHandler,htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(G){["gather","gather*"].includes(G.envName)&&validateAmsEnvironmentContext(G);var _={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:getAutoTag(G.envName),emptySingleRow:!0,leqno:G.parser.settings.leqno};return parseArray(G.parser,_,"display")},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:alignedHandler,htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(G){validateAmsEnvironmentContext(G);var _={autoTag:getAutoTag(G.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:G.parser.settings.leqno};return parseArray(G.parser,_,"display")},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["CD"],props:{numArgs:0},handler(G){return validateAmsEnvironmentContext(G),parseCD(G.parser)},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineMacro("\\nonumber","\\gdef\\@eqnsw{0}");defineMacro("\\notag","\\nonumber");defineFunction({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(G,_){throw new ParseError(G.funcName+" valid only within array environment")}});var environments=_environments;defineFunction({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(G,_){var{parser:J,funcName:Z}=G,Q=_[0];if(Q.type!=="ordgroup")throw new ParseError("Invalid environment name",Q);for(var ee="",te=0;te<Q.body.length;++te)ee+=assertNodeType(Q.body[te],"textord").text;if(Z==="\\begin"){if(!environments.hasOwnProperty(ee))throw new ParseError("No such environment: "+ee,Q);var ne=environments[ee],{args:ie,optArgs:re}=J.parseArguments("\\begin{"+ee+"}",ne),oe={mode:J.mode,envName:ee,parser:J},se=ne.handler(oe,ie,re);J.expect("\\end",!1);var ae=J.nextToken,le=assertNodeType(J.parseFunction(),"environment");if(le.name!==ee)throw new ParseError("Mismatch: \\begin{"+ee+"} matched by \\end{"+le.name+"}",ae);return se}return{type:"environment",mode:J.mode,name:ee,nameGroup:Q}}});var htmlBuilder$5=(G,_)=>{var J=G.font,Z=_.withFont(J);return buildGroup$1(G.body,Z)},mathmlBuilder$4=(G,_)=>{var J=G.font,Z=_.withFont(J);return buildGroup(G.body,Z)},fontAliases={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};defineFunction({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(G,_)=>{var{parser:J,funcName:Z}=G,Q=normalizeArgument(_[0]),ee=Z;return ee in fontAliases&&(ee=fontAliases[ee]),{type:"font",mode:J.mode,font:ee.slice(1),body:Q}},htmlBuilder:htmlBuilder$5,mathmlBuilder:mathmlBuilder$4});defineFunction({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(G,_)=>{var{parser:J}=G,Z=_[0],Q=utils.isCharacterBox(Z);return{type:"mclass",mode:J.mode,mclass:binrelClass(Z),body:[{type:"font",mode:J.mode,font:"boldsymbol",body:Z}],isCharacterBox:Q}}});defineFunction({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(G,_)=>{var{parser:J,funcName:Z,breakOnTokenText:Q}=G,{mode:ee}=J,te=J.parseExpression(!0,Q),ne="math"+Z.slice(1);return{type:"font",mode:ee,font:ne,body:{type:"ordgroup",mode:J.mode,body:te}}},htmlBuilder:htmlBuilder$5,mathmlBuilder:mathmlBuilder$4});var adjustStyle=(G,_)=>{var J=_;return G==="display"?J=J.id>=Style$1.SCRIPT.id?J.text():Style$1.DISPLAY:G==="text"&&J.size===Style$1.DISPLAY.size?J=Style$1.TEXT:G==="script"?J=Style$1.SCRIPT:G==="scriptscript"&&(J=Style$1.SCRIPTSCRIPT),J},htmlBuilder$4=(G,_)=>{var J=adjustStyle(G.size,_.style),Z=J.fracNum(),Q=J.fracDen(),ee;ee=_.havingStyle(Z);var te=buildGroup$1(G.numer,ee,_);if(G.continued){var ne=8.5/_.fontMetrics().ptPerEm,ie=3.5/_.fontMetrics().ptPerEm;te.height=te.height<ne?ne:te.height,te.depth=te.depth<ie?ie:te.depth}ee=_.havingStyle(Q);var re=buildGroup$1(G.denom,ee,_),oe,se,ae;G.hasBarLine?(G.barSize?(se=calculateSize(G.barSize,_),oe=buildCommon.makeLineSpan("frac-line",_,se)):oe=buildCommon.makeLineSpan("frac-line",_),se=oe.height,ae=oe.height):(oe=null,se=0,ae=_.fontMetrics().defaultRuleThickness);var le,ue,de;J.size===Style$1.DISPLAY.size||G.size==="display"?(le=_.fontMetrics().num1,se>0?ue=3*ae:ue=7*ae,de=_.fontMetrics().denom1):(se>0?(le=_.fontMetrics().num2,ue=ae):(le=_.fontMetrics().num3,ue=3*ae),de=_.fontMetrics().denom2);var pe;if(oe){var _e=_.fontMetrics().axisHeight;le-te.depth-(_e+.5*se)<ue&&(le+=ue-(le-te.depth-(_e+.5*se))),_e-.5*se-(re.height-de)<ue&&(de+=ue-(_e-.5*se-(re.height-de)));var ye=-(_e-.5*se);pe=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:re,shift:de},{type:"elem",elem:oe,shift:ye},{type:"elem",elem:te,shift:-le}]},_)}else{var fe=le-te.depth-(re.height-de);fe<ue&&(le+=.5*(ue-fe),de+=.5*(ue-fe)),pe=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:re,shift:de},{type:"elem",elem:te,shift:-le}]},_)}ee=_.havingStyle(J),pe.height*=ee.sizeMultiplier/_.sizeMultiplier,pe.depth*=ee.sizeMultiplier/_.sizeMultiplier;var be;J.size===Style$1.DISPLAY.size?be=_.fontMetrics().delim1:J.size===Style$1.SCRIPTSCRIPT.size?be=_.havingStyle(Style$1.SCRIPT).fontMetrics().delim2:be=_.fontMetrics().delim2;var Ae,Ce;return G.leftDelim==null?Ae=makeNullDelimiter(_,["mopen"]):Ae=delimiter.customSizedDelim(G.leftDelim,be,!0,_.havingStyle(J),G.mode,["mopen"]),G.continued?Ce=buildCommon.makeSpan([]):G.rightDelim==null?Ce=makeNullDelimiter(_,["mclose"]):Ce=delimiter.customSizedDelim(G.rightDelim,be,!0,_.havingStyle(J),G.mode,["mclose"]),buildCommon.makeSpan(["mord"].concat(ee.sizingClasses(_)),[Ae,buildCommon.makeSpan(["mfrac"],[pe]),Ce],_)},mathmlBuilder$3=(G,_)=>{var J=new mathMLTree.MathNode("mfrac",[buildGroup(G.numer,_),buildGroup(G.denom,_)]);if(!G.hasBarLine)J.setAttribute("linethickness","0px");else if(G.barSize){var Z=calculateSize(G.barSize,_);J.setAttribute("linethickness",makeEm(Z))}var Q=adjustStyle(G.size,_.style);if(Q.size!==_.style.size){J=new mathMLTree.MathNode("mstyle",[J]);var ee=Q.size===Style$1.DISPLAY.size?"true":"false";J.setAttribute("displaystyle",ee),J.setAttribute("scriptlevel","0")}if(G.leftDelim!=null||G.rightDelim!=null){var te=[];if(G.leftDelim!=null){var ne=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(G.leftDelim.replace("\\",""))]);ne.setAttribute("fence","true"),te.push(ne)}if(te.push(J),G.rightDelim!=null){var ie=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(G.rightDelim.replace("\\",""))]);ie.setAttribute("fence","true"),te.push(ie)}return makeRow(te)}return J};defineFunction({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(G,_)=>{var{parser:J,funcName:Z}=G,Q=_[0],ee=_[1],te,ne=null,ie=null,re="auto";switch(Z){case"\\dfrac":case"\\frac":case"\\tfrac":te=!0;break;case"\\\\atopfrac":te=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":te=!1,ne="(",ie=")";break;case"\\\\bracefrac":te=!1,ne="\\{",ie="\\}";break;case"\\\\brackfrac":te=!1,ne="[",ie="]";break;default:throw new Error("Unrecognized genfrac command")}switch(Z){case"\\dfrac":case"\\dbinom":re="display";break;case"\\tfrac":case"\\tbinom":re="text";break}return{type:"genfrac",mode:J.mode,continued:!1,numer:Q,denom:ee,hasBarLine:te,leftDelim:ne,rightDelim:ie,size:re,barSize:null}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});defineFunction({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(G,_)=>{var{parser:J,funcName:Z}=G,Q=_[0],ee=_[1];return{type:"genfrac",mode:J.mode,continued:!0,numer:Q,denom:ee,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});defineFunction({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(G){var{parser:_,funcName:J,token:Z}=G,Q;switch(J){case"\\over":Q="\\frac";break;case"\\choose":Q="\\binom";break;case"\\atop":Q="\\\\atopfrac";break;case"\\brace":Q="\\\\bracefrac";break;case"\\brack":Q="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:_.mode,replaceWith:Q,token:Z}}});var stylArray=["display","text","script","scriptscript"],delimFromValue=function(_){var J=null;return _.length>0&&(J=_,J=J==="."?null:J),J};defineFunction({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(G,_){var{parser:J}=G,Z=_[4],Q=_[5],ee=normalizeArgument(_[0]),te=ee.type==="atom"&&ee.family==="open"?delimFromValue(ee.text):null,ne=normalizeArgument(_[1]),ie=ne.type==="atom"&&ne.family==="close"?delimFromValue(ne.text):null,re=assertNodeType(_[2],"size"),oe,se=null;re.isBlank?oe=!0:(se=re.value,oe=se.number>0);var ae="auto",le=_[3];if(le.type==="ordgroup"){if(le.body.length>0){var ue=assertNodeType(le.body[0],"textord");ae=stylArray[Number(ue.text)]}}else le=assertNodeType(le,"textord"),ae=stylArray[Number(le.text)];return{type:"genfrac",mode:J.mode,numer:Z,denom:Q,continued:!1,hasBarLine:oe,barSize:se,leftDelim:te,rightDelim:ie,size:ae}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});defineFunction({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(G,_){var{parser:J,funcName:Z,token:Q}=G;return{type:"infix",mode:J.mode,replaceWith:"\\\\abovefrac",size:assertNodeType(_[0],"size").value,token:Q}}});defineFunction({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(G,_)=>{var{parser:J,funcName:Z}=G,Q=_[0],ee=assert(assertNodeType(_[1],"infix").size),te=_[2],ne=ee.number>0;return{type:"genfrac",mode:J.mode,numer:Q,denom:te,continued:!1,hasBarLine:ne,barSize:ee,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});var htmlBuilder$3=(G,_)=>{var J=_.style,Z,Q;G.type==="supsub"?(Z=G.sup?buildGroup$1(G.sup,_.havingStyle(J.sup()),_):buildGroup$1(G.sub,_.havingStyle(J.sub()),_),Q=assertNodeType(G.base,"horizBrace")):Q=assertNodeType(G,"horizBrace");var ee=buildGroup$1(Q.base,_.havingBaseStyle(Style$1.DISPLAY)),te=stretchy.svgSpan(Q,_),ne;if(Q.isOver?(ne=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:ee},{type:"kern",size:.1},{type:"elem",elem:te}]},_),ne.children[0].children[0].children[1].classes.push("svg-align")):(ne=buildCommon.makeVList({positionType:"bottom",positionData:ee.depth+.1+te.height,children:[{type:"elem",elem:te},{type:"kern",size:.1},{type:"elem",elem:ee}]},_),ne.children[0].children[0].children[0].classes.push("svg-align")),Z){var ie=buildCommon.makeSpan(["mord",Q.isOver?"mover":"munder"],[ne],_);Q.isOver?ne=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:ie},{type:"kern",size:.2},{type:"elem",elem:Z}]},_):ne=buildCommon.makeVList({positionType:"bottom",positionData:ie.depth+.2+Z.height+Z.depth,children:[{type:"elem",elem:Z},{type:"kern",size:.2},{type:"elem",elem:ie}]},_)}return buildCommon.makeSpan(["mord",Q.isOver?"mover":"munder"],[ne],_)},mathmlBuilder$2=(G,_)=>{var J=stretchy.mathMLnode(G.label);return new mathMLTree.MathNode(G.isOver?"mover":"munder",[buildGroup(G.base,_),J])};defineFunction({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(G,_){var{parser:J,funcName:Z}=G;return{type:"horizBrace",mode:J.mode,label:Z,isOver:/^\\over/.test(Z),base:_[0]}},htmlBuilder:htmlBuilder$3,mathmlBuilder:mathmlBuilder$2});defineFunction({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(G,_)=>{var{parser:J}=G,Z=_[1],Q=assertNodeType(_[0],"url").url;return J.settings.isTrusted({command:"\\href",url:Q})?{type:"href",mode:J.mode,href:Q,body:ordargument(Z)}:J.formatUnsupportedCmd("\\href")},htmlBuilder:(G,_)=>{var J=buildExpression$1(G.body,_,!1);return buildCommon.makeAnchor(G.href,[],J,_)},mathmlBuilder:(G,_)=>{var J=buildExpressionRow(G.body,_);return J instanceof MathNode||(J=new MathNode("mrow",[J])),J.setAttribute("href",G.href),J}});defineFunction({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(G,_)=>{var{parser:J}=G,Z=assertNodeType(_[0],"url").url;if(!J.settings.isTrusted({command:"\\url",url:Z}))return J.formatUnsupportedCmd("\\url");for(var Q=[],ee=0;ee<Z.length;ee++){var te=Z[ee];te==="~"&&(te="\\textasciitilde"),Q.push({type:"textord",mode:"text",text:te})}var ne={type:"text",mode:J.mode,font:"\\texttt",body:Q};return{type:"href",mode:J.mode,href:Z,body:ordargument(ne)}}});defineFunction({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(G,_){var{parser:J}=G;return{type:"hbox",mode:J.mode,body:ordargument(_[0])}},htmlBuilder(G,_){var J=buildExpression$1(G.body,_,!1);return buildCommon.makeFragment(J)},mathmlBuilder(G,_){return new mathMLTree.MathNode("mrow",buildExpression(G.body,_))}});defineFunction({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(G,_)=>{var{parser:J,funcName:Z,token:Q}=G,ee=assertNodeType(_[0],"raw").string,te=_[1];J.settings.strict&&J.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var ne,ie={};switch(Z){case"\\htmlClass":ie.class=ee,ne={command:"\\htmlClass",class:ee};break;case"\\htmlId":ie.id=ee,ne={command:"\\htmlId",id:ee};break;case"\\htmlStyle":ie.style=ee,ne={command:"\\htmlStyle",style:ee};break;case"\\htmlData":{for(var re=ee.split(","),oe=0;oe<re.length;oe++){var se=re[oe].split("=");if(se.length!==2)throw new ParseError("Error parsing key-value for \\htmlData");ie["data-"+se[0].trim()]=se[1].trim()}ne={command:"\\htmlData",attributes:ie};break}default:throw new Error("Unrecognized html command")}return J.settings.isTrusted(ne)?{type:"html",mode:J.mode,attributes:ie,body:ordargument(te)}:J.formatUnsupportedCmd(Z)},htmlBuilder:(G,_)=>{var J=buildExpression$1(G.body,_,!1),Z=["enclosing"];G.attributes.class&&Z.push(...G.attributes.class.trim().split(/\s+/));var Q=buildCommon.makeSpan(Z,J,_);for(var ee in G.attributes)ee!=="class"&&G.attributes.hasOwnProperty(ee)&&Q.setAttribute(ee,G.attributes[ee]);return Q},mathmlBuilder:(G,_)=>buildExpressionRow(G.body,_)});defineFunction({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(G,_)=>{var{parser:J}=G;return{type:"htmlmathml",mode:J.mode,html:ordargument(_[0]),mathml:ordargument(_[1])}},htmlBuilder:(G,_)=>{var J=buildExpression$1(G.html,_,!1);return buildCommon.makeFragment(J)},mathmlBuilder:(G,_)=>buildExpressionRow(G.mathml,_)});var sizeData=function(_){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(_))return{number:+_,unit:"bp"};var J=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(_);if(!J)throw new ParseError("Invalid size: '"+_+"' in \\includegraphics");var Z={number:+(J[1]+J[2]),unit:J[3]};if(!validUnit(Z))throw new ParseError("Invalid unit: '"+Z.unit+"' in \\includegraphics.");return Z};defineFunction({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(G,_,J)=>{var{parser:Z}=G,Q={number:0,unit:"em"},ee={number:.9,unit:"em"},te={number:0,unit:"em"},ne="";if(J[0])for(var ie=assertNodeType(J[0],"raw").string,re=ie.split(","),oe=0;oe<re.length;oe++){var se=re[oe].split("=");if(se.length===2){var ae=se[1].trim();switch(se[0].trim()){case"alt":ne=ae;break;case"width":Q=sizeData(ae);break;case"height":ee=sizeData(ae);break;case"totalheight":te=sizeData(ae);break;default:throw new ParseError("Invalid key: '"+se[0]+"' in \\includegraphics.")}}}var le=assertNodeType(_[0],"url").url;return ne===""&&(ne=le,ne=ne.replace(/^.*[\\/]/,""),ne=ne.substring(0,ne.lastIndexOf("."))),Z.settings.isTrusted({command:"\\includegraphics",url:le})?{type:"includegraphics",mode:Z.mode,alt:ne,width:Q,height:ee,totalheight:te,src:le}:Z.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(G,_)=>{var J=calculateSize(G.height,_),Z=0;G.totalheight.number>0&&(Z=calculateSize(G.totalheight,_)-J);var Q=0;G.width.number>0&&(Q=calculateSize(G.width,_));var ee={height:makeEm(J+Z)};Q>0&&(ee.width=makeEm(Q)),Z>0&&(ee.verticalAlign=makeEm(-Z));var te=new Img(G.src,G.alt,ee);return te.height=J,te.depth=Z,te},mathmlBuilder:(G,_)=>{var J=new mathMLTree.MathNode("mglyph",[]);J.setAttribute("alt",G.alt);var Z=calculateSize(G.height,_),Q=0;if(G.totalheight.number>0&&(Q=calculateSize(G.totalheight,_)-Z,J.setAttribute("valign",makeEm(-Q))),J.setAttribute("height",makeEm(Z+Q)),G.width.number>0){var ee=calculateSize(G.width,_);J.setAttribute("width",makeEm(ee))}return J.setAttribute("src",G.src),J}});defineFunction({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(G,_){var{parser:J,funcName:Z}=G,Q=assertNodeType(_[0],"size");if(J.settings.strict){var ee=Z[1]==="m",te=Q.value.unit==="mu";ee?(te||J.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+Z+" supports only mu units, "+("not "+Q.value.unit+" units")),J.mode!=="math"&&J.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+Z+" works only in math mode")):te&&J.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+Z+" doesn't support mu units")}return{type:"kern",mode:J.mode,dimension:Q.value}},htmlBuilder(G,_){return buildCommon.makeGlue(G.dimension,_)},mathmlBuilder(G,_){var J=calculateSize(G.dimension,_);return new mathMLTree.SpaceNode(J)}});defineFunction({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(G,_)=>{var{parser:J,funcName:Z}=G,Q=_[0];return{type:"lap",mode:J.mode,alignment:Z.slice(5),body:Q}},htmlBuilder:(G,_)=>{var J;G.alignment==="clap"?(J=buildCommon.makeSpan([],[buildGroup$1(G.body,_)]),J=buildCommon.makeSpan(["inner"],[J],_)):J=buildCommon.makeSpan(["inner"],[buildGroup$1(G.body,_)]);var Z=buildCommon.makeSpan(["fix"],[]),Q=buildCommon.makeSpan([G.alignment],[J,Z],_),ee=buildCommon.makeSpan(["strut"]);return ee.style.height=makeEm(Q.height+Q.depth),Q.depth&&(ee.style.verticalAlign=makeEm(-Q.depth)),Q.children.unshift(ee),Q=buildCommon.makeSpan(["thinbox"],[Q],_),buildCommon.makeSpan(["mord","vbox"],[Q],_)},mathmlBuilder:(G,_)=>{var J=new mathMLTree.MathNode("mpadded",[buildGroup(G.body,_)]);if(G.alignment!=="rlap"){var Z=G.alignment==="llap"?"-1":"-0.5";J.setAttribute("lspace",Z+"width")}return J.setAttribute("width","0px"),J}});defineFunction({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(G,_){var{funcName:J,parser:Z}=G,Q=Z.mode;Z.switchMode("math");var ee=J==="\\("?"\\)":"$",te=Z.parseExpression(!1,ee);return Z.expect(ee),Z.switchMode(Q),{type:"styling",mode:Z.mode,style:"text",body:te}}});defineFunction({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(G,_){throw new ParseError("Mismatched "+G.funcName)}});var chooseMathStyle=(G,_)=>{switch(_.style.size){case Style$1.DISPLAY.size:return G.display;case Style$1.TEXT.size:return G.text;case Style$1.SCRIPT.size:return G.script;case Style$1.SCRIPTSCRIPT.size:return G.scriptscript;default:return G.text}};defineFunction({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(G,_)=>{var{parser:J}=G;return{type:"mathchoice",mode:J.mode,display:ordargument(_[0]),text:ordargument(_[1]),script:ordargument(_[2]),scriptscript:ordargument(_[3])}},htmlBuilder:(G,_)=>{var J=chooseMathStyle(G,_),Z=buildExpression$1(J,_,!1);return buildCommon.makeFragment(Z)},mathmlBuilder:(G,_)=>{var J=chooseMathStyle(G,_);return buildExpressionRow(J,_)}});var assembleSupSub=(G,_,J,Z,Q,ee,te)=>{G=buildCommon.makeSpan([],[G]);var ne=J&&utils.isCharacterBox(J),ie,re;if(_){var oe=buildGroup$1(_,Z.havingStyle(Q.sup()),Z);re={elem:oe,kern:Math.max(Z.fontMetrics().bigOpSpacing1,Z.fontMetrics().bigOpSpacing3-oe.depth)}}if(J){var se=buildGroup$1(J,Z.havingStyle(Q.sub()),Z);ie={elem:se,kern:Math.max(Z.fontMetrics().bigOpSpacing2,Z.fontMetrics().bigOpSpacing4-se.height)}}var ae;if(re&&ie){var le=Z.fontMetrics().bigOpSpacing5+ie.elem.height+ie.elem.depth+ie.kern+G.depth+te;ae=buildCommon.makeVList({positionType:"bottom",positionData:le,children:[{type:"kern",size:Z.fontMetrics().bigOpSpacing5},{type:"elem",elem:ie.elem,marginLeft:makeEm(-ee)},{type:"kern",size:ie.kern},{type:"elem",elem:G},{type:"kern",size:re.kern},{type:"elem",elem:re.elem,marginLeft:makeEm(ee)},{type:"kern",size:Z.fontMetrics().bigOpSpacing5}]},Z)}else if(ie){var ue=G.height-te;ae=buildCommon.makeVList({positionType:"top",positionData:ue,children:[{type:"kern",size:Z.fontMetrics().bigOpSpacing5},{type:"elem",elem:ie.elem,marginLeft:makeEm(-ee)},{type:"kern",size:ie.kern},{type:"elem",elem:G}]},Z)}else if(re){var de=G.depth+te;ae=buildCommon.makeVList({positionType:"bottom",positionData:de,children:[{type:"elem",elem:G},{type:"kern",size:re.kern},{type:"elem",elem:re.elem,marginLeft:makeEm(ee)},{type:"kern",size:Z.fontMetrics().bigOpSpacing5}]},Z)}else return G;var pe=[ae];if(ie&&ee!==0&&!ne){var fe=buildCommon.makeSpan(["mspace"],[],Z);fe.style.marginRight=makeEm(ee),pe.unshift(fe)}return buildCommon.makeSpan(["mop","op-limits"],pe,Z)},noSuccessor=["\\smallint"],htmlBuilder$2=(G,_)=>{var J,Z,Q=!1,ee;G.type==="supsub"?(J=G.sup,Z=G.sub,ee=assertNodeType(G.base,"op"),Q=!0):ee=assertNodeType(G,"op");var te=_.style,ne=!1;te.size===Style$1.DISPLAY.size&&ee.symbol&&!noSuccessor.includes(ee.name)&&(ne=!0);var ie;if(ee.symbol){var re=ne?"Size2-Regular":"Size1-Regular",oe="";if((ee.name==="\\oiint"||ee.name==="\\oiiint")&&(oe=ee.name.slice(1),ee.name=oe==="oiint"?"\\iint":"\\iiint"),ie=buildCommon.makeSymbol(ee.name,re,"math",_,["mop","op-symbol",ne?"large-op":"small-op"]),oe.length>0){var se=ie.italic,ae=buildCommon.staticSvg(oe+"Size"+(ne?"2":"1"),_);ie=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:ie,shift:0},{type:"elem",elem:ae,shift:ne?.08:0}]},_),ee.name="\\"+oe,ie.classes.unshift("mop"),ie.italic=se}}else if(ee.body){var le=buildExpression$1(ee.body,_,!0);le.length===1&&le[0]instanceof SymbolNode?(ie=le[0],ie.classes[0]="mop"):ie=buildCommon.makeSpan(["mop"],le,_)}else{for(var ue=[],de=1;de<ee.name.length;de++)ue.push(buildCommon.mathsym(ee.name[de],ee.mode,_));ie=buildCommon.makeSpan(["mop"],ue,_)}var pe=0,fe=0;return(ie instanceof SymbolNode||ee.name==="\\oiint"||ee.name==="\\oiiint")&&!ee.suppressBaseShift&&(pe=(ie.height-ie.depth)/2-_.fontMetrics().axisHeight,fe=ie.italic),Q?assembleSupSub(ie,J,Z,_,te,fe,pe):(pe&&(ie.style.position="relative",ie.style.top=makeEm(pe)),ie)},mathmlBuilder$1=(G,_)=>{var J;if(G.symbol)J=new MathNode("mo",[makeText(G.name,G.mode)]),noSuccessor.includes(G.name)&&J.setAttribute("largeop","false");else if(G.body)J=new MathNode("mo",buildExpression(G.body,_));else{J=new MathNode("mi",[new TextNode(G.name.slice(1))]);var Z=new MathNode("mo",[makeText("","text")]);G.parentIsSupSub?J=new MathNode("mrow",[J,Z]):J=newDocumentFragment([J,Z])}return J},singleCharBigOps={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};defineFunction({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(G,_)=>{var{parser:J,funcName:Z}=G,Q=Z;return Q.length===1&&(Q=singleCharBigOps[Q]),{type:"op",mode:J.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:Q}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(G,_)=>{var{parser:J}=G,Z=_[0];return{type:"op",mode:J.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ordargument(Z)}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});var singleCharIntegrals={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};defineFunction({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(G){var{parser:_,funcName:J}=G;return{type:"op",mode:_.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:J}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(G){var{parser:_,funcName:J}=G;return{type:"op",mode:_.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:J}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(G){var{parser:_,funcName:J}=G,Z=J;return Z.length===1&&(Z=singleCharIntegrals[Z]),{type:"op",mode:_.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:Z}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});var htmlBuilder$1=(G,_)=>{var J,Z,Q=!1,ee;G.type==="supsub"?(J=G.sup,Z=G.sub,ee=assertNodeType(G.base,"operatorname"),Q=!0):ee=assertNodeType(G,"operatorname");var te;if(ee.body.length>0){for(var ne=ee.body.map(se=>{var ae=se.text;return typeof ae=="string"?{type:"textord",mode:se.mode,text:ae}:se}),ie=buildExpression$1(ne,_.withFont("mathrm"),!0),re=0;re<ie.length;re++){var oe=ie[re];oe instanceof SymbolNode&&(oe.text=oe.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}te=buildCommon.makeSpan(["mop"],ie,_)}else te=buildCommon.makeSpan(["mop"],[],_);return Q?assembleSupSub(te,J,Z,_,_.style,0,0):te},mathmlBuilder=(G,_)=>{for(var J=buildExpression(G.body,_.withFont("mathrm")),Z=!0,Q=0;Q<J.length;Q++){var ee=J[Q];if(!(ee instanceof mathMLTree.SpaceNode))if(ee instanceof mathMLTree.MathNode)switch(ee.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var te=ee.children[0];ee.children.length===1&&te instanceof mathMLTree.TextNode?te.text=te.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):Z=!1;break}default:Z=!1}else Z=!1}if(Z){var ne=J.map(oe=>oe.toText()).join("");J=[new mathMLTree.TextNode(ne)]}var ie=new mathMLTree.MathNode("mi",J);ie.setAttribute("mathvariant","normal");var re=new mathMLTree.MathNode("mo",[makeText("","text")]);return G.parentIsSupSub?new mathMLTree.MathNode("mrow",[ie,re]):mathMLTree.newDocumentFragment([ie,re])};defineFunction({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(G,_)=>{var{parser:J,funcName:Z}=G,Q=_[0];return{type:"operatorname",mode:J.mode,body:ordargument(Q),alwaysHandleSupSub:Z==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:htmlBuilder$1,mathmlBuilder});defineMacro("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");defineFunctionBuilders({type:"ordgroup",htmlBuilder(G,_){return G.semisimple?buildCommon.makeFragment(buildExpression$1(G.body,_,!1)):buildCommon.makeSpan(["mord"],buildExpression$1(G.body,_,!0),_)},mathmlBuilder(G,_){return buildExpressionRow(G.body,_,!0)}});defineFunction({type:"overline",names:["\\overline"],props:{numArgs:1},handler(G,_){var{parser:J}=G,Z=_[0];return{type:"overline",mode:J.mode,body:Z}},htmlBuilder(G,_){var J=buildGroup$1(G.body,_.havingCrampedStyle()),Z=buildCommon.makeLineSpan("overline-line",_),Q=_.fontMetrics().defaultRuleThickness,ee=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:J},{type:"kern",size:3*Q},{type:"elem",elem:Z},{type:"kern",size:Q}]},_);return buildCommon.makeSpan(["mord","overline"],[ee],_)},mathmlBuilder(G,_){var J=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode("")]);J.setAttribute("stretchy","true");var Z=new mathMLTree.MathNode("mover",[buildGroup(G.body,_),J]);return Z.setAttribute("accent","true"),Z}});defineFunction({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(G,_)=>{var{parser:J}=G,Z=_[0];return{type:"phantom",mode:J.mode,body:ordargument(Z)}},htmlBuilder:(G,_)=>{var J=buildExpression$1(G.body,_.withPhantom(),!1);return buildCommon.makeFragment(J)},mathmlBuilder:(G,_)=>{var J=buildExpression(G.body,_);return new mathMLTree.MathNode("mphantom",J)}});defineFunction({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(G,_)=>{var{parser:J}=G,Z=_[0];return{type:"hphantom",mode:J.mode,body:Z}},htmlBuilder:(G,_)=>{var J=buildCommon.makeSpan([],[buildGroup$1(G.body,_.withPhantom())]);if(J.height=0,J.depth=0,J.children)for(var Z=0;Z<J.children.length;Z++)J.children[Z].height=0,J.children[Z].depth=0;return J=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:J}]},_),buildCommon.makeSpan(["mord"],[J],_)},mathmlBuilder:(G,_)=>{var J=buildExpression(ordargument(G.body),_),Z=new mathMLTree.MathNode("mphantom",J),Q=new mathMLTree.MathNode("mpadded",[Z]);return Q.setAttribute("height","0px"),Q.setAttribute("depth","0px"),Q}});defineFunction({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(G,_)=>{var{parser:J}=G,Z=_[0];return{type:"vphantom",mode:J.mode,body:Z}},htmlBuilder:(G,_)=>{var J=buildCommon.makeSpan(["inner"],[buildGroup$1(G.body,_.withPhantom())]),Z=buildCommon.makeSpan(["fix"],[]);return buildCommon.makeSpan(["mord","rlap"],[J,Z],_)},mathmlBuilder:(G,_)=>{var J=buildExpression(ordargument(G.body),_),Z=new mathMLTree.MathNode("mphantom",J),Q=new mathMLTree.MathNode("mpadded",[Z]);return Q.setAttribute("width","0px"),Q}});defineFunction({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(G,_){var{parser:J}=G,Z=assertNodeType(_[0],"size").value,Q=_[1];return{type:"raisebox",mode:J.mode,dy:Z,body:Q}},htmlBuilder(G,_){var J=buildGroup$1(G.body,_),Z=calculateSize(G.dy,_);return buildCommon.makeVList({positionType:"shift",positionData:-Z,children:[{type:"elem",elem:J}]},_)},mathmlBuilder(G,_){var J=new mathMLTree.MathNode("mpadded",[buildGroup(G.body,_)]),Z=G.dy.number+G.dy.unit;return J.setAttribute("voffset",Z),J}});defineFunction({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(G){var{parser:_}=G;return{type:"internal",mode:_.mode}}});defineFunction({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(G,_,J){var{parser:Z}=G,Q=J[0],ee=assertNodeType(_[0],"size"),te=assertNodeType(_[1],"size");return{type:"rule",mode:Z.mode,shift:Q&&assertNodeType(Q,"size").value,width:ee.value,height:te.value}},htmlBuilder(G,_){var J=buildCommon.makeSpan(["mord","rule"],[],_),Z=calculateSize(G.width,_),Q=calculateSize(G.height,_),ee=G.shift?calculateSize(G.shift,_):0;return J.style.borderRightWidth=makeEm(Z),J.style.borderTopWidth=makeEm(Q),J.style.bottom=makeEm(ee),J.width=Z,J.height=Q+ee,J.depth=-ee,J.maxFontSize=Q*1.125*_.sizeMultiplier,J},mathmlBuilder(G,_){var J=calculateSize(G.width,_),Z=calculateSize(G.height,_),Q=G.shift?calculateSize(G.shift,_):0,ee=_.color&&_.getColor()||"black",te=new mathMLTree.MathNode("mspace");te.setAttribute("mathbackground",ee),te.setAttribute("width",makeEm(J)),te.setAttribute("height",makeEm(Z));var ne=new mathMLTree.MathNode("mpadded",[te]);return Q>=0?ne.setAttribute("height",makeEm(Q)):(ne.setAttribute("height",makeEm(Q)),ne.setAttribute("depth",makeEm(-Q))),ne.setAttribute("voffset",makeEm(Q)),ne}});function sizingGroup(G,_,J){for(var Z=buildExpression$1(G,_,!1),Q=_.sizeMultiplier/J.sizeMultiplier,ee=0;ee<Z.length;ee++){var te=Z[ee].classes.indexOf("sizing");te<0?Array.prototype.push.apply(Z[ee].classes,_.sizingClasses(J)):Z[ee].classes[te+1]==="reset-size"+_.size&&(Z[ee].classes[te+1]="reset-size"+J.size),Z[ee].height*=Q,Z[ee].depth*=Q}return buildCommon.makeFragment(Z)}var sizeFuncs=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],htmlBuilder=(G,_)=>{var J=_.havingSize(G.size);return sizingGroup(G.body,J,_)};defineFunction({type:"sizing",names:sizeFuncs,props:{numArgs:0,allowedInText:!0},handler:(G,_)=>{var{breakOnTokenText:J,funcName:Z,parser:Q}=G,ee=Q.parseExpression(!1,J);return{type:"sizing",mode:Q.mode,size:sizeFuncs.indexOf(Z)+1,body:ee}},htmlBuilder,mathmlBuilder:(G,_)=>{var J=_.havingSize(G.size),Z=buildExpression(G.body,J),Q=new mathMLTree.MathNode("mstyle",Z);return Q.setAttribute("mathsize",makeEm(J.sizeMultiplier)),Q}});defineFunction({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(G,_,J)=>{var{parser:Z}=G,Q=!1,ee=!1,te=J[0]&&assertNodeType(J[0],"ordgroup");if(te)for(var ne="",ie=0;ie<te.body.length;++ie){var re=te.body[ie];if(ne=re.text,ne==="t")Q=!0;else if(ne==="b")ee=!0;else{Q=!1,ee=!1;break}}else Q=!0,ee=!0;var oe=_[0];return{type:"smash",mode:Z.mode,body:oe,smashHeight:Q,smashDepth:ee}},htmlBuilder:(G,_)=>{var J=buildCommon.makeSpan([],[buildGroup$1(G.body,_)]);if(!G.smashHeight&&!G.smashDepth)return J;if(G.smashHeight&&(J.height=0,J.children))for(var Z=0;Z<J.children.length;Z++)J.children[Z].height=0;if(G.smashDepth&&(J.depth=0,J.children))for(var Q=0;Q<J.children.length;Q++)J.children[Q].depth=0;var ee=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:J}]},_);return buildCommon.makeSpan(["mord"],[ee],_)},mathmlBuilder:(G,_)=>{var J=new mathMLTree.MathNode("mpadded",[buildGroup(G.body,_)]);return G.smashHeight&&J.setAttribute("height","0px"),G.smashDepth&&J.setAttribute("depth","0px"),J}});defineFunction({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(G,_,J){var{parser:Z}=G,Q=J[0],ee=_[0];return{type:"sqrt",mode:Z.mode,body:ee,index:Q}},htmlBuilder(G,_){var J=buildGroup$1(G.body,_.havingCrampedStyle());J.height===0&&(J.height=_.fontMetrics().xHeight),J=buildCommon.wrapFragment(J,_);var Z=_.fontMetrics(),Q=Z.defaultRuleThickness,ee=Q;_.style.id<Style$1.TEXT.id&&(ee=_.fontMetrics().xHeight);var te=Q+ee/4,ne=J.height+J.depth+te+Q,{span:ie,ruleWidth:re,advanceWidth:oe}=delimiter.sqrtImage(ne,_),se=ie.height-re;se>J.height+J.depth+te&&(te=(te+se-J.height-J.depth)/2);var ae=ie.height-J.height-te-re;J.style.paddingLeft=makeEm(oe);var le=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:J,wrapperClasses:["svg-align"]},{type:"kern",size:-(J.height+ae)},{type:"elem",elem:ie},{type:"kern",size:re}]},_);if(G.index){var ue=_.havingStyle(Style$1.SCRIPTSCRIPT),de=buildGroup$1(G.index,ue,_),pe=.6*(le.height-le.depth),fe=buildCommon.makeVList({positionType:"shift",positionData:-pe,children:[{type:"elem",elem:de}]},_),_e=buildCommon.makeSpan(["root"],[fe]);return buildCommon.makeSpan(["mord","sqrt"],[_e,le],_)}else return buildCommon.makeSpan(["mord","sqrt"],[le],_)},mathmlBuilder(G,_){var{body:J,index:Z}=G;return Z?new mathMLTree.MathNode("mroot",[buildGroup(J,_),buildGroup(Z,_)]):new mathMLTree.MathNode("msqrt",[buildGroup(J,_)])}});var styleMap={display:Style$1.DISPLAY,text:Style$1.TEXT,script:Style$1.SCRIPT,scriptscript:Style$1.SCRIPTSCRIPT};defineFunction({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(G,_){var{breakOnTokenText:J,funcName:Z,parser:Q}=G,ee=Q.parseExpression(!0,J),te=Z.slice(1,Z.length-5);return{type:"styling",mode:Q.mode,style:te,body:ee}},htmlBuilder(G,_){var J=styleMap[G.style],Z=_.havingStyle(J).withFont("");return sizingGroup(G.body,Z,_)},mathmlBuilder(G,_){var J=styleMap[G.style],Z=_.havingStyle(J),Q=buildExpression(G.body,Z),ee=new mathMLTree.MathNode("mstyle",Q),te={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},ne=te[G.style];return ee.setAttribute("scriptlevel",ne[0]),ee.setAttribute("displaystyle",ne[1]),ee}});var htmlBuilderDelegate=function(_,J){var Z=_.base;if(Z)if(Z.type==="op"){var Q=Z.limits&&(J.style.size===Style$1.DISPLAY.size||Z.alwaysHandleSupSub);return Q?htmlBuilder$2:null}else if(Z.type==="operatorname"){var ee=Z.alwaysHandleSupSub&&(J.style.size===Style$1.DISPLAY.size||Z.limits);return ee?htmlBuilder$1:null}else{if(Z.type==="accent")return utils.isCharacterBox(Z.base)?htmlBuilder$a:null;if(Z.type==="horizBrace"){var te=!_.sub;return te===Z.isOver?htmlBuilder$3:null}else return null}else return null};defineFunctionBuilders({type:"supsub",htmlBuilder(G,_){var J=htmlBuilderDelegate(G,_);if(J)return J(G,_);var{base:Z,sup:Q,sub:ee}=G,te=buildGroup$1(Z,_),ne,ie,re=_.fontMetrics(),oe=0,se=0,ae=Z&&utils.isCharacterBox(Z);if(Q){var le=_.havingStyle(_.style.sup());ne=buildGroup$1(Q,le,_),ae||(oe=te.height-le.fontMetrics().supDrop*le.sizeMultiplier/_.sizeMultiplier)}if(ee){var ue=_.havingStyle(_.style.sub());ie=buildGroup$1(ee,ue,_),ae||(se=te.depth+ue.fontMetrics().subDrop*ue.sizeMultiplier/_.sizeMultiplier)}var de;_.style===Style$1.DISPLAY?de=re.sup1:_.style.cramped?de=re.sup3:de=re.sup2;var pe=_.sizeMultiplier,fe=makeEm(.5/re.ptPerEm/pe),_e=null;if(ie){var ye=G.base&&G.base.type==="op"&&G.base.name&&(G.base.name==="\\oiint"||G.base.name==="\\oiiint");(te instanceof SymbolNode||ye)&&(_e=makeEm(-te.italic))}var be;if(ne&&ie){oe=Math.max(oe,de,ne.depth+.25*re.xHeight),se=Math.max(se,re.sub2);var Ae=re.defaultRuleThickness,Ce=4*Ae;if(oe-ne.depth-(ie.height-se)<Ce){se=Ce-(oe-ne.depth)+ie.height;var Ee=.8*re.xHeight-(oe-ne.depth);Ee>0&&(oe+=Ee,se-=Ee)}var Re=[{type:"elem",elem:ie,shift:se,marginRight:fe,marginLeft:_e},{type:"elem",elem:ne,shift:-oe,marginRight:fe}];be=buildCommon.makeVList({positionType:"individualShift",children:Re},_)}else if(ie){se=Math.max(se,re.sub1,ie.height-.8*re.xHeight);var Te=[{type:"elem",elem:ie,marginLeft:_e,marginRight:fe}];be=buildCommon.makeVList({positionType:"shift",positionData:se,children:Te},_)}else if(ne)oe=Math.max(oe,de,ne.depth+.25*re.xHeight),be=buildCommon.makeVList({positionType:"shift",positionData:-oe,children:[{type:"elem",elem:ne,marginRight:fe}]},_);else throw new Error("supsub must have either sup or sub.");var Me=getTypeOfDomTree(te,"right")||"mord";return buildCommon.makeSpan([Me],[te,buildCommon.makeSpan(["msupsub"],[be])],_)},mathmlBuilder(G,_){var J=!1,Z,Q;G.base&&G.base.type==="horizBrace"&&(Q=!!G.sup,Q===G.base.isOver&&(J=!0,Z=G.base.isOver)),G.base&&(G.base.type==="op"||G.base.type==="operatorname")&&(G.base.parentIsSupSub=!0);var ee=[buildGroup(G.base,_)];G.sub&&ee.push(buildGroup(G.sub,_)),G.sup&&ee.push(buildGroup(G.sup,_));var te;if(J)te=Z?"mover":"munder";else if(G.sub)if(G.sup){var re=G.base;re&&re.type==="op"&&re.limits&&_.style===Style$1.DISPLAY||re&&re.type==="operatorname"&&re.alwaysHandleSupSub&&(_.style===Style$1.DISPLAY||re.limits)?te="munderover":te="msubsup"}else{var ie=G.base;ie&&ie.type==="op"&&ie.limits&&(_.style===Style$1.DISPLAY||ie.alwaysHandleSupSub)||ie&&ie.type==="operatorname"&&ie.alwaysHandleSupSub&&(ie.limits||_.style===Style$1.DISPLAY)?te="munder":te="msub"}else{var ne=G.base;ne&&ne.type==="op"&&ne.limits&&(_.style===Style$1.DISPLAY||ne.alwaysHandleSupSub)||ne&&ne.type==="operatorname"&&ne.alwaysHandleSupSub&&(ne.limits||_.style===Style$1.DISPLAY)?te="mover":te="msup"}return new mathMLTree.MathNode(te,ee)}});defineFunctionBuilders({type:"atom",htmlBuilder(G,_){return buildCommon.mathsym(G.text,G.mode,_,["m"+G.family])},mathmlBuilder(G,_){var J=new mathMLTree.MathNode("mo",[makeText(G.text,G.mode)]);if(G.family==="bin"){var Z=getVariant(G,_);Z==="bold-italic"&&J.setAttribute("mathvariant",Z)}else G.family==="punct"?J.setAttribute("separator","true"):(G.family==="open"||G.family==="close")&&J.setAttribute("stretchy","false");return J}});var defaultVariant={mi:"italic",mn:"normal",mtext:"normal"};defineFunctionBuilders({type:"mathord",htmlBuilder(G,_){return buildCommon.makeOrd(G,_,"mathord")},mathmlBuilder(G,_){var J=new mathMLTree.MathNode("mi",[makeText(G.text,G.mode,_)]),Z=getVariant(G,_)||"italic";return Z!==defaultVariant[J.type]&&J.setAttribute("mathvariant",Z),J}});defineFunctionBuilders({type:"textord",htmlBuilder(G,_){return buildCommon.makeOrd(G,_,"textord")},mathmlBuilder(G,_){var J=makeText(G.text,G.mode,_),Z=getVariant(G,_)||"normal",Q;return G.mode==="text"?Q=new mathMLTree.MathNode("mtext",[J]):/[0-9]/.test(G.text)?Q=new mathMLTree.MathNode("mn",[J]):G.text==="\\prime"?Q=new mathMLTree.MathNode("mo",[J]):Q=new mathMLTree.MathNode("mi",[J]),Z!==defaultVariant[Q.type]&&Q.setAttribute("mathvariant",Z),Q}});var cssSpace={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},regularSpace={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};defineFunctionBuilders({type:"spacing",htmlBuilder(G,_){if(regularSpace.hasOwnProperty(G.text)){var J=regularSpace[G.text].className||"";if(G.mode==="text"){var Z=buildCommon.makeOrd(G,_,"textord");return Z.classes.push(J),Z}else return buildCommon.makeSpan(["mspace",J],[buildCommon.mathsym(G.text,G.mode,_)],_)}else{if(cssSpace.hasOwnProperty(G.text))return buildCommon.makeSpan(["mspace",cssSpace[G.text]],[],_);throw new ParseError('Unknown type of space "'+G.text+'"')}},mathmlBuilder(G,_){var J;if(regularSpace.hasOwnProperty(G.text))J=new mathMLTree.MathNode("mtext",[new mathMLTree.TextNode("")]);else{if(cssSpace.hasOwnProperty(G.text))return new mathMLTree.MathNode("mspace");throw new ParseError('Unknown type of space "'+G.text+'"')}return J}});var pad=()=>{var G=new mathMLTree.MathNode("mtd",[]);return G.setAttribute("width","50%"),G};defineFunctionBuilders({type:"tag",mathmlBuilder(G,_){var J=new mathMLTree.MathNode("mtable",[new mathMLTree.MathNode("mtr",[pad(),new mathMLTree.MathNode("mtd",[buildExpressionRow(G.body,_)]),pad(),new mathMLTree.MathNode("mtd",[buildExpressionRow(G.tag,_)])])]);return J.setAttribute("width","100%"),J}});var textFontFamilies={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},textFontWeights={"\\textbf":"textbf","\\textmd":"textmd"},textFontShapes={"\\textit":"textit","\\textup":"textup"},optionsWithFont=(G,_)=>{var J=G.font;if(J){if(textFontFamilies[J])return _.withTextFontFamily(textFontFamilies[J]);if(textFontWeights[J])return _.withTextFontWeight(textFontWeights[J]);if(J==="\\emph")return _.fontShape==="textit"?_.withTextFontShape("textup"):_.withTextFontShape("textit")}else return _;return _.withTextFontShape(textFontShapes[J])};defineFunction({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(G,_){var{parser:J,funcName:Z}=G,Q=_[0];return{type:"text",mode:J.mode,body:ordargument(Q),font:Z}},htmlBuilder(G,_){var J=optionsWithFont(G,_),Z=buildExpression$1(G.body,J,!0);return buildCommon.makeSpan(["mord","text"],Z,J)},mathmlBuilder(G,_){var J=optionsWithFont(G,_);return buildExpressionRow(G.body,J)}});defineFunction({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(G,_){var{parser:J}=G;return{type:"underline",mode:J.mode,body:_[0]}},htmlBuilder(G,_){var J=buildGroup$1(G.body,_),Z=buildCommon.makeLineSpan("underline-line",_),Q=_.fontMetrics().defaultRuleThickness,ee=buildCommon.makeVList({positionType:"top",positionData:J.height,children:[{type:"kern",size:Q},{type:"elem",elem:Z},{type:"kern",size:3*Q},{type:"elem",elem:J}]},_);return buildCommon.makeSpan(["mord","underline"],[ee],_)},mathmlBuilder(G,_){var J=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode("")]);J.setAttribute("stretchy","true");var Z=new mathMLTree.MathNode("munder",[buildGroup(G.body,_),J]);return Z.setAttribute("accentunder","true"),Z}});defineFunction({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(G,_){var{parser:J}=G;return{type:"vcenter",mode:J.mode,body:_[0]}},htmlBuilder(G,_){var J=buildGroup$1(G.body,_),Z=_.fontMetrics().axisHeight,Q=.5*(J.height-Z-(J.depth+Z));return buildCommon.makeVList({positionType:"shift",positionData:Q,children:[{type:"elem",elem:J}]},_)},mathmlBuilder(G,_){return new mathMLTree.MathNode("mpadded",[buildGroup(G.body,_)],["vcenter"])}});defineFunction({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(G,_,J){throw new ParseError("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(G,_){for(var J=makeVerb(G),Z=[],Q=_.havingStyle(_.style.text()),ee=0;ee<J.length;ee++){var te=J[ee];te==="~"&&(te="\\textasciitilde"),Z.push(buildCommon.makeSymbol(te,"Typewriter-Regular",G.mode,Q,["mord","texttt"]))}return buildCommon.makeSpan(["mord","text"].concat(Q.sizingClasses(_)),buildCommon.tryCombineChars(Z),Q)},mathmlBuilder(G,_){var J=new mathMLTree.TextNode(makeVerb(G)),Z=new mathMLTree.MathNode("mtext",[J]);return Z.setAttribute("mathvariant","monospace"),Z}});var makeVerb=G=>G.body.replace(/ /g,G.star?"":""),functions=_functions;defineMacro("\\noexpand",function(G){var _=G.popToken();return G.isExpandable(_.text)&&(_.noexpand=!0,_.treatAsRelax=!0),{tokens:[_],numArgs:0}});defineMacro("\\expandafter",function(G){var _=G.popToken();return G.expandOnce(!0),{tokens:[_],numArgs:0}});defineMacro("\\@firstoftwo",function(G){var _=G.consumeArgs(2);return{tokens:_[0],numArgs:0}});defineMacro("\\@secondoftwo",function(G){var _=G.consumeArgs(2);return{tokens:_[1],numArgs:0}});defineMacro("\\@ifnextchar",function(G){var _=G.consumeArgs(3);G.consumeSpaces();var J=G.future();return _[0].length===1&&_[0][0].text===J.text?{tokens:_[1],numArgs:0}:{tokens:_[2],numArgs:0}});defineMacro("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");defineMacro("\\TextOrMath",function(G){var _=G.consumeArgs(2);return G.mode==="text"?{tokens:_[0],numArgs:0}:{tokens:_[1],numArgs:0}});var digitToNumber={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};defineMacro("\\char",function(G){var _=G.popToken(),J,Z="";if(_.text==="'")J=8,_=G.popToken();else if(_.text==='"')J=16,_=G.popToken();else if(_.text==="`")if(_=G.popToken(),_.text[0]==="\\")Z=_.text.charCodeAt(1);else{if(_.text==="EOF")throw new ParseError("\\char` missing argument");Z=_.text.charCodeAt(0)}else J=10;if(J){if(Z=digitToNumber[_.text],Z==null||Z>=J)throw new ParseError("Invalid base-"+J+" digit "+_.text);for(var Q;(Q=digitToNumber[G.future().text])!=null&&Q<J;)Z*=J,Z+=Q,G.popToken()}return"\\@char{"+Z+"}"});var newcommand=(G,_,J,Z)=>{var Q=G.consumeArg().tokens;if(Q.length!==1)throw new ParseError("\\newcommand's first argument must be a macro name");var ee=Q[0].text,te=G.isDefined(ee);if(te&&!_)throw new ParseError("\\newcommand{"+ee+"} attempting to redefine "+(ee+"; use \\renewcommand"));if(!te&&!J)throw new ParseError("\\renewcommand{"+ee+"} when command "+ee+" does not yet exist; use \\newcommand");var ne=0;if(Q=G.consumeArg().tokens,Q.length===1&&Q[0].text==="["){for(var ie="",re=G.expandNextToken();re.text!=="]"&&re.text!=="EOF";)ie+=re.text,re=G.expandNextToken();if(!ie.match(/^\s*[0-9]+\s*$/))throw new ParseError("Invalid number of arguments: "+ie);ne=parseInt(ie),Q=G.consumeArg().tokens}return te&&Z||G.macros.set(ee,{tokens:Q,numArgs:ne}),""};defineMacro("\\newcommand",G=>newcommand(G,!1,!0,!1));defineMacro("\\renewcommand",G=>newcommand(G,!0,!1,!1));defineMacro("\\providecommand",G=>newcommand(G,!0,!0,!0));defineMacro("\\message",G=>{var _=G.consumeArgs(1)[0];return console.log(_.reverse().map(J=>J.text).join("")),""});defineMacro("\\errmessage",G=>{var _=G.consumeArgs(1)[0];return console.error(_.reverse().map(J=>J.text).join("")),""});defineMacro("\\show",G=>{var _=G.popToken(),J=_.text;return console.log(_,G.macros.get(J),functions[J],symbols.math[J],symbols.text[J]),""});defineMacro("\\bgroup","{");defineMacro("\\egroup","}");defineMacro("~","\\nobreakspace");defineMacro("\\lq","`");defineMacro("\\rq","'");defineMacro("\\aa","\\r a");defineMacro("\\AA","\\r A");defineMacro("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");defineMacro("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");defineMacro("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");defineMacro("","\\mathscr{B}");defineMacro("","\\mathscr{E}");defineMacro("","\\mathscr{F}");defineMacro("","\\mathscr{H}");defineMacro("","\\mathscr{I}");defineMacro("","\\mathscr{L}");defineMacro("","\\mathscr{M}");defineMacro("","\\mathscr{R}");defineMacro("","\\mathfrak{C}");defineMacro("","\\mathfrak{H}");defineMacro("","\\mathfrak{Z}");defineMacro("\\Bbbk","\\Bbb{k}");defineMacro("","\\cdotp");defineMacro("\\llap","\\mathllap{\\textrm{#1}}");defineMacro("\\rlap","\\mathrlap{\\textrm{#1}}");defineMacro("\\clap","\\mathclap{\\textrm{#1}}");defineMacro("\\mathstrut","\\vphantom{(}");defineMacro("\\underbar","\\underline{\\text{#1}}");defineMacro("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');defineMacro("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");defineMacro("\\ne","\\neq");defineMacro("","\\neq");defineMacro("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");defineMacro("","\\notin");defineMacro("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");defineMacro("","\\perp");defineMacro("","\\mathclose{!\\mkern-0.8mu!}");defineMacro("","\\notni");defineMacro("","\\ulcorner");defineMacro("","\\urcorner");defineMacro("","\\llcorner");defineMacro("","\\lrcorner");defineMacro("","\\copyright");defineMacro("","\\textregistered");defineMacro("","\\textregistered");defineMacro("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');defineMacro("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');defineMacro("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');defineMacro("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');defineMacro("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");defineMacro("","\\vdots");defineMacro("\\varGamma","\\mathit{\\Gamma}");defineMacro("\\varDelta","\\mathit{\\Delta}");defineMacro("\\varTheta","\\mathit{\\Theta}");defineMacro("\\varLambda","\\mathit{\\Lambda}");defineMacro("\\varXi","\\mathit{\\Xi}");defineMacro("\\varPi","\\mathit{\\Pi}");defineMacro("\\varSigma","\\mathit{\\Sigma}");defineMacro("\\varUpsilon","\\mathit{\\Upsilon}");defineMacro("\\varPhi","\\mathit{\\Phi}");defineMacro("\\varPsi","\\mathit{\\Psi}");defineMacro("\\varOmega","\\mathit{\\Omega}");defineMacro("\\substack","\\begin{subarray}{c}#1\\end{subarray}");defineMacro("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");defineMacro("\\boxed","\\fbox{$\\displaystyle{#1}$}");defineMacro("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");defineMacro("\\implies","\\DOTSB\\;\\Longrightarrow\\;");defineMacro("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");defineMacro("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");defineMacro("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var dotsByToken={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};defineMacro("\\dots",function(G){var _="\\dotso",J=G.expandAfterFuture().text;return J in dotsByToken?_=dotsByToken[J]:(J.slice(0,4)==="\\not"||J in symbols.math&&["bin","rel"].includes(symbols.math[J].group))&&(_="\\dotsb"),_});var spaceAfterDots={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};defineMacro("\\dotso",function(G){var _=G.future().text;return _ in spaceAfterDots?"\\ldots\\,":"\\ldots"});defineMacro("\\dotsc",function(G){var _=G.future().text;return _ in spaceAfterDots&&_!==","?"\\ldots\\,":"\\ldots"});defineMacro("\\cdots",function(G){var _=G.future().text;return _ in spaceAfterDots?"\\@cdots\\,":"\\@cdots"});defineMacro("\\dotsb","\\cdots");defineMacro("\\dotsm","\\cdots");defineMacro("\\dotsi","\\!\\cdots");defineMacro("\\dotsx","\\ldots\\,");defineMacro("\\DOTSI","\\relax");defineMacro("\\DOTSB","\\relax");defineMacro("\\DOTSX","\\relax");defineMacro("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");defineMacro("\\,","\\tmspace+{3mu}{.1667em}");defineMacro("\\thinspace","\\,");defineMacro("\\>","\\mskip{4mu}");defineMacro("\\:","\\tmspace+{4mu}{.2222em}");defineMacro("\\medspace","\\:");defineMacro("\\;","\\tmspace+{5mu}{.2777em}");defineMacro("\\thickspace","\\;");defineMacro("\\!","\\tmspace-{3mu}{.1667em}");defineMacro("\\negthinspace","\\!");defineMacro("\\negmedspace","\\tmspace-{4mu}{.2222em}");defineMacro("\\negthickspace","\\tmspace-{5mu}{.277em}");defineMacro("\\enspace","\\kern.5em ");defineMacro("\\enskip","\\hskip.5em\\relax");defineMacro("\\quad","\\hskip1em\\relax");defineMacro("\\qquad","\\hskip2em\\relax");defineMacro("\\tag","\\@ifstar\\tag@literal\\tag@paren");defineMacro("\\tag@paren","\\tag@literal{({#1})}");defineMacro("\\tag@literal",G=>{if(G.macros.get("\\df@tag"))throw new ParseError("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});defineMacro("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");defineMacro("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");defineMacro("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");defineMacro("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");defineMacro("\\newline","\\\\\\relax");defineMacro("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var latexRaiseA=makeEm(fontMetricsData["Main-Regular"][84][1]-.7*fontMetricsData["Main-Regular"][65][1]);defineMacro("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+latexRaiseA+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");defineMacro("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+latexRaiseA+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");defineMacro("\\hspace","\\@ifstar\\@hspacer\\@hspace");defineMacro("\\@hspace","\\hskip #1\\relax");defineMacro("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");defineMacro("\\ordinarycolon",":");defineMacro("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");defineMacro("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');defineMacro("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');defineMacro("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');defineMacro("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');defineMacro("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');defineMacro("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');defineMacro("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');defineMacro("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');defineMacro("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');defineMacro("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');defineMacro("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');defineMacro("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');defineMacro("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');defineMacro("","\\dblcolon");defineMacro("","\\eqcolon");defineMacro("","\\coloneqq");defineMacro("","\\eqqcolon");defineMacro("","\\Coloneqq");defineMacro("\\ratio","\\vcentcolon");defineMacro("\\coloncolon","\\dblcolon");defineMacro("\\colonequals","\\coloneqq");defineMacro("\\coloncolonequals","\\Coloneqq");defineMacro("\\equalscolon","\\eqqcolon");defineMacro("\\equalscoloncolon","\\Eqqcolon");defineMacro("\\colonminus","\\coloneq");defineMacro("\\coloncolonminus","\\Coloneq");defineMacro("\\minuscolon","\\eqcolon");defineMacro("\\minuscoloncolon","\\Eqcolon");defineMacro("\\coloncolonapprox","\\Colonapprox");defineMacro("\\coloncolonsim","\\Colonsim");defineMacro("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");defineMacro("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");defineMacro("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");defineMacro("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");defineMacro("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");defineMacro("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");defineMacro("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");defineMacro("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");defineMacro("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");defineMacro("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");defineMacro("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");defineMacro("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");defineMacro("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");defineMacro("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");defineMacro("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");defineMacro("\\ngeqq","\\html@mathml{\\@ngeqq}{}");defineMacro("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");defineMacro("\\nleqq","\\html@mathml{\\@nleqq}{}");defineMacro("\\nleqslant","\\html@mathml{\\@nleqslant}{}");defineMacro("\\nshortmid","\\html@mathml{\\@nshortmid}{}");defineMacro("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");defineMacro("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");defineMacro("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");defineMacro("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");defineMacro("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");defineMacro("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");defineMacro("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");defineMacro("\\imath","\\html@mathml{\\@imath}{}");defineMacro("\\jmath","\\html@mathml{\\@jmath}{}");defineMacro("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");defineMacro("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");defineMacro("","\\llbracket");defineMacro("","\\rrbracket");defineMacro("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");defineMacro("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");defineMacro("","\\lBrace");defineMacro("","\\rBrace");defineMacro("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");defineMacro("","\\minuso");defineMacro("\\darr","\\downarrow");defineMacro("\\dArr","\\Downarrow");defineMacro("\\Darr","\\Downarrow");defineMacro("\\lang","\\langle");defineMacro("\\rang","\\rangle");defineMacro("\\uarr","\\uparrow");defineMacro("\\uArr","\\Uparrow");defineMacro("\\Uarr","\\Uparrow");defineMacro("\\N","\\mathbb{N}");defineMacro("\\R","\\mathbb{R}");defineMacro("\\Z","\\mathbb{Z}");defineMacro("\\alef","\\aleph");defineMacro("\\alefsym","\\aleph");defineMacro("\\Alpha","\\mathrm{A}");defineMacro("\\Beta","\\mathrm{B}");defineMacro("\\bull","\\bullet");defineMacro("\\Chi","\\mathrm{X}");defineMacro("\\clubs","\\clubsuit");defineMacro("\\cnums","\\mathbb{C}");defineMacro("\\Complex","\\mathbb{C}");defineMacro("\\Dagger","\\ddagger");defineMacro("\\diamonds","\\diamondsuit");defineMacro("\\empty","\\emptyset");defineMacro("\\Epsilon","\\mathrm{E}");defineMacro("\\Eta","\\mathrm{H}");defineMacro("\\exist","\\exists");defineMacro("\\harr","\\leftrightarrow");defineMacro("\\hArr","\\Leftrightarrow");defineMacro("\\Harr","\\Leftrightarrow");defineMacro("\\hearts","\\heartsuit");defineMacro("\\image","\\Im");defineMacro("\\infin","\\infty");defineMacro("\\Iota","\\mathrm{I}");defineMacro("\\isin","\\in");defineMacro("\\Kappa","\\mathrm{K}");defineMacro("\\larr","\\leftarrow");defineMacro("\\lArr","\\Leftarrow");defineMacro("\\Larr","\\Leftarrow");defineMacro("\\lrarr","\\leftrightarrow");defineMacro("\\lrArr","\\Leftrightarrow");defineMacro("\\Lrarr","\\Leftrightarrow");defineMacro("\\Mu","\\mathrm{M}");defineMacro("\\natnums","\\mathbb{N}");defineMacro("\\Nu","\\mathrm{N}");defineMacro("\\Omicron","\\mathrm{O}");defineMacro("\\plusmn","\\pm");defineMacro("\\rarr","\\rightarrow");defineMacro("\\rArr","\\Rightarrow");defineMacro("\\Rarr","\\Rightarrow");defineMacro("\\real","\\Re");defineMacro("\\reals","\\mathbb{R}");defineMacro("\\Reals","\\mathbb{R}");defineMacro("\\Rho","\\mathrm{P}");defineMacro("\\sdot","\\cdot");defineMacro("\\sect","\\S");defineMacro("\\spades","\\spadesuit");defineMacro("\\sub","\\subset");defineMacro("\\sube","\\subseteq");defineMacro("\\supe","\\supseteq");defineMacro("\\Tau","\\mathrm{T}");defineMacro("\\thetasym","\\vartheta");defineMacro("\\weierp","\\wp");defineMacro("\\Zeta","\\mathrm{Z}");defineMacro("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");defineMacro("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");defineMacro("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");defineMacro("\\bra","\\mathinner{\\langle{#1}|}");defineMacro("\\ket","\\mathinner{|{#1}\\rangle}");defineMacro("\\braket","\\mathinner{\\langle{#1}\\rangle}");defineMacro("\\Bra","\\left\\langle#1\\right|");defineMacro("\\Ket","\\left|#1\\right\\rangle");var braketHelper=G=>_=>{var J=_.consumeArg().tokens,Z=_.consumeArg().tokens,Q=_.consumeArg().tokens,ee=_.consumeArg().tokens,te=_.macros.get("|"),ne=_.macros.get("\\|");_.macros.beginGroup();var ie=se=>ae=>{G&&(ae.macros.set("|",te),Q.length&&ae.macros.set("\\|",ne));var le=se;if(!se&&Q.length){var ue=ae.future();ue.text==="|"&&(ae.popToken(),le=!0)}return{tokens:le?Q:Z,numArgs:0}};_.macros.set("|",ie(!1)),Q.length&&_.macros.set("\\|",ie(!0));var re=_.consumeArg().tokens,oe=_.expandTokens([...ee,...re,...J]);return _.macros.endGroup(),{tokens:oe.reverse(),numArgs:0}};defineMacro("\\bra@ket",braketHelper(!1));defineMacro("\\bra@set",braketHelper(!0));defineMacro("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");defineMacro("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");defineMacro("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");defineMacro("\\angln","{\\angl n}");defineMacro("\\blue","\\textcolor{##6495ed}{#1}");defineMacro("\\orange","\\textcolor{##ffa500}{#1}");defineMacro("\\pink","\\textcolor{##ff00af}{#1}");defineMacro("\\red","\\textcolor{##df0030}{#1}");defineMacro("\\green","\\textcolor{##28ae7b}{#1}");defineMacro("\\gray","\\textcolor{gray}{#1}");defineMacro("\\purple","\\textcolor{##9d38bd}{#1}");defineMacro("\\blueA","\\textcolor{##ccfaff}{#1}");defineMacro("\\blueB","\\textcolor{##80f6ff}{#1}");defineMacro("\\blueC","\\textcolor{##63d9ea}{#1}");defineMacro("\\blueD","\\textcolor{##11accd}{#1}");defineMacro("\\blueE","\\textcolor{##0c7f99}{#1}");defineMacro("\\tealA","\\textcolor{##94fff5}{#1}");defineMacro("\\tealB","\\textcolor{##26edd5}{#1}");defineMacro("\\tealC","\\textcolor{##01d1c1}{#1}");defineMacro("\\tealD","\\textcolor{##01a995}{#1}");defineMacro("\\tealE","\\textcolor{##208170}{#1}");defineMacro("\\greenA","\\textcolor{##b6ffb0}{#1}");defineMacro("\\greenB","\\textcolor{##8af281}{#1}");defineMacro("\\greenC","\\textcolor{##74cf70}{#1}");defineMacro("\\greenD","\\textcolor{##1fab54}{#1}");defineMacro("\\greenE","\\textcolor{##0d923f}{#1}");defineMacro("\\goldA","\\textcolor{##ffd0a9}{#1}");defineMacro("\\goldB","\\textcolor{##ffbb71}{#1}");defineMacro("\\goldC","\\textcolor{##ff9c39}{#1}");defineMacro("\\goldD","\\textcolor{##e07d10}{#1}");defineMacro("\\goldE","\\textcolor{##a75a05}{#1}");defineMacro("\\redA","\\textcolor{##fca9a9}{#1}");defineMacro("\\redB","\\textcolor{##ff8482}{#1}");defineMacro("\\redC","\\textcolor{##f9685d}{#1}");defineMacro("\\redD","\\textcolor{##e84d39}{#1}");defineMacro("\\redE","\\textcolor{##bc2612}{#1}");defineMacro("\\maroonA","\\textcolor{##ffbde0}{#1}");defineMacro("\\maroonB","\\textcolor{##ff92c6}{#1}");defineMacro("\\maroonC","\\textcolor{##ed5fa6}{#1}");defineMacro("\\maroonD","\\textcolor{##ca337c}{#1}");defineMacro("\\maroonE","\\textcolor{##9e034e}{#1}");defineMacro("\\purpleA","\\textcolor{##ddd7ff}{#1}");defineMacro("\\purpleB","\\textcolor{##c6b9fc}{#1}");defineMacro("\\purpleC","\\textcolor{##aa87ff}{#1}");defineMacro("\\purpleD","\\textcolor{##7854ab}{#1}");defineMacro("\\purpleE","\\textcolor{##543b78}{#1}");defineMacro("\\mintA","\\textcolor{##f5f9e8}{#1}");defineMacro("\\mintB","\\textcolor{##edf2df}{#1}");defineMacro("\\mintC","\\textcolor{##e0e5cc}{#1}");defineMacro("\\grayA","\\textcolor{##f6f7f7}{#1}");defineMacro("\\grayB","\\textcolor{##f0f1f2}{#1}");defineMacro("\\grayC","\\textcolor{##e3e5e6}{#1}");defineMacro("\\grayD","\\textcolor{##d6d8da}{#1}");defineMacro("\\grayE","\\textcolor{##babec2}{#1}");defineMacro("\\grayF","\\textcolor{##888d93}{#1}");defineMacro("\\grayG","\\textcolor{##626569}{#1}");defineMacro("\\grayH","\\textcolor{##3b3e40}{#1}");defineMacro("\\grayI","\\textcolor{##21242c}{#1}");defineMacro("\\kaBlue","\\textcolor{##314453}{#1}");defineMacro("\\kaGreen","\\textcolor{##71B307}{#1}");typeof document<"u"&&document.compatMode!=="CSS1Compat"&&typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype.");const e=(G,_)=>{for(let J in _)G[J]=_[J];return G},t=(G,_)=>Array.from(G.querySelectorAll(_)),i$3=(G,_,J)=>{J?G.classList.add(_):G.classList.remove(_)},s=G=>{if(typeof G=="string"){if(G==="null")return null;if(G==="true")return!0;if(G==="false")return!1;if(G.match(/^-?[\d\.]+$/))return parseFloat(G)}return G},a$1=(G,_)=>{G.style.transform=_},n=(G,_)=>{let J=G.matches||G.matchesSelector||G.msMatchesSelector;return!(!J||!J.call(G,_))},r=(G,_)=>{if(typeof G.closest=="function")return G.closest(_);for(;G;){if(n(G,_))return G;G=G.parentNode}return null},o=G=>{let _=(G=G||document.documentElement).requestFullscreen||G.webkitRequestFullscreen||G.webkitRequestFullScreen||G.mozRequestFullScreen||G.msRequestFullscreen;_&&_.apply(G)},l$1=G=>{let _=document.createElement("style");return _.type="text/css",G&&G.length>0&&(_.styleSheet?_.styleSheet.cssText=G:_.appendChild(document.createTextNode(G))),document.head.appendChild(_),_},d=()=>{let G={};location.search.replace(/[A-Z0-9]+?=([\w\.%-]*)/gi,(_=>{G[_.split("=").shift()]=_.split("=").pop()}));for(let _ in G){let J=G[_];G[_]=s(unescape(J))}return G.dependencies!==void 0&&delete G.dependencies,G},c$1={mp4:"video/mp4",m4a:"video/mp4",ogv:"video/ogg",mpeg:"video/mpeg",webm:"video/webm"},h$1=navigator.userAgent,u=/(iphone|ipod|ipad|android)/gi.test(h$1)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,g$1=/android/gi.test(h$1);var v=(function(G){if(G){var _=function(Me){return[].slice.call(Me)},J=3,Z=[],Q=null,ee="requestAnimationFrame"in G?function(){G.cancelAnimationFrame(Q),Q=G.requestAnimationFrame((function(){return ne(Z.filter((function(Me){return Me.dirty&&Me.active})))}))}:function(){},te=function(Me){return function(){Z.forEach((function(Ne){return Ne.dirty=Me})),ee()}},ne=function(Me){Me.filter((function(Le){return!Le.styleComputed})).forEach((function(Le){Le.styleComputed=se(Le)})),Me.filter(ae).forEach(le);var Ne=Me.filter(oe);Ne.forEach(re),Ne.forEach((function(Le){le(Le),ie(Le)})),Ne.forEach(ue)},ie=function(Me){return Me.dirty=0},re=function(Me){Me.availableWidth=Me.element.parentNode.clientWidth,Me.currentWidth=Me.element.scrollWidth,Me.previousFontSize=Me.currentFontSize,Me.currentFontSize=Math.min(Math.max(Me.minSize,Me.availableWidth/Me.currentWidth*Me.previousFontSize),Me.maxSize),Me.whiteSpace=Me.multiLine&&Me.currentFontSize===Me.minSize?"normal":"nowrap"},oe=function(Me){return Me.dirty!==2||Me.dirty===2&&Me.element.parentNode.clientWidth!==Me.availableWidth},se=function(Me){var Ne=G.getComputedStyle(Me.element,null);return Me.currentFontSize=parseFloat(Ne.getPropertyValue("font-size")),Me.display=Ne.getPropertyValue("display"),Me.whiteSpace=Ne.getPropertyValue("white-space"),!0},ae=function(Me){var Ne=!1;return!Me.preStyleTestCompleted&&(/inline-/.test(Me.display)||(Ne=!0,Me.display="inline-block"),Me.whiteSpace!=="nowrap"&&(Ne=!0,Me.whiteSpace="nowrap"),Me.preStyleTestCompleted=!0,Ne)},le=function(Me){Me.element.style.whiteSpace=Me.whiteSpace,Me.element.style.display=Me.display,Me.element.style.fontSize=Me.currentFontSize+"px"},ue=function(Me){Me.element.dispatchEvent(new CustomEvent("fit",{detail:{oldValue:Me.previousFontSize,newValue:Me.currentFontSize,scaleFactor:Me.currentFontSize/Me.previousFontSize}}))},de=function(Me,Ne){return function(){Me.dirty=Ne,Me.active&&ee()}},pe=function(Me){return function(){Z=Z.filter((function(Ne){return Ne.element!==Me.element})),Me.observeMutations&&Me.observer.disconnect(),Me.element.style.whiteSpace=Me.originalStyle.whiteSpace,Me.element.style.display=Me.originalStyle.display,Me.element.style.fontSize=Me.originalStyle.fontSize}},fe=function(Me){return function(){Me.active||(Me.active=!0,ee())}},_e=function(Me){return function(){return Me.active=!1}},ye=function(Me){Me.observeMutations&&(Me.observer=new MutationObserver(de(Me,1)),Me.observer.observe(Me.element,Me.observeMutations))},be={minSize:16,maxSize:512,multiLine:!0,observeMutations:"MutationObserver"in G&&{subtree:!0,childList:!0,characterData:!0}},Ae=null,Ce=function(){G.clearTimeout(Ae),Ae=G.setTimeout(te(2),Te.observeWindowDelay)},Ee=["resize","orientationchange"];return Object.defineProperty(Te,"observeWindow",{set:function(Me){var Ne="".concat(Me?"add":"remove","EventListener");Ee.forEach((function(Le){G[Ne](Le,Ce)}))}}),Te.observeWindow=!0,Te.observeWindowDelay=100,Te.fitAll=te(J),Te}function Re(Me,Ne){var Le=Object.assign({},be,Ne),Ie=Me.map((function(Ge){var He=Object.assign({},Le,{element:Ge,active:!0});return(function(Be){Be.originalStyle={whiteSpace:Be.element.style.whiteSpace,display:Be.element.style.display,fontSize:Be.element.style.fontSize},ye(Be),Be.newbie=!0,Be.dirty=!0,Z.push(Be)})(He),{element:Ge,fit:de(He,J),unfreeze:fe(He),freeze:_e(He),unsubscribe:pe(He)}}));return ee(),Ie}function Te(Me){var Ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return typeof Me=="string"?Re(_(document.querySelectorAll(Me)),Ne):Re([Me],Ne)[0]}})(typeof window>"u"?null:window);let p$1=class{constructor(_){this.Reveal=_,this.startEmbeddedIframe=this.startEmbeddedIframe.bind(this)}shouldPreload(_){if(this.Reveal.isScrollView())return!0;let J=this.Reveal.getConfig().preloadIframes;return typeof J!="boolean"&&(J=_.hasAttribute("data-preload")),J}load(_,J={}){_.style.display=this.Reveal.getConfig().display,t(_,"img[data-src], video[data-src], audio[data-src], iframe[data-src]").forEach((Q=>{(Q.tagName!=="IFRAME"||this.shouldPreload(Q))&&(Q.setAttribute("src",Q.getAttribute("data-src")),Q.setAttribute("data-lazy-loaded",""),Q.removeAttribute("data-src"))})),t(_,"video, audio").forEach((Q=>{let ee=0;t(Q,"source[data-src]").forEach((te=>{te.setAttribute("src",te.getAttribute("data-src")),te.removeAttribute("data-src"),te.setAttribute("data-lazy-loaded",""),ee+=1})),u&&Q.tagName==="VIDEO"&&Q.setAttribute("playsinline",""),ee>0&&Q.load()}));let Z=_.slideBackgroundElement;if(Z){Z.style.display="block";let Q=_.slideBackgroundContentElement,ee=_.getAttribute("data-background-iframe");if(Z.hasAttribute("data-loaded")===!1){Z.setAttribute("data-loaded","true");let ne=_.getAttribute("data-background-image"),ie=_.getAttribute("data-background-video"),re=_.hasAttribute("data-background-video-loop"),oe=_.hasAttribute("data-background-video-muted");if(ne)/^data:/.test(ne.trim())?Q.style.backgroundImage=`url(${ne.trim()})`:Q.style.backgroundImage=ne.split(",").map((se=>`url(${((ae="")=>encodeURI(ae).replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/[!'()*]/g,(le=>`%${le.charCodeAt(0).toString(16).toUpperCase()}`)))(decodeURI(se.trim()))})`)).join(",");else if(ie){let se=document.createElement("video");re&&se.setAttribute("loop",""),(oe||this.Reveal.isSpeakerNotes())&&(se.muted=!0),u&&(se.muted=!0,se.setAttribute("playsinline","")),ie.split(",").forEach((ae=>{const le=document.createElement("source");le.setAttribute("src",ae);let ue=((de="")=>c$1[de.split(".").pop()])(ae);ue&&le.setAttribute("type",ue),se.appendChild(le)})),Q.appendChild(se)}else if(ee&&J.excludeIframes!==!0){let se=document.createElement("iframe");se.setAttribute("allowfullscreen",""),se.setAttribute("mozallowfullscreen",""),se.setAttribute("webkitallowfullscreen",""),se.setAttribute("allow","autoplay"),se.setAttribute("data-src",ee),se.style.width="100%",se.style.height="100%",se.style.maxHeight="100%",se.style.maxWidth="100%",Q.appendChild(se)}}let te=Q.querySelector("iframe[data-src]");te&&this.shouldPreload(Z)&&!/autoplay=(1|true|yes)/gi.test(ee)&&te.getAttribute("src")!==ee&&te.setAttribute("src",ee)}this.layout(_)}layout(_){Array.from(_.querySelectorAll(".r-fit-text")).forEach((J=>{v(J,{minSize:24,maxSize:.8*this.Reveal.getConfig().height,observeMutations:!1,observeWindow:!1})}))}unload(_){_.style.display="none";let J=this.Reveal.getSlideBackground(_);J&&(J.style.display="none",t(J,"iframe[src]").forEach((Z=>{Z.removeAttribute("src")}))),t(_,"video[data-lazy-loaded][src], audio[data-lazy-loaded][src], iframe[data-lazy-loaded][src]").forEach((Z=>{Z.setAttribute("data-src",Z.getAttribute("src")),Z.removeAttribute("src")})),t(_,"video[data-lazy-loaded] source[src], audio source[src]").forEach((Z=>{Z.setAttribute("data-src",Z.getAttribute("src")),Z.removeAttribute("src")}))}formatEmbeddedContent(){let _=(J,Z,Q)=>{t(this.Reveal.getSlidesElement(),"iframe["+J+'*="'+Z+'"]').forEach((ee=>{let te=ee.getAttribute(J);te&&te.indexOf(Q)===-1&&ee.setAttribute(J,te+(/\?/.test(te)?"&":"?")+Q)}))};_("src","youtube.com/embed/","enablejsapi=1"),_("data-src","youtube.com/embed/","enablejsapi=1"),_("src","player.vimeo.com/","api=1"),_("data-src","player.vimeo.com/","api=1")}startEmbeddedContent(_){if(_){const J=this.Reveal.isSpeakerNotes();t(_,'img[src$=".gif"]').forEach((Z=>{Z.setAttribute("src",Z.getAttribute("src"))})),t(_,"video, audio").forEach((Z=>{if(r(Z,".fragment")&&!r(Z,".fragment.visible"))return;let Q=this.Reveal.getConfig().autoPlayMedia;if(typeof Q!="boolean"&&(Q=Z.hasAttribute("data-autoplay")||!!r(Z,".slide-background")),Q&&typeof Z.play=="function"){if(J&&!Z.muted)return;if(Z.readyState>1)this.startEmbeddedMedia({target:Z});else if(u){let ee=Z.play();ee&&typeof ee.catch=="function"&&Z.controls===!1&&ee.catch((()=>{Z.controls=!0,Z.addEventListener("play",(()=>{Z.controls=!1}))}))}else Z.removeEventListener("loadeddata",this.startEmbeddedMedia),Z.addEventListener("loadeddata",this.startEmbeddedMedia)}})),J||(t(_,"iframe[src]").forEach((Z=>{r(Z,".fragment")&&!r(Z,".fragment.visible")||this.startEmbeddedIframe({target:Z})})),t(_,"iframe[data-src]").forEach((Z=>{r(Z,".fragment")&&!r(Z,".fragment.visible")||Z.getAttribute("src")!==Z.getAttribute("data-src")&&(Z.removeEventListener("load",this.startEmbeddedIframe),Z.addEventListener("load",this.startEmbeddedIframe),Z.setAttribute("src",Z.getAttribute("data-src")))})))}}startEmbeddedMedia(_){let J=!!r(_.target,"html"),Z=!!r(_.target,".present");J&&Z&&(_.target.paused||_.target.ended)&&(_.target.currentTime=0,_.target.play()),_.target.removeEventListener("loadeddata",this.startEmbeddedMedia)}startEmbeddedIframe(_){let J=_.target;if(J&&J.contentWindow){let Z=!!r(_.target,"html"),Q=!!r(_.target,".present");if(Z&&Q){let ee=this.Reveal.getConfig().autoPlayMedia;typeof ee!="boolean"&&(ee=J.hasAttribute("data-autoplay")||!!r(J,".slide-background")),/youtube\.com\/embed\//.test(J.getAttribute("src"))&&ee?J.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*"):/player\.vimeo\.com\//.test(J.getAttribute("src"))&&ee?J.contentWindow.postMessage('{"method":"play"}',"*"):J.contentWindow.postMessage("slide:start","*")}}}stopEmbeddedContent(_,J={}){J=e({unloadIframes:!0},J),_&&_.parentNode&&(t(_,"video, audio").forEach((Z=>{Z.hasAttribute("data-ignore")||typeof Z.pause!="function"||(Z.setAttribute("data-paused-by-reveal",""),Z.pause())})),t(_,"iframe").forEach((Z=>{Z.contentWindow&&Z.contentWindow.postMessage("slide:stop","*"),Z.removeEventListener("load",this.startEmbeddedIframe)})),t(_,'iframe[src*="youtube.com/embed/"]').forEach((Z=>{!Z.hasAttribute("data-ignore")&&Z.contentWindow&&typeof Z.contentWindow.postMessage=="function"&&Z.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")})),t(_,'iframe[src*="player.vimeo.com/"]').forEach((Z=>{!Z.hasAttribute("data-ignore")&&Z.contentWindow&&typeof Z.contentWindow.postMessage=="function"&&Z.contentWindow.postMessage('{"method":"pause"}',"*")})),J.unloadIframes===!0&&t(_,"iframe[data-src]").forEach((Z=>{Z.setAttribute("src","about:blank"),Z.removeAttribute("src")})))}};const m$1=".slides section",f=".slides>section",y=".slides>section.present>section",b$1=/registerPlugin|registerKeyboardShortcut|addKeyBinding|addEventListener|showPreview/;class w{constructor(_){this.Reveal=_}render(){this.element=document.createElement("div"),this.element.className="slide-number",this.Reveal.getRevealElement().appendChild(this.element)}configure(_,J){let Z="none";_.slideNumber&&!this.Reveal.isPrintView()&&(_.showSlideNumber==="all"||_.showSlideNumber==="speaker"&&this.Reveal.isSpeakerNotes())&&(Z="block"),this.element.style.display=Z}update(){this.Reveal.getConfig().slideNumber&&this.element&&(this.element.innerHTML=this.getSlideNumber())}getSlideNumber(_=this.Reveal.getCurrentSlide()){let J,Z=this.Reveal.getConfig(),Q="h.v";if(typeof Z.slideNumber=="function")J=Z.slideNumber(_);else{typeof Z.slideNumber=="string"&&(Q=Z.slideNumber),/c/.test(Q)||this.Reveal.getHorizontalSlides().length!==1||(Q="c");let te=_&&_.dataset.visibility==="uncounted"?0:1;switch(J=[],Q){case"c":J.push(this.Reveal.getSlidePastCount(_)+te);break;case"c/t":J.push(this.Reveal.getSlidePastCount(_)+te,"/",this.Reveal.getTotalSlides());break;default:let ne=this.Reveal.getIndices(_);J.push(ne.h+te);let ie=Q==="h/v"?"/":".";this.Reveal.isVerticalSlide(_)&&J.push(ie,ne.v+1)}}let ee="#"+this.Reveal.location.getHash(_);return this.formatNumber(J[0],J[1],J[2],ee)}formatNumber(_,J,Z,Q="#"+this.Reveal.location.getHash()){return typeof Z!="number"||isNaN(Z)?`<a href="${Q}">
					<span class="slide-number-a">${_}</span>
					</a>`:`<a href="${Q}">
					<span class="slide-number-a">${_}</span>
					<span class="slide-number-delimiter">${J}</span>
					<span class="slide-number-b">${Z}</span>
					</a>`}destroy(){this.element.remove()}}let E$1=class{constructor(_){this.Reveal=_,this.onInput=this.onInput.bind(this),this.onBlur=this.onBlur.bind(this),this.onKeyDown=this.onKeyDown.bind(this)}render(){this.element=document.createElement("div"),this.element.className="jump-to-slide",this.jumpInput=document.createElement("input"),this.jumpInput.type="text",this.jumpInput.className="jump-to-slide-input",this.jumpInput.placeholder="Jump to slide",this.jumpInput.addEventListener("input",this.onInput),this.jumpInput.addEventListener("keydown",this.onKeyDown),this.jumpInput.addEventListener("blur",this.onBlur),this.element.appendChild(this.jumpInput)}show(){this.indicesOnShow=this.Reveal.getIndices(),this.Reveal.getRevealElement().appendChild(this.element),this.jumpInput.focus()}hide(){this.isVisible()&&(this.element.remove(),this.jumpInput.value="",clearTimeout(this.jumpTimeout),delete this.jumpTimeout)}isVisible(){return!!this.element.parentNode}jump(){clearTimeout(this.jumpTimeout),delete this.jumpTimeout;let _,J=this.jumpInput.value.trim("");if(/^\d+$/.test(J)){const Z=this.Reveal.getConfig().slideNumber;if(Z==="c"||Z==="c/t"){const Q=this.Reveal.getSlides()[parseInt(J,10)-1];Q&&(_=this.Reveal.getIndices(Q))}}return _||(/^\d+\.\d+$/.test(J)&&(J=J.replace(".","/")),_=this.Reveal.location.getIndicesFromHash(J,{oneBasedIndex:!0})),!_&&/\S+/i.test(J)&&J.length>1&&(_=this.search(J)),_&&J!==""?(this.Reveal.slide(_.h,_.v,_.f),!0):(this.Reveal.slide(this.indicesOnShow.h,this.indicesOnShow.v,this.indicesOnShow.f),!1)}jumpAfter(_){clearTimeout(this.jumpTimeout),this.jumpTimeout=setTimeout((()=>this.jump()),_)}search(_){const J=new RegExp("\\b"+_.trim()+"\\b","i"),Z=this.Reveal.getSlides().find((Q=>J.test(Q.innerText)));return Z?this.Reveal.getIndices(Z):null}cancel(){this.Reveal.slide(this.indicesOnShow.h,this.indicesOnShow.v,this.indicesOnShow.f),this.hide()}confirm(){this.jump(),this.hide()}destroy(){this.jumpInput.removeEventListener("input",this.onInput),this.jumpInput.removeEventListener("keydown",this.onKeyDown),this.jumpInput.removeEventListener("blur",this.onBlur),this.element.remove()}onKeyDown(_){_.keyCode===13?this.confirm():_.keyCode===27&&(this.cancel(),_.stopImmediatePropagation())}onInput(_){this.jumpAfter(200)}onBlur(){setTimeout((()=>this.hide()),1)}};const S=G=>{let _=G.match(/^#([0-9a-f]{3})$/i);if(_&&_[1])return _=_[1],{r:17*parseInt(_.charAt(0),16),g:17*parseInt(_.charAt(1),16),b:17*parseInt(_.charAt(2),16)};let J=G.match(/^#([0-9a-f]{6})$/i);if(J&&J[1])return J=J[1],{r:parseInt(J.slice(0,2),16),g:parseInt(J.slice(2,4),16),b:parseInt(J.slice(4,6),16)};let Z=G.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);if(Z)return{r:parseInt(Z[1],10),g:parseInt(Z[2],10),b:parseInt(Z[3],10)};let Q=G.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d]+|[\d]*.[\d]+)\s*\)$/i);return Q?{r:parseInt(Q[1],10),g:parseInt(Q[2],10),b:parseInt(Q[3],10),a:parseFloat(Q[4])}:null};class R{constructor(_){this.Reveal=_}render(){this.element=document.createElement("div"),this.element.className="backgrounds",this.Reveal.getRevealElement().appendChild(this.element)}create(){this.element.innerHTML="",this.element.classList.add("no-transition"),this.Reveal.getHorizontalSlides().forEach((_=>{let J=this.createBackground(_,this.element);t(_,"section").forEach((Z=>{this.createBackground(Z,J),J.classList.add("stack")}))})),this.Reveal.getConfig().parallaxBackgroundImage?(this.element.style.backgroundImage='url("'+this.Reveal.getConfig().parallaxBackgroundImage+'")',this.element.style.backgroundSize=this.Reveal.getConfig().parallaxBackgroundSize,this.element.style.backgroundRepeat=this.Reveal.getConfig().parallaxBackgroundRepeat,this.element.style.backgroundPosition=this.Reveal.getConfig().parallaxBackgroundPosition,setTimeout((()=>{this.Reveal.getRevealElement().classList.add("has-parallax-background")}),1)):(this.element.style.backgroundImage="",this.Reveal.getRevealElement().classList.remove("has-parallax-background"))}createBackground(_,J){let Z=document.createElement("div");Z.className="slide-background "+_.className.replace(/present|past|future/,"");let Q=document.createElement("div");return Q.className="slide-background-content",Z.appendChild(Q),J.appendChild(Z),_.slideBackgroundElement=Z,_.slideBackgroundContentElement=Q,this.sync(_),Z}sync(_){const J=_.slideBackgroundElement,Z=_.slideBackgroundContentElement,Q={background:_.getAttribute("data-background"),backgroundSize:_.getAttribute("data-background-size"),backgroundImage:_.getAttribute("data-background-image"),backgroundVideo:_.getAttribute("data-background-video"),backgroundIframe:_.getAttribute("data-background-iframe"),backgroundColor:_.getAttribute("data-background-color"),backgroundGradient:_.getAttribute("data-background-gradient"),backgroundRepeat:_.getAttribute("data-background-repeat"),backgroundPosition:_.getAttribute("data-background-position"),backgroundTransition:_.getAttribute("data-background-transition"),backgroundOpacity:_.getAttribute("data-background-opacity")},ee=_.hasAttribute("data-preload");_.classList.remove("has-dark-background"),_.classList.remove("has-light-background"),J.removeAttribute("data-loaded"),J.removeAttribute("data-background-hash"),J.removeAttribute("data-background-size"),J.removeAttribute("data-background-transition"),J.style.backgroundColor="",Z.style.backgroundSize="",Z.style.backgroundRepeat="",Z.style.backgroundPosition="",Z.style.backgroundImage="",Z.style.opacity="",Z.innerHTML="",Q.background&&(/^(http|file|\/\/)/gi.test(Q.background)||/\.(svg|png|jpg|jpeg|gif|bmp|webp)([?#\s]|$)/gi.test(Q.background)?_.setAttribute("data-background-image",Q.background):J.style.background=Q.background),(Q.background||Q.backgroundColor||Q.backgroundGradient||Q.backgroundImage||Q.backgroundVideo||Q.backgroundIframe)&&J.setAttribute("data-background-hash",Q.background+Q.backgroundSize+Q.backgroundImage+Q.backgroundVideo+Q.backgroundIframe+Q.backgroundColor+Q.backgroundGradient+Q.backgroundRepeat+Q.backgroundPosition+Q.backgroundTransition+Q.backgroundOpacity),Q.backgroundSize&&J.setAttribute("data-background-size",Q.backgroundSize),Q.backgroundColor&&(J.style.backgroundColor=Q.backgroundColor),Q.backgroundGradient&&(J.style.backgroundImage=Q.backgroundGradient),Q.backgroundTransition&&J.setAttribute("data-background-transition",Q.backgroundTransition),ee&&J.setAttribute("data-preload",""),Q.backgroundSize&&(Z.style.backgroundSize=Q.backgroundSize),Q.backgroundRepeat&&(Z.style.backgroundRepeat=Q.backgroundRepeat),Q.backgroundPosition&&(Z.style.backgroundPosition=Q.backgroundPosition),Q.backgroundOpacity&&(Z.style.opacity=Q.backgroundOpacity);const te=this.getContrastClass(_);typeof te=="string"&&_.classList.add(te)}getContrastClass(_){const J=_.slideBackgroundElement;let Z=_.getAttribute("data-background-color");if(!Z||!S(Z)){let ee=window.getComputedStyle(J);ee&&ee.backgroundColor&&(Z=ee.backgroundColor)}if(Z){const ee=S(Z);if(ee&&ee.a!==0)return typeof(Q=Z)=="string"&&(Q=S(Q)),(Q?(299*Q.r+587*Q.g+114*Q.b)/1e3:null)<128?"has-dark-background":"has-light-background"}var Q;return null}bubbleSlideContrastClassToElement(_,J){["has-light-background","has-dark-background"].forEach((Z=>{_.classList.contains(Z)?J.classList.add(Z):J.classList.remove(Z)}),this)}update(_=!1){let J=this.Reveal.getConfig(),Z=this.Reveal.getCurrentSlide(),Q=this.Reveal.getIndices(),ee=null,te=J.rtl?"future":"past",ne=J.rtl?"past":"future";if(Array.from(this.element.childNodes).forEach(((re,oe)=>{re.classList.remove("past","present","future"),oe<Q.h?re.classList.add(te):oe>Q.h?re.classList.add(ne):(re.classList.add("present"),ee=re),(_||oe===Q.h)&&t(re,".slide-background").forEach(((se,ae)=>{se.classList.remove("past","present","future");const le=typeof Q.v=="number"?Q.v:0;ae<le?se.classList.add("past"):ae>le?se.classList.add("future"):(se.classList.add("present"),oe===Q.h&&(ee=se))}))})),this.previousBackground&&!this.previousBackground.closest("body")&&(this.previousBackground=null),ee&&this.previousBackground){let re=this.previousBackground.getAttribute("data-background-hash"),oe=ee.getAttribute("data-background-hash");if(oe&&oe===re&&ee!==this.previousBackground){this.element.classList.add("no-transition");const se=ee.querySelector("video"),ae=this.previousBackground.querySelector("video");if(se&&ae){const le=se.parentNode;ae.parentNode.appendChild(se),le.appendChild(ae)}}}const ie=ee!==this.previousBackground;if(ie&&this.previousBackground&&this.Reveal.slideContent.stopEmbeddedContent(this.previousBackground,{unloadIframes:!this.Reveal.slideContent.shouldPreload(this.previousBackground)}),ie&&ee){this.Reveal.slideContent.startEmbeddedContent(ee);let re=ee.querySelector(".slide-background-content");if(re){let oe=re.style.backgroundImage||"";/\.gif/i.test(oe)&&(re.style.backgroundImage="",window.getComputedStyle(re).opacity,re.style.backgroundImage=oe)}this.previousBackground=ee}Z&&this.bubbleSlideContrastClassToElement(Z,this.Reveal.getRevealElement()),setTimeout((()=>{this.element.classList.remove("no-transition")}),10)}updateParallax(){let _=this.Reveal.getIndices();if(this.Reveal.getConfig().parallaxBackgroundImage){let J,Z,Q=this.Reveal.getHorizontalSlides(),ee=this.Reveal.getVerticalSlides(),te=this.element.style.backgroundSize.split(" ");te.length===1?J=Z=parseInt(te[0],10):(J=parseInt(te[0],10),Z=parseInt(te[1],10));let ne,ie,re=this.element.offsetWidth,oe=Q.length;ne=typeof this.Reveal.getConfig().parallaxBackgroundHorizontal=="number"?this.Reveal.getConfig().parallaxBackgroundHorizontal:oe>1?(J-re)/(oe-1):0,ie=ne*_.h*-1;let se,ae,le=this.element.offsetHeight,ue=ee.length;se=typeof this.Reveal.getConfig().parallaxBackgroundVertical=="number"?this.Reveal.getConfig().parallaxBackgroundVertical:(Z-le)/(ue-1),ae=ue>0?se*_.v:0,this.element.style.backgroundPosition=ie+"px "+-ae+"px"}}destroy(){this.element.remove()}}let A=0,k$1=class{constructor(_){this.Reveal=_}run(_,J){this.reset();let Z=this.Reveal.getSlides(),Q=Z.indexOf(J),ee=Z.indexOf(_);if(_&&J&&_.hasAttribute("data-auto-animate")&&J.hasAttribute("data-auto-animate")&&_.getAttribute("data-auto-animate-id")===J.getAttribute("data-auto-animate-id")&&!(Q>ee?J:_).hasAttribute("data-auto-animate-restart")){this.autoAnimateStyleSheet=this.autoAnimateStyleSheet||l$1();let te=this.getAutoAnimateOptions(J);_.dataset.autoAnimate="pending",J.dataset.autoAnimate="pending",te.slideDirection=Q>ee?"forward":"backward";let ne=_.style.display==="none";ne&&(_.style.display=this.Reveal.getConfig().display);let ie=this.getAutoAnimatableElements(_,J).map((re=>this.autoAnimateElements(re.from,re.to,re.options||{},te,A++)));if(ne&&(_.style.display="none"),J.dataset.autoAnimateUnmatched!=="false"&&this.Reveal.getConfig().autoAnimateUnmatched===!0){let re=.8*te.duration,oe=.2*te.duration;this.getUnmatchedAutoAnimateElements(J).forEach((se=>{let ae=this.getAutoAnimateOptions(se,te),le="unmatched";ae.duration===te.duration&&ae.delay===te.delay||(le="unmatched-"+A++,ie.push(`[data-auto-animate="running"] [data-auto-animate-target="${le}"] { transition: opacity ${ae.duration}s ease ${ae.delay}s; }`)),se.dataset.autoAnimateTarget=le}),this),ie.push(`[data-auto-animate="running"] [data-auto-animate-target="unmatched"] { transition: opacity ${re}s ease ${oe}s; }`)}this.autoAnimateStyleSheet.innerHTML=ie.join(""),requestAnimationFrame((()=>{this.autoAnimateStyleSheet&&(getComputedStyle(this.autoAnimateStyleSheet).fontWeight,J.dataset.autoAnimate="running")})),this.Reveal.dispatchEvent({type:"autoanimate",data:{fromSlide:_,toSlide:J,sheet:this.autoAnimateStyleSheet}})}}reset(){t(this.Reveal.getRevealElement(),'[data-auto-animate]:not([data-auto-animate=""])').forEach((_=>{_.dataset.autoAnimate=""})),t(this.Reveal.getRevealElement(),"[data-auto-animate-target]").forEach((_=>{delete _.dataset.autoAnimateTarget})),this.autoAnimateStyleSheet&&this.autoAnimateStyleSheet.parentNode&&(this.autoAnimateStyleSheet.parentNode.removeChild(this.autoAnimateStyleSheet),this.autoAnimateStyleSheet=null)}autoAnimateElements(_,J,Z,Q,ee){_.dataset.autoAnimateTarget="",J.dataset.autoAnimateTarget=ee;let te=this.getAutoAnimateOptions(J,Q);Z.delay!==void 0&&(te.delay=Z.delay),Z.duration!==void 0&&(te.duration=Z.duration),Z.easing!==void 0&&(te.easing=Z.easing);let ne=this.getAutoAnimatableProperties("from",_,Z),ie=this.getAutoAnimatableProperties("to",J,Z);if(J.classList.contains("fragment")&&delete ie.styles.opacity,Z.translate!==!1||Z.scale!==!1){let se=this.Reveal.getScale(),ae={x:(ne.x-ie.x)/se,y:(ne.y-ie.y)/se,scaleX:ne.width/ie.width,scaleY:ne.height/ie.height};ae.x=Math.round(1e3*ae.x)/1e3,ae.y=Math.round(1e3*ae.y)/1e3,ae.scaleX=Math.round(1e3*ae.scaleX)/1e3,ae.scaleX=Math.round(1e3*ae.scaleX)/1e3;let le=Z.translate!==!1&&(ae.x!==0||ae.y!==0),ue=Z.scale!==!1&&(ae.scaleX!==0||ae.scaleY!==0);if(le||ue){let de=[];le&&de.push(`translate(${ae.x}px, ${ae.y}px)`),ue&&de.push(`scale(${ae.scaleX}, ${ae.scaleY})`),ne.styles.transform=de.join(" "),ne.styles["transform-origin"]="top left",ie.styles.transform="none"}}for(let se in ie.styles){const ae=ie.styles[se],le=ne.styles[se];ae===le?delete ie.styles[se]:(ae.explicitValue===!0&&(ie.styles[se]=ae.value),le.explicitValue===!0&&(ne.styles[se]=le.value))}let re="",oe=Object.keys(ie.styles);return oe.length>0&&(ne.styles.transition="none",ie.styles.transition=`all ${te.duration}s ${te.easing} ${te.delay}s`,ie.styles["transition-property"]=oe.join(", "),ie.styles["will-change"]=oe.join(", "),re='[data-auto-animate-target="'+ee+'"] {'+Object.keys(ne.styles).map((se=>se+": "+ne.styles[se]+" !important;")).join("")+'}[data-auto-animate="running"] [data-auto-animate-target="'+ee+'"] {'+Object.keys(ie.styles).map((se=>se+": "+ie.styles[se]+" !important;")).join("")+"}"),re}getAutoAnimateOptions(_,J){let Z={easing:this.Reveal.getConfig().autoAnimateEasing,duration:this.Reveal.getConfig().autoAnimateDuration,delay:0};if(Z=e(Z,J),_.parentNode){let Q=r(_.parentNode,"[data-auto-animate-target]");Q&&(Z=this.getAutoAnimateOptions(Q,Z))}return _.dataset.autoAnimateEasing&&(Z.easing=_.dataset.autoAnimateEasing),_.dataset.autoAnimateDuration&&(Z.duration=parseFloat(_.dataset.autoAnimateDuration)),_.dataset.autoAnimateDelay&&(Z.delay=parseFloat(_.dataset.autoAnimateDelay)),Z}getAutoAnimatableProperties(_,J,Z){let Q=this.Reveal.getConfig(),ee={styles:[]};if(Z.translate!==!1||Z.scale!==!1){let ne;if(typeof Z.measure=="function")ne=Z.measure(J);else if(Q.center)ne=J.getBoundingClientRect();else{let ie=this.Reveal.getScale();ne={x:J.offsetLeft*ie,y:J.offsetTop*ie,width:J.offsetWidth*ie,height:J.offsetHeight*ie}}ee.x=ne.x,ee.y=ne.y,ee.width=ne.width,ee.height=ne.height}const te=getComputedStyle(J);return(Z.styles||Q.autoAnimateStyles).forEach((ne=>{let ie;typeof ne=="string"&&(ne={property:ne}),ne.from!==void 0&&_==="from"?ie={value:ne.from,explicitValue:!0}:ne.to!==void 0&&_==="to"?ie={value:ne.to,explicitValue:!0}:(ne.property==="line-height"&&(ie=parseFloat(te["line-height"])/parseFloat(te["font-size"])),isNaN(ie)&&(ie=te[ne.property])),ie!==""&&(ee.styles[ne.property]=ie)})),ee}getAutoAnimatableElements(_,J){let Z=(typeof this.Reveal.getConfig().autoAnimateMatcher=="function"?this.Reveal.getConfig().autoAnimateMatcher:this.getAutoAnimatePairs).call(this,_,J),Q=[];return Z.filter(((ee,te)=>{if(Q.indexOf(ee.to)===-1)return Q.push(ee.to),!0}))}getAutoAnimatePairs(_,J){let Z=[];const Q="h1, h2, h3, h4, h5, h6, p, li";return this.findAutoAnimateMatches(Z,_,J,"[data-id]",(ee=>ee.nodeName+":::"+ee.getAttribute("data-id"))),this.findAutoAnimateMatches(Z,_,J,Q,(ee=>ee.nodeName+":::"+ee.textContent.trim())),this.findAutoAnimateMatches(Z,_,J,"img, video, iframe",(ee=>ee.nodeName+":::"+(ee.getAttribute("src")||ee.getAttribute("data-src")))),this.findAutoAnimateMatches(Z,_,J,"pre",(ee=>ee.nodeName+":::"+ee.textContent.trim())),Z.forEach((ee=>{n(ee.from,Q)?ee.options={scale:!1}:n(ee.from,"pre")&&(ee.options={scale:!1,styles:["width","height"]},this.findAutoAnimateMatches(Z,ee.from,ee.to,".hljs .hljs-ln-code",(te=>te.textContent),{scale:!1,styles:[],measure:this.getLocalBoundingBox.bind(this)}),this.findAutoAnimateMatches(Z,ee.from,ee.to,".hljs .hljs-ln-numbers[data-line-number]",(te=>te.getAttribute("data-line-number")),{scale:!1,styles:["width"],measure:this.getLocalBoundingBox.bind(this)}))}),this),Z}getLocalBoundingBox(_){const J=this.Reveal.getScale();return{x:Math.round(_.offsetLeft*J*100)/100,y:Math.round(_.offsetTop*J*100)/100,width:Math.round(_.offsetWidth*J*100)/100,height:Math.round(_.offsetHeight*J*100)/100}}findAutoAnimateMatches(_,J,Z,Q,ee,te){let ne={},ie={};[].slice.call(J.querySelectorAll(Q)).forEach(((re,oe)=>{const se=ee(re);typeof se=="string"&&se.length&&(ne[se]=ne[se]||[],ne[se].push(re))})),[].slice.call(Z.querySelectorAll(Q)).forEach(((re,oe)=>{const se=ee(re);let ae;if(ie[se]=ie[se]||[],ie[se].push(re),ne[se]){const le=ie[se].length-1,ue=ne[se].length-1;ne[se][le]?(ae=ne[se][le],ne[se][le]=null):ne[se][ue]&&(ae=ne[se][ue],ne[se][ue]=null)}ae&&_.push({from:ae,to:re,options:te})}))}getUnmatchedAutoAnimateElements(_){return[].slice.call(_.children).reduce(((J,Z)=>{const Q=Z.querySelector("[data-auto-animate-target]");return Z.hasAttribute("data-auto-animate-target")||Q||J.push(Z),Z.querySelector("[data-auto-animate-target]")&&(J=J.concat(this.getUnmatchedAutoAnimateElements(Z))),J}),[])}};class L{constructor(_){this.Reveal=_,this.active=!1,this.activatedCallbacks=[],this.onScroll=this.onScroll.bind(this)}activate(){if(this.active)return;const _=this.Reveal.getState();this.active=!0,this.slideHTMLBeforeActivation=this.Reveal.getSlidesElement().innerHTML;const J=t(this.Reveal.getRevealElement(),f),Z=t(this.Reveal.getRevealElement(),".backgrounds>.slide-background");let Q;this.viewportElement.classList.add("loading-scroll-mode","reveal-scroll");const ee=window.getComputedStyle(this.viewportElement);ee&&ee.background&&(Q=ee.background);const te=[],ne=J[0].parentNode;let ie;const re=(oe,se,ae,le)=>{let ue;if(ie&&this.Reveal.shouldAutoAnimateBetween(ie,oe))ue=document.createElement("div"),ue.className="scroll-page-content scroll-auto-animate-page",ue.style.display="none",ie.closest(".scroll-page-content").parentNode.appendChild(ue);else{const de=document.createElement("div");if(de.className="scroll-page",te.push(de),le&&Z.length>se){const fe=Z[se],_e=window.getComputedStyle(fe);_e&&_e.background?de.style.background=_e.background:Q&&(de.style.background=Q)}else Q&&(de.style.background=Q);const pe=document.createElement("div");pe.className="scroll-page-sticky",de.appendChild(pe),ue=document.createElement("div"),ue.className="scroll-page-content",pe.appendChild(ue)}ue.appendChild(oe),oe.classList.remove("past","future"),oe.setAttribute("data-index-h",se),oe.setAttribute("data-index-v",ae),oe.slideBackgroundElement&&(oe.slideBackgroundElement.remove("past","future"),ue.insertBefore(oe.slideBackgroundElement,oe)),ie=oe};J.forEach(((oe,se)=>{this.Reveal.isVerticalStack(oe)?oe.querySelectorAll("section").forEach(((ae,le)=>{re(ae,se,le,!0)})):re(oe,se,0)}),this),this.createProgressBar(),t(this.Reveal.getRevealElement(),".stack").forEach((oe=>oe.remove())),te.forEach((oe=>ne.appendChild(oe))),this.Reveal.slideContent.layout(this.Reveal.getSlidesElement()),this.Reveal.layout(),this.Reveal.setState(_),this.activatedCallbacks.forEach((oe=>oe())),this.activatedCallbacks=[],this.restoreScrollPosition(),this.viewportElement.classList.remove("loading-scroll-mode"),this.viewportElement.addEventListener("scroll",this.onScroll,{passive:!0})}deactivate(){if(!this.active)return;const _=this.Reveal.getState();this.active=!1,this.viewportElement.removeEventListener("scroll",this.onScroll),this.viewportElement.classList.remove("reveal-scroll"),this.removeProgressBar(),this.Reveal.getSlidesElement().innerHTML=this.slideHTMLBeforeActivation,this.Reveal.sync(),this.Reveal.setState(_),this.slideHTMLBeforeActivation=null}toggle(_){typeof _=="boolean"?_?this.activate():this.deactivate():this.isActive()?this.deactivate():this.activate()}isActive(){return this.active}createProgressBar(){this.progressBar=document.createElement("div"),this.progressBar.className="scrollbar",this.progressBarInner=document.createElement("div"),this.progressBarInner.className="scrollbar-inner",this.progressBar.appendChild(this.progressBarInner),this.progressBarPlayhead=document.createElement("div"),this.progressBarPlayhead.className="scrollbar-playhead",this.progressBarInner.appendChild(this.progressBarPlayhead),this.viewportElement.insertBefore(this.progressBar,this.viewportElement.firstChild);const _=Z=>{let Q=(Z.clientY-this.progressBarInner.getBoundingClientRect().top)/this.progressBarHeight;Q=Math.max(Math.min(Q,1),0),this.viewportElement.scrollTop=Q*(this.viewportElement.scrollHeight-this.viewportElement.offsetHeight)},J=Z=>{this.draggingProgressBar=!1,this.showProgressBar(),document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",J)};this.progressBarInner.addEventListener("mousedown",(Z=>{Z.preventDefault(),this.draggingProgressBar=!0,document.addEventListener("mousemove",_),document.addEventListener("mouseup",J),_(Z)}))}removeProgressBar(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null)}layout(){this.isActive()&&(this.syncPages(),this.syncScrollPosition())}syncPages(){const _=this.Reveal.getConfig(),J=this.Reveal.getComputedSlideSize(window.innerWidth,window.innerHeight),Z=this.Reveal.getScale(),Q=_.scrollLayout==="compact",ee=this.viewportElement.offsetHeight,te=J.height*Z,ne=Q?te:ee;this.scrollTriggerHeight=Q?te:ee,this.viewportElement.style.setProperty("--page-height",ne+"px"),this.viewportElement.style.scrollSnapType=typeof _.scrollSnap=="string"?`y ${_.scrollSnap}`:"",this.slideTriggers=[];const ie=Array.from(this.Reveal.getRevealElement().querySelectorAll(".scroll-page"));this.pages=ie.map((re=>{const oe=this.createPage({pageElement:re,slideElement:re.querySelector("section"),stickyElement:re.querySelector(".scroll-page-sticky"),contentElement:re.querySelector(".scroll-page-content"),backgroundElement:re.querySelector(".slide-background"),autoAnimateElements:re.querySelectorAll(".scroll-auto-animate-page"),autoAnimatePages:[]});oe.pageElement.style.setProperty("--slide-height",_.center===!0?"auto":J.height+"px"),this.slideTriggers.push({page:oe,activate:()=>this.activatePage(oe),deactivate:()=>this.deactivatePage(oe)}),this.createFragmentTriggersForPage(oe),oe.autoAnimateElements.length>0&&this.createAutoAnimateTriggersForPage(oe);let se=Math.max(oe.scrollTriggers.length-1,0);se+=oe.autoAnimatePages.reduce(((ae,le)=>ae+Math.max(le.scrollTriggers.length-1,0)),oe.autoAnimatePages.length),oe.pageElement.querySelectorAll(".scroll-snap-point").forEach((ae=>ae.remove()));for(let ae=0;ae<se+1;ae++){const le=document.createElement("div");le.className="scroll-snap-point",le.style.height=this.scrollTriggerHeight+"px",le.style.scrollSnapAlign=Q?"center":"start",oe.pageElement.appendChild(le),ae===0&&(le.style.marginTop=-this.scrollTriggerHeight+"px")}return Q&&oe.scrollTriggers.length>0?(oe.pageHeight=ee,oe.pageElement.style.setProperty("--page-height",ee+"px")):(oe.pageHeight=ne,oe.pageElement.style.removeProperty("--page-height")),oe.scrollPadding=this.scrollTriggerHeight*se,oe.totalHeight=oe.pageHeight+oe.scrollPadding,oe.pageElement.style.setProperty("--page-scroll-padding",oe.scrollPadding+"px"),se>0?(oe.stickyElement.style.position="sticky",oe.stickyElement.style.top=Math.max((ee-oe.pageHeight)/2,0)+"px"):(oe.stickyElement.style.position="relative",oe.pageElement.style.scrollSnapAlign=oe.pageHeight<ee?"center":"start"),oe})),this.setTriggerRanges(),this.viewportElement.setAttribute("data-scrollbar",_.scrollProgress),_.scrollProgress&&this.totalScrollTriggerCount>1?(this.progressBar||this.createProgressBar(),this.syncProgressBar()):this.removeProgressBar()}setTriggerRanges(){this.totalScrollTriggerCount=this.slideTriggers.reduce(((J,Z)=>J+Math.max(Z.page.scrollTriggers.length,1)),0);let _=0;this.slideTriggers.forEach(((J,Z)=>{J.range=[_,_+Math.max(J.page.scrollTriggers.length,1)/this.totalScrollTriggerCount];const Q=(J.range[1]-J.range[0])/J.page.scrollTriggers.length;J.page.scrollTriggers.forEach(((ee,te)=>{ee.range=[_+te*Q,_+(te+1)*Q]})),_=J.range[1]})),this.slideTriggers[this.slideTriggers.length-1].range[1]=1}createFragmentTriggersForPage(_,J){J=J||_.slideElement;const Z=this.Reveal.fragments.sort(J.querySelectorAll(".fragment"),!0);return Z.length&&(_.fragments=this.Reveal.fragments.sort(J.querySelectorAll(".fragment:not(.disabled)")),_.scrollTriggers.push({activate:()=>{this.Reveal.fragments.update(-1,_.fragments,J)}}),Z.forEach(((Q,ee)=>{_.scrollTriggers.push({activate:()=>{this.Reveal.fragments.update(ee,_.fragments,J)}})}))),_.scrollTriggers.length}createAutoAnimateTriggersForPage(_){_.autoAnimateElements.length>0&&this.slideTriggers.push(...Array.from(_.autoAnimateElements).map(((J,Z)=>{let Q=this.createPage({slideElement:J.querySelector("section"),contentElement:J,backgroundElement:J.querySelector(".slide-background")});return this.createFragmentTriggersForPage(Q,Q.slideElement),_.autoAnimatePages.push(Q),{page:Q,activate:()=>this.activatePage(Q),deactivate:()=>this.deactivatePage(Q)}})))}createPage(_){return _.scrollTriggers=[],_.indexh=parseInt(_.slideElement.getAttribute("data-index-h"),10),_.indexv=parseInt(_.slideElement.getAttribute("data-index-v"),10),_}syncProgressBar(){this.progressBarInner.querySelectorAll(".scrollbar-slide").forEach((te=>te.remove()));const _=this.viewportElement.scrollHeight,J=this.viewportElement.offsetHeight,Z=J/_;this.progressBarHeight=this.progressBarInner.offsetHeight,this.playheadHeight=Math.max(Z*this.progressBarHeight,8),this.progressBarScrollableHeight=this.progressBarHeight-this.playheadHeight;const Q=J/_*this.progressBarHeight,ee=Math.min(Q/8,4);this.progressBarPlayhead.style.height=this.playheadHeight-ee+"px",Q>6?this.slideTriggers.forEach((te=>{const{page:ne}=te;ne.progressBarSlide=document.createElement("div"),ne.progressBarSlide.className="scrollbar-slide",ne.progressBarSlide.style.top=te.range[0]*this.progressBarHeight+"px",ne.progressBarSlide.style.height=(te.range[1]-te.range[0])*this.progressBarHeight-ee+"px",ne.progressBarSlide.classList.toggle("has-triggers",ne.scrollTriggers.length>0),this.progressBarInner.appendChild(ne.progressBarSlide),ne.scrollTriggerElements=ne.scrollTriggers.map(((ie,re)=>{const oe=document.createElement("div");return oe.className="scrollbar-trigger",oe.style.top=(ie.range[0]-te.range[0])*this.progressBarHeight+"px",oe.style.height=(ie.range[1]-ie.range[0])*this.progressBarHeight-ee+"px",ne.progressBarSlide.appendChild(oe),re===0&&(oe.style.display="none"),oe}))})):this.pages.forEach((te=>te.progressBarSlide=null))}syncScrollPosition(){const _=this.viewportElement.offsetHeight,J=_/this.viewportElement.scrollHeight,Z=this.viewportElement.scrollTop,Q=this.viewportElement.scrollHeight-_,ee=Math.max(Math.min(Z/Q,1),0),te=Math.max(Math.min((Z+_/2)/this.viewportElement.scrollHeight,1),0);let ne;this.slideTriggers.forEach((ie=>{const{page:re}=ie;ee>=ie.range[0]-2*J&&ee<=ie.range[1]+2*J&&!re.loaded?(re.loaded=!0,this.Reveal.slideContent.load(re.slideElement)):re.loaded&&(re.loaded=!1,this.Reveal.slideContent.unload(re.slideElement)),ee>=ie.range[0]&&ee<=ie.range[1]?(this.activateTrigger(ie),ne=ie.page):ie.active&&this.deactivateTrigger(ie)})),ne&&ne.scrollTriggers.forEach((ie=>{te>=ie.range[0]&&te<=ie.range[1]?this.activateTrigger(ie):ie.active&&this.deactivateTrigger(ie)})),this.setProgressBarValue(Z/(this.viewportElement.scrollHeight-_))}setProgressBarValue(_){this.progressBar&&(this.progressBarPlayhead.style.transform=`translateY(${_*this.progressBarScrollableHeight}px)`,this.getAllPages().filter((J=>J.progressBarSlide)).forEach((J=>{J.progressBarSlide.classList.toggle("active",J.active===!0),J.scrollTriggers.forEach(((Z,Q)=>{J.scrollTriggerElements[Q].classList.toggle("active",J.active===!0&&Z.active===!0)}))})),this.showProgressBar())}showProgressBar(){this.progressBar.classList.add("visible"),clearTimeout(this.hideProgressBarTimeout),this.Reveal.getConfig().scrollProgress!=="auto"||this.draggingProgressBar||(this.hideProgressBarTimeout=setTimeout((()=>{this.progressBar&&this.progressBar.classList.remove("visible")}),500))}prev(){this.viewportElement.scrollTop-=this.scrollTriggerHeight}next(){this.viewportElement.scrollTop+=this.scrollTriggerHeight}scrollToSlide(_){if(this.active){const J=this.getScrollTriggerBySlide(_);J&&(this.viewportElement.scrollTop=J.range[0]*(this.viewportElement.scrollHeight-this.viewportElement.offsetHeight))}else this.activatedCallbacks.push((()=>this.scrollToSlide(_)))}storeScrollPosition(){clearTimeout(this.storeScrollPositionTimeout),this.storeScrollPositionTimeout=setTimeout((()=>{sessionStorage.setItem("reveal-scroll-top",this.viewportElement.scrollTop),sessionStorage.setItem("reveal-scroll-origin",location.origin+location.pathname),this.storeScrollPositionTimeout=null}),50)}restoreScrollPosition(){const _=sessionStorage.getItem("reveal-scroll-top"),J=sessionStorage.getItem("reveal-scroll-origin");_&&J===location.origin+location.pathname&&(this.viewportElement.scrollTop=parseInt(_,10))}activatePage(_){if(!_.active){_.active=!0;const{slideElement:J,backgroundElement:Z,contentElement:Q,indexh:ee,indexv:te}=_;Q.style.display="block",J.classList.add("present"),Z&&Z.classList.add("present"),this.Reveal.setCurrentScrollPage(J,ee,te),this.Reveal.backgrounds.bubbleSlideContrastClassToElement(J,this.viewportElement),Array.from(Q.parentNode.querySelectorAll(".scroll-page-content")).forEach((ne=>{ne!==Q&&(ne.style.display="none")}))}}deactivatePage(_){_.active&&(_.active=!1,_.slideElement&&_.slideElement.classList.remove("present"),_.backgroundElement&&_.backgroundElement.classList.remove("present"))}activateTrigger(_){_.active||(_.active=!0,_.activate())}deactivateTrigger(_){_.active&&(_.active=!1,_.deactivate&&_.deactivate())}getSlideByIndices(_,J){const Z=this.getAllPages().find((Q=>Q.indexh===_&&Q.indexv===J));return Z?Z.slideElement:null}getScrollTriggerBySlide(_){return this.slideTriggers.find((J=>J.page.slideElement===_))}getAllPages(){return this.pages.flatMap((_=>[_,..._.autoAnimatePages||[]]))}onScroll(){this.syncScrollPosition(),this.storeScrollPosition()}get viewportElement(){return this.Reveal.getViewportElement()}}class C{constructor(_){this.Reveal=_}async activate(){const _=this.Reveal.getConfig(),J=t(this.Reveal.getRevealElement(),m$1),Z=_.slideNumber&&/all|print/i.test(_.showSlideNumber),Q=this.Reveal.getComputedSlideSize(window.innerWidth,window.innerHeight),ee=Math.floor(Q.width*(1+_.margin)),te=Math.floor(Q.height*(1+_.margin)),ne=Q.width,ie=Q.height;await new Promise(requestAnimationFrame),l$1("@page{size:"+ee+"px "+te+"px; margin: 0px;}"),l$1(".reveal section>img, .reveal section>video, .reveal section>iframe{max-width: "+ne+"px; max-height:"+ie+"px}"),document.documentElement.classList.add("reveal-print","print-pdf"),document.body.style.width=ee+"px",document.body.style.height=te+"px";const re=this.Reveal.getViewportElement();let oe;if(re){const de=window.getComputedStyle(re);de&&de.background&&(oe=de.background)}await new Promise(requestAnimationFrame),this.Reveal.layoutSlideContents(ne,ie),await new Promise(requestAnimationFrame);const se=J.map((de=>de.scrollHeight)),ae=[],le=J[0].parentNode;let ue=1;J.forEach((function(de,pe){if(de.classList.contains("stack")===!1){let fe=(ee-ne)/2,_e=(te-ie)/2;const ye=se[pe];let be=Math.max(Math.ceil(ye/te),1);be=Math.min(be,_.pdfMaxPagesPerSlide),(be===1&&_.center||de.classList.contains("center"))&&(_e=Math.max((te-ye)/2,0));const Ae=document.createElement("div");if(ae.push(Ae),Ae.className="pdf-page",Ae.style.height=(te+_.pdfPageHeightOffset)*be+"px",oe&&(Ae.style.background=oe),Ae.appendChild(de),de.style.left=fe+"px",de.style.top=_e+"px",de.style.width=ne+"px",this.Reveal.slideContent.layout(de),de.slideBackgroundElement&&Ae.insertBefore(de.slideBackgroundElement,de),_.showNotes){const Ce=this.Reveal.getSlideNotes(de);if(Ce){const Re=typeof _.showNotes=="string"?_.showNotes:"inline",Te=document.createElement("div");Te.classList.add("speaker-notes"),Te.classList.add("speaker-notes-pdf"),Te.setAttribute("data-layout",Re),Te.innerHTML=Ce,Re==="separate-page"?ae.push(Te):(Te.style.left="8px",Te.style.bottom="8px",Te.style.width=ee-16+"px",Ae.appendChild(Te))}}if(Z){const Ce=document.createElement("div");Ce.classList.add("slide-number"),Ce.classList.add("slide-number-pdf"),Ce.innerHTML=ue++,Ae.appendChild(Ce)}if(_.pdfSeparateFragments){const Ce=this.Reveal.fragments.sort(Ae.querySelectorAll(".fragment"),!0);let Ee;Ce.forEach((function(Re,Te){Ee&&Ee.forEach((function(Ne){Ne.classList.remove("current-fragment")})),Re.forEach((function(Ne){Ne.classList.add("visible","current-fragment")}),this);const Me=Ae.cloneNode(!0);if(Z){const Ne=Te+1;Me.querySelector(".slide-number-pdf").innerHTML+="."+Ne}ae.push(Me),Ee=Re}),this),Ce.forEach((function(Re){Re.forEach((function(Te){Te.classList.remove("visible","current-fragment")}))}))}else t(Ae,".fragment:not(.fade-out)").forEach((function(Ce){Ce.classList.add("visible")}))}}),this),await new Promise(requestAnimationFrame),ae.forEach((de=>le.appendChild(de))),this.Reveal.slideContent.layout(this.Reveal.getSlidesElement()),this.Reveal.dispatchEvent({type:"pdf-ready"}),re.classList.remove("loading-scroll-mode")}isActive(){return this.Reveal.getConfig().view==="print"}}let x$1=class{constructor(_){this.Reveal=_}configure(_,J){_.fragments===!1?this.disable():J.fragments===!1&&this.enable()}disable(){t(this.Reveal.getSlidesElement(),".fragment").forEach((_=>{_.classList.add("visible"),_.classList.remove("current-fragment")}))}enable(){t(this.Reveal.getSlidesElement(),".fragment").forEach((_=>{_.classList.remove("visible"),_.classList.remove("current-fragment")}))}availableRoutes(){let _=this.Reveal.getCurrentSlide();if(_&&this.Reveal.getConfig().fragments){let J=_.querySelectorAll(".fragment:not(.disabled)"),Z=_.querySelectorAll(".fragment:not(.disabled):not(.visible)");return{prev:J.length-Z.length>0,next:!!Z.length}}return{prev:!1,next:!1}}sort(_,J=!1){_=Array.from(_);let Z=[],Q=[],ee=[];_.forEach((ne=>{if(ne.hasAttribute("data-fragment-index")){let ie=parseInt(ne.getAttribute("data-fragment-index"),10);Z[ie]||(Z[ie]=[]),Z[ie].push(ne)}else Q.push([ne])})),Z=Z.concat(Q);let te=0;return Z.forEach((ne=>{ne.forEach((ie=>{ee.push(ie),ie.setAttribute("data-fragment-index",te)})),te++})),J===!0?Z:ee}sortAll(){this.Reveal.getHorizontalSlides().forEach((_=>{let J=t(_,"section");J.forEach(((Z,Q)=>{this.sort(Z.querySelectorAll(".fragment"))}),this),J.length===0&&this.sort(_.querySelectorAll(".fragment"))}))}update(_,J,Z=this.Reveal.getCurrentSlide()){let Q={shown:[],hidden:[]};if(Z&&this.Reveal.getConfig().fragments&&(J=J||this.sort(Z.querySelectorAll(".fragment"))).length){let ee=0;if(typeof _!="number"){let te=this.sort(Z.querySelectorAll(".fragment.visible")).pop();te&&(_=parseInt(te.getAttribute("data-fragment-index")||0,10))}Array.from(J).forEach(((te,ne)=>{if(te.hasAttribute("data-fragment-index")&&(ne=parseInt(te.getAttribute("data-fragment-index"),10)),ee=Math.max(ee,ne),ne<=_){let ie=te.classList.contains("visible");te.classList.add("visible"),te.classList.remove("current-fragment"),ne===_&&(this.Reveal.announceStatus(this.Reveal.getStatusText(te)),te.classList.add("current-fragment"),this.Reveal.slideContent.startEmbeddedContent(te)),ie||(Q.shown.push(te),this.Reveal.dispatchEvent({target:te,type:"visible",bubbles:!1}))}else{let ie=te.classList.contains("visible");te.classList.remove("visible"),te.classList.remove("current-fragment"),ie&&(this.Reveal.slideContent.stopEmbeddedContent(te),Q.hidden.push(te),this.Reveal.dispatchEvent({target:te,type:"hidden",bubbles:!1}))}})),_=typeof _=="number"?_:-1,_=Math.max(Math.min(_,ee),-1),Z.setAttribute("data-fragment",_)}return Q.hidden.length&&this.Reveal.dispatchEvent({type:"fragmenthidden",data:{fragment:Q.hidden[0],fragments:Q.hidden}}),Q.shown.length&&this.Reveal.dispatchEvent({type:"fragmentshown",data:{fragment:Q.shown[0],fragments:Q.shown}}),Q}sync(_=this.Reveal.getCurrentSlide()){return this.sort(_.querySelectorAll(".fragment"))}goto(_,J=0){let Z=this.Reveal.getCurrentSlide();if(Z&&this.Reveal.getConfig().fragments){let Q=this.sort(Z.querySelectorAll(".fragment:not(.disabled)"));if(Q.length){if(typeof _!="number"){let te=this.sort(Z.querySelectorAll(".fragment:not(.disabled).visible")).pop();_=te?parseInt(te.getAttribute("data-fragment-index")||0,10):-1}_+=J;let ee=this.update(_,Q);return this.Reveal.controls.update(),this.Reveal.progress.update(),this.Reveal.getConfig().fragmentInURL&&this.Reveal.location.writeURL(),!(!ee.shown.length&&!ee.hidden.length)}}return!1}next(){return this.goto(null,1)}prev(){return this.goto(null,-1)}};class P{constructor(_){this.Reveal=_,this.active=!1,this.onSlideClicked=this.onSlideClicked.bind(this)}activate(){if(this.Reveal.getConfig().overview&&!this.Reveal.isScrollView()&&!this.isActive()){this.active=!0,this.Reveal.getRevealElement().classList.add("overview"),this.Reveal.cancelAutoSlide(),this.Reveal.getSlidesElement().appendChild(this.Reveal.getBackgroundsElement()),t(this.Reveal.getRevealElement(),m$1).forEach((Q=>{Q.classList.contains("stack")||Q.addEventListener("click",this.onSlideClicked,!0)}));const _=70,J=this.Reveal.getComputedSlideSize();this.overviewSlideWidth=J.width+_,this.overviewSlideHeight=J.height+_,this.Reveal.getConfig().rtl&&(this.overviewSlideWidth=-this.overviewSlideWidth),this.Reveal.updateSlidesVisibility(),this.layout(),this.update(),this.Reveal.layout();const Z=this.Reveal.getIndices();this.Reveal.dispatchEvent({type:"overviewshown",data:{indexh:Z.h,indexv:Z.v,currentSlide:this.Reveal.getCurrentSlide()}})}}layout(){this.Reveal.getHorizontalSlides().forEach(((_,J)=>{_.setAttribute("data-index-h",J),a$1(_,"translate3d("+J*this.overviewSlideWidth+"px, 0, 0)"),_.classList.contains("stack")&&t(_,"section").forEach(((Z,Q)=>{Z.setAttribute("data-index-h",J),Z.setAttribute("data-index-v",Q),a$1(Z,"translate3d(0, "+Q*this.overviewSlideHeight+"px, 0)")}))})),Array.from(this.Reveal.getBackgroundsElement().childNodes).forEach(((_,J)=>{a$1(_,"translate3d("+J*this.overviewSlideWidth+"px, 0, 0)"),t(_,".slide-background").forEach(((Z,Q)=>{a$1(Z,"translate3d(0, "+Q*this.overviewSlideHeight+"px, 0)")}))}))}update(){const _=Math.min(window.innerWidth,window.innerHeight),J=Math.max(_/5,150)/_,Z=this.Reveal.getIndices();this.Reveal.transformSlides({overview:["scale("+J+")","translateX("+-Z.h*this.overviewSlideWidth+"px)","translateY("+-Z.v*this.overviewSlideHeight+"px)"].join(" ")})}deactivate(){if(this.Reveal.getConfig().overview){this.active=!1,this.Reveal.getRevealElement().classList.remove("overview"),this.Reveal.getRevealElement().classList.add("overview-deactivating"),setTimeout((()=>{this.Reveal.getRevealElement().classList.remove("overview-deactivating")}),1),this.Reveal.getRevealElement().appendChild(this.Reveal.getBackgroundsElement()),t(this.Reveal.getRevealElement(),m$1).forEach((J=>{a$1(J,""),J.removeEventListener("click",this.onSlideClicked,!0)})),t(this.Reveal.getBackgroundsElement(),".slide-background").forEach((J=>{a$1(J,"")})),this.Reveal.transformSlides({overview:""});const _=this.Reveal.getIndices();this.Reveal.slide(_.h,_.v),this.Reveal.layout(),this.Reveal.cueAutoSlide(),this.Reveal.dispatchEvent({type:"overviewhidden",data:{indexh:_.h,indexv:_.v,currentSlide:this.Reveal.getCurrentSlide()}})}}toggle(_){typeof _=="boolean"?_?this.activate():this.deactivate():this.isActive()?this.deactivate():this.activate()}isActive(){return this.active}onSlideClicked(_){if(this.isActive()){_.preventDefault();let J=_.target;for(;J&&!J.nodeName.match(/section/gi);)J=J.parentNode;if(J&&!J.classList.contains("disabled")&&(this.deactivate(),J.nodeName.match(/section/gi))){let Z=parseInt(J.getAttribute("data-index-h"),10),Q=parseInt(J.getAttribute("data-index-v"),10);this.Reveal.slide(Z,Q)}}}}class T{constructor(_){this.Reveal=_,this.shortcuts={},this.bindings={},this.onDocumentKeyDown=this.onDocumentKeyDown.bind(this)}configure(_,J){_.navigationMode==="linear"?(this.shortcuts["&#8594;  ,  &#8595;  ,  SPACE  ,  N  ,  L  ,  J"]="Next slide",this.shortcuts["&#8592;  ,  &#8593;  ,  P  ,  H  ,  K"]="Previous slide"):(this.shortcuts["N  ,  SPACE"]="Next slide",this.shortcuts["P  ,  Shift SPACE"]="Previous slide",this.shortcuts["&#8592;  ,  H"]="Navigate left",this.shortcuts["&#8594;  ,  L"]="Navigate right",this.shortcuts["&#8593;  ,  K"]="Navigate up",this.shortcuts["&#8595;  ,  J"]="Navigate down"),this.shortcuts["Alt + &#8592;/&#8593/&#8594;/&#8595;"]="Navigate without fragments",this.shortcuts["Shift + &#8592;/&#8593/&#8594;/&#8595;"]="Jump to first/last slide",this.shortcuts["B  ,  ."]="Pause",this.shortcuts.F="Fullscreen",this.shortcuts.G="Jump to slide",this.shortcuts["ESC, O"]="Slide overview"}bind(){document.addEventListener("keydown",this.onDocumentKeyDown,!1)}unbind(){document.removeEventListener("keydown",this.onDocumentKeyDown,!1)}addKeyBinding(_,J){typeof _=="object"&&_.keyCode?this.bindings[_.keyCode]={callback:J,key:_.key,description:_.description}:this.bindings[_]={callback:J,key:null,description:null}}removeKeyBinding(_){delete this.bindings[_]}triggerKey(_){this.onDocumentKeyDown({keyCode:_})}registerKeyboardShortcut(_,J){this.shortcuts[_]=J}getShortcuts(){return this.shortcuts}getBindings(){return this.bindings}onDocumentKeyDown(_){let J=this.Reveal.getConfig();if(typeof J.keyboardCondition=="function"&&J.keyboardCondition(_)===!1||J.keyboardCondition==="focused"&&!this.Reveal.isFocused())return!0;let Z=_.keyCode,Q=!this.Reveal.isAutoSliding();this.Reveal.onUserInput(_);let ee=document.activeElement&&document.activeElement.isContentEditable===!0,te=document.activeElement&&document.activeElement.tagName&&/input|textarea/i.test(document.activeElement.tagName),ne=document.activeElement&&document.activeElement.className&&/speaker-notes/i.test(document.activeElement.className),ie=!([32,37,38,39,40,63,78,80,191].indexOf(_.keyCode)!==-1&&_.shiftKey||_.altKey)&&(_.shiftKey||_.altKey||_.ctrlKey||_.metaKey);if(ee||te||ne||ie)return;let re,oe=[66,86,190,191,112];if(typeof J.keyboard=="object")for(re in J.keyboard)J.keyboard[re]==="togglePause"&&oe.push(parseInt(re,10));if(this.Reveal.isOverlayOpen()&&!["Escape","f","c","b","."].includes(_.key)||this.Reveal.isPaused()&&oe.indexOf(Z)===-1)return!1;let se=J.navigationMode==="linear"||!this.Reveal.hasHorizontalSlides()||!this.Reveal.hasVerticalSlides(),ae=!1;if(typeof J.keyboard=="object"){for(re in J.keyboard)if(parseInt(re,10)===Z){let le=J.keyboard[re];typeof le=="function"?le.apply(null,[_]):typeof le=="string"&&typeof this.Reveal[le]=="function"&&this.Reveal[le].call(),ae=!0}}if(ae===!1){for(re in this.bindings)if(parseInt(re,10)===Z){let le=this.bindings[re].callback;typeof le=="function"?le.apply(null,[_]):typeof le=="string"&&typeof this.Reveal[le]=="function"&&this.Reveal[le].call(),ae=!0}}ae===!1&&(ae=!0,Z===80||Z===33?this.Reveal.prev({skipFragments:_.altKey}):Z===78||Z===34?this.Reveal.next({skipFragments:_.altKey}):Z===72||Z===37?_.shiftKey?this.Reveal.slide(0):!this.Reveal.overview.isActive()&&se?J.rtl?this.Reveal.next({skipFragments:_.altKey}):this.Reveal.prev({skipFragments:_.altKey}):this.Reveal.left({skipFragments:_.altKey}):Z===76||Z===39?_.shiftKey?this.Reveal.slide(this.Reveal.getHorizontalSlides().length-1):!this.Reveal.overview.isActive()&&se?J.rtl?this.Reveal.prev({skipFragments:_.altKey}):this.Reveal.next({skipFragments:_.altKey}):this.Reveal.right({skipFragments:_.altKey}):Z===75||Z===38?_.shiftKey?this.Reveal.slide(void 0,0):!this.Reveal.overview.isActive()&&se?this.Reveal.prev({skipFragments:_.altKey}):this.Reveal.up({skipFragments:_.altKey}):Z===74||Z===40?_.shiftKey?this.Reveal.slide(void 0,Number.MAX_VALUE):!this.Reveal.overview.isActive()&&se?this.Reveal.next({skipFragments:_.altKey}):this.Reveal.down({skipFragments:_.altKey}):Z===36?this.Reveal.slide(0):Z===35?this.Reveal.slide(this.Reveal.getHorizontalSlides().length-1):Z===32?(this.Reveal.overview.isActive()&&this.Reveal.overview.deactivate(),_.shiftKey?this.Reveal.prev({skipFragments:_.altKey}):this.Reveal.next({skipFragments:_.altKey})):[58,59,66,86,190].includes(Z)||Z===191&&!_.shiftKey?this.Reveal.togglePause():Z===70?o(J.embedded?this.Reveal.getViewportElement():document.documentElement):Z===65?J.autoSlideStoppable&&this.Reveal.toggleAutoSlide(Q):Z===71?J.jumpToSlide&&this.Reveal.toggleJumpToSlide():Z===67&&this.Reveal.isOverlayOpen()?this.Reveal.closeOverlay():Z!==63&&Z!==191||!_.shiftKey?Z===112?this.Reveal.toggleHelp():ae=!1:this.Reveal.toggleHelp()),ae?_.preventDefault&&_.preventDefault():Z!==27&&Z!==79||(this.Reveal.closeOverlay()===!1&&this.Reveal.overview.toggle(),_.preventDefault&&_.preventDefault()),this.Reveal.cueAutoSlide()}}class N{MAX_REPLACE_STATE_FREQUENCY=1e3;constructor(_){this.Reveal=_,this.writeURLTimeout=0,this.replaceStateTimestamp=0,this.onWindowHashChange=this.onWindowHashChange.bind(this)}bind(){window.addEventListener("hashchange",this.onWindowHashChange,!1)}unbind(){window.removeEventListener("hashchange",this.onWindowHashChange,!1)}getIndicesFromHash(_=window.location.hash,J={}){let Z=_.replace(/^#\/?/,""),Q=Z.split("/");if(/^[0-9]*$/.test(Q[0])||!Z.length){const ee=this.Reveal.getConfig();let te,ne=ee.hashOneBasedIndex||J.oneBasedIndex?1:0,ie=parseInt(Q[0],10)-ne||0,re=parseInt(Q[1],10)-ne||0;return ee.fragmentInURL&&(te=parseInt(Q[2],10),isNaN(te)&&(te=void 0)),{h:ie,v:re,f:te}}{let ee,te;/\/[-\d]+$/g.test(Z)&&(te=parseInt(Z.split("/").pop(),10),te=isNaN(te)?void 0:te,Z=Z.split("/").shift());try{ee=document.getElementById(decodeURIComponent(Z)).closest(".slides section")}catch{}if(ee)return{...this.Reveal.getIndices(ee),f:te}}return null}readURL(){const _=this.Reveal.getIndices(),J=this.getIndicesFromHash();J?J.h===_.h&&J.v===_.v&&J.f===void 0||this.Reveal.slide(J.h,J.v,J.f):this.Reveal.slide(_.h||0,_.v||0)}writeURL(_){let J=this.Reveal.getConfig(),Z=this.Reveal.getCurrentSlide();if(clearTimeout(this.writeURLTimeout),typeof _=="number")this.writeURLTimeout=setTimeout(this.writeURL,_);else if(Z){let Q=this.getHash();J.history?window.location.hash=Q:J.hash&&(Q==="/"?this.debouncedReplaceState(window.location.pathname+window.location.search):this.debouncedReplaceState("#"+Q))}}replaceState(_){window.history.replaceState(null,null,_),this.replaceStateTimestamp=Date.now()}debouncedReplaceState(_){clearTimeout(this.replaceStateTimeout),Date.now()-this.replaceStateTimestamp>this.MAX_REPLACE_STATE_FREQUENCY?this.replaceState(_):this.replaceStateTimeout=setTimeout((()=>this.replaceState(_)),this.MAX_REPLACE_STATE_FREQUENCY)}getHash(_){let J="/",Z=_||this.Reveal.getCurrentSlide(),Q=Z?Z.getAttribute("id"):null;Q&&(Q=encodeURIComponent(Q));let ee=this.Reveal.getIndices(_);if(this.Reveal.getConfig().fragmentInURL||(ee.f=void 0),typeof Q=="string"&&Q.length)J="/"+Q,ee.f>=0&&(J+="/"+ee.f);else{let te=this.Reveal.getConfig().hashOneBasedIndex?1:0;(ee.h>0||ee.v>0||ee.f>=0)&&(J+=ee.h+te),(ee.v>0||ee.f>=0)&&(J+="/"+(ee.v+te)),ee.f>=0&&(J+="/"+ee.f)}return J}onWindowHashChange(_){this.readURL()}}class I{constructor(_){this.Reveal=_,this.onNavigateLeftClicked=this.onNavigateLeftClicked.bind(this),this.onNavigateRightClicked=this.onNavigateRightClicked.bind(this),this.onNavigateUpClicked=this.onNavigateUpClicked.bind(this),this.onNavigateDownClicked=this.onNavigateDownClicked.bind(this),this.onNavigatePrevClicked=this.onNavigatePrevClicked.bind(this),this.onNavigateNextClicked=this.onNavigateNextClicked.bind(this),this.onEnterFullscreen=this.onEnterFullscreen.bind(this)}render(){const _=this.Reveal.getConfig().rtl,J=this.Reveal.getRevealElement();this.element=document.createElement("aside"),this.element.className="controls",this.element.innerHTML=`<button class="navigate-left" aria-label="${_?"next slide":"previous slide"}"><div class="controls-arrow"></div></button>
			<button class="navigate-right" aria-label="${_?"previous slide":"next slide"}"><div class="controls-arrow"></div></button>
			<button class="navigate-up" aria-label="above slide"><div class="controls-arrow"></div></button>
			<button class="navigate-down" aria-label="below slide"><div class="controls-arrow"></div></button>`,this.Reveal.getRevealElement().appendChild(this.element),this.controlsLeft=t(J,".navigate-left"),this.controlsRight=t(J,".navigate-right"),this.controlsUp=t(J,".navigate-up"),this.controlsDown=t(J,".navigate-down"),this.controlsPrev=t(J,".navigate-prev"),this.controlsNext=t(J,".navigate-next"),this.controlsFullscreen=t(J,".enter-fullscreen"),this.controlsRightArrow=this.element.querySelector(".navigate-right"),this.controlsLeftArrow=this.element.querySelector(".navigate-left"),this.controlsDownArrow=this.element.querySelector(".navigate-down")}configure(_,J){this.element.style.display=_.controls&&(_.controls!=="speaker-only"||this.Reveal.isSpeakerNotes())?"block":"none",this.element.setAttribute("data-controls-layout",_.controlsLayout),this.element.setAttribute("data-controls-back-arrows",_.controlsBackArrows)}bind(){let _=["touchstart","click"];g$1&&(_=["touchstart"]),_.forEach((J=>{this.controlsLeft.forEach((Z=>Z.addEventListener(J,this.onNavigateLeftClicked,!1))),this.controlsRight.forEach((Z=>Z.addEventListener(J,this.onNavigateRightClicked,!1))),this.controlsUp.forEach((Z=>Z.addEventListener(J,this.onNavigateUpClicked,!1))),this.controlsDown.forEach((Z=>Z.addEventListener(J,this.onNavigateDownClicked,!1))),this.controlsPrev.forEach((Z=>Z.addEventListener(J,this.onNavigatePrevClicked,!1))),this.controlsNext.forEach((Z=>Z.addEventListener(J,this.onNavigateNextClicked,!1))),this.controlsFullscreen.forEach((Z=>Z.addEventListener(J,this.onEnterFullscreen,!1)))}))}unbind(){["touchstart","click"].forEach((_=>{this.controlsLeft.forEach((J=>J.removeEventListener(_,this.onNavigateLeftClicked,!1))),this.controlsRight.forEach((J=>J.removeEventListener(_,this.onNavigateRightClicked,!1))),this.controlsUp.forEach((J=>J.removeEventListener(_,this.onNavigateUpClicked,!1))),this.controlsDown.forEach((J=>J.removeEventListener(_,this.onNavigateDownClicked,!1))),this.controlsPrev.forEach((J=>J.removeEventListener(_,this.onNavigatePrevClicked,!1))),this.controlsNext.forEach((J=>J.removeEventListener(_,this.onNavigateNextClicked,!1))),this.controlsFullscreen.forEach((J=>J.removeEventListener(_,this.onEnterFullscreen,!1)))}))}update(){let _=this.Reveal.availableRoutes();[...this.controlsLeft,...this.controlsRight,...this.controlsUp,...this.controlsDown,...this.controlsPrev,...this.controlsNext].forEach((Z=>{Z.classList.remove("enabled","fragmented"),Z.setAttribute("disabled","disabled")})),_.left&&this.controlsLeft.forEach((Z=>{Z.classList.add("enabled"),Z.removeAttribute("disabled")})),_.right&&this.controlsRight.forEach((Z=>{Z.classList.add("enabled"),Z.removeAttribute("disabled")})),_.up&&this.controlsUp.forEach((Z=>{Z.classList.add("enabled"),Z.removeAttribute("disabled")})),_.down&&this.controlsDown.forEach((Z=>{Z.classList.add("enabled"),Z.removeAttribute("disabled")})),(_.left||_.up)&&this.controlsPrev.forEach((Z=>{Z.classList.add("enabled"),Z.removeAttribute("disabled")})),(_.right||_.down)&&this.controlsNext.forEach((Z=>{Z.classList.add("enabled"),Z.removeAttribute("disabled")}));let J=this.Reveal.getCurrentSlide();if(J){let Z=this.Reveal.fragments.availableRoutes();Z.prev&&this.controlsPrev.forEach((te=>{te.classList.add("fragmented","enabled"),te.removeAttribute("disabled")})),Z.next&&this.controlsNext.forEach((te=>{te.classList.add("fragmented","enabled"),te.removeAttribute("disabled")}));const Q=this.Reveal.isVerticalSlide(J),ee=Q&&J.parentElement&&J.parentElement.querySelectorAll(":scope > section").length>1;Q&&ee?(Z.prev&&this.controlsUp.forEach((te=>{te.classList.add("fragmented","enabled"),te.removeAttribute("disabled")})),Z.next&&this.controlsDown.forEach((te=>{te.classList.add("fragmented","enabled"),te.removeAttribute("disabled")}))):(Z.prev&&this.controlsLeft.forEach((te=>{te.classList.add("fragmented","enabled"),te.removeAttribute("disabled")})),Z.next&&this.controlsRight.forEach((te=>{te.classList.add("fragmented","enabled"),te.removeAttribute("disabled")})))}if(this.Reveal.getConfig().controlsTutorial){let Z=this.Reveal.getIndices();!this.Reveal.hasNavigatedVertically()&&_.down?this.controlsDownArrow.classList.add("highlight"):(this.controlsDownArrow.classList.remove("highlight"),this.Reveal.getConfig().rtl?!this.Reveal.hasNavigatedHorizontally()&&_.left&&Z.v===0?this.controlsLeftArrow.classList.add("highlight"):this.controlsLeftArrow.classList.remove("highlight"):!this.Reveal.hasNavigatedHorizontally()&&_.right&&Z.v===0?this.controlsRightArrow.classList.add("highlight"):this.controlsRightArrow.classList.remove("highlight"))}}destroy(){this.unbind(),this.element.remove()}onNavigateLeftClicked(_){_.preventDefault(),this.Reveal.onUserInput(),this.Reveal.getConfig().navigationMode==="linear"?this.Reveal.prev():this.Reveal.left()}onNavigateRightClicked(_){_.preventDefault(),this.Reveal.onUserInput(),this.Reveal.getConfig().navigationMode==="linear"?this.Reveal.next():this.Reveal.right()}onNavigateUpClicked(_){_.preventDefault(),this.Reveal.onUserInput(),this.Reveal.up()}onNavigateDownClicked(_){_.preventDefault(),this.Reveal.onUserInput(),this.Reveal.down()}onNavigatePrevClicked(_){_.preventDefault(),this.Reveal.onUserInput(),this.Reveal.prev()}onNavigateNextClicked(_){_.preventDefault(),this.Reveal.onUserInput(),this.Reveal.next()}onEnterFullscreen(_){const J=this.Reveal.getConfig(),Z=this.Reveal.getViewportElement();o(J.embedded?Z:Z.parentElement)}}class M{constructor(_){this.Reveal=_,this.onProgressClicked=this.onProgressClicked.bind(this)}render(){this.element=document.createElement("div"),this.element.className="progress",this.Reveal.getRevealElement().appendChild(this.element),this.bar=document.createElement("span"),this.element.appendChild(this.bar)}configure(_,J){this.element.style.display=_.progress?"block":"none"}bind(){this.Reveal.getConfig().progress&&this.element&&this.element.addEventListener("click",this.onProgressClicked,!1)}unbind(){this.Reveal.getConfig().progress&&this.element&&this.element.removeEventListener("click",this.onProgressClicked,!1)}update(){if(this.Reveal.getConfig().progress&&this.bar){let _=this.Reveal.getProgress();this.Reveal.getTotalSlides()<2&&(_=0),this.bar.style.transform="scaleX("+_+")"}}getMaxWidth(){return this.Reveal.getRevealElement().offsetWidth}onProgressClicked(_){this.Reveal.onUserInput(_),_.preventDefault();let J=this.Reveal.getSlides(),Z=J.length,Q=Math.floor(_.clientX/this.getMaxWidth()*Z);this.Reveal.getConfig().rtl&&(Q=Z-Q);let ee=this.Reveal.getIndices(J[Q]);this.Reveal.slide(ee.h,ee.v)}destroy(){this.element.remove()}}class B{constructor(_){this.Reveal=_,this.lastMouseWheelStep=0,this.cursorHidden=!1,this.cursorInactiveTimeout=0,this.onDocumentCursorActive=this.onDocumentCursorActive.bind(this),this.onDocumentMouseScroll=this.onDocumentMouseScroll.bind(this)}configure(_,J){_.mouseWheel?document.addEventListener("wheel",this.onDocumentMouseScroll,!1):document.removeEventListener("wheel",this.onDocumentMouseScroll,!1),_.hideInactiveCursor?(document.addEventListener("mousemove",this.onDocumentCursorActive,!1),document.addEventListener("mousedown",this.onDocumentCursorActive,!1)):(this.showCursor(),document.removeEventListener("mousemove",this.onDocumentCursorActive,!1),document.removeEventListener("mousedown",this.onDocumentCursorActive,!1))}showCursor(){this.cursorHidden&&(this.cursorHidden=!1,this.Reveal.getRevealElement().style.cursor="")}hideCursor(){this.cursorHidden===!1&&(this.cursorHidden=!0,this.Reveal.getRevealElement().style.cursor="none")}destroy(){this.showCursor(),document.removeEventListener("wheel",this.onDocumentMouseScroll,!1),document.removeEventListener("mousemove",this.onDocumentCursorActive,!1),document.removeEventListener("mousedown",this.onDocumentCursorActive,!1)}onDocumentCursorActive(_){this.showCursor(),clearTimeout(this.cursorInactiveTimeout),this.cursorInactiveTimeout=setTimeout(this.hideCursor.bind(this),this.Reveal.getConfig().hideCursorTime)}onDocumentMouseScroll(_){if(Date.now()-this.lastMouseWheelStep>1e3){this.lastMouseWheelStep=Date.now();let J=_.detail||-_.wheelDelta;J>0?this.Reveal.next():J<0&&this.Reveal.prev()}}}const H=(G,_)=>{const J=document.createElement("script");J.type="text/javascript",J.async=!1,J.defer=!1,J.src=G,typeof _=="function"&&(J.onload=J.onreadystatechange=Q=>{(Q.type==="load"||/loaded|complete/.test(J.readyState))&&(J.onload=J.onreadystatechange=J.onerror=null,_())},J.onerror=Q=>{J.onload=J.onreadystatechange=J.onerror=null,_(new Error("Failed loading script: "+J.src+`
`+Q))});const Z=document.querySelector("head");Z.insertBefore(J,Z.lastChild)};let D$1=class{constructor(_){this.Reveal=_,this.state="idle",this.registeredPlugins={},this.asyncDependencies=[]}load(_,J){return this.state="loading",_.forEach(this.registerPlugin.bind(this)),new Promise((Z=>{let Q=[],ee=0;if(J.forEach((te=>{te.condition&&!te.condition()||(te.async?this.asyncDependencies.push(te):Q.push(te))})),Q.length){ee=Q.length;const te=ne=>{ne&&typeof ne.callback=="function"&&ne.callback(),--ee==0&&this.initPlugins().then(Z)};Q.forEach((ne=>{typeof ne.id=="string"?(this.registerPlugin(ne),te(ne)):typeof ne.src=="string"?H(ne.src,(()=>te(ne))):(console.warn("Unrecognized plugin format",ne),te())}))}else this.initPlugins().then(Z)}))}initPlugins(){return new Promise((_=>{let J=Object.values(this.registeredPlugins),Z=J.length;if(Z===0)this.loadAsync().then(_);else{let Q,ee=()=>{--Z==0?this.loadAsync().then(_):Q()},te=0;Q=()=>{let ne=J[te++];if(typeof ne.init=="function"){let ie=ne.init(this.Reveal);ie&&typeof ie.then=="function"?ie.then(ee):ee()}else ee()},Q()}}))}loadAsync(){return this.state="loaded",this.asyncDependencies.length&&this.asyncDependencies.forEach((_=>{H(_.src,_.callback)})),Promise.resolve()}registerPlugin(_){arguments.length===2&&typeof arguments[0]=="string"?(_=arguments[1]).id=arguments[0]:typeof _=="function"&&(_=_());let J=_.id;typeof J!="string"?console.warn("Unrecognized plugin format; can't find plugin.id",_):this.registeredPlugins[J]===void 0?(this.registeredPlugins[J]=_,this.state==="loaded"&&typeof _.init=="function"&&_.init(this.Reveal)):console.warn('reveal.js: "'+J+'" plugin has already been registered')}hasPlugin(_){return!!this.registeredPlugins[_]}getPlugin(_){return this.registeredPlugins[_]}getRegisteredPlugins(){return this.registeredPlugins}destroy(){Object.values(this.registeredPlugins).forEach((_=>{typeof _.destroy=="function"&&_.destroy()})),this.registeredPlugins={},this.asyncDependencies=[]}};class F{constructor(_){this.Reveal=_,this.onSlidesClicked=this.onSlidesClicked.bind(this),this.iframeTriggerSelector=null,this.mediaTriggerSelector="[data-preview-image], [data-preview-video]",this.stateProps=["previewIframe","previewImage","previewVideo","previewFit"],this.state={}}update(){this.Reveal.getConfig().previewLinks?this.iframeTriggerSelector="a[href]:not([data-preview-link=false]), [data-preview-link]:not(a):not([data-preview-link=false])":this.iframeTriggerSelector="[data-preview-link]:not([data-preview-link=false])";const _=this.Reveal.getSlidesElement().querySelectorAll(this.iframeTriggerSelector).length>0,J=this.Reveal.getSlidesElement().querySelectorAll(this.mediaTriggerSelector).length>0;_||J?this.Reveal.getSlidesElement().addEventListener("click",this.onSlidesClicked,!1):this.Reveal.getSlidesElement().removeEventListener("click",this.onSlidesClicked,!1)}createOverlay(_){this.dom=document.createElement("div"),this.dom.classList.add("r-overlay"),this.dom.classList.add(_),this.viewport=document.createElement("div"),this.viewport.classList.add("r-overlay-viewport"),this.dom.appendChild(this.viewport),this.Reveal.getRevealElement().appendChild(this.dom)}previewIframe(_){this.close(),this.state={previewIframe:_},this.createOverlay("r-overlay-preview"),this.dom.dataset.state="loading",this.viewport.innerHTML=`<header class="r-overlay-header">
				<a class="r-overlay-button r-overlay-external" href="${_}" target="_blank"><span class="icon"></span></a>
				<button class="r-overlay-button r-overlay-close"><span class="icon"></span></button>
			</header>
			<div class="r-overlay-spinner"></div>
			<div class="r-overlay-content">
				<iframe src="${_}"></iframe>
				<small class="r-overlay-content-inner">
					<span class="r-overlay-error x-frame-error">Unable to load iframe. This is likely due to the site's policy (x-frame-options).</span>
				</small>
			</div>`,this.dom.querySelector("iframe").addEventListener("load",(J=>{this.dom.dataset.state="loaded"}),!1),this.dom.querySelector(".r-overlay-close").addEventListener("click",(J=>{this.close(),J.preventDefault()}),!1),this.dom.querySelector(".r-overlay-external").addEventListener("click",(J=>{this.close()}),!1),this.Reveal.dispatchEvent({type:"previewiframe",data:{url:_}})}previewMedia(_,J,Z){if(J!=="image"&&J!=="video")return void console.warn("Please specify a valid media type to preview (image|video)");this.close(),Z=Z||"scale-down",this.createOverlay("r-overlay-preview"),this.dom.dataset.state="loading",this.dom.dataset.previewFit=Z,this.viewport.innerHTML=`<header class="r-overlay-header">
				<button class="r-overlay-button r-overlay-close">Esc <span class="icon"></span></button>
			</header>
			<div class="r-overlay-spinner"></div>
			<div class="r-overlay-content"></div>`;const Q=this.dom.querySelector(".r-overlay-content");if(J==="image"){this.state={previewImage:_,previewFit:Z};const ee=document.createElement("img",{});ee.src=_,Q.appendChild(ee),ee.addEventListener("load",(()=>{this.dom.dataset.state="loaded"}),!1),ee.addEventListener("error",(()=>{this.dom.dataset.state="error",Q.innerHTML='<span class="r-overlay-error">Unable to load image.</span>'}),!1),this.dom.style.cursor="zoom-out",this.dom.addEventListener("click",(te=>{this.close()}),!1),this.Reveal.dispatchEvent({type:"previewimage",data:{url:_}})}else{if(J!=="video")throw new Error("Please specify a valid media type to preview");{this.state={previewVideo:_,previewFit:Z};const ee=document.createElement("video");ee.autoplay=this.dom.dataset.previewAutoplay!=="false",ee.controls=this.dom.dataset.previewControls!=="false",ee.loop=this.dom.dataset.previewLoop==="true",ee.muted=this.dom.dataset.previewMuted==="true",ee.playsInline=!0,ee.src=_,Q.appendChild(ee),ee.addEventListener("loadeddata",(()=>{this.dom.dataset.state="loaded"}),!1),ee.addEventListener("error",(()=>{this.dom.dataset.state="error",Q.innerHTML='<span class="r-overlay-error">Unable to load video.</span>'}),!1),this.Reveal.dispatchEvent({type:"previewvideo",data:{url:_}})}}this.dom.querySelector(".r-overlay-close").addEventListener("click",(ee=>{this.close(),ee.preventDefault()}),!1)}previewImage(_,J){this.previewMedia(_,"image",J)}previewVideo(_,J){this.previewMedia(_,"video",J)}toggleHelp(_){typeof _=="boolean"?_?this.showHelp():this.close():this.dom?this.close():this.showHelp()}showHelp(){if(this.Reveal.getConfig().help){this.close(),this.createOverlay("r-overlay-help");let _='<p class="title">Keyboard Shortcuts</p>',J=this.Reveal.keyboard.getShortcuts(),Z=this.Reveal.keyboard.getBindings();_+="<table><th>KEY</th><th>ACTION</th>";for(let Q in J)_+=`<tr><td>${Q}</td><td>${J[Q]}</td></tr>`;for(let Q in Z)Z[Q].key&&Z[Q].description&&(_+=`<tr><td>${Z[Q].key}</td><td>${Z[Q].description}</td></tr>`);_+="</table>",this.viewport.innerHTML=`
				<header class="r-overlay-header">
					<button class="r-overlay-button r-overlay-close">Esc <span class="icon"></span></button>
				</header>
				<div class="r-overlay-content">
					<div class="r-overlay-help-content">${_}</div>
				</div>
			`,this.dom.querySelector(".r-overlay-close").addEventListener("click",(Q=>{this.close(),Q.preventDefault()}),!1),this.Reveal.dispatchEvent({type:"showhelp"})}}isOpen(){return!!this.dom}close(){return!!this.dom&&(this.dom.remove(),this.dom=null,this.state={},this.Reveal.dispatchEvent({type:"closeoverlay"}),!0)}getState(){return this.state}setState(_){this.stateProps.every((J=>this.state[J]===_[J]))||(_.previewIframe?this.previewIframe(_.previewIframe):_.previewImage?this.previewImage(_.previewImage,_.previewFit):_.previewVideo?this.previewVideo(_.previewVideo,_.previewFit):this.close())}onSlidesClicked(_){const J=_.target,Z=J.closest(this.iframeTriggerSelector),Q=J.closest(this.mediaTriggerSelector);if(Z){if(_.metaKey||_.shiftKey||_.altKey)return;let ee=Z.getAttribute("href")||Z.getAttribute("data-preview-link");ee&&(this.previewIframe(ee),_.preventDefault())}else if(Q){if(Q.hasAttribute("data-preview-image")){let ee=Q.dataset.previewImage||Q.getAttribute("src");ee&&(this.previewImage(ee,Q.dataset.previewFit),_.preventDefault())}else if(Q.hasAttribute("data-preview-video")){let ee=Q.dataset.previewVideo||Q.getAttribute("src");if(!ee){let te=Q.querySelector("source");te&&(ee=te.getAttribute("src"))}ee&&(this.previewVideo(ee,Q.dataset.previewFit),_.preventDefault())}}}destroy(){this.close()}}class z{constructor(_){this.Reveal=_,this.touchStartX=0,this.touchStartY=0,this.touchStartCount=0,this.touchCaptured=!1,this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this)}bind(){let _=this.Reveal.getRevealElement();"onpointerdown"in window?(_.addEventListener("pointerdown",this.onPointerDown,!1),_.addEventListener("pointermove",this.onPointerMove,!1),_.addEventListener("pointerup",this.onPointerUp,!1)):window.navigator.msPointerEnabled?(_.addEventListener("MSPointerDown",this.onPointerDown,!1),_.addEventListener("MSPointerMove",this.onPointerMove,!1),_.addEventListener("MSPointerUp",this.onPointerUp,!1)):(_.addEventListener("touchstart",this.onTouchStart,!1),_.addEventListener("touchmove",this.onTouchMove,!1),_.addEventListener("touchend",this.onTouchEnd,!1))}unbind(){let _=this.Reveal.getRevealElement();_.removeEventListener("pointerdown",this.onPointerDown,!1),_.removeEventListener("pointermove",this.onPointerMove,!1),_.removeEventListener("pointerup",this.onPointerUp,!1),_.removeEventListener("MSPointerDown",this.onPointerDown,!1),_.removeEventListener("MSPointerMove",this.onPointerMove,!1),_.removeEventListener("MSPointerUp",this.onPointerUp,!1),_.removeEventListener("touchstart",this.onTouchStart,!1),_.removeEventListener("touchmove",this.onTouchMove,!1),_.removeEventListener("touchend",this.onTouchEnd,!1)}isSwipePrevented(_){if(n(_,"video[controls], audio[controls]"))return!0;for(;_&&typeof _.hasAttribute=="function";){if(_.hasAttribute("data-prevent-swipe"))return!0;_=_.parentNode}return!1}onTouchStart(_){if(this.touchCaptured=!1,this.isSwipePrevented(_.target))return!0;this.touchStartX=_.touches[0].clientX,this.touchStartY=_.touches[0].clientY,this.touchStartCount=_.touches.length}onTouchMove(_){if(this.isSwipePrevented(_.target))return!0;let J=this.Reveal.getConfig();if(this.touchCaptured)g$1&&_.preventDefault();else{this.Reveal.onUserInput(_);let Z=_.touches[0].clientX,Q=_.touches[0].clientY;if(_.touches.length===1&&this.touchStartCount!==2){let ee=this.Reveal.availableRoutes({includeFragments:!0}),te=Z-this.touchStartX,ne=Q-this.touchStartY;te>40&&Math.abs(te)>Math.abs(ne)?(this.touchCaptured=!0,J.navigationMode==="linear"?J.rtl?this.Reveal.next():this.Reveal.prev():this.Reveal.left()):te<-40&&Math.abs(te)>Math.abs(ne)?(this.touchCaptured=!0,J.navigationMode==="linear"?J.rtl?this.Reveal.prev():this.Reveal.next():this.Reveal.right()):ne>40&&ee.up?(this.touchCaptured=!0,J.navigationMode==="linear"?this.Reveal.prev():this.Reveal.up()):ne<-40&&ee.down&&(this.touchCaptured=!0,J.navigationMode==="linear"?this.Reveal.next():this.Reveal.down()),J.embedded?(this.touchCaptured||this.Reveal.isVerticalSlide())&&_.preventDefault():_.preventDefault()}}}onTouchEnd(_){this.touchCaptured=!1}onPointerDown(_){_.pointerType!==_.MSPOINTER_TYPE_TOUCH&&_.pointerType!=="touch"||(_.touches=[{clientX:_.clientX,clientY:_.clientY}],this.onTouchStart(_))}onPointerMove(_){_.pointerType!==_.MSPOINTER_TYPE_TOUCH&&_.pointerType!=="touch"||(_.touches=[{clientX:_.clientX,clientY:_.clientY}],this.onTouchMove(_))}onPointerUp(_){_.pointerType!==_.MSPOINTER_TYPE_TOUCH&&_.pointerType!=="touch"||(_.touches=[{clientX:_.clientX,clientY:_.clientY}],this.onTouchEnd(_))}}const q="focus",O="blur";let V$1=class{constructor(_){this.Reveal=_,this.onRevealPointerDown=this.onRevealPointerDown.bind(this),this.onDocumentPointerDown=this.onDocumentPointerDown.bind(this)}configure(_,J){_.embedded?this.blur():(this.focus(),this.unbind())}bind(){this.Reveal.getConfig().embedded&&this.Reveal.getRevealElement().addEventListener("pointerdown",this.onRevealPointerDown,!1)}unbind(){this.Reveal.getRevealElement().removeEventListener("pointerdown",this.onRevealPointerDown,!1),document.removeEventListener("pointerdown",this.onDocumentPointerDown,!1)}focus(){this.state!==q&&(this.Reveal.getRevealElement().classList.add("focused"),document.addEventListener("pointerdown",this.onDocumentPointerDown,!1)),this.state=q}blur(){this.state!==O&&(this.Reveal.getRevealElement().classList.remove("focused"),document.removeEventListener("pointerdown",this.onDocumentPointerDown,!1)),this.state=O}isFocused(){return this.state===q}destroy(){this.Reveal.getRevealElement().classList.remove("focused")}onRevealPointerDown(_){this.focus()}onDocumentPointerDown(_){let J=r(_.target,".reveal");J&&J===this.Reveal.getRevealElement()||this.blur()}};class U{constructor(_){this.Reveal=_}render(){this.element=document.createElement("div"),this.element.className="speaker-notes",this.element.setAttribute("data-prevent-swipe",""),this.element.setAttribute("tabindex","0"),this.Reveal.getRevealElement().appendChild(this.element)}configure(_,J){_.showNotes&&this.element.setAttribute("data-layout",typeof _.showNotes=="string"?_.showNotes:"inline")}update(){this.Reveal.getConfig().showNotes&&this.element&&this.Reveal.getCurrentSlide()&&!this.Reveal.isScrollView()&&!this.Reveal.isPrintView()&&(this.element.innerHTML=this.getSlideNotes()||'<span class="notes-placeholder">No notes on this slide.</span>')}updateVisibility(){this.Reveal.getConfig().showNotes&&this.hasNotes()&&!this.Reveal.isScrollView()&&!this.Reveal.isPrintView()?this.Reveal.getRevealElement().classList.add("show-notes"):this.Reveal.getRevealElement().classList.remove("show-notes")}hasNotes(){return this.Reveal.getSlidesElement().querySelectorAll("[data-notes], aside.notes").length>0}isSpeakerNotesWindow(){return!!window.location.search.match(/receiver/gi)}getSlideNotes(_=this.Reveal.getCurrentSlide()){if(_.hasAttribute("data-notes"))return _.getAttribute("data-notes");let J=_.querySelectorAll("aside.notes");return J?Array.from(J).map((Z=>Z.innerHTML)).join(`
`):null}destroy(){this.element.remove()}}let W$1=class{constructor(_,J){this.diameter=100,this.diameter2=this.diameter/2,this.thickness=6,this.playing=!1,this.progress=0,this.progressOffset=1,this.container=_,this.progressCheck=J,this.canvas=document.createElement("canvas"),this.canvas.className="playback",this.canvas.width=this.diameter,this.canvas.height=this.diameter,this.canvas.style.width=this.diameter2+"px",this.canvas.style.height=this.diameter2+"px",this.context=this.canvas.getContext("2d"),this.container.appendChild(this.canvas),this.render()}setPlaying(_){const J=this.playing;this.playing=_,!J&&this.playing?this.animate():this.render()}animate(){const _=this.progress;this.progress=this.progressCheck(),_>.8&&this.progress<.2&&(this.progressOffset=this.progress),this.render(),this.playing&&requestAnimationFrame(this.animate.bind(this))}render(){let _=this.playing?this.progress:0,J=this.diameter2-this.thickness,Z=this.diameter2,Q=this.diameter2,ee=28;this.progressOffset+=.1*(1-this.progressOffset);const te=-Math.PI/2+_*(2*Math.PI),ne=-Math.PI/2+this.progressOffset*(2*Math.PI);this.context.save(),this.context.clearRect(0,0,this.diameter,this.diameter),this.context.beginPath(),this.context.arc(Z,Q,J+4,0,2*Math.PI,!1),this.context.fillStyle="rgba( 0, 0, 0, 0.4 )",this.context.fill(),this.context.beginPath(),this.context.arc(Z,Q,J,0,2*Math.PI,!1),this.context.lineWidth=this.thickness,this.context.strokeStyle="rgba( 255, 255, 255, 0.2 )",this.context.stroke(),this.playing&&(this.context.beginPath(),this.context.arc(Z,Q,J,ne,te,!1),this.context.lineWidth=this.thickness,this.context.strokeStyle="#fff",this.context.stroke()),this.context.translate(Z-14,Q-14),this.playing?(this.context.fillStyle="#fff",this.context.fillRect(0,0,10,ee),this.context.fillRect(18,0,10,ee)):(this.context.beginPath(),this.context.translate(4,0),this.context.moveTo(0,0),this.context.lineTo(24,14),this.context.lineTo(0,ee),this.context.fillStyle="#fff",this.context.fill()),this.context.restore()}on(_,J){this.canvas.addEventListener(_,J,!1)}off(_,J){this.canvas.removeEventListener(_,J,!1)}destroy(){this.playing=!1,this.canvas.parentNode&&this.container.removeChild(this.canvas)}};var j$1={width:960,height:700,margin:.04,minScale:.2,maxScale:2,controls:!0,controlsTutorial:!0,controlsLayout:"bottom-right",controlsBackArrows:"faded",progress:!0,slideNumber:!1,showSlideNumber:"all",hashOneBasedIndex:!1,hash:!1,respondToHashChanges:!0,jumpToSlide:!0,history:!1,keyboard:!0,keyboardCondition:null,disableLayout:!1,overview:!0,center:!0,touch:!0,loop:!1,rtl:!1,navigationMode:"default",shuffle:!1,fragments:!0,fragmentInURL:!0,embedded:!1,help:!0,pause:!0,showNotes:!1,showHiddenSlides:!1,autoPlayMedia:null,preloadIframes:null,autoAnimate:!0,autoAnimateMatcher:null,autoAnimateEasing:"ease",autoAnimateDuration:1,autoAnimateUnmatched:!0,autoAnimateStyles:["opacity","color","background-color","padding","font-size","line-height","letter-spacing","border-width","border-color","border-radius","outline","outline-offset"],autoSlide:0,autoSlideStoppable:!0,autoSlideMethod:null,defaultTiming:null,mouseWheel:!1,previewLinks:!1,postMessage:!0,postMessageEvents:!1,focusBodyOnPageVisibilityChange:!0,transition:"slide",transitionSpeed:"default",backgroundTransition:"fade",parallaxBackgroundImage:"",parallaxBackgroundSize:"",parallaxBackgroundRepeat:"",parallaxBackgroundPosition:"",parallaxBackgroundHorizontal:null,parallaxBackgroundVertical:null,view:null,scrollLayout:"full",scrollSnap:"mandatory",scrollProgress:"auto",scrollActivationWidth:435,pdfMaxPagesPerSlide:Number.POSITIVE_INFINITY,pdfSeparateFragments:!0,pdfPageHeightOffset:-1,viewDistance:3,mobileViewDistance:2,display:"block",hideInactiveCursor:!0,hideCursorTime:5e3,sortFragmentsOnSync:!0,dependencies:[],plugins:[]};const K="5.2.1";function $(G,_){arguments.length<2&&(_=arguments[0],G=document.querySelector(".reveal"));const J={};let Z,Q,ee,te,ne,ie={},re=!1,oe=!1,se={hasNavigatedHorizontally:!1,hasNavigatedVertically:!1},ae=[],le=1,ue={layout:"",overview:""},de={},pe="idle",fe=0,_e=0,ye=-1,be=!1,Ae=new p$1(J),Ce=new w(J),Ee=new E$1(J),Re=new k$1(J),Te=new R(J),Me=new L(J),Ne=new C(J),Le=new x$1(J),Ie=new P(J),Ge=new T(J),He=new N(J),Be=new I(J),ze=new M(J),Fe=new B(J),$e=new D$1(J),Xe=new F(J),je=new V$1(J),qe=new z(J),Ze=new U(J);function st(){re!==!1&&(oe=!0,ie.showHiddenSlides||t(de.wrapper,'section[data-visibility="hidden"]').forEach((ct=>{const Tt=ct.parentNode;Tt.childElementCount===1&&/section/i.test(Tt.nodeName)?Tt.remove():ct.remove()})),(function(){de.slides.classList.add("no-transition"),u?de.wrapper.classList.add("no-hover"):de.wrapper.classList.remove("no-hover"),Te.render(),Ce.render(),Ee.render(),Be.render(),ze.render(),Ze.render(),de.pauseOverlay=((ct,Tt,Xt,Ve="")=>{let nt=ct.querySelectorAll("."+Xt);for(let mt=0;mt<nt.length;mt++){let ut=nt[mt];if(ut.parentNode===ct)return ut}let gt=document.createElement(Tt);return gt.className=Xt,gt.innerHTML=Ve,ct.appendChild(gt),gt})(de.wrapper,"div","pause-overlay",ie.controls?'<button class="resume-button">Resume presentation</button>':null),de.statusElement=(function(){let ct=de.wrapper.querySelector(".aria-status");return ct||(ct=document.createElement("div"),ct.style.position="absolute",ct.style.height="1px",ct.style.width="1px",ct.style.overflow="hidden",ct.style.clip="rect( 1px, 1px, 1px, 1px )",ct.classList.add("aria-status"),ct.setAttribute("aria-live","polite"),ct.setAttribute("aria-atomic","true"),de.wrapper.appendChild(ct)),ct})(),de.wrapper.setAttribute("role","application")})(),ie.postMessage&&window.addEventListener("message",Mn,!1),setInterval((()=>{(!Me.isActive()&&de.wrapper.scrollTop!==0||de.wrapper.scrollLeft!==0)&&(de.wrapper.scrollTop=0,de.wrapper.scrollLeft=0)}),1e3),document.addEventListener("fullscreenchange",ra),document.addEventListener("webkitfullscreenchange",ra),zt().forEach((ct=>{t(ct,"section").forEach(((Tt,Xt)=>{Xt>0&&(Tt.classList.remove("present"),Tt.classList.remove("past"),Tt.classList.add("future"),Tt.setAttribute("aria-hidden","true"))}))})),lt(),Te.update(!0),(function(){const ct=ie.view==="print",Tt=ie.view==="scroll"||ie.view==="reader";(ct||Tt)&&(ct?kt():qe.unbind(),de.viewport.classList.add("loading-scroll-mode"),ct?document.readyState==="complete"?Ne.activate():window.addEventListener("load",(()=>Ne.activate())):Me.activate())})(),He.readURL(),setTimeout((()=>{de.slides.classList.remove("no-transition"),de.wrapper.classList.add("ready"),jt({type:"ready",data:{indexh:Z,indexv:Q,currentSlide:te}})}),1))}function St(ct){de.statusElement.textContent=ct}function it(ct){let Tt="";if(ct.nodeType===3)Tt+=ct.textContent;else if(ct.nodeType===1){let Xt=ct.getAttribute("aria-hidden"),Ve=window.getComputedStyle(ct).display==="none";Xt==="true"||Ve||Array.from(ct.childNodes).forEach((nt=>{Tt+=it(nt)}))}return Tt=Tt.trim(),Tt===""?"":Tt+" "}function lt(ct){const Tt={...ie};if(typeof ct=="object"&&e(ie,ct),J.isReady()===!1)return;const Xt=de.wrapper.querySelectorAll(m$1).length;de.wrapper.classList.remove(Tt.transition),de.wrapper.classList.add(ie.transition),de.wrapper.setAttribute("data-transition-speed",ie.transitionSpeed),de.wrapper.setAttribute("data-background-transition",ie.backgroundTransition),de.viewport.style.setProperty("--slide-width",typeof ie.width=="string"?ie.width:ie.width+"px"),de.viewport.style.setProperty("--slide-height",typeof ie.height=="string"?ie.height:ie.height+"px"),ie.shuffle&&qt(),i$3(de.wrapper,"embedded",ie.embedded),i$3(de.wrapper,"rtl",ie.rtl),i$3(de.wrapper,"center",ie.center),ie.pause===!1&&dt(),Re.reset(),ne&&(ne.destroy(),ne=null),Xt>1&&ie.autoSlide&&ie.autoSlideStoppable&&(ne=new W$1(de.wrapper,(()=>Math.min(Math.max((Date.now()-ye)/fe,0),1))),ne.on("click",Al),be=!1),ie.navigationMode!=="default"?de.wrapper.setAttribute("data-navigation-mode",ie.navigationMode):de.wrapper.removeAttribute("data-navigation-mode"),Ze.configure(ie,Tt),je.configure(ie,Tt),Fe.configure(ie,Tt),Be.configure(ie,Tt),ze.configure(ie,Tt),Ge.configure(ie,Tt),Le.configure(ie,Tt),Ce.configure(ie,Tt),Ut()}function ft(){window.addEventListener("resize",Ur,!1),ie.touch&&qe.bind(),ie.keyboard&&Ge.bind(),ie.progress&&ze.bind(),ie.respondToHashChanges&&He.bind(),Be.bind(),je.bind(),de.slides.addEventListener("click",On,!1),de.slides.addEventListener("transitionend",ki,!1),de.pauseOverlay.addEventListener("click",dt,!1),ie.focusBodyOnPageVisibilityChange&&document.addEventListener("visibilitychange",ks,!1)}function kt(){qe.unbind(),je.unbind(),Ge.unbind(),Be.unbind(),ze.unbind(),He.unbind(),window.removeEventListener("resize",Ur,!1),de.slides.removeEventListener("click",On,!1),de.slides.removeEventListener("transitionend",ki,!1),de.pauseOverlay.removeEventListener("click",dt,!1)}function Ht(ct,Tt,Xt){G.addEventListener(ct,Tt,Xt)}function Wt(ct,Tt,Xt){G.removeEventListener(ct,Tt,Xt)}function ni(ct){typeof ct.layout=="string"&&(ue.layout=ct.layout),typeof ct.overview=="string"&&(ue.overview=ct.overview),ue.layout?a$1(de.slides,ue.layout+" "+ue.overview):a$1(de.slides,ue.overview)}function jt({target:ct=de.wrapper,type:Tt,data:Xt,bubbles:Ve=!0}){let nt=document.createEvent("HTMLEvents",1,2);return nt.initEvent(Tt,Ve,!0),e(nt,Xt),ct.dispatchEvent(nt),ct===de.wrapper&&Ke(Tt),nt}function pt(ct){jt({type:"slidechanged",data:{indexh:Z,indexv:Q,previousSlide:ee,currentSlide:te,origin:ct}})}function Ke(ct,Tt){if(ie.postMessageEvents&&window.parent!==window.self){let Xt={namespace:"reveal",eventName:ct,state:Di()};e(Xt,Tt),window.parent.postMessage(JSON.stringify(Xt),"*")}}function Mt(){if(de.wrapper&&!Ne.isActive()){const ct=de.viewport.offsetWidth,Tt=de.viewport.offsetHeight;if(!ie.disableLayout){u&&!ie.embedded&&document.documentElement.style.setProperty("--vh",.01*window.innerHeight+"px");const Xt=Me.isActive()?Lt(ct,Tt):Lt(),Ve=le;Bt(ie.width,ie.height),de.slides.style.width=Xt.width+"px",de.slides.style.height=Xt.height+"px",le=Math.min(Xt.presentationWidth/Xt.width,Xt.presentationHeight/Xt.height),le=Math.max(le,ie.minScale),le=Math.min(le,ie.maxScale),le===1||Me.isActive()?(de.slides.style.zoom="",de.slides.style.left="",de.slides.style.top="",de.slides.style.bottom="",de.slides.style.right="",ni({layout:""})):(de.slides.style.zoom="",de.slides.style.left="50%",de.slides.style.top="50%",de.slides.style.bottom="auto",de.slides.style.right="auto",ni({layout:"translate(-50%, -50%) scale("+le+")"}));const nt=Array.from(de.wrapper.querySelectorAll(m$1));for(let gt=0,mt=nt.length;gt<mt;gt++){const ut=nt[gt];ut.style.display!=="none"&&(ie.center||ut.classList.contains("center")?ut.classList.contains("stack")?ut.style.top=0:ut.style.top=Math.max((Xt.height-ut.scrollHeight)/2,0)+"px":ut.style.top="")}Ve!==le&&jt({type:"resize",data:{oldScale:Ve,scale:le,size:Xt}})}(function(){if(de.wrapper&&!ie.disableLayout&&!Ne.isActive()&&typeof ie.scrollActivationWidth=="number"&&ie.view!=="scroll"){const Xt=Lt();Xt.presentationWidth>0&&Xt.presentationWidth<=ie.scrollActivationWidth?Me.isActive()||(Te.create(),Me.activate()):Me.isActive()&&Me.deactivate()}})(),de.viewport.style.setProperty("--slide-scale",le),de.viewport.style.setProperty("--viewport-width",ct+"px"),de.viewport.style.setProperty("--viewport-height",Tt+"px"),Me.layout(),ze.update(),Te.updateParallax(),Ie.isActive()&&Ie.update()}}function Bt(ct,Tt){t(de.slides,"section > .stretch, section > .r-stretch").forEach((Xt=>{let Ve=((nt,gt=0)=>{if(nt){let mt,ut=nt.style.height;return nt.style.height="0px",nt.parentNode.style.height="auto",mt=gt-nt.parentNode.offsetHeight,nt.style.height=ut+"px",nt.parentNode.style.removeProperty("height"),mt}return gt})(Xt,Tt);if(/(img|video)/gi.test(Xt.nodeName)){const nt=Xt.naturalWidth||Xt.videoWidth,gt=Xt.naturalHeight||Xt.videoHeight,mt=Math.min(ct/nt,Ve/gt);Xt.style.width=nt*mt+"px",Xt.style.height=gt*mt+"px"}else Xt.style.width=ct+"px",Xt.style.height=Ve+"px"}))}function Lt(ct,Tt){let Xt=ie.width,Ve=ie.height;ie.disableLayout&&(Xt=de.slides.offsetWidth,Ve=de.slides.offsetHeight);const nt={width:Xt,height:Ve,presentationWidth:ct||de.wrapper.offsetWidth,presentationHeight:Tt||de.wrapper.offsetHeight};return nt.presentationWidth-=nt.presentationWidth*ie.margin,nt.presentationHeight-=nt.presentationHeight*ie.margin,typeof nt.width=="string"&&/%$/.test(nt.width)&&(nt.width=parseInt(nt.width,10)/100*nt.presentationWidth),typeof nt.height=="string"&&/%$/.test(nt.height)&&(nt.height=parseInt(nt.height,10)/100*nt.presentationHeight),nt}function Ft(ct,Tt){typeof ct=="object"&&typeof ct.setAttribute=="function"&&ct.setAttribute("data-previous-indexv",Tt||0)}function ai(ct){if(typeof ct=="object"&&typeof ct.setAttribute=="function"&&ct.classList.contains("stack")){const Tt=ct.hasAttribute("data-start-indexv")?"data-start-indexv":"data-previous-indexv";return parseInt(ct.getAttribute(Tt)||0,10)}return 0}function Qt(ct=te){return ct&&ct.parentNode&&!!ct.parentNode.nodeName.match(/section/i)}function hi(){return!(!te||!Qt(te))&&!te.nextElementSibling}function Qe(){return Z===0&&Q===0}function Ye(){return!!te&&!te.nextElementSibling&&(!Qt(te)||!te.parentNode.nextElementSibling)}function _t(){if(ie.pause){const ct=de.wrapper.classList.contains("paused");Ui(),de.wrapper.classList.add("paused"),ct===!1&&jt({type:"paused"})}}function dt(){const ct=de.wrapper.classList.contains("paused");de.wrapper.classList.remove("paused"),Si(),ct&&jt({type:"resumed"})}function yt(ct){typeof ct=="boolean"?ct?_t():dt():Nt()?dt():_t()}function Nt(){return de.wrapper.classList.contains("paused")}function fi(ct,Tt,Xt,Ve){if(jt({type:"beforeslidechange",data:{indexh:ct===void 0?Z:ct,indexv:Tt===void 0?Q:Tt,origin:Ve}}).defaultPrevented)return;ee=te;const nt=de.wrapper.querySelectorAll(f);if(Me.isActive()){const vi=Me.getSlideByIndices(ct,Tt);return void(vi&&Me.scrollToSlide(vi))}if(nt.length===0)return;Tt!==void 0||Ie.isActive()||(Tt=ai(nt[ct])),ee&&ee.parentNode&&ee.parentNode.classList.contains("stack")&&Ft(ee.parentNode,Q);const gt=ae.concat();ae.length=0;let mt=Z||0,ut=Q||0;Z=Rt(f,ct===void 0?Z:ct),Q=Rt(y,Tt===void 0?Q:Tt);let ri=Z!==mt||Q!==ut;ri||(ee=null);let ci=nt[Z],ui=ci.querySelectorAll("section");G.classList.toggle("is-vertical-slide",ui.length>1),te=ui[Q]||ci;let oi=!1;ri&&ee&&te&&!Ie.isActive()&&(pe="running",oi=Zt(ee,te,mt,ut),oi&&de.slides.classList.add("disable-slide-transitions")),tt(),Mt(),Ie.isActive()&&Ie.update(),Xt!==void 0&&Le.goto(Xt),ee&&ee!==te&&(ee.classList.remove("present"),ee.setAttribute("aria-hidden","true"),Qe()&&setTimeout((()=>{t(de.wrapper,f+".stack").forEach((vi=>{Ft(vi,0)}))}),0));e:for(let vi=0,Ti=ae.length;vi<Ti;vi++){for(let bi=0;bi<gt.length;bi++)if(gt[bi]===ae[vi]){gt.splice(bi,1);continue e}de.viewport.classList.add(ae[vi]),jt({type:ae[vi]})}for(;gt.length;)de.viewport.classList.remove(gt.pop());ri&&pt(Ve),!ri&&ee||(Ae.stopEmbeddedContent(ee),Ae.startEmbeddedContent(te)),requestAnimationFrame((()=>{St(it(te))})),ze.update(),Be.update(),Ze.update(),Te.update(),Te.updateParallax(),Ce.update(),Le.update(),He.writeURL(),Si(),oi&&(setTimeout((()=>{de.slides.classList.remove("disable-slide-transitions")}),0),ie.autoAnimate&&Re.run(ee,te))}function Zt(ct,Tt,Xt,Ve){return ct.hasAttribute("data-auto-animate")&&Tt.hasAttribute("data-auto-animate")&&ct.getAttribute("data-auto-animate-id")===Tt.getAttribute("data-auto-animate-id")&&!(Z>Xt||Q>Ve?Tt:ct).hasAttribute("data-auto-animate-restart")}function Ut(){kt(),ft(),Mt(),fe=ie.autoSlide,Si(),Te.create(),He.writeURL(),ie.sortFragmentsOnSync===!0&&Le.sortAll(),Be.update(),ze.update(),tt(),Ze.update(),Ze.updateVisibility(),Xe.update(),Te.update(!0),Ce.update(),Ae.formatEmbeddedContent(),ie.autoPlayMedia===!1?Ae.stopEmbeddedContent(te,{unloadIframes:!1}):Ae.startEmbeddedContent(te),Ie.isActive()&&Ie.layout()}function qt(ct=zt()){ct.forEach(((Tt,Xt)=>{let Ve=ct[Math.floor(Math.random()*ct.length)];Ve.parentNode===Tt.parentNode&&Tt.parentNode.insertBefore(Tt,Ve);let nt=Tt.querySelectorAll("section");nt.length&&qt(nt)}))}function Rt(ct,Tt){let Xt=t(de.wrapper,ct),Ve=Xt.length,nt=Me.isActive()||Ne.isActive(),gt=!1,mt=!1;if(Ve){ie.loop&&(Tt>=Ve&&(gt=!0),(Tt%=Ve)<0&&(Tt=Ve+Tt,mt=!0)),Tt=Math.max(Math.min(Tt,Ve-1),0);for(let ui=0;ui<Ve;ui++){let oi=Xt[ui],vi=ie.rtl&&!Qt(oi);oi.classList.remove("past"),oi.classList.remove("present"),oi.classList.remove("future"),oi.setAttribute("hidden",""),oi.setAttribute("aria-hidden","true"),oi.querySelector("section")&&oi.classList.add("stack"),nt?oi.classList.add("present"):ui<Tt?(oi.classList.add(vi?"future":"past"),ie.fragments&&Pt(oi)):ui>Tt?(oi.classList.add(vi?"past":"future"),ie.fragments&&vt(oi)):ui===Tt&&ie.fragments&&(gt?vt(oi):mt&&Pt(oi))}let ut=Xt[Tt],ri=ut.classList.contains("present");ut.classList.add("present"),ut.removeAttribute("hidden"),ut.removeAttribute("aria-hidden"),ri||jt({target:ut,type:"visible",bubbles:!1});let ci=ut.getAttribute("data-state");ci&&(ae=ae.concat(ci.split(" ")))}else Tt=0;return Tt}function Pt(ct){t(ct,".fragment").forEach((Tt=>{Tt.classList.add("visible"),Tt.classList.remove("current-fragment")}))}function vt(ct){t(ct,".fragment.visible").forEach((Tt=>{Tt.classList.remove("visible","current-fragment")}))}function tt(){let ct,Tt,Xt=zt(),Ve=Xt.length;if(Ve&&Z!==void 0){let nt=Ie.isActive()?10:ie.viewDistance;u&&(nt=Ie.isActive()?6:ie.mobileViewDistance),Ne.isActive()&&(nt=Number.MAX_VALUE);for(let gt=0;gt<Ve;gt++){let mt=Xt[gt],ut=t(mt,"section"),ri=ut.length;if(ct=Math.abs((Z||0)-gt)||0,ie.loop&&(ct=Math.abs(((Z||0)-gt)%(Ve-nt))||0),ct<nt?Ae.load(mt):Ae.unload(mt),ri){let ci=ai(mt);for(let ui=0;ui<ri;ui++){let oi=ut[ui];Tt=Math.abs(gt===(Z||0)?(Q||0)-ui:ui-ci),ct+Tt<nt?Ae.load(oi):Ae.unload(oi)}}}Vt()?de.wrapper.classList.add("has-vertical-slides"):de.wrapper.classList.remove("has-vertical-slides"),Kt()?de.wrapper.classList.add("has-horizontal-slides"):de.wrapper.classList.remove("has-horizontal-slides")}}function et({includeFragments:ct=!1}={}){let Tt=de.wrapper.querySelectorAll(f),Xt=de.wrapper.querySelectorAll(y),Ve={left:Z>0,right:Z<Tt.length-1,up:Q>0,down:Q<Xt.length-1};if(ie.loop&&(Tt.length>1&&(Ve.left=!0,Ve.right=!0),Xt.length>1&&(Ve.up=!0,Ve.down=!0)),Tt.length>1&&ie.navigationMode==="linear"&&(Ve.right=Ve.right||Ve.down,Ve.left=Ve.left||Ve.up),ct===!0){let nt=Le.availableRoutes();Ve.left=Ve.left||nt.prev,Ve.up=Ve.up||nt.prev,Ve.down=Ve.down||nt.next,Ve.right=Ve.right||nt.next}if(ie.rtl){let nt=Ve.left;Ve.left=Ve.right,Ve.right=nt}return Ve}function ei(ct=te){let Tt=zt(),Xt=0;e:for(let Ve=0;Ve<Tt.length;Ve++){let nt=Tt[Ve],gt=nt.querySelectorAll("section");for(let mt=0;mt<gt.length;mt++){if(gt[mt]===ct)break e;gt[mt].dataset.visibility!=="uncounted"&&Xt++}if(nt===ct)break;nt.classList.contains("stack")===!1&&nt.dataset.visibility!=="uncounted"&&Xt++}return Xt}function rt(ct){let Tt,Xt=Z,Ve=Q;if(ct)if(Me.isActive())Xt=parseInt(ct.getAttribute("data-index-h"),10),ct.getAttribute("data-index-v")&&(Ve=parseInt(ct.getAttribute("data-index-v"),10));else{let nt=Qt(ct),gt=nt?ct.parentNode:ct,mt=zt();Xt=Math.max(mt.indexOf(gt),0),Ve=void 0,nt&&(Ve=Math.max(t(ct.parentNode,"section").indexOf(ct),0))}if(!ct&&te&&te.querySelectorAll(".fragment").length>0){let nt=te.querySelector(".current-fragment");Tt=nt&&nt.hasAttribute("data-fragment-index")?parseInt(nt.getAttribute("data-fragment-index"),10):te.querySelectorAll(".fragment.visible").length-1}return{h:Xt,v:Ve,f:Tt}}function ti(){return t(de.wrapper,m$1+':not(.stack):not([data-visibility="uncounted"])')}function zt(){return t(de.wrapper,f)}function ii(){return t(de.wrapper,".slides>section>section")}function Kt(){return zt().length>1}function Vt(){return ii().length>1}function di(){return ti().length}function pi(ct,Tt){let Xt=zt()[ct],Ve=Xt&&Xt.querySelectorAll("section");return Ve&&Ve.length&&typeof Tt=="number"?Ve?Ve[Tt]:void 0:Xt}function Di(){let ct=rt();return{indexh:ct.h,indexv:ct.v,indexf:ct.f,paused:Nt(),overview:Ie.isActive(),...Xe.getState()}}function Si(){if(Ui(),te&&ie.autoSlide!==!1){let ct=te.querySelector(".current-fragment[data-autoslide]"),Tt=ct?ct.getAttribute("data-autoslide"):null,Xt=te.parentNode?te.parentNode.getAttribute("data-autoslide"):null,Ve=te.getAttribute("data-autoslide");Tt?fe=parseInt(Tt,10):Ve?fe=parseInt(Ve,10):Xt?fe=parseInt(Xt,10):(fe=ie.autoSlide,te.querySelectorAll(".fragment").length===0&&t(te,"video, audio").forEach((nt=>{nt.hasAttribute("data-autoplay")&&fe&&1e3*nt.duration/nt.playbackRate>fe&&(fe=1e3*nt.duration/nt.playbackRate+1e3)}))),!fe||be||Nt()||Ie.isActive()||Ye()&&!Le.availableRoutes().next&&ie.loop!==!0||(_e=setTimeout((()=>{typeof ie.autoSlideMethod=="function"?ie.autoSlideMethod():$n(),Si()}),fe),ye=Date.now()),ne&&ne.setPlaying(_e!==-1)}}function Ui(){clearTimeout(_e),_e=-1}function vn(){fe&&!be&&(be=!0,jt({type:"autoslidepaused"}),clearTimeout(_e),ne&&ne.setPlaying(!1))}function Tr(){fe&&be&&(be=!1,jt({type:"autoslideresumed"}),Si())}function Ln({skipFragments:ct=!1}={}){if(se.hasNavigatedHorizontally=!0,Me.isActive())return Me.prev();ie.rtl?(Ie.isActive()||ct||Le.next()===!1)&&et().left&&fi(Z+1,ie.navigationMode==="grid"?Q:void 0):(Ie.isActive()||ct||Le.prev()===!1)&&et().left&&fi(Z-1,ie.navigationMode==="grid"?Q:void 0)}function wr({skipFragments:ct=!1}={}){if(se.hasNavigatedHorizontally=!0,Me.isActive())return Me.next();ie.rtl?(Ie.isActive()||ct||Le.prev()===!1)&&et().right&&fi(Z-1,ie.navigationMode==="grid"?Q:void 0):(Ie.isActive()||ct||Le.next()===!1)&&et().right&&fi(Z+1,ie.navigationMode==="grid"?Q:void 0)}function _n({skipFragments:ct=!1}={}){if(Me.isActive())return Me.prev();(Ie.isActive()||ct||Le.prev()===!1)&&et().up&&fi(Z,Q-1)}function Ir({skipFragments:ct=!1}={}){if(se.hasNavigatedVertically=!0,Me.isActive())return Me.next();(Ie.isActive()||ct||Le.next()===!1)&&et().down&&fi(Z,Q+1)}function Bn({skipFragments:ct=!1}={}){if(Me.isActive())return Me.prev();if(ct||Le.prev()===!1)if(et().up)_n({skipFragments:ct});else{let Tt;if(Tt=ie.rtl?t(de.wrapper,f+".future").pop():t(de.wrapper,f+".past").pop(),Tt&&Tt.classList.contains("stack")){let Xt=Tt.querySelectorAll("section").length-1||void 0;fi(Z-1,Xt)}else ie.rtl?wr({skipFragments:ct}):Ln({skipFragments:ct})}}function $n({skipFragments:ct=!1}={}){if(se.hasNavigatedHorizontally=!0,se.hasNavigatedVertically=!0,Me.isActive())return Me.next();if(ct||Le.next()===!1){let Tt=et();Tt.down&&Tt.right&&ie.loop&&hi()&&(Tt.down=!1),Tt.down?Ir({skipFragments:ct}):ie.rtl?Ln({skipFragments:ct}):wr({skipFragments:ct})}}function Mn(ct){let Tt=ct.data;if(typeof Tt=="string"&&Tt.charAt(0)==="{"&&Tt.charAt(Tt.length-1)==="}"&&(Tt=JSON.parse(Tt),Tt.method&&typeof J[Tt.method]=="function"))if(b$1.test(Tt.method)===!1){const Xt=J[Tt.method].apply(J,Tt.args);Ke("callback",{method:Tt.method,result:Xt})}else console.warn('reveal.js: "'+Tt.method+'" is is blacklisted from the postMessage API')}function ki(ct){pe==="running"&&/section/gi.test(ct.target.nodeName)&&(pe="idle",jt({type:"slidetransitionend",data:{indexh:Z,indexv:Q,previousSlide:ee,currentSlide:te}}))}function On(ct){const Tt=r(ct.target,'a[href^="#"]');if(Tt){const Xt=Tt.getAttribute("href"),Ve=He.getIndicesFromHash(Xt);Ve&&(J.slide(Ve.h,Ve.v,Ve.f),ct.preventDefault())}}function Ur(ct){Mt()}function ks(ct){document.hidden===!1&&document.activeElement!==document.body&&(typeof document.activeElement.blur=="function"&&document.activeElement.blur(),document.body.focus())}function ra(ct){(document.fullscreenElement||document.webkitFullscreenElement)===de.wrapper&&(ct.stopImmediatePropagation(),setTimeout((()=>{J.layout(),J.focus.focus()}),1))}function Al(ct){Ye()&&ie.loop===!1?(fi(0,0),Tr()):be?Tr():vn()}const sa={VERSION:K,initialize:function(ct){if(!G)throw'Unable to find presentation root (<div class="reveal">).';if(re)throw"Reveal.js has already been initialized.";if(re=!0,de.wrapper=G,de.slides=G.querySelector(".slides"),!de.slides)throw'Unable to find slides container (<div class="slides">).';return ie={...j$1,...ie,..._,...ct,...d()},/print-pdf/gi.test(window.location.search)&&(ie.view="print"),(function(){ie.embedded===!0?de.viewport=r(G,".reveal-viewport")||G:(de.viewport=document.body,document.documentElement.classList.add("reveal-full-page")),de.viewport.classList.add("reveal-viewport")})(),window.addEventListener("load",Mt,!1),$e.load(ie.plugins,ie.dependencies).then(st),new Promise((Tt=>J.on("ready",Tt)))},configure:lt,destroy:function(){re=!1,oe!==!1&&(kt(),Ui(),Ze.destroy(),je.destroy(),Xe.destroy(),$e.destroy(),Fe.destroy(),Be.destroy(),ze.destroy(),Te.destroy(),Ce.destroy(),Ee.destroy(),document.removeEventListener("fullscreenchange",ra),document.removeEventListener("webkitfullscreenchange",ra),document.removeEventListener("visibilitychange",ks,!1),window.removeEventListener("message",Mn,!1),window.removeEventListener("load",Mt,!1),de.pauseOverlay&&de.pauseOverlay.remove(),de.statusElement&&de.statusElement.remove(),document.documentElement.classList.remove("reveal-full-page"),de.wrapper.classList.remove("ready","center","has-horizontal-slides","has-vertical-slides"),de.wrapper.removeAttribute("data-transition-speed"),de.wrapper.removeAttribute("data-background-transition"),de.viewport.classList.remove("reveal-viewport"),de.viewport.style.removeProperty("--slide-width"),de.viewport.style.removeProperty("--slide-height"),de.slides.style.removeProperty("width"),de.slides.style.removeProperty("height"),de.slides.style.removeProperty("zoom"),de.slides.style.removeProperty("left"),de.slides.style.removeProperty("top"),de.slides.style.removeProperty("bottom"),de.slides.style.removeProperty("right"),de.slides.style.removeProperty("transform"),Array.from(de.wrapper.querySelectorAll(m$1)).forEach((ct=>{ct.style.removeProperty("display"),ct.style.removeProperty("top"),ct.removeAttribute("hidden"),ct.removeAttribute("aria-hidden")})))},sync:Ut,syncSlide:function(ct=te){Te.sync(ct),Le.sync(ct),Ae.load(ct),Te.update(),Ze.update()},syncFragments:Le.sync.bind(Le),slide:fi,left:Ln,right:wr,up:_n,down:Ir,prev:Bn,next:$n,navigateLeft:Ln,navigateRight:wr,navigateUp:_n,navigateDown:Ir,navigatePrev:Bn,navigateNext:$n,navigateFragment:Le.goto.bind(Le),prevFragment:Le.prev.bind(Le),nextFragment:Le.next.bind(Le),on:Ht,off:Wt,addEventListener:Ht,removeEventListener:Wt,layout:Mt,shuffle:qt,availableRoutes:et,availableFragments:Le.availableRoutes.bind(Le),toggleHelp:Xe.toggleHelp.bind(Xe),toggleOverview:Ie.toggle.bind(Ie),toggleScrollView:Me.toggle.bind(Me),togglePause:yt,toggleAutoSlide:function(ct){typeof ct=="boolean"?ct?Tr():vn():be?Tr():vn()},toggleJumpToSlide:function(ct){typeof ct=="boolean"?ct?Ee.show():Ee.hide():Ee.isVisible()?Ee.hide():Ee.show()},isFirstSlide:Qe,isLastSlide:Ye,isLastVerticalSlide:hi,isVerticalSlide:Qt,isVerticalStack:function(ct=te){return ct.classList.contains(".stack")||ct.querySelector("section")!==null},isPaused:Nt,isAutoSliding:function(){return!(!fe||be)},isSpeakerNotes:Ze.isSpeakerNotesWindow.bind(Ze),isOverview:Ie.isActive.bind(Ie),isFocused:je.isFocused.bind(je),isOverlayOpen:Xe.isOpen.bind(Xe),isScrollView:Me.isActive.bind(Me),isPrintView:Ne.isActive.bind(Ne),isReady:()=>oe,loadSlide:Ae.load.bind(Ae),unloadSlide:Ae.unload.bind(Ae),startEmbeddedContent:()=>Ae.startEmbeddedContent(te),stopEmbeddedContent:()=>Ae.stopEmbeddedContent(te,{unloadIframes:!1}),previewIframe:Xe.previewIframe.bind(Xe),previewImage:Xe.previewImage.bind(Xe),previewVideo:Xe.previewVideo.bind(Xe),showPreview:Xe.previewIframe.bind(Xe),hidePreview:Xe.close.bind(Xe),addEventListeners:ft,removeEventListeners:kt,dispatchEvent:jt,getState:Di,setState:function(ct){if(typeof ct=="object"){fi(s(ct.indexh),s(ct.indexv),s(ct.indexf));let Tt=s(ct.paused),Xt=s(ct.overview);typeof Tt=="boolean"&&Tt!==Nt()&&yt(Tt),typeof Xt=="boolean"&&Xt!==Ie.isActive()&&Ie.toggle(Xt),Xe.setState(ct)}},getProgress:function(){let ct=di(),Tt=ei();if(te){let Xt=te.querySelectorAll(".fragment");Xt.length>0&&(Tt+=te.querySelectorAll(".fragment.visible").length/Xt.length*.9)}return Math.min(Tt/(ct-1),1)},getIndices:rt,getSlidesAttributes:function(){return ti().map((ct=>{let Tt={};for(let Xt=0;Xt<ct.attributes.length;Xt++){let Ve=ct.attributes[Xt];Tt[Ve.name]=Ve.value}return Tt}))},getSlidePastCount:ei,getTotalSlides:di,getSlide:pi,getPreviousSlide:()=>ee,getCurrentSlide:()=>te,getSlideBackground:function(ct,Tt){let Xt=typeof ct=="number"?pi(ct,Tt):ct;if(Xt)return Xt.slideBackgroundElement},getSlideNotes:Ze.getSlideNotes.bind(Ze),getSlides:ti,getHorizontalSlides:zt,getVerticalSlides:ii,hasHorizontalSlides:Kt,hasVerticalSlides:Vt,hasNavigatedHorizontally:()=>se.hasNavigatedHorizontally,hasNavigatedVertically:()=>se.hasNavigatedVertically,shouldAutoAnimateBetween:Zt,addKeyBinding:Ge.addKeyBinding.bind(Ge),removeKeyBinding:Ge.removeKeyBinding.bind(Ge),triggerKey:Ge.triggerKey.bind(Ge),registerKeyboardShortcut:Ge.registerKeyboardShortcut.bind(Ge),getComputedSlideSize:Lt,setCurrentScrollPage:function(ct,Tt,Xt){let Ve=Z||0;Z=Tt,Q=Xt;const nt=te!==ct;ee=te,te=ct,te&&ee&&ie.autoAnimate&&Zt(ee,te,Ve,Q)&&Re.run(ee,te),nt&&(ee&&(Ae.stopEmbeddedContent(ee),Ae.stopEmbeddedContent(ee.slideBackgroundElement)),Ae.startEmbeddedContent(te),Ae.startEmbeddedContent(te.slideBackgroundElement)),requestAnimationFrame((()=>{St(it(te))})),pt()},getScale:()=>le,getConfig:()=>ie,getQueryHash:d,getSlidePath:He.getHash.bind(He),getRevealElement:()=>G,getSlidesElement:()=>de.slides,getViewportElement:()=>de.viewport,getBackgroundsElement:()=>Te.element,registerPlugin:$e.registerPlugin.bind($e),hasPlugin:$e.hasPlugin.bind($e),getPlugin:$e.getPlugin.bind($e),getPlugins:$e.getRegisteredPlugins.bind($e)};return e(J,{...sa,announceStatus:St,getStatusText:it,focus:je,scroll:Me,progress:ze,controls:Be,location:He,overview:Ie,keyboard:Ge,fragments:Le,backgrounds:Te,slideContent:Ae,slideNumber:Ce,onUserInput:function(ct){ie.autoSlideStoppable&&vn()},closeOverlay:Xe.close.bind(Xe),updateSlidesVisibility:tt,layoutSlideContents:Bt,transformSlides:ni,cueAutoSlide:Si,cancelAutoSlide:Ui}),sa}let X$1=$,Y=[];X$1.initialize=G=>(Object.assign(X$1,new $(document.querySelector(".reveal"),G)),Y.map((_=>_(X$1))),X$1.initialize()),["configure","on","off","addEventListener","removeEventListener","registerPlugin"].forEach((G=>{X$1[G]=(..._)=>{Y.push((J=>J[G].call(null,..._)))}})),X$1.isReady=()=>!1,X$1.VERSION=K;const paper="/cubetests/assets/unit-cube-test-BqzJ90WS.pdf",thesis="/cubetests/assets/thesis_bromberger-BrRKlJyb.pdf",ctrlErgo="/cubetests/assets/ctrl-ergo-paper-Du6SvgJz.pdf";var math$1={exports:{}},math=math$1.exports,hasRequiredMath;function requireMath(){return hasRequiredMath||(hasRequiredMath=1,(function(G,_){(function(J,Z){G.exports=Z()})(math,(function(){const J=()=>{let Q,ee={messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],skipTags:["script","noscript","style","textarea","pre","code"]},skipStartupTypeset:!0};return{id:"mathjax2",init:function(te){Q=te;let ne=Q.getConfig().mathjax2||Q.getConfig().math||{},ie={...ee,...ne},re=(ie.mathjax||"https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js")+"?config="+(ie.config||"TeX-AMS_HTML-full");ie.tex2jax={...ee.tex2jax,...ne.tex2jax},ie.mathjax=ie.config=null,(function(oe,se){let ae=document.querySelector("head"),le=document.createElement("script");le.type="text/javascript",le.src=oe;let ue=()=>{typeof se=="function"&&(se.call(),se=null)};le.onload=ue,le.onreadystatechange=()=>{this.readyState==="loaded"&&ue()},ae.appendChild(le)})(re,(function(){MathJax.Hub.Config(ie),MathJax.Hub.Queue(["Typeset",MathJax.Hub,Q.getRevealElement()]),MathJax.Hub.Queue(Q.layout),Q.on("slidechanged",(function(oe){MathJax.Hub.Queue(["Typeset",MathJax.Hub,oe.currentSlide])}))}))}}};return Plugin=Object.assign(J(),{KaTeX:()=>{let Q,ee={version:"latest",delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredTags:["script","noscript","style","textarea","pre","code"]};const te=ne=>new Promise(((ie,re)=>{const oe=document.createElement("script");oe.type="text/javascript",oe.onload=ie,oe.onerror=re,oe.src=ne,document.head.append(oe)}));return{id:"katex",init:function(ne){Q=ne;let ie=Q.getConfig().katex||{},re={...ee,...ie};const{local:oe,version:se,extensions:ae,...le}=re;let ue=re.local||"https://cdn.jsdelivr.net/npm/katex",de=re.local?"":"@"+re.version,pe=ue+de+"/dist/katex.min.css",fe=ue+de+"/dist/contrib/mhchem.min.js",_e=ue+de+"/dist/contrib/auto-render.min.js",ye=[ue+de+"/dist/katex.min.js"];re.extensions&&re.extensions.includes("mhchem")&&ye.push(fe),ye.push(_e);const be=()=>{renderMathInElement(ne.getSlidesElement(),le),Q.layout()};(Ae=>{let Ce=document.createElement("link");Ce.rel="stylesheet",Ce.href=Ae,document.head.appendChild(Ce)})(pe),(async function(Ae){for(const Ce of Ae)await te(Ce)})(ye).then((()=>{Q.isReady()?be():Q.on("ready",be.bind(this))}))}}},MathJax2:J,MathJax3:()=>{let Q,ee={tex:{inlineMath:[["$","$"],["\\(","\\)"]]},options:{skipHtmlTags:["script","noscript","style","textarea","pre","code"]},startup:{ready:()=>{MathJax.startup.defaultReady(),MathJax.startup.promise.then((()=>{Q.layout()}))}}};return{id:"mathjax3",init:function(te){Q=te;let ne=Q.getConfig().mathjax3||{},ie={...ee,...ne};ie.tex={...ee.tex,...ne.tex},ie.options={...ee.options,...ne.options},ie.startup={...ee.startup,...ne.startup};let re=ie.mathjax||"https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js";ie.mathjax=null,window.MathJax=ie,(function(oe,se){let ae=document.createElement("script");ae.type="text/javascript",ae.id="MathJax-script",ae.src=oe,ae.async=!0,ae.onload=()=>{typeof se=="function"&&(se.call(),se=null)},document.head.appendChild(ae)})(re,(function(){Q.addEventListener("slidechanged",(function(oe){MathJax.typeset()}))}))}}}})}))})(math$1)),math$1.exports}var mathExports=requireMath();const RevealMath=getDefaultExportFromCjs(mathExports);(function(G,_){typeof exports=="object"&&typeof module=="object"?module.exports=_():typeof define=="function"&&define.amd?define([],_):typeof exports=="object"?exports.JXG=_():G.JXG=_()})(typeof self<"u"?self:void 0,function(){return(function(){var __webpack_modules__={86:function(G,_,J){var Z=J(443),Q=J(561),ee=J(188);Z.A.GeonextParser={replacePow:function(te){var ne,ie,re,oe,se,ae,le,ue,de,pe,fe,_e;for(pe=(te=te.replace(/(\s*)\^(\s*)/g,"^")).indexOf("^"),oe=-1;pe>=0&&pe<te.length-1;){if(oe===pe)throw new Error("JSXGraph: Error while parsing expression '"+te+"'");if(oe=pe,de=te.slice(0,pe),fe=te.slice(pe+1),de.charAt(de.length-1)===")"){for(ne=1,ie=de.length-2;ie>=0&&ne>0;)(re=de.charAt(ie))===")"?ne++:re==="("&&(ne-=1),ie-=1;if(ne!==0)throw new Error("JSXGraph: Missing '(' in expression");for(se="",le=de.substring(0,ie+1),ue=ie;ue>=0&&le.slice(ue,ue+1).match(/([\w.]+)/);)se=RegExp.$1+se,ue-=1;se=(se+=de.substring(ie+1,de.length)).replace(/([()+*%^\-/\][])/g,"\\$1")}else se="[\\w\\.]+";if(fe.match(/^([\w.]*\()/)){for(ne=1,ie=RegExp.$1.length;ie<fe.length&&ne>0;)(re=fe.charAt(ie))===")"?ne-=1:re==="("&&(ne+=1),ie+=1;if(ne!==0)throw new Error("JSXGraph: Missing ')' in expression");ae=(ae=fe.substring(0,ie)).replace(/([()+*%^\-/[\]])/g,"\\$1")}else ae="[\\w\\.]+";_e=new RegExp("("+se+")\\^("+ae+")"),pe=(te=te.replace(_e,"pow($1,$2)")).indexOf("^")}return te},replaceIf:function(te){var ne,ie,re,oe,se,ae,le,ue,de,pe="",fe=null,_e=null,ye=null;if((re=te.indexOf("If("))<0)return te;for(te=te.replace(/""/g,"0");re>=0;){for(ne=te.slice(0,re),ie=te.slice(re+3),se=1,oe=0,ae=-1,le=-1;oe<ie.length&&se>0;)(ue=ie.charAt(oe))===")"?se-=1:ue==="("?se+=1:ue===","&&se===1&&(ae<0?ae=oe:le=oe),oe+=1;if(de=ie.slice(0,oe-1),ie=ie.slice(oe),ae<0||le<0)return"";fe=de.slice(0,ae),_e=de.slice(ae+1,le),ye=de.slice(le+1),pe+=ne+"(("+(fe=this.replaceIf(fe))+")?("+(_e=this.replaceIf(_e))+"):("+(ye=this.replaceIf(ye))+"))",fe=null,_e=null,re=(te=ie).indexOf("If(")}return pe+=ie},replaceNameById:function(te,ne,ie){var re,oe,se,ae,le=0,ue=["X","Y","L","V"],de=function(pe){return ie?"$('"+pe+"')":pe};for(ae=0;ae<ue.length;ae++)for(le=te.indexOf(ue[ae]+"(");le>=0;)le>=0&&(re=te.indexOf(")",le+2))>=0&&(oe=(oe=te.slice(le+2,re)).replace(/\\(['"])?/g,"$1"),(se=ne.elementsByName[oe])&&(te=te.slice(0,le+2)+(ie?"$('":"")+de(se.id)+te.slice(re))),re=te.indexOf(")",le+2),le=te.indexOf(ue[ae]+"(",re);for(le=te.indexOf("Dist(");le>=0;)le>=0&&(re=te.indexOf(",",le+5))>=0&&(oe=(oe=te.slice(le+5,re)).replace(/\\(['"])?/g,"$1"),(se=ne.elementsByName[oe])&&(te=te.slice(0,le+5)+de(se.id)+te.slice(re))),re=te.indexOf(",",le+5),le=te.indexOf(",",re),(re=te.indexOf(")",le+1))>=0&&(oe=(oe=te.slice(le+1,re)).replace(/\\(['"])?/g,"$1"),(se=ne.elementsByName[oe])&&(te=te.slice(0,le+1)+de(se.id)+te.slice(re))),re=te.indexOf(")",le+1),le=te.indexOf("Dist(",re);for(ue=["Deg","Rad"],ae=0;ae<ue.length;ae++)for(le=te.indexOf(ue[ae]+"(");le>=0;)le>=0&&(re=te.indexOf(",",le+4))>=0&&(oe=(oe=te.slice(le+4,re)).replace(/\\(['"])?/g,"$1"),(se=ne.elementsByName[oe])&&(te=te.slice(0,le+4)+de(se.id)+te.slice(re))),re=te.indexOf(",",le+4),le=te.indexOf(",",re),(re=te.indexOf(",",le+1))>=0&&(oe=(oe=te.slice(le+1,re)).replace(/\\(['"])?/g,"$1"),(se=ne.elementsByName[oe])&&(te=te.slice(0,le+1)+de(se.id)+te.slice(re))),re=te.indexOf(",",le+1),le=te.indexOf(",",re),(re=te.indexOf(")",le+1))>=0&&(oe=(oe=te.slice(le+1,re)).replace(/\\(['"])?/g,"$1"),(se=ne.elementsByName[oe])&&(te=te.slice(0,le+1)+de(se.id)+te.slice(re))),re=te.indexOf(")",le+1),le=te.indexOf(ue[ae]+"(",re);return te},replaceIdByObj:function(te){var ne=/(X|Y|L)\(([\w_]+)\)/g;return te=te.replace(ne,"$('$2').$1()"),ne=/(V)\(([\w_]+)\)/g,te=te.replace(ne,"$('$2').Value()"),ne=/(Dist)\(([\w_]+),([\w_]+)\)/g,te=te.replace(ne,"dist($('$2'), $('$3'))"),ne=/(Deg)\(([\w_]+),([ \w[\w_]+),([\w_]+)\)/g,te=te.replace(ne,"deg($('$2'),$('$3'),$('$4'))"),ne=/Rad\(([\w_]+),([\w_]+),([\w_]+)\)/g,te=te.replace(ne,"rad($('$1'),$('$2'),$('$3'))"),ne=/N\((.+)\)/g,te=te.replace(ne,"($1)")},geonext2JS:function(te,ne){var ie,re,oe,se=["Abs","ACos","ASin","ATan","Ceil","Cos","Exp","Factorial","Floor","Log","Max","Min","Random","Round","Sin","Sqrt","Tan","Trunc"],ae=["abs","acos","asin","atan","ceil","cos","exp","factorial","floor","log","max","min","random","round","sin","sqrt","tan","ceil"];for(re=te=(te=(te=te.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&amp;/g,"&"),re=this.replaceNameById(re,ne),re=this.replaceIf(re),re=this.replacePow(re),re=this.replaceIdByObj(re),oe=0;oe<se.length;oe++)ie=new RegExp(["(\\W|^)(",se[oe],")"].join(""),"ig"),re=re.replace(ie,["$1",ae[oe]].join(""));return re=(re=(re=(re=(re=re.replace(/True/g,"true")).replace(/False/g,"false")).replace(/fasle/g,"false")).replace(/Pi/g,"PI")).replace(/"/g,"'")},findDependencies:function(te,ne,ie){var re,oe,se,ae;for(oe in ee.A.exists(ie)||(ie=te.board),re=ie.elementsByName)re.hasOwnProperty(oe)&&oe!==te.name&&(re[oe].elementClass===Q.A.OBJECT_CLASS_TEXT&&re[oe].evalVisProp("islabel")||(ae=(ae=oe.replace(/\[/g,"\\[")).replace(/\]/g,"\\]"),se=new RegExp("\\(([\\w\\[\\]'_ ]+,)*("+ae+")(,[\\w\\[\\]'_ ]+)*\\)","g"),ne.search(se)>=0&&re[oe].addChild(te)))},gxt2jc:function(te,ne){var ie;return ie=te=(te=(te=te.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&amp;/g,"&"),ie=(ie=(ie=(ie=this.replaceNameById(ie,ne,!0)).replace(/True/g,"true")).replace(/False/g,"false")).replace(/fasle/g,"false")}},_.A=Z.A.GeonextParser},102:function(G,_,J){var Z=J(443),Q=J(477),ee=J(571),te=J(171),ne=J(588),ie=J(904),re=J(561),oe=J(188);Z.A.CoordsElement=function(se,ae){var le;for(oe.A.exists(se)||(se=[1,0,0]),le=0;le<se.length;++le)se[le]=parseFloat(se[le]);this.coords=new ie.A(re.A.COORDS_BY_USER,se,this.board),this.initialCoords=new ie.A(re.A.COORDS_BY_USER,se,this.board),this.actualCoords=new ie.A(re.A.COORDS_BY_USER,se,this.board),this.position=null,this.isConstrained=!1,this.onPolygon=!1,this.slideObject=null,this.slideObjects=[],this.needsUpdateFromParent=!0,this.groups=[],this.Xjc=null,this.Yjc=null,this.methodMap=oe.A.deepCopy(this.methodMap,{move:"moveTo",moveTo:"moveTo",moveAlong:"moveAlong",visit:"visit",glide:"makeGlider",makeGlider:"makeGlider",intersect:"makeIntersection",makeIntersection:"makeIntersection",X:"X",Y:"Y",Coords:"Coords",free:"free",setPosition:"setGliderPosition",setGliderPosition:"setGliderPosition",addConstraint:"addConstraint",dist:"Dist",Dist:"Dist",onPolygon:"onPolygon",startAnimation:"startAnimation",stopAnimation:"stopAnimation"}),oe.A.exists(this.element)&&this.addAnchor(se,ae),this.isDraggable=!0},Z.A.extend(Z.A.CoordsElement.prototype,{updateConstraint:function(){return this},updateCoords:function(se){return this.needsUpdate?(oe.A.exists(se)||(se=!1),this.evalVisProp("frozen")!==!0&&this.updateConstraint(),this.type===re.A.OBJECT_TYPE_GLIDER&&(this.isConstrained&&(se=!1),se?this.updateGliderFromParent():this.updateGlider()),this.updateTransform(se),this):this},updateGlider:function(){var se,ae,le,ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te,Me,Ne,Le,Ie,Ge,He=2*Math.PI,Be=!1,ze=this.slideObject,Fe=[];if(this.needsUpdateFromParent=!1,ze.elementClass===re.A.OBJECT_CLASS_CIRCLE)this.evalVisProp("isgeonext")&&(He=1),Re=ee.A.projectPointToCircle(this,ze,this.board),Te=ee.A.rad([ze.center.X()+1,ze.center.Y()],ze.center,this)/He;else if(ze.elementClass===re.A.OBJECT_CLASS_LINE){if(this.onPolygon){if(ue=ze.point1.coords.usrCoords,ae=(de=ze.point2.coords.usrCoords)[se=1]-ue[se],Math.abs(ae)<Q.A.eps&&(ae=de[se=2]-ue[se]),fe=(ee.A.projectPointToLine(this,ze,this.board).usrCoords[se]-ue[se])/ae,pe=ze.parentPolygon,fe<0){for(se=0;se<pe.borders.length;se++)if(ze===pe.borders[se]){ze=pe.borders[(se-1+pe.borders.length)%pe.borders.length];break}}else if(fe>1){for(se=0;se<pe.borders.length;se++)if(ze===pe.borders[se]){ze=pe.borders[(se+1+pe.borders.length)%pe.borders.length];break}}ze.id!==this.slideObject.id&&(this.slideObject=ze)}ue=ze.point1.coords,de=ze.point2.coords,(ae=ue.distance(re.A.COORDS_BY_USER,de))<Q.A.eps?(Re=ue,Be=!0,Te=0):(Re=ee.A.projectPointToLine(this,ze,this.board),ue=ue.usrCoords.slice(0),de=de.usrCoords.slice(0),Math.abs(de[0])<Q.A.eps?(ae=de[se=1],Math.abs(ae)<Q.A.eps&&(ae=de[se=2]),Te=((ae=(Re.usrCoords[se]-ue[se])/ae)>=0?1:-1)*(ae=Math.abs(ae))/(ae+1)):Math.abs(ue[0])<Q.A.eps?(ae=ue[se=1],Math.abs(ae)<Q.A.eps&&(ae=ue[se=2]),Te=(ae=(Re.usrCoords[se]-de[se])/ae)<0?(1-2*ae)/(1-ae):1/(ae+1)):(ae=de[se=1]-ue[se],Math.abs(ae)<Q.A.eps&&(ae=de[se=2]-ue[se]),Te=(Re.usrCoords[se]-ue[se])/ae)),(Ne=this.findClosestSnapValue(Te))!==null?(Te=(this.evalVisProp("snapvalues")[Ne]-this._smin)/(this._smax-this._smin),this.update(!0)):(Me=this.evalVisProp("snapwidth"))>0&&Math.abs(this._smax-this._smin)>=Q.A.eps&&(le=(Te=Math.max(Math.min(Te,1),0))*(this._smax-this._smin),Te=((le=Math.round(le/Me)*Me+this._smin)-this._smin)/(this._smax-this._smin),this.update(!0)),ue=ze.point1.coords,!ze.evalVisProp("straightfirst")&&Math.abs(ue.usrCoords[0])>Q.A.eps&&Te<0&&(Re=ue,Be=!0,Te=0),de=ze.point2.coords,!ze.evalVisProp("straightlast")&&Math.abs(de.usrCoords[0])>Q.A.eps&&Te>1&&(Re=de,Be=!0,Te=1)}else if(ze.type===re.A.OBJECT_TYPE_TURTLE)this.updateConstraint(),Re=(Le=ee.A.projectPointToTurtle(this,ze,this.board))[0],Te=Le[1];else if(ze.elementClass===re.A.OBJECT_CLASS_CURVE)if(ze.type===re.A.OBJECT_TYPE_ARC||ze.type===re.A.OBJECT_TYPE_SECTOR)Re=ee.A.projectPointToCircle(this,ze,this.board),_e=ee.A.rad(ze.radiuspoint,ze.center,this),ye=0,be=ee.A.rad(ze.radiuspoint,ze.center,ze.anglepoint),Te=_e,((Me=ze.evalVisProp("selection"))==="minor"&&be>Math.PI||Me==="major"&&be<Math.PI)&&(ye=be,be=2*Math.PI),(_e<ye||_e>be)&&(Te=be,(_e<ye&&_e>.5*ye||_e>be&&_e>.5*be+Math.PI)&&(Te=ye),this.needsUpdateFromParent=!0,this.updateGliderFromParent()),He=be-ye,this.visProp.isgeonext&&(He=1),Math.abs(He)>Q.A.eps&&(Te/=He);else if(this.updateConstraint(),ze.transformations.length>0){for(Ge=!1,(Le=ze.getTransformationSource())[0]&&(Ge=Le[0],Fe.push(ze),Fe.push(Le[1]));Le[0]&&oe.A.exists(Le[1]._transformationSource);)Le=Le[1].getTransformationSource(),Fe.push(Le[1]);if(Ie=this.coords.usrCoords,Ge){for(se=0;se<Fe.length;se++)Fe[se].updateTransformMatrix(),Ee=Q.A.inverse(Fe[se].transformMat),Ie=Q.A.matVecMult(Ee,Ie);for(Ae=new ie.A(re.A.COORDS_BY_USER,Ie,this.board).usrCoords,Ie=(Ce=ee.A.projectCoordsToCurve(Ae[1],Ae[2],this.position||0,Fe[Fe.length-1],this.board))[0].usrCoords,se=Fe.length-2;se>=0;se--)Ie=Q.A.matVecMult(Fe[se].transformMat,Ie);Ce[0]=new ie.A(re.A.COORDS_BY_USER,Ie,this.board)}else ze.updateTransformMatrix(),Ee=Q.A.inverse(ze.transformMat),Ie=Q.A.matVecMult(Ee,Ie),Ae=new ie.A(re.A.COORDS_BY_USER,Ie,this.board).usrCoords,Ce=ee.A.projectCoordsToCurve(Ae[1],Ae[2],this.position||0,ze,this.board);Re=Ce[0],Te=Ce[1]}else Re=(Le=ee.A.projectPointToCurve(this,ze,this.board))[0],Te=Le[1];else oe.A.isPoint(ze)&&(Re=ee.A.projectPointToPoint(this,ze,this.board),Te=this.position);this.coords.setCoordinates(re.A.COORDS_BY_USER,Re.usrCoords,Be),this.position=Te},findClosestSnapValue:function(se){var ae,le,ue,de,pe=null;if(ue=this.evalVisProp("snapvalues"),de=this.evalVisProp("snapvaluedistance"),oe.A.isArray(ue)&&Math.abs(this._smax-this._smin)>=Q.A.eps&&de>0)for(ae=0;ae<ue.length;ae++)(le=Math.abs(se*(this._smax-this._smin)+this._smin-ue[ae]))<de&&(de=le,pe=ae);return pe},updateGliderFromParent:function(){var se,ae,le,ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee=this.slideObject,Re=[],Te=2*Math.PI;if(this.needsUpdateFromParent){if(Ee.elementClass===re.A.OBJECT_CLASS_CIRCLE)le=Ee.Radius(),this.evalVisProp("isgeonext")&&(Te=1),de=[Ee.center.X()+le*Math.cos(this.position*Te),Ee.center.Y()+le*Math.sin(this.position*Te)];else if(Ee.elementClass===re.A.OBJECT_CLASS_LINE)se=Ee.point1.coords.usrCoords,ae=Ee.point2.coords.usrCoords,se[0]===0&&se[1]===0&&se[2]===0||ae[0]===0&&ae[1]===0&&ae[2]===0?de=[0,0,0]:Math.abs(ae[0])<Q.A.eps?(ue=Math.min(Math.abs(this.position),1-Q.A.eps),ue/=1-ue,this.position<0&&(ue=-ue),de=[se[0]+ue*ae[0],se[1]+ue*ae[1],se[2]+ue*ae[2]]):Math.abs(se[0])<Q.A.eps?(ue=Math.max(this.position,Q.A.eps),ue=(ue=Math.min(ue,2-Q.A.eps))>1?(ue-1)/(ue-2):(1-ue)/ue,de=[ae[0]+ue*se[0],ae[1]+ue*se[1],ae[2]+ue*se[2]]):(ue=this.position,de=[se[0]+ue*(ae[0]-se[0]),se[1]+ue*(ae[1]-se[1]),se[2]+ue*(ae[2]-se[2])]);else if(Ee.type===re.A.OBJECT_TYPE_TURTLE)this.coords.setCoordinates(re.A.COORDS_BY_USER,[Ee.Z(this.position),Ee.X(this.position),Ee.Y(this.position)]),this.updateConstraint(),de=ee.A.projectPointToTurtle(this,Ee,this.board)[0].usrCoords;else if(Ee.elementClass===re.A.OBJECT_CLASS_CURVE){for(_e=!1,(pe=Ee.getTransformationSource())[0]&&(_e=pe[0],Re.push(Ee),Re.push(pe[1]));pe[0]&&oe.A.exists(pe[1]._transformationSource);)pe=pe[1].getTransformationSource(),Re.push(pe[1]);if(_e?this.coords.setCoordinates(re.A.COORDS_BY_USER,[Re[Re.length-1].Z(this.position),Re[Re.length-1].X(this.position),Re[Re.length-1].Y(this.position)]):this.coords.setCoordinates(re.A.COORDS_BY_USER,[Ee.Z(this.position),Ee.X(this.position),Ee.Y(this.position)]),Ee.type===re.A.OBJECT_TYPE_ARC||Ee.type===re.A.OBJECT_TYPE_SECTOR)ye=ee.A.rad([Ee.center.X()+1,Ee.center.Y()],Ee.center,Ee.radiuspoint),be=0,Ce=ee.A.rad(Ee.radiuspoint,Ee.center,Ee.anglepoint),(Ee.visProp.selection==="minor"&&Ce>Math.PI||Ee.visProp.selection==="major"&&Ce<Math.PI)&&(be=Ce,Ce=2*Math.PI),Te=Ce-be,this.evalVisProp("isgeonext")&&(Te=1),((Ae=this.position*Te)<be||Ae>Ce)&&(((Ae=Ce)<be&&Ae>.5*be||Ae>Ce&&Ae>.5*Ce+Math.PI)&&(Ae=be),this.position=Ae,Math.abs(Te)>Q.A.eps&&(this.position/=Te)),le=Ee.Radius(),de=[Ee.center.X()+le*Math.cos(this.position*Te+ye),Ee.center.Y()+le*Math.sin(this.position*Te+ye)];else if(this.updateConstraint(),_e)for(de=ee.A.projectPointToCurve(this,Re[Re.length-1],this.board)[0].usrCoords,fe=Re.length-2;fe>=0;fe--)de=new ie.A(re.A.COORDS_BY_USER,Q.A.matVecMult(Re[fe].transformMat,de),this.board).usrCoords;else de=ee.A.projectPointToCurve(this,Ee,this.board)[0].usrCoords}else oe.A.isPoint(Ee)&&(de=ee.A.projectPointToPoint(this,Ee,this.board).usrCoords);this.coords.setCoordinates(re.A.COORDS_BY_USER,de,!1)}else this.needsUpdateFromParent=!0},updateRendererGeneric:function(se){return this.needsUpdate&&this.board.renderer?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.coords.usrCoords[1]+this.coords.usrCoords[2]),this.isReal=Math.abs(this.coords.usrCoords[0])>Q.A.eps&&this.isReal,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer[se](this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},X:function(){return this.coords.usrCoords[1]},Y:function(){return this.coords.usrCoords[2]},Z:function(){return this.coords.usrCoords[0]},Coords:function(se){return se?this.coords.usrCoords.slice():this.coords.usrCoords.slice(1)},XEval:function(){return this.coords.usrCoords[1]},YEval:function(){return this.coords.usrCoords[2]},ZEval:function(){return this.coords.usrCoords[0]},Dist:function(se){return this.isReal&&se.isReal?this.coords.distance(re.A.COORDS_BY_USER,se.coords):NaN},snapToGrid:function(se){return this.handleSnapToGrid(se)},handleSnapToPoints:function(se){var ae,le,ue,de,pe,fe,_e,ye,be=0,Ae=1/0,Ce=null,Ee=this.evalVisProp("ignoredsnaptopoints"),Re=!1;if(de=this.board.objectsList.length,Ee&&(_e=Ee.length),this.evalVisProp("snaptopoints")||se){for(pe=this.evalVisProp("attractorunit"),fe=this.evalVisProp("attractordistance"),ae=0;ae<de;ae++){if(le=this.board.objectsList[ae],Ee){for(Re=!1,ye=0;ye<_e;ye++)if(le===this.board.select(Ee[ye])){Re=!0;break}if(Re)continue}oe.A.isPoint(le)&&le!==this&&le.visPropCalc.visible&&(ue=ee.A.projectPointToPoint(this,le,this.board),(be=pe==="screen"?ue.distance(re.A.COORDS_BY_SCREEN,this.coords):ue.distance(re.A.COORDS_BY_USER,this.coords))<fe&&be<Ae&&(Ae=be,Ce=ue))}Ce!==null&&this.coords.setCoordinates(re.A.COORDS_BY_USER,Ce.usrCoords)}return this},snapToPoints:function(se){return this.handleSnapToPoints(se)},handleAttractors:function(){var se,ae,le,ue,de=0,pe=this.evalVisProp("attractorunit"),fe=this.evalVisProp("attractordistance"),_e=this.evalVisProp("snatchdistance"),ye=this.evalVisProp("attractors"),be=ye.length;if(fe!==0){for(se=0;se<be;se++)if(ae=this.board.select(ye[se]),oe.A.exists(ae)&&ae!==this){if(oe.A.isPoint(ae)?le=ee.A.projectPointToPoint(this,ae,this.board):ae.elementClass===re.A.OBJECT_CLASS_LINE?(ue=ee.A.projectCoordsToSegment(this.coords.usrCoords,ae.point1.coords.usrCoords,ae.point2.coords.usrCoords),le=!ae.evalVisProp("straightfirst")&&ue[1]<0?ae.point1.coords:!ae.evalVisProp("straightlast")&&ue[1]>1?ae.point2.coords:new ie.A(re.A.COORDS_BY_USER,ue[0],this.board)):ae.elementClass===re.A.OBJECT_CLASS_CIRCLE?le=ee.A.projectPointToCircle(this,ae,this.board):ae.elementClass===re.A.OBJECT_CLASS_CURVE?le=ee.A.projectPointToCurve(this,ae,this.board)[0]:ae.type===re.A.OBJECT_TYPE_TURTLE?le=ee.A.projectPointToTurtle(this,ae,this.board)[0]:ae.type===re.A.OBJECT_TYPE_POLYGON&&(le=new ie.A(re.A.COORDS_BY_USER,ee.A.projectCoordsToPolygon(this.coords.usrCoords,ae),this.board)),(de=pe==="screen"?le.distance(re.A.COORDS_BY_SCREEN,this.coords):le.distance(re.A.COORDS_BY_USER,this.coords))<fe){this.type===re.A.OBJECT_TYPE_GLIDER&&(ae===this.slideObject||this.slideObject&&this.onPolygon&&this.slideObject.parentPolygon===ae)||this.makeGlider(ae);break}de>=_e&&(ae===this.slideObject||this.slideObject&&this.onPolygon&&this.slideObject.parentPolygon===ae)&&this.popSlideObject()}return this}},setPositionDirectly:function(se,ae){var le,ue,de,pe,fe,_e=this.coords;if(this.relativeCoords)return ue=new ie.A(se,ae,this.board),this.evalVisProp("islabel")?(de=ne.A.subtract(ue.scrCoords,_e.scrCoords),this.relativeCoords.scrCoords[1]+=de[1],this.relativeCoords.scrCoords[2]+=de[2]):(de=ne.A.subtract(ue.usrCoords,_e.usrCoords),this.relativeCoords.usrCoords[1]+=de[1],this.relativeCoords.usrCoords[2]+=de[2]),this;if(this.coords.setCoordinates(se,ae),this.handleSnapToGrid(),this.handleSnapToPoints(),this.handleAttractors(),this.actualCoords.setCoordinates(re.A.COORDS_BY_USER,this.coords.usrCoords),this.transformations.length>0){for(se===re.A.COORDS_BY_SCREEN?fe=new ie.A(se,ae,this.board).usrCoords:(ae.length===2&&(ae=[1].concat(ae)),fe=ae),pe=[[1,0,0],[0,1,0],[0,0,1]],le=0;le<this.transformations.length;le++)pe=Q.A.matMatMult(this.transformations[le].matrix,pe);fe=Q.A.matVecMult(Q.A.inverse(pe),fe),this.initialCoords.setCoordinates(re.A.COORDS_BY_USER,fe),this.elementClass!==re.A.OBJECT_CLASS_POINT&&this.coords.setCoordinates(re.A.COORDS_BY_USER,fe)}return this.prepareUpdate().update(),this.board.isSuspendedUpdate&&this.type===re.A.OBJECT_TYPE_GLIDER&&this.updateGlider(),this},setPositionByTransform:function(se,ae){var le;return ae=new ie.A(se,ae,this.board),le=this.board.create("transform",ae.usrCoords.slice(1),{type:"translate"}),this.transformations.length>0&&this.transformations[this.transformations.length-1].isNumericMatrix?this.transformations[this.transformations.length-1].melt(le):this.addTransform(this,le),this.prepareUpdate().update(),this},setPosition:function(se,ae){return this.setPositionDirectly(se,ae)},setGliderPosition:function(se){return this.type===re.A.OBJECT_TYPE_GLIDER&&(this.position=se,this.board.update()),this},makeGlider:function(se){var ae,le,ue,de=this.board.select(se),pe=!1;if(de.type===re.A.OBJECT_TYPE_POLYGON){for(ae=Number.MAX_VALUE,le=0;le<de.borders.length;le++)(ue=Z.A.Math.Geometry.distPointLine(this.coords.usrCoords,de.borders[le].stdform))<ae&&(ae=ue,se=de.borders[le]);de=this.board.select(se),pe=!0}if(!oe.A.exists(de))throw new Error("JSXGraph: slide object undefined.");if(de.type===re.A.OBJECT_TYPE_TICKS)throw new Error("JSXGraph: gliders on ticks are not possible.");return this.slideObject=this.board.select(se),this.slideObjects.push(this.slideObject),this.addParents(se),this.type=re.A.OBJECT_TYPE_GLIDER,this.elType="glider",this.visProp.snapwidth=-1,this.slideObject.addChild(this),this.isDraggable=!0,this.onPolygon=pe,this.generatePolynomial=function(){return this.slideObject.generatePolynomial(this)},this.updateGlider(),this.needsUpdateFromParent=!0,this.updateGliderFromParent(),this},popSlideObject:function(){this.slideObjects.length>0&&(this.slideObjects.pop(),this.slideObject.removeChild(this),this.slideObjects.length===0?(this.type=this._org_type,this.type===re.A.OBJECT_TYPE_POINT?this.elType="point":this.elementClass===re.A.OBJECT_CLASS_TEXT?this.elType="text":this.type===re.A.OBJECT_TYPE_IMAGE?this.elType="image":this.type===re.A.OBJECT_TYPE_FOREIGNOBJECT&&(this.elType="foreignobject"),this.slideObject=null):this.slideObject=this.slideObjects[this.slideObjects.length-1])},free:function(){var se,ae;if(this.type!==re.A.OBJECT_TYPE_GLIDER){if(this.transformations.length=0,delete this.updateConstraint,this.isConstrained=!1,this.isDraggable)return;this.isDraggable=!0,this.elementClass===re.A.OBJECT_CLASS_POINT&&(this.type=re.A.OBJECT_TYPE_POINT,this.elType="point"),this.XEval=function(){return this.coords.usrCoords[1]},this.YEval=function(){return this.coords.usrCoords[2]},this.ZEval=function(){return this.coords.usrCoords[0]},this.Xjc=null,this.Yjc=null}for(se in this.board.objects)this.board.objects.hasOwnProperty(se)&&(ae=this.board.objects[se]).descendants&&(delete ae.descendants[this.id],delete ae.childElements[this.id],this.hasLabel&&(delete ae.descendants[this.label.id],delete ae.childElements[this.label.id]));this.ancestors={},this.parents=[],this.slideObject=null,this.slideObjects=[],this.elementClass===re.A.OBJECT_CLASS_POINT?(this.type=re.A.OBJECT_TYPE_POINT,this.elType="point"):this.elementClass===re.A.OBJECT_CLASS_TEXT?(this.type=this._org_type,this.elType="text"):this.elementClass===re.A.OBJECT_CLASS_OTHER&&(this.type=this._org_type,this.elType="image")},addConstraint:function(se){var ae,le,ue=[],de=["X","Y"],pe=function(_e){return function(){return _e}},fe=function(_e){return function(){return _e.Value()}};for(this.elementClass===re.A.OBJECT_CLASS_POINT&&(this.type=re.A.OBJECT_TYPE_CAS),this.isDraggable=!1,ae=0;ae<se.length;ae++)le=se[ae],oe.A.isString(le)?(ue[ae]=this.board.jc.snippet(le,!0,null,!0),this.addParentsFromJCFunctions([ue[ae]]),se.length===2&&(this[de[ae]+"jc"]=se[ae])):oe.A.isFunction(le)?ue[ae]=le:oe.A.isNumber(le)?ue[ae]=pe(le):oe.A.isObject(le)&&oe.A.isFunction(le.Value)&&(ue[ae]=fe(le)),ue[ae].origin=le;return se.length===1?this.updateConstraint=function(){var _e=ue[0]();return oe.A.isArray(_e)?this.coords.setCoordinates(re.A.COORDS_BY_USER,_e):this.coords=_e,this}:se.length===2?(this.XEval=ue[0],this.YEval=ue[1],this.addParents([ue[0].origin,ue[1].origin]),this.updateConstraint=function(){return this.coords.setCoordinates(re.A.COORDS_BY_USER,[this.XEval(),this.YEval()]),this}):(this.ZEval=ue[0],this.XEval=ue[1],this.YEval=ue[2],this.addParents([ue[0].origin,ue[1].origin,ue[2].origin]),this.updateConstraint=function(){return this.coords.setCoordinates(re.A.COORDS_BY_USER,[this.ZEval(),this.XEval(),this.YEval()]),this}),this.isConstrained=!0,this.prepareUpdate().update(),this.board.isSuspendedUpdate||(this.updateVisibility().updateRenderer(),this.hasLabel&&this.label.fullUpdate()),this},addAnchor:function(se,ae){this.relativeCoords=ae?new ie.A(re.A.COORDS_BY_SCREEN,se.slice(0,2),this.board):new ie.A(re.A.COORDS_BY_USER,se,this.board),this.element.addChild(this),ae&&this.addParents(this.element),this.XEval=function(){var le,ue,de;return this.evalVisProp("islabel")?(de=this.evalVisProp("offset"),le=parseFloat(de[0]),ue=this.element.getLabelAnchor(),new ie.A(re.A.COORDS_BY_SCREEN,[le+this.relativeCoords.scrCoords[1]+ue.scrCoords[1],0],this.board).usrCoords[1]):(ue=this.element.getTextAnchor(),this.relativeCoords.usrCoords[1]+ue.usrCoords[1])},this.YEval=function(){var le,ue,de;return this.evalVisProp("islabel")?(de=this.evalVisProp("offset"),le=-parseFloat(de[1]),ue=this.element.getLabelAnchor(),new ie.A(re.A.COORDS_BY_SCREEN,[0,le+this.relativeCoords.scrCoords[2]+ue.scrCoords[2]],this.board).usrCoords[2]):(ue=this.element.getTextAnchor(),this.relativeCoords.usrCoords[2]+ue.usrCoords[2])},this.ZEval=oe.A.createFunction(1,this.board,""),this.updateConstraint=function(){this.coords.setCoordinates(re.A.COORDS_BY_USER,[this.ZEval(),this.XEval(),this.YEval()])},this.isConstrained=!0,this.updateConstraint()},updateTransform:function(se){var ae,le;if(this.transformations.length===0)return this;for(this.baseElement===null&&(this.baseElement=this),this.transformations[0].update(),ae=this===this.baseElement?this.transformations[0].apply(this,"self"):this.transformations[0].apply(this.baseElement),le=1;le<this.transformations.length;le++)this.transformations[le].update(),ae=Q.A.matVecMult(this.transformations[le].matrix,ae);return this.actualCoords.setCoordinates(re.A.COORDS_BY_USER,ae),this},addTransform:function(se,ae){var le,ue=oe.A.isArray(ae)?ae:[ae],de=ue.length;for(this.transformations.length===0&&(this.baseElement=se),le=0;le<de;le++)this.transformations.push(ue[le]);return this},startAnimation:function(se,ae,le,ue){var de=oe.A.evaluate(se),pe=oe.A.evaluate(ae),fe=this;return le=oe.A.evaluate(le)||250,ue=(ue=oe.A.evaluate(ue))!=="undefined"?ue:-1,this.type!==re.A.OBJECT_TYPE_GLIDER||oe.A.exists(this.intervalCode)||ue===0||(this.roundsCount=0,this.intervalCode=window.setInterval(function(){fe._anim(de,pe,ue)},le),oe.A.exists(this.intervalCount)||(this.intervalCount=0)),this},stopAnimation:function(){return oe.A.exists(this.intervalCode)&&(window.clearInterval(this.intervalCode),delete this.intervalCode),this},moveAlong:function(se,ae,le){le=le||{};var ue,de,pe,fe,_e,ye=[],be=[],Ae=ae/this.board.attr.animationdelay,Ce=function(Ee,Re){return function(){return se[Ee][Re]}};if(oe.A.isArray(se)){for(pe=se.length,ue=0;ue<pe;ue++)oe.A.isPoint(se[ue])?be[ue]=se[ue]:be[ue]={elementClass:re.A.OBJECT_CLASS_POINT,X:Ce(ue,0),Y:Ce(ue,1)};if((ae=ae||0)===0)return this.setPosition(re.A.COORDS_BY_USER,[be[be.length-1].X(),be[be.length-1].Y()]),this.board.update(this);if(!oe.A.exists(le.interpolate)||le.interpolate)for(de=te.A.Neville(be),ue=0;ue<Ae;ue++)ye[ue]=[],ye[ue][0]=de[0]((Ae-ue)/Ae*de[3]()),ye[ue][1]=de[1]((Ae-ue)/Ae*de[3]());else{for(pe=se.length-1,ue=0;ue<Ae;++ue)_e=ue/Ae*pe-(fe=Math.floor(ue/Ae*pe)),ye[ue]=[],ye[ue][0]=(1-_e)*be[fe].X()+_e*be[fe+1].X(),ye[ue][1]=(1-_e)*be[fe].Y()+_e*be[fe+1].Y();ye.push([be[pe].X(),be[pe].Y()]),ye.reverse()}this.animationPath=ye}else oe.A.isFunction(se)&&(this.animationPath=se,this.animationStart=new Date().getTime());return this.animationCallback=le.callback,this.board.addAnimation(this),this},moveTo:function(se,ae,le){le=le||{},se=new ie.A(re.A.COORDS_BY_USER,se,this.board);var ue,de=this.board.attr.animationdelay,pe=Math.ceil(ae/de),fe=[],_e=this.coords.usrCoords[1],ye=this.coords.usrCoords[2],be=se.usrCoords[1]-_e,Ae=se.usrCoords[2]-ye,Ce=function(Ee){var Re=Ee/pe;if(le.effect){if(le.effect==="<>")return Math.pow(Math.sin(Re*Math.PI/2),2);if(le.effect==="<")return Re*Re*Re;if(le.effect===">")return 1-Math.pow(1-Re,3);if(le.effect==="=="||le.effect==="--")return Ee/pe;Z.A.warn("Callback moveTo(): valid effects are '==', '--', '<>', '>', and '<', given is '"+le.effect+"'. Set it to '--'"),le.effect="--"}return Ee/pe};if(!oe.A.exists(ae)||ae===0||Math.abs(se.usrCoords[0]-this.coords.usrCoords[0])>Q.A.eps)return this.setPosition(re.A.COORDS_BY_USER,se.usrCoords),this.board.update(this);if(!oe.A.exists(le.callback)&&Math.abs(be)<Q.A.eps&&Math.abs(Ae)<Q.A.eps)return this;for(ue=pe;ue>=0;ue--)fe[pe-ue]=[se.usrCoords[0],_e+be*Ce(ue),ye+Ae*Ce(ue)];return this.animationPath=fe,this.animationCallback=le.callback,this.board.addAnimation(this),this},visit:function(se,ae,le){se=new ie.A(re.A.COORDS_BY_USER,se,this.board);var ue,de,pe,fe=this.board.attr.animationdelay,_e=[],ye=this.coords.usrCoords[1],be=this.coords.usrCoords[2],Ae=se.usrCoords[1]-ye,Ce=se.usrCoords[2]-be,Ee=function(Re){var Te=Re<pe/2?2*Re/pe:2*(pe-Re)/pe;if(le.effect){if(le.effect==="<>")return Math.pow(Math.sin(Te*Math.PI/2),2);if(le.effect==="<")return Te*Te*Te;if(le.effect===">")return 1-Math.pow(1-Te,3);if(le.effect==="=="||le.effect==="--")return Te;Z.A.warn("Callback visit(): valid effects are '==', '--', '<>', '>', and '<', given is '"+le.effect+"'. Set it to '--'"),le.effect="--"}return Te};for(oe.A.isNumber(le)?le={repeat:le}:(le=le||{},oe.A.exists(le.repeat)||(le.repeat=1)),pe=Math.ceil(ae/(fe*le.repeat)),de=0;de<le.repeat;de++)for(ue=pe;ue>=0;ue--)_e[de*(pe+1)+pe-ue]=[se.usrCoords[0],ye+Ae*Ee(ue),be+Ce*Ee(ue)];return this.animationPath=_e,this.animationCallback=le.callback,this.board.addAnimation(this),this},moveAlongES6:function(se,ae,le){return new Promise((ue,de)=>{oe.A.exists(le)&&oe.A.exists(le.callback)?le.callback=ue:le={callback:ue},this.moveAlong(se,ae,le)})},moveToES6:function(se,ae,le){return new Promise((ue,de)=>{oe.A.exists(le)&&oe.A.exists(le.callback)?le.callback=ue:le={callback:ue},this.moveTo(se,ae,le)})},visitES6:function(se,ae,le){return new Promise((ue,de)=>{oe.A.exists(le)&&oe.A.exists(le.callback)?le.callback=ue:le={callback:ue},this.visit(se,ae,le)})},_anim:function(se,ae,le){var ue,de,pe,fe,_e,ye,be,Ae,Ce;return this.intervalCount+=1,this.intervalCount>ae&&(this.intervalCount=0,this.roundsCount+=1,le>0&&this.roundsCount>=le)?(this.roundsCount=0,this.stopAnimation()):(this.slideObject.elementClass===re.A.OBJECT_CLASS_LINE?(be=this.slideObject.point1.coords.scrCoords,Ae=this.slideObject.point2.coords.scrCoords,ue=Math.round((Ae[1]-be[1])*this.intervalCount/ae),de=Math.round((Ae[2]-be[2])*this.intervalCount/ae),se>0?fe=this.slideObject.point1:(fe=this.slideObject.point2,ue*=-1,de*=-1),this.coords.setCoordinates(re.A.COORDS_BY_SCREEN,[fe.coords.scrCoords[1]+ue,fe.coords.scrCoords[2]+de])):this.slideObject.elementClass===re.A.OBJECT_CLASS_CURVE?(_e=se>0?(this.slideObject.maxX()-this.slideObject.minX())*this.intervalCount/ae+this.slideObject.minX():-(this.slideObject.maxX()-this.slideObject.minX())*this.intervalCount/ae+this.slideObject.maxX(),this.coords.setCoordinates(re.A.COORDS_BY_USER,[this.slideObject.X(_e),this.slideObject.Y(_e)]),Ce=ee.A.projectPointToCurve(this,this.slideObject,this.board),this.coords=Ce[0],this.position=Ce[1]):this.slideObject.elementClass===re.A.OBJECT_CLASS_CIRCLE&&(pe=2*Math.PI,pe*=se<0?this.intervalCount/ae:(ae-this.intervalCount)/ae,ye=this.slideObject.Radius(),this.coords.setCoordinates(re.A.COORDS_BY_USER,[this.slideObject.center.coords.usrCoords[1]+ye*Math.cos(pe),this.slideObject.center.coords.usrCoords[2]+ye*Math.sin(pe)])),this.board.update(this),this)},getTextAnchor:function(){return this.coords},getLabelAnchor:function(){return this.coords},getParents:function(){var se=[this.Z(),this.X(),this.Y()];return this.parents.length!==0&&(se=this.parents),this.type===re.A.OBJECT_TYPE_GLIDER&&(se=[this.X(),this.Y(),this.slideObject.id]),se}}),Z.A.CoordsElement.create=function(se,ae,le,ue,de,pe){var fe,_e,ye=!1;for(_e=0;_e<le.length;_e++)(oe.A.isFunction(le[_e])||oe.A.isString(le[_e]))&&(ye=!0);if(ye)(fe=new se(ae,[0,0],ue,de,pe)).addConstraint(le);else if(oe.A.isNumber(le[0])&&oe.A.isNumber(le[1]))fe=new se(ae,le,ue,de,pe),oe.A.exists(ue.slideobject)?fe.makeGlider(ue.slideobject):fe.baseElement=fe,fe.isDraggable=!0;else{if(!oe.A.isObject(le[0])||!oe.A.isTransformationOrArray(le[1]))return!1;(fe=new se(ae,[0,0],ue,de,pe)).addTransform(le[0],le[1]),fe.isDraggable=!1}return fe.handleSnapToGrid(),fe.handleSnapToPoints(),fe.handleAttractors(),fe.addParents(le),fe},_.A=Z.A.CoordsElement},133:function(G,_,J){var Z=J(443),Q=J(188);Z.A.extendConstants(Z.A,{}),Z.A.extend(Z.A,{isTouchEvent:function(ee){return Z.A.exists(ee.touches)},isPointerEvent:function(ee){return Z.A.exists(ee.pointerId)},isMouseEvent:function(ee){return!Z.A.isTouchEvent(ee)&&!Z.A.isPointerEvent(ee)},getNumberOfTouchPoints:function(ee){var te=-1;return Z.A.isTouchEvent(ee)&&(te=ee.touches.length),te},isFirstTouch:function(ee){var te=Z.A.getNumberOfTouchPoints(ee);return Z.A.isPointerEvent(ee)?ee.isPrimary:te===1},isBrowser:Q.A.exists(window)&&Q.A.exists(document)&&typeof window=="object"&&typeof document=="object",supportsES6:function(){try{return new Function("(a = 0) => a"),!0}catch{return!1}},supportsVML:function(){return this.isBrowser&&!!document.namespaces},supportsSVG:function(){return!!this.isBrowser&&!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect},supportsCanvas:function(){var ee=!1;return this.isNode()&&(ee=!0),ee||this.isBrowser&&!!document.createElement("canvas").getContext},isNode:function(){return!this.isBrowser&&typeof process<"u"&&process.release.name.search(/node|io.js/)!==-1},isWebWorker:function(){return!this.isBrowser&&typeof self=="object"&&typeof self.postMessage=="function"},supportsPointerEvents:function(){return!!(this.isBrowser&&window.navigator&&(window.PointerEvent||window.navigator.pointerEnabled||window.navigator.msPointerEnabled))},isTouchDevice:function(){return this.isBrowser&&window.ontouchstart!==void 0},isAndroid:function(){return Q.A.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("android")>-1},isWebkitAndroid:function(){return this.isAndroid()&&navigator.userAgent.indexOf(" AppleWebKit/")>-1},isApple:function(){return Q.A.exists(navigator)&&(navigator.userAgent.indexOf("iPad")>-1||navigator.userAgent.indexOf("iPhone")>-1)},isWebkitApple:function(){return this.isApple()&&navigator.userAgent.search(/Mobile\/[0-9A-Za-z.]*Safari/)>-1},isMetroApp:function(){return typeof window=="object"&&window.clientInformation&&window.clientInformation.appVersion&&window.clientInformation.appVersion.indexOf("MSAppHost")>-1},isMozilla:function(){return Q.A.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("mozilla")>-1&&navigator.userAgent.toLowerCase().indexOf("apple")===-1},isFirefoxOS:function(){return Q.A.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("android")===-1&&navigator.userAgent.toLowerCase().indexOf("apple")===-1&&navigator.userAgent.toLowerCase().indexOf("mobile")>-1&&navigator.userAgent.toLowerCase().indexOf("mozilla")>-1},isDesktop:function(){return!0},isMobile:function(){return!0},ieVersion:(function(){var ee,te,ne=3;if(document===null||typeof document!="object")return 0;te=(ee=document.createElement("div")).getElementsByTagName("i");do ee.innerHTML="<!--[if gt IE "+ ++ne+"]><i></i><![endif]-->";while(te[0]);return ne>4?ne:void 0})(),getDimensions:function(ee,te){var ne,ie,re,oe,se,ae,le,ue,de,pe=/\d+(\.\d*)?px/;if(!this.isBrowser||ee===null)return{width:500,height:500};if(te=te||document,ne=Q.A.isString(ee)?te.getElementById(ee):ee,!Q.A.exists(ne))throw new Error(`
JSXGraph: HTML container element '`+ee+"' not found.");return(ie=ne.style.display)!=="none"&&ie!==null?ne.clientWidth>0&&ne.clientHeight>0?{width:ne.clientWidth,height:ne.clientHeight}:(de=window.getComputedStyle?window.getComputedStyle(ne):ne.style,{width:pe.test(de.width)?parseFloat(de.width):0,height:pe.test(de.height)?parseFloat(de.height):0}):(oe=(re=ne.style).visibility,se=re.position,ae=re.display,re.visibility="hidden",re.position="absolute",re.display="block",le=ne.clientWidth,ue=ne.clientHeight,re.display=ae,re.position=se,re.visibility=oe,{width:le,height:ue})},addEvent:function(ee,te,ne,ie,re){var oe=function(){return ne.apply(ie,arguments)};oe.origin=ne,typeof ie=="object"&&Q.A.exists(ie.BOARD_MODE_NONE)&&(ie["x_internal"+te]=ie["x_internal"+te]||[],ie["x_internal"+te].push(oe)),Q.A.exists(ee)&&Q.A.exists(ee.addEventListener)&&(re=re||!1,ee.addEventListener(te,oe,re)),Q.A.exists(ee)&&Q.A.exists(ee.attachEvent)&&ee.attachEvent("on"+te,oe)},removeEvent:function(ee,te,ne,ie){var re;if(Q.A.exists(ie))if(Q.A.exists(ie["x_internal"+te]))if(Q.A.isArray(ie["x_internal"+te]))if((re=Q.A.indexOf(ie["x_internal"+te],ne,"origin"))!==-1){try{Q.A.exists(ee)&&Q.A.exists(ee.removeEventListener)&&ee.removeEventListener(te,ie["x_internal"+te][re],!1),Q.A.exists(ee)&&Q.A.exists(ee.detachEvent)&&ee.detachEvent("on"+te,ie["x_internal"+te][re])}catch{Z.A.debug("removeEvent: event not registered in browser: ("+te+" -- "+ne+")")}ie["x_internal"+te].splice(re,1)}else Z.A.debug("removeEvent: no such event function in internal list: "+ne);else Z.A.debug("owner[x_internal + "+te+"] is not an array");else Z.A.debug("removeEvent: no such type: "+te);else Z.A.debug("no such owner")},removeAllEvents:function(ee,te,ne){var ie;if(ne["x_internal"+te]){for(ie=ne["x_internal"+te].length-1;ie>=0;ie--)Z.A.removeEvent(ee,te,ne["x_internal"+te][ie].origin,ne);ne["x_internal"+te].length>0&&Z.A.debug("removeAllEvents: Not all events could be removed.")}},getPosition:function(ee,te,ne){var ie,re,oe,se=0,ae=0;if(ee||(ee=window.event),oe=ee.touches,Q.A.exists(oe)&&oe.length===0&&(oe=ee.changedTouches),Q.A.exists(te)&&Q.A.exists(oe))if(te===-1){for(re=oe.length,ie=0;ie<re;ie++)if(oe[ie]){ee=oe[ie];break}}else ee=oe[te];return ee.clientX&&(se=ee.clientX,ae=ee.clientY),[se,ae]},getOffset:function(ee){var te,ne=ee,ie=ee,re=ne.offsetLeft-ne.scrollLeft,oe=ne.offsetTop-ne.scrollTop;for(re=(te=this.getCSSTransform([re,oe],ne))[0],oe=te[1],ne=ne.offsetParent;ne;){for(re+=ne.offsetLeft,oe+=ne.offsetTop,ne.offsetParent&&(re+=ne.clientLeft-ne.scrollLeft,oe+=ne.clientTop-ne.scrollTop),re=(te=this.getCSSTransform([re,oe],ne))[0],oe=te[1],ie=ie.parentNode;ie!==ne;)re+=ie.clientLeft-ie.scrollLeft,oe+=ie.clientTop-ie.scrollTop,re=(te=this.getCSSTransform([re,oe],ie))[0],oe=te[1],ie=ie.parentNode;ne=ne.offsetParent}return[re,oe]},getStyle:function(ee,te){var ne,ie=ee.ownerDocument;return ie.defaultView&&ie.defaultView.getComputedStyle?ne=ie.defaultView.getComputedStyle(ee,null).getPropertyValue(te):ee.currentStyle&&Z.A.ieVersion>=9?ne=ee.currentStyle[te]:ee.style&&(te=te.replace(/-([a-z]|[0-9])/gi,function(re,oe){return oe.toUpperCase()}),ne=ee.style[te]),ne},getProp:function(ee,te){var ne=parseInt(this.getStyle(ee,te),10);return isNaN(ne)?0:ne},getCSSTransform:function(ee,te){var ne,ie,re,oe,se,ae,le,ue=["transform","webkitTransform","MozTransform","msTransform","oTransform"];for(se=ue.length,ne=0,re="";ne<se;ne++)if(Q.A.exists(te.style[ue[ne]])){re=te.style[ue[ne]];break}if(re!==""&&(oe=re.indexOf("("))>0){for(se=re.length,ie=0,ae=(le=re.substring(oe+1,se-1).split(",")).length;ie<ae;ie++)le[ie]=parseFloat(le[ie]);re.indexOf("matrix")===0?(ee[0]+=le[4],ee[1]+=le[5]):re.indexOf("translateX")===0?ee[0]+=le[0]:re.indexOf("translateY")===0?ee[1]+=le[0]:re.indexOf("translate")===0&&(ee[0]+=le[0],ee[1]+=le[1])}return Q.A.exists(te.style.zoom)&&(re=te.style.zoom)!==""&&(ee[0]*=parseFloat(re),ee[1]*=parseFloat(re)),ee},getCSSTransformMatrix:function(ee){var te,ne,ie,re,oe,se,ae,le,ue=ee.ownerDocument,de=["transform","webkitTransform","MozTransform","msTransform","oTransform"],pe=[[1,0,0],[0,1,0],[0,0,1]];if(ue.defaultView&&ue.defaultView.getComputedStyle)ie=(le=ue.defaultView.getComputedStyle(ee,null)).getPropertyValue("-webkit-transform")||le.getPropertyValue("-moz-transform")||le.getPropertyValue("-ms-transform")||le.getPropertyValue("-o-transform")||le.getPropertyValue("transform");else for(se=de.length,te=0,ie="";te<se;te++)if(Q.A.exists(ee.style[de[te]])){ie=ee.style[de[te]];break}if(ie!==""&&(oe=ie.indexOf("("))>0){for(se=ie.length,ne=0,ae=(re=ie.substring(oe+1,se-1).split(",")).length;ne<ae;ne++)re[ne]=parseFloat(re[ne]);ie.indexOf("matrix")===0?pe=[[1,0,0],[0,re[0],re[1]],[0,re[2],re[3]]]:ie.indexOf("scaleX")===0?pe[1][1]=re[0]:ie.indexOf("scaleY")===0?pe[2][2]=re[0]:ie.indexOf("scale")===0&&(pe[1][1]=re[0],pe[2][2]=re[1])}return Q.A.exists(ee.style.zoom)&&(ie=ee.style.zoom)!==""&&(pe[1][1]*=parseFloat(ie),pe[2][2]*=parseFloat(ie)),pe},timedChunk:function(ee,te,ne,ie){var re=ee.slice(),oe=function(){var se=+new Date;do te.call(ne,re.shift());while(re.length>0&&+new Date-se<300);re.length>0?window.setTimeout(oe,1):ie(ee)};window.setTimeout(oe,1)},scaleJSXGraphDiv:function(ee,te,ne,ie){var re,oe,se,ae,le,ue,de,pe,fe,_e,ye,be,Ae=ie;for(oe=(se=ne.getElementById(ee).getBoundingClientRect()).height,re=se.width,ue=(pe=ne.getElementById(te))._cssFullscreenStore.w,ye=(de=pe._cssFullscreenStore.h)/ue,ue>re*Ae&&(de=(ue=re*Ae)*ye),de>oe*Ae&&(ue=(de=oe*Ae)/ye),ae=ue,fe=ye<oe/re?re*Ae/ue:oe*Ae/de,_e=.5*(oe-(le=de)),be=0;be<4;be++)try{pe.style.width=ae+"px !important",pe.style.height=le+"px !important",pe.style.margin="0 auto",pe.style.transform=pe._cssFullscreenStore.transform+" matrix("+fe+",0,0,"+fe+",0,"+_e+")";break}catch(Ce){Z.A.debug(`JXG.scaleJSXGraphDiv:
`+Ce)}be===4&&Z.A.debug("JXG.scaleJSXGraphDiv: Could not set any CSS property.")}}),_.A=Z.A},144:function(G,_,J){var Z=J(443),Q=J(561),ee=J(904),te=J(477),ne=J(588),ie=J(378),re=J(454),oe=J(873),se=J(188);Z.A.GeometryElement=function(ae,le,ue,de){var pe,fe,_e;if(this.needsUpdate=!0,this.isDraggable=!1,this.isReal=!0,this.childElements={},this.hasLabel=!1,this.highlighted=!1,this.notExistingParents={},this.traces={},this.numTraces=0,this.transformations=[],this.baseElement=null,this.descendants={},this.ancestors={},this.parents=[],this.symbolic={},this.rendNode=null,this.elType="",this.dump=!0,this.subs={},this.inherits=[],this._pos=-1,this.stdform=[1,0,0,0,1,1,0,0],this.methodMap={setLabel:"setLabel",label:"label",setName:"setName",getName:"getName",Name:"getName",addTransform:"addTransform",setProperty:"setAttribute",setAttribute:"setAttribute",addChild:"addChild",animate:"animate",on:"on",off:"off",trigger:"trigger",addTicks:"addTicks",removeTicks:"removeTicks",removeAllTicks:"removeAllTicks",Bounds:"bounds"},this.quadraticform=[[1,0,0],[0,1,0],[0,0,1]],this.visProp={},this.visPropCalc={visible:!1},re.A.eventify(this),this.mouseover=!1,this.lastDragTime=new Date,this.view=null,arguments.length>0){for(fe in this.board=ae,this.type=ue,this._org_type=ue,this.elementClass=de||Q.A.OBJECT_CLASS_OTHER,this.id=le.id,pe=le.name,se.A.exists(pe)||(pe=this.board.generateName(this)),pe!==""&&(this.board.elementsByName[pe]=this),this.name=pe,this.needsRegularUpdate=le.needsregularupdate,se.A.clearVisPropOld(this),_e=this.resolveShortcuts(le))_e.hasOwnProperty(fe)&&this._set(fe,_e[fe]);this.visProp.draft=_e.draft&&_e.draft.draft}},Z.A.extend(Z.A.GeometryElement.prototype,{addChild:function(ae){var le,ue;for(le in this.childElements[ae.id]=ae,this.addDescendants(ae),ae.ancestors[this.id]=this,this.descendants)if(this.descendants.hasOwnProperty(le))for(ue in this.descendants[le].ancestors[this.id]=this,this.ancestors)this.ancestors.hasOwnProperty(ue)&&(this.descendants[le].ancestors[this.ancestors[ue].id]=this.ancestors[ue]);for(le in this.ancestors)if(this.ancestors.hasOwnProperty(le))for(ue in this.descendants)this.descendants.hasOwnProperty(ue)&&(this.ancestors[le].descendants[this.descendants[ue].id]=this.descendants[ue]);return this},addDescendants:function(ae){var le;for(le in this.descendants[ae.id]=ae,ae.childElements)ae.childElements.hasOwnProperty(le)&&this.addDescendants(ae.childElements[le]);return this},addParents:function(ae){var le,ue,de;for(ue=(de=se.A.isArray(ae)?ae:arguments).length,le=0;le<ue;++le)se.A.exists(de[le])&&(se.A.isId(this.board,de[le])?this.parents.push(de[le]):se.A.exists(de[le].id)&&this.parents.push(de[le].id));this.parents=se.A.uniqueArray(this.parents)},setParents:function(ae){this.parents=[],this.addParents(ae)},addParentsFromJCFunctions:function(ae){var le,ue,de;for(le=0;le<ae.length;le++)for(ue in ae[le].deps)de=ae[le].deps[ue],this.addParents(de),de.addChild(this);return this},removeChild:function(ae){return delete this.childElements[ae.id],this.removeDescendants(ae),delete ae.ancestors[this.id],this},removeDescendants:function(ae){var le;for(le in delete this.descendants[ae.id],ae.childElements)ae.childElements.hasOwnProperty(le)&&this.removeDescendants(ae.childElements[le]);return this},countChildren:function(){var ae,le,ue=0;for(ae in le=this.childElements)le.hasOwnProperty(ae)&&ae.indexOf("Label")<0&&ue++;return ue},getName:function(){return this.name},addTransform:function(ae){return this},draggable:function(){return this.isDraggable&&!this.evalVisProp("fixed")&&this.type!==Q.A.OBJECT_TYPE_GLIDER},setPosition:function(ae,le){var ue,de,pe,fe,_e=[];if(!se.A.exists(this.parents))return this;for(pe=this.parents.length,de=0;de<pe;++de)if(ue=this.board.select(this.parents[de]),se.A.isPoint(ue)){if(!ue.draggable())return this;_e.push(ue)}if(le.length===3&&(le=le.slice(1)),fe=this.board.create("transform",le,{type:"translate"}),(pe=_e.length)>0){if(fe.applyOnce(_e),se.A.exists(this.view)&&this.view.elType==="view3d")for(de=0;de<this.parents.length;++de)ue=this.view.select(this.parents[de]),se.A.exists(ue.setPosition2D)&&ue.setPosition2D(fe)}else this.transformations.length>0&&this.transformations[this.transformations.length-1].isNumericMatrix?this.transformations[this.transformations.length-1].melt(fe):this.addTransform(fe);for(de=0;de<pe;++de)_e[de].type===Q.A.OBJECT_TYPE_GLIDER&&_e[de].updateGlider();return this},setPositionDirectly:function(ae,le,ue){var de=new ee.A(ae,le,this.board,!1),pe=new ee.A(ae,ue,this.board,!1),fe=ne.A.subtract(de.usrCoords,pe.usrCoords);return this.setPosition(Q.A.COORDS_BY_USER,fe),this},generatePolynomial:function(){return[]},animate:function(ae,le,ue){ue=ue||{};var de,pe,fe,_e=this.board.attr.animationdelay,ye=Math.ceil(le/_e),be=this,Ae=function(Ee,Re,Te){var Me,Ne,Le,Ie,Ge;for(Me=oe.A.rgb2hsv(Ee),Le=((Ne=oe.A.rgb2hsv(Re))[0]-Me[0])/ye,Ie=(Ne[1]-Me[1])/ye,Ge=(Ne[2]-Me[2])/ye,be.animationData[Te]=[],fe=0;fe<ye;fe++)be.animationData[Te][ye-fe-1]=oe.A.hsv2rgb(Me[0]+(fe+1)*Le,Me[1]+(fe+1)*Ie,Me[2]+(fe+1)*Ge)},Ce=function(Ee,Re,Te,Me){var Ne,Le;if(Ee=parseFloat(Ee),Re=parseFloat(Re),!isNaN(Ee)&&!isNaN(Re))for(Le=(Re-Ee)/ye,be.animationData[Te]=[],fe=0;fe<ye;fe++)Ne=Ee+(fe+1)*Le,be.animationData[Te][ye-fe-1]=Me?Math.floor(Ne):Ne};for(de in this.animationData={},ae)if(ae.hasOwnProperty(de))switch(pe=de.toLowerCase()){case"strokecolor":case"fillcolor":Ae(this.visProp[pe],ae[de],pe);break;case"size":if(!se.A.isPoint(this))break;Ce(this.visProp[pe],ae[de],pe,!0);break;case"strokeopacity":case"strokewidth":case"fillopacity":Ce(this.visProp[pe],ae[de],pe,!1)}return this.animationCallback=ue.callback,this.board.addAnimation(this),this},update:function(){return this.evalVisProp("trace")&&this.cloneToBackground(),this},updateRenderer:function(){return this},fullUpdate:function(ae){return this.prepareUpdate().update().updateVisibility(ae).updateRenderer()},setDisplayRendNode:function(ae){var le,ue,de,pe,fe;if(ae===void 0&&(ae=this.visPropCalc.visible),ae===this.visPropOld.visible)return this;for(this.board.renderer.display(this,ae),ue=this.inherits.length,de=0;de<ue;de++)if(fe=this.inherits[de],se.A.isArray(fe))for(pe=fe.length,le=0;le<pe;le++)se.A.exists(fe[le])&&se.A.exists(fe[le].rendNode)&&fe[le].evalVisProp("visible")==="inherit"&&fe[le].setDisplayRendNode(ae);else se.A.exists(fe)&&se.A.exists(fe.rendNode)&&fe.evalVisProp("visible")==="inherit"&&fe.setDisplayRendNode(ae);return this.hasLabel&&se.A.exists(this.label)&&se.A.exists(this.label.rendNode)&&this.label.evalVisProp("visible")==="inherit"&&this.label.setDisplayRendNode(ae),this},hide:function(){return this.setAttribute({visible:!1}),this},hideElement:function(){return this.hide(),this},show:function(){return this.setAttribute({visible:!0}),this},showElement:function(){return this.show(),this},updateVisibility:function(ae){var le,ue,de,pe,fe,_e;if(this.needsUpdate){if(se.A.exists(this.view)&&this.view.evalVisProp("visible")===!1)this.visPropCalc.visible=!1;else for(ae!==void 0?this.visPropCalc.visible=ae:(_e=this.evalVisProp("visible"),se.A.exists(this.hiddenByParent)&&this.hiddenByParent&&(_e=!1),_e!=="inherit"&&(this.visPropCalc.visible=_e)),ue=this.inherits.length,de=0;de<ue;de++)if(fe=this.inherits[de],se.A.isArray(fe))for(pe=fe.length,le=0;le<pe;le++)se.A.exists(fe[le])&&fe[le].evalVisProp("visible")==="inherit"&&fe[le].prepareUpdate().updateVisibility(this.visPropCalc.visible);else se.A.exists(fe)&&fe.evalVisProp("visible")==="inherit"&&fe.prepareUpdate().updateVisibility(this.visPropCalc.visible);se.A.exists(this.label)&&se.A.exists(this.label.visProp)&&this.label.evalVisProp("visible")&&this.label.prepareUpdate().updateVisibility(this.visPropCalc.visible)}return this},_set:function(ae,le){var ue;if(ae=ae.toLocaleLowerCase(),this.visProp.hasOwnProperty(ae)&&ae.indexOf("color")>=0&&se.A.isString(le)&&le.length===9&&le.charAt(0)==="#")le=oe.A.rgba2rgbo(le),this.visProp[ae]=le[0],this.visProp[ae.replace("color","opacity")]=le[1];else if(le===null||!se.A.isObject(le)||se.A.exists(le.id)||se.A.exists(le.name))this.visProp[ae]=le;else for(ue in this.visProp[ae]={},le)le.hasOwnProperty(ue)&&(this.visProp[ae][ue.toLocaleLowerCase()]=le[ue])},resolveShortcuts:function(ae){var le,ue,de,pe=["traceattributes","traceAttributes"];for(le in ie.A.shortcuts)if(ie.A.shortcuts.hasOwnProperty(le)){if(se.A.exists(ae[le]))for(ue=0;ue<ie.A.shortcuts[le].length;ue++)se.A.exists(ae[ie.A.shortcuts[le][ue]])||(ae[ie.A.shortcuts[le][ue]]=ae[le]);for(de=0;de<pe.length;de++)se.A.isObject(ae[pe[de]])&&(ae[pe[de]]=this.resolveShortcuts(ae[pe[de]]))}return ae},setLabel:function(ae){this.hasLabel||this.setAttribute({withlabel:!0}),this.setLabelText(ae)},setLabelText:function(ae){return se.A.exists(this.label)&&(ae=ae.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.label.setText(ae)),this},setName:function(ae){ae=ae.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.elType!=="slider"&&this.setLabelText(ae),this.setAttribute({name:ae})},setProperty:function(){Z.A.deprecated("setProperty()","setAttribute()"),this.setAttribute.apply(this,arguments)},setAttribute:function(ae){var le,ue,de,pe,fe,_e,ye,be,Ae,Ce={};for(le=0;le<arguments.length;le++)_e=arguments[le],se.A.isString(_e)?(be=_e.split(":"),Ce[se.A.trim(be[0])]=se.A.trim(be[1])):se.A.isArray(_e)?Ce[_e[0]]=_e[1]:Z.A.extend(Ce,_e);for(le in Ce=this.resolveShortcuts(Ce))if(Ce.hasOwnProperty(le)){if(pe=le.replace(/\s+/g,"").toLowerCase(),fe=Ce[le],se.A.isObject(fe)&&se.A.exists(this.visProp[pe])){if(!se.A.isObject(this.visProp[pe])&&fe!==null&&se.A.isObject(fe)&&(this.visProp[pe]={}),se.A.mergeAttr(this.visProp[pe],fe),this.type===Q.A.OBJECT_TYPE_TICKS&&se.A.exists(this.labels))for(de=this.labels.length,ue=0;ue<de;ue++)this.labels[ue].setAttribute(fe);else if(se.A.exists(this[pe]))if(se.A.isArray(this[pe]))for(ue=0;ue<this[pe].length;ue++)this[pe][ue].setAttribute(fe);else this[pe].setAttribute(fe);else Ae=null,this.triggerEventHandlers(["attribute:"+pe],[Ae,fe,this]);continue}switch(Ae=this.visProp[pe],pe){case"checked":se.A.exists(this.rendNodeTag)&&(this.rendNodeCheckbox.checked=!!fe);break;case"disabled":se.A.exists(this.rendNodeTag)&&(this.rendNodeTag.disabled=!!fe);break;case"face":se.A.isPoint(this)&&(this.visProp.face=fe,this.board.renderer.changePointStyle(this));break;case"generatelabelvalue":this.type===Q.A.OBJECT_TYPE_TICKS&&se.A.isFunction(fe)&&(this.generateLabelValue=fe);break;case"gradient":this.visProp.gradient=fe,this.board.renderer.setGradient(this);break;case"gradientsecondcolor":fe=oe.A.rgba2rgbo(fe),this.visProp.gradientsecondcolor=fe[0],this.visProp.gradientsecondopacity=fe[1],this.board.renderer.updateGradient(this);break;case"gradientsecondopacity":this.visProp.gradientsecondopacity=fe,this.board.renderer.updateGradient(this);break;case"infoboxtext":se.A.isString(fe)?this.infoboxText=fe:this.infoboxText=!1;break;case"labelcolor":ye=(fe=oe.A.rgba2rgbo(fe))[1],fe=fe[0],ye===0&&se.A.exists(this.label)&&this.hasLabel&&this.label.hideElement(),se.A.exists(this.label)&&this.hasLabel&&(this.label.visProp.strokecolor=fe,this.board.renderer.setObjectStrokeColor(this.label,fe,ye)),this.elementClass===Q.A.OBJECT_CLASS_TEXT&&(this.visProp.strokecolor=fe,this.visProp.strokeopacity=ye,this.board.renderer.setObjectStrokeColor(this,fe,ye));break;case"layer":this.board.renderer.setLayer(this,this.eval(fe)),this._set(pe,fe);break;case"maxlength":se.A.exists(this.rendNodeTag)&&(this.rendNodeTag.maxlength=!!fe);break;case"name":Ae=this.name,delete this.board.elementsByName[this.name],this.name=fe,this.board.elementsByName[this.name]=this;break;case"needsregularupdate":this.needsRegularUpdate=!(fe==="false"||fe===!1),this.board.renderer.setBuffering(this,this.needsRegularUpdate?"auto":"static");break;case"onpolygon":this.type===Q.A.OBJECT_TYPE_GLIDER&&(this.onPolygon=!!fe);break;case"radius":this.type!==Q.A.OBJECT_TYPE_ANGLE&&this.type!==Q.A.OBJECT_TYPE_SECTOR||this.setRadius(fe);break;case"rotate":(this.elementClass===Q.A.OBJECT_CLASS_TEXT&&this.evalVisProp("display")==="internal"||this.type===Q.A.OBJECT_TYPE_IMAGE)&&this.addRotation(fe);break;case"tabindex":se.A.exists(this.rendNode)&&(this.rendNode.setAttribute("tabindex",fe),this._set(pe,fe));break;case"trace":fe==="false"||fe===!1?(this.clearTrace(),this.visProp.trace=!1):this.visProp.trace=fe!=="pause";break;case"visible":this.visProp.visible=fe!=="false"&&(fe==="true"||fe),this.setDisplayRendNode(this.evalVisProp("visible")),this.evalVisProp("visible")&&se.A.exists(this.updateSize)&&this.updateSize();break;case"withlabel":this.visProp.withlabel=fe,this.evalVisProp("withlabel")?(this.label||this.createLabel(),this.label.setAttribute({visible:"inherit"})):this.label&&this.hasLabel&&this.label.setAttribute({visible:!1}),this.hasLabel=fe;break;case"straightfirst":case"straightlast":for(ue in this._set(pe,fe),this.childElements)this.childElements.hasOwnProperty(ue)&&this.childElements[ue].elType==="glider"&&this.childElements[ue].fullUpdate();break;default:se.A.exists(this.visProp[pe])&&(!Z.A.Validator[pe]||Z.A.Validator[pe]&&Z.A.Validator[pe](fe)||Z.A.Validator[pe]&&se.A.isFunction(fe)&&Z.A.Validator[pe](fe(this)))?(fe=(!fe.toLowerCase||fe.toLowerCase()!=="false")&&fe,this._set(pe,fe)):pe in ie.A.shortcuts||Z.A.warn("attribute '"+pe+"' does not accept type '"+typeof fe+"' of value "+fe+".")}this.triggerEventHandlers(["attribute:"+pe],[Ae,fe,this])}return this.triggerEventHandlers(["attribute"],[Ce,this]),this.evalVisProp("needsregularupdate")?this.board.update(this):this.board.fullUpdate(),this.elementClass===Q.A.OBJECT_CLASS_TEXT&&this.updateSize(),this},getProperty:function(){Z.A.deprecated("getProperty()","getAttribute()"),this.getProperty.apply(this,arguments)},getAttribute:function(ae){var le;switch(ae=ae.toLowerCase()){case"needsregularupdate":le=this.needsRegularUpdate;break;case"labelcolor":le=this.label.visProp.strokecolor;break;case"infoboxtext":le=this.infoboxText;break;case"withlabel":le=this.hasLabel;break;default:le=this.visProp[ae]}return le},evalVisProp:function(ae){var le,ue,de,pe,fe,_e,ye;if((ae=ae.toLowerCase()).indexOf(".")===-1)le=this.visProp[ae];else for(pe=(ue=ae.split(".")).length,le=this.visProp,de=0;de<pe;de++)se.A.exists(le)&&(le=le[ue[de]]);if(Z.A.isFunction(le))return this.visProp.islabel===!0&&se.A.exists(this.visProp.anchor)?this.visProp.anchor.visProp.element3d!==null?le(this.visProp.anchor.visProp.element3d):le(this.visProp.anchor):Z.A.exists(this.visProp.element3d)?le(this.visProp.element3d):le(this);if(le==="inherit"){for(fe in this.descendants)if(this.descendants.hasOwnProperty(fe)){for(ye=!1,pe=(_e=this.descendants[fe]).inherits.length,de=0;de<pe;de++)if(this.id===_e.inherits[de].id){ye=!0;break}if(ye){le=_e.evalVisProp(ae);break}}}return le},eval:function(ae){return Z.A.isFunction(ae)?this.visProp.islabel===!0&&se.A.exists(this.visProp.anchor)?this.visProp.anchor.visProp.element3d!==null?ae(this.visProp.anchor.visProp.element3d):ae(this.visProp.anchor):this.visProp.element3d!==null?ae(this.visProp.element3d):ae(this):ae},setDash:function(ae){return this.setAttribute({dash:ae}),this},prepareUpdate:function(){return this.needsUpdate=!0,this},remove:function(){return this.board.renderer.remove(this.rendNode),this.hasLabel&&this.board.renderer.remove(this.board.renderer.getElementById(this.label.id)),this},getTextAnchor:function(){return new ee.A(Q.A.COORDS_BY_USER,[0,0],this.board)},getLabelAnchor:function(){return new ee.A(Q.A.COORDS_BY_USER,[0,0],this.board)},setArrow:function(ae,le){return this.visProp.firstarrow=ae,this.visProp.lastarrow=le,le&&(this.type=Q.A.OBJECT_TYPE_VECTOR,this.elType="arrow"),this.prepareUpdate().update().updateVisibility().updateRenderer(),this},createGradient:function(){var ae=this.evalVisProp("gradient");ae!=="linear"&&ae!=="radial"||this.board.renderer.setGradient(this)},createLabel:function(){var ae,le=this;return Z.A.elements.text?((ae=se.A.deepCopy(this.visProp.label,null)).id=this.id+"Label",ae.isLabel=!0,ae.anchor=this,ae.priv=this.visProp.priv,this.visProp.withlabel&&(this.label=Z.A.elements.text(this.board,[0,0,function(){return se.A.isFunction(le.name)?le.name(le):le.name}],ae),this.label.needsUpdate=!0,this.label.dump=!1,this.label.fullUpdate(),this.hasLabel=!0)):Z.A.debug("JSXGraph: Can't create label: text element is not available. Make sure you include base/text"),this},highlight:function(ae){return ae=se.A.def(ae,!1),!this.evalVisProp("highlight")||this.highlighted&&!ae||(this.highlighted=!0,this.board.highlightedObjects[this.id]=this,this.board.renderer.highlight(this)),this},noHighlight:function(){return this.highlighted&&(this.highlighted=!1,delete this.board.highlightedObjects[this.id],this.board.renderer.noHighlight(this)),this},clearTrace:function(){var ae;for(ae in this.traces)this.traces.hasOwnProperty(ae)&&this.board.renderer.remove(this.traces[ae]);return this.numTraces=0,this},cloneToBackground:function(){return this},bounds:function(){return[0,0,0,0]},normalize:function(){return this.stdform=te.A.normalize(this.stdform),this},toJSON:function(){var ae,le,ue=['{"name":',this.name];for(le in ue.push(', "id":'+this.id),ae=[],this.visProp)this.visProp.hasOwnProperty(le)&&se.A.exists(this.visProp[le])&&ae.push('"'+le+'":'+this.visProp[le]);return ue.push(', "visProp":{'+ae.toString()+"}"),ue.push("}"),ue.join("")},addRotation:function(ae){var le,ue,de,pe,fe,_e=this;return this.elementClass!==Q.A.OBJECT_CLASS_TEXT&&this.type!==Q.A.OBJECT_TYPE_IMAGE||ae===0||(le=this.board.create("transform",[function(){return-_e.X()},function(){return-_e.Y()}],{type:"translate"}),ue=this.board.create("transform",[function(){return _e.X()},function(){return _e.Y()}],{type:"translate"}),de=this.board.create("transform",[function(){return _e.board.unitX/_e.board.unitY},function(){return 1}],{type:"scale"}),pe=this.board.create("transform",[function(){return _e.board.unitY/_e.board.unitX},function(){return 1}],{type:"scale"}),fe=this.board.create("transform",[function(){return _e.eval(ae)*Math.PI/180}],{type:"rotate"}),le.bindTo(this),de.bindTo(this),fe.bindTo(this),pe.bindTo(this),ue.bindTo(this)),this},highlightStrokeColor:function(ae){return Z.A.deprecated("highlightStrokeColor()","setAttribute()"),this.setAttribute({highlightStrokeColor:ae}),this},strokeColor:function(ae){return Z.A.deprecated("strokeColor()","setAttribute()"),this.setAttribute({strokeColor:ae}),this},strokeWidth:function(ae){return Z.A.deprecated("strokeWidth()","setAttribute()"),this.setAttribute({strokeWidth:ae}),this},fillColor:function(ae){return Z.A.deprecated("fillColor()","setAttribute()"),this.setAttribute({fillColor:ae}),this},highlightFillColor:function(ae){return Z.A.deprecated("highlightFillColor()","setAttribute()"),this.setAttribute({highlightFillColor:ae}),this},labelColor:function(ae){return Z.A.deprecated("labelColor()","setAttribute()"),this.setAttribute({labelColor:ae}),this},dash:function(ae){return Z.A.deprecated("dash()","setAttribute()"),this.setAttribute({dash:ae}),this},visible:function(ae){return Z.A.deprecated("visible()","setAttribute()"),this.setAttribute({visible:ae}),this},shadow:function(ae){return Z.A.deprecated("shadow()","setAttribute()"),this.setAttribute({shadow:ae}),this},getType:function(){return this.elType},getParents:function(){return se.A.isArray(this.parents)?this.parents:[]},snapToGrid:function(){return this},snapToPoints:function(){return this},getAttributes:function(){var ae,le=se.A.deepCopy(this.visProp),ue=[],de=ue.length;for(le.id=this.id,le.name=this.name,ae=0;ae<de;ae++)delete le[ue[ae]];return le},hasPoint:function(ae,le){return!1},addTicks:function(ae){return ae.id!==""&&se.A.exists(ae.id)||(ae.id=this.id+"_ticks_"+(this.ticks.length+1)),this.board.renderer.drawTicks(ae),this.ticks.push(ae),ae.id},removeAllTicks:function(){var ae;if(se.A.exists(this.ticks)){for(ae=this.ticks.length-1;ae>=0;ae--)this.removeTicks(this.ticks[ae]);this.ticks=[],this.board.update()}},removeTicks:function(ae){var le,ue;if(se.A.exists(this.defaultTicks)&&this.defaultTicks===ae&&(this.defaultTicks=null),se.A.exists(this.ticks)){for(le=this.ticks.length-1;le>=0;le--)if(this.ticks[le]===ae){if(this.board.removeObject(this.ticks[le]),this.ticks[le].ticks)for(ue=0;ue<this.ticks[le].ticks.length;ue++)se.A.exists(this.ticks[le].labels[ue])&&this.board.removeObject(this.ticks[le].labels[ue]);delete this.ticks[le];break}}},getSnapSizes:function(){var ae,le,ue;return ae=this.evalVisProp("snapsizex"),le=this.evalVisProp("snapsizey"),ae<=0&&this.board.defaultAxes&&this.board.defaultAxes.x.defaultTicks&&(ae=(ue=this.board.defaultAxes.x.defaultTicks).ticksDelta*(ue.evalVisProp("minorticks")+1)),le<=0&&this.board.defaultAxes&&this.board.defaultAxes.y.defaultTicks&&(le=(ue=this.board.defaultAxes.y.defaultTicks).ticksDelta*(ue.evalVisProp("minorticks")+1)),[ae,le]},handleSnapToGrid:function(ae,le){var ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te=this.evalVisProp("attracttogrid"),Me=this.evalVisProp("attractorunit"),Ne=this.evalVisProp("attractordistance");return!se.A.exists(this.coords)||this.evalVisProp("fixed")||(this.evalVisProp("snaptogrid")||Te||ae===!0)&&(ue=this.coords.usrCoords[1],de=this.coords.usrCoords[2],Ee=(Ce=this.getSnapSizes())[0],Re=Ce[1],Ee>0&&Re>0&&(Ae=this.board.getBoundingBox(),pe=Math.round(ue/Ee)*Ee,fe=Math.round(de/Re)*Re,_e=new Z.A.Coords(Q.A.COORDS_BY_USER,[pe,fe],this.board),(!Te||_e.distance(Me==="screen"?Q.A.COORDS_BY_SCREEN:Q.A.COORDS_BY_USER,this.coords)<Ne)&&(ue=pe,de=fe,le||(ye=Math.min(Ae[0],Ae[2]),be=Math.max(Ae[0],Ae[2]),ue<ye&&ue>ye-Ee?ue+=Ee:ue>be&&ue<be+Ee&&(ue-=Ee),ye=Math.min(Ae[1],Ae[3]),be=Math.max(Ae[1],Ae[3]),de<ye&&de>ye-Re?de+=Re:de>be&&de<be+Re&&(de-=Re)),this.coords.setCoordinates(Q.A.COORDS_BY_USER,[ue,de])))),this},getBoundingBox:function(){var ae,le,ue,de,pe,fe,_e=[1/0,1/0,-1/0,-1/0];if(this.type===Q.A.OBJECT_TYPE_POLYGON){if((le=this.vertices.length-1)<=0)return _e;for(ae=0;ae<le;ae++)ue=this.vertices[ae].X(),_e[0]=ue<_e[0]?ue:_e[0],_e[2]=ue>_e[2]?ue:_e[2],ue=this.vertices[ae].Y(),_e[1]=ue<_e[1]?ue:_e[1],_e[3]=ue>_e[3]?ue:_e[3]}else if(this.elementClass===Q.A.OBJECT_CLASS_CIRCLE)de=this.center.X(),pe=this.center.Y(),_e=[de-this.radius,pe+this.radius,de+this.radius,pe-this.radius];else if(this.elementClass===Q.A.OBJECT_CLASS_CURVE){if((le=this.points.length)===0)return _e;for(ae=0;ae<le;ae++)ue=this.points[ae].usrCoords[1],_e[0]=ue<_e[0]?ue:_e[0],_e[2]=ue>_e[2]?ue:_e[2],ue=this.points[ae].usrCoords[2],_e[1]=ue<_e[1]?ue:_e[1],_e[3]=ue>_e[3]?ue:_e[3]}else this.elementClass===Q.A.OBJECT_CLASS_POINT?(de=this.X(),pe=this.Y(),_e=[de-(fe=this.evalVisProp("size"))/this.board.unitX,pe-fe/this.board.unitY,de+fe/this.board.unitX,pe+fe/this.board.unitY]):this.elementClass===Q.A.OBJECT_CLASS_LINE&&(ue=this.point1.coords.usrCoords[1],_e[0]=ue<_e[0]?ue:_e[0],_e[2]=ue>_e[2]?ue:_e[2],ue=this.point1.coords.usrCoords[2],_e[1]=ue<_e[1]?ue:_e[1],_e[3]=ue>_e[3]?ue:_e[3],ue=this.point2.coords.usrCoords[1],_e[0]=ue<_e[0]?ue:_e[0],_e[2]=ue>_e[2]?ue:_e[2],ue=this.point2.coords.usrCoords[2],_e[1]=ue<_e[1]?ue:_e[1],_e[3]=ue>_e[3]?ue:_e[3]);return _e},addEvent:Z.A.shortcut(Z.A.GeometryElement.prototype,"on"),removeEvent:Z.A.shortcut(Z.A.GeometryElement.prototype,"off"),formatNumberLocale:function(ae,le){var ue,de,pe,fe={},_e={maximumfractiondigits:"maximumFractionDigits",minimumfractiondigits:"minimumFractionDigits",compactdisplay:"compactDisplay",currencydisplay:"currencyDisplay",currencysign:"currencySign",localematcher:"localeMatcher",numberingsystem:"numberingSystem",signdisplay:"signDisplay",unitdisplay:"unitDisplay",usegrouping:"useGrouping",roundingmode:"roundingMode",roundingpriority:"roundingPriority",roundingincrement:"roundingIncrement",trailingzerodisplay:"trailingZeroDisplay",minimumintegerdigits:"minimumIntegerDigits",minimumsignificantdigits:"minimumSignificantDigits",maximumsignificantdigits:"maximumSignificantDigits"};if(se.A.exists(Intl)&&this.useLocale()){for(pe in ue=this.evalVisProp("intl.locale")||this.eval(this.board.attr.intl.locale),de=this.evalVisProp("intl.options")||{})de.hasOwnProperty(pe)&&(_e.hasOwnProperty(pe)?fe[_e[pe]]=this.eval(de[pe]):fe[pe]=this.eval(de[pe]));return pe="maximumfractiondigits",se.A.exists(de[pe])||(fe[_e[pe]]=le),Intl.NumberFormat(ue,fe).format(ae)}return ae},useLocale:function(){var ae;return!(!se.A.exists(this.visProp.intl)||!se.A.exists(this.visProp.intl.enabled))&&((ae=this.evalVisProp("intl.enabled"))===!0||ae==="inherit"&&this.eval(this.board.attr.intl.enabled)===!0)},__evt__over:function(ae){},__evt__mouseover:function(ae){},__evt__out:function(ae){},__evt__mouseout:function(ae){},__evt__move:function(ae){},__evt__mousemove:function(ae){},__evt__drag:function(ae){},__evt__mousedrag:function(ae){},__evt__pendrag:function(ae){},__evt__touchdrag:function(ae){},__evt__keydrag:function(ae){},__evt__down:function(ae){},__evt__mousedown:function(ae){},__evt__pendown:function(ae){},__evt__touchdown:function(ae){},__evt__click:function(ae){},__evt__dblclick:function(ae){},__evt__mouseclick:function(ae){},__evt__mousedblclick:function(ae){},__evt__pointerclick:function(ae){},__evt__pointerdblclick:function(ae){},__evt__up:function(ae){},__evt__mouseup:function(ae){},__evt__penup:function(ae){},__evt__touchup:function(ae){},__evt__attribute:function(ae,le){},__evt__attribute_:function(ae,le,ue){},__evt:function(){}}),_.A=Z.A.GeometryElement},171:function(G,_,J){var Z=J(443),Q=J(188),ee=J(133),te=J(477),ne={rk4:{s:4,A:[[0,0,0,0],[.5,0,0,0],[0,.5,0,0],[0,0,1,0]],b:[1/6,1/3,1/3,1/6],c:[0,.5,.5,1]},heun:{s:2,A:[[0,0],[1,0]],b:[.5,.5],c:[0,1]},euler:{s:1,A:[[0]],b:[1],c:[0]}};te.A.Numerics={Gauss:function(ie,re){var oe,se,ae,le,ue,de=te.A.eps,pe=ie.length>0?ie[0].length:0;if(pe!==re.length||pe!==ie.length)throw new Error("JXG.Math.Numerics.Gauss: Dimensions don't match. A must be a square matrix and b must be of the same length as A.");for(le=[],ue=re.slice(0,pe),oe=0;oe<pe;oe++)le[oe]=ie[oe].slice(0,pe);for(se=0;se<pe;se++){for(oe=pe-1;oe>se;oe--)if(Math.abs(le[oe][se])>de)if(Math.abs(le[se][se])<de)Q.A.swap(le,oe,se),Q.A.swap(ue,oe,se);else for(le[oe][se]/=le[se][se],ue[oe]-=le[oe][se]*ue[se],ae=se+1;ae<pe;ae++)le[oe][ae]-=le[oe][se]*le[se][ae];if(Math.abs(le[se][se])<de)throw new Error("JXG.Math.Numerics.Gauss(): The given matrix seems to be singular.")}return this.backwardSolve(le,ue,!0),ue},backwardSolve:function(ie,re,oe){var se,ae,le,ue,de;for(se=oe?re:re.slice(0,re.length),ae=ie.length,le=ie.length>0?ie[0].length:0,ue=ae-1;ue>=0;ue--){for(de=le-1;de>ue;de--)se[ue]-=ie[ue][de]*se[de];se[ue]/=ie[ue][ue]}return se},gaussBareiss:function(ie){var re,oe,se,ae,le,ue,de,pe,fe,_e=te.A.eps;if((de=ie.length)<=0)return 0;for(ie[0].length<de&&(de=ie[0].length),pe=[],ae=0;ae<de;ae++)pe[ae]=ie[ae].slice(0,de);for(oe=1,se=1,re=0;re<de-1;re++){if(ue=pe[re][re],Math.abs(ue)<_e){for(ae=re+1;ae<de&&!(Math.abs(pe[ae][re])>=_e);ae++);if(ae===de)return 0;for(le=re;le<de;le++)fe=pe[ae][le],pe[ae][le]=pe[re][le],pe[re][le]=fe;se=-se,ue=pe[re][re]}for(ae=re+1;ae<de;ae++)for(le=re+1;le<de;le++)fe=ue*pe[ae][le]-pe[ae][re]*pe[re][le],pe[ae][le]=fe/oe;oe=ue}return se*pe[de-1][de-1]},det:function(ie){return ie.length===2&&ie[0].length===2?ie[0][0]*ie[1][1]-ie[1][0]*ie[0][1]:this.gaussBareiss(ie)},Jacobi:function(ie){var re,oe,se,ae,le,ue,de,pe,fe,_e=te.A.eps*te.A.eps,ye=0,be=ie.length,Ae=[[0,0,0],[0,0,0],[0,0,0]],Ce=[[0,0,0],[0,0,0],[0,0,0]],Ee=0;for(re=0;re<be;re++){for(oe=0;oe<be;oe++)Ae[re][oe]=0,Ce[re][oe]=ie[re][oe],ye+=Math.abs(Ce[re][oe]);Ae[re][re]=1}if(be===1)return[Ce,Ae];if(ye<=0)return[Ce,Ae];ye/=be*be;do{for(pe=0,fe=0,oe=1;oe<be;oe++)for(re=0;re<oe;re++)if((ae=Math.abs(Ce[re][oe]))>fe&&(fe=ae),pe+=ae,ae>=_e){for(ae=.5*Math.atan2(2*Ce[re][oe],Ce[re][re]-Ce[oe][oe]),le=Math.sin(ae),ue=Math.cos(ae),se=0;se<be;se++)de=Ce[se][re],Ce[se][re]=ue*de+le*Ce[se][oe],Ce[se][oe]=-le*de+ue*Ce[se][oe],de=Ae[se][re],Ae[se][re]=ue*de+le*Ae[se][oe],Ae[se][oe]=-le*de+ue*Ae[se][oe];for(Ce[re][re]=ue*Ce[re][re]+le*Ce[oe][re],Ce[oe][oe]=-le*Ce[re][oe]+ue*Ce[oe][oe],Ce[re][oe]=0,se=0;se<be;se++)Ce[re][se]=Ce[se][re],Ce[oe][se]=Ce[se][oe]}Ee+=1}while(Math.abs(pe)/ye>_e&&Ee<2e3);return[Ce,Ae]},NewtonCotes:function(ie,re,oe){var se,ae,le,ue=0,de=oe&&Q.A.isNumber(oe.number_of_nodes)?oe.number_of_nodes:28,pe={trapez:!0,simpson:!0,milne:!0},fe=oe&&oe.integration_type&&pe.hasOwnProperty(oe.integration_type)&&pe[oe.integration_type]?oe.integration_type:"milne",_e=(ie[1]-ie[0])/de;switch(fe){case"trapez":for(ue=.5*(re(ie[0])+re(ie[1])),se=ie[0],ae=0;ae<de-1;ae++)ue+=re(se+=_e);ue*=_e;break;case"simpson":if(de%2>0)throw new Error("JSXGraph:  INT_SIMPSON requires config.number_of_nodes dividable by 2.");for(le=de/2,ue=re(ie[0])+re(ie[1]),se=ie[0],ae=0;ae<le-1;ae++)ue+=2*re(se+=2*_e);for(se=ie[0]-_e,ae=0;ae<le;ae++)ue+=4*re(se+=2*_e);ue*=_e/3;break;default:if(de%4>0)throw new Error("JSXGraph: Error in INT_MILNE: config.number_of_nodes must be a multiple of 4");for(le=.25*de,ue=7*(re(ie[0])+re(ie[1])),se=ie[0],ae=0;ae<le-1;ae++)ue+=14*re(se+=4*_e);for(se=ie[0]-3*_e,ae=0;ae<le;ae++)ue+=32*(re(se+=4*_e)+re(se+2*_e));for(se=ie[0]-2*_e,ae=0;ae<le;ae++)ue+=12*re(se+=4*_e);ue*=2*_e/45}return ue},Romberg:function(ie,re,oe){var se,ae,le,ue,de,pe,fe,_e,ye=[],be=0,Ae=1/0,Ce=oe&&Q.A.isNumber(oe.max_iterations)?oe.max_iterations:20,Ee=oe&&Q.A.isNumber(oe.eps)?oe.eps:oe.eps||1e-7;for(se=ie[0],le=(ae=ie[1])-se,de=1,ye[0]=.5*le*(re(se)+re(ae)),pe=0;pe<Ce;++pe){for(ue=0,le*=.5,de*=2,_e=1,fe=1;fe<de;fe+=2)ue+=re(se+fe*le);for(ye[pe+1]=.5*ye[pe]+ue*le,be=ye[pe+1],fe=pe-1;fe>=0;--fe)_e*=4,ye[fe]=ye[fe+1]+(ye[fe+1]-ye[fe])/(_e-1),be=ye[fe];if(Math.abs(be-Ae)<Ee*Math.abs(be))break;Ae=be}return be},GaussLegendre:function(ie,re,oe){var se,ae,le,ue,de,pe,fe,_e,ye=0,be=[],Ae=[],Ce=oe&&Q.A.isNumber(oe.n)?oe.n:12;if(Ce>18&&(Ce=18),be[2]=[.5773502691896257],Ae[2]=[1],be[4]=[.33998104358485626,.8611363115940526],Ae[4]=[.6521451548625461,.34785484513745385],be[6]=[.2386191860831969,.6612093864662645,.932469514203152],Ae[6]=[.46791393457269104,.3607615730481386,.17132449237917036],be[8]=[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],Ae[8]=[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],be[10]=[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],Ae[10]=[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],be[12]=[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],Ae[12]=[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],be[14]=[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],Ae[14]=[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],be[16]=[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499],Ae[16]=[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096],be[18]=[.0847750130417353,.2518862256915055,.41175116146284263,.5597708310739475,.6916870430603532,.8037049589725231,.8926024664975557,.9558239495713977,.9915651684209309],Ae[18]=[.1691423829631436,.16427648374583273,.15468467512626524,.14064291467065065,.12255520671147846,.10094204410628717,.07642573025488905,.0497145488949698,.02161601352648331],be[3]=[0,.7745966692414834],Ae[3]=[.8888888888888888,.5555555555555556],be[5]=[0,.5384693101056831,.906179845938664],Ae[5]=[.5688888888888889,.47862867049936647,.23692688505618908],be[7]=[0,.4058451513773972,.7415311855993945,.9491079123427585],Ae[7]=[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],be[9]=[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],Ae[9]=[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],be[11]=[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],Ae[11]=[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],be[13]=[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],Ae[13]=[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],be[15]=[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],Ae[15]=[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],be[17]=[0,.17848418149584785,.3512317634538763,.5126905370864769,.6576711592166907,.7815140038968014,.8802391537269859,.9506755217687678,.9905754753144174],Ae[17]=[.17944647035620653,.17656270536699264,.16800410215645004,.15404576107681028,.13513636846852548,.11188384719340397,.08503614831717918,.0554595293739872,.02414830286854793],se=ie[0],ae=ie[1],ue=Ce+1>>1,fe=be[Ce],_e=Ae[Ce],pe=.5*(ae-se),de=.5*(ae+se),!0&Ce)for(ye=_e[0]*re(de),le=1;le<ue;++le)ye+=_e[le]*(re(de+pe*fe[le])+re(de-pe*fe[le]));else for(ye=0,le=0;le<ue;++le)ye+=_e[le]*(re(de+pe*fe[le])+re(de-pe*fe[le]));return pe*ye},_rescale_error:function(ie,re,oe){var se,ae,le=2220446049250313e-31;return ie=Math.abs(ie),oe!==0&&ie!==0&&(ie=(se=Math.pow(200*ie/oe,1.5))<1?oe*se:oe),re>20041683600089728e-310&&(ae=50*le*re)>ie&&(ie=ae),ie},_gaussKronrod:function(ie,re,oe,se,ae,le,ue){var de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te,Me=ie[0],Ne=ie[1],Le=.5*(Me+Ne),Ie=.5*(Ne-Me),Ge=Math.abs(Ie),He=re(Le),Be=0,ze=He*le[oe-1],Fe=Math.abs(ze),$e=0,Xe=[],je=[];for(oe%2==0&&(Be=He*ae[oe/2-1]),de=Math.floor((oe-1)/2),ye=0;ye<de;ye++)Te=(Ee=re(Le-(Ce=Ie*se[be=2*ye+1])))+(Re=re(Le+Ce)),Xe[be]=Ee,je[be]=Re,Be+=ae[ye]*Te,ze+=le[be]*Te,Fe+=le[be]*(Math.abs(Ee)+Math.abs(Re));for(de=Math.floor(oe/2),ye=0;ye<de;ye++)Ee=re(Le-(Ce=Ie*se[Ae=2*ye])),Re=re(Le+Ce),Xe[Ae]=Ee,je[Ae]=Re,ze+=le[Ae]*(Ee+Re),Fe+=le[Ae]*(Math.abs(Ee)+Math.abs(Re));for(fe=.5*ze,$e=le[oe-1]*Math.abs(He-fe),ye=0;ye<oe-1;ye++)$e+=le[ye]*(Math.abs(Xe[ye]-fe)+Math.abs(je[ye]-fe));return _e=(ze-Be)*Ie,Fe*=Ge,$e*=Ge,pe=ze*=Ie,ue.abserr=this._rescale_error(_e,Fe,$e),ue.resabs=Fe,ue.resasc=$e,pe},GaussKronrod15:function(ie,re,oe){return this._gaussKronrod(ie,re,8,[.9914553711208126,.9491079123427585,.8648644233597691,.7415311855993945,.5860872354676911,.4058451513773972,.20778495500789848,0],[.1294849661688697,.27970539148927664,.3818300505051189,.4179591836734694],[.022935322010529224,.06309209262997856,.10479001032225019,.14065325971552592,.1690047266392679,.19035057806478542,.20443294007529889,.20948214108472782],oe)},GaussKronrod21:function(ie,re,oe){return this._gaussKronrod(ie,re,11,[.9956571630258081,.9739065285171717,.9301574913557082,.8650633666889845,.7808177265864169,.6794095682990244,.5627571346686047,.4333953941292472,.2943928627014602,.14887433898163122,0],[.06667134430868814,.1494513491505806,.21908636251598204,.26926671930999635,.29552422471475287],[.011694638867371874,.032558162307964725,.054755896574351995,.07503967481091996,.0931254545836976,.10938715880229764,.12349197626206584,.13470921731147334,.14277593857706009,.14773910490133849,.1494455540029169],oe)},GaussKronrod31:function(ie,re,oe){return this._gaussKronrod(ie,re,16,[.9980022986933971,.9879925180204854,.9677390756791391,.937273392400706,.8972645323440819,.8482065834104272,.790418501442466,.7244177313601701,.650996741297417,.5709721726085388,.4850818636402397,.3941513470775634,.29918000715316884,.20119409399743451,.1011420669187175,0],[.03075324199611727,.07036604748810812,.10715922046717194,.13957067792615432,.16626920581699392,.1861610000155622,.19843148532711158,.2025782419255613],[.005377479872923349,.015007947329316122,.02546084732671532,.03534636079137585,.04458975132476488,.05348152469092809,.06200956780067064,.06985412131872826,.07684968075772038,.08308050282313302,.08856444305621176,.09312659817082532,.09664272698362368,.09917359872179196,.10076984552387559,.10133000701479154],oe)},_workspace:function(ie,re){return{limit:re,size:0,nrmax:0,i:0,alist:[ie[0]],blist:[ie[1]],rlist:[0],elist:[0],order:[0],level:[0],qpsrt:function(){var oe,se,ae,le,ue,de=this.size-1,pe=this.limit,fe=this.nrmax,_e=this.order[fe];if(de<2)return this.order[0]=0,this.order[1]=1,void(this.i=_e);for(oe=this.elist[_e];fe>0&&oe>this.elist[this.order[fe-1]];)this.order[fe]=this.order[fe-1],fe--;for(ue=de<pe/2+2?de:pe-de+1,ae=fe+1;ae<ue&&oe<this.elist[this.order[ae]];)this.order[ae-1]=this.order[ae],ae++;for(this.order[ae-1]=_e,se=this.elist[de],le=ue-1;le>ae-2&&se>=this.elist[this.order[le]];)this.order[le+1]=this.order[le],le--;this.order[le+1]=de,_e=this.order[fe],this.i=_e,this.nrmax=fe},set_initial_result:function(oe,se){this.size=1,this.rlist[0]=oe,this.elist[0]=se},update:function(oe,se,ae,le,ue,de,pe,fe){var _e=this.i,ye=this.size,be=this.level[this.i]+1;fe>le?(this.alist[_e]=ue,this.rlist[_e]=pe,this.elist[_e]=fe,this.level[_e]=be,this.alist[ye]=oe,this.blist[ye]=se,this.rlist[ye]=ae,this.elist[ye]=le,this.level[ye]=be):(this.blist[_e]=se,this.rlist[_e]=ae,this.elist[_e]=le,this.level[_e]=be,this.alist[ye]=ue,this.blist[ye]=de,this.rlist[ye]=pe,this.elist[ye]=fe,this.level[ye]=be),this.size++,be>this.maximum_level&&(this.maximum_level=be),this.qpsrt()},retrieve:function(){var oe=this.i;return{a:this.alist[oe],b:this.blist[oe],r:this.rlist[oe],e:this.elist[oe]}},sum_results:function(){var oe,se=this.size,ae=0;for(oe=0;oe<se;oe++)ae+=this.rlist[oe];return ae},subinterval_too_small:function(oe,se,ae){var le=1.0000000000000222*(Math.abs(se)+22250738585072014e-321);return Math.abs(oe)<=le&&Math.abs(ae)<=le}}},Qag:function(ie,re,oe){var se,ae,le,ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te,Me,Ne,Le,Ie=this._workspace(ie,1e3),Ge=oe&&Q.A.isNumber(oe.limit)?oe.limit:15,He=oe&&Q.A.isNumber(oe.epsrel)?oe.epsrel:1e-7,Be=oe&&Q.A.isNumber(oe.epsabs)?oe.epsabs:1e-7,ze=oe&&Q.A.isFunction(oe.q)?oe.q:this.GaussKronrod15,Fe={},$e=0,Xe=0,je=0,qe=0,Ze=0,st=0,St=0,it=0,lt=0,ft=0;if(Ge>Ie.limit&&Z.A.warn("iteration limit exceeds available workspace"),Be<=0&&(He<50*te.A.eps||He<5e-29)&&Z.A.warn("tolerance cannot be acheived with given epsabs and epsrel"),le=ze.apply(this,[ie,re,Fe]),ue=Fe.abserr,de=Fe.resabs,pe=Fe.resasc,Ie.set_initial_result(le,ue),fe=Math.max(Be,He*Math.abs(le)),ue<=11102230246251565e-30*de&&ue>fe)return Z.A.warn("cannot reach tolerance because of roundoff error on first attempt"),-1/0;if(ue<=fe&&ue!==pe||ue===0)return le;if(Ge===1)return Z.A.warn("a maximum of one iteration was insufficient"),-1/0;se=le,ae=ue,$e=1;do Ze=0,st=0,St=0,it=0,lt=0,ft=0,Ce=(Ne=Ie.retrieve()).a,Ee=Ne.b,Re=Ne.r,Te=Ne.e,_e=Ce,be=ye=.5*(Ce+Ee),Ae=Ee,Ze=ze.apply(this,[[_e,ye],re,Fe]),it=Fe.abserr,Me=Fe.resasc,st=ze.apply(this,[[be,Ae],re,Fe]),ae+=(ft=it+(lt=Fe.abserr))-Te,se+=(St=Ze+st)-Re,Me!==it&&Fe.resasc!==lt&&(Le=Re-St,Math.abs(Le)<=1e-5*Math.abs(St)&&ft>=.99*Te&&Xe++,$e>=10&&ft>Te&&je++),ae>(fe=Math.max(Be,He*Math.abs(se)))&&((Xe>=6||je>=20)&&(qe=2),Ie.subinterval_too_small(_e,be,Ae)&&(qe=3)),Ie.update(_e,ye,Ze,it,be,Ae,st,lt),Ce=(Ne=Ie.retrieve()).a_i,Ee=Ne.b_i,Re=Ne.r_i,Te=Ne.e_i,$e++;while($e<Ge&&!qe&&ae>fe);return Ie.sum_results()},I:function(ie,re){return this.Qag(ie,re,{q:this.GaussKronrod15,limit:15,epsrel:1e-7,epsabs:1e-7})},Newton:function(ie,re,oe){var se,ae=0,le=te.A.eps,ue=ie.apply(oe,[re]);for(Q.A.isArray(re)&&(re=re[0]);ae<50&&Math.abs(ue)>le;)se=this.D(ie,oe)(re),Math.abs(se)>le?re-=ue/se:re+=.2*Math.random()-1,ue=ie.apply(oe,[re]),ae+=1;return re},root:function(ie,re,oe){return this.chandrupatla(ie,re,oe)},generalizedNewton:function(ie,re,oe,se){var ae,le,ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te,Me=0;for(ae=oe,le=se,Ae=(_e=ie.X(ae)-re.X(le))*_e+(ye=ie.Y(ae)-re.Y(le))*ye,Ce=this.D(ie.X,ie),Ee=this.D(re.X,re),Re=this.D(ie.Y,ie),Te=this.D(re.Y,re);Ae>te.A.eps&&Me<10;)ue=Ce(ae),de=-Ee(le),pe=Re(ae),ae-=((fe=-Te(le))*_e-de*ye)/(be=ue*fe-de*pe),le-=(ue*ye-pe*_e)/be,Ae=(_e=ie.X(ae)-re.X(le))*_e+(ye=ie.Y(ae)-re.Y(le))*ye,Me+=1;return Math.abs(ae)<Math.abs(le)?[ie.X(ae),ie.Y(ae)]:[re.X(le),re.Y(le)]},generalizedDampedNewtonCurves:function(ie,re,oe,se,ae,le){var ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te,Me,Ne,Le=0;for(ue=oe,de=se,Re=ie.Ft(ue),Te=re.Ft(de),Ee=(be=Re[1]-Te[1])*be+(Ae=Re[2]-Te[2])*Ae,Me=function(Ie,Ge){var He=te.A.eps,Be=ie.Ft(Ie-He),ze=ie.Ft(Ie+He),Fe=re.Ft(Ge-He),$e=re.Ft(Ge+He);return[[(ze[1]-Be[1])/(2*He),-($e[1]-Fe[1])/(2*He)],[(ze[2]-Be[2])/(2*He),-($e[2]-Fe[2])/(2*He)]]};Ee>le&&Le<40;)pe=(Ne=Me(ue,de))[0][0],fe=Ne[0][1],_e=Ne[1][0],ue-=ae*((ye=Ne[1][1])*be-fe*Ae)/(Ce=pe*ye-fe*_e),de-=ae*(pe*Ae-_e*be)/Ce,Re=ie.Ft(ue),Te=re.Ft(de),Ee=(be=Re[1]-Te[1])*be+(Ae=Re[2]-Te[2])*Ae,Le+=1;return[ue,de,Ee]},generalizedDampedNewton:function(ie,re,oe,se,ae,le,ue){var de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te,Me,Ne=[],Le=0;if(ue=ue||40,Ee=ie(Ne=se.slice(0,oe),oe),oe===2){for(Te=(be=(Ee=ie(Ne,oe))[0])*be+(Ae=Ee[1])*Ae;Te>le&&Le<ue;)pe=(Re=re(Ne,oe))[0][0],fe=Re[0][1],_e=Re[1][0],Ce=pe*(ye=Re[1][1])-fe*_e,Ne[0]-=ae*(ye*be-fe*Ae)/Ce,Ne[1]-=ae*(pe*Ae-_e*be)/Ce,Te=(be=(Ee=ie(Ne,oe))[0])*be+(Ae=Ee[1])*Ae,Le+=1;return[Ne,Te]}for(Ee=ie(Ne,oe),Te=te.A.innerProduct(Ee,Ee,oe);Te>le&&Le<ue;){for(Re=te.A.inverse(re(Ne,oe)),Me=te.A.matVecMult(Re,Ee),de=0;de<oe;de++)Ne[de]-=ae*Me[de];Ee=ie(Ne,oe),Te=te.A.innerProduct(Ee,Ee,oe),Le+=1}return[Ne,Te]},Neville:function(ie){var re=[],oe=function(se){return function(ae,le){var ue,de,pe,fe=te.A.binomial,_e=ie.length,ye=_e-1,be=0,Ae=0;if(!le)for(pe=1,ue=0;ue<_e;ue++)re[ue]=fe(ye,ue)*pe,pe*=-1;for(de=ae,ue=0;ue<_e;ue++){if(de===0)return ie[ue][se]();pe=re[ue]/de,de-=1,be+=ie[ue][se]()*pe,Ae+=pe}return be/Ae}};return[oe("X"),oe("Y"),0,function(){return ie.length-1}]},splineDef:function(ie,re){var oe,se,ae,le=Math.min(ie.length,re.length),ue=[],de=[],pe=[],fe=[],_e=[],ye=[];if(le===2)return[0,0];for(se=0;se<le;se++)oe={X:ie[se],Y:re[se]},pe.push(oe);for(pe.sort(function(be,Ae){return be.X-Ae.X}),se=0;se<le;se++)ie[se]=pe[se].X,re[se]=pe[se].Y;for(se=0;se<le-1;se++)fe.push(ie[se+1]-ie[se]);for(se=0;se<le-2;se++)_e.push(6*(re[se+2]-re[se+1])/fe[se+1]-6*(re[se+1]-re[se])/fe[se]);for(ue.push(2*(fe[0]+fe[1])),de.push(_e[0]),se=0;se<le-3;se++)ae=fe[se+1]/ue[se],ue.push(2*(fe[se+1]+fe[se+2])-ae*fe[se+1]),de.push(_e[se+1]-ae*de[se]);for(ye[le-3]=de[le-3]/ue[le-3],se=le-4;se>=0;se--)ye[se]=(de[se]-fe[se+1]*ye[se+1])/ue[se];for(se=le-3;se>=0;se--)ye[se+1]=ye[se];return ye[0]=0,ye[le-1]=0,ye},splineEval:function(ie,re,oe,se){var ae,le,ue,de,pe,fe,_e,ye=Math.min(re.length,oe.length),be=1,Ae=!1,Ce=[];for(Q.A.isArray(ie)?(be=ie.length,Ae=!0):ie=[ie],ae=0;ae<be;ae++){if(ie[ae]<re[0]||re[ae]>re[ye-1])return NaN;for(le=1;le<ye&&!(ie[ae]<=re[le]);le++);ue=oe[le-=1],de=(oe[le+1]-oe[le])/(re[le+1]-re[le])-(re[le+1]-re[le])/6*(se[le+1]+2*se[le]),pe=se[le]/2,fe=(se[le+1]-se[le])/(6*(re[le+1]-re[le])),_e=ie[ae]-re[le],Ce.push(ue+(de+(pe+fe*_e)*_e)*_e)}return Ae?Ce:Ce[0]},generatePolynomialTerm:function(ie,re,oe,se){var ae,le=[];for(ae=re;ae>=0;ae--)Q.A.concat(le,["(",ie[ae].toPrecision(se),")"]),ae>1?Q.A.concat(le,["*",oe,"<sup>",ae,"<","/sup> + "]):ae===1&&Q.A.concat(le,["*",oe," + "]);return le.join("")},lagrangePolynomial:function(ie){var re=[],oe=this,se=function(ae,le){var ue,de,pe,fe,_e=ie.length,ye=0,be=0;if(!le)for(ue=0;ue<_e;ue++){for(re[ue]=1,pe=ie[ue].X(),de=0;de<_e;de++)de!==ue&&(re[ue]*=pe-ie[de].X());re[ue]=1/re[ue]}for(ue=0;ue<_e;ue++){if(ae===(pe=ie[ue].X()))return ie[ue].Y();be+=fe=re[ue]/(ae-pe),ye+=fe*ie[ue].Y()}return ye/be};return se.getTerm=function(ae,le,ue){return oe.lagrangePolynomialTerm(ie,ae,le,ue)()},se.getCoefficients=function(){return oe.lagrangePolynomialCoefficients(ie)()},se},lagrangePolynomialTerm:function(ie,re,oe,se){var ae=this;return function(){var le,ue,de,pe,fe,_e=ie.length,ye=!0;for(oe=oe||"x",se===void 0&&(se=" * "),ue=_e-1,le=ae.lagrangePolynomialCoefficients(ie)(),de="",pe=0;pe<le.length;pe++)fe=le[pe],Math.abs(fe)<te.A.eps||(Z.A.exists(re)&&(fe=ee.A._round10(fe,-re)),ye?(de+=fe>0?fe:"-"+-fe,ye=!1):de+=fe>0?" + "+fe:" - "+-fe,ue-pe>1?de+=se+oe+"^"+(ue-pe):ue-pe===1&&(de+=se+oe));return de}},lagrangePolynomialCoefficients:function(ie){return function(){var re,oe,se,ae,le=ie.length,ue=[],de=[],pe=[];for(oe=0;oe<le;oe++)pe[oe]=0;for(re=0;re<le;re++){for(se=ie[re].Y(),ae=ie[re].X(),ue=[],oe=0;oe<le;oe++)oe!==re&&(se/=ae-ie[oe].X(),ue.push(ie[oe].X()));for(de=[1].concat(te.A.Vieta(ue)),oe=0;oe<de.length;oe++)pe[oe]+=(oe%2==1?-1:1)*de[oe]*se}return pe}},_initCubicPoly:function(ie,re,oe,se){return[ie,oe,-3*ie+3*re-2*oe-se,2*ie-2*re+oe+se]},CardinalSpline:function(ie,re,oe){var se,ae,le,ue,de=[],pe=this;return ue=Q.A.isFunction(re)?re:function(){return re},oe===void 0&&(oe="uniform"),ae=function(fe){return function(_e,ye){var be,Ae,Ce,Ee,Re,Te,Me,Ne,Le,Ie;if(ie.length<2)return NaN;if(!ye)for(le=ue(),Ce={X:function(){return 2*ie[0].X()-ie[1].X()},Y:function(){return 2*ie[0].Y()-ie[1].Y()},Dist:function(Ge){var He=this.X()-Ge.X(),Be=this.Y()-Ge.Y();return te.A.hypot(He,Be)}},Ee={X:function(){return 2*ie[ie.length-1].X()-ie[ie.length-2].X()},Y:function(){return 2*ie[ie.length-1].Y()-ie[ie.length-2].Y()},Dist:function(Ge){var He=this.X()-Ge.X(),Be=this.Y()-Ge.Y();return te.A.hypot(He,Be)}},Ie=(se=[Ce].concat(ie,[Ee])).length,de[fe]=[],be=0;be<Ie-3;be++)oe==="centripetal"?(Me=se[be].Dist(se[be+1]),Ne=se[be+2].Dist(se[be+1]),Le=se[be+3].Dist(se[be+2]),Me=Math.sqrt(Me),Ne=Math.sqrt(Ne),Le=Math.sqrt(Le),Ne<te.A.eps&&(Ne=1),Me<te.A.eps&&(Me=Ne),Le<te.A.eps&&(Le=Ne),Re=(se[be+1][fe]()-se[be][fe]())/Me-(se[be+2][fe]()-se[be][fe]())/(Ne+Me)+(se[be+2][fe]()-se[be+1][fe]())/Ne,Te=(se[be+2][fe]()-se[be+1][fe]())/Ne-(se[be+3][fe]()-se[be+1][fe]())/(Le+Ne)+(se[be+3][fe]()-se[be+2][fe]())/Le,Re*=Ne,Te*=Ne,de[fe][be]=pe._initCubicPoly(se[be+1][fe](),se[be+2][fe](),le*Re,le*Te)):de[fe][be]=pe._initCubicPoly(se[be+1][fe](),se[be+2][fe](),le*(se[be+2][fe]()-se[be][fe]()),le*(se[be+3][fe]()-se[be+1][fe]()));return isNaN(_e)?NaN:(Ie=ie.length,_e<=0?ie[0][fe]():_e>=Ie?ie[Ie-1][fe]():(be=Math.floor(_e))===_e?ie[be][fe]():(_e-=be,(Ae=de[fe][be])===void 0?NaN:((Ae[3]*_e+Ae[2])*_e+Ae[1])*_e+Ae[0]))}},[ae("X"),ae("Y"),0,function(){return ie.length-1}]},CatmullRomSpline:function(ie,re){return this.CardinalSpline(ie,.5,re)},regressionPolynomial:function(ie,re,oe){var se,ae,le,ue,de,pe,fe="";if(Q.A.isPoint(ie)&&Q.A.isFunction(ie.Value))ae=function(){return ie.Value()};else if(Q.A.isFunction(ie))ae=ie;else{if(!Q.A.isNumber(ie))throw new Error("JSXGraph: Can't create regressionPolynomial from degree of type'"+typeof ie+"'.");ae=function(){return ie}}if(arguments.length===3&&Q.A.isArray(re)&&Q.A.isArray(oe))de=0;else if(arguments.length===2&&Q.A.isArray(re)&&re.length>0&&Q.A.isPoint(re[0]))de=1;else{if(!(arguments.length===2&&Q.A.isArray(re)&&re.length>0&&re[0].usrCoords&&re[0].scrCoords))throw new Error("JSXGraph: Can't create regressionPolynomial. Wrong parameters.");de=2}return(pe=function(_e,ye){var be,Ae,Ce,Ee,Re,Te,Me,Ne,Le,Ie=re.length;if(Le=Math.floor(ae()),!ye){if(de===1)for(le=[],ue=[],be=0;be<Ie;be++)le[be]=re[be].X(),ue[be]=re[be].Y();if(de===2)for(le=[],ue=[],be=0;be<Ie;be++)le[be]=re[be].usrCoords[1],ue[be]=re[be].usrCoords[2];if(de===0)for(le=[],ue=[],be=0;be<Ie;be++)Q.A.isFunction(re[be])?le.push(re[be]()):le.push(re[be]),Q.A.isFunction(oe[be])?ue.push(oe[be]()):ue.push(oe[be]);for(Ce=[],Ae=0;Ae<Ie;Ae++)Ce.push([1]);for(be=1;be<=Le;be++)for(Ae=0;Ae<Ie;Ae++)Ce[Ae][be]=Ce[Ae][be-1]*le[Ae];Re=ue,Ee=te.A.transpose(Ce),Te=te.A.matMatMult(Ee,Ce),Me=te.A.matVecMult(Ee,Re),se=te.A.Numerics.Gauss(Te,Me),fe=te.A.Numerics.generatePolynomialTerm(se,Le,"x",3)}for(Ne=se[Le],be=Le-1;be>=0;be--)Ne=Ne*_e+se[be];return Ne}).getTerm=function(){return fe},pe},bezier:function(ie){var re,oe,se=function(ae){return function(le,ue){var de=3*Math.floor(le),pe=le%1,fe=1-pe;return ue||(oe=3*Math.floor((ie.length-1)/3),re=Math.floor(oe/3)),le<0?ie[0][ae]():le>=re?ie[oe][ae]():isNaN(le)?NaN:fe*fe*(fe*ie[de][ae]()+3*pe*ie[de+1][ae]())+(3*fe*ie[de+2][ae]()+pe*ie[de+3][ae]())*pe*pe}};return[se("X"),se("Y"),0,function(){return Math.floor(ie.length/3)}]},bspline:function(ie,re){var oe,se=function(ae){return function(le,ue){var de,pe,fe,_e,ye=ie.length,be=ye-1,Ae=re;if(be<=0)return NaN;if(be+2<=Ae&&(Ae=be+1),le<=0)return ie[0][ae]();if(le>=be-Ae+2)return ie[be][ae]();for(fe=Math.floor(le)+Ae-1,oe=(function(Ce,Ee){var Re,Te=[];for(Re=0;Re<Ce+Ee+1;Re++)Te[Re]=Re<Ee?0:Re<=Ce?Re-Ee+1:Ce-Ee+2;return Te})(be,Ae),_e=(function(Ce,Ee,Re,Te){var Me,Ne,Le,Ie,Ge,He=[];for(Ee[Te]<=Ce&&Ce<Ee[Te+1]?He[Te]=1:He[Te]=0,Me=2;Me<=Re;Me++)for(Ne=Te-Me+1;Ne<=Te;Ne++)Le=Ne<=Te-Me+1||Ne<0?0:He[Ne],Ie=Ne>=Te?0:He[Ne+1],Ge=Ee[Ne+Me-1]-Ee[Ne],He[Ne]=Ge===0?0:(Ce-Ee[Ne])/Ge*Le,(Ge=Ee[Ne+Me]-Ee[Ne+1])!==0&&(He[Ne]+=(Ee[Ne+Me]-Ce)/Ge*Ie);return He})(le,oe,Ae,fe),de=0,pe=fe-Ae+1;pe<=fe;pe++)pe<ye&&pe>=0&&(de+=ie[pe][ae]()*_e[pe]);return de}};return[se("X"),se("Y"),0,function(){return ie.length-1}]},D:function(ie,re){return Q.A.exists(re)?function(oe,se){var ae=1e-5;return(ie.apply(re,[oe+ae,se])-ie.apply(re,[oe-ae,se]))/2e-5}:function(oe,se){var ae=1e-5;return(ie(oe+ae,se)-ie(oe-ae,se))/2e-5}},_riemannValue:function(ie,re,oe,se){var ae,le,ue,de;if(se<0&&(oe!=="trapezoidal"&&(ie+=se),se*=-1,oe==="lower"?oe="upper":oe==="upper"&&(oe="lower")),de=.01*se,oe==="right")ae=re(ie+se);else if(oe==="middle")ae=re(ie+.5*se);else if(oe==="left"||oe==="trapezoidal")ae=re(ie);else if(oe==="lower"){for(ae=re(ie),ue=ie+de;ue<=ie+se;ue+=de)(le=re(ue))<ae&&(ae=le);(le=re(ie+se))<ae&&(ae=le)}else if(oe==="upper"){for(ae=re(ie),ue=ie+de;ue<=ie+se;ue+=de)(le=re(ue))>ae&&(ae=le);(le=re(ie+se))>ae&&(ae=le)}else ae=oe==="random"?re(ie+se*Math.random()):oe==="simpson"?(re(ie)+4*re(ie+.5*se)+re(ie+se))/6:re(ie);return ae},riemann:function(ie,re,oe,se,ae){var le,ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te,Me,Ne=[],Le=[],Ie=se,Ge=0;if(Q.A.isArray(ie)?(Me=ie[0],Te=ie[1]):Te=ie,(re=Math.floor(re))<=0)return[Ne,Le,Ge];for(ue=(ae-se)/re,le=0;le<re;le++){if(oe==="simpson"){for(Ge+=this._riemannValue(Ie,Te,oe,ue)*ue,Ee=.5*ue,ye=Te(Ie),be=Te(Ie+Ee),pe=((Ae=Te(Ie+2*Ee))+ye-2*be)/(Ee*Ee)*.5,fe=(Ae-ye)/(2*Ee),_e=be,de=0;de<30;de++)Ce=de*ue/30-Ee,Ne.push(Ie+Ce+Ee),Le.push(pe*Ce*Ce+fe*Ce+_e);Ie+=ue,Re=Ae}else Re=this._riemannValue(Ie,Te,oe,ue),Ne.push(Ie),Le.push(Re),Ie+=ue,oe==="trapezoidal"?(Ge+=.5*(Re+(Ae=Te(Ie)))*ue,Re=Ae):Ge+=Re*ue,Ne.push(Ie),Le.push(Re);Ne.push(Ie),Le.push(Re)}for(le=0;le<re;le++){if(oe==="simpson"&&Me){for(Ge-=this._riemannValue(Ie,Me,oe,-ue)*ue,Ee=.5*ue,ye=Me(Ie),be=Me(Ie-Ee),pe=((Ae=Me(Ie-2*Ee))+ye-2*be)/(Ee*Ee)*.5,fe=(Ae-ye)/(2*Ee),_e=be,de=0;de<30;de++)Ce=de*ue/30-Ee,Ne.push(Ie-Ce-Ee),Le.push(pe*Ce*Ce+fe*Ce+_e);Ie-=ue,Re=Ae}else Re=Me?this._riemannValue(Ie,Me,oe,-ue):0,Ne.push(Ie),Le.push(Re),Ie-=ue,Me&&(oe==="trapezoidal"?(Ge-=.5*(Re+(Ae=Me(Ie)))*ue,Re=Ae):Ge-=Re*ue);Ne.push(Ie),Le.push(Re),Ne.push(Ie),Le.push(Te(Ie))}return[Ne,Le,Ge]},riemannsum:function(ie,re,oe,se,ae){return Z.A.deprecated("Numerics.riemannsum()","Numerics.riemann()[2]"),this.riemann(ie,re,oe,se,ae)[2]},rungeKutta:function(ie,re,oe,se,ae){var le,ue,de,pe,fe,_e,ye=[],be=[],Ae=(oe[1]-oe[0])/se,Ce=oe[0],Ee=re.length,Re=[],Te=0;for(Q.A.isString(ie)&&(ie=ne[ie]||ne.euler),_e=ie.s,ye=re.slice(),ue=0;ue<=se;ue++){for(Re[Te]=ye.slice(),Te++,pe=[],de=0;de<_e;de++){for(le=0;le<Ee;le++)be[le]=0;for(fe=0;fe<de;fe++)for(le=0;le<Ee;le++)be[le]+=ie.A[de][fe]*Ae*pe[fe][le];for(le=0;le<Ee;le++)be[le]+=ye[le];pe.push(ae(Ce+ie.c[de]*Ae,be))}for(le=0;le<Ee;le++)be[le]=0;for(fe=0;fe<_e;fe++)for(le=0;le<Ee;le++)be[le]+=ie.b[fe]*pe[fe][le];for(le=0;le<Ee;le++)ye[le]=ye[le]+Ae*be[le];Ce+=Ae}return Re},maxIterationsRoot:80,maxIterationsMinimize:500,findBracket:function(ie,re,oe){var se,ae,le,ue,de,pe,fe,_e,ye,be;if(Q.A.isArray(re))return re;for(se=re,le=ie.call(oe,se),be=(ue=[se-.1*(ae=se===0?1:se),se+.1*ae,se-1,se+1,se-.5*ae,se+.5*ae,se-.6*ae,se+.6*ae,se-1*ae,se+1*ae,se-2*ae,se+2*ae,se-5*ae,se+5*ae,se-10*ae,se+10*ae,se-50*ae,se+50*ae,se-100*ae,se+100*ae]).length,ye=0;ye<be&&(de=ue[ye],!(le*(pe=ie.call(oe,de))<=0));ye++);return de<se&&(fe=se,se=de,de=fe,_e=le,le=pe,pe=_e),[se,le,de,pe]},fzero:function(ie,re,oe){var se,ae,le,ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te,Me,Ne=te.A.eps,Le=this.maxIterationsRoot,Ie=0;if(Q.A.isArray(re)){if(re.length<2)throw new Error("JXG.Math.Numerics.fzero: length of array x0 has to be at least two.");se=(_e=this.findDomain(ie,re,oe))[0],ae=_e[1],ue=ie.call(oe,se),de=ie.call(oe,ae)}else se=(fe=this.findBracket(ie,re,oe))[0],ue=fe[1],ae=fe[2],de=fe[3];if(Math.abs(ue)<=Ne)return se;if(Math.abs(de)<=Ne)return ae;if(ue*de>0)return Q.A.isArray(re)?this.fminbr(ie,[se,ae],oe):this.Newton(ie,se,oe);for(le=se,pe=ue;Ie<Le;){if(ye=ae-se,Math.abs(pe)<Math.abs(de)&&(se=ae,ae=le,le=se,ue=de,de=pe,pe=ue),Ee=2*Ne*Math.abs(ae)+.5*Ne,Me=.5*(le-ae),Math.abs(Me)<=Ee||Math.abs(de)<=Ne)return ae;Math.abs(ye)>=Ee&&Math.abs(ue)>Math.abs(de)&&(Ce=le-ae,se===le?(Re=Ce*(be=de/ue),Te=1-be):(Re=(Ae=de/ue)*(Ce*(Te=ue/pe)*(Te-(be=de/pe))-(ae-se)*(be-1)),Te=(Te-1)*(be-1)*(Ae-1)),Re>0?Te=-Te:Re=-Re,Re<.75*Ce*Te-.5*Math.abs(Ee*Te)&&Re<Math.abs(ye*Te*.5)&&(Me=Re/Te)),Math.abs(Me)<Ee&&(Me=Me>0?Ee:-Ee),se=ae,ue=de,ae+=Me,((de=ie.call(oe,ae))>0&&pe>0||de<0&&pe<0)&&(le=se,pe=ue),Ie++}return ae},chandrupatla:function(ie,re,oe){var se,ae,le,ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te,Me,Ne,Le,Ie,Ge,He=0,Be=this.maxIterationsRoot,ze=1+.001*Math.random(),Fe=.5*ze,$e=te.A.eps;if(Q.A.isArray(re)){if(re.length<2)throw new Error("JXG.Math.Numerics.fzero: length of array x0 has to be at least two.");se=re[0],le=ie.call(oe,se),ae=re[1],ue=ie.call(oe,ae)}else se=(de=this.findBracket(ie,re,oe))[0],le=de[1],ae=de[2],ue=de[3];if(le*ue>0)return Q.A.isArray(re)?this.fminbr(ie,[se,ae],oe):this.Newton(ie,se,oe);pe=se,fe=ae,be=le,Ae=ue;do{if(ye=pe+Fe*(fe-pe),Ee=ie.call(oe,ye),Math.sign(Ee)===Math.sign(be)?(_e=pe,pe=ye,Ce=be,be=Ee):(_e=fe,fe=pe,Ce=Ae,Ae=be),Re=pe=ye,Te=be=Ee,Math.abs(Ae)<Math.abs(be)&&(Re=fe,Te=Ae),(Me=(2*$e*Math.abs(Re)+5e-6)/Math.abs(fe-pe))>.5||Te===0)break;Ne=(pe-fe)/(_e-fe),Le=(be-Ae)/(Ce-Ae),Ie=1-Math.sqrt(1-Ne),Ge=Math.sqrt(Ne),(Fe=Ie<Le&&Le<Ge?be/(Ae-be)*(Ce/(Ae-Ce))+be/(Ce-be)*(Ae/(Ce-Ae))*((_e-pe)/(fe-pe)):.5*ze)<Me&&(Fe=Me),Fe>1-Me&&(Fe=1-Me),He++}while(He<=Be);return Re},findDomain:function(ie,re,oe,se){var ae,le,ue,de,pe,fe,_e=.3819660112501453;if(se===void 0&&(se=!0),!Q.A.isArray(re)||re.length<2)throw new Error("JXG.Math.Numerics.findDomain: length of array x0 has to be at least two.");if(ae=(pe=re.slice())[0],le=pe[1],de=ie.call(oe,ae),isNaN(de)){for(fe=0;le-ae>.001&&fe<20;)ue=(le-ae)*_e+ae,de=ie.call(oe,ue),isNaN(de)?ae=ue:le=ue,fe++;pe[0]=se?ae:le}if(ae=pe[0],le=pe[1],de=ie.call(oe,le),isNaN(de)){for(fe=0;le-ae>.001&&fe<20;)ue=le-(le-ae)*_e,de=ie.call(oe,ue),isNaN(de)?le=ue:ae=ue,fe++;pe[1]=se?le:ae}return pe},fminbr:function(ie,re,oe){var se,ae,le,ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te,Me,Ne,Le=.5*(3-Math.sqrt(5)),Ie=te.A.eps,Ge=te.A.eps,He=this.maxIterationsMinimize,Be=0;if(!Q.A.isArray(re)||re.length<2)throw new Error("JXG.Math.Numerics.fminbr: length of array x0 has to be at least two.");for(le=ue=(se=(ye=this.findDomain(ie,re,oe))[0])+Le*((ae=ye[1])-se),de=ue,pe=fe=ie.call(oe,ue),_e=fe;Be<He;){if(be=ae-se,Ae=.5*(se+ae),Ce=Ge*Math.abs(le)+Ie/3,Math.abs(le-Ae)+.5*be<=2*Ce)return le;Ee=Le*(le<Ae?ae-le:se-le),Math.abs(le-de)>=Ce&&(Re=(le-ue)*(Te=(le-ue)*(pe-_e))-(le-de)*(Me=(le-de)*(pe-fe)),(Te=2*(Te-Me))>0?Re=-Re:Te=-Te,Math.abs(Re)<Math.abs(Ee*Te)&&Re>Te*(se-le+2*Ce)&&Re<Te*(ae-le-2*Ce)&&(Ee=Re/Te)),Math.abs(Ee)<Ce&&(Ee=Ee>0?Ce:-Ce),Me=le+Ee,(Ne=ie.call(oe,Me))<=pe?(Me<le?ae=le:se=le,ue=de,de=le,le=Me,fe=_e,_e=pe,pe=Ne):(Me<le?se=Me:ae=Me,Ne<=_e||de===le?(ue=de,de=Me,fe=_e,_e=Ne):(Ne<=fe||ue===le||ue===de)&&(ue=Me,fe=Ne)),Be+=1}return le},glomin:function(ie,re){var oe,se,ae,le,ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te,Me,Ne,Le,Ie,Ge,He,Be,ze,Fe,$e,Xe,je,qe=1e7,Ze=te.A.eps,st=te.A.eps*te.A.eps,St=te.A.eps*te.A.eps*te.A.eps;if(Fe=re[0],$e=re[1],Xe=ie(Fe)<ie($e)?Fe:$e,je=oe=$e,se=Fe,Ge=Me=ie($e),Me<(Te=Le=ie(Fe))?Te=Me:je=Fe,$e<=Fe)return Te;for(_e=.5*(1+16*St)*qe,fe=3,le=se-(Re=Xe<=Fe||$e<=Xe?.5*(Fe+$e):Xe),pe=.8181818181818182,(Ne=ie(Re))<Te&&(je=Re,Te=Ne);;){if(de=Re-oe,ze=$e-se,ye=Ce=(ue=se-oe)*ue*(He=Le-Ne)-le*le*(Be=Le-Me),be=Ae=2*(le*Be-ue*He),fe<1e6||Le<=Te)for(;be*(Ce*(Ge-Le)+ze*be*(Le-Te+Ze))<ze*_e*Ce*(ze*be-Ce)&&(Ie=ie(ae=se+Ce/be))<Te&&(je=ae,Te=Ie),be=1,!(ze<=(Ce=1e-5*($e-Fe)*(fe=1611*fe%1048576))););else for(be=1,Ce=1e-5*($e-Fe)*(fe=1611*fe%1048576);Ce<ze;)be*(Ce*(Ge-Le)+ze*be*(Le-Te+Ze))<ze*_e*Ce*(ze*be-Ce)&&(Ie=ie(ae=se+Ce/be))<Te&&(je=ae,Te=Ie),be=1,Ce=1e-5*($e-Fe)*(fe=1611*fe%1048576);for(ye=(pe=.5*(1+pe))*(ye+2*(Ce=_e*le*ue*de)*(Ee=Math.sqrt((Le-Te+Ze)/_e))),Ce=(Ce=-.5*(le+(He+2.01*st)/(le*_e)))<Ee||le<0?se+Ee:se+Ce,ae=0<ye*(be+=.5*Ae)?se+ye/be:Ce;$e<=(ae=Math.max(ae,Ce))?(ae=$e,Ie=Ge):Ie=ie(ae),Ie<Te&&(je=ae,Te=Ie),le=ae-se,!(ae<=Ce)&&(ye=2*(Le-Ie)/(qe*le),!((1+9*St)*le<=Math.abs(ye)))&&!(.5*_e*(le*le+ye*ye)<=Le-Te+(Ie-Te)+2*Ze);)ae=.5*(se+ae),pe*=.9;if($e<=ae)break;oe=Re,Re=se,se=ae,Me=Ne,Ne=Le,Le=Ie}return[je,Te]},polzeros:function(ie,re,oe,se,ae){var le,ue,de,pe=[],fe=[],_e=[],ye=function(Ce,Ee,Re){var Te,Me,Ne=Ce.length-1;if(Re=Re||!1)for(Me=Z.A.C.mult(Ne,Ce[Ne]),Te=Ne-1;Te>0;Te--)Me.mult(Ee),Me.add(Z.A.C.mult(Ce[Te],Te));else for(Me=Z.A.C.copy(Ce[Ne]),Te=Ne-1;Te>=0;Te--)Me.mult(Ee),Me.add(Ce[Te]);return Me},be=function(Ce,Ee,Re){var Te,Me,Ne=Ce.length-1;if(Re=Re||!1)for(Me=Z.A.C.mult(Ne,Ce[0]),Te=Ne-1;Te>0;Te--)Me.mult(Ee),Me.add(Z.A.C.mult(Ce[Ne-Te],Te));else for(Me=Z.A.C.copy(Ce[0]),Te=Ne-1;Te>=0;Te--)Me.mult(Ee),Me.add(Ce[Ne-Te]);return Me},Ae=function(Ce,Ee){var Re,Te,Me=Ce.length-1;for(Te=Ce[Me],Re=Me-1;Re>=0;Re--)Te=Te*Ee+Ce[Re];return Te};for(oe=oe||Number.EPSILON,se=se||30,ue=ie.length,Z.A.isNumber(re)&&re>=0&&re<ue-1&&(ue=re+1),le=0;le<ue;le++)pe.push(new Z.A.Complex(ie[le]));for(le=0;le<ue;le++)if(pe[le].real!==0||pe[le].imaginary!==0){de=le;break}for(le=0;le<de;le++)fe.push(new Z.A.Complex(0));for(le=(ue=(pe=pe.slice(de)).length)-1;le>=0&&pe[le].real===0&&pe[le].imaginary===0;le--)pe.pop();if((ue=pe.length)===0)return[];if(ae)for(le=0;le<ue-1;le++)_e.push(new Z.A.Complex(ae[le]));else _e=(function(Ce){var Ee,Re,Te,Me,Ne=Ce.length-1,Le=2*Math.PI/Ne,Ie=Math.PI/Ne*.5,Ge=[];for((Te=Z.A.C.mult(-1,Ce[Ne-1])).div(Z.A.C.mult(Ne,Ce[Ne])),Me=Z.A.C.div(ye(Ce,Te),Ce[Ne]),(Re=Math.pow(Z.A.C.abs(Me),1/Ne))===0&&(Re=1),Ee=0;Ee<Ne;Ee++)Ce=new Z.A.Complex(Re*Math.cos(Le*Ee+Ie),Re*Math.sin(Le*Ee+Ie)),Ge[Ee]=Z.A.C.add(Te,Ce);return Ge})(pe);return(function(Ce,Ee,Re,Te){var Me,Ne,Le,Ie,Ge,He,Be,ze,Fe,$e=[],Xe=[],je=0,qe=Te.length;for(Ne=0;Ne<qe;Ne++)$e.push(!1);for(Ne=0;Ne<Ce.length;Ne++)Xe.push(Z.A.C.abs(Ce[Ne])*(4*Ne+1));for(Me=0;Me<Re&&je<qe;Me++)for(Ne=0;Ne<qe;Ne++)if(!$e[Ne])if(He=ye(Ce,Te[Ne]),Ge=Z.A.C.abs(Te[Ne]),Z.A.C.abs(He)<Ee*Ae(Xe,Ge)){if($e[Ne]=!0,++je===qe)break}else{for(Ge>1?(Ie=Z.A.C.div(1,Te[Ne]),(Fe=be(Ce,Ie,!0)).div(be(Ce,Ie)),Fe.mult(Ie),He=Z.A.C.sub(qe,Fe),He=Z.A.C.div(Te[Ne],He)):He.div(ye(Ce,Te[Ne],!0)),Be=new Z.A.Complex(0),Le=0;Le<qe;Le++)Le!==Ne&&(ze=Z.A.C.sub(Te[Ne],Te[Le]),ze=Z.A.C.div(1,ze),Be.add(ze));Be.mult(He),Be=Z.A.C.sub(1,Be),He.div(Be),Te[Ne].sub(He)}return Me})(pe,oe,se,_e),(_e=fe.concat(_e)).sort(function(Ce,Ee){return Ce.real<Ee.real?-1:Ce.real>Ee.real?1:0}),_e},RamerDouglasPeucker:function(ie,re){var oe,se,ae,le=[],ue=[],de=function(pe,fe,_e,ye,be){var Ae=(function(Ee,Re,Te){var Me,Ne,Le,Ie,Ge,He,Be,ze,Fe,$e,Xe,je=te.A.eps*te.A.eps,qe=1e4,Ze=0,st=Re;if(Te-Re<2)return[-1,0];if(Le=Ee[Re].scrCoords,Ie=Ee[Te].scrCoords,isNaN(Le[1])||isNaN(Le[2]))return[NaN,Re];if(isNaN(Ie[1])||isNaN(Ie[2]))return[NaN,Te];for(Ne=Re+1;Ne<Te;Ne++){if(Ge=Ee[Ne].scrCoords,isNaN(Ge[1])||isNaN(Ge[2]))return[NaN,Ne];He=(He=(He=Ge[1]-Le[1])===1/0?qe:He)===-1/0?-qe:He,Be=(Be=(Be=Ge[2]-Le[2])===1/0?qe:Be)===-1/0?-qe:Be,($e=(ze=(ze=(ze=Ie[1]-Le[1])===1/0?qe:ze)===-1/0?-qe:ze)*ze+(Fe=(Fe=(Fe=Ie[2]-Le[2])===1/0?qe:Fe)===-1/0?-qe:Fe)*Fe)>je?((Xe=(He*ze+Be*Fe)/$e)<0?Xe=0:Xe>1&&(Xe=1),Me=(He-=Xe*ze)*He+(Be-=Xe*Fe)*Be):(Xe=0,Me=He*He+Be*Be),Me>Ze&&(Ze=Me,st=Ne)}return[Math.sqrt(Ze),st]})(pe,fe,_e),Ce=Ae[1];if(isNaN(Ae[0])){de(pe,fe,Ce-1,ye,be),be.push(pe[Ce]);do++Ce;while(Ce<=_e&&isNaN(pe[Ce].scrCoords[1]+pe[Ce].scrCoords[2]));Ce<=_e&&be.push(pe[Ce]),de(pe,Ce+1,_e,ye,be)}else Ae[0]>ye?(de(pe,fe,Ce,ye,be),de(pe,Ce,_e,ye,be)):be.push(pe[_e])};for(ae=ie.length,oe=0;;){for(;oe<ae&&isNaN(ie[oe].scrCoords[1]+ie[oe].scrCoords[2]);)oe+=1;for(se=oe+1;se<ae&&!isNaN(ie[se].scrCoords[1]+ie[se].scrCoords[2]);)se+=1;if(se--,oe<ae&&se>oe&&((ue=[])[0]=ie[oe],de(ie,oe,se,re,ue),le=le.concat(ue)),oe>=ae)break;se<ae-1&&le.push(ie[se+1]),oe=se+1}return le},RamerDouglasPeuker:function(ie,re){return Z.A.deprecated("Numerics.RamerDouglasPeuker()","Numerics.RamerDouglasPeucker()"),this.RamerDouglasPeucker(ie,re)},Visvalingam:function(ie,re){var oe,se,ae,le,ue,de,pe,fe,_e,ye=[],be=[],Ae=[];if((se=ie.length)<=2)return ie;for(ye[0]={used:!0,lft:null,node:null},ue=0,oe=1;oe<se-1;oe++)ae=Math.abs(Z.A.Math.Numerics.det([ie[oe-1].usrCoords,ie[oe].usrCoords,ie[oe+1].usrCoords])),isNaN(ae)||(_e={v:ae,idx:oe},be.push(_e),ye[oe]={used:!0,lft:ue,node:_e},ye[ue].rt=oe,ue=oe);for(ye[se-1]={used:!0,rt:null,lft:ue,node:null},ye[ue].rt=se-1,le=-1/0;be.length>re;)be.sort(function(Ce,Ee){return Ee.v-Ce.v}),ye[oe=be.pop().idx].used=!1,le=ye[oe].node.v,ue=ye[oe].lft,de=ye[oe].rt,ye[ue].rt=de,ye[de].lft=ue,(pe=ye[ue].lft)!==null&&(ae=Math.abs(Z.A.Math.Numerics.det([ie[pe].usrCoords,ie[ue].usrCoords,ie[de].usrCoords])),ye[ue].node.v=ae>=le?ae:le),(fe=ye[de].rt)!==null&&(ae=Math.abs(Z.A.Math.Numerics.det([ie[ue].usrCoords,ie[de].usrCoords,ie[fe].usrCoords])),ye[de].node.v=ae>=le?ae:le);Ae=[ie[oe=0]];do oe=ye[oe].rt,Ae.push(ie[oe]);while(ye[oe].rt!==null);return Ae}},_.A=te.A.Numerics},188:function(G,_,J){var Z=J(443),Q=J(561),ee=J(477);Z.A.extend(Z.A,{isBoard:function(te){return te!==null&&typeof te=="object"&&this.isNumber(te.BOARD_MODE_NONE)&&this.isObject(te.objects)&&this.isObject(te.jc)&&this.isFunction(te.update)&&!!te.containerObj&&this.isString(te.id)},isId:function(te,ne){return typeof ne=="string"&&!!te.objects[ne]},isName:function(te,ne){return typeof ne=="string"&&!!te.elementsByName[ne]},isGroup:function(te,ne){return typeof ne=="string"&&!!te.groups[ne]},isString:function(te){return typeof te=="string"},isNumber:function(te,ne,ie){var re=typeof te=="number"||Object.prototype.toString.call(te)==="[Object Number]";return ie=ie===void 0||ie,(ne=ne||!1)&&(re=re||""+parseFloat(te)===te),ie||(re=re&&!isNaN(te)),re},isFunction:function(te){return typeof te=="function"},isArray:function(te){return Array.isArray?Array.isArray(te):te!==null&&typeof te=="object"&&typeof te.splice=="function"&&typeof te.join=="function"},isObject:function(te){return typeof te=="object"&&!this.isArray(te)},isDocumentOrFragment:function(te){return this.isObject(te)&&(te.nodeType===9||te.nodeType===11)},isPoint:function(te){return!(te===null||typeof te!="object"||!this.exists(te.elementClass))&&te.elementClass===Q.A.OBJECT_CLASS_POINT},isPoint3D:function(te){return!(te===null||typeof te!="object"||!this.exists(te.type))&&te.type===Q.A.OBJECT_TYPE_POINT3D},isPointType:function(te,ne){var ie,re;return!!this.isArray(ne)||!!(this.isFunction(ne)&&(ie=ne(),this.isArray(ie)&&ie.length>1))||(re=te.select(ne),this.isPoint(re))},isPointType3D:function(te,ne){var ie,re;return!!(this.isArray(ne)&&ne.length>=3)||!!(this.isFunction(ne)&&(ie=ne(),this.isArray(ie)&&ie.length>=3))||(re=te.select(ne),this.isPoint3D(re))},isTransformationOrArray:function(te){if(te!==null){if(this.isArray(te)&&te.length>0)return this.isTransformationOrArray(te[0]);if(typeof te=="object")return te.type===Q.A.OBJECT_TYPE_TRANSFORMATION}return!1},isEmpty:function(te){return Object.keys(te).length===0},exists:function(te,ne){var ie=!(te==null||te===null);return(ne=ne||!1)?ie&&te!=="":ie},def:function(te,ne){return this.exists(te)?te:ne},str2Bool:function(te){return!this.exists(te)||(typeof te=="boolean"?te:!!this.isString(te)&&te.toLowerCase()==="true")},cssParse:function(te){var ne=te;return this.isString(ne)?(ne='{"'+(ne=(ne=(ne=(ne=ne.replace(/\s*;\s*$/g,"")).replace(/\s*;\s*/g,'","')).replace(/\s*:\s*/g,'":"')).trim())+'"}',JSON.parse(ne)):{}},cssStringify:function(te){var ne,ie,re="";if(!this.isObject(te))return"";for(ne in te)te.hasOwnProperty(ne)&&(ie=te[ne],(this.isString(ie)||this.isNumber(ie))&&(re+=ne+":"+ie+"; "));return re=re.trim()},createEvalFunction:function(te,ne,ie){var re,oe,se,ae=[],le={};for(oe=0;oe<ie;oe++)for(se in ae[oe]=this.createFunction(ne[oe],te),ae[oe].deps)le[se]=ae[oe].deps;return(re=function(ue){return ae[ue]()}).deps=le,re},createFunction:function(te,ne,ie,re){var oe=null;return this.isString(te)?oe=ne.jc.snippet(te,!0,ie,!1):this.isFunction(te)?(oe=te).deps=this.isObject(te.deps)?te.deps:{}:(this.isNumber(te)||this.isArray(te))&&((oe=function(){return te}).deps={}),oe!==null&&(oe.origin=te),oe},providePoints:function(te,ne,ie,re,oe){var se,ae,le,ue,de,pe=0,fe=[];for(this.isArray(ne)||(ne=[ne]),le=ne.length,this.exists(oe)&&(pe=oe.length),pe===0&&(ue=this.copyAttributes(ie,te.options,re)),se=0;se<le;++se)if(pe>0&&(ae=Math.min(se,pe-1),ue=this.copyAttributes(ie,te.options,re,oe[ae].toLowerCase())),this.isArray(ne[se])&&ne[se].length>1?(fe.push(te.create("point",ne[se],ue)),fe[fe.length-1]._is_new=!0):this.isFunction(ne[se])?(de=ne[se](),this.isArray(de)&&de.length>1&&(fe.push(te.create("point",[ne[se]],ue)),fe[fe.length-1]._is_new=!0)):fe.push(te.select(ne[se])),!this.isPoint(fe[se]))return!1;return fe},providePoints3D:function(te,ne,ie,re,oe){var se,ae,le,ue,de,pe=0,fe=[];for(this.isArray(ne)||(ne=[ne]),le=ne.length,this.exists(oe)&&(pe=oe.length),pe===0&&(ue=this.copyAttributes(ie,te.board.options,re)),se=0;se<le;++se){if(pe>0&&(ae=Math.min(se,pe-1),ue=this.copyAttributes(ie,te.board.options,re,oe[ae])),this.isArray(ne[se])&&ne[se].length>0&&ne[se].every(_e=>this.isArray(_e)&&this.isNumber(_e[0])))for(ae=0;ae<ne[se].length;ae++)fe.push(te.create("point3d",ne[se][ae],ue)),fe[fe.length-1]._is_new=!0;else this.isArray(ne[se])&&ne[se].every(_e=>this.isNumber(_e)||this.isFunction(_e))?(fe.push(te.create("point3d",ne[se],ue)),fe[fe.length-1]._is_new=!0):this.isPoint3D(ne[se])?fe.push(ne[se]):this.isFunction(ne[se])?(de=ne[se](),this.isArray(de)&&de.length>1&&(fe.push(te.create("point3d",[ne[se]],ue)),fe[fe.length-1]._is_new=!0)):fe.push(te.select(ne[se]));if(!this.isPoint3D(fe[se]))return!1}return fe},bind:function(te,ne){return function(){return te.apply(ne,arguments)}},evaluate:function(te){return this.isFunction(te)?te():te},indexOf:function(te,ne,ie){var re,oe=this.exists(ie);if(Array.indexOf&&!oe)return te.indexOf(ne);for(re=0;re<te.length;re++)if(oe&&te[re][ie]===ne||!oe&&te[re]===ne)return re;return-1},eliminateDuplicates:function(te){var ne,ie=te.length,re=[],oe={};for(ne=0;ne<ie;ne++)oe[te[ne]]=0;for(ne in oe)oe.hasOwnProperty(ne)&&re.push(ne);return re},swap:function(te,ne,ie){var re;return re=te[ne],te[ne]=te[ie],te[ie]=re,te},uniqueArray:function(te){var ne,ie,re,oe=[];if(te.length===0)return[];for(ne=0;ne<te.length;ne++)if(re=this.isArray(te[ne]),this.exists(te[ne]))for(ie=ne+1;ie<te.length;ie++)re&&Z.A.cmpArrays(te[ne],te[ie])?te[ne]=[]:re||te[ne]!==te[ie]||(te[ne]="");else te[ne]="";for(ie=0,ne=0;ne<te.length;ne++)(re=this.isArray(te[ne]))||te[ne]===""?re&&te[ne].length!==0&&(oe[ie]=te[ne].slice(0),ie++):(oe[ie]=te[ne],ie++);return te=oe,oe},toUniqueArrayFloat:function(te,ne){var ie,re;for((ie=te.slice()).sort(function(oe,se){return oe-se}),re=ie.length-1;re>0;re--)Math.abs(ie[re]-ie[re-1])<ne&&ie.splice(re,1);return ie},isInArray:function(te,ne){return Z.A.indexOf(te,ne)>-1},coordsArrayToMatrix:function(te,ne){var ie,re=[],oe=[];for(ie=0;ie<te.length;ie++)ne?(re.push(te[ie].usrCoords[1]),oe.push(te[ie].usrCoords[2])):oe.push([te[ie].usrCoords[1],te[ie].usrCoords[2]]);return ne&&(oe=[re,oe]),oe},cmpArrays:function(te,ne){var ie;if(te===ne)return!0;if(te.length!==ne.length)return!1;for(ie=0;ie<te.length;ie++)if(this.isArray(te[ie])&&this.isArray(ne[ie])){if(!this.cmpArrays(te[ie],ne[ie]))return!1}else if(te[ie]!==ne[ie])return!1;return!0},removeElementFromArray:function(te,ne){var ie;for(ie=0;ie<te.length;ie++)if(te[ie]===ne)return te.splice(ie,1),te;return te},trunc:function(te,ne){return ne=Z.A.def(ne,0),this.toFixed(te,ne)},_decimalAdjust:function(te,ne,ie){return ie===void 0||+ie==0?Math[te](ne):(ne=+ne,ie=+ie,isNaN(ne)||typeof ie!="number"||ie%1!=0?NaN:(ne=ne.toString().split("e"),+((ne=(ne=Math[te](+(ne[0]+"e"+(ne[1]?+ne[1]-ie:-ie)))).toString().split("e"))[0]+"e"+(ne[1]?+ne[1]+ie:ie))))},_round10:function(te,ne){return this._decimalAdjust("round",te,ne)},_floor10:function(te,ne){return this._decimalAdjust("floor",te,ne)},_ceil10:function(te,ne){return this._decimalAdjust("ceil",te,ne)},toFixed:function(te,ne){return this._round10(te,-ne).toFixed(ne)},autoDigits:function(te){var ne=Math.abs(te);return ne>=.1?this.toFixed(te,2):ne>=.01?this.toFixed(te,4):ne>=1e-4?this.toFixed(te,6):te},parseNumber:function(te,ne,ie){var re;return this.isString(te)&&te.indexOf("%")>-1?(re=te.replace(/\s+%\s+/,""),parseFloat(re)*ne*.01):this.isString(te)&&te.indexOf("fr")>-1?(re=te.replace(/\s+fr\s+/,""),parseFloat(re)*ne):this.isString(te)&&te.indexOf("px")>-1?(re=te.replace(/\s+px\s+/,""),re=parseFloat(re),this.isFunction(ie)?ie(re):this.isNumber(ie)?re*ie:re):parseFloat(te)},parsePosition:function(te){var ne,ie,re="",oe="";if((te=te.trim())!=="")for(ne=te.split(/[ ,]+/),ie=0;ie<ne.length;ie++)ne[ie]==="left"||ne[ie]==="right"?re=ne[ie]:oe=ne[ie];return{side:re,pos:oe}},keys:function(te,ne){var ie,re=[];for(ie in te)ne?te.hasOwnProperty(ie)&&re.push(ie):re.push(ie);return re},clone:function(te){var ne={};return ne.prototype=te,ne},cloneAndCopy:function(te,ne){var ie,re=function(){};for(ie in re.prototype=te,ne)re[ie]=ne[ie];return re},merge:function(te,ne){var ie,re,oe,se;for(ie in ne)if(ne.hasOwnProperty(ie))if(oe=ne[ie],this.isArray(oe))for(te[ie]||(te[ie]=[]),re=0;re<oe.length;re++)se=ne[ie][re],typeof ne[ie][re]=="object"?te[ie][re]=this.merge(te[ie][re],se):te[ie][re]=ne[ie][re];else typeof oe=="object"?(te[ie]||(te[ie]={}),te[ie]=this.merge(te[ie],oe)):(typeof te=="boolean"&&(te={}),te[ie]=oe);return te},deepCopy:function(te,ne,ie){var re,oe,se,ae;if(ie=ie||!1,typeof te!="object"||te===null)return te;if(this.isArray(te))for(re=[],oe=0;oe<te.length;oe++)(se=te[oe])!==null&&typeof se=="object"?this.exists(se.board)?re[oe]=se.id:re[oe]=this.deepCopy(se,{},ie):re[oe]=se;else{for(oe in re={},te)te.hasOwnProperty(oe)&&(ae=ie?oe.toLowerCase():oe,(se=te[oe])!==null&&typeof se=="object"?this.exists(se.board)?re[ae]=se.id:re[ae]=this.deepCopy(se,{},ie):re[ae]=se);for(oe in ne)ne.hasOwnProperty(oe)&&(ae=ie?oe.toLowerCase():oe,(se=ne[oe])!==null&&typeof se=="object"?this.isArray(se)||!this.exists(re[ae])?re[ae]=this.deepCopy(se,{},ie):re[ae]=this.deepCopy(re[ae],se,ie):re[ae]=se)}return re},mergeAttr:function(te,ne,ie,re){var oe,se,ae;for(oe in ie=ie||!0,re=re||!1,ne)ne.hasOwnProperty(oe)&&((se=ie?oe.toLowerCase():oe)!==oe&&te.hasOwnProperty(oe)&&(te.hasOwnProperty(se)?this.mergeAttr(te[se],te[oe],ie):te[se]=te[oe],delete te[oe]),ae=ne[oe],!this.isObject(ae)||ae===null||this.isDocumentOrFragment(ae)||this.exists(ae.board)||typeof ae.valueOf()=="string"?re&&!this.exists(ae)||(te[se]=ae):(te[se]!==void 0&&te[se]!==null&&this.isObject(te[se])||(te[se]={}),this.mergeAttr(te[se],ae,ie)))},keysToLowerCase:function(te){var ne,ie,re=Object.keys(te),oe=re.length,se={};if(typeof te!="object")return te;for(;oe--;)ne=re[oe],te.hasOwnProperty(ne)&&(typeof(ie=te[ne])!="object"||ie===null||this.isArray(ie)||this.exists(ie.nodeType)||this.exists(ie.board)?se[ne.toLowerCase()]=ie:se[ne.toLowerCase()]=this.keysToLowerCase(ie));return se},copyAttributes:function(te,ne,ie){var re,oe,se,ae,le,ue;for(re=(ae=arguments.length)<3||{circle:1,curve:1,foreignobject:1,image:1,line:1,point:1,polygon:1,text:1,ticks:1,integral:1}[ie]?Z.A.deepCopy(ne.elements,null,!0):{},ae<4&&this.exists(ie)&&this.exists(ne.layer[ie])&&(re.layer=ne.layer[ie]),le=ne,ue=!0,se=2;se<ae;se++){if(oe=arguments[se],!this.exists(le[oe])){ue=!1;break}le=le[oe]}for(ue&&(re=Z.A.deepCopy(re,le,!0)),le=typeof te=="object"?this.keysToLowerCase(te):{},ue=!0,se=3;se<ae;se++){if(oe=arguments[se].toLowerCase(),!this.exists(le[oe])){ue=!1;break}le=le[oe]}if(ue&&this.mergeAttr(re,le,!0),arguments[2]==="board")return re;for(le=ne,ue=!0,se=2;se<ae;se++){if(oe=arguments[se],!this.exists(le[oe])){ue=!1;break}le=le[oe]}return ue&&this.exists(le.label)&&(re.label=Z.A.deepCopy(le.label,re.label,!0)),re.label=Z.A.deepCopy(ne.label,re.label,!0),re},copyPrototypeMethods:function(te,ne,ie){var re;for(re in te.prototype[ie]=ne.prototype.constructor,ne.prototype)ne.prototype.hasOwnProperty(re)&&(te.prototype[re]=ne.prototype[re])},getCloneObject:function(te){var ne,ie,re={};for(ie in re.id=te.id+"T"+te.numTraces,te.numTraces+=1,re.coords=te.coords,ne=this.deepCopy(te.visProp,te.visProp.traceattributes,!0),re.visProp={},ne)ne.hasOwnProperty(ie)&&ie.indexOf("aria")!==0&&ie.indexOf("highlight")!==0&&ie.indexOf("attractor")!==0&&ie!=="label"&&ie!=="needsregularupdate"&&ie!=="infoboxdigits"&&(re.visProp[ie]=te.eval(ne[ie]));return re.evalVisProp=function(oe){return re.visProp[oe]},re.eval=function(oe){return oe},re.visProp.layer=te.board.options.layer.trace,re.visProp.tabindex=null,re.visProp.highlight=!1,re.board=te.board,re.elementClass=te.elementClass,this.clearVisPropOld(re),re.visPropCalc={visible:te.evalVisProp("visible")},re},toJSON:function(te,ne){var ie,re,oe,se;if(ne=Z.A.def(ne,!1),JSON!==void 0&&JSON.stringify&&!ne)try{return JSON.stringify(te)}catch{}switch(typeof te){case"object":if(te){if(ie=[],this.isArray(te)){for(oe=0;oe<te.length;oe++)ie.push(Z.A.toJSON(te[oe],ne));return"["+ie.join(",")+"]"}for(re in te)if(te.hasOwnProperty(re)){try{se=Z.A.toJSON(te[re],ne)}catch{se=""}ne?ie.push(re+":"+se):ie.push('"'+re+'":'+se)}return"{"+ie.join(",")+"} "}return"null";case"string":return"'"+te.replace(/(["'])/g,"\\$1")+"'";case"number":case"boolean":return te.toString()}return"0"},clearVisPropOld:function(te){return te.visPropOld={cssclass:"",cssdefaultstyle:"",cssstyle:"",fillcolor:"",fillopacity:"",firstarrow:!1,fontsize:-1,lastarrow:!1,left:-1e5,linecap:"",shadow:!1,strokecolor:"",strokeopacity:"",strokewidth:"",tabindex:-1e5,transitionduration:0,top:-1e5,visible:null},te},isInObject:function(te,ne){var ie;for(ie in te)if(te.hasOwnProperty(ie)&&te[ie]===ne)return!0;return!1},escapeHTML:function(te){return te.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},unescapeHTML:function(te){return te.replace(/<\/?[^>]+>/gi,"").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")},capitalize:function(te){return te.charAt(0).toUpperCase()+te.substring(1).toLowerCase()},trimNumber:function(te){return(te=(te=te.replace(/^0+/,"")).replace(/0+$/,""))[te.length-1]!=="."&&te[te.length-1]!==","||(te=te.slice(0,-1)),te[0]!=="."&&te[0]!==","||(te="0"+te),te},filterElements:function(te,ne){var ie,re,oe,se,ae,le,ue,de=te.length,pe=[];if(this.exists(ne)&&typeof ne!="function"&&typeof ne!="object")return pe;for(ie=0;ie<de;ie++){if(ue=!0,oe=te[ie],typeof ne=="object"){for(re in ne)if(ne.hasOwnProperty(re)&&(se=re.toLowerCase(),ae=typeof oe[re]=="function"?oe[re]():oe[re],le=oe.visProp&&typeof oe.visProp[se]=="function"?oe.visProp[se]():oe.visProp&&oe.visProp[se],!(ue=typeof ne[re]=="function"?ne[re](ae)||ne[re](le):ae===ne[re]||le===ne[re])))break}else typeof ne=="function"&&(ue=ne(oe));ue&&pe.push(oe)}return pe},trim:function(te){return te.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},toFraction:function(te,ne,ie){var re=ee.A.decToFraction(te,ie),oe="";return re[1]===0&&re[2]===0?oe+="0":(re[0]<0&&(oe+="-"),re[2]===0?oe+=re[1]:re[2]===1&&re[3]===1||(re[1]!==0&&(oe+=re[1]+" "),oe+=ne===!0?"\\frac{"+re[2]+"}{"+re[3]+"}":re[2]+"/"+re[3])),oe},concat:function(te,ne){var ie,re=ne.length;for(ie=0;ie<re;ie++)te.push(ne[ie]);return te},sanitizeHTML:function(te,ne){return typeof html_sanitize=="function"&&ne?html_sanitize(te,function(){},function(ie){return ie}):(te&&typeof te=="string"&&(te=te.replace(/</g,"&lt;").replace(/>/g,"&gt;")),te)},evalSlider:function(te){return te&&te.type===Q.A.OBJECT_TYPE_GLIDER&&typeof te.Value=="function"?te.Value():te},stack2jsxgraph:function(te){var ne;return(ne=te.replace(/%pi/g,"PI").replace(/%e/g,"EULER").replace(/%phi/g,"1.618033988749895").replace(/%gamma/g,"0.5772156649015329").trim())[0]==="["&&ne[ne.length-1]==="]"&&(ne=ne.slice(1,-1).split(/\s*,\s*/)),ne}}),_.A=Z.A},378:function(G,_,J){var Z=J(443),Q=J(561),ee=J(477),te=J(873),ne=J(188);Z.A.Options={jc:{enabled:!0,compile:!0},board:{animationDelay:35,axis:!1,boundingBox:[-5,5,5,-5],browserPan:!1,clickDelay:600,dblClickSuppressClick:!1,defaultAxes:{x:{name:"x",fixed:!0,needsRegularUpdate:!1,ticks:{label:{visible:"inherit",anchorX:"middle",anchorY:"top",fontSize:12,offset:[0,-3]},tickEndings:[0,1],majorTickEndings:[1,1],drawZero:!1,visible:"inherit"}},y:{name:"y",fixed:!0,needsRegularUpdate:!1,ticks:{label:{visible:"inherit",anchorX:"right",anchorY:"middle",fontSize:12,offset:[-6,0]},tickEndings:[1,0],majorTickEndings:[1,1],drawZero:!1,visible:"inherit"}}},document:!1,drag:{enabled:!0},fullscreen:{symbol:'<svg height="1em" width="1em" version="1.1" viewBox="10 10 18 18"><path fill="#666" d="m 10,16 2,0 0,-4 4,0 0,-2 L 10,10 l 0,6 0,0 z"></path><path fill="#666" d="m 20,10 0,2 4,0 0,4 2,0 L 26,10 l -6,0 0,0 z"></path><path fill="#666" d="m 24,24 -4,0 0,2 L 26,26 l 0,-6 -2,0 0,4 0,0 z"></path><path fill="#666" d="M 12,20 10,20 10,26 l 6,0 0,-2 -4,0 0,-4 0,0 z"></path></svg>',scale:.85,id:null},ignoreLabels:!0,intl:{enabled:!1},keepAspectRatio:!1,keyboard:{enabled:!0,dx:10,dy:10,panShift:!0,panCtrl:!1},logging:{enabled:!1},minimizeReflow:"none",maxBoundingBox:[-1/0,1/0,1/0,-1/0],maxFrameRate:40,maxNameLength:1,moveTarget:null,offsetX:0,offsetY:0,pan:{enabled:!0,needShift:!0,needTwoFingers:!1},registerEvents:!0,renderer:"auto",resize:{enabled:!0,throttle:10},screenshot:{scale:1,type:"png",symbol:"",css:"background-color:#eeeeee; opacity:1.0; border:2px solid black; border-radius:10px; text-align:center",cssButton:"padding: 4px 10px; border: solid #356AA0 1px; border-radius: 5px; position: absolute; right: 2ex; top: 2ex; background-color: rgba(255, 255, 255, 0.3);"},selection:{enabled:!1,name:"selectionPolygon",needShift:!1,needCtrl:!0,fillColor:"#ffff00",visible:!1,withLines:!1,vertices:{visible:!1}},showClearTraces:!1,showCopyright:!0,showFullscreen:!1,showInfobox:!0,showLogo:!1,showNavigation:!0,showReload:!1,showScreenshot:!1,showZoom:!0,takeFirst:!1,takeSizeFromFile:!1,theme:"default",title:"",zoom:{enabled:!0,factorX:1.25,factorY:1.25,wheel:!0,needShift:!0,center:"auto",min:1e-4,max:1e4,pinch:!0,pinchHorizontal:!0,pinchVertical:!0,pinchSensitivity:7},zoomX:1,zoomY:1},navbar:{strokeColor:"#333333",fillColor:"transparent",highlightFillColor:"#aaaaaa",padding:"2px",position:"absolute",fontSize:"14px",cursor:"pointer",zIndex:"100",right:"5px",bottom:"5px"},elements:{aria:{enabled:!1,label:"",live:"assertive"},cssClass:"",highlightCssClass:"",dash:0,dashScale:!1,draft:{draft:!1,strokeColor:"#565656",fillColor:"#565656",strokeOpacity:.8,fillOpacity:.8,strokeWidth:1},dragToTopOfLayer:!1,element3D:null,fillColor:te.A.palette.red,fillOpacity:1,fixed:!1,frozen:!1,gradient:null,gradientAngle:0,gradientCX:.5,gradientCY:.5,gradientEndOffset:1,gradientFX:.5,gradientFY:.5,gradientFR:0,gradientR:.5,gradientSecondColor:"#ffffff",gradientSecondOpacity:1,gradientStartOffset:0,highlight:!0,highlightFillColor:"none",highlightFillOpacity:1,highlightStrokeColor:"#c3d9ff",highlightStrokeOpacity:1,highlightStrokeWidth:2,isLabel:!1,layer:0,lineCap:"butt",needsRegularUpdate:!0,nonnegativeOnly:!1,precision:"inherit",priv:!1,rotatable:!0,scalable:!0,shadow:{enabled:!1,color:[0,0,0],opacity:1,blur:3,blend:.1,offset:[5,5]},snapToGrid:!1,strokeColor:te.A.palette.blue,strokeOpacity:1,strokeWidth:2,tabindex:-1,trace:!1,traceAttributes:{},transitionDuration:100,transitionProperties:["fill","fill-opacity","stroke","stroke-opacity","stroke-width"],visible:!0,withLabel:!1,ignoreForLabelAutoposition:!1},ticks:{generateLabelText:null,generateLabelValue:null,drawLabels:!1,label:{tabindex:null,layer:7,highlight:!1,autoPosition:!1},beautifulScientificTickLabels:!1,useUnicodeMinus:!0,anchor:"left",drawZero:!1,insertTicks:!1,minTicksDistance:10,minorHeight:4,majorHeight:10,tickEndings:[1,1],majorTickEndings:[1,1],ignoreInfiniteTickEndings:!0,minorTicks:4,ticksPerLabel:!1,scale:1,scaleSymbol:"",labels:[],maxLabelLength:5,precision:3,digits:3,ticksDistance:1,face:"|",strokeOpacity:1,strokeWidth:1,strokeColor:"#000000",highlightStrokeColor:"#888888",fillColor:"none",highlightFillColor:"none",visible:"inherit",includeBoundaries:!1,type:"linear",intl:{enabled:"inherit",options:{}},minorTicksInArrow:!1,majorTicksInArrow:!0,labelInArrow:!0,minorTicksInMargin:!1,majorTicksInMargin:!0,labelInMargin:!0,ignoreForLabelAutoposition:!0},hatch:{drawLabels:!1,drawZero:!0,majorHeight:20,anchor:"middle",face:"|",strokeWidth:2,strokeColor:te.A.palette.blue,ticksDistance:.2},precision:{touch:30,touchMax:100,mouse:4,pen:4,epsilon:1e-4,hasPoint:4},layer:{numlayers:20,unused9:19,unused8:18,unused7:17,unused6:16,unused5:15,unused4:14,unused3:13,unused2:12,unused1:11,unused0:10,text:9,point:9,glider:9,arc:8,line:7,circle:6,curve:5,turtle:5,polygon:3,sector:3,angle:3,integral:3,axis:2,ticks:2,grid:1,image:0,trace:0},angle:{withLabel:!0,radius:"auto",type:"sector",orthoType:"square",orthoSensitivity:1,fillColor:te.A.palette.orange,highlightFillColor:te.A.palette.orange,strokeColor:te.A.palette.orange,fillOpacity:.3,highlightFillOpacity:.3,radiuspoint:{withLabel:!1,visible:!1,name:""},pointsquare:{withLabel:!1,visible:!1,name:""},dot:{visible:!1,strokeColor:"none",fillColor:"#000000",size:2,face:"o",withLabel:!1,name:""},label:{position:"top",offset:[0,0],strokeColor:te.A.palette.blue},arc:{visible:!1,fillColor:"none"}},arc:{selection:"auto",hasInnerPoints:!1,label:{anchorX:"auto",anchorY:"auto"},firstArrow:!1,lastArrow:!1,fillColor:"none",highlightFillColor:"none",strokeColor:te.A.palette.blue,highlightStrokeColor:"#c3d9ff",useDirection:!1,center:{},radiusPoint:{},anglePoint:{}},arrow:{firstArrow:!1,lastArrow:{type:1,highlightSize:6,size:6}},arrowparallel:{firstArrow:!1,lastArrow:{type:1,highlightSize:6,size:6}},axis:{name:"",needsRegularUpdate:!1,strokeWidth:1,lastArrow:{type:1,highlightSize:8,size:8},strokeColor:"#666666",highlightStrokeWidth:1,highlightStrokeColor:"#888888",position:"static",anchor:"",anchorDist:"10%",ticksAutoPos:!1,ticksAutoPosThreshold:"5%",withTicks:!0,straightFirst:!0,straightLast:!0,margin:-4,withLabel:!1,scalable:!1,ticks:{label:{offset:[4,-9],parse:!1,needsRegularUpdate:!1,display:"internal",visible:"inherit",layer:9},visible:"inherit",needsRegularUpdate:!1,strokeWidth:1,strokeColor:"#666666",highlightStrokeColor:"#888888",drawLabels:!0,drawZero:!1,insertTicks:!0,minTicksDistance:5,minorHeight:10,majorHeight:-1,tickEndings:[0,1],majorTickEndings:[1,1],minorTicks:4,ticksDistance:1,strokeOpacity:.25},point1:{needsRegularUpdate:!1,visible:!1},point2:{needsRegularUpdate:!1,visible:!1},tabindex:-1,label:{position:"lft",offset:[10,10]},ignoreForLabelAutoposition:!0},bisector:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},bisectorlines:{line1:{strokeColor:"#000000"},line2:{strokeColor:"#000000"}},boxplot:{dir:"vertical",smallWidth:.5,strokeWidth:2,strokeColor:te.A.palette.blue,fillColor:te.A.palette.blue,fillOpacity:.2,highlightStrokeWidth:2,highlightStrokeColor:te.A.palette.blue,highlightFillColor:te.A.palette.blue,highlightFillOpacity:.1},button:{disabled:!1,display:"html"},cardinalspline:{createPoints:!0,isArrayOfCoordinates:!0,points:{strokeOpacity:.05,fillOpacity:.05,highlightStrokeOpacity:1,highlightFillOpacity:1,withLabel:!1,name:"",fixed:!1}},chart:{chartStyle:"line",colors:["#B02B2C","#3F4C6B","#C79810","#D15600","#FFFF88","#c3d9ff","#4096EE","#008C00"],highlightcolors:null,fillcolor:null,highlightonsector:!1,highlightbysize:!1,fillOpacity:.6,withLines:!1,label:{}},checkbox:{disabled:!1,checked:!1,display:"html"},circle:{hasInnerPoints:!1,fillColor:"none",highlightFillColor:"none",strokeColor:te.A.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,withLabel:!1,fixed:!1,fillColor:te.A.palette.red,strokeColor:te.A.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",layer:9,name:""},point2:{fillColor:te.A.palette.red,strokeColor:te.A.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",layer:9,visible:!1,withLabel:!1,fixed:!1,name:""},label:{position:"urt"}},circumcircle:{fillColor:"none",highlightFillColor:"none",strokeColor:te.A.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,fixed:!1,withLabel:!1,fillColor:te.A.palette.red,strokeColor:te.A.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",name:""}},circumcirclearc:{fillColor:"none",highlightFillColor:"none",strokeColor:te.A.palette.blue,highlightStrokeColor:"#c3d9ff",useDirection:!0,center:{visible:!1,withLabel:!1,fixed:!1,name:""}},circumcirclesector:{useDirection:!0,fillColor:te.A.palette.yellow,highlightFillColor:te.A.palette.yellow,fillOpacity:.3,highlightFillOpacity:.3,strokeColor:te.A.palette.blue,highlightStrokeColor:"#c3d9ff",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},comb:{frequency:.2,width:.4,angle:Math.PI/3,reverse:!1,point1:{visible:!1,withLabel:!1,fixed:!1,name:""},point2:{visible:!1,withLabel:!1,fixed:!1,name:""},strokeWidth:1,strokeColor:"#0000ff",fillColor:"none"},conic:{fillColor:"none",highlightFillColor:"none",strokeColor:te.A.palette.blue,highlightStrokeColor:"#c3d9ff",foci:{fixed:!1,visible:!1,withLabel:!1,name:""},center:{visible:!1,withLabel:!1,name:""},point:{withLabel:!1,name:""},line:{visible:!1}},curve:{strokeWidth:1,strokeColor:te.A.palette.blue,fillColor:"none",fixed:!0,curveType:null,doAdvancedPlot:!0,doAdvancedPlotOld:!1,firstArrow:!1,handDrawing:!1,label:{position:"lft"},lastArrow:!1,lineCap:"round",numberPointsHigh:1600,numberPointsLow:400,plotVersion:2,recursionDepthHigh:17,recursionDepthLow:15},foreignobject:{fixed:!0,visible:!0,needsRegularUpdate:!1,attractors:[],evaluateOnlyOnce:!1},functiongraph:{},glider:{label:{}},grid:{needsRegularUpdate:!1,hasGrid:!1,highlight:!1,gridX:null,gridY:null,majorStep:"auto",minorElements:0,forceSquare:!1,includeBoundaries:!1,size:void 0,face:void 0,margin:void 0,drawZero:void 0,polygonVertices:void 0,major:{size:5,face:"line",margin:0,drawZero:!0,polygonVertices:6},minor:{visible:"inherit",size:3,face:"point",margin:0,drawZero:!0,polygonVertices:6},snapToGrid:!1,strokeColor:"#c0c0c0",strokeWidth:1,strokeOpacity:.5,dash:0,theme:0,themes:[{},{forceSquare:"min",major:{face:"line"}},{major:{face:"line"},minor:{size:3,face:"point"},minorElements:"auto"},{major:{face:"line"},minor:{face:"line",strokeOpacity:.25},minorElements:"auto"},{major:{face:"line"},minor:{face:"+",size:"95%"},minorElements:"auto"},{major:{face:"+",size:10,strokeOpacity:1},minor:{face:"point",size:3},minorElements:"auto"},{major:{face:"circle",size:8,fillColor:"#c0c0c0"},minor:{face:"point",size:3},minorElements:"auto"}]},group:{needsRegularUpdate:!0},htmlslider:{widthRange:100,widthOut:34,step:.01,frozen:!0,isLabel:!1,strokeColor:"#000000",display:"html",anchorX:"left",anchorY:"middle",withLabel:!1},image:{imageString:null,fillOpacity:1,highlightFillOpacity:.6,cssClass:"JXGimage",highlightCssClass:"JXGimageHighlight",rotate:0,snapSizeX:1,snapSizeY:1,attractors:[]},implicitcurve:{margin:1,resolution_outer:5,resolution_inner:5,max_steps:1024,alpha_0:.05,tol_u0:ee.A.eps,tol_newton:1e-7,tol_cusp:.05,tol_progress:1e-4,qdt_box:.2,kappa_0:.2,delta_0:.05,h_initial:.1,h_critical:.001,h_max:.5,loop_dist:.09,loop_dir:.99,loop_detection:!0},incircle:{fillColor:"none",highlightFillColor:"none",strokeColor:te.A.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,fixed:!1,withLabel:!1,fillColor:te.A.palette.red,strokeColor:te.A.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",name:""}},inequality:{fillColor:te.A.palette.red,fillOpacity:.2,strokeColor:"none",inverse:!1},infobox:{distanceX:-20,distanceY:25,intl:{enabled:"inherit",options:{}},fontSize:12,isLabel:!1,strokeColor:"#bbbbbb",display:"html",anchorX:"left",anchorY:"middle",cssClass:"JXGinfobox",rotate:0,visible:!0,parse:!1,transitionDuration:0,needsRegularUpdate:!1,tabindex:null,viewport:[0,0,0,0],ignoreForLabelAutoposition:!0},integral:{axis:"x",withLabel:!0,fixed:!0,strokeWidth:0,strokeOpacity:0,fillColor:te.A.palette.red,fillOpacity:.3,highlightFillColor:te.A.palette.red,highlightFillOpacity:.2,curveLeft:{visible:!0,withLabel:!1,color:te.A.palette.red,fillOpacity:.8,layer:9},baseLeft:{visible:!1,fixed:!1,withLabel:!1,name:""},curveRight:{visible:!0,withLabel:!1,color:te.A.palette.red,fillOpacity:.8,layer:9},baseRight:{visible:!1,fixed:!1,withLabel:!1,name:""},label:{fontSize:20,digits:4,intl:{enabled:!1,options:{}}}},input:{disabled:!1,maxlength:524288,display:"html"},intersection:{alwaysIntersect:!0},label:{visible:"inherit",strokeColor:"#000000",strokeOpacity:1,highlightStrokeOpacity:.666666,highlightStrokeColor:"#000000",fixed:!0,tabindex:null,position:"urt",distance:1.5,offset:[10,10],autoPosition:!1,autoPositionMinDistance:12,autoPositionMaxDistance:28,autoPositionWhitelist:[]},legend:{style:"vertical",labels:["1","2","3","4","5","6","7","8"],colors:["#B02B2C","#3F4C6B","#C79810","#D15600","#FFFF88","#c3d9ff","#4096EE","#008C00"],lineLength:1,strokeOpacity:[1],rowHeight:20,strokeWidth:5,frozen:!1},line:{firstArrow:!1,lastArrow:!1,margin:0,straightFirst:!0,straightLast:!0,fillColor:"none",highlightFillColor:"none",strokeColor:te.A.palette.blue,highlightStrokeColor:"#c3d9ff",withTicks:!1,point1:{fillColor:te.A.palette.red,strokeColor:te.A.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",layer:9,visible:!1,withLabel:!1,fixed:!1,name:""},point2:{fillColor:te.A.palette.red,strokeColor:te.A.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",layer:9,visible:!1,withLabel:!1,fixed:!1,name:""},ticks:{drawLabels:!0,label:{offset:[4,-9]},drawZero:!1,insertTicks:!1,ticksDistance:1,minTicksDistance:50,minorHeight:4,majorHeight:-1,minorTicks:4,strokeOpacity:.3,visible:"inherit"},label:{position:"llft"},snapToGrid:!1,snapSizeX:1,snapSizeY:1,touchFirstPoint:!1,touchLastPoint:!1},locus:{translateToOrigin:!1,translateTo10:!1,stretch:!1,toOrigin:null,to10:null},measurement:{baseUnit:"",units:{},showPrefix:!0,showSuffix:!0,prefix:"",suffix:"",dim:null,formatCoords:function(ie,re,oe,se){return parseFloat(se)!==1?"Infinit coords":"("+re+", "+oe+")"},formatDirection:function(ie,re,oe){return"("+re+", "+oe+")"}},metapostspline:{createPoints:!0,isArrayOfCoordinates:!0,points:{strokeOpacity:.5,fillOpacity:.5,highlightStrokeOpacity:1,highlightFillOpacity:1,withLabel:!1,name:"",fixed:!1}},mirrorelement:{fixed:!0,point:{},center:{},type:"Euclidean"},nonreflexangle:{},normal:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},orthogonalprojection:{},otherintersection:{alwaysIntersect:!0,precision:.001},parallel:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""},label:{position:"llft"}},parallelogram:{parallelpoint:{withLabel:!1,name:""}},parallelpoint:{},perpendicular:{strokeColor:"#000000",straightFirst:!0,straightLast:!0},perpendicularsegment:{strokeColor:"#000000",straightFirst:!1,straightLast:!1,point:{visible:!1,fixed:!0,withLabel:!1,name:""}},point:{withLabel:!0,label:{},style:5,face:"o",size:3,sizeUnit:"screen",strokeWidth:2,transitionProperties:["fill","fill-opacity","stroke","stroke-opacity","stroke-width","width","height","rx","ry"],fillColor:te.A.palette.red,strokeColor:te.A.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",zoom:!1,showInfobox:"inherit",infoboxDigits:"auto",draft:!1,attractors:[],attractorUnit:"user",attractorDistance:0,snatchDistance:0,snapToGrid:!1,attractToGrid:!1,snapSizeX:1,snapSizeY:1,snapToPoints:!1,ignoredSnapToPoints:[]},polygon:{hasInnerPoints:!1,fillColor:te.A.palette.yellow,highlightFillColor:te.A.palette.yellow,fillOpacity:.3,highlightFillOpacity:.2,withLines:!0,borders:{withLabel:!1,strokeWidth:1,highlightStrokeWidth:1,layer:5,label:{position:"top"},visible:"inherit"},highlightByStrokeWidth:!1,vertices:{layer:9,withLabel:!1,name:"",strokeColor:te.A.palette.red,fillColor:te.A.palette.red,fixed:!1,visible:"inherit"},label:{offset:[0,0]}},polygonalchain:{fillColor:"none",highlightFillColor:"none"},prescribedangle:{anglePoint:{size:2,visible:!1,withLabel:!1}},reflection:{fixed:!0,center:{},type:"Euclidean"},reflexangle:{},regularpolygon:{hasInnerPoints:!1,fillColor:te.A.palette.yellow,highlightFillColor:te.A.palette.yellow,fillOpacity:.3,highlightFillOpacity:.2,withLines:!0,borders:{withLabel:!1,strokeWidth:1,highlightStrokeWidth:1,layer:5,label:{position:"top"}},vertices:{layer:9,withLabel:!0,strokeColor:te.A.palette.red,fillColor:te.A.palette.red,fixed:!1},label:{offset:[0,0]}},riemannsum:{withLabel:!1,fillOpacity:.3,fillColor:te.A.palette.yellow},sector:{fillColor:te.A.palette.yellow,highlightFillColor:te.A.palette.yellow,fillOpacity:.3,highlightFillOpacity:.3,highlightOnSector:!1,highlightStrokeWidth:0,useDirection:!1,selection:"auto",arc:{visible:!1,fillColor:"none",withLabel:!1,name:"",center:{visible:!1,withLabel:!1,name:""},radiusPoint:{visible:!1,withLabel:!1,name:""},anglePoint:{visible:!1,withLabel:!1,name:""}},radiusPoint:{visible:!1,withLabel:!1},center:{visible:!1,withLabel:!1},anglePoint:{visible:!1,withLabel:!1},label:{offset:[0,0],anchorX:"auto",anchorY:"auto"}},segment:{label:{position:"top"}},semicircle:{center:{visible:!1,withLabel:!1,fixed:!1,fillColor:te.A.palette.red,strokeColor:te.A.palette.red,highlightFillColor:"#eeeeee",highlightStrokeColor:te.A.palette.red,name:""}},slider:{snapWidth:-1,snapValues:[],snapValueDistance:0,precision:2,digits:2,intl:{enabled:"inherit",options:{}},firstArrow:!1,lastArrow:!1,withTicks:!0,withLabel:!0,suffixLabel:null,unitLabel:null,postLabel:null,layer:9,showInfobox:!1,name:"",visible:!0,strokeColor:"#000000",highlightStrokeColor:"#888888",fillColor:"#ffffff",highlightFillColor:"none",size:6,point1:{needsRegularUpdate:!1,showInfobox:!1,withLabel:!1,visible:!1,fixed:!0,frozen:"inherit",name:""},point2:{needsRegularUpdate:!1,showInfobox:!1,withLabel:!1,visible:!1,fixed:!0,frozen:"inherit",name:""},baseline:{needsRegularUpdate:!1,visible:"inherit",fixed:!0,scalable:!1,tabindex:null,name:"",strokeWidth:1,strokeColor:"#000000",highlightStrokeColor:"#888888"},ticks:{needsRegularUpdate:!1,fixed:!0,drawLabels:!1,digits:2,includeBoundaries:!0,drawZero:!0,label:{offset:[-4,-14],display:"internal"},minTicksDistance:30,insertTicks:!0,ticksDistance:1,minorHeight:4,majorHeight:5,minorTicks:0,strokeOpacity:1,strokeWidth:1,tickEndings:[0,1],majortickEndings:[0,1],strokeColor:"#000000",visible:"inherit"},highline:{strokeWidth:3,visible:"inherit",fixed:!0,tabindex:null,name:"",strokeColor:"#000000",highlightStrokeColor:"#888888"},label:{visible:"inherit",strokeColor:"#000000"},moveOnUp:!0},slopefield:{strokeWidth:.5,highlightStrokeWidth:.5,highlightStrokeColor:te.A.palette.blue,highlightStrokeOpacity:.8,scale:1,arrowhead:{enabled:!1,size:5,angle:.125*Math.PI}},slopetriangle:{fillColor:te.A.palette.red,fillOpacity:.4,highlightFillColor:te.A.palette.red,highlightFillOpacity:.3,borders:{lastArrow:{type:1,size:6}},glider:{fixed:!0,visible:!1,withLabel:!1},baseline:{visible:!1,withLabel:!1,name:""},basepoint:{visible:!1,withLabel:!1,name:""},tangent:{visible:!1,withLabel:!1,name:""},toppoint:{visible:!1,withLabel:!1,name:""},label:{visible:!0,position:"first"}},smartlabelangle:{cssClass:"smart-label-solid smart-label-angle",highlightCssClass:"smart-label-solid smart-label-angle",anchorX:"left",anchorY:"middle",unit:"",prefix:"",suffix:"",measure:"deg",useMathJax:!0},smartlabelcircle:{cssClass:"smart-label-solid smart-label-circle",highlightCssClass:"smart-label-solid smart-label-circle",anchorX:"middle",useMathJax:!0,unit:"",prefix:"",suffix:"",measure:"radius"},smartlabelline:{cssClass:"smart-label-solid smart-label-line",highlightCssClass:"smart-label-solid smart-label-line",anchorX:"middle",useMathJax:!0,unit:"",measure:"length"},smartlabelpoint:{cssClass:"smart-label-solid smart-label-point",highlightCssClass:"smart-label-solid smart-label-point",anchorX:"middle",anchorY:"top",useMathJax:!0,dir:"row",unit:""},smartlabelpolygon:{cssClass:"smart-label-solid smart-label-polygon",highlightCssClass:"smart-label-solid smart-label-polygon",anchorX:"middle",useMathJax:!0,unit:"",measure:"area"},stepfunction:{},tangent:{},tangentto:{polar:{visible:!1,strokeWidth:1,dash:3},point:{visible:!1}},tapemeasure:{strokeColor:"#000000",strokeWidth:2,highlightStrokeColor:"#000000",withTicks:!0,withLabel:!0,rotate:0,precision:2,digits:2,point1:{visible:!0,strokeColor:"#000000",fillColor:"#ffffff",fillOpacity:0,highlightFillOpacity:.1,size:6,snapToPoints:!0,attractorUnit:"screen",attractorDistance:20,showInfobox:!1,withLabel:!1,name:""},point2:{visible:!0,strokeColor:"#000000",fillColor:"#ffffff",fillOpacity:0,highlightFillOpacity:.1,size:6,snapToPoints:!0,attractorUnit:"screen",attractorDistance:20,showInfobox:!1,withLabel:!1,name:""},ticks:{drawLabels:!1,drawZero:!0,insertTicks:!0,ticksDistance:.1,minorHeight:8,majorHeight:16,minorTicks:4,tickEndings:[0,1],majorTickEndings:[0,1],strokeOpacity:1,strokeWidth:1,strokeColor:"#000000",visible:"inherit",label:{anchorY:"top",anchorX:"middle",offset:[0,-10]}},label:{position:"top"}},text:{fontSize:12,fontUnit:"px",formatNumber:!1,digits:2,intl:{enabled:"inherit",options:{minimumFractionDigits:0,maximumFractionDigits:2}},parse:!0,useCaja:!1,isLabel:!1,strokeColor:"#000000",highlightStrokeColor:"#000000",highlightStrokeOpacity:.666666,cssDefaultStyle:"font-family: Arial, Helvetica, Geneva, sans-serif;",highlightCssDefaultStyle:"font-family: Arial, Helvetica, Geneva, sans-serif;",cssStyle:"",highlightCssStyle:"",transitionProperties:["color","opacity"],useASCIIMathML:!1,useMathJax:!1,useKatex:!1,katexMacros:{},toFraction:!1,display:"html",anchor:null,anchorX:"left",anchorY:"middle",cssClass:"JXGtext",highlightCssClass:"JXGtext",dragArea:"all",withLabel:!1,rotate:0,visible:!0,snapSizeX:1,snapSizeY:1,attractors:[]},tracecurve:{strokeColor:"#000000",fillColor:"none",numberPoints:100},turtle:{strokeWidth:1,fillColor:"none",strokeColor:"#000000",arrow:{strokeWidth:2,withLabel:!1,strokeColor:te.A.palette.red,lastArrow:!0}},vectorfield:{strokeWidth:.5,highlightStrokeWidth:.5,highlightStrokeColor:te.A.palette.blue,highlightStrokeOpacity:.8,scale:1,arrowhead:{enabled:!0,size:5,angle:.125*Math.PI}},shortcuts:{color:["strokeColor","fillColor"],opacity:["strokeOpacity","fillOpacity"],highlightColor:["highlightStrokeColor","highlightFillColor"],highlightOpacity:["highlightStrokeOpacity","highlightFillOpacity"],strokeWidth:["strokeWidth","highlightStrokeWidth"]}},Z.A.Validator=(function(){var ie,re=function(fe){return ne.A.isString(fe)},oe=function(fe){return ne.A.isNumber(fe,!0,!1)},se=function(fe){return Math.abs(fe-Math.round(fe))<ee.A.eps},ae=function(fe){return se(fe)&&fe>0},le=function(fe){return fe>0},ue=function(fe){return fe>=0},de={},pe={attractorDistance:ue,color:re,display:function(fe){return fe==="html"||fe==="internal"},doAdvancedPlot:!1,draft:!1,drawLabels:!1,drawZero:!1,face:function(fe){return ne.A.exists(Z.A.normalizePointFace(fe))},factor:oe,fillColor:re,fillOpacity:oe,firstArrow:!1,fontSize:se,dash:se,gridX:oe,gridY:oe,hasGrid:!1,highlightFillColor:re,highlightFillOpacity:oe,highlightStrokeColor:re,highlightStrokeOpacity:oe,insertTicks:!1,lastArrow:!1,layer:function(fe){return se(fe)&&fe>=0},majorHeight:se,minorHeight:se,minorTicks:ue,minTicksDistance:ae,numberPointsHigh:ae,numberPointsLow:ae,opacity:oe,radius:oe,RDPsmoothing:!1,renderer:function(fe){return fe==="vml"||fe==="svg"||fe==="canvas"||fe==="no"},right:function(fe){return/^[0-9]+px$/.test(fe)},showCopyright:!1,showInfobox:!1,showNavigation:!1,size:ue,snapSizeX:le,snapSizeY:le,snapWidth:oe,snapToGrid:!1,snatchDistance:ue,straightFirst:!1,straightLast:!1,stretch:!1,strokeColor:re,strokeOpacity:oe,strokeWidth:ue,takeFirst:!1,takeSizeFromFile:!1,to10:!1,toOrigin:!1,translateTo10:!1,translateToOrigin:!1,useASCIIMathML:!1,useDirection:!1,useMathJax:!1,withLabel:!1,withTicks:!1,zoom:!1};for(ie in pe)pe.hasOwnProperty(ie)&&(de[ie.toLowerCase()]=pe[ie]);return de})(),Z.A.normalizePointFace=function(ie){return{cross:"x",x:"x",circle:"o",o:"o",square:"[]","[]":"[]",plus:"+","+":"+",divide:"|","|":"|",minus:"-","-":"-",diamond:"<>","<>":"<>",diamond2:"<<>>","<<>>":"<<>>",triangleup:"^",A:"^",a:"^","^":"^",triangledown:"v",v:"v",triangleleft:"<","<":"<",triangleright:">",">":">"}[ie]},Z.A.useStandardOptions=function(ie){var re,oe,se,ae,le=Z.A.Options,ue=ie.hasGrid;for(re in ie.options.grid.hasGrid=le.grid.hasGrid,ie.options.grid.gridX=le.grid.gridX,ie.options.grid.gridY=le.grid.gridY,ie.options.grid.gridColor=le.grid.gridColor,ie.options.grid.gridOpacity=le.grid.gridOpacity,ie.options.grid.gridDash=le.grid.gridDash,ie.options.grid.snapToGrid=le.grid.snapToGrid,ie.options.grid.snapSizeX=le.grid.SnapSizeX,ie.options.grid.snapSizeY=le.grid.SnapSizeY,ie.takeSizeFromFile=le.takeSizeFromFile,ae=function(de,pe){de.visProp.fillcolor=pe.fillColor,de.visProp.highlightfillcolor=pe.highlightFillColor,de.visProp.strokecolor=pe.strokeColor,de.visProp.highlightstrokecolor=pe.highlightStrokeColor},ie.objects)if(ie.objects.hasOwnProperty(re))if((se=ie.objects[re]).elementClass===Q.A.OBJECT_CLASS_POINT)ae(se,le.point);else if(se.elementClass===Q.A.OBJECT_CLASS_LINE)for(ae(se,le.line),oe=0;oe<se.ticks.length;oe++)se.ticks[oe].majorTicks=le.line.ticks.majorTicks,se.ticks[oe].minTicksDistance=le.line.ticks.minTicksDistance,se.ticks[oe].visProp.minorheight=le.line.ticks.minorHeight,se.ticks[oe].visProp.majorheight=le.line.ticks.majorHeight;else se.elementClass===Q.A.OBJECT_CLASS_CIRCLE?ae(se,le.circle):se.type===Q.A.OBJECT_TYPE_ANGLE?ae(se,le.angle):se.type===Q.A.OBJECT_TYPE_ARC?ae(se,le.arc):se.type===Q.A.OBJECT_TYPE_POLYGON?ae(se,le.polygon):se.type===Q.A.OBJECT_TYPE_CONIC?ae(se,le.conic):se.type===Q.A.OBJECT_TYPE_CURVE?ae(se,le.curve):se.type===Q.A.OBJECT_TYPE_SECTOR&&(se.arc.visProp.fillcolor=le.sector.fillColor,se.arc.visProp.highlightfillcolor=le.sector.highlightFillColor,se.arc.visProp.fillopacity=le.sector.fillOpacity,se.arc.visProp.highlightfillopacity=le.sector.highlightFillOpacity);ie.fullUpdate(),ue&&!ie.hasGrid?ie.removeGrids(ie):!ue&&ie.hasGrid&&ie.create("grid",[])},Z.A.useBlackWhiteOptions=function(ie){var re=Z.A.Options;re.point.fillColor=te.A.rgb2bw(re.point.fillColor),re.point.highlightFillColor=te.A.rgb2bw(re.point.highlightFillColor),re.point.strokeColor=te.A.rgb2bw(re.point.strokeColor),re.point.highlightStrokeColor=te.A.rgb2bw(re.point.highlightStrokeColor),re.line.fillColor=te.A.rgb2bw(re.line.fillColor),re.line.highlightFillColor=te.A.rgb2bw(re.line.highlightFillColor),re.line.strokeColor=te.A.rgb2bw(re.line.strokeColor),re.line.highlightStrokeColor=te.A.rgb2bw(re.line.highlightStrokeColor),re.circle.fillColor=te.A.rgb2bw(re.circle.fillColor),re.circle.highlightFillColor=te.A.rgb2bw(re.circle.highlightFillColor),re.circle.strokeColor=te.A.rgb2bw(re.circle.strokeColor),re.circle.highlightStrokeColor=te.A.rgb2bw(re.circle.highlightStrokeColor),re.arc.fillColor=te.A.rgb2bw(re.arc.fillColor),re.arc.highlightFillColor=te.A.rgb2bw(re.arc.highlightFillColor),re.arc.strokeColor=te.A.rgb2bw(re.arc.strokeColor),re.arc.highlightStrokeColor=te.A.rgb2bw(re.arc.highlightStrokeColor),re.polygon.fillColor=te.A.rgb2bw(re.polygon.fillColor),re.polygon.highlightFillColor=te.A.rgb2bw(re.polygon.highlightFillColor),re.sector.fillColor=te.A.rgb2bw(re.sector.fillColor),re.sector.highlightFillColor=te.A.rgb2bw(re.sector.highlightFillColor),re.curve.strokeColor=te.A.rgb2bw(re.curve.strokeColor),re.grid.gridColor=te.A.rgb2bw(re.grid.gridColor),Z.A.useStandardOptions(ie)},Z.A.Options.normalizePointFace=Z.A.normalizePointFace,_.A=Z.A.Options},428:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _jxg_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(443),_base_constants_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(561),_base_text_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(925),_math_math_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(477),_math_ia_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(733),_math_geometry_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(571),_math_statistics_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(588),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(188),_utils_env_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(133);Object.create||(Object.create=function(G,_){if(typeof G!="object"&&typeof G!="function")throw new TypeError("Object prototype may only be an Object: "+G);if(G===null)throw new Error("This browser's implementation of Object.create is a shim and doesn't support 'null' as the first argument.");if(_!==void 0)throw new Error("This browser's implementation of Object.create is a shim and doesn't support a second argument.");function J(){}return J.prototype=G,new J});var priv={modules:{math:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A,"math/geometry":_math_geometry_js__WEBPACK_IMPORTED_MODULE_5__.A,"math/statistics":_math_statistics_js__WEBPACK_IMPORTED_MODULE_6__.A,"math/numerics":_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.Numerics}},r,_ccache;_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.JessieCode=function(G,_){this.scope={id:0,hasChild:!0,args:[],locals:{},context:null,previous:null},this.scopes=[],this.scopes.push(this.scope),this.dpstack=[[]],this.pscope=0,this.propstack=[{}],this.propscope=0,this.lhs=[],this.isLHS=!1,this.warnLog="jcwarn",this.$log=[],this.builtIn=this.defineBuiltIn(),this.operands=this.getPossibleOperands(),this.board=null,this.forceValueCall=!1,this.lineToElement={},this.parCurLine=1,this.parCurColumn=0,this.line=1,this.col=1,_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.CA&&(this.CA=new _jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.CA(this.node,this.createNode,this)),_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.CAS&&(this.CAS=new _jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.CAS(this.node,this.createNode,this)),this.code="",typeof G=="string"&&this.parse(G,_)},_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.extend(_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.JessieCode.prototype,{node:function(G,_,J){return{type:G,value:_,children:J}},createNode:function(G,_,J){var Z,Q=this.node(G,_,[]);for(Z=2;Z<arguments.length;Z++)Q.children.push(arguments[Z]);return Q.type==="node_const"&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(Q.value)&&(Q.isMath=!0),Q.line=this.parCurLine,Q.col=this.parCurColumn,Q},pushScope:function(G){var _={args:G,locals:{},context:null,previous:this.scope};return this.scope.hasChild=!0,this.scope=_,_.id=this.scopes.push(_)-1,_},popScope:function(){var G=this.scope.previous;return this.scope=G!==null?G:this.scope,this.scope},getElementById:function(G){return this.board.objects[G]},log:function(){this.$log.push(arguments),typeof console=="object"&&console.log&&console.log.apply(console,arguments)},creator:(_ccache={},(r=function(G){var _,J;return typeof _ccache[this.board.id+G]=="function"?_=_ccache[this.board.id+G]:(J=this,(_=function(Z,Q){var ee;return(ee=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(Q)?Q:{}).name===void 0&&ee.id===void 0&&(ee.name=J.lhs[J.scope.id]!==0?J.lhs[J.scope.id]:""),J.board.create(G,Z,ee)}).creator=!0,_ccache[this.board.id+G]=_),_}).clearCache=function(){_ccache={}},r),letvar:function(G,_){this.builtIn[G]&&this._warn('"'+G+'" is a predefined value.'),this.scope.locals[G]=_},isLocalVariable:function(G){for(var _=this.scope;_!==null;){if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(_.locals[G]))return _;_=_.previous}return null},isParameter:function(G){for(var _=this.scope;_!==null;){if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.indexOf(_.args,G)>-1)return _;_=_.previous}return null},isCreator:function(G){return!!_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.elements[G]},isMathMethod:function(G){return G!=="E"&&!!Math[G]},isBuiltIn:function(G){return!!this.builtIn[G]},getvar:function(G,_,J){var Z;if(_=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.def(_,!1),(Z=this.isLocalVariable(G))!==null)return Z.locals[G];if(G==="$board"||G==="EULER"||G==="PI")return this.builtIn[G];if(J){if(this.isBuiltIn(G))return this.builtIn[G];if(this.isMathMethod(G))return Math[G];if(this.isCreator(G))return this.creator(G)}return _||(Z=this.board.select(G))===G?void 0:Z},resolve:function(G){for(var _=this.scope;_!==null;){if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(_.locals[G]))return _.locals[G];_=_.previous}},getvarJS:function(G,_,J){var Z,Q="";return _=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.def(_,!1),J=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.def(J,!1),this.isParameter(G)!==null?G:this.isLocalVariable(G)===null||J?this.isCreator(G)?"(function () { var a = Array.prototype.slice.call(arguments, 0), props = "+(J?"a.pop()":"{}")+"; return $jc$.board.create.apply($jc$.board, ['"+G+"'].concat([a, props])); })":(J&&this._error("Syntax error (attribute values are allowed with element creators only)"),this.isBuiltIn(G)?(Q=this.builtIn[G].src||this.builtIn[G],_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(Q)||Q.match(/board\.select/)?Q:(G=Q.split(".").pop(),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(this.board.mathLib)&&(Z=new RegExp("^Math."+G)).exec(Q)!==null?Q.replace(Z,"$jc$.board.mathLib."+G):_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(this.board.mathLibJXG)&&(Z=new RegExp("^JXG.Math.")).exec(Q)!==null?Q.replace(Z,"$jc$.board.mathLibJXG."):Q)):this.isMathMethod(G)?"$jc$.board.mathLib."+G:_?"":(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isId(this.board,G)?(Q="$jc$.board.objects['"+G+"']",this.board.objects[G].elType==="slider"&&(Q+=".Value()")):_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isName(this.board,G)?(Q="$jc$.board.elementsByName['"+G+"']",this.board.elementsByName[G].elType==="slider"&&(Q+=".Value()")):_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isGroup(this.board,G)&&(Q="$jc$.board.groups['"+G+"']"),Q)):"$jc$.resolve('"+G+"')"},makeMap:function(G){return G.isMap=!0,G},functionCodeJS:function(G){var _=G.children[0].join(", "),J="",Z="";return G.value==="op_map"&&(J="{ return  ",Z=" }"),"function ("+_+`) {
var $oldscope$ = $jc$.scope;
$jc$.scope = $jc$.scopes[`+this.scope.id+`];
var r = (function () `+J+this.compile(G.children[1],!0)+Z+`)();
$jc$.scope = $oldscope$;
return r;
}`},defineFunction:function(node){var fun,i,that=this,list=node.children[0],scope=this.pushScope(list),_that;if(this.board.options.jc.compile){for(this.isLHS=!1,i=0;i<list.length;i++)scope.locals[list[i]]=list[i];this.replaceNames(node.children[1]),fun=(function(jc){var fun,str="var f = function($jc$) { return "+jc.functionCodeJS(node)+"}; f;";try{for(fun=eval(str)(jc),scope.argtypes=[],i=0;i<list.length;i++)scope.argtypes.push(that.resolveType(list[i],node));return fun}catch(G){return jc._warn(`error compiling function

`+str+`

`+G.toString()),function(){}}})(this),this.popScope()}else fun=(function(G,_,J){return function(){var Z,Q;for(Q=_.scope,_.scope=_.scopes[J],Z=0;Z<G.length;Z++)_.scope.locals[G[Z]]=arguments[Z];return Z=_.execute(node.children[1]),_.scope=Q,Z}})(list,this,scope.id);return fun.node=node,fun.scope=scope,fun.toJS=fun.toString,fun.toString=(_that=this,function(){return _that.compile(_that.replaceIDs(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.deepCopy(node)))}),fun.deps={},this.collectDependencies(node.children[1],node.children[0],fun.deps),fun},mergeAttributes:function(G){var _,J={};for(_=0;_<arguments.length;_++)J=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.deepCopy(J,arguments[_],!0);return J},setProp:function(G,_,J){var Z,Q,ee={};G.elementClass!==_base_constants_js__WEBPACK_IMPORTED_MODULE_1__.A.OBJECT_CLASS_POINT||_!=="X"&&_!=="Y"?G.elementClass!==_base_constants_js__WEBPACK_IMPORTED_MODULE_1__.A.OBJECT_CLASS_TEXT||_!=="X"&&_!=="Y"?G.type&&G.elementClass&&G.visProp?_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G[G.methodMap[_]])&&typeof G[G.methodMap[_]]!="function"?G[G.methodMap[_]]=J:(ee[_]=J,G.setAttribute(ee)):G[_]=J:(typeof J=="number"?G[_]=function(){return J}:typeof J=="function"?(G.isDraggable=!1,G[_]=J):typeof J=="string"&&(G.isDraggable=!1,G[_]=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.createFunction(J,this.board),G[_+"jc"]=J),G[_].origin=J,this.board.update()):(_=_.toLowerCase(),G.isDraggable&&typeof J=="number"?(Z=_==="x"?J:G.X(),Q=_==="y"?J:G.Y(),G.setPosition(_base_constants_js__WEBPACK_IMPORTED_MODULE_1__.A.COORDS_BY_USER,[Z,Q])):!G.isDraggable||typeof J!="function"&&typeof J!="string"?G.isDraggable||(Z=_==="x"?J:G.XEval.origin,Q=_==="y"?J:G.YEval.origin,G.addConstraint([Z,Q])):(Z=_==="x"?J:G.coords.usrCoords[1],Q=_==="y"?J:G.coords.usrCoords[2],G.addConstraint([Z,Q])),this.board.update())},_genericParse:function(G,_,J,Z){var Q,ee,te,ne,ie=G.replace(/\r\n/g,`
`).split(`
`),re={},oe=[];Z||(this.code+=G+`
`),_base_text_js__WEBPACK_IMPORTED_MODULE_2__.A&&(ee=_base_text_js__WEBPACK_IMPORTED_MODULE_2__.A.prototype.setText,_base_text_js__WEBPACK_IMPORTED_MODULE_2__.A.prototype.setText=_base_text_js__WEBPACK_IMPORTED_MODULE_2__.A.prototype.setTextJessieCode);try{for(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(J)||(J=!1),Q=0;Q<ie.length;Q++)J&&(ie[Q]=_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.GeonextParser.geonext2JS(ie[Q],this.board)),oe.push(ie[Q]);switch(G=oe.join(`
`),te=parser.parse(G),this.CA&&(te=this.CA.expandDerivatives(te,null,te),te=this.CA.removeTrivialNodes(te)),this.CAS&&(te=this.CAS.expandDerivatives(te,null,te)),_){case"parse":ne=this.execute(te);break;case"manipulate":ne=this.compile(te);break;case"simplify":_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(this.CAS)?(re.method=re.method||"strong",re.form=re.form||"fractions",re.steps=re.steps||[],re.iterations=re.iterations||1e3,te=this.CAS.simplify(te,re),ne=this.CAS.compile(te)):ne=this.compile(te);break;case"getAst":ne=te;break;default:ne=!1}}catch(se){throw se}finally{_base_text_js__WEBPACK_IMPORTED_MODULE_2__.A&&(_base_text_js__WEBPACK_IMPORTED_MODULE_2__.A.prototype.setText=ee)}return ne},parse:function(G,_,J){return this._genericParse(G,"parse",_,J)},manipulate:function(G,_,J){return this._genericParse(G,"manipulate",_,J)},simplify:function(G){return this._genericParse(G,"simplify")},getAST:function(G,_,J){return this._genericParse(G,"getAst",_,J)},snippet:function(G,_,J,Z,Q){var ee;return _=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.def(_,!0),J=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.def(J,""),Z=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.def(Z,!1),this.forceValueCall=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.def(Q,!0),ee=(_?" function ("+J+") { return ":"")+G+(_?"; }":"")+";",this.parse(ee,Z,!0)},replaceIDs:function(G){var _,J;if(G.replaced&&(J=this.board.objects[G.children[1][0].value],_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(J)&&J.name!==""&&(G.type="node_var",G.value=J.name,G.children.length=0,delete G.replaced)),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(G))for(_=0;_<G.length;_++)G[_]=this.replaceIDs(G[_]);if(G.children)for(_=G.children.length;_>0;_--)_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.children[_-1])&&(G.children[_-1]=this.replaceIDs(G.children[_-1]));return G},replaceNames:function(G,_){var J,Z,Q=!1;if(_!==void 0&&(Q=_),Z=G.value,G.type==="node_op"&&Z==="op_lhs"&&G.children.length===1?this.isLHS=!0:G.type==="node_var"&&(this.isLHS?this.letvar(Z,!0):!_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(this.getvar(Z,!0))&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(this.board.elementsByName[Z])&&(Q&&this.board.elementsByName[Z].elType!=="slider"&&(Q=!1),G=this.createReplacementNode(G,Q))),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(G))for(J=0;J<G.length;J++)G[J]=this.replaceNames(G[J],Q);if(G.children)for(this.forceValueCall&&(G.value==="op_execfun"&&G.children[0].value!=="V"&&G.children[0].value!=="$"&&(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(Math[G.children[0].value])||_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A[G.children[0].value]))&&G.children[1][0].type==="node_var"||G.value==="op_return"&&G.children.length===1&&G.children[0].type==="node_var")&&(Q=!0),J=G.children.length;J>0;J--)_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.children[J-1])&&(G.children[J-1]=this.replaceNames(G.children[J-1],Q));return G.type==="node_op"&&G.value==="op_lhs"&&G.children.length===1&&(this.isLHS=!1),G},createReplacementNode:function(G,_){var J=G.value,Z=this.board.elementsByName[J];return(G=this.createNode("node_op","op_execfun",this.createNode("node_var",_===!0?"$value":"$"),[this.createNode("node_str",Z.id)])).replaced=!0,G},collectDependencies:function(G,_,J){var Z,Q,ee,te;if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(G))for(te=G.length,Z=0;Z<te;Z++)this.collectDependencies(G[Z],_,J);else if(Q=G.value,G.type==="node_var"&&_.indexOf(Q)<0&&(ee=this.getvar(Q))&&ee.visProp&&ee.elType&&ee.elementClass&&ee.id&&(J[ee.id]=ee),G.type==="node_op"&&G.value==="op_execfun"&&G.children.length>1&&(G.children[0].value==="$"||G.children[0].value==="$value")&&G.children[1].length>0&&(J[ee=G.children[1][0].value]=this.board.objects[ee]),G.children)for(Z=G.children.length;Z>0;Z--)_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.children[Z-1])&&this.collectDependencies(G.children[Z-1],_,J)},resolveProperty:function(G,_,J){return J=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.def(J,!1),G&&G.methodMap&&(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.subs)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.subs[_])?G=G.subs:_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.methodMap[_])?_=G.methodMap[_]:(G=G.visProp,_=_.toLowerCase())),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isFunction(G)&&this._error("Accessing function properties is not allowed."),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G)||this._error(G+" is not an object"),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G[_])||this._error("unknown property "+_),J&&typeof G[_]=="function"?function(){return G[_].apply(G,arguments)}:G[_]},resolveType:function(G,_){var J,Z;if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(_)){for(J=0;J<_.length;J++)if((Z=this.resolveType(G,_[J]))!=="any")return Z}if(_.type==="node_op"&&_.value==="op_execfun"&&_.children[0].type==="node_var"&&_.children[0].value===G)return"function";if(_.type==="node_op"){for(J=0;J<_.children.length;J++)if(_.children[0].type==="node_var"&&_.children[0].value===G&&(_.value==="op_add"||_.value==="op_sub"||_.value==="op_mul"||_.value==="op_div"||_.value==="op_mod"||_.value==="op_exp"||_.value==="op_neg"))return"any";for(J=0;J<_.children.length;J++)if((Z=this.resolveType(G,_.children[J]))!=="any")return Z}return"any"},getLHS:function(G){var _;if(G.type==="node_var")_={o:this.scope.locals,what:G.value};else if(G.type==="node_op"&&G.value==="op_property")_={o:this.execute(G.children[0]),what:G.children[1]};else{if(G.type!=="node_op"||G.value!=="op_extvalue")throw new Error("Syntax error: Invalid left-hand side of assignment.");_={o:this.execute(G.children[0]),what:this.execute(G.children[1])}}return _},getLHSCompiler:function(G,_){var J;if(G.type==="node_var")J=G.value;else if(G.type==="node_op"&&G.value==="op_property")J=[this.compile(G.children[0],_),"'"+G.children[1]+"'"];else{if(G.type!=="node_op"||G.value!=="op_extvalue")throw new Error("Syntax error: Invalid left-hand side of assignment.");J=[this.compile(G.children[0],_),G.children[1].type==="node_const"?G.children[1].value:this.compile(G.children[1],_)]}return J},execute:function(G){var _,J,Z,Q,ee,te,ne,ie,re,oe,se=[];if(_=0,!G)return _;switch(this.line=G.line,this.col=G.col,G.type){case"node_op":switch(G.value){case"op_none":G.children[0]&&this.execute(G.children[0]),G.children[1]&&(_=this.execute(G.children[1]));break;case"op_assign":J=this.getLHS(G.children[0]),this.lhs[this.scope.id]=J.what,J.o.type&&J.o.elementClass&&J.o.methodMap&&J.what==="label"&&this._error("Left-hand side of assignment is read-only."),_=this.execute(G.children[1]),J.o!==this.scope.locals||_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(J.o)&&typeof J.what=="number"?this.setProp(J.o,J.what,_):this.letvar(J.what,_),this.lhs[this.scope.id]=0;break;case"op_if":this.execute(G.children[0])&&(_=this.execute(G.children[1]));break;case"op_conditional":case"op_if_else":_=this.execute(G.children[0])?this.execute(G.children[1]):this.execute(G.children[2]);break;case"op_while":for(;this.execute(G.children[0]);)this.execute(G.children[1]);break;case"op_do":do this.execute(G.children[0]);while(this.execute(G.children[1]));break;case"op_for":for(this.execute(G.children[0]);this.execute(G.children[1]);this.execute(G.children[2]))this.execute(G.children[3]);break;case"op_proplst":G.children[0]&&this.execute(G.children[0]),G.children[1]&&this.execute(G.children[1]);break;case"op_emptyobject":_={};break;case"op_proplst_val":this.propstack.push({}),this.propscope++,this.execute(G.children[0]),_=this.propstack[this.propscope],this.propstack.pop(),this.propscope--;break;case"op_prop":this.propstack[this.propscope][G.children[0]]=this.execute(G.children[1]);break;case"op_array":for(_=[],ee=G.children[0].length,Z=0;Z<ee;Z++)_.push(this.execute(G.children[0][Z]));break;case"op_extvalue":_=this.execute(G.children[0]),_=typeof(Z=this.execute(G.children[1]))=="number"&&Math.abs(Math.round(Z)-Z)<1e-12?_[Z]:void 0;break;case"op_return":if(this.scope!==0)return this.execute(G.children[0]);this._error("Unexpected return.");break;case"op_map":G.children[1].isMath||G.children[1].type==="node_var"||this._error("execute: In a map only function calls and mathematical expressions are allowed."),(ie=this.defineFunction(G)).isMap=!0,_=ie;break;case"op_function":(ie=this.defineFunction(G)).isMap=!1,_=ie;break;case"op_execfun":if(this.dpstack.push([]),this.pscope++,te=G.children[1],_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.children[2]))if(G.children[3])for(ne=G.children[2],re={},Z=0;Z<ne.length;Z++)re=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.deepCopy(re,this.execute(ne[Z]),!0);else re=this.execute(G.children[2]);for(G.children[0]._isFunctionName=!0,ie=this.execute(G.children[0]),delete G.children[0]._isFunctionName,oe=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(ie)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(ie.sc)?ie.sc:this,!ie.creator&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.children[2])&&this._error("Unexpected value. Only element creators are allowed to have a value after the function call."),Z=0;Z<te.length;Z++)_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(ie.scope)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(ie.scope.argtypes)&&ie.scope.argtypes[Z]==="function"?(te[Z]._isFunctionName=!0,se[Z]=this.execute(te[Z]),delete te[Z]._isFunctionName):se[Z]=this.execute(te[Z]),this.dpstack[this.pscope].push({line:G.children[1][Z].line,col:G.children[1][Z].ecol});if(typeof ie!="function"||ie.creator)if(typeof ie=="function"&&ie.creator){Q=this.line;try{for((_=ie(se,re)).jcLineStart=Q,_.jcLineEnd=G.eline,Z=Q;Z<=G.line;Z++)this.lineToElement[Z]=_;_.debugParents=this.dpstack[this.pscope]}catch(ae){this._error(ae.toString())}}else this._error("Function '"+ie+"' is undefined.");else _=ie.apply(oe,se);this.dpstack.pop(),this.pscope--;break;case"op_property":Q=this.execute(G.children[0]),J=G.children[1],_=this.resolveProperty(Q,J,!1),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(_)&&["number","string","boolean"].indexOf(typeof _)<0&&(_.sc=Q);break;case"op_use":this._warn("Use of the 'use' operator is deprecated."),this.use(G.children[0].toString());break;case"op_delete":this._warn("Use of the 'delete' operator is deprecated. Please use the remove() function."),J=this.getvar(G.children[0]),_=this.del(J);break;case"op_eq":_=this.execute(G.children[0])==this.execute(G.children[1]);break;case"op_neq":_=this.execute(G.children[0])!=this.execute(G.children[1]);break;case"op_approx":_=Math.abs(this.execute(G.children[0])-this.execute(G.children[1]))<_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.eps;break;case"op_gt":_=this.execute(G.children[0])>this.execute(G.children[1]);break;case"op_lt":_=this.execute(G.children[0])<this.execute(G.children[1]);break;case"op_geq":_=this.execute(G.children[0])>=this.execute(G.children[1]);break;case"op_leq":_=this.execute(G.children[0])<=this.execute(G.children[1]);break;case"op_or":_=this.execute(G.children[0])||this.execute(G.children[1]);break;case"op_and":_=this.execute(G.children[0])&&this.execute(G.children[1]);break;case"op_not":_=!this.execute(G.children[0]);break;case"op_add":_=this.add(this.execute(G.children[0]),this.execute(G.children[1]));break;case"op_sub":_=this.sub(this.execute(G.children[0]),this.execute(G.children[1]));break;case"op_div":_=this.div(this.execute(G.children[0]),this.execute(G.children[1]));break;case"op_mod":_=this.mod(this.execute(G.children[0]),this.execute(G.children[1]),!0);break;case"op_mul":_=this.mul(this.execute(G.children[0]),this.execute(G.children[1]));break;case"op_exp":_=this.pow(this.execute(G.children[0]),this.execute(G.children[1]));break;case"op_neg":_=this.neg(this.execute(G.children[0]))}break;case"node_var":_=this.getvar(G.value,!1,G._isFunctionName);break;case"node_const":_=G.value===null?null:Number(G.value);break;case"node_const_bool":_=G.value;break;case"node_str":_=G.value.replace(/\\(.)/g,"$1")}return _},compile:function(G,_){var J,Z,Q,ee="";if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(_)||(_=!1),!G)return ee;switch(G.type){case"node_op":switch(G.value){case"op_none":G.children[0]&&(ee=this.compile(G.children[0],_)),G.children[1]&&(ee+=this.compile(G.children[1],_));break;case"op_block":ee=`{
`+this.compile(G.children[0],_)+` }
`;break;case"op_assign":_?(J=this.getLHSCompiler(G.children[0],_),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(J)?ee="$jc$.setProp("+J[0]+", "+J[1]+", "+this.compile(G.children[1],_)+`);
`:(this.isLocalVariable(J)!==this.scope&&(this.scope.locals[J]=!0),ee="$jc$.scopes["+this.scope.id+"].locals['"+J+"'] = "+this.compile(G.children[1],_)+`;
`)):ee=(J=this.compile(G.children[0]))+" = "+this.compile(G.children[1],_)+`;
`;break;case"op_if":ee=" if ("+this.compile(G.children[0],_)+") "+this.compile(G.children[1],_);break;case"op_if_else":ee=" if ("+this.compile(G.children[0],_)+")"+this.compile(G.children[1],_),ee+=" else "+this.compile(G.children[2],_);break;case"op_conditional":ee="(("+this.compile(G.children[0],_)+")?("+this.compile(G.children[1],_),ee+="):("+this.compile(G.children[2],_)+"))";break;case"op_while":ee=" while ("+this.compile(G.children[0],_)+`) {
`+this.compile(G.children[1],_)+`}
`;break;case"op_do":ee=` do {
`+this.compile(G.children[0],_)+"} while ("+this.compile(G.children[1],_)+`);
`;break;case"op_for":ee=" for ("+this.compile(G.children[0],_)+this.compile(G.children[1],_)+"; "+this.compile(G.children[2],_).slice(0,-2)+`) {
`+this.compile(G.children[3],_)+`
}
`;break;case"op_proplst":G.children[0]&&(ee=this.compile(G.children[0],_)+", "),ee+=this.compile(G.children[1],_);break;case"op_prop":ee=G.children[0]+": "+this.compile(G.children[1],_);break;case"op_emptyobject":ee=_?"{}":"<< >>";break;case"op_proplst_val":ee=this.compile(G.children[0],_);break;case"op_array":for(Q=[],Z=0;Z<G.children[0].length;Z++)Q.push(this.compile(G.children[0][Z],_));ee="["+Q.join(", ")+"]";break;case"op_extvalue":ee=this.compile(G.children[0],_)+"["+this.compile(G.children[1],_)+"]";break;case"op_return":ee=" return "+this.compile(G.children[0],_)+`;
`;break;case"op_map":G.children[1].isMath||G.children[1].type==="node_var"||this._error("compile: In a map only function calls and mathematical expressions are allowed."),Q=G.children[0],ee=_?" $jc$.makeMap(function ("+Q.join(", ")+") { return "+this.compile(G.children[1],_)+"; })":"map ("+Q.join(", ")+") -> "+this.compile(G.children[1],_);break;case"op_function":Q=G.children[0],this.pushScope(Q),ee=_?this.functionCodeJS(G):" function ("+Q.join(", ")+") "+this.compile(G.children[1],_),this.popScope();break;case"op_execfunmath":console.log("op_execfunmath: TODO"),ee="-1";break;case"op_execfun":if(G.children[2]){for(Q=[],Z=0;Z<G.children[2].length;Z++)Q.push(this.compile(G.children[2][Z],_));J=_?"$jc$.mergeAttributes("+Q.join(", ")+")":Q.join(", ")}for(G.children[0].withProps=!!G.children[2],Q=[],Z=0;Z<G.children[1].length;Z++)Q.push(this.compile(G.children[1][Z],_));ee=this.compile(G.children[0],_)+"("+Q.join(", ")+(G.children[2]&&_?", "+J:"")+")"+(G.children[2]&&!_?" "+J:""),_&&(ee+=`
`),_&&G.children[0].value==="$"&&(ee="$jc$.board.objects["+this.compile(G.children[1][0],_)+"]");break;case"op_property":ee=_&&G.children[1]!=="X"&&G.children[1]!=="Y"?"$jc$.resolveProperty("+this.compile(G.children[0],_)+", '"+G.children[1]+"', true)":this.compile(G.children[0],_)+"."+G.children[1];break;case"op_use":this._warn("Use of the 'use' operator is deprecated."),ee=_?"$jc$.use('":"use('",ee+=G.children[0].toString()+"');";break;case"op_delete":this._warn("Use of the 'delete' operator is deprecated. Please use the remove() function."),ee=_?"$jc$.del(":"remove(",ee+=this.compile(G.children[0],_)+")";break;case"op_eq":ee="("+this.compile(G.children[0],_)+" === "+this.compile(G.children[1],_)+")";break;case"op_neq":ee="("+this.compile(G.children[0],_)+" !== "+this.compile(G.children[1],_)+")";break;case"op_approx":ee="("+this.compile(G.children[0],_)+" ~= "+this.compile(G.children[1],_)+")";break;case"op_gt":ee=_?"$jc$.gt("+this.compile(G.children[0],_)+", "+this.compile(G.children[1],_)+")":"("+this.compile(G.children[0],_)+" > "+this.compile(G.children[1],_)+")";break;case"op_lt":ee=_?"$jc$.lt("+this.compile(G.children[0],_)+", "+this.compile(G.children[1],_)+")":"("+this.compile(G.children[0],_)+" < "+this.compile(G.children[1],_)+")";break;case"op_geq":ee=_?"$jc$.geq("+this.compile(G.children[0],_)+", "+this.compile(G.children[1],_)+")":"("+this.compile(G.children[0],_)+" >= "+this.compile(G.children[1],_)+")";break;case"op_leq":ee=_?"$jc$.leq("+this.compile(G.children[0],_)+", "+this.compile(G.children[1],_)+")":"("+this.compile(G.children[0],_)+" <= "+this.compile(G.children[1],_)+")";break;case"op_or":ee="("+this.compile(G.children[0],_)+" || "+this.compile(G.children[1],_)+")";break;case"op_and":ee="("+this.compile(G.children[0],_)+" && "+this.compile(G.children[1],_)+")";break;case"op_not":ee="!("+this.compile(G.children[0],_)+")";break;case"op_add":ee=_?"$jc$.add("+this.compile(G.children[0],_)+", "+this.compile(G.children[1],_)+")":"("+this.compile(G.children[0],_)+" + "+this.compile(G.children[1],_)+")";break;case"op_sub":ee=_?"$jc$.sub("+this.compile(G.children[0],_)+", "+this.compile(G.children[1],_)+")":"("+this.compile(G.children[0],_)+" - "+this.compile(G.children[1],_)+")";break;case"op_div":ee=_?"$jc$.div("+this.compile(G.children[0],_)+", "+this.compile(G.children[1],_)+")":"("+this.compile(G.children[0],_)+" / "+this.compile(G.children[1],_)+")";break;case"op_mod":ee=_?"$jc$.mod("+this.compile(G.children[0],_)+", "+this.compile(G.children[1],_)+", true)":"("+this.compile(G.children[0],_)+" % "+this.compile(G.children[1],_)+")";break;case"op_mul":ee=_?"$jc$.mul("+this.compile(G.children[0],_)+", "+this.compile(G.children[1],_)+")":"("+this.compile(G.children[0],_)+" * "+this.compile(G.children[1],_)+")";break;case"op_exp":ee=_?"$jc$.pow("+this.compile(G.children[0],_)+", "+this.compile(G.children[1],_)+")":"("+this.compile(G.children[0],_)+"^"+this.compile(G.children[1],_)+")";break;case"op_neg":ee=_?"$jc$.neg("+this.compile(G.children[0],_)+")":"(-"+this.compile(G.children[0],_)+")"}break;case"node_var":ee=_?this.getvarJS(G.value,!1,G.withProps):G.value;break;case"node_const":case"node_const_bool":ee=G.value;break;case"node_str":ee="'"+G.value+"'"}return G.needsAngleBrackets&&(ee=_?`{
`+ee+` }
`:"<< "+ee+` >>
`),ee},getName:function(G,_){var J="";return _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.getName)?(J=G.getName(),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(J)&&J!==""||!_||(J=G.id)):_&&(J=G.id),J},X:function(G){return G.X()},Y:function(G){return G.Y()},V:function(G){return G.Value()},L:function(G){return G.L()},area:function(G){return _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.Area)||this._error("Error: Can't calculate area."),G.Area()},perimeter:function(G){return _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.Perimeter)||this._error("Error: Can't calculate perimeter."),G.Perimeter()},dist:function(G,_){return _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.Dist)||this._error("Error: Can't calculate distance."),G.Dist(_)},radius:function(G){return _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.Radius)||this._error("Error: Can't calculate radius."),G.Radius()},slope:function(G){return _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(G.Slope)||this._error("Error: Can't calculate slope."),G.Slope()},add:function(G,_){var J,Z,Q;if(G=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(G),_=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(_),_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(G)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(_))Q=_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.add(G,_);else if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(_))for(Z=Math.min(G.length,_.length),Q=[],J=0;J<Z;J++)Q[J]=G[J]+_[J];else _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(_)?Q=G+_:_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isString(G)||_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isString(_)?Q=G.toString()+_.toString():this._error("Operation + not defined on operands "+typeof G+" and "+typeof _);return Q},sub:function(G,_){var J,Z,Q;if(G=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(G),_=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(_),_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(G)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(_))Q=_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.sub(G,_);else if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(_))for(Z=Math.min(G.length,_.length),Q=[],J=0;J<Z;J++)Q[J]=G[J]-_[J];else _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(_)?Q=G-_:this._error("Operation - not defined on operands "+typeof G+" and "+typeof _);return Q},neg:function(G){var _,J,Z;if(G=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(G),_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(G))Z=_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.negative(G);else if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(G))for(J=G.length,Z=[],_=0;_<J;_++)Z[_]=-G[_];else _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(G)?Z=-G:this._error("Unary operation - not defined on operand "+typeof G);return Z},mul:function(G,_){var J,Z,Q;if(G=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(G),_=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(_),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(_)&&(J=G,_=G=_),_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(G)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(_))Q=_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.mul(G,_);else if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(_))Z=Math.min(G.length,_.length),Q=_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.innerProduct(G,_,Z);else if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(_))for(Z=_.length,Q=[],J=0;J<Z;J++)Q[J]=G*_[J];else _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(_)?Q=G*_:this._error("Operation * not defined on operands "+typeof G+" and "+typeof _);return Q},div:function(G,_){var J,Z,Q;if(G=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(G),_=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(_),_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(G)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(_))Q=_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.div(G,_);else if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(_))for(Z=G.length,Q=[],J=0;J<Z;J++)Q[J]=G[J]/_;else _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(_)?Q=G/_:this._error("Operation * not defined on operands "+typeof G+" and "+typeof _);return Q},mod:function(G,_){var J,Z,Q;if(G=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(G),_=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(_),_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(G)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(_))return _math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.fmod(G,_);if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(_))for(Z=G.length,Q=[],J=0;J<Z;J++)Q[J]=_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.mod(G[J],_,!0);else _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(G)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(_)?Q=_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.mod(G,_,!0):this._error("Operation * not defined on operands "+typeof G+" and "+typeof _);return Q},pow:function(G,_){return G=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(G),_=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(_),_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(G)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(_)?_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.pow(G,_):_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.pow(G,_)},lt:function(G,_){return _math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(G)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(_)?_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.lt(G,_):G<_},leq:function(G,_){return _math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(G)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(_)?_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.leq(G,_):G<=_},gt:function(G,_){return _math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(G)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(_)?_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.gt(G,_):G>_},geq:function(G,_){return _math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(G)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(_)?_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.geq(G,_):G>=_},randint:function(G,_,J){return _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(J)||(J=1),Math.round(Math.random()*(_-G)/J)*J+G},DDD:function(G){console.log("Dummy derivative function. This should never appear!")},ifthen:function(G,_,J){return G?_:J},del:function(G){typeof G=="object"&&_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.exists(G.type)&&_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.exists(G.elementClass)&&this.board.removeObject(G)},eval:function(G){return _jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.evaluate(G)},use:function(G){var _,J,Z=!1;if(typeof G=="string"){for(_ in _jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.boards)if(_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.boards.hasOwnProperty(_)&&_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.boards[_].container===G){J=_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.boards[_],Z=!0;break}}else J=G,Z=!0;Z?(this.board=J,this.builtIn.$board=J,this.builtIn.$board.src="$jc$.board"):this._error("Board '"+G+"' not found!")},findSymbol:function(G,_){var J,Z;for(Z=(_=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.def(_,-1))===-1?this.scope:this.scopes[_];Z!==null;){for(J in Z.locals)if(Z.locals.hasOwnProperty(J)&&Z.locals[J]===G)return[J,Z];Z=Z.previous}return[]},importModule:function(G){return priv.modules[G.toLowerCase()]},defineBuiltIn:function(){var G=this,_={PI:Math.PI,EULER:Math.E,D:G.DDD,X:G.X,Y:G.Y,V:G.V,Value:G.V,L:G.L,Length:G.L,acosh:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.acosh,acot:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.acot,asinh:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.asinh,binomial:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.binomial,cbrt:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.cbrt,cosh:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.cosh,cot:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.cot,deg:_math_geometry_js__WEBPACK_IMPORTED_MODULE_5__.A.trueAngle,A:G.area,area:G.area,Area:G.area,perimeter:G.perimeter,Perimeter:G.perimeter,dist:G.dist,Dist:G.dist,R:G.radius,radius:G.radius,Radius:G.radius,erf:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.erf,erfc:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.erfc,erfi:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.erfi,factorial:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.factorial,gcd:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.gcd,lb:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.log2,lcm:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.lcm,ld:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.log2,lg:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.log10,ln:Math.log,log:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.log,log10:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.log10,log2:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.log2,ndtr:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.ndtr,ndtri:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.ndtri,nthroot:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.nthroot,pow:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.pow,rad:_math_geometry_js__WEBPACK_IMPORTED_MODULE_5__.A.rad,ratpow:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.ratpow,trunc:_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.trunc,sinh:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.sinh,slope:G.slope,Slope:G.slope,randint:G.randint,IfThen:G.ifthen,import:G.importModule,eval:G.eval,use:G.use,remove:G.del,$:G.getElementById,$value:function(J){return G.getElementById(J).Value()},getName:G.getName,name:G.getName,$board:G.board,$log:G.log};return _.rad.sc=_math_geometry_js__WEBPACK_IMPORTED_MODULE_5__.A,_.deg.sc=_math_geometry_js__WEBPACK_IMPORTED_MODULE_5__.A,_.factorial.sc=_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A,_.X.src="$jc$.X",_.Y.src="$jc$.Y",_.V.src="$jc$.V",_.Value.src="$jc$.V",_.L.src="$jc$.L",_.Length.src="$jc$.L",_.acosh.src="JXG.Math.acosh",_.acot.src="JXG.Math.acot",_.asinh.src="JXG.Math.asinh",_.binomial.src="JXG.Math.binomial",_.cbrt.src="JXG.Math.cbrt",_.cot.src="JXG.Math.cot",_.cosh.src="JXG.Math.cosh",_.deg.src="JXG.Math.Geometry.trueAngle",_.erf.src="JXG.Math.erf",_.erfc.src="JXG.Math.erfc",_.erfi.src="JXG.Math.erfi",_.A.src="$jc$.area",_.area.src="$jc$.area",_.Area.src="$jc$.area",_.perimeter.src="$jc$.perimeter",_.Perimeter.src="$jc$.perimeter",_.dist.src="$jc$.dist",_.Dist.src="$jc$.dist",_.R.src="$jc$.radius",_.radius.src="$jc$.radius",_.Radius.src="$jc$.radius",_.factorial.src="JXG.Math.factorial",_.gcd.src="JXG.Math.gcd",_.lb.src="JXG.Math.log2",_.lcm.src="JXG.Math.lcm",_.ld.src="JXG.Math.log2",_.lg.src="JXG.Math.log10",_.ln.src="Math.log",_.log.src="JXG.Math.log",_.log10.src="JXG.Math.log10",_.log2.src="JXG.Math.log2",_.ndtr.src="JXG.Math.ndtr",_.ndtri.src="JXG.Math.ndtri",_.nthroot.src="JXG.Math.nthroot",_.pow.src="JXG.Math.pow",_.rad.src="JXG.Math.Geometry.rad",_.ratpow.src="JXG.Math.ratpow",_.trunc.src="JXG.trunc",_.sinh.src="JXG.Math.sinh",_.slope.src="$jc$.slope",_.Slope.src="$jc$.slope",_.randint.src="$jc$.randint",_.import.src="$jc$.importModule",_.eval.src="$jc$.eval",_.use.src="$jc$.use",_.remove.src="$jc$.del",_.IfThen.src="$jc$.ifthen",_.$.src="(function (n) { return $jc$.board.select(n); })",_.$value.src="(function (n) { return $jc$.board.select(n).Value(); })",_.getName.src="$jc$.getName",_.name.src="$jc$.getName",_.$board&&(_.$board.src="$jc$.board"),_.$log.src="$jc$.log",_=_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.merge(_,G._addedBuiltIn)},_addedBuiltIn:{},addBuiltIn:function(G,_){if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(this.builtIn)){if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(this.builtIn[G]))return;this.builtIn[G]=_,this.builtIn[G].src="$jc$."+G}_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(this._addedBuiltIn[G])||(this._addedBuiltIn[G]=_,this._addedBuiltIn[G].src="$jc$."+G,_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.JessieCode.prototype[G]=_)},getPossibleOperands:function(){var G,_,J,Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue=["E"],de=this.builtIn||this.defineBuiltIn(),pe=Math;for(ae=function(fe,_e){return fe.toLowerCase().localeCompare(_e.toLowerCase())},le=function(fe,_e){var ye=null;if(_e==="jc")ye=de[fe];else{if(_e!=="Math")return;ye=pe[fe]}if(!(ue.indexOf(fe)>=0))return _jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.isFunction(ye)?{name:fe,type:"function",numParams:ye.length,origin:_e}:_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.isNumber(ye)?{name:fe,type:"constant",value:ye,origin:_e}:void(fe.startsWith("$")||ye!==void 0&&console.error("undefined type",ye))},G=Object.getOwnPropertyNames(de).sort(ae),_=Object.getOwnPropertyNames(pe).sort(ae),J=[],Z=0,Q=0;Z<G.length||Q<_.length;)G[Z]===_[Q]?(ee=le(_[Q],"Math"),_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.exists(ee)&&J.push(ee),Z++,Q++):!_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.exists(_[Q])||G[Z].toLowerCase().localeCompare(_[Q].toLowerCase())<0?(ee=le(G[Z],"jc"),_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.exists(ee)&&J.push(ee),Z++):(ee=le(_[Q],"Math"),_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.exists(ee)&&J.push(ee),Q++);for(ie=[],re=[],oe=[],se={},te=J.length,Z=0;Z<te;Z++){switch((ne=J[Z]).type){case"function":ie.push(ne.name),ne.origin==="jc"&&re.push(ne.name);break;case"constant":oe.push(ne.name)}se[ne.name]=ne}return{all:se,list:J,functions:ie,functions_jessiecode:re,constants:oe}},_debug:function(G){typeof console=="object"&&console.log?console.log(G):_utils_env_js__WEBPACK_IMPORTED_MODULE_8__.A.isBrowser&&document&&document.getElementById("debug")!==null&&(document.getElementById("debug").innerText+=G+`
`)},_error:function(G){var _=new Error("Error("+this.line+"): "+G);throw _.line=this.line,_},_warn:function(G){typeof console=="object"&&console.log?console.log("Warning("+this.line+"): "+G):_utils_env_js__WEBPACK_IMPORTED_MODULE_8__.A.isBrowser&&document&&document.getElementById(this.warnLog)!==null&&(document.getElementById(this.warnLog).innerText+="Warning("+this.line+"): "+G+`
`)},_log:function(G){typeof window!="object"&&typeof self=="object"&&self.postMessage?self.postMessage({type:"log",msg:"Log: "+G.toString()}):console.log("Log: ",arguments)}});var parser=(function(){var G=function(Zt,Ut,qt,Rt){for(qt=qt||{},Rt=Zt.length;Rt--;qt[Zt[Rt]]=Ut);return qt},_=[2,14],J=[1,13],Z=[1,37],Q=[1,14],ee=[1,15],te=[1,21],ne=[1,16],ie=[1,17],re=[1,33],oe=[1,18],se=[1,19],ae=[1,12],le=[1,59],ue=[1,60],de=[1,58],pe=[1,46],fe=[1,48],_e=[1,49],ye=[1,50],be=[1,51],Ae=[1,52],Ce=[1,53],Ee=[1,54],Re=[1,45],Te=[1,38],Me=[1,39],Ne=[5,7,8,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],Le=[5,7,8,12,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],Ie=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],Ge=[2,48],He=[1,72],Be=[10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,66,83,86],ze=[1,78],Fe=[8,10,16,32,34,35,37,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],$e=[1,82],Xe=[8,10,16,32,34,35,37,39,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],je=[1,83],qe=[1,84],Ze=[1,85],st=[8,10,16,32,34,35,37,39,41,42,43,50,51,53,54,55,57,64,65,66,83,86],St=[1,89],it=[1,90],lt=[1,91],ft=[1,92],kt=[1,97],Ht=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,53,54,55,57,64,65,66,83,86],Wt=[1,103],ni=[1,104],jt=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,57,64,65,66,83,86],pt=[1,105],Ke=[1,106],Mt=[1,107],Bt=[1,126],Lt=[1,139],Ft=[83,86],ai=[1,150],Qt=[10,66,86],hi=[8,10,16,20,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,82,83,86],Qe=[1,167],Ye=[10,86],_t={trace:function(){},yy:{},symbols_:{error:2,Program:3,StatementList:4,EOF:5,IfStatement:6,IF:7,"(":8,Expression:9,")":10,Statement:11,ELSE:12,LoopStatement:13,WHILE:14,FOR:15,";":16,DO:17,UnaryStatement:18,USE:19,IDENTIFIER:20,DELETE:21,ReturnStatement:22,RETURN:23,EmptyStatement:24,StatementBlock:25,"{":26,"}":27,ExpressionStatement:28,AssignmentExpression:29,ConditionalExpression:30,LeftHandSideExpression:31,"=":32,LogicalORExpression:33,"?":34,":":35,LogicalANDExpression:36,"||":37,EqualityExpression:38,"&&":39,RelationalExpression:40,"==":41,"!=":42,"~=":43,AdditiveExpression:44,"<":45,">":46,"<=":47,">=":48,MultiplicativeExpression:49,"+":50,"-":51,UnaryExpression:52,"*":53,"/":54,"%":55,ExponentExpression:56,"^":57,"!":58,MemberExpression:59,CallExpression:60,PrimaryExpression:61,FunctionExpression:62,MapExpression:63,".":64,"[":65,"]":66,BasicLiteral:67,ObjectLiteral:68,ArrayLiteral:69,NullLiteral:70,BooleanLiteral:71,StringLiteral:72,NumberLiteral:73,NULL:74,TRUE:75,FALSE:76,STRING:77,NUMBER:78,NAN:79,INFINITY:80,ElementList:81,"<<":82,">>":83,PropertyList:84,Property:85,",":86,PropertyName:87,Arguments:88,AttributeList:89,Attribute:90,FUNCTION:91,ParameterDefinitionList:92,MAP:93,"->":94,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",7:"IF",8:"(",10:")",12:"ELSE",14:"WHILE",15:"FOR",16:";",17:"DO",19:"USE",20:"IDENTIFIER",21:"DELETE",23:"RETURN",26:"{",27:"}",32:"=",34:"?",35:":",37:"||",39:"&&",41:"==",42:"!=",43:"~=",45:"<",46:">",47:"<=",48:">=",50:"+",51:"-",53:"*",54:"/",55:"%",57:"^",58:"!",64:".",65:"[",66:"]",74:"NULL",75:"TRUE",76:"FALSE",77:"STRING",78:"NUMBER",79:"NAN",80:"INFINITY",82:"<<",83:">>",86:",",91:"FUNCTION",93:"MAP",94:"->"},productions_:[0,[3,2],[6,5],[6,7],[13,5],[13,9],[13,7],[18,2],[18,2],[22,2],[22,3],[24,1],[25,3],[4,2],[4,0],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[28,2],[9,1],[29,1],[29,3],[30,1],[30,5],[33,1],[33,3],[36,1],[36,3],[38,1],[38,3],[38,3],[38,3],[40,1],[40,3],[40,3],[40,3],[40,3],[44,1],[44,3],[44,3],[49,1],[49,3],[49,3],[49,3],[56,1],[56,3],[52,1],[52,2],[52,2],[52,2],[31,1],[31,1],[59,1],[59,1],[59,1],[59,3],[59,4],[61,1],[61,1],[61,1],[61,1],[61,3],[67,1],[67,1],[67,1],[67,1],[70,1],[71,1],[71,1],[72,1],[73,1],[73,1],[73,1],[69,2],[69,3],[68,2],[68,3],[84,1],[84,3],[85,3],[87,1],[87,1],[87,1],[60,2],[60,3],[60,2],[60,4],[60,3],[88,2],[88,3],[89,1],[89,3],[90,1],[90,1],[81,1],[81,3],[62,4],[62,5],[63,5],[63,6],[92,1],[92,3]],performAction:function(Zt,Ut,qt,Rt,Pt,vt,tt){var et=vt.length-1;switch(Pt){case 1:return vt[et-1];case 2:this.$=dt.createNode(yt(tt[et-4]),"node_op","op_if",vt[et-2],vt[et]);break;case 3:this.$=dt.createNode(yt(tt[et-6]),"node_op","op_if_else",vt[et-4],vt[et-2],vt[et]);break;case 4:this.$=dt.createNode(yt(tt[et-4]),"node_op","op_while",vt[et-2],vt[et]);break;case 5:this.$=dt.createNode(yt(tt[et-8]),"node_op","op_for",vt[et-6],vt[et-4],vt[et-2],vt[et]);break;case 6:this.$=dt.createNode(yt(tt[et-6]),"node_op","op_do",vt[et-5],vt[et-2]);break;case 7:this.$=dt.createNode(yt(tt[et-1]),"node_op","op_use",vt[et]);break;case 8:this.$=dt.createNode(yt(tt[et-1]),"node_op","op_delete",vt[et]);break;case 9:this.$=dt.createNode(yt(tt[et-1]),"node_op","op_return",void 0);break;case 10:this.$=dt.createNode(yt(tt[et-2]),"node_op","op_return",vt[et-1]);break;case 11:case 14:this.$=dt.createNode(yt(tt[et]),"node_op","op_none");break;case 12:this.$=dt.createNode(yt(tt[et-2]),"node_op","op_block",vt[et-1]);break;case 13:this.$=dt.createNode(yt(tt[et-1]),"node_op","op_none",vt[et-1],vt[et]);break;case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 23:case 24:case 26:case 28:case 30:case 32:case 36:case 41:case 44:case 48:case 50:case 52:case 54:case 55:case 56:case 58:case 62:case 81:case 84:case 85:case 86:this.$=vt[et];break;case 22:case 65:case 93:this.$=vt[et-1];break;case 25:this.$=dt.createNode(yt(tt[et-2]),"node_op","op_assign",vt[et-2],vt[et]),this.$.isMath=!1;break;case 27:this.$=dt.createNode(yt(tt[et-4]),"node_op","op_conditional",vt[et-4],vt[et-2],vt[et]),this.$.isMath=!1;break;case 29:this.$=dt.createNode(yt(tt[et-2]),"node_op","op_or",vt[et-2],vt[et]),this.$.isMath=!1;break;case 31:this.$=dt.createNode(yt(tt[et-2]),"node_op","op_and",vt[et-2],vt[et]),this.$.isMath=!1;break;case 33:this.$=dt.createNode(yt(tt[et-2]),"node_op","op_eq",vt[et-2],vt[et]),this.$.isMath=!1;break;case 34:this.$=dt.createNode(yt(tt[et-2]),"node_op","op_neq",vt[et-2],vt[et]),this.$.isMath=!1;break;case 35:this.$=dt.createNode(yt(tt[et-2]),"node_op","op_approx",vt[et-2],vt[et]),this.$.isMath=!1;break;case 37:this.$=dt.createNode(yt(tt[et-2]),"node_op","op_lt",vt[et-2],vt[et]),this.$.isMath=!1;break;case 38:this.$=dt.createNode(yt(tt[et-2]),"node_op","op_gt",vt[et-2],vt[et]),this.$.isMath=!1;break;case 39:this.$=dt.createNode(yt(tt[et-2]),"node_op","op_leq",vt[et-2],vt[et]),this.$.isMath=!1;break;case 40:this.$=dt.createNode(yt(tt[et-2]),"node_op","op_geq",vt[et-2],vt[et]),this.$.isMath=!1;break;case 42:this.$=dt.createNode(yt(tt[et-2]),"node_op","op_add",vt[et-2],vt[et]),this.$.isMath=!0;break;case 43:this.$=dt.createNode(yt(tt[et-2]),"node_op","op_sub",vt[et-2],vt[et]),this.$.isMath=!0;break;case 45:this.$=dt.createNode(yt(tt[et-2]),"node_op","op_mul",vt[et-2],vt[et]),this.$.isMath=!0;break;case 46:this.$=dt.createNode(yt(tt[et-2]),"node_op","op_div",vt[et-2],vt[et]),this.$.isMath=!0;break;case 47:this.$=dt.createNode(yt(tt[et-2]),"node_op","op_mod",vt[et-2],vt[et]),this.$.isMath=!0;break;case 49:this.$=dt.createNode(yt(tt[et-2]),"node_op","op_exp",vt[et-2],vt[et]),this.$.isMath=!0;break;case 51:this.$=dt.createNode(yt(tt[et-1]),"node_op","op_not",vt[et]),this.$.isMath=!1;break;case 53:this.$=dt.createNode(yt(tt[et-1]),"node_op","op_neg",vt[et]),this.$.isMath=!0;break;case 57:case 63:case 64:case 66:case 67:case 68:case 97:this.$=vt[et],this.$.isMath=!1;break;case 59:case 91:this.$=dt.createNode(yt(tt[et-2]),"node_op","op_property",vt[et-2],vt[et]),this.$.isMath=!0;break;case 60:case 90:this.$=dt.createNode(yt(tt[et-3]),"node_op","op_extvalue",vt[et-3],vt[et-1]),this.$.isMath=!0;break;case 61:this.$=dt.createNode(yt(tt[et]),"node_var",vt[et]);break;case 69:this.$=vt[et],this.$.isMath=!0;break;case 70:this.$=dt.createNode(yt(tt[et]),"node_const",null);break;case 71:this.$=dt.createNode(yt(tt[et]),"node_const_bool",!0);break;case 72:this.$=dt.createNode(yt(tt[et]),"node_const_bool",!1);break;case 73:this.$=dt.createNode(yt(tt[et]),"node_str",vt[et].substring(1,vt[et].length-1));break;case 74:this.$=dt.createNode(yt(tt[et]),"node_const",parseFloat(vt[et]));break;case 75:this.$=dt.createNode(yt(tt[et]),"node_const",NaN);break;case 76:this.$=dt.createNode(yt(tt[et]),"node_const",1/0);break;case 77:this.$=dt.createNode(yt(tt[et-1]),"node_op","op_array",[]);break;case 78:this.$=dt.createNode(yt(tt[et-2]),"node_op","op_array",vt[et-1]);break;case 79:this.$=dt.createNode(yt(tt[et-1]),"node_op","op_emptyobject",{}),this.$.needsAngleBrackets=!0;break;case 80:this.$=dt.createNode(yt(tt[et-2]),"node_op","op_proplst_val",vt[et-1]),this.$.needsAngleBrackets=!0;break;case 82:this.$=dt.createNode(yt(tt[et-2]),"node_op","op_proplst",vt[et-2],vt[et]);break;case 83:this.$=dt.createNode(yt(tt[et-2]),"node_op","op_prop",vt[et-2],vt[et]);break;case 87:case 89:this.$=dt.createNode(yt(tt[et-1]),"node_op","op_execfun",vt[et-1],vt[et]),this.$.isMath=!0;break;case 88:this.$=dt.createNode(yt(tt[et-2]),"node_op","op_execfun",vt[et-2],vt[et-1],vt[et],!0),this.$.isMath=!1;break;case 92:this.$=[];break;case 94:case 98:case 104:this.$=[vt[et]];break;case 95:case 99:case 105:this.$=vt[et-2].concat(vt[et]);break;case 96:this.$=dt.createNode(yt(tt[et]),"node_var",vt[et]),this.$.isMath=!0;break;case 100:this.$=dt.createNode(yt(tt[et-3]),"node_op","op_function",[],vt[et]),this.$.isMath=!1;break;case 101:this.$=dt.createNode(yt(tt[et-4]),"node_op","op_function",vt[et-2],vt[et]),this.$.isMath=!1;break;case 102:this.$=dt.createNode(yt(tt[et-4]),"node_op","op_map",[],vt[et]);break;case 103:this.$=dt.createNode(yt(tt[et-5]),"node_op","op_map",vt[et-3],vt[et])}},table:[G([5,7,8,14,15,16,17,19,20,21,23,26,50,51,58,65,74,75,76,77,78,79,80,82,91,93],_,{3:1,4:2}),{1:[3]},{5:[1,3],6:6,7:J,8:Z,9:20,11:4,13:7,14:Q,15:ee,16:te,17:ne,18:8,19:ie,20:re,21:oe,22:9,23:se,24:11,25:5,26:ae,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{1:[2,1]},G(Ne,[2,13]),G(Le,[2,15]),G(Le,[2,16]),G(Le,[2,17]),G(Le,[2,18]),G(Le,[2,19]),G(Le,[2,20]),G(Le,[2,21]),G([7,8,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],_,{4:61}),{8:[1,62]},{8:[1,63]},{8:[1,64]},{6:6,7:J,8:Z,9:20,11:65,13:7,14:Q,15:ee,16:te,17:ne,18:8,19:ie,20:re,21:oe,22:9,23:se,24:11,25:5,26:ae,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{20:[1,66]},{20:[1,67]},{8:Z,9:69,16:[1,68],20:re,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{16:[1,70]},G(Le,[2,11]),G(Ie,[2,23]),G(Ie,[2,24]),G([8,10,16,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,64,65,66,83,86],Ge,{32:[1,71],57:He}),G([8,10,16,32,35,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],[2,26],{34:[1,73],37:[1,74]}),G(Be,[2,54],{88:77,8:ze,64:[1,75],65:[1,76]}),G(Be,[2,55],{88:79,8:ze,64:[1,81],65:[1,80]}),G(Fe,[2,28],{39:$e}),G(Ie,[2,56]),G(Ie,[2,57]),G(Ie,[2,58]),G(Xe,[2,30],{41:je,42:qe,43:Ze}),G(Ie,[2,61]),G(Ie,[2,62]),G(Ie,[2,63]),G(Ie,[2,64]),{8:Z,9:86,20:re,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{8:[1,87]},{8:[1,88]},G(st,[2,32],{45:St,46:it,47:lt,48:ft}),G(Ie,[2,66]),G(Ie,[2,67]),G(Ie,[2,68]),G(Ie,[2,69]),{20:kt,72:98,73:99,77:be,78:Ae,79:Ce,80:Ee,83:[1,93],84:94,85:95,87:96},{8:Z,20:re,29:102,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,66:[1,100],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,81:101,82:Re,91:Te,93:Me},G(Ht,[2,36],{50:Wt,51:ni}),G(Ie,[2,70]),G(Ie,[2,71]),G(Ie,[2,72]),G(Ie,[2,73]),G(Ie,[2,74]),G(Ie,[2,75]),G(Ie,[2,76]),G(jt,[2,41],{53:pt,54:Ke,55:Mt}),G(Ie,[2,44]),G(Ie,[2,50]),{8:Z,20:re,31:109,50:le,51:ue,52:108,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{8:Z,20:re,31:109,50:le,51:ue,52:110,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{8:Z,20:re,31:109,50:le,51:ue,52:111,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{6:6,7:J,8:Z,9:20,11:4,13:7,14:Q,15:ee,16:te,17:ne,18:8,19:ie,20:re,21:oe,22:9,23:se,24:11,25:5,26:ae,27:[1,112],28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{8:Z,9:113,20:re,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{8:Z,9:114,20:re,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{8:Z,9:115,20:re,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{14:[1,116]},G(Le,[2,7]),G(Le,[2,8]),G(Le,[2,9]),{16:[1,117]},G(Le,[2,22]),{8:Z,20:re,29:118,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{8:Z,20:re,31:109,50:le,51:ue,52:119,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{8:Z,20:re,29:120,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{8:Z,20:re,31:109,36:121,38:32,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{20:[1,122]},{8:Z,9:123,20:re,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},G(Ie,[2,87],{89:124,90:125,68:127,20:Bt,82:Re}),{8:Z,10:[1,128],20:re,29:102,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,81:129,82:Re,91:Te,93:Me},G(Ie,[2,89]),{8:Z,9:130,20:re,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{20:[1,131]},{8:Z,20:re,31:109,38:132,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{8:Z,20:re,31:109,40:133,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{8:Z,20:re,31:109,40:134,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{8:Z,20:re,31:109,40:135,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{10:[1,136]},{10:[1,137],20:Lt,92:138},{10:[1,140],20:Lt,92:141},{8:Z,20:re,31:109,44:142,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{8:Z,20:re,31:109,44:143,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{8:Z,20:re,31:109,44:144,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{8:Z,20:re,31:109,44:145,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},G(Ie,[2,79]),{83:[1,146],86:[1,147]},G(Ft,[2,81]),{35:[1,148]},{35:[2,84]},{35:[2,85]},{35:[2,86]},G(Ie,[2,77]),{66:[1,149],86:ai},G(Qt,[2,98]),{8:Z,20:re,31:109,49:151,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{8:Z,20:re,31:109,49:152,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{8:Z,20:re,31:109,50:le,51:ue,52:153,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{8:Z,20:re,31:109,50:le,51:ue,52:154,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{8:Z,20:re,31:109,50:le,51:ue,52:155,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},G(Ie,[2,51]),G([8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,64,65,66,83,86],Ge,{57:He}),G(Ie,[2,52]),G(Ie,[2,53]),G([5,7,8,10,12,14,15,16,17,19,20,21,23,26,27,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,58,64,65,66,74,75,76,77,78,79,80,82,83,86,91,93],[2,12]),{10:[1,156]},{10:[1,157]},{16:[1,158]},{8:[1,159]},G(Le,[2,10]),G(Ie,[2,25]),G(Ie,[2,49]),{35:[1,160]},G(Fe,[2,29],{39:$e}),G(Ie,[2,59]),{66:[1,161]},G([8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83],[2,88],{86:[1,162]}),G(Ie,[2,94]),G(Ie,[2,96]),G(Ie,[2,97]),G(hi,[2,92]),{10:[1,163],86:ai},{66:[1,164]},G(Ie,[2,91]),G(Xe,[2,31],{41:je,42:qe,43:Ze}),G(st,[2,33],{45:St,46:it,47:lt,48:ft}),G(st,[2,34],{45:St,46:it,47:lt,48:ft}),G(st,[2,35],{45:St,46:it,47:lt,48:ft}),G(Ie,[2,65]),{25:165,26:ae},{10:[1,166],86:Qe},G(Ye,[2,104]),{94:[1,168]},{10:[1,169],86:Qe},G(Ht,[2,37],{50:Wt,51:ni}),G(Ht,[2,38],{50:Wt,51:ni}),G(Ht,[2,39],{50:Wt,51:ni}),G(Ht,[2,40],{50:Wt,51:ni}),G(Ie,[2,80]),{20:kt,72:98,73:99,77:be,78:Ae,79:Ce,80:Ee,85:170,87:96},{8:Z,20:re,29:171,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},G(Ie,[2,78]),{8:Z,20:re,29:172,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},G(jt,[2,42],{53:pt,54:Ke,55:Mt}),G(jt,[2,43],{53:pt,54:Ke,55:Mt}),G(Ie,[2,45]),G(Ie,[2,46]),G(Ie,[2,47]),{6:6,7:J,8:Z,9:20,11:173,13:7,14:Q,15:ee,16:te,17:ne,18:8,19:ie,20:re,21:oe,22:9,23:se,24:11,25:5,26:ae,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{6:6,7:J,8:Z,9:20,11:174,13:7,14:Q,15:ee,16:te,17:ne,18:8,19:ie,20:re,21:oe,22:9,23:se,24:11,25:5,26:ae,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{8:Z,9:175,20:re,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{8:Z,9:176,20:re,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{8:Z,20:re,29:177,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},G(Ie,[2,60]),{20:Bt,68:127,82:Re,90:178},G(hi,[2,93]),G(Ie,[2,90]),G(Ie,[2,100]),{25:179,26:ae},{20:[1,180]},{8:Z,9:181,20:re,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{94:[1,182]},G(Ft,[2,82]),G(Ft,[2,83]),G(Qt,[2,99]),G(Ne,[2,2],{12:[1,183]}),G(Le,[2,4]),{16:[1,184]},{10:[1,185]},G(Ie,[2,27]),G(Ie,[2,95]),G(Ie,[2,101]),G(Ye,[2,105]),G(Ie,[2,102]),{8:Z,9:186,20:re,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{6:6,7:J,8:Z,9:20,11:187,13:7,14:Q,15:ee,16:te,17:ne,18:8,19:ie,20:re,21:oe,22:9,23:se,24:11,25:5,26:ae,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{8:Z,9:188,20:re,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},{16:[1,189]},G(Ie,[2,103]),G(Le,[2,3]),{10:[1,190]},G(Le,[2,6]),{6:6,7:J,8:Z,9:20,11:191,13:7,14:Q,15:ee,16:te,17:ne,18:8,19:ie,20:re,21:oe,22:9,23:se,24:11,25:5,26:ae,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:le,51:ue,52:56,56:57,58:de,59:26,60:27,61:29,62:30,63:31,65:pe,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:fe,75:_e,76:ye,77:be,78:Ae,79:Ce,80:Ee,82:Re,91:Te,93:Me},G(Le,[2,5])],defaultActions:{3:[2,1],97:[2,84],98:[2,85],99:[2,86]},parseError:function(Zt,Ut){if(!Ut.recoverable){var qt=new Error(Zt);throw qt.hash=Ut,qt}this.trace(Zt)},parse:function(Zt){var Ut=this,qt=[0],Rt=[null],Pt=[],vt=this.table,tt="",et=0,ei=0,rt=0,ti=Pt.slice.call(arguments,1),zt=Object.create(this.lexer),ii={yy:{}};for(var Kt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Kt)&&(ii.yy[Kt]=this.yy[Kt]);zt.setInput(Zt,ii.yy),ii.yy.lexer=zt,ii.yy.parser=this,zt.yylloc===void 0&&(zt.yylloc={});var Vt=zt.yylloc;Pt.push(Vt);var di=zt.options&&zt.options.ranges;typeof ii.yy.parseError=="function"?this.parseError=ii.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var pi,Di,Si,Ui,vn,Tr,Ln,wr,_n,Ir=function(){var Mn;return typeof(Mn=zt.lex()||1)!="number"&&(Mn=Ut.symbols_[Mn]||Mn),Mn},Bn={};;){if(Si=qt[qt.length-1],this.defaultActions[Si]?Ui=this.defaultActions[Si]:(pi==null&&(pi=Ir()),Ui=vt[Si]&&vt[Si][pi]),Ui===void 0||!Ui.length||!Ui[0]){var $n="";for(Tr in _n=[],vt[Si])this.terminals_[Tr]&&Tr>2&&_n.push("'"+this.terminals_[Tr]+"'");$n=zt.showPosition?"Parse error on line "+(et+1)+`:
`+zt.showPosition()+`
Expecting `+_n.join(", ")+", got '"+(this.terminals_[pi]||pi)+"'":"Parse error on line "+(et+1)+": Unexpected "+(pi==1?"end of input":"'"+(this.terminals_[pi]||pi)+"'"),this.parseError($n,{text:zt.match,token:this.terminals_[pi]||pi,line:zt.yylineno,loc:Vt,expected:_n})}if(Ui[0]instanceof Array&&Ui.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Si+", token: "+pi);switch(Ui[0]){case 1:qt.push(pi),Rt.push(zt.yytext),Pt.push(zt.yylloc),qt.push(Ui[1]),pi=null,Di?(pi=Di,Di=null):(ei=zt.yyleng,tt=zt.yytext,et=zt.yylineno,Vt=zt.yylloc,rt>0);break;case 2:if(Ln=this.productions_[Ui[1]][1],Bn.$=Rt[Rt.length-Ln],Bn._$={first_line:Pt[Pt.length-(Ln||1)].first_line,last_line:Pt[Pt.length-1].last_line,first_column:Pt[Pt.length-(Ln||1)].first_column,last_column:Pt[Pt.length-1].last_column},di&&(Bn._$.range=[Pt[Pt.length-(Ln||1)].range[0],Pt[Pt.length-1].range[1]]),(vn=this.performAction.apply(Bn,[tt,ei,et,ii.yy,Ui[1],Rt,Pt].concat(ti)))!==void 0)return vn;Ln&&(qt=qt.slice(0,-1*Ln*2),Rt=Rt.slice(0,-1*Ln),Pt=Pt.slice(0,-1*Ln)),qt.push(this.productions_[Ui[1]][0]),Rt.push(Bn.$),Pt.push(Bn._$),wr=vt[qt[qt.length-2]][qt[qt.length-1]],qt.push(wr);break;case 3:return!0}}return!0}},dt={node:function(Zt,Ut,qt){return{type:Zt,value:Ut,children:qt}},createNode:function(Zt,Ut,qt,Rt){var Pt,vt=this.node(Ut,qt,[]);for(Pt=3;Pt<arguments.length;Pt++)vt.children.push(arguments[Pt]);return vt.line=Zt[0],vt.col=Zt[1],vt.eline=Zt[2],vt.ecol=Zt[3],vt}},yt=function(Zt){return[Zt.first_line,Zt.first_column,Zt.last_line,Zt.last_column]},Nt=(function(){var Zt={EOF:1,parseError:function(Ut,qt){if(!this.yy.parser)throw new Error(Ut);this.yy.parser.parseError(Ut,qt)},setInput:function(Ut,qt){return this.yy=qt||this.yy||{},this._input=Ut,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Ut=this._input[0];return this.yytext+=Ut,this.yyleng++,this.offset++,this.match+=Ut,this.matched+=Ut,Ut.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Ut},unput:function(Ut){var qt=Ut.length,Rt=Ut.split(/(?:\r\n?|\n)/g);this._input=Ut+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-qt),this.offset-=qt;var Pt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Rt.length-1&&(this.yylineno-=Rt.length-1);var vt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Rt?(Rt.length===Pt.length?this.yylloc.first_column:0)+Pt[Pt.length-Rt.length].length-Rt[0].length:this.yylloc.first_column-qt},this.options.ranges&&(this.yylloc.range=[vt[0],vt[0]+this.yyleng-qt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(Ut){this.unput(this.match.slice(Ut))},pastInput:function(){var Ut=this.matched.substr(0,this.matched.length-this.match.length);return(Ut.length>20?"...":"")+Ut.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Ut=this.match;return Ut.length<20&&(Ut+=this._input.substr(0,20-Ut.length)),(Ut.substr(0,20)+(Ut.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Ut=this.pastInput(),qt=new Array(Ut.length+1).join("-");return Ut+this.upcomingInput()+`
`+qt+"^"},test_match:function(Ut,qt){var Rt,Pt,vt;if(this.options.backtrack_lexer&&(vt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(vt.yylloc.range=this.yylloc.range.slice(0))),(Pt=Ut[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Pt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Pt?Pt[Pt.length-1].length-Pt[Pt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Ut[0].length},this.yytext+=Ut[0],this.match+=Ut[0],this.matches=Ut,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Ut[0].length),this.matched+=Ut[0],Rt=this.performAction.call(this,this.yy,this,qt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Rt)return Rt;if(this._backtrack){for(var tt in vt)this[tt]=vt[tt];return!1}return!1},next:function(){if(this.done)return this.EOF;var Ut,qt,Rt,Pt;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var vt=this._currentRules(),tt=0;tt<vt.length;tt++)if((Rt=this._input.match(this.rules[vt[tt]]))&&(!qt||Rt[0].length>qt[0].length)){if(qt=Rt,Pt=tt,this.options.backtrack_lexer){if((Ut=this.test_match(Rt,vt[tt]))!==!1)return Ut;if(this._backtrack){qt=!1;continue}return!1}if(!this.options.flex)break}return qt?(Ut=this.test_match(qt,vt[Pt]))!==!1&&Ut:this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Ut=this.next();return Ut||this.lex()},begin:function(Ut){this.conditionStack.push(Ut)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Ut){return(Ut=this.conditionStack.length-1-Math.abs(Ut||0))>=0?this.conditionStack[Ut]:"INITIAL"},pushState:function(Ut){this.begin(Ut)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Ut,qt,Rt,Pt){switch(Rt){case 0:case 6:case 7:break;case 1:case 2:case 3:return 78;case 4:case 5:return 77;case 8:return 7;case 9:return 12;case 10:return 14;case 11:return 17;case 12:return 15;case 13:return 91;case 14:return 93;case 15:return 19;case 16:return 23;case 17:return 21;case 18:return 75;case 19:return 76;case 20:return 74;case 21:return 80;case 22:case 23:return 94;case 24:return 82;case 25:return 83;case 26:return 26;case 27:return 27;case 28:return 16;case 29:return"#";case 30:return 34;case 31:return 35;case 32:return 79;case 33:return 64;case 34:return 65;case 35:return 66;case 36:return 8;case 37:return 10;case 38:return 58;case 39:case 40:return 57;case 41:return 53;case 42:return 54;case 43:return 55;case 44:return 50;case 45:return 51;case 46:return 47;case 47:return 45;case 48:return 48;case 49:return 46;case 50:return 41;case 51:return 43;case 52:return 42;case 53:return 39;case 54:return 37;case 55:return 32;case 56:return 86;case 57:return 5;case 58:return 20;case 59:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:[0-9]*\.?[0-9]+([eE][-+]?[0-9]+))/,/^(?:[0-9]+\.[0-9]*|[0-9]*\.[0-9]+\b)/,/^(?:[0-9]+)/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:\/\/.*)/,/^(?:\/\*(.|\n|\r)*?\*\/)/,/^(?:if\b)/,/^(?:else\b)/,/^(?:while\b)/,/^(?:do\b)/,/^(?:for\b)/,/^(?:function\b)/,/^(?:map\b)/,/^(?:use\b)/,/^(?:return\b)/,/^(?:delete\b)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:Infinity\b)/,/^(?:->)/,/^(?:=>)/,/^(?:<<)/,/^(?:>>)/,/^(?:\{)/,/^(?:\})/,/^(?:;)/,/^(?:#)/,/^(?:\?)/,/^(?::)/,/^(?:NaN\b)/,/^(?:\.)/,/^(?:\[)/,/^(?:\])/,/^(?:\()/,/^(?:\))/,/^(?:!)/,/^(?:\^)/,/^(?:\*\*)/,/^(?:\*)/,/^(?:\/)/,/^(?:%)/,/^(?:\+)/,/^(?:-)/,/^(?:<=)/,/^(?:<)/,/^(?:>=)/,/^(?:>)/,/^(?:==)/,/^(?:~=)/,/^(?:!=)/,/^(?:&&)/,/^(?:\|\|)/,/^(?:=)/,/^(?:,)/,/^(?:$)/,/^(?:[A-Za-z_\$][A-Za-z0-9_]*)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],inclusive:!0}}};return Zt})();function fi(){this.yy={}}return _t.lexer=Nt,fi.prototype=_t,_t.Parser=fi,new fi})();parser.yy.parseError=parser.parseError,__webpack_exports__.A=_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.JessieCode},443:function(G,_){var J={};try{typeof JXG!="object"||JXG.extend||(J=JXG)}catch{}J.extend=function(Z,Q,ee,te){var ne;for(ne in ee=ee||!1,te=te||!1,Q)(!ee||ee&&Q.hasOwnProperty(ne))&&(Z[te?ne.toLowerCase():ne]=Q[ne])},J.defineConstant=function(Z,Q,ee,te){(te=te||!1)&&J.exists(Z[Q])||Object.defineProperty(Z,Q,{value:ee,writable:!1,enumerable:!0,configurable:!1})},J.extendConstants=function(Z,Q,ee,te){var ne,ie;for(ne in ee=ee||!1,te=te||!1,Q)(!ee||ee&&Q.hasOwnProperty(ne))&&(ie=te?ne.toUpperCase():ne,this.defineConstant(Z,ie,Q[ne]))},J.extend(J,{boards:{},readers:{},elements:{},registerElement:function(Z,Q){Z=Z.toLowerCase(),this.elements[Z]=Q},registerReader:function(Z,Q){var ee,te;for(ee=0;ee<Q.length;ee++)te=Q[ee].toLowerCase(),typeof this.readers[te]!="function"&&(this.readers[te]=Z)},shortcut:function(Z,Q){return function(){return Z[Q].apply(this,arguments)}},getRef:function(Z,Q){return J.deprecated("JXG.getRef()","Board.select()"),Z.select(Q)},getReference:function(Z,Q){return J.deprecated("JXG.getReference()","Board.select()"),Z.select(Q)},getBoardByContainerId:function(Z){var Q;for(Q in JXG.boards)if(JXG.boards.hasOwnProperty(Q)&&JXG.boards[Q].container===Z)return JXG.boards[Q];return null},deprecated:function(Z,Q){var ee=Z+" is deprecated.";Q&&(ee+=" Please use "+Q+" instead."),J.warn(ee)},warn:function(Z){typeof window=="object"&&window.console&&console.warn?console.warn("WARNING:",Z):typeof document=="object"&&document.getElementById("warning")&&(document.getElementById("debug").innerText+="WARNING: "+Z+`
`)},debugInt:function(Z){var Q,ee;for(Q=0;Q<arguments.length;Q++)ee=arguments[Q],typeof window=="object"&&window.console&&console.log?console.log(ee):typeof document=="object"&&document.getElementById("debug")&&(document.getElementById("debug").innerText+=ee+`
`)},debugWST:function(Z){var Q=new Error;J.debugInt.apply(this,arguments),Q&&Q.stack&&(J.debugInt("stacktrace"),J.debugInt(Q.stack.split(`
`).slice(1).join(`
`)))},debugLine:function(Z){var Q=new Error;J.debugInt.apply(this,arguments),Q&&Q.stack&&J.debugInt("Called from",Q.stack.split(`
`).slice(2,3).join(`
`))},debug:function(Z){J.debugInt.apply(this,arguments)},themes:{}}),_.A=J},454:function(G,_,J){var Z=J(443),Q=J(188);Z.A.EventEmitter={eventHandlers:{},suspended:{},trigger:function(ee,te){var ne,ie,re,oe,se,ae;for(se=ee.length,ie=0;ie<se;ie++)if(oe=this.eventHandlers[ee[ie]],!this.suspended[ee[ie]]){if(this.suspended[ee[ie]]=!0,oe)for(ae=oe.length,ne=0;ne<ae;ne++)(re=oe[ne]).handler.apply(re.context,te);this.suspended[ee[ie]]=!1}return this},on:function(ee,te,ne){return Q.A.isArray(this.eventHandlers[ee])||(this.eventHandlers[ee]=[]),ne=Q.A.def(ne,this),this.eventHandlers[ee].push({handler:te,context:ne}),this},off:function(ee,te){var ne;return ee&&Q.A.isArray(this.eventHandlers[ee])?(te?((ne=Q.A.indexOf(this.eventHandlers[ee],te,"handler"))>-1&&this.eventHandlers[ee].splice(ne,1),this.eventHandlers[ee].length===0&&delete this.eventHandlers[ee]):delete this.eventHandlers[ee],this):this},eventify:function(ee){ee.eventHandlers={clicks:0},ee.on=this.on,ee.off=this.off,ee.triggerEventHandlers=this.trigger,ee.trigger=this.trigger,ee.suspended={}}},_.A=Z.A.EventEmitter},477:function(G,_,J){var Z,Q=J(443),ee=J(188),te=function(ne){var ie,re;return ne.memo||(ie={},re=Array.prototype.join,ne.memo=function(){var oe=re.call(arguments);return ie[oe]!==Z?ie[oe]:ie[oe]=ne.apply(this,arguments)}),ne.memo};Q.A.Math={eps:1e-6,relDif:function(ne,ie){var re=Math.abs(ne),oe=Math.abs(ie);return(oe=Math.max(re,oe))===0?0:Math.abs(ne-ie)/oe},mod:function(ne,ie){return ne-Math.floor(ne/ie)*ie},wrap:function(ne,ie,re){return ie+this.mod(ne-ie,re-ie)},clamp:function(ne,ie,re){return Math.min(Math.max(ne,ie),re)},wrapAndClamp:function(ne,ie,re,oe){var se=.5*(ie+re),ae=.5*oe;return this.clamp(this.wrap(ne,se-ae,se+ae),ie,re)},vector:function(ne,ie){var re,oe;for(ie=ie||0,re=[],oe=0;oe<ne;oe++)re[oe]=ie;return re},matrix:function(ne,ie,re){var oe,se,ae;for(re=re||0,ie=ie||ne,oe=[],se=0;se<ne;se++)for(oe[se]=[],ae=0;ae<ie;ae++)oe[se][ae]=re;return oe},identity:function(ne,ie){var re,oe;for(ie===Z&&typeof ie!="number"&&(ie=ne),re=this.matrix(ne,ie),oe=0;oe<Math.min(ne,ie);oe++)re[oe][oe]=1;return re},frustum:function(ne,ie,re,oe,se,ae){var le=this.matrix(4,4);return le[0][0]=2*se/(ie-ne),le[0][1]=0,le[0][2]=(ie+ne)/(ie-ne),le[0][3]=0,le[1][0]=0,le[1][1]=2*se/(oe-re),le[1][2]=(oe+re)/(oe-re),le[1][3]=0,le[2][0]=0,le[2][1]=0,le[2][2]=-(ae+se)/(ae-se),le[2][3]=-ae*se*2/(ae-se),le[3][0]=0,le[3][1]=0,le[3][2]=-1,le[3][3]=0,le},projection:function(ne,ie,re,oe){var se=re*Math.tan(ne/2),ae=se*ie;return this.frustum(-ae,ae,-se,se,re,oe)},matVecMult:function(ne,ie){var re,oe,se,ae=ne.length,le=ie.length,ue=[];if(le===3)for(re=0;re<ae;re++)ue[re]=ne[re][0]*ie[0]+ne[re][1]*ie[1]+ne[re][2]*ie[2];else for(re=0;re<ae;re++){for(se=0,oe=0;oe<le;oe++)se+=ne[re][oe]*ie[oe];ue[re]=se}return ue},vecMatMult:function(ne,ie){var re,oe,se,ae=ie.length,le=ne.length,ue=[];if(le===3)for(re=0;re<ae;re++)ue[re]=ne[0]*ie[0][re]+ne[1]*ie[1][re]+ne[2]*ie[2][re];else for(re=0;re<le;re++){for(se=0,oe=0;oe<ae;oe++)se+=ne[oe]*ie[oe][re];ue[re]=se}return ue},matMatMult:function(ne,ie){var re,oe,se,ae,le=ne.length,ue=le>0?ie[0].length:0,de=ie.length,pe=this.matrix(le,ue);for(re=0;re<le;re++)for(oe=0;oe<ue;oe++){for(se=0,ae=0;ae<de;ae++)se+=ne[re][ae]*ie[ae][oe];pe[re][oe]=se}return pe},matNumberMult:function(ne,ie){var re,oe,se=ne.length,ae=se>0?ne[0].length:0,le=this.matrix(se,ae);for(re=0;re<se;re++)for(oe=0;oe<ae;oe++)le[re][oe]=ne[re][oe]*ie;return le},matMatAdd:function(ne,ie){var re,oe,se=ne.length,ae=se>0?ne[0].length:0,le=this.matrix(se,ae);for(re=0;re<se;re++)for(oe=0;oe<ae;oe++)le[re][oe]=ne[re][oe]+ie[re][oe];return le},transpose:function(ne){var ie,re,oe,se,ae;for(se=ne.length,ae=ne.length>0?ne[0].length:0,ie=this.matrix(ae,se),re=0;re<ae;re++)for(oe=0;oe<se;oe++)ie[re][oe]=ne[oe][re];return ie},inverse:function(ne){var ie,re,oe,se,ae,le,ue,de=this.eps*this.eps,pe=ne.length,fe=[],_e=[],ye=[];for(ie=0;ie<pe;ie++){for(fe[ie]=[],re=0;re<pe;re++)fe[ie][re]=ne[ie][re];_e[ie]=ie}for(re=0;re<pe;re++){for(le=Math.abs(fe[re][re]),se=re,ie=re+1;ie<pe;ie++)Math.abs(fe[ie][re])>le&&(le=Math.abs(fe[ie][re]),se=ie);if(le<=de)return Q.A.warn("JXG.Math.inverse: singular matrix"),[];if(se>re){for(oe=0;oe<pe;oe++)ue=fe[re][oe],fe[re][oe]=fe[se][oe],fe[se][oe]=ue;ue=_e[re],_e[re]=_e[se],_e[se]=ue}for(ae=1/fe[re][re],ie=0;ie<pe;ie++)fe[ie][re]*=ae;for(fe[re][re]=ae,oe=0;oe<pe;oe++)if(oe!==re){for(ie=0;ie<pe;ie++)ie!==re&&(fe[ie][oe]-=fe[ie][re]*fe[re][oe]);fe[re][oe]=-ae*fe[re][oe]}}for(ie=0;ie<pe;ie++){for(oe=0;oe<pe;oe++)ye[_e[oe]]=fe[ie][oe];for(oe=0;oe<pe;oe++)fe[ie][oe]=ye[oe]}return fe},trace:function(ne){var ie,re,oe=0;if(ne.length!==(re=ne.length>0?ne[0].length:0))return NaN;for(ie=0;ie<re;ie++)oe+=ne[ie][ie];return oe},innerProduct:function(ne,ie,re){var oe,se=0;for(re!==Z&&ee.A.isNumber(re)||(re=ne.length),oe=0;oe<re;oe++)se+=ne[oe]*ie[oe];return se},crossProduct:function(ne,ie){return[ne[1]*ie[2]-ne[2]*ie[1],ne[2]*ie[0]-ne[0]*ie[2],ne[0]*ie[1]-ne[1]*ie[0]]},norm:function(ne,ie){var re,oe=0;for(ie!==Z&&ee.A.isNumber(ie)||(ie=ne.length),re=0;re<ie;re++)oe+=ne[re]*ne[re];return Math.sqrt(oe)},axpy:function(ne,ie,re){var oe,se=ie.length,ae=[];for(oe=0;oe<se;oe++)ae[oe]=ne*ie[oe]+re[oe];return ae},factorial:te(function(ne){return ne<0?NaN:(ne=Math.floor(ne))===0||ne===1?1:ne*this.factorial(ne-1)}),binomial:te(function(ne,ie){var re,oe;if(ie>ne||ie<0)return NaN;if(ie=Math.round(ie),ne=Math.round(ne),ie===0||ie===ne)return 1;for(re=1,oe=0;oe<ie;oe++)re*=ne-oe,re/=oe+1;return re}),cosh:Math.cosh||function(ne){return .5*(Math.exp(ne)+Math.exp(-ne))},sinh:Math.sinh||function(ne){return .5*(Math.exp(ne)-Math.exp(-ne))},acosh:Math.acosh||function(ne){return Math.log(ne+Math.sqrt(ne*ne-1))},asinh:Math.asinh||function(ne){return ne===-1/0?ne:Math.log(ne+Math.sqrt(ne*ne+1))},cot:function(ne){return 1/Math.tan(ne)},acot:function(ne){return(ne>=0?.5:-.5)*Math.PI-Math.atan(ne)},nthroot:function(ne,ie){var re=1/ie;return ie<=0||Math.floor(ie)!==ie?NaN:ne===0?0:ne>0?Math.exp(re*Math.log(ne)):ie%2==1?-Math.exp(re*Math.log(-ne)):NaN},cbrt:Math.cbrt||function(ne){return this.nthroot(ne,3)},pow:function(ne,ie){return ne===0?ie===0?1:0:Math.floor(ie)===ie?Math.pow(ne,ie):ne>0?Math.exp(ie*Math.log(ne)):NaN},ratpow:function(ne,ie,re){var oe;return ie===0?1:re===0?NaN:(oe=this.gcd(ie,re),this.nthroot(this.pow(ne,ie/oe),re/oe))},log10:function(ne){return Math.log(ne)/Math.log(10)},log2:function(ne){return Math.log(ne)/Math.log(2)},log:function(ne,ie){return ie!==void 0&&ee.A.isNumber(ie)?Math.log(ne)/Math.log(ie):Math.log(ne)},sign:Math.sign||function(ne){return(ne=+ne)==0||isNaN(ne)?ne:ne>0?1:-1},squampow:function(ne,ie){var re;if(Math.floor(ie)===ie){for(re=1,ie<0&&(ne=1/ne,ie*=-1);ie!==0;)1&ie&&(re*=ne),ie>>=1,ne*=ne;return re}return this.pow(ne,ie)},gcd:function(ne,ie){var re;if(ne=Math.abs(ne),ie=Math.abs(ie),!ee.A.isNumber(ne)||!ee.A.isNumber(ie))return NaN;for(ie>ne&&(re=ne,ne=ie,ie=re);;){if((ne%=ie)===0)return ie;if((ie%=ne)===0)return ne}},lcm:function(ne,ie){var re;return ee.A.isNumber(ne)&&ee.A.isNumber(ie)?(re=ne*ie)!==0?re/this.gcd(ne,ie):0:NaN},roundToStep:function(ne,ie,re,oe){var se,ae,le=ne;if(!ee.A.exists(ie)&&!ee.A.exists(re)&&!ee.A.exists(oe))return le;if(Q.A.exists(oe)&&(le=Math.min(le,oe)),Q.A.exists(re)&&(le=Math.max(le,re)),ae=re||0,Q.A.exists(ie)){if(se=(le-ae)/ie,Number.isInteger(se))return le;le=ae+(se=Math.round(se))*ie}return Q.A.exists(oe)&&(le=Math.min(le,oe)),Q.A.exists(re)&&(le=Math.max(le,re)),le},erf:function(ne){return this.ProbFuncs.erf(ne)},erfc:function(ne){return this.ProbFuncs.erfc(ne)},erfi:function(ne){return this.ProbFuncs.erfi(ne)},ndtr:function(ne){return this.ProbFuncs.ndtr(ne)},ndtri:function(ne){return this.ProbFuncs.ndtri(ne)},hypot:function(){var ne,ie,re,oe;for(ie=arguments.length,ne=0,oe=0;ne<ie;ne++)oe+=(re=arguments[ne])*re;return Math.sqrt(oe)},hstep:function(ne){return ne>0?1:ne<0?0:.5},gamma:function(ne){var ie,re,oe,se,ae,le=[1,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(ne<.5)re=Math.PI/(Math.sin(Math.PI*ne)*this.gamma(1-ne));else{for(ne-=1,ie=le[0],ae=le.length,se=1;se<ae;se++)ie+=le[se]/(ne+se);oe=ne+7+.5,re=Math.sqrt(2*Math.PI)*Math.pow(oe,ne+.5)*Math.exp(-oe)*ie}return re},lt:function(ne,ie){return ne<ie},leq:function(ne,ie){return ne<=ie},gt:function(ne,ie){return ne>ie},geq:function(ne,ie){return ne>=ie},eq:function(ne,ie){return ne===ie},neq:function(ne,ie){return ne!==ie},and:function(ne,ie){return ne&&ie},not:function(ne){return!ne},or:function(ne,ie){return ne||ie},xor:function(ne,ie){return(ne||ie)&&!(ne&&ie)},decToFraction:function(ne,ie){var re,oe,se,ae,le,ue,de,pe,fe,_e=0;for(ie=ee.A.def(ie,.001),oe=(ne=1e-12*Math.round(1e12*ne))<0?-1:1,ne=Math.abs(ne),re=Math.floor(ne),ne-=Math.floor(ne),ue=1,ae=le=se=0,fe=0,de=pe=1;ne-Math.floor(ne)>ie&&_e<20;)ne=1/(ne-se),ae=ue+(se=Math.floor(ne))*le,de=fe+se*pe,ue=le,fe=pe,le=ae,pe=de,_e++;return[oe,re,ae,de]},normalize:function(ne){var ie,re,oe=2*ne[3],se=ne[4]/oe;return ne[5]=se,ne[6]=-ne[1]/oe,ne[7]=-ne[2]/oe,isFinite(se)?Math.abs(se)>=1?(ne[0]=(ne[6]*ne[6]+ne[7]*ne[7]-se*se)/(2*se),ne[1]=-ne[6]/se,ne[2]=-ne[7]/se,ne[3]=1/(2*se),ne[4]=1):(re=se<=0?-1:1,ne[0]=re*(ne[6]*ne[6]+ne[7]*ne[7]-se*se)*.5,ne[1]=-re*ne[6],ne[2]=-re*ne[7],ne[3]=re/2,ne[4]=re*se):(ie=this.hypot(ne[1],ne[2]),ne[0]/=ie,ne[1]/=ie,ne[2]/=ie,ne[3]=0,ne[4]=1),ne},toGL:function(ne){var ie,re,oe;if(ie=typeof Float32Array=="function"?new Float32Array(16):new Array(16),ne.length!==4&&ne[0].length!==4)return ie;for(re=0;re<4;re++)for(oe=0;oe<4;oe++)ie[re+4*oe]=ne[re][oe];return ie},Vieta:function(ne){var ie,re,oe,se=ne.length,ae=[];for(ae=ne.slice(),ie=1;ie<se;++ie){for(oe=ae[ie],ae[ie]*=ae[ie-1],re=ie-1;re>=1;--re)ae[re]+=ae[re-1]*oe;ae[0]+=oe}return ae}},_.A=Q.A.Math},561:function(G,_,J){var Z,Q=J(443),ee="1.12.2";Z={version:ee,licenseText:"JSXGraph v"+ee+"  jsxgraph.org",licenseLogo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJ8AAACfCAYAAADnGwvgAAAACXBIWXMAAAsSAAALEgHS3X78AAAIPklEQVR4nO2d21XjSBCG/96z75ABzgBPBHgiWDLARDCeCBAZeCMYO4KFCEbOwM7AZIAjqH1QiTHGF7XUF7X6/87xw4APqodv+qaqaiMiICQGf8UOgOQL5SPRoHwkGpSPROPv2AH4whhzDWCs/xwDuI4YTu4sRGR7+MPByGeMGQG4BzBBJdtNxHDIZ0oA28MfJi2fCjfVD2VLjCTlU+kKAA9RAyGdSEo+SjcskpHPGFMAmAG4ihwKcUTv5dPR7gXAbdxIiGt6fc5njJkAWIPiDZLeymeMmQL4DU6zg6WX8ql4v2LHQfzSO/koXj70Sj6Klxd92+2uAXyPHQS5yBQOzlp7JZ+IrGPHQC6jpxCd6dW0S/KC8pFoUD4SDcpHokH5SDQoH4kG5SPRoHwkGpSPRCPaGw5jzBjACFWl2Ug/JB4LEVmEfGAw+bSO9h5/yhuZp9cvytAP9C6fvgecAfjH97NIWniTT9OjCrCelpzAuXw60hUA7lz/bTIsnMmna7oCwA9Xf5MMGyfy6c51AVaZEQs6n/Pp2q4ExSOWdBr5WHNButB65KN4pCut5KN4xAXW8ulRCsUjnbGSb69pDyGdsR35XsB3ssQRjeXT/ng8TiHOaCSfTrczr5GQ7Gg68hXgdEscc/GQWUc99kC+zArAO6p+M4fU94Aw2WKPJm84Ct9BJMorqteKpU2PGX0PPkGVVJu1jGfl46j3hTcAc1Qp5+9t/oCKugYwz/0ekUtrvmmIIBLgDcCjiIxEZN5WvENEZCsihYiMADzqc7KB8p1nB+BZpVv4fJD+/TGAZ5/P6RMn5dMpIbupYI8NgLGIFKEeKCLv+rxv+vxBc27kuw8WRf9Yisj42E2JIdB14QTAMsbzQ3FOvkmoIHrGTxGZxg5CR8EpBizgud3u+Mzvhspj6MLpS4jI1BgDDPDU4ejIp8VAua33nvsmXs1QR8BT025uo94y5MaiDSrga+w4XNKrbvSR2MBR0oS+vbjG5/VyCeDdUaf9KaoD6kHMSqfky2nkm3Y5NDbG1P1n7nE8+eJJv7dDlQ+5EJGyzbNE5H3vTrrkOTXtXgeNIh7PbUckY8y9MWYL4D9Um4FLWT9X+r3fxph127ssVNxBrP9y7s+3Q/We1gpjzLUx5gWVdG2nv1tUEi50c2fLDFX8SZOzfDPb6VbXdCXcddx6AFDaCqhxW//H6Ru5ylevvxqzJ57rUoJbtBAQlC9ZrFKiVIwF/GVz38KyOaPGn/TaL1f5bEeNAv6Lp261SMuGhYc4gpGjfG82CQO6Kw3V9u1Js4kaoTvfZDceOcpnW/Re+AjC4fOSLeLPUb6y6Rd1kxG6zuLBZvRDhEberqB855l6iuESNrmUyV6QnZ18lmd7E19xXKCxfCnfzp6bfCvL78dqD2I71Se56chNvsa0ffcaiSRHP8rXUxKTvxWUj0SD8vUXJ4XpfYbynWYb8+GWu9gk8y9zk2/U9Iv6Ci7WLtK2bUaSTTtzk882+bP0EYTL57ZMRu0FuclXvzJrSqz3pjbPTbbeJjv5YPfW4gXhp96diNjIN/EViG9ClU6+oXnu2Qh+q/MnaJjPp9Vic2gFWiBscw0nPoIIQSj5tk2LsvVw1bd8NsxRFeyE6EldN59shK73ku1umuO0e6W1to3QRISpv3A+YVtDnHQnsRzlAyw7FOga7F9PsdT8bFFMnvT1FLnKd2eZsAkRmcFfwc5SRKzWero8SfJ8ryZX+YAW6fHarMd129rHlv0AC8dxBCdn+R7aZI7oxuk7ujfv3gD41qYtm8ad7EajJmf5gJaF1yJSduggX3e2H7fJQt6rIU6e3OVrUyv7gYgsVMJvqKbjFb4eSr/pz59RjXRdO9sXGHiLtJx4Msa8dKmF2LvYxSuBa4i9k/vIV9OmV0pQ9J10sjW6x6B8FVfosYAa1+Au2qZ8f2jbLcorGk+Jgazz9qF8n6kFHEWOA8DHVLtG4ofJp6B8X7kF0LptrSv0/XOJAY54NZTvOFeo2tbOQ0/D2nZ3jqrt7qDWeIdQvvP8QDUKBske0U7zawzoOOUclO8yNwD+M8aUviQ0xky1s/0vDHiaPYSHzM25Q5UNU2dlL7rcSqmbiSmqnLxshNuH8tlzgyqt/klFLPWzBbA+lgyq68bx3meCTIXbh/J14wZVyv9H2r/eEEkawDUfiQblIyHYHvsh5SPeObUxo3zENyeL7ikf8c3JPEfKR3xD+Ug0KB+JRnnqF5SP+GRz7hUk5SM+WZz7JeUjPjlb8ET5iC9Wl7J+KB/xRXHpC5SP+GDVpN0b5SM+KJp8ifIR17w2bXJJ+YhLdrBoIUz5iEusekpTPuKKpeX9IZSPOGHTprUv5SNd2aDlRTSUj3RhA2BieXfIB70rndRtehL1h8aYEgNozN2STuIBHPlIOxboKB7Qw5GP9J8ubUL24chHasrQD6R8JBqUjwD42OgFhfIRoNq5BofyESDABTbHoHwEiLDZACgfqYhysxHlI69dD4vbEuqQ+c4YI4GeReyIdp8bR768eet4/WonKF/eLGI+nPLlyw4tb1p3BeXLl1msjUYN5cuTVcy1Xg3ly5NZ7AAAypcjP0Ukyuu0QyhfXixFJOomYx/Klw8b9GS6raF8edC52McHlG/49FI8gPINnd6KB1C+IbMUkXFfxQNYOjlEdqi6RUXLVmkKR75h8QpglIJ4AOUbCisA30Xkvs/T7CGcdtNmBaCIUfboAsqXHhtUeXgvrtpWxILy9ZsdqrLG+lOmLtw+RuRraYUxZgRgFDgW8oftkCQ7xVH5CAkBd7skGpSPRIPykWhQPhKN/wEKYnCiOMadyQAAAABJRU5ErkJggg==",COORDS_BY_USER:1,COORDS_BY_SCREEN:2,OBJECT_TYPE_ARC:1,OBJECT_TYPE_ARROW:2,OBJECT_TYPE_AXIS:3,OBJECT_TYPE_AXISPOINT:4,OBJECT_TYPE_TICKS:5,OBJECT_TYPE_CIRCLE:6,OBJECT_TYPE_CONIC:7,OBJECT_TYPE_CURVE:8,OBJECT_TYPE_GLIDER:9,OBJECT_TYPE_IMAGE:10,OBJECT_TYPE_LINE:11,OBJECT_TYPE_POINT:12,OBJECT_TYPE_SLIDER:13,OBJECT_TYPE_CAS:14,OBJECT_TYPE_GXTCAS:15,OBJECT_TYPE_POLYGON:16,OBJECT_TYPE_SECTOR:17,OBJECT_TYPE_TEXT:18,OBJECT_TYPE_ANGLE:19,OBJECT_TYPE_INTERSECTION:20,OBJECT_TYPE_TURTLE:21,OBJECT_TYPE_VECTOR:22,OBJECT_TYPE_OPROJECT:23,OBJECT_TYPE_GRID:24,OBJECT_TYPE_TANGENT:25,OBJECT_TYPE_HTMLSLIDER:26,OBJECT_TYPE_CHECKBOX:27,OBJECT_TYPE_INPUT:28,OBJECT_TYPE_BUTTON:29,OBJECT_TYPE_TRANSFORMATION:30,OBJECT_TYPE_FOREIGNOBJECT:31,OBJECT_TYPE_VIEW3D:32,OBJECT_TYPE_POINT3D:33,OBJECT_TYPE_LINE3D:34,OBJECT_TYPE_PLANE3D:35,OBJECT_TYPE_CURVE3D:36,OBJECT_TYPE_SURFACE3D:37,OBJECT_TYPE_MEASUREMENT:38,OBJECT_TYPE_INTERSECTION_LINE3D:39,OBJECT_TYPE_SPHERE3D:40,OBJECT_TYPE_CIRCLE3D:41,OBJECT_TYPE_INTERSECTION_CIRCLE3D:42,OBJECT_TYPE_TEXT3D:43,OBJECT_TYPE_FACE3D:44,OBJECT_TYPE_POLYHEDRON3D:45,OBJECT_TYPE_POLYGON3D:46,OBJECT_CLASS_POINT:1,OBJECT_CLASS_LINE:2,OBJECT_CLASS_CIRCLE:3,OBJECT_CLASS_CURVE:4,OBJECT_CLASS_AREA:5,OBJECT_CLASS_OTHER:6,OBJECT_CLASS_TEXT:7,OBJECT_CLASS_3D:8},Q.A.extendConstants(Q.A,Z),_.A=Z},571:function(G,_,J){var Z=J(443),Q=J(561),ee=J(904),te=J(477),ne=J(588),ie=J(171),re=J(188),oe=J(713);te.A.Geometry={},Z.A.extend(te.A.Geometry,{angle:function(se,ae,le){var ue,de,pe,fe,_e=[],ye=[],be=[];return Z.A.deprecated("Geometry.angle()","Geometry.rad()"),se.coords?(_e[0]=se.coords.usrCoords[1],_e[1]=se.coords.usrCoords[2]):(_e[0]=se[0],_e[1]=se[1]),ae.coords?(ye[0]=ae.coords.usrCoords[1],ye[1]=ae.coords.usrCoords[2]):(ye[0]=ae[0],ye[1]=ae[1]),le.coords?(be[0]=le.coords.usrCoords[1],be[1]=le.coords.usrCoords[2]):(be[0]=le[0],be[1]=le[1]),ue=_e[0]-ye[0],de=_e[1]-ye[1],pe=be[0]-ye[0],fe=be[1]-ye[1],Math.atan2(ue*fe-de*pe,ue*pe+de*fe)},trueAngle:function(se,ae,le){return 57.29577951308232*this.rad(se,ae,le)},rad:function(se,ae,le){var ue,de,pe,fe,_e,ye,be;return se.coords?(ue=se.coords.usrCoords[1],de=se.coords.usrCoords[2]):(ue=se[0],de=se[1]),ae.coords?(pe=ae.coords.usrCoords[1],fe=ae.coords.usrCoords[2]):(pe=ae[0],fe=ae[1]),le.coords?(_e=le.coords.usrCoords[1],ye=le.coords.usrCoords[2]):(_e=le[0],ye=le[1]),(be=Math.atan2(ye-fe,_e-pe)-Math.atan2(de-fe,ue-pe))<0&&(be+=6.283185307179586),be},angleBisector:function(se,ae,le,ue){var de,pe,fe,_e,ye,be=se.coords.usrCoords,Ae=ae.coords.usrCoords,Ce=le.coords.usrCoords;return re.A.exists(ue)||(ue=se.board),Ae[0]===0?new ee.A(Q.A.COORDS_BY_USER,[1,.5*(be[1]+Ce[1]),.5*(be[2]+Ce[2])],ue):(_e=be[1]-Ae[1],ye=be[2]-Ae[2],de=Math.atan2(ye,_e),_e=Ce[1]-Ae[1],ye=Ce[2]-Ae[2],fe=.5*(de+(pe=Math.atan2(ye,_e))),de>pe&&(fe+=Math.PI),_e=Math.cos(fe)+Ae[1],ye=Math.sin(fe)+Ae[2],new ee.A(Q.A.COORDS_BY_USER,[1,_e,ye],ue))},reflection:function(se,ae,le){var ue,de,pe,fe,_e,ye,be=ae.coords.usrCoords,Ae=se.point1.coords.usrCoords,Ce=se.point2.coords.usrCoords;return re.A.exists(le)||(le=ae.board),fe=Ce[1]-Ae[1],_e=Ce[2]-Ae[2],ue=be[1]-Ae[1],ye=(fe*(be[2]-Ae[2])-_e*ue)/(fe*fe+_e*_e),de=be[1]+2*ye*_e,pe=be[2]-2*ye*fe,new ee.A(Q.A.COORDS_BY_USER,[de,pe],le)},rotation:function(se,ae,le,ue){var de,pe,fe,_e,ye,be,Ae=ae.coords.usrCoords,Ce=se.coords.usrCoords;return re.A.exists(ue)||(ue=ae.board),de=Ae[1]-Ce[1],pe=Ae[2]-Ce[2],ye=de*(fe=Math.cos(le))-pe*(_e=Math.sin(le))+Ce[1],be=de*_e+pe*fe+Ce[2],new ee.A(Q.A.COORDS_BY_USER,[ye,be],ue)},perpendicular:function(se,ae,le){var ue,de,pe,fe,_e,ye=se.point1.coords.usrCoords,be=se.point2.coords.usrCoords,Ae=ae.coords.usrCoords;return re.A.exists(le)||(le=ae.board),ae===se.point1?(ue=ye[1]+be[2]-ye[2],de=ye[2]-be[1]+ye[1],_e=ye[0]*be[0],Math.abs(_e)<te.A.eps&&(ue=be[2],de=-be[1]),fe=[_e,ue,de],pe=!0):ae===se.point2?(ue=be[1]+ye[2]-be[2],de=be[2]-ye[1]+be[1],_e=ye[0]*be[0],Math.abs(_e)<te.A.eps&&(ue=ye[2],de=-ye[1]),fe=[_e,ue,de],pe=!1):Math.abs(te.A.innerProduct(Ae,se.stdform,3))<te.A.eps?(ue=Ae[1]+be[2]-Ae[2],de=Ae[2]-be[1]+Ae[1],_e=be[0],Math.abs(_e)<te.A.eps&&(ue=be[2],de=-be[1]),pe=!0,Math.abs(_e)>te.A.eps&&Math.abs(ue-Ae[1])<te.A.eps&&Math.abs(de-Ae[2])<te.A.eps&&(ue=Ae[1]+ye[2]-Ae[2],de=Ae[2]-ye[1]+Ae[1],pe=!1),fe=[_e,ue,de]):(fe=[0,se.stdform[1],se.stdform[2]],fe=te.A.crossProduct(fe,Ae),fe=te.A.crossProduct(fe,se.stdform),pe=!0),[new ee.A(Q.A.COORDS_BY_USER,fe,le),pe]},circumcenterMidpoint:function(){Z.A.deprecated("Geometry.circumcenterMidpoint()","Geometry.circumcenter()"),this.circumcenter.apply(this,arguments)},circumcenter:function(se,ae,le,ue){var de,pe,fe,_e,ye=se.coords.usrCoords,be=ae.coords.usrCoords,Ae=le.coords.usrCoords;return re.A.exists(ue)||(ue=se.board),de=[be[0]-ye[0],-be[2]+ye[2],be[1]-ye[1]],pe=[.5*(ye[0]+be[0]),.5*(ye[1]+be[1]),.5*(ye[2]+be[2])],fe=te.A.crossProduct(de,pe),de=[Ae[0]-be[0],-Ae[2]+be[2],Ae[1]-be[1]],pe=[.5*(be[0]+Ae[0]),.5*(be[1]+Ae[1]),.5*(be[2]+Ae[2])],_e=te.A.crossProduct(de,pe),new ee.A(Q.A.COORDS_BY_USER,te.A.crossProduct(fe,_e),ue)},distance:function(se,ae,le){var ue,de=0;for(le||(le=Math.min(se.length,ae.length)),ue=0;ue<le;ue++)de+=(se[ue]-ae[ue])*(se[ue]-ae[ue]);return Math.sqrt(de)},affineDistance:function(se,ae,le){var ue;return(ue=this.distance(se,ae,le))>te.A.eps&&(Math.abs(se[0])<te.A.eps||Math.abs(ae[0])<te.A.eps)?1/0:ue},affineRatio:function(se,ae,le){var ue;return re.A.exists(se.usrCoords)&&(se=se.usrCoords),re.A.exists(ae.usrCoords)&&(ae=ae.usrCoords),re.A.exists(le.usrCoords)&&(le=le.usrCoords),ue=ae[1]-se[1],Math.abs(ue)>te.A.eps?(le[1]-se[1])/ue:(le[2]-se[2])/(ae[2]-se[2])},sortVertices:function(se){for(var ae,le=oe.A.each(se,oe.A.coordsArray),ue=le.length,de=null;le[0][0]===le[ue-1][0]&&le[0][1]===le[ue-1][1]&&le[0][2]===le[ue-1][2];)de=le.pop(),ue--;return ae=le[0],le.sort(function(pe,fe){return(pe[2]===ae[2]&&pe[1]===ae[1]?-1/0:Math.atan2(pe[2]-ae[2],pe[1]-ae[1]))-(fe[2]===ae[2]&&fe[1]===ae[1]?-1/0:Math.atan2(fe[2]-ae[2],fe[1]-ae[1]))}),de!==null&&le.push(de),le},signedTriangle:function(se,ae,le){var ue=oe.A.coordsArray(se),de=oe.A.coordsArray(ae),pe=oe.A.coordsArray(le);return .5*((de[1]-ue[1])*(pe[2]-ue[2])-(de[2]-ue[2])*(pe[1]-ue[1]))},signedPolygon:function(se,ae){var le,ue,de=0,pe=oe.A.each(se,oe.A.coordsArray);for(ae===void 0&&(ae=!0),ae?pe.unshift(pe[pe.length-1]):pe=this.sortVertices(pe),ue=pe.length,le=1;le<ue;le++)de+=pe[le-1][1]*pe[le][2]-pe[le][1]*pe[le-1][2];return .5*de},GrahamScan:function(se){var ae,le,ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te,Me,Ne,Le,Ie,Ge,He,Be,ze,Fe,$e=te.A.eps*te.A.eps,Xe=this,je=[],qe=[],Ze=oe.A.each(se,oe.A.coordsArray);if((Fe=Ze.length)===0)return[];if(Fe>1024)for(_e=pe=Ze[0][1],ye=fe=Ze[0][2],Ee=Ae=Ze[0][1]-Ze[0][2],Ce=be=Ze[0][1]+Ze[0][2],Re=0,Te=0,Me=0,Ne=0,Ie=0,He=0,Le=0,Ge=0,ae=1;ae<Fe;ae++)(Be=Ze[ae][1])<pe?(pe=Be,Re=ae):Be>_e&&(_e=Be,Te=ae),(Be=Ze[ae][2])<fe?(fe=Be,Me=ae):Be>ye&&(ye=Be,Ne=ae),(Be=Ze[ae][1]-Ze[ae][2])<Ae?(Ae=Be,Ie=ae):Be>Ee&&(Ee=Be,He=ae),(Be=Ze[ae][1]+Ze[ae][2])<be?(be=Be,Le=ae):Be>Ce&&(Ce=Be,Ge=ae);for(ae=0;ae<Fe;ae++)ze=Ze[ae],(Fe<=1024||ae in[Re,Te,Me,Ne,Le,Ie,Ge,He]||Re!==Ie&&this.signedTriangle(Ze[Re],Ze[Ie],ze)>=-$e||Ie!==Ne&&this.signedTriangle(Ze[Ie],Ze[Ne],ze)>=-$e||Ne!==Ge&&this.signedTriangle(Ze[Ne],Ze[Ge],ze)>=-$e||Ge!==Te&&this.signedTriangle(Ze[Ge],Ze[Te],ze)>=-$e||Te!==He&&this.signedTriangle(Ze[Te],Ze[He],ze)>=-$e||He!==Me&&this.signedTriangle(Ze[He],Ze[Me],ze)>=-$e||Me!==Le&&this.signedTriangle(Ze[Me],Ze[Le],ze)>=-$e||Le!==Re&&this.signedTriangle(Ze[Le],Ze[Re],ze)>=-$e)&&je.push({i:ae,c:ze});for(Fe=je.length,de=0,pe=je[0].c[1],fe=je[0].c[2],ae=1;ae<Fe;ae++)(je[ae].c[2]<fe||je[ae].c[2]===fe&&je[ae].c[1]<pe)&&(pe=je[ae].c[1],fe=je[ae].c[2],de=ae);for(je=re.A.swap(je,de,0),ue=je[0].c,je.sort(function(st,St){var it=st.c,lt=St.c,ft=Xe.signedTriangle(ue,it,lt);return ft===0?te.A.hypot(it[1]-ue[1],it[2]-ue[2])-te.A.hypot(lt[1]-ue[1],lt[2]-ue[2]):-ft}),le=0,ae=0;ae<Fe;ae++){for(;le>1&&this.signedTriangle(qe[le-2].c,qe[le-1].c,je[ae].c)<=0;)qe.pop(),le--;qe.push(je[ae]),le++}return qe},convexHull:function(se,ae){var le,ue,de=[];for(ue=this.GrahamScan(se),le=0;le<ue.length;le++)ae?de.push(ue[le].c):de.push(se[ue[le].i]);return de},isConvex:function(se){var ae,le,ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee=te.A.eps*te.A.eps,Re=0;if(re.A.isArray(se)?ae=oe.A.each(se,oe.A.coordsArray):re.A.exists(se.type)&&se.type===Q.A.OBJECT_TYPE_POLYGON&&(ae=oe.A.each(se.vertices,oe.A.coordsArray)),(le=ae.length)===0||le<3)return!0;for(Ce=null,de=ae[le-2][1],pe=ae[le-2][2],_e=ae[le-1][1],ye=ae[le-1][2],be=Math.atan2(ye-pe,_e-de),ue=0;ue<le;ue++)if(de=_e,pe=ye,fe=be,_e=ae[ue][1],ye=ae[ue][2],de!==_e||pe!==ye){if((Ae=(be=Math.atan2(ye-pe,_e-de))-fe)<=-Math.PI?Ae+=2*Math.PI:Ae>Math.PI&&(Ae-=2*Math.PI),Ce===null){if(Ae===0)continue;Ce=Ae>0?1:-1}else if(Ce*Ae<-Ee)return!1;Re+=Ae}return Math.abs(Re/(2*Math.PI))-1<Ee},calcStraight:function(se,ae,le,ue){var de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re;if(re.A.exists(ue)||(ue=10),be=se.evalVisProp("straightfirst"),Ae=se.evalVisProp("straightlast"),Math.abs(ae.scrCoords[0])<te.A.eps&&(be=!0),Math.abs(le.scrCoords[0])<te.A.eps&&(Ae=!0),(be||Ae)&&((Ce=[])[0]=se.stdform[0]-se.stdform[1]*se.board.origin.scrCoords[1]/se.board.unitX+se.stdform[2]*se.board.origin.scrCoords[2]/se.board.unitY,Ce[1]=se.stdform[1]/se.board.unitX,Ce[2]=-se.stdform[2]/se.board.unitY,!isNaN(Ce[0]+Ce[1]+Ce[2]))){if(de=!be&&Math.abs(ae.usrCoords[0])>=te.A.eps&&ae.scrCoords[1]>=0&&ae.scrCoords[1]<=se.board.canvasWidth&&ae.scrCoords[2]>=0&&ae.scrCoords[2]<=se.board.canvasHeight,pe=!Ae&&Math.abs(le.usrCoords[0])>=te.A.eps&&le.scrCoords[1]>=0&&le.scrCoords[1]<=se.board.canvasWidth&&le.scrCoords[2]>=0&&le.scrCoords[2]<=se.board.canvasHeight,_e=(fe=this.meetLineBoard(Ce,se.board,ue))[0],ye=fe[1],!de&&!pe&&(!be&&Ae&&!this.isSameDirection(ae,le,_e)&&!this.isSameDirection(ae,le,ye)||be&&!Ae&&!this.isSameDirection(le,ae,_e)&&!this.isSameDirection(le,ae,ye)))return;de?pe||(Re=this.isSameDir(ae,le,_e,ye)?ye:_e):pe?Ee=this.isSameDir(ae,le,_e,ye)?_e:ye:this.isSameDir(ae,le,_e,ye)?(Ee=_e,Re=ye):(Re=_e,Ee=ye),Ee&&ae.setCoordinates(Q.A.COORDS_BY_USER,Ee.usrCoords),Re&&le.setCoordinates(Q.A.COORDS_BY_USER,Re.usrCoords)}},calcLineDelimitingPoints:function(se,ae,le){var ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re;if(_e=se.evalVisProp("straightfirst"),ye=se.evalVisProp("straightlast"),Math.abs(ae.scrCoords[0])<te.A.eps&&(_e=!0),Math.abs(le.scrCoords[0])<te.A.eps&&(ye=!0),(be=[])[0]=se.stdform[0]-se.stdform[1]*se.board.origin.scrCoords[1]/se.board.unitX+se.stdform[2]*se.board.origin.scrCoords[2]/se.board.unitY,be[1]=se.stdform[1]/se.board.unitX,be[2]=-se.stdform[2]/se.board.unitY,!isNaN(be[0]+be[1]+be[2])){if(Ee=!_e,Re=!ye,de=se.board.getBoundingBox(),se.getSlope()>=0?(pe=this.projectPointToLine({coords:{usrCoords:[1,de[2],de[1]]}},se,se.board),fe=this.projectPointToLine({coords:{usrCoords:[1,de[0],de[3]]}},se,se.board)):(pe=this.projectPointToLine({coords:{usrCoords:[1,de[0],de[1]]}},se,se.board),fe=this.projectPointToLine({coords:{usrCoords:[1,de[2],de[3]]}},se,se.board)),!Ee&&!Re&&(!_e&&!ye&&(ue=ae.distance(Q.A.COORDS_BY_USER,le),Math.abs(ae.distance(Q.A.COORDS_BY_USER,pe)+pe.distance(Q.A.COORDS_BY_USER,le)-ue)>te.A.eps||Math.abs(ae.distance(Q.A.COORDS_BY_USER,fe)+fe.distance(Q.A.COORDS_BY_USER,le)-ue)>te.A.eps)||!_e&&ye&&!this.isSameDirection(ae,le,pe)&&!this.isSameDirection(ae,le,fe)||_e&&!ye&&!this.isSameDirection(le,ae,pe)&&!this.isSameDirection(le,ae,fe)))return;Ee?Re||(Ce=this.isSameDir(ae,le,pe,fe)?fe:pe):Re?Ae=this.isSameDir(ae,le,pe,fe)?pe:fe:this.isSameDir(ae,le,pe,fe)?(Ae=pe,Ce=fe):(Ce=pe,Ae=fe),Ae&&ae.setCoordinates(Q.A.COORDS_BY_USER,Ae.usrCoords),Ce&&le.setCoordinates(Q.A.COORDS_BY_USER,Ce.usrCoords)}},calcLabelQuadrant:function(se){return se<0&&(se+=2*Math.PI),["rt","urt","top","ulft","lft","llft","lrt"][Math.floor((se+Math.PI/8)/(Math.PI/4))%8]},isSameDir:function(se,ae,le,ue){var de=ae.usrCoords[1]-se.usrCoords[1],pe=ae.usrCoords[2]-se.usrCoords[2],fe=ue.usrCoords[1]-le.usrCoords[1],_e=ue.usrCoords[2]-le.usrCoords[2];return Math.abs(ae.usrCoords[0])<te.A.eps&&(de=ae.usrCoords[1],pe=ae.usrCoords[2]),Math.abs(se.usrCoords[0])<te.A.eps&&(de=-se.usrCoords[1],pe=-se.usrCoords[2]),de*fe+pe*_e>=0},isSameDirection:function(se,ae,le){var ue,de,pe,fe,_e=!1;return ue=ae.usrCoords[1]-se.usrCoords[1],de=ae.usrCoords[2]-se.usrCoords[2],pe=le.usrCoords[1]-se.usrCoords[1],fe=le.usrCoords[2]-se.usrCoords[2],Math.abs(ue)<te.A.eps&&(ue=0),Math.abs(de)<te.A.eps&&(de=0),Math.abs(pe)<te.A.eps&&(pe=0),Math.abs(fe)<te.A.eps&&(fe=0),(ue>=0&&pe>=0||ue<=0&&pe<=0)&&(_e=de>=0&&fe>=0||de<=0&&fe<=0),_e},det3p:function(se,ae,le){var ue,de,pe;return ue=re.A.isPoint(se)?se.Coords(!0):se,de=re.A.isPoint(ae)?ae.Coords(!0):ae,pe=re.A.isPoint(le)?le.Coords(!0):le,(ue[1]-pe[1])*(de[2]-pe[2])-(de[1]-pe[1])*(ue[2]-pe[2])},windingNumber:function(se,ae,le){var ue,de,pe,fe,_e,ye,be=0,Ae=ae.length,Ce=se[1],Ee=se[2],Re=0;if(Ae===0)return 0;if((le=le||!1)&&(Re=1),isNaN(Ce)||isNaN(Ee)||(re.A.exists(ae[0].coords)?(ue=ae[0].coords,de=ae[Ae-1].coords):(ue=ae[0],de=ae[Ae-1]),ue.usrCoords[1]===Ce&&ue.usrCoords[2]===Ee))return 1;for(ye=0;ye<Ae-Re;ye++)if(re.A.exists(ae[ye].coords)?(de=ae[ye].coords.usrCoords,pe=ae[(ye+1)%Ae].coords.usrCoords):(de=ae[ye].usrCoords,pe=ae[(ye+1)%Ae].usrCoords),!(de[0]===0||pe[0]===0||isNaN(de[1])||isNaN(pe[1])||isNaN(de[2])||isNaN(pe[2]))){if(pe[2]===Ee){if(pe[1]===Ce)return 1;if(de[2]===Ee&&pe[1]>Ce==de[1]<Ce)return 0}if(de[2]<Ee!=pe[2]<Ee)if(_e=2*(pe[2]>de[2]?1:0)-1,de[1]>=Ce)if(pe[1]>Ce)be+=_e;else{if((fe=this.det3p(de,pe,se))===0)return 0;fe>0+te.A.eps==pe[2]>de[2]&&(be+=_e)}else pe[1]>Ce&&(fe=this.det3p(de,pe,se))>0+te.A.eps==pe[2]>de[2]&&(be+=_e)}return be},pnpoly:function(se,ae,le,ue,de){var pe,fe,_e,ye,be,Ae,Ce,Ee,Re=le,Te=!1;for(ue===Q.A.COORDS_BY_USER?(Ae=(Ee=new ee.A(Q.A.COORDS_BY_USER,[se,ae],de)).scrCoords[1],Ce=Ee.scrCoords[2]):(Ae=se,Ce=ae),pe=0,fe=(be=le.length)-2;pe<be-1;fe=pe++)_e=re.A.exists(Re[pe].coords)?Re[pe].coords:Re[pe],ye=re.A.exists(Re[fe].coords)?Re[fe].coords:Re[fe],_e.scrCoords[2]>Ce!=ye.scrCoords[2]>Ce&&Ae<(ye.scrCoords[1]-_e.scrCoords[1])*(Ce-_e.scrCoords[2])/(ye.scrCoords[2]-_e.scrCoords[2])+_e.scrCoords[1]&&(Te=!Te);return Te},intersectionFunction:function(se,ae,le,ue,de,pe){var fe,_e,ye=this;return fe=ae.elementClass===Q.A.OBJECT_CLASS_CURVE&&(ae.type===Q.A.OBJECT_TYPE_ARC||ae.type===Q.A.OBJECT_TYPE_SECTOR),_e=le.elementClass===Q.A.OBJECT_CLASS_CURVE&&(le.type===Q.A.OBJECT_TYPE_ARC||le.type===Q.A.OBJECT_TYPE_SECTOR),ae.elementClass!==Q.A.OBJECT_CLASS_CURVE&&le.elementClass!==Q.A.OBJECT_CLASS_CURVE||ae.elementClass!==Q.A.OBJECT_CLASS_CURVE&&ae.elementClass!==Q.A.OBJECT_CLASS_CIRCLE||le.elementClass!==Q.A.OBJECT_CLASS_CURVE&&le.elementClass!==Q.A.OBJECT_CLASS_CIRCLE?ae.elementClass===Q.A.OBJECT_CLASS_CURVE&&!fe&&le.elementClass===Q.A.OBJECT_CLASS_LINE||le.elementClass===Q.A.OBJECT_CLASS_CURVE&&!_e&&ae.elementClass===Q.A.OBJECT_CLASS_LINE?function(){return ye.meetCurveLine(ae,le,ue,ae.board,re.A.evaluate(pe))}:ae.type===Q.A.OBJECT_TYPE_POLYGON||le.type===Q.A.OBJECT_TYPE_POLYGON?ae.elementClass===Q.A.OBJECT_CLASS_LINE?function(){var be,Ae=ae.evalVisProp("straightfirst"),Ce=ae.evalVisProp("straightlast"),Ee=le.evalVisProp("straightfirst"),Re=le.evalVisProp("straightlast");return be=!(re.A.evaluate(pe)||Ae&&Ce&&Ee&&Re),ye.meetPolygonLine(le,ae,ue,ae.board,be)}:le.elementClass===Q.A.OBJECT_CLASS_LINE?function(){var be,Ae=ae.evalVisProp("straightfirst"),Ce=ae.evalVisProp("straightlast"),Ee=le.evalVisProp("straightfirst"),Re=le.evalVisProp("straightlast");return be=!(re.A.evaluate(pe)||Ae&&Ce&&Ee&&Re),ye.meetPolygonLine(ae,le,ue,ae.board,be)}:function(){return ye.meetPathPath(ae,le,ue,ae.board)}:ae.elementClass===Q.A.OBJECT_CLASS_LINE&&le.elementClass===Q.A.OBJECT_CLASS_LINE?function(){var be,Ae,Ce=ae.evalVisProp("straightfirst"),Ee=ae.evalVisProp("straightlast"),Re=le.evalVisProp("straightfirst"),Te=le.evalVisProp("straightlast");return re.A.evaluate(pe)||Ce&&Ee&&Re&&Te?ye.meet(ae.stdform,le.stdform,ue,ae.board):(be=ye.meetSegmentSegment(ae.point1.coords.usrCoords,ae.point2.coords.usrCoords,le.point1.coords.usrCoords,le.point2.coords.usrCoords),Ae=!Ce&&be[1]<0||!Ee&&be[1]>1||!Re&&be[2]<0||!Te&&be[2]>1?[0,NaN,NaN]:be[0],new ee.A(Q.A.COORDS_BY_USER,Ae,ae.board))}:function(){var be,Ae,Ce,Ee=ye.meet(ae.stdform,le.stdform,ue,ae.board),Re=!0;return re.A.evaluate(pe)?Ee:(ae.elementClass!==Q.A.OBJECT_CLASS_LINE||(be=ae.evalVisProp("straightfirst"),Ae=ae.evalVisProp("straightlast"),be&&Ae||(Ce=ye.affineRatio(ae.point1.coords,ae.point2.coords,Ee),!(!Ae&&Ce>1+te.A.eps||!be&&Ce<0-te.A.eps))))&&(le.elementClass!==Q.A.OBJECT_CLASS_LINE||(be=le.evalVisProp("straightfirst"),Ae=le.evalVisProp("straightlast"),be&&Ae||(Ce=ye.affineRatio(le.point1.coords,le.point2.coords,Ee),!(!Ae&&Ce>1+te.A.eps||!be&&Ce<0-te.A.eps))))?fe&&((Re=ye.coordsOnArc(ae,Ee))&&_e&&(Re=ye.coordsOnArc(le,Ee)),!Re)?new ee.A(Z.A.COORDS_BY_USER,[0,NaN,NaN],ae.board):Ee:new ee.A(Z.A.COORDS_BY_USER,[0,NaN,NaN],ae.board)}:function(){return ye.meetCurveCurve(ae,le,ue,de,ae.board)}},otherIntersectionFunction:function(se,ae,le,ue){var de,pe,fe,_e=this;return pe=se[0],fe=se[1],de=pe.board,function(){var ye,be,Ae,Ce,Ee=ae.length,Re=re.A.evaluate(ue);for(ye=Ee;ye>=0;ye--)if(pe.elementClass===Q.A.OBJECT_CLASS_CIRCLE&&[Q.A.OBJECT_CLASS_CIRCLE,Q.A.OBJECT_CLASS_LINE].indexOf(fe.elementClass)>=0?Ae=_e.meet(pe.stdform,fe.stdform,ye,de):pe.elementClass===Q.A.OBJECT_CLASS_CURVE&&[Q.A.OBJECT_CLASS_CURVE,Q.A.OBJECT_CLASS_CIRCLE].indexOf(fe.elementClass)>=0?Ae=_e.meetCurveCurve(pe,fe,ye,0,de):pe.elementClass===Q.A.OBJECT_CLASS_CURVE&&fe.elementClass===Q.A.OBJECT_CLASS_LINE&&(Ae=re.A.exists(pe.dataX)?Z.A.Math.Geometry.meetCurveLine(pe,fe,ye,pe.board,re.A.evaluate(le)):Z.A.Math.Geometry.meetCurveLineContinuous(pe,fe,ye,pe.board)),Ae!==void 0){for(Ce=!1,be=0;!Ce&&be<Ee;be++)re.A.exists(Ae)&&re.A.exists(Ae.distance)&&Ae.distance(Z.A.COORDS_BY_USER,ae[be].coords)<Re&&(Ce=!0);if(!Ce)return Ae}return Ae}},coordsOnArc:function(se,ae){var le=this.rad(se.radiuspoint,se.center,ae.usrCoords.slice(1)),ue=0,de=this.rad(se.radiuspoint,se.center,se.anglepoint),pe=se.evalVisProp("selection");return(pe==="minor"&&de>Math.PI||pe==="major"&&de<Math.PI)&&(ue=de,de=2*Math.PI),!(le<ue||le>de)},meet:function(se,ae,le,ue){var de=te.A.eps;return Math.abs(se[3])<de&&Math.abs(ae[3])<de?this.meetLineLine(se,ae,le,ue):Math.abs(se[3])>=de&&Math.abs(ae[3])<de?this.meetLineCircle(ae,se,le,ue):Math.abs(se[3])<de&&Math.abs(ae[3])>=de?this.meetLineCircle(se,ae,le,ue):this.meetCircleCircle(se,ae,le,ue)},meetLineBoard:function(se,ae,le){var ue,de,pe,fe,_e=[];for(re.A.exists(le)||(le=0),_e[0]=te.A.crossProduct(se,[le,0,1]),_e[1]=te.A.crossProduct(se,[le,1,0]),_e[2]=te.A.crossProduct(se,[-le-ae.canvasHeight,0,1]),_e[3]=te.A.crossProduct(se,[-le-ae.canvasWidth,1,0]),pe=0;pe<4;pe++)if(Math.abs(_e[pe][0])>te.A.eps){for(fe=2;fe>0;fe--)_e[pe][fe]/=_e[pe][0];_e[pe][0]=1}return Math.abs(_e[1][0])<te.A.eps?(ue=_e[0],de=_e[2]):Math.abs(_e[0][0])<te.A.eps?(ue=_e[1],de=_e[3]):_e[1][2]<0?(ue=_e[0],de=_e[3][2]>ae.canvasHeight?_e[2]:_e[3]):_e[1][2]>ae.canvasHeight?(ue=_e[2],de=_e[3][2]<0?_e[0]:_e[3]):(ue=_e[1],de=_e[3][2]<0?_e[0]:_e[3][2]>ae.canvasHeight?_e[2]:_e[3]),[new ee.A(Q.A.COORDS_BY_SCREEN,ue.slice(1),ae),new ee.A(Q.A.COORDS_BY_SCREEN,de.slice(1),ae)]},meetLineLine:function(se,ae,le,ue){var de=isNaN(se[5]+ae[5])?[0,0,0]:te.A.crossProduct(se,ae);return Math.abs(de[0])<1e-14&&(de[0]=0),new ee.A(Q.A.COORDS_BY_USER,de,ue)},meetLineCircle:function(se,ae,le,ue){var de,pe,fe,_e,ye,be,Ae,Ce,Ee;return ae[4]<te.A.eps?Math.abs(te.A.innerProduct([1,ae[6],ae[7]],se,3))<te.A.eps?new ee.A(Q.A.COORDS_BY_USER,ae.slice(6,8),ue):new ee.A(Q.A.COORDS_BY_USER,[NaN,NaN],ue):(fe=ae[0],pe=ae.slice(1,3),de=ae[3],_e=se[0],ye=se.slice(1,3),be=de,(Ce=(Ae=pe[0]*ye[1]-pe[1]*ye[0])*Ae-4*be*(de*_e*_e-(pe[0]*ye[0]+pe[1]*ye[1])*_e+fe))>-te.A.eps*te.A.eps?(Ee=[(-Ae+(Ce=Math.sqrt(Math.abs(Ce))))/(2*be),(-Ae-Ce)/(2*be)],re.A.evaluate(le)===0?new ee.A(Q.A.COORDS_BY_USER,[-Ee[0]*-ye[1]-_e*ye[0],-Ee[0]*ye[0]-_e*ye[1]],ue):new ee.A(Q.A.COORDS_BY_USER,[-Ee[1]*-ye[1]-_e*ye[0],-Ee[1]*ye[0]-_e*ye[1]],ue)):new ee.A(Q.A.COORDS_BY_USER,[0,0,0],ue))},meetCircleCircle:function(se,ae,le,ue){var de;return se[4]<te.A.eps?Math.abs(this.distance(se.slice(6,2),ae.slice(6,8))-ae[4])<te.A.eps?new ee.A(Q.A.COORDS_BY_USER,se.slice(6,8),ue):new ee.A(Q.A.COORDS_BY_USER,[0,0,0],ue):ae[4]<te.A.eps?Math.abs(this.distance(ae.slice(6,2),se.slice(6,8))-se[4])<te.A.eps?new ee.A(Q.A.COORDS_BY_USER,ae.slice(6,8),ue):new ee.A(Q.A.COORDS_BY_USER,[0,0,0],ue):(de=[ae[3]*se[0]-se[3]*ae[0],ae[3]*se[1]-se[3]*ae[1],ae[3]*se[2]-se[3]*ae[2],0,1,1/0,1/0,1/0],de=te.A.normalize(de),this.meetLineCircle(de,se,le,ue))},meetCurveCurveDiscrete:function(se,ae,le,ue){var de,pe=re.A.evaluate(le);return de=se.bezierDegree===3||ae.bezierDegree===3?this.meetBezierCurveRedBlueSegments(se,ae,pe):this.meetCurveRedBlueSegments(se,ae,pe),new ee.A(Q.A.COORDS_BY_USER,de,ue)},meetCurveCurveNewton:function(se,ae,le,ue,de){var pe,fe,_e,ye,be=.5*(Math.sqrt(5)-1),Ae=te.A.eps*te.A.eps*te.A.eps,Ce=te.A.eps*te.A.eps,Ee=se.maxX(),Re=se.minX(),Te=ae.maxX(),Me=ae.minX();return pe=le[0]+(le[1]-le[0])*(1-be),fe=ue[0]+(ue[1]-ue[0])*(1-be),pe=(ye=ie.A.generalizedDampedNewton(function(Ne,Le){var Ie=se.Ft(Ne[0]),Ge=ae.Ft(Ne[1]);return[Ie[1]-Ge[1],Ie[2]-Ge[2]]},function(Ne,Le){var Ie=te.A.eps,Ge=2*Ie,He=se.Ft(Ne[0]-Ie),Be=se.Ft(Ne[0]+Ie),ze=ae.Ft(Ne[1]-Ie),Fe=ae.Ft(Ne[1]+Ie);return[[(Be[1]-He[1])/Ge,-(Fe[1]-ze[1])/Ge],[(Be[2]-He[2])/Ge,-(Fe[2]-ze[2])/Ge]]},2,[pe,fe],.85,Ae,40))[0][0],fe=ye[0][1],_e=se.Ft(pe),pe<le[0]-te.A.eps||pe>le[1]+te.A.eps||fe<ue[0]-te.A.eps||fe>ue[1]+te.A.eps||de&&(pe<Re-Ce||pe>Ee+Ce||fe<Me-Ce||fe>Te+Ce)?[_e,pe,fe,1e4]:[_e,pe,fe,ye[1]]},_meetCurveCurveIterative:function(se,ae,le,ue,de,pe){var fe,_e,ye,be,Ae,Ce,Ee,Re,Te,Me,Ne=100*te.A.eps,Le=[];if(ye=le[0],Ae=le[1],be=ue[0],Ce=ue[1],Ae<ye||Ce<be)return[];for(Te=(Ae-ye)/20,Me=(Ce-be)/20,Ee=0;Ee<20;Ee++)for(Re=0;Re<20;Re++)if((fe=this.meetCurveCurveNewton(se,ae,[ye+Ee*Te,ye+(Ee+1)*Te],[be+Re*Me,be+(Re+1)*Me],pe))[3]<te.A.eps&&(_e=fe[1],Le=Le.concat([_e]),(Le=re.A.toUniqueArrayFloat(Le,Ne)).length>de))return Le;return Le},meetCurveCurve:function(se,ae,le,ue,de,pe,fe){var _e,ye,be,Ae,Ce,Ee,Re=re.A.evaluate(le);return de=de||se.board,pe==="segment"||re.A.exists(se.dataX)||re.A.exists(ae.dataX)?this.meetCurveCurveDiscrete(se,ae,Re,de):re.A.exists(pe)&&pe==="newton"&&Re<0||parseInt(Re)!==Re?(_e=ie.A.generalizedNewton(se,ae,Re,ue),new ee.A(Q.A.COORDS_BY_USER,_e,de)):(be=se.minX(),Ae=se.maxX(),Ce=ae.minX(),Ee=ae.maxX(),(ye=this._meetCurveCurveIterative(se,ae,[be,Ae],[Ce,Ee],Re,fe)).length>Re?(_e=se.Ft(ye[Re]),new ee.A(Q.A.COORDS_BY_USER,_e,de)):[0,NaN,NaN])},meetCurveLine:function(se,ae,le,ue,de){var pe,fe;return re.A.exists(ue)||(ue=se.board),se.elementClass===Q.A.OBJECT_CLASS_CURVE?(pe=se,fe=ae):(pe=ae,fe=se),re.A.exists(pe.dataX)?this.meetCurveLineDiscrete(pe,fe,le,ue,!de):this.meetCurveCurve(pe,fe,le,0,ue,"newton",!de)},meetCurveLineContinuous:function(se,ae,le,ue,de){var pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te,Me,Ne,Le,Ie=te.A.eps,Ge=te.A.eps;for(ye=this.meetCurveLineDiscrete(se,ae,le,ue,de),be=ye.usrCoords[1],Ae=ye.usrCoords[2],pe=function(He){var Be,ze;return He>se.maxX()||He<se.minX()?1/0:(Be=se.X(He)-be)*Be+(ze=se.Y(He)-Ae)*ze},fe=function(He){var Be=ae.stdform[0]+ae.stdform[1]*se.X(He)+ae.stdform[2]*se.Y(He);return Be*Be},Ee=(se.maxX()-se.minX())/50,Re=se.minX(),Me=1e-4,Te=NaN,Ne=0;Ne<50&&(_e=ie.A.root(pe,[Math.max(Re,se.minX()),Math.min(Re+Ee,se.maxX())]),!((Le=Math.abs(pe(_e)))<=Me&&(Te=_e,(Me=Le)<Ie)));Ne++)Re+=Ee;return _e=Te,Le=fe(_e=ie.A.root(fe,[Math.max(_e-Ee,se.minX()),Math.min(_e+Ee,se.maxX())])),Ce=isNaN(Le)||Math.abs(Le)>Ge?0:1,new ee.A(Q.A.COORDS_BY_USER,[Ce,se.X(_e),se.Y(_e)],ue)},meetCurveLineDiscrete:function(se,ae,le,ue,de){var pe,fe,_e,ye,be,Ae,Ce,Ee=re.A.evaluate(le),Re=ae.point1.coords.usrCoords,Te=ae.point2.coords.usrCoords,Me=0,Ne=se.numberPoints,Le=ae.evalVisProp("straightfirst"),Ie=ae.evalVisProp("straightlast");for(Ae=new ee.A(Q.A.COORDS_BY_USER,[0,NaN,NaN],ue),Re[0]===0?Re=[1,Te[1]+ae.stdform[2],Te[2]-ae.stdform[1]]:Te[0]===0&&(Te=[1,Re[1]+ae.stdform[2],Re[2]-ae.stdform[1]]),ye=se.points[0].usrCoords,pe=1;pe<Ne;pe+=se.bezierDegree)if(_e=ye.slice(0),ye=se.points[pe].usrCoords,this.distance(_e,ye)>te.A.eps){for(Ce=se.bezierDegree===3?this.meetBeziersegmentBeziersegment([se.points[pe-1].usrCoords.slice(1),se.points[pe].usrCoords.slice(1),se.points[pe+1].usrCoords.slice(1),se.points[pe+2].usrCoords.slice(1)],[Re.slice(1),Te.slice(1)],de):[this.meetSegmentSegment(_e,ye,Re,Te)],fe=0;fe<Ce.length;fe++)if(0<=(be=Ce[fe])[1]&&be[1]<=1){if(Me===Ee)return de&&(!Le&&be[2]<0||!Ie&&be[2]>1)?Ae:Ae=new ee.A(Q.A.COORDS_BY_USER,be[0],ue);Me+=1}}return Ae},meetCurveRedBlueSegments:function(se,ae,le){var ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee=re.A.evaluate(le),Re=0,Te=ae.numberPoints,Me=se.numberPoints;if(Te<=1||Me<=1)return[0,NaN,NaN];for(ue=1;ue<Me;ue++)for(pe=se.points[ue-1].usrCoords,fe=se.points[ue].usrCoords,Ae=Math.min(pe[1],fe[1]),Ce=Math.max(pe[1],fe[1]),ye=ae.points[0].usrCoords,de=1;de<Te;de++)if(_e=ye,ye=ae.points[de].usrCoords,Math.min(_e[1],ye[1])<Ce&&Math.max(_e[1],ye[1])>Ae&&(be=this.meetSegmentSegment(pe,fe,_e,ye))[1]>=0&&be[2]>=0&&(be[1]<1&&be[2]<1||ue===Me-1&&be[1]===1||de===Te-1&&be[2]===1)){if(Re===Ee)return be[0];Re++}return[0,NaN,NaN]},meetSegmentSegment:function(se,ae,le,ue){var de,pe,fe,_e=te.A.crossProduct(se,ae),ye=te.A.crossProduct(le,ue),be=te.A.crossProduct(_e,ye);return Math.abs(be[0])<te.A.eps?[be,1/0,1/0]:(be[1]/=be[0],be[2]/=be[0],be[0]/=be[0],fe=se[pe=Math.abs(ae[1]-ae[0]*se[1])<te.A.eps?2:1]/se[0],de=(be[pe]-fe)/(ae[0]!==0?ae[pe]/ae[0]-fe:ae[pe]),fe=le[pe=Math.abs(ue[1]-ue[0]*le[1])<te.A.eps?2:1]/le[0],[be,de,(be[pe]-fe)/(ue[0]!==0?ue[pe]/ue[0]-fe:ue[pe])])},meetPathPath:function(se,ae,le,ue){var de,pe,fe,_e,ye=re.A.evaluate(le);return(fe=(de=Z.A.Math.Clip._getPath(se,ue)).length)>0&&this.distance(de[0].coords.usrCoords,de[fe-1].coords.usrCoords,3)<te.A.eps&&de.pop(),(fe=(pe=Z.A.Math.Clip._getPath(ae,ue)).length)>0&&this.distance(pe[0].coords.usrCoords,pe[fe-1].coords.usrCoords,3)<te.A.eps*te.A.eps&&pe.pop(),le<0||Z.A.Math.Clip.isEmptyCase(de,pe,"intersection")?new ee.A(Q.A.COORDS_BY_USER,[0,0,0],ue):(Z.A.Math.Clip.makeDoublyLinkedList(de),Z.A.Math.Clip.makeDoublyLinkedList(pe),ye<(_e=Z.A.Math.Clip.findIntersections(de,pe,ue)[0]).length?_e[ye].coords:new ee.A(Q.A.COORDS_BY_USER,[0,0,0],ue))},meetPolygonLine:function(se,ae,le,ue,de){var pe,fe,_e,ye=re.A.evaluate(le),be=[0,0,0],Ae=se.borders.length,Ce=[];for(pe=0;pe<Ae;pe++)_e=se.borders[pe],fe=this.meetSegmentSegment(_e.point1.coords.usrCoords,_e.point2.coords.usrCoords,ae.point1.coords.usrCoords,ae.point2.coords.usrCoords),(!de||fe[2]>=0&&fe[2]<1)&&fe[1]>=0&&fe[1]<1&&Ce.push(fe[0]);return ye>=0&&ye<Ce.length&&(be=Ce[ye]),new ee.A(Q.A.COORDS_BY_USER,be,ue)},_bezierSplit:function(se){var ae,le,ue,de,pe,fe;return ae=[.5*(se[0][0]+se[1][0]),.5*(se[0][1]+se[1][1])],le=[.5*(se[1][0]+se[2][0]),.5*(se[1][1]+se[2][1])],ue=[.5*(se[2][0]+se[3][0]),.5*(se[2][1]+se[3][1])],fe=[.5*((de=[.5*(ae[0]+le[0]),.5*(ae[1]+le[1])])[0]+(pe=[.5*(le[0]+ue[0]),.5*(le[1]+ue[1])])[0]),.5*(de[1]+pe[1])],[[se[0],ae,de,fe],[fe,pe,ue,se[3]]]},_bezierBbox:function(se){var ae=[];return se.length===4?(ae[0]=Math.min(se[0][0],se[1][0],se[2][0],se[3][0]),ae[1]=Math.max(se[0][1],se[1][1],se[2][1],se[3][1]),ae[2]=Math.max(se[0][0],se[1][0],se[2][0],se[3][0]),ae[3]=Math.min(se[0][1],se[1][1],se[2][1],se[3][1])):(ae[0]=Math.min(se[0][0],se[1][0]),ae[1]=Math.max(se[0][1],se[1][1]),ae[2]=Math.max(se[0][0],se[1][0]),ae[3]=Math.min(se[0][1],se[1][1])),ae},_bezierOverlap:function(se,ae){return se[2]>=ae[0]&&se[0]<=ae[2]&&se[1]>=ae[3]&&se[3]<=ae[1]},_bezierListConcat:function(se,ae,le,ue){var de,pe=re.A.exists(ue),fe=0,_e=ae.length,ye=se.length;for(ye>0&&_e>0&&(se[ye-1][1]===1&&ae[0][1]===0||pe&&se[ye-1][2]===1&&ae[0][2]===0)&&(fe=1),de=fe;de<_e;de++)pe&&(ae[de][2]*=.5,ae[de][2]+=ue),ae[de][1]*=.5,ae[de][1]+=le,se.push(ae[de])},_bezierMeetSubdivision:function(se,ae,le){var ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te,Me=[];return de=this._bezierBbox(ae),ue=this._bezierBbox(se),this._bezierOverlap(de,ue)?le<5?(ye=(pe=this._bezierSplit(se))[0],be=pe[1],fe=(pe=this._bezierSplit(ae))[0],_e=pe[1],this._bezierListConcat(Me,this._bezierMeetSubdivision(ye,fe,le+1),0,0),this._bezierListConcat(Me,this._bezierMeetSubdivision(ye,_e,le+1),0,.5),this._bezierListConcat(Me,this._bezierMeetSubdivision(be,fe,le+1),.5,0),this._bezierListConcat(Me,this._bezierMeetSubdivision(be,_e,le+1),.5,.5),Me):(Re=[1].concat(se[0]),Te=[1].concat(se[3]),Ce=[1].concat(ae[0]),Ee=[1].concat(ae[3]),(Ae=this.meetSegmentSegment(Re,Te,Ce,Ee))[1]>=0&&Ae[2]>=0&&Ae[1]<=1&&Ae[2]<=1?[Ae]:[]):[]},_bezierLineMeetSubdivision:function(se,ae,le,ue){var de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te=[];return de=this._bezierBbox(ae),pe=this._bezierBbox(se),ue&&!this._bezierOverlap(pe,de)?[]:le<5?(_e=(fe=this._bezierSplit(se))[0],ye=fe[1],this._bezierListConcat(Te,this._bezierLineMeetSubdivision(_e,ae,le+1),0),this._bezierListConcat(Te,this._bezierLineMeetSubdivision(ye,ae,le+1),.5),Te):(Ee=[1].concat(se[0]),Re=[1].concat(se[3]),Ae=[1].concat(ae[0]),Ce=[1].concat(ae[1]),(be=this.meetSegmentSegment(Ee,Re,Ae,Ce))[1]>=0&&be[1]<=1&&(!ue||be[2]>=0&&be[2]<=1)?[be]:[])},meetBeziersegmentBeziersegment:function(se,ae,le){var ue,de,pe;for((ue=se.length===4&&ae.length===4?this._bezierMeetSubdivision(se,ae,0):this._bezierLineMeetSubdivision(se,ae,0,le)).sort(function(fe,_e){return 1e7*(fe[1]-_e[1])+(fe[2]-_e[2])}),de=[],pe=0;pe<ue.length;pe++)pe!==0&&ue[pe][1]===ue[pe-1][1]&&ue[pe][2]===ue[pe-1][2]||de.push(ue[pe]);return de},meetBezierCurveRedBlueSegments:function(se,ae,le){var ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te,Me,Ne=re.A.evaluate(le),Le=0,Ie=0,Ge=[];if(ae.numberPoints<ae.bezierDegree+1||se.numberPoints<se.bezierDegree+1)return[0,NaN,NaN];for(se.bezierDegree===1&&ae.bezierDegree===3&&(ye=se,se=ae,ae=ye),Te=ae.numberPoints-ae.bezierDegree,Me=se.numberPoints-se.bezierDegree,se.type===Q.A.OBJECT_TYPE_SECTOR&&(Le=3,Me-=3),ae.type===Q.A.OBJECT_TYPE_SECTOR&&(Ie=3,Te-=3),de=Le;de<Me;de+=se.bezierDegree)for(be=[(ue=se.points)[de].usrCoords.slice(1),ue[de+1].usrCoords.slice(1)],se.bezierDegree===3&&(be[2]=ue[de+2].usrCoords.slice(1),be[3]=ue[de+3].usrCoords.slice(1)),Ce=this._bezierBbox(be),pe=Ie;pe<Te;pe+=ae.bezierDegree)if(Ae=[(ue=ae.points)[pe].usrCoords.slice(1),ue[pe+1].usrCoords.slice(1)],ae.bezierDegree===3&&(Ae[2]=ue[pe+2].usrCoords.slice(1),Ae[3]=ue[pe+3].usrCoords.slice(1)),Ee=this._bezierBbox(Ae),this._bezierOverlap(Ce,Ee)){if((Re=this.meetBeziersegmentBeziersegment(be,Ae)).length===0)continue;for(fe=0;fe<Re.length;fe++)(_e=Re[fe])[1]<-te.A.eps||_e[1]>1+te.A.eps||_e[2]<-te.A.eps||_e[2]>1+te.A.eps||Ge.push(_e);if(Ge.length>Ne)return Ge[Ne][0]}return Ge.length>Ne?Ge[Ne][0]:[0,NaN,NaN]},bezierSegmentEval:function(se,ae){var le,ue,de,pe=1-se;return ue=0,de=0,ue+=(le=pe*pe*pe)*ae[0][0],de+=le*ae[0][1],ue+=(le=3*se*pe*pe)*ae[1][0],de+=le*ae[1][1],ue+=(le=3*se*se*pe)*ae[2][0],de+=le*ae[2][1],[1,ue+=(le=se*se*se)*ae[3][0],de+=le*ae[3][1]]},bezierArc:function(se,ae,le,ue,de){var pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te,Me,Ne,Le,Ie,Ge,He,Be,ze,Fe=ae[1],$e=ae[2],Xe=ae[0],je=[],qe=[];for(be=this.distance(ae,se),Fe/=Xe,$e/=Xe,Ae=this.rad(se.slice(1),ae.slice(1),le.slice(1)),de===-1&&(Ae=2*Math.PI-Ae),Ee=Ae/4,(pe=se)[1]/=pe[0],pe[2]/=pe[0],pe[0]/=pe[0],ye=pe.slice(0),ue?(je=[Fe,Fe+.333*(pe[1]-Fe),Fe+.666*(pe[1]-Fe),pe[1]],qe=[$e,$e+.333*(pe[2]-$e),$e+.666*(pe[2]-$e),pe[2]]):(je=[pe[1]],qe=[pe[2]]);Ae>te.A.eps;)Ae>Ee?(Ce=Ee,Ae-=Ee):(Ce=Ae,Ae=0),ze=[[1,0,0],[Fe*(1-(Re=Math.cos(de*Ce)))+$e*(Te=Math.sin(de*Ce)),Re,-Te],[$e*(1-Re)-Fe*Te,Te,Re]],ye=[(He=te.A.matVecMult(ze,pe))[0]/He[0],He[1]/He[0],He[2]/He[0]],Me=pe[1]-Fe,Ne=pe[2]-$e,Le=ye[1]-Fe,Ie=ye[2]-$e,Be=te.A.hypot(Me+Le,Ne+Ie),Ge=Math.abs(Ie-Ne)>te.A.eps?(Me+Le)*(be/Be-.5)/(Ie-Ne)*8/3:(Ne+Ie)*(be/Be-.5)/(Me-Le)*8/3,fe=[1,pe[1]-Ge*Ne,pe[2]+Ge*Me],_e=[1,ye[1]+Ge*Ie,ye[2]-Ge*Le],re.A.concat(je,[fe[1],_e[1],ye[1]]),re.A.concat(qe,[fe[2],_e[2],ye[2]]),pe=ye.slice(0);return ue&&(re.A.concat(je,[ye[1]+.333*(Fe-ye[1]),ye[1]+.666*(Fe-ye[1]),Fe]),re.A.concat(qe,[ye[2]+.333*($e-ye[2]),ye[2]+.666*($e-ye[2]),$e])),[je,qe]},projectPointToCircle:function(se,ae,le){var ue,de,pe,fe,_e,ye=ae.center.coords.usrCoords;return re.A.exists(le)||(le=se.board),re.A.isPoint(se)?(ue=se.coords.distance(Q.A.COORDS_BY_USER,ae.center.coords),de=se.coords.usrCoords):(ue=se.distance(Q.A.COORDS_BY_USER,ae.center.coords),de=se.usrCoords),Math.abs(ue)<te.A.eps&&(ue=te.A.eps),_e=ae.Radius()/ue,pe=ye[1]+_e*(de[1]-ye[1]),fe=ye[2]+_e*(de[2]-ye[2]),new ee.A(Q.A.COORDS_BY_USER,[pe,fe],le)},projectPointToLine:function(se,ae,le){var ue,de=[0,ae.stdform[1],ae.stdform[2]];return re.A.exists(le)||(le=re.A.exists(se.coords)?se.board:ae.board),ue=re.A.exists(se.coords)?se.coords.usrCoords:se.usrCoords,de=te.A.crossProduct(de,ue),new ee.A(Q.A.COORDS_BY_USER,te.A.crossProduct(de,ae.stdform),le)},projectCoordsToSegment:function(se,ae,le){var ue,de=[le[1]-ae[1],le[2]-ae[2]],pe=[se[1]-ae[1],se[2]-ae[2]];return Math.abs(de[0])<te.A.eps&&Math.abs(de[1])<te.A.eps?[ae,0]:(ue=te.A.innerProduct(pe,de),[[1,(ue/=te.A.innerProduct(de,de))*de[0]+ae[1],ue*de[1]+ae[2]],ue])},projectCoordsToBeziersegment:function(se,ae,le){var ue;return ue=Z.A.Math.Numerics.fminbr(function(de){var pe=[1,ae.X(le+de),ae.Y(le+de)];return pe[1]-=se[1],pe[2]-=se[2],pe[1]*pe[1]+pe[2]*pe[2]},[0,1]),[[1,ae.X(ue+le),ae.Y(ue+le)],ue]},projectPointToCurve:function(se,ae,le){re.A.exists(le)||(le=se.board);var ue=se.X(),de=se.Y(),pe=se.position;return re.A.exists(pe)||(pe=ae.evalVisProp("curvetype")==="functiongraph"?ue:0),this.projectCoordsToCurve(ue,de,pe,ae,le)},projectCoordsToCurve:function(se,ae,le,ue,de){var pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te,Me,Ne,Le,Ie,Ge,He,Be,ze,Fe,$e,Xe,je,qe,Ze,st,St=Number.POSITIVE_INFINITY;if(re.A.exists(de)||(de=ue.board),ue.evalVisProp("curvetype")==="plot"){if(le=0,be=St,pe=ue.numberPoints===0?[0,1,1]:[ue.Z(0),ue.X(0),ue.Y(0)],ue.numberPoints>1)for(Ee=[1,se,ae],ue.bezierDegree===3?ye=0:Me=[ue.Z(0),ue.X(0),ue.Y(0)],_e=0;_e<ue.numberPoints-1;_e++)ue.bezierDegree===3?Le=this.projectCoordsToBeziersegment(Ee,ue,ye):(Ne=[ue.Z(_e+1),ue.X(_e+1),ue.Y(_e+1)],Le=this.projectCoordsToSegment(Ee,Me,Ne)),Ce=Le[1],Re=Le[0],0<=Ce&&Ce<=1?(Ae=this.distance(Re,Ee),Te=_e+Ce):Ce<0?(Re=Me,Ae=this.distance(Me,Ee),Te=_e):Ce>1&&_e===ue.numberPoints-2&&(Re=Ne,Ae=this.distance(Re,Ee),Te=ue.numberPoints-1),Ae<be&&(be=Ae,le=Te,pe=Re),ue.bezierDegree===3?(ye++,_e+=2):Me=Ne;fe=new ee.A(Q.A.COORDS_BY_USER,pe,de)}else{for(Ze=ue.minX(),st=ue.maxX(),je=Ze,qe=st,ue.evalVisProp("curvetype")==="functiongraph"&&(ze=Math.abs(ae-ue.Y(se)),isNaN(ze)||(je=se-ze,qe=se+ze)),Ie=function(it){var lt,ft;return it<Ze||it>ue.maxX_glob?1/0:(lt=se-ue.X(it))*lt+(ft=ae-ue.Y(it))*ft},Be=Ie(le),Fe=(qe-je)/50,Ge=je,_e=0;_e<50;_e++)((He=Ie(Ge))<Be||Be===1/0||isNaN(Be))&&(le=Ge,Be=He),Ge+=Fe;for($e=Fe,_e=0;_e<20&&isNaN(Ie(le-$e));_e++,$e*=.5);for(isNaN(Ie(le-$e))&&($e=0),Xe=Fe,_e=0;_e<20&&isNaN(Ie(le+Xe));_e++,Xe*=.5);isNaN(Ie(le+Xe))&&(Xe=0),le=(le=(le=ie.A.fminbr(Ie,[Math.max(le-$e,je),Math.min(le+Xe,qe)]))<Ze?Ze:le)>st?st:le,fe=new ee.A(Q.A.COORDS_BY_USER,[ue.X(le),ue.Y(le)],de)}return[ue.updateTransform(fe),le]},projectCoordsToPolygon:function(se,ae){var le,ue,de,pe,fe,_e=ae.vertices.length,ye=1/0;for(le=0;le<_e-1;le++)0<=(de=Z.A.Math.Geometry.projectCoordsToSegment(se,ae.vertices[le].coords.usrCoords,ae.vertices[le+1].coords.usrCoords))[1]&&de[1]<=1?(ue=Z.A.Math.Geometry.distance(de[0],se,3),pe=de[0]):de[1]<0?(ue=Z.A.Math.Geometry.distance(ae.vertices[le].coords.usrCoords,se,3),pe=ae.vertices[le].coords.usrCoords):(ue=Z.A.Math.Geometry.distance(ae.vertices[le+1].coords.usrCoords,se,3),pe=ae.vertices[le+1].coords.usrCoords),ue<ye&&(fe=pe.slice(0),ye=ue);return fe},projectPointToTurtle:function(se,ae,le){var ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re=0,Te=0,Me=Number.POSITIVE_INFINITY,Ne=ae.objects.length;for(re.A.exists(le)||(le=se.board),_e=0;_e<Ne;_e++)(be=ae.objects[_e]).elementClass===Q.A.OBJECT_CLASS_CURVE&&(ue=(Ce=this.projectPointToCurve(se,be))[0],Ee=Ce[1],(ye=this.distance(ue.usrCoords,se.coords.usrCoords))<Me&&(pe=ue.usrCoords[1],fe=ue.usrCoords[2],de=Ee,Me=ye,Ae=be,Te=Re),Re+=be.numberPoints);return ue=new ee.A(Q.A.COORDS_BY_USER,[pe,fe],le),[Ae.updateTransform(ue),de+Te]},projectPointToPoint:function(se,ae){return ae.coords},projectPointToBoard:function(se,ae){var le,ue,de,pe=ae||se.board,fe=[[1,1,0,0,3,0,1],[-1,2,1,0,1,2,1],[-1,1,2,2,1,2,3],[1,2,3,0,3,2,3]],_e=se.coords||se,ye=pe.getBoundingBox();for(le=0;le<4;le++)(de=fe[le])[0]*_e.usrCoords[de[1]]<de[0]*ye[de[2]]&&((ue=te.A.crossProduct([1,ye[de[3]],ye[de[4]]],[1,ye[de[5]],ye[de[6]]]))[3]=0,ue=te.A.normalize(ue),_e=this.projectPointToLine({coords:_e},{stdform:ue},pe));return _e},distPointLine:function(se,ae){var le,ue=ae[1],de=ae[2],pe=ae[0];return Math.abs(ue)+Math.abs(de)<te.A.eps?Number.POSITIVE_INFINITY:(le=ue*se[1]+de*se[2]+pe,ue*=ue,de*=de,Math.abs(le)/Math.sqrt(ue+de))},distPointSegment:function(se,ae,le){var ue,de,pe,fe,_e,ye,be=te.A.eps*te.A.eps,Ae=1e6;return ue=(ue=se[1]-ae[1])===1/0?Ae:ue===-1/0?-Ae:ue,de=(de=se[2]-ae[2])===1/0?Ae:de===-1/0?-Ae:de,(_e=(pe=(pe=le[1]-ae[1])===1/0?Ae:pe===-1/0?-Ae:pe)*pe+(fe=(fe=le[2]-ae[2])===1/0?Ae:fe===-1/0?-Ae:fe)*fe)>be&&((ye=(ue*pe+de*fe)/_e)<0?ye=0:ye>1&&(ye=1),ue-=ye*pe,de-=ye*fe),te.A.hypot(ue,de)},intersectionFunction3D:function(se,ae,le){var ue,de=this;return ae.type===Q.A.OBJECT_TYPE_PLANE3D?le.type===Q.A.OBJECT_TYPE_PLANE3D?ue=se.intersectionPlanePlane(ae,le):le.type===Q.A.OBJECT_TYPE_SPHERE3D&&(ue=de.meetPlaneSphere(ae,le)):ae.type===Q.A.OBJECT_TYPE_SPHERE3D&&(le.type===Q.A.OBJECT_TYPE_PLANE3D?ue=de.meetPlaneSphere(le,ae):le.type===Q.A.OBJECT_TYPE_SPHERE3D&&(ue=de.meetSphereSphere(ae,le))),ue},meet3Planes:function(se,ae,le,ue,de,pe){var fe,_e,ye,be,Ae,Ce=[1,0,0,0];for(fe=te.A.crossProduct(de.slice(1),se.slice(1)),_e=te.A.crossProduct(se.slice(1),le.slice(1)),ye=te.A.crossProduct(le.slice(1),de.slice(1)),be=te.A.innerProduct(se.slice(1),ye,3),Ae=0;Ae<3;Ae++)Ce[Ae+1]=(ae*ye[Ae]+ue*fe[Ae]+pe*_e[Ae])/be;return Ce},meetPlanePlane:function(se,ae,le,ue){var de,pe,fe,_e;return fe=se.slice(1),_e=ae.slice(1),de=te.A.crossProduct(fe,_e),fe=le.slice(1),_e=ue.slice(1),pe=te.A.crossProduct(fe,_e),(_e=te.A.crossProduct(de,pe)).unshift(0),_e},meetPlaneSphere:function(se,ae){var le=function(){return te.A.innerProduct(se.normal,ae.center.coords,4)-se.d};return[function(){return te.A.axpy(-le(),se.normal,ae.center.coords)},se.normal,function(){var ue=ae.Radius(),de=le();return Math.sqrt(ue*ue-de*de)}]},meetSphereSphere:function(se,ae){var le=function(){var ue=se.center.distance(ae.center),de=se.Radius(),pe=ae.Radius();return(de-pe)*(de+pe)/(ue*ue)};return[function(){var ue=le();return[1,.5*((1-ue)*se.center.coords[1]+(1+ue)*ae.center.coords[1]),.5*((1-ue)*se.center.coords[2]+(1+ue)*ae.center.coords[2]),.5*((1-ue)*se.center.coords[3]+(1+ue)*ae.center.coords[3])]},function(){return ne.A.subtract(ae.center.coords,se.center.coords)},function(){var ue=se.center.distance(ae.center),de=se.Radius(),pe=ae.Radius(),fe=le(),_e=.5*(de*de+pe*pe-.5*ue*ue*(1+fe*fe));return Math.sqrt(_e)}]},_paramsOutOfRange:function(se,ae,le){return se[0]<ae[0]||se[0]>ae[1]||se.length>1&&(se[1]<le[0]||se[1]>le[1])},projectCoordsToParametric:function(se,ae,le,ue){var de,pe,fe,_e,ye,be=.01*Math.random()+.5,Ae=2*le;return le===1?de=.1*((_e=[re.A.evaluate(ae.range[0]),re.A.evaluate(ae.range[1])])[1]-_e[0]):le===2&&(_e=[re.A.evaluate(ae.range_u[0]),re.A.evaluate(ae.range_u[1])],ye=[re.A.evaluate(ae.range_v[0]),re.A.evaluate(ae.range_v[1])],de=.1*Math.min(_e[1]-_e[0],ye[1]-ye[0])),pe=de/5e6,fe=function(Ce,Ee,Re,Te){var Me=[ae.X.apply(ae,Re),ae.Y.apply(ae,Re),ae.Z.apply(ae,Re)],Ne=se[0]-Me[0],Le=se[1]-Me[1],Ie=se[2]-Me[2];return Ee>=2&&(Te[0]=Re[0]-_e[0],Te[1]=-Re[0]+_e[1]),Ee>=4&&(Te[2]=Re[1]-ye[0],Te[3]=-Re[1]+ye[1]),Ne*Ne+Le*Le+Ie*Ie},ue.length===0&&(ue[0]=be*(_e[0]+_e[1]),le===2&&(ue[1]=be*(ye[0]+ye[1]))),te.A.Nlp.FindMinimum(fe,le,0,ue,de,pe,0,200),se=[ae.X.apply(ae,ue),ae.Y.apply(ae,ue),ae.Z.apply(ae,ue)],this._paramsOutOfRange(ue,_e,ye)&&(ue[0]=be*(_e[0]+_e[1]),le===2&&(ue[1]=be*(ye[0]+ye[1])),te.A.Nlp.FindMinimum(fe,le,Ae,ue,de,pe,0,200)),[1,ae.X.apply(ae,ue),ae.Y.apply(ae,ue),ae.Z.apply(ae,ue)]},project3DTo3DPlane:function(se,ae,le){var ue,de;return le=le||[0,0,0],ue=te.A.norm(ae),de=(te.A.innerProduct(se,ae,3)-te.A.innerProduct(le,ae,3))/ue,te.A.axpy(-de,ae,se)},getPlaneBounds:function(se,ae,le,ue,de){var pe,fe,_e,ye,be;return se[2]+ae[0]!==0?(_e=[[se[0],ae[0]],[se[1],ae[1]]],ye=[ue-le[0],ue-le[1]],pe=(be=ie.A.Gauss(_e,ye))[0],fe=be[1],ye=[de-le[0],de-le[1]],[pe,(be=ie.A.Gauss(_e,ye))[0],fe,be[1]]):null},reuleauxPolygon:function(se,ae){var le,ue=2*Math.PI,de=ue/ae,pe=(ae-1)/2,fe=0,_e=function(ye,be){return function(Ae,Ce){var Ee=(Ae%ue+ue)%ue,Re=Math.floor(Ee/de)%ae;return Ce||(fe=se[0].Dist(se[pe]),le=te.A.Geometry.rad([se[0].X()+1,se[0].Y()],se[0],se[pe%ae])),isNaN(Re)?Re:(Ee=.5*Ee+Re*de*.5+le,se[Re][ye]()+fe*Math[be](Ee))}};return[_e("X","cos"),_e("Y","sin"),0,ue]}}),_.A=te.A.Geometry},588:function(G,_,J){var Z=J(443),Q=J(477),ee=J(188);Q.A.Statistics={sum:function(te){var ne,ie=te.length,re=0;for(ne=0;ne<ie;ne++)re+=te[ne];return re},prod:function(te){var ne,ie=te.length,re=1;for(ne=0;ne<ie;ne++)re*=te[ne];return re},mean:function(te){return te.length>0?this.sum(te)/te.length:0},median:function(te){var ne,ie;return te.length>0?(ArrayBuffer.isView(te)?(ne=new Float64Array(te)).sort():(ne=te.slice(0)).sort(function(re,oe){return re-oe}),1&(ie=ne.length)?ne[parseInt(.5*ie,10)]:.5*(ne[.5*ie-1]+ne[.5*ie])):0},percentile:function(te,ne){var ie,re,oe,se,ae,le=[];if(te.length>0){for(ArrayBuffer.isView(te)?(ie=new Float64Array(te)).sort():(ie=te.slice(0)).sort(function(ue,de){return ue-de}),re=ie.length,se=ee.A.isArray(ne)?ne:[ne],oe=0;oe<se.length;oe++)ae=re*se[oe]*.01,parseInt(ae,10)===ae?le.push(.5*(ie[ae-1]+ie[ae])):le.push(ie[parseInt(ae,10)]);return ee.A.isArray(ne)?le:le[0]}return 0},variance:function(te){var ne,ie,re,oe=te.length;if(oe>1){for(ne=this.mean(te),ie=0,re=0;re<oe;re++)ie+=(te[re]-ne)*(te[re]-ne);return ie/(te.length-1)}return 0},sd:function(te){return Math.sqrt(this.variance(te))},weightedMean:function(te,ne){if(te.length!==ne.length)throw new Error("JSXGraph error (Math.Statistics.weightedMean): Array dimension mismatch.");return te.length>0?this.mean(this.multiply(te,ne)):0},max:function(te){return Math.max.apply(this,te)},min:function(te){return Math.min.apply(this,te)},range:function(te){return[this.min(te),this.max(te)]},abs:function(te){var ne,ie,re;if(ee.A.isArray(te))if(te.map)re=te.map(Math.abs);else for(ie=te.length,re=[],ne=0;ne<ie;ne++)re[ne]=Math.abs(te[ne]);else re=ArrayBuffer.isView(te)?te.map(Math.abs):Math.abs(te);return re},add:function(te,ne){var ie,re,oe=[];if(te=ee.A.evalSlider(te),ne=ee.A.evalSlider(ne),ee.A.isArray(te)&&ee.A.isNumber(ne))for(re=te.length,ie=0;ie<re;ie++)oe[ie]=te[ie]+ne;else if(ee.A.isNumber(te)&&ee.A.isArray(ne))for(re=ne.length,ie=0;ie<re;ie++)oe[ie]=te+ne[ie];else if(ee.A.isArray(te)&&ee.A.isArray(ne))for(re=Math.min(te.length,ne.length),ie=0;ie<re;ie++)oe[ie]=te[ie]+ne[ie];else oe=te+ne;return oe},div:function(te,ne){var ie,re,oe=[];if(te=ee.A.evalSlider(te),ne=ee.A.evalSlider(ne),ee.A.isArray(te)&&ee.A.isNumber(ne))for(re=te.length,ie=0;ie<re;ie++)oe[ie]=te[ie]/ne;else if(ee.A.isNumber(te)&&ee.A.isArray(ne))for(re=ne.length,ie=0;ie<re;ie++)oe[ie]=te/ne[ie];else if(ee.A.isArray(te)&&ee.A.isArray(ne))for(re=Math.min(te.length,ne.length),ie=0;ie<re;ie++)oe[ie]=te[ie]/ne[ie];else oe=te/ne;return oe},divide:function(){Z.A.deprecated("Statistics.divide()","Statistics.div()"),Q.A.Statistics.div.apply(Q.A.Statistics,arguments)},mod:function(te,ne,ie){var re,oe,se=[],ae=function(le,ue){return le%ue};if((ie=ee.A.def(ie,!1))&&(ae=Q.A.mod),te=ee.A.evalSlider(te),ne=ee.A.evalSlider(ne),ee.A.isArray(te)&&ee.A.isNumber(ne))for(oe=te.length,re=0;re<oe;re++)se[re]=ae(te[re],ne);else if(ee.A.isNumber(te)&&ee.A.isArray(ne))for(oe=ne.length,re=0;re<oe;re++)se[re]=ae(te,ne[re]);else if(ee.A.isArray(te)&&ee.A.isArray(ne))for(oe=Math.min(te.length,ne.length),re=0;re<oe;re++)se[re]=ae(te[re],ne[re]);else se=ae(te,ne);return se},multiply:function(te,ne){var ie,re,oe=[];if(te=ee.A.evalSlider(te),ne=ee.A.evalSlider(ne),ee.A.isArray(te)&&ee.A.isNumber(ne))for(re=te.length,ie=0;ie<re;ie++)oe[ie]=te[ie]*ne;else if(ee.A.isNumber(te)&&ee.A.isArray(ne))for(re=ne.length,ie=0;ie<re;ie++)oe[ie]=te*ne[ie];else if(ee.A.isArray(te)&&ee.A.isArray(ne))for(re=Math.min(te.length,ne.length),ie=0;ie<re;ie++)oe[ie]=te[ie]*ne[ie];else oe=te*ne;return oe},subtract:function(te,ne){var ie,re,oe=[];if(te=ee.A.evalSlider(te),ne=ee.A.evalSlider(ne),ee.A.isArray(te)&&ee.A.isNumber(ne))for(re=te.length,ie=0;ie<re;ie++)oe[ie]=te[ie]-ne;else if(ee.A.isNumber(te)&&ee.A.isArray(ne))for(re=ne.length,ie=0;ie<re;ie++)oe[ie]=te-ne[ie];else if(ee.A.isArray(te)&&ee.A.isArray(ne))for(re=Math.min(te.length,ne.length),ie=0;ie<re;ie++)oe[ie]=te[ie]-ne[ie];else oe=te-ne;return oe},TheilSenRegression:function(te){var ne,ie,re=[],oe=[],se=[];for(ne=0;ne<te.length;ne++){for(oe.length=0,ie=0;ie<te.length;ie++)Math.abs(te[ie].usrCoords[1]-te[ne].usrCoords[1])>Q.A.eps&&(oe[ie]=(te[ie].usrCoords[2]-te[ne].usrCoords[2])/(te[ie].usrCoords[1]-te[ne].usrCoords[1]));re[ne]=this.median(oe),se.push(te[ne].usrCoords[2]-re[ne]*te[ne].usrCoords[1])}return[this.median(se),this.median(re),-1]},generateGaussian:function(te,ne){var ie,re,oe;if(this.hasSpare)return this.hasSpare=!1,this.spare*ne+te;do oe=(ie=2*Math.random()-1)*ie+(re=2*Math.random()-1)*re;while(oe>=1||oe===0);return oe=Math.sqrt(-2*Math.log(oe)/oe),this.spare=re*oe,this.hasSpare=!0,te+ne*ie*oe},randomNormal:function(te,ne){return this.generateGaussian(te,ne)},randomUniform:function(te,ne){return Math.random()*(ne-te)+te},randomExponential:function(te){var ne;if(te<=0)return NaN;do ne=Math.random();while(ne===0);return-Math.log(ne)/te},randomGamma:function(te,ne,ie){var re,oe,se,ae,le,ue;if(te<=0)return NaN;if(ne=ne||1,ie=ie||0,te===1)return ne*this.randomExponential(1)+ie;if(te<1){le=Math.E/(te+Math.E);do{re=Math.random();do oe=Math.random();while(oe===0);re<le?(se=Math.pow(oe,1/te),ue=Math.exp(-se)):(se=1-Math.log(oe),ue=Math.pow(se,te-1)),re=Math.random()}while(re>=ue);return ne*se+ie}do ae=Math.tan(Math.PI*Math.random()),(se=Math.sqrt(2*te-1)*ae+te-1)>0&&(oe=Math.random());while(se<=0||oe>(1+ae*ae)*Math.exp((te-1)*Math.log(se/(te-1))-Math.sqrt(2*te-1)*ae));return ne*se+ie},randomBeta:function(te,ne){var ie;return te<=0||ne<=0?NaN:(ie=this.randomGamma(te))/(ie+this.randomGamma(ne))},randomChisquare:function(te){return te<=0?NaN:2*this.randomGamma(.5*te)},randomF:function(te,ne){return te<=0||ne<=0?NaN:this.randomChisquare(te)*ne/(this.randomChisquare(ne)*te)},randomT:function(te){var ne,ie;return te<=0?NaN:(ne=this.randomNormal(0,1),ie=this.randomChisquare(te),ne/Math.sqrt(ie/te))},randomBinomial:function(te,ne){var ie,re,oe,se,ae;if(ne<0||ne>1||te<0)return NaN;if(ne===0)return 0;if(ne===1)return te;if(te===0)return 0;if(te===1)return Math.random()<ne?1:0;if(ne>.5)return te-this.randomBinomial(te,1-ne);if(te<100){if(ie=-1,re=0,(oe=Math.log(1-ne))===0)return 0;do ie+=1,re+=Math.floor(Math.log(Math.random())/oe)+1;while(re<te)}else ae=te-(se=1+Math.floor(.5*te))+1,ie=(ie=this.randomBeta(se,ae))>=ne?this.randomBinomial(se-1,ne/ie):se+this.randomBinomial(ae-1,(ne-ie)/(1-ie));return ie},randomGeometric:function(te){var ne;return te<0||te>1?NaN:(ne=Math.random(),Math.ceil(Math.log(ne)/Math.log(1-te)))},randomPoisson:function(te){var ne,ie,re=Math.exp(-te),oe=0,se=1;if(te<=0)return NaN;if(te<10){do se*=Math.random(),oe+=1;while(se>re);ne=oe-1}else oe=Math.floor(.875*te),ne=(ie=this.randomGamma(oe))<te?oe+this.randomPoisson(te-ie):this.randomBinomial(oe-1,te/ie);return ne},randomPareto:function(te,ne){var ie=Math.random();return te<=0||ne<=0?NaN:ne*Math.pow(1-ie,-1/te)},randomHypergeometric:function(te,ne,ie){var re,oe,se,ae=te+ne-ie,le=Math.min(te,ne),ue=le;if(te<1||ne<1||ie>te+ne)return NaN;for(re=ie;ue*re>0;)oe=Math.random(),ue-=Math.floor(oe+ue/(ae+re)),re-=1;return se=le-ue,te<=ne?se:ie-se},histogram:function(te,ne){var ie,re,oe,se,ae,le,ue,de,pe,fe=[],_e=[],ye=0;for(le=ne.bins||10,(de=ne.range||!1)===!1?(se=Math.min.apply(null,te),ae=Math.max.apply(null,te)):(se=de[0],ae=de[1]),ue=le>0?(ae-se)/(le-1):0,ie=0;ie<le;ie++)fe.push(0),_e.push(se+ie*ue);for(re=te.length,ie=0;ie<re;ie++)(oe=Math.floor((te[ie]-se)/ue))>=0&&oe<le?fe[oe]+=1:ye+=1;if(ne.density)for(pe=Z.A.Math.Statistics.sum(fe)+ye,ie=0;ie<le;ie++)fe[ie]/=pe*ue;if(ne.cumulative){if(ne.density)for(ie=0;ie<le;ie++)fe[ie]*=ue;for(ie=1;ie<le;ie++)fe[ie]+=fe[ie-1]}return[fe,_e]}},_.A=Q.A.Statistics},713:function(G,_,J){var Z=J(443),Q=J(188),ee=J(561),te=J(904);Z.A.Expect={each:function(ne,ie,re){var oe,se,ae=[];if(Q.A.exists(ne.length))for(se=ne.length,oe=0;oe<se;oe++)ae.push(ie.call(this,ne[oe],re));return ae},coords:function(ne,ie){var re=ne;return ne&&ne.elementClass===ee.A.OBJECT_CLASS_POINT?re=ne.coords:ne.usrCoords&&ne.scrCoords&&ne.usr2screen&&(re=ne),ie&&(re=new te.A(ee.A.COORDS_BY_USER,re.usrCoords,re.board)),re},coordsArray:function(ne,ie){var re;return(re=Q.A.isArray(ne)?ne:this.coords(ne).usrCoords).length<3&&re.unshift(1),ie&&(re=[re[0],re[1],re[2]]),re}},_.A=Z.A.Expect},733:function(G,_,J){var Z=J(443),Q=J(477),ee=J(188);Z.A.Math.DoubleBits=function(){var ie,re,oe,se,ae,le,ue,de,pe=new Float64Array(1),fe=new Uint32Array(pe.buffer);Float64Array!==void 0&&(pe[0]=1,fe[1]===1072693248?(ie=function(_e){return pe[0]=_e,[fe[0],fe[1]]},re=function(_e,ye){return fe[0]=_e,fe[1]=ye,pe[0]},oe=function(_e){return pe[0]=_e,fe[0]},se=function(_e){return pe[0]=_e,fe[1]},this.doubleBits=ie,this.pack=re,this.lo=oe,this.hi=se):fe[0]===1072693248&&(ae=function(_e){return pe[0]=_e,[fe[1],fe[0]]},le=function(_e,ye){return fe[1]=_e,fe[0]=ye,pe[0]},ue=function(_e){return pe[0]=_e,fe[1]},de=function(_e){return pe[0]=_e,fe[0]},this.doubleBits=ae,this.pack=le,this.lo=ue,this.hi=de))},Z.A.extend(Z.A.Math.DoubleBits.prototype,{sign:function(ie){return this.hi(ie)>>>31},exponent:function(ie){return(this.hi(ie)<<1>>>21)-1023},fraction:function(ie){var re=this.lo(ie),oe=this.hi(ie),se=1048575&oe;return 2146435072&oe&&(se+=1048576),[re,se]},denormalized:function(ie){return!(2146435072&this.hi(ie))}});var te=new Z.A.Math.DoubleBits,ne=function(ie,re){if(ie!==void 0&&re!==void 0){if(Q.A.IntervalArithmetic.isInterval(ie)){if(!Q.A.IntervalArithmetic.isSingleton(ie))throw new TypeError("JXG.Math.IntervalArithmetic: interval `lo` must be a singleton");this.lo=ie.lo}else this.lo=ie;if(Q.A.IntervalArithmetic.isInterval(re)){if(!Q.A.IntervalArithmetic.isSingleton(re))throw new TypeError("JXG.Math.IntervalArithmetic: interval `hi` must be a singleton");this.hi=re.hi}else this.hi=re}else{if(ie!==void 0)return Array.isArray(ie)?new ne(ie[0],ie[1]):new ne(ie,ie);this.lo=this.hi=0}};Z.A.extend(ne.prototype,{print:function(){console.log("[",this.lo,this.hi,"]")},set:function(ie,re){return this.lo=ie,this.hi=re,this},bounded:function(ie,re){return this.set(Q.A.IntervalArithmetic.prev(ie),Q.A.IntervalArithmetic.next(re))},boundedSingleton:function(ie){return this.bounded(ie,ie)},assign:function(ie,re){if(typeof ie!="number"||typeof re!="number")throw new TypeError("JXG.Math.Interval#assign: arguments must be numbers");return isNaN(ie)||isNaN(re)||ie>re?this.setEmpty():this.set(ie,re)},setEmpty:function(){return this.set(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},setWhole:function(){return this.set(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY)},open:function(ie,re){return this.assign(Q.A.IntervalArithmetic.next(ie),Q.A.IntervalArithmetic.prev(re))},halfOpenLeft:function(ie,re){return this.assign(Q.A.IntervalArithmetic.next(ie),re)},halfOpenRight:function(ie,re){return this.assign(ie,Q.A.IntervalArithmetic.prev(re))},toArray:function(){return[this.lo,this.hi]},clone:function(){return new ne().set(this.lo,this.hi)}}),Z.A.Math.IntervalArithmetic={Interval:function(ie,re){return new ne(ie,re)},isInterval:function(ie){return ie!==null&&typeof ie=="object"&&typeof ie.lo=="number"&&typeof ie.hi=="number"},isSingleton:function(ie){return ie.lo===ie.hi},add:function(ie,re){return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),ee.A.isNumber(re)&&(re=this.Interval(re)),new ne(this.addLo(ie.lo,re.lo),this.addHi(ie.hi,re.hi))},sub:function(ie,re){return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),ee.A.isNumber(re)&&(re=this.Interval(re)),new ne(this.subLo(ie.lo,re.hi),this.subHi(ie.hi,re.lo))},mul:function(ie,re){var oe,se,ae,le,ue;return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),ee.A.isNumber(re)&&(re=this.Interval(re)),this.isEmpty(ie)||this.isEmpty(re)?this.EMPTY.clone():(oe=ie.lo,se=ie.hi,ae=re.lo,le=re.hi,ue=new ne,oe<0?se>0?ae<0?le>0?(ue.lo=Math.min(this.mulLo(oe,le),this.mulLo(se,ae)),ue.hi=Math.max(this.mulHi(oe,ae),this.mulHi(se,le))):(ue.lo=this.mulLo(se,ae),ue.hi=this.mulHi(oe,ae)):le>0?(ue.lo=this.mulLo(oe,le),ue.hi=this.mulHi(se,le)):(ue.lo=0,ue.hi=0):ae<0?le>0?(ue.lo=this.mulLo(oe,le),ue.hi=this.mulHi(oe,ae)):(ue.lo=this.mulLo(se,le),ue.hi=this.mulHi(oe,ae)):le>0?(ue.lo=this.mulLo(oe,le),ue.hi=this.mulHi(se,ae)):(ue.lo=0,ue.hi=0):se>0?ae<0?le>0?(ue.lo=this.mulLo(se,ae),ue.hi=this.mulHi(se,le)):(ue.lo=this.mulLo(se,ae),ue.hi=this.mulHi(oe,le)):le>0?(ue.lo=this.mulLo(oe,ae),ue.hi=this.mulHi(se,le)):(ue.lo=0,ue.hi=0):(ue.lo=0,ue.hi=0),ue)},div:function(ie,re){return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),ee.A.isNumber(re)&&(re=this.Interval(re)),this.isEmpty(ie)||this.isEmpty(re)?this.EMPTY.clone():this.zeroIn(re)?re.lo!==0?re.hi!==0?this.divZero(ie):this.divNegative(ie,re.lo):re.hi!==0?this.divPositive(ie,re.hi):this.EMPTY.clone():this.divNonZero(ie,re)},positive:function(ie){return new ne(ie.lo,ie.hi)},negative:function(ie){return ee.A.isNumber(ie)?new ne(-ie):new ne(-ie.hi,-ie.lo)},isEmpty:function(ie){return ie.lo>ie.hi},isWhole:function(ie){return ie.lo===-1/0&&ie.hi===1/0},zeroIn:function(ie){return this.hasValue(ie,0)},hasValue:function(ie,re){return!this.isEmpty(ie)&&ie.lo<=re&&re<=ie.hi},hasInterval:function(ie,re){return!!this.isEmpty(ie)||!this.isEmpty(re)&&re.lo<=ie.lo&&ie.hi<=re.hi},intervalsOverlap:function(ie,re){return!this.isEmpty(ie)&&!this.isEmpty(re)&&(ie.lo<=re.lo&&re.lo<=ie.hi||re.lo<=ie.lo&&ie.lo<=re.hi)},divNonZero:function(ie,re){var oe=ie.lo,se=ie.hi,ae=re.lo,le=re.hi,ue=new ne;return se<0?le<0?(ue.lo=this.divLo(se,ae),ue.hi=this.divHi(oe,le)):(ue.lo=this.divLo(oe,ae),ue.hi=this.divHi(se,le)):oe<0?le<0?(ue.lo=this.divLo(se,le),ue.hi=this.divHi(oe,le)):(ue.lo=this.divLo(oe,ae),ue.hi=this.divHi(se,ae)):le<0?(ue.lo=this.divLo(se,le),ue.hi=this.divHi(oe,ae)):(ue.lo=this.divLo(oe,le),ue.hi=this.divHi(se,ae)),ue},divPositive:function(ie,re){return ie.lo===0&&ie.hi===0?ie:this.zeroIn(ie)?this.WHOLE:ie.hi<0?new ne(Number.NEGATIVE_INFINITY,this.divHi(ie.hi,re)):new ne(this.divLo(ie.lo,re),Number.POSITIVE_INFINITY)},divNegative:function(ie,re){return ie.lo===0&&ie.hi===0?ie:this.zeroIn(ie)?this.WHOLE:ie.hi<0?new ne(this.divLo(ie.hi,re),Number.POSITIVE_INFINITY):new ne(Number.NEGATIVE_INFINITY,this.divHi(ie.lo,re))},divZero:function(ie){return ie.lo===0&&ie.hi===0?ie:this.WHOLE},fmod:function(ie,re){var oe,se;return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),ee.A.isNumber(re)&&(re=this.Interval(re)),this.isEmpty(ie)||this.isEmpty(re)?this.EMPTY.clone():(oe=ie.lo<0?re.lo:re.hi,se=(se=ie.lo/oe)<0?Math.ceil(se):Math.floor(se),this.sub(ie,this.mul(re,new ne(se))))},multiplicativeInverse:function(ie){return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),this.isEmpty(ie)?this.EMPTY.clone():this.zeroIn(ie)?ie.lo!==0?ie.hi!==0?this.WHOLE:new ne(Number.NEGATIVE_INFINITY,this.divHi(1,ie.lo)):ie.hi!==0?new ne(this.divLo(1,ie.hi),Number.POSITIVE_INFINITY):this.EMPTY.clone():new ne(this.divLo(1,ie.hi),this.divHi(1,ie.lo))},pow:function(ie,re){var oe,se;if(ee.A.isNumber(ie)&&(ie=this.Interval(ie)),this.isEmpty(ie))return this.EMPTY.clone();if(this.isInterval(re)){if(!this.isSingleton(re))return this.EMPTY.clone();re=re.lo}return re===0?ie.lo===0&&ie.hi===0?this.EMPTY.clone():this.ONE.clone():re<0?this.pow(this.multiplicativeInverse(ie),-re):re%1==0?ie.hi<0?(oe=this.powLo(-ie.hi,re),se=this.powHi(-ie.lo,re),1&~re?new ne(oe,se):new ne(-se,-oe)):ie.lo<0?1&~re?new ne(0,this.powHi(Math.max(-ie.lo,ie.hi),re)):new ne(-this.powLo(-ie.lo,re),this.powHi(ie.hi,re)):new ne(this.powLo(ie.lo,re),this.powHi(ie.hi,re)):(console.warn("power is not an integer, you should use nth-root instead, returning an empty interval"),this.EMPTY.clone())},sqrt:function(ie){return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),this.nthRoot(ie,2)},nthRoot:function(ie,re){var oe,se,ae,le,ue;if(ee.A.isNumber(ie)&&(ie=this.Interval(ie)),this.isEmpty(ie)||re<0)return this.EMPTY.clone();if(this.isInterval(re)){if(!this.isSingleton(re))return this.EMPTY.clone();re=re.lo}return oe=1/re,ie.hi<0?re%1!=0||1&~re?this.EMPTY.clone():(se=this.powHi(-ie.lo,oe),ae=this.powLo(-ie.hi,oe),new ne(-se,-ae)):ie.lo<0?(le=this.powHi(ie.hi,oe),re%1!=0||1&~re?new ne(0,le):(ue=-this.powHi(-ie.lo,oe),new ne(ue,le))):new ne(this.powLo(ie.lo,oe),this.powHi(ie.hi,oe))},exp:function(ie){return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),this.isEmpty(ie)?this.EMPTY.clone():new ne(this.expLo(ie.lo),this.expHi(ie.hi))},log:function(ie){var re;return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),this.isEmpty(ie)?this.EMPTY.clone():(re=ie.lo<=0?Number.NEGATIVE_INFINITY:this.logLo(ie.lo),new ne(re,this.logHi(ie.hi)))},ln:function(ie){return this.log(ie)},log10:function(ie){return this.isEmpty(ie)?this.EMPTY.clone():this.div(this.log(ie),this.log(new ne(10,10)))},log2:function(ie){return this.isEmpty(ie)?this.EMPTY.clone():this.div(this.log(ie),this.log(new ne(2,2)))},hull:function(ie,re){var oe=this.isEmpty(ie),se=this.isEmpty(re);return oe&&se?this.EMPTY.clone():oe?re.clone():se?ie.clone():new ne(Math.min(ie.lo,re.lo),Math.max(ie.hi,re.hi))},intersection:function(ie,re){var oe,se;return this.isEmpty(ie)||this.isEmpty(re)?this.EMPTY.clone():(oe=Math.max(ie.lo,re.lo))<=(se=Math.min(ie.hi,re.hi))?new ne(oe,se):this.EMPTY.clone()},union:function(ie,re){if(!this.intervalsOverlap(ie,re))throw new Error("Interval#unions do not overlap");return new ne(Math.min(ie.lo,re.lo),Math.max(ie.hi,re.hi))},difference:function(ie,re){if(this.isEmpty(ie)||this.isWhole(re))return this.EMPTY.clone();if(this.intervalsOverlap(ie,re)){if(ie.lo<re.lo&&re.hi<ie.hi)throw new Error("Interval.difference: difference creates multiple intervals");return re.lo<=ie.lo&&re.hi===1/0||re.hi>=ie.hi&&re.lo===-1/0?this.EMPTY.clone():re.lo<=ie.lo?new ne().halfOpenLeft(re.hi,ie.hi):new ne().halfOpenRight(ie.lo,re.lo)}return ie.clone()},width:function(ie){return this.isEmpty(ie)?0:this.subHi(ie.hi,ie.lo)},abs:function(ie){return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),this.isEmpty(ie)?this.EMPTY.clone():ie.lo>=0?ie.clone():ie.hi<=0?this.negative(ie):new ne(0,Math.max(-ie.lo,ie.hi))},max:function(ie,re){var oe=this.isEmpty(ie),se=this.isEmpty(re);return oe&&se?this.EMPTY.clone():oe?re.clone():se?ie.clone():new ne(Math.max(ie.lo,re.lo),Math.max(ie.hi,re.hi))},min:function(ie,re){var oe=this.isEmpty(ie),se=this.isEmpty(re);return oe&&se?this.EMPTY.clone():oe?re.clone():se?ie.clone():new ne(Math.min(ie.lo,re.lo),Math.min(ie.hi,re.hi))},onlyInfinity:function(ie){return!isFinite(ie.lo)&&ie.lo===ie.hi},_handleNegative:function(ie){var re;return ie.lo<0&&(ie.lo===-1/0?(ie.lo=0,ie.hi=1/0):(re=Math.ceil(-ie.lo/this.piTwiceLow),ie.lo+=this.piTwiceLow*re,ie.hi+=this.piTwiceLow*re)),ie},cos:function(ie){var re,oe,se,ae,le,ue,de,pe;return this.isEmpty(ie)||this.onlyInfinity(ie)?this.EMPTY.clone():(re=new ne().set(ie.lo,ie.hi),this._handleNegative(re),oe=this.PI_TWICE,se=this.fmod(re,oe),this.width(se)>=oe.lo?new ne(-1,1):se.lo>=this.piHigh?(ae=this.cos(this.sub(se,this.PI)),this.negative(ae)):(le=se.lo,ue=se.hi,de=this.cosLo(ue),pe=this.cosHi(le),ue<=this.piLow?new ne(de,pe):ue<=oe.lo?new ne(-1,Math.max(de,pe)):new ne(-1,1)))},sin:function(ie){return this.isEmpty(ie)||this.onlyInfinity(ie)?this.EMPTY.clone():this.cos(this.sub(ie,this.PI_HALF))},tan:function(ie){var re,oe,se;return this.isEmpty(ie)||this.onlyInfinity(ie)?this.EMPTY.clone():(re=new ne().set(ie.lo,ie.hi),this._handleNegative(re),se=this.PI,(oe=this.fmod(re,se)).lo>=this.piHalfLow&&(oe=this.sub(oe,se)),oe.lo<=-this.piHalfLow||oe.hi>=this.piHalfLow?this.WHOLE.clone():new ne(this.tanLo(oe.lo),this.tanHi(oe.hi)))},asin:function(ie){var re,oe;return this.isEmpty(ie)||ie.hi<-1||ie.lo>1?this.EMPTY.clone():(re=ie.lo<=-1?-this.piHalfHigh:this.asinLo(ie.lo),oe=ie.hi>=1?this.piHalfHigh:this.asinHi(ie.hi),new ne(re,oe))},acos:function(ie){var re,oe;return this.isEmpty(ie)||ie.hi<-1||ie.lo>1?this.EMPTY.clone():(re=ie.hi>=1?0:this.acosLo(ie.hi),oe=ie.lo<=-1?this.piHigh:this.acosHi(ie.lo),new ne(re,oe))},acot:function(ie){return this.isEmpty(ie)?this.EMPTY.clone():new ne(this.acotLo(ie.lo),this.acotHi(ie.hi))},atan:function(ie){return this.isEmpty(ie)?this.EMPTY.clone():new ne(this.atanLo(ie.lo),this.atanHi(ie.hi))},sinh:function(ie){return this.isEmpty(ie)?this.EMPTY.clone():new ne(this.sinhLo(ie.lo),this.sinhHi(ie.hi))},cosh:function(ie){return this.isEmpty(ie)?this.EMPTY.clone():ie.hi<0?new ne(this.coshLo(ie.hi),this.coshHi(ie.lo)):ie.lo>=0?new ne(this.coshLo(ie.lo),this.coshHi(ie.hi)):new ne(1,this.coshHi(-ie.lo>ie.hi?ie.lo:ie.hi))},tanh:function(ie){return this.isEmpty(ie)?this.EMPTY.clone():new ne(this.tanhLo(ie.lo),this.tanhHi(ie.hi))},equal:function(ie,re){return this.isEmpty(ie)?this.isEmpty(re):!this.isEmpty(re)&&ie.lo===re.lo&&ie.hi===re.hi},notEqual:function(ie,re){return this.isEmpty(ie)?!this.isEmpty(re):this.isEmpty(re)||ie.hi<re.lo||ie.lo>re.hi},lt:function(ie,re){return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),ee.A.isNumber(re)&&(re=this.Interval(re)),!this.isEmpty(ie)&&!this.isEmpty(re)&&ie.hi<re.lo},gt:function(ie,re){return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),ee.A.isNumber(re)&&(re=this.Interval(re)),!this.isEmpty(ie)&&!this.isEmpty(re)&&ie.lo>re.hi},leq:function(ie,re){return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),ee.A.isNumber(re)&&(re=this.Interval(re)),!this.isEmpty(ie)&&!this.isEmpty(re)&&ie.hi<=re.lo},geq:function(ie,re){return ee.A.isNumber(ie)&&(ie=this.Interval(ie)),ee.A.isNumber(re)&&(re=this.Interval(re)),!this.isEmpty(ie)&&!this.isEmpty(re)&&ie.lo>=re.hi},piLow:3.141592653589793,piHigh:3.1415926535897936,piHalfLow:1.5707963267948966,piHalfHigh:1.5707963267948968,piTwiceLow:6.283185307179586,piTwiceHigh:6.283185307179587,identity:function(ie){return ie},_prev:function(ie){return ie===1/0?ie:this.nextafter(ie,-1/0)},_next:function(ie){return ie===-1/0?ie:this.nextafter(ie,1/0)},prev:function(ie){return this._prev(ie)},next:function(ie){return this._next(ie)},toInteger:function(ie){return ie<0?Math.ceil(ie):Math.floor(ie)},addLo:function(ie,re){return this.prev(ie+re)},addHi:function(ie,re){return this.next(ie+re)},subLo:function(ie,re){return this.prev(ie-re)},subHi:function(ie,re){return this.next(ie-re)},mulLo:function(ie,re){return this.prev(ie*re)},mulHi:function(ie,re){return this.next(ie*re)},divLo:function(ie,re){return this.prev(ie/re)},divHi:function(ie,re){return this.next(ie/re)},intLo:function(ie){return this.toInteger(this.prev(ie))},intHi:function(ie){return this.toInteger(this.next(ie))},logLo:function(ie){return this.prev(Math.log(ie))},logHi:function(ie){return this.next(Math.log(ie))},expLo:function(ie){return this.prev(Math.exp(ie))},expHi:function(ie){return this.next(Math.exp(ie))},sinLo:function(ie){return this.prev(Math.sin(ie))},sinHi:function(ie){return this.next(Math.sin(ie))},cosLo:function(ie){return this.prev(Math.cos(ie))},cosHi:function(ie){return this.next(Math.cos(ie))},tanLo:function(ie){return this.prev(Math.tan(ie))},tanHi:function(ie){return this.next(Math.tan(ie))},asinLo:function(ie){return this.prev(Math.asin(ie))},asinHi:function(ie){return this.next(Math.asin(ie))},acosLo:function(ie){return this.prev(Math.acos(ie))},acosHi:function(ie){return this.next(Math.acos(ie))},acotLo:function(ie){return this.prev(Q.A.acot(ie))},acotHi:function(ie){return this.next(Q.A.acot(ie))},atanLo:function(ie){return this.prev(Math.atan(ie))},atanHi:function(ie){return this.next(Math.atan(ie))},sinhLo:function(ie){return this.prev(Q.A.sinh(ie))},sinhHi:function(ie){return this.next(Q.A.sinh(ie))},coshLo:function(ie){return this.prev(Q.A.cosh(ie))},coshHi:function(ie){return this.next(Q.A.cosh(ie))},tanhLo:function(ie){return this.prev(Q.A.tanh(ie))},tanhHi:function(ie){return this.next(Q.A.tanh(ie))},sqrtLo:function(ie){return this.prev(Math.sqrt(ie))},sqrtHi:function(ie){return this.next(Math.sqrt(ie))},powLo:function(ie,re){var oe;if(re%1!=0)return this.prev(Math.pow(ie,re));for(oe=1&~re?1:ie,re>>=1;re>0;)ie=this.mulLo(ie,ie),1&~re||(oe=this.mulLo(ie,oe)),re>>=1;return oe},powHi:function(ie,re){var oe;if(re%1!=0)return this.next(Math.pow(ie,re));for(oe=1&~re?1:ie,re>>=1;re>0;)ie=this.mulHi(ie,ie),1&~re||(oe=this.mulHi(ie,oe)),re>>=1;return oe},disable:function(){this.next=this.prev=this.identity},enable:function(){this.prev=function(ie){return this._prev(ie)},this.next=function(ie){return this._next(ie)}},SMALLEST_DENORM:Math.pow(2,-1074),UINT_MAX:4294967295,nextafter:function(ie,re){var oe,se;return isNaN(ie)||isNaN(re)?NaN:ie===re?ie:ie===0?re<0?-this.SMALLEST_DENORM:this.SMALLEST_DENORM:(se=te.hi(ie),oe=te.lo(ie),re>ie==ie>0?oe===this.UINT_MAX?(se+=1,oe=0):oe+=1:oe===0?(oe=this.UINT_MAX,se-=1):oe-=1,te.pack(oe,se))}},Z.A.Math.IntervalArithmetic.PI=new ne(Q.A.IntervalArithmetic.piLow,Q.A.IntervalArithmetic.piHigh),Z.A.Math.IntervalArithmetic.PI_HALF=new ne(Q.A.IntervalArithmetic.piHalfLow,Q.A.IntervalArithmetic.piHalfHigh),Z.A.Math.IntervalArithmetic.PI_TWICE=new ne(Q.A.IntervalArithmetic.piTwiceLow,Q.A.IntervalArithmetic.piTwiceHigh),Z.A.Math.IntervalArithmetic.ZERO=new ne(0),Z.A.Math.IntervalArithmetic.ONE=new ne(1),Z.A.Math.IntervalArithmetic.WHOLE=new ne().setWhole(),Z.A.Math.IntervalArithmetic.EMPTY=new ne().setEmpty(),_.A=Z.A.Math.IntervalArithmetic},873:function(G,_,J){var Z=J(443),Q=J(188),ee=J(477),te={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",venetianred:"ae181e",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},ne=[{re:/^\s*rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([\d.]{1,3})\s*\)\s*$/,example:["rgba(123, 234, 45, 0.5)","rgba(255,234,245,1.0)"],process:function(ie){return[parseInt(ie[1],10),parseInt(ie[2],10),parseInt(ie[3],10)]}},{re:/^\s*rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)\s*$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(ie){return[parseInt(ie[1],10),parseInt(ie[2],10),parseInt(ie[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(ie){return[parseInt(ie[1],16),parseInt(ie[2],16),parseInt(ie[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(ie){return[parseInt(ie[1]+ie[1],16),parseInt(ie[2]+ie[2],16),parseInt(ie[3]+ie[3],16)]}}];Z.A.rgbParser=function(ie,re,oe){var se,ae,le,ue,de,pe,fe,_e,ye,be,Ae=ie;if(!Q.A.exists(ie))return[];if(Q.A.exists(re)&&Q.A.exists(oe)&&(Ae=[ie,re,oe]),se=Ae,be=!1,Q.A.isArray(se)){for(pe=0;pe<3;pe++)be=be||/\./.test(Ae[pe].toString());for(pe=0;pe<3;pe++)be=be&&Ae[pe]>=0&&Ae[pe]<=1;return be?[Math.ceil(255*Ae[0]),Math.ceil(255*Ae[1]),Math.ceil(255*Ae[2])]:Ae}for(typeof Ae=="string"&&(se=Ae),se.charAt(0)==="#"&&(se=se.slice(1,7)),se=se.replace(/ /g,"").toLowerCase(),se=te[se]||se,pe=0;pe<ne.length;pe++)le=ne[pe].re,ue=ne[pe].process,(de=le.exec(se))&&(fe=(ae=ue(de))[0],_e=ae[1],ye=ae[2]);return isNaN(fe)||isNaN(_e)||isNaN(ye)?[]:[fe=fe<0||isNaN(fe)?0:fe>255?255:fe,_e=_e<0||isNaN(_e)?0:_e>255?255:_e,ye=ye<0||isNaN(ye)?0:ye>255?255:ye]},Z.A.isColor=function(ie){var re=new Option().style;return re.color=ie,re.color!==""},Z.A.rgb2css=function(ie,re,oe){var se;return"rgb("+(se=Z.A.rgbParser(ie,re,oe))[0]+", "+se[1]+", "+se[2]+")"},Z.A.rgb2hex=function(ie,re,oe){var se,ae,le;return ae=(se=Z.A.rgbParser(ie,re,oe))[1],le=se[2],se=(se=se[0]).toString(16),ae=ae.toString(16),le=le.toString(16),se.length===1&&(se="0"+se),ae.length===1&&(ae="0"+ae),le.length===1&&(le="0"+le),"#"+se+ae+le},Z.A.hex2rgb=function(ie){return Z.A.deprecated("JXG.hex2rgb()","JXG.rgb2css()"),Z.A.rgb2css(ie)},Z.A.hsv2rgb=function(ie,re,oe){var se,ae,le,ue,de,pe,fe,_e,ye;if(ie=(ie%360+360)%360,re===0){if(!(isNaN(ie)||ie<ee.A.eps))return"#ffffff";se=oe,ae=oe,le=oe}else switch(pe=ie>=360?0:ie,fe=oe*(1-re),_e=oe*(1-re*(ue=(pe/=60)-(de=Math.floor(pe)))),ye=oe*(1-re*(1-ue)),de){case 0:se=oe,ae=ye,le=fe;break;case 1:se=_e,ae=oe,le=fe;break;case 2:se=fe,ae=oe,le=ye;break;case 3:se=fe,ae=_e,le=oe;break;case 4:se=ye,ae=fe,le=oe;break;case 5:se=oe,ae=fe,le=_e}return["#",se=(se=Math.round(255*se).toString(16)).length===2?se:se.length===1?"0"+se:"00",ae=(ae=Math.round(255*ae).toString(16)).length===2?ae:ae.length===1?"0"+ae:"00",le=(le=Math.round(255*le).toString(16)).length===2?le:le.length===1?"0"+le:"00"].join("")},Z.A.rgb2hsv=function(ie,re,oe){var se,ae,le,ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee;return ae=(se=Z.A.rgbParser(ie,re,oe))[1],le=se[2],ue=(se=se[0])/255,de=ae/255,pe=le/255,Ce=Math.max(se,ae,le),_e=(Ee=Math.min(se,ae,le))/255,be=0,(Ae=fe=Ce/255)>0&&(be=(Ae-_e)/Ae),ye=1/(fe-_e),be>0&&(Ce===se?ye*=de-pe:ye=Ce===ae?2+(pe-ue)*ye:4+(ue-de)*ye),(ye*=60)<0&&(ye+=360),Ce===Ee&&(ye=0),[ye,be,Ae]},Z.A.rgb2LMS=function(ie,re,oe){var se,ae,le,ue,de,pe,fe,_e=[[.05059983,.08585369,.0095242],[.01893033,.08925308,.01370054],[.00292202,.00975732,.07145979]];return ae=(se=Z.A.rgbParser(ie,re,oe))[1],le=se[2],se=se[0],se=Math.pow(se,.476190476),ae=Math.pow(ae,.476190476),le=Math.pow(le,.476190476),(fe=[ue=se*_e[0][0]+ae*_e[0][1]+le*_e[0][2],de=se*_e[1][0]+ae*_e[1][1]+le*_e[1][2],pe=se*_e[2][0]+ae*_e[2][1]+le*_e[2][2]]).l=ue,fe.m=de,fe.s=pe,fe},Z.A.LMS2rgb=function(ie,re,oe){var se,ae,le,ue,de=[[30.830854,-29.832659,1.610474],[-6.481468,17.715578,-2.532642],[-.37569,-1.199062,14.273846]],pe=function(fe){for(var _e=127,ye=64;ye>0;){if(Math.pow(_e,.476190476)>fe)_e-=ye;else{if(Math.pow(_e+1,.476190476)>fe)return _e;_e+=ye}ye/=2}return _e===254&&13.994955247<fe?255:_e};return se=ie*de[0][0]+re*de[0][1]+oe*de[0][2],ae=ie*de[1][0]+re*de[1][1]+oe*de[1][2],le=ie*de[2][0]+re*de[2][1]+oe*de[2][2],(ue=[se=pe(se),ae=pe(ae),le=pe(le)]).r=se,ue.g=ae,ue.b=le,ue},Z.A.rgba2rgbo=function(ie){var re;return ie.length===9&&ie.charAt(0)==="#"?(re=parseInt(ie.slice(7,9).toUpperCase(),16)/255,ie=ie.slice(0,7)):re=1,[ie,re]},Z.A.rgbo2rgba=function(ie,re){var oe;return ie==="none"||ie==="transparent"?ie:((oe=Math.round(255*re).toString(16)).length===1&&(oe="0"+oe),Z.A.rgb2hex(ie)+oe)},Z.A.rgb2bw=function(ie){var re,oe,se,ae="0123456789ABCDEF";return ie==="none"?ie:(se=Z.A.rgbParser(ie),re=Math.floor(.3*se[0]+.59*se[1]+.11*se[2]),ie="#"+(oe=ae.charAt(re>>4&15)+ae.charAt(15&re))+oe+oe)},Z.A.rgb2cb=function(ie,re){var oe,se,ae,le,ue,de,pe,fe,_e,ye,be,Ae="0123456789ABCDEF";if(ie==="none")return ie;switch(se=(ue=Z.A.rgb2LMS(ie))[0],ae=ue[1],le=ue[2],re=re.toLowerCase()){case"protanopia":de=-.06150039994295001,pe=.08277001656812001,fe=-.013200141220000003,_e=.05858939668799999,ye=-.07934519995360001,be=.013289415272000003,se=le/ae<.6903216543277437?-(pe*ae+fe*le)/de:-(ye*ae+be*le)/_e;break;case"tritanopia":de=-.00058973116217,pe=.007690316482,fe=-.01011703519052,_e=.025495080838999994,ye=-.0422740347,be=.017005316784,le=ae/se<.8349489908460004?-(de*se+pe*ae)/fe:-(_e*se+ye*ae)/be;break;default:de=-.06150039994295001,pe=.08277001656812001,fe=-.013200141220000003,_e=.05858939668799999,ye=-.07934519995360001,be=.013289415272000003,ae=le/se<.5763833686400911?-(de*se+fe*le)/pe:-(_e*se+be*le)/ye}return oe=Z.A.LMS2rgb(se,ae,le),ie="#"+(Ae.charAt(oe[0]>>4&15)+Ae.charAt(15&oe[0])),ie+=Ae.charAt(oe[1]>>4&15)+Ae.charAt(15&oe[1]),ie+=Ae.charAt(oe[2]>>4&15)+Ae.charAt(15&oe[2])},Z.A.shadeColor=function(ie,re){var oe=Z.A.rgbParser(ie),se=oe[0],ae=oe[1],le=oe[2];return se=(se=(se=parseInt(se+255*re))>0?se:0)<255?se:255,ae=(ae=(ae=parseInt(ae+255*re))>0?ae:0)<255?ae:255,le=(le=(le=parseInt(le+255*re))>0?le:0)<255?le:255,se=Math.round(se),ae=Math.round(ae),le=Math.round(le),Z.A.rgb2hex([se,ae,le])},Z.A.lightenColor=function(ie,re){return Z.A.shadeColor(ie,re)},Z.A.darkenColor=function(ie,re){return Z.A.shadeColor(ie,-1*re)},Z.A.autoHighlight=function(ie){var re=Z.A.rgba2rgbo(ie),oe=re[0],se=re[1];return ie.charAt(0)==="#"?(se*=se<.3?1.8:.4,Z.A.rgbo2rgba(oe,se)):ie},Z.A.contrast=function(ie,re,oe,se){var ae,le,ue,de,pe;return re=re||"#000000",oe=oe||"#ffffff",se=se||7,ae=Z.A.rgbParser(ie),le=Z.A.rgbParser("#000000"),pe=(ue=.2126*Math.pow(ae[0]/255,2.2)+.7152*Math.pow(ae[1]/255,2.2)+.0722*Math.pow(ae[2]/255,2.2))>(de=.2126*Math.pow(le[0]/255,2.2)+.7152*Math.pow(le[1]/255,2.2)+.0722*Math.pow(le[2]/255,2.2))?Math.floor((ue+.05)/(de+.05)):Math.floor((de+.05)/(ue+.05)),(pe-=1)>se?re:oe},Z.A.setClassicColors=function(){Z.A.Options.elements.strokeColor="blue",Z.A.Options.elements.fillColor="red",Z.A.Options.hatch.strokeColor="blue",Z.A.Options.angle.fillColor="#ff7f00",Z.A.Options.angle.highlightFillColor="#ff7f00",Z.A.Options.angle.strokeColor="#ff7f00",Z.A.Options.angle.label.strokeColor="blue",Z.A.Options.arc.strokeColor="blue",Z.A.Options.circle.center.fillColor="red",Z.A.Options.circle.center.strokeColor="blue",Z.A.Options.circumcircle.strokeColor="blue",Z.A.Options.circumcircle.center.fillColor="red",Z.A.Options.circumcircle.center.strokeColor="blue",Z.A.Options.circumcirclearc.strokeColor="blue",Z.A.Options.circumcirclesector.strokeColor="blue",Z.A.Options.circumcirclesector.fillColor="green",Z.A.Options.circumcirclesector.highlightFillColor="green",Z.A.Options.conic.strokeColor="blue",Z.A.Options.curve.strokeColor="blue",Z.A.Options.incircle.strokeColor="blue",Z.A.Options.incircle.center.fillColor="red",Z.A.Options.incircle.center.strokeColor="blue",Z.A.Options.inequality.fillColor="red",Z.A.Options.integral.fillColor="red",Z.A.Options.integral.curveLeft.color="red",Z.A.Options.integral.curveRight.color="red",Z.A.Options.line.strokeColor="blue",Z.A.Options.point.fillColor="red",Z.A.Options.point.strokeColor="red",Z.A.Options.polygon.fillColor="green",Z.A.Options.polygon.highlightFillColor="green",Z.A.Options.polygon.vertices.strokeColor="red",Z.A.Options.polygon.vertices.fillColor="red",Z.A.Options.regularpolygon.fillColor="green",Z.A.Options.regularpolygon.highlightFillColor="green",Z.A.Options.regularpolygon.vertices.strokeColor="red",Z.A.Options.regularpolygon.vertices.fillColor="red",Z.A.Options.riemannsum.fillColor="yellow",Z.A.Options.sector.fillColor="green",Z.A.Options.sector.highlightFillColor="green",Z.A.Options.semicircle.center.fillColor="red",Z.A.Options.semicircle.center.strokeColor="blue",Z.A.Options.slopetriangle.fillColor="red",Z.A.Options.slopetriangle.highlightFillColor="red",Z.A.Options.turtle.arrow.strokeColor="blue"},Z.A.extend(Z.A,{paletteWong:{black:"#000000",orange:"#E69F00",skyblue:"#56B4E9",bluishgreen:"#009E73",yellow:"#F0E442",darkblue:"#0072B2",vermillion:"#D55E00",reddishpurple:"#CC79A7",blue:"#0072B2",red:"#D55E00",green:"#009E73",purple:"#CC79A7",white:"#ffffff"}}),Z.A.palette=Z.A.paletteWong,_.A=Z.A},904:function(G,_,J){var Z=J(443),Q=J(561),ee=J(454),te=J(188),ne=J(477);Z.A.Coords=function(ie,re,oe,se){this.board=oe,this.usrCoords=[],this.scrCoords=[],this.emitter=!te.A.exists(se)||se,this.emitter&&ee.A.eventify(this),this.setCoordinates(ie,re,!1,!0)},Z.A.extend(Z.A.Coords.prototype,{normalizeUsrCoords:function(){Math.abs(this.usrCoords[0])>ne.A.eps&&(this.usrCoords[1]/=this.usrCoords[0],this.usrCoords[2]/=this.usrCoords[0],this.usrCoords[0]=1)},usr2screen:function(ie){var re=Math.round,oe=this.board,se=this.usrCoords,ae=oe.origin.scrCoords;ie===!0?(this.scrCoords[0]=re(se[0]),this.scrCoords[1]=re(se[0]*ae[1]+se[1]*oe.unitX),this.scrCoords[2]=re(se[0]*ae[2]-se[2]*oe.unitY)):(this.scrCoords[0]=se[0],this.scrCoords[1]=se[0]*ae[1]+se[1]*oe.unitX,this.scrCoords[2]=se[0]*ae[2]-se[2]*oe.unitY)},screen2usr:function(){var ie=this.board.origin.scrCoords,re=this.scrCoords,oe=this.board;this.usrCoords[0]=1,this.usrCoords[1]=(re[1]-ie[1])/oe.unitX,this.usrCoords[2]=(ie[2]-re[2])/oe.unitY},distance:function(ie,re){var oe,se,ae=this.usrCoords,le=this.scrCoords;return ie===Q.A.COORDS_BY_USER?(oe=re.usrCoords,(se=ae[0]-oe[0])*se>ne.A.eps*ne.A.eps?Number.POSITIVE_INFINITY:ne.A.hypot(ae[1]-oe[1],ae[2]-oe[2])):(oe=re.scrCoords,ne.A.hypot(le[1]-oe[1],le[2]-oe[2]))},setCoordinates:function(ie,re,oe,se){var ae=this.usrCoords,le=this.scrCoords,ue=[ae[0],ae[1],ae[2]],de=[le[0],le[1],le[2]];return ie===Q.A.COORDS_BY_USER?(re.length===2?(ae[0]=1,ae[1]=re[0],ae[2]=re[1]):(ae[0]=re[0],ae[1]=re[1],ae[2]=re[2],this.normalizeUsrCoords()),this.usr2screen(oe)):(re.length===2?(le[1]=re[0],le[2]=re[1]):(le[1]=re[1],le[2]=re[2]),this.screen2usr()),!this.emitter||se||de[1]===le[1]&&de[2]===le[2]||this.triggerEventHandlers(["update"],[ue,de]),this},copy:function(ie,re){return re===void 0&&(re=0),this[ie].slice(re)},isReal:function(){return!isNaN(this.usrCoords[1]+this.usrCoords[2])&&Math.abs(this.usrCoords[0])>ne.A.eps},__evt__update:function(ie,re){},__evt:function(){}}),_.A=Z.A.Coords},925:function(G,_,J){var Z=J(443),Q=J(561),ee=J(144),te=J(86),ne=J(133),ie=J(188),re=J(477),oe=J(102),se=function(){this._val=parseFloat(this.rendNodeRange.value),this.rendNodeOut.value=this.rendNodeRange.value,this.board.update()};Z.A.Text=function(ae,le,ue,de){var pe;this.constructor(ae,ue,Q.A.OBJECT_TYPE_TEXT,Q.A.OBJECT_CLASS_TEXT),this.element=this.board.select(ue.anchor),this.coordsConstructor(le,this.evalVisProp("islabel")),this.content="",this.plaintext="",this.plaintextOld=null,this.orgText="",this.needsSizeUpdate=!1,this.hiddenByParent=!1,this.size=[1,1],this.id=this.board.setId(this,"T"),this.board.renderer.drawText(this),this.board.finalizeAdding(this),pe=this.visProp.visible,this.visProp.visible=!0,this.setText(de),this.visProp.visible=pe,ie.A.isString(this.content)&&this.notifyParents(this.content),this.elType="text",this.methodMap=ie.A.deepCopy(this.methodMap,{setText:"setTextJessieCode",move:"setCoords",Size:"getSize",setAutoPosition:"setAutoPosition"})},Z.A.Text.prototype=new ee.A,ie.A.copyPrototypeMethods(Z.A.Text,oe.A,"coordsConstructor"),Z.A.extend(Z.A.Text.prototype,{hasPoint:function(ae,le){var ue,de,pe,fe,_e,ye,be,Ae;return ie.A.isObject(this.evalVisProp("precision"))?(be=this.board._inputDevice,Ae=this.evalVisProp("precision."+be)):Ae=this.board.options.precision.hasPoint,this.transformations.length>0&&(ae=(ue=re.A.matVecMult(re.A.inverse(this.board.renderer.joinTransforms(this,this.transformations)),[1,ae,le]))[1],le=ue[2]),de=(ue=(_e=this.getAnchorX())==="right"?this.coords.scrCoords[1]-this.size[0]:_e==="middle"?this.coords.scrCoords[1]-.5*this.size[0]:this.coords.scrCoords[1])+this.size[0],pe=(fe=(ye=this.getAnchorY())==="top"?this.coords.scrCoords[2]+this.size[1]:ye==="middle"?this.coords.scrCoords[2]+.5*this.size[1]:this.coords.scrCoords[2])-this.size[1],this.evalVisProp("dragarea")==="all"?ae>=ue-Ae&&ae<de+Ae&&le>=pe-Ae&&le<=fe+Ae:le>=pe-Ae&&le<=fe+Ae&&(ae>=ue-Ae&&ae<=ue+2*Ae||ae>=de-2*Ae&&ae<=de+Ae)},_createFctUpdateText:function(ae){var le,ue,de,pe,fe,_e,ye=this.evalVisProp("parse"),be=this.evalVisProp("usemathjax"),Ae=this.evalVisProp("usekatex"),Ce=!1;if(this.orgText=ae,ie.A.isFunction(ae))this.updateText=function(){pe=ae().toString(),this.plaintext=!ye||be||Ae?pe:this.replaceSub(this.replaceSup(this.convertGeonextAndSketchometry2CSS(pe,!1)))};else if(ie.A.isNumber(ae)&&this.evalVisProp("formatnumber")?this.evalVisProp("tofraction")?this.content=be?"\\("+ie.A.toFraction(ae,!0)+"\\)":ie.A.toFraction(ae,Ae):(de=this.evalVisProp("digits"),this.useLocale()?this.content=this.formatNumberLocale(ae,de):this.content=ie.A.toFixed(ae,de)):ie.A.isString(ae)&&ye?(this.evalVisProp("useasciimathml")?this.content="'`"+ae+"`'":be||Ae?(this.content=this.valueTagToJessieCode(ae),ie.A.isArray(this.content)||(this.content=this.content.replace(/\\/g,"\\\\"))):this.content=this.poorMansTeX(this.valueTagToJessieCode(ae)),Ce=!0):this.content=ae,Ce){if(ie.A.isArray(this.content)){for(_e=this,fe=0;fe<this.content.length;fe++)if(this.content[fe][0]!=='"')for(ue in this.content[fe]=this.board.jc.snippet(this.content[fe],!0,"",!1),this.content[fe].deps)this.addParents(this.content[fe].deps[ue]),this.content[fe].deps[ue].addChild(this);le=function(){var Ee,Re,Te=_e.evalVisProp("digits"),Me="";for(Ee=0;Ee<_e.content.length;Ee++)ie.A.isFunction(_e.content[Ee])?(Re=_e.content[Ee](),Re=_e.useLocale()?_e.formatNumberLocale(Re,Te):ie.A.toFixed(Re,Te)):(Re=_e.content[Ee])[0]==='"'&&Re[Re.length-1]==='"'&&(Re=Re.slice(1,-1)),Me+=Re;return Me}}else for(ue in(le=this.board.jc.snippet(this.content,!0,"",!1)).deps)this.addParents(le.deps[ue]),le.deps[ue].addChild(this);this.updateText=function(){this.plaintext=this.unescapeTicks(le())}}else this.updateText=function(){this.plaintext=this.content}},_setText:function(ae){return this._createFctUpdateText(ae),this.updateText(),this.fullUpdate(),this.board.infobox&&this.id===this.board.infobox.id||this.updateSize(),this},setTextJessieCode:function(ae){var le;return this.visProp.castext=ae,le=ie.A.isFunction(ae)?function(){return ie.A.sanitizeHTML(ae())}:ie.A.isNumber(ae)?ae:ie.A.sanitizeHTML(ae),this._setText(le)},setText:function(ae){return this._setText(ae)},updateSize:function(){var ae,le,ue,de=this.evalVisProp("display");return ne.A.isBrowser&&this.board.renderer.type!=="no"?(ue=this.rendNode,de==="html"||this.board.renderer.type==="vml"?ie.A.exists(ue.offsetWidth)?(le=this,window.setTimeout(function(){le.size=[ue.offsetWidth,ue.offsetHeight],le.needsUpdate=!0,le.updateRenderer()},0)):this.size=this.crudeSizeEstimate():de==="internal"&&(this.board.renderer.type==="svg"?(le=this,window.setTimeout(function(){try{ae=ue.getBBox(),le.size=[ae.width,ae.height],le.needsUpdate=!0,le.updateRenderer()}catch{}},0)):this.board.renderer.type==="canvas"&&(this.size=this.crudeSizeEstimate())),this):this},crudeSizeEstimate:function(){var ae=parseFloat(this.evalVisProp("fontsize"));return[ae*this.plaintext.length*.45,.9*ae]},utf8_decode:function(ae){return ae.replace(/&#x(\w+);/g,function(le,ue){return String.fromCharCode(parseInt(ue,16))})},replaceSub:function(ae){if(!ae.indexOf)return ae;for(var le,ue=ae.indexOf("_{");ue>=0;)(le=(ae=ae.slice(0,ue)+ae.slice(ue).replace(/_\{/,"<sub>")).indexOf("}",ue+4))>=0&&(ae=ae.slice(0,le)+ae.slice(le).replace(/\}/,"</sub>")),ue=ae.indexOf("_{");for(ue=ae.indexOf("_");ue>=0;)ue=(ae=ae.slice(0,ue)+ae.slice(ue).replace(/_(.?)/,"<sub>$1</sub>")).indexOf("_");return ae},replaceSup:function(ae){if(!ae.indexOf)return ae;for(var le,ue=ae.indexOf("^{");ue>=0;)(le=(ae=ae.slice(0,ue)+ae.slice(ue).replace(/\^\{/,"<sup>")).indexOf("}",ue+4))>=0&&(ae=ae.slice(0,le)+ae.slice(le).replace(/\}/,"</sup>")),ue=ae.indexOf("^{");for(ue=ae.indexOf("^");ue>=0;)ue=(ae=ae.slice(0,ue)+ae.slice(ue).replace(/\^(.?)/,"<sup>$1</sup>")).indexOf("^");return ae},getSize:function(){return this.size},setCoords:function(ae,le){var ue,de,pe;return ie.A.isArray(ae)&&ae.length>1&&(le=ae[1],ae=ae[0]),this.evalVisProp("islabel")&&ie.A.exists(this.element)?(de=(ae-(ue=this.element.getLabelAnchor()).usrCoords[1])*this.board.unitX,pe=-(le-ue.usrCoords[2])*this.board.unitY,this.relativeCoords.setCoordinates(Q.A.COORDS_BY_SCREEN,[de,pe])):this.coords.setCoordinates(Q.A.COORDS_BY_USER,[ae,le]),this.fullUpdate(),this},update:function(ae){return this.needsUpdate?(this.updateCoords(ae),this.updateText(),this.evalVisProp("display")==="internal"&&ie.A.isString(this.plaintext)&&(this.plaintext=this.utf8_decode(this.plaintext)),this.checkForSizeUpdate(),this.needsSizeUpdate&&this.updateSize(),this):this},checkForSizeUpdate:function(){this.board.infobox&&this.id===this.board.infobox.id?this.needsSizeUpdate=!1:(this.needsSizeUpdate=this.plaintextOld!==this.plaintext,this.needsSizeUpdate&&(this.plaintextOld=this.plaintext))},updateRenderer:function(){return this.evalVisProp("autoposition")&&this.setAutoPosition().updateConstraint(),this.updateRendererGeneric("updateText")},expandShortMath:function(ae){return ae.replace(/([)0-9.])\s*([(a-zA-Z_])/g,"$1*$2")},generateTerm:function(ae,le,ue){var de,pe,fe,_e,ye='""';if(fe=(ae=(ae=(ae=(ae=(ae=(ae=(ae=(ae=(ae=(ae=(ae=ae||"").replace(/\r/g,"")).replace(/\n/g,"")).replace(/"/g,"'")).replace(/'/g,"\\'")).replace(/&amp;arc;/g,"&ang;")).replace(/<arc\s*\/>/g,"&ang;")).replace(/&lt;arc\s*\/&gt;/g,"&ang;")).replace(/&lt;sqrt\s*\/&gt;/g,"&radic;")).replace(/&lt;value&gt;/g,"<value>")).replace(/&lt;\/value&gt;/g,"</value>")).indexOf("<value>"),_e=ae.indexOf("</value>"),fe>=0)for(;fe>=0;)ye+=' + "'+this.replaceSub(this.replaceSup(ae.slice(0,fe)))+'"',pe=(pe=ae.slice(fe+7,_e)).replace(/\s+/g,""),le===!0&&(pe=this.expandShortMath(pe)),(de=(de=(de=ue?pe:te.A.geonext2JS(pe,this.board)).replace(/\\"/g,"'")).replace(/\\'/g,"'")).indexOf("toFixed")<0&&ie.A.isNumber(ie.A.bind(this.board.jc.snippet(de,!0,"",!1),this)())?ye+="+("+de+").toFixed("+this.evalVisProp("digits")+")":ye+="+("+de+")",fe=(ae=ae.slice(_e+8)).indexOf("<value>"),_e=ae.indexOf("</value>");return ye+=' + "'+this.replaceSub(this.replaceSup(ae))+'"',ye=(ye=(ye=this.convertGeonextAndSketchometry2CSS(ye)).replace(/&amp;/g,"&")).replace(/"/g,"'")},valueTagToJessieCode:function(ae){var le,ue,de,pe,fe=[],_e='"';if(de=(ae=(ae=(ae=(ae=(ae=ae||"").replace(/\r/g,"")).replace(/\n/g,"")).replace(/&lt;value&gt;/g,"<value>")).replace(/&lt;\/value&gt;/g,"</value>")).indexOf("<value>"),pe=ae.indexOf("</value>"),de>=0)for(;de>=0;)fe.push(_e+this.escapeTicks(ae.slice(0,de))+_e),ue=(ue=ae.slice(de+7,pe)).replace(/\s+/g,""),le=(le=ue=this.expandShortMath(ue)).replace(/\\"/g,"'").replace(/\\'/g,"'"),fe.push("("+le+")"),de=(ae=ae.slice(pe+8)).indexOf("<value>"),pe=ae.indexOf("</value>");for(fe.push(_e+this.escapeTicks(ae)+_e),de=0;de<fe.length;de++)fe[de]=fe[de].replace(/&amp;/g,"&");return fe},poorMansTeX:function(ae){var le,ue;if(ie.A.isArray(ae)){for(ue=[],le=0;le<ae.length;le++)ue.push(this.poorMansTeX(ae[le]));return ue}return ae=ae.replace(/<arc\s*\/*>/g,"&ang;").replace(/&lt;arc\s*\/*&gt;/g,"&ang;").replace(/<sqrt\s*\/*>/g,"&radic;").replace(/&lt;sqrt\s*\/*&gt;/g,"&radic;"),this.convertGeonextAndSketchometry2CSS(this.replaceSub(this.replaceSup(ae)),!0)},escapeTicks:function(ae){return ae.replace(/"/g,"%22").replace(/'/g,"%27")},unescapeTicks:function(ae){return ae.replace(/%22/g,'"').replace(/%27/g,"'")},convertGeonext2CSS:function(ae){return ie.A.isString(ae)&&(ae=(ae=(ae=(ae=ae.replace(/(<|&lt;)overline(>|&gt;)/g,"<span style=text-decoration:overline;>")).replace(/(<|&lt;)\/overline(>|&gt;)/g,"</span>")).replace(/(<|&lt;)arrow(>|&gt;)/g,"<span style=text-decoration:overline;>")).replace(/(<|&lt;)\/arrow(>|&gt;)/g,"</span>")),ae},convertSketchometry2CSS:function(ae,le){var ue='<span class="sketcho sketcho-inherit sketcho-',de='"></span>';return ie.A.isString(ae)&&(le&&(ue=this.escapeTicks(ue),de=this.escapeTicks(de)),ae=(ae=ae.replace(/(<|&lt;)sketchofont(>|&gt;)/g,ue)).replace(/(<|&lt;)\/sketchofont(>|&gt;)/g,de)),ae},convertGeonextAndSketchometry2CSS:function(ae,le){return ae=this.convertGeonext2CSS(ae),ae=this.convertSketchometry2CSS(ae,le)},notifyParents:function(ae){var le,ue=null;ae=(ae=ae.replace(/&lt;value&gt;/g,"<value>")).replace(/&lt;\/value&gt;/g,"</value>");do(ue=(le=/<value>([\w\s*/^\-+()[\],<>=!]+)<\/value>/).exec(ae))!==null&&(te.A.findDependencies(this,ue[1],this.board),ae=(ae=ae.slice(ue.index)).replace(le,""));while(ue!==null);return this},getParents:function(){var ae;return ae=this.relativeCoords!==void 0?[this.relativeCoords.usrCoords[1],this.relativeCoords.usrCoords[2],this.orgText]:[this.Z(),this.X(),this.Y(),this.orgText],this.parents.length!==0&&(ae=this.parents),ae},bounds:function(){var ae=this.coords.usrCoords;return this.evalVisProp("islabel")||this.board.unitY===0||this.board.unitX===0?[0,0,0,0]:[ae[1],ae[2]+this.size[1]/this.board.unitY,ae[1]+this.size[0]/this.board.unitX,ae[2]]},getAnchorX:function(){var ae=this.evalVisProp("anchorx");if(ae==="auto")switch(this.visProp.position){case"top":case"bot":return"middle";case"rt":case"lrt":case"urt":return"left";default:return"right"}return ae},getAnchorY:function(){var ae=this.evalVisProp("anchory");if(ae==="auto")switch(this.visProp.position){case"top":case"ulft":case"urt":return"bottom";case"bot":case"lrt":case"llft":return"top";default:return"middle"}return ae},getNumberOfConflicts:function(ae,le,ue,de,pe){pe=pe||[];var fe,_e,ye,be,Ae,Ce,Ee,Re,Te=0,Me=this.board.options.precision.hasPoint;for(this.board.options.precision.hasPoint=.3*(ue+de),fe=0;fe<this.board.objectsList.length;fe++)(_e=this.board.objectsList[fe]).visPropCalc.visible&&_e!==this&&pe.indexOf(_e.id)===-1&&_e.evalVisProp("ignoreforlabelautoposition")!==!0&&(be=_e.visProp.hasinnerpoints,_e.visProp.hasinnerpoints=!1,_e.visProp.islabel||_e.elementClass===Q.A.OBJECT_CLASS_POINT?(Ae=(ye=_e.coords.scrCoords)[1],Ce=ye[2],Ee=_e.size[0],Re=_e.size[1],_e.visProp.islabel?(_e.visProp.anchory==="top"?Ce+=Re/2:Ce-=Re/2,_e.visProp.anchorx==="left"?Ae+=Ee/2:Ae-=Ee/2):(Ee=0,Re=0),Math.abs(Ae-ae)<(ue+Ee)/2&&Math.abs(Ce-le)<(de+Re)/2&&Te++):_e.hasPoint(ae,le)&&Te++,_e.visProp.hasinnerpoints=be);return this.board.options.precision.hasPoint=Me,Te},calculateScore:function(ae,le){var ue,de,pe,fe,_e,ye,be=0,Ae=[0,0],Ce=this.getSize()[0],Ee=this.getSize()[1],Re=this.evalVisProp("offset"),Te=this.board.getBoundingBox();return this.evalVisProp("islabel")&&ie.A.exists(this.element)?(ye=this.element.getLabelAnchor().scrCoords,pe=Math.cos(le),fe=Math.sin(le),ue=ye[1]+ae*pe,de=ye[2]-ae*fe,pe<0?(Ae[0]=ue-Ce,ue-=Ce/2):(Ae[0]=ue+Ce,ue+=Ce/2),fe<0?(Ae[1]=de+Ee,de+=Ee/2):(Ae[1]=de-Ee,de-=Ee/2),(Ae[0]<0||Ae[0]>(Te[2]-Te[0])*this.board.unitX||Ae[1]<0||Ae[1]>(Te[1]-Te[3])*this.board.unitY)&&(be-=1),be-=this.getNumberOfConflicts(ue,de,Ce,Ee,ie.A.evaluate(this.visProp.autopositionwhitelist)),be-=ae/this.evalVisProp("autopositionmindistance")/10-.1,(_e=Math.atan2(Re[1],Re[0]))<0&&(_e+=2*Math.PI),be-=(pe>0&&Math.cos(_e)>0&&Math.abs(le-_e)>Math.PI?Math.abs(le-_e-2*Math.PI):Math.abs(le-_e))/10):0},setAutoPosition:function(){var ae,le,ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee=-1/0,Re=this.evalVisProp("autopositionmindistance"),Te=this.evalVisProp("autopositionmaxdistance"),Me=this.evalVisProp("offset");if(this===this.board.infobox||!this.element||!this.visPropCalc.visible||!this.evalVisProp("islabel"))return this;if(Ae=Math.sqrt(Me[0]*Me[0]+Me[1]*Me[1]),Ce=Math.atan2(Me[1],Me[0]),this.calculateScore(Ae,Ce)===0)return this;for(ae=Re,ue=(Te-Re)/3;Te-ae>-.01;){for(de=0;de<60;de++)if(le=de/60*2*Math.PI,(_e=this.calculateScore(ae,le))>Ee&&(fe=le,pe=ae,Ee=_e),Ee===0){ae=Te;break}ae+=ue}return ye=Math.cos(fe),be=Math.sin(fe),this.visProp.anchorx=ye<0?"right":"left",this.visProp.anchory=be<0?"top":"bottom",this.visProp.offset=[pe*ye,pe*be],this}}),Z.A.createText=function(ae,le,ue){var de,pe=ie.A.copyAttributes(ue,ae.options,"text"),fe=le.slice(0,-1),_e=le[le.length-1];if(pe.anchor=pe.parent||pe.anchor,!(de=oe.A.create(Z.A.Text,ae,fe,pe,_e)))throw new Error("JSXGraph: Can't create text with parent types '"+typeof le[0]+"' and '"+typeof le[1]+`'.
Possible parent types: [x,y], [z,x,y], [element,transformation]`);return pe.rotate!==0&&de.addRotation(pe.rotate),de},Z.A.registerElement("text",Z.A.createText),Z.A.createHTMLSlider=function(ae,le,ue){var de,pe,fe=ie.A.copyAttributes(ue,ae.options,"htmlslider");if(le.length!==2||le[0].length!==2||le[1].length!==3)throw new Error("JSXGraph: Can't create htmlslider with parent types '"+typeof le[0]+"' and '"+typeof le[1]+`'.
Possible parents are: [[x,y], [min, start, max]]`);fe.anchor=fe.parent||fe.anchor,fe.fixed=fe.fixed||!0,pe=[le[0][0],le[0][1],'<form style="display:inline"><input type="range" /><span></span><input type="text" /></form>'],(de=Z.A.createText(ae,pe,fe)).type=ie.A.OBJECT_TYPE_HTMLSLIDER,de.rendNodeForm=de.rendNode.childNodes[0],de.rendNodeRange=de.rendNodeForm.childNodes[0],de.rendNodeRange.min=le[1][0],de.rendNodeRange.max=le[1][2],de.rendNodeRange.step=fe.step,de.rendNodeRange.value=le[1][1],de.rendNodeLabel=de.rendNodeForm.childNodes[1],de.rendNodeLabel.id=de.rendNode.id+"_label",fe.withlabel&&(de.rendNodeLabel.innerText=de.name+"="),de.rendNodeOut=de.rendNodeForm.childNodes[2],de.rendNodeOut.value=le[1][1];try{de.rendNodeForm.id=de.rendNode.id+"_form",de.rendNodeRange.id=de.rendNode.id+"_range",de.rendNodeOut.id=de.rendNode.id+"_out"}catch(_e){Z.A.debug(_e)}return de.rendNodeRange.style.width=fe.widthrange+"px",de.rendNodeRange.style.verticalAlign="middle",de.rendNodeOut.style.width=fe.widthout+"px",de._val=le[1][1],Z.A.supportsVML()?ne.A.addEvent(de.rendNodeForm,"change",se,de):ne.A.addEvent(de.rendNodeForm,"input",se,de),de.Value=function(){return this._val},de},Z.A.registerElement("htmlslider",Z.A.createHTMLSlider),_.A=Z.A.Text}},__webpack_module_cache__={};function __webpack_require__(G){var _=__webpack_module_cache__[G];if(_!==void 0)return _.exports;var J=__webpack_module_cache__[G]={exports:{}};return __webpack_modules__[G](J,J.exports,__webpack_require__),J.exports}__webpack_require__.d=function(G,_){for(var J in _)__webpack_require__.o(_,J)&&!__webpack_require__.o(G,J)&&Object.defineProperty(G,J,{enumerable:!0,get:_[J]})},__webpack_require__.o=function(G,_){return Object.prototype.hasOwnProperty.call(G,_)};var __webpack_exports__={};__webpack_require__.d(__webpack_exports__,{default:function(){return src}});var jxg=__webpack_require__(443),env=__webpack_require__(133),constants=__webpack_require__(561),utils_type=__webpack_require__(188);jxg.A.XML={cleanWhitespace:function(G){for(var _=G.firstChild;utils_type.A.exists(_);)_.nodeType!==3||/\S/.test(_.nodeValue)?_.nodeType===1&&this.cleanWhitespace(_):G.removeChild(_),_=_.nextSibling},parse:function(G){var _,J;return J=typeof DOMParser=="function"||typeof DOMParser=="object"?DOMParser:function(){this.parseFromString=function(Z){var Q;return typeof ActiveXObject=="function"&&(Q=new ActiveXObject("MSXML.DomDocument")).loadXML(Z),Q}},_=new J().parseFromString(G,"text/xml"),this.cleanWhitespace(_),_}},jxg.A.XML;var utils_event=__webpack_require__(454);__webpack_require__(713);var math=__webpack_require__(477);math.A.ProbFuncs={MAXNUM:17014118346046923e22,SQRTH:.7071067811865476,SQRT2:1.4142135623730951,MAXLOG:708.3964185322641,P:[2461969814735305e-25,.5641895648310689,7.463210564422699,48.63719709856814,196.5208329560771,526.4451949954773,934.5285271719576,1027.5518868951572,557.5353353693994],Q:[13.228195115474499,86.70721408859897,354.9377788878199,975.7085017432055,1823.9091668790973,2246.3376081871097,1656.6630919416134,557.5353408177277],R:[.5641895835477551,1.275366707599781,5.019050422511805,6.160210979930536,7.4097426995044895,2.9788666537210022],S:[2.2605286322011726,9.396035249380015,12.048953980809666,17.08144507475659,9.608968090632859,3.369076451000815],T:[9.604973739870516,90.02601972038427,2232.005345946843,7003.325141128051,55592.30130103949],U:[33.56171416475031,521.3579497801527,4594.323829709801,22629.000061389095,49267.39426086359],M:128,MINV:.0078125,expx2:function(G,_){var J,Z,Q,ee;return G=Math.abs(G),_<0&&(G=-G),J=(Q=this.MINV*Math.floor(this.M*G+.5))*Q,Z=2*Q*(ee=G-Q)+ee*ee,_<0&&(J=-J,Z=-Z),J+Z>this.MAXLOG?1/0:J=Math.exp(J)*Math.exp(Z)},polevl:function(G,_,J){var Z,Q;if(utils_type.A.exists(_.reduce))return _.reduce(function(ee,te){return ee*G+te},0);for(Q=0,Z=0;Q<=J;Q++)Z=Z*G+_[Q];return Z},p1evl:function(G,_,J){var Z,Q;if(utils_type.A.exists(_.reduce))return _.reduce(function(ee,te){return ee*G+te},1);for(Q=0,Z=1;Q<J;Q++)Z=Z*G+_[Q];return Z},ndtr:function(G){var _,J,Z;return _=G*this.SQRTH,(Z=Math.abs(_))<1?J=.5+.5*this.erf(_):(J=.5*this.erfce(Z),Z=this.expx2(G,-1),J*=Math.sqrt(Z),_>0&&(J=1-J)),J},_underflow:function(G){return console.log("erfc","UNDERFLOW"),G<0?2:0},erfc:function(G){var _,J,Z,Q,ee;return(Z=G<0?-G:G)<1?1-this.erf(G):(ee=-G*G)<-this.MAXLOG?this._underflow(G):(ee=this.expx2(G,-1),Z<8?(_=this.polevl(Z,this.P,8),J=this.p1evl(Z,this.Q,8)):(_=this.polevl(Z,this.R,5),J=this.p1evl(Z,this.S,6)),Q=ee*_/J,G<0&&(Q=2-Q),Q===0?this._underflow(G):Q)},erfce:function(G){var _,J;return G<8?(_=this.polevl(G,this.P,8),J=this.p1evl(G,this.Q,8)):(_=this.polevl(G,this.R,5),J=this.p1evl(G,this.S,6)),_/J},erf:function(G){var _;return Math.abs(G)>1?1-this.erfc(G):(_=G*G,G*this.polevl(_,this.T,4)/this.p1evl(_,this.U,5))},s2pi:2.5066282746310007,P0:[-59.96335010141079,98.00107541859997,-56.67628574690703,13.931260938727968,-1.2391658386738125],Q0:[1.9544885833814176,4.676279128988815,86.36024213908905,-225.46268785411937,200.26021238006066,-82.03722561683334,15.90562251262117,-1.1833162112133],P1:[4.0554489230596245,31.525109459989388,57.16281922464213,44.08050738932008,14.684956192885803,2.1866330685079025,-.1402560791713545,-.03504246268278482,-.0008574567851546854],Q1:[15.779988325646675,45.39076351288792,41.3172038254672,15.04253856929075,2.504649462083094,-.14218292285478779,-.03808064076915783,-.0009332594808954574],P2:[3.2377489177694603,6.915228890689842,3.9388102529247444,1.3330346081580755,.20148538954917908,.012371663481782003,.00030158155350823543,26580697468673755e-22,6239745391849833e-24],Q2:[6.02427039364742,3.6798356385616087,1.3770209948908132,.21623699359449663,.013420400608854318,.00032801446468212774,28924786474538068e-22,6790194080099813e-24],ndtri:function(G){var _,J,Z,Q,ee;return G<=0?-1/0:G>=1?1/0:(ee=1,(J=G)>.8646647167633873&&(J=1-J,ee=0),J>.1353352832366127?(_=(J-=.5)+J*((Q=J*J)*this.polevl(Q,this.P0,4)/this.p1evl(Q,this.Q0,8)),_*=this.s2pi):(Z=1/(_=Math.sqrt(-2*Math.log(J))),_=_-Math.log(_)/_-(_<8?Z*this.polevl(Z,this.P1,8)/this.p1evl(Z,this.Q1,8):Z*this.polevl(Z,this.P2,8)/this.p1evl(Z,this.Q2,8)),ee!==0&&(_=-_),_))},erfi:function(G){return this.ndtri(.5*(G+1))*this.SQRTH}},math.A.ProbFuncs;var ia=__webpack_require__(733);math.A.Extrapolate={upper:15,infty:1e4,wynnEps:function(G,_,J){var Z,Q,ee,te,ne;if(J[_]=G,_===0)ne=G;else{for(ee=0,Z=_;Z>0;Z--)Q=ee,ee=J[Z-1],te=J[Z]-ee,Math.abs(te)<=1e-15?J[Z-1]=1e20:J[Z-1]=1*Q+1/te;ne=J[_%2]}return ne},aitken:function(G,_,J){var Z,Q,ee,te,ne,ie;if(J[_]=G,_<2)Z=G;else{for(te=_/2,ne=1;ne<=te;ne++)Q=J[(ie=_-2*ne)+2]-2*J[ie+1]+J[ie],Math.abs(Q)<1e-15?J[ie]=1e20:(ee=J[ie]-J[ie+1],J[ie]-=ee*ee/Q);Z=J[_%2]}return Z},brezinski:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe;if(J[_]=G,_<3)Z=G;else{for(ie=_/3,oe=_,re=1;re<=ie;re++)ee=J[(oe-=3)+1]-J[oe],te=J[oe+2]-J[oe+1],Q=(ne=J[oe+3]-J[oe+2])*(te-ee)-ee*(ne-te),Math.abs(Q)<1e-15?J[oe]=1e20:J[oe]=J[oe+1]-ee*te*(ne-te)/Q;Z=J[_%3]}return Z},iteration:function(G,_,J,Z,Q){var ee,te,ne,ie,re=NaN,oe=[],se="finite",ae=_;for(Q=Q||0,ee=1;ee<=this.upper;ee++){if(te=J(G+(ae=Q===0?_/(ee+1):.5*ae),!0),ne=this[Z](te,ee-1,oe),isNaN(ne)){se="NaN";break}if(te!==0&&ne/te>this.infty){re=ne,se="infinite";break}if(ie=ne-re,Math.abs(ie)<1e-7)break;re=ne}return[re,se,1-(ee-1)/this.upper]},levin:function(G,_,J,Z,Q,ee){var te,ne,ie,re;if(re=1/(Z+_),Q[_]=G/J,ee[_]=1/J,_>0&&(Q[_-1]=Q[_]-Q[_-1],ee[_-1]=ee[_]-ee[_-1],_>1))for(ie=(Z+_-1)*re,te=2;te<=_;te++)ne=(Z+_-te)*Math.pow(ie,te-2)*re,Q[_-te]=Q[_-te+1]-ne*Q[_-te],ee[_-te]=ee[_-te+1]-ne*ee[_-te],re*=ie;return Math.abs(ee[0])<1e-15?1e20:Q[0]/ee[0]},iteration_levin:function(G,_,J,Z){var Q,ee,te,ne,ie,re,oe,se=NaN,ae=[],le=[],ue="finite",de=_;for(Z=Z||0,ne=J(G+_,!0),Q=1;Q<=this.upper;Q++){if(ie=(ee=J(G+(de=Z===0?_/(Q+1):.5*de),!0))-ne,oe=(Math.abs(ie)<1?"u":"t")=="u"?(1+Q)*ie:ie,ne=ee,re=(te=this.levin(ee,Q-1,oe,1,ae,le))-se,isNaN(te)){ue="NaN";break}if(ee!==0&&te/ee>this.infty){se=te,ue="infinite";break}if(Math.abs(re)<1e-7)break;se=te}return[se,ue,1-(Q-1)/this.upper]},limit:function(G,_,J){return this.iteration_levin(G,_,J,0)}};var extrapolate=math.A.Extrapolate,geometry=__webpack_require__(571);math.A.Quadtree=function(G,_,J){_=_||{capacity:10,pointType:"coords"},this.config={},this.config.capacity=_.capacity||10,this.config.pointType=_.pointType||"coords",this.points=[],this.xlb=G[0],this.xub=G[2],this.ylb=G[3],this.yub=G[1],this.parent=J||null,this.northWest=null,this.northEast=null,this.southEast=null,this.southWest=null},utils_type.A.extend(math.A.Quadtree.prototype,{contains:function(G,_){return this.xlb<G&&G<=this.xub&&this.ylb<_&&_<=this.yub},insert:function(G){switch(this.config.pointType){case"coords":if(!this.contains(G.usrCoords[1],G.usrCoords[2]))return!1;break;case"object":if(!this.contains(G.x,G.y))return!1}return this.points.length<this.config.capacity&&this.northWest===null?(this.points.push(G),!0):(this.northWest===null&&this.subdivide(),!!this.northWest.insert(G)||!!this.northEast.insert(G)||!!this.southEast.insert(G)||!!this.southWest.insert(G))},subdivide:function(){var G=this.xlb+.5*(this.xub-this.xlb),_=this.ylb+.5*(this.yub-this.ylb);this.northWest=new math.A.Quadtree([this.xlb,this.yub,G,_],this.config,this),this.northEast=new math.A.Quadtree([G,this.yub,this.xub,_],this.config,this),this.southEast=new math.A.Quadtree([this.xlb,_,G,this.ylb],this.config,this),this.southWest=new math.A.Quadtree([G,_,this.xub,this.ylb],this.config,this)},_query:function(G,_){var J;if(this.contains(G,_)){if(this.northWest===null)return this;if((J=this.northWest._query(G,_))||(J=this.northEast._query(G,_))||(J=this.southEast._query(G,_))||(J=this.southWest._query(G,_)))return J}return!1},query:function(G,_){var J,Z;return utils_type.A.exists(_)?(J=G,Z=_):(J=G.usrCoords[1],Z=G.usrCoords[2]),this._query(J,Z)},hasPoint:function(G,_,J){var Z,Q,ee;if(this.contains(G,_)){switch(ee=this.points.length,this.config.pointType){case"coords":for(Q=0;Q<ee;Q++)if(geometry.A.distance([G,_],this.points[Q].usrCoords.slice(1),2)<J)return!0;break;case"object":for(Q=0;Q<ee;Q++)if(geometry.A.distance([G,_],[this.points[Q].x,this.points[Q].y],2)<J)return!0}if(this.northWest===null)return!1;if((Z=this.northWest.hasPoint(G,_,J))||(Z=this.northEast.hasPoint(G,_,J))||(Z=this.southEast.hasPoint(G,_,J))||(Z=this.southWest.hasPoint(G,_,J)))return Z}return!1},getAllPoints:function(){var G=[];return this.getAllPointsRecursive(G),G},getAllPointsRecursive(G){Array.prototype.push.apply(G,this.points.slice()),this.northWest!==null&&(this.northWest.getAllPointsRecursive(G),this.northEast.getAllPointsRecursive(G),this.southEast.getAllPointsRecursive(G),this.southWest.getAllPointsRecursive(G))}});var qdt=math.A.Quadtree;math.A.BoxQuadtree=function(G,_,J){var Z,Q,ee,te;G--,this.depth=G,this.capacity=_,this.items=[],this.northWest=null,this.northEast=null,this.southEast=null,this.southWest=null,this.bbox=null,this.cx=null,this.cy=null,J&&(Z=J[0],Q=J[1],ee=J[2],te=J[3],this.cx=.5*(Z+ee),this.cy=.5*(Q+te),this.bbox=[Z,Q,ee,te])},utils_type.A.extend(math.A.BoxQuadtree.prototype,{insert:function(G){var _,J,Z,Q,ee,te,ne,ie,re,oe,se,ae=[],le=[],ue=[],de=[];if(this.bbox===null){for(J=G.length,Z=te=1/0,ee=Q=-1/0,_=0;_<G.length;_++)Z=(ne=G[_]).xlb<Z?ne.xlb:Z,Q=ne.yub>Q?ne.yub:Q,ee=ne.xub>ee?ne.xub:ee,te=ne.ylb<te?ne.ylb:te;this.cx=.5*(Z+ee),this.cy=.5*(Q+te),this.bbox=[Z,Q,ee,te]}else Z=this.bbox[0],Q=this.bbox[1],ee=this.bbox[2],te=this.bbox[3];if(this.depth===0||this.items.length+G.length<this.capacity)return this.items=this.items.concat(G),this;for(J=G.length,_=0;_<J;_++)ie=(ne=G[_]).xlb<=this.cx&&ne.yub>this.cy,oe=ne.xlb<=this.cx&&ne.ylb<=this.cy,re=ne.xub>this.cx&&ne.yub>this.cy,se=ne.xub>this.cx&&ne.ylb<=this.cy,ie&&re&&se&&oe?this.items.push(ne):(ie&&ae.push(ne),oe&&ue.push(ne),re&&le.push(ne),se&&de.push(ne));return this.subdivide(ae,ue,le,de,Z,Q,ee,te),this},insertItem:function(G){var _,J,Z,Q,ee,te,ne,ie,re=[],oe=[],se=[],ae=[];return this.bbox===null?(_=Q=1/0,Z=J=-1/0,_=G.xlb<_?G.xlb:_,J=G.yub>J?G.yub:J,Z=G.xub>Z?G.xub:Z,Q=G.ylb<Q?G.ylb:Q,this.cx=.5*(_+Z),this.cy=.5*(J+Q),this.bbox=[_,J,Z,Q]):(_=this.bbox[0],J=this.bbox[1],Z=this.bbox[2],Q=this.bbox[3]),this.depth===0||this.items.length+1<this.capacity?(this.items.push(G),this):(ee=G.xlb<=this.cx&&G.yub>this.cy,ne=G.xlb<=this.cx&&G.ylb<=this.cy,te=G.xub>this.cx&&G.yub>this.cy,ie=G.xub>this.cx&&G.ylb<=this.cy,ee&&te&&ie&&ne?this.items.push(G):(ee&&re.push(G),ne&&se.push(G),te&&oe.push(G),ie&&ae.push(G)),this.subdivide(re,se,oe,ae,_,J,Z,Q),this)},subdivide:function(G,_,J,Z,Q,ee,te,ne){return G.length>0&&(this.northWest===null&&(this.northWest=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[Q,ee,this.cx,this.cy])),this.northWest.insert(G)),_.length>0&&(this.southWest===null&&(this.southWest=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[Q,this.cy,this.cx,ne])),this.southWest.insert(_)),J.length>0&&(this.northEast===null&&(this.northEast=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[this.cx,ee,te,this.cy])),this.northEast.insert(J)),Z.length>0&&(this.southEast===null&&(this.southEast=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[this.cx,this.cy,te,ne])),this.southEast.insert(Z)),this},find:function(G){var _,J,Z=function(ee){return G[2]>=ee.xlb&&G[0]<=ee.xub&&G[3]<=ee.yub&&G[1]>=ee.ylb},Q=[];for(J=this.items.length,_=0;_<J;_++)Z(this.items[_])&&Q.push(this.items[_]);return this.northWest!==null&&G[0]<=this.cx&G[1]>=this.cy&&utils_type.A.concat(Q,this.northWest.find(G)),this.southWest!==null&&G[0]<=this.cx&G[3]<=this.cy&&utils_type.A.concat(Q,this.southWest.find(G)),this.northEast!==null&&G[2]>=this.cx&G[1]>=this.cy&&utils_type.A.concat(Q,this.northEast.find(G)),this.southEast!==null&&G[2]>=this.cx&G[3]<=this.cy&&utils_type.A.concat(Q,this.southEast.find(G)),Q},analyzeTree:function(){var G,_={number_items:this.items.length,depth:1};return this.northWest!==null&&(G=this.northWest.analyzeTree(),_.number_items+=G.number_items,_.depth=Math.max(_.depth,1+G.depth)),this.southWest!==null&&(G=this.southWest.analyzeTree(),_.number_items+=G.number_items,_.depth=Math.max(_.depth,1+G.depth)),this.northEast!==null&&(G=this.northEast.analyzeTree(),_.number_items+=G.number_items,_.depth=Math.max(_.depth,1+G.depth)),this.southEast!==null&&(G=this.southEast.analyzeTree(),_.number_items+=G.number_items,_.depth=Math.max(_.depth,1+G.depth)),_},plot:function(){var G,_=[],J=[];return _.push(this.bbox[0]),J.push(this.bbox[3]),_.push(this.bbox[2]),J.push(this.bbox[3]),_.push(this.bbox[2]),J.push(this.bbox[1]),_.push(this.bbox[0]),J.push(this.bbox[1]),_.push(this.bbox[0]),J.push(this.bbox[3]),_.push(NaN),J.push(NaN),this.northWest!==null&&(G=this.northWest.plot(),utils_type.A.concat(_,G[0]),utils_type.A.concat(J,G[1])),this.northEast!==null&&(G=this.northEast.plot(),utils_type.A.concat(_,G[0]),utils_type.A.concat(J,G[1])),this.southEast!==null&&(G=this.southEast.plot(),utils_type.A.concat(_,G[0]),utils_type.A.concat(J,G[1])),this.southWest!==null&&(G=this.southWest.plot(),utils_type.A.concat(_,G[0]),utils_type.A.concat(J,G[1])),[_,J]}});var bqdt=math.A.BoxQuadtree,numerics=__webpack_require__(171);jxg.A.Math.Nlp={arr:function(G){return new Float64Array(G)},arr2:function(G,_){for(var J=0,Z=new Array(G);J<G;)Z[J]=this.arr(_),J++;return Z},arraycopy:function(G,_,J,Z,Q){for(var ee=0;ee<Q;)J[ee+Z]=G[ee+_],ee++},lastNumberOfEvaluations:0,GetLastNumberOfEvaluations:function(){return this.lastNumberOfEvaluations},Normal:0,MaxIterationsReached:1,DivergingRoundingErrors:2,FindMinimum:function(G,_,J,Z,Q,ee,te,ne,ie){var re,oe,se=J+2,ae=this.arr(_+1),le=this;return this.lastNumberOfEvaluations=0,ie&&console.log("Experimental feature 'testForRoundingErrors' is activated."),ae[0]=0,this.arraycopy(Z,0,ae,1,_),oe=function(ue,de,pe,fe){var _e,ye,be=le.arr(ue);return le.lastNumberOfEvaluations=le.lastNumberOfEvaluations+1,le.arraycopy(pe,1,be,0,ue),_e=le.arr(de),ye=G(ue,de,be,_e),le.arraycopy(_e,0,fe,1,de),ye},re=this.cobylb(oe,_,J,se,ae,Q,ee,te,ne,ie),this.arraycopy(ae,1,Z,0,_),re},cobylb:function(G,_,J,Z,Q,ee,te,ne,ie,re){var oe,se,ae,le,ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te,Me,Ne,Le,Ie,Ge,He,Be,ze,Fe,$e,Xe,je,qe,Ze=-1,st=0,St=0,it=_+1,lt=J+1,ft=ee,kt=0,Ht=!1,Wt=!1,ni=0,jt=0,pt=0,Ke=this.arr(1+Z),Mt=this.arr2(1+_,1+it),Bt=this.arr2(1+_,1+_),Lt=this.arr2(1+Z,1+it),Ft=this.arr2(1+_,1+lt),ai=this.arr(1+_),Qt=this.arr(1+_),hi=this.arr(1+_),Qe=this.arr(1+_),Ye=this.arr(1+_);for(ne>=2&&console.log("The initial value of RHO is "+ft+" and PARMU is set to zero."),fe=0,de=1/ft,se=1;se<=_;++se)Mt[se][it]=Q[se],Mt[se][se]=ft,Bt[se][se]=de;_e=it,ye=!1;e:for(;;){if(fe>=ie&&fe>0){Ze=this.MaxIterationsReached;break e}for(++fe,st=G(_,J,Q,Ke),St=0,le=1;le<=J;++le)St=Math.max(St,-Ke[le]);if(fe!==ne-1&&ne!==3||this.PrintIterationResult(fe,st,St,Q,_,ne),Ke[lt]=st,Ke[Z]=St,be=!0,!ye){for(be=!1,se=1;se<=Z;++se)Lt[se][_e]=Ke[se];if(fe<=it){if(_e<=_)if(Lt[lt][it]<=st)Q[_e]=Mt[_e][it];else{for(Mt[_e][it]=Q[_e],le=1;le<=Z;++le)Lt[le][_e]=Lt[le][it],Lt[le][it]=Ke[le];for(le=1;le<=_e;++le){for(Mt[_e][le]=-ft,de=0,se=le;se<=_e;++se)de-=Bt[se][le];Bt[_e][le]=de}}if(fe<=_){Q[_e=fe]+=ft;continue e}}ye=!0}t:for(;;){i:do{if(!be){for(Ae=Lt[lt][it]+kt*Lt[Z][it],Ce=it,ae=1;ae<=_;++ae)(de=Lt[lt][ae]+kt*Lt[Z][ae])<Ae?(Ce=ae,Ae=de):de===Ae&&kt===0&&Lt[Z][ae]<Lt[Z][Ce]&&(Ce=ae);if(Ce<=_){for(se=1;se<=Z;++se)de=Lt[se][it],Lt[se][it]=Lt[se][Ce],Lt[se][Ce]=de;for(se=1;se<=_;++se){for(de=Mt[se][Ce],Mt[se][Ce]=0,Mt[se][it]+=de,pe=0,le=1;le<=_;++le)Mt[se][le]-=de,pe-=Bt[le][se];Bt[Ce][se]=pe}}if(Ee=0,re)for(se=1;se<=_;++se)for(ae=1;ae<=_;++ae)de=this.DOT_PRODUCT_ROW_COL(Bt,se,Mt,ae,1,_)-(se===ae?1:0),Ee=Math.max(Ee,Math.abs(de));if(Ee>.1){Ze=this.DivergingRoundingErrors;break e}for(le=1;le<=lt;++le){for(Ke[le]=-Lt[le][it],ae=1;ae<=_;++ae)Ye[ae]=Lt[le][ae]+Ke[le];for(se=1;se<=_;++se)Ft[se][le]=(le===lt?-1:1)*this.DOT_PRODUCT_ROW_COL(Ye,-1,Bt,se,1,_)}for(Ht=!0,ni=.25*ft,Re=2.1*ft,ae=1;ae<=_;++ae){for(Te=0,Me=0,le=1;le<=_;++le)Te+=Bt[ae][le]*Bt[ae][le],Me+=Mt[le][ae]*Mt[le][ae];ai[ae]=1/Math.sqrt(Te),Qt[ae]=Math.sqrt(Me),(ai[ae]<ni||Qt[ae]>Re)&&(Ht=!1)}if(!ye&&!Ht){for(_e=0,de=Re,ae=1;ae<=_;++ae)Qt[ae]>de&&(_e=ae,de=Qt[ae]);if(_e===0)for(ae=1;ae<=_;++ae)ai[ae]<de&&(_e=ae,de=ai[ae]);for(de=.5*ft*ai[_e],le=1;le<=_;++le)Qe[le]=de*Bt[_e][le];for(Ne=0,Le=0,oe=0,le=1;le<=lt;++le)oe=this.DOT_PRODUCT_ROW_COL(Qe,-1,Ft,le,1,_),le<lt&&(de=Lt[le][it],Ne=Math.max(Ne,-oe-de),Le=Math.max(Le,oe-de));for(Ie=kt*(Ne-Le)>2*oe?-1:1,de=0,se=1;se<=_;++se)Qe[se]=Ie*Qe[se],Mt[se][_e]=Qe[se],de+=Bt[_e][se]*Qe[se];for(le=1;le<=_;++le)Bt[_e][le]/=de;for(ae=1;ae<=_;++ae){if(ae!==_e)for(de=this.DOT_PRODUCT_ROW_COL(Bt,ae,Qe,-1,1,_),le=1;le<=_;++le)Bt[ae][le]-=de*Bt[_e][le];Q[ae]=Mt[ae][it]+Qe[ae]}continue e}if(!(Wt=this.trstlp(_,J,Ft,Ke,ft,Qe))){for(de=0,le=1;le<=_;++le)de+=Qe[le]*Qe[le];if(de<.25*ft*ft){ye=!0;break i}}for(oe=0,Ge=0,Ke[lt]=0,le=1;le<=lt;++le)oe=Ke[le]-this.DOT_PRODUCT_ROW_COL(Qe,-1,Ft,le,1,_),le<lt&&(Ge=Math.max(Ge,oe));if(kt<1.5*(He=(jt=Lt[Z][it]-Ge)>0?oe/jt:0)){for(kt=2*He,ne>=2&&console.log("Increase in PARMU to "+kt),Be=Lt[lt][it]+kt*Lt[Z][it],ae=1;ae<=_;++ae)if((de=Lt[lt][ae]+kt*Lt[Z][ae])<Be||de===Be&&kt===0&&Lt[Z][ae]<Lt[Z][it])continue t}for(pt=kt*jt-oe,le=1;le<=_;++le)Q[le]=Mt[le][it]+Qe[le];ye=!0;continue e}for(be=!1,ze=Lt[lt][it]+kt*Lt[Z][it]-(st+kt*St),kt===0&&st===Lt[lt][it]&&(pt=jt,ze=Lt[Z][it]-St),Fe=ze<=0?1:0,_e=0,ae=1;ae<=_;++ae)(de=Math.abs(this.DOT_PRODUCT_ROW_COL(Bt,ae,Qe,-1,1,_)))>Fe&&(_e=ae,Fe=de),hi[ae]=de*ai[ae];for($e=1.1*ft,ue=0,ae=1;ae<=_;++ae)if(hi[ae]>=ni||hi[ae]>=ai[ae]){if(de=Qt[ae],ze>0){for(de=0,le=1;le<=_;++le)de+=Math.pow(Qe[le]-Mt[le][ae],2);de=Math.sqrt(de)}de>$e&&(ue=ae,$e=de)}if(ue>0&&(_e=ue),_e!==0){for(de=0,se=1;se<=_;++se)Mt[se][_e]=Qe[se],de+=Bt[_e][se]*Qe[se];for(le=1;le<=_;++le)Bt[_e][le]/=de;for(ae=1;ae<=_;++ae)if(ae!==_e)for(de=this.DOT_PRODUCT_ROW_COL(Bt,ae,Qe,-1,1,_),le=1;le<=_;++le)Bt[ae][le]-=de*Bt[_e][le];for(le=1;le<=Z;++le)Lt[le][_e]=Ke[le];if(ze>0&&ze>=.1*pt)continue t}}while(!1);if(Ht){if(ft<=te){Ze=this.Normal;break e}if(Xe=0,je=0,(ft*=.5)<=1.5*te&&(ft=te),kt>0){for(qe=0,le=1;le<=lt;++le){for(je=Xe=Lt[le][it],se=1;se<=_;++se)Xe=Math.min(Xe,Lt[le][se]),je=Math.max(je,Lt[le][se]);le<=J&&Xe<.5*je&&(de=Math.max(je,0)-Xe,qe=qe<=0?de:Math.min(qe,de))}qe===0?kt=0:je-Xe<kt*qe&&(kt=(je-Xe)/qe)}ne>=2&&console.log("Reduction in RHO to "+ft+"  and PARMU = "+kt),ne===2&&this.PrintIterationResult(fe,Lt[lt][it],Lt[Z][it],this.COL(Mt,it),_,ne)}else ye=!1}}switch(Ze){case this.Normal:if(ne>=1&&console.log("%nNormal return from subroutine COBYLA%n"),Wt)return ne>=1&&this.PrintIterationResult(fe,st,St,Q,_,ne),Ze;break;case this.MaxIterationsReached:ne>=1&&console.log("%nReturn from subroutine COBYLA because the MAXFUN limit has been reached.%n");break;case this.DivergingRoundingErrors:ne>=1&&console.log("%nReturn from subroutine COBYLA because rounding errors are becoming damaging.%n")}for(le=1;le<=_;++le)Q[le]=Mt[le][it];return st=Lt[lt][it],St=Lt[Z][it],ne>=1&&this.PrintIterationResult(fe,st,St,Q,_,ne),Ze},trstlp:function(G,_,J,Z,Q,ee){var te,ne,ie,re,oe,se,ae,le,ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te,Me,Ne,Le,Ie,Ge,He,Be,ze,Fe,$e,Xe,je,qe,Ze=0,st=0,St=0,it=this.arr2(1+G,1+G),lt=this.arr(2+_),ft=this.arr(2+_),kt=this.arr(1+G),Ht=this.arr(1+G),Wt=this.arr(2+_),ni=this.arr(2+_),jt=_,pt=0;for(ie=1;ie<=G;++ie)it[ie][ie]=1,ee[ie]=0;if(te=0,ne=0,_>=1){for(re=1;re<=_;++re)Z[re]>ne&&(ne=Z[re],te=re);for(re=1;re<=_;++re)ni[re]=re,ft[re]=ne-Z[re]}oe=!0;do e:for(;;){(!oe||oe&&ne===0)&&(te=jt=_+1,ni[jt]=jt,ft[jt]=0),oe=!1,se=0,ae=0,le=0,ue=0;t:do{if(de=jt===_?ne:-this.DOT_PRODUCT_ROW_COL(ee,-1,J,jt,1,G),ae===0||de<se?(se=de,st=pt,ae=3):pt>st?(st=pt,ae=3):--ae,ae===0)break e;if(pe=0,te<=pt){if(te<pt){fe=ni[te],_e=ft[te],re=te;do{for(Ae=ni[be=re+1],Ce=this.DOT_PRODUCT(this.PART(this.COL(it,re),1,G),this.PART(this.COL(J,Ae),1,G)),Ze=math.A.hypot(Ce,lt[be]),Ee=lt[be]/Ze,Re=Ce/Ze,lt[be]=Ee*lt[re],lt[re]=Ze,ie=1;ie<=G;++ie)Ze=Ee*it[ie][be]+Re*it[ie][re],it[ie][be]=Ee*it[ie][re]-Re*it[ie][be],it[ie][re]=Ze;ni[re]=Ae,ft[re]=ft[be],re=be}while(re<pt);ni[re]=fe,ft[re]=_e}if(--pt,jt>_)for(Ze=1/lt[pt],re=1;re<=G;++re)kt[re]=Ze*it[re][pt];else for(Ze=this.DOT_PRODUCT_ROW_COL(kt,-1,it,pt+1,1,G),re=1;re<=G;++re)kt[re]-=Ze*it[re][pt+1]}else{for(Ae=ni[te],re=1;re<=G;++re)Ht[re]=J[re][Ae];for(Te=0,re=G;re>pt;){for(Ce=0,Me=0,ie=1;ie<=G;++ie)Ce+=Ze=it[ie][re]*Ht[ie],Me+=Math.abs(Ze);if(Ne=Me+.1*Math.abs(Ce),Le=Me+.2*Math.abs(Ce),(Me>=Ne||Ne>=Le)&&(Ce=0),Te===0)Te=Ce;else for(be=re+1,Ee=Ce/(Ze=math.A.hypot(Ce,Te)),Re=Te/Ze,Te=Ze,ie=1;ie<=G;++ie)Ze=Ee*it[ie][re]+Re*it[ie][be],it[ie][be]=Ee*it[ie][be]-Re*it[ie][re],it[ie][re]=Ze;--re}if(Te===0){pe=-1,re=pt;do{for(Ie=0,Ge=0,ie=1;ie<=G;++ie)Ie+=Ze=it[ie][re]*Ht[ie],Ge+=Math.abs(Ze);if(Ne=Ge+.1*Math.abs(Ie),Le=Ge+.2*Math.abs(Ie),Ge<Ne&&Ne<Le){if((Ze=Ie/lt[re])>0&&ni[re]<=_&&(qe=ft[re]/Ze,(pe<0||qe<pe)&&(pe=qe)),re>=2)for(He=ni[re],ie=1;ie<=G;++ie)Ht[ie]-=Ze*J[ie][He];Wt[re]=Ze}else Wt[re]=0}while(--re>0);if(pe<0)break e;for(re=1;re<=pt;++re)ft[re]=Math.max(0,ft[re]-pe*Wt[re]);if(te<pt){fe=ni[te],_e=ft[te],re=te;do{for(He=ni[be=re+1],Ce=this.DOT_PRODUCT(this.PART(this.COL(it,re),1,G),this.PART(this.COL(J,He),1,G)),Ze=math.A.hypot(Ce,lt[be]),Ee=lt[be]/Ze,Re=Ce/Ze,lt[be]=Ee*lt[re],lt[re]=Ze,ie=1;ie<=G;++ie)Ze=Ee*it[ie][be]+Re*it[ie][re],it[ie][be]=Ee*it[ie][re]-Re*it[ie][be],it[ie][re]=Ze;ni[re]=He,ft[re]=ft[be],re=be}while(re<pt);ni[re]=fe,ft[re]=_e}if((Ze=this.DOT_PRODUCT(this.PART(this.COL(it,pt),1,G),this.PART(this.COL(J,Ae),1,G)))===0)break e;lt[pt]=Ze,ft[te]=0,ft[pt]=pe}else lt[++pt]=Te,ft[te]=ft[pt],ft[pt]=0;if(ni[te]=ni[pt],ni[pt]=Ae,jt>_&&Ae!==jt){for(re=pt-1,Ce=this.DOT_PRODUCT(this.PART(this.COL(it,re),1,G),this.PART(this.COL(J,Ae),1,G)),Ze=math.A.hypot(Ce,lt[pt]),Ee=lt[pt]/Ze,Re=Ce/Ze,lt[pt]=Ee*lt[re],lt[re]=Ze,ie=1;ie<=G;++ie)Ze=Ee*it[ie][pt]+Re*it[ie][re],it[ie][pt]=Ee*it[ie][re]-Re*it[ie][pt],it[ie][re]=Ze;ni[pt]=ni[re],ni[re]=Ae,Ze=ft[re],ft[re]=ft[pt],ft[pt]=Ze}if(jt>_)for(Ze=1/lt[pt],re=1;re<=G;++re)kt[re]=Ze*it[re][pt];else for(Ae=ni[pt],Ze=(this.DOT_PRODUCT_ROW_COL(kt,-1,J,Ae,1,G)-1)/lt[pt],re=1;re<=G;++re)kt[re]-=Ze*it[re][pt]}for(Be=Q*Q,Fe=0,ze=0,ie=1;ie<=G;++ie)Math.abs(ee[ie])>=1e-6*Q&&(Be-=ee[ie]*ee[ie]),Fe+=ee[ie]*kt[ie],ze+=kt[ie]*kt[ie];if(Be<=0)break e;if(Ze=Math.sqrt(ze*Be),Math.abs(Fe)>=1e-6*Ze&&(Ze=Math.sqrt(ze*Be+Fe*Fe)),le=ue=Be/(Ze+Fe),jt===_){if(Le=le+.2*ne,le>=(Ne=le+.1*ne)||Ne>=Le)break t;le=Math.min(le,ne)}for(re=1;re<=G;++re)Ht[re]=ee[re]+le*kt[re];if(jt===_)for(St=ne,ne=0,re=1;re<=pt;++re)Ze=Z[Ae=ni[re]]-this.DOT_PRODUCT_ROW_COL(Ht,-1,J,Ae,1,G),ne=Math.max(ne,Ze);re=pt;do{for($e=0,Xe=0,ie=1;ie<=G;++ie)$e+=Ze=it[ie][re]*Ht[ie],Xe+=Math.abs(Ze);if(Ne=Xe+.1*Math.abs($e),Le=Xe+.2*Math.abs($e),(Xe>=Ne||Ne>=Le)&&($e=0),Wt[re]=$e/lt[re],re>=2)for(Ae=ni[re],ie=1;ie<=G;++ie)Ht[ie]-=Wt[re]*J[ie][Ae]}while(re-->=2);for(jt>_&&(Wt[pt]=Math.max(0,Wt[pt])),re=1;re<=G;++re)Ht[re]=ee[re]+le*kt[re];if(jt>pt)for(re=pt+1;re<=jt;++re){for(ye=ne-Z[Ae=ni[re]],je=ne+Math.abs(Z[Ae]),ie=1;ie<=G;++ie)ye+=Ze=J[ie][Ae]*Ht[ie],je+=Math.abs(Ze);Ne=je+.1*Math.abs(ye),Le=je+.2*Math.abs(ye),(je>=Ne||Ne>=Le)&&(ye=0),Wt[re]=ye}for(pe=1,te=0,re=1;re<=jt;++re)Wt[re]<0&&(Ze=ft[re]/(ft[re]-Wt[re]))<pe&&(pe=Ze,te=re);for(Ze=1-pe,re=1;re<=G;++re)ee[re]=Ze*ee[re]+pe*Ht[re];for(re=1;re<=jt;++re)ft[re]=Math.max(0,Ze*ft[re]+pe*Wt[re]);jt===_&&(ne=St+pe*(ne-St))}while(te>0);if(le===ue)return!0}while(jt===_);return!1},PrintIterationResult:function(G,_,J,Z,Q,ee){ee>1&&console.log("NFVALS = "+G+"  F = "+_+"  MAXCV = "+J),ee>1&&console.log("X = "+this.PART(Z,1,Q))},ROW:function(G,_){return G[_].slice()},COL:function(G,_){var J,Z=G.length,Q=[];for(J=0;J<Z;++J)Q[J]=G[J][_];return Q},PART:function(G,_,J){return G.slice(_,J+1)},FORMAT:function(G){return G.join(",")},DOT_PRODUCT:function(G,_){var J,Z=0,Q=G.length;for(J=0;J<Q;++J)Z+=G[J]*_[J];return Z},DOT_PRODUCT_ROW_COL:function(G,_,J,Z,Q,ee){var te,ne=0;if(_===-1)for(te=Q;te<=ee;++te)ne+=G[te]*J[te][Z];else if(Z===-1)for(te=Q;te<=ee;++te)ne+=G[_][te]*J[te];else for(te=Q;te<=ee;++te)ne+=G[_][te]*J[te][Z];return ne}},jxg.A.Math.Nlp;var base_coords=__webpack_require__(904),statistics=__webpack_require__(588);math.A.Plot={checkReal:function(G){var _,J,Z=!1,Q=G.length;for(_=0;_<Q;_++)if(J=G[_].usrCoords,!isNaN(J[1])&&!isNaN(J[2])&&Math.abs(J[0])>math.A.eps){Z=!0;break}return Z},updateParametricCurveNaive:function(G,_,J,Z){var Q,ee,te=!1,ne=(J-_)/Z;for(Q=0;Q<Z;Q++)ee=_+Q*ne,G.points[Q].setCoordinates(constants.A.COORDS_BY_USER,[G.X(ee,te),G.Y(ee,te)],!1),G.points[Q]._t=ee,te=!0;return G},isSegmentOutside:function(G,_,J,Z,Q){return _<0&&Z<0||_>Q.canvasHeight&&Z>Q.canvasHeight||G<0&&J<0||G>Q.canvasWidth&&J>Q.canvasWidth},isDistOK:function(G,_,J,Z){return Math.abs(G)<J&&Math.abs(_)<Z&&!isNaN(G+_)},isSegmentDefined:function(G,_,J,Z){return!(isNaN(G+_)&&isNaN(J+Z))},updateParametricCurveOld:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue=!1,de=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],G.board,!1),pe=[],fe=[],_e=[],ye=[],be=!1,Ae=0,Ce=function(Ee,Re,Te){var Me,Ne=Te[1]-Ee[1],Le=Te[2]-Ee[2],Ie=Re[0]-Ee[1],Ge=Re[1]-Ee[2],He=Ie*Ie+Ge*Ge;return He>=math.A.eps&&(Me=(Ne*Ie+Le*Ge)/He)>0&&(Me<=1?(Ne-=Me*Ie,Le-=Me*Ge):(Ne-=Ie,Le-=Ge)),math.A.hypot(Ne,Le)};for(jxg.A.deprecated("Curve.updateParametricCurveOld()"),G.board.updateQuality===G.board.BOARD_QUALITY_LOW?(se=15,ae=10,le=10):(se=21,ae=.7,le=.7),ye[0]=J-_,Z=1;Z<se;Z++)ye[Z]=.5*ye[Z-1];Z=1,pe[0]=1,fe[0]=0,Q=_,de.setCoordinates(constants.A.COORDS_BY_USER,[G.X(Q,ue),G.Y(Q,ue)],!1),ue=!0,ne=de.scrCoords[1],ie=de.scrCoords[2],Q=J,de.setCoordinates(constants.A.COORDS_BY_USER,[G.X(Q,ue),G.Y(Q,ue)],!1),ee=de.scrCoords[1],te=de.scrCoords[2],_e[0]=[ee,te],re=1,oe=0,G.points=[],G.points[Ae++]=new base_coords.A(constants.A.COORDS_BY_SCREEN,[ne,ie],G.board,!1);do{for(be=this.isDistOK(ee-ne,te-ie,ae,le)||this.isSegmentOutside(ne,ie,ee,te,G.board);oe<se&&(!be||oe<6)&&(oe<=7||this.isSegmentDefined(ne,ie,ee,te));)pe[re]=Z,fe[re]=oe,_e[re]=[ee,te],re+=1,Q=_+(Z=2*Z-1)*ye[++oe],de.setCoordinates(constants.A.COORDS_BY_USER,[G.X(Q,ue),G.Y(Q,ue)],!1,!0),ee=de.scrCoords[1],te=de.scrCoords[2],be=this.isDistOK(ee-ne,te-ie,ae,le)||this.isSegmentOutside(ne,ie,ee,te,G.board);Ae>1&&Ce(G.points[Ae-2].scrCoords,[ee,te],G.points[Ae-1].scrCoords)<.015&&(Ae-=1),G.points[Ae]=new base_coords.A(constants.A.COORDS_BY_SCREEN,[ee,te],G.board,!1),G.points[Ae]._t=Q,Ae+=1,ne=ee,ie=te,ee=_e[re-=1][0],te=_e[re][1],oe=fe[re]+1,Z=2*pe[re]}while(re>0&&Ae<5e5);return G.numberPoints=G.points.length,G},_insertPoint_v2:function(G,_,J){var Z=!isNaN(this._lastCrds[1]+this._lastCrds[2]),Q=!isNaN(_.scrCoords[1]+_.scrCoords[2]),ee=G.board.canvasWidth,te=G.board.canvasHeight,ne=500;(!(Q=Q&&_.scrCoords[1]>-500&&_.scrCoords[2]>-500&&_.scrCoords[1]<ee+ne&&_.scrCoords[2]<te+ne)&&Z||Q&&(!Z||Math.abs(_.scrCoords[1]-this._lastCrds[1])>.7||Math.abs(_.scrCoords[2]-this._lastCrds[2])>.7))&&(_._t=J,G.points.push(_),this._lastCrds=_.copy("scrCoords"))},neighborhood_isNaN_v2:function(G,_){var J,Z,Q=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],G.board,!1);return J=_+math.A.eps,Q.setCoordinates(constants.A.COORDS_BY_USER,[G.X(J,!0),G.Y(J,!0)],!1),Z=Q.usrCoords,!!(isNaN(Z[1]+Z[2])||(J=_-math.A.eps,Q.setCoordinates(constants.A.COORDS_BY_USER,[G.X(J,!0),G.Y(J,!0)],!1),Z=Q.usrCoords,isNaN(Z[1]+Z[2])))},_borderCase:function(G,_,J,Z,Q,ee,te,ne){var ie,re,oe,se,ae,le,ue=null,de=!1;if(ne<=1){if(re=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],G.board,!1),isNaN(_[1]+_[2])&&!isNaN(Z[1]+Z[2])&&!this.neighborhood_isNaN_v2(G,Q)||isNaN(J[1]+J[2])&&!isNaN(Z[1]+Z[2])&&!this.neighborhood_isNaN_v2(G,ee)||isNaN(Z[1]+Z[2])&&(!isNaN(_[1]+_[2])||!isNaN(J[1]+J[2]))&&!this.neighborhood_isNaN_v2(G,te))return!1;se=0;do{if(isNaN(_[1]+_[2])&&!isNaN(Z[1]+Z[2]))ae=Q,le=te;else if(isNaN(J[1]+J[2])&&!isNaN(Z[1]+Z[2]))ae=ee,le=te;else if(isNaN(Z[1]+Z[2])&&!isNaN(J[1]+J[2]))ae=te,le=ee;else{if(!isNaN(Z[1]+Z[2])||isNaN(_[1]+_[2]))return!1;ae=te,le=Q}ie=.5*(ae+le),re.setCoordinates(constants.A.COORDS_BY_USER,[G.X(ie,!0),G.Y(ie,!0)],!1),oe=re.usrCoords,(de=isNaN(oe[1]+oe[2]))?ae=ie:le=ie,++se}while(de&&se<30);if(se<30&&(ue=oe.slice(),Z=oe.slice(),le=ie),ue!==null)return this._insertPoint_v2(G,new base_coords.A(constants.A.COORDS_BY_USER,ue,G.board,!1)),!0}return!1},_plotRecursive_v2:function(G,_,J,Z,Q,ee,te){var ne,ie,re,oe,se,ae=0,le=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],G.board,!1);if(!(G.numberPoints>65536))return ee<this.nanLevel&&this._isUndefined(G,_,J,Z,Q)||ee<this.nanLevel&&this._isOutside(_,J,Z,Q,G.board)?this:(ne=.5*(J+Q),le.setCoordinates(constants.A.COORDS_BY_USER,[G.X(ne,!0),G.Y(ne,!0)],!1),ie=le.scrCoords,this._borderCase(G,_,Z,ie,J,Q,ne,ee)||(re=this._triangleDists(_,Z,ie),oe=ee<this.smoothLevel&&re[3]<te,se=ee<=this.jumpLevel&&(isNaN(re[0])||isNaN(re[1])||isNaN(re[2]))||ee<this.jumpLevel&&(re[2]>.99*re[0]||re[1]>.99*re[0]||re[0]===1/0||re[1]===1/0||re[2]===1/0),ee<this.smoothLevel+2&&re[0]<.5*(re[1]+re[2])&&(ae=0,oe=!1),--ee,se?this._insertPoint_v2(G,new base_coords.A(constants.A.COORDS_BY_SCREEN,[NaN,NaN],G.board,!1),ne):ee<=ae||oe?this._insertPoint_v2(G,le,ne):(this._plotRecursive_v2(G,_,J,ie,ne,ee,te),isNaN(le.scrCoords[1]+le.scrCoords[2])||this._insertPoint_v2(G,le,ne),this._plotRecursive_v2(G,ie,ne,Z,Q,ee,te))),this)},updateParametricCurve_v2:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae=!1,le=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],G.board,!1),ue=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],G.board,!1);return G.board.updateQuality===G.board.BOARD_QUALITY_LOW?(ne=G.evalVisProp("recursiondepthlow")||13,ie=2,this.smoothLevel=ne-6,this.jumpLevel=3):(ne=G.evalVisProp("recursiondepthhigh")||17,ie=2,this.smoothLevel=ne-9,this.jumpLevel=2),this.nanLevel=ne-4,G.points=[],this.xterm==="x"?(re=.3*((oe=G.board.getBoundingBox())[2]-oe[0]),Z=Math.max(_,oe[0]-re),Q=Math.min(J,oe[2]+re)):(Z=_,Q=J),le.setCoordinates(constants.A.COORDS_BY_USER,[G.X(Z,ae),G.Y(Z,ae)],!1),ae=!0,ue.setCoordinates(constants.A.COORDS_BY_USER,[G.X(Q,ae),G.Y(Q,ae)],!1),se=this._findStartPoint(G,le.scrCoords,Z,ue.scrCoords,Q),le.setCoordinates(constants.A.COORDS_BY_SCREEN,se[0],!1),Z=se[1],se=this._findStartPoint(G,ue.scrCoords,Q,le.scrCoords,Z),ue.setCoordinates(constants.A.COORDS_BY_SCREEN,se[0],!1),Q=se[1],this._visibleArea=[Z,Q],ee=le.copy("scrCoords"),te=ue.copy("scrCoords"),le._t=Z,G.points.push(le),this._lastCrds=le.copy("scrCoords"),this._plotRecursive_v2(G,ee,Z,te,Q,ne,ie),ue._t=Q,G.points.push(ue),G.numberPoints=G.points.length,G},_insertLimesPoint:function(G,_,J,Z,Q){var ee,te,ne;Math.abs(this._lastUsrCrds[1])===1/0&&Math.abs(Q.left_x)===1/0||Math.abs(this._lastUsrCrds[2])===1/0&&Math.abs(Q.left_y)===1/0||((ee=new base_coords.A(constants.A.COORDS_BY_USER,[Q.left_x,Q.left_y],G.board))._t=J,G.points.push(ee),isNaN(Q.left_x)||isNaN(Q.left_y)||isNaN(Q.right_x)||isNaN(Q.right_y)||!(Math.abs(Q.left_x-Q.right_x)>math.A.eps||Math.abs(Q.left_y-Q.right_y)>math.A.eps)||((te=new base_coords.A(constants.A.COORDS_BY_SCREEN,_,G.board))._t=J,G.points.push(te)),(ne=new base_coords.A(constants.A.COORDS_BY_USER,[Q.right_x,Q.right_y],G.board))._t=J,G.points.push(ne),this._lastScrCrds=ne.copy("scrCoords"),this._lastUsrCrds=ne.copy("usrCoords"))},_insertPoint:function(G,_,J,Z,Q){var ee,te=!isNaN(this._lastScrCrds[1]+this._lastScrCrds[2]),ne=!isNaN(_[1]+_[2]),ie=G.board.canvasWidth,re=G.board.canvasHeight,oe=500;utils_type.A.exists(Q)?this._insertLimesPoint(G,_,J,Z,Q):(ne=ne&&_[1]>-500&&_[2]>-500&&_[1]<ie+oe&&_[2]<re+oe,(te||ne)&&(ne&&te&&Math.abs(_[1]-this._lastScrCrds[1])<.8&&Math.abs(_[2]-this._lastScrCrds[2])<.8||Math.abs(_[1])===1/0&&Math.abs(this._lastUsrCrds[1])===1/0||Math.abs(_[2])===1/0&&Math.abs(this._lastUsrCrds[2])===1/0||((ee=new base_coords.A(constants.A.COORDS_BY_SCREEN,_,G.board))._t=J,G.points.push(ee),this._lastScrCrds=ee.copy("scrCoords"),this._lastUsrCrds=ee.copy("usrCoords"))))},_triangleDists:function(G,_,J){var Z;return Z=[G[0]*_[0],.5*(G[1]+_[1]),.5*(G[2]+_[2])],[geometry.A.distance(G,_,3),geometry.A.distance(G,J,3),geometry.A.distance(J,_,3),geometry.A.distance(J,Z,3)]},_isUndefined:function(G,_,J,Z,Q){var ee,te,ne;if(!isNaN(_[1]+_[2])||!isNaN(Z[1]+Z[2]))return!1;for(ne=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],G.board,!1),te=0;te<20;++te)if(ee=J+Math.random()*(Q-J),ne.setCoordinates(constants.A.COORDS_BY_USER,[G.X(ee,!0),G.Y(ee,!0)],!1),!isNaN(ne.scrCoords[0]+ne.scrCoords[1]+ne.scrCoords[2]))return!1;return!0},_isOutside:function(G,_,J,Z,Q){var ee=500,te=Q.canvasWidth,ne=Q.canvasHeight;return G[1]<-500&&J[1]<-500||G[2]<-500&&J[2]<-500||G[1]>te+ee&&J[1]>te+ee||G[2]>ne+ee&&J[2]>ne+ee},_isOutsidePoint:function(G,_){var J=500,Z=_.canvasWidth,Q=_.canvasHeight;return G[1]<-500||G[2]<-500||G[1]>Z+J||G[2]>Q+J},_findStartPoint:function(G,_,J,Z,Q){return[_,J]},_getBorderPos:function(G,_,J,Z,Q,ee,te){var ne,ie,re,oe,se,ae;if(ie=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],G.board,!1),oe=0,isNaN(J[1]+J[2])&&!isNaN(Q[1]+Q[2]))ae=_,se=Z;else if(isNaN(te[1]+te[2])&&!isNaN(Q[1]+Q[2]))ae=ee,se=Z;else if(isNaN(Q[1]+Q[2])&&!isNaN(te[1]+te[2]))ae=Z,se=ee;else{if(!isNaN(Q[1]+Q[2])||isNaN(J[1]+J[2]))return!1;ae=Z,se=_}do ne=.5*(se+ae),ie.setCoordinates(constants.A.COORDS_BY_USER,[G.X(ne,!0),G.Y(ne,!0)],!1),re=ie.usrCoords,isNaN(re[1]+re[2])?ae=ne:se=ne,++oe;while(oe<30&&Math.abs(se-ae)>math.A.eps);return ne},_getCuspPos:function(G,_,J){var Z=[G.X(_,!0),G.Y(_,!0)],Q=[G.X(J,!0),G.Y(J,!0)];return numerics.A.fminbr(function(ee){var te=[G.X(ee,!0),G.Y(ee,!0)];return-(math.A.hypot(Z[0]-te[0],Z[1]-te[1])+math.A.hypot(Q[0]-te[0],Q[1]-te[1]))},[_,J],G)},_getJumpPos:function(G,_,J){return numerics.A.fminbr(function(Z){var Q=math.A.eps*math.A.eps,ee=[G.X(Z,!0),G.Y(Z,!0)],te=[G.X(Z+Q,!0),G.Y(Z+Q,!0)];return-Math.abs((te[1]-ee[1])/(te[0]-ee[0]))},[_,J],G)},_getLimits:function(G,_){var J,Z,Q,ee,te,ne=2/(G.maxX()-G.minX());return Z=(J=extrapolate.limit(_,-ne,G.X))[0],J[1]==="infinite"&&(Z=Math.sign(Z)*(1/0)),ee=(J=extrapolate.limit(_,-ne,G.Y))[0],J[1]==="infinite"&&(ee=Math.sign(ee)*(1/0)),Q=(J=extrapolate.limit(_,ne,G.X))[0],J[1]==="infinite"&&(Q=Math.sign(Q)*(1/0)),te=(J=extrapolate.limit(_,ne,G.Y))[0],J[1]==="infinite"&&(te=Math.sign(te)*(1/0)),{left_x:Z,left_y:ee,right_x:Q,right_y:te,t:_}},_getLimes:function(G,_,J,Z,Q,ee,te,ne,ie){var re;return ne==="border"?re=this._getBorderPos(G,_,J,Z,Q,ee,te):ne==="cusp"?re=this._getCuspPos(G,_,ee):ne==="jump"&&(re=this._getJumpPos(G,_,ee)),this._getLimits(G,re)},_plotNonRecursive:function(G,_,J,Z,Q,ee){var te,ne,ie,re,oe,se,ae,le,ue,de,pe,fe=null,_e=!1,ye="",be=[],Ae=0;for(le=G.board.origin.scrCoords,be[Ae++]=[_,J,Z,Q,ee,1/0];Ae>0;){if(_=(pe=be[--Ae])[0],J=pe[1],Z=pe[2],Q=pe[3],ue=pe[4],de=pe[5],_e=!1,ye="",fe=null,G.points.length>65536)return;ue<this.nanLevel&&(this._isUndefined(G,_,J,Z,Q)||this._isOutside(_,J,Z,Q,G.board))||(te=.5*(J+Q),se=G.X(te,!0),ae=G.Y(te,!0),ne=[1,le[1]+se*G.board.unitX,le[2]-ae*G.board.unitY],ie=this._triangleDists(_,Z,ne),re=isNaN(_[1]+_[2]),oe=isNaN(Z[1]+Z[2]),re&&!oe||!re&&oe?ye="border":ie[0]>.66*de||ie[0]<this.cusp_threshold*(ie[1]+ie[2])||ie[1]>5*ie[2]||ie[2]>5*ie[1]?ye="cusp":(ie[2]>this.jump_threshold*ie[0]||ie[1]>this.jump_threshold*ie[0]||ie[0]===1/0||ie[1]===1/0||ie[2]===1/0)&&(ye="jump"),_e=ye===""&&ue<this.smoothLevel&&ie[3]<this.smooth_threshold,ue<this.testLevel&&!_e&&(ye===""?_e=!0:fe=this._getLimes(G,J,_,te,ne,Q,Z,ye,ue)),fe!==null?(ne=[1,NaN,NaN],this._insertPoint(G,ne,te,ue,fe)):ue<=0||_e?this._insertPoint(G,ne,te,ue,null):(be[Ae++]=[ne,te,Z,Q,ue-1,ie[0]],be[Ae++]=[_,J,ne,te,ue-1,ie[0]]))}return this},updateParametricCurve_v3:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se=!1,ae=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],G.board,!1),le=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],G.board,!1);return ne=G.board.updateQuality===G.board.BOARD_QUALITY_LOW?G.evalVisProp("recursiondepthlow")||14:G.evalVisProp("recursiondepthhigh")||17,this.smoothLevel=7,this.nanLevel=ne-4,this.testLevel=4,this.cusp_threshold=.5,this.jump_threshold=.99,this.smooth_threshold=2,G.points=[],G.xterm==="x"?(ie=.3*((re=G.board.getBoundingBox())[2]-re[0]),Z=Math.max(_,re[0]-ie),Q=Math.min(J,re[2]+ie)):(Z=_,Q=J),ae.setCoordinates(constants.A.COORDS_BY_USER,[G.X(Z,se),G.Y(Z,se)],!1),se=!0,le.setCoordinates(constants.A.COORDS_BY_USER,[G.X(Q,se),G.Y(Q,se)],!1),oe=this._findStartPoint(G,ae.scrCoords,Z,le.scrCoords,Q),ae.setCoordinates(constants.A.COORDS_BY_SCREEN,oe[0],!1),Z=oe[1],oe=this._findStartPoint(G,le.scrCoords,Q,ae.scrCoords,Z),le.setCoordinates(constants.A.COORDS_BY_SCREEN,oe[0],!1),Q=oe[1],this._visibleArea=[Z,Q],ee=ae.copy("scrCoords"),te=le.copy("scrCoords"),ae._t=Z,G.points.push(ae),this._lastScrCrds=ae.copy("scrCoords"),this._lastUsrCrds=ae.copy("usrCoords"),this._plotNonRecursive(G,ee,Z,te,Q,ne),le._t=Q,G.points.push(le),G.numberPoints=G.points.length,G},_criticalInterval:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe=!1,se=-1/0,ae=!1,le=!1,ue=0,de=[],pe=[],fe=[];for(re=statistics.A.abs(G),(te=statistics.A.median(re))<1e-7?(te=1e-7,ae=!0):te*=this.criticalThreshold,Z=0;Z<_;Z++)re[Z]>te?(fe.push({i:Z,v:G[Z],group:ue}),se=Z,oe||(oe=!0)):oe&&Z>se+4&&(fe.length>0&&de.push(fe.slice(0)),fe=[],oe=!1,ue++);for(oe&&fe.length>1&&de.push(fe.slice(0)),ae&&de.length===0&&(le=!0),Q=0;Q<de.length;Q++)if(pe[Q]="point",!((ee=de[Q].length)<64)){for(ie=0,ne=Math.sign(de[Q][0].v),Z=1;Z<ee;Z++)Math.sign(de[Q][Z].v)!==ne&&(ie++,ne=Math.sign(de[Q][Z].v));6*ie>ee&&(pe[Q]="interval")}return{smooth:le,groups:de,types:pe}},Component:function(){this.left_isNaN=!1,this.right_isNaN=!1,this.left_t=null,this.right_t=null,this.t_values=[],this.x_values=[],this.y_values=[],this.len=0},findComponents:function(G,_,J,Z){var Q,ee,te,ne,ie,re,oe=[],se=0,ae=0,le=0,ue=!1,de=!1;for(te=(J-_)/Z,oe[se]=new this.Component,re=oe[se],Q=0,ee=_;Q<=Z;Q++,ee+=te)ne=G.X(ee,de),ie=G.Y(ee,de),isNaN(ne)||isNaN(ie)?++le>1&&ue&&(re.right_isNaN=!0,re.right_t=ee-te,re.len=ae,ue=!1,oe[++se]=new this.Component,re=oe[se],le=0):(ue||(ue=!0,ae=0,le>0&&(re.left_t=ee-te,re.left_isNaN=!0)),le=0,re.t_values[ae]=ee,re.x_values[ae]=ne,re.y_values[ae]=ie,ae++),Q===0&&(de=!0);return ue?re.len=ae:oe.pop(),oe},getPointType:function(G,_,J,Z,Q,ee,te){var ne=Q[0],ie=ee[0],re=Z.length,oe={idx:_,t:J,x:ne[_],y:ie[_],type:"other"};return _<5?(oe.type="borderleft",oe.idx=0,oe.t=Z[0],oe.x=ne[0],oe.y=ie[0],oe):(_>te-6&&(oe.type="borderright",oe.idx=re-1,oe.t=Z[re-1],oe.x=ne[re-1],oe.y=ie[re-1]),oe)},newtonApprox:function(G,_,J,Z,Q){var ee,te=0;for(ee=Z;ee>0;ee--)te=(te+Q[ee][G])*(_-(ee-1)*J)/ee;return te+Q[0][G]},thiele:function(G,_,J,Z,Q){var ee,te=0;for(ee=Q;ee>1;ee--)te=(G-J[Z+ee])/(_[ee][Z+1]-_[ee-2][Z+1]+te);return _[0][Z+1]+(G-J[Z+1])/(_[1][Z+1]+te)},differenceMethodExperiments:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se,ae,le=G.t_values,ue=G.x_values,de=G.y_values,pe=[],fe=[],_e=[],ye=[],be=[],Ae=[],Ce=[],Ee=[],Re=0,Te=[];for(te=le[1]-le[0],be.push([]),Ae.push([]),Ce.push([]),Ee.push([]),Q=de.length,J=0;J<Q;J++)be[0][J]=ue[J],Ae[0][J]=de[J],Ce[0][J]=ue[J],Ee[0][J]=de[J];for(be.push([]),Ae.push([]),Ce.push([]),Ee.push([]),ne=te,Q=de.length-1,J=0;J<Q;J++)pe[J]=ue[J+1]-ue[J],fe[J]=de[J+1]-de[J],_e[J]=pe[J],ye[J]=fe[J],be[1][J]=pe[J],Ae[1][J]=fe[J],Ce[1][J]=ne/pe[J],Ee[1][J]=ne/fe[J];for(Q--,ee=Math.min(8,de.length-1),Z=1;Z<ee;Z++){for(be.push([]),Ae.push([]),Ce.push([]),Ee.push([]),ne*=te,J=0;J<Q;J++)pe[J]=pe[J+1]-pe[J],fe[J]=fe[J+1]-fe[J],be[Z+1][J]=pe[J],Ae[Z+1][J]=fe[J],Ce[Z+1][J]=ne/(Ce[Z][J+1]-Ce[Z][J])+Ce[Z-1][J+1],Ee[Z+1][J]=ne/(Ee[Z][J+1]-Ee[Z][J])+Ee[Z-1][J+1];if((ae=this._criticalPoints(fe,Q,Z))===!1){console.log("Polynomial of degree",Z),ae=[];break}if(ae.length>0&&++Re>1&&Z%2==0)break;Q--}for(J=0;J<ae.length;J++){for(re=-1/0,oe=0;oe<ae[J].length;oe++)(se=Math.abs(ae[J][oe].v))>re&&(re=se,ie=oe);ie=Math.floor(ae[J][ie].i+Z/2),Te.push(this.getPointType(_,ie,le,ue,de,_e,ye,Q+1))}return[Te,be,Ae,Ce,Ee]},getCenterOfCriticalInterval:function(G,_,J){var Z,Q,ee,te,ne,ie=0,re=0,oe=J[1]-J[0],se=[];for(Z=-1/0,se=[],Q=0;Q<G.length;Q++)(te=Math.abs(G[Q].v))>Z?(se=[Q],Z=te,ee=Q):Z===te&&se.push(Q);if(se.length>0&&(ne=se.reduce(function(ae,le){return ae+le},0)/se.length,ee=Math.floor(ne),ne+=G[0].i),Z<1/0){for(Q=0;Q<G.length;Q++)ie+=Math.abs(G[Q].v)*G[Q].i,re+=Math.abs(G[Q].v);ne=ie/re}return ne+=_/2,[G[ee].i+_/2,ne,J[Math.floor(ne)]+oe*(ne-Math.floor(ne))]},differenceMethod:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se,ae=G.t_values,le=G.x_values,ue=G.y_values,de=[],pe=[],fe=0,_e=-1,ye=-1,be=[],Ae=[];for(Q=ue.length,de.push(new Float64Array(le)),pe.push(new Float64Array(ue)),Q--,ee=Math.min(12,Q),Z=0;Z<ee&&(de.push(new Float64Array(Q)),pe.push(new Float64Array(Q)),de[Z+1]=de[Z].map(function(Ce,Ee,Re){return Re[Ee+1]-Ce}),pe[Z+1]=pe[Z].map(function(Ce,Ee,Re){return Re[Ee+1]-Ce}),(re=this._criticalInterval(pe[Z+1],Q,Z)).smooth===!0&&(ye=Z,be=[]),ie=this._criticalInterval(de[Z+1],Q,Z),_e===-1&&ie.smooth===!0&&(_e=Z),!(ye>=0));Z++){if(re.groups.length>0&&++fe>2&&(Z+1)%2==0){be=re.groups,se=re.types;break}Q--}for(J=0;J<be.length;J++)se[J]!=="interval"&&(ne=this.getCenterOfCriticalInterval(be[J],Z+1,ae),re[0],te=Math.floor(ne[1]),oe=ne[2],Ae.push(this.getPointType(_,te,oe,ae,de,pe,Q+1)));return[Ae,de,pe,_e,ye]},_insertPoint_v4:function(G,_,J,Z){var Q,ee,te,ne=null;G.points.length>0&&(ne=G.points[G.points.length-1].scrCoords),Q=new base_coords.A(constants.A.COORDS_BY_USER,_,G.board),ne!==null&&(ee=Q.scrCoords[1]-ne[1])*ee+(te=Q.scrCoords[2]-ne[2])*te<.8*.8||(Q._t=J,G.points.push(Q))},getInterval:function(G,_,J){var Z,Q;return ia.A.disable(),Z=ia.A.Interval(_,J),G.board.mathLib=ia.A,G.board.mathLibJXG=ia.A,Q=G.Y(Z,!0),G.board.mathLib=Math,G.board.mathLibJXG=jxg.A.Math,Q},sign:function(G){return G<0?-1:G>0?1:0},handleBorder:function(G,_,J,Z,Q){var ee,te,ne,ie,re,oe,se,ae,le,ue,de,pe,fe=J.idx;if(pe=_.t_values[1]-_.t_values[0],J.type==="borderleft"?ne=(te=ee=_.left_isNaN?_.left_t:J.t-pe)+pe:J.type==="borderright"?te=(ne=ee=_.right_isNaN?_.right_t:J.t+pe)-pe:console.log("No bordercase!!!"),(ue=this.findComponents(G,te,ne,32)).length!==0){for(J.type==="borderleft"&&(te=ue[0].left_t,ne=ue[0].t_values[0],pe=ue[0].t_values[1]-ue[0].t_values[0],ee=te=te===null?ne-pe:te,ie=this.getInterval(G,te,ne),utils_type.A.isObject(ie)&&(se=ie.lo,ae=ie.hi,re=G.X(ee,!0),oe=Q[1][fe]<0?ae:se,this._insertPoint_v4(G,[1,re,oe],ee))),de=ue[0].t_values.length,le=0;le<de;le++)ee=ue[0].t_values[le],re=ue[0].x_values[le],oe=ue[0].y_values[le],this._insertPoint_v4(G,[1,re,oe],ee);J.type==="borderright"&&(te=ue[0].t_values[de-1],ne=ue[0].right_t,pe=ue[0].t_values[1]-ue[0].t_values[0],ee=ne=ne===null?te+pe:ne,ie=this.getInterval(G,te,ne),utils_type.A.isObject(ie)&&(se=ie.lo,ae=ie.hi,re=G.X(ee,!0),oe=Q[1][fe]>0?ae:se,this._insertPoint_v4(G,[1,re,oe],ee)))}},_seconditeration_v4:function(G,_,J,Z,Q){var ee,te,ne,ie,re,oe,se,ae,le,ue,de,pe,fe;for(te=_.t_values[J.idx-2],ne=_.t_values[J.idx+2],re=this.findComponents(G,te,ne,64),se=0;se<re.length;se++){for(oe=re[se],ae=(ie=this.differenceMethod(oe,G))[0],ue=ie[1],de=ie[2],pe=0,le=0;le<=ae.length;le++){for(fe=le===ae.length?oe.len:ae[le].idx,ee=pe;ee<fe;ee++)isNaN(oe.x_values[ee])||isNaN(oe.y_values[ee])||this._insertPoint_v4(G,[1,oe.x_values[ee],oe.y_values[ee]],oe.t_values[ee]);le<ae.length&&(this.handleSingularity(G,oe,ae[le],ue,de),pe=ae[le].idx+1)}fe=oe.len,se<re.length-1&&this._insertPoint_v4(G,[1,NaN,NaN],oe.right_t)}return this},_recurse_v4:function(G,_,J,Z,Q,ee,te,ne){var ie,re,oe=.5*(_+J),se=G.X(oe,!0),ae=G.Y(oe,!0);ne!==0?(ie=(se-Z)*G.board.unitX,re=(ae-Q)*G.board.unitY,math.A.hypot(ie,re)>2?this._recurse_v4(G,_,oe,Z,Q,se,ae,ne-1):this._insertPoint_v4(G,[1,se,ae],oe),ie=(se-ee)*G.board.unitX,re=(ae-te)*G.board.unitY,math.A.hypot(ie,re)>2?this._recurse_v4(G,oe,J,se,ae,ee,te,ne-1):this._insertPoint_v4(G,[1,se,ae],oe)):this._insertPoint_v4(G,[1,NaN,NaN],oe)},handleSingularity:function(G,_,J,Z,Q){var ee,te,ne,ie,re,oe,se,ae,le,ue,de,pe=J.idx,fe=100;ee=J.t,console.log("HandleSingularity at t =",ee),te=_.t_values[pe-5],ne=_.t_values[pe+5],ie=this.getInterval(G,te,ne),utils_type.A.isObject(ie)?(ae=ie.lo,le=ie.hi):Q[0][pe-1]<Q[0][pe+1]?(ae=Q[0][pe-1],le=Q[0][pe+1]):(ae=Q[0][pe+1],le=Q[0][pe-1]),se=G.X(ee,!0),ue=(Q[0][pe-3]-Q[0][pe-5])/(_.t_values[pe-3]-_.t_values[pe-5]),de=(Q[0][pe+3]-Q[0][pe+5])/(_.t_values[pe+3]-_.t_values[pe+5]),console.log(":::",ue,de),ue<-100?(this._insertPoint_v4(G,[1,se,ae],ee,!0),de<=fe&&this._insertPoint_v4(G,[1,NaN,NaN],ee)):ue>fe?(this._insertPoint_v4(G,[1,se,le],ee),de>=-100&&this._insertPoint_v4(G,[1,NaN,NaN],ee)):(ae===-1/0&&(this._insertPoint_v4(G,[1,se,ae],ee,!0),this._insertPoint_v4(G,[1,NaN,NaN],ee)),le===1/0&&(this._insertPoint_v4(G,[1,NaN,NaN],ee),this._insertPoint_v4(G,[1,se,le],ee,!0)),J.t<_.t_values[pe]?(re=pe-1,oe=pe):(re=pe,oe=pe+1),te=_.t_values[re],ne=_.t_values[oe],this._recurse_v4(G,te,ne,Z[0][re],Q[0][re],Z[0][oe],Q[0][oe],10)),de<-100?this._insertPoint_v4(G,[1,se,le],ee):de>fe&&this._insertPoint_v4(G,[1,se,ae],ee)},steps:1021,criticalThreshold:1e3,plot_v4:function(G,_,J,Z){var Q,ee,te,ne,ie,re,oe,se,ae,le,ue,de,pe,fe,_e,ye=(J-_)/Z,be=function(Ee){return G.Y(Ee,!0)},Ae=function(Ee){return-G.Y(Ee,!0)},Ce=.5*ye;for(te=this.findComponents(G,_,J,Z),ne=0;ne<te.length;ne++){for(ie=te[ne],re=(ae=this.differenceMethod(ie,G))[0],le=ae[1],ue=ae[2],re.length!==0&&re[0].type==="borderleft"||re.unshift({idx:0,t:ie.t_values[0],x:ie.x_values[0],y:ie.y_values[0],type:"borderleft"}),re[re.length-1].type!=="borderright"&&(ee=ie.t_values.length,re.push({idx:ee-1,t:ie.t_values[ee-1],x:ie.x_values[ee-1],y:ie.y_values[ee-1],type:"borderright"})),se=0,oe=0;oe<=re.length;oe++){for(ee=oe===re.length?ie.len:re[oe].idx-1,Q=se;Q<ee-2;Q++)this._insertPoint_v4(G,[1,ie.x_values[Q],ie.y_values[Q]],ie.t_values[Q]),Q>=se+3&&Q<ee-3&&ue.length>3&&Math.abs(ue[2][Q])>.2*Math.abs(ue[0][Q])&&(de=ie.t_values[Q],Ce=.25*ye,_e=this.getInterval(G,de,de+ye),utils_type.A.isObject(_e)?ue[2][Q]>0?this._insertPoint_v4(G,[1,de+Ce,_e.lo],de+Ce):this._insertPoint_v4(G,[1,de+ye-Ce,_e.hi],de+ye-Ce):(pe=numerics.A.fminbr(be,[de,de+ye]))<(fe=numerics.A.fminbr(Ae,[de,de+ye]))?(this._insertPoint_v4(G,[1,G.X(pe,!0),G.Y(pe,!0)],pe),this._insertPoint_v4(G,[1,G.X(fe,!0),G.Y(fe,!0)],fe)):(this._insertPoint_v4(G,[1,G.X(fe,!0),G.Y(fe,!0)],fe),this._insertPoint_v4(G,[1,G.X(pe,!0),G.Y(pe,!0)],pe)));oe<re.length&&(Q=re[oe].idx,re[oe].type==="borderleft"||re[oe].type==="borderright"?this.handleBorder(G,ie,re[oe],le,ue):this._seconditeration_v4(G,ie,re[oe],le,ue),se=re[oe].idx+1+1)}ee=ie.len,ne<te.length-1&&this._insertPoint_v4(G,[1,NaN,NaN],ie.right_t)}},updateParametricCurve_v4:function(G,_,J){var Z,Q,ee,te;G.xterm==="x"?(ee=.3*((te=G.board.getBoundingBox())[2]-te[0]),Z=Math.max(_,te[0]-ee),Q=Math.min(J,te[2]+ee)):(Z=_,Q=J),G.points=[],this.plot_v4(G,Z,Q,this.steps),G.numberPoints=G.points.length},updateParametricCurve:function(G,_,J){return this.updateParametricCurve_v2(G,_,J)}};var plot=math.A.Plot;math.A.ImplicitPlot=function(G,_,J,Z,Q){var ee={resolution_out:5,resolution_in:5,max_steps:1024,alpha_0:.05,tol_u0:math.A.eps,tol_newton:1e-7,tol_cusp:.05,tol_progress:1e-4,qdt_box:.2,kappa_0:.2,delta_0:.05,h_initial:.1,h_critical:.001,h_max:1,loop_dist:.09,loop_dir:.99,loop_detection:!0,unitX:10,unitY:10};this.config=utils_type.A.merge(ee,_),this.f=J,this.dfx=null,this.dfy=null,utils_type.A.isFunction(Z)?this.dfx=Z:this.dfx=function(te,ne){var ie=math.A.eps*math.A.eps;return .5*(this.f(te+ie,ne)-this.f(te-ie,ne))/ie},utils_type.A.isFunction(Q)?this.dfy=Q:this.dfy=function(te,ne){var ie=math.A.eps*math.A.eps;return .5*(this.f(te,ne+ie)-this.f(te,ne-ie))/ie},this.bbox=G,this.qdt=new bqdt(20,5,G),this.components=[]},utils_type.A.extend(math.A.ImplicitPlot.prototype,{plot:function(){var G,_,J,Z,Q,ee,te,ne=[],ie=[],re=[],oe=0,se=this,ae=function(pe){return se.f(G,pe)},le=function(pe){return-se.f(G,pe)},ue=function(pe){return se.f(pe,_)},de=function(pe){return-se.f(pe,_)};for(J=Math.min(this.bbox[0],this.bbox[2])-math.A.eps,Z=Math.max(this.bbox[0],this.bbox[2]),Q=Math.min(this.bbox[1],this.bbox[3])+math.A.eps,ee=Math.max(this.bbox[1],this.bbox[3]),te=this.config.resolution_out/this.config.unitX,te*=1+math.A.eps,G=J;G<Z;G+=te)(re=this.searchLine(ae,le,G,[Q,ee],"vertical",oe,ne,ie,20))!==!1&&(ne=re[0],ie=re[1],oe=re[2]);for(te=this.config.resolution_out/this.config.unitY,te*=1+math.A.eps,_=Q;_<ee;_+=te)(re=this.searchLine(ue,de,_,[J,Z],"horizontal",oe,ne,ie,20))!==!1&&(ne=re[0],ie=re[1],oe=re[2]);return[ne,ie,oe]},searchLine:function(G,_,J,Z,Q,ee,te,ne,ie){var re,oe,se,ae,le,ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee=this.config.tol_u0,Re=Z[0],Te=Z[1];if(le=G(re=numerics.A.fminbr(G,[Re,Te])),ue=G(oe=numerics.A.fminbr(_,[Re,Te])),le<Ee&&ue>-Ee){if(de=re,re=Math.min(de,oe),oe=Math.max(de,oe),ae=G(se=numerics.A.fzero(G,[re,oe])),Math.abs(ae)>Math.max((ue-le)*math.A.eps,.001))return!1;if(Q==="vertical"?(fe=[1,J,se],Ce=this.config.resolution_in/this.config.unitY):(fe=[1,se,J],Ce=this.config.resolution_in/this.config.unitX),Ce*=1+math.A.eps,!this.curveContainsPoint(fe,te,ne,2*Ce,this.config.qdt_box)){if((be=this.traceComponent(fe,1))[0].length>0){for(ee>0&&(te.push(NaN),ne.push(NaN)),Ae=te.length,ye=be[0].length,_e=1;_e<ye;_e++)this.qdt.insertItem({xlb:Math.min(be[0][_e-1],be[0][_e]),xub:Math.max(be[0][_e-1],be[0][_e]),ylb:Math.min(be[1][_e-1],be[1][_e]),yub:Math.max(be[1][_e-1],be[1][_e]),idx1:Ae+_e-1,idx2:Ae+_e,comp:ee});ee++,utils_type.A.concat(te,be[0]),utils_type.A.concat(ne,be[1])}}return(pe=se-.01*Ce)-Re>Ce&&ie>0&&(be=this.searchLine(G,_,J,[Re,pe],Q,ee,te,ne,ie-1))!==!1&&(te=be[0],ne=be[1],ee=be[2]),Te-(pe=se+.01*Ce)>Ce&&ie>0&&(be=this.searchLine(G,_,J,[pe,Te],Q,ee,te,ne,ie-1))!==!1&&(te=be[0],ne=be[1],ee=be[2]),[te,ne,ee]}return!1},curveContainsPoint:function(G,_,J,Z,Q){var ee,te,ne,ie=G[1],re=G[2];for(te=(ne=this.qdt.find([ie-Q,re+Q,ie+Q,re-Q])).length,ee=0;ee<te;ee++)if(geometry.A.distPointSegment(G,[1,_[ne[ee].idx1],J[ne[ee].idx1]],[1,_[ne[ee].idx2],J[ne[ee].idx2]])<Z)return!0;return!1},traceComponent:function(G){var _=[],J=[],Z=[];return(Z=this.tracing(G,1)).length===0||(_=Z[0],J=Z[1]),Z[2]||(Z=this.tracing(G,-1)).length===0||(_=Z[0].reverse().concat(_.slice(1)),J=Z[1].reverse().concat(J.slice(1))),_.length>0&&_.length<6&&(_.push(_[_.length-1]),J.push(J[J.length-1])),[_,J]},tracing:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue,de,pe,fe,_e,ye,be,Ae,Ce=[],Ee=[],Re=[],Te=0,Me=0,Ne=!1,Le=!1,Ie=!1,Ge=this.config.kappa_0,He=this.config.delta_0,Be=this.config.alpha_0,ze=this.config.h_initial,Fe=this.config.max_steps,$e=_,Xe=[],je=[],qe=[];if(Ce=G.slice(1),Xe.push(Ce[0]),je.push(Ce[1]),(Q=this.tangent(Ce))===!1)return[];this.dfx(Ce[0],Ce[1]),this.dfy(Ce[0],Ce[1]);do{if((Q=this.tangent(Ce))===!1){Ce=Ee.slice(),Xe.push(Ce[0]),je.push(Ce[1]);break}if(Xe.length===1)te=Q.slice();else if(Xe.length===2)qe.push(Xe.length-1);else if(Le&&Xe.length>2&&!Ie){if(geometry.A.distPointSegment([1,Ce[0],Ce[1]],[1,Xe[0],je[0]],[1,Xe[1],je[1]])<this.config.loop_dist*ze&&math.A.innerProduct(Q,te,2)>this.config.loop_dir){Ce=G.slice(1),Xe.push(Ce[0]),je.push(Ce[1]),Ne=!0;break}if(this.config.loop_detection){for(_e=Xe.length-1,ye=Math.floor(math.A.log2(_e)),be=0;be<=ye&&!(geometry.A.distPointSegment([1,Ce[0],Ce[1]],[1,Xe[qe[be]-1],je[qe[be]-1]],[1,Xe[qe[be]],je[qe[be]]])<this.config.loop_dist*ze&&(ee=this.tangent([Xe[qe[be]],je[qe[be]]]),math.A.innerProduct(Q,ee,2)>this.config.loop_dir));be++);if(be<=ye){Ne=!0;break}for(ye=1,Ae=0,be=0;be<100&&(_e+1)%ye===0;be++)ye*=2,Ae++;qe[Ae]=_e}}Ee[0]=Ce[0]+ze*$e*Q[0],Ee[1]=Ce[1]+ze*$e*Q[1],Me=0;do le=(ie=[this.dfx(Ee[0],Ee[1]),this.dfy(Ee[0],Ee[1])])[0]*ie[0]+ie[1]*ie[1],re=this.f(Ee[0],Ee[1])/le,Re[0]=Ee[0]-ie[0]*re,Re[1]=Ee[1]-ie[1]*re,Me===0?se=Math.abs(re)*Math.sqrt(le):Me===1&&(ae=Math.abs(re)*Math.sqrt(le)),Ee[0]=Re[0],Ee[1]=Re[1],Me++;while(Me<20&&Math.abs(this.f(Ee[0],Ee[1]))>this.config.tol_newton);if(de=se,ue=Me>1?ae/se:0,ee=this.tangent(Ee),oe=math.A.innerProduct(Q,ee,2),oe=Math.max(-1,Math.min(1,oe)),pe=Math.acos(oe),Ie=!1,geometry.A.distance(Ce,Ee,2)<this.config.tol_progress){Ce=Ee.slice(),Xe.push(Ce[0]),je.push(Ce[1]);break}if(oe<0&&!(ze>this.config.h_critical)){if(Ie=!0,!this.isBifurcation(Ce,this.config.tol_cusp)){Ce=Ee.slice(),Xe.push(Ce[0]),je.push(Ce[1]);break}$e*=-1,pe=0}if(!Ie&&(fe=Math.max(Math.sqrt(ue/Ge),Math.sqrt(de/He),pe/Be),isNaN(fe)&&(fe=1),ze/=fe=Math.max(Math.min(fe,2),.5),ze=Math.min(this.config.h_max,ze),fe>=2)){if(++Te>=3*Fe)break;Le=!1}else Ce=Ee.slice(),Xe.push(Ce[0]),je.push(Ce[1]),Le=!0,Te++}while(Te<Fe&&Ce[0]>=this.bbox[0]&&Ce[1]<=this.bbox[1]&&Ce[0]<=this.bbox[2]&&Ce[1]>=this.bbox[3]);return J=[Xe[(Z=Xe.length)-2],je[Z-2]],Ce[0]<this.bbox[0]&&(Ce[0]!==J[0]&&(ne=(this.bbox[0]-J[0])/(Ce[0]-J[0]),Ce[1]!==J[1]&&(Ce[1]=J[1]+ne*(Ce[1]-J[1]))),Ce[0]=this.bbox[0]),Ce[0]>this.bbox[2]&&(Ce[0]!==J[0]&&(ne=(this.bbox[2]-J[0])/(Ce[0]-J[0]),Ce[1]!==J[1]&&(Ce[1]=J[1]+ne*(Ce[1]-J[1]))),Ce[0]=this.bbox[2]),Ce[1]<this.bbox[3]&&(Ce[1]!==J[1]&&(ne=(this.bbox[3]-J[1])/(Ce[1]-J[1]),Ce[0]!==J[0]&&(Ce[0]=J[0]+ne*(Ce[0]-J[0]))),Ce[1]=this.bbox[3]),Ce[1]>this.bbox[1]&&(Ce[1]!==J[1]&&(ne=(this.bbox[1]-J[1])/(Ce[1]-J[1]),Ce[0]!==J[0]&&(Ce[0]=J[0]+ne*(Ce[0]-J[0]))),Ce[1]=this.bbox[1]),Xe[Z-1]=Ce[0],je[Z-1]=Ce[1],[Xe,je,Ne]},isBifurcation:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se,ae=math.A.eps*math.A.eps*100;return J=G[0],Z=G[1],Q=.5*(this.dfx(J+ae,Z)-this.dfx(J-ae,Z))/ae,ee=.5*(this.dfx(J,Z+ae)-this.dfx(J,Z-ae))/ae,te=.5*(this.dfy(J+ae,Z)-this.dfy(J-ae,Z))/ae,se=(ie=Q+(ne=.5*(this.dfy(J,Z+ae)-this.dfy(J,Z-ae))/ae))*ie-4*(Q*ne-ee*te),re=.5*(ie+Math.sqrt(se)),oe=.5*(ie-Math.sqrt(se)),Math.abs(re)>_&&Math.abs(oe)>_},handleCriticalPoint:function(G,_,J,Z){var Q,ee=Math.atan2(Z*_[1],Z*_[0]);return Q=numerics.A.root(function(te){var ne=G[0]+J*Math.cos(te),ie=G[1]+J*Math.sin(te);return this.f(ne,ie)},ee),[G[0]+J*Math.cos(Q),G[1]+J*Math.sin(Q)]},updateA:function(G,_,J){var Z,Q,ee=[J[0]-_[0],J[1]-_[1]],te=this.f(J[0],J[1])-this.f(_[0],_[1]);return Q=ee[0]*ee[0]+ee[1]*ee[1],Z=te-(G[0]*ee[0]+G[1]*ee[1]),Z/=Q,G[0]+=Z*ee[0],G[1]+=Z*ee[1],G},tangent_A:function(G){var _=[-G[1],G[0]],J=math.A.norm(_,2);return math.A.eps,[_[0]/J,_[1]/J]},tangent:function(G){var _=[-this.dfy(G[0],G[1]),this.dfx(G[0],G[1])],J=math.A.norm(_,2);return!(J<math.A.eps*math.A.eps)&&[_[0]/J,_[1]/J]}});var implicitplot=math.A.ImplicitPlot;math.A.Metapost={MP_ENDPOINT:0,MP_EXPLICIT:1,MP_GIVEN:2,MP_CURL:3,MP_OPEN:4,MP_END_CYCLE:5,UNITY:1,FRACTION_ONE:1,FRACTION_THREE:3,ONE_EIGHTY_DEG:Math.PI,THREE_SIXTY_DEG:2*Math.PI,EPS_SQ:1e-5*1e-5,make_choices:function(G){var _,J,Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue,de;ne=G[0];do{if(!ne)break;te=ne.next,ne.rtype>this.MP_EXPLICIT&&(ne.x-te.x)*(ne.x-te.x)+(ne.y-te.y)*(ne.y-te.y)<this.EPS_SQ&&(ne.rtype=this.MP_EXPLICIT,ne.ltype===this.MP_OPEN&&(ne.ltype=this.MP_CURL,ne.set_left_curl(this.UNITY)),te.ltype=this.MP_EXPLICIT,te.rtype===this.MP_OPEN&&(te.rtype=this.MP_CURL,te.set_right_curl(this.UNITY)),ne.rx=ne.x,te.lx=ne.x,ne.ry=ne.y,te.ly=ne.y),ne=te}while(ne!==G[0]);for(J=G[0];J.ltype===this.MP_OPEN&&J.rtype===this.MP_OPEN;)if((J=J.next)===G[0]){J.ltype=this.MP_END_CYCLE;break}for(ne=J;ne;){if(te=ne.next,ne.rtype>=this.MP_GIVEN){for(;te.ltype===this.MP_OPEN&&te.rtype===this.MP_OPEN;)te=te.next;for(Z=0,ie=ne,ee=G.length,ae=[],le=[],ue=[],de=[null];oe=ie.next,ae.push(oe.x-ie.x),le.push(oe.y-ie.y),ue.push(this.mp_pyth_add(ae[Z],le[Z])),Z>0&&(se=le[Z-1]/ue[Z-1],re=ae[Z-1]/ue[Z-1],de.push(Math.atan2(le[Z]*re-ae[Z]*se,ae[Z]*re+le[Z]*se))),Z++,(ie=oe)===te&&(ee=Z),!(Z>=ee&&ie.ltype!==this.MP_END_CYCLE););Z===ee?de.push(0):de.push(de[1]),te.ltype===this.MP_OPEN&&((Q=te.rx-te.x)*Q+(_=te.ry-te.y)*_<this.EPS_SQ?(te.ltype=this.MP_CURL,te.set_left_curl(this.UNITY)):(te.ltype=this.MP_GIVEN,te.set_left_given(Math.atan2(_,Q)))),ne.rtype===this.MP_OPEN&&ne.ltype===this.MP_EXPLICIT&&((Q=ne.x-ne.lx)*Q+(_=ne.y-ne.ly)*_<this.EPS_SQ?(ne.rtype=this.MP_CURL,ne.set_right_curl(this.UNITY)):(ne.rtype=this.MP_GIVEN,ne.set_right_given(Math.atan2(_,Q)))),this.mp_solve_choices(ne,te,ee,ae,le,ue,de)}else ne.rtype===this.MP_ENDPOINT&&(ne.rx=ne.x,ne.ry=ne.y,te.lx=te.x,te.ly=te.y);if((ne=te)===J)break}},mp_solve_choices:function(G,_,J,Z,Q,ee,te){var ne,ie,re,oe,se,ae,le,ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te,Me,Ne,Le,Ie,Ge,He,Be;for(se=ee.length+1,pe=new Array(se),de=new Array(se),re=new Array(se),Ae=new Array(se),He=0;He<se;He++)Ae[He]=re[He]=de[He]=pe[He]=0;for(le=0,ue=G,_e=0;;){if(ye=ue.next,le===0)if(ue.rtype===this.MP_GIVEN){if(ye.ltype===this.MP_GIVEN)return ne=Math.atan2(Q[0],Z[0]),Me=(Te=this.mp_n_sin_cos(G.right_given()-ne))[0],Ne=Te[1],Ie=(Le=this.mp_n_sin_cos(_.left_given()-ne))[0],Ge=Le[1],void this.mp_set_controls(G,_,Z[0],Q[0],Ne,Me,-Ge,Ie);re[0]=ue.right_given()-Math.atan2(Q[0],Z[0]),re[0]=this.reduce_angle(re[0]),pe[0]=0,de[0]=0}else if(ue.rtype===this.MP_CURL){if(ye.ltype===this.MP_CURL)return G.rtype=this.MP_EXPLICIT,_.ltype=this.MP_EXPLICIT,fe=Math.abs(_.left_tension()),Ce=Math.abs(G.right_tension()),be=this.UNITY/(3*Ce),G.rx=G.x+Z[0]*be,G.ry=G.y+Q[0]*be,be=this.UNITY/(3*fe),_.lx=_.x-Z[0]*be,void(_.ly=_.y-Q[0]*be);Re=ue.right_curl(),fe=Math.abs(ye.left_tension()),Ce=Math.abs(ue.right_tension()),pe[0]=this.mp_curl_ratio(Re,Ce,fe),re[0]=-te[1]*pe[0],de[0]=0}else ue.rtype===this.MP_OPEN&&(pe[0]=0,re[0]=0,de[0]=this.FRACTION_ONE);else if(ue.ltype===this.MP_END_CYCLE||ue.ltype===this.MP_OPEN){if(ne=this.UNITY/(3*Math.abs(_e.right_tension())-this.UNITY),Ee=ee[le]*(this.FRACTION_THREE-this.UNITY/Math.abs(_e.right_tension())),oe=this.UNITY/(3*Math.abs(ye.left_tension())-this.UNITY),ae=ee[le-1]*(this.FRACTION_THREE-this.UNITY/Math.abs(ye.left_tension())),Ee*=Re=this.FRACTION_ONE-pe[le-1]*ne,(fe=Math.abs(ue.left_tension()))<(Ce=Math.abs(ue.right_tension()))?Ee*=Math.pow(fe/Ce,2):fe>Ce&&(ae*=Math.pow(Ce/fe,2)),be=ae/(ae+Ee),pe[le]=be*oe,ie=-te[le+1]*pe[le],_e.rtype===this.MP_CURL?(de[le]=0,re[le]=ie-te[1]*(this.FRACTION_ONE-be)):(be=(this.FRACTION_ONE-be)/Re,ie-=te[le]*be,be*=ne,re[le]=ie-re[le-1]*be,de[le]=-de[le-1]*be),ue.ltype===this.MP_END_CYCLE){for(ne=0,oe=this.FRACTION_ONE;(le-=1)===0&&(le=J),ne=re[le]-ne*pe[le],oe=de[le]-oe*pe[le],le!==J;);for(ne/=this.FRACTION_ONE-oe,Ae[J]=ne,re[0]=ne,Be=1;Be<J;Be++)re[Be]=re[Be]+ne*de[Be];break}}else{if(ue.ltype===this.MP_CURL){Re=ue.left_curl(),fe=Math.abs(ue.left_tension()),Ce=Math.abs(_e.right_tension()),be=this.mp_curl_ratio(Re,fe,Ce),Ae[J]=-re[J-1]*be/(this.FRACTION_ONE-be*pe[J-1]);break}if(ue.ltype===this.MP_GIVEN){Ae[J]=ue.left_given()-Math.atan2(Q[J-1],Z[J-1]),Ae[J]=this.reduce_angle(Ae[J]);break}}_e=ue,ue=ye,le+=1}for(le=J-1;le>-1;le--)Ae[le]=re[le]-Ae[le+1]*pe[le];for(ue=G,le=0;ye=ue.next,Me=(Te=this.mp_n_sin_cos(Ae[le]))[0],Ne=Te[1],Ie=(Le=this.mp_n_sin_cos(-te[le+1]-Ae[le+1]))[0],Ge=Le[1],this.mp_set_controls(ue,ye,Z[le],Q[le],Ne,Me,Ge,Ie),ue=ye,++le!==J;);},mp_n_sin_cos:function(G){return[Math.cos(G),Math.sin(G)]},mp_set_controls:function(G,_,J,Z,Q,ee,te,ne){var ie,re,oe,se,ae;oe=Math.abs(_.left_tension()),ie=Math.abs(G.right_tension()),ae=this.mp_velocity(Q,ee,te,ne,ie),re=this.mp_velocity(te,ne,Q,ee,oe),(G.right_tension()<0||_.left_tension()<0)&&(Q>=0&&te>=0||Q<=0&&te<=0)&&(se=Math.abs(Q)*ne+Math.abs(te)*ee)>0&&(se*=1.00024414062,G.right_tension()<0&&this.mp_ab_vs_cd(Math.abs(te),this.FRACTION_ONE,ae,se)<0&&(ae=Math.abs(te)/se),_.left_tension()<0&&this.mp_ab_vs_cd(Math.abs(Q),this.FRACTION_ONE,re,se)<0&&(re=Math.abs(Q)/se)),G.rx=G.x+(J*ee-Z*Q)*ae,G.ry=G.y+(Z*ee+J*Q)*ae,_.lx=_.x-(J*ne+Z*te)*re,_.ly=_.y-(Z*ne-J*te)*re,G.rtype=this.MP_EXPLICIT,_.ltype=this.MP_EXPLICIT},mp_pyth_add:function(G,_){return math.A.hypot(G,_)},mp_curl_ratio:function(G,_,J){var Z=1/_,Q=1/J;return Math.min(4,((3-Z)*Z*Z*G+Q*Q*Q)/(Z*Z*Z*G+(3-Q)*Q*Q))},mp_ab_vs_cd:function(G,_,J,Z){return G*_===J*Z?0:G*_>J*Z?1:-1},mp_velocity:function(G,_,J,Z,Q){return Math.min(4,(2+Math.sqrt(2)*(G-J/16)*(J-G/16)*(_-Z))/(1.5*Q*(2+(Math.sqrt(5)-1)*_+(3-Math.sqrt(5))*Z)))},reduce_angle:function(G){return Math.abs(G)>this.ONE_EIGHTY_DEG&&(G>0?G-=this.THREE_SIXTY_DEG:G+=this.THREE_SIXTY_DEG),G},makeknots:function(G,_){var J,Z,Q=[];for(Z=G.length,J=0;J<Z;J++)Q.push({x:G[J][0],y:G[J][1],ltype:this.MP_OPEN,rtype:this.MP_OPEN,lx:!1,rx:!1,ly:_,ry:_,left_curl:function(){return this.lx||0},right_curl:function(){return this.rx||0},left_tension:function(){return this.ly||1},right_tension:function(){return this.ry||1},set_right_curl:function(ee){this.rx=ee||0},set_left_curl:function(ee){this.lx=ee||0}});for(Z=Q.length,J=0;J<Z;J++)Q[J].next=Q[J+1]||Q[J],Q[J].set_right_given=Q[J].set_right_curl,Q[J].set_left_given=Q[J].set_left_curl,Q[J].right_given=Q[J].right_curl,Q[J].left_given=Q[J].left_curl;return Q[Z-1].next=Q[0],Q},curve:function(G,_){var J,Z,Q,ee,te,ne,ie=!1,re=[],oe=[];for(ee in te=1,(_=_||{tension:1,direction:{},curl:{},isClosed:!1}).hasOwnProperty("tension")&&(te=utils_type.A.evaluate(_.tension)),Z=(J=this.makeknots(G,te)).length,utils_type.A.exists(_.isClosed)&&utils_type.A.evaluate(_.isClosed)&&(ie=!0),ie||(J[0].ltype=this.MP_ENDPOINT,J[0].rtype=this.MP_CURL,J[Z-1].rtype=this.MP_ENDPOINT,J[Z-1].ltype=this.MP_CURL),_)if(_.hasOwnProperty(ee)){if(Q=parseInt(ee,10),isNaN(Q)||Q<0||Q>=Z)continue;ne=_[Q],utils_type.A.exists(ne.type)&&ne.type==="curl"&&(te=utils_type.A.evaluate(ne.curl),Q===0?(J[Q].rtype=this.MP_CURL,J[Q].set_right_curl(te)):Q===Z-1?(J[Q].ltype=this.MP_CURL,J[Q].set_left_curl(te)):(J[Q].ltype=this.MP_CURL,J[Q].rtype=this.MP_CURL,J[Q].lx=te,J[Q].rx=te)),utils_type.A.exists(ne.direction)&&(te=utils_type.A.evaluate(ne.direction),utils_type.A.isArray(te)?(te[0]!==!1&&(J[Q].lx=te[0]*Math.PI/180,J[Q].ltype=this.MP_GIVEN),te[1]!==!1&&(J[Q].rx=te[1]*Math.PI/180,J[Q].rtype=this.MP_GIVEN)):(J[Q].lx=te*Math.PI/180,J[Q].rx=te*Math.PI/180,J[Q].ltype=J[Q].rtype=this.MP_GIVEN)),utils_type.A.exists(ne.tension)&&(te=utils_type.A.evaluate(ne.tension),utils_type.A.isArray(te)?(te[0]!==!1&&(J[Q].ly=utils_type.A.evaluate(te[0])),te[1]!==!1&&(J[Q].ry=utils_type.A.evaluate(te[1]))):(J[Q].ly=te,J[Q].ry=te))}for(this.make_choices(J),Q=0;Q<Z-1;Q++)re.push(J[Q].x),re.push(J[Q].rx),re.push(J[Q+1].lx),oe.push(J[Q].y),oe.push(J[Q].ry),oe.push(J[Q+1].ly);return re.push(J[Z-1].x),oe.push(J[Z-1].y),ie&&(re.push(J[Z-1].rx),oe.push(J[Z-1].ry),re.push(J[0].lx),oe.push(J[0].ly),re.push(J[0].x),oe.push(J[0].y)),[re,oe]}};var metapost=math.A.Metapost;math.A.Clip={_isSeparator:function(G){return isNaN(G.coords.usrCoords[1])&&isNaN(G.coords.usrCoords[2])},makeDoublyLinkedList:function(G){var _,J=null,Z=[],Q=G.length;if(Q>0)for(_=0;_<Q;_++)this._isSeparator(G[_])?(G[_]._next=G[(_+1)%Q],G[_]._prev=G[(Q+_-1)%Q]):(J===null&&(J=_,Z.push(J)),this._isSeparator(G[(_+1)%Q])||_===Q-1?(G[_]._next=G[J],G[J]._prev=G[_],G[_]._end=!0,J=null):(G[_]._next=G[(_+1)%Q],G[J]._prev=G[_]),this._isSeparator(G[(Q+_-1)%Q])||(G[_]._prev=G[(Q+_-1)%Q]));return Z},Vertex:function(G,_,J,Z,Q,ee){this.pos=_,this.intersection=!0,this.coords=G,this.elementClass=constants.A.OBJECT_CLASS_POINT,this.data={alpha:J,path:Z,pathname:Q,done:!1,type:ee,idx:0},this.neighbour=null,this.entry_exit=!1},_addToList:function(G,_,J){var Z=G.length,Q=math.A.eps*math.A.eps;Z>0&&Math.abs(G[Z-1].coords.usrCoords[0]-_.usrCoords[0])<Q&&Math.abs(G[Z-1].coords.usrCoords[1]-_.usrCoords[1])<Q&&Math.abs(G[Z-1].coords.usrCoords[2]-_.usrCoords[2])<Q||G.push({pos:J,intersection:!1,coords:_,elementClass:constants.A.OBJECT_CLASS_POINT})},sortIntersections:function(G){var _,J,Z,Q,ee,te,ne=[],ie=G.length;for(_=0;_<ie;_++)if(G[_].sort(function(re,oe){return re.data.alpha>oe.data.alpha?1:-1}),G[_].length>0){for(ee=G[_].length-1,te=(Q=(Z=G[_][0]).data.path[Z.pos])._next,_===ie-1&&(Q._end=!1),Z.data.alpha===0&&Z.data.type==="T"?(Q.intersection=!0,Q.data=Z.data,Q.neighbour=Z.neighbour,Q.neighbour.neighbour=Q,Q.entry_exit=!1,G[_][0]=Q):(Z._prev=Q,Z._prev._next=Z),J=1;J<=ee;J++)(Z=G[_][J])._prev=G[_][J-1],Z._prev._next=Z;(Z=G[_][ee])._next=te,Z._next._prev=Z,_===ie-1&&(Z._end=!0),ne=ne.concat(G[_])}return ne},_inbetween:function(G,_,J){var Z,Q=math.A.eps*math.A.eps,ee=J[1]-_[1],te=J[2]-_[2],ne=G[1]-_[1],ie=G[2]-_[2];return ee===0&&te===0&&ne===0&&ie===0||(Z=Math.abs(ne)<Q&&Math.abs(ee)<Q?ie/te:ne/ee,Math.abs(Z)<Q&&(Z=0),Z)},_print_array:function(G){var _,J;for(_=0;_<G.length;_++)try{J="",G[_]._end&&(J=" end"),console.log(_,G[_].coords.usrCoords,G[_].data.type,"	","prev",G[_]._prev.coords.usrCoords,"next",G[_]._next.coords.usrCoords+J)}catch{console.log(_,G[_].coords.usrCoords)}},_print_list:function(G){for(var _,J=0;J<100&&(_=G.data?G.data.alpha:"-",console.log("	",G.coords.usrCoords,`
		is:`,G.intersection,"end:",G._end,_,`
		-:`,G._prev.coords.usrCoords,`
		+:`,G._next.coords.usrCoords,`
		n:`,G.intersection?G.neighbour.coords.usrCoords:"-"),!G._end);)G=G._next,J++},_noOverlap:function(G,_,J,Z){var Q,ee,te,ne,ie,re=Math.sqrt(math.A.eps),oe=!1;for(Q=0;Q<3;Q++)if(ee=Math.min(G[Q],_[Q]),te=Math.max(G[Q],_[Q]),ne=Math.min(J[Q],Z[Q]),ie=Math.max(J[Q],Z[Q]),te<ne-re||ee>ie+re){oe=!0;break}return oe},findIntersections:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue,de,pe=[],fe=100*math.A.eps,_e=G.length,ye=_.length,be=[],Ae=[],Ce=[],Ee=!1,Re=!1;for(Q=0;Q<ye;Q++)Ce.push([]);for(Z=0;Z<_e;Z++)if(Ae.push([]),this._isSeparator(G[Z])||this._isSeparator(G[(Z+1)%_e]))Ee=!0;else{if(Ee&&Z===_e-1)break;for(te=G[Z].coords.usrCoords,ne=G[(Z+1)%_e].coords.usrCoords,Q=0;Q<ye;Q++)if(this._isSeparator(_[Q])||this._isSeparator(_[(Q+1)%ye]))Re=!0;else{if(Re&&Q===ye-1)break;if(ie=_[Q].coords.usrCoords,re=_[(Q+1)%ye].coords.usrCoords,!this._noOverlap(te,ne,ie,re)&&(pe=geometry.A.meetSegmentSegment(te,ne,ie,re),oe=geometry.A.distance(te,ne,3),se=geometry.A.distance(ie,re,3),pe[1]*oe>-fe&&pe[1]<1-fe/oe&&pe[2]*se>-fe&&pe[2]<1-fe/se||pe[1]===1/0&&pe[2]===1/0&&math.A.norm(pe[0],3)<fe)){if(ee=new base_coords.A(constants.A.COORDS_BY_USER,pe[0],J),le="X",Math.abs(pe[1])*oe<fe||Math.abs(pe[2])*se<fe)le="T",Math.abs(pe[1])*oe<fe&&(pe[1]=0),Math.abs(pe[2])*se<fe&&(pe[2]=0),ee=pe[1]===0?new base_coords.A(constants.A.COORDS_BY_USER,te,J):new base_coords.A(constants.A.COORDS_BY_USER,ie,J);else if(pe[1]===1/0&&pe[2]===1/0&&math.A.norm(pe[0],3)<fe){(ae=this._inbetween(te,ie,re))>=0&&ae<1&&(le="T",ee=new base_coords.A(constants.A.COORDS_BY_USER,te,J),pe[1]=0,pe[2]=ae,ue=new this.Vertex(ee,Z,pe[1],G,"S",le),de=new this.Vertex(ee,Q,pe[2],_,"C",le),ue.neighbour=de,de.neighbour=ue,Ae[Z].push(ue),Ce[Q].push(de)),ae=this._inbetween(ie,te,ne),geometry.A.distance(te,ie,3)>fe&&ae>=0&&ae<1&&(le="T",ee=new base_coords.A(constants.A.COORDS_BY_USER,ie,J),pe[1]=ae,pe[2]=0,ue=new this.Vertex(ee,Z,pe[1],G,"S",le),de=new this.Vertex(ee,Q,pe[2],_,"C",le),ue.neighbour=de,de.neighbour=ue,Ae[Z].push(ue),Ce[Q].push(de));continue}ue=new this.Vertex(ee,Z,pe[1],G,"S",le),de=new this.Vertex(ee,Q,pe[2],_,"C",le),ue.neighbour=de,de.neighbour=ue,Ae[Z].push(ue),Ce[Q].push(de)}}}for(be=this.sortIntersections(Ae),Z=0;Z<be.length;Z++)be[Z].data.idx=Z,be[Z].neighbour.data.idx=Z;return[be,this.sortIntersections(Ce)]},_getPosition:function(G,_,J,Z){var Q=geometry.A.det3p(G,_,J),ee=geometry.A.det3p(G,J,Z);return geometry.A.det3p(_,J,Z)>=0?Q>=0&&ee>=0?"left":"right":Q>=0||ee>=0?"left":"right"},_classifyDegenerateIntersections:function(G){var _,J,Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue;for(re=geometry.A.det3p,ne=0,G._tours=0;;){if(G.intersection&&G.data.type==="T"&&(_=G._next.coords.usrCoords,J=G._prev.coords.usrCoords,geometry.A.distance(G.coords.usrCoords,_,3)<math.A.eps&&(_=G._next._next.coords.usrCoords),geometry.A.distance(G.coords.usrCoords,J,3)<math.A.eps&&(J=G._prev._prev.coords.usrCoords),Q=(ee=G.neighbour)._prev.coords.usrCoords,Z=ee._next.coords.usrCoords,geometry.A.distance(ee.coords.usrCoords,Z,3)<math.A.eps&&(Z=ee._next._next.coords.usrCoords),geometry.A.distance(ee.coords.usrCoords,Q,3)<math.A.eps&&(Q=ee._prev._prev.coords.usrCoords),se=re(G.coords.usrCoords,J,Q),ae=re(G.coords.usrCoords,_,Z),le=re(G.coords.usrCoords,J,Z),ue=re(G.coords.usrCoords,_,Q),se===0&&ae===0&&le===0&&ue===0&&(G.coords.usrCoords[1]*=1+Math.random()*math.A.eps,G.coords.usrCoords[2]*=1+Math.random()*math.A.eps,ee.coords.usrCoords[1]=G.coords.usrCoords[1],ee.coords.usrCoords[2]=G.coords.usrCoords[2],se=re(G.coords.usrCoords,J,Q),ae=re(G.coords.usrCoords,_,Z),le=re(G.coords.usrCoords,J,Z),ue=re(G.coords.usrCoords,_,Q)),oe=!1,se===0?geometry.A.affineRatio(G.coords.usrCoords,J,Q)<0&&(oe=!0):ae===0?geometry.A.affineRatio(G.coords.usrCoords,_,Z)<0&&(oe=!0):le===0?geometry.A.affineRatio(G.coords.usrCoords,J,Z)>0&&(oe=!0):ue===0&&geometry.A.affineRatio(G.coords.usrCoords,_,Q)>0&&(oe=!0),oe&&(ie=Q,Q=Z,Z=ie,ie=se,se=le,le=ie,ie=ae,ae=ue,ue=ie),utils_type.A.exists(G.delayedStatus)||(G.delayedStatus=[]),se===0&&ae===0?G.delayedStatus=["on","on"]:se===0?(te=this._getPosition(_,Q,ee.coords.usrCoords,Z),G.delayedStatus=["on",te]):ae===0?(te=this._getPosition(J,Q,ee.coords.usrCoords,Z),G.delayedStatus=[te,"on"]):G.delayedStatus.length===0&&(this._getPosition(J,Q,ee.coords.usrCoords,Z)!==this._getPosition(_,Q,ee.coords.usrCoords,Z)?G.data.type="X":G.data.type="B")),utils_type.A.exists(G._tours)&&G._tours++,G._tours>3||G._end||ne>1e3){ne>1e3&&console.log("Clipping: _classifyDegenerateIntersections exit"),utils_type.A.exists(G._tours)&&delete G._tours;break}G.intersection&&ne++,G=G._next}},_handleIntersectionChains:function(G){var _,J=0,Z="Null",Q=!1,ee=!1,te=!1;for(te;G.intersection===!0&&(G.data.type==="T"&&(G.delayedStatus[0]!=="on"&&G.delayedStatus[1]==="on"?(Q=!0,_=G,Z=G.delayedStatus[0]):Q&&G.delayedStatus[0]==="on"&&G.delayedStatus[1]==="on"?G.data.type="B":Q&&G.delayedStatus[0]==="on"&&G.delayedStatus[1]!=="on"&&(Q=!1,Z===G.delayedStatus[1]?(_.data.type="DB",G.data.type="DB"):(_.data.type="DX",G.data.type="DX"))),J++),G._end&&(ee=!0),!ee||Q;){if(J>1e3){console.log("Warning: _handleIntersectionChains: intersection chain reached maximum numbers of iterations");break}G=G._next}},_handleFullyDegenerateCase:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue,de,pe,fe=[G,_];for(ee=0;ee<2;ee++){for(ae=(Z=fe[ee]).length,oe=0,pe=!0;oe<ae;oe++)if(!Z[oe].intersection){pe=!1;break}if(pe)for(le=(Q=fe[(ee+1)%2]).length,oe=0;oe<ae;oe++){for(ne=Z[oe].coords.usrCoords,ie=Z[oe]._next.coords.usrCoords,te=[.5*(ne[0]+ie[0]),.5*(ne[1]+ie[1]),.5*(ne[2]+ie[2])],se=0,ue=!1;se<le;se++)if(Math.abs(geometry.A.det3p(Q[se].coords.usrCoords,Q[(se+1)%le].coords.usrCoords,te))<math.A.eps){ue=!0;break}if(!ue){re={pos:oe,intersection:!1,coords:new base_coords.A(constants.A.COORDS_BY_USER,te,J),elementClass:constants.A.OBJECT_CLASS_POINT},de=Z[oe]._next,Z[oe]._next=re,re._prev=Z[oe],re._next=de,de._prev=re,Z[oe]._end&&(Z[oe]._end=!1,re._end=!0);break}}}},_getStatus:function(G,_){for(;G.intersection&&!G._end;)G=G._next;return[G,geometry.A.windingNumber(G.coords.usrCoords,_)===0?"entry":"exit"]},markEntryExit:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe=null,se=0;for(ie=J.length,ne=0;ne<ie;ne++)for(re=J[ne],this._classifyDegenerateIntersections(G[re]),this._handleIntersectionChains(G[re]),Q=(te=this._getStatus(G[re],_))[0],Z=te[1],Q._starter=!0,ee=0,oe=null,se=0;Q.intersection===!0&&(Q.data.type==="X"&&se===1&&(oe.entry_exit=Z,Z==="exit"&&(oe.data.type="X"),se=2),Q.data.type!=="X"&&Q.data.type!=="DB"||(Q.entry_exit=Z,Z=Z==="entry"?"exit":"entry"),Q.data.type==="DX"&&(se===0?(oe=Q,se=1):se===1?(Q.entry_exit=Z,oe.entry_exit=Z,Z==="exit"?oe.data.type="X":Q.data.type="X",Z=Z==="entry"?"exit":"entry",oe=null,se=0):se===2&&(Q.entry_exit=Z,Q.data.type="X",Z=Z==="entry"?"exit":"entry",oe=null,se=0))),Q=Q._next,!(utils_type.A.exists(Q._starter)||ee>1e4);)ee++},_stayOnPath:function(G,_){var J=!0;return G.intersection&&G.data.type!=="B"&&(J=_===G.entry_exit),J},_addVertex:function(G,_,J){return isNaN(_.coords.usrCoords[1])||isNaN(_.coords.usrCoords[2])||G.push(_),_.intersection&&_.data.done?(J&&console.log("Add last intersection point",_.coords.usrCoords,"on",_.data.pathname,_.entry_exit,_.data.type),!0):(_.intersection&&(_.data.done=!0,J&&console.log("Add intersection point",_.coords.usrCoords,"on",_.data.pathname,_.entry_exit,_.data.type)),!1)},tracing:function(G,_,J){var Z,Q,ee,te,ne=0,ie=1e4,re=0,oe=[],se=!1,ae=!1;for(ae;re<_.length&&ne<ie;)if((ee=_[re]).data.done||ee.data.type!=="X")re++;else{oe.length>0&&oe.push([NaN,NaN]),te=ee.data.idx,Z=G,se=this._addVertex(oe,ee,ae),Q=ee.entry_exit;do{if(se)break;if(J==="intersection"&&ee.entry_exit==="entry"||J==="union"&&ee.entry_exit==="exit"||J==="difference"&&Z===G==(ee.entry_exit==="exit")){do if(ee=ee._next,se=this._addVertex(oe,ee,ae))break;while(this._stayOnPath(ee,Q));ne++}else{do if(ee=ee._prev,se=this._addVertex(oe,ee,ae))break;while(this._stayOnPath(ee,Q));ne++}if(se)break;if(!ee.neighbour)return console.log("Tracing: emergency break - no neighbour!!!!!!!!!!!!!!!!!",ne),[[0],[0]];if((ee=ee.neighbour).data.done)break;ee.data.done=!0,Q=ee.entry_exit,Z=ee.data.path}while(ee.data.idx!==te&&ne<ie);ne>=ie&&console.log("Tracing: stopping an infinite loop!",ne),re++}return this._getCoordsArrays(oe,!1)},isEmptyCase:function(G,_,J){return J==="intersection"&&(G.length===0||_.length===0)||J==="union"&&G.length===0&&_.length===0||J==="difference"&&G.length===0},_getCoordsArrays:function(G,_){var J,Z=[],Q=[],ee=G.length;for(J=0;J<ee;J++)G[J].coords?(Z.push(G[J].coords.usrCoords[1]),Q.push(G[J].coords.usrCoords[2])):(Z.push(G[J][0]),Q.push(G[J][1]));return _&&ee>0&&(G[0].coords?(Z.push(G[0].coords.usrCoords[1]),Q.push(G[0].coords.usrCoords[2])):(Z.push(G[0][0]),Q.push(G[0][1]))),[Z,Q]},handleEmptyIntersection:function(G,_,J){var Z,Q,ee=!1,te=[];if(G.length===0)return te=J==="union"?_:[],this._getCoordsArrays(te,!0);if(_.length===0)return te=J==="intersection"?[]:G,this._getCoordsArrays(te,!0);if(G.length>0)for(Z=G[0];Z.intersection&&!(Z=Z._next)._end;);if(_.length>0)for(Q=_[0];Q.intersection&&!(Q=Q._next)._end;);return geometry.A.windingNumber(Z.coords.usrCoords,_)===0?geometry.A.windingNumber(Q.coords.usrCoords,G)!==0?(J==="union"?(utils_type.A.concat(te,G),te.push(G[0])):J==="difference"&&(utils_type.A.concat(te,G),te.push(G[0]),geometry.A.signedPolygon(G)*geometry.A.signedPolygon(_)>0&&te.reverse(),te.push([NaN,NaN])),J!=="difference"&&J!=="intersection"||(utils_type.A.concat(te,_),te.push(_[0]),ee=!1)):J==="difference"?(utils_type.A.concat(te,G),ee=!0):J==="union"&&(utils_type.A.concat(te,G),te.push(G[0]),te.push([NaN,NaN]),utils_type.A.concat(te,_),te.push(_[0])):J==="intersection"?(utils_type.A.concat(te,G),ee=!0):J==="union"&&(utils_type.A.concat(te,_),te.push(_[0])),this._getCoordsArrays(te,ee)},_countCrossingIntersections:function(G){var _,J=G.length,Z=0;for(_=0;_<J;_++)G[_].data.type==="X"&&Z++;return Z},_getPath:function(G,_){var J,Z,Q,ee,te,ne,ie,re=[];if(G.elementClass!==constants.A.OBJECT_CLASS_CURVE||G.type!==constants.A.OBJECT_TYPE_ARC&&G.type!==constants.A.OBJECT_TYPE_SECTOR){if(G.elementClass===constants.A.OBJECT_CLASS_CURVE&&utils_type.A.exists(G.points))for(Z=G.numberPoints,J=0;J<Z;J++)this._addToList(re,G.points[J],J);else if(G.type===constants.A.OBJECT_TYPE_POLYGON)for(J=0;J<G.vertices.length;J++)this._addToList(re,G.vertices[J].coords,J);else if(G.elementClass===constants.A.OBJECT_CLASS_CIRCLE)for(ie=359,Q=G.Radius(),ee=2*Math.PI/ie,J=0;J<=ie;J++)this._addToList(re,new base_coords.A(constants.A.COORDS_BY_USER,[G.center.coords.usrCoords[0],G.center.coords.usrCoords[1]+Math.cos(J*ee)*Q,G.center.coords.usrCoords[2]+Math.sin(J*ee)*Q],_),J);else if(utils_type.A.isArray(G))for(Z=G.length,J=0;J<Z;J++)utils_type.A.exists(G[J].coords)?this._addToList(re,G[J].coords,J):utils_type.A.isArray(G[J])?this._addToList(re,new base_coords.A(constants.A.COORDS_BY_USER,G[J],_),J):utils_type.A.exists(G[J].usrCoords)&&this._addToList(re,G[J],J)}else{for(te=geometry.A.rad(G.radiuspoint,G.center,G.anglepoint),ie=Math.floor(180*te/Math.PI),Q=G.Radius(),ee=te/ie,ne=Math.atan2(G.radiuspoint.coords.usrCoords[2]-G.center.coords.usrCoords[2],G.radiuspoint.coords.usrCoords[1]-G.center.coords.usrCoords[1]),G.type===constants.A.OBJECT_TYPE_SECTOR&&this._addToList(re,G.center.coords,0),J=0;J<=ie;J++)this._addToList(re,new base_coords.A(constants.A.COORDS_BY_USER,[G.center.coords.usrCoords[0],G.center.coords.usrCoords[1]+Math.cos(J*ee+ne)*Q,G.center.coords.usrCoords[2]+Math.sin(J*ee+ne)*Q],_),J+1);G.type===constants.A.OBJECT_TYPE_SECTOR&&this._addToList(re,G.center.coords,ie+2)}return re},greinerHormann:function(G,_,J,Z){var Q,ee,te,ne,ie=[],re=[];return(Q=(ie=this._getPath(G,Z)).length)>0&&geometry.A.distance(ie[0].coords.usrCoords,ie[Q-1].coords.usrCoords,3)<math.A.eps&&ie.pop(),(Q=(re=this._getPath(_,Z)).length)>0&&geometry.A.distance(re[0].coords.usrCoords,re[Q-1].coords.usrCoords,3)<math.A.eps*math.A.eps&&re.pop(),this.isEmptyCase(ie,re,J)?[[],[]]:(te=this.makeDoublyLinkedList(ie),ne=this.makeDoublyLinkedList(re),ee=this.findIntersections(ie,re,Z)[0],this._handleFullyDegenerateCase(ie,re,Z),this.markEntryExit(ie,re,te),this.markEntryExit(re,ie,ne),this._countCrossingIntersections(ee)===0?this.handleEmptyIntersection(ie,re,J):this.tracing(ie,ee,J))},union:function(G,_,J){return this.greinerHormann(G,_,"union",J)},intersection:function(G,_,J){return this.greinerHormann(G,_,"intersection",J)},difference:function(G,_,J){return this.greinerHormann(G,_,"difference",J)}};var clip=math.A.Clip;math.A.Poly={},math.A.Poly.Ring=function(G){this.vars=G},jxg.A.extend(math.A.Poly.Ring.prototype,{}),math.A.Poly.Monomial=function(G,_,J){var Z;if(!utils_type.A.exists(G))throw new Error("JSXGraph error: In JXG.Math.Poly.monomial missing parameter 'ring'.");for(utils_type.A.isArray(J)||(J=[]),Z=(J=J.slice(0,G.vars.length)).length;Z<G.vars.length;Z++)J.push(0);this.ring=G,this.coefficient=_||0,this.exponents=utils_type.A.deepCopy(J)},jxg.A.extend(math.A.Poly.Monomial.prototype,{copy:function(){return new math.A.Poly.Monomial(this.ring,this.coefficient,this.exponents)},print:function(){var G,_=[];for(G=0;G<this.ring.vars.length;G++)_.push(this.ring.vars[G]+"^"+this.exponents[G]);return this.coefficient+"*"+_.join("*")}}),math.A.Poly.Polynomial=function(G,_){var J;if(!utils_type.A.exists(G))throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial missing parameter 'ring'.");J=utils_type.A.exists(_)&&utils_type.A.isString(_)?void 0:[],this.ring=G,this.monomials=J},jxg.A.extend(math.A.Poly.Polynomial.prototype,{findSignature:function(G){var _;for(_=0;_<this.monomials.length;_++)if(utils_type.A.cmpArrays(this.monomials[_].exponents,G))return _;return-1},addSubMonomial:function(G,_){var J;(J=this.findSignature(G.exponents))>-1?this.monomials[J].coefficient+=_*G.coefficient:(G.coefficient*=_,this.monomials.push(G))},add:function(G){var _;if(!utils_type.A.exists(G)||G.ring!==this.ring)throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial.add either summand is undefined or rings don't match.");if(utils_type.A.isArray(G.exponents))this.addSubMonomial(G,1);else for(_=0;_<G.monomials.length;_++)this.addSubMonomial(G.monomials[_],1)},sub:function(G){var _;if(!utils_type.A.exists(G)||G.ring!==this.ring)throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial.sub either summand is undefined or rings don't match.");if(utils_type.A.isArray(G.exponents))this.addSubMonomial(G,-1);else for(_=0;_<G.monomials.length;_++)this.addSubMonomial(G.monomials[_],-1)},copy:function(){var G,_;for(_=new math.A.Poly.Polynomial(this.ring),G=0;G<this.monomials.length;G++)_.monomials.push(this.monomials[G].copy());return _},print:function(){var G,_=[];for(G=0;G<this.monomials.length;G++)_.push("("+this.monomials[G].print()+")");return _.join("+")}}),math.A.Poly,jxg.A.Complex=function(G,_){this.isComplex=!0,G&&G.isComplex&&(_=G.imaginary,G=G.real),this.real=G||0,this.imaginary=_||0},jxg.A.extend(jxg.A.Complex.prototype,{toString:function(){return this.real+" + "+this.imaginary+"i"},add:function(G){return utils_type.A.isNumber(G)?this.real+=G:(this.real+=G.real,this.imaginary+=G.imaginary),this},sub:function(G){return utils_type.A.isNumber(G)?this.real-=G:(this.real-=G.real,this.imaginary-=G.imaginary),this},mult:function(G){var _,J;return utils_type.A.isNumber(G)?(this.real*=G,this.imaginary*=G):(_=this.real,J=this.imaginary,this.real=_*G.real-J*G.imaginary,this.imaginary=_*G.imaginary+J*G.real),this},div:function(G){var _,J,Z;if(utils_type.A.isNumber(G)){if(Math.abs(G)<Math.eps)return this.real=1/0,this.imaginary=1/0,this;this.real/=G,this.imaginary/=G}else{if(Math.abs(G.real)<Math.eps&&Math.abs(G.imaginary)<Math.eps)return this.real=1/0,this.imaginary=1/0,this;_=G.real*G.real+G.imaginary*G.imaginary,Z=this.real,J=this.imaginary,this.real=(Z*G.real+J*G.imaginary)/_,this.imaginary=(J*G.real-Z*G.imaginary)/_}return this},conj:function(){return this.imaginary*=-1,this},abs:function(){var G=this.real,_=this.imaginary;return Math.sqrt(G*G+_*_)},angle:function(){return Math.atan2(this.imaginary,this.real)}}),jxg.A.C={},jxg.A.C.add=function(G,_){var J=new jxg.A.Complex(G);return J.add(_),J},jxg.A.C.sub=function(G,_){var J=new jxg.A.Complex(G);return J.sub(_),J},jxg.A.C.mult=function(G,_){var J=new jxg.A.Complex(G);return J.mult(_),J},jxg.A.C.div=function(G,_){var J=new jxg.A.Complex(G);return J.div(_),J},jxg.A.C.conj=function(G){var _=new jxg.A.Complex(G);return _.conj(),_},jxg.A.C.abs=function(G){return new jxg.A.Complex(G).abs()},jxg.A.C.angle=function(G){return new jxg.A.Complex(G).angle()},jxg.A.C.copy=function(G){return new jxg.A.Complex(G)},jxg.A.Complex.C=jxg.A.C;var complex=jxg.A.Complex,src_options=__webpack_require__(378);jxg.A.AbstractRenderer=function(){this.vOffsetText=0,this.enhancedRendering=!0,this.container=null,this.type="",this.supportsForeignObject=!1,this.dashArray=[[2,2],[5,5],[10,10],[20,20],[20,10,10,10],[20,5,10,5],[0,5]]},jxg.A.extend(jxg.A.AbstractRenderer.prototype,{_updateVisual:function(G,_,J){(J||this.enhancedRendering)&&(_=_||{},this.setObjectTransition(G),G.evalVisProp("draft")?this.setDraft(G):(_.stroke||(G.highlighted?(this.setObjectStrokeColor(G,G.evalVisProp("highlightstrokecolor"),G.evalVisProp("highlightstrokeopacity")),this.setObjectStrokeWidth(G,G.evalVisProp("highlightstrokewidth"))):(this.setObjectStrokeColor(G,G.evalVisProp("strokecolor"),G.evalVisProp("strokeopacity")),this.setObjectStrokeWidth(G,G.evalVisProp("strokewidth")))),_.fill||(G.highlighted?this.setObjectFillColor(G,G.evalVisProp("highlightfillcolor"),G.evalVisProp("highlightfillopacity")):this.setObjectFillColor(G,G.evalVisProp("fillcolor"),G.evalVisProp("fillopacity"))),_.dash||this.setDashStyle(G,G.visProp),_.shadow||this.setShadow(G),_.tabindex||this.setTabindex(G)),G.highlighted?this.setCssClass(G,G.evalVisProp("highlightcssclass")):this.setCssClass(G,G.evalVisProp("cssclass")),G.evalVisProp("aria.enabled")&&this.setARIA(G))},_getHighlighted:function(G){var _=!1;return utils_type.A.exists(G.board)&&utils_type.A.exists(G.board.highlightedObjects)||(_=!0),!_&&utils_type.A.exists(G.board.highlightedObjects[G.id])?"highlight":""},drawPoint:function(G){var _,J=src_options.A.normalizePointFace(G.evalVisProp("face"));_=J==="o"?"ellipse":J==="[]"?"rect":"path",G.rendNode=this.appendChildPrim(this.createPrim(_,G.id),G.evalVisProp("layer")),this.appendNodesToElement(G,_),this._updateVisual(G,{dash:!0,shadow:!0},!0),this.updatePoint(G)},updatePoint:function(G){var _,J=G.evalVisProp("size"),Z=src_options.A.normalizePointFace(G.evalVisProp("face")),Q=G.evalVisProp("sizeunit"),ee=G.evalVisProp("zoom");isNaN(G.coords.scrCoords[2]+G.coords.scrCoords[1])||(Q==="user"&&(J*=Math.sqrt(Math.abs(G.board.unitX*G.board.unitY))),_=(J*=G.board&&ee?Math.sqrt(G.board.zoomX*G.board.zoomY):1)===0?0:J+1,Z==="o"?this.updateEllipsePrim(G.rendNode,G.coords.scrCoords[1],G.coords.scrCoords[2],_,_):Z==="[]"?this.updateRectPrim(G.rendNode,G.coords.scrCoords[1]-J,G.coords.scrCoords[2]-J,2*J,2*J):this.updatePathPrim(G.rendNode,this.updatePathStringPoint(G,J,Z),G.board),this._updateVisual(G,{dash:!1,shadow:!1}),this.setShadow(G))},changePointStyle:function(G){var _=this.getElementById(G.id);utils_type.A.exists(_)&&this.remove(_),this.drawPoint(G),utils_type.A.clearVisPropOld(G),G.visPropCalc.visible||this.display(G,!1),G.evalVisProp("draft")&&this.setDraft(G)},drawLine:function(G){G.rendNode=this.appendChildPrim(this.createPrim("line",G.id),G.evalVisProp("layer")),this.appendNodesToElement(G,"lines"),this.updateLine(G)},updateLine:function(G){this._updateVisual(G),this.updatePathWithArrowHeads(G),this.setLineCap(G)},drawCurve:function(G){G.rendNode=this.appendChildPrim(this.createPrim("path",G.id),G.evalVisProp("layer")),this.appendNodesToElement(G,"path"),this.updateCurve(G)},updateCurve:function(G){this._updateVisual(G),this.updatePathWithArrowHeads(G),this.setLineCap(G)},updatePathWithArrowHeads:function(G,_){var J,Z,Q=_?"highlight":"";J=_&&G.evalVisProp("highlightstrokewidth")?Math.max(G.evalVisProp("highlightstrokewidth"),G.evalVisProp("strokewidth")):G.evalVisProp("strokewidth"),Z=this.getArrowHeadData(G,J,Q),this.makeArrows(G,Z),G.elementClass===constants.A.OBJECT_CLASS_LINE?this.updateLineWithEndings(G,Z):G.elementClass===constants.A.OBJECT_CLASS_CURVE&&this.updatePath(G),this.setArrowSize(G,Z)},getArrowHeadData:function(G,_,J){var Z,Q,ee,te,ne=math.A.eps,ie=0,re=0,oe=0,se=0,ae=G.evalVisProp("firstarrow"),le=G.evalVisProp("lastarrow");return(ae||le)&&(Z=utils_type.A.exists(ae.type)?G.eval(ae.type):G.elementClass===constants.A.OBJECT_CLASS_LINE?1:7,Q=utils_type.A.exists(le.type)?G.eval(le.type):G.elementClass===constants.A.OBJECT_CLASS_LINE?1:7,ae&&(te=6,utils_type.A.exists(ae.size)&&(te=G.eval(ae.size)),J!==""&&utils_type.A.exists(ae[J+"size"])&&(te=G.eval(ae[J+"size"])),ee=_*te,Z===2?(ee*=.5,ne+=_*te):Z===3?(ee=_*te/3,ne+=_):Z===4||Z===5||Z===6?(ee=_*te/1.5,ne+=_*te):Z===7?(ee=0,te=10,ne+=_):ne+=_*te,ie+=ee,oe=te),le&&(te=6,utils_type.A.exists(le.size)&&(te=G.eval(le.size)),J!==""&&utils_type.A.exists(le[J+"size"])&&(te=G.eval(le[J+"size"])),ee=_*te,Q===2?(ee*=.5,ne+=_*te):Q===3?(ee=_*te/3,ne+=_):Q===4||Q===5||Q===6?(ee=_*te/1.5,ne+=_*te):Q===7?(ee=0,te=10,ne+=_):ne+=_*te,re+=ee,se=te)),G.visPropCalc.typeFirst=Z,G.visPropCalc.typeLast=Q,{evFirst:ae,evLast:le,typeFirst:Z,typeLast:Q,offFirst:ie,offLast:re,sizeFirst:oe,sizeLast:se,showFirst:1,showLast:1,minLen:ne,strokeWidth:_}},updateLineWithEndings:function(G,_){var J,Z,Q;return J=new base_coords.A(constants.A.COORDS_BY_USER,G.point1.coords.usrCoords,G.board),Z=new base_coords.A(constants.A.COORDS_BY_USER,G.point2.coords.usrCoords,G.board),Q=G.evalVisProp("margin"),geometry.A.calcStraight(G,J,Z,Q),this.handleTouchpoints(G,J,Z,_),this.getPositionArrowHead(G,J,Z,_),this.updateLinePrim(G.rendNode,J.scrCoords[1],J.scrCoords[2],Z.scrCoords[1],Z.scrCoords[2],G.board),this},updatePath:function(G){return G.evalVisProp("handdrawing")?this.updatePathPrim(G.rendNode,this.updatePathStringBezierPrim(G),G.board):this.updatePathPrim(G.rendNode,this.updatePathStringPrim(G),G.board),this},getPositionArrowHead:function(G,_,J,Z){var Q,ee,te,ne,ie;return(Z.evFirst||Z.evLast)&&(ee=te=ne=ie=0,Q=_.distance(constants.A.COORDS_BY_SCREEN,J),Z.evFirst&&G.board.renderer.type!=="vml"&&(Q>=Z.minLen?(ee=(J.scrCoords[1]-_.scrCoords[1])*Z.offFirst/Q,te=(J.scrCoords[2]-_.scrCoords[2])*Z.offFirst/Q):Z.showFirst=0),Z.evLast&&G.board.renderer.type!=="vml"&&(Q>=Z.minLen?(ne=(J.scrCoords[1]-_.scrCoords[1])*Z.offLast/Q,ie=(J.scrCoords[2]-_.scrCoords[2])*Z.offLast/Q):Z.showLast=0),_.setCoordinates(constants.A.COORDS_BY_SCREEN,[_.scrCoords[1]+ee,_.scrCoords[2]+te],!1,!0),J.setCoordinates(constants.A.COORDS_BY_SCREEN,[J.scrCoords[1]-ne,J.scrCoords[2]-ie],!1,!0)),this},handleTouchpoints:function(G,_,J,Z){var Q,ee,te,ne,ie,re,oe;return(Z.evFirst||Z.evLast)&&(te=ne=ie=re=oe=0,Q=G.point1.evalVisProp("size")+G.point1.evalVisProp("strokewidth"),ee=G.point2.evalVisProp("size")+G.point2.evalVisProp("strokewidth"),Z.evFirst&&G.evalVisProp("touchfirstpoint")&&G.point1.evalVisProp("visible")&&(te=_.distance(constants.A.COORDS_BY_SCREEN,J),ne=(J.scrCoords[1]-_.scrCoords[1])*Q/te,ie=(J.scrCoords[2]-_.scrCoords[2])*Q/te),Z.evLast&&G.evalVisProp("touchlastpoint")&&G.point2.evalVisProp("visible")&&(te=_.distance(constants.A.COORDS_BY_SCREEN,J),re=(J.scrCoords[1]-_.scrCoords[1])*ee/te,oe=(J.scrCoords[2]-_.scrCoords[2])*ee/te),_.setCoordinates(constants.A.COORDS_BY_SCREEN,[_.scrCoords[1]+ne,_.scrCoords[2]+ie],!1,!0),J.setCoordinates(constants.A.COORDS_BY_SCREEN,[J.scrCoords[1]-re,J.scrCoords[2]-oe],!1,!0)),this},setArrowSize:function(G,_){return _.evFirst&&this._setArrowWidth(G.rendNodeTriangleStart,_.showFirst*_.strokeWidth,G.rendNode,_.sizeFirst),_.evLast&&this._setArrowWidth(G.rendNodeTriangleEnd,_.showLast*_.strokeWidth,G.rendNode,_.sizeLast),this},setLineCap:function(G){},drawTicks:function(G){G.rendNode=this.appendChildPrim(this.createPrim("path",G.id),G.evalVisProp("layer")),this.appendNodesToElement(G,"path")},updateTicks:function(G){},drawEllipse:function(G){G.rendNode=this.appendChildPrim(this.createPrim("ellipse",G.id),G.evalVisProp("layer")),this.appendNodesToElement(G,"ellipse"),this.updateEllipse(G)},updateEllipse:function(G){this._updateVisual(G);var _=G.Radius();Math.abs(G.center.coords.usrCoords[0])>math.A.eps&&!isNaN(_+G.center.coords.scrCoords[1]+G.center.coords.scrCoords[2])&&_*G.board.unitX<2e6&&this.updateEllipsePrim(G.rendNode,G.center.coords.scrCoords[1],G.center.coords.scrCoords[2],_*G.board.unitX,_*G.board.unitY),this.setLineCap(G)},drawPolygon:function(G){G.rendNode=this.appendChildPrim(this.createPrim("polygon",G.id),G.evalVisProp("layer")),this.appendNodesToElement(G,"polygon"),this.updatePolygon(G)},updatePolygon:function(G){this._updateVisual(G,{stroke:!0,dash:!0}),this.updatePolygonPrim(G.rendNode,G)},displayCopyright:function(G,_){},displayLogo:function(G,_){},drawInternalText:function(G){},updateInternalText:function(G){},drawText:function(G){var _,J,Z,Q;G.evalVisProp("display")==="html"&&env.A.isBrowser&&this.type!=="no"?((_=this.container.ownerDocument.createElement("div")).style.position="absolute",_.className=G.evalVisProp("cssclass"),Z=G.evalVisProp("layer"),utils_type.A.exists(Z)||(Z=0),J=this.container.style.zIndex===""?0:parseInt(this.container.style.zIndex,10),_.style.zIndex=J+Z,this.container.appendChild(_),_.setAttribute("id",this.container.id+"_"+G.id)):_=this.drawInternalText(G),G.rendNode=_,G.htmlStr="",G.visProp.islabel&&utils_type.A.exists(G.visProp.anchor)?(Q=G.visProp.anchor.evalVisProp("visible"),G.prepareUpdate().updateVisibility(Q)):G.prepareUpdate().updateVisibility(),this.updateText(G)},updateText:function(G){var _,J,Z,Q,ee,te,ne,ie,re,oe,se,ae=G.plaintext;if(G.visPropCalc.visible)if(this.updateTextStyle(G,!1),G.evalVisProp("display")==="html"&&this.type!=="no"){if(isNaN(G.coords.scrCoords[1]+G.coords.scrCoords[2])||(J=G.coords.scrCoords[1],J=Math.abs(J)<1e6?J:1e6,(ee=G.getAnchorX())==="right"?(_=G.board.canvasWidth-J,oe="right"):ee==="middle"?(_=J-.5*G.size[0],oe="center"):(_=J,oe="left"),G.visPropOld.left!==ee+_&&(ee==="right"?(G.rendNode.style.right=_+"px",G.rendNode.style.left="auto"):(G.rendNode.style.left=_+"px",G.rendNode.style.right="auto"),G.visPropOld.left=ee+_),J=G.coords.scrCoords[2]+this.vOffsetText,J=Math.abs(J)<1e6?J:1e6,(te=G.getAnchorY())==="bottom"?(_=G.board.canvasHeight-J,se="bottom"):te==="middle"?(_=J-.5*G.size[1],se="center"):(_=J,se="top"),G.visPropOld.top!==te+_&&(te==="bottom"?(G.rendNode.style.top="auto",G.rendNode.style.bottom=_+"px"):(G.rendNode.style.bottom="auto",G.rendNode.style.top=_+"px"),G.visPropOld.top=te+_)),G.htmlStr!==ae){try{G.type===utils_type.A.OBJECT_TYPE_BUTTON?G.rendNodeButton.innerHTML=ae:G.type===utils_type.A.OBJECT_TYPE_CHECKBOX||G.type===utils_type.A.OBJECT_TYPE_INPUT?G.rendNodeLabel.innerHTML=ae:G.rendNode.innerHTML=ae}catch{Z=G.rendNode.parentNode,G.rendNode.parentNode.removeChild(G.rendNode),G.rendNode.innerHTML=ae,Z.appendChild(G.rendNode)}if(G.htmlStr=ae,G.evalVisProp("usemathjax"))try{MathJax.typeset?MathJax.typeset([G.rendNode]):MathJax.Hub.Queue(["Typeset",MathJax.Hub,G.rendNode])}catch{jxg.A.debug("MathJax (not yet) loaded")}else if(G.evalVisProp("usekatex"))try{(Q=G.rendNode.innerHTML.indexOf("<span")===0&&G.rendNode.innerHTML.indexOf("<label")>0&&(G.rendNode.innerHTML.indexOf("<checkbox")>0||G.rendNode.innerHTML.indexOf("<input")>0)?G.rendNodeLabel:G.rendNode.innerHTML.indexOf("<button")===0?G.rendNodeButton:G.rendNode)&&katex.render(ae,Q,{macros:G.evalVisProp("katexmacros"),throwOnError:!1})}catch{jxg.A.debug("KaTeX not loaded (yet)")}else if(G.evalVisProp("useasciimathml"))try{AMprocessNode(G.rendNode,!1)}catch{jxg.A.debug("AsciiMathML not loaded (yet)")}}(ne=G.evalVisProp("rotate"))!==0&&(ne*=Math.PI/180,ie=Math.cos(ne),re=Math.sin(ne),G.rendNode.style.transform="matrix("+[ie,-1*re,re,ie,0,0].join(",")+")",G.rendNode.style["transform-origin"]=oe+" "+se),this.transformRect(G,G.transformations)}else this.updateInternalText(G)},_css2js:function(G){var _,J,Z,Q,ee,te=[],ne=utils_type.A.trim(G).replace(/;$/,"").split(";");for(J=ne.length,_=0;_<J;++_)utils_type.A.trim(ne[_])!==""&&(ee=ne[_].split(":"),Z=utils_type.A.trim(ee[0].replace(/-([a-z])/gi,function(ie,re){return re.toUpperCase()})),Q=utils_type.A.trim(ee[1]),te.push({key:Z,val:Q}));return te},updateTextStyle:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se=env.A.isBrowser?G.visProp.display:"internal",ae=["rendNode","rendNodeTag","rendNodeLabel"],le=ae.length,ue=G.evalVisProp("fontunit"),de=["cssdefaultstyle","cssstyle"],pe=de.length;if(_?(Q=G.evalVisProp("highlightstrokecolor"),Z=G.evalVisProp("highlightstrokeopacity"),ee=G.evalVisProp("highlightcssclass")):(Q=G.evalVisProp("strokecolor"),Z=G.evalVisProp("strokeopacity"),ee=G.evalVisProp("cssclass")),this.type!=="no"&&(se==="html"||this.type!=="canvas")){for(re=0;re<pe;re++)for(oe=G.evalVisProp((_?"highlight":"")+de[re]),te=0;te<le;te++)if(utils_type.A.exists(G[ae[te]])&&oe!==""&&G.visPropOld[de[re]+"_"+te]!==oe){for(ie in ne=this._css2js(oe))ne.hasOwnProperty(ie)&&(G[ae[te]].style[ne[ie].key]=ne[ie].val);G.visPropOld[de[re]+"_"+te]=oe}if(J=G.evalVisProp("fontsize"),G.visPropOld.fontsize!==J){G.needsSizeUpdate=!0;try{for(te=0;te<le;te++)utils_type.A.exists(G[ae[te]])&&(G[ae[te]].style.fontSize=J+ue)}catch{for(te=0;te<le;te++)utils_type.A.exists(G[ae[te]])&&(G[ae[te]].style.fontSize=J)}G.visPropOld.fontsize=J}}return this.setTabindex(G),this.setObjectTransition(G),se==="html"&&this.type!=="no"?(G.visPropOld.cssclass!==ee&&(G.rendNode.className=ee,G.visPropOld.cssclass=ee,G.needsSizeUpdate=!0),this.setObjectStrokeColor(G,Q,Z)):this.updateInternalTextStyle(G,Q,Z),G.evalVisProp("aria.enabled")&&this.setARIA(G),this},updateInternalTextStyle:function(G,_,J){this.setObjectStrokeColor(G,_,J)},drawImage:function(G){},updateImage:function(G){this.updateRectPrim(G.rendNode,G.coords.scrCoords[1],G.coords.scrCoords[2]-G.size[1],G.size[0],G.size[1]),this.updateImageURL(G),this.transformRect(G,G.transformations),this._updateVisual(G,{stroke:!0,dash:!0},!0)},joinTransforms:function(G,_){var J,Z=G.board.origin.scrCoords[1],Q=G.board.origin.scrCoords[2],ee=G.board.unitX,te=G.board.unitY,ne=_.length,ie=[[1,0,0],[-Z/ee,1/ee,0],[Q/te,0,-1/te]];for(J=0;J<ne;J++)ie=math.A.matMatMult(_[J].matrix,ie);return ie=math.A.matMatMult([[1,0,0],[Z,ee,0],[Q,0,-te]],ie)},transformRect:function(G,_){},updateImageURL:function(G){},updateImageStyle:function(G,_){G.rendNode.className=G.evalVisProp(_?"highlightcssclass":"cssclass")},drawForeignObject:function(G){},updateForeignObject:function(G){},appendChildPrim:function(G,_){},appendNodesToElement:function(G,_){},createPrim:function(G,_){return null},remove:function(G){},makeArrows:function(G,_){},_setArrowWidth:function(G,_,J){},updateEllipsePrim:function(G,_,J,Z,Q){},updateLinePrim:function(G,_,J,Z,Q,ee){},updatePathPrim:function(G,_,J){},updatePathStringPoint:function(G,_,J){},updatePathStringPrim:function(G){},updatePathStringBezierPrim:function(G){},updatePolygonPrim:function(G,_){},updateRectPrim:function(G,_,J,Z,Q){},display:function(G,_){G&&(G.visPropOld.visible=_)},hide:function(G){},highlight:function(G,_){var J,Z,Q;if(this.setObjectTransition(G),!G.visProp.draft){if(G.type===constants.A.OBJECT_TYPE_POLYGON)for(this.setObjectFillColor(G,G.evalVisProp("highlightfillcolor"),G.evalVisProp("highlightfillopacity")),Z=G.evalVisProp("highlightbystrokewidth"),J=0;J<G.borders.length;J++)this.highlight(G.borders[J],!Z);else G.elementClass===constants.A.OBJECT_CLASS_TEXT?this.updateTextStyle(G,!0):G.type===constants.A.OBJECT_TYPE_IMAGE?(this.updateImageStyle(G,!0),this.setObjectFillColor(G,G.evalVisProp("highlightfillcolor"),G.evalVisProp("highlightfillopacity"))):(this.setObjectStrokeColor(G,G.evalVisProp("highlightstrokecolor"),G.evalVisProp("highlightstrokeopacity")),this.setObjectFillColor(G,G.evalVisProp("highlightfillcolor"),G.evalVisProp("highlightfillopacity")));!_&&G.evalVisProp("highlightstrokewidth")&&(Q=Math.max(G.evalVisProp("highlightstrokewidth"),G.evalVisProp("strokewidth")),this.setObjectStrokeWidth(G,Q),G.elementClass!==constants.A.OBJECT_CLASS_LINE&&G.elementClass!==constants.A.OBJECT_CLASS_CURVE||this.updatePathWithArrowHeads(G,!0))}return this.setCssClass(G,G.evalVisProp("highlightcssclass")),this},noHighlight:function(G){var _,J;if(this.setObjectTransition(G),!G.evalVisProp("draft")){if(G.type===constants.A.OBJECT_TYPE_POLYGON)for(this.setObjectFillColor(G,G.evalVisProp("fillcolor"),G.evalVisProp("fillopacity")),_=0;_<G.borders.length;_++)this.noHighlight(G.borders[_]);else G.elementClass===constants.A.OBJECT_CLASS_TEXT?this.updateTextStyle(G,!1):G.type===constants.A.OBJECT_TYPE_IMAGE?(this.updateImageStyle(G,!1),this.setObjectFillColor(G,G.evalVisProp("fillcolor"),G.evalVisProp("fillopacity"))):(this.setObjectStrokeColor(G,G.evalVisProp("strokecolor"),G.evalVisProp("strokeopacity")),this.setObjectFillColor(G,G.evalVisProp("fillcolor"),G.evalVisProp("fillopacity")));J=G.evalVisProp("strokewidth"),this.setObjectStrokeWidth(G,J),G.elementClass!==constants.A.OBJECT_CLASS_LINE&&G.elementClass!==constants.A.OBJECT_CLASS_CURVE||this.updatePathWithArrowHeads(G,!1)}return this.setCssClass(G,G.evalVisProp("cssclass")),this},removeDraft:function(G){this.setObjectTransition(G),G.type===constants.A.OBJECT_TYPE_POLYGON?this.setObjectFillColor(G,G.evalVisProp("fillcolor"),G.evalVisProp("fillopacity")):(G.type===constants.A.OBJECT_CLASS_POINT&&this.setObjectFillColor(G,G.evalVisProp("fillcolor"),G.evalVisProp("fillopacity")),this.setObjectStrokeColor(G,G.evalVisProp("strokecolor"),G.evalVisProp("strokeopacity")),this.setObjectStrokeWidth(G,G.evalVisProp("strokewidth")))},setARIA:function(G){},setBuffering:function(G,_){},setCssClass:function(G,_){},setDashStyle:function(G){},setDraft:function(G){if(G.evalVisProp("draft")){var _=G.board.options.elements.draft.color,J=G.board.options.elements.draft.opacity;this.setObjectTransition(G),G.type===constants.A.OBJECT_TYPE_POLYGON?this.setObjectFillColor(G,_,J):(G.elementClass===constants.A.OBJECT_CLASS_POINT?this.setObjectFillColor(G,_,J):this.setObjectFillColor(G,"none",0),this.setObjectStrokeColor(G,_,J),this.setObjectStrokeWidth(G,G.board.options.elements.draft.strokeWidth))}},setGradient:function(G){},setLayer:function(G,_){},setObjectFillColor:function(G,_,J){},setObjectStrokeColor:function(G,_,J){},setObjectStrokeWidth:function(G,_){},setObjectTransition:function(G,_){},setPropertyPrim:function(G,_,J){},setShadow:function(G){},setTabindex:function(G){},show:function(G){},updateGradient:function(G){},suspendRedraw:function(){},unsuspendRedraw:function(){},drawNavigationBar:function(G,_){var J,Z,Q=function(te){te||(te=window.event),te.stopPropagation?te.stopPropagation():te.cancelBubble=!0},ee=function(te,ne,ie,re){var oe;ie=ie||"",(oe=J.createElement("span")).innerHTML=te,oe.style.paddingLeft="7px",oe.style.paddingRight="7px",oe.classList!==void 0&&(oe.classList.add("JXG_navigation_button"),oe.classList.add("JXG_navigation_button_"+re)),oe.setAttribute("id",ie+"_navigation_"+re),oe.setAttribute("aria-hidden","true"),Z.appendChild(oe),env.A.addEvent(oe,"click",function(se){return utils_type.A.bind(ne,G)(),!1},G),env.A.addEvent(oe,"pointerup",Q,G),env.A.addEvent(oe,"pointerdown",Q,G),env.A.addEvent(oe,"pointerleave",Q,G),env.A.addEvent(oe,"mouseup",Q,G),env.A.addEvent(oe,"mousedown",Q,G),env.A.addEvent(oe,"touchend",Q,G),env.A.addEvent(oe,"touchstart",Q,G)};env.A.isBrowser&&this.type!=="no"&&(J=G.containerObj.ownerDocument,(Z=J.createElement("div")).setAttribute("id",G.container+"_navigationbar"),Z.style.color=_.strokecolor,Z.style.backgroundColor=_.fillcolor,Z.style.padding=_.padding,Z.style.position=_.position,Z.style.fontSize=_.fontsize,Z.style.cursor=_.cursor,Z.style.zIndex=_.zindex,G.containerObj.appendChild(Z),Z.style.right=_.right,Z.style.bottom=_.bottom,Z.classList!==void 0&&Z.classList.add("JXG_navigation"),G.attr.showfullscreen&&ee(G.attr.fullscreen.symbol,function(){G.toFullscreen(G.attr.fullscreen.id)},G.container,"fullscreen"),G.attr.showscreenshot&&ee(G.attr.screenshot.symbol,function(){window.setTimeout(function(){G.renderer.screenshot(G,"",!1)},330)},G.container,"screenshot"),G.attr.showreload&&ee("",function(){G.reload()},G.container,"reload"),G.attr.showcleartraces&&ee("",function(){G.clearTraces()},G.container,"cleartraces"),G.attr.shownavigation&&(G.attr.showzoom&&(ee("",G.zoomOut,G.container,"out"),ee("o",G.zoom100,G.container,"100"),ee("+",G.zoomIn,G.container,"in")),ee("",G.clickLeftArrow,G.container,"left"),ee("",G.clickUpArrow,G.container,"down"),ee("",G.clickDownArrow,G.container,"up"),ee("",G.clickRightArrow,G.container,"right")))},getElementById:function(G){var _;return utils_type.A.exists(this.container)?(_=this.container.id+"_"+G,utils_type.A.exists(CSS)&&utils_type.A.exists(CSS.escape)&&(_=CSS.escape(_)),this.container.querySelector("#"+_)):""},removeToInsertLater:function(G){var _=G.parentNode,J=G.nextSibling;if(_!==null)return _.removeChild(G),function(){J?_.insertBefore(G,J):_.appendChild(G)}},resize:function(G,_){},createTouchpoints:function(G){},showTouchpoint:function(G){},hideTouchpoint:function(G){},updateTouchpoint:function(G,_){},dumpToDataURI:function(G){},dumpToCanvas:function(G,_,J,Z){},screenshot:function(G){}});var renderer_abstract=jxg.A.AbstractRenderer,UTF8_ACCEPT=0,UTF8D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,10,3,3,3,3,3,3,3,3,3,3,3,3,4,3,3,11,6,6,6,5,8,8,8,8,8,8,8,8,8,8,8,0,12,24,36,60,96,84,12,12,12,48,72,12,12,12,12,12,12,12,12,12,12,12,12,12,0,12,12,12,12,12,0,12,0,12,12,12,24,12,12,12,12,12,24,12,24,12,12,12,12,12,12,12,12,12,24,12,12,12,12,12,24,12,12,12,12,12,12,12,24,12,12,12,12,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,12,12,12,12,12];jxg.A.Util=jxg.A.Util||{},jxg.A.Util.UTF8={encode:function(G){var _,J,Z="",Q=G.length;if(G=G.replace(/\r\n/g,`
`),typeof unescape=="function"&&typeof encodeURIComponent=="function")return unescape(encodeURIComponent(G));for(_=0;_<Q;_++)(J=G.charCodeAt(_))<128?Z+=String.fromCharCode(J):J>127&&J<2048?(Z+=String.fromCharCode(J>>6|192),Z+=String.fromCharCode(63&J|128)):(Z+=String.fromCharCode(J>>12|224),Z+=String.fromCharCode(J>>6&63|128),Z+=String.fromCharCode(63&J|128));return Z},decode:function(G){var _,J,Z,Q=0,ee=0,te=UTF8_ACCEPT,ne=[],ie=G.length,re=[];for(_=0;_<ie;_++)J=G.charCodeAt(_),Z=UTF8D[J],ee=te!==UTF8_ACCEPT?63&J|ee<<6:255>>Z&J,(te=UTF8D[256+te+Z])===UTF8_ACCEPT&&(ee>65535?ne.push(55232+(ee>>10),56320+(1023&ee)):ne.push(ee),++Q%1e4==0&&(re.push(String.fromCharCode.apply(null,ne)),ne=[]));return re.push(String.fromCharCode.apply(null,ne)),re.join("")},asciiCharCodeAt:function(G,_){var J=G.charCodeAt(_);if(J>255)switch(J){case 8364:J=128;break;case 8218:J=130;break;case 402:J=131;break;case 8222:J=132;break;case 8230:J=133;break;case 8224:J=134;break;case 8225:J=135;break;case 710:J=136;break;case 8240:J=137;break;case 352:J=138;break;case 8249:J=139;break;case 338:J=140;break;case 381:J=142;break;case 8216:J=145;break;case 8217:J=146;break;case 8220:J=147;break;case 8221:J=148;break;case 8226:J=149;break;case 8211:J=150;break;case 8212:J=151;break;case 732:J=152;break;case 8482:J=153;break;case 353:J=154;break;case 8250:J=155;break;case 339:J=156;break;case 382:J=158;break;case 376:J=159}return J}};var utils_encoding=jxg.A.Util.UTF8,alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pad="=";jxg.A.Util=jxg.A.Util||{},jxg.A.Util.Base64={_getByte:function(G,_){return 255&G.charCodeAt(_)},_getIndex:function(G,_){return alphabet.indexOf(G.charAt(_))},encode:function(G){var _,J,Z,Q,ee,te=[];for(Q=(Z=(ee=utils_encoding.encode(G)).length)%3,_=0;_<Z-Q;_+=3)J=this._getByte(ee,_)<<16|this._getByte(ee,_+1)<<8|this._getByte(ee,_+2),te.push(alphabet.charAt(J>>18),alphabet.charAt(J>>12&63),alphabet.charAt(J>>6&63),alphabet.charAt(63&J));switch(Q){case 1:J=this._getByte(ee,Z-1),te.push(alphabet.charAt(J>>2),alphabet.charAt(J<<4&63),pad,pad);break;case 2:J=this._getByte(ee,Z-2)<<8|this._getByte(ee,Z-1),te.push(alphabet.charAt(J>>10),alphabet.charAt(J>>4&63),alphabet.charAt(J<<2&63),pad)}return te.join("")},decode:function(G,_){var J,Z,Q,ee,te,ne,ie=[],re=[];if((Q=(J=G.replace(/[^A-Za-z0-9+/=]/g,"")).length)%4!=0)throw new Error("JSXGraph/utils/base64: Can't decode string (invalid input length).");for(J.charAt(Q-1)===pad&&(ee=1,J.charAt(Q-2)===pad&&(ee=2),Q-=4),Z=0;Z<Q;Z+=4)te=this._getIndex(J,Z)<<18|this._getIndex(J,Z+1)<<12|this._getIndex(J,Z+2)<<6|this._getIndex(J,Z+3),re.push(te>>16,te>>8&255,255&te),Z%1e4==0&&(ie.push(String.fromCharCode.apply(null,re)),re=[]);switch(ee){case 1:te=this._getIndex(J,Q)<<12|this._getIndex(J,Q+1)<<6|this._getIndex(J,Q+2),re.push(te>>10,te>>2&255);break;case 2:te=this._getIndex(J,Z)<<6|this._getIndex(J,Z+1),re.push(te>>4)}return ie.push(String.fromCharCode.apply(null,re)),ne=ie.join(""),_&&(ne=utils_encoding.decode(ne)),ne},decodeAsArray:function(G){var _,J=this.decode(G),Z=[],Q=J.length;for(_=0;_<Q;_++)Z[_]=J.charCodeAt(_);return Z}};var base64=jxg.A.Util.Base64;jxg.A.FileReader={handleRemoteFile:function(G,_,J,Z,Q,ee){var te=!1;try{te=new XMLHttpRequest,J.toLowerCase()==="raw"?te.overrideMimeType("text/plain; charset="+Q):te.overrideMimeType("text/xml; charset="+Q)}catch{try{te=new ActiveXObject("Msxml2.XMLHTTP")}catch{try{te=new ActiveXObject("Microsoft.XMLHTTP")}catch{te=!1}}}if(te){te.open("GET",G,Z),J.toLowerCase()==="raw"?this.cbp=function(){var ne=te;ne.readyState===4&&_(ne.responseText)}:this.cbp=function(){var ne=te,ie="";ne.readyState===4&&(ie=!utils_type.A.exists(ne.responseStream)||ne.responseText.slice(0,2)!=="PK"&&utils_encoding.asciiCharCodeAt(ne.responseText.slice(0,1),0)!==31?ne.responseText:base64.decode(jxgBinFileReader(ne)),this.parseString(ie,_,J,ee))},this.cb=utils_type.A.bind(this.cbp,this),te.onreadystatechange=this.cb;try{te.send(null)}catch{throw new Error("JSXGraph: A problem occurred while trying to read remote file '"+G+"'.")}}else jxg.A.debug("AJAX not activated!")},handleLocalFile:function(G,_,J,Z,Q,ee){utils_type.A.exists(Z)||(Z=!0),J.toLowerCase()==="raw"?this.cbp=function(ne){_(ne.target.result)}:this.cbp=function(ne){var ie=ne.target.result;this.parseString(ie,_,J,ee)},this.cb=utils_type.A.bind(this.cbp,this);var te=new FileReader;te.onload=this.cb,J.toLowerCase()==="raw"?te.readAsText(G):te.readAsText(G,Q)},parseFileContent:function(G,_,J,Z,Q,ee){utils_type.A.isString(G)||FileReader===void 0?this.handleRemoteFile(G,_,J,Z,Q,ee):this.handleLocalFile(G,_,J,Z,Q,ee)},parseString:function(G,_,J,Z){var Q;if(J=J.toLowerCase(),Q=jxg.A.readers[J],utils_type.A.exists(Q))new Q(_,G).read();else if(J!=="jessiecode")throw new Error("JSXGraph: There is no reader available for '"+J+"'.");utils_type.A.isFunction(Z)&&Z(_)}},!env.A.isMetroApp()&&env.A.isBrowser&&typeof navigator=="object"&&/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)&&document&&document.write&&document.write(`<script type="text/vbscript">
Function Base64Encode(inData)
  Const Base64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"
  Dim cOut, sOut, I
  For I = 1 To LenB(inData) Step 3
    Dim nGroup, pOut, sGroup
    nGroup = &H10000 * AscB(MidB(inData, I, 1)) + _
      &H100 * MyASC(MidB(inData, I + 1, 1)) + MyASC(MidB(inData, I + 2, 1))
    nGroup = Oct(nGroup)
    nGroup = String(8 - Len(nGroup), "0") & nGroup
    pOut = Mid(Base64, CLng("&o" & Mid(nGroup, 1, 2)) + 1, 1) + _
      Mid(Base64, CLng("&o" & Mid(nGroup, 3, 2)) + 1, 1) + _
      Mid(Base64, CLng("&o" & Mid(nGroup, 5, 2)) + 1, 1) + _
      Mid(Base64, CLng("&o" & Mid(nGroup, 7, 2)) + 1, 1)
    sOut = sOut + pOut
  Next
  Select Case LenB(inData) Mod 3
    Case 1: '8 bit final
      sOut = Left(sOut, Len(sOut) - 2) + "=="
    Case 2: '16 bit final
      sOut = Left(sOut, Len(sOut) - 1) + "="
  End Select
  Base64Encode = sOut
End Function

Function MyASC(OneChar)
  If OneChar = "" Then MyASC = 0 Else MyASC = AscB(OneChar)
End Function

Function jxgBinFileReader(xhr)
    Dim byteString
    Dim b64String
    Dim i
    byteString = xhr.responseBody
    ReDim byteArray(LenB(byteString))
    For i = 1 To LenB(byteString)
        byteArray(i-1) = AscB(MidB(byteString, i, 1))
    Next
    b64String = Base64Encode(byteString)
    jxgBinFileReader = b64String
End Function
<\/script>
`);var reader_file=jxg.A.FileReader,geonext=__webpack_require__(86),jessiecode=__webpack_require__(428),utils_color=__webpack_require__(873);jxg.A.Composition=function(G){var _,J=this,Z=["setAttribute","setParents","prepareUpdate","updateRenderer","update","fullUpdate","highlight","noHighlight"],Q=function(ee){return function(){var te;for(te in J.elements)J.elements.hasOwnProperty(te)&&utils_type.A.exists(J.elements[te][ee])&&J.elements[te][ee].apply(J.elements[te],arguments);return J}};for(_=0;_<Z.length;_++)this[Z[_]]=Q(Z[_]);for(_ in this.elements={},this.objects=this.elements,this.elementsByName={},this.objectsList=[],this.groups={},this.methodMap={setAttribute:"setAttribute",setProperty:"setAttribute",setParents:"setParents",add:"add",remove:"remove",select:"select"},G)G.hasOwnProperty(_)&&this.add(_,G[_]);this.dump=!0,this.subs={}},jxg.A.extend(jxg.A.Composition.prototype,{add:function(G,_){return!(utils_type.A.exists(this[G])||!utils_type.A.exists(_))&&(utils_type.A.exists(_.id)?this.elements[_.id]=_:this.elements[G]=_,utils_type.A.exists(_.name)&&(this.elementsByName[_.name]=_),_.on("attribute:name",this.nameListener,this),this.objectsList.push(_),this[G]=_,this.methodMap[G]=_,!0)},remove:function(G){var _,J=!1;for(_ in this.elements)if(this.elements.hasOwnProperty(_)&&this.elements[_].id===this[G].id){J=!0;break}return J&&(delete this.elements[this[G].id],delete this[G]),J},nameListener:function(G,_,J){delete this.elementsByName[G],this.elementsByName[_]=J},select:function(G){return utils_type.A.exists(jxg.A.Board)?jxg.A.Board.prototype.select.call(this,G):new jxg.A.Composition},getParents:function(){return this.parents},getType:function(){return this.elType},getAttributes:function(){var G;for(G in this.subs)this.subs.hasOwnProperty(G)&&this.subs[G].visProp;return this.attr}});var composition=jxg.A.Composition;jxg.A.Board=function(G,_,J,Z,Q,ee,te,ne,ie,re,oe){if(this.BOARD_MODE_NONE=0,this.BOARD_MODE_DRAG=1,this.BOARD_MODE_MOVE_ORIGIN=2,this.BOARD_MODE_ZOOM=17,this.BOARD_QUALITY_LOW=1,this.BOARD_QUALITY_HIGH=2,utils_type.A.exists(oe.document)&&oe.document!==!1?this.document=oe.document:env.A.isBrowser&&(this.document=document),this.container="",this.id="",this.containerObj=null,utils_type.A.isString(G)?(this.container=G,this.containerObj=env.A.isBrowser?this.document.getElementById(this.container):null):env.A.isBrowser&&(this.containerObj=G,this.container=this.containerObj.getAttribute("id"),this.container===null&&(this.container="null"+parseInt(16777216*Math.random()).toString())),env.A.isBrowser&&_.type!=="no"&&this.containerObj===null)throw new Error(`
JSXGraph: HTML container element "`+G+'" not found.');utils_type.A.exists(J)&&J!==""&&env.A.isBrowser&&!utils_type.A.exists(this.document.getElementById(J))?this.id=J:this.id=this.generateId(),this.renderer=_,this.grids=[],this.options=utils_type.A.deepCopy(src_options.A),this.attr=oe,this.attr.theme!=="default"&&utils_type.A.exists(jxg.A.themes[this.attr.theme])&&utils_type.A.mergeAttr(this.options,jxg.A.themes[this.attr.theme],!0),this.dimension=2,this.jc=new jessiecode.A,this.jc.use(this),this.origin={},this.origin.usrCoords=[1,0,0],this.origin.scrCoords=[1,Z[0],Z[1]],this.zoomX=Q,this.zoomY=ee,this.unitX=te*this.zoomX,this.unitY=ne*this.zoomY,this.keepaspectratio=!1,this.canvasWidth=ie,this.canvasHeight=re,utils_event.A.eventify(this),this.hooks=[],this.dependentBoards=[],this.inUpdate=!1,this.objects={},this.objectsList=[],this.groups={},this.animationObjects={},this.highlightedObjects={},this.numObjects=0,this.elementsByName={},this.mode=this.BOARD_MODE_NONE,this.updateQuality=this.BOARD_QUALITY_HIGH,this.isSuspendedRedraw=!1,this.calculateSnapSizes(),this.drag_dx=0,this.drag_dy=0,this.drag_position=[0,0],this.mouse={},this.touches=[],this.xmlString="",this.cPos=[],this.touchMoveLast=0,this.touchMoveLastId=1/0,this.positionAccessLast=0,this.downObjects=[],this.clickObjects={},this.focusObjects=[],(this.attr.showcopyright||this.attr.showlogo)&&this.renderer.displayLogo(constants.A.licenseLogo,parseInt(this.options.text.fontSize,10),this),this.attr.showcopyright&&this.renderer.displayCopyright(constants.A.licenseText,parseInt(this.options.text.fontSize,10)),this.needsFullUpdate=!1,this.reducedUpdate=!1,this.currentCBDef="none",this.geonextCompatibilityMode=!1,this.options.text.useASCIIMathML&&translateASCIIMath?init():this.options.text.useASCIIMathML=!1,this.hasMouseHandlers=!1,this.hasTouchHandlers=!1,this.hasPointerHandlers=!1,this.hasWheelHandlers=!1,this.hasMouseUp=!1,this.hasTouchEnd=!1,this.hasPointerUp=!1,this.resizeHandlers=[],this._drag_offset=[0,0],this._inputDevice="mouse",this._board_touches=[],this.selectingMode=!1,this.isSelecting=!1,this._isScrolling=!1,this._isResizing=!1,this._change3DView=!1,this.selectingBox=[[0,0],[0,0]],this.userLog=[],this.mathLib=Math,this.mathLibJXG=jxg.A.Math,this.attr.registerevents===!0?this.attr.registerevents={fullscreen:!0,keyboard:!0,pointer:!0,resize:!0,wheel:!0}:typeof this.attr.registerevents=="object"&&(utils_type.A.exists(this.attr.registerevents.fullscreen)||(this.attr.registerevents.fullscreen=!0),utils_type.A.exists(this.attr.registerevents.keyboard)||(this.attr.registerevents.keyboard=!0),utils_type.A.exists(this.attr.registerevents.pointer)||(this.attr.registerevents.pointer=!0),utils_type.A.exists(this.attr.registerevents.resize)||(this.attr.registerevents.resize=!0),utils_type.A.exists(this.attr.registerevents.wheel)||(this.attr.registerevents.wheel=!0)),this.attr.registerevents!==!1&&(this.attr.registerevents.fullscreen&&this.addFullscreenEventHandlers(),this.attr.registerevents.keyboard&&this.addKeyboardEventHandlers(),this.attr.registerevents.pointer&&this.addEventHandlers(),this.attr.registerevents.resize&&this.addResizeEventHandlers(),this.attr.registerevents.wheel&&this.addWheelEventHandlers()),this.methodMap={update:"update",fullUpdate:"fullUpdate",on:"on",off:"off",trigger:"trigger",setAttribute:"setAttribute",setBoundingBox:"setBoundingBox",setView:"setBoundingBox",getBoundingBox:"getBoundingBox",BoundingBox:"getBoundingBox",getView:"getBoundingBox",View:"getBoundingBox",migratePoint:"migratePoint",colorblind:"emulateColorblindness",suspendUpdate:"suspendUpdate",unsuspendUpdate:"unsuspendUpdate",clearTraces:"clearTraces",left:"clickLeftArrow",right:"clickRightArrow",up:"clickUpArrow",down:"clickDownArrow",zoomIn:"zoomIn",zoomOut:"zoomOut",zoom100:"zoom100",zoomElements:"zoomElements",remove:"removeObject",removeObject:"removeObject"}},jxg.A.extend(jxg.A.Board.prototype,{generateName:function(G){var _,J,Z=this.attr.maxnamelength,Q="",ee="",te=[],ne="";if(G.type===constants.A.OBJECT_TYPE_TICKS)return"";for(_=utils_type.A.isPoint(G)||utils_type.A.isPoint3D(G)?["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]:G.type===constants.A.OBJECT_TYPE_ANGLE?["","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;"]:["","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],utils_type.A.isPoint(G)||utils_type.A.isPoint3D(G)||G.elementClass===constants.A.OBJECT_CLASS_LINE||G.type===constants.A.OBJECT_TYPE_ANGLE||(Q=G.type===constants.A.OBJECT_TYPE_POLYGON?"P_{":G.elementClass===constants.A.OBJECT_CLASS_CIRCLE?"k_{":G.elementClass===constants.A.OBJECT_CLASS_TEXT?"t_{":"s_{",ee="}"),J=0;J<Z;J++)te[J]=0;for(;te[Z-1]<_.length;){for(te[0]=1;te[0]<_.length;te[0]++){for(ne=Q,J=Z;J>0;J--)ne+=_[te[J-1]];if(!utils_type.A.exists(this.elementsByName[ne+ee]))return ne+ee}for(te[0]=_.length,J=1;J<Z;J++)te[J-1]===_.length&&(te[J-1]=1,te[J]+=1)}return""},generateId:function(){for(var G=1;utils_type.A.exists(jxg.A.boards["jxgBoard"+G]);)G=Math.round(16777216*Math.random());return"jxgBoard"+G},setId:function(G,_){var J,Z=this.numObjects,Q=G.id;if(this.numObjects+=1,Q===""||!utils_type.A.exists(Q))for(Q=this.id+_+Z;utils_type.A.exists(this.objects[Q]);)J=Math.round(65535*Math.random()),Q=this.id+_+Z+"-"+J;return G.id=Q,this.objects[Q]=G,G._pos=this.objectsList.length,this.objectsList[this.objectsList.length]=G,Q},finalizeAdding:function(G){G.evalVisProp("visible")===!1&&this.renderer.display(G,!1)},finalizeLabel:function(G){G.hasLabel&&!G.label.evalVisProp("islabel")&&G.label.evalVisProp("visible")===!1&&this.renderer.display(G.label,!1)},checkFrameRate:function(G){var _=!1,J=new Date().getTime();return utils_type.A.exists(G.pointerId)&&this.touchMoveLastId!==G.pointerId&&(_=!0,this.touchMoveLastId=G.pointerId),!_&&(J-this.touchMoveLast)*this.attr.maxframerate>=1e3&&(_=!0),_&&(this.touchMoveLast=J),_},getCoordsTopLeftCorner:function(){var G,_,J,Z,Q,ee=this.document.ownerDocument||this.document,te=ee.documentElement||this.document.body.parentNode,ne=ee.body,ie=this.containerObj;if(this.cPos.length>0&&(this.mode===this.BOARD_MODE_DRAG||this.mode===this.BOARD_MODE_MOVE_ORIGIN||new Date().getTime()-this.positionAccessLast<1e3))return this.cPos;if(this.positionAccessLast=new Date().getTime(),ie.getBoundingClientRect){for(J=ie.getBoundingClientRect(),Z=1,Q=ie;Q&&utils_type.A.exists(Q.parentNode);)utils_type.A.exists(Q.style)&&utils_type.A.exists(Q.style.zoom)&&Q.style.zoom!==""&&(Z*=parseFloat(Q.style.zoom)),Q=Q.parentNode;return(G=[J.left*Z,J.top*Z])[0]+=env.A.getProp(ie,"border-left-width"),G[1]+=env.A.getProp(ie,"border-top-width"),this.renderer.type!=="vml"&&(G[0]+=env.A.getProp(ie,"padding-left"),G[1]+=env.A.getProp(ie,"padding-top")),this.cPos=G.slice(),this.cPos}return G=env.A.getOffset(ie),_=this.document.documentElement.ownerDocument,!this.containerObj.currentStyle&&_.defaultView&&(G[0]+=env.A.getProp(te,"margin-left"),G[1]+=env.A.getProp(te,"margin-top"),G[0]+=env.A.getProp(te,"border-left-width"),G[1]+=env.A.getProp(te,"border-top-width"),G[0]+=env.A.getProp(te,"padding-left"),G[1]+=env.A.getProp(te,"padding-top")),ne&&(G[0]+=env.A.getProp(ne,"left"),G[1]+=env.A.getProp(ne,"top")),typeof google=="object"&&google.translate&&(G[0]+=10,G[1]+=25),G[0]+=env.A.getProp(ie,"border-left-width"),G[1]+=env.A.getProp(ie,"border-top-width"),this.renderer.type!=="vml"&&(G[0]+=env.A.getProp(ie,"padding-left"),G[1]+=env.A.getProp(ie,"padding-top")),G[0]+=this.attr.offsetx,G[1]+=this.attr.offsety,this.cPos=G.slice(),this.cPos},getPointLoc:function(G,_){var J,Z,Q,ee;return J=this.getBoundingBox(),(Z=G).length===2&&Z.unshift(void 0),Q=[0,0],ee=_||0,utils_type.A.isNumber(ee)&&(ee=[ee,ee,ee,ee]),Z[1]>J[2]-ee[1]&&(Q[0]=1),Z[1]<J[0]+ee[3]&&(Q[0]=-1),Z[2]>J[1]-ee[0]&&(Q[1]=1),Z[2]<J[3]+ee[2]&&(Q[1]=-1),Q},getLocationOrigin:function(G){return this.getPointLoc([0,0],G)},getMousePosition:function(G,_){var J,Z,Q=this.getCoordsTopLeftCorner();return J=env.A.getPosition(G,_,this.document),this.updateCSSTransforms(),Z=[1,J[0]-Q[0],J[1]-Q[1]],(Z=math.A.matVecMult(this.cssTransMat,Z))[1]/=Z[0],Z[2]/=Z[0],[Z[1],Z[2]]},initMoveOrigin:function(G,_){this.drag_dx=G-this.origin.scrCoords[1],this.drag_dy=_-this.origin.scrCoords[2],this.mode=this.BOARD_MODE_MOVE_ORIGIN,this.updateQuality=this.BOARD_QUALITY_LOW},initMoveObject:function(G,_,J,Z){var Q,ee,te,ne=[],ie=[],re=this.objectsList.length,oe={visProp:{layer:-1e4}};for(this._shiftKey=J.shiftKey,this._ctrlKey=J.ctrlKey,ee=0;ee<re;ee++)te=(Q=this.objectsList[ee]).hasPoint&&Q.hasPoint(G,_),Q.visPropCalc.visible&&te&&(Q.triggerEventHandlers([Z+"down","down"],[J]),this.downObjects.push(Q)),te&&Q.isDraggable&&Q.visPropCalc.visible&&(this.geonextCompatibilityMode&&(utils_type.A.isPoint(Q)||Q.elementClass===constants.A.OBJECT_CLASS_TEXT)||!this.geonextCompatibilityMode)&&!Q.evalVisProp("fixed")&&(Q.visProp.layer>oe.visProp.layer||Q.visProp.layer===oe.visProp.layer&&Q.lastDragTime.getTime()>=oe.lastDragTime.getTime())&&(this.attr.ignorelabels&&utils_type.A.exists(oe.label)&&Q===oe.label||(oe=Q,ne.push(oe),utils_type.A.exists(oe.coords)?oe.elementClass===constants.A.OBJECT_CLASS_POINT||oe.relativeCoords?ie.push(statistics.A.subtract(oe.coords.scrCoords.slice(1),[G,_])):ie.push(statistics.A.subtract(oe.actualCoords.scrCoords.slice(1),[G,_])):ie.push([0,0])));return this.attr.drag.enabled&&ne.length>0&&(this.mode=this.BOARD_MODE_DRAG),this.attr.takefirst?(ne.length=1,this._drag_offset=ie[0]):(ne=ne.slice(-1),this._drag_offset=ie[ie.length-1]),this._drag_offset||(this._drag_offset=[0,0]),this.renderer.type==="svg"&&utils_type.A.exists(ne[0])&&ne[0].evalVisProp("dragtotopoflayer")&&ne.length===1&&utils_type.A.exists(ne[0].rendNode)&&ne[0].rendNode.parentNode.appendChild(ne[0].rendNode),ne.length>=1&&(ne[0].highlight(!0),this.triggerEventHandlers(["mousehit","hit"],[J,ne[0]])),ne},moveObject:function(G,_,J,Z,Q){var ee,te,ne,ie=new base_coords.A(constants.A.COORDS_BY_SCREEN,this.getScrCoordsOfMouse(G,_),this);J&&J.obj&&((ee=J.obj).coords&&(te=ee.coords.scrCoords.slice()),this.addLogEntry("drag",ee,ie.usrCoords.slice(1)),this.drag_position=[ie.scrCoords[1],ie.scrCoords[2]],this.drag_position=statistics.A.add(this.drag_position,this._drag_offset),this._shiftKey=Z.shiftKey,this._ctrlKey=Z.ctrlKey,utils_type.A.exists(ee.coords)?ee.setPositionDirectly(constants.A.COORDS_BY_SCREEN,this.drag_position,[G,_]):(this.displayInfobox(!1),isNaN(J.targets[0].Xprev+J.targets[0].Yprev)||ee.setPositionDirectly(constants.A.COORDS_BY_SCREEN,[ie.scrCoords[1],ie.scrCoords[2]],[J.targets[0].Xprev,J.targets[0].Yprev]),J.targets[0].Xprev=ie.scrCoords[1],J.targets[0].Yprev=ie.scrCoords[2]),utils_type.A.exists(ee.coords)&&(ee.prepareUpdate().update(!1).updateRenderer(),this.updateInfobox(ee),ee.prepareUpdate().update(!0).updateRenderer()),ee.coords&&(ne=ee.coords.scrCoords),ee.coords&&te[1]===ne[1]&&te[2]===ne[2]||(ee.triggerEventHandlers([Q+"drag","drag"],[Z]),this.update(ee)),ee.highlight(!0),this.triggerEventHandlers(["mousehit","hit"],[Z,ee]),ee.lastDragTime=new Date)},twoFingerMove:function(G,_,J){var Z;utils_type.A.exists(G)&&utils_type.A.exists(G.obj)&&((Z=G.obj).elementClass===constants.A.OBJECT_CLASS_LINE||Z.type===constants.A.OBJECT_TYPE_POLYGON?this.twoFingerTouchObject(G.targets,Z,_):Z.elementClass===constants.A.OBJECT_CLASS_CIRCLE&&this.twoFingerTouchCircle(G.targets,Z,_),J&&Z.triggerEventHandlers(["touchdrag","drag"],[J]))},getTwoFingerTransform(G,_,J,Z){var Q,ee,te,ne,ie,re,oe,se,ae,le,ue,de,pe,fe,_e,ye,be;return ee=(Q=new base_coords.A(constants.A.COORDS_BY_SCREEN,[G.Xprev,G.Yprev],this).usrCoords)[1],te=Q[2],ne=(Q=new base_coords.A(constants.A.COORDS_BY_SCREEN,[_.Xprev,_.Yprev],this).usrCoords)[1],ie=Q[2],se=(Q=new base_coords.A(constants.A.COORDS_BY_SCREEN,[G.X,G.Y],this).usrCoords)[1],ae=Q[2],fe=((de=(le=(Q=new base_coords.A(constants.A.COORDS_BY_SCREEN,[_.X,_.Y],this).usrCoords)[1])-se)*(re=ne-ee)+(pe=(ue=Q[2])-ae)*(oe=ie-te))/(ye=re*re+oe*oe),_e=(pe*re-de*oe)/ye,J||(fe/=be=math.A.hypot(fe,_e),_e/=be),Z||(_e=0),[1,0,0,.5*(se+le-fe*(ee+ne)+_e*(te+ie)),fe,-_e,.5*(ae+ue-_e*(ee+ne)-fe*(te+ie)),_e,fe]},twoFingerTouchObject:function(G,_,J){var Z,Q,ee,te,ne,ie=!1;if(utils_type.A.exists(G[0])&&utils_type.A.exists(G[1])&&!isNaN(G[0].Xprev+G[0].Yprev+G[1].Xprev+G[1].Yprev)){if(Q=this.getTwoFingerTransform(G[0],G[1],_.evalVisProp("scalable"),_.evalVisProp("rotatable")),(Z=this.create("transform",Q,{type:"generic"})).update(),_.elementClass===constants.A.OBJECT_CLASS_LINE)ee=[],_.point1.draggable()&&ee.push(_.point1),_.point2.draggable()&&ee.push(_.point2),Z.applyOnce(ee);else if(_.type===constants.A.OBJECT_TYPE_POLYGON){for(ne=_.vertices.length-1,ie=_.evalVisProp("snaptogrid")||_.evalVisProp("snaptopoints"),te=0;te<ne&&!ie;++te)ie=(ie=ie||_.vertices[te].evalVisProp("snaptogrid")||_.vertices[te].evalVisProp("snaptopoints"))||!_.vertices[te].draggable();if(!ie){for(ee=[],te=0;te<ne;++te)_.vertices[te].draggable()&&ee.push(_.vertices[te]);Z.applyOnce(ee)}}this.update(),_.highlight(!0)}},twoFingerTouchCircle:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,le;_.method!=="pointCircle"&&_.method!=="pointLine"&&utils_type.A.exists(G[0])&&utils_type.A.exists(G[1])&&!isNaN(G[0].Xprev+G[0].Yprev+G[1].Xprev+G[1].Yprev)&&(J===G[0].num?(Z=G[1],Q=G[0]):(Z=G[0],Q=G[1]),ne=new base_coords.A(constants.A.COORDS_BY_SCREEN,[Z.Xprev,Z.Yprev],this).usrCoords,te=new base_coords.A(constants.A.COORDS_BY_SCREEN,[Q.Xprev,Q.Yprev],this).usrCoords,ee=new base_coords.A(constants.A.COORDS_BY_SCREEN,[Q.X,Q.Y],this).usrCoords,re=geometry.A.rad(te.slice(1),ne.slice(1),ee.slice(1)),oe=this.create("transform",[-ne[1],-ne[2]],{type:"translate"}),se=this.create("transform",[re],{type:"rotate"}),oe.melt(se),_.evalVisProp("scalable")&&(ie=geometry.A.distance(ne,ee)/geometry.A.distance(ne,te),ae=this.create("transform",[ie,ie],{type:"scale"}),oe.melt(ae)),le=this.create("transform",[ne[1],ne[2]],{type:"translate"}),oe.melt(le),_.center.draggable()&&oe.applyOnce([_.center]),_.method==="twoPoints"?_.point2.draggable()&&oe.applyOnce([_.point2]):_.method==="pointRadius"&&utils_type.A.isNumber(_.updateRadius.origin)&&_.setRadius(_.radius*ie),this.update(_.center),_.highlight(!0))},highlightElements:function(G,_,J,Z){var Q,ee,te,ne={},ie=this.objectsList.length;for(Q=0;Q<ie;Q++)te=(ee=this.objectsList[Q]).id,utils_type.A.exists(ee.hasPoint)&&ee.visPropCalc.visible&&ee.hasPoint(G,_)&&(this.updateInfobox(ee),utils_type.A.exists(this.highlightedObjects[te])||(ne[te]=ee,ee.highlight(),this.triggerEventHandlers(["mousehit","hit"],[J,ee,Z])),ee.mouseover?ee.triggerEventHandlers(["mousemove","move"],[J]):(ee.triggerEventHandlers(["mouseover","over"],[J]),ee.mouseover=!0));for(Q=0;Q<ie;Q++)te=(ee=this.objectsList[Q]).id,ee.mouseover&&(ne[te]||(ee.triggerEventHandlers(["mouseout","out"],[J]),ee.mouseover=!1))},saveStartPos:function(G,_){var J,Z,Q=[];if(G.type===constants.A.OBJECT_TYPE_TICKS)Q.push([1,NaN,NaN]);else if(G.elementClass===constants.A.OBJECT_CLASS_LINE)Q.push(G.point1.coords.usrCoords),Q.push(G.point2.coords.usrCoords);else if(G.elementClass===constants.A.OBJECT_CLASS_CIRCLE)Q.push(G.center.coords.usrCoords),G.method==="twoPoints"&&Q.push(G.point2.coords.usrCoords);else if(G.type===constants.A.OBJECT_TYPE_POLYGON)for(Z=G.vertices.length-1,J=0;J<Z;J++)Q.push(G.vertices[J].coords.usrCoords);else if(G.type===constants.A.OBJECT_TYPE_SECTOR)Q.push(G.point1.coords.usrCoords),Q.push(G.point2.coords.usrCoords),Q.push(G.point3.coords.usrCoords);else if(utils_type.A.isPoint(G)||G.type===constants.A.OBJECT_TYPE_GLIDER)Q.push(G.coords.usrCoords);else if(G.elementClass===constants.A.OBJECT_CLASS_CURVE)G.points.length>0&&Q.push(G.points[0].usrCoords);else try{Q.push(G.coords.usrCoords)}catch(ee){jxg.A.debug("JSXGraph+ saveStartPos: obj.coords.usrCoords not available: "+ee)}for(Z=Q.length,J=0;J<Z;J++)_.Zstart.push(Q[J][0]),_.Xstart.push(Q[J][1]),_.Ystart.push(Q[J][2])},mouseOriginMoveStart:function(G){var _,J;return(_=this._isRequiredKeyPressed(G,"pan"))&&(J=this.getMousePosition(G),this.initMoveOrigin(J[0],J[1])),_},mouseOriginMove:function(G){var _,J=this.mode===this.BOARD_MODE_MOVE_ORIGIN;return J&&(_=this.getMousePosition(G),this.moveOrigin(_[0],_[1],!0)),J},touchStartMoveOriginOneFinger:function(G){var _,J,Z=G.touches;return(_=this.attr.pan.enabled&&!this.attr.pan.needtwofingers&&Z.length===1)&&(J=this.getMousePosition(G,0),this.initMoveOrigin(J[0],J[1])),_},touchOriginMove:function(G){var _,J=this.mode===this.BOARD_MODE_MOVE_ORIGIN;return J&&(_=this.getMousePosition(G,0),this.moveOrigin(_[0],_[1],!0)),J},originMoveEnd:function(){this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode=this.BOARD_MODE_NONE},suppressDefault:function(G){return utils_type.A.exists(G)&&G.preventDefault(),!1},addEventHandlers:function(){env.A.supportsPointerEvents()?this.addPointerEventHandlers():(this.addMouseEventHandlers(),this.addTouchEventHandlers()),this.containerObj!==null&&env.A.addEvent(this.containerObj,"contextmenu",this.suppressDefault,this)},removeEventHandlers:function(){(this.hasPointerHandlers||this.hasMouseHandlers||this.hasTouchHandlers)&&this.containerObj!==null&&env.A.removeEvent(this.containerObj,"contextmenu",this.suppressDefault,this),this.removeMouseEventHandlers(),this.removeTouchEventHandlers(),this.removePointerEventHandlers(),this.removeFullscreenEventHandlers(),this.removeKeyboardEventHandlers(),this.removeResizeEventHandlers()},addResizeEventHandlers:function(){if(this.resizeHandlers=[],env.A.isBrowser){try{this.startResizeObserver(),this.resizeHandlers.push("resizeobserver")}catch{env.A.addEvent(window,"resize",this.resizeListener,this),this.startIntersectionObserver(),this.resizeHandlers.push("resize")}env.A.addEvent(window,"scroll",this.scrollListener,this),this.resizeHandlers.push("scroll");try{window.matchMedia("print").addEventListener("change",this.printListenerMatch.bind(this)),window.matchMedia("screen").addEventListener("change",this.printListenerMatch.bind(this)),this.resizeHandlers.push("print")}catch(G){jxg.A.debug("Error adding printListener",G)}}},removeResizeEventHandlers:function(){var G;if(this.resizeHandlers.length>0&&env.A.isBrowser){for(G=0;G<this.resizeHandlers.length;G++)switch(this.resizeHandlers[G]){case"resizeobserver":utils_type.A.exists(this.resizeObserver)&&this.stopResizeObserver();break;case"resize":env.A.removeEvent(window,"resize",this.resizeListener,this),utils_type.A.exists(this.intersectionObserver)&&this.stopIntersectionObserver();break;case"scroll":env.A.removeEvent(window,"scroll",this.scrollListener,this);break;case"print":window.matchMedia("print").removeEventListener("change",this.printListenerMatch.bind(this),!1),window.matchMedia("screen").removeEventListener("change",this.printListenerMatch.bind(this),!1)}this.resizeHandlers=[]}},addPointerEventHandlers:function(){if(!this.hasPointerHandlers&&env.A.isBrowser){var G=this.attr.movetarget||this.containerObj;window.navigator.msPointerEnabled?(env.A.addEvent(this.containerObj,"MSPointerDown",this.pointerDownListener,this),env.A.addEvent(G,"MSPointerMove",this.pointerMoveListener,this)):(env.A.addEvent(this.containerObj,"pointerdown",this.pointerDownListener,this),env.A.addEvent(G,"pointermove",this.pointerMoveListener,this),env.A.addEvent(G,"pointerleave",this.pointerLeaveListener,this),env.A.addEvent(G,"click",this.pointerClickListener,this),env.A.addEvent(G,"dblclick",this.pointerDblClickListener,this)),this.containerObj!==null&&(this.containerObj.style.touchAction="none"),this.hasPointerHandlers=!0}},addMouseEventHandlers:function(){if(!this.hasMouseHandlers&&env.A.isBrowser){var G=this.attr.movetarget||this.containerObj;env.A.addEvent(this.containerObj,"mousedown",this.mouseDownListener,this),env.A.addEvent(G,"mousemove",this.mouseMoveListener,this),env.A.addEvent(G,"click",this.mouseClickListener,this),env.A.addEvent(G,"dblclick",this.mouseDblClickListener,this),this.hasMouseHandlers=!0}},addTouchEventHandlers:function(G){if(!this.hasTouchHandlers&&env.A.isBrowser){var _=this.attr.movetarget||this.containerObj;env.A.addEvent(this.containerObj,"touchstart",this.touchStartListener,this),env.A.addEvent(_,"touchmove",this.touchMoveListener,this),this.hasTouchHandlers=!0}},addWheelEventHandlers:function(){!this.hasWheelHandlers&&env.A.isBrowser&&(env.A.addEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),env.A.addEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this),this.hasWheelHandlers=!0)},addFullscreenEventHandlers:function(){var G,_=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"],J=_.length;if(!this.hasFullscreenEventHandlers&&env.A.isBrowser){for(G=0;G<J;G++)env.A.addEvent(this.document,_[G],this.fullscreenListener,this);this.hasFullscreenEventHandlers=!0}},addKeyboardEventHandlers:function(){this.attr.keyboard.enabled&&!this.hasKeyboardHandlers&&env.A.isBrowser&&(env.A.addEvent(this.containerObj,"keydown",this.keyDownListener,this),env.A.addEvent(this.containerObj,"focusin",this.keyFocusInListener,this),env.A.addEvent(this.containerObj,"focusout",this.keyFocusOutListener,this),this.hasKeyboardHandlers=!0)},removeKeyboardEventHandlers:function(){this.hasKeyboardHandlers&&env.A.isBrowser&&(env.A.removeEvent(this.containerObj,"keydown",this.keyDownListener,this),env.A.removeEvent(this.containerObj,"focusin",this.keyFocusInListener,this),env.A.removeEvent(this.containerObj,"focusout",this.keyFocusOutListener,this),this.hasKeyboardHandlers=!1)},removeFullscreenEventHandlers:function(){var G,_=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"],J=_.length;if(this.hasFullscreenEventHandlers&&env.A.isBrowser){for(G=0;G<J;G++)env.A.removeEvent(this.document,_[G],this.fullscreenListener,this);this.hasFullscreenEventHandlers=!1}},removePointerEventHandlers:function(){if(this.hasPointerHandlers&&env.A.isBrowser){var G=this.attr.movetarget||this.containerObj;window.navigator.msPointerEnabled?(env.A.removeEvent(this.containerObj,"MSPointerDown",this.pointerDownListener,this),env.A.removeEvent(G,"MSPointerMove",this.pointerMoveListener,this)):(env.A.removeEvent(this.containerObj,"pointerdown",this.pointerDownListener,this),env.A.removeEvent(G,"pointermove",this.pointerMoveListener,this),env.A.removeEvent(G,"pointerleave",this.pointerLeaveListener,this),env.A.removeEvent(G,"click",this.pointerClickListener,this),env.A.removeEvent(G,"dblclick",this.pointerDblClickListener,this)),this.hasWheelHandlers&&(env.A.removeEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),env.A.removeEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this)),this.hasPointerUp&&(window.navigator.msPointerEnabled?env.A.removeEvent(this.document,"MSPointerUp",this.pointerUpListener,this):(env.A.removeEvent(this.document,"pointerup",this.pointerUpListener,this),env.A.removeEvent(this.document,"pointercancel",this.pointerUpListener,this)),this.hasPointerUp=!1),this.hasPointerHandlers=!1}},removeMouseEventHandlers:function(){if(this.hasMouseHandlers&&env.A.isBrowser){var G=this.attr.movetarget||this.containerObj;env.A.removeEvent(this.containerObj,"mousedown",this.mouseDownListener,this),env.A.removeEvent(G,"mousemove",this.mouseMoveListener,this),env.A.removeEvent(G,"click",this.mouseClickListener,this),env.A.removeEvent(G,"dblclick",this.mouseDblClickListener,this),this.hasMouseUp&&(env.A.removeEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!1),this.hasWheelHandlers&&(env.A.removeEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),env.A.removeEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this)),this.hasMouseHandlers=!1}},removeTouchEventHandlers:function(){if(this.hasTouchHandlers&&env.A.isBrowser){var G=this.attr.movetarget||this.containerObj;env.A.removeEvent(this.containerObj,"touchstart",this.touchStartListener,this),env.A.removeEvent(G,"touchmove",this.touchMoveListener,this),this.hasTouchEnd&&(env.A.removeEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!1),this.hasTouchHandlers=!1}},clickLeftArrow:function(){return this.moveOrigin(this.origin.scrCoords[1]+.1*this.canvasWidth,this.origin.scrCoords[2]),this},clickRightArrow:function(){return this.moveOrigin(this.origin.scrCoords[1]-.1*this.canvasWidth,this.origin.scrCoords[2]),this},clickUpArrow:function(){return this.moveOrigin(this.origin.scrCoords[1],this.origin.scrCoords[2]-.1*this.canvasHeight),this},clickDownArrow:function(){return this.moveOrigin(this.origin.scrCoords[1],this.origin.scrCoords[2]+.1*this.canvasHeight),this},gestureChangeListener:function(G){var _,J,Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue=!1,de=this.attr.zoom.factorx,pe=this.attr.zoom.factory,fe=!1;return this.mode!==this.BOARD_MODE_ZOOM||(G.preventDefault(),te=geometry.A.distance([G.touches[0].clientX,G.touches[0].clientY],[G.touches[1].clientX,G.touches[1].clientY],2),G.scale===void 0&&(G.scale=te/this.prevDist),!!utils_type.A.exists(this.prevCoords)&&(J=[G.touches[0].clientX-this.prevCoords[0][0],G.touches[0].clientY-this.prevCoords[0][1]],Z=[G.touches[1].clientX-this.prevCoords[1][0],G.touches[1].clientY-this.prevCoords[1][1]],J[0]*J[0]+J[1]*J[1]<100&&Z[0]*Z[0]+Z[1]*Z[1]<100||(Q=geometry.A.rad(J,[0,0],Z),this.isPreviousGesture!=="pan"&&Math.abs(Q)>.2*Math.PI&&Math.abs(Q)<1.8*Math.PI&&(ue=!0),this.isPreviousGesture==="pan"||ue||(Math.abs(G.scale)<.77||Math.abs(G.scale)>1.3)&&(ue=!0),ee=G.scale/this.prevScale,this.prevScale=G.scale,this.prevCoords=[[G.touches[0].clientX,G.touches[0].clientY],[G.touches[1].clientX,G.touches[1].clientY]],_=new base_coords.A(constants.A.COORDS_BY_SCREEN,this.getMousePosition(G,0),this),this.attr.pan.enabled&&this.attr.pan.needtwofingers&&!ue?(this.isPreviousGesture="pan",this.moveOrigin(_.scrCoords[1],_.scrCoords[2],!0)):this.attr.zoom.enabled&&Math.abs(ee-1)<.5&&(fe=!1,re=this.attr.zoom.center,(this.attr.zoom.pinchhorizontal||this.attr.zoom.pinchvertical)&&(oe=Math.abs(G.touches[0].clientX-G.touches[1].clientX),se=Math.abs(G.touches[0].clientY-G.touches[1].clientY),ne=Math.abs(Math.atan2(se,oe)),ie=Math.PI*this.attr.zoom.pinchsensitivity/90),!this.keepaspectratio&&this.attr.zoom.pinchhorizontal&&ne<ie?(this.attr.zoom.factorx=ee,this.attr.zoom.factory=1,ae=0,le=0,fe=!0):!this.keepaspectratio&&this.attr.zoom.pinchvertical&&Math.abs(ne-.5*Math.PI)<ie?(this.attr.zoom.factorx=1,this.attr.zoom.factory=ee,ae=0,le=0,fe=!0):this.attr.zoom.pinch&&(this.attr.zoom.factorx=ee,this.attr.zoom.factory=ee,ae=_.usrCoords[1],le=_.usrCoords[2],fe=!0),fe&&(re==="board"?this.zoomIn():this.zoomIn(ae,le),this.attr.zoom.factorx=de,this.attr.zoom.factory=pe))),!1))},gestureStartListener:function(G){var _;return G.preventDefault(),this.prevScale=1,this.prevDist=geometry.A.distance([G.touches[0].clientX,G.touches[0].clientY],[G.touches[1].clientX,G.touches[1].clientY],2),this.prevCoords=[[G.touches[0].clientX,G.touches[0].clientY],[G.touches[1].clientX,G.touches[1].clientY]],this.isPreviousGesture="none",_=this.getMousePosition(G,0),this.initMoveOrigin(_[0],_[1]),this.mode=this.BOARD_MODE_ZOOM,!1},_isRequiredKeyPressed:function(G,_){var J=this.attr[_];return!!J.enabled&&!(!(J.needshift&&G.shiftKey||!J.needshift&&!G.shiftKey)||!(J.needctrl&&G.ctrlKey||!J.needctrl&&!G.ctrlKey))},_isPointerRegistered:function(G){var _,J=this._board_touches.length;for(_=0;_<J;_++)if(this._board_touches[_].pointerId===G.pointerId)return!0;return!1},_pointerStorePosition:function(G){var _,J;for(_=0,J=!1;_<this._board_touches.length;_++)if(this._board_touches[_].pointerId===G.pointerId){this._board_touches[_].clientX=G.clientX,this._board_touches[_].clientY=G.clientY,J=!0;break}return!J&&this._board_touches.length<2&&this._board_touches.push({pointerId:G.pointerId,clientX:G.clientX,clientY:G.clientY}),this},_pointerRemoveTouches:function(G){var _;for(_=0;_<this._board_touches.length;_++)if(this._board_touches[_].pointerId===G.pointerId){this._board_touches.splice(_,1);break}return this},_pointerClearTouches:function(G){this._board_touches.length>0&&this.dehighlightAll(),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode=this.BOARD_MODE_NONE,this._board_touches=[],this.touches=[]},_getPointerInputDevice:function(G){if(env.A.isBrowser){if(G.pointerType==="touch"||window.navigator.msMaxTouchPoints&&window.navigator.msMaxTouchPoints>1)return"touch";if(G.pointerType==="mouse")return"mouse";if(G.pointerType==="pen")return"pen"}return"mouse"},pointerDownListener:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,le;if(!_&&this._isPointerRegistered(G))return!1;if(utils_type.A.evaluate(this.attr.movetarget)===null&&utils_type.A.exists(G.target)&&utils_type.A.exists(G.target.releasePointerCapture)&&G.target.releasePointerCapture(G.pointerId),!_&&G.isPrimary,this.hasPointerUp||(window.navigator.msPointerEnabled?env.A.addEvent(this.document,"MSPointerUp",this.pointerUpListener,this):(env.A.addEvent(this.document,"pointerup",this.pointerUpListener,this),env.A.addEvent(this.document,"pointercancel",this.pointerUpListener,this)),this.hasPointerUp=!0),this.hasMouseHandlers&&this.removeMouseEventHandlers(),this.hasTouchHandlers&&this.removeTouchEventHandlers(),this.document.selection&&utils_type.A.isFunction(this.document.selection.empty))this.document.selection.empty();else if(window.getSelection&&(ie=window.getSelection()).removeAllRanges)try{ie.removeAllRanges()}catch{}if(this._inputDevice=this._getPointerInputDevice(G),oe=this._inputDevice,this.options.precision.hasPoint=this.options.precision[oe],te=this.getMousePosition(G),this._testForSelection(G),this.selectingMode)return this._startSelecting(te),void this.triggerEventHandlers(["touchstartselecting","pointerstartselecting","startselecting"],[G]);if(this.attr.drag.enabled&&_?(ne=[_],this.mode=this.BOARD_MODE_DRAG):ne=this.initMoveObject(te[0],te[1],G,oe),re={num:G.pointerId,X:te[0],Y:te[1],Xprev:NaN,Yprev:NaN,Xstart:[],Ystart:[],Zstart:[]},ne.length>0){for(ae=ne[ne.length-1],se=!1,Z=0;Z<this.touches.length;Z++)if(this.touches[Z].obj===ae){Q=Z,ee=this.touches[Z].targets.push(re)-1,se=!0;break}se||(ee=0,Q=this.touches.push({obj:ae,targets:[re]})-1),this.dehighlightAll(),ae.highlight(!0),this.saveStartPos(ae,this.touches[Q].targets[ee]),G&&G.preventDefault&&!J&&G.preventDefault()}return this.touches.length>0&&!J&&(G.preventDefault(),G.stopPropagation()),!!env.A.isBrowser&&(this._getPointerInputDevice(G)!=="touch"?this.mode===this.BOARD_MODE_NONE&&this.mouseOriginMoveStart(G):(this._pointerStorePosition(G),G.touches=this._board_touches,G.touches.length===1&&this.mode===this.BOARD_MODE_NONE&&this.touchStartMoveOriginOneFinger(G)||G.touches.length!==2||this.mode!==this.BOARD_MODE_NONE&&this.mode!==this.BOARD_MODE_MOVE_ORIGIN||(this.mode===this.BOARD_MODE_MOVE_ORIGIN&&this.originMoveEnd(),this.gestureStartListener(G))),le="none",this.mode!==this.BOARD_MODE_NONE||utils_type.A.evaluate(this.attr.browserpan)!==!0&&utils_type.A.evaluate(this.attr.browserpan.enabled)!==!0||utils_type.A.evaluate(this.attr.pan.enabled)!==!1&&utils_type.A.evaluate(this.attr.pan.needtwofingers)!==!0||(le="auto"),this.containerObj.style.touchAction=le,this.triggerEventHandlers(["touchstart","down","pointerdown","MSPointerDown"],[G]),!0)},_handleClicks:function(G,_){var J,Z,Q=this;if(this.selectingMode)G.stopPropagation();else{if(Z=utils_type.A.evaluate(this.attr.clickdelay),utils_type.A.evaluate(this.attr.dblclicksuppressclick))this._preventSingleClick=!1,this._singleClickTimer=setTimeout(function(){if(!Q._preventSingleClick)for(J in Q.triggerEventHandlers(_,[G]),Q.clickObjects)Q.clickObjects.hasOwnProperty(J)&&(Q.clickObjects[J].triggerEventHandlers(_,[G]),delete Q.clickObjects[J])},Z);else{for(J in Q.triggerEventHandlers(_,[G]),Q.clickObjects)Q.clickObjects.hasOwnProperty(J)&&Q.clickObjects[J].triggerEventHandlers(_,[G]);setTimeout(function(){for(J in Q.clickObjects)Q.clickObjects.hasOwnProperty(J)&&delete Q.clickObjects[J]},Z)}G.stopPropagation()}},_handleDblClicks:function(G,_){var J;if(this.selectingMode)G.stopPropagation();else{for(J in this._preventSingleClick=!0,clearTimeout(this._singleClickTimer),this.triggerEventHandlers(_,[G]),this.clickObjects)this.clickObjects.hasOwnProperty(J)&&(this.clickObjects[J].triggerEventHandlers(_,[G]),delete this.clickObjects[J]);G.stopPropagation()}},pointerClickListener:function(G){this._handleClicks(G,["click","pointerclick"])},pointerDblClickListener:function(G){this._handleDblClicks(G,["dblclick","pointerdblclick"])},mouseClickListener:function(G){this._handleClicks(G,["click","mouseclick"])},mouseDblClickListener:function(G){this._handleDblClicks(G,["dblclick","mousedblclick"])},pointerMoveListener:function(G){var _,J,Z,Q,ee,te;if(this._getPointerInputDevice(G)==="touch"&&!this._isPointerRegistered(G))return this.BOARD_MODE_NONE;if(!this.checkFrameRate(G))return!1;if(this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.displayInfobox(!1)),this.mode!==this.BOARD_MODE_NONE&&(G.preventDefault(),G.stopPropagation()),this.updateQuality=this.BOARD_QUALITY_LOW,this._inputDevice=this._getPointerInputDevice(G),te=this._inputDevice,this.options.precision.hasPoint=this.options.precision[te],Q=.3333*this.options.precision.hasPoint,Z=this.getMousePosition(G),utils_type.A.evaluate(this.attr.movetarget)===null&&Z[0]<=Q||Z[1]<=Q||Z[0]>=this.canvasWidth-Q||Z[1]>=this.canvasHeight-Q)return this.mode===this.BOARD_MODE_NONE;if(this.selectingMode)this._moveSelecting(Z),this.triggerEventHandlers(["touchmoveselecting","moveselecting","pointermoveselecting"],[G,this.mode]);else if(!this.mouseOriginMove(G))if(this.mode===this.BOARD_MODE_DRAG){for(_=0;_<this.touches.length;_++)for(ee=this.touches[_].targets,J=0;J<ee.length;J++)if(ee[J].num===G.pointerId){ee[J].X=Z[0],ee[J].Y=Z[1],ee.length===1?this.moveObject(Z[0],Z[1],this.touches[_],G,te):ee.length===2&&(this.twoFingerMove(this.touches[_],G.pointerId,G),ee[J].Xprev=Z[0],ee[J].Yprev=Z[1]);break}}else this._getPointerInputDevice(G)==="touch"&&(this._pointerStorePosition(G),this._board_touches.length===2&&(G.touches=this._board_touches,this.gestureChangeListener(G))),this.highlightElements(Z[0],Z[1],G,-1);return this.triggerEventHandlers(["pointermove","MSPointerMove","move"],[G,this.mode]),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode===this.BOARD_MODE_NONE},pointerUpListener:function(G){var _,J,Z,Q,ee,te=!1;if(this.triggerEventHandlers(["touchend","up","pointerup","MSPointerUp"],[G]),this.displayInfobox(!1),G){for(_=0;_<this.touches.length;_++)for(ee=this.touches[_].targets,J=0;J<ee.length;J++)if(ee[J].num===G.pointerId){ee.splice(J,1),ee.length===0&&this.touches.splice(_,1);break}}if(this.originMoveEnd(),this.update(),this.selectingMode)this._stopSelecting(G),this.triggerEventHandlers(["touchstopselecting","pointerstopselecting","stopselecting"],[G]),this.stopSelectionMode();else for(_=this.downObjects.length-1;_>-1;_--){for(Z=!1,J=0;J<this.touches.length;J++)this.touches[J].obj.id===this.downObjects[_].id&&(Z=!0);Z||(this.downObjects[_].triggerEventHandlers(["touchend","up","pointerup","MSPointerUp"],[G]),utils_type.A.exists(this.downObjects[_].coords)||(this.downObjects[_].snapToGrid(),this.downObjects[_].snapToPoints(),te=!0),Q=this.downObjects[_].eventHandlers,(utils_type.A.exists(Q.click)&&Q.click.length>0||utils_type.A.exists(Q.pointerclick)&&Q.pointerclick.length>0||utils_type.A.exists(Q.dblclick)&&Q.dblclick.length>0||utils_type.A.exists(Q.pointerdblclick)&&Q.pointerdblclick.length>0)&&(this.clickObjects[this.downObjects[_].id]=this.downObjects[_]),this.downObjects.splice(_,1))}return this.hasPointerUp&&(window.navigator.msPointerEnabled?env.A.removeEvent(this.document,"MSPointerUp",this.pointerUpListener,this):(env.A.removeEvent(this.document,"pointerup",this.pointerUpListener,this),env.A.removeEvent(this.document,"pointercancel",this.pointerUpListener,this)),this.hasPointerUp=!1),this._pointerClearTouches(G.pointerId),this._getPointerInputDevice(G)!=="touch"&&this.dehighlightAll(),te&&this.update(),!0},pointerLeaveListener:function(G){return this.displayInfobox(!1),this.dehighlightAll(),!0},touchStartListener:function(G){var _,J,Z,Q,ee,te,ne,ie,re,oe,se=this.options.precision.touch,ae=G.touches;for(this.hasTouchEnd||(env.A.addEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!0),this.document.selection&&utils_type.A.isFunction(this.document.selection.empty)?this.document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),this._inputDevice="touch",this.options.precision.hasPoint=this.options.precision.touch,_=0;_<ae.length;_++)ae[_].jxg_isused=!1;for(_=0;_<this.touches.length;_++)for(oe=this.touches[_].targets,J=0;J<oe.length;J++){oe[J].num=-1,se=this.options.precision.touch;do{for(Z=0;Z<ae.length;Z++)if(Math.abs(Math.pow(ae[Z].screenX-oe[J].X,2)+Math.pow(ae[Z].screenY-oe[J].Y,2))<se*se){oe[J].num=Z,oe[J].X=ae[Z].screenX,oe[J].Y=ae[Z].screenY,ae[Z].jxg_isused=!0;break}se*=2}while(oe[J].num===-1&&se<this.options.precision.touchMax);oe[J].num===-1&&(jxg.A.debug("i couldn't find a targettouches for target no "+J+" on "+this.touches[_].obj.name+" ("+this.touches[_].obj.id+"). Removed the target."),jxg.A.debug("eps = "+se+", touchMax = "+src_options.A.precision.touchMax),oe.splice(_,1))}for(_=0;_<ae.length;_++)if(!ae[_].jxg_isused){if(Q=this.getMousePosition(G,_),this.selectingMode)return this._startSelecting(Q),this.triggerEventHandlers(["touchstartselecting","startselecting"],[G]),G.preventDefault(),G.stopPropagation(),this.options.precision.hasPoint=this.options.precision.mouse,this.touches.length>0;if((ee=this.initMoveObject(Q[0],Q[1],G,"touch")).length!==0){if(te=ee[ee.length-1],re={num:_,X:ae[_].screenX,Y:ae[_].screenY,Xprev:NaN,Yprev:NaN,Xstart:[],Ystart:[],Zstart:[]},utils_type.A.isPoint(te)||te.elementClass===constants.A.OBJECT_CLASS_TEXT||te.type===constants.A.OBJECT_TYPE_TICKS||te.type===constants.A.OBJECT_TYPE_IMAGE)ie=[re],this.saveStartPos(te,ie[0]),this.touches.push({obj:te,targets:ie}),te.highlight(!0);else if(te.elementClass===constants.A.OBJECT_CLASS_LINE||te.elementClass===constants.A.OBJECT_CLASS_CIRCLE||te.elementClass===constants.A.OBJECT_CLASS_CURVE||te.type===constants.A.OBJECT_TYPE_POLYGON){for(ne=!1,J=0;J<this.touches.length;J++)te.id===this.touches[J].obj.id&&(ne=!0,this.touches[J].targets.length===1&&(this.saveStartPos(te,re),this.touches[J].targets.push(re)),ae[_].jxg_isused=!0);ne||(ie=[re],this.saveStartPos(te,ie[0]),this.touches.push({obj:te,targets:ie}),te.highlight(!0))}}ae[_].jxg_isused=!0}return this.touches.length>0&&(G.preventDefault(),G.stopPropagation()),ae.length===1&&this.mode===this.BOARD_MODE_NONE&&this.touchStartMoveOriginOneFinger(G)||ae.length!==2||this.mode!==this.BOARD_MODE_NONE&&this.mode!==this.BOARD_MODE_MOVE_ORIGIN||(this.mode===this.BOARD_MODE_MOVE_ORIGIN&&this.originMoveEnd(),this.gestureStartListener(G)),this.options.precision.hasPoint=this.options.precision.mouse,this.triggerEventHandlers(["touchstart","down"],[G]),!1},touchMoveListener:function(G){var _,J,Z,Q,ee=G.touches;if(!this.checkFrameRate(G))return!1;if(this.mode!==this.BOARD_MODE_NONE&&(G.preventDefault(),G.stopPropagation()),this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.displayInfobox(!1)),this._inputDevice="touch",this.options.precision.hasPoint=this.options.precision.touch,this.updateQuality=this.BOARD_QUALITY_LOW,this.selectingMode){for(_=0;_<ee.length;_++)if(!ee[_].jxg_isused){J=this.getMousePosition(G,_),this._moveSelecting(J),this.triggerEventHandlers(["touchmoves","moveselecting"],[G,this.mode]);break}}else if(!this.touchOriginMove(G))if(this.mode===this.BOARD_MODE_DRAG){for(_=0;_<this.touches.length;_++)if((Q=this.touches[_].targets).length===1){if(ee[Q[0].num]){if((J=this.getMousePosition(G,Q[0].num))[0]<0||J[0]>this.canvasWidth||J[1]<0||J[1]>this.canvasHeight)return;Q[0].X=J[0],Q[0].Y=J[1],this.moveObject(J[0],J[1],this.touches[_],G,"touch")}}else if(Q.length===2&&Q[0].num>-1&&Q[1].num>-1&&ee[Q[0].num]&&ee[Q[1].num]){if(J=this.getMousePosition(G,Q[0].num),Z=this.getMousePosition(G,Q[1].num),J[0]<0||J[0]>this.canvasWidth||J[1]<0||J[1]>this.canvasHeight||Z[0]<0||Z[0]>this.canvasWidth||Z[1]<0||Z[1]>this.canvasHeight)return;Q[0].X=J[0],Q[0].Y=J[1],Q[1].X=Z[0],Q[1].Y=Z[1],this.twoFingerMove(this.touches[_],Q[0].num,G),Q[0].Xprev=J[0],Q[0].Yprev=J[1],Q[1].Xprev=Z[0],Q[1].Yprev=Z[1]}}else ee.length===2&&this.gestureChangeListener(G),J=this.getMousePosition(G,0),this.highlightElements(J[0],J[1],G,-1);return this.mode!==this.BOARD_MODE_DRAG&&this.displayInfobox(!1),this.triggerEventHandlers(["touchmove","move"],[G,this.mode]),this.options.precision.hasPoint=this.options.precision.mouse,this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode===this.BOARD_MODE_NONE},touchEndListener:function(G){var _,J,Z,Q,ee,te,ne=this.options.precision.touch,ie=[],re=G&&G.touches,oe=!1;if(this.triggerEventHandlers(["touchend","up"],[G]),this.displayInfobox(!1),this.selectingMode)this._stopSelecting(G),this.triggerEventHandlers(["touchstopselecting","stopselecting"],[G]),this.stopSelectionMode();else if(re&&re.length>0){for(_=0;_<this.touches.length;_++)ie[_]=this.touches[_];for(this.touches.length=0,_=0;_<re.length;_++)re[_].jxg_isused=!1;for(_=0;_<ie.length;_++){for(Q=!1,ee=0,te=ie[_].targets,J=0;J<te.length;J++)for(te[J].found=!1,Z=0;Z<re.length;Z++)if(Math.abs(Math.pow(re[Z].screenX-te[J].X,2)+Math.pow(re[Z].screenY-te[J].Y,2))<ne*ne){te[J].found=!0,te[J].num=Z,te[J].X=re[Z].screenX,te[J].Y=re[Z].screenY,ee+=1;break}if(utils_type.A.isPoint(ie[_].obj)?Q=te[0]&&te[0].found:ie[_].obj.elementClass===constants.A.OBJECT_CLASS_LINE?Q=te[0]&&te[0].found||te[1]&&te[1].found:ie[_].obj.elementClass===constants.A.OBJECT_CLASS_CIRCLE&&(Q=ee===1||ee===3),Q)for(this.touches.push({obj:ie[_].obj,targets:[]}),J=0;J<te.length;J++)te[J].found&&this.touches[this.touches.length-1].targets.push({num:te[J].num,X:te[J].screenX,Y:te[J].screenY,Xprev:NaN,Yprev:NaN,Xstart:te[J].Xstart,Ystart:te[J].Ystart,Zstart:te[J].Zstart});else ie[_].obj.noHighlight()}}else this.touches.length=0;for(_=this.downObjects.length-1;_>-1;_--){for(Q=!1,J=0;J<this.touches.length;J++)this.touches[J].obj.id===this.downObjects[_].id&&(Q=!0);Q||(this.downObjects[_].triggerEventHandlers(["touchup","up"],[G]),utils_type.A.exists(this.downObjects[_].coords)||(this.downObjects[_].snapToGrid(),this.downObjects[_].snapToPoints(),oe=!0),this.downObjects.splice(_,1))}return re&&re.length!==0||(this.hasTouchEnd&&(env.A.removeEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!1),this.dehighlightAll(),this.updateQuality=this.BOARD_QUALITY_HIGH,this.originMoveEnd(),oe&&this.update()),!0},mouseDownListener:function(G){var _,J,Z;if(this.document.selection&&utils_type.A.isFunction(this.document.selection.empty)?this.document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),!this.hasMouseUp)return env.A.addEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!0,this._inputDevice="mouse",this.options.precision.hasPoint=this.options.precision.mouse,_=this.getMousePosition(G),this._testForSelection(G),this.selectingMode?(this._startSelecting(_),void this.triggerEventHandlers(["mousestartselecting","startselecting"],[G])):((J=this.initMoveObject(_[0],_[1],G,"mouse")).length===0?(this.mode=this.BOARD_MODE_NONE,Z=!0):(this.mouse={obj:null,targets:[{X:_[0],Y:_[1],Xprev:NaN,Yprev:NaN}]},this.mouse.obj=J[J.length-1],this.dehighlightAll(),this.mouse.obj.highlight(!0),this.mouse.targets[0].Xstart=[],this.mouse.targets[0].Ystart=[],this.mouse.targets[0].Zstart=[],this.saveStartPos(this.mouse.obj,this.mouse.targets[0]),G&&G.preventDefault?G.preventDefault():window.event&&(window.event.returnValue=!1)),this.mode===this.BOARD_MODE_NONE&&(Z=this.mouseOriginMoveStart(G)),this.triggerEventHandlers(["mousedown","down"],[G]),Z)},mouseMoveListener:function(G){var _;if(!this.checkFrameRate(G))return!1;_=this.getMousePosition(G),this.updateQuality=this.BOARD_QUALITY_LOW,this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.displayInfobox(!1)),this.selectingMode?(this._moveSelecting(_),this.triggerEventHandlers(["mousemoveselecting","moveselecting"],[G,this.mode])):this.mouseOriginMove(G)||(this.mode===this.BOARD_MODE_DRAG?this.moveObject(_[0],_[1],this.mouse,G,"mouse"):this.highlightElements(_[0],_[1],G,-1),this.triggerEventHandlers(["mousemove","move"],[G,this.mode])),this.updateQuality=this.BOARD_QUALITY_HIGH},mouseUpListener:function(G){var _;if(this.selectingMode===!1&&this.triggerEventHandlers(["mouseup","up"],[G]),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mouse&&this.mouse.obj&&(utils_type.A.exists(this.mouse.obj.coords)||(this.mouse.obj.snapToGrid(this.mouse.targets[0]),this.mouse.obj.snapToPoints())),this.originMoveEnd(),this.dehighlightAll(),this.update(),this.selectingMode)this._stopSelecting(G),this.triggerEventHandlers(["mousestopselecting","stopselecting"],[G]),this.stopSelectionMode();else for(_=0;_<this.downObjects.length;_++)this.downObjects[_].triggerEventHandlers(["mouseup","up"],[G]);this.downObjects.length=0,this.hasMouseUp&&(env.A.removeEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!1),this.mouse=null},mouseWheelListener:function(G){var _,J;return!(this.attr.zoom.enabled&&this.attr.zoom.wheel&&this._isRequiredKeyPressed(G,"zoom"))||(_=(G=G||window.event).detail?-G.detail:G.wheelDelta/40,J=this.attr.zoom.center==="board"?[]:new base_coords.A(constants.A.COORDS_BY_SCREEN,this.getMousePosition(G),this).usrCoords,_>0?this.zoomIn(J[1],J[2]):this.zoomOut(J[1],J[2]),this.triggerEventHandlers(["mousewheel"],[G]),G.preventDefault(),!1)},keyDownListener:function(G){var _,J,Z,Q,ee,te,ne=G.target.id,ie=0,re=0,oe=utils_type.A.evaluate(this.attr.keyboard.dx)/this.unitX,se=utils_type.A.evaluate(this.attr.keyboard.dy)/this.unitY,ae=!1,le=!0;return!(!this.attr.keyboard.enabled||ne==="")&&(!(Q=this.containerObj.shadowRoot||document).activeElement||(J=Q.activeElement).tagName!=="INPUT"&&J.tagName!=="textarea")&&(_=ne.replace(this.containerObj.id+"_",""),J=this.select(_),utils_type.A.exists(J.coords)&&(te=J.coords.usrCoords.slice(1)),utils_type.A.evaluate(this.attr.keyboard.panshift)&&G.shiftKey||utils_type.A.evaluate(this.attr.keyboard.panctrl)&&G.ctrlKey?(utils_type.A.evaluate(this.attr.zoom.enabled)===!0&&(ae=!0),G.keyCode===38?this.clickUpArrow():G.keyCode===40?this.clickDownArrow():G.keyCode===37?this.clickLeftArrow():G.keyCode===39?this.clickRightArrow():ae&&G.keyCode===171?this.zoomIn():ae&&G.keyCode===173?this.zoomOut():ae&&G.keyCode===79?this.zoom100():le=!1):G.shiftKey||G.ctrlKey||(utils_type.A.exists(J.visProp)&&(utils_type.A.exists(J.visProp.snaptogrid)&&J.visProp.snaptogrid&&J.evalVisProp("snapsizex")&&J.evalVisProp("snapsizey")?(oe=ie=(Z=J.getSnapSizes())[0],se=re=Z[1]):utils_type.A.exists(J.visProp.attracttogrid)&&J.visProp.attracttogrid&&J.evalVisProp("attractordistance")&&J.evalVisProp("attractorunit")&&(re=ie=1.1*J.evalVisProp("attractordistance"),J.evalVisProp("attractorunit")==="screen"&&(ie/=this.unitX,re/=this.unitX),oe=Math.max(ie,oe),se=Math.max(re,se))),G.keyCode===38?ee=[0,se]:G.keyCode===40?ee=[0,-se]:G.keyCode===37?ee=[-oe,0]:G.keyCode===39?ee=[oe,0]:le=!1,ee&&J.isDraggable&&J.visPropCalc.visible&&(this.geonextCompatibilityMode&&(utils_type.A.isPoint(J)||J.elementClass===constants.A.OBJECT_CLASS_TEXT)||!this.geonextCompatibilityMode)&&!J.evalVisProp("fixed")&&(this.mode=this.BOARD_MODE_DRAG,utils_type.A.exists(J.coords)&&(ee[0]+=te[0],ee[1]+=te[1]),utils_type.A.exists(J.coords)?(J.setPosition(jxg.A.COORDS_BY_USER,ee),this.updateInfobox(J)):(this.displayInfobox(!1),J.setPositionDirectly(constants.A.COORDS_BY_USER,ee,[0,0])),this.triggerEventHandlers(["keymove","move"],[G,this.mode]),J.triggerEventHandlers(["keydrag","drag"],[G]),this.mode=this.BOARD_MODE_NONE)),this.update(),le&&utils_type.A.exists(G.preventDefault)&&G.preventDefault(),le)},keyFocusInListener:function(G){var _,J,Z=G.target.id;if(!this.attr.keyboard.enabled||Z==="")return!1;_=Z.replace(this.containerObj.id+"_",""),J=this.select(_),utils_type.A.exists(J.highlight)&&(J.highlight(!0),this.focusObjects=[_],J.triggerEventHandlers(["hit"],[G])),utils_type.A.exists(J.coords)&&this.updateInfobox(J)},keyFocusOutListener:function(G){if(!this.attr.keyboard.enabled)return!1;this.focusObjects=[],this.dehighlightAll(),this.displayInfobox(!1)},updateContainerDims:function(G,_){var J,Z,Q,ee=G,te=_;return G===void 0&&(ee=this.containerObj.offsetWidth,te=this.containerObj.offsetHeight),G===void 0&&window&&window.getComputedStyle&&(J=window.getComputedStyle(this.containerObj,null),Z=parseFloat(J.getPropertyValue("border-left-width"))+parseFloat(J.getPropertyValue("border-right-width")),isNaN(Z)||(ee-=Z),Q=parseFloat(J.getPropertyValue("border-top-width"))+parseFloat(J.getPropertyValue("border-bottom-width")),isNaN(Q)||(te-=Q)),ee<=0||te<=0||isNaN(ee)||isNaN(te)?this:(isNaN(this.getBoundingBox()[0])&&this.setBoundingBox(this.attr.boundingbox,this.keepaspectratio,"keep"),utils_type.A.exists(this._prevDim)&&this._prevDim.w===ee&&this._prevDim.h===te||(this.resizeContainer(ee,te,!0),this._prevDim={w:ee,h:te}),this)},startResizeObserver:function(){var G=this;env.A.isBrowser&&this.attr.resize&&this.attr.resize.enabled&&(this.resizeObserver=new ResizeObserver(function(_){var J;G._isResizing||(G._isResizing=!0,J=_[0].contentRect,window.setTimeout(function(){try{G.updateContainerDims(J.width,J.height)}catch(Z){jxg.A.debug(Z),G.stopResizeObserver()}finally{G._isResizing=!1}},G.attr.resize.throttle))}),this.resizeObserver.observe(this.containerObj))},stopResizeObserver:function(){env.A.isBrowser&&this.attr.resize&&this.attr.resize.enabled&&utils_type.A.exists(this.resizeObserver)&&this.resizeObserver.unobserve(this.containerObj)},resizeListener:function(){var G=this;env.A.isBrowser&&this.attr.resize&&this.attr.resize.enabled&&(this._isScrolling||this._isResizing||(this._isResizing=!0,window.setTimeout(function(){G.updateContainerDims(),G._isResizing=!1},this.attr.resize.throttle)))},scrollListener:function(G){var _=this;env.A.isBrowser&&(this._isScrolling||(this._isScrolling=!0,window.setTimeout(function(){_._isScrolling=!1},66)))},startIntersectionObserver:function(){var G=this;try{this.intersectionObserver=new IntersectionObserver(function(_){isNaN(G.getBoundingBox()[0])&&G.updateContainerDims()},{root:null,rootMargin:"0px",threshold:.8}),this.intersectionObserver.observe(G.containerObj)}catch{jxg.A.debug("JSXGraph: IntersectionObserver not available in this browser.")}},stopIntersectionObserver:function(){utils_type.A.exists(this.intersectionObserver)&&this.intersectionObserver.unobserve(this.containerObj)},printListener:function(G){this.updateContainerDims()},printListenerMatch:function(G){G.matches&&this.printListener()},initInfobox:function(G){var _=utils_type.A.copyAttributes(G,this.options,"infobox");return _.id=this.id+"_infobox",this.infobox=this.create("text",[0,0,"0,0"],_),this.infobox.dump=!1,this.displayInfobox(!1),this},updateInfobox:function(G){var _,J,Z,Q,ee,te,ne,ie=G.evalVisProp("showinfobox");return!utils_type.A.evaluate(this.attr.showinfobox)&&ie==="inherit"||!ie||utils_type.A.isPoint(G)&&(Z=G.coords.usrCoords[1],Q=G.coords.usrCoords[2],te=this.infobox.evalVisProp("distancex"),ne=this.infobox.evalVisProp("distancey"),this.infobox.setCoords(Z+te/this.unitX,Q+ne/this.unitY),ee=G.evalVisProp("infoboxdigits"),typeof G.infoboxText!="string"?(ee==="auto"?this.infobox.useLocale()?(_=this.infobox.formatNumberLocale(Z),J=this.infobox.formatNumberLocale(Q)):(_=utils_type.A.autoDigits(Z),J=utils_type.A.autoDigits(Q)):utils_type.A.isNumber(ee)?this.infobox.useLocale()?(_=this.infobox.formatNumberLocale(Z,ee),J=this.infobox.formatNumberLocale(Q,ee)):(_=utils_type.A.toFixed(Z,ee),J=utils_type.A.toFixed(Q,ee)):(_=Z,J=Q),this.highlightInfobox(_,J,G)):this.highlightCustomInfobox(G.infoboxText,G),this.displayInfobox(!0)),this},displayInfobox:function(G){return!G&&this.focusObjects.length>0&&this.select(this.focusObjects[0]).elementClass===constants.A.OBJECT_CLASS_POINT||this.infobox.hiddenByParent===G&&(this.infobox.hiddenByParent=!G,this.infobox.prepareUpdate().updateVisibility(G).updateRenderer()),this},showInfobox:function(G){return this.displayInfobox(G)},highlightInfobox:function(G,_,J){return this.highlightCustomInfobox("("+G+", "+_+")",J),this},highlightCustomInfobox:function(G,_){return this.infobox.setText(G),this},dehighlightAll:function(){var G,_,J={},Z=!1;for(G in this.highlightedObjects)this.highlightedObjects.hasOwnProperty(G)&&(_=this.highlightedObjects[G],this.focusObjects.indexOf(G)<0?((this.hasMouseHandlers||this.hasPointerHandlers)&&_.noHighlight(),Z=!0):J[G]=_);return this.highlightedObjects=J,this.renderer.type==="canvas"&&Z&&(this.prepareUpdate(),this.renderer.suspendRedraw(this),this.updateRenderer(),this.renderer.unsuspendRedraw()),this},getScrCoordsOfMouse:function(G,_){return[G,_]},getUsrCoordsOfMouse:function(G){var _=this.getCoordsTopLeftCorner(),J=env.A.getPosition(G,null,this.document),Z=J[0]-_[0],Q=J[1]-_[1];return new base_coords.A(constants.A.COORDS_BY_SCREEN,[Z,Q],this).usrCoords.slice(1)},getAllUnderMouse:function(G){var _=this.getAllObjectsUnderMouse(G);return _.push(this.getUsrCoordsOfMouse(G)),_},getAllObjectsUnderMouse:function(G){var _,J,Z=this.getCoordsTopLeftCorner(),Q=env.A.getPosition(G,null,this.document),ee=Q[0]-Z[0],te=Q[1]-Z[1],ne=[],ie=this.objectsList.length;for(_=0;_<ie;_++)(J=this.objectsList[_]).visPropCalc.visible&&J.hasPoint&&J.hasPoint(ee,te)&&(ne[ne.length]=J);return ne},updateCoords:function(){var G,_,J=this.objectsList.length;for(_=0;_<J;_++)G=this.objectsList[_],utils_type.A.exists(G.coords)&&(G.evalVisProp("frozen")===!0?G.is3D?G.element2D.coords.screen2usr():G.coords.screen2usr():G.is3D?G.element2D.coords.usr2screen():(G.coords.usr2screen(),utils_type.A.exists(G.actualCoords)&&G.actualCoords.usr2screen()));return this},moveOrigin:function(G,_,J){var Z,Q,ee,te;return utils_type.A.exists(G)&&utils_type.A.exists(_)&&(Z=this.origin.scrCoords[1],Q=this.origin.scrCoords[2],this.origin.scrCoords[1]=G,this.origin.scrCoords[2]=_,J&&(this.origin.scrCoords[1]-=this.drag_dx,this.origin.scrCoords[2]-=this.drag_dy),ee=new base_coords.A(constants.A.COORDS_BY_SCREEN,[0,0],this).usrCoords,te=new base_coords.A(constants.A.COORDS_BY_SCREEN,[this.canvasWidth,this.canvasHeight],this).usrCoords,(ee[1]<this.maxboundingbox[0]-math.A.eps||ee[2]>this.maxboundingbox[1]+math.A.eps||te[1]>this.maxboundingbox[2]+math.A.eps||te[2]<this.maxboundingbox[3]-math.A.eps)&&(this.origin.scrCoords[1]=Z,this.origin.scrCoords[2]=Q)),this.updateCoords().clearTraces().fullUpdate(),this.triggerEventHandlers(["boundingbox"]),this},addConditions:function(G){var _,J,Z,Q,ee,te,ne,ie=[],re=G.indexOf("<data>"),oe=G.indexOf("</data>"),se=function(pe,fe,_e,ye){return function(){var be,Ae;Ae=(be=pe.select(fe.id)).coords.usrCoords[ye],ye===2?be.setPositionDirectly(constants.A.COORDS_BY_USER,[_e(),Ae]):be.setPositionDirectly(constants.A.COORDS_BY_USER,[Ae,_e()]),be.prepareUpdate().update()}},ae=function(pe,fe,_e){return function(){var ye,be;ye=pe.select(fe.id),be=_e(),ye.setAttribute({visible:be})}},le=function(pe,fe,_e,ye){return function(){var be,Ae;be=pe.select(fe.id),Ae=_e(),ye==="strokewidth"?be.visProp.strokewidth=Ae:(Ae=utils_color.A.rgba2rgbo(Ae),be.visProp[ye+"color"]=Ae[0],be.visProp[ye+"opacity"]=Ae[1])}},ue=function(pe,fe,_e){return function(){pe.select(fe.id).position=_e()}},de=function(pe,fe,_e){return function(){pe.select(fe.id).setStyle(_e())}};if(!(re<0)){for(;re>=0;){if(J=(_=G.slice(re+6,oe)).indexOf("="),Z=_.slice(0,J),Q=_.slice(J+1),J=Z.indexOf("."),ee=Z.slice(0,J),te=this.elementsByName[utils_type.A.unescapeHTML(ee)],ne=Z.slice(J+1).replace(/\s+/g,"").toLowerCase(),Q=utils_type.A.createFunction(Q,this,"",!0),utils_type.A.exists(this.elementsByName[ee]))switch(ne){case"x":ie.push(se(this,te,Q,2));break;case"y":ie.push(se(this,te,Q,1));break;case"visible":ie.push(ae(this,te,Q));break;case"position":ie.push(ue(this,te,Q));break;case"stroke":ie.push(le(this,te,Q,"stroke"));break;case"style":ie.push(de(this,te,Q));break;case"strokewidth":ie.push(le(this,te,Q,"strokewidth"));break;case"fill":ie.push(le(this,te,Q,"fill"));break;case"label":break;default:jxg.A.debug('property "'+ne+'" in conditions not yet implemented:'+Q)}else jxg.A.debug("debug conditions: |"+ee+"| undefined");re=(G=G.slice(oe+7)).indexOf("<data>"),oe=G.indexOf("</data>")}this.updateConditions=function(){var pe;for(pe=0;pe<ie.length;pe++)ie[pe]();return this.prepareUpdate().updateElements(),!0},this.updateConditions()}},updateConditions:function(){return!1},calculateSnapSizes:function(){var G,_,J,Z,Q=this.getBoundingBox(),ee=utils_type.A.evaluate(this.options.grid.majorStep),te=utils_type.A.evaluate(this.options.grid.gridX),ne=utils_type.A.evaluate(this.options.grid.gridY);for(utils_type.A.isArray(ee)||(ee=[ee,ee]),ee.length<2&&(ee=[ee[0],ee[0]]),utils_type.A.exists(te)&&(ee[0]=te),utils_type.A.exists(ne)&&(ee[1]=ne),ee[0]==="auto"?ee[0]=1:ee[0]=utils_type.A.parseNumber(ee[0],Math.abs(Q[1]-Q[3]),1/this.unitX),ee[1]==="auto"?ee[1]=1:ee[1]=utils_type.A.parseNumber(ee[1],Math.abs(Q[0]-Q[2]),1/this.unitY),G=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],this),_=new base_coords.A(constants.A.COORDS_BY_USER,[ee[0],ee[1]],this),J=G.scrCoords[1]-_.scrCoords[1],Z=G.scrCoords[2]-_.scrCoords[2],this.options.grid.snapSizeX=ee[0];Math.abs(J)>25;)this.options.grid.snapSizeX*=2,J/=2;for(this.options.grid.snapSizeY=ee[1];Math.abs(Z)>25;)this.options.grid.snapSizeY*=2,Z/=2;return this},applyZoom:function(){return this.updateCoords().calculateSnapSizes().clearTraces().fullUpdate(),this},zoomIn:function(G,_){var J=this.getBoundingBox(),Z=utils_type.A.evaluate(this.attr.zoom.factorx),Q=utils_type.A.evaluate(this.attr.zoom.factory),ee=(J[2]-J[0])*(1-1/Z),te=(J[1]-J[3])*(1-1/Q),ne=.5,ie=.5,re=utils_type.A.evaluate(this.attr.zoom.max),oe=utils_type.A.evaluate(this.attr.zoom.eps)||utils_type.A.evaluate(this.attr.zoom.min)||.001;return this.zoomX>re&&Z>1||this.zoomY>re&&Q>1||this.zoomX<oe&&Z<1||this.zoomY<oe&&Q<1?this:(utils_type.A.isNumber(G)&&utils_type.A.isNumber(_)&&(ne=(G-J[0])/(J[2]-J[0]),ie=(J[1]-_)/(J[1]-J[3])),this.setBoundingBox([J[0]+ee*ne,J[1]-te*ie,J[2]-ee*(1-ne),J[3]+te*(1-ie)],this.keepaspectratio,"update"),this.applyZoom())},zoomOut:function(G,_){var J=this.getBoundingBox(),Z=utils_type.A.evaluate(this.attr.zoom.factorx),Q=utils_type.A.evaluate(this.attr.zoom.factory),ee=(J[2]-J[0])*(1-Z),te=(J[1]-J[3])*(1-Q),ne=.5,ie=.5,re=utils_type.A.evaluate(this.attr.zoom.eps)||utils_type.A.evaluate(this.attr.zoom.min)||.001;return this.zoomX<re||this.zoomY<re?this:(utils_type.A.isNumber(G)&&utils_type.A.isNumber(_)&&(ne=(G-J[0])/(J[2]-J[0]),ie=(J[1]-_)/(J[1]-J[3])),this.setBoundingBox([J[0]+ee*ne,J[1]-te*ie,J[2]-ee*(1-ne),J[3]+te*(1-ie)],this.keepaspectratio,"update"),this.applyZoom())},zoom100:function(){var G,_,J;return utils_type.A.exists(this.attr.boundingbox)?this.setBoundingBox(this.attr.boundingbox,this.keepaspectratio,"reset"):(_=((G=this.getBoundingBox())[2]-G[0])*(1-this.zoomX)*.5,J=(G[1]-G[3])*(1-this.zoomY)*.5,this.setBoundingBox([G[0]+_,G[1]-J,G[2]-_,G[3]+J],this.keepaspectratio,"reset")),this.applyZoom()},zoomAllPoints:function(){var G,_,J,Z,Q=0,ee=0,te=0,ne=0,ie=this.objectsList.length;for(G=0;G<ie;G++)Z=this.objectsList[G],utils_type.A.isPoint(Z)&&Z.visPropCalc.visible&&(Z.coords.usrCoords[1]<Q?Q=Z.coords.usrCoords[1]:Z.coords.usrCoords[1]>ee&&(ee=Z.coords.usrCoords[1]),Z.coords.usrCoords[2]>ne?ne=Z.coords.usrCoords[2]:Z.coords.usrCoords[2]<te&&(te=Z.coords.usrCoords[2]));return _=50/this.unitX,J=50/this.unitY,this.setBoundingBox([Q-_,ne+J,ee+_,te-J],this.keepaspectratio,"update"),this.applyZoom()},zoomElements:function(G){var _,J,Z,Q,ee,te,ne,ie=[1/0,-1/0,-1/0,1/0];if(!utils_type.A.isArray(G)||G.length===0)return this;for(_=0;_<G.length;_++)J=this.select(G[_]).bounds(),utils_type.A.isArray(J)&&(J[0]<ie[0]&&(ie[0]=J[0]),J[1]>ie[1]&&(ie[1]=J[1]),J[2]>ie[2]&&(ie[2]=J[2]),J[3]<ie[3]&&(ie[3]=J[3]));return utils_type.A.isArray(ie)&&(Z=.5*(ie[0]+ie[2]),Q=.5*(ie[1]+ie[3]),ee=1.5*(ie[2]-ie[0])*.5,te=1.5*(ie[1]-ie[3])*.5,ne=Math.max(ee,te),this.setBoundingBox([Z-ne,Q+ne,Z+ne,Q-ne],this.keepaspectratio,"update")),this},setZoom:function(G,_){var J=this.attr.zoom.factorx,Z=this.attr.zoom.factory;return this.attr.zoom.factorx=G/this.zoomX,this.attr.zoom.factory=_/this.zoomY,this.zoomIn(),this.attr.zoom.factorx=J,this.attr.zoom.factory=Z,this},_removeObj:function(G,_){var J,Z;if(utils_type.A.isArray(G)){for(Z=0;Z<G.length;Z++)this._removeObj(G[Z],_);return this}if(G=this.select(G),!utils_type.A.exists(G)||utils_type.A.isString(G))return this;try{for(J in G.childElements)G.childElements.hasOwnProperty(J)&&G.childElements[J].board._removeObj(G.childElements[J]);for(J in G.objects)G.objects.hasOwnProperty(J)&&G.objects[J].board._removeObj(G.objects[J]);if(_)for(J in this.objects)this.objects.hasOwnProperty(J)&&utils_type.A.exists(this.objects[J].childElements)&&utils_type.A.exists(this.objects[J].childElements.hasOwnProperty(G.id))&&(delete this.objects[J].childElements[G.id],delete this.objects[J].descendants[G.id]);else if(utils_type.A.exists(G.ancestors))for(J in G.ancestors)G.ancestors.hasOwnProperty(J)&&utils_type.A.exists(G.ancestors[J].childElements)&&utils_type.A.exists(G.ancestors[J].childElements.hasOwnProperty(G.id))&&(delete G.ancestors[J].childElements[G.id],delete G.ancestors[J].descendants[G.id]);if(G._pos>-1)for(this.objectsList.splice(G._pos,1),Z=G._pos;Z<this.objectsList.length;Z++)this.objectsList[Z]._pos--;else G.type!==constants.A.OBJECT_TYPE_TURTLE&&jxg.A.debug("Board.removeObject: object "+G.id+" not found in list.");delete this.objects[G.id],delete this.elementsByName[G.name],G.visProp&&G.evalVisProp("trace")&&G.clearTrace(),utils_type.A.exists(G.remove)&&G.remove()}catch(Q){jxg.A.debug(G.id+": Could not be removed: "+Q)}return this},removeObject:function(G,_){var J;if(this.renderer.suspendRedraw(this),utils_type.A.isArray(G))for(J=0;J<G.length;J++)this._removeObj(G[J],_);else this._removeObj(G,_);return this.renderer.unsuspendRedraw(),this.update(),this},removeAncestors:function(G){var _;for(_ in G.ancestors)G.ancestors.hasOwnProperty(_)&&this.removeAncestors(G.ancestors[_]);return this.removeObject(G),this},initGeonextBoard:function(){var G,_,J;return G=this.create("point",[0,0],{id:this.id+"g00e0",name:"Ursprung",withLabel:!1,visible:!1,fixed:!0}),_=this.create("point",[1,0],{id:this.id+"gX0e0",name:"Punkt_1_0",withLabel:!1,visible:!1,fixed:!0}),J=this.create("point",[0,1],{id:this.id+"gY0e0",name:"Punkt_0_1",withLabel:!1,visible:!1,fixed:!0}),this.create("line",[G,_],{id:this.id+"gXLe0",name:"X-Achse",withLabel:!1,visible:!1}),this.create("line",[G,J],{id:this.id+"gYLe0",name:"Y-Achse",withLabel:!1,visible:!1}),this},resizeContainer:function(G,_,J,Z){var Q,ee,te,ne,ie;return ee=this.canvasWidth,te=this.canvasHeight,Z||(Q=this.getBoundingBox()),this.canvasWidth=parseFloat(G),this.canvasHeight=parseFloat(_),J||(this.containerObj.style.width=this.canvasWidth+"px",this.containerObj.style.height=this.canvasHeight+"px"),this.renderer.resize(this.canvasWidth,this.canvasHeight),Z?(ne=.5*(this.canvasWidth-ee),ie=.5*(this.canvasHeight-te),this.moveOrigin(this.origin.scrCoords[1]+ne,this.origin.scrCoords[2]+ie)):this.setBoundingBox(Q,this.keepaspectratio,"keep"),this},showDependencies:function(){var G,_,J,Z,Q;for(G in _=`<p>
`,this.objects)if(this.objects.hasOwnProperty(G)){for(J in Q=0,this.objects[G].childElements)this.objects[G].childElements.hasOwnProperty(J)&&(Q+=1);for(J in Q>=0&&(_+="<strong>"+this.objects[G].id+":</strong> "),this.objects[G].childElements)this.objects[G].childElements.hasOwnProperty(J)&&(_+=this.objects[G].childElements[J].id+"("+this.objects[G].childElements[J].name+"), ");_+=`<p>
`}return _+=`</p>
`,(Z=window.open()).document.open(),Z.document.write(_),Z.document.close(),this},showXML:function(){var G=window.open("");return G.document.open(),G.document.write("<pre>"+utils_type.A.escapeHTML(this.xmlString)+"</pre>"),G.document.close(),this},prepareUpdate:function(G){var _,J,Z,Q=this.objectsList.length;for(_=0;_<Q;_++)if(Z=this.objectsList[_],this._change3DView||utils_type.A.exists(G)&&G.elType==="view3d_slider"){if(Z.needsUpdate=Z.visProp.element3d||Z.elType==="view3d"||Z.elType==="view3d_slider"||this.needsFullUpdate,Z.visProp.element3d&&Z.visProp.element3d.type===constants.A.OBJECT_TYPE_SPHERE3D)for(J=0;J<Z.parents.length;J++)this.objects[Z.parents[J]].needsUpdate=!0}else Z.needsUpdate=Z.needsRegularUpdate||this.needsFullUpdate;for(_ in this.groups)this.groups.hasOwnProperty(_)&&((Z=this.groups[_]).needsUpdate=Z.needsRegularUpdate||this.needsFullUpdate);return this},updateElements:function(G){var _,J;for(G=this.select(G),_=0;_<this.objectsList.length;_++)J=this.objectsList[_],this.needsFullUpdate&&J.elementClass===constants.A.OBJECT_CLASS_TEXT&&J.updateSize(),J.update(!utils_type.A.exists(G)||J.id!==G.id).updateVisibility();for(_ in this.groups)this.groups.hasOwnProperty(_)&&this.groups[_].update(G);return this},updateRenderer:function(){var G,_,J,Z=this.objectsList.length,Q=[];if(this.renderer){if(this.renderer.type==="canvas")this.updateRendererCanvas();else{for(G=0;G<Z;G++)this.objectsList[G].visProp.islabel&&this.objectsList[G].visProp.autoposition?Q.push(G):this.objectsList[G].updateRenderer();for(_=Q.length;_!==0;)J=Math.floor(Math.random()*_),_--,[Q[_],Q[J]]=[Q[J],Q[_]];for(G=0;G<Q.length;G++)this.objectsList[Q[G]].updateRenderer()}return this}},updateRendererCanvas:function(){var G,_,J,Z=this.objectsList.length,Q=[];for(G=0;G<Z;G++)if((_=this.objectsList[G]).elType==="view3d"&&_.evalVisProp("depthorder.enabled")){Q=_.evalVisProp("depthorder.layers"),_.updateRenderer();break}for(Z=(J=this.objectsList.toSorted(function(ee,te){return ee.visProp.layer!==te.visProp.layer?ee.visProp.layer-te.visProp.layer:Q.indexOf(ee.visProp.layer)===-1?ee._pos-te._pos:ee.visProp.element3d||te.visProp.element3d?ee.visProp.element3d&&!te.visProp.element3d?-1:te.visProp.element3d&&!ee.visProp.element3d?1:ee.visProp.element3d.zIndex-te.visProp.element3d.zIndex:ee._pos-te._pos})).length,G=0;G<Z;G++)J[G].prepareUpdate().updateRenderer();return this},addHook:function(G,_,J){return jxg.A.deprecated("Board.addHook()","Board.on()"),_=utils_type.A.def(_,"update"),J=utils_type.A.def(J,this),this.hooks.push([_,G]),this.on(_,G,J),this.hooks.length-1},addEvent:jxg.A.shortcut(jxg.A.Board.prototype,"on"),removeHook:function(G){return jxg.A.deprecated("Board.removeHook()","Board.off()"),this.hooks[G]&&(this.off(this.hooks[G][0],this.hooks[G][1]),this.hooks[G]=null),this},removeEvent:jxg.A.shortcut(jxg.A.Board.prototype,"off"),updateHooks:function(G){var _=Array.prototype.slice.call(arguments,0);return jxg.A.deprecated("Board.updateHooks()","Board.triggerEventHandlers()"),_[0]=utils_type.A.def(_[0],"update"),this.triggerEventHandlers([_[0]],arguments),this},addChild:function(G){return utils_type.A.exists(G)&&utils_type.A.exists(G.containerObj)&&(this.dependentBoards.push(G),this.update()),this},removeChild:function(G){var _;for(_=this.dependentBoards.length-1;_>=0;_--)this.dependentBoards[_]===G&&this.dependentBoards.splice(_,1);return this},update:function(G){var _,J,Z,Q,ee;if(this.inUpdate||this.isSuspendedUpdate)return this;for(this.inUpdate=!0,this.attr.minimizereflow==="all"&&this.containerObj&&this.renderer.type!=="vml"&&(ee=this.document.activeElement,Q=this.renderer.removeToInsertLater(this.containerObj)),this.attr.minimizereflow==="svg"&&this.renderer.type==="svg"&&(ee=this.document.activeElement,Q=this.renderer.removeToInsertLater(this.renderer.svgRoot)),this.prepareUpdate(G).updateElements(G).updateConditions(),this.renderer.suspendRedraw(this),this.updateRenderer(),this.renderer.unsuspendRedraw(),this.triggerEventHandlers(["update"],[]),Q&&(Q(),ee.focus()),J=this.dependentBoards.length,_=0;_<J;_++)Z=this.dependentBoards[_],utils_type.A.exists(Z)&&Z!==this&&(Z.updateQuality=this.updateQuality,Z.prepareUpdate().updateElements().updateConditions(),Z.renderer.suspendRedraw(this),Z.updateRenderer(),Z.renderer.unsuspendRedraw(),Z.triggerEventHandlers(["update"],[]));return this.inUpdate=!1,this},fullUpdate:function(){return this.needsFullUpdate=!0,this.update(),this.needsFullUpdate=!1,this},addGrid:function(){return this.create("grid",[]),this},removeGrids:function(){var G;for(G=0;G<this.grids.length;G++)this.removeObject(this.grids[G]);return this.grids.length=0,this.update(),this},create:function(G,_,J){var Z,Q;for(G=G.toLowerCase(),utils_type.A.exists(_)||(_=[]),utils_type.A.exists(J)||(J={}),Q=0;Q<_.length;Q++)!utils_type.A.isString(_[Q])||G==="text"&&Q===2||G==="solidofrevolution3d"&&Q===2||G==="text3d"&&(Q===2||Q===4)||!(G!=="input"&&G!=="checkbox"&&G!=="button"||Q!==2&&Q!==3)||G==="curve"||G==="functiongraph"||G==="implicitcurve"||(Q>0&&_[0].elType==="view3d"?_[Q]=_[0].select(_[Q]):_[Q]=this.select(_[Q]));if(!utils_type.A.isFunction(jxg.A.elements[G]))throw new Error("JSXGraph: create: Unknown element type given: "+G);return Z=jxg.A.elements[G](this,_,J),utils_type.A.exists(Z)?(Z.prepareUpdate&&Z.update&&Z.updateRenderer&&Z.fullUpdate(),Z):(jxg.A.debug("JSXGraph: create: failure creating "+G),Z)},createElement:function(){return jxg.A.deprecated("Board.createElement()","Board.create()"),this.create.apply(this,arguments)},clearTraces:function(){var G;for(G=0;G<this.objectsList.length;G++)this.objectsList[G].clearTrace();return this.numTraces=0,this},suspendUpdate:function(){return this.inUpdate||(this.isSuspendedUpdate=!0),this},unsuspendUpdate:function(){return this.isSuspendedUpdate&&(this.isSuspendedUpdate=!1,this.fullUpdate()),this},setBoundingBox:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae=0,le=0,ue=1,de=env.A.getDimensions(this.containerObj,this.document);return utils_type.A.isArray(G)?(G[0]<this.maxboundingbox[0]-math.A.eps||G[1]>this.maxboundingbox[1]+math.A.eps||G[2]>this.maxboundingbox[2]+math.A.eps||G[3]<this.maxboundingbox[3]-math.A.eps||(utils_type.A.exists(J)||(J="reset"),ee=this.unitX,te=this.unitY,this.canvasWidth=parseFloat(de.width),this.canvasHeight=parseFloat(de.height),Q=this.canvasWidth,Z=this.canvasHeight,_?(this.keepaspectratio?(ne=ee/te,isNaN(ne)&&(ne=1)):ne=1,J==="keep"&&(ue=this.zoomX/this.zoomY),oe=ee*(ie=G[2]-G[0]),se=te*(re=G[1]-G[3]),Q>=Z?oe>=se?(this.unitY=Z/re,this.unitX=this.unitY*ne):(this.unitY=Z/Math.abs(ie)*math.A.sign(re)/ue,this.unitX=this.unitY*ne):se>oe?(this.unitX=Q/ie,this.unitY=this.unitX/ne):(this.unitX=Q/Math.abs(re)*math.A.sign(ie)*ue,this.unitY=this.unitX/ne),ae=.5*(Q/this.unitX-ie),le=.5*(Z/this.unitY-re),this.keepaspectratio=!0):(this.unitX=Q/(G[2]-G[0]),this.unitY=Z/(G[1]-G[3]),this.keepaspectratio=!1),this.moveOrigin(-this.unitX*(G[0]-ae),this.unitY*(G[1]+le)),J==="update"?(this.zoomX*=this.unitX/ee,this.zoomY*=this.unitY/te):J==="reset"&&(this.zoomX=utils_type.A.exists(this.attr.zoomx)?this.attr.zoomx:1,this.zoomY=utils_type.A.exists(this.attr.zoomy)?this.attr.zoomy:1)),this):this},getBoundingBox:function(){var G=new base_coords.A(constants.A.COORDS_BY_SCREEN,[0,0],this).usrCoords,_=new base_coords.A(constants.A.COORDS_BY_SCREEN,[this.canvasWidth,this.canvasHeight],this).usrCoords;return[G[1],G[2],_[1],_[2]]},_set:function(G,_){G=G.toLocaleLowerCase(),_===null||!utils_type.A.isObject(_)||utils_type.A.exists(_.id)||utils_type.A.exists(_.name)?this.attr[G]=_:utils_type.A.mergeAttr(this.attr[G],_)},setAttribute:function(G){var _,J,Z,Q,ee,te,ne={};for(_=0;_<arguments.length;_++)J=arguments[_],utils_type.A.isString(J)?(Z=J.split(":"),ne[utils_type.A.trim(Z[0])]=utils_type.A.trim(Z[1])):utils_type.A.isArray(J)?ne[J[0]]=J[1]:jxg.A.extend(ne,J);for(_ in ne)if(ne.hasOwnProperty(_)&&(Q=_.replace(/\s+/g,"").toLowerCase(),ee=ne[_]),ee=(!ee.toLowerCase||ee.toLowerCase()!=="false")&&ee,this.attr[Q]!==ee)switch(Q){case"axis":ee===!1&&utils_type.A.exists(this.defaultAxes)&&(this.defaultAxes.x.setAttribute({visible:!1}),this.defaultAxes.y.setAttribute({visible:!1}));break;case"boundingbox":this.setBoundingBox(ee,this.keepaspectratio),this._set(Q,ee);break;case"defaultaxes":utils_type.A.exists(this.defaultAxes.x)&&utils_type.A.exists(ee.x)&&this.defaultAxes.x.setAttribute(ee.x),utils_type.A.exists(this.defaultAxes.y)&&utils_type.A.exists(ee.y)&&this.defaultAxes.y.setAttribute(ee.y);break;case"title":this.document.getElementById(this.container+"_ARIAlabel").innerText=ee,this._set(Q,ee);break;case"keepaspectratio":this._set(Q,ee),this.setBoundingBox(this.getBoundingBox(),ee,"keep");break;case"document":case"maxboundingbox":this[Q]=ee,this._set(Q,ee);break;case"zoomx":case"zoomy":this[Q]=ee,this._set(Q,ee),this.setZoom(this.attr.zoomx,this.attr.zoomy);break;case"registerevents":case"renderer":break;case"fullscreen":case"screenshot":(te=this.containerObj.ownerDocument.getElementById(this.container+"_navigation_"+Q))&&utils_type.A.exists(ee.symbol)&&(te.innerText=utils_type.A.evaluate(ee.symbol)),this._set(Q,ee);break;case"selection":ee.visible=!1,ee.withLines=!1,ee.vertices={visible:!1},this._set(Q,ee);break;case"showcopyright":this.renderer.type==="svg"&&((te=this.containerObj.ownerDocument.getElementById(this.renderer.uniqName("licenseText")))?te.style.display=utils_type.A.evaluate(ee)?"inline":"none":utils_type.A.evaluate(ee)&&this.renderer.displayCopyright(constants.A.licenseText,parseInt(this.options.text.fontSize,10))),this._set(Q,ee);break;case"showlogo":this.renderer.type==="svg"&&((te=this.containerObj.ownerDocument.getElementById(this.renderer.uniqName("licenseLogo")))?te.style.display=utils_type.A.evaluate(ee)?"inline":"none":utils_type.A.evaluate(ee)&&this.renderer.displayLogo(constants.A.licenseLogo,parseInt(this.options.text.fontSize,10))),this._set(Q,ee);break;default:utils_type.A.exists(this.attr[Q])&&this._set(Q,ee)}return this.containerObj.ownerDocument.getElementById(this.container+"_navigationbar").remove(),this.renderer.drawNavigationBar(this,this.attr.navbar),this.triggerEventHandlers(["attribute"],[ne,this]),this.fullUpdate(),this},addAnimation:function(G){var _=this;return this.animationObjects[G.id]=G,this.animationIntervalCode||(this.animationIntervalCode=window.setInterval(function(){_.animate()},G.board.attr.animationdelay)),this},stopAllAnimation:function(){var G;for(G in this.animationObjects)this.animationObjects.hasOwnProperty(G)&&utils_type.A.exists(this.animationObjects[G])&&(this.animationObjects[G]=null,delete this.animationObjects[G]);return window.clearInterval(this.animationIntervalCode),delete this.animationIntervalCode,this},animate:function(){var G,_,J,Z,Q,ee,te,ne,ie=0,re=null;for(_ in this.animationObjects)if(this.animationObjects.hasOwnProperty(_)&&utils_type.A.exists(this.animationObjects[_])){if(ie+=1,(J=this.animationObjects[_]).animationPath&&(Z=utils_type.A.isFunction(J.animationPath)?J.animationPath(new Date().getTime()-J.animationStart):J.animationPath.pop(),!utils_type.A.exists(Z)||!utils_type.A.isArray(Z)&&isNaN(Z)?delete J.animationPath:(J.setPositionDirectly(constants.A.COORDS_BY_USER,Z),J.fullUpdate(),re=J)),J.animationData){for(Q in te=0,J.animationData)J.animationData.hasOwnProperty(Q)&&(ee=J.animationData[Q].pop(),utils_type.A.exists(ee)?(te+=1,(G={})[Q]=ee,J.setAttribute(G)):delete J.animationData[ee]);te===0&&delete J.animationData}utils_type.A.exists(J.animationData)||utils_type.A.exists(J.animationPath)||(this.animationObjects[_]=null,delete this.animationObjects[_],utils_type.A.exists(J.animationCallback)&&(ne=J.animationCallback,J.animationCallback=null,ne()))}return ie===0?(window.clearInterval(this.animationIntervalCode),delete this.animationIntervalCode):this.update(re),this},migratePoint:function(G,_,J){var Z,Q,ee,te,ne,ie,re=!1;for(Q in G=this.select(G),_=this.select(_),utils_type.A.exists(G.label)&&(ie=G.label.id,re=!0,this.removeObject(G.label)),G.childElements)if(G.childElements.hasOwnProperty(Q)){for(ee in te=!1,Z=G.childElements[Q])Z.hasOwnProperty(ee)&&Z[ee]===G&&(Z[ee]=_,te=!0);for(te&&delete G.childElements[Q],ne=0;ne<Z.parents.length;ne++)Z.parents[ne]===G.id&&(Z.parents[ne]=_.id);_.addChild(Z)}return J&&(re&&(delete _.childElements[ie],delete _.descendants[ie]),_.label&&this.removeObject(_.label),delete this.elementsByName[_.name],_.name=G.name,re&&_.createLabel()),this.removeObject(G),utils_type.A.exists(_.name)&&_.name!==""&&(this.elementsByName[_.name]=_),this.fullUpdate(),this},emulateColorblindness:function(G){var _,J;if(utils_type.A.exists(G)||(G="none"),this.currentCBDef===G)return this;for(_ in this.objects)this.objects.hasOwnProperty(_)&&(J=this.objects[_],G!=="none"?(this.currentCBDef==="none"&&(J.visPropOriginal={strokecolor:J.visProp.strokecolor,fillcolor:J.visProp.fillcolor,highlightstrokecolor:J.visProp.highlightstrokecolor,highlightfillcolor:J.visProp.highlightfillcolor}),J.setAttribute({strokecolor:utils_color.A.rgb2cb(J.eval(J.visPropOriginal.strokecolor),G),fillcolor:utils_color.A.rgb2cb(J.eval(J.visPropOriginal.fillcolor),G),highlightstrokecolor:utils_color.A.rgb2cb(J.eval(J.visPropOriginal.highlightstrokecolor),G),highlightfillcolor:utils_color.A.rgb2cb(J.eval(J.visPropOriginal.highlightfillcolor),G)})):utils_type.A.exists(J.visPropOriginal)&&jxg.A.extend(J.visProp,J.visPropOriginal));return this.currentCBDef=G,this.update(),this},select:function(G,_){var J,Z,Q,ee,te=G;if(te===null)return te;if(utils_type.A.isString(te)&&te!=="")utils_type.A.exists(this.objects[te])?te=this.objects[te]:utils_type.A.exists(this.elementsByName[te])?te=this.elementsByName[te]:utils_type.A.exists(this.groups[te])&&(te=this.groups[te]);else if(!_&&(utils_type.A.isFunction(te)||utils_type.A.isObject(te)&&!utils_type.A.isFunction(te.setAttribute))){for(Z={},ee=(J=utils_type.A.filterElements(this.objectsList,te)).length,Q=0;Q<ee;Q++)Z[J[Q].id]=J[Q];te=new composition(Z)}else utils_type.A.isObject(te)&&utils_type.A.exists(te.id)&&!utils_type.A.exists(this.objects[te.id])&&(te=null);return te},hasPoint:function(G,_){var J=G,Z=_,Q=this.getBoundingBox();return utils_type.A.exists(G)&&utils_type.A.isArray(G.usrCoords)&&(J=G.usrCoords[1],Z=G.usrCoords[2]),!!(utils_type.A.isNumber(J)&&utils_type.A.isNumber(Z)&&Q[0]<J&&J<Q[2]&&Q[1]>Z&&Z>Q[3])},updateCSSTransforms:function(){var G=this.containerObj,_=G,J=G;if(this.cssTransMat=env.A.getCSSTransformMatrix(_),utils_type.A.exists(_.getRootNode)){for(_=_.parentNode===_.getRootNode()?_.parentNode.host:_.parentNode;_;)this.cssTransMat=math.A.matMatMult(env.A.getCSSTransformMatrix(_),this.cssTransMat),_=_.parentNode===_.getRootNode()?_.parentNode.host:_.parentNode;this.cssTransMat=math.A.inverse(this.cssTransMat)}else{for(_=_.offsetParent;_;){for(this.cssTransMat=math.A.matMatMult(env.A.getCSSTransformMatrix(_),this.cssTransMat),J=J.parentNode;J!==_;)this.cssTransMat=math.A.matMatMult(env.A.getCSSTransformMatrix(_),this.cssTransMat),J=J.parentNode;_=_.offsetParent}this.cssTransMat=math.A.inverse(this.cssTransMat)}return this},startSelectionMode:function(){this.selectingMode=!0,this.selectionPolygon.setAttribute({visible:!0}),this.selectingBox=[[0,0],[0,0]],this._setSelectionPolygonFromBox(),this.selectionPolygon.fullUpdate()},stopSelectionMode:function(){return this.selectingMode=!1,this.selectionPolygon.setAttribute({visible:!1}),[this.selectionPolygon.vertices[0].coords,this.selectionPolygon.vertices[2].coords]},_startSelecting:function(G){this.isSelecting=!0,this.selectingBox=[[G[0],G[1]],[G[0],G[1]]],this._setSelectionPolygonFromBox()},_moveSelecting:function(G){this.isSelecting&&(this.selectingBox[1]=[G[0],G[1]],this._setSelectionPolygonFromBox(),this.selectionPolygon.fullUpdate())},_stopSelecting:function(G){var _=this.getMousePosition(G);this.isSelecting=!1,this.selectingBox[1]=[_[0],_[1]],this._setSelectionPolygonFromBox()},_setSelectionPolygonFromBox:function(){var G=this.selectingBox[0],_=this.selectingBox[1];this.selectionPolygon.vertices[0].setPositionDirectly(jxg.A.COORDS_BY_SCREEN,[G[0],G[1]]),this.selectionPolygon.vertices[1].setPositionDirectly(jxg.A.COORDS_BY_SCREEN,[G[0],_[1]]),this.selectionPolygon.vertices[2].setPositionDirectly(jxg.A.COORDS_BY_SCREEN,[_[0],_[1]]),this.selectionPolygon.vertices[3].setPositionDirectly(jxg.A.COORDS_BY_SCREEN,[_[0],G[1]])},_testForSelection:function(G){this._isRequiredKeyPressed(G,"selection")&&(utils_type.A.exists(this.selectionPolygon)||this._createSelectionPolygon(this.attr),this.startSelectionMode())},_createSelectionPolygon:function(G){var _;return utils_type.A.exists(this.selectionPolygon)||(_=utils_type.A.copyAttributes(G,src_options.A,"board","selection")).enabled===!0&&(this.selectionPolygon=this.create("polygon",[[0,0],[0,0],[0,0],[0,0]],_)),this},__evt__attribute:function(G){},__evt__down:function(G){},__evt__mousedown:function(G){},__evt__pendown:function(G){},__evt__pointerdown:function(G){},__evt__touchstart:function(G){},__evt__up:function(G){},__evt__mouseup:function(G){},__evt__pointerup:function(G){},__evt__touchend:function(G){},__evt__click:function(G){},__evt__dblclick:function(G){},__evt__mouseclick:function(G){},__evt__mousedblclick:function(G){},__evt__pointerclick:function(G){},__evt__pointerdblclick:function(G){},__evt__move:function(G,_){},__evt__mousemove:function(G,_){},__evt__penmove:function(G,_){},__evt__pointermove:function(G,_){},__evt__touchmove:function(G,_){},__evt__keymove:function(G,_){},__evt__hit:function(G,_,J){},__evt__mousehit:function(G,_,J){},__evt__update:function(){},__evt__boundingbox:function(){},__evt__startselecting:function(){},__evt__mousestartselecting:function(){},__evt__pointerstartselecting:function(){},__evt__touchstartselecting:function(){},__evt__stopselecting:function(){},__evt__mousestopselecting:function(){},__evt__pointerstopselecting:function(){},__evt__touchstopselecting:function(){},__evt__moveselecting:function(){},__evt__mousemoveselecting:function(){},__evt__pointermoveselecting:function(){},__evt__touchmoveselecting:function(){},__evt:function(){},toFullscreen:function(G){var _,J,Z,Q,ee=this.document;return G=G||this.container,this._fullscreen_inner_id=G,Z=ee.getElementById(G),_="fullscreenwrap_"+G,utils_type.A.exists(Z._cssFullscreenStore)||(Q=this.containerObj.getBoundingClientRect(),Z._cssFullscreenStore={w:Q.width,h:Q.height}),ee.getElementById(_)?J=ee.getElementById(_):((J=document.createElement("div")).classList.add("JXG_wrap_private"),J.setAttribute("id",_),Z.parentNode.insertBefore(J,Z),J.appendChild(Z)),J.requestFullscreen=J.requestFullscreen||J.webkitRequestFullscreen||J.mozRequestFullScreen||J.msRequestFullscreen,(ee.fullscreenElement!==void 0?ee.fullscreenElement:ee.webkitFullscreenElement!==void 0?ee.webkitFullscreenElement:ee.msFullscreenElement)===null?J.requestFullscreen&&(J.requestFullscreen(),this.startFullscreenResizeObserver(J)):(this.stopFullscreenResizeObserver(J),utils_type.A.exists(document.exitFullscreen)?document.exitFullscreen():utils_type.A.exists(document.webkitExitFullscreen)&&document.webkitExitFullscreen()),this},fullscreenListener:function(G){var _,J,Z,Q=this.document;_=this._fullscreen_inner_id,utils_type.A.exists(_)&&(Z=Q.fullscreenElement!==void 0?Q.fullscreenElement:Q.webkitFullscreenElement!==void 0?Q.webkitFullscreenElement:Q.msFullscreenElement,J=Q.getElementById(_),Z?(J._cssFullscreenStore.id=Z.id,J._cssFullscreenStore.isFullscreen=!0,J._cssFullscreenStore.margin=J.style.margin,J._cssFullscreenStore.width=J.style.width,J._cssFullscreenStore.height=J.style.height,J._cssFullscreenStore.transform=J.style.transform,J.style.width=J._cssFullscreenStore.w+"px",J.style.height=J._cssFullscreenStore.h+"px",J.style.margin="",env.A.scaleJSXGraphDiv(Z.id,_,Q,utils_type.A.evaluate(this.attr.fullscreen.scale)),Z=null):utils_type.A.exists(J._cssFullscreenStore)&&(J._cssFullscreenStore.isFullscreen=!1,J.style.margin=J._cssFullscreenStore.margin,J.style.width=J._cssFullscreenStore.width,J.style.height=J._cssFullscreenStore.height,J.style.transform=J._cssFullscreenStore.transform,J._cssFullscreenStore=null,J.parentElement.replaceWith(J)),this.updateCSSTransforms())},startFullscreenResizeObserver:function(G){var _=this;return env.A.isBrowser&&this.attr.resize&&this.attr.resize.enabled?(this.resizeObserver=new ResizeObserver(function(J){var Z,Q,ee=_.document;_._isResizing||(_._isResizing=!0,window.setTimeout(function(){try{Z=_._fullscreen_inner_id,(Q=ee.fullscreenElement!==void 0?ee.fullscreenElement:ee.webkitFullscreenElement!==void 0?ee.webkitFullscreenElement:ee.msFullscreenElement)!==null&&env.A.scaleJSXGraphDiv(Q.id,Z,ee,utils_type.A.evaluate(_.attr.fullscreen.scale))}catch{_.stopFullscreenResizeObserver(G)}finally{_._isResizing=!1}},_.attr.resize.throttle))}),this.resizeObserver.observe(G),this):this},stopFullscreenResizeObserver:function(G){return env.A.isBrowser&&this.attr.resize&&this.attr.resize.enabled?(utils_type.A.exists(this.resizeObserver)&&this.resizeObserver.unobserve(G),this):this},addLogEntry:function(G,_,J){var Z,Q,ee=this.userLog.length-1;return utils_type.A.exists(_.elementClass)&&(Q=_.id),utils_type.A.evaluate(this.attr.logging.enabled)&&(Z=new Date().getTime(),ee>=0&&this.userLog[ee].type===G&&this.userLog[ee].id===Q&&Z-this.userLog[ee].end<500?(this.userLog[ee].end=Z,this.userLog[ee].endpos=J):this.userLog.push({type:G,id:Q,start:Z,startpos:J,end:Z,endpos:J,bbox:this.getBoundingBox(),canvas:[this.canvasWidth,this.canvasHeight],zoom:[this.zoomX,this.zoomY]})),this},createRoulette:function(G,_,J,Z,Q,ee,te){var ne=this;return new function(){var ie,re=0,oe=0,se=0,ae=J,le=numerics.A.root(function(Re){var Te=G.X(ae),Me=G.Y(ae),Ne=_.X(Re),Le=_.Y(Re);return(Te-Ne)*(Te-Ne)+(Me-Le)*(Me-Le)},[0,2*Math.PI]),ue=0,de=0,pe=ne.create("transform",[function(){return re}],{type:"rotate"}),fe=ne.create("transform",[function(){return re},function(){return G.X(ae)},function(){return G.Y(ae)}],{type:"rotate"}),_e=ne.create("transform",[function(){return oe},function(){return se}],{type:"translate"}),ye=function(Re,Te,Me){var Ne=numerics.A.D(Re.X)(Te),Le=numerics.A.D(Re.Y)(Te),Ie=numerics.A.D(Re.X)(Me),Ge=numerics.A.D(Re.Y)(Me),He=numerics.A.D(Re.X)(.5*(Te+Me)),Be=numerics.A.D(Re.Y)(.5*(Te+Me)),ze=math.A.hypot(Ne,Le),Fe=math.A.hypot(Ie,Ge);return(ze+4*math.A.hypot(He,Be)+Fe)*(Me-Te)/6},be=function(Re){return ie-ye(_,le,Re)},Ae=Math.PI/18,Ce=9*Ae,Ee=null;return this.rolling=function(){var Re,Te,Me,Ne,Le;ie=ye(G,ae,ue=ae+Q*Z),de=numerics.A.root(be,le),Re=new complex(G.X(ue),G.Y(ue)),Te=new complex(_.X(de),_.Y(de)),Me=new complex(numerics.A.D(G.X)(ue),numerics.A.D(G.Y)(ue)),Ne=new complex(numerics.A.D(_.X)(de),numerics.A.D(_.Y)(de)),Le=complex.C.div(Me,Ne),re=Math.atan2(Le.imaginary,Le.real),Le.div(complex.C.abs(Le)),Le.mult(Te),oe=Re.real-Le.real,se=Re.imaginary-Le.imaginary,re<-Ae&&re>-Ce?(re=-Ae,fe.applyOnce(te)):re>Ae&&re<Ce?(re=Ae,fe.applyOnce(te)):(pe.applyOnce(te),_e.applyOnce(te),ae=ue,le=de),ne.update()},this.start=function(){return ee>0&&(Ee=window.setInterval(this.rolling,ee)),this},this.stop=function(){return window.clearInterval(Ee),this},this}}});var base_board=jxg.A.Board;jxg.A.SVGRenderer=function(G,_){var J;for(this.type="svg",this.isIE=navigator.appVersion.indexOf("MSIE")!==-1||navigator.userAgent.match(/Trident\//),this.svgRoot=null,this.svgNamespace="http://www.w3.org/2000/svg",this.xlinkNamespace="http://www.w3.org/1999/xlink",this.container=G,this.container.style.MozUserSelect="none",this.container.style.userSelect="none",this.container.style.overflow="hidden",this.container.style.position===""&&(this.container.style.position="relative"),this.svgRoot=this.container.ownerDocument.createElementNS(this.svgNamespace,"svg"),this.svgRoot.style.overflow="hidden",this.svgRoot.style.display="block",this.resize(_.width,_.height),this.container.appendChild(this.svgRoot),this.defs=this.container.ownerDocument.createElementNS(this.svgNamespace,"defs"),this.svgRoot.appendChild(this.defs),this.createShadowFilter=function(Z,Q,ee,te,ne,ie){var re,oe,se,ae,le,ue=this.container.ownerDocument.createElementNS(this.svgNamespace,"filter");return ue.setAttributeNS(null,"id",Z),ue.setAttributeNS(null,"width","300%"),ue.setAttributeNS(null,"height","300%"),ue.setAttributeNS(null,"filterUnits","userSpaceOnUse"),(re=this.container.ownerDocument.createElementNS(this.svgNamespace,"feOffset")).setAttributeNS(null,"in","SourceGraphic"),re.setAttributeNS(null,"result","offOut"),re.setAttributeNS(null,"dx",ie[0]),re.setAttributeNS(null,"dy",ie[1]),ue.appendChild(re),(oe=this.container.ownerDocument.createElementNS(this.svgNamespace,"feColorMatrix")).setAttributeNS(null,"in","offOut"),oe.setAttributeNS(null,"result","colorOut"),oe.setAttributeNS(null,"type","matrix"),Q==="none"||!utils_type.A.isArray(Q)||Q.length<3?oe.setAttributeNS(null,"values","0.1 0 0 0 0  0 0.1 0 0 0  0 0 0.1 0 0  0 0 0 "+ee+" 0"):(Q[0]/=255,Q[1]/=255,Q[2]/=255,le=te+" 0 0 0 "+Q[0]+"  0 "+te+" 0 0 "+Q[1]+"  0 0 "+te+" 0 "+Q[2]+"  0 0 0 "+ee+" 0",oe.setAttributeNS(null,"values",le)),ue.appendChild(oe),(se=this.container.ownerDocument.createElementNS(this.svgNamespace,"feGaussianBlur")).setAttributeNS(null,"in","colorOut"),se.setAttributeNS(null,"result","blurOut"),se.setAttributeNS(null,"stdDeviation",ne),ue.appendChild(se),(ae=this.container.ownerDocument.createElementNS(this.svgNamespace,"feBlend")).setAttributeNS(null,"in","SourceGraphic"),ae.setAttributeNS(null,"in2","blurOut"),ae.setAttributeNS(null,"mode","normal"),ue.appendChild(ae),ue},this.uniqName=function(){return this.container.id+"_"+Array.prototype.slice.call(arguments).join("_")},this.toStr=function(){var Z=Array.prototype.slice.call(arguments).join("");return utils_type.A.exists(encodeURIComponent)&&(Z=encodeURIComponent(Z)),Z},this.toURL=function(){return"url(#"+this.toStr.apply(this,arguments)+")"},this.defs.appendChild(this.createShadowFilter(this.uniqName("f1"),"none",1,.1,3,[5,5])),this.layer=[],J=0;J<src_options.A.layer.numlayers;J++)this.layer[J]=this.container.ownerDocument.createElementNS(this.svgNamespace,"g"),this.svgRoot.appendChild(this.layer[J]);try{this.foreignObjLayer=this.container.ownerDocument.createElementNS(this.svgNamespace,"foreignObject"),this.foreignObjLayer.setAttribute("display","none"),this.foreignObjLayer.setAttribute("x",0),this.foreignObjLayer.setAttribute("y",0),this.foreignObjLayer.setAttribute("width","100%"),this.foreignObjLayer.setAttribute("height","100%"),this.foreignObjLayer.setAttribute("id",this.uniqName("foreignObj")),this.svgRoot.appendChild(this.foreignObjLayer),this.supportsForeignObject=!0}catch{this.supportsForeignObject=!1}},jxg.A.SVGRenderer.prototype=new renderer_abstract,jxg.A.extend(jxg.A.SVGRenderer.prototype,{_createArrowHead:function(G,_,J){var Z,Q,ee,te,ne=G.id+"Triangle";return utils_type.A.exists(_)&&(ne+=_),utils_type.A.exists(J)&&(ne+=J),(Z=this.createPrim("marker",ne)).setAttributeNS(null,"fill","context-stroke"),Z.setAttributeNS(null,"stroke","context-stroke"),Z.setAttributeNS(null,"stroke-width",0),Z.setAttributeNS(null,"orient","auto"),Z.setAttributeNS(null,"markerUnits","strokeWidth"),Q=this.container.ownerDocument.createElementNS(this.svgNamespace,"path"),te=5,_==="Start"?(ee=0,J===2?Q.setAttributeNS(null,"d","M 10,0 L 0,5 L 10,10 L 5,5 z"):J===3?Q.setAttributeNS(null,"d","M 0,0 L 3.33,0 L 3.33,10 L 0,10 z"):J===4?(te=3.31,Q.setAttributeNS(null,"d","M 0.00,3.31 C 3.53,3.84 7.13,4.50 10.00,6.63 C 9.33,5.52 8.67,4.42 8.00,3.31 C 8.67,2.21 9.33,1.10 10.00,0.00 C 7.13,2.13 3.53,2.79 0.00,3.31")):J===5?(te=3.28,Q.setAttributeNS(null,"d","M 0.00,3.28 C 3.39,4.19 6.81,5.07 10.00,6.55 C 9.38,5.56 9.00,4.44 9.00,3.28 C 9.00,2.11 9.38,0.99 10.00,0.00 C 6.81,1.49 3.39,2.37 0.00,3.28")):J===6?(te=2.84,Q.setAttributeNS(null,"d","M 0.00,2.84 C 3.39,3.59 6.79,4.35 10.00,5.68 C 9.67,4.73 9.33,3.78 9.00,2.84 C 9.33,1.89 9.67,0.95 10.00,0.00 C 6.79,1.33 3.39,2.09 0.00,2.84")):J===7?(te=5.2,Q.setAttributeNS(null,"d","M 0.00,5.20 C 4.04,5.20 7.99,6.92 10.00,10.39 M 10.00,0.00 C 7.99,3.47 4.04,5.20 0.00,5.20")):Q.setAttributeNS(null,"d","M 10,0 L 0,5 L 10,10 z"),G.elementClass===constants.A.OBJECT_CLASS_LINE&&(ee=J===2?4.9:J===3?3.3:J===4||J===5||J===6?6.66:J===7?0:10)):(ee=10,J===2?Q.setAttributeNS(null,"d","M 0,0 L 10,5 L 0,10 L 5,5 z"):J===3?(ee=3.3,Q.setAttributeNS(null,"d","M 0,0 L 3.33,0 L 3.33,10 L 0,10 z")):J===4?(te=3.31,Q.setAttributeNS(null,"d","M 10.00,3.31 C 6.47,3.84 2.87,4.50 0.00,6.63 C 0.67,5.52 1.33,4.42 2.00,3.31 C 1.33,2.21 0.67,1.10 0.00,0.00 C 2.87,2.13 6.47,2.79 10.00,3.31")):J===5?(te=3.28,Q.setAttributeNS(null,"d","M 10.00,3.28 C 6.61,4.19 3.19,5.07 0.00,6.55 C 0.62,5.56 1.00,4.44 1.00,3.28 C 1.00,2.11 0.62,0.99 0.00,0.00 C 3.19,1.49 6.61,2.37 10.00,3.28")):J===6?(te=2.84,Q.setAttributeNS(null,"d","M 10.00,2.84 C 6.61,3.59 3.21,4.35 0.00,5.68 C 0.33,4.73 0.67,3.78 1.00,2.84 C 0.67,1.89 0.33,0.95 0.00,0.00 C 3.21,1.33 6.61,2.09 10.00,2.84")):J===7?(te=5.2,Q.setAttributeNS(null,"d","M 10.00,5.20 C 5.96,5.20 2.01,6.92 0.00,10.39 M 0.00,0.00 C 2.01,3.47 5.96,5.20 10.00,5.20")):Q.setAttributeNS(null,"d","M 0,0 L 10,5 L 0,10 z"),G.elementClass===constants.A.OBJECT_CLASS_LINE&&(ee=J===2?5.1:J===3?.02:J===4||J===5||J===6?3.33:J===7?10:.05)),J===7&&(Z.setAttributeNS(null,"fill","none"),Z.setAttributeNS(null,"stroke-width",1)),Z.setAttributeNS(null,"refY",te),Z.setAttributeNS(null,"refX",ee),Z.appendChild(Q),Z},_setArrowColor:function(G,_,J,Z,Q){G&&(utils_type.A.isString(_)&&(Q!==7?this._setAttribute(function(){G.setAttributeNS(null,"fill","context-stroke")},Z.visPropOld.fillcolor):this._setAttribute(function(){G.setAttributeNS(null,"fill","none"),G.setAttributeNS(null,"stroke","context-stroke")},Z.visPropOld.fillcolor)),Z.rendNode.parentNode.insertBefore(Z.rendNode,Z.rendNode))},_setArrowWidth:function(G,_,J,Z){var Q,ee;G&&(ee=(Q=_)*Z,G.setAttributeNS(null,"viewBox","0 0 "+10*Q+" "+10*Q),G.setAttributeNS(null,"markerHeight",ee),G.setAttributeNS(null,"markerWidth",ee),G.setAttributeNS(null,"display","inherit"),J.parentNode.insertBefore(J,J))},updateTicks:function(G){var _,J,Z,Q,ee,te,ne,ie,re="",oe=G.ticks.length,se=!0;for(_=0;_<oe;_++){for(ee=(Z=G.ticks[_])[0],te=Z[1],ne=ee.length,ie=" M "+ee[0]+" "+te[0],utils_type.A.isNumber(ee[0])||(se=!1),J=1;se&&J<ne;++J)utils_type.A.isNumber(ee[J])?ie+=" L "+ee[J]+" "+te[J]:se=!1;se&&(re+=ie)}Q=G.rendNode,utils_type.A.exists(Q)||(Q=this.createPrim("path",G.id),this.appendChildPrim(Q,G.evalVisProp("layer")),G.rendNode=Q),Q.setAttributeNS(null,"stroke",G.evalVisProp("strokecolor")),Q.setAttributeNS(null,"fill","none"),Q.setAttributeNS(null,"stroke-opacity",G.evalVisProp("strokeopacity")),Q.setAttributeNS(null,"stroke-width",G.evalVisProp("strokewidth")),this.updatePathPrim(Q,re,G.board)},displayCopyright:function(G,_){var J,Z,Q=4+1.8*_,ee=6+_;(J=this.createPrim("text","licenseText")).setAttributeNS(null,"x",Q+"px"),J.setAttributeNS(null,"y",ee+"px"),J.setAttributeNS(null,"style","font-family:Arial,Helvetica,sans-serif; font-size:"+_+"px; opacity:0.2;"),J.setAttributeNS(null,"aria-hidden","true"),Z=this.container.ownerDocument.createTextNode(G),J.appendChild(Z),this.appendChildPrim(J,0)},displayLogo:function(G,_){var J,Z=1.5*_;(J=this.createPrim("image","licenseLogo")).setAttributeNS(null,"x","5px"),J.setAttributeNS(null,"y","5px"),J.setAttributeNS(null,"width",Z+"px"),J.setAttributeNS(null,"height",Z+"px"),J.setAttributeNS(null,"preserveAspectRatio","none"),J.setAttributeNS(null,"style","opacity:0.2;"),J.setAttributeNS(null,"aria-hidden","true"),J.setAttributeNS(this.xlinkNamespace,"xlink:href",G),this.appendChildPrim(J,0)},drawInternalText:function(G){var _=this.createPrim("text",G.id);return _.style.whiteSpace="nowrap",G.rendNodeText=this.container.ownerDocument.createTextNode(""),_.appendChild(G.rendNodeText),this.appendChildPrim(_,G.evalVisProp("layer")),_},updateInternalText:function(G){var _,J,Z=G.plaintext,Q=G.getAnchorX(),ee=G.getAnchorY();J=G.evalVisProp("cssclass"),G.rendNode.getAttributeNS(null,"class")!==J&&(G.rendNode.setAttributeNS(null,"class",J),G.needsSizeUpdate=!0),isNaN(G.coords.scrCoords[1]+G.coords.scrCoords[2])||(_=G.coords.scrCoords[1],G.visPropOld.left!==Q+_&&(G.rendNode.setAttributeNS(null,"x",_+"px"),Q==="left"?G.rendNode.setAttributeNS(null,"text-anchor","start"):Q==="right"?G.rendNode.setAttributeNS(null,"text-anchor","end"):Q==="middle"&&G.rendNode.setAttributeNS(null,"text-anchor","middle"),G.visPropOld.left=Q+_),_=G.coords.scrCoords[2],G.visPropOld.top!==ee+_&&(G.rendNode.setAttributeNS(null,"y",_+.5*this.vOffsetText+"px"),ee==="bottom"?(G.rendNode.setAttributeNS(null,"dy","0"),G.rendNode.setAttributeNS(null,"dominant-baseline","auto")):ee==="top"?(G.rendNode.setAttributeNS(null,"dy","1.6ex"),G.rendNode.setAttributeNS(null,"dominant-baseline","auto")):ee==="middle"&&(G.rendNode.setAttributeNS(null,"dy","0.6ex"),G.rendNode.setAttributeNS(null,"dominant-baseline","auto")),G.visPropOld.top=ee+_)),G.htmlStr!==Z&&(G.rendNodeText.data=Z,G.htmlStr=Z),this.transformRect(G,G.transformations)},updateInternalTextStyle:function(G,_,J,Z){this.setObjectFillColor(G,_,J)},drawImage:function(G){var _=this.createPrim("image",G.id);_.setAttributeNS(null,"preserveAspectRatio","none"),this.appendChildPrim(_,G.evalVisProp("layer")),G.rendNode=_,this.updateImage(G)},transformRect:function(G,_){var J,Z,Q,ee,te,ne="";if(_.length>0&&(Q=G.rendNode,(J=[(Z=this.joinTransforms(G,_))[1][1],Z[2][1],Z[1][2],Z[2][2],Z[1][0],Z[2][0]].join(",")).indexOf("NaN")===-1))if(ne+=" matrix("+J+") ",G.elementClass===constants.A.OBJECT_CLASS_TEXT&&G.visProp.display==="html"){switch(Q.style.transform=ne,ee=-G.coords.scrCoords[1],te=-G.coords.scrCoords[2],G.evalVisProp("anchorx")){case"right":ee+=G.size[0];break;case"middle":ee+=.5*G.size[0]}switch(G.evalVisProp("anchory")){case"bottom":te+=G.size[1];break;case"middle":te+=.5*G.size[1]}Q.style["transform-origin"]=ee+"px "+te+"px"}else Q.setAttributeNS(null,"transform",ne)},updateImageURL:function(G){var _=G.eval(G.url);return G._src!==_&&(G.imgIsLoaded=!1,G.rendNode.setAttributeNS(this.xlinkNamespace,"xlink:href",_),G._src=_,!0)},updateImageStyle:function(G,_){var J=G.evalVisProp(_?"highlightcssclass":"cssclass");G.rendNode.setAttributeNS(null,"class",J)},drawForeignObject:function(G){G.rendNode=this.appendChildPrim(this.createPrim("foreignObject",G.id),G.evalVisProp("layer")),this.appendNodesToElement(G,"foreignObject"),this.updateForeignObject(G)},updateForeignObject:function(G){G._useUserSize?G.rendNode.style.overflow="hidden":G.rendNode.style.overflow="visible",this.updateRectPrim(G.rendNode,G.coords.scrCoords[1],G.coords.scrCoords[2]-G.size[1],G.size[0],G.size[1]),G.evalVisProp("evaluateOnlyOnce")===!0&&G.renderedOnce||(G.rendNode.innerHTML=G.content,G.renderedOnce=!0),this._updateVisual(G,{stroke:!0,dash:!0},!0)},appendChildPrim:function(G,_){return utils_type.A.exists(_)?_>=src_options.A.layer.numlayers&&(_=src_options.A.layer.numlayers-1):_=0,this.layer[_].appendChild(G),G},createPrim:function(G,_){var J=this.container.ownerDocument.createElementNS(this.svgNamespace,G);return J.setAttributeNS(null,"id",this.uniqName(_)),J.style.position="absolute",G==="path"&&(J.setAttributeNS(null,"stroke-linecap","round"),J.setAttributeNS(null,"stroke-linejoin","round"),J.setAttributeNS(null,"fill-rule","evenodd")),J},remove:function(G){utils_type.A.exists(G)&&utils_type.A.exists(G.parentNode)&&G.parentNode.removeChild(G)},setLayer:function(G,_){utils_type.A.exists(_)?_>=src_options.A.layer.numlayers&&(_=src_options.A.layer.numlayers-1):_=0,this.layer[_].appendChild(G.rendNode)},makeArrows:function(G,_){var J,Z,Q=_.evFirst,ee=_.evLast;this.isIE&&G.visPropCalc.visible&&(Q||ee)?G.rendNode.parentNode.insertBefore(G.rendNode,G.rendNode):(J=G.rendNodeTriangleStart,Q?(Z=this.toStr(this.container.id,"_",G.id,"TriangleStart",_.typeFirst),utils_type.A.exists(J)&&J.id===Z||((J=this.container.ownerDocument.getElementById(Z))===null&&(J=this._createArrowHead(G,"Start",_.typeFirst),this.defs.appendChild(J)),G.rendNodeTriangleStart=J,G.rendNode.setAttributeNS(null,"marker-start",this.toURL(Z)))):(utils_type.A.exists(J)&&(this.remove(J),G.rendNodeTriangleStart=null),G.rendNode.removeAttributeNS(null,"marker-start")),J=G.rendNodeTriangleEnd,ee?(Z=this.toStr(this.container.id,"_",G.id,"TriangleEnd",_.typeLast),utils_type.A.exists(J)&&J.id===Z||((J=this.container.ownerDocument.getElementById(Z))===null&&(J=this._createArrowHead(G,"End",_.typeLast),this.defs.appendChild(J)),G.rendNodeTriangleEnd=J,G.rendNode.setAttributeNS(null,"marker-end",this.toURL(Z)))):(utils_type.A.exists(J)&&(this.remove(J),G.rendNodeTriangleEnd=null),G.rendNode.removeAttributeNS(null,"marker-end")))},updateEllipsePrim:function(G,_,J,Z,Q){var ee;ee=2e5,_=Math.abs(_)<ee?_:ee*_/Math.abs(_),J=Math.abs(J)<ee?J:ee*J/Math.abs(J),Z=Math.abs(Z)<ee?Z:ee*Z/Math.abs(Z),Q=Math.abs(Q)<ee?Q:ee*Q/Math.abs(Q),G.setAttributeNS(null,"cx",_),G.setAttributeNS(null,"cy",J),G.setAttributeNS(null,"rx",Math.abs(Z)),G.setAttributeNS(null,"ry",Math.abs(Q))},updateLinePrim:function(G,_,J,Z,Q){var ee;ee=2e5,isNaN(_+J+Z+Q)||(_=Math.abs(_)<ee?_:ee*_/Math.abs(_),J=Math.abs(J)<ee?J:ee*J/Math.abs(J),Z=Math.abs(Z)<ee?Z:ee*Z/Math.abs(Z),Q=Math.abs(Q)<ee?Q:ee*Q/Math.abs(Q),G.setAttributeNS(null,"x1",_),G.setAttributeNS(null,"y1",J),G.setAttributeNS(null,"x2",Z),G.setAttributeNS(null,"y2",Q))},updatePathPrim:function(G,_){_===""&&(_="M 0 0"),G.setAttributeNS(null,"d",_)},updatePathStringPoint:function(G,_,J){var Z="",Q=G.coords.scrCoords,ee=_*Math.sqrt(3)*.5,te=.5*_;return J==="x"?Z=" M "+(Q[1]-_)+" "+(Q[2]-_)+" L "+(Q[1]+_)+" "+(Q[2]+_)+" M "+(Q[1]+_)+" "+(Q[2]-_)+" L "+(Q[1]-_)+" "+(Q[2]+_):J==="+"?Z=" M "+(Q[1]-_)+" "+Q[2]+" L "+(Q[1]+_)+" "+Q[2]+" M "+Q[1]+" "+(Q[2]-_)+" L "+Q[1]+" "+(Q[2]+_):J==="|"?Z=" M "+Q[1]+" "+(Q[2]-_)+" L "+Q[1]+" "+(Q[2]+_):J==="-"?Z=" M "+(Q[1]-_)+" "+Q[2]+" L "+(Q[1]+_)+" "+Q[2]:J==="<>"||J==="<<>>"?(J==="<<>>"&&(_*=1.41),Z=" M "+(Q[1]-_)+" "+Q[2]+" L "+Q[1]+" "+(Q[2]+_)+" L "+(Q[1]+_)+" "+Q[2]+" L "+Q[1]+" "+(Q[2]-_)+" Z "):J==="^"?Z=" M "+Q[1]+" "+(Q[2]-_)+" L "+(Q[1]-ee)+" "+(Q[2]+te)+" L "+(Q[1]+ee)+" "+(Q[2]+te)+" Z ":J==="v"?Z=" M "+Q[1]+" "+(Q[2]+_)+" L "+(Q[1]-ee)+" "+(Q[2]-te)+" L "+(Q[1]+ee)+" "+(Q[2]-te)+" Z ":J===">"?Z=" M "+(Q[1]+_)+" "+Q[2]+" L "+(Q[1]-te)+" "+(Q[2]-ee)+" L "+(Q[1]-te)+" "+(Q[2]+ee)+" Z ":J==="<"&&(Z=" M "+(Q[1]-_)+" "+Q[2]+" L "+(Q[1]+te)+" "+(Q[2]-ee)+" L "+(Q[1]+te)+" "+(Q[2]+ee)+" Z "),Z},updatePathStringPrim:function(G){var _,J,Z,Q=" M ",ee=Q,te=5e3,ne="";if(G.numberPoints<=0)return"";if(Z=Math.min(G.points.length,G.numberPoints),G.bezierDegree===1)for(_=0;_<Z;_++)J=G.points[_].scrCoords,isNaN(J[1])||isNaN(J[2])?ee=Q:(J[1]=Math.max(Math.min(J[1],te),-5e3),J[2]=Math.max(Math.min(J[2],te),-5e3),ne+=ee+J[1]+" "+J[2],ee=" L ");else if(G.bezierDegree===3)for(_=0;_<Z;)J=G.points[_].scrCoords,isNaN(J[1])||isNaN(J[2])?ee=Q:(ne+=ee+J[1]+" "+J[2],ee===" C "&&(_+=1,ne+=" "+(J=G.points[_].scrCoords)[1]+" "+J[2],_+=1,ne+=" "+(J=G.points[_].scrCoords)[1]+" "+J[2]),ee=" C "),_+=1;return ne},updatePathStringBezierPrim:function(G){var _,J,Z,Q,ee,te,ne,ie=" M ",re=ie,oe=5e3,se="",ae=G.evalVisProp("strokewidth"),le=G.evalVisProp("curvetype")!=="plot";if(G.numberPoints<=0)return"";for(le&&G.board.options.curve.RDPsmoothing&&(G.points=numerics.A.RamerDouglasPeucker(G.points,.5)),ne=Math.min(G.points.length,G.numberPoints),J=1;J<3;J++)for(re=ie,_=0;_<ne;_++)Q=G.points[_].scrCoords,isNaN(Q[1])||isNaN(Q[2])?re=ie:(Q[1]=Math.max(Math.min(Q[1],oe),-5e3),Q[2]=Math.max(Math.min(Q[2],oe),-5e3),re===ie?se+=re+Q[1]+" "+Q[2]:(Z=2*J,se+=[re,ee+.333*(Q[1]-ee)+ae*(Z*Math.random()-J)," ",te+.333*(Q[2]-te)+ae*(Z*Math.random()-J)," ",ee+.666*(Q[1]-ee)+ae*(Z*Math.random()-J)," ",te+.666*(Q[2]-te)+ae*(Z*Math.random()-J)," ",Q[1]," ",Q[2]].join("")),re=" C ",ee=Q[1],te=Q[2]);return se},updatePolygonPrim:function(G,_){var J,Z,Q="",ee=_.vertices.length;for(G.setAttributeNS(null,"stroke","none"),G.setAttributeNS(null,"fill-rule","evenodd"),_.elType==="polygonalchain"&&ee++,J=0;J<ee-1;J++){if(!_.vertices[J].isReal)return void G.setAttributeNS(null,"points","");Q=Q+(Z=_.vertices[J].coords.scrCoords)[1]+","+Z[2],J<ee-2&&(Q+=" ")}Q.indexOf("NaN")===-1&&G.setAttributeNS(null,"points",Q)},updateRectPrim:function(G,_,J,Z,Q){G.setAttributeNS(null,"x",_),G.setAttributeNS(null,"y",J),G.setAttributeNS(null,"width",Z),G.setAttributeNS(null,"height",Q)},_setAttribute:function(G,_){_===""?G():window.setTimeout(G,1)},display:function(G,_){var J;G&&G.rendNode&&(G.visPropOld.visible=_,J=G.rendNode,_?(J.setAttributeNS(null,"display","inline"),J.style.visibility="inherit"):(J.setAttributeNS(null,"display","none"),J.style.visibility="hidden"))},hide:function(G){jxg.A.deprecated("Board.renderer.hide()","Board.renderer.display()"),this.display(G,!1)},setARIA:function(G){var _,J,Z;for(_ in G.visProp.aria)G.visProp.aria.hasOwnProperty(_)&&_!=="enabled"&&(J="aria."+_,Z=G.evalVisProp("aria."+_),G.visPropOld[J]!==Z&&(this.setPropertyPrim(G.rendNode,"aria-"+_,Z),G.visPropOld[J]=Z))},setBuffering:function(G,_){G.rendNode.setAttribute("buffered-rendering",_)},setCssClass(G,_){G.visPropOld.cssclass!==_&&(this.setPropertyPrim(G.rendNode,"class",_),G.visPropOld.cssclass=_)},setDashStyle:function(G){var _=G.evalVisProp("dash"),J=G.evalVisProp("dashscale")?.5*G.evalVisProp("strokewidth"):1,Z=G.rendNode;_>0?Z.setAttributeNS(null,"stroke-dasharray",this.dashArray[_-1].map(function(Q){return Q*J}).join(",")):Z.hasAttributeNS(null,"stroke-dasharray")&&Z.removeAttributeNS(null,"stroke-dasharray")},setGradient:function(G){var _,J,Z,Q=G.rendNode,ee=G.evalVisProp("gradient");ee==="linear"||ee==="radial"?(_=this.createPrim(ee+"Gradient",G.id+"_gradient"),J=this.createPrim("stop",G.id+"_gradient1"),Z=this.createPrim("stop",G.id+"_gradient2"),_.appendChild(J),_.appendChild(Z),this.defs.appendChild(_),Q.setAttributeNS(null,"style","fill:"+this.toURL(this.container.id+"_"+G.id+"_gradient")),G.gradNode1=J,G.gradNode2=Z,G.gradNode=_):Q.removeAttributeNS(null,"style")},setLineCap:function(G){var _=G.evalVisProp("linecap");_!==void 0&&_!==""&&G.visPropOld.linecap!==_&&utils_type.A.exists(G.rendNode)&&(this.setPropertyPrim(G.rendNode,"stroke-linecap",_),G.visPropOld.linecap=_)},setObjectFillColor:function(G,_,J,Z){var Q,ee,te,ne,ie=_,re=J,oe=G.evalVisProp("gradient");re=re>0?re:0,G.visPropOld.fillcolor===ie&&G.visPropOld.fillopacity===re&&oe===null||(utils_type.A.exists(ie)&&ie!==!1&&(ie.length!==9?(ee=ie,ne=re):(te=utils_color.A.rgba2rgbo(ie),ee=te[0],ne=re*te[1]),Q=Z===void 0?G.rendNode:Z,ee!=="none"&&ee!==""&&ee!==!1&&this._setAttribute(function(){Q.setAttributeNS(null,"fill",ee)},G.visPropOld.fillcolor),G.type===jxg.A.OBJECT_TYPE_IMAGE?this._setAttribute(function(){Q.setAttributeNS(null,"opacity",ne)},G.visPropOld.fillopacity):(ee==="none"?(ne=0,Q.setAttributeNS(null,"pointer-events","visibleStroke")):Q.setAttributeNS(null,"pointer-events","visiblePainted"),this._setAttribute(function(){Q.setAttributeNS(null,"fill-opacity",ne)},G.visPropOld.fillopacity)),oe!=="linear"&&oe!=="radial"||this.updateGradient(G)),G.visPropOld.fillcolor=ie,G.visPropOld.fillopacity=re)},setObjectStrokeColor:function(G,_,J){var Z,Q,ee,te,ne=_,ie=J;ie=ie>0?ie:0,G.visPropOld.strokecolor===ne&&G.visPropOld.strokeopacity===ie||(utils_type.A.exists(ne)&&ne!==!1&&(ne.length!==9?(Z=ne,ee=ie):(Q=utils_color.A.rgba2rgbo(ne),Z=Q[0],ee=ie*Q[1]),te=G.rendNode,G.elementClass===constants.A.OBJECT_CLASS_TEXT?G.evalVisProp("display")==="html"?this._setAttribute(function(){te.style.color=Z,te.style.opacity=ee},G.visPropOld.strokecolor):this._setAttribute(function(){te.setAttributeNS(null,"fill",Z),te.setAttributeNS(null,"fill-opacity",ee)},G.visPropOld.strokecolor):this._setAttribute(function(){te.setAttributeNS(null,"stroke",Z),te.setAttributeNS(null,"stroke-opacity",ee)},G.visPropOld.strokecolor),G.elementClass!==constants.A.OBJECT_CLASS_CURVE&&G.elementClass!==constants.A.OBJECT_CLASS_LINE||(G.evalVisProp("firstarrow")&&this._setArrowColor(G.rendNodeTriangleStart,Z,ee,G,G.visPropCalc.typeFirst),G.evalVisProp("lastarrow")&&this._setArrowColor(G.rendNodeTriangleEnd,Z,ee,G,G.visPropCalc.typeLast))),G.visPropOld.strokecolor=ne,G.visPropOld.strokeopacity=ie)},setObjectStrokeWidth:function(G,_){var J,Z=_;isNaN(Z)||G.visPropOld.strokewidth===Z||(J=G.rendNode,this.setPropertyPrim(J,"stroked","true"),utils_type.A.exists(Z)&&this.setPropertyPrim(J,"stroke-width",Z+"px"),G.visPropOld.strokewidth=Z)},setObjectTransition:function(G,_){var J,Z,Q,ee=[],te=0,ne=["rendNode","rendNodeTriangleStart","rendNodeTriangleEnd"];if(_===void 0&&(_=G.evalVisProp("transitionduration")),J=G.evalVisProp("transitionproperties"),_!==G.visPropOld.transitionduration||J!==G.visPropOld.transitionproperties){for(utils_type.A.exists(J)&&(te=J.length),Q=0;Q<te;Q++)ee.push(J[Q]+" "+_+"ms");for(Z=ee.join(", "),te=ne.length,Q=0;Q<te;++Q)G[ne[Q]]&&(G[ne[Q]].style.transition=Z);G.visPropOld.transitionduration=_,G.visPropOld.transitionproperties=J}},setShadow:function(G){var _,J,Z,Q,ee,te,ne,ie,re=G.evalVisProp("shadow"),oe=!0,se=!1;(_=JSON.stringify(re))!==G.visPropOld.shadow&&(typeof re=="boolean"?(oe=!0,se=re,J="none",Z=3,Q=.1,ee=[5,5],te=1):G.evalVisProp("shadow.enabled")?(oe=!1,se=!0,J=jxg.A.rgbParser(G.evalVisProp("shadow.color")),Z=G.evalVisProp("shadow.blur"),Q=G.evalVisProp("shadow.blend"),ee=G.evalVisProp("shadow.offset"),te=G.evalVisProp("shadow.opacity")):se=!1,utils_type.A.exists(G.rendNode)&&(se?oe?G.rendNode.setAttributeNS(null,"filter",this.toURL(this.container.id+"_f1")):((ie=this.container.ownerDocument.getElementById(ne))&&this.defs.removeChild(ie),ne=G.rendNode.id+"_f1",this.defs.appendChild(this.createShadowFilter(ne,J,te,Q,Z,ee)),G.rendNode.setAttributeNS(null,"filter",this.toURL(ne))):G.rendNode.removeAttributeNS(null,"filter")),G.visPropOld.shadow=_)},setTabindex:function(G){var _;G.board.attr.keyboard.enabled&&utils_type.A.exists(G.rendNode)&&(_=G.evalVisProp("tabindex"),G.visPropCalc.visible||(_=null),_!==G.visPropOld.tabindex&&(G.rendNode.setAttribute("tabindex",_),G.visPropOld.tabindex=_))},setPropertyPrim:function(G,_,J){_!=="stroked"&&G.setAttributeNS(null,_,J)},show:function(G){jxg.A.deprecated("Board.renderer.show()","Board.renderer.display()"),this.display(G,!0)},updateGradient:function(G){var _,J,Z=G.gradNode1,Q=G.gradNode2,ee=G.evalVisProp("gradient");utils_type.A.exists(Z)&&utils_type.A.exists(Q)&&(J=(J=G.evalVisProp("fillopacity"))>0?J:0,_=G.evalVisProp("fillcolor"),Z.setAttributeNS(null,"style","stop-color:"+_+";stop-opacity:"+J),Q.setAttributeNS(null,"style","stop-color:"+G.evalVisProp("gradientsecondcolor")+";stop-opacity:"+G.evalVisProp("gradientsecondopacity")),Z.setAttributeNS(null,"offset",100*G.evalVisProp("gradientstartoffset")+"%"),Q.setAttributeNS(null,"offset",100*G.evalVisProp("gradientendoffset")+"%"),ee==="linear"?this.updateGradientAngle(G.gradNode,G.evalVisProp("gradientangle")):ee==="radial"&&this.updateGradientCircle(G.gradNode,G.evalVisProp("gradientcx"),G.evalVisProp("gradientcy"),G.evalVisProp("gradientr"),G.evalVisProp("gradientfx"),G.evalVisProp("gradientfy"),G.evalVisProp("gradientfr")))},updateGradientAngle:function(G,_){var J=1,Z=Math.cos(_),Q=Math.sin(_);Math.abs(Z)>Math.abs(Q)?J/=Math.abs(Z):J/=Math.abs(Q),Z>=0?(G.setAttributeNS(null,"x1",0),G.setAttributeNS(null,"x2",Z*J)):(G.setAttributeNS(null,"x1",-Z*J),G.setAttributeNS(null,"x2",0)),Q>=0?(G.setAttributeNS(null,"y1",0),G.setAttributeNS(null,"y2",Q*J)):(G.setAttributeNS(null,"y1",-Q*J),G.setAttributeNS(null,"y2",0))},updateGradientCircle:function(G,_,J,Z,Q,ee,te){G.setAttributeNS(null,"cx",100*_+"%"),G.setAttributeNS(null,"cy",100*J+"%"),G.setAttributeNS(null,"r",100*Z+"%"),G.setAttributeNS(null,"fx",100*Q+"%"),G.setAttributeNS(null,"fy",100*ee+"%"),G.setAttributeNS(null,"fr",100*te+"%")},suspendRedraw:function(){this.suspendHandle=this.svgRoot.suspendRedraw(1e4)},unsuspendRedraw:function(){this.svgRoot.unsuspendRedraw(this.suspendHandle)},resize:function(G,_){this.svgRoot.setAttribute("width",parseFloat(G)),this.svgRoot.setAttribute("height",parseFloat(_))},createTouchpoints:function(G){var _,J,Z,Q;for(this.touchpoints=[],_=0;_<G;_++)J="touchpoint1_"+_,Q=this.createPrim("path",J),this.appendChildPrim(Q,19),Q.setAttributeNS(null,"d","M 0 0"),this.touchpoints.push(Q),this.setPropertyPrim(Q,"stroked","true"),this.setPropertyPrim(Q,"stroke-width","1px"),Q.setAttributeNS(null,"stroke","#000000"),Q.setAttributeNS(null,"stroke-opacity",1),Q.setAttributeNS(null,"display","none"),Z="touchpoint2_"+_,Q=this.createPrim("ellipse",Z),this.appendChildPrim(Q,19),this.updateEllipsePrim(Q,0,0,0,0),this.touchpoints.push(Q),this.setPropertyPrim(Q,"stroked","true"),this.setPropertyPrim(Q,"stroke-width","1px"),Q.setAttributeNS(null,"stroke","#000000"),Q.setAttributeNS(null,"fill","#ffffff"),Q.setAttributeNS(null,"stroke-opacity",1),Q.setAttributeNS(null,"fill-opacity",0),Q.setAttributeNS(null,"display","none")},showTouchpoint:function(G){this.touchpoints&&G>=0&&2*G<this.touchpoints.length&&(this.touchpoints[2*G].setAttributeNS(null,"display","inline"),this.touchpoints[2*G+1].setAttributeNS(null,"display","inline"))},hideTouchpoint:function(G){this.touchpoints&&G>=0&&2*G<this.touchpoints.length&&(this.touchpoints[2*G].setAttributeNS(null,"display","none"),this.touchpoints[2*G+1].setAttributeNS(null,"display","none"))},updateTouchpoint:function(G,_){var J,Z;this.touchpoints&&G>=0&&2*G<this.touchpoints.length&&(J=_[0],Z=_[1],this.touchpoints[2*G].setAttributeNS(null,"d","M "+(J-37)+" "+Z+" L "+(J+37)+" "+Z+" M "+J+" "+(Z-37)+" L "+J+" "+(Z+37)),this.updateEllipsePrim(this.touchpoints[2*G+1],_[0],_[1],25,25))},_getValuesOfDOMElements:function(G){var _=[];if(G.nodeType===1)for(G=G.firstChild;G;)G.id!==void 0&&G.value!==void 0&&_.push([G.id,G.value]),utils_type.A.concat(_,this._getValuesOfDOMElements(G)),G=G.nextSibling;return _},_getImgDataURL:function(G){var _,J,Z,Q,ee,te;if((J=(_=G.getElementsByTagName("image")).length)>0)for(Z=document.createElement("canvas"),te=0;te<J;te++){_[te].setAttribute("crossorigin","anonymous"),Q=Z.getContext("2d"),Z.width=_[te].getAttribute("width"),Z.height=_[te].getAttribute("height");try{Q.drawImage(_[te],0,0,Z.width,Z.height),ee=Z.toDataURL(),_[te].setAttribute("xlink:href",ee)}catch(ne){console.log("CORS problem! Image can not be used",ne)}}return!0},dumpToDataURI:function(G){var _,J,Z,Q=this.svgRoot,ee=window.btoa||base64.encode,te=[];if(this.container.hasChildNodes()&&utils_type.A.exists(this.foreignObjLayer))for(G||this.foreignObjLayer.setAttribute("display","inline");Q.nextSibling;)utils_type.A.concat(te,this._getValuesOfDOMElements(Q.nextSibling)),this.foreignObjLayer.appendChild(Q.nextSibling);if(this._getImgDataURL(Q),Q.setAttribute("xmlns","http://www.w3.org/2000/svg"),_=new XMLSerializer().serializeToString(Q),G!==!0)for(Z=te.length,J=0;J<Z;J++)_=_.replace('id="'+te[J][0]+'"','id="'+te[J][0]+'" value="'+te[J][1]+'"');if(this.isIE&&(_.match(/xmlns="http:\/\/www.w3.org\/2000\/svg"\s+xmlns="http:\/\/www.w3.org\/2000\/svg"/g)||[]).length>1&&(_=_.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"\s+xmlns="http:\/\/www.w3.org\/2000\/svg"/g,"")),_=_.replace(/&nbsp;/g," "),utils_type.A.exists(this.foreignObjLayer)&&this.foreignObjLayer.hasChildNodes()){for(;this.foreignObjLayer.firstChild;)this.container.appendChild(this.foreignObjLayer.firstChild);this.foreignObjLayer.setAttribute("display","none")}return"data:image/svg+xml;base64,"+ee(unescape(encodeURIComponent(_)))},dumpToCanvas:function(G,_,J,Z){var Q,ee,te,ne;return(te=this.container.ownerDocument.getElementById(G)).width=te.width,ne=te.getContext("2d"),_!==void 0&&J!==void 0&&(te.style.width=parseFloat(_)+"px",te.style.height=parseFloat(J)+"px",te.setAttribute("width",parseFloat(_)),te.setAttribute("height",parseFloat(J))),ee=new Image,Q=this.dumpToDataURI(Z),ee.src=Q,"Promise"in window?new Promise(function(ie,re){try{ee.onload=function(){ne.drawImage(ee,0,0,_,J),ie()}}catch(oe){re(oe)}}):(ee.onload=function(){window.setTimeout(function(){try{ne.drawImage(ee,0,0,_,J)}catch{console.log("screenshots not longer supported on IE")}},200)},this)},screenshot:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue,de=this.container.ownerDocument,pe=this.container.parentNode,fe=G.attr.screenshot,_e=!1;return this.type==="no"||(re=fe.scale*this.container.getBoundingClientRect().width,oe=fe.scale*this.container.getBoundingClientRect().height,_===void 0||_===""?(_e=!0,(te=new Image).style.width=re+"px",te.style.height=oe+"px"):(_e=!1,te=de.getElementById(_)),_e&&((Z=de.createElement("div")).style.cssText=fe.css,Z.style.width=re+"px",Z.style.height=oe+"px",Z.style.zIndex=this.container.style.zIndex+120,Z.style.position="absolute",Z.style.top=this.container.offsetTop+"px",Z.style.left=this.container.offsetLeft+"px"),Q=de.createElement("canvas"),ee=Math.random().toString(36).slice(2,7),Q.setAttribute("id",ee),Q.setAttribute("width",re),Q.setAttribute("height",oe),Q.style.width=re+"px",Q.style.height=re+"px",Q.style.display="none",pe.appendChild(Q),_e&&(ne=de.createElement("span"),ie=de.createTextNode(""),ne.style.cssText=fe.cssButton,ne.appendChild(ie),ne.onclick=function(){Z.parentNode.removeChild(Z)},Z.appendChild(te),Z.appendChild(ne),pe.insertBefore(Z,this.container.nextSibling)),se=de.getElementById(this.uniqName("navigationbar")),utils_type.A.exists(se)&&(ae=se.style.display,se.style.display="none",le=this.removeToInsertLater(se)),ue=function(){te.src=Q.toDataURL("image/png"),pe.removeChild(Q)},"Promise"in window?this.dumpToCanvas(ee,re,oe,J).then(ue):(this.dumpToCanvas(ee,re,oe,J),window.setTimeout(ue,200)),utils_type.A.exists(se)&&(se.style.display=ae,le())),this}});var svg=jxg.A.SVGRenderer;jxg.A.VMLRenderer=function(G){this.type="vml",this.container=G,this.container.style.overflow="hidden",this.container.style.position===""&&(this.container.style.position="relative"),this.container.onselectstart=function(){return!1},this.resolution=10,utils_type.A.exists(jxg.A.vmlStylesheet)||(G.ownerDocument.namespaces.add("jxgvml","urn:schemas-microsoft-com:vml"),jxg.A.vmlStylesheet=this.container.ownerDocument.createStyleSheet(),jxg.A.vmlStylesheet.addRule(".jxgvml","behavior:url(#default#VML)"));try{G.ownerDocument.namespaces.jxgvml||G.ownerDocument.namespaces.add("jxgvml","urn:schemas-microsoft-com:vml"),this.createNode=function(_){return G.ownerDocument.createElement("<jxgvml:"+_+' class="jxgvml">')}}catch{this.createNode=function(J){return G.ownerDocument.createElement("<"+J+' xmlns="urn:schemas-microsoft.com:vml" class="jxgvml">')}}this.dashArray=["Solid","1 1","ShortDash","Dash","LongDash","ShortDashDot","LongDashDot"]},jxg.A.VMLRenderer.prototype=new renderer_abstract,jxg.A.extend(jxg.A.VMLRenderer.prototype,{_setAttr:function(G,_,J,Z){try{this.container.ownerDocument.documentMode===8?G[_]=J:G.setAttribute(_,J,Z)}catch{jxg.A.debug("_setAttr: "+_+" "+J+`<br>
`)}},updateTicks:function(G){var _,J,Z,Q,ee,te=this.resolution,ne=[];for(J=G.ticks.length,_=0;_<J;_++)Q=(Z=G.ticks[_])[0],ee=Z[1],utils_type.A.isNumber(Q[0])&&utils_type.A.isNumber(Q[1])&&ne.push(" m "+Math.round(te*Q[0])+", "+Math.round(te*ee[0])+" l "+Math.round(te*Q[1])+", "+Math.round(te*ee[1])+" ");utils_type.A.exists(G.rendNode)||(G.rendNode=this.createPrim("path",G.id),this.appendChildPrim(G.rendNode,G.evalVisProp("layer"))),this._setAttr(G.rendNode,"stroked","true"),this._setAttr(G.rendNode,"strokecolor",G.evalVisProp("strokecolor"),1),this._setAttr(G.rendNode,"strokeweight",G.evalVisProp("strokewidth")),this._setAttr(G.rendNodeStroke,"opacity",100*G.evalVisProp("strokeopacity")+"%"),this.updatePathPrim(G.rendNode,ne,G.board)},displayCopyright:function(G,_){var J,Z;(J=this.createNode("textbox")).style.position="absolute",this._setAttr(J,"id",this.container.id+"_licenseText"),J.style.left=20,J.style.top=2,J.style.fontSize=_,J.style.color="#356AA0",J.style.fontFamily="Arial,Helvetica,sans-serif",this._setAttr(J,"opacity","30%"),J.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand', enabled = false) progid:DXImageTransform.Microsoft.Alpha(opacity = 30, enabled = true)",Z=this.container.ownerDocument.createTextNode(G),J.appendChild(Z),this.appendChildPrim(J,0)},drawInternalText:function(G){var _;return(_=this.createNode("textbox")).style.position="absolute",G.rendNodeText=this.container.ownerDocument.createTextNode(""),_.appendChild(G.rendNodeText),this.appendChildPrim(_,9),_.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand', enabled = false) progid:DXImageTransform.Microsoft.Alpha(opacity = 100, enabled = false)",_},updateInternalText:function(G){var _,J,Z,Q,ee,te,ne=G.plaintext,ie=this.joinTransforms(G,G.transformations),re=[0,0],oe=G.rendNode,se=[],ae=G.getAnchorX(),le=G.getAnchorY();if(!isNaN(G.coords.scrCoords[1]+G.coords.scrCoords[2])){for(ae==="right"?re[0]=1:ae==="middle"&&(re[0]=.5),le==="bottom"?re[1]=1:le==="middle"&&(re[1]=.5),se[0]=math.A.matVecMult(ie,[1,G.coords.scrCoords[1]-re[0]*G.size[0],G.coords.scrCoords[2]+(1-re[1])*G.size[1]+this.vOffsetText]),se[0][1]/=se[0][0],se[0][2]/=se[0][0],se[1]=math.A.matVecMult(ie,[1,G.coords.scrCoords[1]+(1-re[0])*G.size[0],G.coords.scrCoords[2]+(1-re[1])*G.size[1]+this.vOffsetText]),se[1][1]/=se[1][0],se[1][2]/=se[1][0],se[2]=math.A.matVecMult(ie,[1,G.coords.scrCoords[1]+(1-re[0])*G.size[0],G.coords.scrCoords[2]-re[1]*G.size[1]+this.vOffsetText]),se[2][1]/=se[2][0],se[2][2]/=se[2][0],se[3]=math.A.matVecMult(ie,[1,G.coords.scrCoords[1]-re[0]*G.size[0],G.coords.scrCoords[2]-re[1]*G.size[1]+this.vOffsetText]),se[3][1]/=se[3][0],se[3][2]/=se[3][0],J=se[0][1],Q=se[0][1],Z=se[0][2],ee=se[0][2],te=1;te<4;te++)J=Math.max(J,se[te][1]),Q=Math.min(Q,se[te][1]),Z=Math.max(Z,se[te][2]),ee=Math.min(ee,se[te][2]);_=re[0]===1?Math.floor(G.board.canvasWidth-J):Math.floor(Q),G.visPropOld.left!==ae+_&&(re[0]===1?(G.rendNode.style.right=_+"px",G.rendNode.style.left="auto"):(G.rendNode.style.left=_+"px",G.rendNode.style.right="auto"),G.visPropOld.left=ae+_),_=re[1]===1?Math.floor(G.board.canvasHeight-Z):Math.floor(ee),G.visPropOld.top!==le+_&&(re[1]===1?(G.rendNode.style.bottom=_+"px",G.rendNode.style.top="auto"):(G.rendNode.style.top=_+"px",G.rendNode.style.bottom="auto"),G.visPropOld.top=le+_)}G.htmlStr!==ne&&(G.rendNodeText.data=ne,G.htmlStr=ne),oe.filters.item(0).M11=ie[1][1],oe.filters.item(0).M12=ie[1][2],oe.filters.item(0).M21=ie[2][1],oe.filters.item(0).M22=ie[2][2],oe.filters.item(0).enabled=!0},drawImage:function(G){var _;(_=this.container.ownerDocument.createElement("img")).style.position="absolute",this._setAttr(_,"id",this.container.id+"_"+G.id),this.container.appendChild(_),this.appendChildPrim(_,G.evalVisProp("layer")),_.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand') progid:DXImageTransform.Microsoft.Alpha(opacity = 100, enabled = false)",G.rendNode=_,this.updateImage(G)},transformRect:function(G,_){var J,Z,Q,ee,te,ne,ie=G.rendNode,re=[];if(_.length>0){for(J=this.joinTransforms(G,_),re[0]=math.A.matVecMult(J,G.coords.scrCoords),re[0][1]/=re[0][0],re[0][2]/=re[0][0],re[1]=math.A.matVecMult(J,[1,G.coords.scrCoords[1]+G.size[0],G.coords.scrCoords[2]]),re[1][1]/=re[1][0],re[1][2]/=re[1][0],re[2]=math.A.matVecMult(J,[1,G.coords.scrCoords[1]+G.size[0],G.coords.scrCoords[2]-G.size[1]]),re[2][1]/=re[2][0],re[2][2]/=re[2][0],re[3]=math.A.matVecMult(J,[1,G.coords.scrCoords[1],G.coords.scrCoords[2]-G.size[1]]),re[3][1]/=re[3][0],re[3][2]/=re[3][0],Z=re[0][1],ee=re[0][1],Q=re[0][2],te=re[0][2],ne=1;ne<4;ne++)Z=Math.max(Z,re[ne][1]),ee=Math.min(ee,re[ne][1]),Q=Math.max(Q,re[ne][2]),te=Math.min(te,re[ne][2]);ie.style.left=Math.floor(ee)+"px",ie.style.top=Math.floor(te)+"px",ie.filters.item(0).M11=J[1][1],ie.filters.item(0).M12=J[1][2],ie.filters.item(0).M21=J[2][1],ie.filters.item(0).M22=J[2][2],ie.filters.item(0).enabled=!0}},updateImageURL:function(G){var _=G.eval(G.url);this._setAttr(G.rendNode,"src",_)},appendChildPrim:function(G,_){return utils_type.A.exists(_)||(_=0),G.style.zIndex=_,this.container.appendChild(G),G},appendNodesToElement:function(G,_){_!=="shape"&&_!=="path"&&_!=="polygon"||(G.rendNodePath=this.getElementById(G.id+"_path")),G.rendNodeFill=this.getElementById(G.id+"_fill"),G.rendNodeStroke=this.getElementById(G.id+"_stroke"),G.rendNodeShadow=this.getElementById(G.id+"_shadow"),G.rendNode=this.getElementById(G.id)},createPrim:function(G,_){var J,Z,Q=this.createNode("fill"),ee=this.createNode("stroke"),te=this.createNode("shadow");return this._setAttr(Q,"id",this.container.id+"_"+_+"_fill"),this._setAttr(ee,"id",this.container.id+"_"+_+"_stroke"),this._setAttr(te,"id",this.container.id+"_"+_+"_shadow"),G==="circle"||G==="ellipse"?((J=this.createNode("oval")).appendChild(Q),J.appendChild(ee),J.appendChild(te)):G==="polygon"||G==="path"||G==="shape"||G==="line"?((J=this.createNode("shape")).appendChild(Q),J.appendChild(ee),J.appendChild(te),Z=this.createNode("path"),this._setAttr(Z,"id",this.container.id+"_"+_+"_path"),J.appendChild(Z)):((J=this.createNode(G)).appendChild(Q),J.appendChild(ee),J.appendChild(te)),J.style.position="absolute",J.style.left="0px",J.style.top="0px",this._setAttr(J,"id",this.container.id+"_"+_),J},remove:function(G){utils_type.A.exists(G)&&G.removeNode(!0)},makeArrows:function(G){var _,J=G.evalVisProp("firstarrow"),Z=G.evalVisProp("lastarrow");G.visPropOld.firstarrow===J&&G.visPropOld.lastarrow===Z||(J?(_=G.rendNodeStroke,this._setAttr(_,"startarrow","block"),this._setAttr(_,"startarrowlength","long")):(_=G.rendNodeStroke,utils_type.A.exists(_)&&this._setAttr(_,"startarrow","none")),Z?(_=G.rendNodeStroke,this._setAttr(_,"id",this.container.id+"_"+G.id+"stroke"),this._setAttr(_,"endarrow","block"),this._setAttr(_,"endarrowlength","long")):(_=G.rendNodeStroke,utils_type.A.exists(_)&&this._setAttr(_,"endarrow","none")),G.visPropOld.firstarrow=J,G.visPropOld.lastarrow=Z)},updateEllipsePrim:function(G,_,J,Z,Q){G.style.left=Math.floor(_-Z)+"px",G.style.top=Math.floor(J-Q)+"px",G.style.width=Math.floor(2*Math.abs(Z))+"px",G.style.height=Math.floor(2*Math.abs(Q))+"px"},updateLinePrim:function(G,_,J,Z,Q,ee){var te,ne=this.resolution;isNaN(_+J+Z+Q)||(te=["m ",Math.floor(ne*_),", ",Math.floor(ne*J)," l ",Math.floor(ne*Z),", ",Math.floor(ne*Q)],this.updatePathPrim(G,te,ee))},updatePathPrim:function(G,_,J){var Z=J.canvasWidth,Q=J.canvasHeight;_.length<=0&&(_=["m 0,0"]),G.style.width=Z,G.style.height=Q,this._setAttr(G,"coordsize",[Math.floor(this.resolution*Z),Math.floor(this.resolution*Q)].join(",")),this._setAttr(G,"path",_.join(""))},updatePathStringPoint:function(G,_,J){var Z=[],Q=Math.round,ee=G.coords.scrCoords,te=_*Math.sqrt(3)*.5,ne=.5*_,ie=this.resolution;return J==="x"?Z.push([" m ",Q(ie*(ee[1]-_)),", ",Q(ie*(ee[2]-_))," l ",Q(ie*(ee[1]+_)),", ",Q(ie*(ee[2]+_))," m ",Q(ie*(ee[1]+_)),", ",Q(ie*(ee[2]-_))," l ",Q(ie*(ee[1]-_)),", ",Q(ie*(ee[2]+_))].join("")):J==="+"?Z.push([" m ",Q(ie*(ee[1]-_)),", ",Q(ie*ee[2])," l ",Q(ie*(ee[1]+_)),", ",Q(ie*ee[2])," m ",Q(ie*ee[1]),", ",Q(ie*(ee[2]-_))," l ",Q(ie*ee[1]),", ",Q(ie*(ee[2]+_))].join("")):J==="<>"||J==="<<>>"?(J==="<<>>"&&(_*=1.41),Z.push([" m ",Q(ie*(ee[1]-_)),", ",Q(ie*ee[2])," l ",Q(ie*ee[1]),", ",Q(ie*(ee[2]+_))," l ",Q(ie*(ee[1]+_)),", ",Q(ie*ee[2])," l ",Q(ie*ee[1]),", ",Q(ie*(ee[2]-_))," x e "].join(""))):J==="^"?Z.push([" m ",Q(ie*ee[1]),", ",Q(ie*(ee[2]-_))," l ",Q(ie*(ee[1]-te)),", ",Q(ie*(ee[2]+ne))," l ",Q(ie*(ee[1]+te)),", ",Q(ie*(ee[2]+ne))," x e "].join("")):J==="v"?Z.push([" m ",Q(ie*ee[1]),", ",Q(ie*(ee[2]+_))," l ",Q(ie*(ee[1]-te)),", ",Q(ie*(ee[2]-ne))," l ",Q(ie*(ee[1]+te)),", ",Q(ie*(ee[2]-ne))," x e "].join("")):J===">"?Z.push([" m ",Q(ie*(ee[1]+_)),", ",Q(ie*ee[2])," l ",Q(ie*(ee[1]-ne)),", ",Q(ie*(ee[2]-te))," l ",Q(ie*(ee[1]-ne)),", ",Q(ie*(ee[2]+te))," l ",Q(ie*(ee[1]+_)),", ",Q(ie*ee[2])].join("")):J==="<"&&Z.push([" m ",Q(ie*(ee[1]-_)),", ",Q(ie*ee[2])," l ",Q(ie*(ee[1]+ne)),", ",Q(ie*(ee[2]-te))," l ",Q(ie*(ee[1]+ne)),", ",Q(ie*(ee[2]+te))," x e "].join("")),Z},updatePathStringPrim:function(G){var _,J,Z=[],Q=this.resolution,ee=Math.round,te=" m ",ne=te,ie=Math.min(G.numberPoints,8192);if(G.numberPoints<=0)return"";if(ie=Math.min(ie,G.points.length),G.bezierDegree===1)for(_=0;_<ie;_++)J=G.points[_].scrCoords,isNaN(J[1])||isNaN(J[2])?ne=te:(J[1]>2e4?J[1]=2e4:J[1]<-2e4&&(J[1]=-2e4),J[2]>2e4?J[2]=2e4:J[2]<-2e4&&(J[2]=-2e4),Z.push([ne,ee(Q*J[1]),", ",ee(Q*J[2])].join("")),ne=" l ");else if(G.bezierDegree===3)for(_=0;_<ie;)J=G.points[_].scrCoords,isNaN(J[1])||isNaN(J[2])?ne=te:(Z.push([ne,ee(Q*J[1]),", ",ee(Q*J[2])].join("")),ne===" c "&&(_+=1,J=G.points[_].scrCoords,Z.push([" ",ee(Q*J[1]),", ",ee(Q*J[2])].join("")),_+=1,J=G.points[_].scrCoords,Z.push([" ",ee(Q*J[1]),", ",ee(Q*J[2])].join(""))),ne=" c "),_+=1;return Z.push(" e"),Z},updatePathStringBezierPrim:function(G){var _,J,Z,Q,ee,te,ne=[],ie=G.evalVisProp("strokewidth"),re=this.resolution,oe=Math.round,se=" m ",ae=se,le=G.evalVisProp("curvetype")!=="plot",ue=Math.min(G.numberPoints,8192);if(G.numberPoints<=0)return"";for(le&&G.board.options.curve.RDPsmoothing&&(G.points=numerics.A.RamerDouglasPeucker(G.points,1)),ue=Math.min(ue,G.points.length),J=1;J<3;J++)for(ae=se,_=0;_<ue;_++)Q=G.points[_].scrCoords,isNaN(Q[1])||isNaN(Q[2])?ae=se:(Q[1]>2e4?Q[1]=2e4:Q[1]<-2e4&&(Q[1]=-2e4),Q[2]>2e4?Q[2]=2e4:Q[2]<-2e4&&(Q[2]=-2e4),ae===se?ne.push([ae,oe(re*Q[1])," ",oe(re*Q[2])].join("")):(Z=2*J,ne.push([ae,oe(re*(ee+.333*(Q[1]-ee)+ie*(Z*Math.random()-J)))," ",oe(re*(te+.333*(Q[2]-te)+ie*(Z*Math.random()-J)))," ",oe(re*(ee+.666*(Q[1]-ee)+ie*(Z*Math.random()-J)))," ",oe(re*(te+.666*(Q[2]-te)+ie*(Z*Math.random()-J)))," ",oe(re*Q[1])," ",oe(re*Q[2])].join(""))),ae=" c ",ee=Q[1],te=Q[2]);return ne.push(" e"),ne},updatePolygonPrim:function(G,_){var J,Z,Q=_.vertices.length,ee=this.resolution,te=[];if(this._setAttr(G,"stroked","false"),Z=_.vertices[0].coords.scrCoords,!isNaN(Z[1]+Z[2])){for(te.push(["m ",Math.floor(ee*Z[1]),",",Math.floor(ee*Z[2])," l "].join("")),J=1;J<Q-1;J++){if(!_.vertices[J].isReal)return void this.updatePathPrim(G,"",_.board);if(Z=_.vertices[J].coords.scrCoords,isNaN(Z[1]+Z[2]))return;te.push(Math.floor(ee*Z[1])+","+Math.floor(ee*Z[2])),J<Q-2&&te.push(", ")}te.push(" x e"),this.updatePathPrim(G,te,_.board)}},updateRectPrim:function(G,_,J,Z,Q){G.style.left=Math.floor(_)+"px",G.style.top=Math.floor(J)+"px",Z>=0&&(G.style.width=Z+"px"),Q>=0&&(G.style.height=Q+"px")},setPropertyPrim:function(G,_,J){var Z,Q="";switch(_){case"stroke":Q="strokecolor";break;case"stroke-width":Q="strokeweight";break;case"stroke-dasharray":Q="dashstyle"}Q!==""&&(Z=J,this._setAttr(G,Q,Z))},display:function(G,_){G&&G.rendNode&&(G.visPropOld.visible=_,G.rendNode.style.visibility=_?"inherit":"hidden")},show:function(G){jxg.A.deprecated("Board.renderer.show()","Board.renderer.display()"),G&&G.rendNode&&(G.rendNode.style.visibility="inherit")},hide:function(G){jxg.A.deprecated("Board.renderer.hide()","Board.renderer.display()"),G&&G.rendNode&&(G.rendNode.style.visibility="hidden")},setDashStyle:function(G,_){var J;_.dash>=0&&(J=G.rendNodeStroke,this._setAttr(J,"dashstyle",this.dashArray[_.dash]))},setGradient:function(G){var _=G.rendNodeFill,J=G.evalVisProp("gradient");J==="linear"?(this._setAttr(_,"type","gradient"),this._setAttr(_,"color2",G.evalVisProp("gradientsecondcolor")),this._setAttr(_,"opacity2",G.evalVisProp("gradientsecondopacity")),this._setAttr(_,"angle",G.evalVisProp("gradientangle"))):J==="radial"?(this._setAttr(_,"type","gradientradial"),this._setAttr(_,"color2",G.evalVisProp("gradientsecondcolor")),this._setAttr(_,"opacity2",G.evalVisProp("gradientsecondopacity")),this._setAttr(_,"focusposition",100*G.evalVisProp("gradientpositionx")+"%,"+100*G.evalVisProp("gradientpositiony")+"%"),this._setAttr(_,"focussize","0,0")):this._setAttr(_,"type","solid")},setObjectFillColor:function(G,_,J){var Z,Q,ee,te=_,ne=J,ie=G.rendNode;ne=ne>0?ne:0,G.visPropOld.fillcolor===te&&G.visPropOld.fillopacity===ne||(utils_type.A.exists(te)&&te!==!1&&(te.length!==9?(Z=te,ee=ne):(Z=(Q=utils_color.A.rgba2rgbo(te))[0],ee=ne*Q[1]),Z==="none"||Z===!1?this._setAttr(G.rendNode,"filled","false"):(this._setAttr(G.rendNode,"filled","true"),this._setAttr(G.rendNode,"fillcolor",Z),utils_type.A.exists(ee)&&G.rendNodeFill&&this._setAttr(G.rendNodeFill,"opacity",100*ee+"%")),G.type===constants.A.OBJECT_TYPE_IMAGE&&ie.filters.length>1&&(ie.filters.item(1).opacity=Math.round(100*ee),ie.filters.item(1).enabled=!0)),G.visPropOld.fillcolor=te,G.visPropOld.fillopacity=ne)},setObjectStrokeColor:function(G,_,J){var Z,Q,ee,te,ne=_,ie=J,re=G.rendNode;ie=ie>0?ie:0,G.visPropOld.strokecolor===ne&&G.visPropOld.strokeopacity===ie||(utils_type.A.exists(ne)&&ne!==!1&&(ne.length!==9?(Z=ne,ee=ie):(Z=(Q=_.rgba2rgbo(ne))[0],ee=ie*Q[1]),G.elementClass===constants.A.OBJECT_CLASS_TEXT?(re.filters.length>1&&(re.filters.item(1).opacity=Math.round(100*ee),re.filters.item(1).enabled=!0),re.style.color=Z):(Z!==!1&&(this._setAttr(re,"stroked","true"),this._setAttr(re,"strokecolor",Z)),te=G.rendNodeStroke,utils_type.A.exists(ee)&&G.type!==constants.A.OBJECT_TYPE_IMAGE&&this._setAttr(te,"opacity",100*ee+"%"))),G.visPropOld.strokecolor=ne,G.visPropOld.strokeopacity=ie)},setObjectStrokeWidth:function(G,_){var J,Z=utils_type.A.evaluate(_);isNaN(Z)||G.visPropOld.strokewidth===Z||(J=G.rendNode,this.setPropertyPrim(J,"stroked","true"),utils_type.A.exists(Z)&&(this.setPropertyPrim(J,"stroke-width",Z),Z===0&&utils_type.A.exists(G.rendNodeStroke)&&this._setAttr(J,"stroked","false")),G.visPropOld.strokewidth=Z)},setShadow:function(G){var _=G.rendNodeShadow,J=G.evalVisProp("shadow");_&&G.visPropOld.shadow!==J&&(J?(this._setAttr(_,"On","True"),this._setAttr(_,"Offset","3pt,3pt"),this._setAttr(_,"Opacity","60%"),this._setAttr(_,"Color","#aaaaaa")):this._setAttr(_,"On","False"),G.visPropOld.shadow=J)},suspendRedraw:function(){this.container.style.display="none"},unsuspendRedraw:function(){this.container.style.display=""}});var vml=jxg.A.VMLRenderer,uuidCharsStr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",uuidChars=uuidCharsStr.split("");jxg.A.Util=jxg.A.Util||{},jxg.A.Util.genUUID=function(G){var _,J,Z=[],Q=0;for((G=G||"")!==""&&G.slice(G.length-1)!=="-"&&(G+="-"),J=0;J<36;J++)J===8||J===13||J===18||J===23?Z[J]="-":J===14?Z[J]="4":(Q<=2&&(Q=33554432+16777216*Math.random()|0),_=15&Q,Q>>=4,Z[J]=uuidChars[J===19?3&_|8:_]);return G+Z.join("")};var uuid=jxg.A.Util;jxg.A.CanvasRenderer=function(G,_){if(this.type="canvas",this.canvasRoot=null,this.suspendHandle=null,this.canvasId=uuid.genUUID(),this.canvasNamespace=null,env.A.isBrowser)this.container=G,this.container.style.MozUserSelect="none",this.container.style.userSelect="none",this.container.style.overflow="hidden",this.container.style.position===""&&(this.container.style.position="relative"),this.container.innerHTML=['<canvas id="',this.canvasId,'" width="',_.width,'px" height="',_.height,'px"></canvas>'].join(""),this.canvasRoot=this.container.ownerDocument.getElementById(this.canvasId),this.canvasRoot.style.display="block",this.context=this.canvasRoot.getContext("2d");else if(env.A.isNode())try{this.canvasRoot=jxg.A.createCanvas(500,500),this.context=this.canvasRoot.getContext("2d")}catch{throw new Error(`JXG.createCanvas not available.
Install the npm package \`canvas\`
and call:
    import { createCanvas } from "canvas.js"
    JXG.createCanvas = createCanvas;
`)}},jxg.A.CanvasRenderer.prototype=new renderer_abstract,jxg.A.extend(jxg.A.CanvasRenderer.prototype,{_drawPolygon:function(G,_,J){var Z,Q=G.length,ee=this.context;if(Q>0){if(J&&(ee.lineWidth=0),ee.beginPath(),ee.moveTo(G[0][0],G[0][1]),_===1)for(Z=1;Z<Q;Z++)ee.lineTo(G[Z][0],G[Z][1]);else for(Z=1;Z<Q;Z+=3)ee.bezierCurveTo(G[Z][0],G[Z][1],G[Z+1][0],G[Z+1][1],G[Z+2][0],G[Z+2][1]);J?(ee.lineTo(G[0][0],G[0][1]),ee.closePath(),ee.fill("evenodd")):ee.stroke()}},_fill:function(G){var _=this.context;_.save(),this._setColor(G,"fill")&&_.fill("evenodd"),_.restore()},_rotatePoint:function(G,_,J){return[_*Math.cos(G)-J*Math.sin(G),_*Math.sin(G)+J*Math.cos(G)]},_rotateShape:function(G,_){var J,Z=[],Q=G.length;if(Q<=0)return G;for(J=0;J<Q;J++)Z.push(this._rotatePoint(_,G[J][0],G[J][1]));return Z},updateGradientAngle:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue=1,de=Math.cos(-_),pe=Math.sin(-_),fe=G.getBoundingBox();return Math.abs(de)>Math.abs(pe)?ue/=Math.abs(de):ue/=Math.abs(pe),de>=0?(Q=0,ee=de*ue):(Q=-de*ue,ee=0),pe>=0?(te=0,ne=pe*ue):(te=-pe*ue,ne=0),J=new base_coords.A(constants.A.COORDS_BY_USER,[fe[0],fe[1]],G.board),ae=(Z=new base_coords.A(constants.A.COORDS_BY_USER,[fe[2],fe[3]],G.board)).scrCoords[1]-J.scrCoords[1],le=Z.scrCoords[2]-J.scrCoords[2],ie=J.scrCoords[1]+ae*Q,oe=J.scrCoords[2]+le*te,re=J.scrCoords[1]+ae*ee,se=J.scrCoords[2]+le*ne,this.context.createLinearGradient(ie,oe,re,se)},updateGradientCircle:function(G,_,J,Z,Q,ee,te){var ne,ie,re,oe,se,ae,le,ue,de,pe,fe=G.getBoundingBox();return ne=new base_coords.A(constants.A.COORDS_BY_USER,[fe[0],fe[1]],G.board),de=(ie=new base_coords.A(constants.A.COORDS_BY_USER,[fe[2],fe[3]],G.board)).scrCoords[1]-ne.scrCoords[1],pe=ne.scrCoords[2]-ie.scrCoords[2],re=ne.scrCoords[1]+de*_,oe=ie.scrCoords[2]+pe*J,ae=ne.scrCoords[1]+de*Q,le=ie.scrCoords[2]+pe*ee,se=Z*(de+pe)*.5,ue=te*(de+pe)*.5,this.context.createRadialGradient(ae,le,ue,re,oe,se)},updateGradient:function(G){var _,J,Z=G.evalVisProp("gradient");return _=G.evalVisProp("fillcolor"),Z==="linear"?J=this.updateGradientAngle(G,G.evalVisProp("gradientangle")):Z==="radial"&&(J=this.updateGradientCircle(G,G.evalVisProp("gradientcx"),G.evalVisProp("gradientcy"),G.evalVisProp("gradientr"),G.evalVisProp("gradientfx"),G.evalVisProp("gradientfy"),G.evalVisProp("gradientfr"))),_!=="none"&&_!==""&&_!==!1&&(J.addColorStop(G.evalVisProp("gradientstartoffset"),_),J.addColorStop(G.evalVisProp("gradientendoffset"),G.evalVisProp("gradientsecondcolor"))),J},_setColor:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae=!0;return _=_||"stroke",J=J||_,Q=this._getHighlighted(G),(te=G.evalVisProp(Q+_+"color"))!=="none"&&te!==""&&te!==!1?(re=(re=G.evalVisProp(Q+_+"opacity"))>0?re:0,te.length!==9?(ie=te,oe=re):(ie=(ne=utils_color.A.rgba2rgbo(te))[0],oe=re*ne[1]),this.context.globalAlpha=oe,this.context[J+"Style"]=ie):ae=!1,_==="stroke"||(se=G.evalVisProp("gradient"))!=="linear"&&se!=="radial"?(ee=parseFloat(G.evalVisProp(Q+"strokewidth")),_!=="stroke"||isNaN(ee)||(ee===0?this.context.globalAlpha=0:this.context.lineWidth=ee),Z=G.evalVisProp("linecap"),_==="stroke"&&Z!==void 0&&Z!==""&&(this.context.lineCap=Z),ae):(this.context.globalAlpha=oe,this.context[J+"Style"]=this.updateGradient(G),ae)},_stroke:function(G){var _=this.context,J=G.evalVisProp("dash"),Z=G.evalVisProp("dashscale")?.5*G.evalVisProp("strokewidth"):1;_.save(),J>0?_.setLineDash&&_.setLineDash(this.dashArray[J-1].map(function(Q){return Q*Z})):this.context.lineDashArray=[],this._setColor(G,"stroke")&&_.stroke(),_.restore()},_translateShape:function(G,_,J){var Z,Q=[],ee=G.length;if(ee<=0)return G;for(Z=0;Z<ee;Z++)Q.push([G[Z][0]+_,G[Z][1]+J]);return Q},drawPoint:function(G){var _=G.evalVisProp("face"),J=G.evalVisProp("size"),Z=G.coords.scrCoords,Q=J*Math.sqrt(3)*.5,ee=.5*J,te=parseFloat(G.evalVisProp("strokewidth"))/2,ne=this.context;if(G.visPropCalc.visible)switch(_){case"cross":case"x":ne.beginPath(),ne.moveTo(Z[1]-J,Z[2]-J),ne.lineTo(Z[1]+J,Z[2]+J),ne.moveTo(Z[1]+J,Z[2]-J),ne.lineTo(Z[1]-J,Z[2]+J),ne.lineCap="round",ne.lineJoin="round",ne.closePath(),this._stroke(G);break;case"circle":case"o":ne.beginPath(),ne.arc(Z[1],Z[2],J+1+te,0,2*Math.PI,!1),ne.closePath(),this._fill(G),this._stroke(G);break;case"square":case"[]":if(J<=0)break;ne.save(),this._setColor(G,"stroke","fill")&&ne.fillRect(Z[1]-J-te,Z[2]-J-te,2*J+3*te,2*J+3*te),ne.restore(),ne.save(),this._setColor(G,"fill"),ne.fillRect(Z[1]-J+te,Z[2]-J+te,2*J-te,2*J-te),ne.restore();break;case"plus":case"+":ne.beginPath(),ne.moveTo(Z[1]-J,Z[2]),ne.lineTo(Z[1]+J,Z[2]),ne.moveTo(Z[1],Z[2]-J),ne.lineTo(Z[1],Z[2]+J),ne.lineCap="round",ne.lineJoin="round",ne.closePath(),this._stroke(G);break;case"divide":case"|":ne.beginPath(),ne.moveTo(Z[1],Z[2]-J),ne.lineTo(Z[1],Z[2]+J),ne.lineCap="round",ne.lineJoin="round",ne.closePath(),this._stroke(G);break;case"minus":case"-":ne.beginPath(),ne.moveTo(Z[1]-J,Z[2]),ne.lineTo(Z[1]+J,Z[2]),ne.lineCap="round",ne.lineJoin="round",ne.closePath(),this._stroke(G);break;case"diamond2":case"<<>>":J*=1.41;case"diamond":case"<>":ne.beginPath(),ne.moveTo(Z[1]-J,Z[2]),ne.lineTo(Z[1],Z[2]+J),ne.lineTo(Z[1]+J,Z[2]),ne.lineTo(Z[1],Z[2]-J),ne.closePath(),this._fill(G),this._stroke(G);break;case"triangleup":case"A":case"a":case"^":ne.beginPath(),ne.moveTo(Z[1],Z[2]-J),ne.lineTo(Z[1]-Q,Z[2]+ee),ne.lineTo(Z[1]+Q,Z[2]+ee),ne.closePath(),this._fill(G),this._stroke(G);break;case"triangledown":case"v":ne.beginPath(),ne.moveTo(Z[1],Z[2]+J),ne.lineTo(Z[1]-Q,Z[2]-ee),ne.lineTo(Z[1]+Q,Z[2]-ee),ne.closePath(),this._fill(G),this._stroke(G);break;case"triangleleft":case"<":ne.beginPath(),ne.moveTo(Z[1]-J,Z[2]),ne.lineTo(Z[1]+ee,Z[2]-Q),ne.lineTo(Z[1]+ee,Z[2]+Q),ne.closePath(),this._fill(G),this._stroke(G);break;case"triangleright":case">":ne.beginPath(),ne.moveTo(Z[1]+J,Z[2]),ne.lineTo(Z[1]-ee,Z[2]-Q),ne.lineTo(Z[1]-ee,Z[2]+Q),ne.closePath(),this._fill(G),this._stroke(G)}},updatePoint:function(G){this.drawPoint(G)},drawArrows:function(G,_,J,Z,Q){var ee,te,ne,ie,re,oe,se,ae,le,ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te=this.context,Me=1,Ne=1,Le=1,Ie=Q.evFirst,Ge=Q.evLast;if(G.evalVisProp("strokecolor")!=="none"&&(Ie||Ge)){if(G.elementClass===constants.A.OBJECT_CLASS_LINE)ee=_.scrCoords[1],te=_.scrCoords[2],ne=J.scrCoords[1],ie=J.scrCoords[2],Ee=Re=Math.atan2(ie-te,ne-ee);else{if(ee=G.points[0].scrCoords[1],te=G.points[0].scrCoords[2],(Ce=G.points.length-1)<1)return;ne=G.points[G.points.length-1].scrCoords[1],ie=G.points[G.points.length-1].scrCoords[2],_e=G.points[1].scrCoords[1]-G.points[0].scrCoords[1],ye=G.points[1].scrCoords[2]-G.points[0].scrCoords[2],be=G.points[Ce].scrCoords[1]-G.points[Ce-1].scrCoords[1],Ae=G.points[Ce].scrCoords[2]-G.points[Ce-1].scrCoords[2],Ie&&(Ee=Math.atan2(ye,_e)),Ge&&(Re=Math.atan2(Ae,be))}if(oe=G.evalVisProp(Z+"strokewidth"),Ie)if(re=oe*Q.sizeFirst,le=Me=Q.typeFirst,Me===2)ae=[[re,.5*-re],[0,0],[re,.5*re],[.5*re,0]];else if(Me===3)ae=[[re/3,.5*-re],[0,.5*-re],[0,.5*re],[re/3,.5*re]];else if(Me===4)for(re/=10,Ne=3,fe=(ae=[[10,3.31],[6.47,3.84],[2.87,4.5],[0,6.63],[.67,5.52],[1.33,4.42],[2,3.31],[1.33,2.21],[.67,1.1],[0,0],[2.87,2.13],[6.47,2.79],[10,3.31]]).length,pe=0;pe<fe;pe++)ae[pe][0]*=-re,ae[pe][1]*=re,ae[pe][0]+=10*re,ae[pe][1]-=3.31*re;else if(Me===5)for(re/=10,Ne=3,fe=(ae=[[10,3.28],[6.61,4.19],[3.19,5.07],[0,6.55],[.62,5.56],[1,4.44],[1,3.28],[1,2.11],[.62,.99],[0,0],[3.19,1.49],[6.61,2.37],[10,3.28]]).length,pe=0;pe<fe;pe++)ae[pe][0]*=-re,ae[pe][1]*=re,ae[pe][0]+=10*re,ae[pe][1]-=3.28*re;else if(Me===6)for(re/=10,Ne=3,fe=(ae=[[10,2.84],[6.61,3.59],[3.21,4.35],[0,5.68],[.33,4.73],[.67,3.78],[1,2.84],[.67,1.89],[.33,.95],[0,0],[3.21,1.33],[6.61,2.09],[10,2.84]]).length,pe=0;pe<fe;pe++)ae[pe][0]*=-re,ae[pe][1]*=re,ae[pe][0]+=10*re,ae[pe][1]-=2.84*re;else if(Me===7)for(re=oe,Ne=3,fe=(ae=[[0,10.39],[2.01,6.92],[5.96,5.2],[10,5.2],[5.96,5.2],[2.01,3.47],[0,0]]).length,pe=0;pe<fe;pe++)ae[pe][0]*=-re,ae[pe][1]*=re,ae[pe][0]+=10*re,ae[pe][1]-=5.2*re;else ae=[[re,.5*-re],[0,0],[re,.5*re]];if(Ge)if(re=oe*Q.sizeLast,ue=Me=Q.typeLast,Me===2)se=[[-re,.5*-re],[0,0],[-re,.5*re],[.5*-re,0]];else if(Me===3)se=[[-re/3,.5*-re],[0,.5*-re],[0,.5*re],[-re/3,.5*re]];else if(Me===4)for(re/=10,Le=3,fe=(se=[[10,3.31],[6.47,3.84],[2.87,4.5],[0,6.63],[.67,5.52],[1.33,4.42],[2,3.31],[1.33,2.21],[.67,1.1],[0,0],[2.87,2.13],[6.47,2.79],[10,3.31]]).length,pe=0;pe<fe;pe++)se[pe][0]*=re,se[pe][1]*=re,se[pe][0]-=10*re,se[pe][1]-=3.31*re;else if(Me===5)for(re/=10,Le=3,fe=(se=[[10,3.28],[6.61,4.19],[3.19,5.07],[0,6.55],[.62,5.56],[1,4.44],[1,3.28],[1,2.11],[.62,.99],[0,0],[3.19,1.49],[6.61,2.37],[10,3.28]]).length,pe=0;pe<fe;pe++)se[pe][0]*=re,se[pe][1]*=re,se[pe][0]-=10*re,se[pe][1]-=3.28*re;else if(Me===6)for(re/=10,Le=3,fe=(se=[[10,2.84],[6.61,3.59],[3.21,4.35],[0,5.68],[.33,4.73],[.67,3.78],[1,2.84],[.67,1.89],[.33,.95],[0,0],[3.21,1.33],[6.61,2.09],[10,2.84]]).length,pe=0;pe<fe;pe++)se[pe][0]*=re,se[pe][1]*=re,se[pe][0]-=10*re,se[pe][1]-=2.84*re;else if(Me===7)for(re=oe,Le=3,fe=(se=[[0,10.39],[2.01,6.92],[5.96,5.2],[10,5.2],[5.96,5.2],[2.01,3.47],[0,0]]).length,pe=0;pe<fe;pe++)se[pe][0]*=re,se[pe][1]*=re,se[pe][0]-=10*re,se[pe][1]-=5.2*re;else se=[[-re,.5*-re],[0,0],[-re,.5*re]];Te.save(),this._setColor(G,"stroke","fill")&&(this._setColor(G,"stroke"),Ie&&(de=le!==7,this._drawPolygon(this._translateShape(this._rotateShape(ae,Ee),ee,te),Ne,de)),Ge&&(de=ue!==7,this._drawPolygon(this._translateShape(this._rotateShape(se,Re),ne,ie),Le,de))),Te.restore()}},drawLine:function(G){var _,J,Z,Q,ee,te=new base_coords.A(constants.A.COORDS_BY_USER,G.point1.coords.usrCoords,G.board),ne=new base_coords.A(constants.A.COORDS_BY_USER,G.point2.coords.usrCoords,G.board),ie=null;G.visPropCalc.visible&&(Z=this._getHighlighted(G),Q=G.evalVisProp(Z+"strokewidth"),((ee=this.getArrowHeadData(G,Q,Z)).evFirst||ee.evLast)&&(ie=-4),geometry.A.calcStraight(G,te,ne,ie),this.handleTouchpoints(G,te,ne,ee),_=new base_coords.A(constants.A.COORDS_BY_USER,te.usrCoords,G.board),J=new base_coords.A(constants.A.COORDS_BY_USER,ne.usrCoords,G.board),this.getPositionArrowHead(G,te,ne,ee),this.context.beginPath(),this.context.moveTo(te.scrCoords[1],te.scrCoords[2]),this.context.lineTo(ne.scrCoords[1],ne.scrCoords[2]),this._stroke(G),(ee.evFirst||ee.evLast)&&this.drawArrows(G,_,J,Z,ee))},updateLine:function(G){this.drawLine(G)},drawTicks:function(){},updateTicks:function(G){var _,J,Z,Q,ee,te,ne=G.ticks.length,ie=this.context;for(ie.beginPath(),_=0;_<ne;_++)for(Z=(J=G.ticks[_])[0],Q=J[1],ee=Z.length,ie.moveTo(Z[0],Q[0]),te=1;te<ee;++te)ie.lineTo(Z[te],Q[te]);ie.lineCap="round",this._stroke(G)},drawCurve:function(G){var _,J,Z;G.evalVisProp("handdrawing")?this.updatePathStringBezierPrim(G):this.updatePathStringPrim(G),G.numberPoints>1&&(_=this._getHighlighted(G),J=G.evalVisProp(_+"strokewidth"),((Z=this.getArrowHeadData(G,J,_)).evFirst||Z.evLast)&&this.drawArrows(G,null,null,_,Z))},updateCurve:function(G){this.drawCurve(G)},drawEllipse:function(G){var _=G.center.coords.scrCoords[1],J=G.center.coords.scrCoords[2],Z=G.board.unitX,Q=G.board.unitY,ee=2*G.Radius(),te=2*G.Radius(),ne=ee*Z,ie=te*Q,re=_-ne/2,oe=J-ie/2,se=ne/2*.5522848,ae=ie/2*.5522848,le=re+ne,ue=oe+ie,de=re+ne/2,pe=oe+ie/2,fe=this.context;ee>0&&te>0&&!isNaN(_+J)&&(fe.beginPath(),fe.moveTo(re,pe),fe.bezierCurveTo(re,pe-ae,de-se,oe,de,oe),fe.bezierCurveTo(de+se,oe,le,pe-ae,le,pe),fe.bezierCurveTo(le,pe+ae,de+se,ue,de,ue),fe.bezierCurveTo(de-se,ue,re,pe+ae,re,pe),fe.closePath(),this._fill(G),this._stroke(G))},updateEllipse:function(G){return this.drawEllipse(G)},displayCopyright:function(G,_){var J=this.context,Z=4+1.8*_,Q=6+_;J.save(),J.font=_+"px Arial",J.globalAlpha=.2,J.lineWidth=.5,J.fillText(G+".",Z,Q),J.restore()},displayLogo:function(G,_,J){var Z=this.context,Q=1.5*_;utils_type.A.exists(J._logo_image)||(J._logo_image=new Image,J._logo_image.src=G),J._logo_image.onload=function(){Z.save(),Z.globalAlpha=.2,Z.drawImage(J._logo_image,5,5,Q,Q),Z.restore()},Z.save(),Z.globalAlpha=.2,Z.drawImage(J._logo_image,5,5,Q,Q),Z.restore()},drawInternalText:function(G){var _=G.evalVisProp("fontsize"),J=G.evalVisProp("fontunit"),Z=G.getAnchorX(),Q=G.getAnchorY(),ee=this.context;return ee.save(),this._setColor(G,"stroke","fill")&&!isNaN(G.coords.scrCoords[1]+G.coords.scrCoords[2])&&(ee.font=(_>0?_:0)+J+" Arial",this.transformRect(G,G.transformations),Z==="left"?ee.textAlign="left":Z==="right"?ee.textAlign="right":Z==="middle"&&(ee.textAlign="center"),Q==="bottom"?ee.textBaseline="bottom":Q==="top"?ee.textBaseline="top":Q==="middle"&&(ee.textBaseline="middle"),ee.fillText(G.plaintext,G.coords.scrCoords[1],G.coords.scrCoords[2])),ee.restore(),null},updateInternalText:function(G){this.drawInternalText(G)},setObjectStrokeColor:function(G,_,J){var Z,Q,ee,te,ne=_,ie=J;ie=ie>0?ie:0,G.visPropOld.strokecolor===ne&&G.visPropOld.strokeopacity===ie||(utils_type.A.exists(ne)&&ne!==!1&&(ne.length!==9?(Z=ne,ee=ie):(Z=(Q=utils_color.A.rgba2rgbo(ne))[0],ee=ie*Q[1]),te=G.rendNode,G.elementClass===constants.A.OBJECT_CLASS_TEXT&&G.evalVisProp("display")==="html"&&(te.style.color=Z,te.style.opacity=ee)),G.visPropOld.strokecolor=ne,G.visPropOld.strokeopacity=ie)},drawImage:function(G){G.rendNode=new Image,G._src="",this.updateImage(G)},updateImage:function(G){var _=this.context,J=G.evalVisProp("fillopacity"),Z=utils_type.A.bind(function(){G.imgIsLoaded=!0,G.size[0]<=0||G.size[1]<=0||(_.save(),_.globalAlpha=J,this.transformRect(G,G.transformations),_.drawImage(G.rendNode,G.coords.scrCoords[1],G.coords.scrCoords[2]-G.size[1],G.size[0],G.size[1]),_.restore())},this);this.updateImageURL(G)?G.rendNode.onload=Z:G.imgIsLoaded&&Z()},transformRect:function(G,_){var J,Z,Q,ee,te,ne=_.length,ie=this.context;if(ne>0)if(J=this.joinTransforms(G,_),G.elementClass===constants.A.OBJECT_CLASS_TEXT&&G.visProp.display==="html"){if((Z=" matrix("+[J[1][1],J[2][1],J[1][2],J[2][2],J[1][0],J[2][0]].join(",")+") ").indexOf("NaN")===-1){switch((te=G.rendNode).style.transform=Z,Q=-G.coords.scrCoords[1],ee=-G.coords.scrCoords[2],G.evalVisProp("anchorx")){case"right":Q+=G.size[0];break;case"middle":Q+=.5*G.size[0]}switch(G.evalVisProp("anchory")){case"bottom":ee+=G.size[1];break;case"middle":ee+=.5*G.size[1]}te.style["transform-origin"]=Q+"px "+ee+"px"}}else Math.abs(numerics.A.det(J))>=math.A.eps&&ie.transform(J[1][1],J[2][1],J[1][2],J[2][2],J[1][0],J[2][0])},updateImageURL:function(G){var _;return _=G.eval(G.url),G._src!==_&&(G.imgIsLoaded=!1,G.rendNode.src=_,G._src=_,!0)},remove:function(G){utils_type.A.exists(G)&&utils_type.A.exists(G.parentNode)&&G.parentNode.removeChild(G)},updatePathStringPrim:function(G){var _,J,Z,Q,ee,te="M",ne=te,ie=5e3,re=this.context;if(!(G.numberPoints<=0)){if(ee=Math.min(G.points.length,G.numberPoints),re.beginPath(),G.bezierDegree===1)for(_=0;_<ee;_++)J=G.points[_].scrCoords,isNaN(J[1])||isNaN(J[2])?ne=te:(J[1]>ie?J[1]=ie:J[1]<-5e3&&(J[1]=-5e3),J[2]>ie?J[2]=ie:J[2]<-5e3&&(J[2]=-5e3),ne===te?re.moveTo(J[1],J[2]):re.lineTo(J[1],J[2]),ne="L");else if(G.bezierDegree===3)for(_=0;_<ee;)J=G.points[_].scrCoords,isNaN(J[1])||isNaN(J[2])?ne=te:(ne===te?re.moveTo(J[1],J[2]):(_+=1,Z=G.points[_].scrCoords,_+=1,Q=G.points[_].scrCoords,re.bezierCurveTo(J[1],J[2],Z[1],Z[2],Q[1],Q[2])),ne="C"),_+=1;re.lineCap="round",re.lineJoin="round",this._fill(G),this._stroke(G)}},updatePathStringBezierPrim:function(G){var _,J,Z,Q,ee,te,ne,ie="M",re=ie,oe=5e3,se=G.evalVisProp("strokewidth"),ae=G.evalVisProp("curvetype")!=="plot",le=this.context;if(!(G.numberPoints<=0)){for(ae&&G.board.options.curve.RDPsmoothing&&(G.points=numerics.A.RamerDouglasPeucker(G.points,.5)),ne=Math.min(G.points.length,G.numberPoints),le.beginPath(),J=1;J<3;J++)for(re=ie,_=0;_<ne;_++)Q=G.points[_].scrCoords,isNaN(Q[1])||isNaN(Q[2])?re=ie:(Q[1]>oe?Q[1]=oe:Q[1]<-5e3&&(Q[1]=-5e3),Q[2]>oe?Q[2]=oe:Q[2]<-5e3&&(Q[2]=-5e3),re===ie?le.moveTo(Q[1],Q[2]):(Z=2*J,le.bezierCurveTo(ee+.333*(Q[1]-ee)+se*(Z*Math.random()-J),te+.333*(Q[2]-te)+se*(Z*Math.random()-J),ee+.666*(Q[1]-ee)+se*(Z*Math.random()-J),te+.666*(Q[2]-te)+se*(Z*Math.random()-J),Q[1],Q[2])),re="C",ee=Q[1],te=Q[2]);le.lineCap="round",le.lineJoin="round",this._fill(G),this._stroke(G)}},updatePolygonPrim:function(G,_){var J,Z,Q,ee=_.vertices.length,te=this.context,ne=!0;if(!(ee<=0)&&_.visPropCalc.visible){for(_.elType==="polygonalchain"&&ee++,te.beginPath(),Z=0;!_.vertices[Z].isReal&&Z<ee-1;)Z++,ne=!1;for(J=_.vertices[Z].coords.scrCoords,te.moveTo(J[1],J[2]),Q=Z;Q<ee-1;Q++)_.vertices[Q].isReal||(ne=!1),J=_.vertices[Q].coords.scrCoords,te.lineTo(J[1],J[2]);te.closePath(),ne&&this._fill(_)}},display:function(G,_){G&&G.rendNode&&(G.visPropOld.visible=_,G.rendNode.style.visibility=_?"inherit":"hidden")},show:function(G){jxg.A.deprecated("Board.renderer.show()","Board.renderer.display()"),utils_type.A.exists(G.rendNode)&&(G.rendNode.style.visibility="inherit")},hide:function(G){jxg.A.deprecated("Board.renderer.hide()","Board.renderer.display()"),utils_type.A.exists(G.rendNode)&&(G.rendNode.style.visibility="hidden")},setGradient:function(G){},setShadow:function(G){G.visPropOld.shadow!==G.visProp.shadow&&(G.visPropOld.shadow=G.visProp.shadow)},highlight:function(G){return G.elementClass===constants.A.OBJECT_CLASS_TEXT&&G.evalVisProp("display")==="html"?this.updateTextStyle(G,!0):(G.board.prepareUpdate(),G.board.renderer.suspendRedraw(G.board),G.board.updateRenderer(),G.board.renderer.unsuspendRedraw()),this},noHighlight:function(G){return G.elementClass===constants.A.OBJECT_CLASS_TEXT&&G.evalVisProp("display")==="html"?this.updateTextStyle(G,!1):(G.board.prepareUpdate(),G.board.renderer.suspendRedraw(G.board),G.board.updateRenderer(),G.board.renderer.unsuspendRedraw()),this},suspendRedraw:function(G){this.context.save(),this.context.clearRect(0,0,this.canvasRoot.width,this.canvasRoot.height),G&&(G.attr.showcopyright||G.attr.showlogo)&&this.displayLogo(jxg.A.licenseLogo,12,G),G&&G.attr.showcopyright&&this.displayCopyright(jxg.A.licenseText,12)},unsuspendRedraw:function(){this.context.restore()},resize:function(G,_){this.container?(this.canvasRoot.style.width=parseFloat(G)+"px",this.canvasRoot.style.height=parseFloat(_)+"px",this.canvasRoot.setAttribute("width",2*parseFloat(G)+"px"),this.canvasRoot.setAttribute("height",2*parseFloat(_)+"px")):(this.canvasRoot.width=2*parseFloat(G),this.canvasRoot.height=2*parseFloat(_)),this.context=this.canvasRoot.getContext("2d"),this.context.scale(2,2)},removeToInsertLater:function(){return function(){}}});var canvas=jxg.A.CanvasRenderer;jxg.A.NoRenderer=function(){this.enhancedRendering=!1,this.type="no"},jxg.A.extend(jxg.A.NoRenderer.prototype,{drawPoint:function(G){},updatePoint:function(G){},changePointStyle:function(G){},drawLine:function(G){},updateLine:function(G){},drawTicks:function(G){},updateTicks:function(G){},drawCurve:function(G){},updateCurve:function(G){},drawEllipse:function(G){},updateEllipse:function(G){},drawPolygon:function(G){},updatePolygon:function(G){},displayCopyright:function(G,_){},drawInternalText:function(G){},updateInternalText:function(G){},drawText:function(G){},updateText:function(G){},updateTextStyle:function(G,_){},updateInternalTextStyle:function(G,_,J){},drawImage:function(G){},updateImage:function(G){},updateImageURL:function(G){},appendChildPrim:function(G,_){},appendNodesToElement:function(G,_){},remove:function(G){},makeArrows:function(G){},updateEllipsePrim:function(G,_,J,Z,Q){},updateLinePrim:function(G,_,J,Z,Q,ee){},updatePathPrim:function(G,_,J){},updatePathStringPoint:function(G,_,J){},updatePathStringPrim:function(G){},updatePathStringBezierPrim:function(G){},updatePolygonPrim:function(G,_){},updateRectPrim:function(G,_,J,Z,Q){},setPropertyPrim:function(G,_,J){},show:function(G){},hide:function(G){},setBuffering:function(G,_){},setDashStyle:function(G){},setDraft:function(G){},removeDraft:function(G){},setGradient:function(G){},updateGradient:function(G){},setObjectTransition:function(G,_){},setObjectFillColor:function(G,_,J){},setObjectStrokeColor:function(G,_,J){},setObjectStrokeWidth:function(G,_){},setShadow:function(G){},highlight:function(G){},noHighlight:function(G){},suspendRedraw:function(){},unsuspendRedraw:function(){},drawNavigationBar:function(G){},getElementById:function(G){return null},resize:function(G,_){},removeToInsertLater:function(){return function(){}}}),jxg.A.NoRenderer.prototype=new renderer_abstract;var no=jxg.A.NoRenderer;jxg.A.JSXGraph={rendererType:(src_options.A.board.renderer="no",env.A.supportsVML()&&(src_options.A.board.renderer="vml",document.onmousemove=function(){var G;return document.body&&(G=document.body.scrollLeft,G+=document.body.scrollTop),G}),env.A.supportsCanvas()&&(src_options.A.board.renderer="canvas"),env.A.supportsSVG()&&(src_options.A.board.renderer="svg"),env.A.isNode()&&env.A.supportsCanvas()&&(src_options.A.board.renderer="canvas"),(env.A.isNode()||src_options.A.renderer==="no")&&(src_options.A.text.display="internal",src_options.A.infobox.display="internal"),src_options.A.board.renderer),initRenderer:function(G,_,J,Z){var Q;if(utils_type.A.exists(J)&&J!==!1||typeof document!="object"||(J=document),typeof J=="object"&&G!==null)for(Q=utils_type.A.isString(G)?J.getElementById(G):G;Q.firstChild;)Q.removeChild(Q.firstChild);else Q=G;return Z!==void 0&&Z!=="auto"||(Z=this.rendererType),Z==="svg"?new svg(Q,_):Z==="vml"?new vml(Q):Z==="canvas"?new canvas(Q,_):new no},_setAttributes:function(G,_){var J,Z,Q=utils_type.A.copyAttributes(G,_,"board"),ee=["drag","fullscreen","intl","keyboard","logging","pan","resize","screenshot","selection","zoom"],te=ee.length;for(J=0;J<te;J++)Q[Z=ee[J]]=utils_type.A.copyAttributes(Q,_,"board",Z);return Q.navbar=utils_type.A.copyAttributes(Q.navbar,_,"navbar"),Q.movetarget=G.moveTarget||G.movetarget||_.board.moveTarget,Q},_fillBoard:function(G,_,J){G.initInfobox(_.infobox),G.maxboundingbox=_.maxboundingbox,G.resizeContainer(J.width,J.height,!0,!0),G._createSelectionPolygon(_),G.renderer.drawNavigationBar(G,_.navbar),jxg.A.boards[G.id]=G},_setARIA:function(G,_){var J,Z=_.document;if(typeof Z!="object"){if(!env.A.isBrowser)return;Z=document}(J=utils_type.A.isString(G)?Z.getElementById(G):G).setAttribute("role","region"),J.setAttribute("aria-label",_.title)},_removeARIANodes:function(G){var _,J,Z;typeof(Z=G.document||document)=="object"&&(J=G.containerObj.getAttribute("aria-labelledby"),(_=Z.getElementById(J))&&_.parentNode&&_.parentNode.removeChild(_),J=G.containerObj.getAttribute("aria-describedby"),(_=Z.getElementById(J))&&_.parentNode&&_.parentNode.removeChild(_))},initBoard:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue,de,pe,fe=0,_e=0,ye={};return(_=_||{}).theme!=="default"&&utils_type.A.exists(jxg.A.themes[_.theme])&&(ye=jxg.A.themes[_.theme]),de=utils_type.A.deepCopy(src_options.A,ye,!0),se=this._setAttributes(_,de),re=env.A.getDimensions(G,se.document),se.unitx||se.unity?(J=utils_type.A.def(se.originx,150),Z=utils_type.A.def(se.originy,150),Q=utils_type.A.def(se.unitx,50),ee=utils_type.A.def(se.unity,50)):((oe=se.boundingbox)[0]<se.maxboundingbox[0]&&(oe[0]=se.maxboundingbox[0]),oe[1]>se.maxboundingbox[1]&&(oe[1]=se.maxboundingbox[1]),oe[2]>se.maxboundingbox[2]&&(oe[2]=se.maxboundingbox[2]),oe[3]<se.maxboundingbox[3]&&(oe[3]=se.maxboundingbox[3]),te=parseInt(re.width,10),ne=parseInt(re.height,10),utils_type.A.exists(oe)&&se.keepaspectratio?(Q=te/(oe[2]-oe[0]),ee=ne/(oe[1]-oe[3]),Math.abs(Q)<Math.abs(ee)?_e=.5*(ne/(ee=Math.abs(Q)*ee/Math.abs(ee))-(oe[1]-oe[3])):fe=.5*(te/(Q=Math.abs(ee)*Q/Math.abs(Q))-(oe[2]-oe[0]))):(Q=te/(oe[2]-oe[0]),ee=ne/(oe[1]-oe[3])),J=-Q*(oe[0]-fe),Z=ee*(oe[1]+_e)),ie=this.initRenderer(G,re,se.document,se.renderer),this._setARIA(G,se),(pe=new base_board(G,ie,se.id,[J,Z],se.zoomx,se.zoomy,Q,ee,re.width,re.height,se)).keepaspectratio=se.keepaspectratio,this._fillBoard(pe,se,re),pe.suspendUpdate(),(se=pe.attr).axis&&(ae=typeof se.axis=="object"?se.axis:{},le=utils_type.A.deepCopy(de.board.defaultaxes.x,ae),ue=utils_type.A.deepCopy(de.board.defaultaxes.y,ae),se.defaultaxes.x&&(le=utils_type.A.deepCopy(le,se.defaultaxes.x)),se.defaultaxes.y&&(ue=utils_type.A.deepCopy(ue,se.defaultaxes.y)),pe.defaultAxes={},pe.defaultAxes.x=pe.create("axis",[[0,0],[1,0]],le),pe.defaultAxes.y=pe.create("axis",[[0,0],[0,1]],ue)),se.grid&&pe.create("grid",[],typeof se.grid=="object"?se.grid:{}),pe.unsuspendUpdate(),pe},loadBoardFromFile:function(G,_,J,Z,Q){var ee,te,ne,ie,re;return Z=Z||{},ee=this._setAttributes(Z),ie=env.A.getDimensions(G,ee.document),te=this.initRenderer(G,ie,ee.document,ee.renderer),this._setARIA(G,ee),ne=new base_board(G,te,"",[150,150],1,1,50,50,ie.width,ie.height,ee),this._fillBoard(ne,ee,ie),re=ee.encoding||"iso-8859-1",reader_file.parseFileContent(_,ne,J,!0,re,Q),ne},loadBoardFromString:function(G,_,J,Z,Q){var ee,te,ne,ie;return Z=Z||{},ee=this._setAttributes(Z),ie=env.A.getDimensions(G,ee.document),te=this.initRenderer(G,ie,ee.document,ee.renderer),this._setARIA(G,ee),ne=new base_board(G,te,"",[150,150],1,1,50,50,ie.width,ie.height,ee),this._fillBoard(ne,ee,ie),reader_file.parseString(_,ne,J,!0,Q),ne},freeBoard:function(G){var _;for(_ in typeof G=="string"&&(G=jxg.A.boards[G]),this._removeARIANodes(G),G.removeEventHandlers(),G.suspendUpdate(),G.objects)G.objects.hasOwnProperty(_)&&G.objects[_].remove();for(;G.containerObj.firstChild;)G.containerObj.removeChild(G.containerObj.firstChild);for(_ in G.objects)G.objects.hasOwnProperty(_)&&delete G.objects[_];delete G.renderer,G.jc.creator.clearCache(),delete G.jc,delete jxg.A.boards[G.id]},registerElement:function(G,_){jxg.A.deprecated("JXG.JSXGraph.registerElement()","JXG.registerElement()"),jxg.A.registerElement(G,_)}},env.A.isBrowser&&typeof window=="object"&&typeof document=="object"&&env.A.addEvent(window,"load",function(){var G,_,J,Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue,de,pe,fe,_e=!1,ye=document.getElementsByTagName("script"),be=function(Ce,Ee,Re){var Te=jxg.A.JSXGraph.initBoard(Q,{boundingbox:Re,keepaspectratio:!0,grid:ue,axis:le,showReload:!0});if(Ee.toLowerCase().indexOf("script")>-1)Te.construct(Ce);else try{Te.jc.parse(Ce)}catch(Me){jxg.A.debug(Me)}return Te},Ae=function(Ce,Ee,Re,Te){return function(){var Me;jxg.A.JSXGraph.freeBoard(Ce),(Me=be(Ee,Re,Te)).reload=Ae(Me,Ee,Re,Te)}};for(_=0;_<ye.length;_++)if(G=ye[_].getAttribute("type",!1),utils_type.A.exists(G)&&(G.toLowerCase()==="text/jessiescript"||G.toLowerCase()==="jessiescript"||G.toLowerCase()==="text/jessiecode"||G.toLowerCase()==="jessiecode")){if(se=ye[_].getAttribute("class",!1)||"",ne=ye[_].getAttribute("width",!1)||"",ie=ye[_].getAttribute("height",!1)||"",re=ye[_].getAttribute("maxwidth",!1)||"100%",oe=ye[_].getAttribute("aspectratio",!1)||"1/1",ae=ye[_].getAttribute("boundingbox",!1)||"-5, 5, 5, -5",Q=ye[_].getAttribute("container",!1),pe=ye[_].getAttribute("src",!1),(ae=ae.split(",")).length!==4)ae=[-5,5,5,-5];else for(J=0;J<ae.length;J++)ae[J]=parseFloat(ae[J]);if(le=utils_type.A.str2Bool(ye[_].getAttribute("axis",!1)||"false"),ue=utils_type.A.str2Bool(ye[_].getAttribute("grid",!1)||"false"),utils_type.A.exists(Q))Z=document.getElementById(Q);else{Q="jessiescript_autgen_jxg_"+_,(Z=document.createElement("div")).setAttribute("id",Q),te=ne!==""?"width:"+ne+";":"",te+=ie!==""?"height:"+ie+";":"",te+=re!==""?"max-width:"+re+";":"",te+=oe!==""?"aspect-ratio:"+oe+";":"",Z.setAttribute("style",te),Z.setAttribute("class","jxgbox "+se);try{document.body.insertBefore(Z,ye[_])}catch{utils_type.A.exists(jQuery)&&typeof jQuery=="object"&&jQuery(Z).insertBefore(ye[_])}}de="",utils_type.A.exists(pe)?(_e=!0,(fe=new XMLHttpRequest).open("GET",pe),fe.overrideMimeType("text/plain; charset=x-user-defined"),fe.addEventListener("load",function(){if(!(this.status<400))throw new Error(`
JSXGraph: failed to load file`,pe,":",this.responseText);de=this.responseText+`
`+de,(ee=be(de,G,ae)).reload=Ae(ee,de,G,ae)}),fe.addEventListener("error",function(Ce){throw new Error(`
JSXGraph: failed to load file`,pe,":",Ce)}),fe.send()):_e=!1,document.getElementById(Q)?(de=(de=ye[_].innerHTML).replace(/<!\[CDATA\[/g,"").replace(/\]\]>/g,""),ye[_].innerHTML=de,_e||((ee=be(de,G,ae)).reload=Ae(ee,de,G,ae))):jxg.A.debug("JSXGraph: Apparently the div injection failed. Can't create a board, sorry.")}},window),jxg.A.JSXGraph;var base_element=__webpack_require__(144),coordselement=__webpack_require__(102);jxg.A.Point=function(G,_,J){this.constructor(G,J,constants.A.OBJECT_TYPE_POINT,constants.A.OBJECT_CLASS_POINT),this.element=this.board.select(J.anchor),this.coordsConstructor(_),this.elType="point",this.id=this.board.setId(this,"P"),this.board.renderer.drawPoint(this),this.board.finalizeAdding(this),this.createGradient(),this.createLabel()},jxg.A.Point.prototype=new base_element.A,utils_type.A.copyPrototypeMethods(jxg.A.Point,coordselement.A,"coordsConstructor"),jxg.A.extend(jxg.A.Point.prototype,{hasPoint:function(G,_){var J,Z,Q,ee=this.coords.scrCoords,te=this.evalVisProp("sizeunit");return utils_type.A.isObject(this.evalVisProp("precision"))?(Q=this.board._inputDevice,Z=this.evalVisProp("precision."+Q)):Z=this.board.options.precision.hasPoint,J=parseFloat(this.evalVisProp("size")),te==="user"&&(J*=Math.sqrt(Math.abs(this.board.unitX*this.board.unitY))),(J+=.5*parseFloat(this.evalVisProp("strokewidth")))<Z&&(J=Z),Math.abs(ee[1]-G)<J+2&&Math.abs(ee[2]-_)<J+2},update:function(G){return this.needsUpdate?(this.updateCoords(G),this.evalVisProp("trace")&&this.cloneToBackground(!0),this):this},updateTransform:function(G){var _,J;if(this.transformations.length===0||this.baseElement===null)return this;for(this.transformations[0].update(),_=this===this.baseElement?this.transformations[0].apply(this,"self"):this.transformations[0].apply(this.baseElement),J=1;J<this.transformations.length;J++)this.transformations[J].update(),_=math.A.matVecMult(this.transformations[J].matrix,_);return this.coords.setCoordinates(constants.A.COORDS_BY_USER,_),this},updateRenderer:function(){return this.updateRendererGeneric("updatePoint"),this},bounds:function(){return this.coords.usrCoords.slice(1).concat(this.coords.usrCoords.slice(1))},makeIntersection:function(G,_,J,Z){var Q;G=this.board.select(G),_=this.board.select(_),Q=geometry.A.intersectionFunction(this.board,G,_,J,Z,this.visProp.alwaysintersect),this.addConstraint([Q]);try{G.addChild(this),_.addChild(this)}catch{throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof G+"' and '"+typeof _+"'.")}this.type=constants.A.OBJECT_TYPE_INTERSECTION,this.elType="intersection",this.parents=[G.id,_.id,J,Z],this.generatePolynomial=function(){var ee=G.generatePolynomial(this),te=_.generatePolynomial(this);return ee.length===0||te.length===0?[]:[ee[0],te[0]]},this.prepareUpdate().update()},setStyle:function(G){return this.visProp.face=["cross","cross","cross","circle","circle","circle","circle","square","square","square","plus","plus","plus"][G],this.visProp.size=[2,3,4,1,2,3,4,2,3,4,2,3,4][G],this.board.renderer.changePointStyle(this),this},normalizeFace:function(G){return jxg.A.deprecated("Point.normalizeFace()","JXG.normalizePointFace()"),src_options.A.normalizePointFace(G)},face:function(G){jxg.A.deprecated("Point.face()","Point.setAttribute()"),this.setAttribute({face:G})},size:function(G){jxg.A.deprecated("Point.size()","Point.setAttribute()"),this.setAttribute({size:G})},isOn:function(G,_){var J,Z;return _=_||math.A.eps,utils_type.A.isPoint(G)?this.Dist(G)<_:G.elementClass===constants.A.OBJECT_CLASS_LINE?(G.elType!=="segment"||this.evalVisProp("alwaysintersect")||(J=jxg.A.Math.Geometry.projectCoordsToSegment(this.coords.usrCoords,G.point1.coords.usrCoords,G.point2.coords.usrCoords))[1]>=0&&J[1]<=1)&&geometry.A.distPointLine(this.coords.usrCoords,G.stdform)<_:G.elementClass===constants.A.OBJECT_CLASS_CIRCLE?G.evalVisProp("hasinnerpoints")?this.Dist(G.center)<G.Radius()+_:Math.abs(this.Dist(G.center)-G.Radius())<_:G.elementClass===constants.A.OBJECT_CLASS_CURVE?(Z=geometry.A.projectPointToCurve(this,G,this.board)[0],geometry.A.distance(this.coords.usrCoords,Z.usrCoords,3)<_):G.type===constants.A.OBJECT_TYPE_POLYGON?!(!G.evalVisProp("hasinnerpoints")||!G.pnpoly(this.coords.usrCoords[1],this.coords.usrCoords[2],jxg.A.COORDS_BY_USER))||(J=geometry.A.projectCoordsToPolygon(this.coords.usrCoords,G),geometry.A.distance(this.coords.usrCoords,J,3)<_):G.type===constants.A.OBJECT_TYPE_TURTLE&&(Z=geometry.A.projectPointToTurtle(this,G,this.board),geometry.A.distance(this.coords.usrCoords,Z.usrCoords,3)<_)},cloneToBackground:function(){var G=utils_type.A.getCloneObject(this);return this.board.renderer.drawPoint(G),this.traces[G.id]=G.rendNode,this}}),jxg.A.createPoint=function(G,_,J){var Z,Q;if(Q=utils_type.A.copyAttributes(J,G.options,"point"),!(Z=coordselement.A.create(jxg.A.Point,G,_,Q)))throw new Error("JSXGraph: Can't create point with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [x,y], [z,x,y], [element,transformation]`);return Z},jxg.A.createGlider=function(G,_,J){var Z,Q,ee=utils_type.A.copyAttributes(J,G.options,"glider");return Q=_.length===1?[0,0]:_.slice(0,2),(Z=G.create("point",Q,ee)).makeGlider(_[_.length-1]),Z},jxg.A.createIntersectionPoint=function(G,_,J){var Z,Q,ee,te,ne,ie,re=utils_type.A.copyAttributes(J,G.options,"intersection");_.push(0,0),Q=G.select(_[0]),ee=G.select(_[1]),ne=_[2]||0,ie=_[3]||0,Z=G.create("point",[0,0,0],re),te=geometry.A.intersectionFunction(G,Q,ee,ne,ie,Z.visProp.alwaysintersect),Z.addConstraint([te]);try{Q.addChild(Z),ee.addChild(Z)}catch{throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"'.")}return Z.type=constants.A.OBJECT_TYPE_INTERSECTION,Z.elType="intersection",Z.setParents([Q.id,ee.id]),Z.intersectionNumbers=[ne,ie],Z.getParents=function(){return this.parents.concat(this.intersectionNumbers)},Z.generatePolynomial=function(){var oe=Q.generatePolynomial(Z),se=ee.generatePolynomial(Z);return oe.length===0||se.length===0?[]:[oe[0],se[0]]},Z},jxg.A.createOtherIntersectionPoint=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe=!0,se=utils_type.A.copyAttributes(J,G.options,"otherintersection");if(_.length!==3)oe=!1;else{for(Q=G.select(_[0]),ee=G.select(_[1]),ne=utils_type.A.isArray(_[2])?_[2]:[_[2]],te=0;te<ne.length;te++)if(ne[te]=G.select(ne[te]),!utils_type.A.isPoint(ne[te])){oe=!1;break}oe&&((re=[Q,ee]).sort(function(ae,le){return le.elementClass-ae.elementClass}),([constants.A.OBJECT_CLASS_CIRCLE,constants.A.OBJECT_CLASS_CURVE].indexOf(re[0].elementClass)<0||[constants.A.OBJECT_CLASS_CIRCLE,constants.A.OBJECT_CLASS_CURVE,constants.A.OBJECT_CLASS_LINE].indexOf(re[1].elementClass)<0)&&(oe=!1))}if(!oe)throw new Error("JSXGraph: Can't create 'other intersection point' with parent types '"+typeof _[0]+"',  '"+typeof _[1]+"'and  '"+typeof _[2]+`'.
Possible parent types: [circle|curve|line,circle|curve|line, point], not two lines`);return Z=G.create("point",[0,0,0],se),ie=geometry.A.otherIntersectionFunction(re,ne,Z.visProp.alwaysintersect,Z.visProp.precision),Z.addConstraint([ie]),Z.type=constants.A.OBJECT_TYPE_INTERSECTION,Z.elType="otherintersection",Z.setParents([Q.id,ee.id]),Z.addParents(ne),Q.addChild(Z),ee.addChild(Z),Q.elementClass===constants.A.OBJECT_CLASS_CIRCLE&&(Z.generatePolynomial=function(){var ae=Q.generatePolynomial(Z),le=ee.generatePolynomial(Z);return ae.length===0||le.length===0?[]:[ae[0],le[0]]}),Z},jxg.A.createPolePoint=function(G,_,J){var Z,Q,ee,te,ne,ie,re;if(_.length>1&&(te=_[0].type===constants.A.OBJECT_TYPE_CONIC||_[0].elementClass===constants.A.OBJECT_CLASS_CIRCLE,ne=_[1].type===constants.A.OBJECT_TYPE_CONIC||_[1].elementClass===constants.A.OBJECT_CLASS_CIRCLE,ie=_[0].elementClass===constants.A.OBJECT_CLASS_LINE,re=_[1].elementClass===constants.A.OBJECT_CLASS_LINE),_.length!==2||!(te&&re||ie&&ne))throw new Error("JSXGraph: Can't create 'pole point' with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent type: [conic|circle,line], [line,conic|circle]`);return re?(Q=G.select(_[0]),ee=G.select(_[1])):(Q=G.select(_[1]),ee=G.select(_[0])),(Z=G.create("point",[function(){var oe=Q.quadraticform,se=ee.stdform.slice(0,3);return[jxg.A.Math.Numerics.det([se,oe[1],oe[2]]),jxg.A.Math.Numerics.det([oe[0],se,oe[2]]),jxg.A.Math.Numerics.det([oe[0],oe[1],se])]}],J)).elType="polepoint",Z.setParents([Q.id,ee.id]),Q.addChild(Z),ee.addChild(Z),Z},jxg.A.registerElement("point",jxg.A.createPoint),jxg.A.registerElement("glider",jxg.A.createGlider),jxg.A.registerElement("intersection",jxg.A.createIntersectionPoint),jxg.A.registerElement("otherintersection",jxg.A.createOtherIntersectionPoint),jxg.A.registerElement("polepoint",jxg.A.createPolePoint);var point=jxg.A.Point;jxg.A.Line=function(G,_,J,Z){this.constructor(G,Z,constants.A.OBJECT_TYPE_LINE,constants.A.OBJECT_CLASS_LINE),this.point1=this.board.select(_),this.point2=this.board.select(J),this.ticks=[],this.defaultTicks=null,this.parentPolygon=null,this.id=this.board.setId(this,"L"),this.board.renderer.drawLine(this),this.board.finalizeAdding(this),this.elType="line",this.point1._is_new?(this.addChild(this.point1),delete this.point1._is_new):this.point1.addChild(this),this.point2._is_new?(this.addChild(this.point2),delete this.point2._is_new):this.point2.addChild(this),this.inherits.push(this.point1,this.point2),this.updateStdform(),this.createLabel(),this.methodMap=jxg.A.deepCopy(this.methodMap,{point1:"point1",point2:"point2",getSlope:"Slope",Slope:"Slope",Direction:"Direction",getRise:"getRise",Rise:"getRise",getYIntersect:"getRise",YIntersect:"getRise",getAngle:"getAngle",Angle:"getAngle",L:"L",length:"L",setFixedLength:"setFixedLength",setStraight:"setStraight"})},jxg.A.Line.prototype=new base_element.A,jxg.A.extend(jxg.A.Line.prototype,{hasPoint:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se=[],ae=[1,G,_],le=this.evalVisProp("strokewidth");return utils_type.A.isObject(this.evalVisProp("precision"))?(oe=this.board._inputDevice,re=this.evalVisProp("precision."+oe)):re=this.board.options.precision.hasPoint,re+=.5*le,se[0]=this.stdform[0]-this.stdform[1]*this.board.origin.scrCoords[1]/this.board.unitX+this.stdform[2]*this.board.origin.scrCoords[2]/this.board.unitY,se[1]=this.stdform[1]/this.board.unitX,se[2]=this.stdform[2]/-this.board.unitY,J=geometry.A.distPointLine(ae,se),!(isNaN(J)||J>re)&&(!(!this.evalVisProp("straightfirst")||!this.evalVisProp("straightlast"))||(Q=this.point1.coords,ee=this.point2.coords,Z=[0,se[1],se[2]],Z=math.A.crossProduct(Z,ae),(Z=math.A.crossProduct(Z,se))[1]/=Z[0],Z[2]/=Z[0],Z[0]=1,Z=new base_coords.A(constants.A.COORDS_BY_SCREEN,Z.slice(1),this.board).usrCoords,te=Q.distance(constants.A.COORDS_BY_USER,ee),Q=Q.usrCoords.slice(0),ee=ee.usrCoords.slice(0),te<math.A.eps?ne=0:(te===Number.POSITIVE_INFINITY&&(te=1/math.A.eps,Math.abs(ee[0])<math.A.eps?(te/=geometry.A.distance([0,0,0],ee),ee=[1,Q[1]+ee[1]*te,Q[2]+ee[2]*te]):(te/=geometry.A.distance([0,0,0],Q),Q=[1,ee[1]+Q[1]*te,ee[2]+Q[2]*te])),te=ee[ie=1]-Q[ie],Math.abs(te)<math.A.eps&&(te=ee[ie=2]-Q[ie]),ne=(Z[ie]-Q[ie])/te),!(!this.evalVisProp("straightfirst")&&ne<0)&&!(!this.evalVisProp("straightlast")&&ne>1)))},update:function(){var G;return this.needsUpdate?(this.constrained&&(utils_type.A.isFunction(this.funps)?(G=this.funps())&&G.length&&G.length===2&&(this.point1=G[0],this.point2=G[1]):(utils_type.A.isFunction(this.funp1)&&(G=this.funp1(),utils_type.A.isPoint(G)?this.point1=G:G&&G.length&&G.length===2&&this.point1.setPositionDirectly(constants.A.COORDS_BY_USER,G)),utils_type.A.isFunction(this.funp2)&&(G=this.funp2(),utils_type.A.isPoint(G)?this.point2=G:G&&G.length&&G.length===2&&this.point2.setPositionDirectly(constants.A.COORDS_BY_USER,G)))),this.updateSegmentFixedLength(),this.updateStdform(),this.evalVisProp("trace")&&this.cloneToBackground(!0),this):this},updateSegmentFixedLength:function(){var G,_,J,Z,Q,ee,te,ne;return this.hasFixedLength?(G=this.point1.Dist(this.point2),_=this.evalVisProp("nonnegativeonly")?Math.max(0,this.fixedLength()):Math.abs(this.fixedLength()),J=this.fixedLengthOldCoords[0].distance(constants.A.COORDS_BY_USER,this.point1.coords),Z=this.fixedLengthOldCoords[1].distance(constants.A.COORDS_BY_USER,this.point2.coords),(J>math.A.eps||Z>math.A.eps||G!==_)&&(Q=this.point1.isDraggable&&this.point1.type!==constants.A.OBJECT_TYPE_GLIDER&&!this.point1.evalVisProp("fixed"),ee=this.point2.isDraggable&&this.point2.type!==constants.A.OBJECT_TYPE_GLIDER&&!this.point2.evalVisProp("fixed"),G>math.A.eps?J>Z&&ee||J<=Z&&ee&&!Q?(this.point2.setPositionDirectly(constants.A.COORDS_BY_USER,[this.point1.X()+(this.point2.X()-this.point1.X())*_/G,this.point1.Y()+(this.point2.Y()-this.point1.Y())*_/G]),this.point2.fullUpdate()):(J<=Z&&Q||J>Z&&Q&&!ee)&&(this.point1.setPositionDirectly(constants.A.COORDS_BY_USER,[this.point2.X()+(this.point1.X()-this.point2.X())*_/G,this.point2.Y()+(this.point1.Y()-this.point2.Y())*_/G]),this.point1.fullUpdate()):(te=Math.random()-.5,ne=Math.random()-.5,G=math.A.hypot(te,ne),ee?(this.point2.setPositionDirectly(constants.A.COORDS_BY_USER,[this.point1.X()+te*_/G,this.point1.Y()+ne*_/G]),this.point2.fullUpdate()):Q&&(this.point1.setPositionDirectly(constants.A.COORDS_BY_USER,[this.point2.X()+te*_/G,this.point2.Y()+ne*_/G]),this.point1.fullUpdate())),this.fixedLengthOldCoords[0].setCoordinates(constants.A.COORDS_BY_USER,this.point1.coords.usrCoords),this.fixedLengthOldCoords[1].setCoordinates(constants.A.COORDS_BY_USER,this.point2.coords.usrCoords)),this):this},updateStdform:function(){var G=math.A.crossProduct(this.point1.coords.usrCoords,this.point2.coords.usrCoords);this.stdform[0]=G[0],this.stdform[1]=G[1],this.stdform[2]=G[2],this.stdform[3]=0,this.normalize()},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.point1.coords.usrCoords[1]+this.point1.coords.usrCoords[2]+this.point2.coords.usrCoords[1]+this.point2.coords.usrCoords[2])&&math.A.innerProduct(this.stdform,this.stdform,3)>=math.A.eps*math.A.eps,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateLine(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},generatePolynomial:function(G){var _=this.point1.symbolic.x,J=this.point1.symbolic.y,Z=this.point2.symbolic.x,Q=this.point2.symbolic.y,ee=G.symbolic.x,te=G.symbolic.y;return[["(",J,")*(",ee,")-(",J,")*(",Z,")+(",te,")*(",Z,")-(",_,")*(",te,")+(",_,")*(",Q,")-(",ee,")*(",Q,")"].join("")]},getRise:function(){return Math.abs(this.stdform[2])>=math.A.eps?-this.stdform[0]/this.stdform[2]:1/0},Slope:function(){return Math.abs(this.stdform[2])>=math.A.eps?-this.stdform[1]/this.stdform[2]:1/0},getSlope:function(){return this.Slope()},getAngle:function(){return Math.atan2(-this.stdform[1],this.stdform[2])},Direction:function(){var G=this.point1.coords.usrCoords,_=this.point2.coords.usrCoords;return _[0]===0&&G[0]!==0?_.slice(1):G[0]===0&&_[0]!==0?[-G[1],-G[2]]:[_[1]-G[1],_[2]-G[2]]},isVertical:function(){var G=this.Direction();return G[0]===0&&G[1]!==0},isHorizontal:function(){var G=this.Direction();return G[1]===0&&G[0]!==0},setStraight:function(G,_){return this.visProp.straightfirst=G,this.visProp.straightlast=_,this.board.renderer.updateLine(this),this},getTextAnchor:function(){return new base_coords.A(constants.A.COORDS_BY_USER,[.5*(this.point2.X()+this.point1.X()),.5*(this.point2.Y()+this.point1.Y())],this.board)},setLabelRelativeCoords:function(G){utils_type.A.exists(this.label)&&(this.label.relativeCoords=new base_coords.A(constants.A.COORDS_BY_SCREEN,[G[0],-G[1]],this.board))},getLabelAnchor:function(){var G,_,J,Z,Q,ee,te,ne,ie=1.5,re=0,oe=new base_coords.A(constants.A.COORDS_BY_USER,this.point1.coords.usrCoords,this.board),se=new base_coords.A(constants.A.COORDS_BY_USER,this.point2.coords.usrCoords,this.board),ae=this.evalVisProp("straightfirst"),le=this.evalVisProp("straightlast");if((ae||le)&&geometry.A.calcStraight(this,oe,se,0),oe=oe.scrCoords,se=se.scrCoords,!utils_type.A.exists(this.label))return new base_coords.A(constants.A.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(J=this.label.evalVisProp("position"),!utils_type.A.isString(J))return new base_coords.A(constants.A.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(J.indexOf("right")<0&&J.indexOf("left")<0)switch(J){case"last":G=se[1],_=se[2];break;case"first":G=oe[1],_=oe[2];break;case"lft":case"llft":case"ulft":oe[1]<se[1]+math.A.eps?(G=oe[1],_=oe[2]):(G=se[1],_=se[2]);break;case"rt":case"lrt":case"urt":oe[1]>se[1]+math.A.eps?(G=oe[1],_=oe[2]):(G=se[1],_=se[2]);break;default:G=.5*(oe[1]+se[1]),_=.5*(oe[2]+se[2])}else Z=utils_type.A.parsePosition(J),Q=utils_type.A.parseNumber(Z.pos,1,1),ee=se[1]-oe[1],te=se[2]-oe[2],ne=math.A.hypot(ee,te),Z.pos.indexOf("px")>=0||Z.pos.indexOf("fr")>=0||Z.pos.indexOf("%")>=0?(Z.pos.indexOf("px")>=0&&(Q/=ne),G=oe[1]+Q*ee,_=oe[2]+Q*te):(G=oe[1]+Q*this.board.unitX*ee/ne,_=oe[2]+Q*this.board.unitY*te/ne),Z.side==="left"?ee*=-1:te*=-1,utils_type.A.exists(this.label)&&(ie=.5*this.label.evalVisProp("distance")/ne),G+=te*this.label.size[0]*ie,_+=ee*this.label.size[1]*ie;return(ae||le)&&(utils_type.A.exists(this.label)&&(re=this.label.evalVisProp("fontsize")),Math.abs(G)<math.A.eps?G=re:this.board.canvasWidth+math.A.eps>G&&G>this.board.canvasWidth-re-math.A.eps&&(G=this.board.canvasWidth-re),math.A.eps+re>_&&_>-math.A.eps?_=re:this.board.canvasHeight+math.A.eps>_&&_>this.board.canvasHeight-re-math.A.eps&&(_=this.board.canvasHeight-re)),new base_coords.A(constants.A.COORDS_BY_SCREEN,[G,_],this.board)},cloneToBackground:function(){var G,_,J,Z=utils_type.A.getCloneObject(this);return Z.point1=this.point1,Z.point2=this.point2,Z.stdform=this.stdform,_=this.getSlope(),G=this.getRise(),Z.getSlope=function(){return _},Z.getRise=function(){return G},J=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawLine(Z),this.board.renderer.enhancedRendering=J,this.traces[Z.id]=Z.rendNode,this},addTransform:function(G){var _,J=utils_type.A.isArray(G)?G:[G],Z=J.length;for(_=0;_<Z;_++)this.point1.transformations.push(J[_]),this.point2.transformations.push(J[_]);return this},snapToGrid:function(G){var _,J,Z,Q,ee,te,ne,ie;return this.evalVisProp("snaptogrid")?this.parents.length<3?(this.point1.handleSnapToGrid(!0,!0),this.point2.handleSnapToGrid(!0,!0)):utils_type.A.exists(G)&&(ne=this.evalVisProp("snapsizex"),ie=this.evalVisProp("snapsizey"),ee=(_=new base_coords.A(constants.A.COORDS_BY_SCREEN,[G.Xprev,G.Yprev],this.board)).usrCoords[1],te=_.usrCoords[2],ne<=0&&this.board.defaultAxes&&this.board.defaultAxes.x.defaultTicks&&(ne=(Q=this.board.defaultAxes.x.defaultTicks).ticksDelta*(Q.evalVisProp("minorticks")+1)),ie<=0&&this.board.defaultAxes&&this.board.defaultAxes.y.defaultTicks&&(ie=(Q=this.board.defaultAxes.y.defaultTicks).ticksDelta*(Q.evalVisProp("minorticks")+1)),ne>0&&ie>0&&(J=geometry.A.projectPointToLine({coords:_},this,this.board),Z=statistics.A.subtract([1,Math.round(ee/ne)*ne,Math.round(te/ie)*ie],J.usrCoords),this.board.create("transform",Z.slice(1),{type:"translate"}).applyOnce([this.point1,this.point2]))):(this.point1.handleSnapToGrid(!1,!0),this.point2.handleSnapToGrid(!1,!0)),this},snapToPoints:function(){var G=this.evalVisProp("snaptopoints");return this.parents.length<3&&(this.point1.handleSnapToPoints(G),this.point2.handleSnapToPoints(G)),this},X:function(G){var _=this.point1.coords.usrCoords,J=this.point2.coords.usrCoords,Z=this.stdform[2];return _[0]!==0?J[0]!==0?_[1]+(J[1]-_[1])*G:_[1]+1e5*Z*G:_[0]!==0?J[1]-(_[1]-J[1])*G:J[1]+1e5*Z*G},Y:function(G){var _=this.point1.coords.usrCoords,J=this.point2.coords.usrCoords,Z=this.stdform[1];return _[0]!==0?J[0]!==0?_[2]+(J[2]-_[2])*G:_[2]-1e5*Z*G:_[0]!==0?J[2]-(_[2]-J[2])*G:J[2]-1e5*Z*G},Z:function(G){var _=this.point1.coords.usrCoords,J=this.point2.coords.usrCoords;return G===1&&_[0]*J[0]===0?0:1},Ft:function(G){var _=[this.Z(G),this.X(G),this.Y(G)];return _[1]/=_[0],_[2]/=_[0],_[0]/=_[0],_},L:function(){return this.point1.Dist(this.point2)},setFixedLength:function(G){return this.hasFixedLength?(this.fixedLength=utils_type.A.createFunction(G,this.board),this.hasFixedLength=!0,this.addParentsFromJCFunctions([this.fixedLength]),this.board.update(),this):this},minX:function(){return 0},maxX:function(){return 1},bounds:function(){var G=this.point1.coords.usrCoords,_=this.point2.coords.usrCoords;return[Math.min(G[1],_[1]),Math.max(G[2],_[2]),Math.max(G[1],_[1]),Math.min(G[2],_[2])]},remove:function(){this.removeAllTicks(),base_element.A.prototype.remove.call(this)}}),jxg.A.createLine=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe=[],se=!1,ae=!1;if(_.length===2){if(ie=utils_type.A.copyAttributes(J,G.options,"line","point1"),utils_type.A.isArray(_[0])&&_[0].length>1)ee=G.create("point",_[0],ie);else if(utils_type.A.isString(_[0])||utils_type.A.isPoint(_[0]))ee=G.select(_[0]);else if(utils_type.A.isFunction(_[0])&&utils_type.A.isPoint(_[0]()))ee=_[0](),ae=!0;else if(utils_type.A.isFunction(_[0])&&_[0]().length&&_[0]().length>=2)ee=jxg.A.createPoint(G,_[0](),ie),ae=!0;else{if(!utils_type.A.isObject(_[0])||!utils_type.A.isTransformationOrArray(_[1]))throw new Error("JSXGraph: Can't create line with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]`);se=!0,ee=G.create("point",[_[0].point1,_[1]],ie)}if(ie=utils_type.A.copyAttributes(J,G.options,"line","point2"),se)te=G.create("point",[_[0].point2,_[1]],ie);else if(utils_type.A.isArray(_[1])&&_[1].length>1)te=G.create("point",_[1],ie);else if(utils_type.A.isString(_[1])||utils_type.A.isPoint(_[1]))te=G.select(_[1]);else if(utils_type.A.isFunction(_[1])&&utils_type.A.isPoint(_[1]()))te=_[1](),ae=!0;else{if(!(utils_type.A.isFunction(_[1])&&_[1]().length&&_[1]().length>=2))throw new Error("JSXGraph: Can't create line with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]`);te=jxg.A.createPoint(G,_[1](),ie),ae=!0}ie=utils_type.A.copyAttributes(J,G.options,"line"),Q=new jxg.A.Line(G,ee,te,ie),ae?(Q.constrained=!0,Q.funp1=_[0],Q.funp2=_[1]):se||(Q.isDraggable=!0),Q.setParents([ee.id,te.id])}else if(_.length===3){for(re=!0,ne=0;ne<3;ne++)if(utils_type.A.isNumber(_[ne]))oe[ne]=utils_type.A.createFunction(_[ne]);else{if(!utils_type.A.isFunction(_[ne]))throw new Error("JSXGraph: Can't create line with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]`);oe[ne]=_[ne],re=!1}ie=utils_type.A.copyAttributes(J,G.options,"line","point1"),ee=re?G.create("point",[oe[2]()*oe[2]()+oe[1]()*oe[1](),oe[2]()-oe[1]()*oe[0]()+oe[2](),-oe[1]()-oe[2]()*oe[0]()-oe[1]()],ie):G.create("point",[function(){return .5*(oe[2]()*oe[2]()+oe[1]()*oe[1]())},function(){return .5*(oe[2]()-oe[1]()*oe[0]()+oe[2]())},function(){return .5*(-oe[1]()-oe[2]()*oe[0]()-oe[1]())}],ie),ie=utils_type.A.copyAttributes(J,G.options,"line","point2"),te=re?G.create("point",[oe[2]()*oe[2]()+oe[1]()*oe[1](),-oe[1]()*oe[0]()+oe[2](),-oe[2]()*oe[0]()-oe[1]()],ie):G.create("point",[function(){return oe[2]()*oe[2]()+oe[1]()*oe[1]()},function(){return-oe[1]()*oe[0]()+oe[2]()},function(){return-oe[2]()*oe[0]()-oe[1]()}],ie),ee.prepareUpdate().update(),te.prepareUpdate().update(),ie=utils_type.A.copyAttributes(J,G.options,"line"),(Q=new jxg.A.Line(G,ee,te,ie)).isDraggable=re,Q.setParents([ee,te])}else if(_.length===1&&utils_type.A.isFunction(_[0])&&_[0]().length===2&&utils_type.A.isPoint(_[0]()[0])&&utils_type.A.isPoint(_[0]()[1]))Z=_[0](),ie=utils_type.A.copyAttributes(J,G.options,"line"),(Q=new jxg.A.Line(G,Z[0],Z[1],ie)).constrained=!0,Q.funps=_[0],Q.setParents(Z);else{if(!(_.length===1&&utils_type.A.isFunction(_[0])&&_[0]().length===3&&utils_type.A.isNumber(_[0]()[0])&&utils_type.A.isNumber(_[0]()[1])&&utils_type.A.isNumber(_[0]()[2])))throw new Error("JSXGraph: Can't create line with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]`);Z=_[0],ie=utils_type.A.copyAttributes(J,G.options,"line","point1"),ee=G.create("point",[function(){var le=Z();return[.5*(le[2]*le[2]+le[1]*le[1]),.5*(le[2]-le[1]*le[0]+le[2]),.5*(-le[1]-le[2]*le[0]-le[1])]}],ie),ie=utils_type.A.copyAttributes(J,G.options,"line","point2"),te=G.create("point",[function(){var le=Z();return[le[2]*le[2]+le[1]*le[1],-le[1]*le[0]+le[2],-le[2]*le[0]-le[1]]}],ie),ie=utils_type.A.copyAttributes(J,G.options,"line"),(Q=new jxg.A.Line(G,ee,te,ie)).constrained=!0,Q.funps=_[0],Q.setParents([ee,te])}return Q},jxg.A.registerElement("line",jxg.A.createLine),jxg.A.createSegment=function(G,_,J){var Z,Q;if(J.straightFirst=!1,J.straightLast=!1,Q=utils_type.A.copyAttributes(J,G.options,"segment"),Z=G.create("line",_.slice(0,2),Q),_.length===3){try{Z.hasFixedLength=!0,Z.fixedLengthOldCoords=[],Z.fixedLengthOldCoords[0]=new base_coords.A(constants.A.COORDS_BY_USER,Z.point1.coords.usrCoords.slice(1,3),G),Z.fixedLengthOldCoords[1]=new base_coords.A(constants.A.COORDS_BY_USER,Z.point2.coords.usrCoords.slice(1,3),G),Z.setFixedLength(_[2])}catch{throw new Error("JSXGraph: Can't create segment with third parent type '"+typeof _[2]+`'.
Possible third parent types: number or function`)}Z.getParents=function(){return this.parents.concat(this.fixedLength())}}return Z.elType="segment",Z},jxg.A.registerElement("segment",jxg.A.createSegment),jxg.A.createArrow=function(G,_,J){var Z,Q;return J.straightFirst=!1,J.straightLast=!1,Q=utils_type.A.copyAttributes(J,G.options,"arrow"),(Z=G.create("line",_,Q)).type=constants.A.OBJECT_TYPE_VECTOR,Z.elType="arrow",Z},jxg.A.registerElement("arrow",jxg.A.createArrow),jxg.A.createAxis=function(G,_,J){var Z,Q,ee,te;Q=utils_type.A.copyAttributes(J,G.options,"axis");try{Z=G.create("line",_,Q)}catch{throw new Error("JSXGraph: Can't create axis with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]]`)}for(ee in Z.type=constants.A.OBJECT_TYPE_AXIS,Z.isDraggable=!1,Z.point1.isDraggable=!1,Z.point2.isDraggable=!1,Z._point1UsrCoordsOrg=Z.point1.coords.usrCoords.slice(),Z._point2UsrCoordsOrg=Z.point2.coords.usrCoords.slice(),Z.ancestors)Z.ancestors.hasOwnProperty(ee)&&(Z.ancestors[ee].type=constants.A.OBJECT_TYPE_AXISPOINT);return te=utils_type.A.exists(Q.ticks.ticksdistance)?Q.ticks.ticksdistance:utils_type.A.isArray(Q.ticks.ticks)?Q.ticks.ticks:1,Z.defaultTicks=G.create("ticks",[Z,te],Q.ticks),Z.defaultTicks.dump=!1,Z.elType="axis",Z.subs={ticks:Z.defaultTicks},Z.inherits.push(Z.defaultTicks),Z.update=function(){var ne,ie,re,oe,se,ae,le,ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te;if(!this.needsUpdate)return this;if(ne=this.board.getBoundingBox(),ie=this.evalVisProp("position"),oe=this.Direction(),se=this.isHorizontal(),ae=this.isVertical(),le=this.evalVisProp("ticksautopos"),ue=this.evalVisProp("ticksautoposthreshold"),ue=se?utils_type.A.parseNumber(ue,Math.abs(ne[1]-ne[3]),1/this.board.unitX)*this.board.unitX:ae?utils_type.A.parseNumber(ue,Math.abs(ne[1]-ne[3]),1/this.board.unitY)*this.board.unitY:utils_type.A.parseNumber(ue,1,1),fe=(pe=this.evalVisProp("anchor")).indexOf("left")>-1,_e=pe.indexOf("right")>-1,ye=this.evalVisProp("anchordist"),ye=se?utils_type.A.parseNumber(ye,Math.abs(ne[1]-ne[3]),1/this.board.unitX):ae?utils_type.A.parseNumber(ye,Math.abs(ne[0]-ne[2]),1/this.board.unitY):0,Ce=this.board.getPointLoc(this._point1UsrCoordsOrg,ye),be=this.point1.coords.usrCoords.slice(),Ae=this.point2.coords.usrCoords.slice(),ie==="static"||!ae&&!se||(ie==="fixed"?(se&&(oe[0]>0&&_e||oe[0]<0&&fe?(be[2]=ne[3]+ye,Ae[2]=ne[3]+ye):oe[0]>0&&fe||oe[0]<0&&_e?(be[2]=ne[1]-ye,Ae[2]=ne[1]-ye):(be=this._point1UsrCoordsOrg.slice(),Ae=this._point2UsrCoordsOrg.slice())),ae&&(oe[1]>0&&fe||oe[1]<0&&_e?(be[1]=ne[0]+ye,Ae[1]=ne[0]+ye):oe[1]>0&&_e||oe[1]<0&&fe?(be[1]=ne[2]-ye,Ae[1]=ne[2]-ye):(be=this._point1UsrCoordsOrg.slice(),Ae=this._point2UsrCoordsOrg.slice()))):ie==="sticky"&&(se&&(Ce[1]<0&&(oe[0]>0&&_e||oe[0]<0&&fe)?(be[2]=ne[3]+ye,Ae[2]=ne[3]+ye):Ce[1]>0&&(oe[0]>0&&fe||oe[0]<0&&_e)?(be[2]=ne[1]-ye,Ae[2]=ne[1]-ye):(be=this._point1UsrCoordsOrg.slice(),Ae=this._point2UsrCoordsOrg.slice())),ae&&(Ce[0]<0&&(oe[1]>0&&fe||oe[1]<0&&_e)?(be[1]=ne[0]+ye,Ae[1]=ne[0]+ye):Ce[0]>0&&(oe[1]>0&&_e||oe[1]<0&&fe)?(be[1]=ne[2]-ye,Ae[1]=ne[2]-ye):(be=this._point1UsrCoordsOrg.slice(),Ae=this._point2UsrCoordsOrg.slice())))),this.point1.setPositionDirectly(jxg.A.COORDS_BY_USER,be),this.point2.setPositionDirectly(jxg.A.COORDS_BY_USER,Ae),utils_type.A.exists(this.defaultTicks)){if(Ee=this.defaultTicks.visProp.label,le&&(se||ae)){if(utils_type.A.exists(Ee._anchorx_org)||(Ee._anchorx_org=utils_type.A.def(Ee.anchorx,this.board.options.text.anchorX)),utils_type.A.exists(Ee._anchory_org)||(Ee._anchory_org=utils_type.A.def(Ee.anchory,this.board.options.text.anchorY)),utils_type.A.exists(Ee._offset_org)||(Ee._offset_org=Ee.offset.slice()),Te=Ee.offset,se){for(de=Z.point1.coords.scrCoords[2]-.5*this.board.canvasHeight,Re=Ee.anchory,de<0&&Math.abs(de)>ue?Ee._side==="bottom"&&(Ee.anchory==="top"&&(Re="bottom"),Te[1]*=-1,Ee._side="top"):de>0&&Math.abs(de)>ue?Ee._side==="top"&&(Ee.anchory==="bottom"&&(Re="top"),Te[1]*=-1,Ee._side="bottom"):(Re=Ee._anchory_org,Te=Ee._offset_org.slice(),Re==="top"?Ee._side="bottom":Re==="bottom"?Ee._side="top":Te[1]<0?Ee._side="bottom":Ee._side="top"),re=0;re<Z.defaultTicks.labels.length;re++)this.defaultTicks.labels[re].visProp.anchory=Re;Ee.anchory=Re}else if(ae){for((de=Z.point1.coords.scrCoords[1]-.5*this.board.canvasWidth)<0&&Math.abs(de)>ue?Ee._side==="right"&&(Ee.anchorx==="left"&&(Re="right"),Te[0]*=-1,Ee._side="left"):de>0&&Math.abs(de)>ue?Ee._side==="left"&&(Ee.anchorx==="right"&&(Re="left"),Te[0]*=-1,Ee._side="right"):(Re=Ee._anchorx_org,Te=Ee._offset_org.slice(),Re==="left"?Ee._side="right":Re==="right"||Te[0]<0?Ee._side="left":Ee._side="right"),re=0;re<Z.defaultTicks.labels.length;re++)this.defaultTicks.labels[re].visProp.anchorx=Re;Ee.anchorx=Re}Ee.offset=Te}else delete Ee._anchorx_org,delete Ee._anchory_org,delete Ee._offset_org;this.defaultTicks.needsUpdate=!0}return jxg.A.Line.prototype.update.call(this),this},Z},jxg.A.registerElement("axis",jxg.A.createAxis),jxg.A.createTangent=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae=[];if(_.length===1)Z=_[0],Q=Z.slideObject;else{if(_.length!==2)throw new Error("JSXGraph: Can't create tangent with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [glider|point], [point,line|curve|circle|conic]`);if(utils_type.A.isPoint(_[0]))Z=_[0],Q=_[1];else{if(!utils_type.A.isPoint(_[1]))throw new Error("JSXGraph: Can't create tangent with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [glider|point], [point,line|curve|circle|conic]`);Q=_[0],Z=_[1]}}if(ie=utils_type.A.copyAttributes(J,G.options,"tangent"),Q.elementClass===constants.A.OBJECT_CLASS_LINE)(ne=G.create("line",[Q.point1,Q.point2],ie)).glider=Z;else if(Q.elementClass===constants.A.OBJECT_CLASS_CURVE&&Q.type!==constants.A.OBJECT_TYPE_CONIC){if(oe=Q.getTransformationSource(),se=oe[0])for(ae.push(Q);oe[0]&&utils_type.A.exists(oe[1]._transformationSource);)ae.push(oe[1]),oe=oe[1].getTransformationSource();Q.evalVisProp("curvetype")!=="plot"||se?(ne=G.create("line",[function(){var le,ue,de,pe,fe,_e,ye,be,Ae=Q.X,Ce=Q.Y;if(be=Z.type===constants.A.OBJECT_TYPE_GLIDER?Z.position:Q.evalVisProp("curvetype")==="functiongraph"?Z.X():geometry.A.projectPointToCurve(Z,Q,G)[1],ye=Z.Coords(!0),se){for(Ae=(fe=ae[ae.length-1]._transformationSource).X,Ce=fe.Y,pe=0;pe<ae.length;pe++)ae[pe].updateTransformMatrix(),_e=math.A.inverse(ae[pe].transformMat),ye=math.A.matVecMult(_e,ye);Z.type!==constants.A.OBJECT_TYPE_GLIDER&&(ye[1]/=ye[0],ye[2]/=ye[0],ye[0]/=ye[0],be=geometry.A.projectCoordsToCurve(ye[1],ye[2],0,fe,G)[1])}if(le=numerics.A.D(Ce)(be),ue=numerics.A.D(Ae)(be),de=[-ye[1]*le+ye[2]*ue,ye[0]*le,-ye[0]*ue],se)for(pe=ae.length-1;pe>=0;pe--)_e=math.A.transpose(math.A.inverse(ae[pe].transformMat)),de=math.A.matVecMult(_e,de);return de}],ie),Z.addChild(ne),ne.glider=Z):(re=function(le,ue,de){var pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te,Me,Ne,Le=Math.floor(le);if(ue.bezierDegree===1)Le===ue.numberPoints-1&&Le--;else{if(ue.bezierDegree!==3)return 0;_e=(le*((Ne=ue.elType==="sector"?(Me=ue.points.slice(3,ue.numberPoints-3)).length:(Me=ue.points).length)-1)-(Le=3*Math.floor(le*(Ne-1)/3)))/3,Le>=Ne-1&&(Le=Ne-4,_e=1)}if(Le<0)return 1;switch(ue.bezierDegree===1?(pe=ue.points[Le].usrCoords,fe=ue.points[Le+1].usrCoords):(ye=Me[Le].usrCoords,be=Me[Le+1].usrCoords,Ae=Me[Le+2].usrCoords,Ce=Me[Le+3].usrCoords,Ee=(1-_e)*(1-_e)*(be[1]-ye[1])+2*(1-_e)*_e*(Ae[1]-be[1])+_e*_e*(Ce[1]-Ae[1]),Re=(1-_e)*(1-_e)*(be[2]-ye[2])+2*(1-_e)*_e*(Ae[2]-be[2])+_e*_e*(Ce[2]-Ae[2]),Ee/=Te=math.A.hypot(Ee,Re),Re/=Te,fe=[1,(pe=Z.coords.usrCoords)[1]+Ee,pe[2]+Re]),de){case 0:return pe[2]*fe[1]-pe[1]*fe[2];case 1:return fe[2]-pe[2];case 2:return pe[1]-fe[1];default:return[pe[2]*fe[1]-pe[1]*fe[2],fe[2]-pe[2],pe[1]-fe[1]]}},ne=G.create("line",[function(){var le;return le=Z.type===constants.A.OBJECT_TYPE_GLIDER?Z.position:geometry.A.projectPointToCurve(Z,Q,G)[1],re(le,Q)}],ie),Z.addChild(ne),ne.glider=Z)}else Q.type===constants.A.OBJECT_TYPE_TURTLE?(ne=G.create("line",[function(){var le,ue;for(ue=Z.type===constants.A.OBJECT_TYPE_GLIDER?Z.position:geometry.A.projectPointToTurtle(Z,Q,G)[1],le=Math.floor(ue),ee=0;ee<Q.objects.length;ee++)if((te=Q.objects[ee]).type===constants.A.OBJECT_TYPE_CURVE){if(le<te.numberPoints)break;le-=te.numberPoints}return le===te.numberPoints-1&&le--,le<0?[1,0,0]:[te.Y(le)*te.X(le+1)-te.X(le)*te.Y(le+1),te.Y(le+1)-te.Y(le),te.X(le)-te.X(le+1)]}],ie),Z.addChild(ne),ne.glider=Z):Q.elementClass!==constants.A.OBJECT_CLASS_CIRCLE&&Q.type!==constants.A.OBJECT_TYPE_CONIC||(ne=G.create("line",[function(){return math.A.matVecMult(Q.quadraticform,Z.coords.usrCoords)}],ie),Z.addChild(ne),ne.glider=Z);if(!utils_type.A.exists(ne))throw new Error("JSXGraph: Couldn't create tangent with the given parents.");return ne.elType="tangent",ne.type=constants.A.OBJECT_TYPE_TANGENT,ne.setParents(_),ne},jxg.A.createNormal=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,le=[];for(te=0;te<_.length;++te)_[te]=G.select(_[te]);if(_.length===1)Z=_[0],Q=Z.slideObject;else{if(_.length!==2)throw new Error("JSXGraph: Can't create normal with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,line], [point,circle], [glider]`);if(utils_type.A.isPointType(G,_[0]))Z=utils_type.A.providePoints(G,[_[0]],J,"point")[0],Q=_[1];else{if(!utils_type.A.isPointType(G,_[1]))throw new Error("JSXGraph: Can't create normal with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,line], [point,circle], [glider]`);Q=_[0],Z=utils_type.A.providePoints(G,[_[1]],J,"point")[0]}}if(ne=utils_type.A.copyAttributes(J,G.options,"normal"),Q.elementClass===constants.A.OBJECT_CLASS_LINE)re=utils_type.A.copyAttributes(J,G.options,"normal","point"),ie=G.create("point",[function(){var ue=math.A.crossProduct([1,0,0],Q.stdform);return[ue[0],-ue[2],ue[1]]}],re),ie.isDraggable=!0,(ee=G.create("line",[Z,ie],ne)).point=ie,ee.subs={point:ie},ee.inherits.push(ie);else if(Q.elementClass===constants.A.OBJECT_CLASS_CIRCLE)ee=G.create("line",[Q.midpoint,Z],ne);else if(Q.elementClass===constants.A.OBJECT_CLASS_CURVE){if(se=Q.getTransformationSource(),ae=se[0])for(le.push(Q);se[0]&&utils_type.A.exists(se[1]._transformationSource);)le.push(se[1]),se=se[1].getTransformationSource();Q.evalVisProp("curvetype")!=="plot"||ae?ee=G.create("line",[function(){var ue,de,pe,fe,_e,ye,be,Ae,Ce=Q.X,Ee=Q.Y;if(Ae=Z.type===constants.A.OBJECT_TYPE_GLIDER?Z.position:Q.evalVisProp("curvetype")==="functiongraph"?Z.X():geometry.A.projectPointToCurve(Z,Q,G)[1],be=Z.Coords(!0),ae){for(Ce=(_e=le[le.length-1]._transformationSource).X,Ee=_e.Y,fe=0;fe<le.length;fe++)le[fe].updateTransformMatrix(),ye=math.A.inverse(le[fe].transformMat),be=math.A.matVecMult(ye,be);Z.type!==constants.A.OBJECT_TYPE_GLIDER&&(be[1]/=be[0],be[2]/=be[0],be[0]/=be[0],Ae=geometry.A.projectCoordsToCurve(be[1],be[2],0,_e,G)[1])}if(ue=numerics.A.D(Ee)(Ae),de=numerics.A.D(Ce)(Ae),pe=[-be[1]*de-be[2]*ue,be[0]*de,be[0]*ue],ae)for(fe=le.length-1;fe>=0;fe--)ye=math.A.transpose(math.A.inverse(le[fe].transformMat)),pe=math.A.matVecMult(ye,pe);return pe}],ne):(oe=function(ue,de,pe){var fe,_e,ye,be,Ae,Ce,Ee,Re,Te,Me,Ne,Le,Ie,Ge,He,Be,ze=Math.floor(ue);if(de.bezierDegree===1)ze===de.numberPoints-1&&ze--,be=ue;else{if(de.bezierDegree!==3)return 0;be=(ue*((Be=de.elType==="sector"?(He=de.points.slice(3,de.numberPoints-3)).length:(He=de.points).length)-1)-(ze=3*Math.floor(ue*(Be-1)/3)))/3,ze>=Be-1&&(ze=Be-4,be=1)}if(ze<0)return 1;switch(fe=be-ze,de.bezierDegree===1?(_e=de.points[ze].usrCoords,ye=de.points[ze+1].usrCoords,Ie=[_e[0]+fe*(ye[0]-_e[0]),_e[1]+fe*(ye[1]-_e[1]),_e[2]+fe*(ye[2]-_e[2])],Le=math.A.crossProduct(_e,ye),Ge=[(Ge=math.A.crossProduct([1,0,0],Le))[0],-Ge[2],Ge[1]],Le=math.A.crossProduct(Ie,Ge)):(Ae=He[ze].usrCoords,Ce=He[ze+1].usrCoords,Ee=He[ze+2].usrCoords,Re=He[ze+3].usrCoords,Te=(1-be)*(1-be)*(Ce[1]-Ae[1])+2*(1-be)*be*(Ee[1]-Ce[1])+be*be*(Re[1]-Ee[1]),Me=(1-be)*(1-be)*(Ce[2]-Ae[2])+2*(1-be)*be*(Ee[2]-Ce[2])+be*be*(Re[2]-Ee[2]),Te/=Ne=math.A.hypot(Te,Me),Me/=Ne,ye=[1,(_e=Z.coords.usrCoords)[1]-Me,_e[2]+Te],Le=[_e[2]*ye[1]-_e[1]*ye[2],ye[2]-_e[2],_e[1]-ye[1]]),pe){case 0:return Le[0];case 1:return Le[1];case 2:return Le[2];default:return Le}},ee=G.create("line",[function(){var ue;return ue=Z.type===constants.A.OBJECT_TYPE_GLIDER?Z.position:geometry.A.projectPointToCurve(Z,Q,G)[1],oe(ue,Q)}],ne),Z.addChild(ee),ee.glider=Z)}else{if(Q.type!==constants.A.OBJECT_TYPE_TURTLE)throw new Error("JSXGraph: Can't create normal with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,line], [point,circle], [glider]`);ee=G.create("line",[function(){var ue,de,pe=Math.floor(Z.position),fe=Z.position-pe;for(de=0;de<Q.objects.length;de++)if((ue=Q.objects[de]).type===constants.A.OBJECT_TYPE_CURVE){if(pe<ue.numberPoints)break;pe-=ue.numberPoints}return pe===ue.numberPoints-1&&(pe-=1,fe=1),pe<0?1:(ue.Y(pe)+fe*(ue.Y(pe+1)-ue.Y(pe)))*(ue.Y(pe)-ue.Y(pe+1))-(ue.X(pe)+fe*(ue.X(pe+1)-ue.X(pe)))*(ue.X(pe+1)-ue.X(pe))},function(){var ue,de,pe=Math.floor(Z.position);for(de=0;de<Q.objects.length;de++)if((ue=Q.objects[de]).type===constants.A.OBJECT_TYPE_CURVE){if(pe<ue.numberPoints)break;pe-=ue.numberPoints}return pe===ue.numberPoints-1&&(pe-=1),pe<0?0:ue.X(pe+1)-ue.X(pe)},function(){var ue,de,pe=Math.floor(Z.position);for(de=0;de<Q.objects.length;de++)if((ue=Q.objects[de]).type===constants.A.OBJECT_TYPE_CURVE){if(pe<ue.numberPoints)break;pe-=ue.numberPoints}return pe===ue.numberPoints-1&&(pe-=1),pe<0?0:ue.Y(pe+1)-ue.Y(pe)}],ne)}return ee.elType="normal",ee.setParents(_),utils_type.A.exists(Z._is_new)?(ee.addChild(Z),delete Z._is_new):Z.addChild(ee),Q.addChild(ee),ee},jxg.A.createRadicalAxis=function(G,_,J){var Z,Q,ee;if(_.length!==2||_[0].elementClass!==constants.A.OBJECT_CLASS_CIRCLE||_[1].elementClass!==constants.A.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create 'radical axis' with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent type: [circle,circle]`);return Q=G.select(_[0]),ee=G.select(_[1]),(Z=G.create("line",[function(){var te=Q.stdform,ne=ee.stdform;return math.A.matVecMult(math.A.transpose([te.slice(0,3),ne.slice(0,3)]),[ne[3],-te[3]])}],J)).elType="radicalaxis",Z.setParents([Q.id,ee.id]),Q.addChild(Z),ee.addChild(Z),Z},jxg.A.createPolarLine=function(G,_,J){var Z,Q,ee,te,ne,ie,re;if(_.length>1&&(te=_[0].type===constants.A.OBJECT_TYPE_CONIC||_[0].elementClass===constants.A.OBJECT_CLASS_CIRCLE,ne=_[1].type===constants.A.OBJECT_TYPE_CONIC||_[1].elementClass===constants.A.OBJECT_CLASS_CIRCLE,ie=utils_type.A.isPoint(_[0]),re=utils_type.A.isPoint(_[1])),_.length!==2||!(te&&re||ie&&ne))throw new Error("JSXGraph: Can't create 'polar line' with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent type: [conic|circle,point], [point,conic|circle]`);return re?(Q=G.select(_[0]),ee=G.select(_[1])):(Q=G.select(_[1]),ee=G.select(_[0])),(Z=G.create("tangent",[Q,ee],J)).elType="polarline",Z},jxg.A.createTangentTo=function(G,_,J){var Z,Q,ee,te,ne,ie,re;if(ee=G.select(_[0]),te=utils_type.A.providePoints(G,_[1],J,"point")[0],ne=utils_type.A.def(_[2],0),ee.type!==constants.A.OBJECT_TYPE_CIRCLE&&ee.type!==constants.A.OBJECT_TYPE_CONIC||te.elementClass!==constants.A.OBJECT_CLASS_POINT)throw new Error("JSXGraph: Can't create tangentto with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [circle|conic,point,number]`);return Q=utils_type.A.copyAttributes(J,G.options,"tangentto"),re=G.create("polar",[ee,te],Q.polar),ie=G.create("intersection",[re,ee,ne],Q.point),(Z=G.create("tangent",[ee,ie],Q)).point=ie,Z.polar=re,Z.elType="tangentto",Z},jxg.A.registerElement("tangent",jxg.A.createTangent),jxg.A.registerElement("normal",jxg.A.createNormal),jxg.A.registerElement("tangentto",jxg.A.createTangentTo),jxg.A.registerElement("polar",jxg.A.createTangent),jxg.A.registerElement("radicalaxis",jxg.A.createRadicalAxis),jxg.A.registerElement("polarline",jxg.A.createPolarLine),jxg.A.Line,jxg.A.Group=function(G,_,J,Z,Q){var ee,te,ne,ie;for(this.board=G,this.objects={},ee=this.board.numObjects,this.board.numObjects+=1,_!==""&&utils_type.A.exists(_)?this.id=_:this.id=this.board.id+"Group"+ee,this.board.groups[this.id]=this,this.type=constants.A.OBJECT_TYPE_POINT,this.elementClass=constants.A.OBJECT_CLASS_POINT,J!==""&&utils_type.A.exists(J)?this.name=J:this.name="group_"+this.board.generateName(this),delete this.type,this.coords={},this.needsRegularUpdate=Q.needsregularupdate,this.rotationCenter="centroid",this.scaleCenter=null,this.rotationPoints=[],this.translationPoints=[],this.scalePoints=[],this.scaleDirections={},this.parents=[],te=utils_type.A.isArray(Z)?Z:Array.prototype.slice.call(arguments,3),ne=0;ne<te.length;ne++)!(ie=this.board.select(te[ne])).evalVisProp("fixed")&&utils_type.A.exists(ie.coords)&&this.addPoint(ie);this.methodMap={ungroup:"ungroup",add:"addPoint",addPoint:"addPoint",addPoints:"addPoints",addGroup:"addGroup",remove:"removePoint",removePoint:"removePoint",setAttribute:"setAttribute",setProperty:"setAttribute"}},jxg.A.extend(jxg.A.Group.prototype,{ungroup:function(){var G,_,J;for(G in this.objects)this.objects.hasOwnProperty(G)&&(_=this.objects[G].point,utils_type.A.isArray(_.groups)&&(J=utils_type.A.indexOf(_.groups,this.id))>=0&&delete _.groups[J]);return this.objects={},this},addParents:function(G){var _,J,Z;for(J=(Z=utils_type.A.isArray(G)?G:arguments).length,_=0;_<J;++_)utils_type.A.isId(this.board,Z[_])?this.parents.push(Z[_]):utils_type.A.exists(Z[_].id)&&this.parents.push(Z[_].id);this.parents=utils_type.A.uniqueArray(this.parents)},setParents:function(G){return this.parents=[],this.addParents(G),this},getParents:function(){return utils_type.A.isArray(this.parents)?this.parents:[]},_updateCoordsCache:function(G){var _;G!==""&&utils_type.A.exists(this.objects[G])&&(_=this.objects[G].point,this.coords[_.id]={usrCoords:_.coords.usrCoords.slice(0)})},update:function(){var G,_,J,Z,Q,ee,te,ne,ie,re,oe,se,ae=null;if(!this.needsUpdate)return this;if((_=this._update_find_drag_type()).action==="nothing")return this._updateCoordsCache(_.id),this;if(ae=this.objects[_.id].point,_.action==="translation"){if(re=[ae.coords.usrCoords[1]-this.coords[_.id].usrCoords[1],ae.coords.usrCoords[2]-this.coords[_.id].usrCoords[2]],ae.elementClass!==constants.A.OBJECT_CLASS_POINT){for(re.unshift(0),G=0;G<ae.transformations.length;G++)re=math.A.matVecMult(ae.transformations[G].matrix,re);re.shift()}(oe=this.board.create("transform",re,{type:"translate"})).update()}else if(_.action==="rotation"||_.action==="scaling"){if(Z=_.action==="rotation"?"rotationCenter":"scaleCenter",utils_type.A.exists(this[Z].coords))se=this[Z].coords.usrCoords.slice(1);else if(this[Z]==="centroid")se=this._update_centroid_center();else if(utils_type.A.isArray(this[Z]))se=this[Z];else{if(!utils_type.A.isFunction(this[Z]))return jxg.A.debug("Group.update: No valid center for this transformation, get out of here."),this;se=this[Z]()}if(_.action==="rotation")ie=geometry.A.rad(this.coords[_.id].usrCoords.slice(1),se,this.objects[_.id].point),(re=this.board.create("transform",[ie,se[0],se[1]],{type:"rotate"})).update();else{if(_.action!=="scaling")return this;if(ee=geometry.A.distance(this.coords[_.id].usrCoords.slice(1),se),Math.abs(ee)<math.A.eps)return this;ee=geometry.A.distance(ae.coords.usrCoords.slice(1),se)/ee,te=this.scaleDirections[_.id].indexOf("x")>=0?ee:1,ne=this.scaleDirections[_.id].indexOf("y")>=0?ee:1,(re=this.board.create("transform",[1,0,0,se[0]*(1-te),te,0,se[1]*(1-ne),0,ne],{type:"generic"})).update()}}for(J in this.objects)(ae=this.objects[J].point).elementClass!==constants.A.OBJECT_CLASS_POINT&&(utils_type.A.exists(re.board)?re.meltTo(ae):_.id!==ae.id&&oe.meltTo(ae));for(J in this._update_apply_transformation(_,re),this.needsUpdate=!1,this.objects)if(this.objects.hasOwnProperty(J))for(Q in this.objects[J].descendants)this.objects[J].descendants.hasOwnProperty(Q)&&(this.objects[J].descendants.needsUpdate=this.objects[J].descendants.needsRegularUpdate||this.board.needsFullUpdate);for(J in this.board.updateElements(_),this.objects)this.objects.hasOwnProperty(J)&&this._updateCoordsCache(J);return this},_update_find_drag_type:function(){var G,_,J,Z="nothing",Q=[];for(G in this.objects)this.objects.hasOwnProperty(G)&&(_=this.objects[G].point).coords.distance(constants.A.COORDS_BY_USER,this.coords[G])>math.A.eps&&Q.push(_.id);return Q.length===0?{action:Z,id:"",changed:Q}:(J=Q[0],_=this.objects[J].point,Q.length>1?Z="translation":utils_type.A.isInArray(this.rotationPoints,_)&&utils_type.A.exists(this.rotationCenter)?Z="rotation":utils_type.A.isInArray(this.scalePoints,_)&&utils_type.A.exists(this.scaleCenter)?Z="scaling":utils_type.A.isInArray(this.translationPoints,_)&&(Z="translation"),{action:Z,id:J,changed:Q})},_update_centroid_center:function(){var G,_,J;for(J in G=[0,0],_=0,this.coords)this.coords.hasOwnProperty(J)&&(G[0]+=this.coords[J].usrCoords[1],G[1]+=this.coords[J].usrCoords[2],++_);return _>0&&(G[0]/=_,G[1]/=_),G},_update_apply_transformation:function(G,_){var J,Z;for(J in this.objects)this.objects.hasOwnProperty(J)&&(utils_type.A.exists(this.board.objects[J])?(Z=this.objects[J].point).id!==G.id?G.action==="translation"?utils_type.A.isInArray(G.changed,Z.id)||Z.elementClass===constants.A.OBJECT_CLASS_POINT&&Z.coords.setCoordinates(constants.A.COORDS_BY_USER,[this.coords[J].usrCoords[1]+_[0],this.coords[J].usrCoords[2]+_[1]]):G.action!=="rotation"&&G.action!=="scaling"||Z.elementClass===constants.A.OBJECT_CLASS_POINT&&_.applyOnce([Z]):G.action!=="rotation"&&G.action!=="scaling"||Z.coords.setCoordinates(constants.A.COORDS_BY_USER,math.A.matVecMult(_.matrix,this.coords[Z.id].usrCoords)):delete this.objects[J])},addPoint:function(G){return this.objects[G.id]={point:this.board.select(G)},this._updateCoordsCache(G.id),this.translationPoints.push(G),G.groups.push(this.id),G.groups=utils_type.A.uniqueArray(G.groups),this},addPoints:function(G){var _;for(_=0;_<G.length;_++)this.addPoint(G[_]);return this},addGroup:function(G){var _;for(_ in G.objects)G.objects.hasOwnProperty(_)&&this.addPoint(G.objects[_].point);return this},removePoint:function(G){return delete this.objects[G.id],this},setRotationCenter:function(G){return this.rotationCenter=G,this},setRotationPoints:function(G){return this._setActionPoints("rotation",G)},addRotationPoint:function(G){return this._addActionPoint("rotation",G)},removeRotationPoint:function(G){return this._removeActionPoint("rotation",G)},setTranslationPoints:function(G){return this._setActionPoints("translation",G)},addTranslationPoint:function(G){return this._addActionPoint("translation",G)},removeTranslationPoint:function(G){return this._removeActionPoint("translation",G)},setScaleCenter:function(G){return this.scaleCenter=G,this},setScalePoints:function(G,_){var J,Z,Q;for(Q=(J=utils_type.A.isArray(G)?G:arguments).length,Z=0;Z<Q;++Z)this.scaleDirections[this.board.select(J[Z]).id]=_||"xy";return this._setActionPoints("scale",G)},addScalePoint:function(G,_){return this._addActionPoint("scale",G),this.scaleDirections[this.board.select(G).id]=_||"xy",this},removeScalePoint:function(G){return this._removeActionPoint("scale",G)},_setActionPoints:function(G,_){var J,Z,Q;for(Q=(J=utils_type.A.isArray(_)?_:arguments).length,this[G+"Points"]=[],Z=0;Z<Q;++Z)this._addActionPoint(G,J[Z]);return this},_addActionPoint:function(G,_){return this[G+"Points"].push(this.board.select(_)),this},_removeActionPoint:function(G,_){var J=this[G+"Points"].indexOf(this.board.select(_));return J>-1&&this[G+"Points"].splice(J,1),this},setProperty:function(){jxg.A.deprecated("Group.setProperty","Group.setAttribute()"),this.setAttribute.apply(this,arguments)},setAttribute:function(){var G;for(G in this.objects)this.objects.hasOwnProperty(G)&&this.objects[G].point.setAttribute.apply(this.objects[G].point,arguments);return this}}),jxg.A.createGroup=function(G,_,J){var Z=utils_type.A.copyAttributes(J,G.options,"group"),Q=new jxg.A.Group(G,Z.id,Z.name,_,Z);return Q.elType="group",Q.setParents(_),Q},jxg.A.registerElement("group",jxg.A.createGroup),jxg.A.Group,jxg.A.Circle=function(G,_,J,Z,Q){this.constructor(G,Q,constants.A.OBJECT_TYPE_CIRCLE,constants.A.OBJECT_CLASS_CIRCLE),this.method=_,this.midpoint=this.board.select(J),this.center=this.board.select(J),this.point2=null,this.radius=0,this.line=null,this.circle=null,this.points=[],_==="twoPoints"?(this.point2=G.select(Z),this.radius=this.Radius()):_==="pointRadius"?(this.gxtterm=Z,this.updateRadius=utils_type.A.createFunction(Z,this.board),this.updateRadius(),this.addParentsFromJCFunctions([this.updateRadius])):_==="pointLine"?(this.line=G.select(Z),this.radius=this.line.point1.coords.distance(constants.A.COORDS_BY_USER,this.line.point2.coords)):_==="pointCircle"&&(this.circle=G.select(Z),this.radius=this.circle.Radius()),this.id=this.board.setId(this,"C"),this.board.renderer.drawEllipse(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="circle",this.createLabel(),utils_type.A.exists(this.center._is_new)?(this.addChild(this.center),delete this.center._is_new):this.center.addChild(this),_==="pointRadius"?this.notifyParents(Z):_==="pointLine"?this.line.addChild(this):_==="pointCircle"?this.circle.addChild(this):_==="twoPoints"&&(utils_type.A.exists(this.point2._is_new)?(this.addChild(this.point2),delete this.point2._is_new):this.point2.addChild(this)),this.methodMap=utils_type.A.deepCopy(this.methodMap,{setRadius:"setRadius",getRadius:"getRadius",Area:"Area",area:"Area",Perimeter:"Perimeter",Circumference:"Perimeter",radius:"Radius",Radius:"Radius",Diameter:"Diameter",center:"center",line:"line",point2:"point2"})},jxg.A.Circle.prototype=new base_element.A,jxg.A.extend(jxg.A.Circle.prototype,{hasPoint:function(G,_){var J,Z,Q,ee,te,ne=this.center.coords.usrCoords,ie=new base_coords.A(constants.A.COORDS_BY_SCREEN,[G,_],this.board),re=this.Radius();return utils_type.A.isObject(this.evalVisProp("precision"))?(Z=this.board._inputDevice,J=this.evalVisProp("precision."+Z)):J=this.board.options.precision.hasPoint,Q=ne[1]-ie.usrCoords[1],ee=ne[2]-ie.usrCoords[2],te=math.A.hypot(Q,ee),J+=.5*this.evalVisProp("strokewidth"),J/=Math.sqrt(Math.abs(this.board.unitX*this.board.unitY)),this.evalVisProp("hasinnerpoints")?te<re+J:Math.abs(te-re)<J},generatePolynomial:function(G){var _=this.center.symbolic.x,J=this.center.symbolic.y,Z=G.symbolic.x,Q=G.symbolic.y,ee=this.generateRadiusSquared();return ee===""?[]:["(("+Z+")-("+_+"))^2 + (("+Q+")-("+J+"))^2 - ("+ee+")"]},generateRadiusSquared:function(){var G,_,J,Z,Q="";return this.method==="twoPoints"?(G=this.center.symbolic.x,_=this.center.symbolic.y,Q="(("+(J=this.point2.symbolic.x)+")-("+G+"))^2 + (("+(Z=this.point2.symbolic.y)+")-("+_+"))^2"):this.method==="pointRadius"?utils_type.A.isNumber(this.radius)&&(Q=(this.radius*this.radius).toString()):this.method==="pointLine"?(J=this.line.point1.symbolic.x,Z=this.line.point1.symbolic.y,Q="(("+J+")-("+this.line.point2.symbolic.x+"))^2 + (("+Z+")-("+this.line.point2.symbolic.y+"))^2"):this.method==="pointCircle"&&(Q=this.circle.Radius()),Q},update:function(){var G,_,J,Z,Q,ee;if(this.needsUpdate)for(this.evalVisProp("trace")&&this.cloneToBackground(!0),this.method==="pointLine"?this.radius=this.line.point1.coords.distance(constants.A.COORDS_BY_USER,this.line.point2.coords):this.method==="pointCircle"?this.radius=this.circle.Radius():this.method==="pointRadius"&&(this.radius=this.updateRadius()),this.radius=Math.abs(this.radius),this.updateStdform(),this.updateQuadraticform(),J=this.center.coords.usrCoords[0],G=this.center.coords.usrCoords[1]/J,_=this.center.coords.usrCoords[2]/J,J/=J,Z=this.Radius(),Q=.551915024494,this.numberPoints=13,this.dataX=[G+Z,G+Z,G+Z*Q,G,G-Z*Q,G-Z,G-Z,G-Z,G-Z*Q,G,G+Z*Q,G+Z,G+Z],this.dataY=[_,_+Z*Q,_+Z,_+Z,_+Z,_+Z*Q,_,_-Z*Q,_-Z,_-Z,_-Z,_-Z*Q,_],this.bezierDegree=3,ee=0;ee<this.numberPoints;ee++)this.points[ee]=new base_coords.A(constants.A.COORDS_BY_USER,[this.dataX[ee],this.dataY[ee]],this.board);return this},updateQuadraticform:function(){var G=this.center,_=G.X(),J=G.Y(),Z=this.Radius();this.quadraticform=[[_*_+J*J-Z*Z,-_,-J],[-_,1,0],[-J,0,1]]},updateStdform:function(){this.stdform[3]=.5,this.stdform[4]=this.Radius(),this.stdform[1]=-this.center.coords.usrCoords[1],this.stdform[2]=-this.center.coords.usrCoords[2],isFinite(this.stdform[4])||(this.stdform[0]=utils_type.A.exists(this.point2)?-(this.stdform[1]*this.point2.coords.usrCoords[1]+this.stdform[2]*this.point2.coords.usrCoords[2]):0),this.normalize()},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.center.coords.usrCoords[1]+this.center.coords.usrCoords[2]+this.Radius())&&this.center.isReal,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateEllipse(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},notifyParents:function(G){utils_type.A.isString(G)&&geonext.A.findDependencies(this,G,this.board)},setRadius:function(G){return this.updateRadius=utils_type.A.createFunction(G,this.board),this.addParentsFromJCFunctions([this.updateRadius]),this.board.update(),this},Radius:function(G){return utils_type.A.exists(G)?(this.setRadius(G),this.Radius()):this.method==="twoPoints"?utils_type.A.cmpArrays(this.point2.coords.usrCoords,[0,0,0])||utils_type.A.cmpArrays(this.center.coords.usrCoords,[0,0,0])?NaN:this.center.Dist(this.point2):this.method==="pointLine"||this.method==="pointCircle"?this.radius:this.method==="pointRadius"?this.evalVisProp("nonnegativeonly")?Math.max(0,this.updateRadius()):Math.abs(this.updateRadius()):NaN},Diameter:function(){return 2*this.Radius()},getRadius:function(){return jxg.A.deprecated("Circle.getRadius()","Circle.Radius()"),this.Radius()},getTextAnchor:function(){return this.center.coords},getLabelAnchor:function(){var G,_,J,Z,Q,ee,te=1.5,ne=this.Radius(),ie=this.center.coords.usrCoords,re=.7071067811865;if(!utils_type.A.exists(this.label))return new base_coords.A(constants.A.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(J=this.label.evalVisProp("position"),!utils_type.A.isString(J))return new base_coords.A(constants.A.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(!(J.indexOf("right")<0&&J.indexOf("left")<0))return ie=this.center.coords.scrCoords,Z=utils_type.A.parsePosition(J),Q=utils_type.A.parseNumber(Z.pos,2*Math.PI,1),Z.pos.indexOf("fr")<0&&Z.pos.indexOf("%")<0&&(Z.pos.indexOf("px")>=0?Q=0:Q*=Math.PI/180),ee=1,Z.side==="left"&&(ee=-1),utils_type.A.exists(this.label)&&(te=.5*ee*this.label.evalVisProp("distance")),G=ie[1]+(ne*this.board.unitX+this.label.size[0]*te)*Math.cos(Q),_=ie[2]-(ne*this.board.unitY+this.label.size[1]*te)*Math.sin(Q),new base_coords.A(constants.A.COORDS_BY_SCREEN,[G,_],this.board);switch(this.evalVisProp("label.position")){case"lft":G=ie[1]-ne,_=ie[2];break;case"llft":G=ie[1]-re*ne,_=ie[2]-re*ne;break;case"rt":G=ie[1]+ne,_=ie[2];break;case"lrt":G=ie[1]+re*ne,_=ie[2]-re*ne;break;case"urt":G=ie[1]+re*ne,_=ie[2]+re*ne;break;case"top":G=ie[1],_=ie[2]+ne;break;case"bot":G=ie[1],_=ie[2]-ne;break;default:G=ie[1]-re*ne,_=ie[2]+re*ne}return new base_coords.A(constants.A.COORDS_BY_USER,[G,_],this.board)},cloneToBackground:function(){var G,_=this.Radius(),J=utils_type.A.getCloneObject(this);return J.center={coords:this.center.coords},J.Radius=function(){return _},J.getRadius=function(){return _},G=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawEllipse(J),this.board.renderer.enhancedRendering=G,this.traces[J.id]=J.rendNode,this},addTransform:function(G){var _,J=utils_type.A.isArray(G)?G:[G],Z=J.length;for(_=0;_<Z;_++)this.center.transformations.push(J[_]),this.method==="twoPoints"&&this.point2.transformations.push(J[_]);return this},snapToGrid:function(){var G=this.evalVisProp("snaptogrid");return this.center.handleSnapToGrid(G,!0),this.method==="twoPoints"&&this.point2.handleSnapToGrid(G,!0),this},snapToPoints:function(){var G=this.evalVisProp("snaptopoints");return this.center.handleSnapToPoints(G),this.method==="twoPoints"&&this.point2.handleSnapToPoints(G),this},X:function(G){return this.Radius()*Math.cos(2*G*Math.PI)+this.center.coords.usrCoords[1]},Y:function(G){return this.Radius()*Math.sin(2*G*Math.PI)+this.center.coords.usrCoords[2]},Z:function(G){return 1},minX:function(){return 0},maxX:function(){return 1},Area:function(){var G=this.Radius();return G*G*Math.PI},Perimeter:function(){return 2*this.Radius()*Math.PI},bounds:function(){var G=this.center.coords.usrCoords,_=this.Radius();return[G[1]-_,G[2]+_,G[1]+_,G[2]-_]},getParents:function(){return this.parents.length===1?this.parents.concat(this.radius):this.parents}}),jxg.A.createCircle=function(G,_,J){var Z,Q,ee,te,ne,ie=["center","point2"];if(Q=[],ne=G.select(_[0]),utils_type.A.isObject(ne)&&ne.elementClass===constants.A.OBJECT_CLASS_CIRCLE&&utils_type.A.isTransformationOrArray(_[1]))return te=utils_type.A.copyAttributes(J,G.options,"circle"),(Z=jxg.A.createEllipse(G,[ne.center,ne.center,function(){return 2*ne.Radius()}],te)).addTransform(_[1]),Z;for(ee=0;ee<_.length;ee++)if(utils_type.A.isPointType(G,_[ee])){if(_.length<3?Q.push(utils_type.A.providePoints(G,[_[ee]],J,"circle",[ie[ee]])[0]):Q.push(utils_type.A.providePoints(G,[_[ee]],J,"point")[0]),Q[Q.length-1]===!1)throw new Error("JSXGraph: Can't create circle from this type. Please provide a point type.")}else Q.push(_[ee]);if(te=utils_type.A.copyAttributes(J,G.options,"circle"),Q.length===2&&utils_type.A.isPoint(Q[0])&&utils_type.A.isPoint(Q[1]))Z=new jxg.A.Circle(G,"twoPoints",Q[0],Q[1],te);else if((utils_type.A.isNumber(Q[0])||utils_type.A.isFunction(Q[0])||utils_type.A.isString(Q[0]))&&utils_type.A.isPoint(Q[1]))Z=new jxg.A.Circle(G,"pointRadius",Q[1],Q[0],te);else if((utils_type.A.isNumber(Q[1])||utils_type.A.isFunction(Q[1])||utils_type.A.isString(Q[1]))&&utils_type.A.isPoint(Q[0]))Z=new jxg.A.Circle(G,"pointRadius",Q[0],Q[1],te);else if(Q[0].elementClass===constants.A.OBJECT_CLASS_CIRCLE&&utils_type.A.isPoint(Q[1]))Z=new jxg.A.Circle(G,"pointCircle",Q[1],Q[0],te);else if(Q[1].elementClass===constants.A.OBJECT_CLASS_CIRCLE&&utils_type.A.isPoint(Q[0]))Z=new jxg.A.Circle(G,"pointCircle",Q[0],Q[1],te);else if(Q[0].elementClass===constants.A.OBJECT_CLASS_LINE&&utils_type.A.isPoint(Q[1]))Z=new jxg.A.Circle(G,"pointLine",Q[1],Q[0],te);else if(Q[1].elementClass===constants.A.OBJECT_CLASS_LINE&&utils_type.A.isPoint(Q[0]))Z=new jxg.A.Circle(G,"pointLine",Q[0],Q[1],te);else{if(!(_.length===3&&utils_type.A.isPoint(Q[0])&&utils_type.A.isPoint(Q[1])&&utils_type.A.isPoint(Q[2])))throw new Error("JSXGraph: Can't create circle with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,point], [point,number], [point,function], [point,circle], [point,point,point], [circle,transformation]`);if(!jxg.A.elements.circumcircle)throw new Error("JSXGraph: Can't create circle with three points. Please include the circumcircle element (element/composition).");Z=jxg.A.elements.circumcircle(G,Q,te)}for(Z.isDraggable=!0,Z.setParents(Q),Z.elType="circle",ee=0;ee<Q.length;ee++)utils_type.A.isPoint(Q[ee])&&Z.inherits.push(Q[ee]);return Z},jxg.A.registerElement("circle",jxg.A.createCircle);var circle=jxg.A.Circle;jxg.A.createEllipse=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe=[],se=utils_type.A.copyAttributes(J,G.options,"conic","foci"),ae=utils_type.A.copyAttributes(J,G.options,"conic","center"),le=utils_type.A.copyAttributes(J,G.options,"conic");for(ie=0;ie<2;ie++)if(_[ie].length>1)oe[ie]=G.create("point",_[ie],se);else if(utils_type.A.isPoint(_[ie]))oe[ie]=G.select(_[ie]);else if(utils_type.A.isFunction(_[ie])&&utils_type.A.isPoint(_[ie]()))oe[ie]=_[ie]();else{if(!utils_type.A.isString(_[ie]))throw new Error("JSXGraph: Can't create Ellipse with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,point,point], [point,point,number|function]`);oe[ie]=G.select(_[ie])}if(utils_type.A.isNumber(_[2]))ne=utils_type.A.createFunction(_[2],G);else if(utils_type.A.isFunction(_[2])&&utils_type.A.isNumber(_[2]()))ne=_[2];else{if(utils_type.A.isPoint(_[2]))te=G.select(_[2]);else if(_[2].length>1)te=G.create("point",_[2],se);else if(utils_type.A.isFunction(_[2])&&utils_type.A.isPoint(_[2]()))te=_[2]();else{if(!utils_type.A.isString(_[2]))throw new Error("JSXGraph: Can't create Ellipse with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [point,point,point], [point,point,number|function]`);te=G.select(_[2])}ne=function(){return te.Dist(oe[0])+te.Dist(oe[1])}}for(utils_type.A.exists(_[4])||(_[4]=2*Math.PI),utils_type.A.exists(_[3])||(_[3]=0),ee=G.create("point",[function(){return .5*(oe[0].X()+oe[1].X())},function(){return .5*(oe[0].Y()+oe[1].Y())}],ae),(Q=G.create("curve",[function(ue){return 0},function(ue){return 0},_[3],_[4]],le)).majorAxis=ne,re=Q.hasPoint,Z=function(ue,de){var pe,fe,_e,ye,be,Ae,Ce,Ee,Re;de||(fe=(pe=ne())*pe,_e=oe[0].X(),ye=oe[0].Y(),Ce=_e-(be=oe[1].X()),Ee=ye-(Ae=oe[1].Y()),Re=(fe-_e*_e-ye*ye+be*be+Ae*Ae)/(2*pe),Q.quadraticform=[[Re*Re-be*be-Ae*Ae,Re*Ce/pe+be,Re*Ee/pe+Ae],[Re*Ce/pe+be,Ce*Ce/fe-1,Ce*Ee/fe],[Re*Ee/pe+Ae,Ce*Ee/fe,Ee*Ee/fe-1]])},Q.X=function(ue,de){var pe=ne(),fe=oe[1].Dist(oe[0]),_e=.5*(fe*fe-pe*pe)/(fe*Math.cos(ue)-pe),ye=Math.atan2(oe[1].Y()-oe[0].Y(),oe[1].X()-oe[0].X());return de||Z(0,de),oe[0].X()+Math.cos(ye+ue)*_e},Q.Y=function(ue,de){var pe=ne(),fe=oe[1].Dist(oe[0]),_e=.5*(fe*fe-pe*pe)/(fe*Math.cos(ue)-pe),ye=Math.atan2(oe[1].Y()-oe[0].Y(),oe[1].X()-oe[0].X());return oe[0].Y()+Math.sin(ye+ue)*_e},Q.midpoint=Q.center=ee,Q.type=constants.A.OBJECT_TYPE_CONIC,Q.subs={center:Q.center},Q.inherits.push(Q.center,oe[0],oe[1]),utils_type.A.isPoint(te)&&Q.inherits.push(te),Q.hasPoint=function(ue,de){var pe,fe,_e,ye;return this.evalVisProp("hasinnerpoints")?(pe=oe[0].coords,fe=oe[1].coords,_e=this.majorAxis(),(ye=new base_coords.A(constants.A.COORDS_BY_SCREEN,[ue,de],this.board)).distance(constants.A.COORDS_BY_USER,pe)+ye.distance(constants.A.COORDS_BY_USER,fe)<=_e):re.apply(this,arguments)},ee.addChild(Q),ie=0;ie<2;ie++)utils_type.A.isPoint(oe[ie])&&oe[ie].addChild(Q);return utils_type.A.isPoint(te)&&te.addChild(Q),Q.setParents(_),Q},jxg.A.createHyperbola=function(G,_,J){var Z,Q,ee,te,ne,ie,re=[],oe=utils_type.A.copyAttributes(J,G.options,"conic","foci"),se=utils_type.A.copyAttributes(J,G.options,"conic","center"),ae=utils_type.A.copyAttributes(J,G.options,"conic");for(ie=0;ie<2;ie++)if(_[ie].length>1)re[ie]=G.create("point",_[ie],oe);else if(utils_type.A.isPoint(_[ie]))re[ie]=G.select(_[ie]);else if(utils_type.A.isFunction(_[ie])&&utils_type.A.isPoint(_[ie]()))re[ie]=_[ie]();else{if(!utils_type.A.isString(_[ie]))throw new Error("JSXGraph: Can't create Hyperbola with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,point,point], [point,point,number|function]`);re[ie]=G.select(_[ie])}if(utils_type.A.isNumber(_[2]))ne=utils_type.A.createFunction(_[2],G);else if(utils_type.A.isFunction(_[2])&&utils_type.A.isNumber(_[2]()))ne=_[2];else{if(utils_type.A.isPoint(_[2]))te=G.select(_[2]);else if(_[2].length>1)te=G.create("point",_[2],oe);else if(utils_type.A.isFunction(_[2])&&utils_type.A.isPoint(_[2]()))te=_[2]();else{if(!utils_type.A.isString(_[2]))throw new Error("JSXGraph: Can't create Hyperbola with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [point,point,point], [point,point,number|function]`);te=G.select(_[2])}ne=function(){return te.Dist(re[0])-te.Dist(re[1])}}for(utils_type.A.exists(_[4])||(_[4]=1.0001*Math.PI),utils_type.A.exists(_[3])||(_[3]=-1.0001*Math.PI),ee=G.create("point",[function(){return .5*(re[0].X()+re[1].X())},function(){return .5*(re[0].Y()+re[1].Y())}],se),(Q=G.create("curve",[function(le){return 0},function(le){return 0},_[3],_[4]],ae)).majorAxis=ne,Z=function(le,ue){var de,pe,fe,_e,ye,be,Ae,Ce,Ee;ue||(pe=(de=ne())*de,fe=re[0].X(),_e=re[0].Y(),Ae=fe-(ye=re[1].X()),Ce=_e-(be=re[1].Y()),Ee=(pe-fe*fe-_e*_e+ye*ye+be*be)/(2*de),Q.quadraticform=[[Ee*Ee-ye*ye-be*be,Ee*Ae/de+ye,Ee*Ce/de+be],[Ee*Ae/de+ye,Ae*Ae/pe-1,Ae*Ce/pe],[Ee*Ce/de+be,Ae*Ce/pe,Ce*Ce/pe-1]])},Q.X=function(le,ue){var de=ne(),pe=re[1].Dist(re[0]),fe=.5*(pe*pe-de*de)/(pe*Math.cos(le)+de),_e=Math.atan2(re[1].Y()-re[0].Y(),re[1].X()-re[0].X());return ue||Z(0,ue),re[0].X()+Math.cos(_e+le)*fe},Q.Y=function(le,ue){var de=ne(),pe=re[1].Dist(re[0]),fe=.5*(pe*pe-de*de)/(pe*Math.cos(le)+de),_e=Math.atan2(re[1].Y()-re[0].Y(),re[1].X()-re[0].X());return re[0].Y()+Math.sin(_e+le)*fe},Q.midpoint=Q.center=ee,Q.subs={center:Q.center},Q.inherits.push(Q.center,re[0],re[1]),utils_type.A.isPoint(te)&&Q.inherits.push(te),Q.type=constants.A.OBJECT_TYPE_CONIC,ee.addChild(Q),ie=0;ie<2;ie++)utils_type.A.isPoint(re[ie])&&re[ie].addChild(Q);return utils_type.A.isPoint(te)&&te.addChild(Q),Q.setParents(_),Q},jxg.A.createParabola=function(G,_,J){var Z,Q,ee,te,ne=_[0],ie=_[1],re=utils_type.A.copyAttributes(J,G.options,"conic","foci"),oe=utils_type.A.copyAttributes(J,G.options,"conic","center"),se=utils_type.A.copyAttributes(J,G.options,"conic");if(_[0].length>1)ne=G.create("point",_[0],re);else if(utils_type.A.isPoint(_[0]))ne=G.select(_[0]);else if(utils_type.A.isFunction(_[0])&&utils_type.A.isPoint(_[0]()))ne=_[0]();else{if(!utils_type.A.isString(_[0]))throw new Error("JSXGraph: Can't create Parabola with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,line]`);ne=G.select(_[0])}return utils_type.A.isArray(ie)&&ie.length===2&&(te=utils_type.A.copyAttributes(J,G.options,"conic","line"),ie=G.create("line",ie,te)),utils_type.A.exists(_[3])||(_[3]=2*Math.PI),utils_type.A.exists(_[2])||(_[2]=0),ee=G.create("point",[function(){return geometry.A.projectPointToLine(ne,ie,G).usrCoords}],oe),(Q=G.create("curve",[function(ae){return 0},function(ae){return 0},_[2],_[3]],se)).midpoint=Q.center=ee,Q.subs={center:Q.center},Q.inherits.push(Q.center),Z=function(ae,le){var ue,de,pe,fe,_e,ye;le||(ue=ie.stdform[1],de=ie.stdform[2],pe=ie.stdform[0],fe=ue*ue+de*de,_e=ne.X(),ye=ne.Y(),Q.quadraticform=[[pe*pe-fe*(_e*_e+ye*ye),pe*ue+fe*_e,pe*de+fe*ye],[pe*ue+fe*_e,-de*de,ue*de],[pe*de+fe*ye,ue*de,-ue*ue]])},Q.X=function(ae,le){var ue,de=ie.getAngle(),pe=geometry.A.distPointLine(ne.coords.usrCoords,ie.stdform),fe=ie.point1.coords.usrCoords,_e=ie.point2.coords.usrCoords,ye=ne.coords.usrCoords;return fe[0]===0?fe=[1,_e[1]+ie.stdform[2],_e[2]-ie.stdform[1]]:_e[0]===0&&(_e=[1,fe[1]+ie.stdform[2],fe[2]-ie.stdform[1]]),ue=((_e[1]-fe[1])*(ye[2]-fe[2])-(_e[2]-fe[2])*(ye[1]-fe[1])>=0?1:-1)*pe/(1-Math.sin(ae)),le||Z(0,le),ne.X()+Math.cos(ae+de)*ue},Q.Y=function(ae,le){var ue,de=ie.getAngle(),pe=geometry.A.distPointLine(ne.coords.usrCoords,ie.stdform),fe=ie.point1.coords.usrCoords,_e=ie.point2.coords.usrCoords,ye=ne.coords.usrCoords;return fe[0]===0?fe=[1,_e[1]+ie.stdform[2],_e[2]-ie.stdform[1]]:_e[0]===0&&(_e=[1,fe[1]+ie.stdform[2],fe[2]-ie.stdform[1]]),ue=((_e[1]-fe[1])*(ye[2]-fe[2])-(_e[2]-fe[2])*(ye[1]-fe[1])>=0?1:-1)*pe/(1-Math.sin(ae)),ne.Y()+Math.sin(ae+de)*ue},Q.type=constants.A.OBJECT_TYPE_CONIC,ee.addChild(Q),utils_type.A.isPoint(ne)&&(ne.addChild(Q),Q.inherits.push(ne)),ie.addChild(Q),Q.setParents(_),Q},jxg.A.createConic=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue,de,pe,fe=[[1,0,0],[0,1,0],[0,0,1]],_e=[[1,0,0],[0,1,0],[0,0,1]],ye=[],be=[],Ae=utils_type.A.copyAttributes(J,G.options,"conic","point"),Ce=utils_type.A.copyAttributes(J,G.options,"conic","center"),Ee=utils_type.A.copyAttributes(J,G.options,"conic");if(_.length===5)pe=!0;else{if(_.length!==6)throw new Error("JSXGraph: Can't create generic Conic with "+_.length+" parameters.");pe=!1}if(pe)for(ue=0;ue<5;ue++)if(_[ue].length>1)ye[ue]=G.create("point",_[ue],Ae);else if(utils_type.A.isPoint(_[ue]))ye[ue]=G.select(_[ue]);else if(utils_type.A.isFunction(_[ue])&&utils_type.A.isPoint(_[ue]()))ye[ue]=_[ue]();else{if(!utils_type.A.isString(_[ue]))throw new Error("JSXGraph: Can't create Conic section with parent types '"+typeof _[ue]+`'.
Possible parent types: [point,point,point,point,point], [a00,a11,a22,a01,a02,a12]`);ye[ue]=G.select(_[ue])}else(de=[[0,0,0],[0,0,0],[0,0,0]])[0][0]=utils_type.A.isFunction(_[2])?function(){return _[2]()}:function(){return _[2]},de[0][1]=utils_type.A.isFunction(_[4])?function(){return _[4]()}:function(){return _[4]},de[0][2]=utils_type.A.isFunction(_[5])?function(){return _[5]()}:function(){return _[5]},de[1][1]=utils_type.A.isFunction(_[0])?function(){return _[0]()}:function(){return _[0]},de[1][2]=utils_type.A.isFunction(_[3])?function(){return _[3]()}:function(){return _[3]},de[2][2]=utils_type.A.isFunction(_[1])?function(){return _[1]()}:function(){return _[1]};if(ne=function(Re){var Te,Me;for(Te=0;Te<3;Te++)for(Me=Te;Me<3;Me++)Re[Te][Me]+=Re[Me][Te];for(Te=0;Te<3;Te++)for(Me=0;Me<Te;Me++)Re[Te][Me]=Re[Me][Te];return Re},te=function(Re,Te){var Me,Ne,Le=[[0,0,0],[0,0,0],[0,0,0]];for(Me=0;Me<3;Me++)for(Ne=0;Ne<3;Ne++)Le[Me][Ne]=Re[Me]*Te[Ne];return ne(Le)},ee=function(Re,Te,Me){var Ne,Le,Ie,Ge,He,Be=[[0,0,0],[0,0,0],[0,0,0]];for(He=math.A.matVecMult(Te,Me),Ie=math.A.innerProduct(Me,He),He=math.A.matVecMult(Re,Me),Ge=math.A.innerProduct(Me,He),Ne=0;Ne<3;Ne++)for(Le=0;Le<3;Le++)Be[Ne][Le]=Ie*Re[Ne][Le]-Ge*Te[Ne][Le];return Be},Q=G.create("curve",[function(Re){return 0},function(Re){return 0},0,2*Math.PI],Ee),Z=function(Re,Te){var Me,Ne,Le;if(!Te){if(pe){for(Me=0;Me<5;Me++)be[Me]=ye[Me].coords.usrCoords;ae=te(math.A.crossProduct(be[0],be[1]),math.A.crossProduct(be[2],be[3])),le=te(math.A.crossProduct(be[0],be[2]),math.A.crossProduct(be[1],be[3])),_e=ee(ae,le,be[4])}else for(Me=0;Me<3;Me++)for(Ne=Me;Ne<3;Ne++)_e[Me][Ne]=de[Me][Ne](),Ne>Me&&(_e[Ne][Me]=_e[Me][Ne]);Q.quadraticform=_e,(ie=numerics.A.Jacobi(_e))[0][0][0]<0&&(ie[0][0][0]*=-1,ie[0][1][1]*=-1,ie[0][2][2]*=-1),fe=ie[1],se=Math.sqrt(Math.abs(ie[0][0][0])),re=Math.sqrt(Math.abs(ie[0][1][1])),oe=Math.sqrt(Math.abs(ie[0][2][2]))}return ie[0][1][1]<=0&&ie[0][2][2]<=0?Le=math.A.matVecMult(fe,[1/se,Math.cos(Re)/re,Math.sin(Re)/oe]):ie[0][1][1]<=0&&ie[0][2][2]>0?Le=math.A.matVecMult(fe,[Math.cos(Re)/se,1/re,Math.sin(Re)/oe]):ie[0][2][2]<0&&(Le=math.A.matVecMult(fe,[Math.sin(Re)/se,Math.cos(Re)/re,1/oe])),utils_type.A.exists(Le)?(Le[1]/=Le[0],Le[2]/=Le[0],Le[0]=1):Le=[1,NaN,NaN],Le},Q.X=function(Re,Te){return Z(Re,Te)[1]},Q.Y=function(Re,Te){return Z(Re,Te)[2]},Q.midpoint=G.create("point",[function(){var Re=Q.quadraticform;return[Re[1][1]*Re[2][2]-Re[1][2]*Re[1][2],Re[1][2]*Re[0][2]-Re[2][2]*Re[0][1],Re[0][1]*Re[1][2]-Re[1][1]*Re[0][2]]}],Ce),Q.type=constants.A.OBJECT_TYPE_CONIC,Q.center=Q.midpoint,Q.subs={center:Q.center},Q.inherits.push(Q.center),Q.inherits=Q.inherits.concat(ye),pe){for(ue=0;ue<5;ue++)utils_type.A.isPoint(ye[ue])&&ye[ue].addChild(Q);Q.setParents(_)}return Q.addChild(Q.center),Q},jxg.A.registerElement("ellipse",jxg.A.createEllipse),jxg.A.registerElement("hyperbola",jxg.A.createHyperbola),jxg.A.registerElement("parabola",jxg.A.createParabola),jxg.A.registerElement("conic",jxg.A.createConic),jxg.A.Polygon=function(G,_,J){this.constructor(G,J,constants.A.OBJECT_TYPE_POLYGON,constants.A.OBJECT_CLASS_AREA);var Z,Q,ee,te,ne,ie=utils_type.A.copyAttributes(J,G.options,"polygon","borders");for(this.withLines=J.withlines,this.attr_line=ie,this.vertices=[],Z=0;Z<_.length;Z++)this.vertices[Z]=this.board.select(_[Z]),this.vertices[Z]._is_new&&(delete this.vertices[Z]._is_new,this.vertices[Z]._is_new_pol=!0);if(this.vertices.length>0&&this.vertices[this.vertices.length-1].id!==this.vertices[0].id&&this.vertices.push(this.vertices[0]),this.borders=[],this.withLines)for(ee=this.vertices.length-1,te=0;te<ee;te++)Z=(te+1)%ee,ie.id=ie.ids&&ie.ids[Z],ie.name=ie.names&&ie.names[Z],ie.strokecolor=utils_type.A.isArray(ie.colors)&&ie.colors[Z%ie.colors.length]||ie.strokecolor,ie.visible=utils_type.A.exists(J.borders.visible)?J.borders.visible:J.visible,ie.strokecolor===!1&&(ie.strokecolor="none"),(Q=G.create("segment",[this.vertices[Z],this.vertices[Z+1]],ie)).dump=!1,this.borders[Z]=Q,Q.parentPolygon=this,this.addChild(Q);for(this.inherits.push(this.vertices,this.borders),this.id=this.board.setId(this,"Py"),Z=0;Z<this.vertices.length-1;Z++)ne=this.board.select(this.vertices[Z]),utils_type.A.exists(ne._is_new_pol)?(this.addChild(ne),delete ne._is_new_pol):ne.addChild(this);this.board.renderer.drawPolygon(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="polygon",this.createLabel(),this.methodMap=jxg.A.deepCopy(this.methodMap,{borders:"borders",vertices:"vertices",A:"Area",Area:"Area",Perimeter:"Perimeter",L:"Perimeter",boundingBox:"bounds",BoundingBox:"bounds",addPoints:"addPoints",insertPoints:"insertPoints",removePoints:"removePoints",Intersect:"intersect"})},jxg.A.Polygon.prototype=new base_element.A,jxg.A.extend(jxg.A.Polygon.prototype,{pnpoly:function(G,_,J){return geometry.A.pnpoly(G,_,this.vertices,J,this.board)},hasPoint:function(G,_){var J,Z;if(this.evalVisProp("hasinnerpoints")&&this.pnpoly(G,_))return!0;for(Z=this.borders.length,J=0;J<Z;J++)if(this.borders[J].hasPoint(G,_))return!0;return!1},updateRenderer:function(){var G,_;if(!this.needsUpdate)return this;if(this.visPropCalc.visible){for(_=this.vertices.length-(this.elType==="polygonalchain"?0:1),this.isReal=!0,G=0;G<_;++G)if(!this.vertices[G].isReal){this.isReal=!1;break}if(!this.isReal)for(G in this.updateVisibility(!1),this.childElements)this.childElements.hasOwnProperty(G)&&this.childElements[G].setDisplayRendNode(!1)}return this.visPropCalc.visible&&this.board.renderer.updatePolygon(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this},getTextAnchor:function(){var G,_,J,Z,Q;if(this.vertices.length===0)return new base_coords.A(constants.A.COORDS_BY_USER,[1,0,0],this.board);for(J=G=this.vertices[0].X(),Z=_=this.vertices[0].Y(),Q=0;Q<this.vertices.length;Q++)this.vertices[Q].X()<G&&(G=this.vertices[Q].X()),this.vertices[Q].X()>J&&(J=this.vertices[Q].X()),this.vertices[Q].Y()>_&&(_=this.vertices[Q].Y()),this.vertices[Q].Y()<Z&&(Z=this.vertices[Q].Y());return new base_coords.A(constants.A.COORDS_BY_USER,[.5*(G+J),.5*(_+Z)],this.board)},getLabelAnchor:jxg.A.shortcut(jxg.A.Polygon.prototype,"getTextAnchor"),cloneToBackground:function(){var G,_=utils_type.A.getCloneObject(this);return _.vertices=this.vertices,G=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawPolygon(_),this.board.renderer.enhancedRendering=G,this.traces[_.id]=_.rendNode,this},hideElement:function(G){var _;if(jxg.A.deprecated("Element.hideElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!1,this.board.renderer.display(this,!1),!G)for(_=0;_<this.borders.length;_++)this.borders[_].hideElement();this.hasLabel&&utils_type.A.exists(this.label)&&(this.label.hiddenByParent=!0,this.label.visPropCalc.visible&&this.label.hideElement())},showElement:function(G){var _;if(jxg.A.deprecated("Element.showElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!0,this.board.renderer.display(this,!0),!G)for(_=0;_<this.borders.length;_++)this.borders[_].showElement().updateRenderer();return utils_type.A.exists(this.label)&&this.hasLabel&&this.label.hiddenByParent&&(this.label.hiddenByParent=!1,this.label.visPropCalc.visible||this.label.showElement().updateRenderer()),this},Area:function(){return Math.abs(geometry.A.signedPolygon(this.vertices,!0))},Perimeter:function(){var G,_=this.vertices.length,J=0;for(G=1;G<_;++G)J+=this.vertices[G].Dist(this.vertices[G-1]);return J},L:function(){return this.Perimeter()},boundingBox:function(){var G,_,J=[0,0,0,0],Z=this.vertices.length-1;if(Z===0)return J;for(J[0]=this.vertices[0].X(),J[2]=J[0],J[1]=this.vertices[0].Y(),J[3]=J[1],G=1;G<Z;++G)(_=this.vertices[G].X())<J[0]?J[0]=_:_>J[2]&&(J[2]=_),(_=this.vertices[G].Y())>J[1]?J[1]=_:_<J[3]&&(J[3]=_);return J},bounds:function(){return this.boundingBox()},remove:function(){var G;for(G=0;G<this.borders.length;G++)this.board.removeObject(this.borders[G]);base_element.A.prototype.remove.call(this)},findPoint:function(G){var _;if(!utils_type.A.isPoint(G))return-1;for(_=0;_<this.vertices.length;_++)if(this.vertices[_].id===G.id)return _;return-1},addPoints:function(G){var _,J=Array.prototype.slice.call(arguments);return _=this.elType==="polygonalchain"?this.vertices.length-1:this.vertices.length-2,this.insertPoints.apply(this,[_].concat(J))},insertPoints:function(G,_){var J,Z,Q,ee,te;if(arguments.length===0)return this;if(Q=this.vertices.length-1,this.elType==="polygon"&&Q--,G<-1||G>Q)return this;for(Z=arguments.length-1,J=1;J<Z+1;J++)(te=utils_type.A.providePoints(this.board,[arguments[J]],{},"polygon",["vertices"])[0])._is_new&&(this.addChild(te),delete te._is_new),this.vertices.splice(G+J,0,te);if(this.withLines)for(ee=G+1,this.elType==="polygon"?G<0?(this.vertices[this.vertices.length-1]=this.vertices[0],this.borders[this.borders.length-1].point2=this.vertices[this.vertices.length-1]):this.borders[G].point2=this.vertices[ee]:G>=0&&(G<this.borders.length?this.borders[G].point2=this.vertices[ee]:ee=G),J=ee;J<ee+Z;J++)this.borders.splice(J,0,this.board.create("segment",[this.vertices[J],this.vertices[J+1]],this.attr_line));return this.inherits=[],this.inherits.push(this.vertices,this.borders),this.board.update(),this},removePoints:function(G){var _,J,Z,Q,ee=[],te=[],ne=[],ie=[];for(this.elType==="polygon"&&(Q=this.vertices.pop()),_=0;_<arguments.length;_++)Z=arguments[_],utils_type.A.isPoint(Z)&&(Z=this.findPoint(Z)),utils_type.A.isNumber(Z)&&Z>-1&&Z<this.vertices.length&&utils_type.A.indexOf(ne,Z)===-1&&ne.push(Z);if(ne.length===0)return this.elType==="polygon"&&this.vertices.push(Q),this;for(_=0;_<ne.length;_++)this.vertices[ne[_]].removeChild(this);for(ne=ne.sort(),ee=this.vertices.slice(),te=this.borders.slice(),this.withLines&&ie.push([ne[ne.length-1]]),_=ne.length-1;_>-1;_--)ee[ne[_]]=-1,this.withLines&&ne.length>1&&ne[_]-1>ne[_-1]&&(ie[ie.length-1][1]=ne[_],ie.push([ne[_-1]]));for(this.withLines&&(ie[ie.length-1][1]=ne[0]),this.vertices=[],_=0;_<ee.length;_++)utils_type.A.isPoint(ee[_])&&this.vertices.push(ee[_]);if(this.elType==="polygon"&&this.vertices.length>1&&this.vertices[this.vertices.length-1].id!==this.vertices[0].id&&this.vertices.push(this.vertices[0]),this.withLines){for(_=0;_<ie.length;_++){for(J=ie[_][1]-1;J<ie[_][0]+1;J++)J<0?this.elType==="polygon"&&(this.board.removeObject(this.borders[te.length-1]),te[te.length-1]=-1):J<te.length&&(this.board.removeObject(this.borders[J]),te[J]=-1);ie[_][1]!==0&&ie[_][0]!==ee.length-1&&(te[ie[_][0]-1]=this.board.create("segment",[ee[ie[_][1]-1],ee[ie[_][0]+1]],this.attr_line))}for(this.borders=[],_=0;_<te.length;_++)te[_]!==-1&&this.borders.push(te[_]);this.elType==="polygon"&&this.vertices.length>2&&(ie[0][1]===this.vertices.length-1||ie[ie.length-1][1]===0)&&this.borders.push(this.board.create("segment",[this.vertices[this.vertices.length-2],this.vertices[0]],this.attr_line))}return this.inherits=[],this.inherits.push(this.vertices,this.borders),this.board.update(),this},getParents:function(){return this.setParents(this.vertices),this.parents},getAttributes:function(){var G,_=base_element.A.prototype.getAttributes.call(this);if(this.withLines)for(_.lines=_.lines||{},_.lines.ids=[],_.lines.colors=[],G=0;G<this.borders.length;G++)_.lines.ids.push(this.borders[G].id),_.lines.colors.push(this.borders[G].visProp.strokecolor);return _},snapToGrid:function(){var G,_;for(_=!!this.evalVisProp("snaptogrid"),G=0;G<this.vertices.length;G++)this.vertices[G].handleSnapToGrid(_,!0)},setPositionDirectly:function(G,_,J){var Z,Q,ee,te=new base_coords.A(G,_,this.board),ne=new base_coords.A(G,J,this.board);for(ee=this.vertices.length-1,Q=0;Q<ee;Q++)if(!this.vertices[Q].draggable())return this;return Z=statistics.A.subtract(te.usrCoords,ne.usrCoords),this.board.create("transform",Z.slice(1),{type:"translate"}).applyOnce(this.vertices.slice(0,-1)),this},sutherlandHodgman:function(G){var _,J,Z,Q,ee,te,ne,ie=jxg.A.Math.Geometry.sortVertices(this.vertices),re=jxg.A.Math.Geometry.sortVertices(G.vertices),oe=ie.length-1,se=re.length-1,ae=[],le=function(ue,de,pe){return(de[1]-ue[1])*(pe[2]-ue[2])-(de[2]-ue[2])*(pe[1]-ue[1])>=0};for(Z=0;Z<se;Z++)ae.push(re[Z]);for(Z=0;Z<oe;Z++)for(J=ae.slice(0),ae=[],ee=J[(_=J.length)-1],Q=0;Q<_;Q++)te=J[Q],le(ie[Z],ie[Z+1],te)?(le(ie[Z],ie[Z+1],ee)||((ne=jxg.A.Math.Geometry.meetSegmentSegment(ee,te,ie[Z],ie[Z+1]))[0][1]/=ne[0][0],ne[0][2]/=ne[0][0],ne[0][0]=1,ae.push(ne[0])),ae.push(te)):le(ie[Z],ie[Z+1],ee)&&((ne=jxg.A.Math.Geometry.meetSegmentSegment(ee,te,ie[Z],ie[Z+1]))[0][1]/=ne[0][0],ne[0][2]/=ne[0][0],ne[0][0]=1,ae.push(ne[0])),ee=te;return ae},intersect:function(G){return this.sutherlandHodgman(G)}}),jxg.A.createPolygon=function(G,_,J){var Z,Q,ee,te,ne,ie,re=[],oe=!1;if(utils_type.A.copyAttributes(J,G.options,"polygon"),(te=G.select(_[0]))===null&&(te=_[0]),utils_type.A.isObject(te)&&te.type===constants.A.OBJECT_TYPE_POLYGON&&utils_type.A.isTransformationOrArray(_[1]))for(oe=!0,ee=te.vertices.length-1,ie=utils_type.A.copyAttributes(J,G.options,"polygon","vertices"),Q=0;Q<ee;Q++)ie.withlabel&&(ie.name=te.vertices[Q].name===""?"":te.vertices[Q].name+"'"),re.push(G.create("point",[te.vertices[Q],_[1]],ie));else if((re=utils_type.A.providePoints(G,_,J,"polygon",["vertices"]))===!1)throw new Error("JSXGraph: Can't create polygon / polygonalchain with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates. Alternatively, a polygon and a transformation can be supplied");if(ne=utils_type.A.copyAttributes(J,G.options,"polygon"),(Z=new jxg.A.Polygon(G,re,ne)).isDraggable=!0,oe)for(Z.prepareUpdate().update().updateVisibility().updateRenderer(),ee=te.vertices.length-1,Q=0;Q<ee;Q++)re[Q].prepareUpdate().update().updateVisibility().updateRenderer();return Z},jxg.A.createRegularPolygon=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe=[];if(ee=_[(ne=_.length)-1],utils_type.A.isNumber(ee)&&(_.length!==3||ee<3))throw new Error("JSXGraph: A regular polygon needs two point types and a number > 2 as input.");if(utils_type.A.isNumber(G.select(ee))?(ne--,ie=!1):(ee=ne,ie=!0),(oe=utils_type.A.providePoints(G,_.slice(0,ne),J,"regularpolygon",["vertices"]))===!1)throw new Error("JSXGraph: Can't create regular polygon with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates");for(re=utils_type.A.copyAttributes(J,G.options,"regularpolygon","vertices"),Q=2;Q<ee;Q++)te=G.create("transform",[Math.PI*(2-(ee-2)/ee),oe[Q-1]],{type:"rotate"}),ie?(oe[Q].addTransform(oe[Q-2],te),oe[Q].fullUpdate()):(utils_type.A.isArray(re.ids)&&re.ids.length>=ee-2&&(re.id=re.ids[Q-2]),oe[Q]=G.create("point",[oe[Q-2],te],re),oe[Q].type=constants.A.OBJECT_TYPE_CAS,oe[Q].isDraggable=!0,oe[Q].visProp.fixed=!1);return re=utils_type.A.copyAttributes(J,G.options,"regularpolygon"),(Z=G.create("polygon",oe,re)).elType="regularpolygon",Z},jxg.A.createPolygonalChain=function(G,_,J){var Z,Q;return Z=utils_type.A.copyAttributes(J,G.options,"polygonalchain"),(Q=G.create("polygon",_,Z)).elType="polygonalchain",Q.vertices.pop(),G.removeObject(Q.borders[Q.borders.length-1]),Q.borders.pop(),Q},jxg.A.createParallelogram=function(G,_,J){var Z,Q,ee,te,ne;if((ee=utils_type.A.providePoints(G,_,J,"polygon",["vertices"]))===!1||ee.length<3)throw new Error("JSXGraph: Can't create parallelogram with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates.");return ne=utils_type.A.copyAttributes(J,G.options,"parallelogram","parallelpoint"),Q=G.create("parallelpoint",ee,ne),te=utils_type.A.copyAttributes(J,G.options,"parallelogram"),(Z=G.create("polygon",[ee[0],ee[1],Q,ee[2]],te)).elType="parallelogram",Z.parallelPoint=Q,Z.isDraggable=!0,Q.isDraggable=!0,Q.visProp.fixed=!1,Z},jxg.A.registerElement("polygon",jxg.A.createPolygon),jxg.A.registerElement("regularpolygon",jxg.A.createRegularPolygon),jxg.A.registerElement("polygonalchain",jxg.A.createPolygonalChain),jxg.A.registerElement("parallelogram",jxg.A.createParallelogram);var polygon=jxg.A.Polygon;jxg.A.Curve=function(G,_,J){this.constructor(G,J,constants.A.OBJECT_TYPE_CURVE,constants.A.OBJECT_CLASS_CURVE),this.points=[],this.numberPoints=this.evalVisProp("numberpointshigh"),this.bezierDegree=1,this.dataX=null,this.dataY=null,this.ticks=[],this.qdt=null,utils_type.A.exists(_[0])?this.varname=_[0]:this.varname="x",this.xterm=_[1],this.yterm=_[2],this.generateTerm(this.varname,this.xterm,this.yterm,_[3],_[4]),this.updateCurve(),this.id=this.board.setId(this,"G"),this.board.renderer.drawCurve(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="curve",this.createLabel(),utils_type.A.isString(this.xterm)&&this.notifyParents(this.xterm),utils_type.A.isString(this.yterm)&&this.notifyParents(this.yterm),this.methodMap=utils_type.A.deepCopy(this.methodMap,{generateTerm:"generateTerm",setTerm:"generateTerm",move:"moveTo",moveTo:"moveTo",MinX:"minX",MaxX:"maxX"})},jxg.A.Curve.prototype=new base_element.A,jxg.A.extend(jxg.A.Curve.prototype,{minX:function(){return this.evalVisProp("curvetype")==="polar"?0:new base_coords.A(constants.A.COORDS_BY_SCREEN,[.1*-this.board.canvasWidth,0],this.board,!1).usrCoords[1]},maxX:function(){return this.evalVisProp("curvetype")==="polar"?2*Math.PI:new base_coords.A(constants.A.COORDS_BY_SCREEN,[1.1*this.board.canvasWidth,0],this.board,!1).usrCoords[1]},X:function(G){return NaN},Y:function(G){return NaN},Z:function(G){return 1},Ft:function(G){var _=[this.Z(G),this.X(G),this.Y(G)];return this.transformations.length>0&&(_=math.A.matVecMult(this.transformMat,_)),_[1]/=_[0],_[2]/=_[0],_[0]/=_[0],_},hasPoint:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue,de,pe,fe,_e,ye=[],be=this.evalVisProp("numberpointslow"),Ae=(this.maxX()-this.minX())/be,Ce=1/0,Ee=!0;if(utils_type.A.isObject(this.evalVisProp("precision"))?(ue=this.board._inputDevice,le=this.evalVisProp("precision."+ue)):le=this.board.options.precision.hasPoint,G=(ie=new base_coords.A(constants.A.COORDS_BY_SCREEN,[G,_],this.board,!1)).usrCoords[1],_=ie.usrCoords[2],this.bezierDegree===1&&this.evalVisProp("hasinnerpoints")&&geometry.A.windingNumber([1,G,_],this.points,!0)!==0)return!0;if(le+=.5*this.evalVisProp("strokewidth"),le*=le,de=this.board.unitX*this.board.unitX,pe=this.board.unitY*this.board.unitY,_e=this.minX(),this.maxX(),utils_type.A.exists(this._visibleArea)&&(_e=this._visibleArea[0],Ae=(this._visibleArea[1]-_e)/be),(fe=this.evalVisProp("curvetype"))==="parameter"||fe==="polar")for(this.transformations.length>0&&(this.updateTransformMatrix(),oe=math.A.inverse(this.transformMat),G=(Q=math.A.matVecMult(oe,[1,G,_]))[1],_=Q[2]),ee=0,Z=_e;ee<be;ee++){if((Ce=(G-(te=this.X(Z,Ee)))*(G-te)*de+(_-(ne=this.Y(Z,Ee)))*(_-ne)*pe)<=le)return!0;Z+=Ae}else if(fe==="plot"||fe==="functiongraph"){for((!utils_type.A.exists(J)||J<0)&&(J=0),utils_type.A.exists(this.qdt)&&this.evalVisProp("useqdt")&&this.bezierDegree!==3?re=(se=(ae=this.qdt.query(new base_coords.A(constants.A.COORDS_BY_USER,[G,_],this.board))).points).length:(se=this.points,re=this.numberPoints-1),ee=J;ee<re;ee++)if(this.bezierDegree===3?ye=geometry.A.projectCoordsToBeziersegment([1,G,_],this,ee):ae?(se[ee].prev&&(ye=geometry.A.projectCoordsToSegment([1,G,_],se[ee].prev.usrCoords,se[ee].usrCoords)),se[ee].next&&se[ee+1]!==se[ee].next&&(ye=geometry.A.projectCoordsToSegment([1,G,_],se[ee].usrCoords,se[ee].next.usrCoords))):ye=geometry.A.projectCoordsToSegment([1,G,_],se[ee].usrCoords,se[ee+1].usrCoords),ye[1]>=0&&ye[1]<=1&&(G-ye[0][1])*(G-ye[0][1])*de+(_-ye[0][2])*(_-ye[0][2])*pe<=le)return!0;return!1}return Ce<le},allocatePoints:function(){var G,_;if(_=this.numberPoints,this.points.length<this.numberPoints)for(G=this.points.length;G<_;G++)this.points[G]=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],this.board,!1)},update:function(){return this.needsUpdate&&(this.evalVisProp("trace")&&this.cloneToBackground(!0),this.updateCurve()),this},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=plot.checkReal(this.points),this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateCurve(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},updateDataArray:function(){},updateCurve:function(){var G,_,J,Z,Q,ee,te=this.visProp.plotversion,ne=!1;if(this.updateTransformMatrix(),this.updateDataArray(),J=this.minX(),Z=this.maxX(),utils_type.A.exists(this.dataX))for(this.numberPoints=this.dataX.length,_=this.numberPoints,this.allocatePoints(),G=0;G<_;G++)Q=G,utils_type.A.exists(this.dataY)?(ee=G,this.points[G].setCoordinates(constants.A.COORDS_BY_USER,[this.dataX[G],this.dataY[G]],!1)):(ee=this.X(Q),this.points[G].setCoordinates(constants.A.COORDS_BY_USER,[this.dataX[G],this.Y(ee,ne)],!1)),this.points[G]._t=G,ne=!0;else if(this.evalVisProp("doadvancedplot")?te===1||this.evalVisProp("doadvancedplotold")?plot.updateParametricCurveOld(this,J,Z):te===2?plot.updateParametricCurve_v2(this,J,Z):te===3?plot.updateParametricCurve_v3(this,J,Z):te===4?plot.updateParametricCurve_v4(this,J,Z):plot.updateParametricCurve_v2(this,J,Z):(this.board.updateQuality===this.board.BOARD_QUALITY_HIGH?this.numberPoints=this.evalVisProp("numberpointshigh"):this.numberPoints=this.evalVisProp("numberpointslow"),this.allocatePoints(),plot.updateParametricCurveNaive(this,J,Z,this.numberPoints)),_=this.numberPoints,this.evalVisProp("useqdt")&&this.board.updateQuality===this.board.BOARD_QUALITY_HIGH)for(this.qdt=new qdt(this.board.getBoundingBox()),G=0;G<this.points.length;G++)this.qdt.insert(this.points[G]),G>0&&(this.points[G].prev=this.points[G-1]),G<_-1&&(this.points[G].next=this.points[G+1]);for(this.evalVisProp("curvetype")!=="plot"&&this.evalVisProp("rdpsmoothing")&&(this.points=numerics.A.RamerDouglasPeucker(this.points,.2),this.numberPoints=this.points.length),_=this.numberPoints,G=0;G<_;G++)this.updateTransform(this.points[G]);return this},updateTransformMatrix:function(){var G,_,J=this.transformations.length;for(this.transformMat=[[1,0,0],[0,1,0],[0,0,1]],_=0;_<J;_++)(G=this.transformations[_]).update(),this.transformMat=math.A.matMatMult(G.matrix,this.transformMat);return this},updateTransform:function(G){var _;return this.transformations.length>0&&(_=math.A.matVecMult(this.transformMat,G.usrCoords),G.setCoordinates(constants.A.COORDS_BY_USER,_,!1,!0)),G},addTransform:function(G){var _,J=utils_type.A.isArray(G)?G:[G],Z=J.length;for(_=0;_<Z;_++)this.transformations.push(J[_]);return this},interpolationFunctionFromArray:function(G){var _="data"+G,J=this;return function(Z,Q){var ee,te,ne,ie,re=J[_],oe=re.length,se=[];if(isNaN(Z))return NaN;if(Z<0)return utils_type.A.isFunction(re[0])?re[0]():re[0];if(J.bezierDegree===3){if(Z>=(oe-1)/3)return utils_type.A.isFunction(re[re.length-1])?re[re.length-1]():re[re.length-1];for(ee=3*Math.floor(Z),ie=1-(ne=Z%1),te=0;te<4;te++)utils_type.A.isFunction(re[ee+te])?se[te]=re[ee+te]():se[te]=re[ee+te];return ie*ie*(ie*se[0]+3*ne*se[1])+(3*ie*se[2]+ne*se[3])*ne*ne}if((ee=Z>oe-2?oe-2:parseInt(Math.floor(Z),10))===Z)return utils_type.A.isFunction(re[ee])?re[ee]():re[ee];for(te=0;te<2;te++)utils_type.A.isFunction(re[ee+te])?se[te]=re[ee+te]():se[te]=re[ee+te];return se[0]+(se[1]-se[0])*(Z-ee)}},generateTerm:function(G,_,J,Z,Q){var ee,te,ne;utils_type.A.isArray(_)?(this.dataX=_,this.numberPoints=this.dataX.length,this.X=this.interpolationFunctionFromArray.apply(this,["X"]),this.visProp.curvetype="plot",this.isDraggable=!0):(this.X=utils_type.A.createFunction(_,this.board,G),utils_type.A.isString(_)?this.visProp.curvetype="functiongraph":(utils_type.A.isFunction(_)||utils_type.A.isNumber(_))&&(this.visProp.curvetype="parameter"),this.isDraggable=!0),utils_type.A.isArray(J)?(this.dataY=J,this.Y=this.interpolationFunctionFromArray.apply(this,["Y"])):utils_type.A.exists(J)?this.Y=utils_type.A.createFunction(J,this.board,G):(ne=math.A.transpose(_),this.dataX=ne[0],this.dataY=ne[1],this.numberPoints=this.dataX.length,this.Y=this.interpolationFunctionFromArray.apply(this,["Y"])),utils_type.A.isFunction(_)&&utils_type.A.isArray(J)&&(ee=utils_type.A.createFunction(J[0],this.board,""),te=utils_type.A.createFunction(J[1],this.board,""),this.X=function(ie){return _(ie)*Math.cos(ie)+ee()},this.X.deps=ee.deps,this.Y=function(ie){return _(ie)*Math.sin(ie)+te()},this.Y.deps=te.deps,this.visProp.curvetype="polar"),utils_type.A.exists(Z)?this.minX=utils_type.A.createFunction(Z,this.board,""):delete this.minX,utils_type.A.exists(Q)?this.maxX=utils_type.A.createFunction(Q,this.board,""):delete this.maxX,this.addParentsFromJCFunctions([this.X,this.Y,this.minX,this.maxX])},notifyParents:function(G){var _,J,Z,Q=!1;for(_ in Z={xterm:1,yterm:1})if(Z.hasOwnProperty(_)&&this.hasOwnProperty(_)&&this[_].origin)for(J in Q=!0,this[_].origin.deps)this[_].origin.deps.hasOwnProperty(J)&&this[_].origin.deps[J].addChild(this);Q||geonext.A.findDependencies(this,G,this.board)},getLabelPosition:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue,de=1.5;return re=this.minX(),oe=this.maxX(),se=numerics.A.findDomain(this.X,[re,oe],null,!1),se=numerics.A.findDomain(this.Y,se,null,!1),re=Math.max(se[0],se[0]),oe=Math.min(se[1],se[1]),Q=utils_type.A.parsePosition(G),ie=utils_type.A.parseNumber(Q.pos,oe-re,1),Q.pos.indexOf("fr")<0&&Q.pos.indexOf("%")<0&&(ie=0),ae=re+ie,J=this.X(ae),Z=this.Y(ae),isNaN(J+Z)&&(ae=re+(ie/=oe-re),J=this.X(re)+ie*(this.X(oe)-this.X(re)),Z=this.Y(re)+ie*(this.Y(oe)-this.Y(re))),ee=new base_coords.A(constants.A.COORDS_BY_USER,[J,Z],this.board).scrCoords,ae<re+(ne=math.A.eps)?(le=(this.X(ae+ne)-this.X(ae))/ne,ue=(this.Y(ae+ne)-this.Y(ae))/ne):ae>oe-ne?(le=(this.X(ae)-this.X(ae-ne))/ne,ue=(this.Y(ae)-this.Y(ae-ne))/ne):(le=.5*(this.X(ae+ne)-this.X(ae-ne))/ne,ue=.5*(this.Y(ae+ne)-this.Y(ae-ne))/ne),le=isNaN(le)?1:le,ue=isNaN(ue)?1:ue,te=math.A.hypot(le,ue),Q.side==="left"?ue*=-1:le*=-1,utils_type.A.exists(this.label)&&(de=.5*_/te),J=ee[1]+ue*this.label.size[0]*de,Z=ee[2]-le*this.label.size[1]*de,new base_coords.A(constants.A.COORDS_BY_SCREEN,[J,Z],this.board)},getLabelAnchor:function(){var G,_,J,Z,Q=.05*this.board.canvasWidth,ee=.05*this.board.canvasHeight,te=.95*this.board.canvasWidth,ne=.95*this.board.canvasHeight;if(!utils_type.A.exists(this.label))return new base_coords.A(constants.A.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(J=this.label.evalVisProp("position"),!utils_type.A.isString(J))return new base_coords.A(constants.A.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(!(J.indexOf("right")<0&&J.indexOf("left")<0))return this.getLabelPosition(J,this.label.evalVisProp("distance"));switch(this.evalVisProp("label.position")){case"ulft":G=Q,_=ee;break;case"llft":G=Q,_=ne;break;case"rt":G=te,_=.5*ne;break;case"lrt":G=te,_=ne;break;case"urt":G=te,_=ee;break;case"top":G=.5*te,_=ee;break;case"bot":G=.5*te,_=ne;break;default:G=Q,_=.5*ne}return Z=new base_coords.A(constants.A.COORDS_BY_SCREEN,[G,_],this.board,!1),geometry.A.projectCoordsToCurve(Z.usrCoords[1],Z.usrCoords[2],0,this,this.board)[0]},cloneToBackground:function(){var G,_=utils_type.A.getCloneObject(this);return _.points=this.points.slice(0),_.bezierDegree=this.bezierDegree,_.numberPoints=this.numberPoints,G=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawCurve(_),this.board.renderer.enhancedRendering=G,this.traces[_.id]=_.rendNode,this},bounds:function(){var G,_,J,Z=1/0,Q=-1/0,ee=1/0,te=-1/0,ne=this.points.length;if(this.bezierDegree===3){for(G=0;G<ne;G++)this.points[G].X=utils_type.A.bind(function(){return this.usrCoords[1]},this.points[G]),this.points[G].Y=utils_type.A.bind(function(){return this.usrCoords[2]},this.points[G]);return J=(_=numerics.A.bezier(this.points))[3](),Z=numerics.A.fminbr(function(ie){return _[0](ie)},[0,J]),Q=numerics.A.fminbr(function(ie){return-_[0](ie)},[0,J]),ee=numerics.A.fminbr(function(ie){return _[1](ie)},[0,J]),te=numerics.A.fminbr(function(ie){return-_[1](ie)},[0,J]),Z=_[0](Z),Q=_[0](Q),ee=_[1](ee),[Z,te=_[1](te),Q,ee]}for(G=0;G<ne;G++)Z>this.points[G].usrCoords[1]&&(Z=this.points[G].usrCoords[1]),Q<this.points[G].usrCoords[1]&&(Q=this.points[G].usrCoords[1]),ee>this.points[G].usrCoords[2]&&(ee=this.points[G].usrCoords[2]),te<this.points[G].usrCoords[2]&&(te=this.points[G].usrCoords[2]);return[Z,te,Q,ee]},getParents:function(){var G=[this.xterm,this.yterm,this.minX(),this.maxX()];return this.parents.length!==0&&(G=this.parents),G},moveTo:function(G){var _,J=[];return this.points.length>0&&!this.evalVisProp("fixed")?(_=this.points[0],J=G.length===3?[G[0]-_.usrCoords[0],G[1]-_.usrCoords[1],G[2]-_.usrCoords[2]]:[G[0]-_.usrCoords[1],G[1]-_.usrCoords[2]],this.setPosition(constants.A.COORDS_BY_USER,J),this.board.update(this)):this},getTransformationSource:function(){var G,_;return utils_type.A.exists(this._transformationSource)&&(_=this._transformationSource).elementClass===constants.A.OBJECT_CLASS_CURVE&&(G=!0),[G,_]}}),jxg.A.createCurve=function(G,_,J){var Z,Q,ee=utils_type.A.copyAttributes(J,G.options,"curve");return Z=G.select(_[0],!0),utils_type.A.isTransformationOrArray(_[1])&&utils_type.A.isObject(Z)&&(Z.type===constants.A.OBJECT_TYPE_CURVE||Z.type===constants.A.OBJECT_TYPE_ANGLE||Z.type===constants.A.OBJECT_TYPE_ARC||Z.type===constants.A.OBJECT_TYPE_CONIC||Z.type===constants.A.OBJECT_TYPE_SECTOR)?(Z.type===constants.A.OBJECT_TYPE_SECTOR?ee=utils_type.A.copyAttributes(J,G.options,"sector"):Z.type===constants.A.OBJECT_TYPE_ARC?ee=utils_type.A.copyAttributes(J,G.options,"arc"):Z.type===constants.A.OBJECT_TYPE_ANGLE?(utils_type.A.exists(J.withLabel)||(J.withLabel=!1),ee=utils_type.A.copyAttributes(J,G.options,"angle")):ee=utils_type.A.copyAttributes(J,G.options,"curve"),ee=utils_type.A.copyAttributes(ee,G.options,"curve"),(Q=new jxg.A.Curve(G,["x",[],[]],ee)).updateDataArray=function(){var te,ne=Z.numberPoints;for(this.bezierDegree=Z.bezierDegree,this.dataX=[],this.dataY=[],te=0;te<ne;te++)this.dataX.push(Z.points[te].usrCoords[1]),this.dataY.push(Z.points[te].usrCoords[2]);return this},Q.addTransform(_[1]),Z.addChild(Q),Q.setParents([Z]),Q._transformationSource=Z,Q):(ee=utils_type.A.copyAttributes(J,G.options,"curve"),new jxg.A.Curve(G,["x"].concat(_),ee))},jxg.A.registerElement("curve",jxg.A.createCurve),jxg.A.createFunctiongraph=function(G,_,J){var Z,Q=["x","x"].concat(_);return Z=utils_type.A.copyAttributes(J,G.options,"functiongraph"),(Z=utils_type.A.copyAttributes(Z,G.options,"curve")).curvetype="functiongraph",new jxg.A.Curve(G,Q,Z)},jxg.A.registerElement("functiongraph",jxg.A.createFunctiongraph),jxg.A.registerElement("plot",jxg.A.createFunctiongraph),jxg.A.createSpline=function(G,_,J){var Z,Q,ee;return Q=function(){var te,ne=[],ie=[];return[function(re,oe){var se,ae,le;if(!oe){if(ne=[],ie=[],_.length===2&&utils_type.A.isArray(_[0])&&utils_type.A.isArray(_[1])&&_[0].length===_[1].length)for(se=0;se<_[0].length;se++)utils_type.A.isFunction(_[0][se])?ne.push(_[0][se]()):ne.push(_[0][se]),utils_type.A.isFunction(_[1][se])?ie.push(_[1][se]()):ie.push(_[1][se]);else for(se=0;se<_.length;se++)if(utils_type.A.isPoint(_[se]))ne.push(_[se].X()),ie.push(_[se].Y());else if(utils_type.A.isArray(_[se])&&_[se].length===2)for(ae=0;ae<_.length;ae++)utils_type.A.isFunction(_[ae][0])?ne.push(_[ae][0]()):ne.push(_[ae][0]),utils_type.A.isFunction(_[ae][1])?ie.push(_[ae][1]()):ie.push(_[ae][1]);else utils_type.A.isFunction(_[se])&&_[se]().length===2&&(le=_[se](),ne.push(le[0]),ie.push(le[1]));te=numerics.A.splineDef(ne,ie)}return numerics.A.splineEval(re,ne,ie,te)},function(){return ne[0]},function(){return ne[ne.length-1]}]},(J=utils_type.A.copyAttributes(J,G.options,"curve")).curvetype="functiongraph",ee=Q(),(Z=new jxg.A.Curve(G,["x","x",ee[0],ee[1],ee[2]],J)).setParents(_),Z.elType="spline",Z},jxg.A.registerElement("spline",jxg.A.createSpline),jxg.A.createCardinalSpline=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,le=`
Possible parent types: [points:array, tau:number|function, type:string]`;if(!utils_type.A.exists(_[0])||!utils_type.A.isArray(_[0]))throw new Error("JSXGraph: JXG.createCardinalSpline: argument 1 'points' has to be array of points or coordinate pairs"+le);if(!utils_type.A.exists(_[1])||!utils_type.A.isNumber(_[1])&&!utils_type.A.isFunction(_[1]))throw new Error("JSXGraph: JXG.createCardinalSpline: argument 2 'tau' has to be number between [0,1] or function'"+le);if(ne=utils_type.A.exists(_[2])&&utils_type.A.isString(_[2])?_[2]:"uniform",J=utils_type.A.copyAttributes(J,G.options,"curve"),(J=utils_type.A.copyAttributes(J,G.options,"cardinalspline")).curvetype="parameter",ie=_[0],re=[],!J.isarrayofcoordinates&&ie.length===2&&utils_type.A.isArray(ie[0])&&utils_type.A.isArray(ie[1])&&ie[0].length===ie[1].length)for(oe=0;oe<ie[0].length;oe++)re[oe]=[],utils_type.A.isFunction(ie[0][oe])?re[oe].push(ie[0][oe]()):re[oe].push(ie[0][oe]),utils_type.A.isFunction(ie[1][oe])?re[oe].push(ie[1][oe]()):re[oe].push(ie[1][oe]);else for(oe=0;oe<ie.length;oe++)utils_type.A.isString(ie[oe])?re.push(G.select(ie[oe])):utils_type.A.isPoint(ie[oe])?re.push(ie[oe]):utils_type.A.isArray(ie[oe])&&ie[oe].length===2?(re[oe]=[],utils_type.A.isFunction(ie[oe][0])?re[oe].push(ie[oe][0]()):re[oe].push(ie[oe][0]),utils_type.A.isFunction(ie[oe][1])?re[oe].push(ie[oe][1]()):re[oe].push(ie[oe][1])):utils_type.A.isFunction(ie[oe])&&ie[oe]().length===2&&re.push(_[oe]());if(J.createpoints===!0)ee=utils_type.A.providePoints(G,re,J,"cardinalspline",["points"]);else for(ee=[],Q=function(ue){return{X:function(){return re[ue][0]},Y:function(){return re[ue][1]},Dist:function(de){var pe=this.X()-de.X(),fe=this.Y()-de.Y();return math.A.hypot(pe,fe)}}},oe=0;oe<re.length;oe++)utils_type.A.isPoint(re[oe])?ee.push(re[oe]):ee.push(Q(oe));for(te=_[1],ae=["x"].concat(numerics.A.CardinalSpline(ee,te,ne)),Z=new jxg.A.Curve(G,ae,J),se=ee.length,Z.setParents(ee),oe=0;oe<se;oe++)ie=ee[oe],utils_type.A.isPoint(ie)&&(utils_type.A.exists(ie._is_new)?(Z.addChild(ie),delete ie._is_new):ie.addChild(Z));return Z.elType="cardinalspline",Z},jxg.A.registerElement("cardinalspline",jxg.A.createCardinalSpline),jxg.A.createMetapostSpline=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se=`
Possible parent types: [points:array, controls:object`;if(!utils_type.A.exists(_[0])||!utils_type.A.isArray(_[0]))throw new Error("JSXGraph: JXG.createMetapostSpline: argument 1 'points' has to be array of points or coordinate pairs"+se);if(!utils_type.A.exists(_[1])||!utils_type.A.isObject(_[1]))throw new Error("JSXGraph: JXG.createMetapostSpline: argument 2 'controls' has to be a JavaScript object'"+se);if(J=utils_type.A.copyAttributes(J,G.options,"curve"),(J=utils_type.A.copyAttributes(J,G.options,"metapostspline")).curvetype="parameter",ne=_[0],ie=[],!J.isarrayofcoordinates&&ne.length===2&&utils_type.A.isArray(ne[0])&&utils_type.A.isArray(ne[1])&&ne[0].length===ne[1].length)for(re=0;re<ne[0].length;re++)ie[re]=[],utils_type.A.isFunction(ne[0][re])?ie[re].push(ne[0][re]()):ie[re].push(ne[0][re]),utils_type.A.isFunction(ne[1][re])?ie[re].push(ne[1][re]()):ie[re].push(ne[1][re]);else for(re=0;re<ne.length;re++)utils_type.A.isString(ne[re])?ie.push(G.select(ne[re])):utils_type.A.isPoint(ne[re])?ie.push(ne[re]):utils_type.A.isArray(ne[re])&&ne[re].length===2?(ie[re]=[],utils_type.A.isFunction(ne[re][0])?ie[re].push(ne[re][0]()):ie[re].push(ne[re][0]),utils_type.A.isFunction(ne[re][1])?ie[re].push(ne[re][1]()):ie[re].push(ne[re][1])):utils_type.A.isFunction(ne[re])&&ne[re]().length===2&&ie.push(_[re]());if(J.createpoints===!0)ee=utils_type.A.providePoints(G,ie,J,"metapostspline",["points"]);else for(ee=[],Q=function(ae){return{X:function(){return ie[ae][0]},Y:function(){return ie[ae][1]}}},re=0;re<ie.length;re++)utils_type.A.isPoint(ie[re])?ee.push(ie[re]):ee.push(Q);for(te=_[1],(Z=new jxg.A.Curve(G,["t",[],[],0,ne.length-1],J)).updateDataArray=function(){var ae,le,ue=ee.length,de=[];for(le=0;le<ue;le++)de.push([ee[le].X(),ee[le].Y()]);ae=metapost.curve(de,te),this.dataX=ae[0],this.dataY=ae[1]},Z.bezierDegree=3,oe=ee.length,Z.setParents(ee),re=0;re<oe;re++)utils_type.A.isPoint(ee[re])&&ee[re].addChild(Z);return Z.elType="metapostspline",Z},jxg.A.registerElement("metapostspline",jxg.A.createMetapostSpline),jxg.A.createRiemannsum=function(G,_,J){var Z,Q,ee,te,ne,ie;if((ie=utils_type.A.copyAttributes(J,G.options,"riemannsum")).curvetype="plot",ee=_[0],Z=utils_type.A.createFunction(_[1],G,""),!utils_type.A.exists(Z))throw new Error(`JSXGraph: JXG.createRiemannsum: argument '2' n has to be number or function.
Possible parent types: [function,n:number|function,type,start:number|function,end:number|function]`);if(typeof _[2]=="string"&&(_[2]="'"+_[2]+"'"),Q=utils_type.A.createFunction(_[2],G,""),!utils_type.A.exists(Q))throw new Error(`JSXGraph: JXG.createRiemannsum: argument 3 'type' has to be string or function.
Possible parent types: [function,n:number|function,type,start:number|function,end:number|function]`);return te=[[0],[0]].concat(_.slice(3)),(ne=G.create("curve",te,ie)).sum=0,ne.Value=function(){return this.sum},ne.updateDataArray=function(){var re=numerics.A.riemann(ee,Z(),Q(),this.minX(),this.maxX());this.dataX=re[0],this.dataY=re[1],this.sum=re[2]},ne.addParentsFromJCFunctions([Z,Q]),ne},jxg.A.registerElement("riemannsum",jxg.A.createRiemannsum),jxg.A.createTracecurve=function(G,_,J){var Z,Q,ee,te;if(_.length!==2)throw new Error(`JSXGraph: Can't create trace curve with given parent'
Possible parent types: [glider, point]`);if(Q=G.select(_[0]),ee=G.select(_[1]),Q.type!==constants.A.OBJECT_TYPE_GLIDER||!utils_type.A.isPoint(ee))throw new Error("JSXGraph: Can't create trace curve with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [glider, point]`);return(te=utils_type.A.copyAttributes(J,G.options,"tracecurve")).curvetype="plot",(Z=G.create("curve",[[0],[0]],te)).updateDataArray=function(){var ne,ie,re,oe,se,ae,le,ue,de,pe=this.visProp.numberpoints,fe=Q.position,_e=Q.slideObject,ye=_e.minX();for(ie=(_e.maxX()-ye)/pe,this.dataX=[],this.dataY=[],_e.elementClass!==constants.A.OBJECT_CLASS_CURVE&&pe++,ne=0;ne<pe;ne++){for(oe in re=ye+ne*ie,ae=_e.X(re)/_e.Z(re),le=_e.Y(re)/_e.Z(re),Q.setPositionDirectly(constants.A.COORDS_BY_USER,[ae,le]),ue=!1,this.board.objects)if(this.board.objects.hasOwnProperty(oe)&&((se=this.board.objects[oe])===Q&&(ue=!0),ue&&se.needsRegularUpdate&&(de=se.visProp.trace,se.visProp.trace=!1,se.needsUpdate=!0,se.update(!0),se.visProp.trace=de,se===ee)))break;this.dataX[ne]=ee.X(),this.dataY[ne]=ee.Y()}for(oe in Q.position=fe,ue=!1,this.board.objects)if(this.board.objects.hasOwnProperty(oe)&&((se=this.board.objects[oe])===Q&&(ue=!0),ue&&se.needsRegularUpdate&&(de=se.visProp.trace,se.visProp.trace=!1,se.needsUpdate=!0,se.update(!0),se.visProp.trace=de,se===ee)))break},Z},jxg.A.registerElement("tracecurve",jxg.A.createTracecurve),jxg.A.createStepfunction=function(G,_,J){var Z,Q;if(_.length!==2)throw new Error(`JSXGraph: Can't create step function with given parent'
Possible parent types: [array, array|function]`);return Q=utils_type.A.copyAttributes(J,G.options,"stepfunction"),(Z=G.create("curve",_,Q)).updateDataArray=function(){var ee,te=0,ne=this.xterm.length;if(this.dataX=[],this.dataY=[],ne!==0)for(this.dataX[te]=this.xterm[0],this.dataY[te]=this.yterm[0],++te,ee=1;ee<ne;++ee)this.dataX[te]=this.xterm[ee],this.dataY[te]=this.dataY[te-1],++te,this.dataX[te]=this.xterm[ee],this.dataY[te]=this.yterm[ee],++te},Z},jxg.A.registerElement("stepfunction",jxg.A.createStepfunction),jxg.A.createDerivative=function(G,_,J){var Z,Q,ee,te,ne;if(_.length!==1&&_[0].class!==constants.A.OBJECT_CLASS_CURVE)throw new Error(`JSXGraph: Can't create derivative curve with given parent'
Possible parent types: [curve]`);return ne=utils_type.A.copyAttributes(J,G.options,"curve"),Q=_[0],ee=numerics.A.D(Q.X),te=numerics.A.D(Q.Y),(Z=G.create("curve",[function(ie){return Q.X(ie)},function(ie){return te(ie)/ee(ie)},Q.minX(),Q.maxX()],ne)).setParents(Q),Z},jxg.A.registerElement("derivative",jxg.A.createDerivative),jxg.A.createCurveIntersection=function(G,_,J){var Z;if(_.length!==2)throw new Error(`JSXGraph: Can't create curve intersection with given parent'
Possible parent types: [array, array|function]`);return(Z=G.create("curve",[[],[]],J)).updateDataArray=function(){var Q=clip.intersection(_[0],_[1],this.board);this.dataX=Q[0],this.dataY=Q[1]},Z},jxg.A.createCurveUnion=function(G,_,J){var Z;if(_.length!==2)throw new Error(`JSXGraph: Can't create curve union with given parent'
Possible parent types: [array, array|function]`);return(Z=G.create("curve",[[],[]],J)).updateDataArray=function(){var Q=clip.union(_[0],_[1],this.board);this.dataX=Q[0],this.dataY=Q[1]},Z},jxg.A.createCurveDifference=function(G,_,J){var Z;if(_.length!==2)throw new Error(`JSXGraph: Can't create curve difference with given parent'
Possible parent types: [array, array|function]`);return(Z=G.create("curve",[[],[]],J)).updateDataArray=function(){var Q=clip.difference(_[0],_[1],this.board);this.dataX=Q[0],this.dataY=Q[1]},Z},jxg.A.registerElement("curvedifference",jxg.A.createCurveDifference),jxg.A.registerElement("curveintersection",jxg.A.createCurveIntersection),jxg.A.registerElement("curveunion",jxg.A.createCurveUnion),jxg.A.createBoxPlot=function(G,_,J){var Z,Q,ee,te=utils_type.A.copyAttributes(J,G.options,"boxplot");if(_.length!==3)throw new Error(`JSXGraph: Can't create box plot with given parent'
Possible parent types: [array, number|function, number|function] containing quantiles, axis, width`);if(_[0].length<5)throw new Error(`JSXGraph: Can't create box plot with given parent[0]'
parent[0] has to contain at least 5 quantiles.`);for(Z=G.create("curve",[[],[]],te),ee=_[0].length,Z.Q=[],Q=0;Q<ee;Q++)Z.Q[Q]=utils_type.A.createFunction(_[0][Q],G);return Z.x=utils_type.A.createFunction(_[1],G),Z.w=utils_type.A.createFunction(_[2],G),Z.updateDataArray=function(){var ne,ie,re,oe,se,ae,le,ue,de;le=this.evalVisProp("smallwidth"),ue=this.evalVisProp("dir"),re=(de=this.x())-.5*this.w(),oe=de-.5*this.w()*le,se=de+.5*this.w(),ne=[de,oe,ae=de+.5*this.w()*le,de,de,re,re,se,se,de,NaN,re,se,NaN,de,de,oe,ae,de],ie=[this.Q[0](),this.Q[0](),this.Q[0](),this.Q[0](),this.Q[1](),this.Q[1](),this.Q[3](),this.Q[3](),this.Q[1](),this.Q[1](),NaN,this.Q[2](),this.Q[2](),NaN,this.Q[3](),this.Q[4](),this.Q[4](),this.Q[4](),this.Q[4]()],ue==="vertical"?(this.dataX=ne,this.dataY=ie):(this.dataX=ie,this.dataY=ne)},Z.addParentsFromJCFunctions([Z.Q,Z.x,Z.w]),Z},jxg.A.registerElement("boxplot",jxg.A.createBoxPlot),jxg.A.createImplicitCurve=function(G,_,J){var Z,Q;if([1,3,5].indexOf(_.length)<0)throw new Error(`JSXGraph: Can't create curve implicitCurve with given parent'
Possible parent types: [f], [f, rangex, rangey], [f, dfx, dfy] or [f, dfx, dfy, rangex, rangey]
with functions f, dfx, dfy and arrays of length 2 rangex, rangey.`);return Q=utils_type.A.copyAttributes(J,G.options,"implicitcurve"),(Z=G.create("curve",[[],[]],Q)).f=utils_type.A.createFunction(_[0],G,"x, y"),_.length===5||utils_type.A.isString(_[1])||utils_type.A.isFunction(_[1])?Z.dfx=utils_type.A.createFunction(_[1],G,"x, y"):Z.dfx=null,_.length===5||utils_type.A.isString(_[2])||utils_type.A.isFunction(_[2])?Z.dfy=utils_type.A.createFunction(_[2],G,"x, y"):Z.dfy=null,Z.domain=null,_.length===5?Z.domain=[_[3],_[4]]:_.length===3&&(Z.domain=[_[1],_[2]]),Z.updateDataArray=function(){var ee,te,ne,ie,re,oe,se;this.domain===null?(se=this.evalVisProp("margin"),(ee=this.board.getBoundingBox())[0]-=se,ee[1]+=se,ee[2]+=se,ee[3]-=se):(te=utils_type.A.evaluate(this.domain[0]),ne=utils_type.A.evaluate(this.domain[1]),ee=[Math.min(te[0],te[1]),Math.max(ne[0],ne[1]),Math.max(te[0],te[1]),Math.min(ne[0],ne[1])]),re={resolution_out:Math.max(.01,this.evalVisProp("resolution_outer")),resolution_in:Math.max(.01,this.evalVisProp("resolution_inner")),max_steps:this.evalVisProp("max_steps"),alpha_0:this.evalVisProp("alpha_0"),tol_u0:this.evalVisProp("tol_u0"),tol_newton:this.evalVisProp("tol_newton"),tol_cusp:this.evalVisProp("tol_cusp"),tol_progress:this.evalVisProp("tol_progress"),qdt_box:this.evalVisProp("qdt_box"),kappa_0:this.evalVisProp("kappa_0"),delta_0:this.evalVisProp("delta_0"),h_initial:this.evalVisProp("h_initial"),h_critical:this.evalVisProp("h_critical"),h_max:this.evalVisProp("h_max"),loop_dist:this.evalVisProp("loop_dist"),loop_dir:this.evalVisProp("loop_dir"),loop_detection:this.evalVisProp("loop_detection"),unitX:this.board.unitX,unitY:this.board.unitY},this.dataX=[],this.dataY=[],ie=new implicitplot(ee,re,this.f,this.dfx,this.dfy),this.qdt=ie.qdt,oe=ie.plot(),this.dataX=oe[0],this.dataY=oe[1]},Z.elType="implicitcurve",Z},jxg.A.registerElement("implicitcurve",jxg.A.createImplicitCurve),jxg.A.Curve,jxg.A.createArc=function(G,_,J){var Z,Q,ee;if((ee=utils_type.A.providePoints(G,_,J,"arc",["center","radiuspoint","anglepoint"]))===!1||ee.length<3)throw new Error("JSXGraph: Can't create Arc with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [point,point,point], [arc, transformation]`);return Q=utils_type.A.copyAttributes(J,G.options,"arc"),(Z=G.create("curve",[[0],[0],0,4],Q)).elType="arc",Z.setParents(ee),Z.type=constants.A.OBJECT_TYPE_ARC,Z.center=ee[0],Z.radiuspoint=ee[1],Z.point2=Z.radiuspoint,Z.anglepoint=ee[2],Z.point3=Z.anglepoint,utils_type.A.exists(Z.center._is_new)?(Z.addChild(Z.center),delete Z.center._is_new):Z.center.addChild(Z),utils_type.A.exists(Z.radiuspoint._is_new)?(Z.addChild(Z.radiuspoint),delete Z.radiuspoint._is_new):Z.radiuspoint.addChild(Z),utils_type.A.exists(Z.anglepoint._is_new)?(Z.addChild(Z.anglepoint),delete Z.anglepoint._is_new):Z.anglepoint.addChild(Z),Z.useDirection=Q.usedirection,Z.updateDataArray=function(){var te,ne,ie,re,oe,se=1,ae=this.radiuspoint,le=this.center,ue=this.anglepoint,de=this.evalVisProp("selection");ne=geometry.A.rad(ae,le,ue),(de==="minor"&&ne>Math.PI||de==="major"&&ne<Math.PI)&&(se=-1),this.useDirection&&(ie=ee[1].coords.usrCoords,re=ee[3].coords.usrCoords,oe=ee[2].coords.usrCoords,(ie[1]-oe[1])*(ie[2]-re[2])-(ie[2]-oe[2])*(ie[1]-re[1])<0?(this.radiuspoint=ee[1],this.anglepoint=ee[2]):(this.radiuspoint=ee[2],this.anglepoint=ee[1])),ae=ae.coords.usrCoords,le=le.coords.usrCoords,ue=ue.coords.usrCoords,te=geometry.A.bezierArc(ae,le,ue,!1,se),this.dataX=te[0],this.dataY=te[1],this.bezierDegree=3,this.updateStdform(),this.updateQuadraticform()},Z.Radius=function(){return this.radiuspoint.Dist(this.center)},Z.getRadius=function(){return jxg.A.deprecated("Arc.getRadius()","Arc.Radius()"),this.Radius()},Z.Value=function(te,ne){var ie;return ne=ne||geometry.A.rad(this.radiuspoint,this.center,this.anglepoint),(te=(te=te||"length").toLocaleLowerCase())===""||te.indexOf("len")===0?ie=ne*this.Radius():te.indexOf("rad")===0?ie=ne:te.indexOf("deg")===0?ie=180*ne/Math.PI:te.indexOf("sem")===0?ie=ne/Math.PI:te.indexOf("cir")===0&&(ie=.5*ne/Math.PI),ie},Z.L=function(){return this.Value("length")},Z.hasPoint=function(te,ne){var ie,re,oe,se,ae,le,ue,de=this.Radius();return this.evalVisProp("hasinnerpoints")?this.hasPointSector(te,ne):(utils_type.A.isObject(this.evalVisProp("precision"))?(ue=this.board._inputDevice,le=this.evalVisProp("precision."+ue)):le=this.board.options.precision.hasPoint,le/=Math.min(Math.abs(this.board.unitX),Math.abs(this.board.unitY)),re=new base_coords.A(constants.A.COORDS_BY_SCREEN,[te,ne],this.board),this.transformations.length>0&&(this.updateTransformMatrix(),se=math.A.inverse(this.transformMat),ae=math.A.matVecMult(se,re.usrCoords),re=new base_coords.A(constants.A.COORDS_BY_USER,ae,this.board)),ie=this.center.coords.distance(constants.A.COORDS_BY_USER,re),(oe=Math.abs(ie-de)<le)&&(oe=geometry.A.coordsOnArc(this,re)),oe)},Z.hasPointSector=function(te,ne){var ie=new base_coords.A(constants.A.COORDS_BY_SCREEN,[te,ne],this.board),re=this.Radius(),oe=this.center.coords.distance(constants.A.COORDS_BY_USER,ie)<re;return oe&&(oe=geometry.A.coordsOnArc(this,ie)),oe},Z.getTextAnchor=function(){return this.center.coords},Z.getLabelAnchor=function(){var te,ne,ie,re,oe,se=this.label.evalVisProp("position"),ae=geometry.A.rad(this.radiuspoint,this.center,this.anglepoint),le=10/this.board.unitX,ue=10/this.board.unitY,de=this.point2.coords.usrCoords,pe=this.center.coords.usrCoords,fe=de[1]-pe[1],_e=de[2]-pe[2],ye=this.evalVisProp("selection"),be=this.label?this.label.visProp:this.visProp.label;return!utils_type.A.isString(se)||se.indexOf("right")<0&&se.indexOf("left")<0?((ye==="minor"&&ae>Math.PI||ye==="major"&&ae<Math.PI)&&(ae=-(2*Math.PI-ae)),ie=(te=new base_coords.A(constants.A.COORDS_BY_USER,[pe[1]+Math.cos(.5*ae)*fe-Math.sin(.5*ae)*_e,pe[2]+Math.sin(.5*ae)*fe+Math.cos(.5*ae)*_e],this.board)).usrCoords[1]-pe[1],re=te.usrCoords[2]-pe[2],ie=ie*((oe=math.A.hypot(ie,re))+le)/oe,re=re*(oe+ue)/oe,ne=[pe[1]+ie,pe[2]+re],be.position=geometry.A.calcLabelQuadrant(geometry.A.rad([1,0],[0,0],ne)),new base_coords.A(constants.A.COORDS_BY_USER,ne,this.board)):this.getLabelPosition(se,this.label.evalVisProp("distance"))},Z.updateQuadraticform=circle.prototype.updateQuadraticform,Z.updateStdform=circle.prototype.updateStdform,Z.methodMap=jxg.A.deepCopy(Z.methodMap,{getRadius:"getRadius",radius:"Radius",Radius:"Radius",center:"center",radiuspoint:"radiuspoint",anglepoint:"anglepoint",Value:"Value",L:"L"}),Z.prepareUpdate().update(),Z},jxg.A.registerElement("arc",jxg.A.createArc),jxg.A.createSemicircle=function(G,_,J){var Z,Q,ee,te;if((te=utils_type.A.providePoints(G,_,J,"point"))===!1||te.length!==2)throw new Error("JSXGraph: Can't create Semicircle with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,point]`);return ee=utils_type.A.copyAttributes(J,G.options,"semicircle","center"),(Q=G.create("midpoint",te,ee)).dump=!1,ee=utils_type.A.copyAttributes(J,G.options,"semicircle"),(Z=G.create("arc",[Q,te[1],te[0]],ee)).elType="semicircle",Z.setParents([te[0].id,te[1].id]),Z.subs={midpoint:Q},Z.inherits.push(Q),Z.midpoint=Z.center=Q,Z},jxg.A.registerElement("semicircle",jxg.A.createSemicircle),jxg.A.createCircumcircleArc=function(G,_,J){var Z,Q,ee,te;if((te=utils_type.A.providePoints(G,_,J,"point"))===!1||te.length!==3)throw new Error("JSXGraph: create Circumcircle Arc with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [point,point,point]`);return ee=utils_type.A.copyAttributes(J,G.options,"circumcirclearc","center"),(Q=G.create("circumcenter",te,ee)).dump=!1,(ee=utils_type.A.copyAttributes(J,G.options,"circumcirclearc")).usedirection=!0,(Z=G.create("arc",[Q,te[0],te[2],te[1]],ee)).elType="circumcirclearc",Z.setParents([te[0].id,te[1].id,te[2].id]),Z.subs={center:Q},Z.inherits.push(Q),Z.center=Q,Z},jxg.A.registerElement("circumcirclearc",jxg.A.createCircumcircleArc),jxg.A.createMinorArc=function(G,_,J){return J.selection="minor",jxg.A.createArc(G,_,J)},jxg.A.registerElement("minorarc",jxg.A.createMinorArc),jxg.A.createMajorArc=function(G,_,J){return J.selection="major",jxg.A.createArc(G,_,J)},jxg.A.registerElement("majorarc",jxg.A.createMajorArc),jxg.A.createSector=function(G,_,J){var Z,Q,ee,te,ne,ie,re=1e-14,oe="invalid";if(_[0].elementClass===constants.A.OBJECT_CLASS_LINE&&_[1].elementClass===constants.A.OBJECT_CLASS_LINE&&(utils_type.A.isArray(_[2])||utils_type.A.isNumber(_[2]))&&(utils_type.A.isArray(_[3])||utils_type.A.isNumber(_[3]))&&(utils_type.A.isNumber(_[4])||utils_type.A.isFunction(_[4])||utils_type.A.isString(_[4])))oe="2lines";else{if((ie=utils_type.A.providePoints(G,_,J,"sector",["center","radiusPoint","anglePoint"]))===!1)throw new Error("JSXGraph: Can't create Sector with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"' and '"+typeof _[2]+"'.");oe="3points"}if(Q=utils_type.A.copyAttributes(J,G.options,"sector"),(Z=G.create("curve",[[0],[0],0,6],Q)).type=constants.A.OBJECT_TYPE_SECTOR,Z.elType="sector",Z.autoRadius=function(){var se=20/Z.board.unitX,ae=1/0,le=50/Z.board.unitX;return utils_type.A.isPoint(Z.center)&&(ae=.3333*Z.center.Dist(Z.point2)),Math.max(se,Math.min(ae,le))},oe==="2lines")Z.Radius=function(){var se=utils_type.A.evaluate(_[4]);return se==="auto"?this.autoRadius():se},Z.line1=G.select(_[0]),Z.line2=G.select(_[1]),Z.line1.addChild(Z),Z.line2.addChild(Z),Z.setParents(_),Z.point1={visProp:{}},Z.point2={visProp:{}},Z.point3={visProp:{}},te=geometry.A.meetLineLine(Z.line1.stdform,Z.line2.stdform,0,G),geometry.A.distance(te.usrCoords,[0,0,0],3)<re&&(Z.line1.point1.Dist(Z.line2.point1)<re||Z.line1.point1.Dist(Z.line2.point2)<re?te=Z.line1.point1.coords:Z.line1.point2.Dist(Z.line2.point1)<re||Z.line1.point2.Dist(Z.line2.point1)<re?te=Z.line1.point2.coords:console.log("JSXGraph warning: Can't create Sector from parallel lines with no common defining point.")),utils_type.A.isArray(_[2])?(_[2].length===2&&(_[2]=[1].concat(_[2])),ne=geometry.A.projectPointToLine({coords:{usrCoords:_[2]}},Z.line1,G),ne=statistics.A.subtract(ne.usrCoords,te.usrCoords),Z.direction1=math.A.innerProduct(ne,[0,Z.line1.stdform[2],-Z.line1.stdform[1]],3)>=0?1:-1):Z.direction1=_[2]>=0?1:-1,utils_type.A.isArray(_[3])?(_[3].length===2&&(_[3]=[1].concat(_[3])),ne=geometry.A.projectPointToLine({coords:{usrCoords:_[3]}},Z.line2,G),ne=statistics.A.subtract(ne.usrCoords,te.usrCoords),Z.direction2=math.A.innerProduct(ne,[0,Z.line2.stdform[2],-Z.line2.stdform[1]],3)>=0?1:-1):Z.direction2=_[3]>=0?1:-1,Z.methodMap=jxg.A.deepCopy(Z.methodMap,{arc:"arc",center:"center",line1:"line1",line2:"line2"}),Z.updateDataArray=function(){var se,ae,le,ue,de,pe,fe=1e-14,_e=[0,0,0];if(ae=this.line1,le=this.line2,_e=math.A.crossProduct(ae.stdform,le.stdform),geometry.A.distance(_e,[0,0,0],3)<fe&&(ae.point1.Dist(le.point1)<fe||ae.point1.Dist(le.point2)<fe?_e=ae.point1.coords.usrCoords:(ae.point2.Dist(le.point1)<fe||ae.point2.Dist(le.point1)<fe)&&(_e=ae.point2.coords.usrCoords)),Math.abs(_e[0])>fe&&(_e[1]/=_e[0],_e[2]/=_e[0],_e[0]/=_e[0]),se=this.direction1*this.Radius(),ue=statistics.A.add(_e,[0,se*ae.stdform[2],-se*ae.stdform[1]]),se=this.direction2*this.Radius(),de=statistics.A.add(_e,[0,se*le.stdform[2],-se*le.stdform[1]]),this.point2.coords=new base_coords.A(constants.A.COORDS_BY_USER,ue,Z.board),this.point1.coords=new base_coords.A(constants.A.COORDS_BY_USER,_e,Z.board),this.point3.coords=new base_coords.A(constants.A.COORDS_BY_USER,de,Z.board),Math.abs(ue[0])<math.A.eps||Math.abs(_e[0])<math.A.eps||Math.abs(de[0])<math.A.eps)return this.dataX=[NaN],void(this.dataY=[NaN]);pe=geometry.A.bezierArc(ue,_e,de,!0,1),this.dataX=pe[0],this.dataY=pe[1],this.bezierDegree=3};else if(oe==="3points"){for(Z.point1=ie[0],Z.point2=ie[1],Z.point3=ie[2],ee=0;ee<3;ee++)utils_type.A.exists(ie[ee]._is_new)?(Z.addChild(ie[ee]),delete ie[ee]._is_new):ie[ee].addChild(Z);Z.useDirection=J.usedirection,Z.setParents(ie),utils_type.A.exists(ie[3])&&(Z.point4=ie[3],Z.point4.addChild(Z)),Z.methodMap=jxg.A.deepCopy(Z.methodMap,{arc:"arc",center:"center",radiuspoint:"radiuspoint",anglepoint:"anglepoint"}),Z.updateDataArray=function(){var se,ae,le,ue,de,pe=this.point2,fe=this.point1,_e=this.point3,ye=1,be=this.evalVisProp("selection");if(!pe.isReal||!fe.isReal||!_e.isReal)return this.dataX=[NaN],void(this.dataY=[NaN]);de=geometry.A.rad(pe,fe,_e),(be==="minor"&&de>Math.PI||be==="major"&&de<Math.PI)&&(ye=-1),this.useDirection&&utils_type.A.exists(this.point4)&&(ae=this.point2.coords.usrCoords,le=this.point4.coords.usrCoords,ue=this.point3.coords.usrCoords,(ae[1]-ue[1])*(ae[2]-le[2])-(ae[2]-ue[2])*(ae[1]-le[1])>=0&&(_e=this.point2,pe=this.point3)),pe=pe.coords.usrCoords,fe=fe.coords.usrCoords,_e=_e.coords.usrCoords,se=geometry.A.bezierArc(pe,fe,_e,!0,ye),this.dataX=se[0],this.dataY=se[1],this.bezierDegree=3},Z.Radius=function(){return this.point2.Dist(this.point1)}}return Z.center=Z.point1,Z.radiuspoint=Z.point2,Z.anglepoint=Z.point3,Q=utils_type.A.copyAttributes(J,G.options,"arc"),(Q=utils_type.A.copyAttributes(Q,G.options,"sector","arc")).withlabel=!1,Q.selection=Z.visProp.selection,Q.name+="_arc",oe==="2lines"?(Z.updateDataArray(),Z.arc=G.create("arc",[function(){return Z.point1.coords.usrCoords},function(){var se=Z.point2.coords.distance(constants.A.COORDS_BY_USER,Z.point1.coords);return se===0?[Z.point1.coords.usrCoords[1],Z.point1.coords.usrCoords[2]]:[Z.point1.coords.usrCoords[1]+Z.Radius()*(Z.point2.coords.usrCoords[1]-Z.point1.coords.usrCoords[1])/se,Z.point1.coords.usrCoords[2]+Z.Radius()*(Z.point2.coords.usrCoords[2]-Z.point1.coords.usrCoords[2])/se]},function(){return Z.point3.coords.usrCoords}],Q)):Z.arc=G.create("arc",[Z.point1,function(){var se=Z.point2.Dist(Z.point1);return se===0?[Z.point1.X(),Z.point1.Y()]:[Z.point1.X()+Z.Radius()*(Z.point2.X()-Z.point1.X())/se,Z.point1.Y()+Z.Radius()*(Z.point2.Y()-Z.point1.Y())/se]},Z.point3],Q),Z.addChild(Z.arc),Z.hasPointCurve=function(se,ae){var le,ue,de,pe,fe,_e,ye=new base_coords.A(constants.A.COORDS_BY_SCREEN,[se,ae],this.board),be=this.Radius(),Ae=this.center.coords.distance(constants.A.COORDS_BY_USER,ye),Ce=this.evalVisProp("selection");return utils_type.A.isObject(this.evalVisProp("precision"))?(fe=this.board._inputDevice,pe=this.evalVisProp("precision."+fe)):pe=this.board.options.precision.hasPoint,pe/=Math.min(Math.abs(this.board.unitX),Math.abs(this.board.unitY)),(_e=Math.abs(Ae-be)<pe)&&(le=geometry.A.rad(this.point2,this.center,ye.usrCoords.slice(1)),ue=0,de=geometry.A.rad(this.point2,this.center,this.point3),(Ce==="minor"&&de>Math.PI||Ce==="major"&&de<Math.PI)&&(ue=de,de=2*Math.PI),(le<ue||le>de)&&(_e=!1)),_e},Z.hasPointSector=function(se,ae){var le,ue,de,pe=new base_coords.A(constants.A.COORDS_BY_SCREEN,[se,ae],this.board),fe=this.Radius(),_e=this.point1.coords.distance(constants.A.COORDS_BY_USER,pe)<fe,ye=this.evalVisProp("selection");return _e&&(le=geometry.A.rad(this.radiuspoint,this.center,pe.usrCoords.slice(1)),ue=0,de=geometry.A.rad(this.radiuspoint,this.center,this.anglepoint),(ye==="minor"&&de>Math.PI||ye==="major"&&de<Math.PI)&&(ue=de,de=2*Math.PI),(le<ue||le>de)&&(_e=!1)),_e},Z.hasPoint=function(se,ae){return this.evalVisProp("highlightonsector")||this.evalVisProp("hasinnerpoints")?this.hasPointSector(se,ae):this.hasPointCurve(se,ae)},Z.getTextAnchor=function(){return this.point1.coords},Z.getLabelAnchor=function(){var se,ae,le,ue,de,pe=this.label.evalVisProp("position"),fe=geometry.A.rad(this.point2,this.point1,this.point3),_e=13/this.board.unitX,ye=13/this.board.unitY,be=this.point2.coords.usrCoords,Ae=this.point1.coords.usrCoords,Ce=be[1]-Ae[1],Ee=be[2]-Ae[2],Re=this.evalVisProp("selection"),Te=this.label?this.label.visProp:this.visProp.label;return!utils_type.A.isString(pe)||pe.indexOf("right")<0&&pe.indexOf("left")<0?((Re==="minor"&&fe>Math.PI||Re==="major"&&fe<Math.PI)&&(fe=-(2*Math.PI-fe)),le=(se=new base_coords.A(constants.A.COORDS_BY_USER,[Ae[1]+Math.cos(.5*fe)*Ce-Math.sin(.5*fe)*Ee,Ae[2]+Math.sin(.5*fe)*Ce+Math.cos(.5*fe)*Ee],this.board)).usrCoords[1]-Ae[1],ue=se.usrCoords[2]-Ae[2],le=le*((de=math.A.hypot(le,ue))+_e)/de,ue=ue*(de+ye)/de,ae=[Ae[1]+le,Ae[2]+ue],Te.position=geometry.A.calcLabelQuadrant(geometry.A.rad([1,0],[0,0],ae)),new base_coords.A(constants.A.COORDS_BY_USER,ae,this.board)):this.getLabelPosition(pe,this.label.evalVisProp("distance"))},Z.setRadius=function(se){var ae=utils_type.A.evaluate(se);(se==="auto"||ae==="auto"?"auto":utils_type.A.isNumber(se)?"number":utils_type.A.isFunction(se)&&!utils_type.A.isString(ae)?"function":"undefined")!="undefined"&&(this.visProp.radius=se),Z.Radius=function(){var le=utils_type.A.evaluate(se);return le==="auto"?this.autoRadius():le}},Z.getRadius=function(){return jxg.A.deprecated("Sector.getRadius()","Sector.Radius()"),this.Radius()},Z.Value=function(se){return this.arc.Value(se)},Z.L=function(){return this.arc.L()},Z.Area=function(){var se=this.Radius();return .5*se*se*this.Value("radians")},Z.Perimeter=function(){return this.L()+2*this.Radius()},oe==="3points"&&(Z.setPositionDirectly=function(se,ae,le){var ue,de=new base_coords.A(se,ae,this.board),pe=new base_coords.A(se,le,this.board);return Z.point1.draggable()&&Z.point2.draggable()&&Z.point3.draggable()?(ue=statistics.A.subtract(de.usrCoords,pe.usrCoords),this.board.create("transform",ue.slice(1),{type:"translate"}).applyOnce([Z.point1,Z.point2,Z.point3]),this):this}),Z.methodMap=jxg.A.deepCopy(Z.methodMap,{radius:"Radius",Radius:"Radius",getRadius:"Radius",setRadius:"setRadius",Value:"Value",L:"L",Area:"Area",Perimeter:"Perimeter"}),Z},jxg.A.registerElement("sector",jxg.A.createSector),jxg.A.createCircumcircleSector=function(G,_,J){var Z,Q,ee,te;if((te=utils_type.A.providePoints(G,_,J,"point"))===!1)throw new Error("JSXGraph: Can't create circumcircle sector with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"' and '"+typeof _[2]+"'.");return(Q=G.create("circumcenter",te.slice(0,3),ee)).dump=!1,ee=utils_type.A.copyAttributes(J,G.options,"circumcirclesector"),(Z=G.create("sector",[Q,te[0],te[2],te[1]],ee)).elType="circumcirclesector",Z.setParents(te),Z.center=Q,Z.subs={center:Q},Z},jxg.A.registerElement("circumcirclesector",jxg.A.createCircumcircleSector),jxg.A.createMinorSector=function(G,_,J){return J.selection="minor",jxg.A.createSector(G,_,J)},jxg.A.registerElement("minorsector",jxg.A.createMinorSector),jxg.A.createMajorSector=function(G,_,J){return J.selection="major",jxg.A.createSector(G,_,J)},jxg.A.registerElement("majorsector",jxg.A.createMajorSector),jxg.A.createAngle=function(G,_,J){var Z,Q,ee,te,ne,ie,re="invalid";if(_[0].elementClass===constants.A.OBJECT_CLASS_LINE&&_[1].elementClass===constants.A.OBJECT_CLASS_LINE&&(utils_type.A.isArray(_[2])||utils_type.A.isNumber(_[2]))&&(utils_type.A.isArray(_[3])||utils_type.A.isNumber(_[3])))re="2lines";else{if(ee={name:""},(ie=utils_type.A.providePoints(G,_,ee,"point"))===!1)throw new Error("JSXGraph: Can't create angle with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"' and '"+typeof _[2]+"'.");re="3points"}if(ee=utils_type.A.copyAttributes(J,G.options,"angle"),utils_type.A.exists(ee.name)||(ee.name=G.generateName({type:constants.A.OBJECT_TYPE_ANGLE})),Q=utils_type.A.exists(ee.radius)?ee.radius:0,G.suspendUpdate(),re==="2lines"?(_.push(Q),(Z=G.create("sector",_,ee)).updateDataArraySector=Z.updateDataArray,Z.setAngle=function(oe){},Z.free=function(oe){}):((Z=G.create("sector",[ie[1],ie[0],ie[2]],ee)).arc.visProp.priv=!0,Z.point=Z.point2=Z.radiuspoint=ie[0],Z.pointsquare=Z.point3=Z.anglepoint=ie[2],Z.Radius=function(){var oe=utils_type.A.evaluate(Q);return oe==="auto"?Z.autoRadius():oe},Z.updateDataArraySector=function(){var oe,se,ae=this.point2,le=this.point1,ue=this.point3,de=this.Radius(),pe=le.Dist(ae),fe=1,_e=this.evalVisProp("selection");se=geometry.A.rad(ae,le,ue),(_e==="minor"&&se>Math.PI||_e==="major"&&se<Math.PI)&&(fe=-1),ae=ae.coords.usrCoords,le=le.coords.usrCoords,ue=ue.coords.usrCoords,ae=[1,le[1]+(ae[1]-le[1])*de/pe,le[2]+(ae[2]-le[2])*de/pe],ue=[1,le[1]+(ue[1]-le[1])*de/pe,le[2]+(ue[2]-le[2])*de/pe],oe=geometry.A.bezierArc(ae,le,ue,!0,fe),this.dataX=oe[0],this.dataY=oe[1],this.bezierDegree=3},Z.setAngle=function(oe){var se,ae,le,ue=this.anglepoint,de=this.radiuspoint;return ue.draggable()&&(se=this.board.create("transform",[oe,this.center],{type:"rotate"}),ue.addTransform(de,se),se.update(),ue.moveTo(math.A.matVecMult(se.matrix,de.coords.usrCoords)),le=utils_type.A.isFunction(oe)?function(){return 2*Math.PI-oe()}:function(){return 2*Math.PI-oe},ae=this.board.create("transform",[le,this.center],{type:"rotate"}),ue.coords.on("update",function(){ae.update(),de.setPositionDirectly(constants.A.COORDS_BY_USER,math.A.matVecMult(ae.matrix,ue.coords.usrCoords))}),ue.setParents(de),this.hasFixedAngle=!0),this},Z.free=function(){var oe=this.anglepoint;return oe.transformations.length>0&&(oe.transformations.pop(),oe.isDraggable=!0,oe.parents=[],oe.coords.off("update")),this.hasFixedAngle=!1,this},Z.setParents(ie)),utils_type.A.exists(Z.visProp.text)&&Z.label.setText(Z.evalVisProp("text")),Z.elType="angle",Z.type=constants.A.OBJECT_TYPE_ANGLE,Z.subs={},Z.updateDataArraySquare=function(){var oe,se,ae,le,ue,de,pe,fe,_e=this.Radius();re==="2lines"&&this.updateDataArraySector(),oe=this.point2,se=this.point1,ae=this.point3,oe=oe.coords.usrCoords,se=se.coords.usrCoords,ae=ae.coords.usrCoords,le=geometry.A.distance(oe,se,3),ue=geometry.A.distance(ae,se,3),oe=[1,se[1]+(oe[1]-se[1])*_e/le,se[2]+(oe[2]-se[2])*_e/le],ae=[1,se[1]+(ae[1]-se[1])*_e/ue,se[2]+(ae[2]-se[2])*_e/ue],de=math.A.crossProduct(ae,se),pe=[-oe[1]*de[1]-oe[2]*de[2],oe[0]*de[1],oe[0]*de[2]],de=math.A.crossProduct(oe,se),fe=[-ae[1]*de[1]-ae[2]*de[2],ae[0]*de[1],ae[0]*de[2]],(de=math.A.crossProduct(pe,fe))[1]/=de[0],de[2]/=de[0],this.dataX=[se[1],oe[1],de[1],ae[1],se[1]],this.dataY=[se[2],oe[2],de[2],ae[2],se[2]],this.bezierDegree=1},Z.updateDataArrayNone=function(){this.dataX=[NaN],this.dataY=[NaN],this.bezierDegree=1},Z.updateDataArray=function(){var oe=this.evalVisProp("type"),se=geometry.A.trueAngle(this.point2,this.point1,this.point3),ae=this.evalVisProp("selection");(ae==="minor"&&se>180||ae==="major"&&se<180)&&(se=360-se),Math.abs(se-90)<this.evalVisProp("orthosensitivity")+math.A.eps&&(oe=this.evalVisProp("orthotype")),oe==="none"?(this.updateDataArrayNone(),this.maxX=function(){return 0}):oe==="square"?(this.updateDataArraySquare(),this.maxX=function(){return 4}):oe==="sector"?(this.updateDataArraySector(),this.maxX=function(){return 6}):oe==="sectordot"&&(this.updateDataArraySector(),this.maxX=function(){return 6},this.dot.visProp.visible||this.dot.setAttribute({visible:!0})),(!this.visProp.visible||oe!=="sectordot"&&this.dot.visProp.visible)&&this.dot.setAttribute({visible:!1})},te=utils_type.A.copyAttributes(J,G.options,"angle","dot"),Z.dot=G.create("point",[function(){var oe,se,ae,le,ue,de,pe,fe,_e;return utils_type.A.exists(Z.dot)&&!Z.dot.visProp.visible?[0,0]:(oe=Z.point2.coords.usrCoords,se=Z.point1.coords.usrCoords,ae=Z.Radius(),le=geometry.A.distance(oe,se,3),ue=geometry.A.rad(Z.point2,Z.point1,Z.point3),((_e=Z.evalVisProp("selection"))==="minor"&&ue>Math.PI||_e==="major"&&ue<Math.PI)&&(ue=-(2*Math.PI-ue)),ue*=.5,de=Math.cos(ue),pe=Math.sin(ue),oe=[1,se[1]+(oe[1]-se[1])*ae/le,se[2]+(oe[2]-se[2])*ae/le],fe=[[1,0,0],[se[1]-.5*se[1]*de+.5*se[2]*pe,.5*de,.5*-pe],[se[2]-.5*se[1]*pe-.5*se[2]*de,.5*pe,.5*de]],math.A.matVecMult(fe,oe))}],te),Z.dot.dump=!1,Z.subs.dot=Z.dot,re==="2lines")for(ne=0;ne<2;ne++)G.select(_[ne]).addChild(Z.dot);else for(ne=0;ne<3;ne++)G.select(ie[ne]).addChild(Z.dot);return G.unsuspendUpdate(),Z.Value=function(oe){return(oe=oe||"radians")===""&&(oe="radians"),Z.arc.Value(oe)},Z.getLabelAnchor=function(){var oe,se,ae,le,ue,de,pe,fe,_e,ye=12,be=Z.evalVisProp("selection"),Ae=this.label?this.label.visProp:this.visProp.label,Ce=this.label?this.label.evalVisProp("position"):this.evalVisProp("label.position");return!utils_type.A.isString(Ce)||Ce.indexOf("right")<0&&Ce.indexOf("left")<0?(utils_type.A.exists(this.label)&&utils_type.A.exists(this.label.visProp.fontsize)&&(ye=this.label.evalVisProp("fontsize")),ye/=this.board.unitX,se=Z.point2.coords.usrCoords,ae=Z.point1.coords.usrCoords,le=Z.Radius(),ue=geometry.A.distance(se,ae,3),de=geometry.A.rad(Z.point2,Z.point1,Z.point3),(be==="minor"&&de>Math.PI||be==="major"&&de<Math.PI)&&(de=-(2*Math.PI-de)),de*=.5,pe=Math.cos(de),fe=Math.sin(de),se=[1,ae[1]+(se[1]-ae[1])*le/ue,ae[2]+(se[2]-ae[2])*le/ue],_e=[[1,0,0],[ae[1]-.5*ae[1]*pe+.5*ae[2]*fe,.5*pe,.5*-fe],[ae[2]-.5*ae[1]*fe-.5*ae[2]*pe,.5*fe,.5*pe]],(oe=math.A.matVecMult(_e,se))[1]/=oe[0],oe[2]/=oe[0],oe[0]/=oe[0],ue=geometry.A.distance(oe,ae,3),oe=[oe[0],ae[1]+(oe[1]-ae[1])*(le+ye)/ue,ae[2]+(oe[2]-ae[2])*(le+ye)/ue],Ae.position=geometry.A.calcLabelQuadrant(geometry.A.rad([1,0],[0,0],oe)),new base_coords.A(constants.A.COORDS_BY_USER,oe,this.board)):this.getLabelPosition(Ce,this.label.evalVisProp("distance"))},Z.methodMap=utils_type.A.deepCopy(Z.methodMap,{setAngle:"setAngle",Value:"Value",free:"free"}),Z},jxg.A.registerElement("angle",jxg.A.createAngle),jxg.A.createNonreflexAngle=function(G,_,J){var Z;return J.selection="minor",J=utils_type.A.copyAttributes(J,G.options,"nonreflexangle"),(Z=jxg.A.createAngle(G,_,J)).Value=function(Q){var ee=geometry.A.rad(this.point2,this.point1,this.point3);return(Q=Q||"radians")===""&&(Q="radians"),ee=ee<Math.PI?ee:2*Math.PI-ee,this.arc.Value(Q,ee)},Z},jxg.A.registerElement("nonreflexangle",jxg.A.createNonreflexAngle),jxg.A.createReflexAngle=function(G,_,J){var Z;return J.selection="major",J=utils_type.A.copyAttributes(J,G.options,"reflexangle"),(Z=jxg.A.createAngle(G,_,J)).Value=function(Q){var ee=geometry.A.rad(this.point2,this.point1,this.point3);return(Q=Q||"radians")===""&&(Q="radians"),ee=ee>=Math.PI?ee:2*Math.PI-ee,this.arc.Value(Q,ee)},Z},jxg.A.registerElement("reflexangle",jxg.A.createReflexAngle),jxg.A.createOrthogonalProjection=function(G,_,J){var Z,Q,ee,te;if(_[0]=G.select(_[0]),_[1]=G.select(_[1]),utils_type.A.isPointType(G,_[0])&&_[1].elementClass===constants.A.OBJECT_CLASS_LINE)Q=utils_type.A.providePoints(G,[_[0]],J,"point")[0],Z=_[1];else{if(!utils_type.A.isPointType(G,_[1])||_[0].elementClass!==constants.A.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular point with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,line]`);Q=utils_type.A.providePoints(G,[_[1]],J,"point")[0],Z=_[0]}return te=utils_type.A.copyAttributes(J,G.options,"orthogonalprojection"),ee=G.create("point",[function(){return geometry.A.projectPointToLine(Q,Z,G)}],te),utils_type.A.exists(Q._is_new)?(ee.addChild(Q),delete Q._is_new):Q.addChild(ee),Z.addChild(ee),ee.elType="orthogonalprojection",ee.setParents([Q.id,ee.id]),ee.update(),ee.generatePolynomial=function(){var ne=Z.point1.symbolic.x,ie=Z.point1.symbolic.y,re=Z.point2.symbolic.x,oe=Z.point2.symbolic.y,se=Q.symbolic.x,ae=Q.symbolic.y,le=ee.symbolic.x,ue=ee.symbolic.y;return["("+ie+")*("+le+")-("+ie+")*("+re+")+("+ue+")*("+re+")-("+ne+")*("+ue+")+("+ne+")*("+oe+")-("+le+")*("+oe+")","("+ae+")*("+ie+")-("+ae+")*("+oe+")-("+ue+")*("+ie+")+("+ue+")*("+oe+")+("+se+")*("+ne+")-("+se+")*("+re+")-("+le+")*("+ne+")+("+le+")*("+re+")"]},ee},jxg.A.createPerpendicular=function(G,_,J){var Z,Q,ee,te;if(_[0]=G.select(_[0]),_[1]=G.select(_[1]),utils_type.A.isPointType(G,_[0])&&_[1].elementClass===constants.A.OBJECT_CLASS_LINE)Q=_[1],Z=utils_type.A.providePoints(G,[_[0]],J,"point")[0];else{if(!utils_type.A.isPointType(G,_[1])||_[0].elementClass!==constants.A.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [line,point]`);Q=_[0],Z=utils_type.A.providePoints(G,[_[1]],J,"point")[0]}return te=utils_type.A.copyAttributes(J,G.options,"perpendicular"),(ee=jxg.A.createLine(G,[function(){return Q.stdform[2]*Z.X()-Q.stdform[1]*Z.Y()},function(){return-Q.stdform[2]*Z.Z()},function(){return Q.stdform[1]*Z.Z()}],te)).elType="perpendicular",ee.setParents([Q.id,Z.id]),utils_type.A.exists(Z._is_new)?(ee.addChild(Z),delete Z._is_new):Z.addChild(ee),Q.addChild(ee),ee},jxg.A.createPerpendicularPoint=function(G,_,J){var Z,Q,ee;if(_[0]=G.select(_[0]),_[1]=G.select(_[1]),utils_type.A.isPointType(G,_[0])&&_[1].elementClass===constants.A.OBJECT_CLASS_LINE)Q=utils_type.A.providePoints(G,[_[0]],J,"point")[0],Z=_[1];else{if(!utils_type.A.isPointType(G,_[1])||_[0].elementClass!==constants.A.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular point with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,line]`);Q=utils_type.A.providePoints(G,[_[1]],J,"point")[0],Z=_[0]}return ee=G.create("point",[function(){return geometry.A.perpendicular(Z,Q,G)[0]}],J),utils_type.A.exists(Q._is_new)?(ee.addChild(Q),delete Q._is_new):Q.addChild(ee),Z.addChild(ee),ee.elType="perpendicularpoint",ee.setParents([Q.id,Z.id]),ee.update(),ee.generatePolynomial=function(){var te=Z.point1.symbolic.x,ne=Z.point1.symbolic.y,ie=Z.point2.symbolic.x,re=Z.point2.symbolic.y,oe=Q.symbolic.x,se=Q.symbolic.y,ae=ee.symbolic.x,le=ee.symbolic.y;return["("+ne+")*("+ae+")-("+ne+")*("+ie+")+("+le+")*("+ie+")-("+te+")*("+le+")+("+te+")*("+re+")-("+ae+")*("+re+")","("+se+")*("+ne+")-("+se+")*("+re+")-("+le+")*("+ne+")+("+le+")*("+re+")+("+oe+")*("+te+")-("+oe+")*("+ie+")-("+ae+")*("+te+")+("+ae+")*("+ie+")"]},ee},jxg.A.createPerpendicularSegment=function(G,_,J){var Z,Q,ee,te,ne;if(_[0]=G.select(_[0]),_[1]=G.select(_[1]),utils_type.A.isPointType(G,_[0])&&_[1].elementClass===constants.A.OBJECT_CLASS_LINE)Q=_[1],Z=utils_type.A.providePoints(G,[_[0]],J,"point")[0];else{if(!utils_type.A.isPointType(G,_[1])||_[0].elementClass!==constants.A.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [line,point]`);Q=_[0],Z=utils_type.A.providePoints(G,[_[1]],J,"point")[0]}return ne=utils_type.A.copyAttributes(J,G.options,"perpendicularsegment","point"),(te=jxg.A.createPerpendicularPoint(G,[Q,Z],ne)).dump=!1,utils_type.A.exists(J.layer)||(J.layer=G.options.layer.line),ne=utils_type.A.copyAttributes(J,G.options,"perpendicularsegment"),(ee=jxg.A.createLine(G,[function(){return geometry.A.perpendicular(Q,Z,G)[1]?[te,Z]:[Z,te]}],ne)).point=te,utils_type.A.exists(Z._is_new)?(ee.addChild(Z),delete Z._is_new):Z.addChild(ee),Q.addChild(ee),ee.elType="perpendicularsegment",ee.setParents([Z.id,Q.id]),ee.subs={point:te},ee.inherits.push(te),ee},jxg.A.createMidpoint=function(G,_,J){var Z,Q,ee,te,ne;for(te=0;te<_.length;++te)_[te]=G.select(_[te]);if(_.length===2&&utils_type.A.isPointType(G,_[0])&&utils_type.A.isPointType(G,_[1]))_=utils_type.A.providePoints(G,_,J,"point"),Z=_[0],Q=_[1];else{if(_.length!==1||_[0].elementClass!==constants.A.OBJECT_CLASS_LINE)throw new Error(`JSXGraph: Can't create midpoint.
Possible parent types: [point,point], [line]`);Z=_[0].point1,Q=_[0].point2}return ne=utils_type.A.copyAttributes(J,G.options,"midpoint"),ee=G.create("point",[function(){var ie=Z.coords.usrCoords[1]+Q.coords.usrCoords[1];return isNaN(ie)||Math.abs(Z.coords.usrCoords[0])<math.A.eps||Math.abs(Q.coords.usrCoords[0])<math.A.eps?NaN:.5*ie},function(){var ie=Z.coords.usrCoords[2]+Q.coords.usrCoords[2];return isNaN(ie)||Math.abs(Z.coords.usrCoords[0])<math.A.eps||Math.abs(Q.coords.usrCoords[0])<math.A.eps?NaN:.5*ie}],ne),utils_type.A.exists(Z._is_new)?(ee.addChild(Z),delete Z._is_new):Z.addChild(ee),utils_type.A.exists(Q._is_new)?(ee.addChild(Q),delete Q._is_new):Q.addChild(ee),ee.elType="midpoint",ee.setParents([Z.id,Q.id]),ee.prepareUpdate().update(),ee.generatePolynomial=function(){var ie=Z.symbolic.x,re=Z.symbolic.y,oe=Q.symbolic.x,se=Q.symbolic.y,ae=ee.symbolic.x,le=ee.symbolic.y;return["("+re+")*("+ae+")-("+re+")*("+oe+")+("+le+")*("+oe+")-("+ie+")*("+le+")+("+ie+")*("+se+")-("+ae+")*("+se+")","("+ie+")^2 - 2*("+ie+")*("+ae+")+("+re+")^2-2*("+re+")*("+le+")-("+oe+")^2+2*("+oe+")*("+ae+")-("+se+")^2+2*("+se+")*("+le+")"]},ee},jxg.A.createParallelPoint=function(G,_,J){var Z,Q,ee,te,ne,ie;for(ne=0;ne<_.length;++ne)_[ne]=G.select(_[ne]);if(_.length===3&&utils_type.A.isPointType(G,_[0])&&utils_type.A.isPointType(G,_[1])&&utils_type.A.isPointType(G,_[2]))_=utils_type.A.providePoints(G,_,J,"point"),Z=_[0],Q=_[1],ee=_[2];else if(utils_type.A.isPointType(G,_[0])&&_[1].elementClass===constants.A.OBJECT_CLASS_LINE)ee=utils_type.A.providePoints(G,[_[0]],J,"point")[0],Z=_[1].point1,Q=_[1].point2;else{if(!utils_type.A.isPointType(G,_[1])||_[0].elementClass!==constants.A.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create parallel point with parent types '"+typeof _[0]+"', '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [line,point], [point,point,point]`);ee=utils_type.A.providePoints(G,[_[1]],J,"point")[0],Z=_[0].point1,Q=_[0].point2}return ie=utils_type.A.copyAttributes(J,G.options,"parallelpoint"),te=G.create("point",[function(){return ee.coords.usrCoords[1]+Q.coords.usrCoords[1]-Z.coords.usrCoords[1]},function(){return ee.coords.usrCoords[2]+Q.coords.usrCoords[2]-Z.coords.usrCoords[2]}],ie),utils_type.A.exists(Z._is_new)?(te.addChild(Z),delete Z._is_new):Z.addChild(te),utils_type.A.exists(Q._is_new)?(te.addChild(Q),delete Q._is_new):Q.addChild(te),utils_type.A.exists(ee._is_new)?(te.addChild(ee),delete ee._is_new):ee.addChild(te),te.elType="parallelpoint",te.setParents([Z.id,Q.id,ee.id]),te.prepareUpdate().update(),te.generatePolynomial=function(){var re=Z.symbolic.x,oe=Z.symbolic.y,se=Q.symbolic.x,ae=Q.symbolic.y,le=ee.symbolic.x,ue=ee.symbolic.y,de=te.symbolic.x,pe=te.symbolic.y;return["("+ae+")*("+de+")-("+ae+")*("+le+")-("+oe+")*("+de+")+("+oe+")*("+le+")-("+pe+")*("+se+")+("+pe+")*("+re+")+("+ue+")*("+se+")-("+ue+")*("+re+")","("+pe+")*("+re+")-("+pe+")*("+le+")-("+ae+")*("+re+")+("+ae+")*("+le+")-("+de+")*("+oe+")+("+de+")*("+ue+")+("+se+")*("+oe+")-("+se+")*("+ue+")"]},te},jxg.A.createParallel=function(G,_,J){var Z,Q,ee,te,ne,ie,re=1;for(ne=0;ne<_.length;++ne)_[ne]=G.select(_[ne]);return Z=null,_.length===3?(Z=(_=utils_type.A.providePoints(G,_,J,"point"))[2],re=0):utils_type.A.isPointType(G,_[0])?(Z=utils_type.A.providePoints(G,[_[0]],J,"point")[0],te=function(){return _[1].stdform}):utils_type.A.isPointType(G,_[1])&&(Z=utils_type.A.providePoints(G,[_[1]],J,"point")[0],te=function(){return _[0].stdform}),utils_type.A.exists(J.layer)||(J.layer=G.options.layer.line),ie=utils_type.A.copyAttributes(J,G.options,"parallel","point"),(Q=re===1?G.create("point",[function(){return math.A.crossProduct([1,0,0],te())}],ie):G.create("parallelpoint",_,ie)).isDraggable=!0,ie=utils_type.A.copyAttributes(J,G.options,"parallel"),(ee=G.create("line",[Z,Q],ie)).elType="parallel",ee.subs={point:Q},ee.inherits.push(Q),ee.setParents([_[0].id,_[1].id]),_.length===3&&ee.addParents(_[2].id),ee.point=Q,ee},jxg.A.createArrowParallel=function(G,_,J){var Z,Q;try{return(Q=utils_type.A.copyAttributes(J,G.options,"arrowparallel")).lastArrow===!1&&(Q.lastArrow=!0),(Z=jxg.A.createParallel(G,_,Q).setAttribute({straightFirst:!1,straightLast:!1})).type=constants.A.OBJECT_TYPE_VECTOR,Z.elType="arrowparallel",Z}catch{throw new Error("JSXGraph: Can't create arrowparallel with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [line,point], [point,point,point]`)}},jxg.A.createBisector=function(G,_,J){var Z,Q,ee,te;if(_=utils_type.A.providePoints(G,_,J,"point"),utils_type.A.isPoint(_[0])&&utils_type.A.isPoint(_[1])&&utils_type.A.isPoint(_[2])){for((te=utils_type.A.copyAttributes(J,G.options,"bisector","point")).snapToGrid=!1,(Z=G.create("point",[function(){return geometry.A.angleBisector(_[0],_[1],_[2],G)}],te)).dump=!1,ee=0;ee<3;ee++)utils_type.A.exists(_[ee]._is_new)?(Z.addChild(_[ee]),delete _[ee]._is_new):_[ee].addChild(Z);return utils_type.A.exists(J.layer)||(J.layer=G.options.layer.line),te=utils_type.A.copyAttributes(J,G.options,"bisector"),(Q=jxg.A.createLine(G,[_[1],Z],te)).point=Z,Q.elType="bisector",Q.setParents(_),Q.subs={point:Z},Q.inherits.push(Z),Q}throw new Error("JSXGraph: Can't create angle bisector with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,point,point]`)},jxg.A.createAngularBisectorsOfTwoLines=function(G,_,J){var Z,Q,ee,te,ne=G.select(_[0]),ie=G.select(_[1]);if(ne.elementClass!==constants.A.OBJECT_CLASS_LINE||ie.elementClass!==constants.A.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create angle bisectors of two lines with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [line,line]`);return utils_type.A.exists(J.layer)||(J.layer=G.options.layer.line),ee=utils_type.A.copyAttributes(J,G.options,"bisectorlines","line1"),Z=G.create("line",[function(){var re=math.A.hypot(ne.stdform[1],ne.stdform[2]),oe=math.A.hypot(ie.stdform[1],ie.stdform[2]);return ne.stdform[0]/re-ie.stdform[0]/oe},function(){var re=math.A.hypot(ne.stdform[1],ne.stdform[2]),oe=math.A.hypot(ie.stdform[1],ie.stdform[2]);return ne.stdform[1]/re-ie.stdform[1]/oe},function(){var re=math.A.hypot(ne.stdform[1],ne.stdform[2]),oe=math.A.hypot(ie.stdform[1],ie.stdform[2]);return ne.stdform[2]/re-ie.stdform[2]/oe}],ee),utils_type.A.exists(J.layer)||(J.layer=G.options.layer.line),ee=utils_type.A.copyAttributes(J,G.options,"bisectorlines","line2"),Q=G.create("line",[function(){var re=math.A.hypot(ne.stdform[1],ne.stdform[2]),oe=math.A.hypot(ie.stdform[1],ie.stdform[2]);return ne.stdform[0]/re+ie.stdform[0]/oe},function(){var re=math.A.hypot(ne.stdform[1],ne.stdform[2]),oe=math.A.hypot(ie.stdform[1],ie.stdform[2]);return ne.stdform[1]/re+ie.stdform[1]/oe},function(){var re=math.A.hypot(ne.stdform[1],ne.stdform[2]),oe=math.A.hypot(ie.stdform[1],ie.stdform[2]);return ne.stdform[2]/re+ie.stdform[2]/oe}],ee),te=new composition({line1:Z,line2:Q}),Z.dump=!1,Q.dump=!1,te.elType="bisectorlines",te.setParents([ne.id,ie.id]),te.subs={line1:Z,line2:Q},te},jxg.A.createCircumcenter=function(G,_,J){var Z,Q,ee,te,ne;if(_=utils_type.A.providePoints(G,_,J,"point"),utils_type.A.isPoint(_[0])&&utils_type.A.isPoint(_[1])&&utils_type.A.isPoint(_[2])){for(ee=_[0],te=_[1],ne=_[2],Z=jxg.A.createPoint(G,[function(){return geometry.A.circumcenter(ee,te,ne,G)}],J),Q=0;Q<3;Q++)utils_type.A.exists(_[Q]._is_new)?(Z.addChild(_[Q]),delete _[Q]._is_new):_[Q].addChild(Z);return Z.elType="circumcenter",Z.setParents(_),Z.generatePolynomial=function(){var ie=ee.symbolic.x,re=ee.symbolic.y,oe=te.symbolic.x,se=te.symbolic.y,ae=ne.symbolic.x,le=ne.symbolic.y,ue=Z.symbolic.x,de=Z.symbolic.y;return[["((",ue,")-(",ie,"))^2+((",de,")-(",re,"))^2-((",ue,")-(",oe,"))^2-((",de,")-(",se,"))^2"].join(""),["((",ue,")-(",ie,"))^2+((",de,")-(",re,"))^2-((",ue,")-(",ae,"))^2-((",de,")-(",le,"))^2"].join("")]},Z}throw new Error("JSXGraph: Can't create circumcircle midpoint with parent types '"+typeof _[0]+"', '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [point,point,point]`)},jxg.A.createIncenter=function(G,_,J){var Z,Q,ee,te,ne;if(!((_=utils_type.A.providePoints(G,_,J,"point")).length>=3&&utils_type.A.isPoint(_[0])&&utils_type.A.isPoint(_[1])&&utils_type.A.isPoint(_[2])))throw new Error("JSXGraph: Can't create incenter with parent types '"+typeof _[0]+"', '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [point,point,point]`);for(Q=_[0],ee=_[1],te=_[2],Z=G.create("point",[function(){var ie,re,oe;return ie=math.A.hypot(ee.X()-te.X(),ee.Y()-te.Y()),re=math.A.hypot(Q.X()-te.X(),Q.Y()-te.Y()),oe=math.A.hypot(ee.X()-Q.X(),ee.Y()-Q.Y()),new base_coords.A(constants.A.COORDS_BY_USER,[(ie*Q.X()+re*ee.X()+oe*te.X())/(ie+re+oe),(ie*Q.Y()+re*ee.Y()+oe*te.Y())/(ie+re+oe)],G)}],J),ne=0;ne<3;ne++)utils_type.A.exists(_[ne]._is_new)?(Z.addChild(_[ne]),delete _[ne]._is_new):_[ne].addChild(Z);return Z.elType="incenter",Z.setParents(_),Z},jxg.A.createCircumcircle=function(G,_,J){var Z,Q,ee,te;if((_=utils_type.A.providePoints(G,_,J,"point"))===!1)throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof _[0]+"', '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [point,point,point]`);try{for(ee=utils_type.A.copyAttributes(J,G.options,"circumcircle","center"),(Z=jxg.A.createCircumcenter(G,_,ee)).dump=!1,utils_type.A.exists(J.layer)||(J.layer=G.options.layer.circle),ee=utils_type.A.copyAttributes(J,G.options,"circumcircle"),(Q=jxg.A.createCircle(G,[Z,_[0]],ee)).elType="circumcircle",Q.setParents(_),Q.subs={center:Z},Q.inherits.push(Q),te=0;te<3;te++)utils_type.A.exists(_[te]._is_new)?(Q.addChild(_[te]),delete _[te]._is_new):_[te].addChild(Q)}catch{throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof _[0]+"', '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [point,point,point]`)}return Q},jxg.A.createIncircle=function(G,_,J){var Z,Q,ee,te;if((_=utils_type.A.providePoints(G,_,J,"point"))===!1)throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof _[0]+"', '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [point,point,point]`);try{for(te=utils_type.A.copyAttributes(J,G.options,"incircle","center"),(Q=jxg.A.createIncenter(G,_,te)).dump=!1,utils_type.A.exists(J.layer)||(J.layer=G.options.layer.circle),te=utils_type.A.copyAttributes(J,G.options,"incircle"),(ee=jxg.A.createCircle(G,[Q,function(){var ne=math.A.hypot(_[1].X()-_[2].X(),_[1].Y()-_[2].Y()),ie=math.A.hypot(_[0].X()-_[2].X(),_[0].Y()-_[2].Y()),re=math.A.hypot(_[1].X()-_[0].X(),_[1].Y()-_[0].Y()),oe=(ne+ie+re)/2;return Math.sqrt((oe-ne)*(oe-ie)*(oe-re)/oe)}],te)).elType="incircle",ee.setParents(_),Z=0;Z<3;Z++)utils_type.A.exists(_[Z]._is_new)?(ee.addChild(_[Z]),delete _[Z]._is_new):_[Z].addChild(ee);ee.center=Q,ee.subs={center:ee.center},ee.inherits.push(Q)}catch{throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof _[0]+"', '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [point,point,point]`)}return ee},jxg.A.createReflection=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se=`
Possible parent types: [point|line|curve|polygon|circle|arc|sector, line]`;for(ie=0;ie<_.length;++ie)_[ie]=G.select(_[ie]);if(re=utils_type.A.copyAttributes(J,G.options,"reflection"),utils_type.A.isPoint(_[0]))Q=utils_type.A.providePoints(G,[_[0]],oe)[0];else{if(_[0].elementClass!==constants.A.OBJECT_CLASS_CURVE&&_[0].elementClass!==constants.A.OBJECT_CLASS_LINE&&_[0].type!==constants.A.OBJECT_TYPE_POLYGON&&_[0].elementClass!==constants.A.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create reflection element with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"'."+se);Q=_[0]}if(_[1].elementClass!==constants.A.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create reflected element with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"'."+se);if(Z=_[1],ne=jxg.A.createTransform(G,[Z],{type:"reflect"}),utils_type.A.isPoint(Q))ee=jxg.A.createPoint(G,[Q,ne],re);else if(Q.elementClass===constants.A.OBJECT_CLASS_CURVE)ee=jxg.A.createCurve(G,[Q,ne],re);else if(Q.elementClass===constants.A.OBJECT_CLASS_LINE)ee=jxg.A.createLine(G,[Q,ne],re);else if(Q.type===constants.A.OBJECT_TYPE_POLYGON)ee=jxg.A.createPolygon(G,[Q,ne],re);else{if(Q.elementClass!==constants.A.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create reflected element with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"'."+se);re.type.toLowerCase()==="euclidean"?(oe=utils_type.A.copyAttributes(J,G.options,"reflection","center"),(te=jxg.A.createPoint(G,[Q.center,ne],oe)).prepareUpdate().update().updateVisibility(te.evalVisProp("visible")).updateRenderer(),ee=jxg.A.createCircle(G,[te,function(){return Q.Radius()}],re)):ee=jxg.A.createCircle(G,[Q,ne],re)}return utils_type.A.exists(Q._is_new)&&(ee.addChild(Q),delete Q._is_new),Z.addChild(ee),ee.elType="reflection",ee.addParents(Z),ee.prepareUpdate().update(),utils_type.A.isPoint(ee)&&(ee.generatePolynomial=function(){var ae=Z.point1.symbolic.x,le=Z.point1.symbolic.y,ue=Z.point2.symbolic.x,de=Z.point2.symbolic.y,pe=Q.symbolic.x,fe=Q.symbolic.y,_e=ee.symbolic.x,ye=ee.symbolic.y;return[["((",ye,")-(",fe,"))*((",le,")-(",de,"))+((",ae,")-(",ue,"))*((",_e,")-(",pe,"))"].join(""),["((",_e,")-(",ae,"))^2+((",ye,")-(",le,"))^2-((",pe,")-(",ae,"))^2-((",fe,")-(",le,"))^2"].join("")]}),ee},jxg.A.createMirrorElement=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se=`
Possible parent types: [point|line|curve|polygon|circle|arc|sector, point]`;for(Q=0;Q<_.length;++Q)_[Q]=G.select(_[Q]);if(re=utils_type.A.copyAttributes(J,G.options,"mirrorelement"),utils_type.A.isPoint(_[0]))Z=utils_type.A.providePoints(G,[_[0]],re)[0];else{if(_[0].elementClass!==constants.A.OBJECT_CLASS_CURVE&&_[0].elementClass!==constants.A.OBJECT_CLASS_LINE&&_[0].type!==constants.A.OBJECT_TYPE_POLYGON&&_[0].elementClass!==constants.A.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"'."+se);Z=_[0]}if(!utils_type.A.isPoint(_[1]))throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"'."+se);if(oe=utils_type.A.copyAttributes(J,G.options,"mirrorelement","point"),ee=utils_type.A.providePoints(G,[_[1]],oe)[0],ie=jxg.A.createTransform(G,[Math.PI,ee],{type:"rotate"}),utils_type.A.isPoint(Z))te=jxg.A.createPoint(G,[Z,ie],re);else if(Z.elementClass===constants.A.OBJECT_CLASS_CURVE)te=jxg.A.createCurve(G,[Z,ie],re);else if(Z.elementClass===constants.A.OBJECT_CLASS_LINE)te=jxg.A.createLine(G,[Z,ie],re);else if(Z.type===constants.A.OBJECT_TYPE_POLYGON)te=jxg.A.createPolygon(G,[Z,ie],re);else{if(Z.elementClass!==constants.A.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof _[0]+"' and '"+typeof _[1]+"'."+se);re.type.toLowerCase()==="euclidean"?(oe=utils_type.A.copyAttributes(J,G.options,"mirrorelement","center"),(ne=jxg.A.createPoint(G,[Z.center,ie],oe)).prepareUpdate().update().updateVisibility(ne.evalVisProp("visible")).updateRenderer(),te=jxg.A.createCircle(G,[ne,function(){return Z.Radius()}],re)):te=jxg.A.createCircle(G,[Z,ie],re)}return utils_type.A.exists(Z._is_new)&&(te.addChild(Z),delete Z._is_new),ee.addChild(te),te.elType="mirrorelement",te.addParents(ee),te.prepareUpdate().update(),te},jxg.A.createMirrorPoint=function(G,_,J){var Z=jxg.A.createMirrorElement(G,_,J);return Z.elType="mirrorpoint",Z},jxg.A.createIntegral=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue,de,pe,fe,_e=null;if(utils_type.A.isArray(_[0])&&_[1].elementClass===constants.A.OBJECT_CLASS_CURVE)Z=_[0],Q=_[1];else{if(!utils_type.A.isArray(_[1])||_[0].elementClass!==constants.A.OBJECT_CLASS_CURVE)throw new Error("JSXGraph: Can't create integral with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [[number|function,number|function],curve]`);Z=_[1],Q=_[0]}return(ee=utils_type.A.copyAttributes(J,G.options,"integral")).withlabel=!1,fe=G.create("curve",[[0],[0]],ee),G.objectsList.pop(),te=Z[0],ne=Z[1],utils_type.A.isFunction(te)?(re=function(){return Q.Y(ie())},te=(ie=te)()):(ie=te,re=Q.Y(te)),utils_type.A.isFunction(ne)?(se=function(){return Q.Y(oe())},ne=(oe=ne)()):(oe=ne,se=Q.Y(ne)),ee=utils_type.A.copyAttributes(J,G.options,"integral","curveleft"),ae=G.create("glider",[ie,re,Q],ee),utils_type.A.isFunction(ie)&&ae.hideElement(),ee=utils_type.A.copyAttributes(J,G.options,"integral","baseleft"),le=G.create("point",[function(){return fe.evalVisProp("axis")==="y"?0:ae.X()},function(){return fe.evalVisProp("axis")==="y"?ae.Y():0}],ee),ee=utils_type.A.copyAttributes(J,G.options,"integral","curveright"),ue=G.create("glider",[oe,se,Q],ee),utils_type.A.isFunction(oe)&&ue.hideElement(),ee=utils_type.A.copyAttributes(J,G.options,"integral","baseright"),de=G.create("point",[function(){return fe.evalVisProp("axis")==="y"?0:ue.X()},function(){return fe.evalVisProp("axis")==="y"?ue.Y():0}],ee),fe._pos=G.objectsList.length,G.objectsList.push(fe),(ee=utils_type.A.copyAttributes(J,G.options,"integral")).withlabel!==!1&&ee.axis!=="y"&&(ee=utils_type.A.copyAttributes(J,G.options,"integral","label"),ee=utils_type.A.copyAttributes(ee,G.options,"label"),pe=function(){var ye,be="&int;",Ae=numerics.A.NewtonCotes([le.X(),de.X()],Q.Y),Ce=_e.evalVisProp("digits");return ye=_e.useLocale()?_e.formatNumberLocale(Ae,Ce):utils_type.A.toFixed(Ae,Ce),(_e.evalVisProp("usemathjax")||_e.evalVisProp("usekatex"))&&(be="\\int"),be+" = "+ye},(_e=G.create("text",[function(){var ye=new base_coords.A(constants.A.COORDS_BY_SCREEN,[this.evalVisProp("offset.0")+this.board.origin.scrCoords[1],0],this.board,!1),be=this.board.getBoundingBox(),Ae=.1*(be[2]-be[0]),Ce=ue.X();return Ce<be[0]?Ce=be[0]+Ae:Ce>be[2]&&(Ce=be[2]-Ae),Ce+ye.usrCoords[1]},function(){var ye=new base_coords.A(constants.A.COORDS_BY_SCREEN,[0,this.evalVisProp("offset.1")+this.board.origin.scrCoords[2]],this.board,!1),be=this.board.getBoundingBox(),Ae=.1*(be[1]-be[3]),Ce=ue.Y();return Ce>be[1]?Ce=be[1]-Ae:Ce<be[3]&&(Ce=be[3]+Ae),Ce+ye.usrCoords[2]},""],ee)).setText(pe),_e.dump=!1,ae.addChild(_e),ue.addChild(_e)),ae.dump=!1,le.dump=!1,ue.dump=!1,de.dump=!1,fe.elType="integral",fe.setParents([Q.id,Z]),fe.subs={curveLeft:ae,baseLeft:le,curveRight:ue,baseRight:de},fe.inherits.push(ae,le,ue,de),ee.withlabel&&(fe.subs.label=_e,fe.inherits.push(_e)),fe.Value=function(){return numerics.A.I([le.X(),de.X()],Q.Y)},fe.updateDataArray=function(){var ye,be,Ae,Ce,Ee,Re,Te,Me,Ne;if(this.evalVisProp("axis")==="y"){for(ae.Y()<ue.Y()?(Re=ae.X(),Me=ae.Y(),Te=ue.X(),Ne=ue.Y()):(Re=ue.X(),Me=ue.Y(),Te=ae.X(),Ne=ae.Y()),Ce=Math.min(Re,Te),Ee=Math.max(Re,Te),ye=[0,Re],be=[Me,Me],Ae=0;Ae<Q.numberPoints;Ae++)Me<=Q.points[Ae].usrCoords[2]&&Ce<=Q.points[Ae].usrCoords[1]&&Q.points[Ae].usrCoords[2]<=Ne&&Q.points[Ae].usrCoords[1]<=Ee&&(ye.push(Q.points[Ae].usrCoords[1]),be.push(Q.points[Ae].usrCoords[2]));ye.push(Te),be.push(Ne),ye.push(0),be.push(Ne),ye.push(0),be.push(Me)}else{for(le.X()<de.X()?(Ce=le.X(),Ee=de.X()):(Ce=de.X(),Ee=le.X()),ye=[Ce,Ce],be=[0,Q.Y(Ce)],Ae=0;Ae<Q.numberPoints;Ae++)Ce<=Q.points[Ae].usrCoords[1]&&Q.points[Ae].usrCoords[1]<=Ee&&(ye.push(Q.points[Ae].usrCoords[1]),be.push(Q.points[Ae].usrCoords[2]));ye.push(Ee),be.push(Q.Y(Ee)),ye.push(Ee),be.push(0),ye.push(Ce),be.push(0)}this.dataX=ye,this.dataY=be},ae.addChild(fe),ue.addChild(fe),le.addChild(fe),de.addChild(fe),fe.baseLeft=le,fe.baseRight=de,fe.curveLeft=ae,fe.curveRight=ue,fe.methodMap=jxg.A.deepCopy(fe.methodMap,{curveLeft:"curveLeft",baseLeft:"baseLeft",curveRight:"curveRight",baseRight:"baseRight",Value:"Value"}),fe.label=_e,fe},jxg.A.createInequality=function(G,_,J){var Z,Q,ee;if(ee=utils_type.A.copyAttributes(J,G.options,"inequality"),_[0].elementClass===constants.A.OBJECT_CLASS_LINE)(Q=G.create("curve",[[],[]],ee)).hasPoint=function(){return!1},Q.updateDataArray=function(){var te,ne,ie,re=G.getBoundingBox(),oe=this.evalVisProp("inverse"),se=oe?-1:1,ae=1.5*Math.max(re[2]-re[0],re[1]-re[3]),le={coords:{usrCoords:[1,.5*(re[0]+re[2]),oe?re[1]:re[3]]}},ue=_[0].stdform.slice(1),de=ue;ie=1.5*Math.max(geometry.A.perpendicular(_[0],le,G)[0].distance(constants.A.COORDS_BY_USER,le.coords),ae),ie*=se,le={coords:{usrCoords:[1,.5*(re[0]+re[2]),.5*(re[1]+re[3])]}},te=[1,(le=Math.abs(math.A.innerProduct(le.coords.usrCoords,_[0].stdform,3))>=math.A.eps?geometry.A.perpendicular(_[0],le,G)[0].usrCoords:le.coords.usrCoords)[1]+ue[1]*ae,le[2]-ue[0]*ae],ne=[1,le[1]-de[1]*ae,le[2]+de[0]*ae],this.dataX=[te[1],te[1]+ue[0]*ie,ne[1]+de[0]*ie,ne[1],te[1]],this.dataY=[te[2],te[2]+ue[1]*ie,ne[2]+de[1]*ie,ne[2],te[2]]};else if(_[0].elementClass===constants.A.OBJECT_CLASS_CURVE&&_[0].visProp.curvetype==="functiongraph")(Q=G.create("curve",[[],[]],ee)).updateDataArray=function(){var te,ne,ie,re,oe,se,ae,le,ue,de=this.board.getBoundingBox(),pe=[],fe=_[0].minX(),_e=_[0].maxX(),ye=.3*(de[1]-de[3]);if(te=this.evalVisProp("inverse")?1:3,this.dataX=[],this.dataY=[],(re=_[0].points.length)!==0)for(de[1]+=ye,de[3]-=ye,ie=-1;ie<re-1;){for(oe=ie+1,ne=re;oe<re;oe++)if(_[0].points[oe].isReal()){ne=oe;break}if(ne>=re)break;for(oe=ne,ie=re-1;oe<re-1;oe++)if(!_[0].points[oe+1].isReal()){ie=oe;break}for(le=_[0].points[ne].usrCoords[1],ue=_[0].points[ie].usrCoords[1],se=de[0]<fe?fe:de[0],ae=de[2]>_e?_e:de[2],se=ne===0?se:Math.max(se,le),ae=ie===re-1?ae:Math.min(ae,ue),ae=ie===re-1?_e:ue,(pe=[]).push([1,se=ne===0?fe:le,de[te]]),pe.push([1,se,_[0].points[ne].usrCoords[2]]),oe=ne;oe<=ie;oe++)pe.push(_[0].points[oe].usrCoords);for(pe.push([1,ae,_[0].points[ie].usrCoords[2]]),pe.push([1,ae,de[te]]),pe.push(pe[0]),oe=0;oe<pe.length;oe++)this.dataX.push(pe[oe][1]),this.dataY.push(pe[oe][2]);ie<re-1&&(this.dataX.push(NaN),this.dataY.push(NaN))}},Q.hasPoint=function(){return!1};else if(Z=utils_type.A.createFunction(_[0]),Q.addParentsFromJCFunctions([Z]),!utils_type.A.exists(Z))throw new Error(`JSXGraph: Can't create area with the given parents.
Possible parent types: [line], [function]`);return Q.addParents(_[0]),Q},jxg.A.registerElement("arrowparallel",jxg.A.createArrowParallel),jxg.A.registerElement("bisector",jxg.A.createBisector),jxg.A.registerElement("bisectorlines",jxg.A.createAngularBisectorsOfTwoLines),jxg.A.registerElement("msector",jxg.A.createMsector),jxg.A.registerElement("circumcircle",jxg.A.createCircumcircle),jxg.A.registerElement("circumcirclemidpoint",jxg.A.createCircumcenter),jxg.A.registerElement("circumcenter",jxg.A.createCircumcenter),jxg.A.registerElement("incenter",jxg.A.createIncenter),jxg.A.registerElement("incircle",jxg.A.createIncircle),jxg.A.registerElement("integral",jxg.A.createIntegral),jxg.A.registerElement("midpoint",jxg.A.createMidpoint),jxg.A.registerElement("mirrorelement",jxg.A.createMirrorElement),jxg.A.registerElement("mirrorpoint",jxg.A.createMirrorPoint),jxg.A.registerElement("orthogonalprojection",jxg.A.createOrthogonalProjection),jxg.A.registerElement("parallel",jxg.A.createParallel),jxg.A.registerElement("parallelpoint",jxg.A.createParallelPoint),jxg.A.registerElement("perpendicular",jxg.A.createPerpendicular),jxg.A.registerElement("perpendicularpoint",jxg.A.createPerpendicularPoint),jxg.A.registerElement("perpendicularsegment",jxg.A.createPerpendicularSegment),jxg.A.registerElement("reflection",jxg.A.createReflection),jxg.A.registerElement("inequality",jxg.A.createInequality),jxg.A.createGrid=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se=math.A.eps,ae=5e3,le=[],ue=[];if((ee=_).length>2||ee.length>=1&&ee[0].elType!=="axis"||ee.length>=2&&ee[1].elType!=="axis")throw new Error("JSXGraph: Can't create 'grid' with parent type '"+_[0].elType+"'. Possible parent types: [axis,axis]");return!utils_type.A.exists(ee[0])&&utils_type.A.exists(G.defaultAxes)&&(ee[0]=G.defaultAxes.x),!utils_type.A.exists(ee[1])&&utils_type.A.exists(G.defaultAxes)&&(ee[1]=G.defaultAxes.y),oe=function(de,pe,fe,_e,ye,be,Ae){var Ce,Ee,Re,Te,Me,Ne,Le;switch(de.toLowerCase()){case".":case"point":return pe.visProp.linecap="round",pe.visProp.strokewidth=ye*pe.board.unitX+be*pe.board.unitY,[[fe,fe,NaN],[_e,_e,NaN]];case"o":case"circle":return pe.visProp.linecap="square",pe.bezierDegree=3,[[fe+ye,fe+ye,fe+(Ee=4*Math.tan(Math.PI/8)/3)*ye,fe,fe-Ee*ye,fe-ye,fe-ye,fe-ye,fe-Ee*ye,fe,fe+Ee*ye,fe+ye,fe+ye,NaN],[_e,_e+Ee*be,_e+be,_e+be,_e+be,_e+Ee*be,_e,_e-Ee*be,_e-be,_e-be,_e-be,_e-Ee*be,_e,NaN]];case"regpol":case"regularpolygon":for(pe.visProp.linecap="round",Te=pe.evalVisProp("polygonvertices"),Me=[[],[]],Ce=0;Ce<=2*Math.PI;Ce+=2*Math.PI/Te)Me[0].push(fe-ye*Math.sin(Ce)),Me[1].push(_e-be*Math.cos(Ce));return Me[0].push(NaN),Me[1].push(NaN),Me;case"[]":case"square":return pe.visProp.linecap="square",[[fe-ye,fe+ye,fe+ye,fe-ye,fe-ye,NaN],[_e+be,_e+be,_e-be,_e-be,_e+be,NaN]];case"<>":case"diamond":return pe.visProp.linecap="square",[[fe,fe+ye,fe,fe-ye,fe,NaN],[_e+be,_e,_e-be,_e,_e+be,NaN]];case"<<>>":case"diamond2":return pe.visProp.linecap="square",[[fe,fe+(Ne=ye*Math.sqrt(2)),fe,fe-Ne,fe,NaN],[_e+(Le=be*Math.sqrt(2)),_e,_e-Le,_e,_e+Le,NaN]];case"x":case"cross":return[[fe-ye,fe+ye,NaN,fe-ye,fe+ye,NaN],[_e+be,_e-be,NaN,_e-be,_e+be,NaN]];case"+":case"plus":return[[fe-ye,fe+ye,NaN,fe,fe,NaN],[_e,_e,NaN,_e-be,_e+be,NaN]];case"-":case"minus":return[[fe-ye,fe+ye,NaN],[_e,_e,NaN]];case"|":case"divide":return[[fe,fe,NaN],[_e-be,_e+be,NaN]];case"^":case"a":case"A":case"triangleup":return[[fe-ye,fe,fe+ye,NaN],[_e-be,_e,_e-be,NaN]];case"v":case"triangledown":return[[fe-ye,fe,fe+ye,NaN],[_e+be,_e,_e+be,NaN]];case"<":case"triangleleft":return[[fe+ye,fe,fe+ye,NaN],[_e+be,_e,_e-be,NaN]];case">":case"triangleright":return[[fe-ye,fe,fe-ye,NaN],[_e+be,_e,_e-be,NaN]];case"line":return Re=pe.evalVisProp("margin"),[[fe,fe,NaN,Ae[0]-Re/pe.board.unitX,Ae[2]+Re/pe.board.unitX,NaN],[Ae[1]+Re/pe.board.unitY,Ae[3]-Re/pe.board.unitY,NaN,_e,_e,NaN]];default:return[[],[]]}},te=utils_type.A.copyAttributes(J,G.options,"grid"),utils_type.A.mergeAttr(te,te.themes[te.theme],!1),ne={},utils_type.A.mergeAttr(ne,te,!0,!0),utils_type.A.mergeAttr(ne,te.major,!0,!0),(Z=G.create("curve",[[null],[null]],ne)).elType="grid",Z.type=constants.A.OBJECT_TYPE_GRID,ie={},utils_type.A.mergeAttr(ie,te,!0,!0),utils_type.A.mergeAttr(ie,te.minor,!0,!0),ie.id===ne.id&&(ie.id=Z.id+"_minor"),ie.name===ne.name&&(ie.name=Z.name+"_minor"),(Q=G.create("curve",[[null],[null]],ie)).elType="grid",Q.type=constants.A.OBJECT_TYPE_GRID,Z.minorGrid=Q,Q.majorGrid=Z,Z.hasPoint=function(){return!1},Q.hasPoint=function(){return!1},Z.inherits.push(Q),Z.updateDataArray=function(){var de,pe,fe,_e,ye,be,Ae,Ce,Ee=this.board.getBoundingBox(),Re=this.evalVisProp("gridx"),Te=this.evalVisProp("gridy"),Me=this.evalVisProp("face"),Ne=this.evalVisProp("drawzero"),Le=Ne===!0||utils_type.A.isObject(Ne)&&this.eval(Ne.origin)===!0,Ie=Ne===!0||utils_type.A.isObject(Ne)&&this.eval(Ne.x)===!0,Ge=Ne===!0||utils_type.A.isObject(Ne)&&this.eval(Ne.y)===!0,He=this.evalVisProp("includeboundaries"),Be=this.evalVisProp("forcesquare");if(this.dataX=[],this.dataY=[],re=this.evalVisProp("majorstep"),utils_type.A.isArray(re)||(re=[re,re]),re.length<2&&(re=[re[0],re[0]]),utils_type.A.exists(Re)&&(jxg.A.deprecated("gridX","majorStep"),re[0]=Re),utils_type.A.exists(Te)&&(jxg.A.deprecated("gridY","majorStep"),re[1]=Te),re[0]==="auto"?(Ce=Math.pow(10,Math.floor(Math.log(50/this.board.unitX)/Math.LN10)),re[0]=Ce,utils_type.A.exists(ee[0])&&(re[0]=ee[0].ticks[0].getDistanceMajorTicks())):re[0]=utils_type.A.parseNumber(re[0],Math.abs(Ee[1]-Ee[3]),1/this.board.unitX),re[1]==="auto"?(Ce=Math.pow(10,Math.floor(Math.log(50/this.board.unitY)/Math.LN10)),re[1]=Ce,utils_type.A.exists(ee[1])&&(re[1]=ee[1].ticks[0].getDistanceMajorTicks())):re[1]=utils_type.A.parseNumber(re[1],Math.abs(Ee[0]-Ee[2]),1/this.board.unitY),Be==="min"||Be===!0?re[0]*this.board.unitX<=re[1]*this.board.unitY?re[1]=re[0]/this.board.unitY*this.board.unitX:re[0]=re[1]/this.board.unitX*this.board.unitY:Be==="max"&&(re[0]*this.board.unitX<=re[1]*this.board.unitY?re[0]=re[1]/this.board.unitX*this.board.unitY:re[1]=re[0]/this.board.unitY*this.board.unitX),le=this.evalVisProp("size"),utils_type.A.isArray(le)||(le=[le,le]),le.length<2&&(le=[le[0],le[0]]),utils_type.A.isNumber(le[0],!0)&&(le[0]=le[0]+"px"),utils_type.A.isNumber(le[1],!0)&&(le[1]=le[1]+"px"),le[0]=utils_type.A.parseNumber(le[0],re[0],1/this.board.unitX),le[1]=utils_type.A.parseNumber(le[1],re[1],1/this.board.unitY),ue[0]=le[0]/2,ue[1]=le[1]/2,de=math.A.roundToStep(Ee[0],re[0]),pe=math.A.roundToStep(Ee[1],re[1]),Ae=isFinite(de)&&isFinite(pe)&&isFinite(Ee[2])&&isFinite(Ee[3])&&Math.abs(Ee[2])<Math.abs(re[0]*ae)&&Math.abs(Ee[3])<Math.abs(re[1]*ae),Me.toLowerCase()==="line"){for(ye=Z.evalVisProp("margin"),_e=pe;Ae&&_e>=Ee[3];_e-=re[1])!Le&&Math.abs(_e)<se||!Ge&&Math.abs(_e)<se||!He&&(_e<=Ee[3]+ue[1]||_e>=Ee[1]-ue[1])||(be=[[Ee[0]-ye/Z.board.unitX,Ee[2]+ye/Z.board.unitX,NaN],[_e,_e,NaN]],utils_type.A.concat(this.dataX,be[0]),utils_type.A.concat(this.dataY,be[1]));for(fe=de;Ae&&fe<=Ee[2];fe+=re[0])!Le&&Math.abs(fe)<se||!Ie&&Math.abs(fe)<se||!He&&(fe<=Ee[0]+ue[0]||fe>=Ee[2]-ue[0])||(be=[[fe,fe,NaN],[Ee[1]+ye/Z.board.unitY,Ee[3]-ye/Z.board.unitY,NaN]],utils_type.A.concat(this.dataX,be[0]),utils_type.A.concat(this.dataY,be[1]))}else for(_e=pe;Ae&&_e>=Ee[3];_e-=re[1])for(fe=de;Ae&&fe<=Ee[2];fe+=re[0])!Le&&Math.abs(_e)<se&&Math.abs(fe)<se||!Ie&&Math.abs(_e)<se&&Math.abs(fe)>=se||!Ge&&Math.abs(fe)<se&&Math.abs(_e)>=se||!He&&(fe<=Ee[0]+ue[0]||fe>=Ee[2]-ue[0]||_e<=Ee[3]+ue[1]||_e>=Ee[1]-ue[1])||(be=oe(Me,Z,fe,_e,ue[0],ue[1],Ee),utils_type.A.concat(this.dataX,be[0]),utils_type.A.concat(this.dataY,be[1]))},Q.updateDataArray=function(){var de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te,Me,Ne,Le,Ie,Ge,He,Be,ze,Fe=this.board.getBoundingBox(),$e=[],Xe=[],je=this.evalVisProp("minorelements"),qe=this.evalVisProp("size"),Ze=this.evalVisProp("face"),st=this.evalVisProp("drawzero"),St=st===!0||utils_type.A.isObject(st)&&this.eval(st.x)===!0,it=st===!0||utils_type.A.isObject(st)&&this.eval(st.y)===!0,lt=this.majorGrid.evalVisProp("face"),ft=this.majorGrid.evalVisProp("drawzero"),kt=ft===!0||utils_type.A.isObject(ft)&&this.eval(ft.origin)===!0,Ht=ft===!0||utils_type.A.isObject(ft)&&this.eval(ft.x)===!0,Wt=ft===!0||utils_type.A.isObject(ft)&&this.eval(ft.y)===!0,ni=this.evalVisProp("includeboundaries");if(this.dataX=[],this.dataY=[],utils_type.A.isArray(je)||(je=[je,je]),je.length<2&&(je=[je[0],je[0]]),utils_type.A.isNumber(je[0],!0)?je[0]=parseFloat(je[0]):(je[0]=3,utils_type.A.exists(ee[0])&&(je[0]=ee[0].eval(ee[0].getAttribute("ticks").minorticks))),$e[0]=re[0]/(je[0]+1),utils_type.A.isNumber(je[1],!0)?je[1]=parseFloat(je[1]):(je[1]=3,utils_type.A.exists(ee[1])&&(je[1]=ee[1].eval(ee[1].getAttribute("ticks").minorticks))),$e[1]=re[1]/(je[1]+1),utils_type.A.isArray(qe)||(qe=[qe,qe]),qe.length<2&&(qe=[qe[0],qe[0]]),utils_type.A.isNumber(qe[0],!0)&&(qe[0]=qe[0]+"px"),utils_type.A.isNumber(qe[1],!0)&&(qe[1]=qe[1]+"px"),qe[0]=utils_type.A.parseNumber(qe[0],$e[0],1/this.board.unitX),qe[1]=utils_type.A.parseNumber(qe[1],$e[1],1/this.board.unitY),Xe[0]=.5*qe[0],Xe[1]=.5*qe[1],de=math.A.roundToStep(Fe[0],$e[0]),pe=math.A.roundToStep(Fe[1],$e[1]),Ae=isFinite(de)&&isFinite(pe)&&isFinite(Fe[2])&&isFinite(Fe[3])&&Math.abs(Fe[2])<=Math.abs($e[0]*ae)&&Math.abs(Fe[3])<Math.abs($e[1]*ae),Ze.toLowerCase()!=="line")for(_e=pe;Ae&&_e>=Fe[3];_e-=$e[1])for(fe=de;Ae&&fe<=Fe[2];fe+=$e[0]){if(Ce=math.A.roundToStep(Math.abs(fe),re[0]),Ce=Math.abs(Ce-Math.abs(fe)),Ee=re[0]-Ce,Re=math.A.roundToStep(Math.abs(_e),re[1]),Re=Math.abs(Re-Math.abs(_e)),Te=re[1]-Re,lt==="line"){if(Ce-Xe[0]-ue[0]<se||Ee-Xe[0]-ue[0]<se||Re-Xe[1]-ue[1]<se||Te-Xe[1]-ue[1]<se)continue}else if((Ce-Xe[0]-ue[0]<se||Ee-Xe[0]-ue[0]<se)&&(Re-Xe[1]-ue[1]<se||Te-Xe[1]-ue[1]<se)&&(kt||ue[1]-Math.abs(_e)+Xe[1]<se||ue[0]-Math.abs(fe)+Xe[0]<se)&&(Ht||ue[1]-Math.abs(_e)+Xe[1]<se||ue[0]+Math.abs(fe)-Xe[0]<se)&&(Wt||ue[0]-Math.abs(fe)+Xe[0]<se||ue[1]+Math.abs(_e)-Xe[1]<se))continue;!it&&Math.abs(fe)<se||!St&&Math.abs(_e)<se||(Me=Math.abs(Fe[0]%re[0]),Ne=Math.abs(Fe[1]%re[1]),Le=Math.abs(Fe[2]%re[0]),Ie=Math.abs(Fe[3]%re[1]),Ge=re[0]-Me,He=re[1]-Ne,Be=re[0]-Le,ze=re[1]-Ie,!ni&&(fe-Xe[0]-Fe[0]-ue[0]+Ge<se&&Ge-ue[0]<se||fe-Xe[0]-Fe[0]-ue[0]-Me<se&&Me-ue[0]<se||-fe-Xe[0]+Fe[2]-ue[0]+Be<se&&Be-ue[0]<se||-fe-Xe[0]+Fe[2]-ue[0]-Le<se&&Le-ue[0]<se||-_e-Xe[1]+Fe[1]-ue[1]+He<se&&He-ue[1]<se||-_e-Xe[1]+Fe[1]-ue[1]-Ne<se&&Ne-ue[1]<se||_e-Xe[1]-Fe[3]-ue[1]+ze<se&&ze-ue[1]<se||_e-Xe[1]-Fe[3]-ue[1]-Ie<se&&Ie-ue[1]<se||-_e-Xe[1]+Fe[1]<se||fe-Xe[0]-Fe[0]<se||_e-Xe[1]-Fe[3]<se||-fe-Xe[0]+Fe[2]<se)||(be=oe(Ze,Q,fe,_e,Xe[0],Xe[1],Fe),utils_type.A.concat(this.dataX,be[0]),utils_type.A.concat(this.dataY,be[1])))}else{for(ye=Q.evalVisProp("margin"),_e=pe;Ae&&_e>=Fe[3];_e-=$e[1]){if(Re=math.A.roundToStep(Math.abs(_e),re[1]),Re=Math.abs(Re-Math.abs(_e)),Te=re[1]-Re,lt==="line"){if(Re-Xe[1]-ue[1]<se||Te-Xe[1]-ue[1]<se)continue}else if((Re-Xe[1]-ue[1]<se||Te-Xe[1]-ue[1]<se)&&(kt||ue[1]-Math.abs(_e)+Xe[1]<se)&&(Ht||ue[1]-Math.abs(_e)+Xe[1]<se)&&(Wt||ue[1]+Math.abs(_e)-Xe[1]<se))continue;!St&&Math.abs(_e)<se||(Me=Math.abs(Fe[0]%re[0]),Ne=Math.abs(Fe[1]%re[1]),Le=Math.abs(Fe[2]%re[0]),Ie=Math.abs(Fe[3]%re[1]),Ge=re[0]-Me,He=re[1]-Ne,Be=re[0]-Le,ze=re[1]-Ie,!ni&&(-_e-Xe[1]+Fe[1]-ue[1]+He<se&&He-ue[1]<se||-_e-Xe[1]+Fe[1]-ue[1]-Ne<se&&Ne-ue[1]<se||_e-Xe[1]-Fe[3]-ue[1]+ze<se&&ze-ue[1]<se||_e-Xe[1]-Fe[3]-ue[1]-Ie<se&&Ie-ue[1]<se||-_e-Xe[1]+Fe[1]<se||_e-Xe[1]-Fe[3]<se)||(be=[[Fe[0]-ye/Q.board.unitX,Fe[2]+ye/Q.board.unitX,NaN],[_e,_e,NaN]],utils_type.A.concat(this.dataX,be[0]),utils_type.A.concat(this.dataY,be[1])))}for(fe=de;Ae&&fe<=Fe[2];fe+=$e[0]){if(Ce=math.A.roundToStep(Math.abs(fe),re[0]),Ce=Math.abs(Ce-Math.abs(fe)),Ee=re[0]-Ce,lt==="line"){if(Ce-Xe[0]-ue[0]<se||Ee-Xe[0]-ue[0]<se)continue}else if((Ce-Xe[0]-ue[0]<se||Ee-Xe[0]-ue[0]<se)&&(kt||ue[0]-Math.abs(fe)+Xe[0]<se)&&(Ht||ue[0]+Math.abs(fe)-Xe[0]<se)&&(Wt||ue[0]-Math.abs(fe)+Xe[0]<se))continue;!it&&Math.abs(fe)<se||(Me=Math.abs(Fe[0]%re[0]),Ne=Math.abs(Fe[1]%re[1]),Le=Math.abs(Fe[2]%re[0]),Ie=Math.abs(Fe[3]%re[1]),Ge=re[0]-Me,He=re[1]-Ne,Be=re[0]-Le,ze=re[1]-Ie,!ni&&(fe-Xe[0]-Fe[0]-ue[0]+Ge<se&&Ge-ue[0]<se||fe-Xe[0]-Fe[0]-ue[0]-Me<se&&Me-ue[0]<se||-fe-Xe[0]+Fe[2]-ue[0]+Be<se&&Be-ue[0]<se||-fe-Xe[0]+Fe[2]-ue[0]-Le<se&&Le-ue[0]<se||fe-Xe[0]-Fe[0]<se||-fe-Xe[0]+Fe[2]<se)||(be=[[fe,fe,NaN],[Fe[1]+ye/Q.board.unitY,Fe[3]-ye/Q.board.unitY,NaN]],utils_type.A.concat(this.dataX,be[0]),utils_type.A.concat(this.dataY,be[1])))}}},G.grids.push(Z),G.grids.push(Q),Q.dump=!1,Z.getParents=Q.getParents=function(){return ee.slice()},Z},jxg.A.registerElement("grid",jxg.A.createGrid),__webpack_require__(925),jxg.A.Image=function(G,_,J,Z,Q){this.constructor(G,J,constants.A.OBJECT_TYPE_IMAGE,constants.A.OBJECT_CLASS_OTHER),this.element=this.board.select(J.anchor),this.coordsConstructor(_),this.W=utils_type.A.createFunction(Q[0],this.board,""),this.H=utils_type.A.createFunction(Q[1],this.board,""),this.addParentsFromJCFunctions([this.W,this.H]),this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*G.unitX),Math.abs(this.usrSize[1]*G.unitY)],this.url=Z,this.elType="image",this.span=[this.coords.usrCoords.slice(0),[this.coords.usrCoords[0],this.W(),0],[this.coords.usrCoords[0],0,this.H()]],this.id=this.board.setId(this,"Im"),this.board.renderer.drawImage(this),this.board.finalizeAdding(this),this.methodMap=jxg.A.deepCopy(this.methodMap,{addTransformation:"addTransform",trans:"addTransform",W:"W",Width:"W",H:"H",Height:"H",setSize:"setSize"})},jxg.A.Image.prototype=new base_element.A,utils_type.A.copyPrototypeMethods(jxg.A.Image,coordselement.A,"coordsConstructor"),jxg.A.extend(jxg.A.Image.prototype,{hasPoint:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se=this.transformations.length;return utils_type.A.isObject(this.evalVisProp("precision"))?(ee=this.board._inputDevice,te=this.evalVisProp("precision."+ee)):te=this.board.options.precision.hasPoint,se===0?(J=G-this.coords.scrCoords[1],Z=this.coords.scrCoords[2]-_,J>=-(Q=te)&&J-this.size[0]<=Q&&Z>=-Q&&Z-this.size[1]<=Q):(ie=[(ne=(ne=new base_coords.A(constants.A.COORDS_BY_SCREEN,[G,_],this.board)).usrCoords)[0]-this.span[0][0],ne[1]-this.span[0][1],ne[2]-this.span[0][2]],0<=(re=(oe=math.A.innerProduct)(ie,this.span[1]))&&re<=oe(this.span[1],this.span[1])&&0<=(re=oe(ie,this.span[2]))&&re<=oe(this.span[2],this.span[2]))},update:function(G){return this.needsUpdate?(this.updateCoords(G),this.updateSize(),this.updateSpan(),this):this},updateRenderer:function(){return this.updateRendererGeneric("updateImage")},updateSize:function(){return this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*this.board.unitX),Math.abs(this.usrSize[1]*this.board.unitY)],this},updateSpan:function(){var G,_,J=this.transformations.length,Z=[];if(J===0)this.span=[[this.Z(),this.X(),this.Y()],[this.Z(),this.W(),0],[this.Z(),0,this.H()]];else{for(Z[0]=[this.Z(),this.X(),this.Y()],Z[1]=[this.Z(),this.X()+this.W(),this.Y()],Z[2]=[this.Z(),this.X(),this.Y()+this.H()],G=0;G<J;G++)for(_=0;_<3;_++)Z[_]=math.A.matVecMult(this.transformations[G].matrix,Z[_]);for(_=0;_<3;_++)Z[_][1]/=Z[_][0],Z[_][2]/=Z[_][0],Z[_][0]/=Z[_][0];for(_=1;_<3;_++)Z[_][0]-=Z[0][0],Z[_][1]-=Z[0][1],Z[_][2]-=Z[0][2];this.span=Z}return this},addTransform:function(G){var _;if(utils_type.A.isArray(G))for(_=0;_<G.length;_++)this.transformations.push(G[_]);else this.transformations.push(G);return this},getParents:function(){var G=[this.url,[this.Z(),this.X(),this.Y()],this.usrSize];return this.parents.length!==0&&(G=this.parents),G},setSize:function(G,_){return this.W=utils_type.A.createFunction(G,this.board,""),this.H=utils_type.A.createFunction(_,this.board,""),this.addParentsFromJCFunctions([this.W,this.H]),this},W:function(){},H:function(){}}),jxg.A.createImage=function(G,_,J){var Z,Q,ee=_[0],te=_[1],ne=_[2];if(Z=utils_type.A.copyAttributes(J,G.options,"image"),!(Q=coordselement.A.create(jxg.A.Image,G,te,Z,ee,ne)))throw new Error("JSXGraph: Can't create image with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [x,y], [z,x,y], [element,transformation]`);return Z.rotate!==0&&Q.addRotation(Z.rotate),Q},jxg.A.registerElement("image",jxg.A.createImage),jxg.A.Image,jxg.A.createSlider=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te;return ye=(Te=utils_type.A.copyAttributes(J,G.options,"slider")).withticks,_e=Te.withlabel,Ce=Te.snapwidth,be=Te.snapvalues,Ae=Te.snapvaluedistance,re=G.create("point",_[0],Te.point1),oe=G.create("point",_[1],Te.point2),(ae=G.create("segment",[re,oe],Te.baseline)).updateStdform(),Z=re.coords.usrCoords.slice(1),Q=oe.coords.usrCoords.slice(1),ee=_[2][0],te=_[2][1],ne=_[2][2],ie=ne-ee,Re=(Ee=utils_type.A.evaluate(Ce))===-1?te:Math.round((te-ee)/Ee)*Ee+ee,pe=Z[0]+(Q[0]-Z[0])*(Re-ee)/(ne-ee),fe=Z[1]+(Q[1]-Z[1])*(Re-ee)/(ne-ee),Te.withlabel=!1,(se=G.create("glider",[pe,fe,ae],Te)).setAttribute({snapwidth:Ce,snapvalues:be,snapvaluedistance:Ae}),le=G.create("segment",[re,se],Te.highline),se.Value=function(){var Me=this._smax-this._smin,Ne=this.evalVisProp("snapwidth");return Ne===-1?this.position*Me+this._smin:Math.round(this.position*Me/Ne)*Ne+this._smin},se.methodMap=utils_type.A.deepCopy(se.methodMap,{Value:"Value",setValue:"setValue",smax:"_smax",smin:"_smin",setMax:"setMax",setMin:"setMin",point1:"point1",point2:"point2",baseline:"baseline",highline:"highline",ticks:"ticks",label:"label"}),se._smax=ne,se._smin=ee,se.setMax=function(Me){return this._smax=Me,this},se.setValue=function(Me){var Ne=this._smax-this._smin;return Math.abs(Ne)>math.A.eps?this.position=(Me-this._smin)/Ne:this.position=0,this.position=Math.max(0,Math.min(1,this.position)),this},se.setMin=function(Me){return this._smin=Me,this},_e&&(de=G.create("text",[function(){return .05*(oe.X()-re.X())+oe.X()},function(){return .05*(oe.Y()-re.Y())+oe.Y()},function(){var Me,Ne=se.evalVisProp("digits"),Le=se.evalVisProp("suffixlabel"),Ie=se.evalVisProp("unitlabel"),Ge=se.evalVisProp("postlabel");return Ne===2&&se.evalVisProp("precision")!==2&&(Ne=se.evalVisProp("precision")),Me=Le!==null?Le:se.name&&se.name!==""?se.name+" = ":"",se.useLocale()?Me+=se.formatNumberLocale(se.Value(),Ne):Me+=utils_type.A.toFixed(se.Value(),Ne),Ie!==null&&(Me+=Ie),Ge!==null&&(Me+=Ge),Me}],Te.label),se.label=de,se.visProp.withlabel=!0,se.hasLabel=!0),se.point1=re,se.point2=oe,se.baseline=ae,se.highline=le,ye&&(utils_type.A.exists(Te.generatelabeltext)||(Te.ticks.generateLabelText=function(Me,Ne,Le){var Ie=se.point1.Dist(se.point2),Ge=se._smin,He=se._smax,Be=this.getDistanceFromZero(Ne,Me)*(He-Ge)/Ie+Ge;return Ie<math.A.eps||Math.abs(Be)<math.A.eps?"0":this.formatLabelText(Be)}),ue=G.create("ticks",[se.baseline,se.point1.Dist(re)/2,function(Me){var Ne=se.point1.Dist(se.point2),Le=se.point1.coords.distance(constants.A.COORDS_BY_USER,Me);return Ne<math.A.eps?0:Le/Ne*ie+ee}],Te.ticks),se.ticks=ue),se.remove=function(){_e&&G.removeObject(de),G.removeObject(le),G.removeObject(ae),G.removeObject(oe),G.removeObject(re),point.prototype.remove.call(se)},re.dump=!1,oe.dump=!1,ae.dump=!1,le.dump=!1,_e&&(de.dump=!1),se.elType="slider",se.parents=_,se.subs={point1:re,point2:oe,baseLine:ae,highLine:le},se.inherits.push(re,oe,ae,le),ae.inherits=[],le.inherits=[],ye&&(ue.dump=!1,se.subs.ticks=ue,se.inherits.push(ue)),se.getParents=function(){return[this.point1.coords.usrCoords.slice(1),this.point2.coords.usrCoords.slice(1),[this._smin,this.position*(this._smax-this._smin)+this._smin,this._smax]]},se.baseline.on("up",function(Me){var Ne,Le;se.evalVisProp("moveonup")&&!se.evalVisProp("fixed")&&(Ne=ae.board.getMousePosition(Me,0),Le=new base_coords.A(constants.A.COORDS_BY_SCREEN,Ne,this.board),se.moveTo([Le.usrCoords[1],Le.usrCoords[2]]),se.triggerEventHandlers(["drag"],[Me]))}),se.prepareUpdate().update(),G.isSuspendedUpdate||(se.updateVisibility().updateRenderer(),se.baseline.updateVisibility().updateRenderer(),se.highline.updateVisibility().updateRenderer(),ye&&se.ticks.updateVisibility().updateRenderer()),se},jxg.A.registerElement("slider",jxg.A.createSlider),jxg.A.PrefixParser={parse:function(G,_){var J,Z,Q,ee,te,ne;if(utils_type.A.isNumber(G)||utils_type.A.isString(G))return G;if(!utils_type.A.isArray(G)||G.length<2)throw new Error("prefixParser.parse: term is not an array, number or string");if(J=G[0],Q=G.length,_==="execute")if(utils_type.A.isInArray(["+","-","*","/"],J))for(ee=this.parse(G[1],_),Z=2;Z<Q;Z++)switch(ne=this.parse(G[Z],_),J){case"+":ee+=ne;break;case"-":ee-=ne;break;case"*":ee*=ne;break;case"/":ee/=ne}else if(J==="exec"){for(te=G[1],ne=[],Z=2;Z<Q;Z++)ne.push(this.parse(G[Z],_));if(utils_type.A.exists(Math[te]))ee=Math[te].apply(this,ne);else{if(!utils_type.A.exists(math.A[te]))throw new Error("PrefixParser.parse: "+te+" is not allowed");ee=math.A[te].apply(this,ne)}}else{if((te=G[0])==="V"&&(te="Value"),te==="Coords"&&(G[2]="true"),!utils_type.A.exists(G[1][te]))throw new Error("PrefixParser.parse: "+te+" is not a method of "+G[1]);for(ne=[],Z=2;Z<Q;Z++)ne.push(this.parse(G[Z],_));ee=G[1][te].apply(G[1],ne)}return ee},dimension:function(G){var _,J,Z,Q,ee,te,ne,ie;if(utils_type.A.isNumber(G))return 0;if(!utils_type.A.isArray(G)||G.length<2)throw new Error("PrefixParser.dimension: term is not an array");if(_=G[0],Z=G.length,utils_type.A.isInArray(["+","-","*","/"],_))for(Q=this.dimension(G[1]),J=2;J<Z;J++)switch(ne=this.dimension(G[J]),_){case"+":case"-":ne!==Q&&(Q=NaN);break;case"*":Q+=ne;break;case"/":Q-=ne}else if(_==="exec")G[2].type===utils_type.A.OBJECT_TYPE_MEASUREMENT?(Q=G[2].Dimension(),utils_type.A.exists(G[2].visProp.dim)&&(te=G[2].evalVisProp("dim"))!==null&&(Q=te)):Q=0;else switch(ee=G[0]){case"L":case"Length":case"Perimeter":case"Radius":case"R":Q=1;break;case"Area":case"A":Q=2;break;default:G[1].type===utils_type.A.OBJECT_TYPE_MEASUREMENT?(Q=G[1].Dimension(),utils_type.A.exists(G[1].visProp.dim)&&(te=G[1].evalVisProp("dim"))!==null&&(Q=te)):(Q=0,ee!=="Value"&&ee!=="V"||[constants.A.OBJECT_TYPE_ARC,constants.A.OBJECT_TYPE_SECTOR,constants.A.OBJECT_TYPE_ANGLE].indexOf(G[1].type)>=0&&(ie="",G.length===3&&utils_type.A.isString(G[2])&&(ie=G[2].toLowerCase()),Q=ie===""?G[1].type===constants.A.OBJECT_TYPE_ANGLE?0:1:ie.indexOf("len")===0?1:0))}return Q},toPrefix:function(G){var _,J,Z,Q;if(utils_type.A.isNumber(G))return G;if(!utils_type.A.isArray(G)||G.length<2)throw new Error("PrefixParser.toPrefix: term is not an array");for(_=G[0],Z=G.length,Q=[_],J=1;J<Z;J++)utils_type.A.isInArray(["+","-","*","/"],_)?Q.push(this.toPrefix(G[J])):_==="V"&&G[J].type===utils_type.A.OBJECT_TYPE_MEASUREMENT?Q=G[J].toPrefix():_==="exec"?J===1?Q.push(G[J]):Q.push(this.toPrefix(G[J])):Q=[_,G[J].id];return Q},getParents:function(G){var _,J,Z,Q;if(utils_type.A.isNumber(G))return[];if(!utils_type.A.isArray(G)||G.length<2)throw new Error("PrefixParser.getParents: term is not an array");for(_=G[0],Z=G.length,Q=[],J=1;J<Z;J++)utils_type.A.isInArray(["+","-","*","/"],_)?utils_type.A.concat(Q,this.getParents(G[J])):_==="V"&&G[J].type===utils_type.A.OBJECT_TYPE_MEASUREMENT?utils_type.A.concat(Q,G[J].getParents()):_==="exec"?J>1&&utils_type.A.concat(Q,this.getParents(G[J])):Q.push(G[J]);return Q}};var prefix=jxg.A.PrefixParser;jxg.A.createTapemeasure=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae;return Z=_[0],Q=_[1],ee=utils_type.A.copyAttributes(J,G.options,"tapemeasure","point1"),re=G.create("point",Z,ee),ee=utils_type.A.copyAttributes(J,G.options,"tapemeasure","point2"),oe=G.create("point",Q,ee),re.setAttribute({ignoredSnapToPoints:[oe.id]}),oe.setAttribute({ignoredSnapToPoints:[re.id]}),ee=utils_type.A.copyAttributes(J,G.options,"tapemeasure"),te=ee.withticks,ne=ee.withlabel,ee.digits===2&&ee.precision!==2&&ee.precision,ne&&(ee.withlabel=!0),ie=G.create("segment",[re,oe],ee),ne&&(se=J.name&&J.name!==""?J.name+" = ":"",ie.label.setText(function(){var le=ie.label.evalVisProp("digits");return ie.label.useLocale()?se+ie.label.formatNumberLocale(re.Dist(oe),le):se+utils_type.A.toFixed(re.Dist(oe),le)})),te&&(ee=utils_type.A.copyAttributes(J,G.options,"tapemeasure","ticks"),ae=G.create("ticks",[ie,.1],ee),ie.inherits.push(ae)),ie.remove=function(){te&&ie.removeTicks(ae),G.removeObject(oe),G.removeObject(re),base_element.A.prototype.remove.call(this)},ie.Value=function(){return re.Dist(oe)},re.dump=!1,oe.dump=!1,ie.elType="tapemeasure",ie.getParents=function(){return[[re.X(),re.Y()],[oe.X(),oe.Y()]]},ie.subs={point1:re,point2:oe},te&&(ae.dump=!1),ie.methodMap=jxg.A.deepCopy(ie.methodMap,{Value:"Value"}),ie.prepareUpdate().update(),G.isSuspendedUpdate||(ie.updateVisibility().updateRenderer(),ie.point1.updateVisibility().updateRenderer(),ie.point2.updateVisibility().updateRenderer()),ie},jxg.A.registerElement("tapemeasure",jxg.A.createTapemeasure),jxg.A.createMeasurement=function(G,_,J){var Z,Q,ee,te,ne,ie;for(Q=utils_type.A.copyAttributes(J,G.options,"measurement"),ee=_[0],te=_[1],ne=_[2],(Z=G.create("text",[ee,te,""],Q)).type=utils_type.A.OBJECT_TYPE_MEASUREMENT,Z.elType="measurement",Z.Value=function(){return prefix.parse(ne,"execute")},Z.Dimension=function(){var re=Z.evalVisProp("dim");return re!==null?re:prefix.dimension(ne)},Z.Unit=function(re){var oe,se="",ae=Z.evalVisProp("units"),le=re,ue={};if(utils_type.A.exists(le)||(le=Z.Dimension()),utils_type.A.isArray(re)){for(oe=0;oe<re.length;oe++)ue["dim"+re[oe]]=Z.Unit(re[oe]);return ue}return utils_type.A.isObject(ae)&&utils_type.A.exists(ae[le])&&ae[le]!==!1?se=Z.eval(ae[le]):utils_type.A.isObject(ae)&&utils_type.A.exists(ae["dim"+le])&&ae["dim"+le]!==!1?se=Z.eval(ae["dim"+le]):(se=Z.evalVisProp("baseunit"),le===0?se="":le>1&&se!==""&&(se=se+"^{"+le+"}")),se},Z.getTerm=function(){return ne},Z.getMethod=function(){var re=ne[0];return re==="V"&&(re="Value"),re},Z.toPrefix=function(){return prefix.toPrefix(ne)},Z.getParents=function(){return prefix.getParents(ne)},Z.addParents(Z.getParents()),ie=0;ie<Z.parents.length;ie++)G.select(Z.parents[ie]).addChild(Z);return Z.setText(function(){var re,oe="",se="",ae=Z.Dimension(),le=Z.evalVisProp("digits"),ue=Z.Unit(),de=Z.Value();if(Z.evalVisProp("showprefix")&&(oe=Z.evalVisProp("prefix")),Z.evalVisProp("showsuffix")&&(se=Z.evalVisProp("suffix")),utils_type.A.isNumber(de))le==="none"||(de=le==="auto"?Z.useLocale()?Z.formatNumberLocale(de):utils_type.A.autoDigits(de):Z.useLocale()?Z.formatNumberLocale(de,le):utils_type.A.toFixed(de,le));else if(utils_type.A.isArray(de))for(re=0;re<de.length;re++)utils_type.A.isNumber(de[re])&&(le==="none"||(le==="auto"?Z.useLocale()?de[re]=Z.formatNumberLocale(de[re]):de[re]=utils_type.A.autoDigits(de[re]):Z.useLocale()?de[re]=Z.formatNumberLocale(de[re],le):de[re]=utils_type.A.toFixed(de[re],le)));return ae==="coords"&&utils_type.A.isArray(de)&&(de.length===2&&de.unshift(void 0),de=Z.visProp.formatcoords(Z,de[1],de[2],de[0])),ae==="direction"&&utils_type.A.isArray(de)&&(de=Z.visProp.formatdirection(Z,de[0],de[1])),utils_type.A.isString(ae)?oe+de+se:isNaN(ae)?oe+"NaN"+se:oe+de+ue+se}),Z.methodMap=utils_type.A.deepCopy(Z.methodMap,{Value:"Value",Dimension:"Dimension",Unit:"Unit",getTerm:"getTerm",Term:"getTerm",getMethod:"getMethod",Method:"getMethod",getParents:"getParents",Parents:"getParents"}),Z},jxg.A.registerElement("measurement",jxg.A.createMeasurement),jxg.A.DataSource=function(){return this.data=[],this.columnHeaders=[],this.rowHeaders=[],this},jxg.A.extend(jxg.A.DataSource.prototype,{loadFromArray:function(G,_,J){var Z,Q,ee;if(utils_type.A.isArray(_)&&(this.columnHeaders=_,_=!1),utils_type.A.isArray(J)&&(this.rowHeaders=J,J=!1),this.data=[],_&&(this.columnHeaders=[]),J&&(this.rowHeaders=[]),utils_type.A.exists(G)){for(this.data=[],Z=0;Z<G.length;Z++)for(this.data[Z]=[],Q=0;Q<G[Z].length;Q++)ee=G[Z][Q],parseFloat(ee).toString()===ee?this.data[Z][Q]=parseFloat(ee):this.data[Z][Q]=ee!=="-"?ee:NaN;if(_&&(this.columnHeaders=this.data[0].slice(1),this.data=this.data.slice(1)),J)for(this.rowHeaders=[],Z=0;Z<this.data.length;Z++)this.rowHeaders.push(this.data[Z][0]),this.data[Z]=this.data[Z].slice(1)}return this},loadFromTable:function(G,_,J){var Z,Q,ee,te,ne;if(utils_type.A.isArray(_)&&(this.columnHeaders=_,_=!1),utils_type.A.isArray(J)&&(this.rowHeaders=J,J=!1),this.data=[],_&&(this.columnHeaders=[]),J&&(this.rowHeaders=[]),G=document.getElementById(G),utils_type.A.exists(G)){for(Z=G.getElementsByTagName("tr"),this.data=[],Q=0;Q<Z.length;Q++)for(te=Z[Q].getElementsByTagName("td"),this.data[Q]=[],ee=0;ee<te.length;ee++)ne=te[ee].innerText,parseFloat(ne).toString()===ne?this.data[Q][ee]=parseFloat(ne):this.data[Q][ee]=ne!=="-"?ne:NaN;if(_&&(this.columnHeaders=this.data[0].slice(1),this.data=this.data.slice(1)),J)for(this.rowHeaders=[],Q=0;Q<this.data.length;Q++)this.rowHeaders.push(this.data[Q][0]),this.data[Q]=this.data[Q].slice(1)}return this},addColumn:function(G,_,J){throw new Error("not implemented")},addRow:function(G,_,J){throw new Error("not implemented")},getColumn:function(G){var _,J=[];if(utils_type.A.isString(G)){for(_=0;_<this.columnHeaders.length;_++)if(G===this.columnHeaders[_]){G=_;break}}for(_=0;_<this.data.length;_++)this.data[_].length>G&&(J[_]=parseFloat(this.data[_][G]));return J},getRow:function(G){var _,J;if(utils_type.A.isString(G)){for(J=0;J<this.rowHeaders.length;J++)if(G===this.rowHeaders[J]){G=J;break}}for(_=[],J=0;J<this.data[G].length;J++)_[J]=this.data[G][J];return _}});var datasource=jxg.A.DataSource;jxg.A.Chart=function(G,_,J){var Z,Q,ee,te,ne,ie;if(this.constructor(G,J),!utils_type.A.isArray(_)||_.length===0)throw new Error("JSXGraph: Can't create a chart without data");if(this.elements=[],utils_type.A.isNumber(_[0]))for(Q=_,Z=[],ee=0;ee<Q.length;ee++)Z[ee]=ee+1;else if(_.length===1&&utils_type.A.isArray(_[0]))for(Q=_[0],Z=[],ie=utils_type.A.evaluate(Q).length,ee=0;ee<ie;ee++)Z[ee]=ee+1;else _.length===2&&(ie=Math.min(_[0].length,_[1].length),Z=_[0].slice(0,ie),Q=_[1].slice(0,ie));if(utils_type.A.isArray(Q)&&Q.length===0)throw new Error("JSXGraph: Can't create charts without data.");for(ne=J.chartstyle.replace(/ /g,"").split(","),ee=0;ee<ne.length;ee++){switch(ne[ee]){case"bar":te=this.drawBar(G,Z,Q,J);break;case"line":te=this.drawLine(G,Z,Q,J);break;case"fit":te=this.drawFit(G,Z,Q,J);break;case"spline":te=this.drawSpline(G,Z,Q,J);break;case"pie":te=this.drawPie(G,Q,J);break;case"point":te=this.drawPoints(G,Z,Q,J);break;case"radar":te=this.drawRadar(G,_,J)}this.elements.push(te)}return this.id=this.board.setId(this,"Chart"),this.elements},jxg.A.Chart.prototype=new base_element.A,jxg.A.extend(jxg.A.Chart.prototype,{drawLine:function(G,_,J,Z){return Z.fillcolor="none",Z.highlightfillcolor="none",G.create("curve",[_,J],Z)},drawSpline:function(G,_,J,Z){return Z.fillColor="none",Z.highlightfillcolor="none",G.create("spline",[_,J],Z)},drawFit:function(G,_,J,Z){var Q=Z.degree;return Q=Math.max(parseInt(Q,10),1)||1,Z.fillcolor="none",Z.highlightfillcolor="none",G.create("functiongraph",[numerics.A.regressionPolynomial(Q,_,J)],Z)},drawBar:function(G,_,J,Z){var Q,ee,te,ne,ie,re,oe,se,ae,le,ue=[],de=[],pe=function(_e,ye){return function(){return _[_e]()-ye*te}},fe={fixed:!0,withLabel:!1,visible:!1,name:""};if((ae=utils_type.A.copyAttributes(Z,G.options,"chart"))&&ae.width)te=ae.width;else{if(_.length<=1)te=1;else for(te=_[1]-_[0],Q=1;Q<_.length-1;Q++)te=_[Q+1]-_[Q]<te?_[Q+1]-_[Q]:te;te*=.8}for(le=utils_type.A.copyAttributes(Z,G.options,"chart","label"),Q=0;Q<_.length;Q++)utils_type.A.isFunction(_[Q])?(ne=pe(Q,-.5),ie=pe(Q,0),re=pe(Q,.5)):(ne=_[Q]-.5*te,ie=_[Q],re=_[Q]+.5*te),oe=utils_type.A.isFunction(J[Q])?J[Q]():J[Q],oe=J[Q],ae.dir==="horizontal"?(de[0]=G.create("point",[0,ne],fe),de[1]=G.create("point",[oe,ne],fe),de[2]=G.create("point",[oe,re],fe),de[3]=G.create("point",[0,re],fe),utils_type.A.exists(ae.labels)&&utils_type.A.exists(ae.labels[Q])&&(le.anchorX=function(_e){return _e.X()>=0?"left":"right"},le.anchorY="middle",ee=G.create("text",[oe,ie,ae.labels[Q]],le))):(de[0]=G.create("point",[ne,0],fe),de[1]=G.create("point",[ne,oe],fe),de[2]=G.create("point",[re,oe],fe),de[3]=G.create("point",[re,0],fe),utils_type.A.exists(ae.labels)&&utils_type.A.exists(ae.labels[Q])&&(le.anchorX="middle",le.anchorY=function(_e){return _e.Y()>=0?"bottom":"top"},ee=G.create("text",[ie,oe,ae.labels[Q]],le))),utils_type.A.isArray(ae.colors)&&(se=ae.colors,ae.fillcolor=se[Q%se.length]),ue[Q]=G.create("polygon",de,ae),utils_type.A.exists(ae.labels)&&utils_type.A.exists(ae.labels[Q])&&(ue[Q].text=ee,ue[Q].addChild(ee));return ue},drawPoints:function(G,_,J,Z){var Q,ee=[],te=Z.infoboxarray;for(Z.fixed=!0,Z.name="",Q=0;Q<_.length;Q++)Z.infoboxtext=!!te&&te[Q%te.length],ee[Q]=G.create("point",[_[Q],J[Q]],Z);return ee},drawPie:function(G,_,J){var Z,Q,ee=[],te=[],ne=J.colors,ie=J.highlightcolors,re=J.labels,oe=J.radius||4,se=oe,ae=J.center||[0,0],le=ae[0],ue=ae[1],de=function(be,Ae,Ce){return function(){var Ee,Re,Te,Me=0;for(Re=0;Re<=be;Re++)Me+=parseFloat(utils_type.A.evaluate(_[Re]));for(Ee=Me,Re=be+1;Re<_.length;Re++)Ee+=parseFloat(utils_type.A.evaluate(_[Re]));return Te=Ee!==0?2*Math.PI*Me/Ee:0,se()*Math[Ae](Te)+Ce}},pe=function(be,Ae){var Ce=-this.point1.coords.usrCoords[1]+this.point2.coords.usrCoords[1],Ee=-this.point1.coords.usrCoords[2]+this.point2.coords.usrCoords[2];utils_type.A.exists(this.label)&&(this.label.rendNode.style.fontSize=Ae*this.label.evalVisProp("fontsize")+"px",this.label.fullUpdate()),this.point2.coords=new base_coords.A(constants.A.COORDS_BY_USER,[this.point1.coords.usrCoords[1]+Ce*be,this.point1.coords.usrCoords[2]+Ee*be],this.board),this.fullUpdate()},fe=function(){this.highlighted||(this.highlighted=!0,this.board.highlightedObjects[this.id]=this,this.board.renderer.highlight(this),pe.call(this,1.1,2))},_e=function(){this.highlighted&&(this.highlighted=!1,this.board.renderer.noHighlight(this),pe.call(this,.9090909,1))},ye={fixed:!0,withLabel:!1,visible:!1,name:""};if(!utils_type.A.isArray(re))for(re=[],Z=0;Z<_.length;Z++)re[Z]="";for(utils_type.A.isFunction(oe)||(se=function(){return oe}),J.highlightonsector=J.highlightonsector||!1,J.straightfirst=!1,J.straightlast=!1,Q=G.create("point",[le,ue],ye),ee[0]=G.create("point",[function(){return se()+le},function(){return ue}],ye),Z=0;Z<_.length;Z++)ee[Z+1]=G.create("point",[de(Z,"cos",le),de(Z,"sin",ue)],ye),J.name=re[Z],J.withlabel=J.name!=="",J.fillcolor=ne&&ne[Z%ne.length],J.labelcolor=ne&&ne[Z%ne.length],J.highlightfillcolor=ie&&ie[Z%ie.length],te[Z]=G.create("sector",[Q,ee[Z],ee[Z+1]],J),J.highlightonsector&&(te[Z].hasPoint=te[Z].hasPointSector),J.highlightbysize&&(te[Z].highlight=fe,te[Z].noHighlight=_e);return{sectors:te,points:ee,midpoint:Q}},drawRadar:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te,Me,Ne,Le,Ie,Ge,He,Be,ze,Fe,$e,Xe,je,qe,Ze,st,St,it,lt,ft,kt=_.length,Ht=function(){var ni,jt,pt,Ke,Mt=this.evalVisProp("label.offset).slice(0");return ni=this.point1.X(),jt=this.point2.X(),pt=this.point1.Y(),Ke=this.point2.Y(),jt<ni&&(Mt[0]=-Mt[0]),Ke<pt&&(Mt[1]=-Mt[1]),this.setLabelRelativeCoords(Mt),new base_coords.A(constants.A.COORDS_BY_USER,[this.point2.X(),this.point2.Y()],this.board)},Wt=function(ni,jt){var pt,Ke,Mt;return pt=G.create("transform",[-(fe[jt]-de[jt]),0],{type:"translate"}),Ke=G.create("transform",[Ae/(_e[jt]+pe[jt]-(fe[jt]-de[jt])),1],{type:"scale"}),pt.melt(Ke),Mt=G.create("transform",[ni],{type:"rotate"}),pt.melt(Mt),pt};if(kt<=0)throw new Error("JSXGraph radar chart: no data");if(ee=J.paramarray,!utils_type.A.exists(ee))throw new Error("JSXGraph radar chart: need paramArray attribute");if((te=ee.length)<=1)throw new Error("JSXGraph radar chart: need more than one param in paramArray");for(Z=0;Z<kt;Z++)if(te!==_[Z].length)throw new Error("JSXGraph radar chart: use data length equal to number of params ("+_[Z].length+" != "+te+")");for(ne=[],ie=[],Q=0;Q<te;Q++)ne[Q]=_[0][Q],ie[Q]=ne[Q];for(Z=1;Z<kt;Z++)for(Q=0;Q<te;Q++)_[Z][Q]>ne[Q]&&(ne[Q]=_[Z][Q]),_[Z][Q]<ie[Q]&&(ie[Q]=_[Z][Q]);for(re=[],oe=[],Z=0;Z<kt;Z++)re[Z]="",oe[Z]=[];for(se=[],ae=[],le=J.startshiftratio||0,ue=J.endshiftratio||0,Z=0;Z<te;Z++)se[Z]=(ne[Z]-ie[Z])*le,ae[Z]=(ne[Z]-ie[Z])*ue;if(de=J.startshiftarray||se,pe=J.endshiftarray||ae,fe=J.startarray||ie,utils_type.A.exists(J.start))for(Z=0;Z<te;Z++)fe[Z]=J.start;if(_e=J.endarray||ne,utils_type.A.exists(J.end))for(Z=0;Z<te;Z++)_e[Z]=J.end;if(de.length!==te)throw new Error("JSXGraph radar chart: start shifts length is not equal to number of parameters");if(pe.length!==te)throw new Error("JSXGraph radar chart: end shifts length is not equal to number of parameters");if(fe.length!==te)throw new Error("JSXGraph radar chart: starts length is not equal to number of parameters");if(_e.length!==te)throw new Error("JSXGraph radar chart: snds length is not equal to number of parameters");for(ye=J.labelarray||re,be=J.colors,Ae=J.radius||10,lt=J.strokewidth||1,utils_type.A.exists(J.highlightonsector)||(J.highlightonsector=!1),Ce={name:J.name,id:J.id,strokewidth:lt,polystrokewidth:J.polystrokewidth||lt,strokecolor:J.strokecolor||"black",straightfirst:!1,straightlast:!1,fillcolor:J.fillColor||"#FFFF88",fillopacity:J.fillOpacity||.4,highlightfillcolor:J.highlightFillColor||"#FF7400",highlightstrokecolor:J.highlightStrokeColor||"black",gradient:J.gradient||"none"},Re=(Ee=J.center||[0,0])[0],Te=Ee[1],Me=G.create("point",[Re,Te],{name:"",fixed:!0,withlabel:!1,visible:!1}),Le=Ne=J.startangle||0,Ie=[],Ge=[],Z=0;Z<te;Z++)for(Le+=2*Math.PI/te,Be=Ae*Math.cos(Le)+Re,ze=Ae*Math.sin(Le)+Te,Ie[Z]=G.create("point",[Be,ze],{name:"",fixed:!0,withlabel:!1,visible:!1}),Ge[Z]=G.create("line",[Me,Ie[Z]],{name:ee[Z],strokeColor:Ce.strokecolor,strokeWidth:Ce.strokewidth,strokeOpacity:1,straightFirst:!1,straightLast:!1,withLabel:!0,highlightStrokeColor:Ce.highlightstrokecolor}),Ge[Z].getLabelAnchor=Ht,He=Wt(Le,Z),Q=0;Q<_.length;Q++)ft=_[Q][Z],oe[Q][Z]=G.create("point",[ft,0],{name:"",fixed:!0,withlabel:!1,visible:!1}),oe[Q][Z].addTransform(oe[Q][Z],He);for(Fe=[],Z=0;Z<kt;Z++)for(Ce.labelcolor=be&&be[Z%be.length],Ce.strokecolor=be&&be[Z%be.length],Ce.fillcolor=be&&be[Z%be.length],Fe[Z]=G.create("polygon",oe[Z],{withLines:!0,withLabel:!1,fillColor:Ce.fillcolor,fillOpacity:Ce.fillopacity,highlightFillColor:Ce.highlightfillcolor}),Q=0;Q<te;Q++)Fe[Z].borders[Q].setAttribute("strokecolor:"+be[Z%be.length]),Fe[Z].borders[Q].setAttribute("strokewidth:"+Ce.polystrokewidth);switch(J.legendposition||"none"){case"right":Xe=J.legendleftoffset||2,je=J.legendtopoffset||1,this.legend=G.create("legend",[Re+Ae+Xe,Te+Ae-je],{labels:ye,colors:be});break;case"none":break;default:jxg.A.debug("Unknown legend position")}if($e=[],J.showcircles){for(qe=[],Z=0;Z<6;Z++)qe[Z]=20*Z;if(qe[0]="0",(st=(Ze=J.circlelabelarray||qe).length)<2)throw new Error("JSXGraph radar chart: too less circles in circleLabelArray");for(St=[],He=Wt(Ne+Math.PI/te,0),Ce.fillcolor="none",Ce.highlightfillcolor="none",Ce.strokecolor=J.strokecolor||"black",Ce.strokewidth=J.circlestrokewidth||.5,Ce.layer=0,it=(_e[0]-fe[0])/(st-1),Z=0;Z<st;Z++)St[Z]=G.create("point",[fe[0]+Z*it,0],{name:Ze[Z],size:0,fixed:!0,withLabel:!0,visible:!0}),St[Z].addTransform(St[Z],He),$e[Z]=G.create("circle",[Me,St[Z]],Ce)}return this.rendNode=Fe[0].rendNode,{circles:$e,lines:Ge,points:oe,midpoint:Me,polygons:Fe}},updateRenderer:function(){return this},update:function(){return this.needsUpdate&&this.updateDataArray(),this},updateDataArray:function(){return this}}),jxg.A.createChart=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue,de,pe,fe,_e,ye=[],be=env.A.isBrowser?G.document.getElementById(_[0]):null;if(_.length===1&&utils_type.A.isString(_[0])){if(utils_type.A.exists(be)){if(se=utils_type.A.copyAttributes(J,G.options,"chart"),Z=(be=new datasource().loadFromTable(_[0],se.withheaders,se.withheaders)).data,ne=be.columnHeaders,Q=be.rowHeaders,ae=se.width,le=se.name,ue=se.strokecolor,de=se.fillcolor,pe=se.highlightstrokecolor,fe=se.highlightfillcolor,G.suspendUpdate(),_e=Z.length,oe=[],se.rows&&utils_type.A.isArray(se.rows)){for(ee=0;ee<_e;ee++)for(te=0;te<se.rows.length;te++)if(se.rows[te]===ee||se.withheaders&&se.rows[te]===Q[ee]){oe.push(Z[ee]);break}}else oe=Z;for(_e=oe.length,ee=0;ee<_e;ee++){if(re=[],se.chartstyle&&se.chartstyle.indexOf("bar")!==-1){for(ie=ae||.8,re.push(1-ie/2+(ee+.5)*ie/_e),te=1;te<oe[ee].length;te++)re.push(re[te-1]+1);se.width=ie/_e}le&&le.length===_e?se.name=le[ee]:se.withheaders&&(se.name=ne[ee]),ue&&ue.length===_e?se.strokecolor=ue[ee]:se.strokecolor=utils_color.A.hsv2rgb((ee+1)/_e*360,.9,.6),de&&de.length===_e?se.fillcolor=de[ee]:se.fillcolor=utils_color.A.hsv2rgb((ee+1)/_e*360,.9,1),pe&&pe.length===_e?se.highlightstrokecolor=pe[ee]:se.highlightstrokecolor=utils_color.A.hsv2rgb((ee+1)/_e*360,.9,1),fe&&fe.length===_e?se.highlightfillcolor=fe[ee]:se.highlightfillcolor=utils_color.A.hsv2rgb((ee+1)/_e*360,.9,.6),se.chartstyle&&se.chartstyle.indexOf("bar")!==-1?ye.push(new jxg.A.Chart(G,[re,oe[ee]],se)):ye.push(new jxg.A.Chart(G,[oe[ee]],se))}G.unsuspendUpdate()}return ye}return se=utils_type.A.copyAttributes(J,G.options,"chart"),new jxg.A.Chart(G,_,se)},jxg.A.registerElement("chart",jxg.A.createChart),jxg.A.Legend=function(G,_,J){var Z;if(this.constructor(),Z=utils_type.A.copyAttributes(J,G.options,"legend"),this.board=G,this.coords=new base_coords.A(constants.A.COORDS_BY_USER,_,this.board),this.myAtts={},this.label_array=Z.labelarray||Z.labels,this.color_array=Z.colorarray||Z.colors,this.opacy_array=Z.strokeopacity||[1],this.lines=[],this.myAtts.strokewidth=Z.strokewidth||5,this.myAtts.straightfirst=!1,this.myAtts.straightlast=!1,this.myAtts.withlabel=!0,this.myAtts.fixed=!0,this.myAtts.frozen=Z.frozen||!1,this.style=Z.legendstyle||Z.style,this.style!=="vertical")throw new Error("JSXGraph: Unknown legend style: "+this.style);this.drawVerticalLegend(G,Z),this.id=this.board.setId(this,"Leg")},jxg.A.Legend.prototype=new base_element.A,jxg.A.Legend.prototype.drawVerticalLegend=function(G,_){var J,Z=_.linelength||1,Q=(_.rowheight||20)/this.board.unitY,ee=function(){return this.setLabelRelativeCoords(this.visProp.label.offset),new base_coords.A(constants.A.COORDS_BY_USER,[this.point2.X(),this.point2.Y()],this.board)};for(J=0;J<this.label_array.length;J++)this.myAtts.name=this.label_array[J],this.myAtts.strokecolor=this.color_array[J%this.color_array.length],this.myAtts.highlightstrokecolor=this.color_array[J%this.color_array.length],this.myAtts.strokeopacity=this.opacy_array[J%this.opacy_array.length],this.myAtts.highlightstrokeopacity=this.opacy_array[J%this.opacy_array.length],this.myAtts.label={offset:[10,0],strokeColor:this.color_array[J%this.color_array.length],strokeWidth:this.myAtts.strokewidth},this.lines[J]=G.create("line",[[this.coords.usrCoords[1],this.coords.usrCoords[2]-J*Q],[this.coords.usrCoords[1]+Z,this.coords.usrCoords[2]-J*Q]],this.myAtts),this.myAtts.frozen&&this.lines[J].setAttribute({point1:{frozen:!0},point2:{frozen:!0}}),this.lines[J].getLabelAnchor=ee,this.lines[J].prepareUpdate().update().updateVisibility(this.lines[J].evalVisProp("visible")).updateRenderer(),this.addChild(this.lines[J])},jxg.A.createLegend=function(G,_,J){var Z=[0,0];if(!utils_type.A.exists(_)||_.length!==2)throw new Error("JSXGraph: Legend element needs two numbers as parameters");return Z=_,new jxg.A.Legend(G,Z,J)},jxg.A.registerElement("legend",jxg.A.createLegend),jxg.A.Chart,jxg.A.Legend,jxg.A.Transformation=function(G,_,J,Z){this.elementClass=constants.A.OBJECT_CLASS_OTHER,this.type=constants.A.OBJECT_TYPE_TRANSFORMATION,Z?(this.is3D=!0,this.matrix=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]):(this.is3D=!1,this.matrix=[[1,0,0],[0,1,0],[0,0,1]]),this.board=G,this.isNumericMatrix=!1,this.is3D?this.setMatrix3D(J[0],_,J.slice(1)):this.setMatrix(G,_,J),this.methodMap={apply:"apply",applyOnce:"applyOnce",bindTo:"bindTo",bind:"bindTo",melt:"melt",meltTo:"meltTo"}},jxg.A.Transformation.prototype={},jxg.A.extend(jxg.A.Transformation.prototype,{update:function(){return this},setMatrix:function(G,_,J){var Z;for(this.isNumericMatrix=!0,Z=0;Z<J.length;Z++)if(typeof J[Z]!="number"){this.isNumericMatrix=!1;break}if(_==="translate"){if(J.length!==2)throw new Error("JSXGraph: translate transformation needs 2 parameters.");this.evalParam=utils_type.A.createEvalFunction(G,J,2),this.update=function(){this.matrix[1][0]=this.evalParam(0),this.matrix[2][0]=this.evalParam(1)}}else if(_==="scale"){if(J.length!==2)throw new Error("JSXGraph: scale transformation needs 2 parameters.");this.evalParam=utils_type.A.createEvalFunction(G,J,2),this.update=function(){this.matrix[1][1]=this.evalParam(0),this.matrix[2][2]=this.evalParam(1)}}else if(_==="reflect")J.length<4&&(J[0]=G.select(J[0])),J.length===2&&(J[1]=G.select(J[1])),J.length===4&&(this.evalParam=utils_type.A.createEvalFunction(G,J,4)),this.update=function(){var Q,ee,te,ne,ie,re,oe,se;J.length===1?oe=J[0].stdform:J.length===2?oe=math.A.crossProduct(J[1].coords.usrCoords,J[0].coords.usrCoords):J.length===4&&(oe=math.A.crossProduct([1,this.evalParam(2),this.evalParam(3)],[1,this.evalParam(0),this.evalParam(1)])),Q=oe[1],ee=oe[2],re=(se=[-(te=oe[0])*Q,-te*ee,Q*Q+ee*ee])[2],ne=se[0]/se[2],ie=se[1]/se[2],Q=-oe[2],ee=oe[1],this.matrix[1][1]=(Q*Q-ee*ee)/re,this.matrix[1][2]=2*Q*ee/re,this.matrix[2][1]=this.matrix[1][2],this.matrix[2][2]=-this.matrix[1][1],this.matrix[1][0]=ne*(1-this.matrix[1][1])-ie*this.matrix[1][2],this.matrix[2][0]=ie*(1-this.matrix[2][2])-ne*this.matrix[2][1]};else if(_==="rotate")J.length===3?this.evalParam=utils_type.A.createEvalFunction(G,J,3):J.length>0&&J.length<=2&&(this.evalParam=utils_type.A.createEvalFunction(G,J,1),J.length!==2||utils_type.A.isArray(J[1])||(J[1]=G.select(J[1]))),this.update=function(){var Q,ee,te=this.evalParam(0),ne=Math.cos(te),ie=Math.sin(te);this.matrix[1][1]=ne,this.matrix[1][2]=-ie,this.matrix[2][1]=ie,this.matrix[2][2]=ne,J.length>1&&(J.length===3?(Q=this.evalParam(1),ee=this.evalParam(2)):utils_type.A.isArray(J[1])?(Q=J[1][0],ee=J[1][1]):(Q=J[1].X(),ee=J[1].Y()),this.matrix[1][0]=Q*(1-ne)+ee*ie,this.matrix[2][0]=ee*(1-ne)-Q*ie)};else if(_==="shear"){if(J.length!==2)throw new Error("JSXGraph: shear transformation needs 2 parameters.");this.evalParam=utils_type.A.createEvalFunction(G,J,2),this.update=function(){this.matrix[1][2]=this.evalParam(0),this.matrix[2][1]=this.evalParam(1)}}else if(_==="generic"){if(J.length!==9)throw new Error("JSXGraph: generic transformation needs 9 parameters.");this.evalParam=utils_type.A.createEvalFunction(G,J,9),this.update=function(){this.matrix[0][0]=this.evalParam(0),this.matrix[0][1]=this.evalParam(1),this.matrix[0][2]=this.evalParam(2),this.matrix[1][0]=this.evalParam(3),this.matrix[1][1]=this.evalParam(4),this.matrix[1][2]=this.evalParam(5),this.matrix[2][0]=this.evalParam(6),this.matrix[2][1]=this.evalParam(7),this.matrix[2][2]=this.evalParam(8)}}else if(_==="matrix"){if(J.length!==1)throw new Error("JSXGraph: transformation of type 'matrix' needs 1 parameter.");this.evalParam=J[0].slice(),this.update=function(){var Q,ee;for(Q=0;Q<3;Q++)for(ee=0;ee<3;ee++)this.matrix[Q][ee]=utils_type.A.evaluate(this.evalParam[Q][ee])}}},setMatrix3D:function(G,_,J){var Z,Q=G.board;for(this.isNumericMatrix=!0,Z=0;Z<J.length;Z++)if(typeof J[Z]!="number"){this.isNumericMatrix=!1;break}if(_==="translate"){if(J.length!==3)throw new Error("JSXGraph: 3D translate transformation needs 3 parameters.");this.evalParam=utils_type.A.createEvalFunction(Q,J,3),this.update=function(){this.matrix[1][0]=this.evalParam(0),this.matrix[2][0]=this.evalParam(1),this.matrix[3][0]=this.evalParam(2)}}else if(_==="scale"){if(J.length!==3&&J.length!==4)throw new Error("JSXGraph: 3D scale transformation needs either 3 or 4 parameters.");this.evalParam=utils_type.A.createEvalFunction(Q,J,3),this.update=function(){var ee=this.evalParam(0),te=this.evalParam(1),ne=this.evalParam(2);this.matrix[1][1]=ee,this.matrix[2][2]=te,this.matrix[3][3]=ne}}else if(_==="rotateX")J.splice(1,0,[1,0,0]),this.setMatrix3D(G,"rotate",J);else if(_==="rotateY")J.splice(1,0,[0,1,0]),this.setMatrix3D(G,"rotate",J);else if(_==="rotateZ")J.splice(1,0,[0,0,1]),this.setMatrix3D(G,"rotate",J);else if(_==="rotate"){if(J.length<2)throw new Error("JSXGraph: 3D rotate transformation needs 2 or 3 parameters.");J.length!==3||utils_type.A.isFunction(J[2])||utils_type.A.isArray(J[2])?this.evalParam=utils_type.A.createEvalFunction(Q,J,J.length):(this.evalParam=utils_type.A.createEvalFunction(Q,J,2),J[2]=G.select(J[2])),this.update=function(){var ee,te,ne,ie=this.evalParam(0),re=this.evalParam(1),oe=[1,0,0,0],se=Math.cos(ie),ae=Math.sin(ie),le=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],ue=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],de=math.A.norm(re);re.length===3?(ee=re[0]/de,te=re[1]/de,ne=re[2]/de):(ee=re[1]/de,te=re[2]/de,ne=re[3]/de),J.length===3&&((oe=J.length===3&&utils_type.A.exists(J[2].is3D)?J[2].coords.slice():this.evalParam(2)).length===3&&oe.unshift(1),le[1][0]=-oe[1],le[2][0]=-oe[2],le[3][0]=-oe[3],ue[1][0]=oe[1],ue[2][0]=oe[2],ue[3][0]=oe[3]),this.matrix=[[1,0,0,0],[0,ee*ee*(1-se)+se,ee*te*(1-se)-ne*ae,ee*ne*(1-se)+te*ae],[0,te*ee*(1-se)+ne*ae,te*te*(1-se)+se,te*ne*(1-se)-ee*ae],[0,ne*ee*(1-se)-te*ae,ne*te*(1-se)+ee*ae,ne*ne*(1-se)+se]],this.matrix=math.A.matMatMult(this.matrix,le),this.matrix=math.A.matMatMult(ue,this.matrix)}}},apply:function(G,_){var J;return this.update(),J=this.is3D?G.coords:utils_type.A.exists(_)?G.initialCoords.usrCoords:G.coords.usrCoords,math.A.matVecMult(this.matrix,J)},applyOnce:function(G){var _,J,Z;for(utils_type.A.isArray(G)||(G=[G]),J=G.length,Z=0;Z<J;Z++)this.update(),this.is3D?G[Z].coords=math.A.matVecMult(this.matrix,G[Z].coords):(_=math.A.matVecMult(this.matrix,G[Z].coords.usrCoords),G[Z].coords.setCoordinates(constants.A.COORDS_BY_USER,_))},bindTo:function(G){var _,J;if(utils_type.A.isArray(G))for(J=G.length,_=0;_<J;_++)G[_].transformations.push(this);else G.transformations.push(this)},meltTo:function(G){var _,J,Z;if(utils_type.A.isArray(G))for(_=0;_<G.length;_++)this.meltTo(G[_]);else(J=G.transformations).length>0&&J[J.length-1].isNumericMatrix&&this.isNumericMatrix?J[J.length-1].melt(this):(Z=this.clone(),J.push(Z))},clone:function(){var G=null;return this.isNumericMatrix&&((G=new jxg.A.Transformation(this.board,"none",[])).matrix=this.matrix.slice()),G},setProperty:function(G){jxg.A.deprecated("Transformation.setProperty()","Transformation.setAttribute()")},setAttribute:function(G){},melt:function(G){var _;return this.update(),G.update(),_=math.A.matMatMult(G.matrix,this.matrix),this.update=function(){this.matrix=_},this},getParents:function(){var G=[[].concat.apply([],this.matrix)];return this.parents.length!==0&&(G=this.parents),G}}),jxg.A.createTransform=function(G,_,J){return new jxg.A.Transformation(G,J.type,_)},jxg.A.registerElement("transform",jxg.A.createTransform),jxg.A.createTransform3D=function(G,_,J){return new jxg.A.Transformation(G,J.type,_,!0)},jxg.A.registerElement("transform3d",jxg.A.createTransform3D),jxg.A.Transformation,jxg.A.Turtle=function(G,_,J){var Z,Q,ee;return this.constructor(G,J,constants.A.OBJECT_TYPE_TURTLE,constants.A.OBJECT_CLASS_OTHER),this.turtleIsHidden=!1,this.board=G,this.visProp.curveType="plot",this._attributes=utils_type.A.copyAttributes(this.visProp,G.options,"turtle"),delete this._attributes.id,Z=0,Q=0,ee=90,_.length!==0&&(_.length===3?(Z=_[0],Q=_[1],ee=_[2]):_.length===2?utils_type.A.isArray(_[0])?(Z=_[0][0],Q=_[0][1],ee=_[1]):(Z=_[0],Q=_[1]):(Z=_[0][0],Q=_[0][1])),this.init(Z,Q,ee),this.methodMap=utils_type.A.deepCopy(this.methodMap,{forward:"forward",fd:"forward",back:"back",bk:"back",right:"right",rt:"right",left:"left",lt:"left",penUp:"penUp",pu:"penUp",up:"penUp",penDown:"penDown",pd:"penDown",down:"penDown",clearScreen:"clearScreen",cs:"clearScreen",clean:"clean",setPos:"setPos",home:"home",hideTurtle:"hideTurtle",ht:"hideTurtle",hide:"hideTurtle",showTurtle:"showTurtle",st:"showTurtle",show:"showTurtle",penSize:"setPenSize",setPenSize:"setPenSize",penColor:"setPenColor",setPenColor:"setPenColor",highlightPenColor:"setHighlightPenColor",setHighlightPenColor:"setHighlightPenColor",getPenColor:"getPenColor",Color:"getPenColor",getHighlightPenColor:"getHighlightPenColor",HighlightColor:"getHighlightPenColor",getPenSize:"getPenSize",Size:"getPenSize",pushTurtle:"pushTurtle",push:"pushTurtle",popTurtle:"popTurtle",pop:"popTurtle",lookTo:"lookTo",pos:"pos",Pos:"pos",moveTo:"moveTo",X:"X",Y:"Y"}),this},jxg.A.Turtle.prototype=new base_element.A,jxg.A.extend(jxg.A.Turtle.prototype,{init:function(G,_,J){var Z={fixed:!0,name:"",visible:!1,withLabel:!1};this.arrowLen=20/math.A.hypot(this.board.unitX,this.board.unitY),this.pos=[G,_],this.isPenDown=!0,this.dir=90,this.stack=[],this.objects=[],this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.turtle=this.board.create("point",this.pos,Z),this.objects.push(this.turtle),this.turtle2=this.board.create("point",[this.pos[0],this.pos[1]+this.arrowLen],Z),this.objects.push(this.turtle2),this.visProp.arrow.lastArrow=!0,this.visProp.arrow.straightFirst=!1,this.visProp.arrow.straightLast=!1,this.arrow=this.board.create("line",[this.turtle,this.turtle2],this.visProp.arrow),this.objects.push(this.arrow),this.subs={arrow:this.arrow},this.inherits.push(this.arrow),this.right(90-J),this.board.update()},forward:function(G){if(G===0)return this;var _,J=G*Math.cos(this.dir*Math.PI/180),Z=G*Math.sin(this.dir*Math.PI/180);return this.turtleIsHidden||((_=this.board.create("transform",[J,Z],{type:"translate"})).applyOnce(this.turtle),_.applyOnce(this.turtle2)),this.isPenDown&&this.curve.dataX.length>=8192&&(this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve)),this.pos[0]+=J,this.pos[1]+=Z,this.isPenDown&&(this.curve.dataX.push(this.pos[0]),this.curve.dataY.push(this.pos[1])),this.board.update(),this},back:function(G){return this.forward(-G)},right:function(G){return this.dir-=G,this.dir%=360,this.turtleIsHidden||this.board.create("transform",[-G*Math.PI/180,this.turtle],{type:"rotate"}).applyOnce(this.turtle2),this.board.update(),this},left:function(G){return this.right(-G)},penUp:function(){return this.isPenDown=!1,this},penDown:function(){return this.isPenDown=!0,this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this},clean:function(){var G,_;for(G=0;G<this.objects.length;G++)(_=this.objects[G]).type===constants.A.OBJECT_TYPE_CURVE&&(this.board.removeObject(_),this.objects.splice(G,1));return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.board.update(),this},clearScreen:function(){return this.board.removeObject(this.objects),this.objects=[],this.init(0,0,90),this},setPos:function(G,_){return utils_type.A.isArray(G)?this.pos=G:this.pos=[G,_],this.turtleIsHidden||(this.turtle.setPositionDirectly(constants.A.COORDS_BY_USER,[G,_]),this.turtle2.setPositionDirectly(constants.A.COORDS_BY_USER,[G,_+this.arrowLen]),this.board.create("transform",[-(this.dir-90)*Math.PI/180,this.turtle],{type:"rotate"}).applyOnce(this.turtle2)),this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.board.update(),this},setPenSize:function(G){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("strokeWidth",G)),this.objects.push(this.curve),this},setPenColor:function(G){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("strokeColor",G)),this.objects.push(this.curve),this},getPenAttribute:function(G){var _,J=this.objects.length;return _=J===4?0:J-1,this.objects[_].evalVisProp(G)},getPenSize:function(){return this.getPenAttribute("strokewidth")},getPenColor:function(){return this.getPenAttribute("strokecolor")},getHighlightPenColor:function(){return this.getPenAttribute("highlightstrokecolor")},setHighlightPenColor:function(G){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("highlightStrokeColor",G)),this.objects.push(this.curve),this},setAttribute:function(G){var _,J,Z,Q=this.objects.length;for(_=0;_<Q;_++)(J=this.objects[_]).type===constants.A.OBJECT_TYPE_CURVE&&J.setAttribute(G);return Z=this.visProp.id,this.visProp=utils_type.A.deepCopy(this.curve.visProp),this.visProp.id=Z,this._attributes=utils_type.A.deepCopy(this.visProp),delete this._attributes.id,this},copyAttr:function(G,_){return this._attributes[G.toLowerCase()]=_,this._attributes},showTurtle:function(){return this.turtleIsHidden=!1,this.arrow.setAttribute({visible:!0}),this.visProp.arrow.visible=!1,this.setPos(this.pos[0],this.pos[1]),this.board.update(),this},hideTurtle:function(){return this.turtleIsHidden=!0,this.arrow.setAttribute({visible:!1}),this.visProp.arrow.visible=!1,this.board.update(),this},home:function(){return this.pos=[0,0],this.setPos(this.pos[0],this.pos[1]),this},pushTurtle:function(){return this.stack.push([this.pos[0],this.pos[1],this.dir]),this},popTurtle:function(){var G=this.stack.pop();return this.pos[0]=G[0],this.pos[1]=G[1],this.dir=G[2],this.setPos(this.pos[0],this.pos[1]),this},lookTo:function(G){var _,J,Z,Q,ee;return utils_type.A.isArray(G)?(_=this.pos[0],J=this.pos[1],Z=G[0],Q=G[1],ee=Math.atan2(Q-J,Z-_),this.right(this.dir-180*ee/Math.PI)):utils_type.A.isNumber(G)&&this.right(this.dir-G),this},moveTo:function(G){var _,J,Z;return utils_type.A.isArray(G)&&(_=G[0]-this.pos[0],J=G[1]-this.pos[1],this.turtleIsHidden||((Z=this.board.create("transform",[_,J],{type:"translate"})).applyOnce(this.turtle),Z.applyOnce(this.turtle2)),this.isPenDown&&this.curve.dataX.length>=8192&&(this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve)),this.pos[0]=G[0],this.pos[1]=G[1],this.isPenDown&&(this.curve.dataX.push(this.pos[0]),this.curve.dataY.push(this.pos[1])),this.board.update()),this},fd:function(G){return this.forward(G)},bk:function(G){return this.back(G)},lt:function(G){return this.left(G)},rt:function(G){return this.right(G)},pu:function(){return this.penUp()},pd:function(){return this.penDown()},ht:function(){return this.hideTurtle()},st:function(){return this.showTurtle()},cs:function(){return this.clearScreen()},push:function(){return this.pushTurtle()},pop:function(){return this.popTurtle()},evalAt:function(G,_){var J,Z,Q,ee,te=this.objects.length;for(J=0,Z=0;J<te;J++)if((Q=this.objects[J]).elementClass===constants.A.OBJECT_CLASS_CURVE){if(Z<=G&&G<Z+Q.numberPoints)return ee=G-Z,Q[_](ee);Z+=Q.numberPoints}return this[_]()},X:function(G){return utils_type.A.exists(G)?this.evalAt(G,"X"):this.pos[0]},Y:function(G){return utils_type.A.exists(G)?this.evalAt(G,"Y"):this.pos[1]},Z:function(G){return 1},minX:function(){return 0},maxX:function(){var G,_=this.objects.length,J=0;for(G=0;G<_;G++)this.objects[G].elementClass===constants.A.OBJECT_CLASS_CURVE&&(J+=this.objects[G].numberPoints);return J},hasPoint:function(G,_){var J,Z;for(J=0;J<this.objects.length;J++)if((Z=this.objects[J]).type===constants.A.OBJECT_TYPE_CURVE&&Z.hasPoint(G,_))return!0;return!1}}),jxg.A.createTurtle=function(G,_,J){var Z;return _=_||[],Z=utils_type.A.copyAttributes(J,G.options,"turtle"),new jxg.A.Turtle(G,_,Z)},jxg.A.registerElement("turtle",jxg.A.createTurtle),jxg.A.Turtle,jxg.A.Ticks=function(G,_,J){if(this.constructor(G.board,J,constants.A.OBJECT_TYPE_TICKS,constants.A.OBJECT_CLASS_OTHER),this.line=G,this.board=this.line.board,this.fixedTicks=null,this.equidistant=!1,this.labelsData=[],utils_type.A.isFunction(_))throw this.ticksFunction=_,new Error("Function arguments are no longer supported.");utils_type.A.isArray(_)?this.fixedTicks=_:this.equidistant=!0,this.ticks=[],this.labels=[],this.labelCounter=0,this.id=this.line.addTicks(this),this.elType="ticks",this.inherits.push(this.labels),this.board.setId(this,"Ti")},jxg.A.Ticks.prototype=new base_element.A,jxg.A.extend(jxg.A.Ticks.prototype,{hasPoint:function(G,_){var J,Z,Q,ee,te=this.ticks&&this.ticks.length||0;if(!this.line.evalVisProp("scalable")||this.line.elementClass===constants.A.OBJECT_CLASS_CURVE||(utils_type.A.isObject(this.evalVisProp("precision"))?(ee=this.board._inputDevice,Q=this.evalVisProp("precision."+ee)):Q=this.board.options.precision.hasPoint,Q+=.5*this.evalVisProp("strokewidth"),this.line.stdform[1]!==0&&this.line.stdform[2]!==0&&this.line.type!==constants.A.OBJECT_TYPE_AXIS))return!1;for(J=0;J<te;J++)if((Z=this.ticks[J])[2]&&!(this.line.stdform[1]===0&&Math.abs(Z[0][0]-this.line.point1.coords.scrCoords[1])<math.A.eps||this.line.stdform[2]===0&&Math.abs(Z[1][0]-this.line.point1.coords.scrCoords[2])<math.A.eps)&&(Math.abs(Z[0][0]-Z[0][1])>=1||Math.abs(Z[1][0]-Z[1][1])>=1)){if(this.line.stdform[1]===0){if(Math.abs(_-this.line.point1.coords.scrCoords[2])<2*Q&&Z[0][0]-Q<G&&G<Z[0][1]+Q)return!0}else if(this.line.stdform[2]===0&&Math.abs(G-this.line.point1.coords.scrCoords[1])<2*Q&&Z[1][0]-Q<_&&_<Z[1][1]+Q)return!0}return!1},setPositionDirectly:function(G,_,J){var Z,Q,ee=new base_coords.A(G,_,this.board),te=new base_coords.A(G,J,this.board),ne=this.board.getBoundingBox();return this.line.type===constants.A.OBJECT_TYPE_AXIS&&this.line.evalVisProp("scalable")?(Math.abs(this.line.stdform[1])<math.A.eps&&Math.abs(ee.usrCoords[1]*te.usrCoords[1])>math.A.eps?(Z=te.usrCoords[1]/ee.usrCoords[1],ne[0]*=Z,ne[2]*=Z,this.board.setBoundingBox(ne,this.board.keepaspectratio,"update")):Math.abs(this.line.stdform[2])<math.A.eps&&Math.abs(ee.usrCoords[2]*te.usrCoords[2])>math.A.eps&&(Q=te.usrCoords[2]/ee.usrCoords[2],ne[3]*=Q,ne[1]*=Q,this.board.setBoundingBox(ne,this.board.keepaspectratio,"update")),this):this},calculateTicksCoordinates:function(){var G,_,J,Z;if(!(this.line.elementClass===constants.A.OBJECT_CLASS_LINE&&(this.setTicksSizeVariables(),Math.abs(this.dx)<math.A.eps&&Math.abs(this.dy)<math.A.eps)))return G=this.getZeroCoordinates(),_=this.line.elementClass===constants.A.OBJECT_CLASS_LINE?this.getLowerAndUpperBounds(G,"ticksdistance"):{lower:this.line.minX(),upper:this.line.maxX(),a1:0,a2:0,m1:0,m2:0},this.evalVisProp("type")==="polar"&&(Z=this.board.getBoundingBox(),J=Math.max(math.A.hypot(Z[0],Z[1]),math.A.hypot(Z[2],Z[3])),_.upper=J),this.ticks=[],this.labelsData=[],this.equidistant?this.generateEquidistantTicks(G,_):this.generateFixedTicks(G,_),this},setTicksSizeVariables:function(G){var _,J,Z,Q,ee=.5*this.evalVisProp("majorheight"),te=.5*this.evalVisProp("minorheight");utils_type.A.exists(G)?(J=this.line.minX(),Z=this.line.maxX(),(Q=this.line.points.length)<2?(this.dxMaj=0,this.dyMaj=0):math.A.relDif(G,J)<math.A.eps?(this.dxMaj=this.line.points[0].usrCoords[2]-this.line.points[1].usrCoords[2],this.dyMaj=this.line.points[1].usrCoords[1]-this.line.points[0].usrCoords[1]):math.A.relDif(G,Z)<math.A.eps?(this.dxMaj=this.line.points[Q-2].usrCoords[2]-this.line.points[Q-1].usrCoords[2],this.dyMaj=this.line.points[Q-1].usrCoords[1]-this.line.points[Q-2].usrCoords[1]):(this.dxMaj=-numerics.A.D(this.line.Y)(G),this.dyMaj=numerics.A.D(this.line.X)(G))):(this.dxMaj=this.line.stdform[1],this.dyMaj=this.line.stdform[2]),this.dxMin=this.dxMaj,this.dyMin=this.dyMaj,this.dx=this.dxMaj,this.dy=this.dyMaj,_=math.A.hypot(this.dxMaj*this.board.unitX,this.dyMaj*this.board.unitY),this.dxMaj*=ee/_*this.board.unitX,this.dyMaj*=ee/_*this.board.unitY,this.dxMin*=te/_*this.board.unitX,this.dyMin*=te/_*this.board.unitY,this.minStyle=this.evalVisProp("minorheight")<0?"infinite":"finite",this.majStyle=this.evalVisProp("majorheight")<0?"infinite":"finite"},getZeroCoordinates:function(){var G,_,J,Z,Q,ee,te,ne,ie=this.evalVisProp("anchor");return this.line.elementClass===constants.A.OBJECT_CLASS_LINE?this.line.type===constants.A.OBJECT_TYPE_AXIS?geometry.A.projectPointToLine({coords:{usrCoords:[1,0,0]}},this.line,this.board):(J=this.line.point1.coords.usrCoords[0],G=this.line.point1.coords.usrCoords[1],_=this.line.point1.coords.usrCoords[2],ee=this.line.point2.coords.usrCoords[0],Z=this.line.point2.coords.usrCoords[1],Q=this.line.point2.coords.usrCoords[2],ie==="right"?this.line.point2.coords:ie==="middle"?new base_coords.A(constants.A.COORDS_BY_USER,[.5*(J+ee),.5*(G+Z),.5*(_+Q)],this.board):utils_type.A.isNumber(ie)?new base_coords.A(constants.A.COORDS_BY_USER,[J+(ee-J)*ie,G+(Z-G)*ie,_+(Q-_)*ie],this.board):this.line.point1.coords):(te=this.line.minX(),ne=this.line.maxX(),ie==="right"?ne:ie==="middle"?.5*(te+ne):utils_type.A.isNumber(ie)?te*(1-ie)+ne*ie:te)},getLowerAndUpperBounds:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue,de,pe,fe=10*math.A.eps,_e=this.line.evalVisProp("straightfirst"),ye=this.line.evalVisProp("straightlast"),be=this.evalVisProp("includeboundaries");return this.line.elementClass===constants.A.OBJECT_CLASS_CURVE?{lower:this.line.minX(),upper:this.line.maxX()}:(te=new base_coords.A(constants.A.COORDS_BY_USER,this.line.point1.coords.usrCoords,this.board),ne=new base_coords.A(constants.A.COORDS_BY_USER,this.line.point2.coords.usrCoords,this.board),ie=Math.abs(te.usrCoords[0])>=math.A.eps&&te.scrCoords[1]>=0&&te.scrCoords[1]<=this.board.canvasWidth&&te.scrCoords[2]>=0&&te.scrCoords[2]<=this.board.canvasHeight,re=Math.abs(ne.usrCoords[0])>=math.A.eps&&ne.scrCoords[1]>=0&&ne.scrCoords[1]<=this.board.canvasWidth&&ne.scrCoords[2]>=0&&ne.scrCoords[2]<=this.board.canvasHeight,utils_type.A.exists(_)&&_==="ticksdistance"?(geometry.A.calcStraight(this.line,te,ne,0),de=this.getDistanceFromZero(G,te),pe=this.getDistanceFromZero(G,ne),geometry.A.calcStraight(this.line,te,ne,this.line.evalVisProp("margin")),de=this.getDistanceFromZero(G,te)-de,pe=this.getDistanceFromZero(G,ne).m2):geometry.A.calcLineDelimitingPoints(this.line,te,ne),Q=this.line.evalVisProp("firstarrow"),ee=this.line.evalVisProp("lastarrow"),le=this.getDistanceFromZero(G,te),ue=this.getDistanceFromZero(G,ne),(Q||ee)&&(ae=this.board.renderer.getArrowHeadData(this.line,this.line.evalVisProp("strokewidth"),""),this.board.renderer.getPositionArrowHead(this.line,te,ne,ae)),(oe=this.getDistanceFromZero(G,te))<(se=this.getDistanceFromZero(G,ne))?(J=oe,Z=se,_e||!ie||be||(J+=fe),ye||!re||be||(Z-=fe)):se<oe?(J=se,Z=oe,ye||!re||be||(J+=fe),_e||!ie||be||(Z-=fe)):(J=0,Z=0),{lower:J,upper:Z,a1:le=oe-le,a2:ue=oe-ue,m1:de,m2:pe})},getDistanceFromZero:function(G,_){var J,Z,Q,ee,te;return J=this.line.point1.coords,Z=this.line.point2.coords,te=G.distance(constants.A.COORDS_BY_USER,_),Q=[Z.usrCoords[0]-J.usrCoords[0],Z.usrCoords[1]-J.usrCoords[1],Z.usrCoords[2]-J.usrCoords[2]],ee=[_.usrCoords[0]-G.usrCoords[0],_.usrCoords[1]-G.usrCoords[1],_.usrCoords[2]-G.usrCoords[2]],math.A.innerProduct(Q,ee,3)<0&&(te*=-1),te},generateEquidistantTicks:function(G,_){var J,Z,Q,ee=math.A.eps,te=this.evalVisProp("minorticks");if(Q=this.getDistanceMajorTicks(),this.line.elementClass===constants.A.OBJECT_CLASS_LINE&&(Z=this.getXandYdeltas()),Q*=this.evalVisProp("scale"),Q/=te+1,this.ticksDelta=Q,!(Q<math.A.eps))if(Math.abs(_.upper-_.lower)>2048*Q)jxg.A.warn("JSXGraph ticks: too many ticks (>2048). Please increase ticksDistance.");else{for(J=0,this.evalVisProp("drawzero")||(J=Q),J<_.lower&&(J=Math.floor((_.lower-ee)/Q)*Q);J<=_.upper+ee&&(J>=_.lower-ee&&this.processTickPosition(G,J,Q,Z),J+=Q,!(_.upper-J>1e4*Q)););for((J=-Q)>_.upper&&(J=Math.ceil((_.upper+ee)/-Q)*-Q);J>=_.lower-ee&&(J<=_.upper+ee&&this.processTickPosition(G,J,Q,Z),!((J-=Q)-_.lower>1e4*Q)););}},getDistanceMajorTicks:function(){var G,_,J,Z,Q,ee,te,ne;return this.evalVisProp("insertticks")?(ee=((J=this.getLowerAndUpperBounds(this.getZeroCoordinates(),"")).upper-J.lower)/6/(Q=this.evalVisProp("scale")),te=this.evalVisProp("minticksdistance")/Q,ne=this.evalVisProp("minorticks"),(Z=this.getXandYdeltas()).x*=this.board.unitX,Z.y*=this.board.unitY,te/=math.A.hypot(Z.x,Z.y),te*=ne+1,2*(G=Math.pow(10,Math.floor(Math.log(te)/Math.LN10)))>=te?G*=2:5*G>=te&&(G*=5),5*(_=Math.pow(10,Math.floor(Math.log(ee)/Math.LN10)))<ee?_*=5:2*_<ee&&(_*=2),G=Math.max(G,_)):this.evalVisProp("ticksdistance")},processTickPosition:function(G,_,J,Z){var Q,ee,te,ne,ie,re,oe=this.evalVisProp("ticksperlabel"),se=null;this.line.elementClass===constants.A.OBJECT_CLASS_LINE?(Q=G.usrCoords[1]+_*Z.x,ee=G.usrCoords[2]+_*Z.y):(Q=this.line.X(G+_),ee=this.line.Y(G+_)),te=new base_coords.A(constants.A.COORDS_BY_USER,[Q,ee],this.board),this.line.elementClass===constants.A.OBJECT_CLASS_CURVE&&(se=G+_,this.setTicksSizeVariables(se)),ie=this.evalVisProp("minorticks"),te.major=Math.round(_/J)%(ie+1)===0,oe||(oe=ie+1),re=Math.round(_/J)%oe===0,(ne=this.createTickPath(te,te.major)).length===3&&(this.ticks.push(ne),re&&this.evalVisProp("drawlabels")?this.labelsData.push(this.generateLabelData(this.generateLabelText(te,G,se),te,this.ticks.length)):this.labelsData.push(null))},generateFixedTicks:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe=math.A.eps,se=utils_type.A.isArray(this.visProp.labels),ae=this.evalVisProp("drawlabels");for(this.line.elementClass===constants.A.OBJECT_CLASS_LINE&&(re=this.getXandYdeltas()),Q=0;Q<this.fixedTicks.length;Q++)this.line.elementClass===constants.A.OBJECT_CLASS_LINE?(ie=this.fixedTicks[Q],te=G.usrCoords[1]+ie*re.x,ne=G.usrCoords[2]+ie*re.y):(ie=G+this.fixedTicks[Q],te=this.line.X(ie),ne=this.line.Y(ie)),J=new base_coords.A(constants.A.COORDS_BY_USER,[te,ne],this.board),this.line.elementClass===constants.A.OBJECT_CLASS_CURVE&&this.setTicksSizeVariables(ie),(ee=this.createTickPath(J,!0)).length===3&&ie>=_.lower-oe&&ie<=_.upper+oe&&(this.ticks.push(ee),ae&&(se||utils_type.A.exists(this.visProp.labels[Q]))?(Z=se?this.evalVisProp("labels."+Q):ie,this.labelsData.push(this.generateLabelData(this.generateLabelText(J,G,Z),J,Q))):this.labelsData.push(null))},getXandYdeltas:function(){var G,_,J=this.line.point1.Dist(this.line.point2);return G=this.line.point1.coords.usrCoords,{x:((_=this.line.point2.coords.usrCoords)[1]-G[1])/J,y:(_[2]-G[2])/J}},_isInsideCanvas:function(G,_,J){var Z=this.board.canvasWidth,Q=this.board.canvasHeight;return J===void 0&&(J=0),G[0]>=J&&G[0]<=Z-J&&_[0]>=J&&_[0]<=Q-J||G[1]>=J&&G[1]<=Z-J&&_[1]>=J&&_[1]<=Q-J},createTickPath:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue,de,pe,fe,_e,ye=[-2e6,-2e6],be=[-2e6,-2e6];if(J=G.scrCoords,_?(ee=this.dxMaj,te=this.dyMaj,oe=this.majStyle,pe=this.evalVisProp("majortickendings.0")>0,fe=this.evalVisProp("majortickendings.1")>0):(ee=this.dxMin,te=this.dyMin,oe=this.minStyle,pe=this.evalVisProp("tickendings.0")>0,fe=this.evalVisProp("tickendings.1")>0),Z=[-te*J[1]-ee*J[2],te,ee],_&&this.evalVisProp("type")==="polar"){if(le=this.board.getBoundingBox(),de=(ue=2*Math.PI)/180,J=G.usrCoords,(ae=math.A.hypot(J[1],J[2]))<Math.max(math.A.hypot(le[0],le[1]),math.A.hypot(le[2],le[3]))){for(ye=[],be=[],se=0;se<=ue;se+=de)ye.push(this.board.origin.scrCoords[1]+ae*Math.cos(se)*this.board.unitX),be.push(this.board.origin.scrCoords[2]+ae*Math.sin(se)*this.board.unitY);return[ye,be,_]}}else{if(oe==="infinite"){if(this.evalVisProp("ignoreinfinitetickendings")&&(pe=fe=!0),Q=geometry.A.meetLineBoard(Z,this.board),pe&&fe)ye[0]=Q[0].scrCoords[1],ye[1]=Q[1].scrCoords[1],be[0]=Q[0].scrCoords[2],be[1]=Q[1].scrCoords[2];else if((_e=[math.A.innerProduct(Q[0].usrCoords.slice(1,3),this.line.stdform.slice(1,3))+this.line.stdform[0],math.A.innerProduct(Q[1].usrCoords.slice(1,3),this.line.stdform.slice(1,3))+this.line.stdform[0]])[0]<_e[1]&&(Q.reverse(),_e.reverse()),pe){if(_e[0]<0)return[];_e[1]<0?(ye[0]=Q[0].scrCoords[1],be[0]=Q[0].scrCoords[2],ye[1]=J[1],be[1]=J[2]):(ye[0]=Q[0].scrCoords[1],be[0]=Q[0].scrCoords[2],ye[1]=Q[1].scrCoords[1],be[1]=Q[1].scrCoords[2])}else if(fe){if(_e[1]>0)return[];_e[0]>0?(ye[0]=J[1],be[0]=J[2],ye[1]=Q[1].scrCoords[1],be[1]=Q[1].scrCoords[2]):(ye[0]=Q[0].scrCoords[1],be[0]=Q[0].scrCoords[2],ye[1]=Q[1].scrCoords[1],be[1]=Q[1].scrCoords[2])}}else re=this.evalVisProp("face")===">"?Math.PI/4:this.evalVisProp("face")==="<"?-Math.PI/4:0,ne=Math.cos(re)*ee-Math.sin(re)*te,ie=Math.sin(re)*ee+Math.cos(re)*te,ye[0]=J[1]+ne*pe,be[0]=J[2]-ie*pe,ye[1]=J[1],be[1]=J[2],re=-re,ne=Math.cos(re)*ee-Math.sin(re)*te,ie=Math.sin(re)*ee+Math.cos(re)*te,ye[2]=J[1]-ne*fe,be[2]=J[2]+ie*fe;if(this._isInsideCanvas(ye,be))return[ye,be,_]}return[]},formatLabelText:function(G){var _,J,Z=this.evalVisProp("label.usemathjax"),Q=this.evalVisProp("label.usekatex"),ee=this.evalVisProp("scalesymbol");return utils_type.A.isNumber(G)?(this.evalVisProp("label.tofraction")?_=Z?"\\("+utils_type.A.toFraction(G,!0)+"\\)":utils_type.A.toFraction(G,Q):(J=this.evalVisProp("digits"),this.useLocale()?_=this.formatNumberLocale(G,J):((_=(Math.round(1e11*G)/1e11).toString()).length>this.evalVisProp("maxlabellength")||_.indexOf("e")!==-1)&&(this.evalVisProp("precision")!==3&&J===3&&(J=this.evalVisProp("precision")),_=G.toExponential(J).toString())),this.evalVisProp("beautifulscientificticklabels")&&(_=this.beautifyScientificNotationLabel(_)),_.indexOf(".")>-1&&_.indexOf("e")===-1&&(_=(_=_.replace(/0+$/,"")).replace(/\.$/,""))):_=G.toString(),ee.length>0&&(_==="1"?_=ee:_==="-1"?_="-"+ee:_!=="0"&&(_+=ee)),this.evalVisProp("useunicodeminus")&&(_=_.replace(/-/g,"")),_},beautifyScientificNotationLabel:function(G){return G.indexOf("e")===-1?G:(parseFloat(G.substring(0,G.indexOf("e")))+G.substring(G.indexOf("e"))).replace(/e(.*)$/g,function(_,J){var Z="10";return Z+=J.replace(/-/g,"").replace(/\+/g,"").replace(/0/g,"").replace(/1/g,"").replace(/2/g,"").replace(/3/g,"").replace(/4/g,"").replace(/5/g,"").replace(/6/g,"").replace(/7/g,"").replace(/8/g,"").replace(/9/g,"")})},generateLabelText:function(G,_,J){var Z;if(!utils_type.A.exists(J)){if(Z=this.getDistanceFromZero(_,G),Math.abs(Z)<math.A.eps)return"0";J=Z/this.evalVisProp("scale")}return this.formatLabelText(J)},generateLabelData:function(G,_,J){var Z,Q,ee,te;return te=this.evalVisProp("label.fontsize"),Z=[_.scrCoords[1],_.scrCoords[1]],Q=[_.scrCoords[2],_.scrCoords[2]],ee=te===void 0?12:te,ee*=.5,this._isInsideCanvas(Z,Q,ee)?(Z=this.evalVisProp("label.offset")[0],Q=this.evalVisProp("label.offset")[1],{x:_.usrCoords[1]+Z/this.board.unitX,y:_.usrCoords[2]+Q/this.board.unitY,t:G,i:J}):null},update:function(){return this.needsUpdate&&this.board.canvasWidth!==0&&this.board.canvasHeight!==0&&this.calculateTicksCoordinates(),this},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&this.board.renderer.updateTicks(this),this.updateRendererLabels(),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},updateRendererLabels:function(){var G,_,J,Z,Q,ee,te,ne;for(J=this.labelsData.length,Z=this.labels.length,G=0,_=0;G<J;G++)this.labelsData[G]!==null&&(te=this.labelsData[G],_<Z?((ee=this.labels[_]).setText(te.t),ee.setCoords(te.x,te.y),_++):(this.labelCounter+=1,(Q=utils_type.A.deepCopy(this.visProp.label)).isLabel=!0,Q.priv=this.visProp.priv,Q.id=this.id+te.i+"Label"+this.labelCounter,ee=jxg.A.createText(this.board,[te.x,te.y,te.t],Q),this.addChild(ee),ee.setParents(this),ee.isDraggable=!1,ee.dump=!1,this.labels.push(ee)),(ne=this.evalVisProp("label.visible"))==="inherit"&&(ne=this.visPropCalc.visible),ee.prepareUpdate().updateVisibility(ne).updateRenderer(),ee.distanceX=this.evalVisProp("label.offset")[0],ee.distanceY=this.evalVisProp("label.offset")[1]);for(_=J=_;_<Z;_++)this.board.renderer.display(this.labels[_],!1),this.labels[_].visProp.visible=this.labels[_].visPropCalc.visible=!1;return this},hideElement:function(){var G;for(jxg.A.deprecated("Element.hideElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!1,this.board.renderer.display(this,!1),G=0;G<this.labels.length;G++)utils_type.A.exists(this.labels[G])&&this.labels[G].hideElement();return this},showElement:function(){var G;for(jxg.A.deprecated("Element.showElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!0,this.board.renderer.display(this,!1),G=0;G<this.labels.length;G++)utils_type.A.exists(this.labels[G])&&this.labels[G].showElement();return this}}),jxg.A.createTicks=function(G,_,J){var Z,Q,ee=utils_type.A.copyAttributes(J,G.options,"ticks");if(Q=_.length<2?ee.ticksdistance:_[1],_[0].elementClass!==constants.A.OBJECT_CLASS_LINE&&_[0].elementClass!==constants.A.OBJECT_CLASS_CURVE)throw new Error("JSXGraph: Can't create Ticks with parent types '"+typeof _[0]+"'.");return Z=new jxg.A.Ticks(_[0],Q,ee),utils_type.A.isFunction(ee.generatelabelvalue)&&(Z.generateLabelText=ee.generatelabelvalue),utils_type.A.isFunction(ee.generatelabeltext)&&(Z.generateLabelText=ee.generatelabeltext),Z.setParents(_[0]),Z.isDraggable=!0,Z.fullUpdate(_[0].visPropCalc.visible),Z},jxg.A.createHatchmark=function(G,_,J){var Z,Q,ee,te,ne,ie=[],re=utils_type.A.copyAttributes(J,G.options,"hatch");if(_[0].elementClass!==constants.A.OBJECT_CLASS_LINE&&_[0].elementClass!==constants.A.OBJECT_CLASS_CURVE||typeof _[1]!="number")throw new Error("JSXGraph: Can't create Hatch mark with parent types '"+typeof _[0]+"' and '"+typeof _[1]+" and ''"+typeof _[2]+"'.");for(ee=.5*-(((Z=_[1])-1)*(te=re.ticksdistance)),Q=0;Q<Z;Q++)ie[Q]=ee+Q*te;return(ne=G.create("ticks",[_[0],ie],re)).elType="hatch",_[0].inherits.push(ne),ne},jxg.A.registerElement("ticks",jxg.A.createTicks),jxg.A.registerElement("hash",jxg.A.createHatchmark),jxg.A.registerElement("hatch",jxg.A.createHatchmark),jxg.A.Ticks;var bitReverse=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],cplens=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],cplext=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],cpdist=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],cpdext=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],border=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],NAMEMAX=256;jxg.A.Util=jxg.A.Util||{},jxg.A.Util.Unzip=function(G){var _,J,Z,Q,ee=[],te=0,ne=[],ie=new Array(32768),re=0,oe=!1,se=G.length,ae=0,le=1,ue=new Array(288),de=new Array(32),pe=0,fe=null,_e=0,ye=new Array(17),be=[];function Ae(){return ae<se?G[ae++]:-1}function Ce(){le=1}function Ee(){var $e;try{$e=1&le,(le>>=1)===0&&($e=1&(le=Ae()),le=le>>1|128)}catch(Xe){throw console.log("Probably problems on iOS7 with >>"),Xe}return $e}function Re($e){var Xe=0,je=$e;try{for(;je--;)Xe=Xe<<1|Ee();$e&&(Xe=bitReverse[Xe]>>8-$e)}catch(qe){throw console.log("Probably problems on iOS7 with >>"),qe}return Xe}function Te(){re=0}function Me($e){ie[re++]=$e,ee.push(String.fromCharCode($e)),re===32768&&(re=0)}function Ne(){this.b0=0,this.b1=0,this.jump=null,this.jumppos=-1}function Le(){for(;;){if(ye[_e]>=Q)return-1;if(Z[ye[_e]]===_e)return ye[_e]++;ye[_e]++}}function Ie(){var $e,Xe=fe[pe];if(_e===17)return-1;if(pe++,_e++,($e=Le())>=0)Xe.b0=$e;else if(Xe.b0=32768,Ie())return-1;if(($e=Le())>=0)Xe.b1=$e,Xe.jump=null;else if(Xe.b1=32768,Xe.jump=fe[pe],Xe.jumppos=pe,Ie())return-1;return _e--,0}function Ge($e,Xe,je,qe){var Ze;for(fe=$e,pe=0,Z=je,Q=Xe,Ze=0;Ze<17;Ze++)ye[Ze]=0;return _e=0,Ie()?-1:0}function He($e){for(var Xe,je,qe=0,Ze=$e[qe];;)if(Ee()){if(!(32768&Ze.b1))return Ze.b1;for(Ze=Ze.jump,Xe=$e.length,je=0;je<Xe;je++)if($e[je]===Ze){qe=je;break}}else{if(!(32768&Ze.b0))return Ze.b0;Ze=$e[++qe]}}function Be(){var $e,Xe,je,qe,Ze,st,St,it,lt,ft,kt,Ht,Wt,ni,jt;do if($e=Ee(),(Xe=Re(2))===0)for(Ce(),lt=Ae(),lt|=Ae()<<8,kt=Ae(),65535&(lt^~(kt|=Ae()<<8))&&jxg.A.debug(`BlockLen checksum mismatch
`);lt--;)Me(Ae());else if(Xe===1)for(;;)if((qe=bitReverse[Re(7)]>>1)>23?(qe=qe<<1|Ee())>199?qe=(qe-=128)<<1|Ee():(qe-=48)>143&&(qe+=136):qe+=256,qe<256)Me(qe);else{if(qe===256)break;for(it=Re(cplext[qe-=257])+cplens[qe],qe=bitReverse[Re(5)]>>3,cpdext[qe]>8?(ft=Re(8),ft|=Re(cpdext[qe]-8)<<8):ft=Re(cpdext[qe]),ft+=cpdist[qe],qe=0;qe<it;qe++)Me(ie[re-ft&32767])}else if(Xe===2){for(st=new Array(320),Wt=257+Re(5),ni=1+Re(5),jt=4+Re(4),qe=0;qe<19;qe++)st[qe]=0;for(qe=0;qe<jt;qe++)st[border[qe]]=Re(3);for(it=de.length,je=0;je<it;je++)de[je]=new Ne;if(Ge(de,19,st))return Te(),1;for(Ht=Wt+ni,je=0;je<Ht;)if((qe=He(de))<16)st[je++]=qe;else if(qe===16){if(je+(qe=3+Re(2))>Ht)return Te(),1;for(Ze=je?st[je-1]:0;qe--;)st[je++]=Ze}else{if(je+(qe=qe===17?3+Re(3):11+Re(7))>Ht)return Te(),1;for(;qe--;)st[je++]=0}for(it=ue.length,je=0;je<it;je++)ue[je]=new Ne;if(Ge(ue,Wt,st))return Te(),1;for(it=ue.length,je=0;je<it;je++)de[je]=new Ne;for(St=[],je=Wt;je<st.length;je++)St[je-Wt]=st[je];if(Ge(de,ni,St))return Te(),1;for(;;)if((qe=He(ue))>=256){if((qe-=256)===0)break;for(it=Re(cplext[qe-=1])+cplens[qe],qe=He(de),cpdext[qe]>8?(ft=Re(8),ft|=Re(cpdext[qe]-8)<<8):ft=Re(cpdext[qe]),ft+=cpdist[qe];it--;)Me(ie[re-ft&32767])}else Me(qe)}while(!$e);return Te(),Ce(),0}function ze(){var $e,Xe,je,qe,Ze,st=[];try{if(ee=[],oe=!1,st[0]=Ae(),st[1]=Ae(),st[0]===120&&st[1]===218&&(Be(),ne[te]=[ee.join(""),"geonext.gxt"],te++),st[0]===31&&st[1]===139&&(Fe(),ne[te]=[ee.join(""),"file"],te++),st[0]===80&&st[1]===75){if(oe=!0,st[2]=Ae(),st[3]=Ae(),st[2]===3&&st[3]===4){for(st[0]=Ae(),st[1]=Ae(),_=Ae(),_|=Ae()<<8,Ze=Ae(),Ze|=Ae()<<8,Ae(),Ae(),Ae(),Ae(),Ae(),Ae()<<8,Ae()<<16,Ae()<<24,Ae(),Ae()<<8,Ae()<<16,Ae()<<24,Ae(),Ae()<<8,Ae()<<16,Ae()<<24,qe=Ae(),qe|=Ae()<<8,je=Ae(),je|=Ae()<<8,$e=0,be=[];qe--;)(Xe=Ae())==="/"|Xe===":"?$e=0:$e<NAMEMAX-1&&(be[$e++]=String.fromCharCode(Xe));for(J||(J=be),$e=0;$e<je;)Xe=Ae(),$e++;if(Ze===8&&(Be(),ne[te]=new Array(2),ne[te][0]=ee.join(""),ne[te][1]=be.join(""),te++),Fe())return!1}return!0}}catch(St){throw console.log("Probably problems on iOS7 with >>"),St}return!1}function Fe(){var $e,Xe,je=[];if(8&_&&(je[0]=Ae(),je[1]=Ae(),je[2]=Ae(),je[3]=Ae(),je[0]===80&&je[1]===75&&je[2]===7&&je[3]===8?(Ae(),Ae()<<8,Ae()<<16,Ae()<<24):je[0]|je[1]<<8|je[2]<<16|je[3]<<24,Ae(),Ae()<<8,Ae()<<16,Ae()<<24,Ae(),Ae()<<8,Ae()<<16,Ae()<<24),oe&&ze())return!1;if(je[0]=Ae(),je[0]!==8)return!0;if(_=Ae(),Ae(),Ae(),Ae(),Ae(),Ae(),Ae(),4&_)for(je[0]=Ae(),je[2]=Ae(),_e=je[0]+256*je[1],$e=0;$e<_e;$e++)Ae();if(8&_)for($e=0,be=[],Xe=Ae();Xe;)Xe!=="7"&&Xe!==":"||($e=0),$e<NAMEMAX-1&&(be[$e++]=Xe),Xe=Ae();if(16&_)for(Xe=Ae();Xe;)Xe=Ae();return 2&_&&(Ae(),Ae()),Be(),Ae(),Ae()<<8,Ae()<<16,Ae()<<24,Ae(),Ae()<<8,Ae()<<16,Ae()<<24,oe&&ze(),!1}ye[0]=0,jxg.A.Util.Unzip.prototype.unzipFile=function($e){var Xe;for(this.unzip(),Xe=0;Xe<ne.length;Xe++)if(ne[Xe][1]===$e)return ne[Xe][0];return""},jxg.A.Util.Unzip.prototype.unzip=function(){return ze(),ne}},jxg.A.Util,jxg.A.CA=function(G,_,J){this.node=G,this.createNode=_,this.parser=J},jxg.A.extend(jxg.A.CA.prototype,{findMapNode:function(G,_){var J,Z,Q;if(_.value==="op_assign"&&_.children[0].value===G)return _.children[1];if(_.children){for(Z=_.children.length,J=0;J<Z;++J)if((Q=this.findMapNode(G,_.children[J]))!==null)return Q}return null},setMath:function(G){var _,J;if((G.type!="node_op"||G.value!="op_add"&&G.value!="op_sub"&&G.value!="op_mul"&&G.value!="op_div"&&G.value!="op_neg"&&G.value!="op_execfun"&&G.value!="op_exp")&&G.type!="node_var"&&G.type!="node_const"||(G.isMath=!0),G.children)for(J=G.children.length,_=0;_<J;++_)this.setMath(G.children[_])},deriveElementary:function(G,_){var J,Z=G.children[0].value,Q=G.children[1];switch(Z){case"abs":J=this.createNode("node_op","op_div",Q[0],this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_mul",utils_type.A.deepCopy(Q[0]),utils_type.A.deepCopy(Q[0]))]));break;case"sqrt":J=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_mul",this.createNode("node_const",2),this.createNode(G.type,G.value,utils_type.A.deepCopy(G.children[0]),utils_type.A.deepCopy(G.children[1]))));break;case"sin":J=this.createNode("node_op","op_execfun",this.createNode("node_var","cos"),utils_type.A.deepCopy(Q));break;case"cos":J=this.createNode("node_op","op_neg",this.createNode("node_op","op_execfun",this.createNode("node_var","sin"),utils_type.A.deepCopy(Q)));break;case"tan":J=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","cos"),utils_type.A.deepCopy(Q)),this.createNode("node_const",2)));break;case"cot":J=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","sin"),utils_type.A.deepCopy(Q)),this.createNode("node_const",2))));break;case"exp":J=this.createNode(G.type,G.value,utils_type.A.deepCopy(G.children[0]),utils_type.A.deepCopy(G.children[1]));break;case"pow":J=this.createNode("node_op","op_mul",this.createNode("node_op","op_execfun",utils_type.A.deepCopy(G.children[0]),utils_type.A.deepCopy(G.children[1])),this.createNode("node_op","op_add",this.createNode("node_op","op_mul",this.derivative(G.children[1][0],_),this.createNode("node_op","op_div",utils_type.A.deepCopy(G.children[1][1]),utils_type.A.deepCopy(G.children[1][0]))),this.createNode("node_op","op_mul",this.derivative(G.children[1][1],_),this.createNode("node_op","op_execfun",this.createNode("node_var","log"),[utils_type.A.deepCopy(G.children[1][0])]))));break;case"log":case"ln":J=this.createNode("node_op","op_div",this.createNode("node_const",1),utils_type.A.deepCopy(Q[0]));break;case"log2":case"lb":case"ld":J=this.createNode("node_op","op_mul",this.createNode("node_op","op_div",this.createNode("node_const",1),utils_type.A.deepCopy(Q[0])),this.createNode("node_const",1.4426950408889634));break;case"log10":case"lg":J=this.createNode("node_op","op_mul",this.createNode("node_op","op_div",this.createNode("node_const",1),utils_type.A.deepCopy(Q[0])),this.createNode("node_const",.43429448190325176));break;case"asin":J=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",utils_type.A.deepCopy(Q[0]),utils_type.A.deepCopy(Q[0])))]));break;case"acos":J=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",utils_type.A.deepCopy(Q[0]),utils_type.A.deepCopy(Q[0])))])));break;case"atan":J=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_add",this.createNode("node_const",1),this.createNode("node_op","op_mul",utils_type.A.deepCopy(Q[0]),utils_type.A.deepCopy(Q[0]))));break;case"acot":J=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_add",this.createNode("node_const",1),this.createNode("node_op","op_mul",utils_type.A.deepCopy(Q[0]),utils_type.A.deepCopy(Q[0])))));break;case"sinh":J=this.createNode("node_op","op_execfun",this.createNode("node_var","cosh"),[utils_type.A.deepCopy(Q[0])]);break;case"cosh":J=this.createNode("node_op","op_execfun",this.createNode("node_var","sinh"),[utils_type.A.deepCopy(Q[0])]);break;case"tanh":J=this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","tanh"),[utils_type.A.deepCopy(Q[0])]),this.createNode("node_const",2)));break;case"asinh":J=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_add",this.createNode("node_op","op_mul",utils_type.A.deepCopy(Q[0]),utils_type.A.deepCopy(Q[0])),this.createNode("node_const",1))]));break;case"acosh":J=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_op","op_mul",utils_type.A.deepCopy(Q[0]),utils_type.A.deepCopy(Q[0])),this.createNode("node_const",1))]));break;case"atanh":J=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",utils_type.A.deepCopy(Q[0]),utils_type.A.deepCopy(Q[0]))));break;default:throw J=this.createNode("node_const",0),console.log('Derivative of "'+Z+'" not yet implemented'),new Error("Error("+this.line+"): ")}return J},derivative:function(G,_){var J;switch(G.type){case"node_op":switch(G.value){case"op_execfun":J=G.children[0].value=="pow"?this.deriveElementary(G,_):G.children[1].length===0?this.createNode("node_const",0):this.createNode("node_op","op_mul",this.deriveElementary(G,_),this.derivative(G.children[1][0],_));break;case"op_div":J=this.createNode("node_op","op_div",this.createNode("node_op","op_sub",this.createNode("node_op","op_mul",this.derivative(G.children[0],_),utils_type.A.deepCopy(G.children[1])),this.createNode("node_op","op_mul",utils_type.A.deepCopy(G.children[0]),this.derivative(G.children[1],_))),this.createNode("node_op","op_mul",utils_type.A.deepCopy(G.children[1]),utils_type.A.deepCopy(G.children[1])));break;case"op_mul":J=this.createNode("node_op","op_add",this.createNode("node_op","op_mul",utils_type.A.deepCopy(G.children[0]),this.derivative(G.children[1],_)),this.createNode("node_op","op_mul",this.derivative(G.children[0],_),utils_type.A.deepCopy(G.children[1])));break;case"op_neg":J=this.createNode("node_op","op_neg",this.derivative(G.children[0],_));break;case"op_add":case"op_sub":J=this.createNode("node_op",G.value,this.derivative(G.children[0],_),this.derivative(G.children[1],_));break;case"op_exp":J=this.createNode("node_op","op_mul",utils_type.A.deepCopy(G),this.createNode("node_op","op_add",this.createNode("node_op","op_mul",this.derivative(G.children[0],_),this.createNode("node_op","op_div",utils_type.A.deepCopy(G.children[1]),utils_type.A.deepCopy(G.children[0]))),this.createNode("node_op","op_mul",this.derivative(G.children[1],_),this.createNode("node_op","op_execfun",this.createNode("node_var","log"),[utils_type.A.deepCopy(G.children[0])]))))}break;case"node_var":J=G.value===_?this.createNode("node_const",1):this.createNode("node_const",0);break;case"node_const":J=this.createNode("node_const",0)}return J},expandDerivatives:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue;if(!G)return 0;for(this.line=G.line,this.col=G.col,Z=G.children.length,Q=0;Q<Z;++Q)if(G.children[Q]&&G.children[Q].type)G.children[Q]=this.expandDerivatives(G.children[Q],G,J);else if(utils_type.A.isArray(G.children[Q]))for(ee=0;ee<G.children[Q].length;++ee)G.children[Q][ee]&&G.children[Q][ee].type&&(G.children[Q][ee]=this.expandDerivatives(G.children[Q][ee],G,J));if(G.type==="node_op"&&G.value==="op_execfun"&&G.children[0]&&G.children[0].value==="D"){if(ue=!1,G.children[1][0].type=="node_var"&&(oe=G.children[1][0].value,(te=this.findMapNode(oe,J))!==null&&(ue=!0)),ue?(ae=te.children[0],se=G.children[1].length>=2?G.children[1][1].value:te.children[0][0],ne=te.children[1]):(ne=G.children[1][0],ae=["x"],se=G.children[1].length>=2?G.children[1][1].value:"x"),re=ne,(le=G.children[1].length>=3?G.children[1][2].value:1)>=1)for(;le>=1;)re=this.derivative(re,se),re=this.removeTrivialNodes(re),le--;ie=_.type=="node_op"&&_.value=="op_assign"?this.createNode("node_op","op_map",ae,re):re,this.setMath(ie),G.type=ie.type,G.value=ie.value,ie.children.length>0&&(G.children[0]=ie.children[0]),ie.children.length>1&&(G.children[1]=ie.children[1])}return G},removeTrivialNodes:function(G){var _,J,Z,Q,ee;if(utils_type.A.isArray(G))for(J=G.length,_=0;_<J;++_)G[_]=this.removeTrivialNodes(G[_]);if(G.type!="node_op"||!G.children)return G;for(J=G.children.length,_=0;_<J;++_){this.mayNotBeSimplified=!1;do G.children[_]=this.removeTrivialNodes(G.children[_]);while(this.mayNotBeSimplified)}switch(G.value){case"op_map":if(Z=G.children[0],(Q=G.children[1]).type=="node_var"){for(_=0;_<Z.length;++_)if(Z[_]==Q.value){Q.isMath=!0;break}}break;case"op_add":if(Z=G.children[0],Q=G.children[1],Z.type=="node_const"&&Z.value===0)return Q;if(Q.type=="node_const"&&Q.value===0)return Z;if(Z.type=="node_const"&&Q.type=="node_const")return Z.value+=Q.value,Z;break;case"op_mul":if(Z=G.children[0],Q=G.children[1],Z.type=="node_const"&&Z.value==1)return Q;if(Q.type=="node_const"&&Q.value==1||Z.type=="node_const"&&Z.value===0)return Z;if(Q.type=="node_const"&&Q.value===0||Q.type=="node_const"&&Q.value===0)return Q;if(Z.type=="node_op"&&Z.value=="op_neg"&&Q.type=="node_op"&&Q.value=="op_neg")return G.children=[Z.children[0],Q.children[0]],this.mayNotBeSimplified=!0,G;if(Z.value=="op_neg"&&Q.value!="op_neg")return G.type="node_op",G.value="op_neg",G.children=[this.createNode("node_op","op_mul",Z.children[0],Q)],this.mayNotBeSimplified=!0,G;if(Z.value!="op_neg"&&Q.value=="op_neg")return G.type="node_op",G.value="op_neg",G.children=[this.createNode("node_op","op_mul",Z,Q.children[0])],this.mayNotBeSimplified=!0,G;if(Z.value=="op_div"&&Z.children[0].type=="node_const"&&Z.children[0].value==1)return G.type="node_op",G.value="op_div",G.children=[Q,Z.children[1]],this.mayNotBeSimplified=!0,G;if(Q.value=="op_div"&&Q.children[0].type=="node_const"&&Q.children[0].value==1)return G.type="node_op",G.value="op_div",G.children=[Z,Q.children[1]],this.mayNotBeSimplified=!0,G;if(Z.type!="node_const"&&Q.type=="node_const")return G.children=[Q,Z],this.mayNotBeSimplified=!0,G;if(Z.type!="node_const"&&Q.type=="node_op"&&Q.value=="op_neg"&&Q.children[0].type=="node_const")return G.children=[Q,Z],this.mayNotBeSimplified=!0,G;if(Z.type=="node_op"&&Z.value!="op_execfun"&&(Q.type=="node_var"||Q.type=="node_op"&&Q.value=="op_execfun"))return G.children=[Q,Z],this.mayNotBeSimplified=!0,G;if(Z.type!="node_op"&&Q.type=="node_op"&&Q.value=="op_neg"&&Q.children[0].type=="node_var")return G.children=[Q,Z],this.mayNotBeSimplified=!0,G;if(Z.type!="node_const"&&Q.type=="node_op"&&(Q.value=="op_mul"||Q.value=="op_div")&&Q.children[0].type=="node_const")return ee=Q.children[0],Q.children[0]=Z,G.children=[ee,Q],this.mayNotBeSimplified=!0,G;if(Q.type!="node_const"&&Z.type=="node_op"&&Z.value=="op_mul"&&Z.children[0].type=="node_const")return G.children=[Z.children[0],this.createNode("node_op","op_mul",Z.children[1],Q)],this.mayNotBeSimplified=!0,G;if(Z.type=="node_const"&&Q.type=="node_const")return Z.value*=Q.value,Z;if(Z.type=="node_const"&&Q.type=="node_op"&&(Q.value=="op_mul"||Q.value=="op_div")&&Q.children[0].type=="node_const")return Q.children[0].value*=Z.value,Q;if(Z.hash=this.parser.compile(Z),Q.hash=this.parser.compile(Q),Z.hash===Q.hash)return G.value="op_exp",G.children[1]=this.createNode("node_const",2),G;if(Z.type=="node_const"&&Q.type=="node_op"&&(Q.value=="op_mul"||Q.value=="op_div")&&Q.children[0].type=="node_const")return Q.children[0].value*=Z.value,Q;if(Q.type=="node_op"&&Q.value=="op_exp"&&(Z.hash||(Z.hash=this.parser.compile(Z)),Q.children[0].hash||(Q.children[0].hash=this.parser.compile(Q.children[0])),Z.hash===Q.children[0].hash))return Q.children[1]=this.createNode("node_op","op_add",Q.children[1],this.createNode("node_const",1)),this.mayNotBeSimplified=!0,Q;if(Z.type=="node_op"&&Z.value=="op_exp"&&Q.type=="node_op"&&Q.value=="op_exp"&&(Z.children[0].hash=this.parser.compile(Z.children[0]),Q.children[0].hash=this.parser.compile(Q.children[0]),Z.children[0].hash===Q.children[0].hash))return Z.children[1]=this.createNode("node_op","op_add",Z.children[1],Q.children[1]),this.mayNotBeSimplified=!0,Z;break;case"op_sub":if(Z=G.children[0],Q=G.children[1],Z.type=="node_const"&&Z.value===0)return G.value="op_neg",G.children[0]=Q,G;if(Q.type=="node_const"&&Q.value===0)return Z;if(Z.type=="node_const"&&Q.type=="node_const"&&Z.value==Q.value)return this.createNode("node_const",0);if(Z.type=="node_var"&&Q.type=="node_var"&&Z.value==Q.value)return this.createNode("node_const",0);if(Z.type=="node_const"&&Q.type=="node_const")return Z.value-=Q.value,Z;if(Z.type=="node_op"&&Z.value=="op_mul"&&Q.type=="node_op"&&Q.value=="op_mul"&&(Z.children[1].hash=this.parser.compile(Z.children[1]),Q.children[1].hash=this.parser.compile(Q.children[1]),Z.children[1].hash===Q.children[1].hash))return G.value="op_mul",G.children=[this.createNode("node_op","op_sub",Z.children[0],Q.children[0]),Z.children[1]],this.mayNotBeSimplified=!0,G;if(Z.type=="node_op"&&Z.value=="op_mul"&&(Z.children[1].hash=this.parser.compile(Z.children[1]),Q.hash=this.parser.compile(Q),Z.children[1].hash===Q.hash))return G.value="op_mul",G.children=[this.createNode("node_op","op_sub",Z.children[0],this.createNode("node_const",1)),Q],this.mayNotBeSimplified=!0,G;if(Q.type=="node_op"&&Q.value=="op_mul"&&(Q.children[1].hash=this.parser.compile(Q.children[1]),Z.hash=this.parser.compile(Z),Q.children[1].hash===Z.hash))return G.value="op_mul",G.children=[this.createNode("node_op","op_sub",this.createNode("node_const",1),Q.children[0]),Z],this.mayNotBeSimplified=!0,G;break;case"op_neg":if((Z=G.children[0]).type=="node_const"&&Z.value===0)return Z;if(Z.type=="node_op"&&Z.value=="op_neg")return Z.children[0];break;case"op_div":if(Z=G.children[0],Q=G.children[1],Z.type=="node_const"&&Q.type=="node_const"&&Z.value==Q.value&&Z.value!==0)return Z.value=1,Z;if(Z.type=="node_const"&&Z.value===0&&Q.type=="node_const"&&Q.value!==0)return Z.value=0,Z;if(Z.type=="node_const"&&Z.value===0&&(Q.type=="node_op"||Q.type=="node_var"))return G.type="node_const",G.value=0,G;if(Z.type=="node_var"&&Q.type=="node_var"&&Z.value==Q.value)return this.createNode("node_const",1);if(Z.type=="node_const"&&Z.value!==0&&Q.type=="node_const"&&Q.value===0)return Z.value>0?Z.value=1/0:Z.value=-1/0,Z;if(Z.type=="node_op"&&Z.value=="op_neg"&&Q.type=="node_op"&&Q.value=="op_neg")return G.children=[Z.children[0],Q.children[0]],this.mayNotBeSimplified=!0,G;if(Z.value=="op_neg"&&Q.value!="op_neg")return G.type="node_op",G.value="op_neg",G.children=[this.createNode("node_op","op_div",Z.children[0],Q)],this.mayNotBeSimplified=!0,G;if(Z.value!="op_neg"&&Q.value=="op_neg")return G.type="node_op",G.value="op_neg",G.children=[this.createNode("node_op","op_div",Z,Q.children[0])],this.mayNotBeSimplified=!0,G;if(Z.type=="node_op"&&Z.value=="op_exp"&&(Q.hash||(Q.hash=this.parser.compile(Q)),Z.children[0].hash||(Z.children[0].hash=this.parser.compile(Z.children[0])),Q.hash===Z.children[0].hash))return Z.children[1]=this.createNode("node_op","op_sub",Z.children[1],this.createNode("node_const",1)),this.mayNotBeSimplified=!0,Z;if(Q.type!="node_const"&&Z.type=="node_op"&&Z.value=="op_mul"&&Z.children[0].type=="node_const")return G.value="op_mul",G.children=[Z.children[0],this.createNode("node_op","op_div",Z.children[1],Q)],this.mayNotBeSimplified=!0,G;if(Z.type=="node_op"&&Z.value=="op_exp"&&Q.type=="node_op"&&Q.value=="op_exp"&&(Z.children[0].hash=this.parser.compile(Z.children[0]),Q.children[0].hash=this.parser.compile(Q.children[0]),Z.children[0].hash===Q.children[0].hash))return Z.children[1]=this.createNode("node_op","op_sub",Z.children[1],Q.children[1]),this.mayNotBeSimplified=!0,Z;break;case"op_exp":if(Z=G.children[0],(Q=G.children[1]).type=="node_const"&&Q.value===0)return Q.value=1,Q;if(Q.type=="node_const"&&Q.value==1||Z.type=="node_const"&&Z.value==1||Z.type=="node_const"&&Z.value===0&&Q.type=="node_const"&&Q.value!==0)return Z;if(Z.type=="node_op"&&Z.value=="op_exp")return G.children=[Z.children[0],this.createNode("node_op","op_mul",Z.children[1],Q)],G}switch(G.value){case"op_add":if(Z=G.children[0],Q=G.children[1],Z.type=="node_const"&&Q.type=="node_const"&&Z.value==Q.value)return Z.value+=Q.value,Z;if(Z.type=="node_var"&&Q.type=="node_var"&&Z.value==Q.value)return G.children[0]=this.createNode("node_const",2),G.value="op_mul",G;if(Z.type=="node_op"&&Z.value=="op_neg")return G.value="op_sub",G.children[0]=Q,G.children[1]=Z.children[0],this.mayNotBeSimplified=!0,G;if(Q.type=="node_op"&&Q.value=="op_neg")return G.value="op_sub",G.children[1]=Q.children[0],this.mayNotBeSimplified=!0,G;if(Z.type=="node_op"&&Z.value=="op_mul"&&Q.type=="node_op"&&Q.value=="op_mul"&&(Z.children[1].hash=this.parser.compile(Z.children[1]),Q.children[1].hash=this.parser.compile(Q.children[1]),Z.children[1].hash===Q.children[1].hash))return G.value="op_mul",G.children=[this.createNode("node_op","op_add",Z.children[0],Q.children[0]),Z.children[1]],this.mayNotBeSimplified=!0,G;if(Z.type=="node_op"&&Z.value=="op_mul"&&(Z.children[1].hash=this.parser.compile(Z.children[1]),Q.hash=this.parser.compile(Q),Z.children[1].hash===Q.hash))return G.value="op_mul",G.children=[this.createNode("node_op","op_add",Z.children[0],this.createNode("node_const",1)),Q],this.mayNotBeSimplified=!0,G;if(Q.type=="node_op"&&Q.value=="op_mul"&&(Q.children[1].hash=this.parser.compile(Q.children[1]),Z.hash=this.parser.compile(Z),Q.children[1].hash===Z.hash))return G.value="op_mul",G.children=[this.createNode("node_op","op_add",this.createNode("node_const",1),Q.children[0]),Z],this.mayNotBeSimplified=!0,G;break;case"op_sub":if(Z=G.children[0],(Q=G.children[1]).type=="node_op"&&Q.value=="op_neg")return G.value="op_add",G.children[1]=Q.children[0],this.mayNotBeSimplified=!0,G;break;case"op_execfun":return this.simplifyElementary(G)}return G},simplifyElementary:function(G){var _=G.children[0].value,J=G.children[1];if(J.length==0)return G;switch(_){case"sin":case"tan":if(J[0].type=="node_const"&&J[0].value===0||J[0].type=="node_var"&&J[0].value=="PI"||J[0].type=="node_op"&&J[0].value=="op_mul"&&J[0].children[0].type=="node_const"&&J[0].children[0].value%1==0&&J[0].children[1].type=="node_var"&&J[0].children[1].value=="PI")return G.type="node_const",G.value=0,G;break;case"cos":if(J[0].type=="node_const"&&J[0].value===0)return G.type="node_const",G.value=1,G;if(J[0].type=="node_var"&&J[0].value=="PI")return G.type="node_op",G.value="op_neg",G.children=[this.createNode("node_const",1)],G;break;case"exp":if(J[0].type=="node_const"&&J[0].value===0)return G.type="node_const",G.value=1,G;break;case"pow":if(J[1].type=="node_const"&&J[1].value===0)return G.type="node_const",G.value=1,G}return G}}),jxg.A.CA,jxg.A.Dump={addMarkers:function(G,_,J){var Z,Q,ee;for(Z in utils_type.A.isArray(_)||(_=[_]),utils_type.A.isArray(J)||(J=[J]),Q=Math.min(_.length,J.length),_.length=Q,J.length=Q,G.objects)if(G.objects.hasOwnProperty(Z))for(ee=0;ee<Q;ee++)G.objects[Z][_[ee]]=J[ee]},deleteMarkers:function(G,_){var J,Z,Q;for(J in utils_type.A.isArray(_)||(_=[_]),Z=_.length,_.length=Z,G.objects)if(G.objects.hasOwnProperty(J))for(Q=0;Q<Z;Q++)delete G.objects[J][_[Q]]},str:function(G){return typeof G=="string"&&G.slice(0,7)!=="function"&&(G='"'+G+'"'),G},minimizeObject:function(G,_){var J,Z,Q,ee={},te=utils_type.A.deepCopy(G),ne=[];for(Q=1;Q<arguments.length;Q++)ne.push(arguments[Q]);for(ee=utils_type.A.deepCopy(ee,jxg.A.Options.elements,!0),Q=ne.length;Q>0;Q--)ee=utils_type.A.deepCopy(ee,ne[Q-1],!0);for(J in ee)ee.hasOwnProperty(J)&&(Z=J.toLowerCase(),ee[J]!==null&&typeof ee[J]!="object"&&ee[J]===te[Z]&&delete te[Z]);return te},prepareAttributes:function(G,_){var J,Z;for(Z in J=this.minimizeObject(_.getAttributes(),jxg.A.Options[_.elType]),_.subs)_.subs.hasOwnProperty(Z)&&(J[Z]=this.minimizeObject(_.subs[Z].getAttributes(),jxg.A.Options[_.elType][Z],jxg.A.Options[_.subs[Z].elType]),J[Z].id=_.subs[Z].id,J[Z].name=_.subs[Z].name);return J.id=_.id,J.name=_.name,J},setBoundingBox:function(G,_,J){return G.push({obj:J,method:"setBoundingBox",params:[_.getBoundingBox(),_.keepaspectratio]}),G},dump:function(G){var _,J,Z,Q,ee=[],te=[],ne=G.objectsList.length;for(this.addMarkers(G,"dumped",!1),_=0;_<ne;_++)if(Z={},!(J=G.objectsList[_]).dumped&&J.dump){for(Z.type=J.getType(),Z.parents=J.getParents().slice(),Z.type==="point"&&Z.parents[0]===1&&(Z.parents=Z.parents.slice(1)),Q=0;Q<Z.parents.length;Q++)utils_type.A.isString(Z.parents[Q])&&Z.parents[Q][0]!=="'"&&Z.parents[Q][0]!=='"'?Z.parents[Q]='"'+Z.parents[Q]+'"':utils_type.A.isArray(Z.parents[Q])&&(Z.parents[Q]="["+Z.parents[Q].toString()+"]");Z.attributes=this.prepareAttributes(G,J),Z.type==="glider"&&J.onPolygon&&ee.push({obj:J.id,prop:"onPolygon",val:!0}),te.push(Z)}return this.deleteMarkers(G,"dumped"),{elements:te,props:ee,methods:[]}},arrayToParamStr:function(G,_){var J,Z=[];for(J=0;J<G.length;J++)Z.push(_.call(this,G[J]));return Z.join(", ")},toJCAN:function(G){var _,J,Z;switch(typeof G){case"object":if(G){if(J=[],utils_type.A.isArray(G)){for(_=0;_<G.length;_++)J.push(this.toJCAN(G[_]));return"["+J.join(",")+"]"}for(Z in G)G.hasOwnProperty(Z)&&J.push(Z+": "+this.toJCAN(G[Z]));return"<<"+J.join(", ")+">> "}return"null";case"string":return"'"+G.replace(/\\/g,"\\\\").replace(/(["'])/g,"\\$1")+"'";case"number":case"boolean":return G.toString();case"null":return"null"}},toJessie:function(G){var _,J,Z,Q=this.dump(G),ee=[];for(Q.methods=this.setBoundingBox(Q.methods,G,"$board"),J=Q.elements,_=0;_<J.length;_++)J[_].attributes.name.length>0&&ee.push("// "+J[_].attributes.name),ee.push("s"+_+" = "+J[_].type+"("+J[_].parents.join(", ")+") "+this.toJCAN(J[_].attributes).replace(/\n/,"\\n")+";"),J[_].type==="axis"&&(Z=J[_].attributes.id,G.objects[Z].defaultTicks===null&&ee.push("s"+_+".removeAllTicks();")),ee.push("");for(_=0;_<Q.methods.length;_++)ee.push(Q.methods[_].obj+"."+Q.methods[_].method+"("+this.arrayToParamStr(Q.methods[_].params,this.toJCAN)+");"),ee.push("");for(_=0;_<Q.props.length;_++)ee.push(Q.props[_].obj+"."+Q.props[_].prop+" = "+this.toJCAN(Q.props[_].val)+";"),ee.push("");return ee.join(`
`)},toJavaScript:function(G){var _,J,Z,Q=this.dump(G),ee=[];for(Q.methods=this.setBoundingBox(Q.methods,G,"board"),J=Q.elements,_=0;_<J.length;_++)ee.push('board.create("'+J[_].type+'", ['+J[_].parents.join(", ")+"], "+utils_type.A.toJSON(J[_].attributes)+");"),J[_].type==="axis"&&(Z=J[_].attributes.id,G.objects[Z].defaultTicks===null&&ee.push('board.objects["'+Z+'"].removeTicks(board.objects["'+Z+'"].defaultTicks);'));for(_=0;_<Q.methods.length;_++)ee.push(Q.methods[_].obj+"."+Q.methods[_].method+"("+this.arrayToParamStr(Q.methods[_].params,utils_type.A.toJSON)+");"),ee.push("");for(_=0;_<Q.props.length;_++)ee.push(Q.props[_].obj+"."+Q.props[_].prop+" = "+utils_type.A.toJSON(Q.props[_].val)+";"),ee.push("");return ee.join(`
`)}},jxg.A.Dump,jxg.A.createComb=function(G,_,J){var Z,Q,ee,te,ne;if(_.length!==2)throw ne=_.map(function(ie){return"'"+typeof ie+"'"}),new Error("JSXGraph: Can't create comb with parent types "+ne.join(", ")+`.
Possible parent types: [point,point], [[x1,y1],[x2,y2]]`);if(utils_type.A.isArray(_[0])&&_[0].length>1)te=utils_type.A.copyAttributes(J,G.options,"comb","point1"),Z=G.create("point",_[0],te);else if(utils_type.A.isString(_[0])||utils_type.A.isPoint(_[0]))Z=G.select(_[0]);else if(utils_type.A.isFunction(_[0])&&utils_type.A.isPoint(_[0]()))Z=_[0]();else{if(!(utils_type.A.isFunction(_[0])&&_[0]().length&&_[0]().length>=2))throw new Error("JSXGraph: Can't create comb with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]]`);te=utils_type.A.copyAttributes(J,G.options,"comb","point1"),Z=jxg.A.createPoint(G,_[0](),te)}if(utils_type.A.isArray(_[1])&&_[1].length>1)te=utils_type.A.copyAttributes(J,G.options,"comb","point2"),Q=G.create("point",_[1],te);else if(utils_type.A.isString(_[1])||utils_type.A.isPoint(_[1]))Q=G.select(_[1]);else if(utils_type.A.isFunction(_[1])&&utils_type.A.isPoint(_[1]()))Q=_[1]();else{if(!(utils_type.A.isFunction(_[1])&&_[1]().length&&_[1]().length>=2))throw new Error("JSXGraph: Can't create comb with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]]`);te=utils_type.A.copyAttributes(J,G.options,"comb","point2"),Q=jxg.A.createPoint(G,_[1](),te)}return te=utils_type.A.copyAttributes(J,G.options,"comb"),(ee=G.create("curve",[[0],[0]],te)).updateDataArray=function(){var ie,re,oe,se,ae,le,ue,de,pe,fe,_e=0,ye=Z.Dist(Q),be=Z,Ae=Q;for(de=ee.evalVisProp("frequency"),pe=-ee.evalVisProp("angle"),fe=ee.evalVisProp("width"),ee.evalVisProp("reverse")&&(be=Q,Ae=Z,pe=-pe),ie=Math.cos(pe),re=Math.sin(pe),oe=(Ae.X()-be.X())/ye,se=(Ae.Y()-be.Y())/ye,ie*=fe/Math.abs(re),re*=fe/Math.abs(re),this.dataX=[],this.dataY=[];_e<ye;)ae=be.X()+oe*_e,le=be.Y()+se*_e,re*=ue=Math.min(ie,ye-_e)/Math.abs(ie),ie*=ue,this.dataX.push(ae),this.dataY.push(le),this.dataX.push(ae+oe*ie+se*re),this.dataY.push(le-oe*re+se*ie),this.dataX.push(NaN),this.dataY.push(NaN),_e+=de},ee},jxg.A.registerElement("comb",jxg.A.createComb);var priv={removeSlopeTriangle:function(){polygon.prototype.remove.call(this),this.board.removeObject(this.toppoint),this.board.removeObject(this.glider),this.board.removeObject(this.baseline),this.board.removeObject(this.basepoint),this.board.removeObject(this.label),this._isPrivateTangent&&this.board.removeObject(this.tangent)},Value:function(){return this.tangent.getSlope()},Direction:function(){return this.tangent.Direction()}};jxg.A.createSlopeTriangle=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae=!1;if(_.length===1&&_[0].type===constants.A.OBJECT_TYPE_TANGENT)Q=_[0],ee=Q.glider;else if(_.length===1&&_[0].type===constants.A.OBJECT_TYPE_GLIDER)ee=_[0],se=utils_type.A.copyAttributes(J,G.options,"slopetriangle","tangent"),Q=G.create("tangent",[ee],se),ae=!0;else{if(_.length!==2||_[0].elementClass!==constants.A.OBJECT_CLASS_LINE||!utils_type.A.isPoint(_[1]))throw new Error("JSXGraph: Can't create slope triangle with parent types '"+typeof _[0]+"'.");Q=_[0],ee=_[1]}return se=utils_type.A.copyAttributes(J,G.options,"slopetriangle","basepoint"),re=G.create("point",[function(){return[ee.X()+1,ee.Y()]}],se),se=utils_type.A.copyAttributes(J,G.options,"slopetriangle","baseline"),ie=G.create("line",[ee,re],se),se=utils_type.A.copyAttributes(J,G.options,"slopetriangle","glider"),te=G.create("glider",[ee.X()+1,ee.Y(),ie],se),se=utils_type.A.copyAttributes(J,G.options,"slopetriangle","toppoint"),ne=G.create("point",[function(){return[te.X(),te.Y()+(te.X()-ee.X())*Q.getSlope()]}],se),se=utils_type.A.copyAttributes(J,G.options,"slopetriangle"),(Z=G.create("polygon",[ee,te,ne],se)).Value=priv.Value,Z.Direction=priv.Direction,Z.tangent=Q,Z._isPrivateTangent=ae,Z.borders[2].setArrow(!1,!1),se=utils_type.A.copyAttributes(J,G.options,"slopetriangle","label"),(se=utils_type.A.copyAttributes(se,G.options,"label")).isLabel=!0,se.anchor=Z.borders[1],se.priv=Z.borders[1].visProp.priv,se.id=Z.borders[1].id+"Label",(oe=G.create("text",[0,0,function(){return""}],se)).needsUpdate=!0,oe.dump=!1,Z.borders[1].label=oe,Z.borders[1].hasLabel=!0,Z.borders[1].visProp.withlabel=!0,oe._setText(function(){var le=oe.evalVisProp("digits");return oe.useLocale()?oe.formatNumberLocale(Z.Value(),le):utils_type.A.toFixed(Z.Value(),le)}),oe.fullUpdate(),Z.glider=te,Z.basepoint=re,Z.baseline=ie,Z.toppoint=ne,Z.label=oe,Z.subs={glider:te,basePoint:re,baseLine:ie,topPoint:ne,label:oe},Z.inherits.push(te,re,ie,ne,oe),Z.methodMap=jxg.A.deepCopy(Z.methodMap,{tangent:"tangent",glider:"glider",basepoint:"basepoint",baseline:"baseline",toppoint:"toppoint",label:"label",Value:"Value",V:"Value",Direction:"Direction"}),Z.remove=priv.removeSlopeTriangle,Z},jxg.A.registerElement("slopetriangle",jxg.A.createSlopeTriangle);var checkbox_priv={CheckboxChangeEventHandler:function(){this._value=this.rendNodeCheckbox.checked,this.board.update()}};jxg.A.createCheckbox=function(G,_,J){var Z,Q,ee=utils_type.A.copyAttributes(J,G.options,"checkbox");return Q=[_[0],_[1],'<span style="display:inline"><input type="checkbox" /><label for=""></label></span>'],(Z=G.create("text",Q,ee)).type=utils_type.A.OBJECT_TYPE_CHECKBOX,Z.rendNodeCheckbox=Z.rendNode.childNodes[0].childNodes[0],Z.rendNodeLabel=Z.rendNode.childNodes[0].childNodes[1],Z.rendNodeTag=Z.rendNodeCheckbox,Z.rendNodeTag.disabled=!!ee.disabled,Z.rendNodeCheckbox.id=Z.rendNode.id+"_checkbox",Z.rendNodeLabel.id=Z.rendNode.id+"_label",Z.rendNodeLabel.setAttribute("for",Z.rendNodeCheckbox.id),Z.setText(_[2]),Z.visPropOld.fontsize="0px",G.renderer.updateTextStyle(Z,!1),Z.rendNodeCheckbox.checked=ee.checked,Z._value=ee.checked,Z.Value=function(){return this._value},Z.update=function(){return this.needsUpdate&&(jxg.A.Text.prototype.update.call(this),this._value=this.rendNodeCheckbox.checked),this},env.A.addEvent(Z.rendNodeCheckbox,"change",checkbox_priv.CheckboxChangeEventHandler,Z),Z},jxg.A.registerElement("checkbox",jxg.A.createCheckbox);var input_priv={InputInputEventHandler:function(G){this._value=this.rendNodeInput.value,this.board.update()}};jxg.A.createInput=function(G,_,J){var Z,Q,ee=utils_type.A.copyAttributes(J,G.options,"input");return Q=[_[0],_[1],'<span style="display:inline; white-space:nowrap; padding:0px;"><label></label><input type="text" maxlength="'+ee.maxlength+'" style="width:100%" /></span>'],(Z=G.create("text",Q,ee)).type=utils_type.A.OBJECT_TYPE_INPUT,Z.rendNodeLabel=Z.rendNode.childNodes[0].childNodes[0],Z.rendNodeInput=Z.rendNode.childNodes[0].childNodes[1],Z.rendNodeInput.value=_[2],Z.rendNodeTag=Z.rendNodeInput,Z.rendNodeTag.disabled=!!ee.disabled,Z.rendNodeLabel.id=Z.rendNode.id+"_label",Z.rendNodeInput.id=Z.rendNode.id+"_input",Z.rendNodeInput.setAttribute("aria-labelledby",Z.rendNodeLabel.id),Z.setText(_[3]),Z._value=_[2],Z.rendNodeInput.addEventListener("keydown",te=>{te.key!=="ArrowLeft"&&te.key!=="ArrowRight"||te.stopPropagation()}),Z.update=function(){return this.needsUpdate&&(jxg.A.Text.prototype.update.call(this),this._value=this.rendNodeInput.value),this},Z.Value=function(){return this._value},Z.set=function(te){return this._value=te,this.rendNodeInput.value=te,this},env.A.addEvent(Z.rendNodeInput,"input",input_priv.InputInputEventHandler,Z),env.A.addEvent(Z.rendNodeInput,"mousedown",function(te){utils_type.A.exists(te.stopPropagation)&&te.stopPropagation()},Z),env.A.addEvent(Z.rendNodeInput,"touchstart",function(te){utils_type.A.exists(te.stopPropagation)&&te.stopPropagation()},Z),env.A.addEvent(Z.rendNodeInput,"pointerdown",function(te){utils_type.A.exists(te.stopPropagation)&&te.stopPropagation()},Z),Z.visPropOld.fontsize="0px",G.renderer.updateTextStyle(Z,!1),Z},jxg.A.registerElement("input",jxg.A.createInput);var button_priv={ButtonClickEventHandler:function(){this._handler&&this._handler(),this.board.update()}};jxg.A.createButton=function(G,_,J){var Z,Q,ee=utils_type.A.copyAttributes(J,G.options,"button");return Q=[_[0],_[1],'<button type="button" style="width:100%; height:100%;" tabindex="0"></button>'],(Z=G.create("text",Q,ee)).type=utils_type.A.OBJECT_TYPE_BUTTON,Z.rendNodeButton=Z.rendNode.childNodes[0],Z.rendNodeButton.id=Z.rendNode.id+"_button",Z.rendNodeTag=Z.rendNodeButton,Z.rendNodeTag.disabled=!!ee.disabled,Z.setText(_[2]),Z.visPropOld.fontsize="0px",G.renderer.updateTextStyle(Z,!1),_[3]&&(utils_type.A.isString(_[3])?(Z._jc=new jxg.A.JessieCode,Z._jc.use(G),Z._handler=function(){Z._jc.parse(_[3])}):Z._handler=_[3]),env.A.addEvent(Z.rendNodeButton,"click",button_priv.ButtonClickEventHandler,Z),env.A.addEvent(Z.rendNodeButton,"mousedown",function(te){utils_type.A.exists(te.stopPropagation)&&te.stopPropagation()},Z),env.A.addEvent(Z.rendNodeButton,"touchstart",function(te){utils_type.A.exists(te.stopPropagation)&&te.stopPropagation()},Z),env.A.addEvent(Z.rendNodeButton,"pointerdown",function(te){utils_type.A.exists(te.stopPropagation)&&te.stopPropagation()},Z),Z},jxg.A.registerElement("button",jxg.A.createButton),jxg.A.createVectorField=function(G,_,J){var Z,Q;if(!(_.length>=3&&(utils_type.A.isArray(_[0])||utils_type.A.isFunction(_[0])||utils_type.A.isString(_[0]))&&utils_type.A.isArray(_[1])&&_[1].length===3&&utils_type.A.isArray(_[2])&&_[2].length===3))throw new Error("JSXGraph: Can't create vector field with parent types '"+typeof _[0]+"', '"+typeof _[1]+"', '"+typeof _[2]+"'.");return Q=utils_type.A.copyAttributes(J,G.options,"vectorfield"),(Z=G.create("curve",[[],[]],Q)).elType="vectorfield",Z.setF=function(ee,te){var ne,ie;return utils_type.A.isArray(ee)?(ne=utils_type.A.createFunction(ee[0],this.board,te),ie=utils_type.A.createFunction(ee[1],this.board,te),this.F=function(re,oe){return[ne(re,oe),ie(re,oe)]}):this.F=utils_type.A.createFunction(ee,Z.board,te),this},Z.setF(_[0],"x, y"),Z.xData=_[1],Z.yData=_[2],Z.updateDataArray=function(){var ee,te,ne,ie,re,oe,se,ae,le,ue,de,pe,fe=this.evalVisProp("scale"),_e=utils_type.A.evaluate(this.xData[0]),ye=utils_type.A.evaluate(this.xData[1]),be=(utils_type.A.evaluate(this.xData[2])-_e)/ye,Ae=utils_type.A.evaluate(this.yData[0]),Ce=utils_type.A.evaluate(this.yData[1]),Ee=(utils_type.A.evaluate(this.yData[2])-Ae)/Ce,Re=this.evalVisProp("arrowhead.enabled");for(Re&&(ue=(le=this.evalVisProp("arrowhead.size"))/G.unitX,de=le/G.unitY,pe=this.evalVisProp("arrowhead.angle")),this.dataX=[],this.dataY=[],ne=0,ee=_e;ne<=ye;ee+=be,ne++)for(ie=0,te=Ae;ie<=Ce;te+=Ee,ie++)(re=this.F(ee,te))[0]*=fe,re[1]*=fe,utils_type.A.concat(this.dataX,[ee,ee+re[0],NaN]),utils_type.A.concat(this.dataY,[te,te+re[1],NaN]),Re&&Math.abs(re[0])+Math.abs(re[1])>0&&(se=(oe=Math.atan2(re[1],re[0]))+pe,ae=oe-pe,utils_type.A.concat(this.dataX,[ee+re[0]-Math.cos(se)*ue,ee+re[0],ee+re[0]-Math.cos(ae)*ue,NaN]),utils_type.A.concat(this.dataY,[te+re[1]-Math.sin(se)*de,te+re[1],te+re[1]-Math.sin(ae)*de,NaN]))},Z.methodMap=utils_type.A.deepCopy(Z.methodMap,{setF:"setF"}),Z},jxg.A.registerElement("vectorfield",jxg.A.createVectorField),jxg.A.createSlopeField=function(G,_,J){var Z,Q,ee;if(!(_.length>=3&&(utils_type.A.isFunction(_[0])||utils_type.A.isString(_[0]))&&utils_type.A.isArray(_[1])&&_[1].length===3&&utils_type.A.isArray(_[2])&&_[2].length===3))throw new Error("JSXGraph: Can't create slope field with parent types '"+typeof _[0]+"', '"+typeof _[1]+"', '"+typeof _[2]+"'.");return Q=utils_type.A.createFunction(_[0],G,"x, y"),_[0]=function(te,ne){var ie=Q(te,ne),re=Math.sqrt(1+ie*ie);return[1/re,ie/re]},ee=utils_type.A.copyAttributes(J,G.options,"slopefield"),(Z=G.create("vectorfield",_,ee)).elType="slopefield",Z.setF=function(te,ne){var ie=utils_type.A.createFunction(te,Z.board,ne);this.F=function(re,oe){var se=ie(re,oe),ae=Math.sqrt(1+se*se);return[1/ae,se/ae]}},Z.methodMap=utils_type.A.deepCopy(Z.methodMap,{setF:"setF"}),Z},jxg.A.registerElement("slopefield",jxg.A.createSlopeField),jxg.A.createSmartLabel=function(G,_,J){var Z,Q,ee,te,ne,ie;if(_.length===0||[constants.A.OBJECT_CLASS_POINT,constants.A.OBJECT_CLASS_LINE,constants.A.OBJECT_CLASS_CIRCLE].indexOf(_[0].elementClass)<0&&[constants.A.OBJECT_TYPE_POLYGON,constants.A.OBJECT_TYPE_ANGLE].indexOf(_[0].type)<0)throw new Error("JSXGraph: Can't create smartlabel with parent types '"+typeof _[0]+"', '"+typeof _[1]+"'.");return ee=_[0],te=_[1]||"",ee.elementClass===constants.A.OBJECT_CLASS_POINT?Q=utils_type.A.copyAttributes(J,G.options,"smartlabelpoint"):ee.elementClass===constants.A.OBJECT_CLASS_LINE?((Q=utils_type.A.copyAttributes(J,G.options,"smartlabelline")).rotate=function(){return 180*Math.atan(ee.getSlope())/Math.PI},Q.visible=function(){return!(ee.L()<1.5)}):ee.elementClass===constants.A.OBJECT_CLASS_CIRCLE?(Q=utils_type.A.copyAttributes(J,G.options,"smartlabelcircle")).visible=function(){return!(ee.Radius()<1.5)}:ee.type===constants.A.OBJECT_TYPE_POLYGON?Q=utils_type.A.copyAttributes(J,G.options,"smartlabelpolygon"):ee.type===constants.A.OBJECT_TYPE_ANGLE&&((Q=utils_type.A.copyAttributes(J,G.options,"smartlabelangle")).rotate=function(){var re=ee.center.coords.usrCoords,oe=ee.getLabelAnchor().usrCoords,se=180*Math.atan2(oe[2]-re[2],oe[1]-re[1])/Math.PI;return se>90&&se<270?se+180:se},Q.anchorX=function(){var re=ee.center.coords.usrCoords,oe=ee.getLabelAnchor().usrCoords,se=180*Math.atan2(oe[2]-re[2],oe[1]-re[1])/Math.PI;return se>90&&se<270?"right":"left"}),ne=function(re,oe,se,ae){var le;switch(ae){case"length":le=function(){return oe.L()};break;case"slope":le=function(){return oe.Slope()};break;case"area":le=function(){return oe.Area()};break;case"radius":le=function(){return oe.Radius()};break;case"perimeter":le=function(){return oe.Perimeter()};break;case"rad":le=function(){return oe.Value()};break;case"deg":le=function(){return 180*oe.Value()/Math.PI};break;default:le=function(){return 0}}return function(){var ue,de="",pe=utils_type.A.evaluate(te),fe=re.evalVisProp("digits"),_e=re.evalVisProp("unit"),ye=re.evalVisProp("prefix"),be=re.evalVisProp("suffix"),Ae=re.evalVisProp("usemathjax")||re.evalVisProp("usekatex");return pe===""?(ue=re.useLocale()?re.formatNumberLocale(le(),fe):utils_type.A.toFixed(le(),fe),de=Ae?["\\(",ye,ue,"\\,",_e,be,"\\)"].join(""):[ye,ue,_e,be].join("")):de=pe,de}},ee.elementClass===constants.A.OBJECT_CLASS_POINT?(Z=G.create("text",[function(){return ee.X()},function(){return ee.Y()},""],Q),ie=function(){var re,oe,se="",ae=utils_type.A.evaluate(te),le=Z.evalVisProp("digits"),ue=Z.evalVisProp("unit"),de=Z.evalVisProp("prefix"),pe=Z.evalVisProp("suffix"),fe=Z.evalVisProp("dir"),_e=Z.evalVisProp("usemathjax")||Z.evalVisProp("usekatex");return Z.useLocale()?(re=Z.formatNumberLocale(ee.X(),le),oe=Z.formatNumberLocale(ee.Y(),le)):(re=utils_type.A.toFixed(ee.X(),le),oe=utils_type.A.toFixed(ee.Y(),le)),ae===""?fe==="row"?se=_e?["\\(",de,re,"\\,",ue," / ",oe,"\\,",ue,pe,"\\)"].join(""):[de,re," ",ue," / ",oe," ",ue,pe].join(""):fe.indexOf("col")===0&&(se=_e?["\\(",de,"\\left(\\array{",re,"\\,",ue,"\\\\ ",oe,"\\,",ue,"}\\right)",pe,"\\)"].join(""):[de,re," ",ue,"<br />",oe," ",ue,pe].join("")):se=ae,se}):ee.elementClass===constants.A.OBJECT_CLASS_LINE?Q.measure==="length"?ie=ne(Z=G.create("text",[function(){return .5*(ee.point1.X()+ee.point2.X())},function(){return .5*(ee.point1.Y()+ee.point2.Y())},""],Q),ee,0,"length"):Q.measure==="slope"&&(ie=ne(Z=G.create("text",[function(){return .25*ee.point1.X()+.75*ee.point2.X()},function(){return .25*ee.point1.Y()+.75*ee.point2.Y()},""],Q),ee,0,"slope")):ee.elementClass===constants.A.OBJECT_CLASS_CIRCLE?Q.measure==="radius"?ie=ne(Z=G.create("text",[function(){return ee.center.X()+.5*ee.Radius()},function(){return ee.center.Y()},""],Q),ee,0,"radius"):Q.measure==="area"?ie=ne(Z=G.create("text",[function(){return ee.center.X()},function(){return ee.center.Y()+.5*ee.Radius()},""],Q),ee,0,"area"):Q.measure!=="circumference"&&Q.measure!=="perimeter"||(ie=ne(Z=G.create("text",[function(){return ee.getLabelAnchor()},""],Q),ee,0,"perimeter")):ee.type===constants.A.OBJECT_TYPE_POLYGON?Q.measure==="area"?ie=ne(Z=G.create("text",[function(){return ee.getTextAnchor()},""],Q),ee,0,"area"):Q.measure==="perimeter"&&(ie=ne(Z=G.create("text",[function(){var re=ee.borders.length-1;return re>=0?[.5*(ee.borders[re].point1.X()+ee.borders[re].point2.X()),.5*(ee.borders[re].point1.Y()+ee.borders[re].point2.Y())]:ee.getTextAnchor()},""],Q),ee,0,"perimeter")):ee.type===constants.A.OBJECT_TYPE_ANGLE&&(ie=ne(Z=G.create("text",[function(){return ee.getLabelAnchor()},""],Q),ee,0,Q.measure)),utils_type.A.exists(Z)&&(Z.setText(ie),ee.addChild(Z),Z.setParents([ee])),Z},jxg.A.registerElement("smartlabel",jxg.A.createSmartLabel),jxg.A.ForeignObject=function(G,_,J,Z,Q){this.constructor(G,J,constants.A.OBJECT_TYPE_FOREIGNOBJECT,constants.A.OBJECT_CLASS_OTHER),this.element=this.board.select(J.anchor),this.coordsConstructor(_),this._useUserSize=!1,this.size=[1,1],utils_type.A.exists(Q)&&Q.length>0&&(this._useUserSize=!0,this.W=utils_type.A.createFunction(Q[0],this.board,""),this.H=utils_type.A.createFunction(Q[1],this.board,""),this.addParentsFromJCFunctions([this.W,this.H]),this.usrSize=[this.W(),this.H()]),this.content=Z,this.elType="foreignobject",this.id=this.board.setId(this,"Im"),this.board.renderer.drawForeignObject(this),this.board.finalizeAdding(this),this.methodMap=jxg.A.deepCopy(this.methodMap,{addTransformation:"addTransform",trans:"addTransform",W:"W",Width:"W",H:"H",Height:"H"})},jxg.A.ForeignObject.prototype=new base_element.A,utils_type.A.copyPrototypeMethods(jxg.A.ForeignObject,coordselement.A,"coordsConstructor"),jxg.A.extend(jxg.A.ForeignObject.prototype,{hasPoint:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se=this.transformations.length;return utils_type.A.isObject(this.evalVisProp("precision"))?(ee=this.board._inputDevice,te=this.evalVisProp("precision."+ee)):te=this.board.options.precision.hasPoint,se===0?(J=G-this.coords.scrCoords[1],Z=this.coords.scrCoords[2]-_,J>=-(Q=te)&&J-this.size[0]<=Q&&Z>=-Q&&Z-this.size[1]<=Q):(ie=[(ne=(ne=new base_coords.A(constants.A.COORDS_BY_SCREEN,[G,_],this.board)).usrCoords)[0]-this.span[0][0],ne[1]-this.span[0][1],ne[2]-this.span[0][2]],0<=(re=(oe=math.A.innerProduct)(ie,this.span[1]))&&re<=oe(this.span[1],this.span[1])&&0<=(re=oe(ie,this.span[2]))&&re<=oe(this.span[2],this.span[2]))},update:function(G){return this.needsUpdate?(this.updateCoords(G),this.updateSize(),this):this},updateRenderer:function(){return this.updateRendererGeneric("updateForeignObject")},updateSize:function(){var G=[0,0];return this._useUserSize?(this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*this.board.unitX),Math.abs(this.usrSize[1]*this.board.unitY)]):this.rendNode.hasChildNodes()&&(G=this.rendNode.childNodes[0].getBoundingClientRect(),this.size=[G.width,G.height]),this},updateSpan:function(){var G,_,J=this.transformations.length,Z=[];if(J===0)this.span=[[this.Z(),this.X(),this.Y()],[this.Z(),this.W(),0],[this.Z(),0,this.H()]];else{for(Z[0]=[this.Z(),this.X(),this.Y()],Z[1]=[this.Z(),this.X()+this.W(),this.Y()],Z[2]=[this.Z(),this.X(),this.Y()+this.H()],G=0;G<J;G++)for(_=0;_<3;_++)Z[_]=math.A.matVecMult(this.transformations[G].matrix,Z[_]);for(_=0;_<3;_++)Z[_][1]/=Z[_][0],Z[_][2]/=Z[_][0],Z[_][0]/=Z[_][0];for(_=1;_<3;_++)Z[_][0]-=Z[0][0],Z[_][1]-=Z[0][1],Z[_][2]-=Z[0][2];this.span=Z}return this},addTransform:function(G){var _;if(utils_type.A.isArray(G))for(_=0;_<G.length;_++)this.transformations.push(G[_]);else this.transformations.push(G);return this},getParents:function(){var G=[this.url,[this.Z(),this.X(),this.Y()],this.usrSize];return this.parents.length!==0&&(G=this.parents),G},setSize:function(G,_){return this.W=utils_type.A.createFunction(G,this.board,""),this.H=utils_type.A.createFunction(_,this.board,""),this._useUserSize=!0,this.addParentsFromJCFunctions([this.W,this.H]),this},W:function(){},H:function(){}}),jxg.A.createForeignObject=function(G,_,J){var Z,Q,ee=_[0],te=_[1],ne=[];if(_.length>=2&&(ne=_[2]),Z=utils_type.A.copyAttributes(J,G.options,"foreignobject"),!(Q=coordselement.A.create(jxg.A.ForeignObject,G,te,Z,ee,ne)))throw new Error("JSXGraph: Can't create foreignObject with parent types '"+typeof _[0]+"' and '"+typeof _[1]+`'.
Possible parent types: [string, [x, y], [w, h]], [string, [x, y]], [element,transformation]`);return Q},jxg.A.registerElement("foreignobject",jxg.A.createForeignObject),jxg.A.registerElement("fo",jxg.A.createForeignObject),jxg.A.ForeignObject,jxg.A.extend(src_options.A,{axes3d:{axesPosition:"center",xAxis:{visible:!0,point2:{name:"x"},strokeColor:jxg.A.palette.red},yAxis:{visible:!0,point2:{name:"y"},strokeColor:jxg.A.palette.green},zAxis:{visible:!0,point2:{name:"z"},strokeColor:jxg.A.palette.blue},xAxisBorder:{name:"x",visible:"nherit",withLabel:!1,label:{position:"50% left",offset:[30,0],fontsize:15},strokeWidth:1,lastArrow:!1,ticks3d:{visible:"nherit",label:{anchorX:"middle",anchorY:"middle"}}},yAxisBorder:{name:"y",visible:"nherit",withLabel:!1,label:{position:"50% right",offset:[0,-30],fontsize:15},strokeWidth:1,lastArrow:!1,ticks3d:{visible:"nherit",label:{anchorX:"middle"}}},zAxisBorder:{name:"z",visible:"nherit",withLabel:!1,label:{position:"50% right",offset:[30,0],fontsize:15},strokeWidth:1,lastArrow:!1,ticks3d:{visible:"nherit",label:{anchorX:"middle",anchorY:"middle"}}},xPlaneRear:{visible:!0,layer:0,strokeWidth:1,strokeColor:"#dddddd",fillColor:"#dddddd",mesh3d:{layer:1}},yPlaneRear:{visible:!0,strokeWidth:1,strokeColor:"#dddddd",fillColor:"#dddddd",layer:0,mesh3d:{layer:1}},zPlaneRear:{visible:!0,strokeWidth:1,strokeColor:"#dddddd",fillColor:"#dddddd",layer:0,mesh3d:{layer:1}},xPlaneFront:{visible:!1,strokeWidth:1,strokeColor:"#dddddd",fillColor:"#dddddd",layer:0,mesh3d:{layer:1}},yPlaneFront:{visible:!1,strokeWidth:1,strokeColor:"#dddddd",fillColor:"#dddddd",layer:0,mesh3d:{layer:1}},zPlaneFront:{visible:!1,strokeWidth:1,strokeColor:"#dddddd",fillColor:"#dddddd",layer:0,mesh3d:{layer:1}},xPlaneRearYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneRearZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneFrontYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneFrontZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneRearXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneRearZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneFrontXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneFrontZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneRearXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneRearYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneFrontXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneFrontYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1}},axis3d:{highlight:!1,fixed:!0,strokeColor:"black",strokeWidth:1,tabindex:null,point1:{visible:!1,name:"",withLabel:!1},point2:{visible:!1,name:"",withLabel:!1,label:{visible:!0}}},circle3d:{layer:12,point:{visible:!1,name:""},needsRegularUpdate:!0},curve3d:{layer:12,highlight:!1,tabindex:-1,strokeWidth:1,numberPointsHigh:200,needsRegularUpdate:!0},face3d:{transitionProperties:[],layer:12,highlight:!1,tabindex:null,strokeWidth:1,fillColor:jxg.A.palette.yellow,fillOpacity:.4,needsRegularUpdate:!0,shader:{enabled:!1,type:"angle",hue:60,saturation:90,minLightness:30,maxLightness:90}},intersectionline3d:{point1:{visible:!1,name:""},point2:{visible:!1,name:""}},line3d:{layer:12,strokeWidth:1,strokeColor:"black",fixed:!0,tabindex:null,needsRegularUpdate:!0,point:{visible:!1,name:""},point1:{visible:!1,name:""},point2:{visible:!1,name:""},straightFirst:!1,straightLast:!1},mesh3d:{layer:12,strokeWidth:1,strokeColor:"#9a9a9a",strokeOpacity:.6,highlight:!1,tabindex:null,needsRegularUpdate:!0,stepWidthU:1,stepWidthV:1},plane3d:{layer:12,strokeWidth:0,strokeColor:"black",strokeOpacity:1,highlight:!1,tabindex:null,needsRegularUpdate:!0,visible:!0,gradient:"linear",gradientSecondColor:"#ffffff",gradientAngle:Math.PI,fillColor:"#a7a7a7",fillOpacity:.6,mesh3d:{visible:"inherit"},threePoints:!1,point:{visible:!1,name:"",fixed:!0},point1:{visible:!1,name:""},point2:{visible:!1,name:""},point3:{visible:!1,name:""}},point3d:{layer:13,infoboxDigits:"auto",strokeWidth:0,gradient:"radial",gradientSecondColor:"#555555",fillColor:"yellow",highlightStrokeColor:"#555555",gradientFX:.7,gradientFY:.3,needsRegularUpdate:!0},polygon3d:{layer:12,highlight:!1,tabindex:-1,strokeWidth:1,fillColor:"none",needsRegularUpdate:!0},polyhedron3d:{fillColorArray:["white","black"],needsRegularUpdate:!0},sphere3d:{layer:12,highlight:!1,strokeWidth:1,strokeColor:"#00ff80",fillColor:"white",gradient:"radial",gradientSecondColor:"#00ff80",gradientFX:.7,gradientFY:.3,fillOpacity:.4,needsRegularUpdate:!0},surface3d:{layer:12,highlight:!1,tabindex:-1,strokeWidth:1,stepsU:30,stepsV:30,needsRegularUpdate:!0},text3d:{withLabel:!1,needsRegularUpdate:!0},ticks3d:{visible:!0,ticksDistance:1,majorHeight:10,minorTicks:0,tickEndings:[0,1],drawLabels:!0,needsRegularUpdate:!0,label:{visible:!0,withLabel:!1}},vectorfield3d:{scale:1,arrowhead:{enabled:!0,size:5,angle:.125*Math.PI},needsRegularUpdate:!0},view3d:{needsRegularUpdate:!0,depthOrder:{enabled:!1,layers:[12,13]},projection:"parallel",verticalDrag:{enabled:!0,key:"shift"},az:{pointer:{enabled:!0,speed:1,outside:!0,button:-1,key:"none"},keyboard:{enabled:!0,step:10,key:"ctrl"},continuous:!0,slider:{visible:"inherit",style:6,point1:{pos:"auto",frozen:!1},point2:{pos:"auto",frozen:!1},min:0,max:2*Math.PI,start:1}},el:{pointer:{enabled:!0,speed:1,outside:!0,button:-1,key:"none"},keyboard:{enabled:!0,step:10,key:"ctrl"},continuous:!0,slider:{visible:"inherit",style:6,point1:{frozen:!1,pos:"auto"},point2:{frozen:!1,pos:"auto"},min:0,max:2*Math.PI,start:.3}},bank:{pointer:{enabled:!0,speed:.08,outside:!0,button:-1,key:"none"},keyboard:{enabled:!0,step:10,key:"ctrl"},continuous:!0,slider:{visible:"inherit",style:6,point1:{frozen:!1,pos:"auto"},point2:{frozen:!1,pos:"auto"},min:-Math.PI,max:Math.PI,start:0}},trackball:{enabled:!1,outside:!0,button:-1,key:"none"},r:"auto",fov:.4*Math.PI,values:[[0,1.57],[.78,.62],[0,0],[5.49,.62],[4.71,0],[3.93,.62],[3.14,0],[2.36,.62],[1.57,1.57]],infobox:{strokeColor:"#000000",fontSize:16,useKatex:!1,useMathjax:!1,intl:{enabled:!0,options:{minimumFractionDigits:2,maximumFractionDigits:3}}},_currentView:-1}}),jxg.A.Options,jxg.A.View3D=function(G,_,J){this.constructor(G,J,constants.A.OBJECT_TYPE_VIEW3D,constants.A.OBJECT_CLASS_3D),this.objects={},this.depthOrdered={},this.elementsByName={},this.defaultAxes=null,this.angles={az:null,el:null,bank:null},this.matrix3DRot=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],this.matrix3DRotShift=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],this.matrix3D=[[1,0,0,0],[0,1,0,0],[0,0,1,0]],this.boxToCam=[],this.llftCorner=_[0],this.size=_[1],this.bbox3D=_[2],this.r=-1,this.focalDist=-1,this.projectionType="parallel",this.trackballEnabled=!1,this.timeoutAzimuth=null,this.zIndexMin=1/0,this.zIndexMax=-1/0,this.id=this.board.setId(this,"V"),this.board.finalizeAdding(this),this.elType="view3d",this.methodMap=utils_type.A.deepCopy(this.methodMap,{})},jxg.A.View3D.prototype=new base_element.A,jxg.A.extend(jxg.A.View3D.prototype,{create:function(G,_,J){var Z=[];return G.indexOf("3d")>0&&Z.push(this),this.board.create(G,Z.concat(_),J)},select:function(G,_){var J,Z,Q,ee,te=G;if(te===null)return te;if(utils_type.A.isString(te)&&te!=="")utils_type.A.exists(this.objects[te])?te=this.objects[te]:utils_type.A.exists(this.elementsByName[te])&&(te=this.elementsByName[te]);else if(!_&&(utils_type.A.isFunction(te)||utils_type.A.isObject(te)&&!utils_type.A.isFunction(te.setAttribute))){for(Z={},ee=(J=utils_type.A.filterElements(this.objectsList,te)).length,Q=0;Q<ee;Q++)Z[J[Q].id]=J[Q];te=new composition(Z)}else utils_type.A.isObject(te)&&utils_type.A.exists(te.id)&&!utils_type.A.exists(this.objects[te.id])&&(te=null);return te},setAnglesFromRotation:function(){var G,_,J,Z,Q,ee,te,ne=this.matrix3DRot;(G=Math.sqrt(ne[1][3]*ne[1][3]+ne[2][3]*ne[2][3]))>math.A.eps?(_=ne[2][3]/G,J=ne[1][3]/G):(_=Math.cos(this.angles.bank),J=Math.sin(this.angles.bank)),ne=math.A.matMatMult([[1,0,0,0],[0,_,-J,0],[0,J,_,0],[0,0,0,1]],ne),this.angles.bank=Math.atan2(J,_),Z=ne[2][3],Q=ne[3][3],ne=math.A.matMatMult([[1,0,0,0],[0,1,0,0],[0,0,Z,Q],[0,0,-Q,Z]],ne),this.angles.el=Math.atan2(Q,Z),ee=-ne[1][1],te=ne[3][1],this.angles.az=Math.atan2(te,ee),this.angles.az<0&&(this.angles.az+=2*Math.PI),this.setSlidersFromAngles()},anglesHaveMoved:function(){return this._hasMoveAz||this._hasMoveEl||Math.abs(this.angles.az-this.az_slide.Value())>math.A.eps||Math.abs(this.angles.el-this.el_slide.Value())>math.A.eps||Math.abs(this.angles.bank-this.bank_slide.Value())>math.A.eps},getAnglesFromSliders:function(){this.angles.az=this.az_slide.Value(),this.angles.el=this.el_slide.Value(),this.angles.bank=this.bank_slide.Value()},setSlidersFromAngles:function(){this.az_slide.setValue(this.angles.az),this.el_slide.setValue(this.angles.el),this.bank_slide.setValue(this.angles.bank)},getRotationFromAngles:function(){var G,_,J,Z,Q,ee,te=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];return G=this.angles.az,_=this.angles.el,J=this.angles.bank,Z=-Math.sin(_),te[1][1]=-Math.cos(G),te[1][2]=Math.sin(G),te[1][3]=0,te[2][1]=Z*Math.sin(G),te[2][2]=Z*Math.cos(G),te[2][3]=Math.cos(_),te[3][1]=Math.cos(_)*Math.sin(G),te[3][2]=Math.cos(_)*Math.cos(G),te[3][3]=Math.sin(_),Q=Math.cos(J),ee=Math.sin(J),te=math.A.matMatMult([[1,0,0,0],[0,Q,ee,0],[0,-ee,Q,0],[0,0,0,1]],te)},_projectToSphere:function(G,_,J){var Z,Q=math.A.hypot(_,J);return Q<.7071067811865475*G?Math.sqrt(G*G-Q*Q):(Z=G/1.414213562373095)*Z/Q},updateProjectionTrackball:function(G){var _,J,Z,Q,ee,te,ne,ie,re,oe,se,ae,le=100,ue=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];return utils_type.A.exists(this._trackball)?((_=this._trackball.dx)*_+(J=this._trackball.dy)*J>math.A.eps&&(le=.25*(this.size[0]*this.board.unitX+this.size[1]*this.board.unitY),Q=[ee=this._trackball.x,te=this._trackball.y,this._projectToSphere(le,ee,te)],Z=[ee-=_,te-=J,this._projectToSphere(le,ee,te)],ae=math.A.crossProduct(Z,Q),re=math.A.hypot(ae[0],ae[1],ae[2]),ae[0]/=re,ae[1]/=re,ae[2]/=re,ie=(ie=(ie=geometry.A.distance(Q,Z,3)/(2*le))>1?1:ie)<-1?-1:ie,ne=2*Math.asin(ie),ie=1-(oe=Math.cos(ne)),se=Math.sin(ne),ue[1][1]=oe+ae[0]*ae[0]*ie,ue[2][1]=ae[1]*ae[0]*ie+ae[2]*se,ue[3][1]=ae[2]*ae[0]*ie-ae[1]*se,ue[1][2]=ae[0]*ae[1]*ie-ae[2]*se,ue[2][2]=oe+ae[1]*ae[1]*ie,ue[3][2]=ae[2]*ae[1]*ie+ae[0]*se,ue[1][3]=ae[0]*ae[2]*ie+ae[1]*se,ue[2][3]=ae[1]*ae[2]*ie-ae[0]*se,ue[3][3]=oe+ae[2]*ae[2]*ie),ue=math.A.matMatMult(ue,this.matrix3DRot)):this.matrix3DRot},updateAngleSliderBounds:function(){var G,_,J,Z,Q,ee,te,ne,ie,re,oe;this.trackballEnabled=this.evalVisProp("trackball.enabled"),this.trackballEnabled?(this.az_slide.setMin(0),this.az_slide.setMax(2*Math.PI),this.el_slide.setMin(-.5*Math.PI),this.el_slide.setMax(.5*Math.PI),this.bank_slide.setMin(-Math.PI),this.bank_slide.setMax(Math.PI)):(this.az_slide.setMin(this.visProp.az.slider.min),this.az_slide.setMax(this.visProp.az.slider.max),this.el_slide.setMin(this.visProp.el.slider.min),this.el_slide.setMax(this.visProp.el.slider.max),this.bank_slide.setMin(this.visProp.bank.slider.min),this.bank_slide.setMax(this.visProp.bank.slider.max)),G=this.az_slide._smax,_=this.az_slide._smin,J=this.el_slide._smax,Z=this.el_slide._smin,re=this.bank_slide._smax,oe=this.bank_slide._smin,this.trackballEnabled?(Q=math.A.mod(this.angles.el,2*Math.PI),.5*Math.PI<Q&&Q<1.5*Math.PI&&(this.angles.el=Math.PI-Q,this.angles.az=math.A.wrap(this.angles.az+Math.PI,_,G),this.angles.bank=math.A.wrap(this.angles.bank+Math.PI,oe,re)),this.angles.az=math.A.wrap(this.angles.az,_,G),this.angles.el=math.A.wrap(this.angles.el,Z,J),this.angles.bank=math.A.wrap(this.angles.bank,oe,re)):(ie=function(se){return se<Z?Z-se:J<se?se-J:0},ee=.5*(Z+J),te=math.A.wrap(this.angles.el,ee-Math.PI,ee+Math.PI),ne=math.A.wrap(Math.PI-this.angles.el,ee-Math.PI,ee+Math.PI),ie(te)<=ie(ne)?this.angles.el=math.A.clamp(te,Z,J):(this.angles.el=math.A.clamp(ne,Z,J),this.angles.az=math.A.wrap(this.angles.az+Math.PI,_,G),this.angles.bank=math.A.wrap(this.angles.bank+Math.PI,oe,re)),this.angles.az=math.A.wrapAndClamp(this.angles.az,_,G,2*Math.PI),this.angles.bank=math.A.wrapAndClamp(this.angles.bank,oe,re,2*Math.PI),this.matrix3DRot=this.getRotationFromAngles()),this.setSlidersFromAngles()},_updateCentralProjection:function(){var G,_;return(G=this.evalVisProp("r"))==="auto"&&(G=1.01*math.A.hypot(this.bbox3D[0][0]-this.bbox3D[0][1],this.bbox3D[1][0]-this.bbox3D[1][1],this.bbox3D[2][0]-this.bbox3D[2][1])),this.boxToCam=this.matrix3DRot.map(function(J){return J.slice()}),this.boxToCam[3][0]=-G,this.focalDist=1/Math.tan(.5*this.evalVisProp("fov")),_=[[0,0,0,-1],[0,this.focalDist,0,0],[0,0,this.focalDist,0],[320/-12,0,0,28/-12]],math.A.matMatMult(_,this.boxToCam)},update:function(){var G,_,J,Z,Q,ee=this.r,te=[[1,0,0,0],[0,-ee,0,0],[0,0,-ee,0],[0,0,0,1]];return utils_type.A.exists(this.el_slide)&&utils_type.A.exists(this.az_slide)&&utils_type.A.exists(this.bank_slide)&&this.needsUpdate?(G=[[1,0,0],[0,1,0],[0,0,1]],this.projectionType=this.evalVisProp("projection").toLowerCase(),this.trackballEnabled!==this.evalVisProp("trackball.enabled")&&this.updateAngleSliderBounds(),this._hasMoveTrackball?(this.matrix3DRot=this.updateProjectionTrackball(),this.setAnglesFromRotation()):this.anglesHaveMoved()&&(this.getAnglesFromSliders(),this.matrix3DRot=this.getRotationFromAngles()),this.shift=[[1,0,0,0],[-.5*(this.bbox3D[0][0]+this.bbox3D[0][1]),1,0,0],[-.5*(this.bbox3D[1][0]+this.bbox3D[1][1]),0,1,0],[-.5*(this.bbox3D[2][0]+this.bbox3D[2][1]),0,0,1]],this.projectionType==="central"?(J=.8,G[1][1]=this.size[0]/J,G[2][2]=this.size[1]/J,G[1][0]=this.llftCorner[0]+.5*G[1][1]*J,G[2][0]=this.llftCorner[1]+.5*G[2][2]*J,this.viewPortTransform=G,_=this._updateCentralProjection(),this.matrix3D=math.A.matMatMult(_,this.shift)):(Z=this.bbox3D[0][1]-this.bbox3D[0][0],Q=this.bbox3D[1][1]-this.bbox3D[1][0],G[1][1]=this.size[0]/Z,G[2][2]=this.size[1]/Q,G[1][0]=this.llftCorner[0]+.5*G[1][1]*Z,G[2][0]=this.llftCorner[1]+.5*G[2][2]*Q,this.matrix3D=math.A.matMatMult(G,math.A.matMatMult(math.A.matMatMult(this.matrix3DRot,te),this.shift).slice(0,3))),this.matrix3DRotShift=math.A.matMatMult(this.matrix3DRot,this.shift),this):(this.needsUpdate=!1,this)},compareDepth:function(G,_){return G.zIndex-_.zIndex},updateZIndices:function(){var G,_;for(G in this.objects)this.objects.hasOwnProperty(G)&&((_=this.objects[G]).type===constants.A.OBJECT_TYPE_LINE3D||_.type===constants.A.OBJECT_TYPE_POLYGON3D)&&utils_type.A.exists(_.element2D)&&_.element2D.evalVisProp("visible")&&_.updateZIndex()},updateShaders:function(){var G,_,J;for(G in this.objects)this.objects.hasOwnProperty(G)&&(_=this.objects[G],utils_type.A.exists(_.shader)&&((J=_.shader())<this.zIndexMin?this.zIndexMin=J:J>this.zIndexMax&&(this.zIndexMax=J)))},updateDepthOrdering:function(){var G,_,J,Z,Q,ee,te;for(ee=this.evalVisProp("depthorder.layers"),J=0;J<ee.length;J++)this.depthOrdered[ee[J]]=[];for(G in this.objects)this.objects.hasOwnProperty(G)&&((_=this.objects[G]).type===constants.A.OBJECT_TYPE_FACE3D||_.type===constants.A.OBJECT_TYPE_LINE3D||_.type===constants.A.OBJECT_TYPE_POINT3D||_.type===constants.A.OBJECT_TYPE_POLYGON3D)&&utils_type.A.exists(_.element2D)&&_.element2D.evalVisProp("visible")&&(te=_.element2D.evalVisProp("layer"),ee.indexOf(te)>=0&&this.depthOrdered[te].push(_));if(this.board.renderer&&this.board.renderer.type==="svg")for(J=0;J<ee.length;J++)for(te=ee[J],this.depthOrdered[te].sort(this.compareDepth.bind(this)),Q=this.depthOrdered[te],Z=0;Z<Q.length;Z++)this.board.renderer.setLayer(Q[Z].element2D,te);return this},updateRenderer:function(){return this.needsUpdate?(this.depthOrdered={},this.shift!==void 0&&this.evalVisProp("depthorder.enabled")&&(this.updateZIndices(),this.updateShaders(),this.board.renderer&&this.board.renderer.type==="svg"&&this.updateDepthOrdering()),this.needsUpdate=!1,this):this},removeObject:function(G,_){var J,Z;if(utils_type.A.isArray(G)){for(J=0;J<G.length;J++)this.removeObject(G[J]);return this}if(G=this.select(G),!utils_type.A.exists(G)||utils_type.A.isString(G))return this;try{for(Z in G.childElements)G.childElements.hasOwnProperty(Z)&&this.removeObject(G.childElements[Z]);delete this.objects[G.id]}catch(Q){jxg.A.debug("View3D "+G.id+": Could not be removed: "+Q)}return this.board.removeObject(G,_),this},worldToFocal:function(G,_=!0){var J,Z=math.A.matVecMult(this.boxToCam,math.A.matVecMult(this.shift,G));if(Z[3]-=Z[0]*this.focalDist,_)return Z;for(J=1;J<4;J++)Z[J]/=Z[0];return Z.slice(1,4)},project3DTo2D:function(G,_,J){var Z,Q;return arguments.length===3?Z=[1,G,_,J]:G.length===3?(Z=G.slice()).unshift(1):Z=G,Q=math.A.matVecMult(this.matrix3D,Z),this.projectionType==="central"?(Q[1]/=Q[0],Q[2]/=Q[0],Q[3]/=Q[0],Q[0]/=Q[0],math.A.matVecMult(this.viewPortTransform,Q.slice(0,3))):Q},_getW0:function(G,_,J){var Z,Q=math.A.inverse(G),ee=Q[0][0]+_[1]*Q[0][1]+_[2]*Q[0][2],te=Q[3][0]+_[1]*Q[3][1]+_[2]*Q[3][2];return Z=J*Q[0][3]-Q[3][3],[1/((te*Q[0][3]-ee*Q[3][3])/Z),(te-ee*J)/Z]},project2DTo3DPlane:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se=J.slice(1)||[0,0,0],ae=_.slice(1);if(te=math.A.norm(ae,3),ee=math.A.innerProduct(se,ae,3)/te,this.projectionType==="parallel"){(Z=this.matrix3D.slice(0,3)).push([0,ae[0],ae[1],ae[2]]),(Q=G.coords.usrCoords.slice()).push(ee);try{Z[2][3]===1&&(Z[2][1]=Z[2][2]=.001*math.A.eps),ne=math.A.Numerics.Gauss(Z,Q)}catch{ne=[0,NaN,NaN,NaN]}}else{Z=this.matrix3D,Q=G.coords.usrCoords.slice(),ie=math.A.Numerics.Gauss(this.viewPortTransform,Q),re=(oe=this._getW0(Z,ie,ee))[0],Q=[ie[0]*re,ie[1]*re,ie[2]*re,oe[1]*re];try{Z[2][3]===1&&(Z[2][1]=Z[2][2]=.001*math.A.eps),(ne=math.A.Numerics.Gauss(Z,Q))[1]/=ne[0],ne[2]/=ne[0],ne[3]/=ne[0],ne[0]/=ne[0]}catch{ne=[0,NaN,NaN,NaN]}}return ne},projectScreenToSegment:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe=this.project3DTo2D(_).slice(1,3),se=this.project3DTo2D(J).slice(1,3),ae=[se[0]-oe[0],se[1]-oe[1]],le=math.A.innerProduct(ae,ae),ue=[G[0]-oe[0],G[1]-oe[1]],de=math.A.innerProduct(ue,ae)/le;return this.projectionType==="central"?(Z=[.5*(_[0]+J[0]),.5*(_[1]+J[1]),.5*(_[2]+J[2])],ee=[(Q=this.project3DTo2D(Z).slice(1,3))[0]-oe[0],Q[1]-oe[1]],ne=(1-(te=math.A.innerProduct(ee,ae)/le))*de/((1-2*te)*de+te)):ne=de,[1,(re=1-(ie=Math.min(Math.max(ne,0),1)))*_[0]+ie*J[0],re*_[1]+ie*J[1],re*_[2]+ie*J[2]]},project2DTo3DVertical:function(G,_){var J=G.coords.usrCoords.slice(1,3),Z=[_[1],_[2],this.bbox3D[2][0]],Q=[_[1],_[2],this.bbox3D[2][1]];return this.projectScreenToSegment(J,Z,Q)},project3DToCube:function(G){var _=this.bbox3D,J=!1;return G[1]<_[0][0]&&(G[1]=_[0][0],J=!0),G[1]>_[0][1]&&(G[1]=_[0][1],J=!0),G[2]<_[1][0]&&(G[2]=_[1][0],J=!0),G[2]>_[1][1]&&(G[2]=_[1][1],J=!0),G[3]<=_[2][0]&&(G[3]=_[2][0],J=!0),G[3]>=_[2][1]&&(G[3]=_[2][1],J=!0),[G,J]},intersectionLineCube:function(G,_,J){var Z,Q,ee,te,ne;for(ne=_.length===3?_:_.slice(1),Z=J,Q=0;Q<3;Q++)ne[Q]!==0&&(ee=(this.bbox3D[Q][0]-G[Q+1])/ne[Q],te=(this.bbox3D[Q][1]-G[Q+1])/ne[Q],Z=J<0?Math.max(Z,Math.min(ee,te)):Math.min(Z,Math.max(ee,te)));return Z},isInCube:function(G,_){var J;if(G.length===4){if(G[0]===0)return!1;J=G.slice(1)}return J[0]>this.bbox3D[0][0]-math.A.eps&&J[0]<this.bbox3D[0][1]+math.A.eps&&J[1]>this.bbox3D[1][0]-math.A.eps&&J[1]<this.bbox3D[1][1]+math.A.eps&&J[2]>this.bbox3D[2][0]-math.A.eps&&J[2]<this.bbox3D[2][1]+math.A.eps},intersectionPlanePlane:function(G,_,J){var Z,Q,ee,te,ne,ie=[!1,!1];return J=J||_.d,(te=math.A.crossProduct(G.normal.slice(1),_.normal.slice(1))).unshift(0),Z=math.A.Geometry.meet3Planes(G.normal,G.d,_.normal,J,te,0),ne=math.A.Geometry.meetPlanePlane(G.vec1,G.vec2,_.vec1,_.vec2),ee=this.intersectionLineCube(Z,ne,1/0),Q=math.A.axpy(ee,ne,Z),this.isInCube(Q)&&(ie[0]=Q),ee=this.intersectionLineCube(Z,ne,-1/0),Q=math.A.axpy(ee,ne,Z),this.isInCube(Q)&&(ie[1]=Q),ie},intersectionPlaneFace:function(G,_){var J,Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue,de,pe,fe,_e=[],ye=[],be=[];for((fe=math.A.crossProduct(G.normal.slice(1),_.normal.slice(1))).unshift(0),Q=geometry.A.meet3Planes(G.normal,G.d,_.normal,_.d,fe,0),de=geometry.A.meetPlanePlane(G.vec1,G.vec2,_.vec1,_.vec2),re=_.polyhedron.faces[_.faceNumber],ee=_.polyhedron.coords,oe=re.length,J=1;J<=oe;J++)te=ee[re[J-1]],pe=[0,(ne=ee[re[J%oe]])[1]-te[1],ne[2]-te[2],ne[3]-te[3]],se=Math.random(),ae=Math.random(),le=Math.random(),ue=Math.random(),ye=[[se*de[1]+ae*de[3],se*-pe[1]+ae*-pe[3]],[le*de[2]+ue*de[3],le*-pe[2]+ue*-pe[3]]],be=[se*(te[1]-Q[1])+ae*(te[3]-Q[3]),le*(te[2]-Q[2])+ue*(te[3]-Q[3])],(Z=numerics.A.Gauss(ye,be)[1])>-math.A.eps&&Z<1+math.A.eps&&(ie=[1,te[1]+Z*pe[1],te[2]+Z*pe[2],te[3]+Z*pe[3]],_e.push(ie));return _e},intersectionPlanePolyhedron:function(G,_){var J,Z,Q,ee,te,ne,ie=1e-12,re=[],oe=[],se=[],ae=[];for(J=0;J<_.numberFaces;J++)if(!(_.def.faces[J].length<3||(Q=this.intersectionPlaneFace(G,_.faces[J])).length<2||Q[0].length!==4||Q[1].length!==4)){for(Z=0;Z<re.length&&!(geometry.A.distance(Q[0],re[Z][0],4)<ie&&geometry.A.distance(Q[1],re[Z][1],4)<ie||geometry.A.distance(Q[0],re[Z][1],4)<ie&&geometry.A.distance(Q[1],re[Z][0],4)<ie);Z++);Z===re.length&&re.push(Q.slice())}if(re.length===0)return{X:oe,Y:se,Z:ae};te=0,J=0;do{for((ee=re[te][J]).length===4&&(oe.push(ee[1]),se.push(ee[2]),ae.push(ee[3])),J=(J+1)%2,ee=re[te][J],ne=te,Z=0;Z<re.length;Z++){if(Z!==te&&geometry.A.distance(ee,re[Z][0])<ie){te=Z,J=0;break}if(Z!==te&&geometry.A.distance(ee,re[Z][1])<ie){te=Z,J=1;break}}if(te===ne){console.log("Error face3d intersection update: did not find next",te,J);break}}while(te!==0);return oe.push(oe[0]),se.push(se[0]),ae.push(ae[0]),{X:oe,Y:se,Z:ae}},getMesh:function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe=[0,0,0],se=utils_type.A.evaluate(_[2]),ae=utils_type.A.evaluate(J[2]),le=[],ue=[];for(ie=(utils_type.A.evaluate(_[1])-utils_type.A.evaluate(_[0]))/se,re=(utils_type.A.evaluate(J[1])-utils_type.A.evaluate(J[0]))/ae,Z=0;Z<=se;Z++){for(ee=_[0]+ie*Z,Q=0;Q<=ae;Q++)te=J[0]+re*Q,oe=utils_type.A.isFunction(G)?G(ee,te):[G[0](ee,te),G[1](ee,te),G[2](ee,te)],ne=this.project3DTo2D(oe),le.push(ne[1]),ue.push(ne[2]);le.push(NaN),ue.push(NaN)}for(Q=0;Q<=ae;Q++){for(te=J[0]+re*Q,Z=0;Z<=se;Z++)ee=_[0]+ie*Z,oe=utils_type.A.isFunction(G)?G(ee,te):[G[0](ee,te),G[1](ee,te),G[2](ee,te)],ne=this.project3DTo2D(oe),le.push(ne[1]),ue.push(ne[2]);le.push(NaN),ue.push(NaN)}return[le,ue]},animateAzimuth:function(){var G=this.az_slide._smin,_=this.az_slide._smax-G,J=this.az_slide.Value()+.1;this.az_slide.position=(J-G)/_,this.az_slide.position>1&&(this.az_slide.position=0),this.board._change3DView=!0,this.board.update(),this.board._change3DView=!1,this.timeoutAzimuth=setTimeout((function(){this.animateAzimuth()}).bind(this),200)},stopAzimuth:function(){clearTimeout(this.timeoutAzimuth),this.timeoutAzimuth=null},isVerticalDrag:function(){var G=this.board;return!!this.evalVisProp("verticaldrag.enabled")&&G["_"+this.evalVisProp("verticaldrag.key")+"Key"]},setView:function(G,_,J){return J=J||this.r,this.az_slide.setValue(G),this.el_slide.setValue(_),this.r=J,this.board.update(),this},nextView:function(){var G=this.evalVisProp("values"),_=this.visProp._currentview;return _=(_+1)%G.length,this.setCurrentView(_),this},previousView:function(){var G=this.evalVisProp("values"),_=this.visProp._currentview;return _=(_+G.length-1)%G.length,this.setCurrentView(_),this},setCurrentView:function(G){var _=this.evalVisProp("values");return(G<0||G>=_.length)&&(G=(G%_.length+_.length)%_.length),this.setView(_[G][0],_[G][1],_[G][2]),this.visProp._currentview=G,this},_azEventHandler:function(G){var _=this.az_slide._smax,J=this.az_slide._smin,Z=(_-J)/this.board.canvasWidth*this.evalVisProp("az.pointer.speed"),Q=G.movementX,ee=this.az_slide.Value(),te=this.el_slide.Value();return this.board.mode===this.board.BOARD_MODE_DRAG||(this.evalVisProp("az.keyboard.enabled")&&(G.key==="ArrowRight"?ee+=this.evalVisProp("az.keyboard.step")*Math.PI/180:G.key==="ArrowLeft"&&(ee-=this.evalVisProp("az.keyboard.step")*Math.PI/180)),this.evalVisProp("az.pointer.enabled")&&Q!==0&&G.key==null&&(ee+=Q*Z),this.evalVisProp("az.continuous")?ee=math.A.wrap(ee,J,_):ee>0?ee=Math.min(_,ee):ee<0&&(ee=Math.max(J,ee)),this.setView(ee,te)),this},_elEventHandler:function(G){var _=this.el_slide._smax,J=this.el_slide._smin,Z=(_-J)/this.board.canvasHeight*this.evalVisProp("el.pointer.speed"),Q=G.movementY,ee=this.az_slide.Value(),te=this.el_slide.Value();return this.board.mode===this.board.BOARD_MODE_DRAG||(this.evalVisProp("el.keyboard.enabled")&&(G.key==="ArrowUp"?te-=this.evalVisProp("el.keyboard.step")*Math.PI/180:G.key==="ArrowDown"&&(te+=this.evalVisProp("el.keyboard.step")*Math.PI/180)),this.evalVisProp("el.pointer.enabled")&&Q!==0&&G.key==null&&(te+=Q*Z),this.evalVisProp("el.continuous")&&!this.trackballEnabled?te=math.A.wrap(te,J,_):te>0?te=Math.min(_,te):te<0&&(te=Math.max(J,te)),this.setView(ee,te)),this},_bankEventHandler:function(G){var _,J=this.bank_slide._smax,Z=this.bank_slide._smin,Q=G.deltaY,ee=this.bank_slide.Value();return this.board.mode===this.board.BOARD_MODE_DRAG||(this.evalVisProp("bank.keyboard.enabled")&&(_=this.evalVisProp("bank.keyboard.step")*Math.PI/180,G.key==="."||G.key==="<"?ee-=_:G.key!==","&&G.key!==">"||(ee+=_)),this.evalVisProp("bank.pointer.enabled")&&Q!==0&&G.key==null&&(ee+=Q*((J-Z)/this.board.canvasHeight*this.evalVisProp("bank.pointer.speed")),G.preventDefault()),ee=this.evalVisProp("bank.continuous")?math.A.wrap(ee,Z,J):math.A.clamp(ee,Z,J),this.bank_slide.setValue(ee),this.board.update()),this},_trackballHandler:function(G){var _,J,Z,Q=this.board.getMousePosition(G);return Z=new base_coords.A(constants.A.COORDS_BY_USER,[this.llftCorner[0]+.5*this.size[0],this.llftCorner[1]+.5*this.size[1]],this.board),_=Q[0]-Z.scrCoords[1],J=Q[1]-Z.scrCoords[2],this._trackball={dx:G.movementX,dy:-G.movementY,x:_,y:-J},this.board.update(),this},pointerDownHandler:function(G){var _,J,Z;this._hasMoveAz=!1,this._hasMoveEl=!1,this._hasMoveBank=!1,this._hasMoveTrackball=!1,this.board.mode===this.board.BOARD_MODE_NONE&&(this.board._change3DView=!0,this.evalVisProp("trackball.enabled")?(_=this.evalVisProp("trackball.button"),J=this.evalVisProp("trackball.key"),_!==-1&&_!==G.button||!(J==="none"||J.indexOf("shift")>-1&&G.shiftKey||J.indexOf("ctrl")>-1&&G.ctrlKey)||(Z=this.evalVisProp("trackball.outside")?document:this.board.containerObj,env.A.addEvent(Z,"pointermove",this._trackballHandler,this),this._hasMoveTrackball=!0)):(this.evalVisProp("az.pointer.enabled")&&(_=this.evalVisProp("az.pointer.button"),J=this.evalVisProp("az.pointer.key"),_!==-1&&_!==G.button||!(J==="none"||J.indexOf("shift")>-1&&G.shiftKey||J.indexOf("ctrl")>-1&&G.ctrlKey)||(Z=this.evalVisProp("az.pointer.outside")?document:this.board.containerObj,env.A.addEvent(Z,"pointermove",this._azEventHandler,this),this._hasMoveAz=!0)),this.evalVisProp("el.pointer.enabled")&&(_=this.evalVisProp("el.pointer.button"),J=this.evalVisProp("el.pointer.key"),_!==-1&&_!==G.button||!(J==="none"||J.indexOf("shift")>-1&&G.shiftKey||J.indexOf("ctrl")>-1&&G.ctrlKey)||(Z=this.evalVisProp("el.pointer.outside")?document:this.board.containerObj,env.A.addEvent(Z,"pointermove",this._elEventHandler,this),this._hasMoveEl=!0)),this.evalVisProp("bank.pointer.enabled")&&(_=this.evalVisProp("bank.pointer.button"),J=this.evalVisProp("bank.pointer.key"),_!==-1&&_!==G.button||!(J==="none"||J.indexOf("shift")>-1&&G.shiftKey||J.indexOf("ctrl")>-1&&G.ctrlKey)||(Z=this.evalVisProp("bank.pointer.outside")?document:this.board.containerObj,env.A.addEvent(Z,"wheel",this._bankEventHandler,this,{passive:!1}),this._hasMoveBank=!0))),env.A.addEvent(document,"pointerup",this.pointerUpHandler,this))},pointerUpHandler:function(G){var _;this._hasMoveAz&&(_=this.evalVisProp("az.pointer.outside")?document:this.board.containerObj,env.A.removeEvent(_,"pointermove",this._azEventHandler,this),this._hasMoveAz=!1),this._hasMoveEl&&(_=this.evalVisProp("el.pointer.outside")?document:this.board.containerObj,env.A.removeEvent(_,"pointermove",this._elEventHandler,this),this._hasMoveEl=!1),this._hasMoveBank&&(_=this.evalVisProp("bank.pointer.outside")?document:this.board.containerObj,env.A.removeEvent(_,"wheel",this._bankEventHandler,this),this._hasMoveBank=!1),this._hasMoveTrackball&&(_=this.evalVisProp("trackball.outside")?document:this.board.containerObj,env.A.removeEvent(_,"pointermove",this._trackballHandler,this),this._hasMoveTrackball=!1),env.A.removeEvent(document,"pointerup",this.pointerUpHandler,this),this.board._change3DView=!1}}),jxg.A.createView3D=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue,de=_[0],pe=_[1];return Q=utils_type.A.copyAttributes(J,G.options,"view3d"),(Z=new jxg.A.View3D(G,_,Q)).defaultAxes=Z.create("axes3d",[],Q),ie=de[0],re=de[1],oe=pe[0],se=pe[1],(ee=utils_type.A.copyAttributes(Q,G.options,"view3d","az","slider")).name="az",(te=utils_type.A.copyAttributes(Q,G.options,"view3d","el","slider")).name="el",(ne=utils_type.A.copyAttributes(Q,G.options,"view3d","bank","slider")).name="bank",ue=utils_type.A.evaluate(ee.point1.pos),ae=utils_type.A.isArray(ue)?ue:[ie-1,re-2],ue=utils_type.A.evaluate(ee.point2.pos),le=utils_type.A.isArray(ue)?ue:[ie+oe+1,re-2],Z.az_slide=G.create("slider",[ae,le,[utils_type.A.evaluate(ee.min),utils_type.A.evaluate(ee.start),utils_type.A.evaluate(ee.max)]],ee),Z.inherits.push(Z.az_slide),Z.az_slide.elType="view3d_slider",ue=utils_type.A.evaluate(te.point1.pos),ae=utils_type.A.isArray(ue)?ue:[ie-1,re],ue=utils_type.A.evaluate(te.point2.pos),le=utils_type.A.isArray(ue)?ue:[ie-1,re+se],Z.el_slide=G.create("slider",[ae,le,[utils_type.A.evaluate(te.min),utils_type.A.evaluate(te.start),utils_type.A.evaluate(te.max)]],te),Z.inherits.push(Z.el_slide),Z.el_slide.elType="view3d_slider",ue=utils_type.A.evaluate(ne.point1.pos),ae=utils_type.A.isArray(ue)?ue:[ie-1,re+se+2],ue=utils_type.A.evaluate(ne.point2.pos),le=utils_type.A.isArray(ue)?ue:[ie+oe+1,re+se+2],Z.bank_slide=G.create("slider",[ae,le,[utils_type.A.evaluate(ne.min),utils_type.A.evaluate(ne.start),utils_type.A.evaluate(ne.max)]],ne),Z.inherits.push(Z.bank_slide),Z.bank_slide.elType="view3d_slider",Z.board.infobox.visProp=utils_type.A.merge(Z.board.infobox.visProp,Q.infobox),Z.board.highlightInfobox=function(fe,_e,ye){var be,Ae,Ce,Ee,Re,Te,Me="",Ne=ye.board,Le=null;for(this.mode===this.BOARD_MODE_DRAG&&(Me=Z.isVerticalDrag()?'<span style="color:black; font-size:200%"> &nbsp;</span>':'<span style="color:black; font-size:200%"> &nbsp;</span>'),Ae=0;Ae<ye.parents.length&&!(Le=Ne.objects[ye.parents[Ae]]).is3D;Ae++);if(Le&&utils_type.A.exists(Le.element2D)){if(Ee=[1,0,0,Le.coords[3]],Z._w0=math.A.innerProduct(Z.matrix3D[0],Ee,4),Ce=Z.project2DTo3DPlane(Le.element2D,[1,0,0,1],Ee),!Z.isInCube(Ce))return void Z.board.highlightCustomInfobox("",Le);be=Le.evalVisProp("infoboxdigits"),Te=Z.board.infobox,Re=be==="auto"?Te.useLocale()?[Me,"(",Te.formatNumberLocale(Le.X())," | ",Te.formatNumberLocale(Le.Y())," | ",Te.formatNumberLocale(Le.Z()),")"]:[Me,"(",utils_type.A.autoDigits(Le.X())," | ",utils_type.A.autoDigits(Le.Y())," | ",utils_type.A.autoDigits(Le.Z()),")"]:Te.useLocale()?[Me,"(",Te.formatNumberLocale(Le.X(),be)," | ",Te.formatNumberLocale(Le.Y(),be)," | ",Te.formatNumberLocale(Le.Z(),be),")"]:[Me,"(",utils_type.A.toFixed(Le.X(),be)," | ",utils_type.A.toFixed(Le.Y(),be)," | ",utils_type.A.toFixed(Le.Z(),be),")"],Z.board.highlightCustomInfobox(Re.join(""),Le)}else Z.board.highlightCustomInfobox("("+fe+", "+_e+")",ye)},Z.BOARD_MODE_NONE=0,env.A.addEvent(G.containerObj,"keydown",function(fe){var _e,ye=!1;!Z.evalVisProp("el.keyboard.enabled")||fe.key!=="ArrowUp"&&fe.key!=="ArrowDown"||((_e=Z.evalVisProp("el.keyboard.key"))==="none"||_e.indexOf("shift")>-1&&fe.shiftKey||_e.indexOf("ctrl")>-1&&fe.ctrlKey)&&(Z._elEventHandler(fe),ye=!0),!Z.evalVisProp("az.keyboard.enabled")||fe.key!=="ArrowLeft"&&fe.key!=="ArrowRight"||((_e=Z.evalVisProp("az.keyboard.key"))==="none"||_e.indexOf("shift")>-1&&fe.shiftKey||_e.indexOf("ctrl")>-1&&fe.ctrlKey)&&(Z._azEventHandler(fe),ye=!0),!Z.evalVisProp("bank.keyboard.enabled")||fe.key!==","&&fe.key!=="<"&&fe.key!=="."&&fe.key!==">"||((_e=Z.evalVisProp("bank.keyboard.key"))==="none"||_e.indexOf("shift")>-1&&fe.shiftKey||_e.indexOf("ctrl")>-1&&fe.ctrlKey)&&(Z._bankEventHandler(fe),ye=!0),fe.key==="PageUp"?(Z.nextView(),ye=!0):fe.key==="PageDown"&&(Z.previousView(),ye=!0),ye&&fe.preventDefault(),this.board._change3DView=!1},Z),env.A.addEvent(G.containerObj,"pointerdown",Z.pointerDownHandler,Z),Z.getAnglesFromSliders(),Z.matrix3DRot=Z.getRotationFromAngles(),Z.updateAngleSliderBounds(),Z.board.update(),Z},jxg.A.registerElement("view3d",jxg.A.createView3D),jxg.A.View3D,jxg.A.GeometryElement3D=function(G,_){this.elType=_,this.view=G,this.id=this.view.board.setId(this,_),this.element2D=null,this.is3D=!0,this.zIndex=0,this.view.objects[this.id]=this,this.name!==""&&(this.view.elementsByName[this.name]=this)},jxg.A.extend(jxg.A.GeometryElement3D.prototype,{setAttr2D:function(G){var _=G;return _.name=this.name,_.element3d=this,_.id=null,_},setAttribute:function(G){var _,J,Z,Q,ee,te={};for(_=0;_<arguments.length;_++)Q=arguments[_],utils_type.A.isString(Q)?(ee=Q.split(":"),te[utils_type.A.trim(ee[0])]=utils_type.A.trim(ee[1])):utils_type.A.isArray(Q)?te[Q[0]]=Q[1]:jxg.A.extend(te,Q);for(_ in te)if(te.hasOwnProperty(_))switch(J=_.replace(/\s+/g,"").toLowerCase(),Z=te[_],J){case"numberpointshigh":case"stepsu":case"stepsv":utils_type.A.exists(this.visProp[J])&&(!jxg.A.Validator[J]||jxg.A.Validator[J]&&jxg.A.Validator[J](Z)||jxg.A.Validator[J]&&utils_type.A.isFunction(Z)&&jxg.A.Validator[J](Z()))&&(Z=(!Z.toLowerCase||Z.toLowerCase()!=="false")&&Z,this._set(J,Z));break;default:utils_type.A.exists(this.element2D)&&this.element2D.setAttribute(te)}},getAttribute:function(G){var _;switch(G=G.toLowerCase()){case"numberpointshigh":case"stepsu":case"stepsv":_=this.visProp[G];break;default:utils_type.A.exists(this.element2D)&&(_=this.element2D.getAttribute(G))}return _},getAttributes:function(){var G,_,J={},Z=["numberpointshigh","stepsu","stepsv"],Q=Z.length;for(utils_type.A.exists(this.element2D)&&(J=utils_type.A.merge(this.element2D.getAttributes())),G=0;G<Q;G++)_=Z[G],utils_type.A.exists(this.visProp[_])&&(J[_]=this.visProp[_]);return J},addTransformGeneric:function(G,_){var J,Z=utils_type.A.isArray(_)?_:[_],Q=Z.length;for(this.transformations.length===0&&(this.baseElement=G),J=0;J<Q;J++)this.transformations.push(Z[J]);return this},setPosition2D:function(G){},projectCoords:function(G,_){},remove:function(){}}),jxg.A.GeometryElement3D,jxg.A.createAxes3D=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue,de,pe,fe,_e,ye,be,Ae=_[0],Ce=["x","y","z"],Ee="Axis",Re=["Rear","Front"],Te=[0,0,0],Me=[0,0,0],Ne={};if(utils_type.A.exists(Ae.bbox3D))for(Z=0;Z<Ce.length;Z++)Te[Z]=Ae.bbox3D[Z][0],Me[Z]=Ae.bbox3D[Z][1];else for(Z=0;Z<Ce.length;Z++)Te[Z]=_[1][Z],Me[Z]=_[2][1];for(re=(ie=utils_type.A.copyAttributes(J,G.options,"axes3d")).axesposition,Z=0;Z<Ce.length;Z++)_e=(oe=Ce[Z])+Ee,re==="center"?(ae=[0,0,0],(le=[0,0,0])[Z]=Me[Z],Ne[_e]=Ae.create("axis3d",[ae,le],ie[_e.toLowerCase()]),Ne[_e].view=Ae):re==="border"&&(_e+="Border",ae=Te.slice(),le=Me.slice(),oe==="z"?(ae[1]=Me[1],le[0]=Te[0]):oe==="x"?(ae=[Te[0],Me[1],Te[2]],le=[Me[0],Me[1],Te[2]]):(ae=[Me[0],Te[1],Te[2]],le=[Me[0],Me[1],Te[2]]),le[Z]=Me[Z],Ne[_e]=Ae.create("axis3d",[ae,le],ie[_e.toLowerCase()]),Ne[_e].view=Ae,(be=ie[_e.toLowerCase()].ticks3d).element3d=!0,se=Me[Z]-Te[Z],Ne[_e+"Ticks"]=oe==="x"?Ae.create("ticks3d",[ae,[1,0,0],se,[0,1,0]],be):oe==="y"?Ae.create("ticks3d",[ae,[0,1,0],se,[1,0,0]],be):Ae.create("ticks3d",[ae,[0,0,1],se,[0,1,0]],be),Ne[_e+"Ticks"].view=Ae);for(re==="center"?(Ne.O=Ae.create("intersection",[Ne[Ce[0]+Ee],Ne[Ce[1]+Ee]],{name:"",visible:!1,withLabel:!1}),Ne.O.view=Ae):Ne.O=null,Z=0;Z<Ce.length;Z++)for(te=(Z+1)%3,ne=(Z+2)%3,oe=Ce[Z],Q=0;Q<Re.length;Q++)_e=oe+"Plane"+Re[Q],(ae=[0,0,0])[Z]=Q===0?Te[Z]:Me[Z],de=[0,0,0],(ue=[0,0,0])[te]=1,de[ne]=1,pe=[Te[te],Me[te]],fe=[Te[ne],Me[ne]],ie=utils_type.A.copyAttributes(J,G.options,"axes3d",_e),Ne[_e]=Ae.create("plane3d",[ae,ue,de,pe,fe],ie),Ne[_e].elType="axisplane3d";for(Z=0;Z<Ce.length;Z++)for(oe=Ce[Z],Q=0;Q<Re.length;Q++)for(ee=1;ee<=2;ee++)_e=oe+"Plane"+Re[Q]+Ce[te=(Z+ee)%3].toUpperCase()+"Axis",ye=oe+"Plane"+Re[Q],(ae=[0,0,0])[Z]=(le=[0,0,0])[Z]=Q===0?Te[Z]:Me[Z],ae[te]=Te[te],le[te]=Me[te],ie=utils_type.A.copyAttributes(J,G.options,"axes3d",_e),Ne[_e]=Ae.create("axis3d",[ae,le],ie),Ne[_e].view=Ae,Ne[ye].addChild(Ne[_e]),Ne[ye].element2D.inherits.push(Ne[_e]);return Ne},jxg.A.registerElement("axes3d",jxg.A.createAxes3D),jxg.A.createAxis3D=function(G,_,J){var Z,Q,ee,te,ne,ie,re=_[0],oe=_[1],se=_[2];return(Z=utils_type.A.copyAttributes(J.point1,G.options,"axis3d","point1")).element3d=!0,Q=re.create("point",[(te=oe[0],ne=oe[1],ie=oe[2],function(){return re.project3DTo2D(te,ne,ie)[1]}),(function(ae,le,ue){return function(){return re.project3DTo2D(ae,le,ue)[2]}})(oe[0],oe[1],oe[2])],Z),(Z=utils_type.A.copyAttributes(J.point2,G.options,"axis3d","point2")).element3d=!0,ee=re.create("point",[(function(ae,le,ue){return function(){return re.project3DTo2D(ae,le,ue)[1]}})(se[0],se[1],se[2]),(function(ae,le,ue){return function(){return re.project3DTo2D(ae,le,ue)[2]}})(se[0],se[1],se[2])],Z),(Z=utils_type.A.copyAttributes(J,G.options,"axis3d")).element3d=!0,re.create("arrow",[Q,ee],Z)},jxg.A.registerElement("axis3d",jxg.A.createAxis3D),jxg.A.createMesh3D=function(G,_,J){var Z,Q,ee=_[0];return(Z=utils_type.A.copyAttributes(J,G.options,"mesh3d")).element3d=!0,(Q=ee.create("curve",[[],[]],Z)).point=_[1],Q.direction1=_[2],Q.direction2=_[3],Q.range1=_[4],Q.range2=_[5],Q.updateDataArray=function(){var te,ne,ie,re,oe=utils_type.A.evaluate(this.range1),se=utils_type.A.evaluate(this.range2),ae=oe[0],le=oe[1],ue=se[0],de=se[1],pe=[0,0,0],fe=[0,0,0],_e=this.evalVisProp("stepwidthu"),ye=this.evalVisProp("stepwidthv"),be=[0,0,0];if(this.dataX=[],this.dataY=[],utils_type.A.isFunction(this.point))be=this.point();else if(utils_type.A.isPoint3D(this.point))be=this.point.coords;else for(re=0;re<this.point.length;re++)be[re]=utils_type.A.evaluate(this.point[re]);if(utils_type.A.isFunction(this.direction1))pe=utils_type.A.evaluate(this.direction1);else for(re=0;re<this.direction1.length;re++)pe[re]=utils_type.A.evaluate(this.direction1[re]);if(utils_type.A.isFunction(this.direction2))fe=utils_type.A.evaluate(this.direction2);else for(re=0;re<this.direction2.length;re++)fe[re]=utils_type.A.evaluate(this.direction2[re]);for(be.length===4&&(be=be.slice(1)),pe.length===4&&(pe=pe.slice(1)),fe.length===4&&(fe=fe.slice(1)),te=jxg.A.Math.norm(pe,3),ne=jxg.A.Math.norm(fe,3),re=0;re<3;re++)pe[re]/=te,fe[re]/=ne;ie=ee.getMesh([function(Ae,Ce){return be[0]+Ae*pe[0]+Ce*fe[0]},function(Ae,Ce){return be[1]+Ae*pe[1]+Ce*fe[1]},function(Ae,Ce){return be[2]+Ae*pe[2]+Ce*fe[2]}],[Math.ceil(ae),Math.floor(le),(Math.ceil(le)-Math.floor(ae))/_e],[Math.ceil(ue),Math.floor(de),(Math.ceil(de)-Math.floor(ue))/ye]),this.dataX=ie[0],this.dataY=ie[1]},Q},jxg.A.registerElement("mesh3d",jxg.A.createMesh3D),jxg.A.Circle3D=function(G,_,J,Z,Q){var ee,te;this.constructor(G.board,Q,constants.A.OBJECT_TYPE_CIRCLE3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(G,"circle3d"),this.center=this.board.select(_),this.normalFunc=J,this.normal=[0,0,0,0],this.curve,this.frame1,this.frame2,utils_type.A.exists(this.center._is_new)?(this.addChild(this.center),delete this.center._is_new):this.center.addChild(this),this.updateRadius=utils_type.A.createFunction(Z,this.board),this.addParentsFromJCFunctions([this.updateRadius]),this.updateNormal(),this.frame1=math.A.crossProduct(this.normal.slice(1),[1,0,0]),this.frame1.unshift(0),(ee=math.A.crossProduct(this.normal.slice(1),[-.5,.8660254037844386,0])).unshift(0),math.A.norm(ee)>math.A.norm(this.frame1)&&(this.frame1=ee),this.frame2=math.A.crossProduct(this.normal.slice(1),this.frame1.slice(1)),this.frame2.unshift(0),this.normalizeFrame(),te=this,this.curve=G.create("curve3d",[function(ne){var ie=te.Radius(),re=Math.sin(ne),oe=Math.cos(ne);return[te.center.coords[1]+ie*(oe*te.frame1[1]+re*te.frame2[1]),te.center.coords[2]+ie*(oe*te.frame1[2]+re*te.frame2[2]),te.center.coords[3]+ie*(oe*te.frame1[3]+re*te.frame2[3])]},[0,2*Math.PI]],Q)},jxg.A.Circle3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Circle3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Circle3D.prototype,{update:function(){return this.needsUpdate&&(this.updateNormal().updateFrame(),this.curve.visProp.visible=!isNaN(this.Radius())),this},updateRenderer:function(){return this.needsUpdate=!1,this},setRadius:function(G){return this.updateRadius=utils_type.A.createFunction(G,this.board),this.addParentsFromJCFunctions([this.updateRadius]),this.board.update(),this},Radius:function(G){return utils_type.A.exists(G)?(this.setRadius(G),this.Radius()):Math.abs(this.updateRadius())},normalizeFrame:function(){var G,_=math.A.norm(this.frame1),J=math.A.norm(this.frame2);for(G=0;G<4;G++)this.frame1[G]/=_,this.frame2[G]/=J;return this},updateNormal:function(){var G,_;if(this.normal=utils_type.A.evaluate(this.normalFunc),_=math.A.norm(this.normal),Math.abs(_)>1e-12)for(G=0;G<4;G++)this.normal[G]/=_;return this},updateFrame:function(){return this.frame1=math.A.crossProduct(this.frame2.slice(1),this.normal.slice(1)),this.frame1.unshift(0),this.frame2=math.A.crossProduct(this.normal.slice(1),this.frame1.slice(1)),this.frame2.unshift(0),this.normalizeFrame(),this},projectCoords:function(G,_){return this.curve.projectCoords(G,_)}}),jxg.A.createCircle3D=function(G,_,J){var Z,Q=_[0],ee=utils_type.A.copyAttributes(J,G.options,"circle3d"),te=utils_type.A.providePoints3D(Q,[_[1]],J,"circle3d",["point"])[0],ne=_[2],ie=_[3];return(Z=new jxg.A.Circle3D(Q,te,ne,ie,ee)).curve.addParents([Z]),Z.addChild(Z.curve),Z.update(),Z},jxg.A.registerElement("circle3d",jxg.A.createCircle3D),jxg.A.createIntersectionCircle3D=function(G,_,J){var Z,Q,ee,te=_[0],ne=_[1],ie=_[2],re=utils_type.A.copyAttributes(J,G.options,"intersectioncircle3d");ee=geometry.A.intersectionFunction3D(te,ne,ie),Q=te.create("point3d",ee[0],{visible:!1}),Z=te.create("circle3d",[Q,ee[1],ee[2]],re);try{ne.addChild(Z),ie.addChild(Z)}catch{throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof _[1]+"' and '"+typeof _[2]+"'.")}return Z.type=constants.A.OBJECT_TYPE_INTERSECTION_CIRCLE3D,Z.elType="intersectioncircle3d",Z.setParents([ne.id,ie.id]),Z},jxg.A.registerElement("intersectioncircle3d",jxg.A.createIntersectionCircle3D),jxg.A.Point3D=function(G,_,J,Z){this.constructor(G.board,Z,constants.A.OBJECT_TYPE_POINT3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(G,"point3d"),this.board.finalizeAdding(this),this.coords=[0,0,0,0],this.initialCoords=[0,0,0,0],this.F=_,this.slide=J,this.position=[],this.movePath=[],this.moveCallback=null,this.moveInterval=null,this._c2d=null,this.methodMap=utils_type.A.deepCopy(this.methodMap,{})},jxg.A.Point3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Point3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Point3D.prototype,{X:function(){return this.coords[1]},Y:function(){return this.coords[2]},Z:function(){return this.coords[3]},W:function(){return this.coords[0]},updateCoords:function(){var G,_=0;if(utils_type.A.isFunction(this.F))this.coords=utils_type.A.evaluate(this.F),this.coords.length===3&&this.coords.unshift(1);else for(this.F.length===3&&(this.coords[0]=1,_=1),G=0;G<this.F.length;G++)utils_type.A.isFunction(this.F[G])&&(this.coords[_+G]=utils_type.A.evaluate(this.F[G]));return this},initCoords:function(){var G,_=0;if(utils_type.A.isFunction(this.F))this.coords=utils_type.A.evaluate(this.F),this.coords.length===3&&this.coords.unshift(1);else for(this.F.length===3&&(this.coords[0]=1,_=1),G=0;G<this.F.length;G++)this.coords[_+G]=utils_type.A.evaluate(this.F[G]);return this.initialCoords=this.coords.slice(),this},normalizeCoords:function(){return Math.abs(this.coords[0])>1e-14&&(this.coords[1]/=this.coords[0],this.coords[2]/=this.coords[0],this.coords[3]/=this.coords[0],this.coords[0]=1),this},setPosition:function(G,_){var J=this.coords;return G.length===3?(J[0]=1,J[1]=G[0],J[2]=G[1],J[3]=G[2]):(J[0]=G[0],J[1]=G[1],J[2]=G[2],J[3]=G[2],this.normalizeCoords()),this},addTransform:function(G,_){return this.addTransformGeneric(G,_),this},updateTransform:function(){var G,_;if(this.transformations.length===0||this.baseElement===null)return this;for(G=this===this.baseElement?this.initialCoords:this.baseElement.coords,_=0;_<this.transformations.length;_++)this.transformations[_].update(),G=math.A.matVecMult(this.transformations[_].matrix,G);return this.coords=G,this},update:function(G){var _,J,Z;return this.element2D.draggable()&&geometry.A.distance(this._c2d,this.element2D.coords.usrCoords)!==0?(this.view.isVerticalDrag()?_=this.view.project2DTo3DVertical(this.element2D,this.coords):(J=[1,0,0,this.coords[3]],_=this.view.project2DTo3DPlane(this.element2D,[1,0,0,1],J)),_[0]!==0&&(Z=this.view.project3DToCube(_),this.coords=Z[0],Z[1]&&this.element2D.coords.setCoordinates(constants.A.COORDS_BY_USER,this.view.project3DTo2D(this.coords)),this.slide&&(this.coords=this.slide.projectCoords([1,this.X(),this.Y(),this.Z()],this.position),this.element2D.coords.setCoordinates(constants.A.COORDS_BY_USER,this.view.project3DTo2D(this.coords))))):(this.updateCoords().updateTransform(),this.slide&&(this.coords=this.slide.projectCoords([1,this.X(),this.Y(),this.Z()],this.position)),_=this.coords,this.element2D.coords.setCoordinates(constants.A.COORDS_BY_USER,this.view.project3DTo2D(_)),this.zIndex=math.A.innerProduct(this.view.matrix3DRotShift[3],_)),this._c2d=this.element2D.coords.usrCoords.slice(),this},updateRenderer:function(){return this.needsUpdate=!1,this},testIfFinite:function(){return Math.abs(this.coords[0])>1e-12},distance:function(G){var _=this.coords,J=G.coords;return _[0]*_[0]>1e-12&&J[0]*J[0]>1e-12?math.A.hypot(J[1]-_[1],J[2]-_[2],J[3]-_[3]):Number.POSITIVE_INFINITY},moveTo:function(G,_,J){J=J||{};var Z,Q,ee=Math.ceil(_/this.board.attr.animationdelay),te=G[0],ne=G[1],ie=G[2],re=this.coords[1]-te,oe=this.coords[2]-ne,se=this.coords[3]-ie,ae=()=>{};if(J.callback&&(ae=J.callback),Q=function(le){var ue=le/ee;if(J.effect){if(J.effect==="<>")return Math.pow(Math.sin(ue*Math.PI/2),2);if(J.effect==="<")return ue*ue*ue;if(J.effect===">")return 1-Math.pow(1-ue,3);if(J.effect==="==")return le/ee;throw new Error("valid effects are '==', '<>', '>', and '<'.")}return le/ee},!utils_type.A.exists(_)||_===0)return this.setPosition([te,ne,ie],!0),this.board.update(this);if(!utils_type.A.exists(J.callback)&&Math.abs(re)<math.A.eps&&Math.abs(oe)<math.A.eps&&Math.abs(se)<math.A.eps)return this;for(this.animationPath=[],Z=ee;Z>=0;Z--)this.animationPath[ee-Z]=[te+re*Q(Z),ne+oe*Q(Z),ie+se*Q(Z)];return this.moveAlong(this.animationPath,_,{callback:ae})},moveAlong:function(G,_,J){let Z=_/G.length;if(utils_type.A.isObject(J)&&"callback"in J&&(this.moveCallback=J.callback),!(this.movePath.length>0))return this.movePath=G,new Promise((Q,ee)=>{this.moveInterval=setInterval(()=>{if(this.movePath.length>0){let te=this.movePath.shift();this.setPosition(te,!0),this.board.update(this)}this.movePath.length===0&&(clearInterval(this.moveInterval),Q(),utils_type.A.isFunction(this.moveCallback)&&this.moveCallback())},Z)});this.movePath=G},__evt__update3D:function(G){}}),jxg.A.createPoint3D=function(G,_,J){var Z,Q,ee,te,ne,ie=_[0],re=null,oe=null;if(ee=_.length>2&&utils_type.A.exists(_[_.length-1].is3D)&&!utils_type.A.isTransformationOrArray(_[_.length-1])?_.pop():null,_.length===2)Q=_[1];else if(_.length===3&&utils_type.A.isPoint3D(_[1])&&utils_type.A.isTransformationOrArray(_[2]))Q=[0,0,0],re=_[1],oe=_[2];else if(_.length===4)Q=_.slice(1);else{if(_.length!==5)throw new Error("JSXGraph: Can't create point3d with parent types '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [[x,y,z]], [x,y,z], or [[x,y,z], slide], () => [x, y, z], or [point, transformation(s)]`);Q=_.slice(1)}return Z=utils_type.A.copyAttributes(J,G.options,"point3d"),(ne=new jxg.A.Point3D(ie,Q,ee,Z)).initCoords(),re!==null&&oe!==null&&ne.addTransform(re,oe),te=ie.project3DTo2D(ne.coords),Z=ne.setAttr2D(Z),ne.element2D=ie.create("point",te,Z),ne.element2D.view=ie,ne.addChild(ne.element2D),ne.inherits.push(ne.element2D),ne.element2D.setParents(ne),ne.slide&&(ne.slide.addChild(ne),ne.setParents(ne.slide)),re&&ne.setParents(re),ne._c2d=ne.element2D.coords.usrCoords.slice(),ne},jxg.A.registerElement("point3d",jxg.A.createPoint3D),jxg.A.Curve3D=function(G,_,J,Z,Q,ee,te){this.constructor(G.board,te,constants.A.OBJECT_TYPE_CURVE3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(G,"curve3d"),this.board.finalizeAdding(this),this._F=_,this._X=J,this._Y=Z,this._Z=Q,this.points=[],this.numberPoints=0,this.dataX=null,this.dataY=null,this.dataZ=null,this._F!==null?(this._X=function(ne){return this._F(ne)[0]},this._Y=function(ne){return this._F(ne)[1]},this._Z=function(ne){return this._F(ne)[2]}):utils_type.A.isFunction(this._X)?this._F=function(ne){return[this._X(ne),this._Y(ne),this._Z(ne)]}:this._F=null,this.range=ee,this.methodMap=utils_type.A.deepCopy(this.methodMap,{})},jxg.A.Curve3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Curve3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Curve3D.prototype,{updateCoords:function(){var G,_,J,Z,Q,ee,te=this.evalVisProp("numberpointshigh"),ne=[1,0,0,0];if(this.points=[],utils_type.A.exists(this.dataX))for(te=this.dataX.length,Q=0;Q<te;Q++)this.points.push([1,this.dataX[Q],this.dataY[Q],this.dataZ[Q]]);else if(utils_type.A.isArray(this._X))for(te=this._X.length,Q=0;Q<te;Q++)this.points.push([1,this._X[Q],this._Y[Q],this._Z[Q]]);else for(G=utils_type.A.evaluate(this.range),_=utils_type.A.evaluate(G[0]),Z=((J=utils_type.A.evaluate(G[1]))-_)/(te-1),ee=0,Q=_;ee<te&&Q<=J;ee++,Q+=Z)(ne=this.F(Q)).unshift(1),this.points.push(ne);return this.numberPoints=this.points.length,this},evalF:function(G){var _,J,Z=[0,0,0,0];if(this.transformations.length===0||!utils_type.A.exists(this.baseElement))return Z=utils_type.A.exists(this._F)?this._F(G):[this._X[G],this._Y[G],this._Z[G]];for(_=this.transformations,J=0;J<_.length;J++)_[J].update();for(Z.length===3&&Z.unshift(1),(Z=this===this.baseElement?utils_type.A.exists(this._F)?this._F(G):[this._X[G],this._Y[G],this._Z[G]]:this.baseElement.evalF(G)).unshift(1),Z=math.A.matVecMult(_[0].matrix,Z),J=1;J<_.length;J++)Z=math.A.matVecMult(_[J].matrix,Z);return Z.slice(1)},F:function(G){return this.evalF(G)},X:function(G){return this.evalF(G)[0]},Y:function(G){return this.evalF(G)[1]},Z:function(G){return this.evalF(G)[2]},updateDataArray2D:function(){var G,_,J=[],Z=[],Q=this.points.length;for(G=0;G<Q;G++)_=this.view.project3DTo2D(this.points[G]),J.push(_[1]),Z.push(_[2]);return{X:J,Y:Z}},addTransform:function(G,_){return this.addTransformGeneric(G,_),this},updateTransform:function(){var G,_,J,Z,Q;if(this.transformations.length===0||this.baseElement===null||utils_type.A.exists(this._F))return this;for(G=this.transformations,J=0;J<G.length;J++)G[J].update();for(Q=this.baseElement.numberPoints,J=0;J<Q;J++){for(_=this===this.baseElement?this.points[J]:this.baseElement.points[J],Z=0;Z<G.length;Z++)_=math.A.matVecMult(G[Z].matrix,_);this.points[J]=_}return this.numberPoints=Q,this},updateDataArray:function(){},update:function(){return this.needsUpdate&&(this.updateDataArray(),this.updateCoords().updateTransform()),this},updateRenderer:function(){return this.needsUpdate=!1,this},projectCoords:function(G,_){return geometry.A.projectCoordsToParametric(G,this,1,_)}}),jxg.A.createCurve3D=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se=_[0],ae=null,le=null;return _.length===3?utils_type.A.isTransformationOrArray(_[2])&&_[1].type===constants.A.OBJECT_TYPE_CURVE3D?(ae=_[1],le=_[2],Z=null,Q=[],ee=[],te=[]):(Z=_[1],ne=_[2],Q=null,ee=null,te=null):_.length===2&&utils_type.A.isArray(_[1])?(Q=(oe=math.A.transpose(_[1]))[0],ee=oe[1],te=oe[2],Z=null):(Q=_[1],ee=_[2],te=_[3],ne=_[4],Z=null),ie=utils_type.A.copyAttributes(J,G.options,"curve3d"),ie=(re=new jxg.A.Curve3D(se,Z,Q,ee,te,ne,ie)).setAttr2D(ie),re.element2D=se.create("curve",[[],[]],ie),re.element2D.view=se,ae!==null&&(re.addTransform(ae,le),re.addParents(ae)),re.element2D.updateDataArray=function(){var ue=re.updateDataArray2D();this.dataX=ue.X,this.dataY=ue.Y},re.addChild(re.element2D),re.inherits.push(re.element2D),re.element2D.setParents(re),re.element2D.prepareUpdate().update(),G.isSuspendedUpdate||re.element2D.updateVisibility().updateRenderer(),re},jxg.A.registerElement("curve3d",jxg.A.createCurve3D),jxg.A.createVectorfield3D=function(G,_,J){var Z,Q,ee=_[0];if(!(_.length>=5&&(utils_type.A.isArray(_[1])||utils_type.A.isFunction(_[1])||utils_type.A.isString(_[1]))&&utils_type.A.isArray(_[2])&&_[1].length===3&&utils_type.A.isArray(_[3])&&_[2].length===3&&utils_type.A.isArray(_[4])&&_[3].length===3))throw new Error("JSXGraph: Can't create vector field 3D with parent types '"+typeof _[1]+"', '"+typeof _[2]+"', '"+typeof _[3]+"'.'"+typeof _[4]+"', ");return Q=utils_type.A.copyAttributes(J,G.options,"vectorfield3d"),(Z=ee.create("curve3d",[[],[],[]],Q)).setF=function(te,ne){var ie,re,oe;return utils_type.A.isArray(te)?(ie=utils_type.A.createFunction(te[0],this.board,ne),re=utils_type.A.createFunction(te[1],this.board,ne),oe=utils_type.A.createFunction(te[2],this.board,ne),this.F=function(se,ae,le){return[ie(se,ae,le),re(se,ae,le),oe(se,ae,le)]}):this.F=utils_type.A.createFunction(te,Z.board,ne),this},Z.setF(_[1],"x, y, z"),Z.xData=_[2],Z.yData=_[3],Z.zData=_[4],Z.updateDataArray=function(){var te,ne,ie,re,oe,se,ae,le,ue,de,pe,fe,_e,ye,be,Ae,Ce,Ee=this.evalVisProp("scale"),Re=[utils_type.A.evaluate(this.xData[0]),utils_type.A.evaluate(this.yData[0]),utils_type.A.evaluate(this.zData[0])],Te=[utils_type.A.evaluate(this.xData[1]),utils_type.A.evaluate(this.yData[1]),utils_type.A.evaluate(this.zData[1])],Me=[utils_type.A.evaluate(this.xData[2]),utils_type.A.evaluate(this.yData[2]),utils_type.A.evaluate(this.zData[2])],Ne=[(Me[0]-Re[0])/Te[0],(Me[1]-Re[1])/Te[1],(Me[2]-Re[2])/Te[2]],Le=this.evalVisProp("arrowhead.enabled");for(Le&&(_e=this.evalVisProp("arrowhead.size"),Ce=this.evalVisProp("arrowhead.angle"),ye=_e/G.unitX,be=_e/G.unitY,Ae=_e/Math.sqrt(G.unitX*G.unitY)),this.dataX=[],this.dataY=[],this.dataZ=[],ne=0,se=Re[0];ne<=Te[0];se+=Ne[0],ne++)for(ie=0,ae=Re[1];ie<=Te[1];ae+=Ne[1],ie++)for(te=0,le=Re[2];te<=Te[2];le+=Ne[2],te++)re=this.F(se,ae,le),(oe=math.A.norm(re))<Number.EPSILON||(re[0]*=Ee,re[1]*=Ee,re[2]*=Ee,utils_type.A.concat(this.dataX,[se,se+re[0],NaN]),utils_type.A.concat(this.dataY,[ae,ae+re[1],NaN]),utils_type.A.concat(this.dataZ,[le,le+re[2],NaN]),Le&&(oe*=Ee,ue=Math.atan2(re[1],re[0]),de=(fe=Math.asin(re[2]/oe))-Ce,pe=fe+Ce,utils_type.A.concat(this.dataX,[se+re[0]-ye*Math.cos(ue)*Math.cos(de),se+re[0],se+re[0]-ye*Math.cos(ue)*Math.cos(pe),NaN]),utils_type.A.concat(this.dataY,[ae+re[1]-be*Math.sin(ue)*Math.cos(de),ae+re[1],ae+re[1]-be*Math.sin(ue)*Math.cos(pe),NaN]),utils_type.A.concat(this.dataZ,[le+re[2]-Ae*Math.sin(pe),le+re[2],le+re[2]-Ae*Math.sin(de),NaN])))},Z.methodMap=utils_type.A.deepCopy(Z.methodMap,{setF:"setF"}),Z},jxg.A.registerElement("vectorfield3D",jxg.A.createVectorfield3D),jxg.A.Line3D=function(G,_,J,Z,Q){this.constructor(G.board,Q,constants.A.OBJECT_TYPE_LINE3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(G,"line3d"),this.point=_,this.direction=J,this.vec=[0,0,0,0],this.range=Z||[-1/0,1/0],this.point1=null,this.point2=null,this.board.finalizeAdding(this),this.methodMap=utils_type.A.deepCopy(this.methodMap,{})},jxg.A.Line3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Line3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Line3D.prototype,{updateCoords:function(){var G,_=0;if(utils_type.A.exists(this.direction.view)&&this.direction.type===constants.A.OBJECT_TYPE_LINE3D)this.vec=this.direction.vec.slice();else if(utils_type.A.isFunction(this.direction))this.vec=utils_type.A.evaluate(this.direction),this.vec.length===3&&this.vec.unshift(0);else for(this.direction.length===3&&(this.vec[0]=0,_=1),G=0;G<this.direction.length;G++)this.vec[_+G]=utils_type.A.evaluate(this.direction[G]);return this},getPointCoords:function(G){var _,J,Z;return _=this.point.coords,J=this.vec,Z=utils_type.A.evaluate(G),G=this.view.intersectionLineCube(_,J,Z),Math.abs(G)===1/0&&(G=0),[_[0]+J[0]*G,_[1]+J[1]*G,_[2]+J[2]*G,_[3]+J[3]*G]},addTransform:function(G,_){return this.point.addTransform(G.point,_),this.addTransformGeneric(G,_),this},updateTransform:function(){var G,_;if(this.transformations.length===0||this.baseElement===null)return this;for(G=this===this.baseElement?this.vec:this.baseElement.vec,_=0;_<this.transformations.length;_++)this.transformations[_].update(),G=math.A.matVecMult(this.transformations[_].matrix,G);return this.vec=G,this},update:function(){return this.needsUpdate&&this.updateCoords().updateTransform(),this},setPosition2D:function(G){var _,J;for(_=0;_<this.parents.length;_++)(J=this.view.select(this.parents[_])).elType==="point3d"&&J.element2D.draggable()&&G.applyOnce(J.element2D);this.endpoints[0].update(),this.endpoints[1].update()},updateRenderer:function(){return this.needsUpdate=!1,this},projectCoords:function(G,_){var J,Z=this.getPointCoords(0),Q=this.getPointCoords(1),ee=[Q[0]-Z[0],Q[1]-Z[1],Q[2]-Z[2]],te=[G[0]-Z[0],G[1]-Z[1],G[2]-Z[2]],ne=math.A.innerProduct(te,ee)/math.A.innerProduct(ee,ee),ie=Math.min(Math.max(ne,utils_type.A.evaluate(this.range[0])),utils_type.A.evaluate(this.range[1]));return J=this.getPointCoords(ie).slice(),_[0]=ie,J},updateZIndex:function(){var G=this.endpoints[0],_=this.endpoints[1],J=[1,G.X()+_.X(),G.Y()+_.Y(),G.Z()+_.Z()];return J[1]*=.5,J[2]*=.5,J[3]*=.5,this.zIndex=math.A.innerProduct(this.view.matrix3DRotShift[3],J),this}}),jxg.A.createLine3D=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae=_[0],le=null,ue=null;if(Z=utils_type.A.copyAttributes(J,G.options,"line3d"),_[1].type===constants.A.OBJECT_TYPE_LINE3D&&utils_type.A.isTransformationOrArray(_[2])&&(le=_[1],ue=_[2],Q=utils_type.A.providePoints3D(ae,[[0,0,0,0],[0,0,0,0]],J,"line3d",["point1","point2"])),le===null&&(utils_type.A.isPoint3D(_[2])||_.length===3&&(utils_type.A.isArray(_[2])||utils_type.A.isFunction(_[2]))))ie=utils_type.A.providePoints3D(ae,[_[1]],J,"line3d",["point1"])[0],re=utils_type.A.providePoints3D(ae,[_[2]],J,"line3d",["point2"])[0],te=function(){return[0,re.X()-ie.X(),re.Y()-ie.Y(),re.Z()-ie.Z()]},ne=[0,1],(se=new jxg.A.Line3D(ae,ie,te,ne,Z)).prepareUpdate().update(),(oe=utils_type.A.providePoints3D(ae,[[1,0,0,0],[1,0,0,0]],{visible:!0},"line3d",["point1","point2"]))[0].F=function(){var de=0;return se.evalVisProp("straightfirst")&&(de=-1/0),se.getPointCoords(de)},oe[1].F=function(){var de=1;return se.evalVisProp("straightlast")&&(de=1/0),se.getPointCoords(de)},oe[0].prepareUpdate().update(),oe[1].prepareUpdate().update(),(Z=se.setAttr2D(Z)).straightfirst=!1,Z.straightlast=!1,se.element2D=ae.create("segment",[oe[0].element2D,oe[1].element2D],Z),se.element2D.view=ae,se.endpoints=oe,se.addChild(oe[0]),se.addChild(oe[1]),se.addParents([ie,re]);else{if(le!==null)ee=utils_type.A.providePoints3D(ae,[[0,0,0]],J,"line3d",["point"])[0],te=[0,0,0,1e-4],ne=_[3]||[-1/0,1/0];else{if(!(utils_type.A.exists(_[2].view)&&_[2].type===constants.A.OBJECT_TYPE_LINE3D||utils_type.A.isFunction(_[2])||_[2].length===3||_[2].length===4))throw new Error("JSXGraph: Can't create line3d with parents of type '"+typeof _[1]+", "+typeof _[2]+", "+typeof _[3]+"'.");ee=utils_type.A.providePoints3D(ae,[_[1]],J,"line3d",["point"])[0],te=_[2],ne=_[3]}Q=utils_type.A.providePoints3D(ae,[[1,0,0,0],[1,0,0,0]],J,"line3d",["point1","point2"]),(se=new jxg.A.Line3D(ae,ee,te,ne,Z)).prepareUpdate().update(),Q[0].F=function(){return se.getPointCoords(utils_type.A.evaluate(se.range[0]))},Q[0].prepareUpdate().update(),ie=Q[0],Q[1].F=function(){return se.getPointCoords(utils_type.A.evaluate(se.range[1]))},Q[1].prepareUpdate().update(),re=Q[1],(Z=se.setAttr2D(Z)).straightfirst=!1,Z.straightlast=!1,se.element2D=ae.create("segment",[ie.element2D,re.element2D],Z),se.element2D.view=ae,se.endpoints=Q,se.addParents(ee),le!==null&&ue!==null&&(se.addTransform(le,ue),se.addParents(le))}return se.addChild(se.element2D),se.inherits.push(se.element2D),se.element2D.addParents(se),se.point1=ie,se.point2=re,se.point1._is_new?(se.addChild(se.point1),delete se.point1._is_new):se.point1.addChild(se),se.point2._is_new?(se.addChild(se.point2),delete se.point2._is_new):se.point2.addChild(se),utils_type.A.exists(ee)&&(ee._is_new?(se.addChild(ee),delete ee._is_new):ee.addChild(se)),se.update(),se.element2D.prepareUpdate().update().updateRenderer(),se},jxg.A.registerElement("line3d",jxg.A.createLine3D),jxg.A.Plane3D=function(G,_,J,Z,Q,ee,te){this.constructor(G.board,te,constants.A.OBJECT_TYPE_PLANE3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(G,"plane3d"),this.board.finalizeAdding(this),this.point=_,this.direction1=J,this.direction2=Q,this.range_u=Z||[-1/0,1/0],this.range_v=ee||[-1/0,1/0],this.vec1=[0,0,0,0],this.vec2=[0,0,0,0],this.mesh3d=null,this.normal=[0,0,0,0],this.d=0,this.updateCoords(),this.updateNormal(),this.methodMap=utils_type.A.deepCopy(this.methodMap,{})},jxg.A.Plane3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Plane3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Plane3D.prototype,{F:function(G,_){var J,Z,Q,ee,te;for(Z=this.vec1.slice(),Q=this.vec2.slice(),ee=math.A.norm(Z,3),te=math.A.norm(Q,3),J=0;J<3;J++)Z[J]/=ee,Q[J]/=te;return[this.point.X()+G*Z[0]+_*Q[0],this.point.Y()+G*Z[1]+_*Q[1],this.point.Z()+G*Z[2]+_*Q[2]]},X:function(G,_){return this.F(G,_)[0]},Y:function(G,_){return this.F(G,_)[1]},Z:function(G,_){return this.F(G,_)[2]},updateCoords:function(){var G,_;if(utils_type.A.exists(this.direction1.view)&&this.direction1.type===constants.A.OBJECT_TYPE_LINE3D)this.vec1=this.direction1.vec.slice();else if(utils_type.A.isFunction(this.direction1))this.vec1=utils_type.A.evaluate(this.direction1),this.vec1.length===3&&this.vec1.unshift(0);else for(_=0,this.direction1.length===3&&(this.vec1[0]=0,_=1),G=0;G<this.direction1.length;G++)this.vec1[_+G]=utils_type.A.evaluate(this.direction1[G]);if(utils_type.A.exists(this.direction2.view)&&this.direction2.type===constants.A.OBJECT_TYPE_LINE3D)this.vec2=this.direction2.vec.slice();else if(utils_type.A.isFunction(this.direction2))this.vec2=utils_type.A.evaluate(this.direction2),this.vec2.length===3&&this.vec2.unshift(0);else for(_=0,this.direction2.length===3&&(this.vec2[0]=0,_=1),G=0;G<this.direction2.length;G++)this.vec2[_+G]=utils_type.A.evaluate(this.direction2[G]);return this},updateNormal:function(){var G,_;if(this.needsUpdate,this.normal=math.A.crossProduct(this.vec1.slice(1),this.vec2.slice(1)),_=math.A.norm(this.normal),Math.abs(_)>math.A.eps*math.A.eps)for(G=0;G<3;G++)this.normal[G]/=_;return this.normal.unshift(0),this.d=math.A.innerProduct(this.point.coords,this.normal,4),this},updateDataArray:function(){var G,_,J,Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue=["xPlaneRear","yPlaneRear","zPlaneRear"],de=[],pe=[0,0,0],fe=[0,0,0],_e=[0,0,0],ye=[0,0,0],be=1e-12,Ae=this.view;if(this.dataX=[],this.dataY=[],this.updateNormal(),this.elType!=="axisplane3d"&&Ae.defaultAxes&&utils_type.A.evaluate(this.range_u[0])===-1/0&&utils_type.A.evaluate(this.range_u[1])===1/0&&utils_type.A.evaluate(this.range_v[0])===-1/0&&utils_type.A.evaluate(this.range_v[1])===1/0){for(re=0;re<ue.length;re++){if((ye=Ae.intersectionPlanePlane(this,Ae.defaultAxes[ue[re]]))[0]!==!1&&ye[1]!==!1){for(ie=0;ie<de.length&&!(geometry.A.distance(ye[0],de[ie][0],4)<be&&geometry.A.distance(ye[1],de[ie][1],4)<be||geometry.A.distance(ye[0],de[ie][1],4)<be&&geometry.A.distance(ye[1],de[ie][0],4)<be);ie++);ie===de.length&&de.push(ye.slice())}if((ye=[1,0,0,0])[re+1]=Ae.bbox3D[re][1],ne=math.A.innerProduct(ye,Ae.defaultAxes[ue[re]].normal,4),(ye=Ae.intersectionPlanePlane(this,Ae.defaultAxes[ue[re]],ne))[0]!==!1&&ye[1]!==!1){for(ie=0;ie<de.length&&!(geometry.A.distance(ye[0],de[ie][0],4)<be&&geometry.A.distance(ye[1],de[ie][1],4)<be||geometry.A.distance(ye[0],de[ie][1],4)<be&&geometry.A.distance(ye[1],de[ie][0],4)<be);ie++);ie===de.length&&de.push(ye.slice())}}if(de.length===0)return{X:this.dataX,Y:this.dataY};ae=0,ie=0;do{for((ye=de[ae][ie]).length===4&&(Q=Ae.project3DTo2D(ye),this.dataX.push(Q[1]),this.dataY.push(Q[2])),ie=(ie+1)%2,ye=de[ae][ie],le=ae,re=0;re<de.length;re++){if(re!==ae&&geometry.A.distance(ye,de[re][0])<be){ae=re,ie=0;break}if(re!==ae&&geometry.A.distance(ye,de[re][1])<be){ae=re,ie=1;break}}if(ae===le){console.log("Error plane3d update: did not find next",ae);break}}while(ae!==0);Q=Ae.project3DTo2D(de[0][0]),this.dataX.push(Q[1]),this.dataY.push(Q[2])}else{for(G=utils_type.A.evaluate(this.range_u[0]),_=utils_type.A.evaluate(this.range_u[1]),J=utils_type.A.evaluate(this.range_v[0]),Z=utils_type.A.evaluate(this.range_v[1]),_e=this.point.coords,pe=this.vec1.slice(),fe=this.vec2.slice(),ee=math.A.norm(pe,4),te=math.A.norm(fe,4),ie=1;ie<4;ie++)pe[ie]/=ee,fe[ie]/=te;for(re=0;re<4;re++){switch(re){case 0:oe=G,se=J;break;case 1:oe=_,se=J;break;case 2:oe=_,se=Z;break;case 3:oe=G,se=Z}for(ie=0;ie<4;ie++)ye[ie]=_e[ie]+oe*pe[ie]+se*fe[ie];Q=Ae.project3DTo2D(ye),this.dataX.push(Q[1]),this.dataY.push(Q[2])}this.dataX.push(this.dataX[0]),this.dataY.push(this.dataY[0])}return{X:this.dataX,Y:this.dataY}},addTransform:function(G,_){return this.addTransformGeneric(G,_),this.point.addTransform(G.point,_),this},updateTransform:function(){var G,_,J;if(this.transformations.length===0||this.baseElement===null)return this;for(this===this.baseElement?(G=this.vec1,_=this.vec2):(G=this.baseElement.vec1,_=this.baseElement.vec2),J=0;J<this.transformations.length;J++)this.transformations[J].update(),G=math.A.matVecMult(this.transformations[J].matrix,G),_=math.A.matVecMult(this.transformations[J].matrix,_);return this.vec1=G,this.vec2=_,this},update:function(){return this.needsUpdate&&this.updateCoords().updateTransform(),this},updateRenderer:function(){return this.needsUpdate=!1,this},projectCoords:function(G,_){return geometry.A.projectCoordsToParametric(G,this,2,_)}}),jxg.A.createPlane3D=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se,ae,le=_[0],ue=null,de=null;if((Z=utils_type.A.copyAttributes(J,G.options,"plane3d")).threepoints||utils_type.A.isPoint3D(_[2])||utils_type.A.isPoint3D(_[3]))Q=utils_type.A.providePoints3D(le,[_[1]],J,"plane3d",["point1"])[0],ee=utils_type.A.providePoints3D(le,[_[2]],J,"plane3d",["point2"])[0],te=utils_type.A.providePoints3D(le,[_[3]],J,"plane3d",["point3"])[0],ne=function(){return[ee.X()-Q.X(),ee.Y()-Q.Y(),ee.Z()-Q.Z()]},ie=function(){return[te.X()-Q.X(),te.Y()-Q.Y(),te.Z()-Q.Z()]},re=_[4]||[-1/0,1/0],oe=_[5]||[-1/0,1/0];else{if(_[1].type===constants.A.OBJECT_TYPE_PLANE3D&&utils_type.A.isTransformationOrArray(_[2])?(ue=_[1],de=_[2],Q=utils_type.A.providePoints3D(le,[[0,0,0,0]],J,"plane3d",["point"])[0],ne=[0,1e-4,0,0],ie=[0,0,1e-4,0],re=_[3]||[-1/0,1/0],oe=_[4]||[-1/0,1/0]):(Q=utils_type.A.providePoints3D(le,[_[1]],J,"plane3d",["point"])[0],ne=_[2],ie=_[3],re=_[4]||[-1/0,1/0],oe=_[5]||[-1/0,1/0]),Q===!1)throw new Error("JSXGraph: Can't create plane3d with first parent of type '"+typeof _[1]+`'.
Possible first parent types are: point3d, array of length 3, function returning an array of length 3.`);if(ue!==null&&_<3||ue===null&&_.length<4)throw new Error("JSXGraph: Can't create plane3d with parents of type '"+typeof _[1]+", "+typeof _[2]+", "+typeof _[3]+", "+typeof _[4]+", "+typeof _[5]+"'.")}return se=new jxg.A.Plane3D(le,Q,ne,re,ie,oe,Z),Q.addChild(se),Z=se.setAttr2D(Z),se.element2D=le.create("curve",[[],[]],Z),se.element2D.view=le,ue!==null&&de!==null&&(se.addTransform(ue,de),se.addParents(ue)),se.element2D.updateDataArray=function(){var pe=se.updateDataArray();this.dataX=pe.X,this.dataY=pe.Y},se.addChild(se.element2D),se.inherits.push(se.element2D),se.element2D.setParents(se),Math.abs(se.range_u[0])!==1/0&&Math.abs(se.range_u[1])!==1/0&&Math.abs(se.range_v[0])!==1/0&&Math.abs(se.range_v[1])!==1/0&&(Z=utils_type.A.copyAttributes(Z.mesh3d,G.options,"mesh3d"),ae=le.create("mesh3d",[function(){return Q.coords},function(){return se.vec1},function(){return se.vec2},se.range_u,se.range_v],Z),se.mesh3d=ae,se.addChild(ae),se.inherits.push(ae),se.element2D.inherits.push(ae),ae.setParents(se),se.mesh3d.view=le),se.element2D.prepareUpdate().update(),G.isSuspendedUpdate||se.element2D.updateVisibility().updateRenderer(),se},jxg.A.registerElement("plane3d",jxg.A.createPlane3D),jxg.A.createIntersectionLine3D=function(G,_,J){var Z,Q,ee,te=_[0],ne=_[1],ie=_[2],re=utils_type.A.copyAttributes(J,G.options,"intersectionline3d"),oe=[];for(ee=geometry.A.intersectionFunction3D(te,ne,ie),Q=0;Q<2;Q++)oe[Q]=te.create("point3d",ee[Q],re["point"+(Q+1)]);Z=te.create("line3d",oe,re);try{ne.addChild(Z),ie.addChild(Z)}catch{throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof _[1]+"' and '"+typeof _[2]+"'.")}return Z.type=constants.A.OBJECT_TYPE_INTERSECTION_LINE3D,Z.elType="intersectionline3d",Z.setParents([ne.id,ie.id]),Z},jxg.A.registerElement("intersectionline3d",jxg.A.createIntersectionLine3D),jxg.A.Text3D=function(G,_,J,Z,Q){this.constructor(G.board,Q,constants.A.OBJECT_TYPE_TEXT3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(G,"text3d"),this.board.finalizeAdding(this),this.coords=[0,0,0,0],this.F=_,this.slide=Z,this.X=function(){return this.coords[1]},this.Y=function(){return this.coords[2]},this.Z=function(){return this.coords[3]},this.position=[],this._c2d=null,this.methodMap=utils_type.A.deepCopy(this.methodMap,{})},jxg.A.Text3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Text3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Text3D.prototype,{updateCoords:function(){var G;if(utils_type.A.isFunction(this.F))this.coords=utils_type.A.evaluate(this.F),this.coords.unshift(1);else for(this.coords[0]=1,G=0;G<3;G++)utils_type.A.isFunction(this.F[G])&&(this.coords[G+1]=utils_type.A.evaluate(this.F[G]));return this},initCoords:function(){var G;if(utils_type.A.isFunction(this.F))this.coords=utils_type.A.evaluate(this.F),this.coords.unshift(1);else for(this.coords[0]=1,G=0;G<3;G++)this.coords[G+1]=utils_type.A.evaluate(this.F[G]);return this},normalizeCoords:function(){return Math.abs(this.coords[0])>math.A.eps&&(this.coords[1]/=this.coords[0],this.coords[2]/=this.coords[0],this.coords[3]/=this.coords[0],this.coords[0]=1),this},setPosition:function(G,_){var J=this.coords;return G.length===3?(J[0]=1,J[1]=G[0],J[2]=G[1],J[3]=G[2]):(J[0]=G[0],J[1]=G[1],J[2]=G[2],J[3]=G[2],this.normalizeCoords()),this},update:function(G){var _,J,Z;return this.element2D.draggable()&&geometry.A.distance(this._c2d,this.element2D.coords.usrCoords)!==0?(this.view.isVerticalDrag()?_=this.view.project2DTo3DVertical(this.element2D,this.coords):(J=[1,0,0,this.coords[3]],_=this.view.project2DTo3DPlane(this.element2D,[1,0,0,1],J)),_[0]!==0&&(Z=this.view.project3DToCube(_),this.coords=Z[0],Z[1]&&this.element2D.coords.setCoordinates(constants.A.COORDS_BY_USER,this.view.project3DTo2D(this.coords)),this.slide&&(this.coords=this.slide.projectCoords([this.X(),this.Y(),this.Z()],this.position),this.element2D.coords.setCoordinates(constants.A.COORDS_BY_USER,this.view.project3DTo2D(this.coords))))):(this.updateCoords(),this.slide&&(this.coords=this.slide.projectCoords([this.X(),this.Y(),this.Z()],this.position)),_=this.coords,this.element2D.coords.setCoordinates(constants.A.COORDS_BY_USER,this.view.project3DTo2D(_)),this.zIndex=math.A.innerProduct(this.view.matrix3DRotShift[3],_),this.element2D.prepareUpdate().update()),this._c2d=this.element2D.coords.usrCoords.slice(),this},updateRenderer:function(){return this.needsUpdate=!1,this},testIfFinite:function(){return Math.abs(this.coords[0])>math.A.eps},__evt__update3D:function(G){}}),jxg.A.createText3D=function(G,_,J){var Z,Q,ee,te,ne,ie,re=_[0];if(ee=_.length>2&&utils_type.A.exists(_[_.length-1].is3D)?_.pop():null,_.length===3)Q=_[1],te=_[2];else{if(_.length!==5)throw new Error("JSXGraph: Can't create text3d with parent types '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [[x,y,z], text], [x,y,z, text]`);Q=_.slice(1,4),te=_[4]}return Z=utils_type.A.copyAttributes(J,G.options,"text3d"),(ie=new jxg.A.Text3D(re,Q,te,ee,Z)).initCoords(),ne=re.project3DTo2D(ie.coords),Z=ie.setAttr2D(Z),ie.element2D=re.create("text",[ne[1],ne[2],te],Z),ie.element2D.view=re,ie.addChild(ie.element2D),ie.inherits.push(ie.element2D),ie.element2D.setParents(ie),ie.slide&&(ie.slide.addChild(ie),ie.setParents(ie.slide)),ie._c2d=ie.element2D.coords.usrCoords.slice(),ie},jxg.A.registerElement("text3d",jxg.A.createText3D),jxg.A.createTicks3D=function(G,_,J){var Z,Q,ee=_[0],te=_[1],ne=_[2],ie=_[3],re=_[4];return Q=utils_type.A.copyAttributes(J,G.options,"ticks3d"),(Z=ee.create("curve",[[],[]],Q)).point=te,Z.direction1=ne,Z.len=ie,Z.direction2=re,Z.drawLabels=function(oe){var se,ae,le,ue,de,pe,fe,_e=this.len,ye=this.evalVisProp("ticksdistance"),be=this.evalVisProp("tickendings"),Ae=this.evalVisProp("majorheight"),Ce=[0,0,0],Ee=[0,0,0],Re=[0,0,0],Te=[];if(se=(Ae/=Math.sqrt(G.unitX*G.unitY))*be[1]*2,this.dataX=[],this.dataY=[],utils_type.A.isFunction(this.point))Re=this.point().slice(1);else for(ue=0;ue<3;ue++)Re[ue]=utils_type.A.evaluate(this.point[ue]);for(ue=0;ue<3;ue++)Ce[ue]=utils_type.A.evaluate(this.direction1[ue]),Ee[ue]=utils_type.A.evaluate(this.direction2[ue]);for(ae=jxg.A.Math.norm(Ce,3),le=jxg.A.Math.norm(Ee,3),ue=0;ue<3;ue++)Ce[ue]/=ae,Ee[ue]/=le;if(!(Math.abs(ye)<math.A.eps)){for(de=0;de<=_e;de+=ye){for(fe=[Re[0]+de*Ce[0]+se*Ee[0],Re[1]+de*Ce[1]+se*Ee[1],Re[2]+de*Ce[2]+se*Ee[2]],ue=0;ue<3;ue++)Ce[ue]!==0&&(pe=Re[ue]+de*Ce[ue]);Te.push(ee.create("text3d",[fe,pe],oe))}return Te}},Z.evalVisProp("drawlabels")&&(Z.labels=Z.drawLabels(Q.label)),Z.updateDataArray=function(){var oe,se,ae,le,ue,de,pe,fe,_e=this.len,ye=this.evalVisProp("ticksdistance"),be=this.evalVisProp("tickendings"),Ae=this.evalVisProp("majorheight"),Ce=[0,0,0],Ee=[0,0,0],Re=[0,0,0];if(oe=(Ae/=Math.sqrt(G.unitX*G.unitY))*-be[0],se=Ae*be[1],this.dataX=[],this.dataY=[],utils_type.A.isFunction(this.point))Re=this.point().slice(1);else for(ue=0;ue<3;ue++)Re[ue]=utils_type.A.evaluate(this.point[ue]);for(ue=0;ue<3;ue++)Ce[ue]=utils_type.A.evaluate(this.direction1[ue]),Ee[ue]=utils_type.A.evaluate(this.direction2[ue]);for(ae=jxg.A.Math.norm(Ce,3),le=jxg.A.Math.norm(Ee,3),ue=0;ue<3;ue++)Ce[ue]/=ae,Ee[ue]/=le;if(!(Math.abs(ye)<math.A.eps))for(de=0;de<=_e;de+=ye)fe=[Re[0]+de*Ce[0]+oe*Ee[0],Re[1]+de*Ce[1]+oe*Ee[1],Re[2]+de*Ce[2]+oe*Ee[2]],pe=ee.project3DTo2D(fe),this.dataX.push(pe[1]),this.dataY.push(pe[2]),fe=[Re[0]+de*Ce[0]+se*Ee[0],Re[1]+de*Ce[1]+se*Ee[1],Re[2]+de*Ce[2]+se*Ee[2]],pe=ee.project3DTo2D(fe),this.dataX.push(pe[1]),this.dataY.push(pe[2]),this.dataX.push(NaN),this.dataY.push(NaN)},Z},jxg.A.registerElement("ticks3d",jxg.A.createTicks3D),jxg.A.Polygon3D=function(G,_,J){var Z;for(this.constructor(G.board,J,constants.A.OBJECT_TYPE_POLYGON3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(G,"polygon3d"),this.board.finalizeAdding(this),this.vertices=[],Z=0;Z<_.length;Z++)this.vertices[Z]=this.board.select(_[Z]),this.vertices[Z]._is_new&&(delete this.vertices[Z]._is_new,this.vertices[Z]._is_new_pol=!0)},jxg.A.Polygon3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Polygon3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Polygon3D.prototype,{update:function(){return this},updateRenderer:function(){return this.needsUpdate=!1,this},updateZIndex:function(){var G,_=this.vertices.length,J=[1,0,0,0];if(_<=0)return[NaN,NaN,NaN,NaN];for(G=0;G<_;G++)J[1]+=this.vertices[G].coords[1],J[2]+=this.vertices[G].coords[2],J[3]+=this.vertices[G].coords[3];return J[1]/=_,J[2]/=_,J[3]/=_,this.zIndex=math.A.innerProduct(this.view.matrix3DRotShift[3],J),this}}),jxg.A.createPolygon3D=function(G,_,J){var Z,Q,ee,te,ne,ie,re=_[0],oe=[],se=[],ae=!1;if(ne=utils_type.A.copyAttributes(J,G.options,"polygon3d"),(te=G.select(_[1]))===null&&(te=_[1]),utils_type.A.isObject(te)&&te.type===constants.A.OBJECT_TYPE_POLYGON3D&&utils_type.A.isTransformationOrArray(_[2]))for(ae=!0,ee=te.vertices.length-1,ie=utils_type.A.copyAttributes(J,G.options,"polygon3d","vertices"),Q=0;Q<ee;Q++)ie.withlabel&&(ie.name=te.vertices[Q].name===""?"":te.vertices[Q].name+"'"),oe.push(G.create("point3d",[te.vertices[Q],_[2]],ie));else if(utils_type.A.isArray(_[1])&&_[1].every(le=>utils_type.A.isPoint3D(le)))oe=_[1];else if((oe=utils_type.A.providePoints3D(re,_.slice(1),J,"polygon3d",["vertices"]))===!1)throw new Error("JSXGraph: Can't create polygon3d with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates. Alternatively, a polygon3d and a transformation can be supplied");for((Z=new jxg.A.Polygon3D(re,oe,ne)).isDraggable=!0,ne=Z.setAttr2D(ne),Q=0;Q<oe.length;Q++)se.push(oe[Q].element2D);if(Z.element2D=G.create("polygon",se,ne),Z.element2D.view=re,Z.addChild(Z.element2D),Z.inherits.push(Z.element2D),Z.element2D.setParents(Z),ae)for(Z.prepareUpdate().update().updateVisibility().updateRenderer(),ee=te.vertices.length-1,Q=0;Q<ee;Q++)oe[Q].prepareUpdate().update().updateVisibility().updateRenderer();return Z},jxg.A.registerElement("polygon3d",jxg.A.createPolygon3D),jxg.A.Face3D=function(G,_,J,Z){this.constructor(G.board,Z,constants.A.OBJECT_TYPE_FACE3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(G,"face3d"),this.board.finalizeAdding(this),this.polyhedron=_,this.faceNumber=J,this.normal=[0,0,0,0],this.d=0,this.vec1=[0,0,0,0],this.vec2=[0,0,0,0],this.faceNumber===0&&this.updateCoords(),this.methodMap=utils_type.A.deepCopy(this.methodMap,{})},jxg.A.Face3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Face3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Face3D.prototype,{updateCoords:function(){var G,_,J,Z,Q=this.polyhedron;for(G in Q.vertices){if(Z=Q.vertices[G],utils_type.A.isFunction(Z))Q.coords[G]=utils_type.A.evaluate(Z);else if(utils_type.A.isArray(Z))for(Q.coords[G]=[],J=Z.length,_=0;_<J;_++)Q.coords[G][_]=utils_type.A.evaluate(Z[_]);else{if(Z=Q.view.select(Z),!utils_type.A.isPoint3D(Z))throw new Error("Polyhedron3D.updateCoords: unknown vertices type!");Q.coords[G]=Z.coords}Q.coords[G].length===3&&Q.coords[G].unshift(1)}return this},updateDataArray2D:function(){var G,_,J,Z,Q=[],ee=[],te=this.polyhedron,ne=te.faces[this.faceNumber];if(this.faceNumber===0)for(G in te.vertices)te.coords2D[G]=[];for(_=ne.length,this.zIndex=0,G=0;G<_;G++)(Z=te.coords2D[ne[G]]).length===0&&(J=te.coords[ne[G]],Z=this.view.project3DTo2D(J),te.coords2D[ne[G]]=Z,te.zIndex[ne[G]]=math.A.innerProduct(this.view.matrix3DRotShift[3],J)),Q.push(Z[1]),ee.push(Z[2]),this.zIndex+=te.zIndex[ne[G]];return _>0&&(this.zIndex/=_),_!==2&&(Q.push(Q[0]),ee.push(ee[0])),{X:Q,Y:ee}},addTransform:function(G,_){return this.faceNumber===0&&this.addTransformGeneric(G,_),this},updateTransform:function(){var G,_,J,Z,Q;if(this.faceNumber!==0)return this;if(this.transformations.length===0||this.baseElement===null)return this;for(G=this.transformations,J=0;J<G.length;J++)G[J].update();for(J in(Q=this===this.baseElement?this.polyhedron:this.baseElement.polyhedron).coords)if(Q.coords.hasOwnProperty(J)){for(_=Q.coords[J],Z=0;Z<G.length;Z++)_=math.A.matVecMult(G[Z].matrix,_);this.polyhedron.coords[J]=_}return this},update:function(){var G,_,J,Z,Q,ee;if(this.needsUpdate&&!this.view.board._change3DView){if(_=this.polyhedron,this.faceNumber===0&&this.updateCoords().updateTransform(),(ee=_.faces[this.faceNumber]).length<3)return this;if(Z=_.coords[ee[0]],Q=_.coords[ee[1]],this.vec1=[Q[0]-Z[0],Q[1]-Z[1],Q[2]-Z[2],Q[3]-Z[3]],Q=_.coords[ee[2]],this.vec2=[Q[0]-Z[0],Q[1]-Z[1],Q[2]-Z[2],Q[3]-Z[3]],this.normal=math.A.crossProduct(this.vec1.slice(1),this.vec2.slice(1)),J=math.A.norm(this.normal),this.normal.unshift(0),Math.abs(J)>1e-12)for(G=1;G<4;G++)this.normal[G]/=J;this.d=math.A.innerProduct(Z,this.normal,4)}return this},updateRenderer:function(){return this.needsUpdate&&(this.needsUpdate=!1,this.shader()),this},shader:function(){var G,_,J,Z,Q,ee,te,ne,ie;if(this.evalVisProp("shader.enabled"))return G=this.evalVisProp("shader.hue"),_=this.evalVisProp("shader.saturation"),ne=this.evalVisProp("shader.minlightness"),ie=this.evalVisProp("shader.maxlightness"),this.evalVisProp("shader.type").toLowerCase()==="angle"?(Z=math.A.innerProduct(this.view.matrix3DRotShift[3],this.normal),J=ne+(ie-ne)*(Z=Math.abs(Z))):(te=this.view.zIndexMax,ee=this.view.zIndexMin,J=ne+(ie-ne)*((this.zIndex-ee)/(te-ee))),Q="hsl("+G+","+_+"%,"+J+"%)",this.element2D.visProp.fillcolor=Q,this.zIndex}}),jxg.A.createFace3D=function(G,_,J){var Z,Q,ee=_[0],te=_[1],ne=_[2];return Z=utils_type.A.copyAttributes(J,G.options,"face3d"),Z=(Q=new jxg.A.Face3D(ee,te,ne,Z)).setAttr2D(Z),Q.element2D=ee.create("curve",[[],[]],Z),Q.element2D.view=ee,Q.element2D.updateDataArray=function(){var ie=Q.updateDataArray2D();this.dataX=ie.X,this.dataY=ie.Y},Q.addChild(Q.element2D),Q.inherits.push(Q.element2D),Q.element2D.setParents(Q),Q.element2D.prepareUpdate().update(),G.isSuspendedUpdate||Q.element2D.updateVisibility().updateRenderer(),Q},jxg.A.registerElement("face3d",jxg.A.createFace3D),jxg.A.Polyhedron3D=function(G,_,J,Z){var Q,ee,te,ne=this;for(this.constructor(G.board,Z,constants.A.OBJECT_TYPE_POLYHEDRON3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(G,"polyhedron3d"),this.board.finalizeAdding(this),this.elType="polyhedron3d",this.faces=J,this.numberFaces=J.length,this.def=_,ee=["setAttribute","setParents","prepareUpdate","updateRenderer","update","fullUpdate","highlight","noHighlight"],te=function(ie){return function(){var re;for(re in ne.faces)ne.faces.hasOwnProperty(re)&&utils_type.A.exists(ne.faces[re][ie])&&ne.faces[re][ie].apply(ne.faces[re],arguments);return ne}},Q=0;Q<ee.length;Q++)this[ee[Q]]=te(ee[Q]);this.methodMap=utils_type.A.deepCopy(this.methodMap,{setAttribute:"setAttribute",setParents:"setParents",addTransform:"addTransform"})},jxg.A.Polyhedron3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Polyhedron3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Polyhedron3D.prototype,{addTransform:function(G,_){if(!(this.faces.length>0&&G.faces.length>0))throw new Error("Adding transformation failed. At least one of the two polyhedra has no faces.");return this.faces[0].addTransform(G.faces[0],_),this},toSTL:function(G){var _,J,Z,Q,ee,te,ne="solid ";for(G===void 0&&(G=this.name),ne+=G+`
`,_=0;_<this.def.faces.length;_++){for(ne+=` facet normal 0 0 0
  outer loop
`,te=(Q=this.def.faces[_]).length,Z=this.def.coords,J=0;J<te;J++)ne+="   vertex "+(ee=Z[Q[J]])[1]+" "+ee[2]+" "+ee[3]+`
`;ne+=`  endloop
 endfacet
`}return ne+="endsolid "+G+`
`}}),jxg.A.createPolyhedron3D=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe=_[0],se=[],ae=null,le=null,ue={view:oe,vertices:{},coords:{},coords2D:{},zIndex:{},faces:[]};if(utils_type.A.exists(_[1].type)&&_[1].type===constants.A.OBJECT_TYPE_POLYHEDRON3D)ae=_[1],le=_[2],ue.vertices=ae.def.vertices,ue.faces=ae.def.faces;else{if(utils_type.A.isArray(_[1]))for(Q=_[1].length,Z=0;Z<Q;Z++)ue.vertices[Z]=_[1][Z];else if(utils_type.A.isObject(_[1]))for(Z in _[1])_[1].hasOwnProperty(Z)&&(ue.vertices[Z]=_[1][Z]);ue.faces=_[2]}for(re=utils_type.A.copyAttributes(J,G.options,"polyhedron3d"),console.time("polyhedron"),oe.board.suspendUpdate(),Q=ue.faces.length,Z=0;Z<Q;Z++)ie=utils_type.A.copyAttributes(J,G.options,"face3d"),re.fillcolorarray.length>0&&(ie.fillcolor=re.fillcolorarray[Z%re.fillcolorarray.length]),te=ue.faces[Z],utils_type.A.isArray(te)&&te.length===2&&utils_type.A.isObject(te[1])&&utils_type.A.isArray(te[0])&&(utils_type.A.mergeAttr(ie,te[1]),ue.faces[Z]=te[0]),ee=oe.create("face3d",[ue,Z],ie),se.push(ee);for((ne=new jxg.A.Polyhedron3D(oe,ue,se,re)).setParents(ne),Z=0;Z<Q;Z++)ne.inherits.push(ne.faces[Z]),ne.addChild(ne.faces[Z]);return ae!==null&&(ne.addTransform(ae,le),ne.addParents(ae)),oe.board.unsuspendUpdate(),console.timeEnd("polyhedron"),ne},jxg.A.registerElement("polyhedron3d",jxg.A.createPolyhedron3D),jxg.A.Sphere3D=function(G,_,J,Z,Q){this.constructor(G.board,Q,constants.A.OBJECT_TYPE_SPHERE3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(G,"sphere3d"),this.board.finalizeAdding(this),this.method=_,this.center=this.board.select(J),this.point2=null,this.points=[],this.element2D=null,this.aux2D=[],this.projectionType=G.projectionType,_==="twoPoints"?(this.point2=this.board.select(Z),this.radius=this.Radius()):_==="pointRadius"&&(this.updateRadius=utils_type.A.createFunction(Z,this.board),this.updateRadius(),this.addParentsFromJCFunctions([this.updateRadius])),utils_type.A.exists(this.center._is_new)?(this.addChild(this.center),delete this.center._is_new):this.center.addChild(this),_==="twoPoints"&&(utils_type.A.exists(this.point2._is_new)?(this.addChild(this.point2),delete this.point2._is_new):this.point2.addChild(this)),this.methodMap=utils_type.A.deepCopy(this.methodMap,{center:"center",point2:"point2",Radius:"Radius"})},jxg.A.Sphere3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Sphere3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Sphere3D.prototype,{X:function(G,_){return this.Radius()*Math.sin(G)*Math.cos(_)},Y:function(G,_){return this.Radius()*Math.sin(G)*Math.sin(_)},Z:function(G,_){return this.Radius()*Math.cos(G)},range_u:[0,2*Math.PI],range_v:[0,Math.PI],update:function(){return this.projectionType!==this.view.projectionType&&this.rebuildProjection(),this},updateRenderer:function(){return this.needsUpdate=!1,this},setRadius:function(G){return this.updateRadius=utils_type.A.createFunction(G,this.board),this.addParentsFromJCFunctions([this.updateRadius]),this.board.update(),this},Radius:function(G){return utils_type.A.exists(G)?(this.setRadius(G),this.Radius()):this.method==="twoPoints"?this.center.testIfFinite()&&this.point2.testIfFinite()?this.center.distance(this.point2):NaN:this.method==="pointRadius"?Math.abs(this.updateRadius()):NaN},focusFn:function(G){var _=this;return function(){var J=_.view.boxToCam[3],Z=_.Radius();return _.view.project3DTo2D([_.center.X()+G*Z*J[1],_.center.Y()+G*Z*J[2],_.center.Z()+G*Z*J[3]]).slice(1,3)}},innerVertexFn:function(){var G=this;return function(){var _,J=G.view,Z=J.worldToFocal(G.center.coords,!1),Q=math.A.hypot(Z[0],Z[1]),ee=J.boxToCam,te=G.Radius(),ne=Math.atan(-Q/Z[2])+Math.acos(te/math.A.norm(Z)),ie=Math.cos(ne),re=Math.sin(ne);return _=Q>1e-8?[-(Z[0]*ee[1][1]+Z[1]*ee[2][1])/Q,-(Z[0]*ee[1][2]+Z[1]*ee[2][2])/Q,-(Z[0]*ee[1][3]+Z[1]*ee[2][3])/Q]:[ee[1][1],ee[1][2],ee[1][3]],J.project3DTo2D([G.center.X()+te*(re*_[0]+ie*ee[3][1]),G.center.Y()+te*(re*_[1]+ie*ee[3][2]),G.center.Z()+te*(re*_[2]+ie*ee[3][3])])}},buildCentralProjection:function(G){var _=this.view,J={visible:!1,withLabel:!1},Z=_.create("point",this.focusFn(-1),J),Q=_.create("point",this.focusFn(1),J),ee=_.create("point",this.innerVertexFn(_),J);this.aux2D=[Z,Q,ee],this.element2D=_.create("ellipse",this.aux2D,G===void 0?this.visProp:G)},buildParallelProjection:function(G){var _=this;this.aux2D=[],this.element2D=this.view.create("circle",[_.center.element2D,function(){var J=_.view.bbox3D[0][1]-_.view.bbox3D[0][0];return _.Radius()*_.view.size[0]/J}],G===void 0?this.visProp:G)},rebuildProjection:function(G){var _;if(this.element2D)for(_ in this.view.board.removeObject(this.element2D),this.aux2D)this.aux2D.hasOwnProperty(_)&&this.view.board.removeObject(this.aux2D[_]);this.projectionType=this.view.projectionType,this.projectionType==="central"?this.buildCentralProjection(G):this.buildParallelProjection(G),this.addChild(this.element2D),this.inherits.push(this.element2D),this.element2D.view=this.view},projectCoords:function(G,_){var J=this.Radius(),Z=[1].concat(G),Q=this.center.coords,ee=geometry.A.distance(Q,Z,4),te=statistics.A.subtract(Z,Q);return ee===0?(_[0]=0,_[1]=0,[1,J,0,0]):J===0?(_[0]=0,_[1]=0,this.center.coords):(ee=J/ee,te[0]=1,te[1]*=ee,te[2]*=ee,te[3]*=ee,_[1]=Math.atan2(te[2],te[1]),_[1]+=_[1]<0?Math.PI:0,_[1]!==0?_[0]=Math.atan2(te[2],te[3]*Math.sin(_[1])):_[0]=Math.atan2(te[1],te[3]*Math.cos(_[1])),_[0]+=_[0]<0?2*Math.PI:0,te)}}),jxg.A.createSphere3D=function(G,_,J){var Z,Q,ee,te,ne,ie,re=_[0];for(Z=utils_type.A.copyAttributes(J,G.options,"sphere3d"),Q=[],ie=1;ie<_.length;ie++)if(utils_type.A.isPointType3D(G,_[ie])){if(ee=Q.length===0?"center":"point",(te=utils_type.A.providePoints3D(re,[_[ie]],J,"sphere3d",[ee])[0])===!1)throw new Error("JSXGraph: Can't create sphere3d from this type. Please provide a point type.");Q.push(te)}else Q.push(_[ie]);if(utils_type.A.isPoint3D(Q[0])&&utils_type.A.isPoint3D(Q[1]))ne=new jxg.A.Sphere3D(re,"twoPoints",Q[0],Q[1],Z);else{if(!utils_type.A.isPoint3D(Q[0])||!(utils_type.A.isNumber(Q[1])||utils_type.A.isFunction(Q[1])||utils_type.A.isString(Q[1])))throw new Error("JSXGraph: Can't create sphere3d with parent types '"+typeof _[1]+"' and '"+typeof _[2]+`'.
Possible parent types: [point,point], [point,number], [point,function]`);ne=new jxg.A.Sphere3D(re,"pointRadius",Q[0],Q[1],Z)}return Z=ne.setAttr2D(Z),ne.rebuildProjection(Z),ne.element2D.prepareUpdate().update(),G.isSuspendedUpdate||ne.element2D.updateVisibility().updateRenderer(),ne},jxg.A.registerElement("sphere3d",jxg.A.createSphere3D),jxg.A.Surface3D=function(G,_,J,Z,Q,ee,te,ne){this.constructor(G.board,ne,constants.A.OBJECT_TYPE_SURFACE3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(G,"surface3d"),this.board.finalizeAdding(this),this._F=_,this._X=J,this._Y=Z,this._Z=Q,this._F!==null?(this._X=function(ie,re){return this._F(ie,re)[0]},this._Y=function(ie,re){return this._F(ie,re)[1]},this._Z=function(ie,re){return this._F(ie,re)[2]}):this._X!==null&&(this._F=function(ie,re){return[this._X(ie,re),this._Y(ie,re),this._Z(ie,re)]}),this.range_u=ee,this.range_v=te,this.dataX=null,this.dataY=null,this.dataZ=null,this.points=[],this.methodMap=utils_type.A.deepCopy(this.methodMap,{})},jxg.A.Surface3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Surface3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Surface3D.prototype,{updateWireframe:function(){var G,_,J,Z,Q,ee,te,ne,ie,re,oe,se,ae=[1,0,0,0];for(this.points=[],G=this.evalVisProp("stepsu"),_=this.evalVisProp("stepsv"),Q=utils_type.A.evaluate(this.range_u),ee=utils_type.A.evaluate(this.range_v),te=utils_type.A.evaluate(Q[0]),ne=utils_type.A.evaluate(ee[0]),ie=(utils_type.A.evaluate(Q[1])-te)/G,re=(utils_type.A.evaluate(ee[1])-ne)/_,J=0,oe=te;J<=G;J++,oe+=ie)for(this.points.push([]),Z=0,se=ne;Z<=_;Z++,se+=re)(ae=this.F(oe,se)).unshift(1),this.points[J].push(ae);return this},updateCoords:function(){return this._F!==null?this.updateWireframe():this.updateTransform(),this},evalF:function(G,_){var J,Z,Q=[0,0,0,0];if(this.transformations.length===0||!utils_type.A.exists(this.baseElement))return Q=this._F(G,_);for(J=this.transformations,Z=0;Z<J.length;Z++)J[Z].update();for((Q=this===this.baseElement?this._F(G,_):this.baseElement.evalF(G,_)).unshift(1),Q=math.A.matVecMult(J[0].matrix,Q),Z=1;Z<J.length;Z++)Q=math.A.matVecMult(J[Z].matrix,Q);return Q.slice(1)},F:function(G,_){return this.evalF(G,_)},X:function(G,_){return this.evalF(G,_)[0]},Y:function(G,_){return this.evalF(G,_)[1]},Z:function(G,_){return this.evalF(G,_)[2]},updateDataArray2D:function(){var G,_,J,Z,Q,ee=[],te=[];if((J=this.points.length)!==0){for(Z=this.points[0].length,G=0;G<J;G++){for(_=0;_<Z;_++)Q=this.view.project3DTo2D(this.points[G][_]),ee.push(Q[1]),te.push(Q[2]);ee.push(NaN),te.push(NaN)}for(_=0;_<Z;_++){for(G=0;G<J;G++)Q=this.view.project3DTo2D(this.points[G][_]),ee.push(Q[1]),te.push(Q[2]);ee.push(NaN),te.push(NaN)}}return{X:ee,Y:te}},addTransform:function(G,_){return this.addTransformGeneric(G,_),this},updateTransform:function(){var G,_,J,Z,Q,ee,te;if(this.transformations.length===0||this.baseElement===null||utils_type.A.exists(this._F))return this;for(G=this.transformations,J=0;J<G.length;J++)G[J].update();if(this!==this.baseElement&&(this.points=[]),(ee=this.baseElement.points.length)>0)for(te=this.baseElement.points[0].length,J=0;J<ee;J++)for(this!==this.baseElement&&this.points.push([]),Z=0;Z<te;Z++){for(_=this===this.baseElement?this.points[J][Z]:this.baseElement.points[J][Z],Q=0;Q<G.length;Q++)_=math.A.matVecMult(G[Q].matrix,_);this===this.baseElement?this.points[J][Z]=_:this.points[J].push(_)}return this},updateDataArray:function(){},update:function(){return this.needsUpdate&&(this.updateDataArray(),this.updateCoords()),this},updateRenderer:function(){return this.needsUpdate=!1,this},projectCoords:function(G,_){return geometry.A.projectCoordsToParametric(G,this,2,_)}}),jxg.A.createParametricSurface3D=function(G,_,J){var Z,Q,ee,te,ne,ie,re,oe,se=_[0],ae=null,le=null;return _.length===3?(ae=_[1],le=_[2],Z=null,Q=null,ee=null,te=null):_.length===4?(Z=_[1],ne=_[2],ie=_[3],Q=null,ee=null,te=null):(Q=_[1],ee=_[2],te=_[3],ne=_[4],ie=_[5],Z=null),re=utils_type.A.copyAttributes(J,G.options,"surface3d"),re=(oe=new jxg.A.Surface3D(se,Z,Q,ee,te,ne,ie,re)).setAttr2D(re),oe.element2D=se.create("curve",[[],[]],re),oe.element2D.view=se,ae!==null&&(oe.addTransform(ae,le),oe.addParents(ae)),oe.element2D.updateDataArray=function(){var ue=oe.updateDataArray2D();this.dataX=ue.X,this.dataY=ue.Y},oe.addChild(oe.element2D),oe.inherits.push(oe.element2D),oe.element2D.setParents(oe),oe.element2D.prepareUpdate().update(),G.isSuspendedUpdate||oe.element2D.updateVisibility().updateRenderer(),oe},jxg.A.registerElement("parametricsurface3d",jxg.A.createParametricSurface3D),jxg.A.createFunctiongraph3D=function(G,_,J){var Z,Q=_[0],ee=utils_type.A.createFunction(_[1],G,"x, y"),te=_[2],ne=_[3];return(Z=Q.create("parametricsurface3d",[function(ie,re){return ie},function(ie,re){return re},ee,te,ne],J)).elType="functiongraph3d",Z},jxg.A.registerElement("functiongraph3d",jxg.A.createFunctiongraph3D),jxg.A.Parse3D={STL:function(G){var _,J,Z,Q,ee,te,ne,ie,re,oe=[],se=[],ae=[];for(Q=(te=G.split(`
`)).length,_=0;_<Q;_++)if((ee=te[_].trim()).indexOf("solid")===0)ie=-1,se=[],ae=[];else if(ee.indexOf("endsolid")===0)oe.push([se.slice(),ae.slice()]);else if(ee.indexOf("facet")===0)ie++,ae.push([]);else{if(ee.indexOf("outer loop")===0||ee.indexOf("endloop")===0)continue;if(ee.indexOf("vertex")===0){for(ne=ee.split(" ").slice(1).map(le=>parseFloat(le)),re=!1,J=0;J<se.length;J++)if(jxg.A.Math.Geometry.distance(se[J],ne,3)<jxg.A.Math.eps){re=!0,Z=J;break}re===!1&&(Z=se.length,se.push(ne)),ae[ie].push(Z)}}return oe}},jxg.A.Parse3D;let size=.75,color="#000";jxg.A.themes.mono_thin={board:{showInfobox:!1,showCopyright:!0,defaultAxes:{x:{ticks:{minorTicks:0,majorHeight:10,majorTickEndings:[1,0]}},y:{ticks:{minorTicks:0,majorHeight:10,majorTickEndings:[0,1]}}}},navbar:{strokeColor:"#bbb",fillColor:"none"},elements:{strokeColor:color,highlightStrokeColor:color,fillColor:"none",highlightFillColor:"none",strokeOpacity:.6,highlightStrokeOpacity:1},angle:{strokeColor:color,fillColor:"#aaaaaa55",fillOpacity:.3,highlightFillColor:"#aaaaaa33",highlightFillOpacity:.3,label:{strokeColor:color}},arc:{strokeColor:color,strokeWidth:size,highlightStrokeColor:color,highlightStrokeWidth:size},axis:{},boxplot:{strokeWidth:size,strokeColor:color,fillColor:color,fillOpacity:.2,highlightStrokeWidth:size,highlightStrokeColor:color,highlightFillColor:color,highlightFillOpacity:.1},circle:{strokeWidth:size,highlightStrokeWidth:1.5*size,strokeColor:color,highlightFillColor:"none",highlightStrokeColor:color,center:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color},point2:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color}},circumcircle:{strokeWidth:size,highlightStrokeWidth:1.5*size,strokeColor:color,highlightFillColor:"none",highlightStrokeColor:color,center:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color}},circumcirclearc:{strokeColor:color,strokeWidth:size,highlightStrokeColor:color,highlightStrokeWidth:size},circumcirclesector:{strokeColor:color,fillColor:"#aaaaaa55",fillOpacity:.3,highlightFillColor:"#aaaaaa33",highlightFillOpacity:.3},comb:{strokeColor:color,strokeWidth:size},conic:{strokeWidth:size,highlightStrokeWidth:1.5*size,strokeColor:color,highlightStrokeColor:color,fillColor:"none",highlightFillColor:"none"},curve:{strokeColor:color,strokeWidth:size,highlightStrokeColor:color,highlightStrokeWidth:size},grid:{strokeWidth:size},hatch:{strokeColor:color,strokeWidth:size},incircle:{strokeWidth:size,highlightStrokeWidth:1.5*size,strokeColor:color,highlightFillColor:"none",highlightStrokeColor:color,center:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color}},inequality:{fillColor:"#aaaaaa55",fillOpacity:.2},integral:{fillColor:"#aaaaaa55",highlightFillColor:"#aaaaa33",fillOpacity:.3,highlightFillOpacity:.3,curveLeft:{color},baseLeft:{color},curveRight:{color},baseRight:{color}},label:{strokeColor:color},line:{strokeColor:color,strokeWidth:size,highlightStrokeColor:color,highlightStrokeWidth:size,point1:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color},point2:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color}},normal:{strokeColor:color},parallel:{strokeColor:color},perpendicular:{strokeColor:color},perpendicularsegment:{strokeColor:color},point:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color},polygon:{fillColor:"#aaaaaa55",highlightFillColor:"#aaaaaa33",fillOpacity:.3,highlightFillOpacity:.3,vertices:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color},borders:{strokeColor:color,strokeWidth:size,highlightStrokeColor:color,highlightStrokeWidth:size}},sector:{strokeColor:color,fillColor:"#aaaaaa55",fillOpacity:.3,highlightFillColor:"#aaaaaa33",highlightFillOpacity:.3},semicircle:{center:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color}},slider:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color,baseline:{strokeWidth:size,strokeColor:color,highlightStrokeColor:color},label:{strokeColor:color},highline:{strokeWidth:3*size,name:"",strokeColor:color,highlightStrokeColor:color},ticks:{strokeColor:color}},slopefield:{strokeWidth:.75*size,highlightStrokeWidth:size,highlightStrokeColor:color,highlightStrokeOpacity:.8},tapemeasure:{strokeColor:color,strokeWidth:size,highlightStrokeColor:color,highlightStrokeWidth:size,point1:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color},point2:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color},ticks:{strokeWidth:size}},text:{strokeColor:color},tracecurve:{strokeColor:color},turtle:{strokeWidth:size,strokeColor:color,arrow:{strokeWidth:2*size,strokeColor:"#aaaaaa55"}},vectorfield:{strokeWidth:.75*size,highlightStrokeWidth:size,highlightStrokeColor:color,highlightStrokeOpacity:.8}},jxg.A.COORDS_BY_SCREEN,jxg.A.COORDS_BY_USER,jxg.A.Dump,jxg.A.Expect,jxg.A.JSXGraph,jxg.A.Math,jxg.A.Options,jxg.A.boards,jxg.A.elements,jxg.A.palette,jxg.A.paletteWong,jxg.A.Board,jxg.A.Chart,jxg.A.Circle,jxg.A.Complex,jxg.A.Composition,jxg.A.Coords,jxg.A.CoordsElement,jxg.A.Curve,jxg.A.GeometryElement,jxg.A.Group,jxg.A.Image,jxg.A.JessieCode,jxg.A.PrefixParser,jxg.A.Line,jxg.A.Point,jxg.A.Polygon,jxg.A.Text,jxg.A.Ticks,jxg.A.Transformation,jxg.A.Turtle,jxg.A.View3D,jxg.A.LMS2rgb,jxg.A.addEvent,jxg.A.autoDigits,jxg.A.autoHighlight,jxg.A.bind,jxg.A.capitalize,jxg.A.clearVisPropOld,jxg.A.clone,jxg.A.cloneAndCopy,jxg.A.cmpArrays,jxg.A.coordsArrayToMatrix,jxg.A.copyAttributes,jxg.A.createEvalFunction,jxg.A.createFunction,jxg.A.createHTMLSlider,jxg.A.darkenColor,jxg.A.debug,jxg.A.debugInt,jxg.A.debugLine,jxg.A.debugWST,jxg.A.deepCopy,jxg.A.def,jxg.A.deprecated,jxg.A.eliminateDuplicates,jxg.A.escapeHTML,jxg.A.evalSlider,jxg.A.evaluate,jxg.A.filterElements,jxg.A.getBoardByContainerId,jxg.A.getCSSTransformMatrix,jxg.A.getCSSTransform,jxg.A.getDimensions,jxg.A.getOffset,jxg.A.getPosition,jxg.A.getProp,jxg.A.hex2rgb,jxg.A.hsv2rgb,jxg.A.isAndroid,jxg.A.isApple,jxg.A.isArray,jxg.A.isDesktop,jxg.A.isInArray,jxg.A.isInObject,jxg.A.isMetroApp,jxg.A.isMobile,jxg.A.isMozilla,jxg.A.isBoard,jxg.A.isName,jxg.A.isNode,jxg.A.isNumber,jxg.A.isObject,jxg.A.isPoint,jxg.A.isPoint3D,jxg.A.isPointType,jxg.A.isPointType3D,jxg.A.isString,jxg.A.isTouchDevice,jxg.A.isTransformationOrArray,jxg.A.isWebWorker,jxg.A.isWebkitAndroid,jxg.A.isWebkitApple,jxg.A.keys,jxg.A.lightenColor,jxg.A.merge,jxg.A.normalizePointFace,jxg.A.providePoints,jxg.A.registerElement,jxg.A.registerReader,jxg.A.removeAllEvents,jxg.A.removeElementFromArray,jxg.A.removeEvent,jxg.A.rgb2LMS,jxg.A.rgb2bw,jxg.A.rgb2cb,jxg.A.rgb2css,jxg.A.rgb2hex,jxg.A.rgb2hsv,jxg.A.rgbParser,jxg.A.rgba2rgbo,jxg.A.rgbo2rgba,jxg.A.sanitizeHTML,jxg.A.shortcut,jxg.A.str2Bool,jxg.A.supportsCanvas,jxg.A.supportsPointerEvents,jxg.A.supportsSVG,jxg.A.supportsVML,jxg.A.swap,jxg.A.timedChunk,jxg.A.toFixed,jxg.A.toFullscreen,jxg.A.toJSON,jxg.A.trim,jxg.A.trimNumber,jxg.A.truncate,jxg.A.unescapeHTML,jxg.A.uniqueArray,jxg.A.useBlackWhiteOptions,jxg.A.useStandardOptions,jxg.A.warn,env.A.isBrowser?window.JXG=jxg.A:env.A.isWebWorker()&&(self.JXG=jxg.A);var src=jxg.A;return __webpack_exports__=__webpack_exports__.default,__webpack_exports__})()});const ShuffleIcon="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='icon%20icon-tabler%20icons-tabler-outline%20icon-tabler-arrows-shuffle'%3e%3cpath%20stroke='none'%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M18%204l3%203l-3%203'%20/%3e%3cpath%20d='M18%2020l3%20-3l-3%20-3'%20/%3e%3cpath%20d='M3%207h3a5%205%200%200%201%205%205a5%205%200%200%200%205%205h5'%20/%3e%3cpath%20d='M21%207h-5a4.978%204.978%200%200%200%20-3%201m-4%208a4.984%204.984%200%200%201%20-3%201h-3'%20/%3e%3c/svg%3e",Boundedness="/cubetests/assets/boundedness_alpha-BCdaxFdc.png";var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs(reactDomExports);function Annotated({content:G,glossary:_={A:"A \\in \\mathbb{R}^{M\\times N}",b:"b \\in  \\mathbb{R}^{M}",c:"c \\in \\mathbb{R}",e:"e \\in  \\mathbb{R}_{\\ge 0}","\\vec{z}":"z \\in \\mathbb{R}^N"},revealReady:J=!1,popupFontSize:Z="1vmin",popupMaxWidth:Q=520,popupOffset:ee="-12vmin",className:te="",exclude:ne=[],style:ie}){const re=reactExports.useRef(null),oe=reactExports.useRef(null),[se,ae]=reactExports.useState({intentVisible:!1,mounted:!1,measuring:!1,html:"",left:0,top:0,maxWidth:Q,anchorRect:null,cursor:null,offsetCss:ee}),le={"\\le":"","\\ge":"","\\times":"","\\cdot":"","\\in":"","'":""},ue={};Object.keys(_).forEach(Le=>{ue[Le]=le[Le]||Le});const de=Object.keys(ue).sort((Le,Ie)=>ue[Ie].length-ue[Le].length);function pe(Le){const Ie=[],Ge=/(\$[^$]+\$)/g;let He=0,Be;for(;(Be=Ge.exec(Le))!==null;)Be.index>He&&Ie.push({type:"text",text:Le.slice(He,Be.index)}),Ie.push({type:"math",text:Be[0].slice(1,-1)}),He=Be.index+Be[0].length;return He<Le.length&&Ie.push({type:"text",text:Le.slice(He)}),Ie}function fe(Le,Ie){if(window&&window.katex&&typeof window.katex.renderToString=="function")try{return Ie.innerHTML=window.katex.renderToString(Le,{throwOnError:!1,displayMode:!1}),!0}catch(Ge){console.warn("katex.renderToString error:",Ge)}if(window&&typeof window.renderMathInElement=="function")try{return Ie.textContent=`$${Le}$`,window.renderMathInElement(Ie,{delimiters:[{left:"$",right:"$",display:!1},{left:"$$",right:"$$",display:!0}]}),!0}catch(Ge){console.warn("renderMathInElement error:",Ge)}return!1}function _e(Le){if(!de.length)return;const Ie=document.createTreeWalker(Le,NodeFilter.SHOW_TEXT,null,!1),Ge=[];for(;Ie.nextNode();){const He=Ie.currentNode,Be=He.nodeValue;if(!Be)continue;let ze=-1,Fe=null,$e=-1;for(let Xe of de){const je=ue[Xe];if(!je)continue;const qe=Be.indexOf(je);qe>=0&&(ze===-1||qe<ze)&&(ze=qe,Fe=Xe,$e=qe)}ze>=0&&Fe&&Ge.push({node:He,start:$e,end:$e+ue[Fe].length,key:Fe})}for(let He=Ge.length-1;He>=0;--He){const{node:Be,start:ze,end:Fe,key:$e}=Ge[He],Xe=Be.nodeValue,je=Xe.slice(0,ze),qe=Xe.slice(ze,Fe),Ze=Xe.slice(Fe),st=Be.parentNode;if(!st)continue;je&&st.insertBefore(document.createTextNode(je),Be);const St=document.createElement("span");St.className="gloss-target",St.setAttribute("data-gloss-key",$e),St.setAttribute("tabindex","0"),St.textContent=qe,st.insertBefore(St,Be),Ze&&st.insertBefore(document.createTextNode(Ze),Be),st.removeChild(Be)}}reactExports.useEffect(()=>{const Le=re.current;return Le?(Le.innerHTML="",pe(G).forEach(Ge=>{if(Ge.type==="text"){const He=document.createElement("span");He.className="plain-text",He.textContent=Ge.text,Le.appendChild(He)}else{const He=document.createElement("span");He.className="inline-math",He.setAttribute("data-tex",Ge.text),He.textContent=`$${Ge.text}$`,Le.appendChild(He)}}),setTimeout(()=>{_e(Le),ye(Le)},30),()=>be(Le)):void 0},[G]),reactExports.useEffect(()=>{if(!J)return;const Le=re.current;return Le?(Array.from(Le.querySelectorAll(".inline-math[data-tex]")).forEach(Ge=>{const He=Ge.getAttribute("data-tex");if(!He)return;const Be=fe(He,Ge);Ge.removeAttribute("data-tex"),Be&&_e(Ge)}),ye(Le),()=>be(Le)):void 0},[J,JSON.stringify(_)]);function ye(Le=re.current){if(!Le)return;Le.querySelectorAll(".gloss-target").forEach(Ge=>{Ge.addEventListener("mouseenter",Re),Ge.addEventListener("mousemove",Ee),Ge.addEventListener("mouseleave",Te),Ge.addEventListener("focus",Re),Ge.addEventListener("blur",Te),Ge.addEventListener("keydown",Ne),Ge.addEventListener("touchstart",Me,{passive:!1})})}function be(Le=re.current){if(!Le)return;Le.querySelectorAll(".gloss-target").forEach(Ge=>{Ge.removeEventListener("mouseenter",Re),Ge.removeEventListener("mousemove",Ee),Ge.removeEventListener("mouseleave",Te),Ge.removeEventListener("focus",Re),Ge.removeEventListener("blur",Te),Ge.removeEventListener("keydown",Ne),Ge.removeEventListener("touchstart",Me)})}function Ae(Le){try{const Ie=document.createElement("div");Ie.style.position="absolute",Ie.style.left="-9999px",Ie.style.marginTop=Le,document.body.appendChild(Ie);const Ge=parseFloat(getComputedStyle(Ie).marginTop||"0");return document.body.removeChild(Ie),isFinite(Ge)?Ge:0}catch{return 0}}let Ce=null;function Ee(Le){se.intentVisible&&ae(Ie=>({...Ie,cursor:{clientX:Le.clientX,clientY:Le.clientY}}))}function Re(Le){Ce&&(clearTimeout(Ce),Ce=null);const Ie=Le.currentTarget,Ge=Ie.getAttribute("data-gloss-key");if(!Ge)return;const He=_[Ge];if(!He)return;const Be=typeof Le.clientX=="number"&&typeof Le.clientY=="number"?{clientX:Le.clientX,clientY:Le.clientY}:null,ze=Ie.getBoundingClientRect();let Fe="";if(window&&window.katex&&typeof window.katex.renderToString=="function")try{Fe=window.katex.renderToString(He,{displayMode:!1,throwOnError:!1})}catch{Fe=`<span>$${escapeHtml(He)}$</span>`}else Fe=`<span style="white-space:pre-wrap;">$${escapeHtml(He)}$</span>`;ae({intentVisible:!0,mounted:!0,measuring:!0,html:Fe,left:-9999,top:-9999,maxWidth:Q,anchorRect:ze,cursor:Be,offsetCss:ee})}function Te(){Ce=setTimeout(()=>{ae(Le=>({...Le,intentVisible:!1})),setTimeout(()=>{ae(Le=>({...Le,mounted:!1,measuring:!1}))},260),Ce=null},120)}function Me(Le){Le.preventDefault();const Ie=Le.currentTarget;se.intentVisible&&oe.current&&oe.current.contains(Le.target)?(ae(He=>({...He,intentVisible:!1})),setTimeout(()=>{ae(He=>({...He,mounted:!1,measuring:!1}))},260)):Re({currentTarget:Ie,clientX:null,clientY:null})}function Ne(Le){Le.key==="Enter"||Le.key===" "?(Le.preventDefault(),Re({currentTarget:Le.currentTarget,clientX:null,clientY:null})):Le.key==="Escape"&&(ae(Ie=>({...Ie,intentVisible:!1})),setTimeout(()=>{ae(Ie=>({...Ie,mounted:!1,measuring:!1}))},260))}return reactExports.useEffect(()=>{if(!se.mounted)return;const Le=oe.current;if(!Le)return;function Ie(){Ce&&(clearTimeout(Ce),Ce=null)}function Ge(){Ce=setTimeout(()=>{ae(He=>({...He,intentVisible:!1})),setTimeout(()=>{ae(He=>({...He,mounted:!1,measuring:!1}))},260),Ce=null},120)}return Le.addEventListener("mouseenter",Ie),Le.addEventListener("mouseleave",Ge),()=>{Le.removeEventListener("mouseenter",Ie),Le.removeEventListener("mouseleave",Ge)}},[se.mounted]),reactExports.useEffect(()=>{!se.mounted||!se.measuring||requestAnimationFrame(()=>{const Le=oe.current;if(!Le)return;const Ie=Ae(se.offsetCss||ee)||0;Le.style.maxWidth=`${se.maxWidth}px`,Le.style.width="auto";const Ge=Le.getBoundingClientRect(),He=Ge.width,Be=Ge.height;let ze;se.cursor&&typeof se.cursor.clientX=="number"?ze=se.cursor.clientX+window.scrollX:se.anchorRect?ze=se.anchorRect.left+window.scrollX+se.anchorRect.width/2:ze=window.scrollX+window.innerWidth/2;let Fe=ze-He/2;const $e=window.scrollX+8,Xe=window.scrollX+window.innerWidth-He-8;Fe<$e&&(Fe=$e),Fe>Xe&&(Fe=Xe);let je;se.cursor&&typeof se.cursor.clientY=="number"?je=se.cursor.clientY+window.scrollY-Ie-Be:se.anchorRect?je=se.anchorRect.top+window.scrollY-Ie-Be:je=window.scrollY+8;const qe=window.scrollY+8;je<qe&&se.anchorRect&&(je=se.anchorRect.bottom+window.scrollY+Ie);const Ze=window.scrollY+window.innerHeight-Be-8;je>Ze&&(je=Ze),ae(st=>({...st,left:Fe,top:je,measuring:!1}))})},[se.mounted,se.measuring,se.html,se.cursor,se.anchorRect]),jsxRuntimeExports.jsxs("div",{style:{...ie},children:[jsxRuntimeExports.jsx("div",{className:`math-with-glossary ${te}`,ref:re,style:{display:"inline"}}),se.mounted&&ReactDOM.createPortal(jsxRuntimeExports.jsx("div",{ref:oe,className:`gloss-popup ${se.intentVisible&&!se.measuring?"gloss-visible":"gloss-hidden"}`,role:"dialog","aria-modal":"false",style:{position:"absolute",top:se.measuring?-9999:se.top,left:se.measuring?-9999:se.left,zIndex:9999,boxShadow:"0 10px 34px rgba(0,0,0,0.14)",borderRadius:8,background:"var(--gloss-bg, white)",padding:"8px 10px",fontSize:Z,maxWidth:`${se.maxWidth}px`,whiteSpace:"normal",display:"inline-block",lineHeight:1.25,pointerEvents:se.measuring?"none":"auto"},dangerouslySetInnerHTML:{__html:se.html}}),document.body),jsxRuntimeExports.jsx("style",{children:`
        .gloss-target{
            z-index: 99;
            position: relative;
        }
        .math-with-glossary .gloss-target {
          text-decoration: underline dotted rgba(0,0,0,0.06);
          cursor: pointer;
          padding: 20px 2px;
          border-radius: 2px;
          display: inline;
        }
        .math-with-glossary .gloss-target:hover {
          text-decoration-color: rgba(0,0,0,0.12);
        }
        .math-with-glossary .gloss-target:focus {
          outline: 2px solid rgba(0,0,0,0.06);
          outline-offset: 2px;
        }

        /* Popup hidden/measuring: don't paint and no pointer events */
        .gloss-popup.gloss-hidden {
          visibility: hidden;
          opacity: 0;
          transform: translateY(6px) scale(0.985);
          transition: none;
        }

        /* Popup visible: fade+scale in */
        .gloss-popup.gloss-visible {
          visibility: visible;
          opacity: 1;
          transform: translateY(0) scale(1);
          transition: opacity 180ms ease, transform 180ms ease;
        }

        /* KaTeX inside popup sizing */
        .gloss-popup .katex { font-size: 1em; }
      `})]})}function escapeHtml(G){return(G+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}var constants={exports:{}},reactReconcilerConstants_production={};var hasRequiredReactReconcilerConstants_production;function requireReactReconcilerConstants_production(){return hasRequiredReactReconcilerConstants_production||(hasRequiredReactReconcilerConstants_production=1,reactReconcilerConstants_production.ConcurrentRoot=1,reactReconcilerConstants_production.ContinuousEventPriority=8,reactReconcilerConstants_production.DefaultEventPriority=32,reactReconcilerConstants_production.DiscreteEventPriority=2,reactReconcilerConstants_production.IdleEventPriority=268435456,reactReconcilerConstants_production.LegacyRoot=0,reactReconcilerConstants_production.NoEventPriority=0),reactReconcilerConstants_production}var hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,constants.exports=requireReactReconcilerConstants_production()),constants.exports}var constantsExports=requireConstants();const REVISION="181",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,ConstantColorFactor=211,OneMinusConstantColorFactor=212,ConstantAlphaFactor=213,OneMinusConstantAlphaFactor=214,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,AgXToneMapping=6,NeutralToneMapping=7,AttachedBindMode="attached",DetachedBindMode="detached",UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,UnsignedInt5999Type=35902,UnsignedInt101111Type=35899,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBIntegerFormat=1032,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,RGB_BPTC_SIGNED_Format=36494,RGB_BPTC_UNSIGNED_Format=36495,RED_RGTC1_Format=36283,SIGNED_RED_RGTC1_Format=36284,RED_GREEN_RGTC2_Format=36285,SIGNED_RED_GREEN_RGTC2_Format=36286,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,BasicDepthPacking=3200,RGBADepthPacking=3201,RGBDepthPacking=3202,RGDepthPacking=3203,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,NoColorSpace="",SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",LinearTransfer="linear",SRGBTransfer="srgb",ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,NeverCompare=512,LessCompare=513,EqualCompare=514,LessEqualCompare=515,GreaterCompare=516,NotEqualCompare=517,GreaterEqualCompare=518,AlwaysCompare=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042,GLSL1="100",GLSL3="300 es",WebGLCoordinateSystem=2e3,WebGPUCoordinateSystem=2001,TimestampQuery={COMPUTE:"compute",RENDER:"render"},InterpolationSamplingType={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},InterpolationSamplingMode={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function arrayNeedsUint32(G){for(let _=G.length-1;_>=0;--_)if(G[_]>=65535)return!0;return!1}const TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function getTypedArray(G,_){return new TYPED_ARRAYS[G](_)}function createElementNS(G){return document.createElementNS("http://www.w3.org/1999/xhtml",G)}function createCanvasElement(){const G=createElementNS("canvas");return G.style.display="block",G}const _cache={};let _setConsoleFunction=null;function setConsoleFunction(G){_setConsoleFunction=G}function getConsoleFunction(){return _setConsoleFunction}function log(...G){const _="THREE."+G.shift();_setConsoleFunction?_setConsoleFunction("log",_,...G):console.log(_,...G)}function warn(...G){const _="THREE."+G.shift();_setConsoleFunction?_setConsoleFunction("warn",_,...G):console.warn(_,...G)}function error(...G){const _="THREE."+G.shift();_setConsoleFunction?_setConsoleFunction("error",_,...G):console.error(_,...G)}function warnOnce(...G){const _=G.join(" ");_ in _cache||(_cache[_]=!0,warn(...G))}function probeAsync(G,_,J){return new Promise(function(Z,Q){function ee(){switch(G.clientWaitSync(_,G.SYNC_FLUSH_COMMANDS_BIT,0)){case G.WAIT_FAILED:Q();break;case G.TIMEOUT_EXPIRED:setTimeout(ee,J);break;default:Z()}}setTimeout(ee,J)})}let EventDispatcher$1=class{addEventListener(_,J){this._listeners===void 0&&(this._listeners={});const Z=this._listeners;Z[_]===void 0&&(Z[_]=[]),Z[_].indexOf(J)===-1&&Z[_].push(J)}hasEventListener(_,J){const Z=this._listeners;return Z===void 0?!1:Z[_]!==void 0&&Z[_].indexOf(J)!==-1}removeEventListener(_,J){const Z=this._listeners;if(Z===void 0)return;const Q=Z[_];if(Q!==void 0){const ee=Q.indexOf(J);ee!==-1&&Q.splice(ee,1)}}dispatchEvent(_){const J=this._listeners;if(J===void 0)return;const Z=J[_.type];if(Z!==void 0){_.target=this;const Q=Z.slice(0);for(let ee=0,te=Q.length;ee<te;ee++)Q[ee].call(this,_);_.target=null}}};const _lut=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID(){const G=Math.random()*4294967295|0,_=Math.random()*4294967295|0,J=Math.random()*4294967295|0,Z=Math.random()*4294967295|0;return(_lut[G&255]+_lut[G>>8&255]+_lut[G>>16&255]+_lut[G>>24&255]+"-"+_lut[_&255]+_lut[_>>8&255]+"-"+_lut[_>>16&15|64]+_lut[_>>24&255]+"-"+_lut[J&63|128]+_lut[J>>8&255]+"-"+_lut[J>>16&255]+_lut[J>>24&255]+_lut[Z&255]+_lut[Z>>8&255]+_lut[Z>>16&255]+_lut[Z>>24&255]).toLowerCase()}function clamp$1(G,_,J){return Math.max(_,Math.min(J,G))}function euclideanModulo(G,_){return(G%_+_)%_}function mapLinear(G,_,J,Z,Q){return Z+(G-_)*(Q-Z)/(J-_)}function inverseLerp(G,_,J){return G!==_?(J-G)/(_-G):0}function lerp(G,_,J){return(1-J)*G+J*_}function damp(G,_,J,Z){return lerp(G,_,1-Math.exp(-J*Z))}function pingpong(G,_=1){return _-Math.abs(euclideanModulo(G,_*2)-_)}function smoothstep(G,_,J){return G<=_?0:G>=J?1:(G=(G-_)/(J-_),G*G*(3-2*G))}function smootherstep(G,_,J){return G<=_?0:G>=J?1:(G=(G-_)/(J-_),G*G*G*(G*(G*6-15)+10))}function randInt(G,_){return G+Math.floor(Math.random()*(_-G+1))}function randFloat(G,_){return G+Math.random()*(_-G)}function randFloatSpread(G){return G*(.5-Math.random())}function seededRandom(G){G!==void 0&&(_seed=G);let _=_seed+=1831565813;return _=Math.imul(_^_>>>15,_|1),_^=_+Math.imul(_^_>>>7,_|61),((_^_>>>14)>>>0)/4294967296}function degToRad(G){return G*DEG2RAD}function radToDeg(G){return G*RAD2DEG}function isPowerOfTwo(G){return(G&G-1)===0&&G!==0}function ceilPowerOfTwo(G){return Math.pow(2,Math.ceil(Math.log(G)/Math.LN2))}function floorPowerOfTwo(G){return Math.pow(2,Math.floor(Math.log(G)/Math.LN2))}function setQuaternionFromProperEuler(G,_,J,Z,Q){const ee=Math.cos,te=Math.sin,ne=ee(J/2),ie=te(J/2),re=ee((_+Z)/2),oe=te((_+Z)/2),se=ee((_-Z)/2),ae=te((_-Z)/2),le=ee((Z-_)/2),ue=te((Z-_)/2);switch(Q){case"XYX":G.set(ne*oe,ie*se,ie*ae,ne*re);break;case"YZY":G.set(ie*ae,ne*oe,ie*se,ne*re);break;case"ZXZ":G.set(ie*se,ie*ae,ne*oe,ne*re);break;case"XZX":G.set(ne*oe,ie*ue,ie*le,ne*re);break;case"YXY":G.set(ie*le,ne*oe,ie*ue,ne*re);break;case"ZYZ":G.set(ie*ue,ie*le,ne*oe,ne*re);break;default:warn("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+Q)}}function denormalize(G,_){switch(_.constructor){case Float32Array:return G;case Uint32Array:return G/4294967295;case Uint16Array:return G/65535;case Uint8Array:return G/255;case Int32Array:return Math.max(G/2147483647,-1);case Int16Array:return Math.max(G/32767,-1);case Int8Array:return Math.max(G/127,-1);default:throw new Error("Invalid component type.")}}function normalize(G,_){switch(_.constructor){case Float32Array:return G;case Uint32Array:return Math.round(G*4294967295);case Uint16Array:return Math.round(G*65535);case Uint8Array:return Math.round(G*255);case Int32Array:return Math.round(G*2147483647);case Int16Array:return Math.round(G*32767);case Int8Array:return Math.round(G*127);default:throw new Error("Invalid component type.")}}const MathUtils={DEG2RAD,RAD2DEG,generateUUID,clamp:clamp$1,euclideanModulo,mapLinear,inverseLerp,lerp,damp,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler,normalize,denormalize};class Vector2{constructor(_=0,J=0){Vector2.prototype.isVector2=!0,this.x=_,this.y=J}get width(){return this.x}set width(_){this.x=_}get height(){return this.y}set height(_){this.y=_}set(_,J){return this.x=_,this.y=J,this}setScalar(_){return this.x=_,this.y=_,this}setX(_){return this.x=_,this}setY(_){return this.y=_,this}setComponent(_,J){switch(_){case 0:this.x=J;break;case 1:this.y=J;break;default:throw new Error("index is out of range: "+_)}return this}getComponent(_){switch(_){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+_)}}clone(){return new this.constructor(this.x,this.y)}copy(_){return this.x=_.x,this.y=_.y,this}add(_){return this.x+=_.x,this.y+=_.y,this}addScalar(_){return this.x+=_,this.y+=_,this}addVectors(_,J){return this.x=_.x+J.x,this.y=_.y+J.y,this}addScaledVector(_,J){return this.x+=_.x*J,this.y+=_.y*J,this}sub(_){return this.x-=_.x,this.y-=_.y,this}subScalar(_){return this.x-=_,this.y-=_,this}subVectors(_,J){return this.x=_.x-J.x,this.y=_.y-J.y,this}multiply(_){return this.x*=_.x,this.y*=_.y,this}multiplyScalar(_){return this.x*=_,this.y*=_,this}divide(_){return this.x/=_.x,this.y/=_.y,this}divideScalar(_){return this.multiplyScalar(1/_)}applyMatrix3(_){const J=this.x,Z=this.y,Q=_.elements;return this.x=Q[0]*J+Q[3]*Z+Q[6],this.y=Q[1]*J+Q[4]*Z+Q[7],this}min(_){return this.x=Math.min(this.x,_.x),this.y=Math.min(this.y,_.y),this}max(_){return this.x=Math.max(this.x,_.x),this.y=Math.max(this.y,_.y),this}clamp(_,J){return this.x=clamp$1(this.x,_.x,J.x),this.y=clamp$1(this.y,_.y,J.y),this}clampScalar(_,J){return this.x=clamp$1(this.x,_,J),this.y=clamp$1(this.y,_,J),this}clampLength(_,J){const Z=this.length();return this.divideScalar(Z||1).multiplyScalar(clamp$1(Z,_,J))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(_){return this.x*_.x+this.y*_.y}cross(_){return this.x*_.y-this.y*_.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(_){const J=Math.sqrt(this.lengthSq()*_.lengthSq());if(J===0)return Math.PI/2;const Z=this.dot(_)/J;return Math.acos(clamp$1(Z,-1,1))}distanceTo(_){return Math.sqrt(this.distanceToSquared(_))}distanceToSquared(_){const J=this.x-_.x,Z=this.y-_.y;return J*J+Z*Z}manhattanDistanceTo(_){return Math.abs(this.x-_.x)+Math.abs(this.y-_.y)}setLength(_){return this.normalize().multiplyScalar(_)}lerp(_,J){return this.x+=(_.x-this.x)*J,this.y+=(_.y-this.y)*J,this}lerpVectors(_,J,Z){return this.x=_.x+(J.x-_.x)*Z,this.y=_.y+(J.y-_.y)*Z,this}equals(_){return _.x===this.x&&_.y===this.y}fromArray(_,J=0){return this.x=_[J],this.y=_[J+1],this}toArray(_=[],J=0){return _[J]=this.x,_[J+1]=this.y,_}fromBufferAttribute(_,J){return this.x=_.getX(J),this.y=_.getY(J),this}rotateAround(_,J){const Z=Math.cos(J),Q=Math.sin(J),ee=this.x-_.x,te=this.y-_.y;return this.x=ee*Z-te*Q+_.x,this.y=ee*Q+te*Z+_.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Quaternion{constructor(_=0,J=0,Z=0,Q=1){this.isQuaternion=!0,this._x=_,this._y=J,this._z=Z,this._w=Q}static slerpFlat(_,J,Z,Q,ee,te,ne){let ie=Z[Q+0],re=Z[Q+1],oe=Z[Q+2],se=Z[Q+3],ae=ee[te+0],le=ee[te+1],ue=ee[te+2],de=ee[te+3];if(ne<=0){_[J+0]=ie,_[J+1]=re,_[J+2]=oe,_[J+3]=se;return}if(ne>=1){_[J+0]=ae,_[J+1]=le,_[J+2]=ue,_[J+3]=de;return}if(se!==de||ie!==ae||re!==le||oe!==ue){let pe=ie*ae+re*le+oe*ue+se*de;pe<0&&(ae=-ae,le=-le,ue=-ue,de=-de,pe=-pe);let fe=1-ne;if(pe<.9995){const _e=Math.acos(pe),ye=Math.sin(_e);fe=Math.sin(fe*_e)/ye,ne=Math.sin(ne*_e)/ye,ie=ie*fe+ae*ne,re=re*fe+le*ne,oe=oe*fe+ue*ne,se=se*fe+de*ne}else{ie=ie*fe+ae*ne,re=re*fe+le*ne,oe=oe*fe+ue*ne,se=se*fe+de*ne;const _e=1/Math.sqrt(ie*ie+re*re+oe*oe+se*se);ie*=_e,re*=_e,oe*=_e,se*=_e}}_[J]=ie,_[J+1]=re,_[J+2]=oe,_[J+3]=se}static multiplyQuaternionsFlat(_,J,Z,Q,ee,te){const ne=Z[Q],ie=Z[Q+1],re=Z[Q+2],oe=Z[Q+3],se=ee[te],ae=ee[te+1],le=ee[te+2],ue=ee[te+3];return _[J]=ne*ue+oe*se+ie*le-re*ae,_[J+1]=ie*ue+oe*ae+re*se-ne*le,_[J+2]=re*ue+oe*le+ne*ae-ie*se,_[J+3]=oe*ue-ne*se-ie*ae-re*le,_}get x(){return this._x}set x(_){this._x=_,this._onChangeCallback()}get y(){return this._y}set y(_){this._y=_,this._onChangeCallback()}get z(){return this._z}set z(_){this._z=_,this._onChangeCallback()}get w(){return this._w}set w(_){this._w=_,this._onChangeCallback()}set(_,J,Z,Q){return this._x=_,this._y=J,this._z=Z,this._w=Q,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(_){return this._x=_.x,this._y=_.y,this._z=_.z,this._w=_.w,this._onChangeCallback(),this}setFromEuler(_,J=!0){const Z=_._x,Q=_._y,ee=_._z,te=_._order,ne=Math.cos,ie=Math.sin,re=ne(Z/2),oe=ne(Q/2),se=ne(ee/2),ae=ie(Z/2),le=ie(Q/2),ue=ie(ee/2);switch(te){case"XYZ":this._x=ae*oe*se+re*le*ue,this._y=re*le*se-ae*oe*ue,this._z=re*oe*ue+ae*le*se,this._w=re*oe*se-ae*le*ue;break;case"YXZ":this._x=ae*oe*se+re*le*ue,this._y=re*le*se-ae*oe*ue,this._z=re*oe*ue-ae*le*se,this._w=re*oe*se+ae*le*ue;break;case"ZXY":this._x=ae*oe*se-re*le*ue,this._y=re*le*se+ae*oe*ue,this._z=re*oe*ue+ae*le*se,this._w=re*oe*se-ae*le*ue;break;case"ZYX":this._x=ae*oe*se-re*le*ue,this._y=re*le*se+ae*oe*ue,this._z=re*oe*ue-ae*le*se,this._w=re*oe*se+ae*le*ue;break;case"YZX":this._x=ae*oe*se+re*le*ue,this._y=re*le*se+ae*oe*ue,this._z=re*oe*ue-ae*le*se,this._w=re*oe*se-ae*le*ue;break;case"XZY":this._x=ae*oe*se-re*le*ue,this._y=re*le*se-ae*oe*ue,this._z=re*oe*ue+ae*le*se,this._w=re*oe*se+ae*le*ue;break;default:warn("Quaternion: .setFromEuler() encountered an unknown order: "+te)}return J===!0&&this._onChangeCallback(),this}setFromAxisAngle(_,J){const Z=J/2,Q=Math.sin(Z);return this._x=_.x*Q,this._y=_.y*Q,this._z=_.z*Q,this._w=Math.cos(Z),this._onChangeCallback(),this}setFromRotationMatrix(_){const J=_.elements,Z=J[0],Q=J[4],ee=J[8],te=J[1],ne=J[5],ie=J[9],re=J[2],oe=J[6],se=J[10],ae=Z+ne+se;if(ae>0){const le=.5/Math.sqrt(ae+1);this._w=.25/le,this._x=(oe-ie)*le,this._y=(ee-re)*le,this._z=(te-Q)*le}else if(Z>ne&&Z>se){const le=2*Math.sqrt(1+Z-ne-se);this._w=(oe-ie)/le,this._x=.25*le,this._y=(Q+te)/le,this._z=(ee+re)/le}else if(ne>se){const le=2*Math.sqrt(1+ne-Z-se);this._w=(ee-re)/le,this._x=(Q+te)/le,this._y=.25*le,this._z=(ie+oe)/le}else{const le=2*Math.sqrt(1+se-Z-ne);this._w=(te-Q)/le,this._x=(ee+re)/le,this._y=(ie+oe)/le,this._z=.25*le}return this._onChangeCallback(),this}setFromUnitVectors(_,J){let Z=_.dot(J)+1;return Z<1e-8?(Z=0,Math.abs(_.x)>Math.abs(_.z)?(this._x=-_.y,this._y=_.x,this._z=0,this._w=Z):(this._x=0,this._y=-_.z,this._z=_.y,this._w=Z)):(this._x=_.y*J.z-_.z*J.y,this._y=_.z*J.x-_.x*J.z,this._z=_.x*J.y-_.y*J.x,this._w=Z),this.normalize()}angleTo(_){return 2*Math.acos(Math.abs(clamp$1(this.dot(_),-1,1)))}rotateTowards(_,J){const Z=this.angleTo(_);if(Z===0)return this;const Q=Math.min(1,J/Z);return this.slerp(_,Q),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(_){return this._x*_._x+this._y*_._y+this._z*_._z+this._w*_._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let _=this.length();return _===0?(this._x=0,this._y=0,this._z=0,this._w=1):(_=1/_,this._x=this._x*_,this._y=this._y*_,this._z=this._z*_,this._w=this._w*_),this._onChangeCallback(),this}multiply(_){return this.multiplyQuaternions(this,_)}premultiply(_){return this.multiplyQuaternions(_,this)}multiplyQuaternions(_,J){const Z=_._x,Q=_._y,ee=_._z,te=_._w,ne=J._x,ie=J._y,re=J._z,oe=J._w;return this._x=Z*oe+te*ne+Q*re-ee*ie,this._y=Q*oe+te*ie+ee*ne-Z*re,this._z=ee*oe+te*re+Z*ie-Q*ne,this._w=te*oe-Z*ne-Q*ie-ee*re,this._onChangeCallback(),this}slerp(_,J){if(J<=0)return this;if(J>=1)return this.copy(_);let Z=_._x,Q=_._y,ee=_._z,te=_._w,ne=this.dot(_);ne<0&&(Z=-Z,Q=-Q,ee=-ee,te=-te,ne=-ne);let ie=1-J;if(ne<.9995){const re=Math.acos(ne),oe=Math.sin(re);ie=Math.sin(ie*re)/oe,J=Math.sin(J*re)/oe,this._x=this._x*ie+Z*J,this._y=this._y*ie+Q*J,this._z=this._z*ie+ee*J,this._w=this._w*ie+te*J,this._onChangeCallback()}else this._x=this._x*ie+Z*J,this._y=this._y*ie+Q*J,this._z=this._z*ie+ee*J,this._w=this._w*ie+te*J,this.normalize();return this}slerpQuaternions(_,J,Z){return this.copy(_).slerp(J,Z)}random(){const _=2*Math.PI*Math.random(),J=2*Math.PI*Math.random(),Z=Math.random(),Q=Math.sqrt(1-Z),ee=Math.sqrt(Z);return this.set(Q*Math.sin(_),Q*Math.cos(_),ee*Math.sin(J),ee*Math.cos(J))}equals(_){return _._x===this._x&&_._y===this._y&&_._z===this._z&&_._w===this._w}fromArray(_,J=0){return this._x=_[J],this._y=_[J+1],this._z=_[J+2],this._w=_[J+3],this._onChangeCallback(),this}toArray(_=[],J=0){return _[J]=this._x,_[J+1]=this._y,_[J+2]=this._z,_[J+3]=this._w,_}fromBufferAttribute(_,J){return this._x=_.getX(J),this._y=_.getY(J),this._z=_.getZ(J),this._w=_.getW(J),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(_){return this._onChangeCallback=_,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(_=0,J=0,Z=0){Vector3.prototype.isVector3=!0,this.x=_,this.y=J,this.z=Z}set(_,J,Z){return Z===void 0&&(Z=this.z),this.x=_,this.y=J,this.z=Z,this}setScalar(_){return this.x=_,this.y=_,this.z=_,this}setX(_){return this.x=_,this}setY(_){return this.y=_,this}setZ(_){return this.z=_,this}setComponent(_,J){switch(_){case 0:this.x=J;break;case 1:this.y=J;break;case 2:this.z=J;break;default:throw new Error("index is out of range: "+_)}return this}getComponent(_){switch(_){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+_)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(_){return this.x=_.x,this.y=_.y,this.z=_.z,this}add(_){return this.x+=_.x,this.y+=_.y,this.z+=_.z,this}addScalar(_){return this.x+=_,this.y+=_,this.z+=_,this}addVectors(_,J){return this.x=_.x+J.x,this.y=_.y+J.y,this.z=_.z+J.z,this}addScaledVector(_,J){return this.x+=_.x*J,this.y+=_.y*J,this.z+=_.z*J,this}sub(_){return this.x-=_.x,this.y-=_.y,this.z-=_.z,this}subScalar(_){return this.x-=_,this.y-=_,this.z-=_,this}subVectors(_,J){return this.x=_.x-J.x,this.y=_.y-J.y,this.z=_.z-J.z,this}multiply(_){return this.x*=_.x,this.y*=_.y,this.z*=_.z,this}multiplyScalar(_){return this.x*=_,this.y*=_,this.z*=_,this}multiplyVectors(_,J){return this.x=_.x*J.x,this.y=_.y*J.y,this.z=_.z*J.z,this}applyEuler(_){return this.applyQuaternion(_quaternion$4.setFromEuler(_))}applyAxisAngle(_,J){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(_,J))}applyMatrix3(_){const J=this.x,Z=this.y,Q=this.z,ee=_.elements;return this.x=ee[0]*J+ee[3]*Z+ee[6]*Q,this.y=ee[1]*J+ee[4]*Z+ee[7]*Q,this.z=ee[2]*J+ee[5]*Z+ee[8]*Q,this}applyNormalMatrix(_){return this.applyMatrix3(_).normalize()}applyMatrix4(_){const J=this.x,Z=this.y,Q=this.z,ee=_.elements,te=1/(ee[3]*J+ee[7]*Z+ee[11]*Q+ee[15]);return this.x=(ee[0]*J+ee[4]*Z+ee[8]*Q+ee[12])*te,this.y=(ee[1]*J+ee[5]*Z+ee[9]*Q+ee[13])*te,this.z=(ee[2]*J+ee[6]*Z+ee[10]*Q+ee[14])*te,this}applyQuaternion(_){const J=this.x,Z=this.y,Q=this.z,ee=_.x,te=_.y,ne=_.z,ie=_.w,re=2*(te*Q-ne*Z),oe=2*(ne*J-ee*Q),se=2*(ee*Z-te*J);return this.x=J+ie*re+te*se-ne*oe,this.y=Z+ie*oe+ne*re-ee*se,this.z=Q+ie*se+ee*oe-te*re,this}project(_){return this.applyMatrix4(_.matrixWorldInverse).applyMatrix4(_.projectionMatrix)}unproject(_){return this.applyMatrix4(_.projectionMatrixInverse).applyMatrix4(_.matrixWorld)}transformDirection(_){const J=this.x,Z=this.y,Q=this.z,ee=_.elements;return this.x=ee[0]*J+ee[4]*Z+ee[8]*Q,this.y=ee[1]*J+ee[5]*Z+ee[9]*Q,this.z=ee[2]*J+ee[6]*Z+ee[10]*Q,this.normalize()}divide(_){return this.x/=_.x,this.y/=_.y,this.z/=_.z,this}divideScalar(_){return this.multiplyScalar(1/_)}min(_){return this.x=Math.min(this.x,_.x),this.y=Math.min(this.y,_.y),this.z=Math.min(this.z,_.z),this}max(_){return this.x=Math.max(this.x,_.x),this.y=Math.max(this.y,_.y),this.z=Math.max(this.z,_.z),this}clamp(_,J){return this.x=clamp$1(this.x,_.x,J.x),this.y=clamp$1(this.y,_.y,J.y),this.z=clamp$1(this.z,_.z,J.z),this}clampScalar(_,J){return this.x=clamp$1(this.x,_,J),this.y=clamp$1(this.y,_,J),this.z=clamp$1(this.z,_,J),this}clampLength(_,J){const Z=this.length();return this.divideScalar(Z||1).multiplyScalar(clamp$1(Z,_,J))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(_){return this.x*_.x+this.y*_.y+this.z*_.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(_){return this.normalize().multiplyScalar(_)}lerp(_,J){return this.x+=(_.x-this.x)*J,this.y+=(_.y-this.y)*J,this.z+=(_.z-this.z)*J,this}lerpVectors(_,J,Z){return this.x=_.x+(J.x-_.x)*Z,this.y=_.y+(J.y-_.y)*Z,this.z=_.z+(J.z-_.z)*Z,this}cross(_){return this.crossVectors(this,_)}crossVectors(_,J){const Z=_.x,Q=_.y,ee=_.z,te=J.x,ne=J.y,ie=J.z;return this.x=Q*ie-ee*ne,this.y=ee*te-Z*ie,this.z=Z*ne-Q*te,this}projectOnVector(_){const J=_.lengthSq();if(J===0)return this.set(0,0,0);const Z=_.dot(this)/J;return this.copy(_).multiplyScalar(Z)}projectOnPlane(_){return _vector$c.copy(this).projectOnVector(_),this.sub(_vector$c)}reflect(_){return this.sub(_vector$c.copy(_).multiplyScalar(2*this.dot(_)))}angleTo(_){const J=Math.sqrt(this.lengthSq()*_.lengthSq());if(J===0)return Math.PI/2;const Z=this.dot(_)/J;return Math.acos(clamp$1(Z,-1,1))}distanceTo(_){return Math.sqrt(this.distanceToSquared(_))}distanceToSquared(_){const J=this.x-_.x,Z=this.y-_.y,Q=this.z-_.z;return J*J+Z*Z+Q*Q}manhattanDistanceTo(_){return Math.abs(this.x-_.x)+Math.abs(this.y-_.y)+Math.abs(this.z-_.z)}setFromSpherical(_){return this.setFromSphericalCoords(_.radius,_.phi,_.theta)}setFromSphericalCoords(_,J,Z){const Q=Math.sin(J)*_;return this.x=Q*Math.sin(Z),this.y=Math.cos(J)*_,this.z=Q*Math.cos(Z),this}setFromCylindrical(_){return this.setFromCylindricalCoords(_.radius,_.theta,_.y)}setFromCylindricalCoords(_,J,Z){return this.x=_*Math.sin(J),this.y=Z,this.z=_*Math.cos(J),this}setFromMatrixPosition(_){const J=_.elements;return this.x=J[12],this.y=J[13],this.z=J[14],this}setFromMatrixScale(_){const J=this.setFromMatrixColumn(_,0).length(),Z=this.setFromMatrixColumn(_,1).length(),Q=this.setFromMatrixColumn(_,2).length();return this.x=J,this.y=Z,this.z=Q,this}setFromMatrixColumn(_,J){return this.fromArray(_.elements,J*4)}setFromMatrix3Column(_,J){return this.fromArray(_.elements,J*3)}setFromEuler(_){return this.x=_._x,this.y=_._y,this.z=_._z,this}setFromColor(_){return this.x=_.r,this.y=_.g,this.z=_.b,this}equals(_){return _.x===this.x&&_.y===this.y&&_.z===this.z}fromArray(_,J=0){return this.x=_[J],this.y=_[J+1],this.z=_[J+2],this}toArray(_=[],J=0){return _[J]=this.x,_[J+1]=this.y,_[J+2]=this.z,_}fromBufferAttribute(_,J){return this.x=_.getX(J),this.y=_.getY(J),this.z=_.getZ(J),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const _=Math.random()*Math.PI*2,J=Math.random()*2-1,Z=Math.sqrt(1-J*J);return this.x=Z*Math.cos(_),this.y=J,this.z=Z*Math.sin(_),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$c=new Vector3,_quaternion$4=new Quaternion;class Matrix3{constructor(_,J,Z,Q,ee,te,ne,ie,re){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],_!==void 0&&this.set(_,J,Z,Q,ee,te,ne,ie,re)}set(_,J,Z,Q,ee,te,ne,ie,re){const oe=this.elements;return oe[0]=_,oe[1]=Q,oe[2]=ne,oe[3]=J,oe[4]=ee,oe[5]=ie,oe[6]=Z,oe[7]=te,oe[8]=re,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(_){const J=this.elements,Z=_.elements;return J[0]=Z[0],J[1]=Z[1],J[2]=Z[2],J[3]=Z[3],J[4]=Z[4],J[5]=Z[5],J[6]=Z[6],J[7]=Z[7],J[8]=Z[8],this}extractBasis(_,J,Z){return _.setFromMatrix3Column(this,0),J.setFromMatrix3Column(this,1),Z.setFromMatrix3Column(this,2),this}setFromMatrix4(_){const J=_.elements;return this.set(J[0],J[4],J[8],J[1],J[5],J[9],J[2],J[6],J[10]),this}multiply(_){return this.multiplyMatrices(this,_)}premultiply(_){return this.multiplyMatrices(_,this)}multiplyMatrices(_,J){const Z=_.elements,Q=J.elements,ee=this.elements,te=Z[0],ne=Z[3],ie=Z[6],re=Z[1],oe=Z[4],se=Z[7],ae=Z[2],le=Z[5],ue=Z[8],de=Q[0],pe=Q[3],fe=Q[6],_e=Q[1],ye=Q[4],be=Q[7],Ae=Q[2],Ce=Q[5],Ee=Q[8];return ee[0]=te*de+ne*_e+ie*Ae,ee[3]=te*pe+ne*ye+ie*Ce,ee[6]=te*fe+ne*be+ie*Ee,ee[1]=re*de+oe*_e+se*Ae,ee[4]=re*pe+oe*ye+se*Ce,ee[7]=re*fe+oe*be+se*Ee,ee[2]=ae*de+le*_e+ue*Ae,ee[5]=ae*pe+le*ye+ue*Ce,ee[8]=ae*fe+le*be+ue*Ee,this}multiplyScalar(_){const J=this.elements;return J[0]*=_,J[3]*=_,J[6]*=_,J[1]*=_,J[4]*=_,J[7]*=_,J[2]*=_,J[5]*=_,J[8]*=_,this}determinant(){const _=this.elements,J=_[0],Z=_[1],Q=_[2],ee=_[3],te=_[4],ne=_[5],ie=_[6],re=_[7],oe=_[8];return J*te*oe-J*ne*re-Z*ee*oe+Z*ne*ie+Q*ee*re-Q*te*ie}invert(){const _=this.elements,J=_[0],Z=_[1],Q=_[2],ee=_[3],te=_[4],ne=_[5],ie=_[6],re=_[7],oe=_[8],se=oe*te-ne*re,ae=ne*ie-oe*ee,le=re*ee-te*ie,ue=J*se+Z*ae+Q*le;if(ue===0)return this.set(0,0,0,0,0,0,0,0,0);const de=1/ue;return _[0]=se*de,_[1]=(Q*re-oe*Z)*de,_[2]=(ne*Z-Q*te)*de,_[3]=ae*de,_[4]=(oe*J-Q*ie)*de,_[5]=(Q*ee-ne*J)*de,_[6]=le*de,_[7]=(Z*ie-re*J)*de,_[8]=(te*J-Z*ee)*de,this}transpose(){let _;const J=this.elements;return _=J[1],J[1]=J[3],J[3]=_,_=J[2],J[2]=J[6],J[6]=_,_=J[5],J[5]=J[7],J[7]=_,this}getNormalMatrix(_){return this.setFromMatrix4(_).invert().transpose()}transposeIntoArray(_){const J=this.elements;return _[0]=J[0],_[1]=J[3],_[2]=J[6],_[3]=J[1],_[4]=J[4],_[5]=J[7],_[6]=J[2],_[7]=J[5],_[8]=J[8],this}setUvTransform(_,J,Z,Q,ee,te,ne){const ie=Math.cos(ee),re=Math.sin(ee);return this.set(Z*ie,Z*re,-Z*(ie*te+re*ne)+te+_,-Q*re,Q*ie,-Q*(-re*te+ie*ne)+ne+J,0,0,1),this}scale(_,J){return this.premultiply(_m3.makeScale(_,J)),this}rotate(_){return this.premultiply(_m3.makeRotation(-_)),this}translate(_,J){return this.premultiply(_m3.makeTranslation(_,J)),this}makeTranslation(_,J){return _.isVector2?this.set(1,0,_.x,0,1,_.y,0,0,1):this.set(1,0,_,0,1,J,0,0,1),this}makeRotation(_){const J=Math.cos(_),Z=Math.sin(_);return this.set(J,-Z,0,Z,J,0,0,0,1),this}makeScale(_,J){return this.set(_,0,0,0,J,0,0,0,1),this}equals(_){const J=this.elements,Z=_.elements;for(let Q=0;Q<9;Q++)if(J[Q]!==Z[Q])return!1;return!0}fromArray(_,J=0){for(let Z=0;Z<9;Z++)this.elements[Z]=_[Z+J];return this}toArray(_=[],J=0){const Z=this.elements;return _[J]=Z[0],_[J+1]=Z[1],_[J+2]=Z[2],_[J+3]=Z[3],_[J+4]=Z[4],_[J+5]=Z[5],_[J+6]=Z[6],_[J+7]=Z[7],_[J+8]=Z[8],_}clone(){return new this.constructor().fromArray(this.elements)}}const _m3=new Matrix3,LINEAR_REC709_TO_XYZ=new Matrix3().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),XYZ_TO_LINEAR_REC709=new Matrix3().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function createColorManagement(){const G={enabled:!0,workingColorSpace:LinearSRGBColorSpace,spaces:{},convert:function(Q,ee,te){return this.enabled===!1||ee===te||!ee||!te||(this.spaces[ee].transfer===SRGBTransfer&&(Q.r=SRGBToLinear(Q.r),Q.g=SRGBToLinear(Q.g),Q.b=SRGBToLinear(Q.b)),this.spaces[ee].primaries!==this.spaces[te].primaries&&(Q.applyMatrix3(this.spaces[ee].toXYZ),Q.applyMatrix3(this.spaces[te].fromXYZ)),this.spaces[te].transfer===SRGBTransfer&&(Q.r=LinearToSRGB(Q.r),Q.g=LinearToSRGB(Q.g),Q.b=LinearToSRGB(Q.b))),Q},workingToColorSpace:function(Q,ee){return this.convert(Q,this.workingColorSpace,ee)},colorSpaceToWorking:function(Q,ee){return this.convert(Q,ee,this.workingColorSpace)},getPrimaries:function(Q){return this.spaces[Q].primaries},getTransfer:function(Q){return Q===NoColorSpace?LinearTransfer:this.spaces[Q].transfer},getToneMappingMode:function(Q){return this.spaces[Q].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(Q,ee=this.workingColorSpace){return Q.fromArray(this.spaces[ee].luminanceCoefficients)},define:function(Q){Object.assign(this.spaces,Q)},_getMatrix:function(Q,ee,te){return Q.copy(this.spaces[ee].toXYZ).multiply(this.spaces[te].fromXYZ)},_getDrawingBufferColorSpace:function(Q){return this.spaces[Q].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(Q=this.workingColorSpace){return this.spaces[Q].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(Q,ee){return warnOnce("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),G.workingToColorSpace(Q,ee)},toWorkingColorSpace:function(Q,ee){return warnOnce("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),G.colorSpaceToWorking(Q,ee)}},_=[.64,.33,.3,.6,.15,.06],J=[.2126,.7152,.0722],Z=[.3127,.329];return G.define({[LinearSRGBColorSpace]:{primaries:_,whitePoint:Z,transfer:LinearTransfer,toXYZ:LINEAR_REC709_TO_XYZ,fromXYZ:XYZ_TO_LINEAR_REC709,luminanceCoefficients:J,workingColorSpaceConfig:{unpackColorSpace:SRGBColorSpace},outputColorSpaceConfig:{drawingBufferColorSpace:SRGBColorSpace}},[SRGBColorSpace]:{primaries:_,whitePoint:Z,transfer:SRGBTransfer,toXYZ:LINEAR_REC709_TO_XYZ,fromXYZ:XYZ_TO_LINEAR_REC709,luminanceCoefficients:J,outputColorSpaceConfig:{drawingBufferColorSpace:SRGBColorSpace}}}),G}const ColorManagement=createColorManagement();function SRGBToLinear(G){return G<.04045?G*.0773993808:Math.pow(G*.9478672986+.0521327014,2.4)}function LinearToSRGB(G){return G<.0031308?G*12.92:1.055*Math.pow(G,.41666)-.055}let _canvas;class ImageUtils{static getDataURL(_,J="image/png"){if(/^data:/i.test(_.src)||typeof HTMLCanvasElement>"u")return _.src;let Z;if(_ instanceof HTMLCanvasElement)Z=_;else{_canvas===void 0&&(_canvas=createElementNS("canvas")),_canvas.width=_.width,_canvas.height=_.height;const Q=_canvas.getContext("2d");_ instanceof ImageData?Q.putImageData(_,0,0):Q.drawImage(_,0,0,_.width,_.height),Z=_canvas}return Z.toDataURL(J)}static sRGBToLinear(_){if(typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&_ instanceof ImageBitmap){const J=createElementNS("canvas");J.width=_.width,J.height=_.height;const Z=J.getContext("2d");Z.drawImage(_,0,0,_.width,_.height);const Q=Z.getImageData(0,0,_.width,_.height),ee=Q.data;for(let te=0;te<ee.length;te++)ee[te]=SRGBToLinear(ee[te]/255)*255;return Z.putImageData(Q,0,0),J}else if(_.data){const J=_.data.slice(0);for(let Z=0;Z<J.length;Z++)J instanceof Uint8Array||J instanceof Uint8ClampedArray?J[Z]=Math.floor(SRGBToLinear(J[Z]/255)*255):J[Z]=SRGBToLinear(J[Z]);return{data:J,width:_.width,height:_.height}}else return warn("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),_}}let _sourceId=0;class Source{constructor(_=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_sourceId++}),this.uuid=generateUUID(),this.data=_,this.dataReady=!0,this.version=0}getSize(_){const J=this.data;return typeof HTMLVideoElement<"u"&&J instanceof HTMLVideoElement?_.set(J.videoWidth,J.videoHeight,0):J instanceof VideoFrame?_.set(J.displayHeight,J.displayWidth,0):J!==null?_.set(J.width,J.height,J.depth||0):_.set(0,0,0),_}set needsUpdate(_){_===!0&&this.version++}toJSON(_){const J=_===void 0||typeof _=="string";if(!J&&_.images[this.uuid]!==void 0)return _.images[this.uuid];const Z={uuid:this.uuid,url:""},Q=this.data;if(Q!==null){let ee;if(Array.isArray(Q)){ee=[];for(let te=0,ne=Q.length;te<ne;te++)Q[te].isDataTexture?ee.push(serializeImage(Q[te].image)):ee.push(serializeImage(Q[te]))}else ee=serializeImage(Q);Z.url=ee}return J||(_.images[this.uuid]=Z),Z}}function serializeImage(G){return typeof HTMLImageElement<"u"&&G instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&G instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&G instanceof ImageBitmap?ImageUtils.getDataURL(G):G.data?{data:Array.from(G.data),width:G.width,height:G.height,type:G.data.constructor.name}:(warn("Texture: Unable to serialize Texture."),{})}let _textureId=0;const _tempVec3=new Vector3;class Texture extends EventDispatcher$1{constructor(_=Texture.DEFAULT_IMAGE,J=Texture.DEFAULT_MAPPING,Z=ClampToEdgeWrapping,Q=ClampToEdgeWrapping,ee=LinearFilter,te=LinearMipmapLinearFilter,ne=RGBAFormat,ie=UnsignedByteType,re=Texture.DEFAULT_ANISOTROPY,oe=NoColorSpace){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_textureId++}),this.uuid=generateUUID(),this.name="",this.source=new Source(_),this.mipmaps=[],this.mapping=J,this.channel=0,this.wrapS=Z,this.wrapT=Q,this.magFilter=ee,this.minFilter=te,this.anisotropy=re,this.format=ne,this.internalFormat=null,this.type=ie,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=oe,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(_&&_.depth&&_.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(_tempVec3).x}get height(){return this.source.getSize(_tempVec3).y}get depth(){return this.source.getSize(_tempVec3).z}get image(){return this.source.data}set image(_=null){this.source.data=_}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(_,J){this.updateRanges.push({start:_,count:J})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(_){return this.name=_.name,this.source=_.source,this.mipmaps=_.mipmaps.slice(0),this.mapping=_.mapping,this.channel=_.channel,this.wrapS=_.wrapS,this.wrapT=_.wrapT,this.magFilter=_.magFilter,this.minFilter=_.minFilter,this.anisotropy=_.anisotropy,this.format=_.format,this.internalFormat=_.internalFormat,this.type=_.type,this.offset.copy(_.offset),this.repeat.copy(_.repeat),this.center.copy(_.center),this.rotation=_.rotation,this.matrixAutoUpdate=_.matrixAutoUpdate,this.matrix.copy(_.matrix),this.generateMipmaps=_.generateMipmaps,this.premultiplyAlpha=_.premultiplyAlpha,this.flipY=_.flipY,this.unpackAlignment=_.unpackAlignment,this.colorSpace=_.colorSpace,this.renderTarget=_.renderTarget,this.isRenderTargetTexture=_.isRenderTargetTexture,this.isArrayTexture=_.isArrayTexture,this.userData=JSON.parse(JSON.stringify(_.userData)),this.needsUpdate=!0,this}setValues(_){for(const J in _){const Z=_[J];if(Z===void 0){warn(`Texture.setValues(): parameter '${J}' has value of undefined.`);continue}const Q=this[J];if(Q===void 0){warn(`Texture.setValues(): property '${J}' does not exist.`);continue}Q&&Z&&Q.isVector2&&Z.isVector2||Q&&Z&&Q.isVector3&&Z.isVector3||Q&&Z&&Q.isMatrix3&&Z.isMatrix3?Q.copy(Z):this[J]=Z}}toJSON(_){const J=_===void 0||typeof _=="string";if(!J&&_.textures[this.uuid]!==void 0)return _.textures[this.uuid];const Z={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(_).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(Z.userData=this.userData),J||(_.textures[this.uuid]=Z),Z}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(_){if(this.mapping!==UVMapping)return _;if(_.applyMatrix3(this.matrix),_.x<0||_.x>1)switch(this.wrapS){case RepeatWrapping:_.x=_.x-Math.floor(_.x);break;case ClampToEdgeWrapping:_.x=_.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(_.x)%2)===1?_.x=Math.ceil(_.x)-_.x:_.x=_.x-Math.floor(_.x);break}if(_.y<0||_.y>1)switch(this.wrapT){case RepeatWrapping:_.y=_.y-Math.floor(_.y);break;case ClampToEdgeWrapping:_.y=_.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(_.y)%2)===1?_.y=Math.ceil(_.y)-_.y:_.y=_.y-Math.floor(_.y);break}return this.flipY&&(_.y=1-_.y),_}set needsUpdate(_){_===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(_){_===!0&&this.pmremVersion++}}Texture.DEFAULT_IMAGE=null;Texture.DEFAULT_MAPPING=UVMapping;Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(_=0,J=0,Z=0,Q=1){Vector4.prototype.isVector4=!0,this.x=_,this.y=J,this.z=Z,this.w=Q}get width(){return this.z}set width(_){this.z=_}get height(){return this.w}set height(_){this.w=_}set(_,J,Z,Q){return this.x=_,this.y=J,this.z=Z,this.w=Q,this}setScalar(_){return this.x=_,this.y=_,this.z=_,this.w=_,this}setX(_){return this.x=_,this}setY(_){return this.y=_,this}setZ(_){return this.z=_,this}setW(_){return this.w=_,this}setComponent(_,J){switch(_){case 0:this.x=J;break;case 1:this.y=J;break;case 2:this.z=J;break;case 3:this.w=J;break;default:throw new Error("index is out of range: "+_)}return this}getComponent(_){switch(_){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+_)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(_){return this.x=_.x,this.y=_.y,this.z=_.z,this.w=_.w!==void 0?_.w:1,this}add(_){return this.x+=_.x,this.y+=_.y,this.z+=_.z,this.w+=_.w,this}addScalar(_){return this.x+=_,this.y+=_,this.z+=_,this.w+=_,this}addVectors(_,J){return this.x=_.x+J.x,this.y=_.y+J.y,this.z=_.z+J.z,this.w=_.w+J.w,this}addScaledVector(_,J){return this.x+=_.x*J,this.y+=_.y*J,this.z+=_.z*J,this.w+=_.w*J,this}sub(_){return this.x-=_.x,this.y-=_.y,this.z-=_.z,this.w-=_.w,this}subScalar(_){return this.x-=_,this.y-=_,this.z-=_,this.w-=_,this}subVectors(_,J){return this.x=_.x-J.x,this.y=_.y-J.y,this.z=_.z-J.z,this.w=_.w-J.w,this}multiply(_){return this.x*=_.x,this.y*=_.y,this.z*=_.z,this.w*=_.w,this}multiplyScalar(_){return this.x*=_,this.y*=_,this.z*=_,this.w*=_,this}applyMatrix4(_){const J=this.x,Z=this.y,Q=this.z,ee=this.w,te=_.elements;return this.x=te[0]*J+te[4]*Z+te[8]*Q+te[12]*ee,this.y=te[1]*J+te[5]*Z+te[9]*Q+te[13]*ee,this.z=te[2]*J+te[6]*Z+te[10]*Q+te[14]*ee,this.w=te[3]*J+te[7]*Z+te[11]*Q+te[15]*ee,this}divide(_){return this.x/=_.x,this.y/=_.y,this.z/=_.z,this.w/=_.w,this}divideScalar(_){return this.multiplyScalar(1/_)}setAxisAngleFromQuaternion(_){this.w=2*Math.acos(_.w);const J=Math.sqrt(1-_.w*_.w);return J<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=_.x/J,this.y=_.y/J,this.z=_.z/J),this}setAxisAngleFromRotationMatrix(_){let J,Z,Q,ee;const ie=_.elements,re=ie[0],oe=ie[4],se=ie[8],ae=ie[1],le=ie[5],ue=ie[9],de=ie[2],pe=ie[6],fe=ie[10];if(Math.abs(oe-ae)<.01&&Math.abs(se-de)<.01&&Math.abs(ue-pe)<.01){if(Math.abs(oe+ae)<.1&&Math.abs(se+de)<.1&&Math.abs(ue+pe)<.1&&Math.abs(re+le+fe-3)<.1)return this.set(1,0,0,0),this;J=Math.PI;const ye=(re+1)/2,be=(le+1)/2,Ae=(fe+1)/2,Ce=(oe+ae)/4,Ee=(se+de)/4,Re=(ue+pe)/4;return ye>be&&ye>Ae?ye<.01?(Z=0,Q=.707106781,ee=.707106781):(Z=Math.sqrt(ye),Q=Ce/Z,ee=Ee/Z):be>Ae?be<.01?(Z=.707106781,Q=0,ee=.707106781):(Q=Math.sqrt(be),Z=Ce/Q,ee=Re/Q):Ae<.01?(Z=.707106781,Q=.707106781,ee=0):(ee=Math.sqrt(Ae),Z=Ee/ee,Q=Re/ee),this.set(Z,Q,ee,J),this}let _e=Math.sqrt((pe-ue)*(pe-ue)+(se-de)*(se-de)+(ae-oe)*(ae-oe));return Math.abs(_e)<.001&&(_e=1),this.x=(pe-ue)/_e,this.y=(se-de)/_e,this.z=(ae-oe)/_e,this.w=Math.acos((re+le+fe-1)/2),this}setFromMatrixPosition(_){const J=_.elements;return this.x=J[12],this.y=J[13],this.z=J[14],this.w=J[15],this}min(_){return this.x=Math.min(this.x,_.x),this.y=Math.min(this.y,_.y),this.z=Math.min(this.z,_.z),this.w=Math.min(this.w,_.w),this}max(_){return this.x=Math.max(this.x,_.x),this.y=Math.max(this.y,_.y),this.z=Math.max(this.z,_.z),this.w=Math.max(this.w,_.w),this}clamp(_,J){return this.x=clamp$1(this.x,_.x,J.x),this.y=clamp$1(this.y,_.y,J.y),this.z=clamp$1(this.z,_.z,J.z),this.w=clamp$1(this.w,_.w,J.w),this}clampScalar(_,J){return this.x=clamp$1(this.x,_,J),this.y=clamp$1(this.y,_,J),this.z=clamp$1(this.z,_,J),this.w=clamp$1(this.w,_,J),this}clampLength(_,J){const Z=this.length();return this.divideScalar(Z||1).multiplyScalar(clamp$1(Z,_,J))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(_){return this.x*_.x+this.y*_.y+this.z*_.z+this.w*_.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(_){return this.normalize().multiplyScalar(_)}lerp(_,J){return this.x+=(_.x-this.x)*J,this.y+=(_.y-this.y)*J,this.z+=(_.z-this.z)*J,this.w+=(_.w-this.w)*J,this}lerpVectors(_,J,Z){return this.x=_.x+(J.x-_.x)*Z,this.y=_.y+(J.y-_.y)*Z,this.z=_.z+(J.z-_.z)*Z,this.w=_.w+(J.w-_.w)*Z,this}equals(_){return _.x===this.x&&_.y===this.y&&_.z===this.z&&_.w===this.w}fromArray(_,J=0){return this.x=_[J],this.y=_[J+1],this.z=_[J+2],this.w=_[J+3],this}toArray(_=[],J=0){return _[J]=this.x,_[J+1]=this.y,_[J+2]=this.z,_[J+3]=this.w,_}fromBufferAttribute(_,J){return this.x=_.getX(J),this.y=_.getY(J),this.z=_.getZ(J),this.w=_.getW(J),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class RenderTarget extends EventDispatcher$1{constructor(_=1,J=1,Z={}){super(),Z=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:LinearFilter,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},Z),this.isRenderTarget=!0,this.width=_,this.height=J,this.depth=Z.depth,this.scissor=new Vector4(0,0,_,J),this.scissorTest=!1,this.viewport=new Vector4(0,0,_,J);const Q={width:_,height:J,depth:Z.depth},ee=new Texture(Q);this.textures=[];const te=Z.count;for(let ne=0;ne<te;ne++)this.textures[ne]=ee.clone(),this.textures[ne].isRenderTargetTexture=!0,this.textures[ne].renderTarget=this;this._setTextureOptions(Z),this.depthBuffer=Z.depthBuffer,this.stencilBuffer=Z.stencilBuffer,this.resolveDepthBuffer=Z.resolveDepthBuffer,this.resolveStencilBuffer=Z.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=Z.depthTexture,this.samples=Z.samples,this.multiview=Z.multiview}_setTextureOptions(_={}){const J={minFilter:LinearFilter,generateMipmaps:!1,flipY:!1,internalFormat:null};_.mapping!==void 0&&(J.mapping=_.mapping),_.wrapS!==void 0&&(J.wrapS=_.wrapS),_.wrapT!==void 0&&(J.wrapT=_.wrapT),_.wrapR!==void 0&&(J.wrapR=_.wrapR),_.magFilter!==void 0&&(J.magFilter=_.magFilter),_.minFilter!==void 0&&(J.minFilter=_.minFilter),_.format!==void 0&&(J.format=_.format),_.type!==void 0&&(J.type=_.type),_.anisotropy!==void 0&&(J.anisotropy=_.anisotropy),_.colorSpace!==void 0&&(J.colorSpace=_.colorSpace),_.flipY!==void 0&&(J.flipY=_.flipY),_.generateMipmaps!==void 0&&(J.generateMipmaps=_.generateMipmaps),_.internalFormat!==void 0&&(J.internalFormat=_.internalFormat);for(let Z=0;Z<this.textures.length;Z++)this.textures[Z].setValues(J)}get texture(){return this.textures[0]}set texture(_){this.textures[0]=_}set depthTexture(_){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),_!==null&&(_.renderTarget=this),this._depthTexture=_}get depthTexture(){return this._depthTexture}setSize(_,J,Z=1){if(this.width!==_||this.height!==J||this.depth!==Z){this.width=_,this.height=J,this.depth=Z;for(let Q=0,ee=this.textures.length;Q<ee;Q++)this.textures[Q].image.width=_,this.textures[Q].image.height=J,this.textures[Q].image.depth=Z,this.textures[Q].isData3DTexture!==!0&&(this.textures[Q].isArrayTexture=this.textures[Q].image.depth>1);this.dispose()}this.viewport.set(0,0,_,J),this.scissor.set(0,0,_,J)}clone(){return new this.constructor().copy(this)}copy(_){this.width=_.width,this.height=_.height,this.depth=_.depth,this.scissor.copy(_.scissor),this.scissorTest=_.scissorTest,this.viewport.copy(_.viewport),this.textures.length=0;for(let J=0,Z=_.textures.length;J<Z;J++){this.textures[J]=_.textures[J].clone(),this.textures[J].isRenderTargetTexture=!0,this.textures[J].renderTarget=this;const Q=Object.assign({},_.textures[J].image);this.textures[J].source=new Source(Q)}return this.depthBuffer=_.depthBuffer,this.stencilBuffer=_.stencilBuffer,this.resolveDepthBuffer=_.resolveDepthBuffer,this.resolveStencilBuffer=_.resolveStencilBuffer,_.depthTexture!==null&&(this.depthTexture=_.depthTexture.clone()),this.samples=_.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class WebGLRenderTarget extends RenderTarget{constructor(_=1,J=1,Z={}){super(_,J,Z),this.isWebGLRenderTarget=!0}}class DataArrayTexture extends Texture{constructor(_=null,J=1,Z=1,Q=1){super(null),this.isDataArrayTexture=!0,this.image={data:_,width:J,height:Z,depth:Q},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(_){this.layerUpdates.add(_)}clearLayerUpdates(){this.layerUpdates.clear()}}class WebGLArrayRenderTarget extends WebGLRenderTarget{constructor(_=1,J=1,Z=1,Q={}){super(_,J,Q),this.isWebGLArrayRenderTarget=!0,this.depth=Z,this.texture=new DataArrayTexture(null,_,J,Z),this._setTextureOptions(Q),this.texture.isRenderTargetTexture=!0}}class Data3DTexture extends Texture{constructor(_=null,J=1,Z=1,Q=1){super(null),this.isData3DTexture=!0,this.image={data:_,width:J,height:Z,depth:Q},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGL3DRenderTarget extends WebGLRenderTarget{constructor(_=1,J=1,Z=1,Q={}){super(_,J,Q),this.isWebGL3DRenderTarget=!0,this.depth=Z,this.texture=new Data3DTexture(null,_,J,Z),this._setTextureOptions(Q),this.texture.isRenderTargetTexture=!0}}class Box3{constructor(_=new Vector3(1/0,1/0,1/0),J=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=_,this.max=J}set(_,J){return this.min.copy(_),this.max.copy(J),this}setFromArray(_){this.makeEmpty();for(let J=0,Z=_.length;J<Z;J+=3)this.expandByPoint(_vector$b.fromArray(_,J));return this}setFromBufferAttribute(_){this.makeEmpty();for(let J=0,Z=_.count;J<Z;J++)this.expandByPoint(_vector$b.fromBufferAttribute(_,J));return this}setFromPoints(_){this.makeEmpty();for(let J=0,Z=_.length;J<Z;J++)this.expandByPoint(_[J]);return this}setFromCenterAndSize(_,J){const Z=_vector$b.copy(J).multiplyScalar(.5);return this.min.copy(_).sub(Z),this.max.copy(_).add(Z),this}setFromObject(_,J=!1){return this.makeEmpty(),this.expandByObject(_,J)}clone(){return new this.constructor().copy(this)}copy(_){return this.min.copy(_.min),this.max.copy(_.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(_){return this.isEmpty()?_.set(0,0,0):_.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(_){return this.isEmpty()?_.set(0,0,0):_.subVectors(this.max,this.min)}expandByPoint(_){return this.min.min(_),this.max.max(_),this}expandByVector(_){return this.min.sub(_),this.max.add(_),this}expandByScalar(_){return this.min.addScalar(-_),this.max.addScalar(_),this}expandByObject(_,J=!1){_.updateWorldMatrix(!1,!1);const Z=_.geometry;if(Z!==void 0){const ee=Z.getAttribute("position");if(J===!0&&ee!==void 0&&_.isInstancedMesh!==!0)for(let te=0,ne=ee.count;te<ne;te++)_.isMesh===!0?_.getVertexPosition(te,_vector$b):_vector$b.fromBufferAttribute(ee,te),_vector$b.applyMatrix4(_.matrixWorld),this.expandByPoint(_vector$b);else _.boundingBox!==void 0?(_.boundingBox===null&&_.computeBoundingBox(),_box$4.copy(_.boundingBox)):(Z.boundingBox===null&&Z.computeBoundingBox(),_box$4.copy(Z.boundingBox)),_box$4.applyMatrix4(_.matrixWorld),this.union(_box$4)}const Q=_.children;for(let ee=0,te=Q.length;ee<te;ee++)this.expandByObject(Q[ee],J);return this}containsPoint(_){return _.x>=this.min.x&&_.x<=this.max.x&&_.y>=this.min.y&&_.y<=this.max.y&&_.z>=this.min.z&&_.z<=this.max.z}containsBox(_){return this.min.x<=_.min.x&&_.max.x<=this.max.x&&this.min.y<=_.min.y&&_.max.y<=this.max.y&&this.min.z<=_.min.z&&_.max.z<=this.max.z}getParameter(_,J){return J.set((_.x-this.min.x)/(this.max.x-this.min.x),(_.y-this.min.y)/(this.max.y-this.min.y),(_.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(_){return _.max.x>=this.min.x&&_.min.x<=this.max.x&&_.max.y>=this.min.y&&_.min.y<=this.max.y&&_.max.z>=this.min.z&&_.min.z<=this.max.z}intersectsSphere(_){return this.clampPoint(_.center,_vector$b),_vector$b.distanceToSquared(_.center)<=_.radius*_.radius}intersectsPlane(_){let J,Z;return _.normal.x>0?(J=_.normal.x*this.min.x,Z=_.normal.x*this.max.x):(J=_.normal.x*this.max.x,Z=_.normal.x*this.min.x),_.normal.y>0?(J+=_.normal.y*this.min.y,Z+=_.normal.y*this.max.y):(J+=_.normal.y*this.max.y,Z+=_.normal.y*this.min.y),_.normal.z>0?(J+=_.normal.z*this.min.z,Z+=_.normal.z*this.max.z):(J+=_.normal.z*this.max.z,Z+=_.normal.z*this.min.z),J<=-_.constant&&Z>=-_.constant}intersectsTriangle(_){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$2.subVectors(_.a,_center),_v1$7.subVectors(_.b,_center),_v2$4.subVectors(_.c,_center),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$2,_v2$4);let J=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(J,_v0$2,_v1$7,_v2$4,_extents)||(J=[1,0,0,0,1,0,0,0,1],!satForAxes(J,_v0$2,_v1$7,_v2$4,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),J=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(J,_v0$2,_v1$7,_v2$4,_extents))}clampPoint(_,J){return J.copy(_).clamp(this.min,this.max)}distanceToPoint(_){return this.clampPoint(_,_vector$b).distanceTo(_)}getBoundingSphere(_){return this.isEmpty()?_.makeEmpty():(this.getCenter(_.center),_.radius=this.getSize(_vector$b).length()*.5),_}intersect(_){return this.min.max(_.min),this.max.min(_.max),this.isEmpty()&&this.makeEmpty(),this}union(_){return this.min.min(_.min),this.max.max(_.max),this}applyMatrix4(_){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(_),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(_),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(_),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(_),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(_),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(_),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(_),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(_),this.setFromPoints(_points),this)}translate(_){return this.min.add(_),this.max.add(_),this}equals(_){return _.min.equals(this.min)&&_.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(_){return this.min.fromArray(_.min),this.max.fromArray(_.max),this}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$b=new Vector3,_box$4=new Box3,_v0$2=new Vector3,_v1$7=new Vector3,_v2$4=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(G,_,J,Z,Q){for(let ee=0,te=G.length-3;ee<=te;ee+=3){_testAxis.fromArray(G,ee);const ne=Q.x*Math.abs(_testAxis.x)+Q.y*Math.abs(_testAxis.y)+Q.z*Math.abs(_testAxis.z),ie=_.dot(_testAxis),re=J.dot(_testAxis),oe=Z.dot(_testAxis);if(Math.max(-Math.max(ie,re,oe),Math.min(ie,re,oe))>ne)return!1}return!0}const _box$3=new Box3,_v1$6=new Vector3,_v2$3=new Vector3;let Sphere$1=class{constructor(_=new Vector3,J=-1){this.isSphere=!0,this.center=_,this.radius=J}set(_,J){return this.center.copy(_),this.radius=J,this}setFromPoints(_,J){const Z=this.center;J!==void 0?Z.copy(J):_box$3.setFromPoints(_).getCenter(Z);let Q=0;for(let ee=0,te=_.length;ee<te;ee++)Q=Math.max(Q,Z.distanceToSquared(_[ee]));return this.radius=Math.sqrt(Q),this}copy(_){return this.center.copy(_.center),this.radius=_.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(_){return _.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(_){return _.distanceTo(this.center)-this.radius}intersectsSphere(_){const J=this.radius+_.radius;return _.center.distanceToSquared(this.center)<=J*J}intersectsBox(_){return _.intersectsSphere(this)}intersectsPlane(_){return Math.abs(_.distanceToPoint(this.center))<=this.radius}clampPoint(_,J){const Z=this.center.distanceToSquared(_);return J.copy(_),Z>this.radius*this.radius&&(J.sub(this.center).normalize(),J.multiplyScalar(this.radius).add(this.center)),J}getBoundingBox(_){return this.isEmpty()?(_.makeEmpty(),_):(_.set(this.center,this.center),_.expandByScalar(this.radius),_)}applyMatrix4(_){return this.center.applyMatrix4(_),this.radius=this.radius*_.getMaxScaleOnAxis(),this}translate(_){return this.center.add(_),this}expandByPoint(_){if(this.isEmpty())return this.center.copy(_),this.radius=0,this;_v1$6.subVectors(_,this.center);const J=_v1$6.lengthSq();if(J>this.radius*this.radius){const Z=Math.sqrt(J),Q=(Z-this.radius)*.5;this.center.addScaledVector(_v1$6,Q/Z),this.radius+=Q}return this}union(_){return _.isEmpty()?this:this.isEmpty()?(this.copy(_),this):(this.center.equals(_.center)===!0?this.radius=Math.max(this.radius,_.radius):(_v2$3.subVectors(_.center,this.center).setLength(_.radius),this.expandByPoint(_v1$6.copy(_.center).add(_v2$3)),this.expandByPoint(_v1$6.copy(_.center).sub(_v2$3))),this)}equals(_){return _.center.equals(this.center)&&_.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(_){return this.radius=_.radius,this.center.fromArray(_.center),this}};const _vector$a=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(_=new Vector3,J=new Vector3(0,0,-1)){this.origin=_,this.direction=J}set(_,J){return this.origin.copy(_),this.direction.copy(J),this}copy(_){return this.origin.copy(_.origin),this.direction.copy(_.direction),this}at(_,J){return J.copy(this.origin).addScaledVector(this.direction,_)}lookAt(_){return this.direction.copy(_).sub(this.origin).normalize(),this}recast(_){return this.origin.copy(this.at(_,_vector$a)),this}closestPointToPoint(_,J){J.subVectors(_,this.origin);const Z=J.dot(this.direction);return Z<0?J.copy(this.origin):J.copy(this.origin).addScaledVector(this.direction,Z)}distanceToPoint(_){return Math.sqrt(this.distanceSqToPoint(_))}distanceSqToPoint(_){const J=_vector$a.subVectors(_,this.origin).dot(this.direction);return J<0?this.origin.distanceToSquared(_):(_vector$a.copy(this.origin).addScaledVector(this.direction,J),_vector$a.distanceToSquared(_))}distanceSqToSegment(_,J,Z,Q){_segCenter.copy(_).add(J).multiplyScalar(.5),_segDir.copy(J).sub(_).normalize(),_diff.copy(this.origin).sub(_segCenter);const ee=_.distanceTo(J)*.5,te=-this.direction.dot(_segDir),ne=_diff.dot(this.direction),ie=-_diff.dot(_segDir),re=_diff.lengthSq(),oe=Math.abs(1-te*te);let se,ae,le,ue;if(oe>0)if(se=te*ie-ne,ae=te*ne-ie,ue=ee*oe,se>=0)if(ae>=-ue)if(ae<=ue){const de=1/oe;se*=de,ae*=de,le=se*(se+te*ae+2*ne)+ae*(te*se+ae+2*ie)+re}else ae=ee,se=Math.max(0,-(te*ae+ne)),le=-se*se+ae*(ae+2*ie)+re;else ae=-ee,se=Math.max(0,-(te*ae+ne)),le=-se*se+ae*(ae+2*ie)+re;else ae<=-ue?(se=Math.max(0,-(-te*ee+ne)),ae=se>0?-ee:Math.min(Math.max(-ee,-ie),ee),le=-se*se+ae*(ae+2*ie)+re):ae<=ue?(se=0,ae=Math.min(Math.max(-ee,-ie),ee),le=ae*(ae+2*ie)+re):(se=Math.max(0,-(te*ee+ne)),ae=se>0?ee:Math.min(Math.max(-ee,-ie),ee),le=-se*se+ae*(ae+2*ie)+re);else ae=te>0?-ee:ee,se=Math.max(0,-(te*ae+ne)),le=-se*se+ae*(ae+2*ie)+re;return Z&&Z.copy(this.origin).addScaledVector(this.direction,se),Q&&Q.copy(_segCenter).addScaledVector(_segDir,ae),le}intersectSphere(_,J){_vector$a.subVectors(_.center,this.origin);const Z=_vector$a.dot(this.direction),Q=_vector$a.dot(_vector$a)-Z*Z,ee=_.radius*_.radius;if(Q>ee)return null;const te=Math.sqrt(ee-Q),ne=Z-te,ie=Z+te;return ie<0?null:ne<0?this.at(ie,J):this.at(ne,J)}intersectsSphere(_){return _.radius<0?!1:this.distanceSqToPoint(_.center)<=_.radius*_.radius}distanceToPlane(_){const J=_.normal.dot(this.direction);if(J===0)return _.distanceToPoint(this.origin)===0?0:null;const Z=-(this.origin.dot(_.normal)+_.constant)/J;return Z>=0?Z:null}intersectPlane(_,J){const Z=this.distanceToPlane(_);return Z===null?null:this.at(Z,J)}intersectsPlane(_){const J=_.distanceToPoint(this.origin);return J===0||_.normal.dot(this.direction)*J<0}intersectBox(_,J){let Z,Q,ee,te,ne,ie;const re=1/this.direction.x,oe=1/this.direction.y,se=1/this.direction.z,ae=this.origin;return re>=0?(Z=(_.min.x-ae.x)*re,Q=(_.max.x-ae.x)*re):(Z=(_.max.x-ae.x)*re,Q=(_.min.x-ae.x)*re),oe>=0?(ee=(_.min.y-ae.y)*oe,te=(_.max.y-ae.y)*oe):(ee=(_.max.y-ae.y)*oe,te=(_.min.y-ae.y)*oe),Z>te||ee>Q||((ee>Z||isNaN(Z))&&(Z=ee),(te<Q||isNaN(Q))&&(Q=te),se>=0?(ne=(_.min.z-ae.z)*se,ie=(_.max.z-ae.z)*se):(ne=(_.max.z-ae.z)*se,ie=(_.min.z-ae.z)*se),Z>ie||ne>Q)||((ne>Z||Z!==Z)&&(Z=ne),(ie<Q||Q!==Q)&&(Q=ie),Q<0)?null:this.at(Z>=0?Z:Q,J)}intersectsBox(_){return this.intersectBox(_,_vector$a)!==null}intersectTriangle(_,J,Z,Q,ee){_edge1.subVectors(J,_),_edge2.subVectors(Z,_),_normal$1.crossVectors(_edge1,_edge2);let te=this.direction.dot(_normal$1),ne;if(te>0){if(Q)return null;ne=1}else if(te<0)ne=-1,te=-te;else return null;_diff.subVectors(this.origin,_);const ie=ne*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(ie<0)return null;const re=ne*this.direction.dot(_edge1.cross(_diff));if(re<0||ie+re>te)return null;const oe=-ne*_diff.dot(_normal$1);return oe<0?null:this.at(oe/te,ee)}applyMatrix4(_){return this.origin.applyMatrix4(_),this.direction.transformDirection(_),this}equals(_){return _.origin.equals(this.origin)&&_.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Matrix4{constructor(_,J,Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue,de,pe){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],_!==void 0&&this.set(_,J,Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue,de,pe)}set(_,J,Z,Q,ee,te,ne,ie,re,oe,se,ae,le,ue,de,pe){const fe=this.elements;return fe[0]=_,fe[4]=J,fe[8]=Z,fe[12]=Q,fe[1]=ee,fe[5]=te,fe[9]=ne,fe[13]=ie,fe[2]=re,fe[6]=oe,fe[10]=se,fe[14]=ae,fe[3]=le,fe[7]=ue,fe[11]=de,fe[15]=pe,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(_){const J=this.elements,Z=_.elements;return J[0]=Z[0],J[1]=Z[1],J[2]=Z[2],J[3]=Z[3],J[4]=Z[4],J[5]=Z[5],J[6]=Z[6],J[7]=Z[7],J[8]=Z[8],J[9]=Z[9],J[10]=Z[10],J[11]=Z[11],J[12]=Z[12],J[13]=Z[13],J[14]=Z[14],J[15]=Z[15],this}copyPosition(_){const J=this.elements,Z=_.elements;return J[12]=Z[12],J[13]=Z[13],J[14]=Z[14],this}setFromMatrix3(_){const J=_.elements;return this.set(J[0],J[3],J[6],0,J[1],J[4],J[7],0,J[2],J[5],J[8],0,0,0,0,1),this}extractBasis(_,J,Z){return _.setFromMatrixColumn(this,0),J.setFromMatrixColumn(this,1),Z.setFromMatrixColumn(this,2),this}makeBasis(_,J,Z){return this.set(_.x,J.x,Z.x,0,_.y,J.y,Z.y,0,_.z,J.z,Z.z,0,0,0,0,1),this}extractRotation(_){const J=this.elements,Z=_.elements,Q=1/_v1$5.setFromMatrixColumn(_,0).length(),ee=1/_v1$5.setFromMatrixColumn(_,1).length(),te=1/_v1$5.setFromMatrixColumn(_,2).length();return J[0]=Z[0]*Q,J[1]=Z[1]*Q,J[2]=Z[2]*Q,J[3]=0,J[4]=Z[4]*ee,J[5]=Z[5]*ee,J[6]=Z[6]*ee,J[7]=0,J[8]=Z[8]*te,J[9]=Z[9]*te,J[10]=Z[10]*te,J[11]=0,J[12]=0,J[13]=0,J[14]=0,J[15]=1,this}makeRotationFromEuler(_){const J=this.elements,Z=_.x,Q=_.y,ee=_.z,te=Math.cos(Z),ne=Math.sin(Z),ie=Math.cos(Q),re=Math.sin(Q),oe=Math.cos(ee),se=Math.sin(ee);if(_.order==="XYZ"){const ae=te*oe,le=te*se,ue=ne*oe,de=ne*se;J[0]=ie*oe,J[4]=-ie*se,J[8]=re,J[1]=le+ue*re,J[5]=ae-de*re,J[9]=-ne*ie,J[2]=de-ae*re,J[6]=ue+le*re,J[10]=te*ie}else if(_.order==="YXZ"){const ae=ie*oe,le=ie*se,ue=re*oe,de=re*se;J[0]=ae+de*ne,J[4]=ue*ne-le,J[8]=te*re,J[1]=te*se,J[5]=te*oe,J[9]=-ne,J[2]=le*ne-ue,J[6]=de+ae*ne,J[10]=te*ie}else if(_.order==="ZXY"){const ae=ie*oe,le=ie*se,ue=re*oe,de=re*se;J[0]=ae-de*ne,J[4]=-te*se,J[8]=ue+le*ne,J[1]=le+ue*ne,J[5]=te*oe,J[9]=de-ae*ne,J[2]=-te*re,J[6]=ne,J[10]=te*ie}else if(_.order==="ZYX"){const ae=te*oe,le=te*se,ue=ne*oe,de=ne*se;J[0]=ie*oe,J[4]=ue*re-le,J[8]=ae*re+de,J[1]=ie*se,J[5]=de*re+ae,J[9]=le*re-ue,J[2]=-re,J[6]=ne*ie,J[10]=te*ie}else if(_.order==="YZX"){const ae=te*ie,le=te*re,ue=ne*ie,de=ne*re;J[0]=ie*oe,J[4]=de-ae*se,J[8]=ue*se+le,J[1]=se,J[5]=te*oe,J[9]=-ne*oe,J[2]=-re*oe,J[6]=le*se+ue,J[10]=ae-de*se}else if(_.order==="XZY"){const ae=te*ie,le=te*re,ue=ne*ie,de=ne*re;J[0]=ie*oe,J[4]=-se,J[8]=re*oe,J[1]=ae*se+de,J[5]=te*oe,J[9]=le*se-ue,J[2]=ue*se-le,J[6]=ne*oe,J[10]=de*se+ae}return J[3]=0,J[7]=0,J[11]=0,J[12]=0,J[13]=0,J[14]=0,J[15]=1,this}makeRotationFromQuaternion(_){return this.compose(_zero,_,_one)}lookAt(_,J,Z){const Q=this.elements;return _z.subVectors(_,J),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(Z,_z),_x.lengthSq()===0&&(Math.abs(Z.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(Z,_z)),_x.normalize(),_y.crossVectors(_z,_x),Q[0]=_x.x,Q[4]=_y.x,Q[8]=_z.x,Q[1]=_x.y,Q[5]=_y.y,Q[9]=_z.y,Q[2]=_x.z,Q[6]=_y.z,Q[10]=_z.z,this}multiply(_){return this.multiplyMatrices(this,_)}premultiply(_){return this.multiplyMatrices(_,this)}multiplyMatrices(_,J){const Z=_.elements,Q=J.elements,ee=this.elements,te=Z[0],ne=Z[4],ie=Z[8],re=Z[12],oe=Z[1],se=Z[5],ae=Z[9],le=Z[13],ue=Z[2],de=Z[6],pe=Z[10],fe=Z[14],_e=Z[3],ye=Z[7],be=Z[11],Ae=Z[15],Ce=Q[0],Ee=Q[4],Re=Q[8],Te=Q[12],Me=Q[1],Ne=Q[5],Le=Q[9],Ie=Q[13],Ge=Q[2],He=Q[6],Be=Q[10],ze=Q[14],Fe=Q[3],$e=Q[7],Xe=Q[11],je=Q[15];return ee[0]=te*Ce+ne*Me+ie*Ge+re*Fe,ee[4]=te*Ee+ne*Ne+ie*He+re*$e,ee[8]=te*Re+ne*Le+ie*Be+re*Xe,ee[12]=te*Te+ne*Ie+ie*ze+re*je,ee[1]=oe*Ce+se*Me+ae*Ge+le*Fe,ee[5]=oe*Ee+se*Ne+ae*He+le*$e,ee[9]=oe*Re+se*Le+ae*Be+le*Xe,ee[13]=oe*Te+se*Ie+ae*ze+le*je,ee[2]=ue*Ce+de*Me+pe*Ge+fe*Fe,ee[6]=ue*Ee+de*Ne+pe*He+fe*$e,ee[10]=ue*Re+de*Le+pe*Be+fe*Xe,ee[14]=ue*Te+de*Ie+pe*ze+fe*je,ee[3]=_e*Ce+ye*Me+be*Ge+Ae*Fe,ee[7]=_e*Ee+ye*Ne+be*He+Ae*$e,ee[11]=_e*Re+ye*Le+be*Be+Ae*Xe,ee[15]=_e*Te+ye*Ie+be*ze+Ae*je,this}multiplyScalar(_){const J=this.elements;return J[0]*=_,J[4]*=_,J[8]*=_,J[12]*=_,J[1]*=_,J[5]*=_,J[9]*=_,J[13]*=_,J[2]*=_,J[6]*=_,J[10]*=_,J[14]*=_,J[3]*=_,J[7]*=_,J[11]*=_,J[15]*=_,this}determinant(){const _=this.elements,J=_[0],Z=_[4],Q=_[8],ee=_[12],te=_[1],ne=_[5],ie=_[9],re=_[13],oe=_[2],se=_[6],ae=_[10],le=_[14],ue=_[3],de=_[7],pe=_[11],fe=_[15];return ue*(+ee*ie*se-Q*re*se-ee*ne*ae+Z*re*ae+Q*ne*le-Z*ie*le)+de*(+J*ie*le-J*re*ae+ee*te*ae-Q*te*le+Q*re*oe-ee*ie*oe)+pe*(+J*re*se-J*ne*le-ee*te*se+Z*te*le+ee*ne*oe-Z*re*oe)+fe*(-Q*ne*oe-J*ie*se+J*ne*ae+Q*te*se-Z*te*ae+Z*ie*oe)}transpose(){const _=this.elements;let J;return J=_[1],_[1]=_[4],_[4]=J,J=_[2],_[2]=_[8],_[8]=J,J=_[6],_[6]=_[9],_[9]=J,J=_[3],_[3]=_[12],_[12]=J,J=_[7],_[7]=_[13],_[13]=J,J=_[11],_[11]=_[14],_[14]=J,this}setPosition(_,J,Z){const Q=this.elements;return _.isVector3?(Q[12]=_.x,Q[13]=_.y,Q[14]=_.z):(Q[12]=_,Q[13]=J,Q[14]=Z),this}invert(){const _=this.elements,J=_[0],Z=_[1],Q=_[2],ee=_[3],te=_[4],ne=_[5],ie=_[6],re=_[7],oe=_[8],se=_[9],ae=_[10],le=_[11],ue=_[12],de=_[13],pe=_[14],fe=_[15],_e=se*pe*re-de*ae*re+de*ie*le-ne*pe*le-se*ie*fe+ne*ae*fe,ye=ue*ae*re-oe*pe*re-ue*ie*le+te*pe*le+oe*ie*fe-te*ae*fe,be=oe*de*re-ue*se*re+ue*ne*le-te*de*le-oe*ne*fe+te*se*fe,Ae=ue*se*ie-oe*de*ie-ue*ne*ae+te*de*ae+oe*ne*pe-te*se*pe,Ce=J*_e+Z*ye+Q*be+ee*Ae;if(Ce===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Ee=1/Ce;return _[0]=_e*Ee,_[1]=(de*ae*ee-se*pe*ee-de*Q*le+Z*pe*le+se*Q*fe-Z*ae*fe)*Ee,_[2]=(ne*pe*ee-de*ie*ee+de*Q*re-Z*pe*re-ne*Q*fe+Z*ie*fe)*Ee,_[3]=(se*ie*ee-ne*ae*ee-se*Q*re+Z*ae*re+ne*Q*le-Z*ie*le)*Ee,_[4]=ye*Ee,_[5]=(oe*pe*ee-ue*ae*ee+ue*Q*le-J*pe*le-oe*Q*fe+J*ae*fe)*Ee,_[6]=(ue*ie*ee-te*pe*ee-ue*Q*re+J*pe*re+te*Q*fe-J*ie*fe)*Ee,_[7]=(te*ae*ee-oe*ie*ee+oe*Q*re-J*ae*re-te*Q*le+J*ie*le)*Ee,_[8]=be*Ee,_[9]=(ue*se*ee-oe*de*ee-ue*Z*le+J*de*le+oe*Z*fe-J*se*fe)*Ee,_[10]=(te*de*ee-ue*ne*ee+ue*Z*re-J*de*re-te*Z*fe+J*ne*fe)*Ee,_[11]=(oe*ne*ee-te*se*ee-oe*Z*re+J*se*re+te*Z*le-J*ne*le)*Ee,_[12]=Ae*Ee,_[13]=(oe*de*Q-ue*se*Q+ue*Z*ae-J*de*ae-oe*Z*pe+J*se*pe)*Ee,_[14]=(ue*ne*Q-te*de*Q-ue*Z*ie+J*de*ie+te*Z*pe-J*ne*pe)*Ee,_[15]=(te*se*Q-oe*ne*Q+oe*Z*ie-J*se*ie-te*Z*ae+J*ne*ae)*Ee,this}scale(_){const J=this.elements,Z=_.x,Q=_.y,ee=_.z;return J[0]*=Z,J[4]*=Q,J[8]*=ee,J[1]*=Z,J[5]*=Q,J[9]*=ee,J[2]*=Z,J[6]*=Q,J[10]*=ee,J[3]*=Z,J[7]*=Q,J[11]*=ee,this}getMaxScaleOnAxis(){const _=this.elements,J=_[0]*_[0]+_[1]*_[1]+_[2]*_[2],Z=_[4]*_[4]+_[5]*_[5]+_[6]*_[6],Q=_[8]*_[8]+_[9]*_[9]+_[10]*_[10];return Math.sqrt(Math.max(J,Z,Q))}makeTranslation(_,J,Z){return _.isVector3?this.set(1,0,0,_.x,0,1,0,_.y,0,0,1,_.z,0,0,0,1):this.set(1,0,0,_,0,1,0,J,0,0,1,Z,0,0,0,1),this}makeRotationX(_){const J=Math.cos(_),Z=Math.sin(_);return this.set(1,0,0,0,0,J,-Z,0,0,Z,J,0,0,0,0,1),this}makeRotationY(_){const J=Math.cos(_),Z=Math.sin(_);return this.set(J,0,Z,0,0,1,0,0,-Z,0,J,0,0,0,0,1),this}makeRotationZ(_){const J=Math.cos(_),Z=Math.sin(_);return this.set(J,-Z,0,0,Z,J,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(_,J){const Z=Math.cos(J),Q=Math.sin(J),ee=1-Z,te=_.x,ne=_.y,ie=_.z,re=ee*te,oe=ee*ne;return this.set(re*te+Z,re*ne-Q*ie,re*ie+Q*ne,0,re*ne+Q*ie,oe*ne+Z,oe*ie-Q*te,0,re*ie-Q*ne,oe*ie+Q*te,ee*ie*ie+Z,0,0,0,0,1),this}makeScale(_,J,Z){return this.set(_,0,0,0,0,J,0,0,0,0,Z,0,0,0,0,1),this}makeShear(_,J,Z,Q,ee,te){return this.set(1,Z,ee,0,_,1,te,0,J,Q,1,0,0,0,0,1),this}compose(_,J,Z){const Q=this.elements,ee=J._x,te=J._y,ne=J._z,ie=J._w,re=ee+ee,oe=te+te,se=ne+ne,ae=ee*re,le=ee*oe,ue=ee*se,de=te*oe,pe=te*se,fe=ne*se,_e=ie*re,ye=ie*oe,be=ie*se,Ae=Z.x,Ce=Z.y,Ee=Z.z;return Q[0]=(1-(de+fe))*Ae,Q[1]=(le+be)*Ae,Q[2]=(ue-ye)*Ae,Q[3]=0,Q[4]=(le-be)*Ce,Q[5]=(1-(ae+fe))*Ce,Q[6]=(pe+_e)*Ce,Q[7]=0,Q[8]=(ue+ye)*Ee,Q[9]=(pe-_e)*Ee,Q[10]=(1-(ae+de))*Ee,Q[11]=0,Q[12]=_.x,Q[13]=_.y,Q[14]=_.z,Q[15]=1,this}decompose(_,J,Z){const Q=this.elements;let ee=_v1$5.set(Q[0],Q[1],Q[2]).length();const te=_v1$5.set(Q[4],Q[5],Q[6]).length(),ne=_v1$5.set(Q[8],Q[9],Q[10]).length();this.determinant()<0&&(ee=-ee),_.x=Q[12],_.y=Q[13],_.z=Q[14],_m1$2.copy(this);const re=1/ee,oe=1/te,se=1/ne;return _m1$2.elements[0]*=re,_m1$2.elements[1]*=re,_m1$2.elements[2]*=re,_m1$2.elements[4]*=oe,_m1$2.elements[5]*=oe,_m1$2.elements[6]*=oe,_m1$2.elements[8]*=se,_m1$2.elements[9]*=se,_m1$2.elements[10]*=se,J.setFromRotationMatrix(_m1$2),Z.x=ee,Z.y=te,Z.z=ne,this}makePerspective(_,J,Z,Q,ee,te,ne=WebGLCoordinateSystem,ie=!1){const re=this.elements,oe=2*ee/(J-_),se=2*ee/(Z-Q),ae=(J+_)/(J-_),le=(Z+Q)/(Z-Q);let ue,de;if(ie)ue=ee/(te-ee),de=te*ee/(te-ee);else if(ne===WebGLCoordinateSystem)ue=-(te+ee)/(te-ee),de=-2*te*ee/(te-ee);else if(ne===WebGPUCoordinateSystem)ue=-te/(te-ee),de=-te*ee/(te-ee);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+ne);return re[0]=oe,re[4]=0,re[8]=ae,re[12]=0,re[1]=0,re[5]=se,re[9]=le,re[13]=0,re[2]=0,re[6]=0,re[10]=ue,re[14]=de,re[3]=0,re[7]=0,re[11]=-1,re[15]=0,this}makeOrthographic(_,J,Z,Q,ee,te,ne=WebGLCoordinateSystem,ie=!1){const re=this.elements,oe=2/(J-_),se=2/(Z-Q),ae=-(J+_)/(J-_),le=-(Z+Q)/(Z-Q);let ue,de;if(ie)ue=1/(te-ee),de=te/(te-ee);else if(ne===WebGLCoordinateSystem)ue=-2/(te-ee),de=-(te+ee)/(te-ee);else if(ne===WebGPUCoordinateSystem)ue=-1/(te-ee),de=-ee/(te-ee);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+ne);return re[0]=oe,re[4]=0,re[8]=0,re[12]=ae,re[1]=0,re[5]=se,re[9]=0,re[13]=le,re[2]=0,re[6]=0,re[10]=ue,re[14]=de,re[3]=0,re[7]=0,re[11]=0,re[15]=1,this}equals(_){const J=this.elements,Z=_.elements;for(let Q=0;Q<16;Q++)if(J[Q]!==Z[Q])return!1;return!0}fromArray(_,J=0){for(let Z=0;Z<16;Z++)this.elements[Z]=_[Z+J];return this}toArray(_=[],J=0){const Z=this.elements;return _[J]=Z[0],_[J+1]=Z[1],_[J+2]=Z[2],_[J+3]=Z[3],_[J+4]=Z[4],_[J+5]=Z[5],_[J+6]=Z[6],_[J+7]=Z[7],_[J+8]=Z[8],_[J+9]=Z[9],_[J+10]=Z[10],_[J+11]=Z[11],_[J+12]=Z[12],_[J+13]=Z[13],_[J+14]=Z[14],_[J+15]=Z[15],_}}const _v1$5=new Vector3,_m1$2=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix$2=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(_=0,J=0,Z=0,Q=Euler.DEFAULT_ORDER){this.isEuler=!0,this._x=_,this._y=J,this._z=Z,this._order=Q}get x(){return this._x}set x(_){this._x=_,this._onChangeCallback()}get y(){return this._y}set y(_){this._y=_,this._onChangeCallback()}get z(){return this._z}set z(_){this._z=_,this._onChangeCallback()}get order(){return this._order}set order(_){this._order=_,this._onChangeCallback()}set(_,J,Z,Q=this._order){return this._x=_,this._y=J,this._z=Z,this._order=Q,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(_){return this._x=_._x,this._y=_._y,this._z=_._z,this._order=_._order,this._onChangeCallback(),this}setFromRotationMatrix(_,J=this._order,Z=!0){const Q=_.elements,ee=Q[0],te=Q[4],ne=Q[8],ie=Q[1],re=Q[5],oe=Q[9],se=Q[2],ae=Q[6],le=Q[10];switch(J){case"XYZ":this._y=Math.asin(clamp$1(ne,-1,1)),Math.abs(ne)<.9999999?(this._x=Math.atan2(-oe,le),this._z=Math.atan2(-te,ee)):(this._x=Math.atan2(ae,re),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp$1(oe,-1,1)),Math.abs(oe)<.9999999?(this._y=Math.atan2(ne,le),this._z=Math.atan2(ie,re)):(this._y=Math.atan2(-se,ee),this._z=0);break;case"ZXY":this._x=Math.asin(clamp$1(ae,-1,1)),Math.abs(ae)<.9999999?(this._y=Math.atan2(-se,le),this._z=Math.atan2(-te,re)):(this._y=0,this._z=Math.atan2(ie,ee));break;case"ZYX":this._y=Math.asin(-clamp$1(se,-1,1)),Math.abs(se)<.9999999?(this._x=Math.atan2(ae,le),this._z=Math.atan2(ie,ee)):(this._x=0,this._z=Math.atan2(-te,re));break;case"YZX":this._z=Math.asin(clamp$1(ie,-1,1)),Math.abs(ie)<.9999999?(this._x=Math.atan2(-oe,re),this._y=Math.atan2(-se,ee)):(this._x=0,this._y=Math.atan2(ne,le));break;case"XZY":this._z=Math.asin(-clamp$1(te,-1,1)),Math.abs(te)<.9999999?(this._x=Math.atan2(ae,re),this._y=Math.atan2(ne,ee)):(this._x=Math.atan2(-oe,le),this._y=0);break;default:warn("Euler: .setFromRotationMatrix() encountered an unknown order: "+J)}return this._order=J,Z===!0&&this._onChangeCallback(),this}setFromQuaternion(_,J,Z){return _matrix$2.makeRotationFromQuaternion(_),this.setFromRotationMatrix(_matrix$2,J,Z)}setFromVector3(_,J=this._order){return this.set(_.x,_.y,_.z,J)}reorder(_){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,_)}equals(_){return _._x===this._x&&_._y===this._y&&_._z===this._z&&_._order===this._order}fromArray(_){return this._x=_[0],this._y=_[1],this._z=_[2],_[3]!==void 0&&(this._order=_[3]),this._onChangeCallback(),this}toArray(_=[],J=0){return _[J]=this._x,_[J+1]=this._y,_[J+2]=this._z,_[J+3]=this._order,_}_onChange(_){return this._onChangeCallback=_,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";class Layers{constructor(){this.mask=1}set(_){this.mask=(1<<_|0)>>>0}enable(_){this.mask|=1<<_|0}enableAll(){this.mask=-1}toggle(_){this.mask^=1<<_|0}disable(_){this.mask&=~(1<<_|0)}disableAll(){this.mask=0}test(_){return(this.mask&_.mask)!==0}isEnabled(_){return(this.mask&(1<<_|0))!==0}}let _object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$1$1=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"},_childaddedEvent={type:"childadded",child:null},_childremovedEvent={type:"childremoved",child:null};class Object3D extends EventDispatcher$1{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const _=new Vector3,J=new Euler,Z=new Quaternion,Q=new Vector3(1,1,1);function ee(){Z.setFromEuler(J,!1)}function te(){J.setFromQuaternion(Z,void 0,!1)}J._onChange(ee),Z._onChange(te),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:_},rotation:{configurable:!0,enumerable:!0,value:J},quaternion:{configurable:!0,enumerable:!0,value:Z},scale:{configurable:!0,enumerable:!0,value:Q},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(_){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(_),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(_){return this.quaternion.premultiply(_),this}setRotationFromAxisAngle(_,J){this.quaternion.setFromAxisAngle(_,J)}setRotationFromEuler(_){this.quaternion.setFromEuler(_,!0)}setRotationFromMatrix(_){this.quaternion.setFromRotationMatrix(_)}setRotationFromQuaternion(_){this.quaternion.copy(_)}rotateOnAxis(_,J){return _q1.setFromAxisAngle(_,J),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(_,J){return _q1.setFromAxisAngle(_,J),this.quaternion.premultiply(_q1),this}rotateX(_){return this.rotateOnAxis(_xAxis,_)}rotateY(_){return this.rotateOnAxis(_yAxis,_)}rotateZ(_){return this.rotateOnAxis(_zAxis,_)}translateOnAxis(_,J){return _v1$4.copy(_).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(J)),this}translateX(_){return this.translateOnAxis(_xAxis,_)}translateY(_){return this.translateOnAxis(_yAxis,_)}translateZ(_){return this.translateOnAxis(_zAxis,_)}localToWorld(_){return this.updateWorldMatrix(!0,!1),_.applyMatrix4(this.matrixWorld)}worldToLocal(_){return this.updateWorldMatrix(!0,!1),_.applyMatrix4(_m1$1$1.copy(this.matrixWorld).invert())}lookAt(_,J,Z){_.isVector3?_target.copy(_):_target.set(_,J,Z);const Q=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1$1.lookAt(_position$3,_target,this.up):_m1$1$1.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$1$1),Q&&(_m1$1$1.extractRotation(Q.matrixWorld),_q1.setFromRotationMatrix(_m1$1$1),this.quaternion.premultiply(_q1.invert()))}add(_){if(arguments.length>1){for(let J=0;J<arguments.length;J++)this.add(arguments[J]);return this}return _===this?(error("Object3D.add: object can't be added as a child of itself.",_),this):(_&&_.isObject3D?(_.removeFromParent(),_.parent=this,this.children.push(_),_.dispatchEvent(_addedEvent),_childaddedEvent.child=_,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null):error("Object3D.add: object not an instance of THREE.Object3D.",_),this)}remove(_){if(arguments.length>1){for(let Z=0;Z<arguments.length;Z++)this.remove(arguments[Z]);return this}const J=this.children.indexOf(_);return J!==-1&&(_.parent=null,this.children.splice(J,1),_.dispatchEvent(_removedEvent),_childremovedEvent.child=_,this.dispatchEvent(_childremovedEvent),_childremovedEvent.child=null),this}removeFromParent(){const _=this.parent;return _!==null&&_.remove(this),this}clear(){return this.remove(...this.children)}attach(_){return this.updateWorldMatrix(!0,!1),_m1$1$1.copy(this.matrixWorld).invert(),_.parent!==null&&(_.parent.updateWorldMatrix(!0,!1),_m1$1$1.multiply(_.parent.matrixWorld)),_.applyMatrix4(_m1$1$1),_.removeFromParent(),_.parent=this,this.children.push(_),_.updateWorldMatrix(!1,!0),_.dispatchEvent(_addedEvent),_childaddedEvent.child=_,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null,this}getObjectById(_){return this.getObjectByProperty("id",_)}getObjectByName(_){return this.getObjectByProperty("name",_)}getObjectByProperty(_,J){if(this[_]===J)return this;for(let Z=0,Q=this.children.length;Z<Q;Z++){const te=this.children[Z].getObjectByProperty(_,J);if(te!==void 0)return te}}getObjectsByProperty(_,J,Z=[]){this[_]===J&&Z.push(this);const Q=this.children;for(let ee=0,te=Q.length;ee<te;ee++)Q[ee].getObjectsByProperty(_,J,Z);return Z}getWorldPosition(_){return this.updateWorldMatrix(!0,!1),_.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(_){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_,_scale$2),_}getWorldScale(_){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,_),_}getWorldDirection(_){this.updateWorldMatrix(!0,!1);const J=this.matrixWorld.elements;return _.set(J[8],J[9],J[10]).normalize()}raycast(){}traverse(_){_(this);const J=this.children;for(let Z=0,Q=J.length;Z<Q;Z++)J[Z].traverse(_)}traverseVisible(_){if(this.visible===!1)return;_(this);const J=this.children;for(let Z=0,Q=J.length;Z<Q;Z++)J[Z].traverseVisible(_)}traverseAncestors(_){const J=this.parent;J!==null&&(_(J),J.traverseAncestors(_))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(_){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||_)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,_=!0);const J=this.children;for(let Z=0,Q=J.length;Z<Q;Z++)J[Z].updateMatrixWorld(_)}updateWorldMatrix(_,J){const Z=this.parent;if(_===!0&&Z!==null&&Z.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),J===!0){const Q=this.children;for(let ee=0,te=Q.length;ee<te;ee++)Q[ee].updateWorldMatrix(!1,!0)}}toJSON(_){const J=_===void 0||typeof _=="string",Z={};J&&(_={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},Z.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const Q={};Q.uuid=this.uuid,Q.type=this.type,this.name!==""&&(Q.name=this.name),this.castShadow===!0&&(Q.castShadow=!0),this.receiveShadow===!0&&(Q.receiveShadow=!0),this.visible===!1&&(Q.visible=!1),this.frustumCulled===!1&&(Q.frustumCulled=!1),this.renderOrder!==0&&(Q.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(Q.userData=this.userData),Q.layers=this.layers.mask,Q.matrix=this.matrix.toArray(),Q.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(Q.matrixAutoUpdate=!1),this.isInstancedMesh&&(Q.type="InstancedMesh",Q.count=this.count,Q.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(Q.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(Q.type="BatchedMesh",Q.perObjectFrustumCulled=this.perObjectFrustumCulled,Q.sortObjects=this.sortObjects,Q.drawRanges=this._drawRanges,Q.reservedRanges=this._reservedRanges,Q.geometryInfo=this._geometryInfo.map(ne=>({...ne,boundingBox:ne.boundingBox?ne.boundingBox.toJSON():void 0,boundingSphere:ne.boundingSphere?ne.boundingSphere.toJSON():void 0})),Q.instanceInfo=this._instanceInfo.map(ne=>({...ne})),Q.availableInstanceIds=this._availableInstanceIds.slice(),Q.availableGeometryIds=this._availableGeometryIds.slice(),Q.nextIndexStart=this._nextIndexStart,Q.nextVertexStart=this._nextVertexStart,Q.geometryCount=this._geometryCount,Q.maxInstanceCount=this._maxInstanceCount,Q.maxVertexCount=this._maxVertexCount,Q.maxIndexCount=this._maxIndexCount,Q.geometryInitialized=this._geometryInitialized,Q.matricesTexture=this._matricesTexture.toJSON(_),Q.indirectTexture=this._indirectTexture.toJSON(_),this._colorsTexture!==null&&(Q.colorsTexture=this._colorsTexture.toJSON(_)),this.boundingSphere!==null&&(Q.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(Q.boundingBox=this.boundingBox.toJSON()));function ee(ne,ie){return ne[ie.uuid]===void 0&&(ne[ie.uuid]=ie.toJSON(_)),ie.uuid}if(this.isScene)this.background&&(this.background.isColor?Q.background=this.background.toJSON():this.background.isTexture&&(Q.background=this.background.toJSON(_).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(Q.environment=this.environment.toJSON(_).uuid);else if(this.isMesh||this.isLine||this.isPoints){Q.geometry=ee(_.geometries,this.geometry);const ne=this.geometry.parameters;if(ne!==void 0&&ne.shapes!==void 0){const ie=ne.shapes;if(Array.isArray(ie))for(let re=0,oe=ie.length;re<oe;re++){const se=ie[re];ee(_.shapes,se)}else ee(_.shapes,ie)}}if(this.isSkinnedMesh&&(Q.bindMode=this.bindMode,Q.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(ee(_.skeletons,this.skeleton),Q.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const ne=[];for(let ie=0,re=this.material.length;ie<re;ie++)ne.push(ee(_.materials,this.material[ie]));Q.material=ne}else Q.material=ee(_.materials,this.material);if(this.children.length>0){Q.children=[];for(let ne=0;ne<this.children.length;ne++)Q.children.push(this.children[ne].toJSON(_).object)}if(this.animations.length>0){Q.animations=[];for(let ne=0;ne<this.animations.length;ne++){const ie=this.animations[ne];Q.animations.push(ee(_.animations,ie))}}if(J){const ne=te(_.geometries),ie=te(_.materials),re=te(_.textures),oe=te(_.images),se=te(_.shapes),ae=te(_.skeletons),le=te(_.animations),ue=te(_.nodes);ne.length>0&&(Z.geometries=ne),ie.length>0&&(Z.materials=ie),re.length>0&&(Z.textures=re),oe.length>0&&(Z.images=oe),se.length>0&&(Z.shapes=se),ae.length>0&&(Z.skeletons=ae),le.length>0&&(Z.animations=le),ue.length>0&&(Z.nodes=ue)}return Z.object=Q,Z;function te(ne){const ie=[];for(const re in ne){const oe=ne[re];delete oe.metadata,ie.push(oe)}return ie}}clone(_){return new this.constructor().copy(this,_)}copy(_,J=!0){if(this.name=_.name,this.up.copy(_.up),this.position.copy(_.position),this.rotation.order=_.rotation.order,this.quaternion.copy(_.quaternion),this.scale.copy(_.scale),this.matrix.copy(_.matrix),this.matrixWorld.copy(_.matrixWorld),this.matrixAutoUpdate=_.matrixAutoUpdate,this.matrixWorldAutoUpdate=_.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=_.matrixWorldNeedsUpdate,this.layers.mask=_.layers.mask,this.visible=_.visible,this.castShadow=_.castShadow,this.receiveShadow=_.receiveShadow,this.frustumCulled=_.frustumCulled,this.renderOrder=_.renderOrder,this.animations=_.animations.slice(),this.userData=JSON.parse(JSON.stringify(_.userData)),J===!0)for(let Z=0;Z<_.children.length;Z++){const Q=_.children[Z];this.add(Q.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0);Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0;Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _v0$1=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$2=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3,_v40=new Vector4,_v41=new Vector4,_v42=new Vector4;class Triangle{constructor(_=new Vector3,J=new Vector3,Z=new Vector3){this.a=_,this.b=J,this.c=Z}static getNormal(_,J,Z,Q){Q.subVectors(Z,J),_v0$1.subVectors(_,J),Q.cross(_v0$1);const ee=Q.lengthSq();return ee>0?Q.multiplyScalar(1/Math.sqrt(ee)):Q.set(0,0,0)}static getBarycoord(_,J,Z,Q,ee){_v0$1.subVectors(Q,J),_v1$3.subVectors(Z,J),_v2$2.subVectors(_,J);const te=_v0$1.dot(_v0$1),ne=_v0$1.dot(_v1$3),ie=_v0$1.dot(_v2$2),re=_v1$3.dot(_v1$3),oe=_v1$3.dot(_v2$2),se=te*re-ne*ne;if(se===0)return ee.set(0,0,0),null;const ae=1/se,le=(re*ie-ne*oe)*ae,ue=(te*oe-ne*ie)*ae;return ee.set(1-le-ue,ue,le)}static containsPoint(_,J,Z,Q){return this.getBarycoord(_,J,Z,Q,_v3$2)===null?!1:_v3$2.x>=0&&_v3$2.y>=0&&_v3$2.x+_v3$2.y<=1}static getInterpolation(_,J,Z,Q,ee,te,ne,ie){return this.getBarycoord(_,J,Z,Q,_v3$2)===null?(ie.x=0,ie.y=0,"z"in ie&&(ie.z=0),"w"in ie&&(ie.w=0),null):(ie.setScalar(0),ie.addScaledVector(ee,_v3$2.x),ie.addScaledVector(te,_v3$2.y),ie.addScaledVector(ne,_v3$2.z),ie)}static getInterpolatedAttribute(_,J,Z,Q,ee,te){return _v40.setScalar(0),_v41.setScalar(0),_v42.setScalar(0),_v40.fromBufferAttribute(_,J),_v41.fromBufferAttribute(_,Z),_v42.fromBufferAttribute(_,Q),te.setScalar(0),te.addScaledVector(_v40,ee.x),te.addScaledVector(_v41,ee.y),te.addScaledVector(_v42,ee.z),te}static isFrontFacing(_,J,Z,Q){return _v0$1.subVectors(Z,J),_v1$3.subVectors(_,J),_v0$1.cross(_v1$3).dot(Q)<0}set(_,J,Z){return this.a.copy(_),this.b.copy(J),this.c.copy(Z),this}setFromPointsAndIndices(_,J,Z,Q){return this.a.copy(_[J]),this.b.copy(_[Z]),this.c.copy(_[Q]),this}setFromAttributeAndIndices(_,J,Z,Q){return this.a.fromBufferAttribute(_,J),this.b.fromBufferAttribute(_,Z),this.c.fromBufferAttribute(_,Q),this}clone(){return new this.constructor().copy(this)}copy(_){return this.a.copy(_.a),this.b.copy(_.b),this.c.copy(_.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5}getMidpoint(_){return _.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(_){return Triangle.getNormal(this.a,this.b,this.c,_)}getPlane(_){return _.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(_,J){return Triangle.getBarycoord(_,this.a,this.b,this.c,J)}getInterpolation(_,J,Z,Q,ee){return Triangle.getInterpolation(_,this.a,this.b,this.c,J,Z,Q,ee)}containsPoint(_){return Triangle.containsPoint(_,this.a,this.b,this.c)}isFrontFacing(_){return Triangle.isFrontFacing(this.a,this.b,this.c,_)}intersectsBox(_){return _.intersectsTriangle(this)}closestPointToPoint(_,J){const Z=this.a,Q=this.b,ee=this.c;let te,ne;_vab.subVectors(Q,Z),_vac.subVectors(ee,Z),_vap.subVectors(_,Z);const ie=_vab.dot(_vap),re=_vac.dot(_vap);if(ie<=0&&re<=0)return J.copy(Z);_vbp.subVectors(_,Q);const oe=_vab.dot(_vbp),se=_vac.dot(_vbp);if(oe>=0&&se<=oe)return J.copy(Q);const ae=ie*se-oe*re;if(ae<=0&&ie>=0&&oe<=0)return te=ie/(ie-oe),J.copy(Z).addScaledVector(_vab,te);_vcp.subVectors(_,ee);const le=_vab.dot(_vcp),ue=_vac.dot(_vcp);if(ue>=0&&le<=ue)return J.copy(ee);const de=le*re-ie*ue;if(de<=0&&re>=0&&ue<=0)return ne=re/(re-ue),J.copy(Z).addScaledVector(_vac,ne);const pe=oe*ue-le*se;if(pe<=0&&se-oe>=0&&le-ue>=0)return _vbc.subVectors(ee,Q),ne=(se-oe)/(se-oe+(le-ue)),J.copy(Q).addScaledVector(_vbc,ne);const fe=1/(pe+de+ae);return te=de*fe,ne=ae*fe,J.copy(Z).addScaledVector(_vab,te).addScaledVector(_vac,ne)}equals(_){return _.a.equals(this.a)&&_.b.equals(this.b)&&_.c.equals(this.c)}}const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb$1(G,_,J){return J<0&&(J+=1),J>1&&(J-=1),J<1/6?G+(_-G)*6*J:J<1/2?_:J<2/3?G+(_-G)*6*(2/3-J):G}class Color{constructor(_,J,Z){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(_,J,Z)}set(_,J,Z){if(J===void 0&&Z===void 0){const Q=_;Q&&Q.isColor?this.copy(Q):typeof Q=="number"?this.setHex(Q):typeof Q=="string"&&this.setStyle(Q)}else this.setRGB(_,J,Z);return this}setScalar(_){return this.r=_,this.g=_,this.b=_,this}setHex(_,J=SRGBColorSpace){return _=Math.floor(_),this.r=(_>>16&255)/255,this.g=(_>>8&255)/255,this.b=(_&255)/255,ColorManagement.colorSpaceToWorking(this,J),this}setRGB(_,J,Z,Q=ColorManagement.workingColorSpace){return this.r=_,this.g=J,this.b=Z,ColorManagement.colorSpaceToWorking(this,Q),this}setHSL(_,J,Z,Q=ColorManagement.workingColorSpace){if(_=euclideanModulo(_,1),J=clamp$1(J,0,1),Z=clamp$1(Z,0,1),J===0)this.r=this.g=this.b=Z;else{const ee=Z<=.5?Z*(1+J):Z+J-Z*J,te=2*Z-ee;this.r=hue2rgb$1(te,ee,_+1/3),this.g=hue2rgb$1(te,ee,_),this.b=hue2rgb$1(te,ee,_-1/3)}return ColorManagement.colorSpaceToWorking(this,Q),this}setStyle(_,J=SRGBColorSpace){function Z(ee){ee!==void 0&&parseFloat(ee)<1&&warn("Color: Alpha component of "+_+" will be ignored.")}let Q;if(Q=/^(\w+)\(([^\)]*)\)/.exec(_)){let ee;const te=Q[1],ne=Q[2];switch(te){case"rgb":case"rgba":if(ee=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(ne))return Z(ee[4]),this.setRGB(Math.min(255,parseInt(ee[1],10))/255,Math.min(255,parseInt(ee[2],10))/255,Math.min(255,parseInt(ee[3],10))/255,J);if(ee=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(ne))return Z(ee[4]),this.setRGB(Math.min(100,parseInt(ee[1],10))/100,Math.min(100,parseInt(ee[2],10))/100,Math.min(100,parseInt(ee[3],10))/100,J);break;case"hsl":case"hsla":if(ee=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(ne))return Z(ee[4]),this.setHSL(parseFloat(ee[1])/360,parseFloat(ee[2])/100,parseFloat(ee[3])/100,J);break;default:warn("Color: Unknown color model "+_)}}else if(Q=/^\#([A-Fa-f\d]+)$/.exec(_)){const ee=Q[1],te=ee.length;if(te===3)return this.setRGB(parseInt(ee.charAt(0),16)/15,parseInt(ee.charAt(1),16)/15,parseInt(ee.charAt(2),16)/15,J);if(te===6)return this.setHex(parseInt(ee,16),J);warn("Color: Invalid hex color "+_)}else if(_&&_.length>0)return this.setColorName(_,J);return this}setColorName(_,J=SRGBColorSpace){const Z=_colorKeywords[_.toLowerCase()];return Z!==void 0?this.setHex(Z,J):warn("Color: Unknown color "+_),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(_){return this.r=_.r,this.g=_.g,this.b=_.b,this}copySRGBToLinear(_){return this.r=SRGBToLinear(_.r),this.g=SRGBToLinear(_.g),this.b=SRGBToLinear(_.b),this}copyLinearToSRGB(_){return this.r=LinearToSRGB(_.r),this.g=LinearToSRGB(_.g),this.b=LinearToSRGB(_.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(_=SRGBColorSpace){return ColorManagement.workingToColorSpace(_color.copy(this),_),Math.round(clamp$1(_color.r*255,0,255))*65536+Math.round(clamp$1(_color.g*255,0,255))*256+Math.round(clamp$1(_color.b*255,0,255))}getHexString(_=SRGBColorSpace){return("000000"+this.getHex(_).toString(16)).slice(-6)}getHSL(_,J=ColorManagement.workingColorSpace){ColorManagement.workingToColorSpace(_color.copy(this),J);const Z=_color.r,Q=_color.g,ee=_color.b,te=Math.max(Z,Q,ee),ne=Math.min(Z,Q,ee);let ie,re;const oe=(ne+te)/2;if(ne===te)ie=0,re=0;else{const se=te-ne;switch(re=oe<=.5?se/(te+ne):se/(2-te-ne),te){case Z:ie=(Q-ee)/se+(Q<ee?6:0);break;case Q:ie=(ee-Z)/se+2;break;case ee:ie=(Z-Q)/se+4;break}ie/=6}return _.h=ie,_.s=re,_.l=oe,_}getRGB(_,J=ColorManagement.workingColorSpace){return ColorManagement.workingToColorSpace(_color.copy(this),J),_.r=_color.r,_.g=_color.g,_.b=_color.b,_}getStyle(_=SRGBColorSpace){ColorManagement.workingToColorSpace(_color.copy(this),_);const J=_color.r,Z=_color.g,Q=_color.b;return _!==SRGBColorSpace?`color(${_} ${J.toFixed(3)} ${Z.toFixed(3)} ${Q.toFixed(3)})`:`rgb(${Math.round(J*255)},${Math.round(Z*255)},${Math.round(Q*255)})`}offsetHSL(_,J,Z){return this.getHSL(_hslA),this.setHSL(_hslA.h+_,_hslA.s+J,_hslA.l+Z)}add(_){return this.r+=_.r,this.g+=_.g,this.b+=_.b,this}addColors(_,J){return this.r=_.r+J.r,this.g=_.g+J.g,this.b=_.b+J.b,this}addScalar(_){return this.r+=_,this.g+=_,this.b+=_,this}sub(_){return this.r=Math.max(0,this.r-_.r),this.g=Math.max(0,this.g-_.g),this.b=Math.max(0,this.b-_.b),this}multiply(_){return this.r*=_.r,this.g*=_.g,this.b*=_.b,this}multiplyScalar(_){return this.r*=_,this.g*=_,this.b*=_,this}lerp(_,J){return this.r+=(_.r-this.r)*J,this.g+=(_.g-this.g)*J,this.b+=(_.b-this.b)*J,this}lerpColors(_,J,Z){return this.r=_.r+(J.r-_.r)*Z,this.g=_.g+(J.g-_.g)*Z,this.b=_.b+(J.b-_.b)*Z,this}lerpHSL(_,J){this.getHSL(_hslA),_.getHSL(_hslB);const Z=lerp(_hslA.h,_hslB.h,J),Q=lerp(_hslA.s,_hslB.s,J),ee=lerp(_hslA.l,_hslB.l,J);return this.setHSL(Z,Q,ee),this}setFromVector3(_){return this.r=_.x,this.g=_.y,this.b=_.z,this}applyMatrix3(_){const J=this.r,Z=this.g,Q=this.b,ee=_.elements;return this.r=ee[0]*J+ee[3]*Z+ee[6]*Q,this.g=ee[1]*J+ee[4]*Z+ee[7]*Q,this.b=ee[2]*J+ee[5]*Z+ee[8]*Q,this}equals(_){return _.r===this.r&&_.g===this.g&&_.b===this.b}fromArray(_,J=0){return this.r=_[J],this.g=_[J+1],this.b=_[J+2],this}toArray(_=[],J=0){return _[J]=this.r,_[J+1]=this.g,_[J+2]=this.b,_}fromBufferAttribute(_,J){return this.r=_.getX(J),this.g=_.getY(J),this.b=_.getZ(J),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _color=new Color;Color.NAMES=_colorKeywords;let _materialId=0;class Material extends EventDispatcher$1{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_materialId++}),this.uuid=generateUUID(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Color(0,0,0),this.blendAlpha=0,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(_){this._alphaTest>0!=_>0&&this.version++,this._alphaTest=_}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(_){if(_!==void 0)for(const J in _){const Z=_[J];if(Z===void 0){warn(`Material: parameter '${J}' has value of undefined.`);continue}const Q=this[J];if(Q===void 0){warn(`Material: '${J}' is not a property of THREE.${this.type}.`);continue}Q&&Q.isColor?Q.set(Z):Q&&Q.isVector3&&Z&&Z.isVector3?Q.copy(Z):this[J]=Z}}toJSON(_){const J=_===void 0||typeof _=="string";J&&(_={textures:{},images:{}});const Z={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};Z.uuid=this.uuid,Z.type=this.type,this.name!==""&&(Z.name=this.name),this.color&&this.color.isColor&&(Z.color=this.color.getHex()),this.roughness!==void 0&&(Z.roughness=this.roughness),this.metalness!==void 0&&(Z.metalness=this.metalness),this.sheen!==void 0&&(Z.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(Z.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(Z.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(Z.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(Z.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(Z.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(Z.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(Z.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(Z.shininess=this.shininess),this.clearcoat!==void 0&&(Z.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(Z.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(Z.clearcoatMap=this.clearcoatMap.toJSON(_).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(Z.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(_).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(Z.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(_).uuid,Z.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(Z.sheenColorMap=this.sheenColorMap.toJSON(_).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(Z.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(_).uuid),this.dispersion!==void 0&&(Z.dispersion=this.dispersion),this.iridescence!==void 0&&(Z.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(Z.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(Z.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(Z.iridescenceMap=this.iridescenceMap.toJSON(_).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(Z.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(_).uuid),this.anisotropy!==void 0&&(Z.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(Z.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(Z.anisotropyMap=this.anisotropyMap.toJSON(_).uuid),this.map&&this.map.isTexture&&(Z.map=this.map.toJSON(_).uuid),this.matcap&&this.matcap.isTexture&&(Z.matcap=this.matcap.toJSON(_).uuid),this.alphaMap&&this.alphaMap.isTexture&&(Z.alphaMap=this.alphaMap.toJSON(_).uuid),this.lightMap&&this.lightMap.isTexture&&(Z.lightMap=this.lightMap.toJSON(_).uuid,Z.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(Z.aoMap=this.aoMap.toJSON(_).uuid,Z.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(Z.bumpMap=this.bumpMap.toJSON(_).uuid,Z.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(Z.normalMap=this.normalMap.toJSON(_).uuid,Z.normalMapType=this.normalMapType,Z.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(Z.displacementMap=this.displacementMap.toJSON(_).uuid,Z.displacementScale=this.displacementScale,Z.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(Z.roughnessMap=this.roughnessMap.toJSON(_).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(Z.metalnessMap=this.metalnessMap.toJSON(_).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(Z.emissiveMap=this.emissiveMap.toJSON(_).uuid),this.specularMap&&this.specularMap.isTexture&&(Z.specularMap=this.specularMap.toJSON(_).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(Z.specularIntensityMap=this.specularIntensityMap.toJSON(_).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(Z.specularColorMap=this.specularColorMap.toJSON(_).uuid),this.envMap&&this.envMap.isTexture&&(Z.envMap=this.envMap.toJSON(_).uuid,this.combine!==void 0&&(Z.combine=this.combine)),this.envMapRotation!==void 0&&(Z.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(Z.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(Z.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(Z.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(Z.gradientMap=this.gradientMap.toJSON(_).uuid),this.transmission!==void 0&&(Z.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(Z.transmissionMap=this.transmissionMap.toJSON(_).uuid),this.thickness!==void 0&&(Z.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(Z.thicknessMap=this.thicknessMap.toJSON(_).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(Z.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(Z.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(Z.size=this.size),this.shadowSide!==null&&(Z.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(Z.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(Z.blending=this.blending),this.side!==FrontSide&&(Z.side=this.side),this.vertexColors===!0&&(Z.vertexColors=!0),this.opacity<1&&(Z.opacity=this.opacity),this.transparent===!0&&(Z.transparent=!0),this.blendSrc!==SrcAlphaFactor&&(Z.blendSrc=this.blendSrc),this.blendDst!==OneMinusSrcAlphaFactor&&(Z.blendDst=this.blendDst),this.blendEquation!==AddEquation&&(Z.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(Z.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(Z.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(Z.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(Z.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(Z.blendAlpha=this.blendAlpha),this.depthFunc!==LessEqualDepth&&(Z.depthFunc=this.depthFunc),this.depthTest===!1&&(Z.depthTest=this.depthTest),this.depthWrite===!1&&(Z.depthWrite=this.depthWrite),this.colorWrite===!1&&(Z.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(Z.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==AlwaysStencilFunc&&(Z.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(Z.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(Z.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==KeepStencilOp&&(Z.stencilFail=this.stencilFail),this.stencilZFail!==KeepStencilOp&&(Z.stencilZFail=this.stencilZFail),this.stencilZPass!==KeepStencilOp&&(Z.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(Z.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(Z.rotation=this.rotation),this.polygonOffset===!0&&(Z.polygonOffset=!0),this.polygonOffsetFactor!==0&&(Z.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(Z.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(Z.linewidth=this.linewidth),this.dashSize!==void 0&&(Z.dashSize=this.dashSize),this.gapSize!==void 0&&(Z.gapSize=this.gapSize),this.scale!==void 0&&(Z.scale=this.scale),this.dithering===!0&&(Z.dithering=!0),this.alphaTest>0&&(Z.alphaTest=this.alphaTest),this.alphaHash===!0&&(Z.alphaHash=!0),this.alphaToCoverage===!0&&(Z.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(Z.premultipliedAlpha=!0),this.forceSinglePass===!0&&(Z.forceSinglePass=!0),this.wireframe===!0&&(Z.wireframe=!0),this.wireframeLinewidth>1&&(Z.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(Z.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(Z.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(Z.flatShading=!0),this.visible===!1&&(Z.visible=!1),this.toneMapped===!1&&(Z.toneMapped=!1),this.fog===!1&&(Z.fog=!1),Object.keys(this.userData).length>0&&(Z.userData=this.userData);function Q(ee){const te=[];for(const ne in ee){const ie=ee[ne];delete ie.metadata,te.push(ie)}return te}if(J){const ee=Q(_.textures),te=Q(_.images);ee.length>0&&(Z.textures=ee),te.length>0&&(Z.images=te)}return Z}clone(){return new this.constructor().copy(this)}copy(_){this.name=_.name,this.blending=_.blending,this.side=_.side,this.vertexColors=_.vertexColors,this.opacity=_.opacity,this.transparent=_.transparent,this.blendSrc=_.blendSrc,this.blendDst=_.blendDst,this.blendEquation=_.blendEquation,this.blendSrcAlpha=_.blendSrcAlpha,this.blendDstAlpha=_.blendDstAlpha,this.blendEquationAlpha=_.blendEquationAlpha,this.blendColor.copy(_.blendColor),this.blendAlpha=_.blendAlpha,this.depthFunc=_.depthFunc,this.depthTest=_.depthTest,this.depthWrite=_.depthWrite,this.stencilWriteMask=_.stencilWriteMask,this.stencilFunc=_.stencilFunc,this.stencilRef=_.stencilRef,this.stencilFuncMask=_.stencilFuncMask,this.stencilFail=_.stencilFail,this.stencilZFail=_.stencilZFail,this.stencilZPass=_.stencilZPass,this.stencilWrite=_.stencilWrite;const J=_.clippingPlanes;let Z=null;if(J!==null){const Q=J.length;Z=new Array(Q);for(let ee=0;ee!==Q;++ee)Z[ee]=J[ee].clone()}return this.clippingPlanes=Z,this.clipIntersection=_.clipIntersection,this.clipShadows=_.clipShadows,this.shadowSide=_.shadowSide,this.colorWrite=_.colorWrite,this.precision=_.precision,this.polygonOffset=_.polygonOffset,this.polygonOffsetFactor=_.polygonOffsetFactor,this.polygonOffsetUnits=_.polygonOffsetUnits,this.dithering=_.dithering,this.alphaTest=_.alphaTest,this.alphaHash=_.alphaHash,this.alphaToCoverage=_.alphaToCoverage,this.premultipliedAlpha=_.premultipliedAlpha,this.forceSinglePass=_.forceSinglePass,this.visible=_.visible,this.toneMapped=_.toneMapped,this.userData=JSON.parse(JSON.stringify(_.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(_){_===!0&&this.version++}}class MeshBasicMaterial extends Material{constructor(_){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.specularMap=_.specularMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.envMapRotation.copy(_.envMapRotation),this.combine=_.combine,this.reflectivity=_.reflectivity,this.refractionRatio=_.refractionRatio,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.fog=_.fog,this}}const _tables=_generateTables();function _generateTables(){const G=new ArrayBuffer(4),_=new Float32Array(G),J=new Uint32Array(G),Z=new Uint32Array(512),Q=new Uint32Array(512);for(let ie=0;ie<256;++ie){const re=ie-127;re<-27?(Z[ie]=0,Z[ie|256]=32768,Q[ie]=24,Q[ie|256]=24):re<-14?(Z[ie]=1024>>-re-14,Z[ie|256]=1024>>-re-14|32768,Q[ie]=-re-1,Q[ie|256]=-re-1):re<=15?(Z[ie]=re+15<<10,Z[ie|256]=re+15<<10|32768,Q[ie]=13,Q[ie|256]=13):re<128?(Z[ie]=31744,Z[ie|256]=64512,Q[ie]=24,Q[ie|256]=24):(Z[ie]=31744,Z[ie|256]=64512,Q[ie]=13,Q[ie|256]=13)}const ee=new Uint32Array(2048),te=new Uint32Array(64),ne=new Uint32Array(64);for(let ie=1;ie<1024;++ie){let re=ie<<13,oe=0;for(;(re&8388608)===0;)re<<=1,oe-=8388608;re&=-8388609,oe+=947912704,ee[ie]=re|oe}for(let ie=1024;ie<2048;++ie)ee[ie]=939524096+(ie-1024<<13);for(let ie=1;ie<31;++ie)te[ie]=ie<<23;te[31]=1199570944,te[32]=2147483648;for(let ie=33;ie<63;++ie)te[ie]=2147483648+(ie-32<<23);te[63]=3347054592;for(let ie=1;ie<64;++ie)ie!==32&&(ne[ie]=1024);return{floatView:_,uint32View:J,baseTable:Z,shiftTable:Q,mantissaTable:ee,exponentTable:te,offsetTable:ne}}function toHalfFloat(G){Math.abs(G)>65504&&warn("DataUtils.toHalfFloat(): Value out of range."),G=clamp$1(G,-65504,65504),_tables.floatView[0]=G;const _=_tables.uint32View[0],J=_>>23&511;return _tables.baseTable[J]+((_&8388607)>>_tables.shiftTable[J])}function fromHalfFloat(G){const _=G>>10;return _tables.uint32View[0]=_tables.mantissaTable[_tables.offsetTable[_]+(G&1023)]+_tables.exponentTable[_],_tables.floatView[0]}class DataUtils{static toHalfFloat(_){return toHalfFloat(_)}static fromHalfFloat(_){return fromHalfFloat(_)}}const _vector$9=new Vector3,_vector2$1=new Vector2;let _id$2=0;class BufferAttribute{constructor(_,J,Z=!1){if(Array.isArray(_))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:_id$2++}),this.name="",this.array=_,this.itemSize=J,this.count=_!==void 0?_.length/J:0,this.normalized=Z,this.usage=StaticDrawUsage,this.updateRanges=[],this.gpuType=FloatType,this.version=0}onUploadCallback(){}set needsUpdate(_){_===!0&&this.version++}setUsage(_){return this.usage=_,this}addUpdateRange(_,J){this.updateRanges.push({start:_,count:J})}clearUpdateRanges(){this.updateRanges.length=0}copy(_){return this.name=_.name,this.array=new _.array.constructor(_.array),this.itemSize=_.itemSize,this.count=_.count,this.normalized=_.normalized,this.usage=_.usage,this.gpuType=_.gpuType,this}copyAt(_,J,Z){_*=this.itemSize,Z*=J.itemSize;for(let Q=0,ee=this.itemSize;Q<ee;Q++)this.array[_+Q]=J.array[Z+Q];return this}copyArray(_){return this.array.set(_),this}applyMatrix3(_){if(this.itemSize===2)for(let J=0,Z=this.count;J<Z;J++)_vector2$1.fromBufferAttribute(this,J),_vector2$1.applyMatrix3(_),this.setXY(J,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let J=0,Z=this.count;J<Z;J++)_vector$9.fromBufferAttribute(this,J),_vector$9.applyMatrix3(_),this.setXYZ(J,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyMatrix4(_){for(let J=0,Z=this.count;J<Z;J++)_vector$9.fromBufferAttribute(this,J),_vector$9.applyMatrix4(_),this.setXYZ(J,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyNormalMatrix(_){for(let J=0,Z=this.count;J<Z;J++)_vector$9.fromBufferAttribute(this,J),_vector$9.applyNormalMatrix(_),this.setXYZ(J,_vector$9.x,_vector$9.y,_vector$9.z);return this}transformDirection(_){for(let J=0,Z=this.count;J<Z;J++)_vector$9.fromBufferAttribute(this,J),_vector$9.transformDirection(_),this.setXYZ(J,_vector$9.x,_vector$9.y,_vector$9.z);return this}set(_,J=0){return this.array.set(_,J),this}getComponent(_,J){let Z=this.array[_*this.itemSize+J];return this.normalized&&(Z=denormalize(Z,this.array)),Z}setComponent(_,J,Z){return this.normalized&&(Z=normalize(Z,this.array)),this.array[_*this.itemSize+J]=Z,this}getX(_){let J=this.array[_*this.itemSize];return this.normalized&&(J=denormalize(J,this.array)),J}setX(_,J){return this.normalized&&(J=normalize(J,this.array)),this.array[_*this.itemSize]=J,this}getY(_){let J=this.array[_*this.itemSize+1];return this.normalized&&(J=denormalize(J,this.array)),J}setY(_,J){return this.normalized&&(J=normalize(J,this.array)),this.array[_*this.itemSize+1]=J,this}getZ(_){let J=this.array[_*this.itemSize+2];return this.normalized&&(J=denormalize(J,this.array)),J}setZ(_,J){return this.normalized&&(J=normalize(J,this.array)),this.array[_*this.itemSize+2]=J,this}getW(_){let J=this.array[_*this.itemSize+3];return this.normalized&&(J=denormalize(J,this.array)),J}setW(_,J){return this.normalized&&(J=normalize(J,this.array)),this.array[_*this.itemSize+3]=J,this}setXY(_,J,Z){return _*=this.itemSize,this.normalized&&(J=normalize(J,this.array),Z=normalize(Z,this.array)),this.array[_+0]=J,this.array[_+1]=Z,this}setXYZ(_,J,Z,Q){return _*=this.itemSize,this.normalized&&(J=normalize(J,this.array),Z=normalize(Z,this.array),Q=normalize(Q,this.array)),this.array[_+0]=J,this.array[_+1]=Z,this.array[_+2]=Q,this}setXYZW(_,J,Z,Q,ee){return _*=this.itemSize,this.normalized&&(J=normalize(J,this.array),Z=normalize(Z,this.array),Q=normalize(Q,this.array),ee=normalize(ee,this.array)),this.array[_+0]=J,this.array[_+1]=Z,this.array[_+2]=Q,this.array[_+3]=ee,this}onUpload(_){return this.onUploadCallback=_,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const _={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(_.name=this.name),this.usage!==StaticDrawUsage&&(_.usage=this.usage),_}}class Int8BufferAttribute extends BufferAttribute{constructor(_,J,Z){super(new Int8Array(_),J,Z)}}class Uint8BufferAttribute extends BufferAttribute{constructor(_,J,Z){super(new Uint8Array(_),J,Z)}}class Uint8ClampedBufferAttribute extends BufferAttribute{constructor(_,J,Z){super(new Uint8ClampedArray(_),J,Z)}}class Int16BufferAttribute extends BufferAttribute{constructor(_,J,Z){super(new Int16Array(_),J,Z)}}class Uint16BufferAttribute extends BufferAttribute{constructor(_,J,Z){super(new Uint16Array(_),J,Z)}}class Int32BufferAttribute extends BufferAttribute{constructor(_,J,Z){super(new Int32Array(_),J,Z)}}class Uint32BufferAttribute extends BufferAttribute{constructor(_,J,Z){super(new Uint32Array(_),J,Z)}}class Float16BufferAttribute extends BufferAttribute{constructor(_,J,Z){super(new Uint16Array(_),J,Z),this.isFloat16BufferAttribute=!0}getX(_){let J=fromHalfFloat(this.array[_*this.itemSize]);return this.normalized&&(J=denormalize(J,this.array)),J}setX(_,J){return this.normalized&&(J=normalize(J,this.array)),this.array[_*this.itemSize]=toHalfFloat(J),this}getY(_){let J=fromHalfFloat(this.array[_*this.itemSize+1]);return this.normalized&&(J=denormalize(J,this.array)),J}setY(_,J){return this.normalized&&(J=normalize(J,this.array)),this.array[_*this.itemSize+1]=toHalfFloat(J),this}getZ(_){let J=fromHalfFloat(this.array[_*this.itemSize+2]);return this.normalized&&(J=denormalize(J,this.array)),J}setZ(_,J){return this.normalized&&(J=normalize(J,this.array)),this.array[_*this.itemSize+2]=toHalfFloat(J),this}getW(_){let J=fromHalfFloat(this.array[_*this.itemSize+3]);return this.normalized&&(J=denormalize(J,this.array)),J}setW(_,J){return this.normalized&&(J=normalize(J,this.array)),this.array[_*this.itemSize+3]=toHalfFloat(J),this}setXY(_,J,Z){return _*=this.itemSize,this.normalized&&(J=normalize(J,this.array),Z=normalize(Z,this.array)),this.array[_+0]=toHalfFloat(J),this.array[_+1]=toHalfFloat(Z),this}setXYZ(_,J,Z,Q){return _*=this.itemSize,this.normalized&&(J=normalize(J,this.array),Z=normalize(Z,this.array),Q=normalize(Q,this.array)),this.array[_+0]=toHalfFloat(J),this.array[_+1]=toHalfFloat(Z),this.array[_+2]=toHalfFloat(Q),this}setXYZW(_,J,Z,Q,ee){return _*=this.itemSize,this.normalized&&(J=normalize(J,this.array),Z=normalize(Z,this.array),Q=normalize(Q,this.array),ee=normalize(ee,this.array)),this.array[_+0]=toHalfFloat(J),this.array[_+1]=toHalfFloat(Z),this.array[_+2]=toHalfFloat(Q),this.array[_+3]=toHalfFloat(ee),this}}class Float32BufferAttribute extends BufferAttribute{constructor(_,J,Z){super(new Float32Array(_),J,Z)}}let _id$1=0;const _m1$3=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$8=new Vector3;class BufferGeometry extends EventDispatcher$1{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$1++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(_){return Array.isArray(_)?this.index=new(arrayNeedsUint32(_)?Uint32BufferAttribute:Uint16BufferAttribute)(_,1):this.index=_,this}setIndirect(_){return this.indirect=_,this}getIndirect(){return this.indirect}getAttribute(_){return this.attributes[_]}setAttribute(_,J){return this.attributes[_]=J,this}deleteAttribute(_){return delete this.attributes[_],this}hasAttribute(_){return this.attributes[_]!==void 0}addGroup(_,J,Z=0){this.groups.push({start:_,count:J,materialIndex:Z})}clearGroups(){this.groups=[]}setDrawRange(_,J){this.drawRange.start=_,this.drawRange.count=J}applyMatrix4(_){const J=this.attributes.position;J!==void 0&&(J.applyMatrix4(_),J.needsUpdate=!0);const Z=this.attributes.normal;if(Z!==void 0){const ee=new Matrix3().getNormalMatrix(_);Z.applyNormalMatrix(ee),Z.needsUpdate=!0}const Q=this.attributes.tangent;return Q!==void 0&&(Q.transformDirection(_),Q.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(_){return _m1$3.makeRotationFromQuaternion(_),this.applyMatrix4(_m1$3),this}rotateX(_){return _m1$3.makeRotationX(_),this.applyMatrix4(_m1$3),this}rotateY(_){return _m1$3.makeRotationY(_),this.applyMatrix4(_m1$3),this}rotateZ(_){return _m1$3.makeRotationZ(_),this.applyMatrix4(_m1$3),this}translate(_,J,Z){return _m1$3.makeTranslation(_,J,Z),this.applyMatrix4(_m1$3),this}scale(_,J,Z){return _m1$3.makeScale(_,J,Z),this.applyMatrix4(_m1$3),this}lookAt(_){return _obj.lookAt(_),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(_){const J=this.getAttribute("position");if(J===void 0){const Z=[];for(let Q=0,ee=_.length;Q<ee;Q++){const te=_[Q];Z.push(te.x,te.y,te.z||0)}this.setAttribute("position",new Float32BufferAttribute(Z,3))}else{const Z=Math.min(_.length,J.count);for(let Q=0;Q<Z;Q++){const ee=_[Q];J.setXYZ(Q,ee.x,ee.y,ee.z||0)}_.length>J.count&&warn("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),J.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const _=this.attributes.position,J=this.morphAttributes.position;if(_&&_.isGLBufferAttribute){error("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(_!==void 0){if(this.boundingBox.setFromBufferAttribute(_),J)for(let Z=0,Q=J.length;Z<Q;Z++){const ee=J[Z];_box$2.setFromBufferAttribute(ee),this.morphTargetsRelative?(_vector$8.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$8),_vector$8.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$8)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&error('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere$1);const _=this.attributes.position,J=this.morphAttributes.position;if(_&&_.isGLBufferAttribute){error("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Vector3,1/0);return}if(_){const Z=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(_),J)for(let ee=0,te=J.length;ee<te;ee++){const ne=J[ee];_boxMorphTargets.setFromBufferAttribute(ne),this.morphTargetsRelative?(_vector$8.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$8),_vector$8.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$8)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(Z);let Q=0;for(let ee=0,te=_.count;ee<te;ee++)_vector$8.fromBufferAttribute(_,ee),Q=Math.max(Q,Z.distanceToSquared(_vector$8));if(J)for(let ee=0,te=J.length;ee<te;ee++){const ne=J[ee],ie=this.morphTargetsRelative;for(let re=0,oe=ne.count;re<oe;re++)_vector$8.fromBufferAttribute(ne,re),ie&&(_offset.fromBufferAttribute(_,re),_vector$8.add(_offset)),Q=Math.max(Q,Z.distanceToSquared(_vector$8))}this.boundingSphere.radius=Math.sqrt(Q),isNaN(this.boundingSphere.radius)&&error('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const _=this.index,J=this.attributes;if(_===null||J.position===void 0||J.normal===void 0||J.uv===void 0){error("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const Z=J.position,Q=J.normal,ee=J.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*Z.count),4));const te=this.getAttribute("tangent"),ne=[],ie=[];for(let Re=0;Re<Z.count;Re++)ne[Re]=new Vector3,ie[Re]=new Vector3;const re=new Vector3,oe=new Vector3,se=new Vector3,ae=new Vector2,le=new Vector2,ue=new Vector2,de=new Vector3,pe=new Vector3;function fe(Re,Te,Me){re.fromBufferAttribute(Z,Re),oe.fromBufferAttribute(Z,Te),se.fromBufferAttribute(Z,Me),ae.fromBufferAttribute(ee,Re),le.fromBufferAttribute(ee,Te),ue.fromBufferAttribute(ee,Me),oe.sub(re),se.sub(re),le.sub(ae),ue.sub(ae);const Ne=1/(le.x*ue.y-ue.x*le.y);isFinite(Ne)&&(de.copy(oe).multiplyScalar(ue.y).addScaledVector(se,-le.y).multiplyScalar(Ne),pe.copy(se).multiplyScalar(le.x).addScaledVector(oe,-ue.x).multiplyScalar(Ne),ne[Re].add(de),ne[Te].add(de),ne[Me].add(de),ie[Re].add(pe),ie[Te].add(pe),ie[Me].add(pe))}let _e=this.groups;_e.length===0&&(_e=[{start:0,count:_.count}]);for(let Re=0,Te=_e.length;Re<Te;++Re){const Me=_e[Re],Ne=Me.start,Le=Me.count;for(let Ie=Ne,Ge=Ne+Le;Ie<Ge;Ie+=3)fe(_.getX(Ie+0),_.getX(Ie+1),_.getX(Ie+2))}const ye=new Vector3,be=new Vector3,Ae=new Vector3,Ce=new Vector3;function Ee(Re){Ae.fromBufferAttribute(Q,Re),Ce.copy(Ae);const Te=ne[Re];ye.copy(Te),ye.sub(Ae.multiplyScalar(Ae.dot(Te))).normalize(),be.crossVectors(Ce,Te);const Ne=be.dot(ie[Re])<0?-1:1;te.setXYZW(Re,ye.x,ye.y,ye.z,Ne)}for(let Re=0,Te=_e.length;Re<Te;++Re){const Me=_e[Re],Ne=Me.start,Le=Me.count;for(let Ie=Ne,Ge=Ne+Le;Ie<Ge;Ie+=3)Ee(_.getX(Ie+0)),Ee(_.getX(Ie+1)),Ee(_.getX(Ie+2))}}computeVertexNormals(){const _=this.index,J=this.getAttribute("position");if(J!==void 0){let Z=this.getAttribute("normal");if(Z===void 0)Z=new BufferAttribute(new Float32Array(J.count*3),3),this.setAttribute("normal",Z);else for(let ae=0,le=Z.count;ae<le;ae++)Z.setXYZ(ae,0,0,0);const Q=new Vector3,ee=new Vector3,te=new Vector3,ne=new Vector3,ie=new Vector3,re=new Vector3,oe=new Vector3,se=new Vector3;if(_)for(let ae=0,le=_.count;ae<le;ae+=3){const ue=_.getX(ae+0),de=_.getX(ae+1),pe=_.getX(ae+2);Q.fromBufferAttribute(J,ue),ee.fromBufferAttribute(J,de),te.fromBufferAttribute(J,pe),oe.subVectors(te,ee),se.subVectors(Q,ee),oe.cross(se),ne.fromBufferAttribute(Z,ue),ie.fromBufferAttribute(Z,de),re.fromBufferAttribute(Z,pe),ne.add(oe),ie.add(oe),re.add(oe),Z.setXYZ(ue,ne.x,ne.y,ne.z),Z.setXYZ(de,ie.x,ie.y,ie.z),Z.setXYZ(pe,re.x,re.y,re.z)}else for(let ae=0,le=J.count;ae<le;ae+=3)Q.fromBufferAttribute(J,ae+0),ee.fromBufferAttribute(J,ae+1),te.fromBufferAttribute(J,ae+2),oe.subVectors(te,ee),se.subVectors(Q,ee),oe.cross(se),Z.setXYZ(ae+0,oe.x,oe.y,oe.z),Z.setXYZ(ae+1,oe.x,oe.y,oe.z),Z.setXYZ(ae+2,oe.x,oe.y,oe.z);this.normalizeNormals(),Z.needsUpdate=!0}}normalizeNormals(){const _=this.attributes.normal;for(let J=0,Z=_.count;J<Z;J++)_vector$8.fromBufferAttribute(_,J),_vector$8.normalize(),_.setXYZ(J,_vector$8.x,_vector$8.y,_vector$8.z)}toNonIndexed(){function _(ne,ie){const re=ne.array,oe=ne.itemSize,se=ne.normalized,ae=new re.constructor(ie.length*oe);let le=0,ue=0;for(let de=0,pe=ie.length;de<pe;de++){ne.isInterleavedBufferAttribute?le=ie[de]*ne.data.stride+ne.offset:le=ie[de]*oe;for(let fe=0;fe<oe;fe++)ae[ue++]=re[le++]}return new BufferAttribute(ae,oe,se)}if(this.index===null)return warn("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const J=new BufferGeometry,Z=this.index.array,Q=this.attributes;for(const ne in Q){const ie=Q[ne],re=_(ie,Z);J.setAttribute(ne,re)}const ee=this.morphAttributes;for(const ne in ee){const ie=[],re=ee[ne];for(let oe=0,se=re.length;oe<se;oe++){const ae=re[oe],le=_(ae,Z);ie.push(le)}J.morphAttributes[ne]=ie}J.morphTargetsRelative=this.morphTargetsRelative;const te=this.groups;for(let ne=0,ie=te.length;ne<ie;ne++){const re=te[ne];J.addGroup(re.start,re.count,re.materialIndex)}return J}toJSON(){const _={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(_.uuid=this.uuid,_.type=this.type,this.name!==""&&(_.name=this.name),Object.keys(this.userData).length>0&&(_.userData=this.userData),this.parameters!==void 0){const ie=this.parameters;for(const re in ie)ie[re]!==void 0&&(_[re]=ie[re]);return _}_.data={attributes:{}};const J=this.index;J!==null&&(_.data.index={type:J.array.constructor.name,array:Array.prototype.slice.call(J.array)});const Z=this.attributes;for(const ie in Z){const re=Z[ie];_.data.attributes[ie]=re.toJSON(_.data)}const Q={};let ee=!1;for(const ie in this.morphAttributes){const re=this.morphAttributes[ie],oe=[];for(let se=0,ae=re.length;se<ae;se++){const le=re[se];oe.push(le.toJSON(_.data))}oe.length>0&&(Q[ie]=oe,ee=!0)}ee&&(_.data.morphAttributes=Q,_.data.morphTargetsRelative=this.morphTargetsRelative);const te=this.groups;te.length>0&&(_.data.groups=JSON.parse(JSON.stringify(te)));const ne=this.boundingSphere;return ne!==null&&(_.data.boundingSphere=ne.toJSON()),_}clone(){return new this.constructor().copy(this)}copy(_){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const J={};this.name=_.name;const Z=_.index;Z!==null&&this.setIndex(Z.clone());const Q=_.attributes;for(const re in Q){const oe=Q[re];this.setAttribute(re,oe.clone(J))}const ee=_.morphAttributes;for(const re in ee){const oe=[],se=ee[re];for(let ae=0,le=se.length;ae<le;ae++)oe.push(se[ae].clone(J));this.morphAttributes[re]=oe}this.morphTargetsRelative=_.morphTargetsRelative;const te=_.groups;for(let re=0,oe=te.length;re<oe;re++){const se=te[re];this.addGroup(se.start,se.count,se.materialIndex)}const ne=_.boundingBox;ne!==null&&(this.boundingBox=ne.clone());const ie=_.boundingSphere;return ie!==null&&(this.boundingSphere=ie.clone()),this.drawRange.start=_.drawRange.start,this.drawRange.count=_.drawRange.count,this.userData=_.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$3=new Matrix4,_ray$3=new Ray,_sphere$6=new Sphere$1,_sphereHitAt=new Vector3,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_morphA=new Vector3,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(_=new BufferGeometry,J=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=_,this.material=J,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(_,J){return super.copy(_,J),_.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=_.morphTargetInfluences.slice()),_.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},_.morphTargetDictionary)),this.material=Array.isArray(_.material)?_.material.slice():_.material,this.geometry=_.geometry,this}updateMorphTargets(){const J=this.geometry.morphAttributes,Z=Object.keys(J);if(Z.length>0){const Q=J[Z[0]];if(Q!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let ee=0,te=Q.length;ee<te;ee++){const ne=Q[ee].name||String(ee);this.morphTargetInfluences.push(0),this.morphTargetDictionary[ne]=ee}}}}getVertexPosition(_,J){const Z=this.geometry,Q=Z.attributes.position,ee=Z.morphAttributes.position,te=Z.morphTargetsRelative;J.fromBufferAttribute(Q,_);const ne=this.morphTargetInfluences;if(ee&&ne){_morphA.set(0,0,0);for(let ie=0,re=ee.length;ie<re;ie++){const oe=ne[ie],se=ee[ie];oe!==0&&(_tempA.fromBufferAttribute(se,_),te?_morphA.addScaledVector(_tempA,oe):_morphA.addScaledVector(_tempA.sub(J),oe))}J.add(_morphA)}return J}raycast(_,J){const Z=this.geometry,Q=this.material,ee=this.matrixWorld;Q!==void 0&&(Z.boundingSphere===null&&Z.computeBoundingSphere(),_sphere$6.copy(Z.boundingSphere),_sphere$6.applyMatrix4(ee),_ray$3.copy(_.ray).recast(_.near),!(_sphere$6.containsPoint(_ray$3.origin)===!1&&(_ray$3.intersectSphere(_sphere$6,_sphereHitAt)===null||_ray$3.origin.distanceToSquared(_sphereHitAt)>(_.far-_.near)**2))&&(_inverseMatrix$3.copy(ee).invert(),_ray$3.copy(_.ray).applyMatrix4(_inverseMatrix$3),!(Z.boundingBox!==null&&_ray$3.intersectsBox(Z.boundingBox)===!1)&&this._computeIntersections(_,J,_ray$3)))}_computeIntersections(_,J,Z){let Q;const ee=this.geometry,te=this.material,ne=ee.index,ie=ee.attributes.position,re=ee.attributes.uv,oe=ee.attributes.uv1,se=ee.attributes.normal,ae=ee.groups,le=ee.drawRange;if(ne!==null)if(Array.isArray(te))for(let ue=0,de=ae.length;ue<de;ue++){const pe=ae[ue],fe=te[pe.materialIndex],_e=Math.max(pe.start,le.start),ye=Math.min(ne.count,Math.min(pe.start+pe.count,le.start+le.count));for(let be=_e,Ae=ye;be<Ae;be+=3){const Ce=ne.getX(be),Ee=ne.getX(be+1),Re=ne.getX(be+2);Q=checkGeometryIntersection(this,fe,_,Z,re,oe,se,Ce,Ee,Re),Q&&(Q.faceIndex=Math.floor(be/3),Q.face.materialIndex=pe.materialIndex,J.push(Q))}}else{const ue=Math.max(0,le.start),de=Math.min(ne.count,le.start+le.count);for(let pe=ue,fe=de;pe<fe;pe+=3){const _e=ne.getX(pe),ye=ne.getX(pe+1),be=ne.getX(pe+2);Q=checkGeometryIntersection(this,te,_,Z,re,oe,se,_e,ye,be),Q&&(Q.faceIndex=Math.floor(pe/3),J.push(Q))}}else if(ie!==void 0)if(Array.isArray(te))for(let ue=0,de=ae.length;ue<de;ue++){const pe=ae[ue],fe=te[pe.materialIndex],_e=Math.max(pe.start,le.start),ye=Math.min(ie.count,Math.min(pe.start+pe.count,le.start+le.count));for(let be=_e,Ae=ye;be<Ae;be+=3){const Ce=be,Ee=be+1,Re=be+2;Q=checkGeometryIntersection(this,fe,_,Z,re,oe,se,Ce,Ee,Re),Q&&(Q.faceIndex=Math.floor(be/3),Q.face.materialIndex=pe.materialIndex,J.push(Q))}}else{const ue=Math.max(0,le.start),de=Math.min(ie.count,le.start+le.count);for(let pe=ue,fe=de;pe<fe;pe+=3){const _e=pe,ye=pe+1,be=pe+2;Q=checkGeometryIntersection(this,te,_,Z,re,oe,se,_e,ye,be),Q&&(Q.faceIndex=Math.floor(pe/3),J.push(Q))}}}}function checkIntersection$1(G,_,J,Z,Q,ee,te,ne){let ie;if(_.side===BackSide?ie=Z.intersectTriangle(te,ee,Q,!0,ne):ie=Z.intersectTriangle(Q,ee,te,_.side===FrontSide,ne),ie===null)return null;_intersectionPointWorld.copy(ne),_intersectionPointWorld.applyMatrix4(G.matrixWorld);const re=J.ray.origin.distanceTo(_intersectionPointWorld);return re<J.near||re>J.far?null:{distance:re,point:_intersectionPointWorld.clone(),object:G}}function checkGeometryIntersection(G,_,J,Z,Q,ee,te,ne,ie,re){G.getVertexPosition(ne,_vA$1),G.getVertexPosition(ie,_vB$1),G.getVertexPosition(re,_vC$1);const oe=checkIntersection$1(G,_,J,Z,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(oe){const se=new Vector3;Triangle.getBarycoord(_intersectionPoint,_vA$1,_vB$1,_vC$1,se),Q&&(oe.uv=Triangle.getInterpolatedAttribute(Q,ne,ie,re,se,new Vector2)),ee&&(oe.uv1=Triangle.getInterpolatedAttribute(ee,ne,ie,re,se,new Vector2)),te&&(oe.normal=Triangle.getInterpolatedAttribute(te,ne,ie,re,se,new Vector3),oe.normal.dot(Z.direction)>0&&oe.normal.multiplyScalar(-1));const ae={a:ne,b:ie,c:re,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,ae.normal),oe.face=ae,oe.barycoord=se}return oe}class BoxGeometry extends BufferGeometry{constructor(_=1,J=1,Z=1,Q=1,ee=1,te=1){super(),this.type="BoxGeometry",this.parameters={width:_,height:J,depth:Z,widthSegments:Q,heightSegments:ee,depthSegments:te};const ne=this;Q=Math.floor(Q),ee=Math.floor(ee),te=Math.floor(te);const ie=[],re=[],oe=[],se=[];let ae=0,le=0;ue("z","y","x",-1,-1,Z,J,_,te,ee,0),ue("z","y","x",1,-1,Z,J,-_,te,ee,1),ue("x","z","y",1,1,_,Z,J,Q,te,2),ue("x","z","y",1,-1,_,Z,-J,Q,te,3),ue("x","y","z",1,-1,_,J,Z,Q,ee,4),ue("x","y","z",-1,-1,_,J,-Z,Q,ee,5),this.setIndex(ie),this.setAttribute("position",new Float32BufferAttribute(re,3)),this.setAttribute("normal",new Float32BufferAttribute(oe,3)),this.setAttribute("uv",new Float32BufferAttribute(se,2));function ue(de,pe,fe,_e,ye,be,Ae,Ce,Ee,Re,Te){const Me=be/Ee,Ne=Ae/Re,Le=be/2,Ie=Ae/2,Ge=Ce/2,He=Ee+1,Be=Re+1;let ze=0,Fe=0;const $e=new Vector3;for(let Xe=0;Xe<Be;Xe++){const je=Xe*Ne-Ie;for(let qe=0;qe<He;qe++){const Ze=qe*Me-Le;$e[de]=Ze*_e,$e[pe]=je*ye,$e[fe]=Ge,re.push($e.x,$e.y,$e.z),$e[de]=0,$e[pe]=0,$e[fe]=Ce>0?1:-1,oe.push($e.x,$e.y,$e.z),se.push(qe/Ee),se.push(1-Xe/Re),ze+=1}}for(let Xe=0;Xe<Re;Xe++)for(let je=0;je<Ee;je++){const qe=ae+je+He*Xe,Ze=ae+je+He*(Xe+1),st=ae+(je+1)+He*(Xe+1),St=ae+(je+1)+He*Xe;ie.push(qe,Ze,St),ie.push(Ze,st,St),Fe+=6}ne.addGroup(le,Fe,Te),le+=Fe,ae+=ze}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new BoxGeometry(_.width,_.height,_.depth,_.widthSegments,_.heightSegments,_.depthSegments)}}function cloneUniforms(G){const _={};for(const J in G){_[J]={};for(const Z in G[J]){const Q=G[J][Z];Q&&(Q.isColor||Q.isMatrix3||Q.isMatrix4||Q.isVector2||Q.isVector3||Q.isVector4||Q.isTexture||Q.isQuaternion)?Q.isRenderTargetTexture?(warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),_[J][Z]=null):_[J][Z]=Q.clone():Array.isArray(Q)?_[J][Z]=Q.slice():_[J][Z]=Q}}return _}function mergeUniforms(G){const _={};for(let J=0;J<G.length;J++){const Z=cloneUniforms(G[J]);for(const Q in Z)_[Q]=Z[Q]}return _}function cloneUniformsGroups(G){const _=[];for(let J=0;J<G.length;J++)_.push(G[J].clone());return _}function getUnlitUniformColorSpace(G){const _=G.getRenderTarget();return _===null?G.outputColorSpace:_.isXRRenderTarget===!0?_.texture.colorSpace:ColorManagement.workingColorSpace}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor(_){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,_!==void 0&&this.setValues(_)}copy(_){return super.copy(_),this.fragmentShader=_.fragmentShader,this.vertexShader=_.vertexShader,this.uniforms=cloneUniforms(_.uniforms),this.uniformsGroups=cloneUniformsGroups(_.uniformsGroups),this.defines=Object.assign({},_.defines),this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.fog=_.fog,this.lights=_.lights,this.clipping=_.clipping,this.extensions=Object.assign({},_.extensions),this.glslVersion=_.glslVersion,this}toJSON(_){const J=super.toJSON(_);J.glslVersion=this.glslVersion,J.uniforms={};for(const Q in this.uniforms){const te=this.uniforms[Q].value;te&&te.isTexture?J.uniforms[Q]={type:"t",value:te.toJSON(_).uuid}:te&&te.isColor?J.uniforms[Q]={type:"c",value:te.getHex()}:te&&te.isVector2?J.uniforms[Q]={type:"v2",value:te.toArray()}:te&&te.isVector3?J.uniforms[Q]={type:"v3",value:te.toArray()}:te&&te.isVector4?J.uniforms[Q]={type:"v4",value:te.toArray()}:te&&te.isMatrix3?J.uniforms[Q]={type:"m3",value:te.toArray()}:te&&te.isMatrix4?J.uniforms[Q]={type:"m4",value:te.toArray()}:J.uniforms[Q]={value:te}}Object.keys(this.defines).length>0&&(J.defines=this.defines),J.vertexShader=this.vertexShader,J.fragmentShader=this.fragmentShader,J.lights=this.lights,J.clipping=this.clipping;const Z={};for(const Q in this.extensions)this.extensions[Q]===!0&&(Z[Q]=!0);return Object.keys(Z).length>0&&(J.extensions=Z),J}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4,this.coordinateSystem=WebGLCoordinateSystem,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(_,J){return super.copy(_,J),this.matrixWorldInverse.copy(_.matrixWorldInverse),this.projectionMatrix.copy(_.projectionMatrix),this.projectionMatrixInverse.copy(_.projectionMatrixInverse),this.coordinateSystem=_.coordinateSystem,this}getWorldDirection(_){return super.getWorldDirection(_).negate()}updateMatrixWorld(_){super.updateMatrixWorld(_),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(_,J){super.updateWorldMatrix(_,J),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const _v3$1=new Vector3,_minTarget=new Vector2,_maxTarget=new Vector2;class PerspectiveCamera extends Camera{constructor(_=50,J=1,Z=.1,Q=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=_,this.zoom=1,this.near=Z,this.far=Q,this.focus=10,this.aspect=J,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(_,J){return super.copy(_,J),this.fov=_.fov,this.zoom=_.zoom,this.near=_.near,this.far=_.far,this.focus=_.focus,this.aspect=_.aspect,this.view=_.view===null?null:Object.assign({},_.view),this.filmGauge=_.filmGauge,this.filmOffset=_.filmOffset,this}setFocalLength(_){const J=.5*this.getFilmHeight()/_;this.fov=RAD2DEG*2*Math.atan(J),this.updateProjectionMatrix()}getFocalLength(){const _=Math.tan(DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/_}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(_,J,Z){_v3$1.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),J.set(_v3$1.x,_v3$1.y).multiplyScalar(-_/_v3$1.z),_v3$1.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),Z.set(_v3$1.x,_v3$1.y).multiplyScalar(-_/_v3$1.z)}getViewSize(_,J){return this.getViewBounds(_,_minTarget,_maxTarget),J.subVectors(_maxTarget,_minTarget)}setViewOffset(_,J,Z,Q,ee,te){this.aspect=_/J,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=_,this.view.fullHeight=J,this.view.offsetX=Z,this.view.offsetY=Q,this.view.width=ee,this.view.height=te,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const _=this.near;let J=_*Math.tan(DEG2RAD*.5*this.fov)/this.zoom,Z=2*J,Q=this.aspect*Z,ee=-.5*Q;const te=this.view;if(this.view!==null&&this.view.enabled){const ie=te.fullWidth,re=te.fullHeight;ee+=te.offsetX*Q/ie,J-=te.offsetY*Z/re,Q*=te.width/ie,Z*=te.height/re}const ne=this.filmOffset;ne!==0&&(ee+=_*ne/this.getFilmWidth()),this.projectionMatrix.makePerspective(ee,ee+Q,J,J-Z,_,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(_){const J=super.toJSON(_);return J.object.fov=this.fov,J.object.zoom=this.zoom,J.object.near=this.near,J.object.far=this.far,J.object.focus=this.focus,J.object.aspect=this.aspect,this.view!==null&&(J.object.view=Object.assign({},this.view)),J.object.filmGauge=this.filmGauge,J.object.filmOffset=this.filmOffset,J}}const fov=-90,aspect=1;class CubeCamera extends Object3D{constructor(_,J,Z){super(),this.type="CubeCamera",this.renderTarget=Z,this.coordinateSystem=null,this.activeMipmapLevel=0;const Q=new PerspectiveCamera(fov,aspect,_,J);Q.layers=this.layers,this.add(Q);const ee=new PerspectiveCamera(fov,aspect,_,J);ee.layers=this.layers,this.add(ee);const te=new PerspectiveCamera(fov,aspect,_,J);te.layers=this.layers,this.add(te);const ne=new PerspectiveCamera(fov,aspect,_,J);ne.layers=this.layers,this.add(ne);const ie=new PerspectiveCamera(fov,aspect,_,J);ie.layers=this.layers,this.add(ie);const re=new PerspectiveCamera(fov,aspect,_,J);re.layers=this.layers,this.add(re)}updateCoordinateSystem(){const _=this.coordinateSystem,J=this.children.concat(),[Z,Q,ee,te,ne,ie]=J;for(const re of J)this.remove(re);if(_===WebGLCoordinateSystem)Z.up.set(0,1,0),Z.lookAt(1,0,0),Q.up.set(0,1,0),Q.lookAt(-1,0,0),ee.up.set(0,0,-1),ee.lookAt(0,1,0),te.up.set(0,0,1),te.lookAt(0,-1,0),ne.up.set(0,1,0),ne.lookAt(0,0,1),ie.up.set(0,1,0),ie.lookAt(0,0,-1);else if(_===WebGPUCoordinateSystem)Z.up.set(0,-1,0),Z.lookAt(-1,0,0),Q.up.set(0,-1,0),Q.lookAt(1,0,0),ee.up.set(0,0,1),ee.lookAt(0,1,0),te.up.set(0,0,-1),te.lookAt(0,-1,0),ne.up.set(0,-1,0),ne.lookAt(0,0,1),ie.up.set(0,-1,0),ie.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+_);for(const re of J)this.add(re),re.updateMatrixWorld()}update(_,J){this.parent===null&&this.updateMatrixWorld();const{renderTarget:Z,activeMipmapLevel:Q}=this;this.coordinateSystem!==_.coordinateSystem&&(this.coordinateSystem=_.coordinateSystem,this.updateCoordinateSystem());const[ee,te,ne,ie,re,oe]=this.children,se=_.getRenderTarget(),ae=_.getActiveCubeFace(),le=_.getActiveMipmapLevel(),ue=_.xr.enabled;_.xr.enabled=!1;const de=Z.texture.generateMipmaps;Z.texture.generateMipmaps=!1,_.setRenderTarget(Z,0,Q),_.render(J,ee),_.setRenderTarget(Z,1,Q),_.render(J,te),_.setRenderTarget(Z,2,Q),_.render(J,ne),_.setRenderTarget(Z,3,Q),_.render(J,ie),_.setRenderTarget(Z,4,Q),_.render(J,re),Z.texture.generateMipmaps=de,_.setRenderTarget(Z,5,Q),_.render(J,oe),_.setRenderTarget(se,ae,le),_.xr.enabled=ue,Z.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(_=[],J=CubeReflectionMapping,Z,Q,ee,te,ne,ie,re,oe){super(_,J,Z,Q,ee,te,ne,ie,re,oe),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(_){this.image=_}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(_=1,J={}){super(_,_,J),this.isWebGLCubeRenderTarget=!0;const Z={width:_,height:_,depth:1},Q=[Z,Z,Z,Z,Z,Z];this.texture=new CubeTexture(Q),this._setTextureOptions(J),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(_,J){this.texture.type=J.type,this.texture.colorSpace=J.colorSpace,this.texture.generateMipmaps=J.generateMipmaps,this.texture.minFilter=J.minFilter,this.texture.magFilter=J.magFilter;const Z={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},Q=new BoxGeometry(5,5,5),ee=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(Z.uniforms),vertexShader:Z.vertexShader,fragmentShader:Z.fragmentShader,side:BackSide,blending:NoBlending});ee.uniforms.tEquirect.value=J;const te=new Mesh(Q,ee),ne=J.minFilter;return J.minFilter===LinearMipmapLinearFilter&&(J.minFilter=LinearFilter),new CubeCamera(1,10,this).update(_,te),J.minFilter=ne,te.geometry.dispose(),te.material.dispose(),this}clear(_,J=!0,Z=!0,Q=!0){const ee=_.getRenderTarget();for(let te=0;te<6;te++)_.setRenderTarget(this,te),_.clear(J,Z,Q);_.setRenderTarget(ee)}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(_){return this._targetRay!==null&&this._targetRay.dispatchEvent(_),this._grip!==null&&this._grip.dispatchEvent(_),this._hand!==null&&this._hand.dispatchEvent(_),this}connect(_){if(_&&_.hand){const J=this._hand;if(J)for(const Z of _.hand.values())this._getHandJoint(J,Z)}return this.dispatchEvent({type:"connected",data:_}),this}disconnect(_){return this.dispatchEvent({type:"disconnected",data:_}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(_,J,Z){let Q=null,ee=null,te=null;const ne=this._targetRay,ie=this._grip,re=this._hand;if(_&&J.session.visibilityState!=="visible-blurred"){if(re&&_.hand){te=!0;for(const de of _.hand.values()){const pe=J.getJointPose(de,Z),fe=this._getHandJoint(re,de);pe!==null&&(fe.matrix.fromArray(pe.transform.matrix),fe.matrix.decompose(fe.position,fe.rotation,fe.scale),fe.matrixWorldNeedsUpdate=!0,fe.jointRadius=pe.radius),fe.visible=pe!==null}const oe=re.joints["index-finger-tip"],se=re.joints["thumb-tip"],ae=oe.position.distanceTo(se.position),le=.02,ue=.005;re.inputState.pinching&&ae>le+ue?(re.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:_.handedness,target:this})):!re.inputState.pinching&&ae<=le-ue&&(re.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:_.handedness,target:this}))}else ie!==null&&_.gripSpace&&(ee=J.getPose(_.gripSpace,Z),ee!==null&&(ie.matrix.fromArray(ee.transform.matrix),ie.matrix.decompose(ie.position,ie.rotation,ie.scale),ie.matrixWorldNeedsUpdate=!0,ee.linearVelocity?(ie.hasLinearVelocity=!0,ie.linearVelocity.copy(ee.linearVelocity)):ie.hasLinearVelocity=!1,ee.angularVelocity?(ie.hasAngularVelocity=!0,ie.angularVelocity.copy(ee.angularVelocity)):ie.hasAngularVelocity=!1));ne!==null&&(Q=J.getPose(_.targetRaySpace,Z),Q===null&&ee!==null&&(Q=ee),Q!==null&&(ne.matrix.fromArray(Q.transform.matrix),ne.matrix.decompose(ne.position,ne.rotation,ne.scale),ne.matrixWorldNeedsUpdate=!0,Q.linearVelocity?(ne.hasLinearVelocity=!0,ne.linearVelocity.copy(Q.linearVelocity)):ne.hasLinearVelocity=!1,Q.angularVelocity?(ne.hasAngularVelocity=!0,ne.angularVelocity.copy(Q.angularVelocity)):ne.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return ne!==null&&(ne.visible=Q!==null),ie!==null&&(ie.visible=ee!==null),re!==null&&(re.visible=te!==null),this}_getHandJoint(_,J){if(_.joints[J.jointName]===void 0){const Z=new Group;Z.matrixAutoUpdate=!1,Z.visible=!1,_.joints[J.jointName]=Z,_.add(Z)}return _.joints[J.jointName]}}class FogExp2{constructor(_,J=25e-5){this.isFogExp2=!0,this.name="",this.color=new Color(_),this.density=J}clone(){return new FogExp2(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Fog{constructor(_,J=1,Z=1e3){this.isFog=!0,this.name="",this.color=new Color(_),this.near=J,this.far=Z}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Euler,this.environmentIntensity=1,this.environmentRotation=new Euler,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(_,J){return super.copy(_,J),_.background!==null&&(this.background=_.background.clone()),_.environment!==null&&(this.environment=_.environment.clone()),_.fog!==null&&(this.fog=_.fog.clone()),this.backgroundBlurriness=_.backgroundBlurriness,this.backgroundIntensity=_.backgroundIntensity,this.backgroundRotation.copy(_.backgroundRotation),this.environmentIntensity=_.environmentIntensity,this.environmentRotation.copy(_.environmentRotation),_.overrideMaterial!==null&&(this.overrideMaterial=_.overrideMaterial.clone()),this.matrixAutoUpdate=_.matrixAutoUpdate,this}toJSON(_){const J=super.toJSON(_);return this.fog!==null&&(J.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(J.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(J.object.backgroundIntensity=this.backgroundIntensity),J.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(J.object.environmentIntensity=this.environmentIntensity),J.object.environmentRotation=this.environmentRotation.toArray(),J}}class InterleavedBuffer{constructor(_,J){this.isInterleavedBuffer=!0,this.array=_,this.stride=J,this.count=_!==void 0?_.length/J:0,this.usage=StaticDrawUsage,this.updateRanges=[],this.version=0,this.uuid=generateUUID()}onUploadCallback(){}set needsUpdate(_){_===!0&&this.version++}setUsage(_){return this.usage=_,this}addUpdateRange(_,J){this.updateRanges.push({start:_,count:J})}clearUpdateRanges(){this.updateRanges.length=0}copy(_){return this.array=new _.array.constructor(_.array),this.count=_.count,this.stride=_.stride,this.usage=_.usage,this}copyAt(_,J,Z){_*=this.stride,Z*=J.stride;for(let Q=0,ee=this.stride;Q<ee;Q++)this.array[_+Q]=J.array[Z+Q];return this}set(_,J=0){return this.array.set(_,J),this}clone(_){_.arrayBuffers===void 0&&(_.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),_.arrayBuffers[this.array.buffer._uuid]===void 0&&(_.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const J=new this.array.constructor(_.arrayBuffers[this.array.buffer._uuid]),Z=new this.constructor(J,this.stride);return Z.setUsage(this.usage),Z}onUpload(_){return this.onUploadCallback=_,this}toJSON(_){return _.arrayBuffers===void 0&&(_.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),_.arrayBuffers[this.array.buffer._uuid]===void 0&&(_.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _vector$7=new Vector3;class InterleavedBufferAttribute{constructor(_,J,Z,Q=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=_,this.itemSize=J,this.offset=Z,this.normalized=Q}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(_){this.data.needsUpdate=_}applyMatrix4(_){for(let J=0,Z=this.data.count;J<Z;J++)_vector$7.fromBufferAttribute(this,J),_vector$7.applyMatrix4(_),this.setXYZ(J,_vector$7.x,_vector$7.y,_vector$7.z);return this}applyNormalMatrix(_){for(let J=0,Z=this.count;J<Z;J++)_vector$7.fromBufferAttribute(this,J),_vector$7.applyNormalMatrix(_),this.setXYZ(J,_vector$7.x,_vector$7.y,_vector$7.z);return this}transformDirection(_){for(let J=0,Z=this.count;J<Z;J++)_vector$7.fromBufferAttribute(this,J),_vector$7.transformDirection(_),this.setXYZ(J,_vector$7.x,_vector$7.y,_vector$7.z);return this}getComponent(_,J){let Z=this.array[_*this.data.stride+this.offset+J];return this.normalized&&(Z=denormalize(Z,this.array)),Z}setComponent(_,J,Z){return this.normalized&&(Z=normalize(Z,this.array)),this.data.array[_*this.data.stride+this.offset+J]=Z,this}setX(_,J){return this.normalized&&(J=normalize(J,this.array)),this.data.array[_*this.data.stride+this.offset]=J,this}setY(_,J){return this.normalized&&(J=normalize(J,this.array)),this.data.array[_*this.data.stride+this.offset+1]=J,this}setZ(_,J){return this.normalized&&(J=normalize(J,this.array)),this.data.array[_*this.data.stride+this.offset+2]=J,this}setW(_,J){return this.normalized&&(J=normalize(J,this.array)),this.data.array[_*this.data.stride+this.offset+3]=J,this}getX(_){let J=this.data.array[_*this.data.stride+this.offset];return this.normalized&&(J=denormalize(J,this.array)),J}getY(_){let J=this.data.array[_*this.data.stride+this.offset+1];return this.normalized&&(J=denormalize(J,this.array)),J}getZ(_){let J=this.data.array[_*this.data.stride+this.offset+2];return this.normalized&&(J=denormalize(J,this.array)),J}getW(_){let J=this.data.array[_*this.data.stride+this.offset+3];return this.normalized&&(J=denormalize(J,this.array)),J}setXY(_,J,Z){return _=_*this.data.stride+this.offset,this.normalized&&(J=normalize(J,this.array),Z=normalize(Z,this.array)),this.data.array[_+0]=J,this.data.array[_+1]=Z,this}setXYZ(_,J,Z,Q){return _=_*this.data.stride+this.offset,this.normalized&&(J=normalize(J,this.array),Z=normalize(Z,this.array),Q=normalize(Q,this.array)),this.data.array[_+0]=J,this.data.array[_+1]=Z,this.data.array[_+2]=Q,this}setXYZW(_,J,Z,Q,ee){return _=_*this.data.stride+this.offset,this.normalized&&(J=normalize(J,this.array),Z=normalize(Z,this.array),Q=normalize(Q,this.array),ee=normalize(ee,this.array)),this.data.array[_+0]=J,this.data.array[_+1]=Z,this.data.array[_+2]=Q,this.data.array[_+3]=ee,this}clone(_){if(_===void 0){log("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const J=[];for(let Z=0;Z<this.count;Z++){const Q=Z*this.data.stride+this.offset;for(let ee=0;ee<this.itemSize;ee++)J.push(this.data.array[Q+ee])}return new BufferAttribute(new this.array.constructor(J),this.itemSize,this.normalized)}else return _.interleavedBuffers===void 0&&(_.interleavedBuffers={}),_.interleavedBuffers[this.data.uuid]===void 0&&(_.interleavedBuffers[this.data.uuid]=this.data.clone(_)),new InterleavedBufferAttribute(_.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(_){if(_===void 0){log("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const J=[];for(let Z=0;Z<this.count;Z++){const Q=Z*this.data.stride+this.offset;for(let ee=0;ee<this.itemSize;ee++)J.push(this.data.array[Q+ee])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:J,normalized:this.normalized}}else return _.interleavedBuffers===void 0&&(_.interleavedBuffers={}),_.interleavedBuffers[this.data.uuid]===void 0&&(_.interleavedBuffers[this.data.uuid]=this.data.toJSON(_)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class SpriteMaterial extends Material{constructor(_){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.alphaMap=_.alphaMap,this.rotation=_.rotation,this.sizeAttenuation=_.sizeAttenuation,this.fog=_.fog,this}}let _geometry;const _intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2;class Sprite extends Object3D{constructor(_=new SpriteMaterial){if(super(),this.isSprite=!0,this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;const J=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),Z=new InterleavedBuffer(J,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(Z,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(Z,2,3,!1))}this.geometry=_geometry,this.material=_,this.center=new Vector2(.5,.5),this.count=1}raycast(_,J){_.camera===null&&error('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(_.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(_.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),_.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);const Z=this.material.rotation;let Q,ee;Z!==0&&(ee=Math.cos(Z),Q=Math.sin(Z));const te=this.center;transformVertex(_vA.set(-.5,-.5,0),_mvPosition,te,_worldScale,Q,ee),transformVertex(_vB.set(.5,-.5,0),_mvPosition,te,_worldScale,Q,ee),transformVertex(_vC.set(.5,.5,0),_mvPosition,te,_worldScale,Q,ee),_uvA.set(0,0),_uvB.set(1,0),_uvC.set(1,1);let ne=_.ray.intersectTriangle(_vA,_vB,_vC,!1,_intersectPoint);if(ne===null&&(transformVertex(_vB.set(-.5,.5,0),_mvPosition,te,_worldScale,Q,ee),_uvB.set(0,1),ne=_.ray.intersectTriangle(_vA,_vC,_vB,!1,_intersectPoint),ne===null))return;const ie=_.ray.origin.distanceTo(_intersectPoint);ie<_.near||ie>_.far||J.push({distance:ie,point:_intersectPoint.clone(),uv:Triangle.getInterpolation(_intersectPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2),face:null,object:this})}copy(_,J){return super.copy(_,J),_.center!==void 0&&this.center.copy(_.center),this.material=_.material,this}}function transformVertex(G,_,J,Z,Q,ee){_alignedPosition.subVectors(G,J).addScalar(.5).multiply(Z),Q!==void 0?(_rotatedPosition.x=ee*_alignedPosition.x-Q*_alignedPosition.y,_rotatedPosition.y=Q*_alignedPosition.x+ee*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),G.copy(_),G.x+=_rotatedPosition.x,G.y+=_rotatedPosition.y,G.applyMatrix4(_viewWorldMatrix)}const _v1$2=new Vector3,_v2$1=new Vector3;class LOD extends Object3D{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(_){super.copy(_,!1);const J=_.levels;for(let Z=0,Q=J.length;Z<Q;Z++){const ee=J[Z];this.addLevel(ee.object.clone(),ee.distance,ee.hysteresis)}return this.autoUpdate=_.autoUpdate,this}addLevel(_,J=0,Z=0){J=Math.abs(J);const Q=this.levels;let ee;for(ee=0;ee<Q.length&&!(J<Q[ee].distance);ee++);return Q.splice(ee,0,{distance:J,hysteresis:Z,object:_}),this.add(_),this}removeLevel(_){const J=this.levels;for(let Z=0;Z<J.length;Z++)if(J[Z].distance===_){const Q=J.splice(Z,1);return this.remove(Q[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(_){const J=this.levels;if(J.length>0){let Z,Q;for(Z=1,Q=J.length;Z<Q;Z++){let ee=J[Z].distance;if(J[Z].object.visible&&(ee-=ee*J[Z].hysteresis),_<ee)break}return J[Z-1].object}return null}raycast(_,J){if(this.levels.length>0){_v1$2.setFromMatrixPosition(this.matrixWorld);const Q=_.ray.origin.distanceTo(_v1$2);this.getObjectForDistance(Q).raycast(_,J)}}update(_){const J=this.levels;if(J.length>1){_v1$2.setFromMatrixPosition(_.matrixWorld),_v2$1.setFromMatrixPosition(this.matrixWorld);const Z=_v1$2.distanceTo(_v2$1)/_.zoom;J[0].object.visible=!0;let Q,ee;for(Q=1,ee=J.length;Q<ee;Q++){let te=J[Q].distance;if(J[Q].object.visible&&(te-=te*J[Q].hysteresis),Z>=te)J[Q-1].object.visible=!1,J[Q].object.visible=!0;else break}for(this._currentLevel=Q-1;Q<ee;Q++)J[Q].object.visible=!1}}toJSON(_){const J=super.toJSON(_);this.autoUpdate===!1&&(J.object.autoUpdate=!1),J.object.levels=[];const Z=this.levels;for(let Q=0,ee=Z.length;Q<ee;Q++){const te=Z[Q];J.object.levels.push({object:te.object.uuid,distance:te.distance,hysteresis:te.hysteresis})}return J}}const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector3=new Vector3,_matrix4=new Matrix4,_vertex=new Vector3,_sphere$5=new Sphere$1,_inverseMatrix$2=new Matrix4,_ray$2=new Ray;class SkinnedMesh extends Mesh{constructor(_,J){super(_,J),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=AttachedBindMode,this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const _=this.geometry;this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.makeEmpty();const J=_.getAttribute("position");for(let Z=0;Z<J.count;Z++)this.getVertexPosition(Z,_vertex),this.boundingBox.expandByPoint(_vertex)}computeBoundingSphere(){const _=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Sphere$1),this.boundingSphere.makeEmpty();const J=_.getAttribute("position");for(let Z=0;Z<J.count;Z++)this.getVertexPosition(Z,_vertex),this.boundingSphere.expandByPoint(_vertex)}copy(_,J){return super.copy(_,J),this.bindMode=_.bindMode,this.bindMatrix.copy(_.bindMatrix),this.bindMatrixInverse.copy(_.bindMatrixInverse),this.skeleton=_.skeleton,_.boundingBox!==null&&(this.boundingBox=_.boundingBox.clone()),_.boundingSphere!==null&&(this.boundingSphere=_.boundingSphere.clone()),this}raycast(_,J){const Z=this.material,Q=this.matrixWorld;Z!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$5.copy(this.boundingSphere),_sphere$5.applyMatrix4(Q),_.ray.intersectsSphere(_sphere$5)!==!1&&(_inverseMatrix$2.copy(Q).invert(),_ray$2.copy(_.ray).applyMatrix4(_inverseMatrix$2),!(this.boundingBox!==null&&_ray$2.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(_,J,_ray$2)))}getVertexPosition(_,J){return super.getVertexPosition(_,J),this.applyBoneTransform(_,J),J}bind(_,J){this.skeleton=_,J===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),J=this.matrixWorld),this.bindMatrix.copy(J),this.bindMatrixInverse.copy(J).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const _=new Vector4,J=this.geometry.attributes.skinWeight;for(let Z=0,Q=J.count;Z<Q;Z++){_.fromBufferAttribute(J,Z);const ee=1/_.manhattanLength();ee!==1/0?_.multiplyScalar(ee):_.set(1,0,0,0),J.setXYZW(Z,_.x,_.y,_.z,_.w)}}updateMatrixWorld(_){super.updateMatrixWorld(_),this.bindMode===AttachedBindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===DetachedBindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():warn("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(_,J){const Z=this.skeleton,Q=this.geometry;_skinIndex.fromBufferAttribute(Q.attributes.skinIndex,_),_skinWeight.fromBufferAttribute(Q.attributes.skinWeight,_),_basePosition.copy(J).applyMatrix4(this.bindMatrix),J.set(0,0,0);for(let ee=0;ee<4;ee++){const te=_skinWeight.getComponent(ee);if(te!==0){const ne=_skinIndex.getComponent(ee);_matrix4.multiplyMatrices(Z.bones[ne].matrixWorld,Z.boneInverses[ne]),J.addScaledVector(_vector3.copy(_basePosition).applyMatrix4(_matrix4),te)}}return J.applyMatrix4(this.bindMatrixInverse)}}class Bone extends Object3D{constructor(){super(),this.isBone=!0,this.type="Bone"}}class DataTexture extends Texture{constructor(_=null,J=1,Z=1,Q,ee,te,ne,ie,re=NearestFilter,oe=NearestFilter,se,ae){super(null,te,ne,ie,re,oe,Q,ee,se,ae),this.isDataTexture=!0,this.image={data:_,width:J,height:Z},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _offsetMatrix=new Matrix4,_identityMatrix=new Matrix4;class Skeleton{constructor(_=[],J=[]){this.uuid=generateUUID(),this.bones=_.slice(0),this.boneInverses=J,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const _=this.bones,J=this.boneInverses;if(this.boneMatrices=new Float32Array(_.length*16),J.length===0)this.calculateInverses();else if(_.length!==J.length){warn("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let Z=0,Q=this.bones.length;Z<Q;Z++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let _=0,J=this.bones.length;_<J;_++){const Z=new Matrix4;this.bones[_]&&Z.copy(this.bones[_].matrixWorld).invert(),this.boneInverses.push(Z)}}pose(){for(let _=0,J=this.bones.length;_<J;_++){const Z=this.bones[_];Z&&Z.matrixWorld.copy(this.boneInverses[_]).invert()}for(let _=0,J=this.bones.length;_<J;_++){const Z=this.bones[_];Z&&(Z.parent&&Z.parent.isBone?(Z.matrix.copy(Z.parent.matrixWorld).invert(),Z.matrix.multiply(Z.matrixWorld)):Z.matrix.copy(Z.matrixWorld),Z.matrix.decompose(Z.position,Z.quaternion,Z.scale))}}update(){const _=this.bones,J=this.boneInverses,Z=this.boneMatrices,Q=this.boneTexture;for(let ee=0,te=_.length;ee<te;ee++){const ne=_[ee]?_[ee].matrixWorld:_identityMatrix;_offsetMatrix.multiplyMatrices(ne,J[ee]),_offsetMatrix.toArray(Z,ee*16)}Q!==null&&(Q.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let _=Math.sqrt(this.bones.length*4);_=Math.ceil(_/4)*4,_=Math.max(_,4);const J=new Float32Array(_*_*4);J.set(this.boneMatrices);const Z=new DataTexture(J,_,_,RGBAFormat,FloatType);return Z.needsUpdate=!0,this.boneMatrices=J,this.boneTexture=Z,this}getBoneByName(_){for(let J=0,Z=this.bones.length;J<Z;J++){const Q=this.bones[J];if(Q.name===_)return Q}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(_,J){this.uuid=_.uuid;for(let Z=0,Q=_.bones.length;Z<Q;Z++){const ee=_.bones[Z];let te=J[ee];te===void 0&&(warn("Skeleton: No bone found with UUID:",ee),te=new Bone),this.bones.push(te),this.boneInverses.push(new Matrix4().fromArray(_.boneInverses[Z]))}return this.init(),this}toJSON(){const _={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};_.uuid=this.uuid;const J=this.bones,Z=this.boneInverses;for(let Q=0,ee=J.length;Q<ee;Q++){const te=J[Q];_.bones.push(te.uuid);const ne=Z[Q];_.boneInverses.push(ne.toArray())}return _}}class InstancedBufferAttribute extends BufferAttribute{constructor(_,J,Z,Q=1){super(_,J,Z),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=Q}copy(_){return super.copy(_),this.meshPerAttribute=_.meshPerAttribute,this}toJSON(){const _=super.toJSON();return _.meshPerAttribute=this.meshPerAttribute,_.isInstancedBufferAttribute=!0,_}}const _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_box3=new Box3,_identity=new Matrix4,_mesh$1=new Mesh,_sphere$4=new Sphere$1;class InstancedMesh extends Mesh{constructor(_,J,Z){super(_,J),this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(Z*16),16),this.instanceColor=null,this.morphTexture=null,this.count=Z,this.boundingBox=null,this.boundingSphere=null;for(let Q=0;Q<Z;Q++)this.setMatrixAt(Q,_identity)}computeBoundingBox(){const _=this.geometry,J=this.count;this.boundingBox===null&&(this.boundingBox=new Box3),_.boundingBox===null&&_.computeBoundingBox(),this.boundingBox.makeEmpty();for(let Z=0;Z<J;Z++)this.getMatrixAt(Z,_instanceLocalMatrix),_box3.copy(_.boundingBox).applyMatrix4(_instanceLocalMatrix),this.boundingBox.union(_box3)}computeBoundingSphere(){const _=this.geometry,J=this.count;this.boundingSphere===null&&(this.boundingSphere=new Sphere$1),_.boundingSphere===null&&_.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let Z=0;Z<J;Z++)this.getMatrixAt(Z,_instanceLocalMatrix),_sphere$4.copy(_.boundingSphere).applyMatrix4(_instanceLocalMatrix),this.boundingSphere.union(_sphere$4)}copy(_,J){return super.copy(_,J),this.instanceMatrix.copy(_.instanceMatrix),_.morphTexture!==null&&(this.morphTexture=_.morphTexture.clone()),_.instanceColor!==null&&(this.instanceColor=_.instanceColor.clone()),this.count=_.count,_.boundingBox!==null&&(this.boundingBox=_.boundingBox.clone()),_.boundingSphere!==null&&(this.boundingSphere=_.boundingSphere.clone()),this}getColorAt(_,J){J.fromArray(this.instanceColor.array,_*3)}getMatrixAt(_,J){J.fromArray(this.instanceMatrix.array,_*16)}getMorphAt(_,J){const Z=J.morphTargetInfluences,Q=this.morphTexture.source.data.data,ee=Z.length+1,te=_*ee+1;for(let ne=0;ne<Z.length;ne++)Z[ne]=Q[te+ne]}raycast(_,J){const Z=this.matrixWorld,Q=this.count;if(_mesh$1.geometry=this.geometry,_mesh$1.material=this.material,_mesh$1.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$4.copy(this.boundingSphere),_sphere$4.applyMatrix4(Z),_.ray.intersectsSphere(_sphere$4)!==!1))for(let ee=0;ee<Q;ee++){this.getMatrixAt(ee,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(Z,_instanceLocalMatrix),_mesh$1.matrixWorld=_instanceWorldMatrix,_mesh$1.raycast(_,_instanceIntersects);for(let te=0,ne=_instanceIntersects.length;te<ne;te++){const ie=_instanceIntersects[te];ie.instanceId=ee,ie.object=this,J.push(ie)}_instanceIntersects.length=0}}setColorAt(_,J){this.instanceColor===null&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),J.toArray(this.instanceColor.array,_*3)}setMatrixAt(_,J){J.toArray(this.instanceMatrix.array,_*16)}setMorphAt(_,J){const Z=J.morphTargetInfluences,Q=Z.length+1;this.morphTexture===null&&(this.morphTexture=new DataTexture(new Float32Array(Q*this.count),Q,this.count,RedFormat,FloatType));const ee=this.morphTexture.source.data.data;let te=0;for(let re=0;re<Z.length;re++)te+=Z[re];const ne=this.geometry.morphTargetsRelative?1:1-te,ie=Q*_;ee[ie]=ne,ee.set(Z,ie+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;class Plane{constructor(_=new Vector3(1,0,0),J=0){this.isPlane=!0,this.normal=_,this.constant=J}set(_,J){return this.normal.copy(_),this.constant=J,this}setComponents(_,J,Z,Q){return this.normal.set(_,J,Z),this.constant=Q,this}setFromNormalAndCoplanarPoint(_,J){return this.normal.copy(_),this.constant=-J.dot(this.normal),this}setFromCoplanarPoints(_,J,Z){const Q=_vector1.subVectors(Z,J).cross(_vector2.subVectors(_,J)).normalize();return this.setFromNormalAndCoplanarPoint(Q,_),this}copy(_){return this.normal.copy(_.normal),this.constant=_.constant,this}normalize(){const _=1/this.normal.length();return this.normal.multiplyScalar(_),this.constant*=_,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(_){return this.normal.dot(_)+this.constant}distanceToSphere(_){return this.distanceToPoint(_.center)-_.radius}projectPoint(_,J){return J.copy(_).addScaledVector(this.normal,-this.distanceToPoint(_))}intersectLine(_,J){const Z=_.delta(_vector1),Q=this.normal.dot(Z);if(Q===0)return this.distanceToPoint(_.start)===0?J.copy(_.start):null;const ee=-(_.start.dot(this.normal)+this.constant)/Q;return ee<0||ee>1?null:J.copy(_.start).addScaledVector(Z,ee)}intersectsLine(_){const J=this.distanceToPoint(_.start),Z=this.distanceToPoint(_.end);return J<0&&Z>0||Z<0&&J>0}intersectsBox(_){return _.intersectsPlane(this)}intersectsSphere(_){return _.intersectsPlane(this)}coplanarPoint(_){return _.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(_,J){const Z=J||_normalMatrix.getNormalMatrix(_),Q=this.coplanarPoint(_vector1).applyMatrix4(_),ee=this.normal.applyMatrix3(Z).normalize();return this.constant=-Q.dot(ee),this}translate(_){return this.constant-=_.dot(this.normal),this}equals(_){return _.normal.equals(this.normal)&&_.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _sphere$3=new Sphere$1,_defaultSpriteCenter=new Vector2(.5,.5),_vector$6=new Vector3;class Frustum{constructor(_=new Plane,J=new Plane,Z=new Plane,Q=new Plane,ee=new Plane,te=new Plane){this.planes=[_,J,Z,Q,ee,te]}set(_,J,Z,Q,ee,te){const ne=this.planes;return ne[0].copy(_),ne[1].copy(J),ne[2].copy(Z),ne[3].copy(Q),ne[4].copy(ee),ne[5].copy(te),this}copy(_){const J=this.planes;for(let Z=0;Z<6;Z++)J[Z].copy(_.planes[Z]);return this}setFromProjectionMatrix(_,J=WebGLCoordinateSystem,Z=!1){const Q=this.planes,ee=_.elements,te=ee[0],ne=ee[1],ie=ee[2],re=ee[3],oe=ee[4],se=ee[5],ae=ee[6],le=ee[7],ue=ee[8],de=ee[9],pe=ee[10],fe=ee[11],_e=ee[12],ye=ee[13],be=ee[14],Ae=ee[15];if(Q[0].setComponents(re-te,le-oe,fe-ue,Ae-_e).normalize(),Q[1].setComponents(re+te,le+oe,fe+ue,Ae+_e).normalize(),Q[2].setComponents(re+ne,le+se,fe+de,Ae+ye).normalize(),Q[3].setComponents(re-ne,le-se,fe-de,Ae-ye).normalize(),Z)Q[4].setComponents(ie,ae,pe,be).normalize(),Q[5].setComponents(re-ie,le-ae,fe-pe,Ae-be).normalize();else if(Q[4].setComponents(re-ie,le-ae,fe-pe,Ae-be).normalize(),J===WebGLCoordinateSystem)Q[5].setComponents(re+ie,le+ae,fe+pe,Ae+be).normalize();else if(J===WebGPUCoordinateSystem)Q[5].setComponents(ie,ae,pe,be).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+J);return this}intersectsObject(_){if(_.boundingSphere!==void 0)_.boundingSphere===null&&_.computeBoundingSphere(),_sphere$3.copy(_.boundingSphere).applyMatrix4(_.matrixWorld);else{const J=_.geometry;J.boundingSphere===null&&J.computeBoundingSphere(),_sphere$3.copy(J.boundingSphere).applyMatrix4(_.matrixWorld)}return this.intersectsSphere(_sphere$3)}intersectsSprite(_){_sphere$3.center.set(0,0,0);const J=_defaultSpriteCenter.distanceTo(_.center);return _sphere$3.radius=.7071067811865476+J,_sphere$3.applyMatrix4(_.matrixWorld),this.intersectsSphere(_sphere$3)}intersectsSphere(_){const J=this.planes,Z=_.center,Q=-_.radius;for(let ee=0;ee<6;ee++)if(J[ee].distanceToPoint(Z)<Q)return!1;return!0}intersectsBox(_){const J=this.planes;for(let Z=0;Z<6;Z++){const Q=J[Z];if(_vector$6.x=Q.normal.x>0?_.max.x:_.min.x,_vector$6.y=Q.normal.y>0?_.max.y:_.min.y,_vector$6.z=Q.normal.z>0?_.max.z:_.min.z,Q.distanceToPoint(_vector$6)<0)return!1}return!0}containsPoint(_){const J=this.planes;for(let Z=0;Z<6;Z++)if(J[Z].distanceToPoint(_)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const _projScreenMatrix$2=new Matrix4,_frustum$1=new Frustum;class FrustumArray{constructor(){this.coordinateSystem=WebGLCoordinateSystem}intersectsObject(_,J){if(!J.isArrayCamera||J.cameras.length===0)return!1;for(let Z=0;Z<J.cameras.length;Z++){const Q=J.cameras[Z];if(_projScreenMatrix$2.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$2,Q.coordinateSystem,Q.reversedDepth),_frustum$1.intersectsObject(_))return!0}return!1}intersectsSprite(_,J){if(!J||!J.cameras||J.cameras.length===0)return!1;for(let Z=0;Z<J.cameras.length;Z++){const Q=J.cameras[Z];if(_projScreenMatrix$2.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$2,Q.coordinateSystem,Q.reversedDepth),_frustum$1.intersectsSprite(_))return!0}return!1}intersectsSphere(_,J){if(!J||!J.cameras||J.cameras.length===0)return!1;for(let Z=0;Z<J.cameras.length;Z++){const Q=J.cameras[Z];if(_projScreenMatrix$2.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$2,Q.coordinateSystem,Q.reversedDepth),_frustum$1.intersectsSphere(_))return!0}return!1}intersectsBox(_,J){if(!J||!J.cameras||J.cameras.length===0)return!1;for(let Z=0;Z<J.cameras.length;Z++){const Q=J.cameras[Z];if(_projScreenMatrix$2.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$2,Q.coordinateSystem,Q.reversedDepth),_frustum$1.intersectsBox(_))return!0}return!1}containsPoint(_,J){if(!J||!J.cameras||J.cameras.length===0)return!1;for(let Z=0;Z<J.cameras.length;Z++){const Q=J.cameras[Z];if(_projScreenMatrix$2.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$2,Q.coordinateSystem,Q.reversedDepth),_frustum$1.containsPoint(_))return!0}return!1}clone(){return new FrustumArray}}function ascIdSort(G,_){return G-_}function sortOpaque(G,_){return G.z-_.z}function sortTransparent(G,_){return _.z-G.z}class MultiDrawRenderList{constructor(){this.index=0,this.pool=[],this.list=[]}push(_,J,Z,Q){const ee=this.pool,te=this.list;this.index>=ee.length&&ee.push({start:-1,count:-1,z:-1,index:-1});const ne=ee[this.index];te.push(ne),this.index++,ne.start=_,ne.count=J,ne.z=Z,ne.index=Q}reset(){this.list.length=0,this.index=0}}const _matrix$1=new Matrix4,_whiteColor=new Color(1,1,1),_frustum=new Frustum,_frustumArray=new FrustumArray,_box$1=new Box3,_sphere$2=new Sphere$1,_vector$5=new Vector3,_forward$1=new Vector3,_temp=new Vector3,_renderList=new MultiDrawRenderList,_mesh=new Mesh,_batchIntersects=[];function copyAttributeData(G,_,J=0){const Z=_.itemSize;if(G.isInterleavedBufferAttribute||G.array.constructor!==_.array.constructor){const Q=G.count;for(let ee=0;ee<Q;ee++)for(let te=0;te<Z;te++)_.setComponent(ee+J,te,G.getComponent(ee,te))}else _.array.set(G.array,J*Z);_.needsUpdate=!0}function copyArrayContents(G,_){if(G.constructor!==_.constructor){const J=Math.min(G.length,_.length);for(let Z=0;Z<J;Z++)_[Z]=G[Z]}else{const J=Math.min(G.length,_.length);_.set(new G.constructor(G.buffer,0,J))}}class BatchedMesh extends Mesh{constructor(_,J,Z=J*2,Q){super(new BufferGeometry,Q),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=_,this._maxVertexCount=J,this._maxIndexCount=Z,this._multiDrawCounts=new Int32Array(_),this._multiDrawStarts=new Int32Array(_),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let _=Math.sqrt(this._maxInstanceCount*4);_=Math.ceil(_/4)*4,_=Math.max(_,4);const J=new Float32Array(_*_*4),Z=new DataTexture(J,_,_,RGBAFormat,FloatType);this._matricesTexture=Z}_initIndirectTexture(){let _=Math.sqrt(this._maxInstanceCount);_=Math.ceil(_);const J=new Uint32Array(_*_),Z=new DataTexture(J,_,_,RedIntegerFormat,UnsignedIntType);this._indirectTexture=Z}_initColorsTexture(){let _=Math.sqrt(this._maxInstanceCount);_=Math.ceil(_);const J=new Float32Array(_*_*4).fill(1),Z=new DataTexture(J,_,_,RGBAFormat,FloatType);Z.colorSpace=ColorManagement.workingColorSpace,this._colorsTexture=Z}_initializeGeometry(_){const J=this.geometry,Z=this._maxVertexCount,Q=this._maxIndexCount;if(this._geometryInitialized===!1){for(const ee in _.attributes){const te=_.getAttribute(ee),{array:ne,itemSize:ie,normalized:re}=te,oe=new ne.constructor(Z*ie),se=new BufferAttribute(oe,ie,re);J.setAttribute(ee,se)}if(_.getIndex()!==null){const ee=Z>65535?new Uint32Array(Q):new Uint16Array(Q);J.setIndex(new BufferAttribute(ee,1))}this._geometryInitialized=!0}}_validateGeometry(_){const J=this.geometry;if(!!_.getIndex()!=!!J.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const Z in J.attributes){if(!_.hasAttribute(Z))throw new Error(`THREE.BatchedMesh: Added geometry missing "${Z}". All geometries must have consistent attributes.`);const Q=_.getAttribute(Z),ee=J.getAttribute(Z);if(Q.itemSize!==ee.itemSize||Q.normalized!==ee.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(_){const J=this._instanceInfo;if(_<0||_>=J.length||J[_].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${_}. Instance is either out of range or has been deleted.`)}validateGeometryId(_){const J=this._geometryInfo;if(_<0||_>=J.length||J[_].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${_}. Geometry is either out of range or has been deleted.`)}setCustomSort(_){return this.customSort=_,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const _=this.boundingBox,J=this._instanceInfo;_.makeEmpty();for(let Z=0,Q=J.length;Z<Q;Z++){if(J[Z].active===!1)continue;const ee=J[Z].geometryIndex;this.getMatrixAt(Z,_matrix$1),this.getBoundingBoxAt(ee,_box$1).applyMatrix4(_matrix$1),_.union(_box$1)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere$1);const _=this.boundingSphere,J=this._instanceInfo;_.makeEmpty();for(let Z=0,Q=J.length;Z<Q;Z++){if(J[Z].active===!1)continue;const ee=J[Z].geometryIndex;this.getMatrixAt(Z,_matrix$1),this.getBoundingSphereAt(ee,_sphere$2).applyMatrix4(_matrix$1),_.union(_sphere$2)}}addInstance(_){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const Z={visible:!0,active:!0,geometryIndex:_};let Q=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(ascIdSort),Q=this._availableInstanceIds.shift(),this._instanceInfo[Q]=Z):(Q=this._instanceInfo.length,this._instanceInfo.push(Z));const ee=this._matricesTexture;_matrix$1.identity().toArray(ee.image.data,Q*16),ee.needsUpdate=!0;const te=this._colorsTexture;return te&&(_whiteColor.toArray(te.image.data,Q*4),te.needsUpdate=!0),this._visibilityChanged=!0,Q}addGeometry(_,J=-1,Z=-1){this._initializeGeometry(_),this._validateGeometry(_);const Q={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},ee=this._geometryInfo;Q.vertexStart=this._nextVertexStart,Q.reservedVertexCount=J===-1?_.getAttribute("position").count:J;const te=_.getIndex();if(te!==null&&(Q.indexStart=this._nextIndexStart,Q.reservedIndexCount=Z===-1?te.count:Z),Q.indexStart!==-1&&Q.indexStart+Q.reservedIndexCount>this._maxIndexCount||Q.vertexStart+Q.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let ie;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(ascIdSort),ie=this._availableGeometryIds.shift(),ee[ie]=Q):(ie=this._geometryCount,this._geometryCount++,ee.push(Q)),this.setGeometryAt(ie,_),this._nextIndexStart=Q.indexStart+Q.reservedIndexCount,this._nextVertexStart=Q.vertexStart+Q.reservedVertexCount,ie}setGeometryAt(_,J){if(_>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(J);const Z=this.geometry,Q=Z.getIndex()!==null,ee=Z.getIndex(),te=J.getIndex(),ne=this._geometryInfo[_];if(Q&&te.count>ne.reservedIndexCount||J.attributes.position.count>ne.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const ie=ne.vertexStart,re=ne.reservedVertexCount;ne.vertexCount=J.getAttribute("position").count;for(const oe in Z.attributes){const se=J.getAttribute(oe),ae=Z.getAttribute(oe);copyAttributeData(se,ae,ie);const le=se.itemSize;for(let ue=se.count,de=re;ue<de;ue++){const pe=ie+ue;for(let fe=0;fe<le;fe++)ae.setComponent(pe,fe,0)}ae.needsUpdate=!0,ae.addUpdateRange(ie*le,re*le)}if(Q){const oe=ne.indexStart,se=ne.reservedIndexCount;ne.indexCount=J.getIndex().count;for(let ae=0;ae<te.count;ae++)ee.setX(oe+ae,ie+te.getX(ae));for(let ae=te.count,le=se;ae<le;ae++)ee.setX(oe+ae,ie);ee.needsUpdate=!0,ee.addUpdateRange(oe,ne.reservedIndexCount)}return ne.start=Q?ne.indexStart:ne.vertexStart,ne.count=Q?ne.indexCount:ne.vertexCount,ne.boundingBox=null,J.boundingBox!==null&&(ne.boundingBox=J.boundingBox.clone()),ne.boundingSphere=null,J.boundingSphere!==null&&(ne.boundingSphere=J.boundingSphere.clone()),this._visibilityChanged=!0,_}deleteGeometry(_){const J=this._geometryInfo;if(_>=J.length||J[_].active===!1)return this;const Z=this._instanceInfo;for(let Q=0,ee=Z.length;Q<ee;Q++)Z[Q].active&&Z[Q].geometryIndex===_&&this.deleteInstance(Q);return J[_].active=!1,this._availableGeometryIds.push(_),this._visibilityChanged=!0,this}deleteInstance(_){return this.validateInstanceId(_),this._instanceInfo[_].active=!1,this._availableInstanceIds.push(_),this._visibilityChanged=!0,this}optimize(){let _=0,J=0;const Z=this._geometryInfo,Q=Z.map((te,ne)=>ne).sort((te,ne)=>Z[te].vertexStart-Z[ne].vertexStart),ee=this.geometry;for(let te=0,ne=Z.length;te<ne;te++){const ie=Q[te],re=Z[ie];if(re.active!==!1){if(ee.index!==null){if(re.indexStart!==J){const{indexStart:oe,vertexStart:se,reservedIndexCount:ae}=re,le=ee.index,ue=le.array,de=_-se;for(let pe=oe;pe<oe+ae;pe++)ue[pe]=ue[pe]+de;le.array.copyWithin(J,oe,oe+ae),le.addUpdateRange(J,ae),re.indexStart=J}J+=re.reservedIndexCount}if(re.vertexStart!==_){const{vertexStart:oe,reservedVertexCount:se}=re,ae=ee.attributes;for(const le in ae){const ue=ae[le],{array:de,itemSize:pe}=ue;de.copyWithin(_*pe,oe*pe,(oe+se)*pe),ue.addUpdateRange(_*pe,se*pe)}re.vertexStart=_}_+=re.reservedVertexCount,re.start=ee.index?re.indexStart:re.vertexStart,this._nextIndexStart=ee.index?re.indexStart+re.reservedIndexCount:0,this._nextVertexStart=re.vertexStart+re.reservedVertexCount}}return this}getBoundingBoxAt(_,J){if(_>=this._geometryCount)return null;const Z=this.geometry,Q=this._geometryInfo[_];if(Q.boundingBox===null){const ee=new Box3,te=Z.index,ne=Z.attributes.position;for(let ie=Q.start,re=Q.start+Q.count;ie<re;ie++){let oe=ie;te&&(oe=te.getX(oe)),ee.expandByPoint(_vector$5.fromBufferAttribute(ne,oe))}Q.boundingBox=ee}return J.copy(Q.boundingBox),J}getBoundingSphereAt(_,J){if(_>=this._geometryCount)return null;const Z=this.geometry,Q=this._geometryInfo[_];if(Q.boundingSphere===null){const ee=new Sphere$1;this.getBoundingBoxAt(_,_box$1),_box$1.getCenter(ee.center);const te=Z.index,ne=Z.attributes.position;let ie=0;for(let re=Q.start,oe=Q.start+Q.count;re<oe;re++){let se=re;te&&(se=te.getX(se)),_vector$5.fromBufferAttribute(ne,se),ie=Math.max(ie,ee.center.distanceToSquared(_vector$5))}ee.radius=Math.sqrt(ie),Q.boundingSphere=ee}return J.copy(Q.boundingSphere),J}setMatrixAt(_,J){this.validateInstanceId(_);const Z=this._matricesTexture,Q=this._matricesTexture.image.data;return J.toArray(Q,_*16),Z.needsUpdate=!0,this}getMatrixAt(_,J){return this.validateInstanceId(_),J.fromArray(this._matricesTexture.image.data,_*16)}setColorAt(_,J){return this.validateInstanceId(_),this._colorsTexture===null&&this._initColorsTexture(),J.toArray(this._colorsTexture.image.data,_*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(_,J){return this.validateInstanceId(_),J.fromArray(this._colorsTexture.image.data,_*4)}setVisibleAt(_,J){return this.validateInstanceId(_),this._instanceInfo[_].visible===J?this:(this._instanceInfo[_].visible=J,this._visibilityChanged=!0,this)}getVisibleAt(_){return this.validateInstanceId(_),this._instanceInfo[_].visible}setGeometryIdAt(_,J){return this.validateInstanceId(_),this.validateGeometryId(J),this._instanceInfo[_].geometryIndex=J,this}getGeometryIdAt(_){return this.validateInstanceId(_),this._instanceInfo[_].geometryIndex}getGeometryRangeAt(_,J={}){this.validateGeometryId(_);const Z=this._geometryInfo[_];return J.vertexStart=Z.vertexStart,J.vertexCount=Z.vertexCount,J.reservedVertexCount=Z.reservedVertexCount,J.indexStart=Z.indexStart,J.indexCount=Z.indexCount,J.reservedIndexCount=Z.reservedIndexCount,J.start=Z.start,J.count=Z.count,J}setInstanceCount(_){const J=this._availableInstanceIds,Z=this._instanceInfo;for(J.sort(ascIdSort);J[J.length-1]===Z.length-1;)Z.pop(),J.pop();if(_<Z.length)throw new Error(`BatchedMesh: Instance ids outside the range ${_} are being used. Cannot shrink instance count.`);const Q=new Int32Array(_),ee=new Int32Array(_);copyArrayContents(this._multiDrawCounts,Q),copyArrayContents(this._multiDrawStarts,ee),this._multiDrawCounts=Q,this._multiDrawStarts=ee,this._maxInstanceCount=_;const te=this._indirectTexture,ne=this._matricesTexture,ie=this._colorsTexture;te.dispose(),this._initIndirectTexture(),copyArrayContents(te.image.data,this._indirectTexture.image.data),ne.dispose(),this._initMatricesTexture(),copyArrayContents(ne.image.data,this._matricesTexture.image.data),ie&&(ie.dispose(),this._initColorsTexture(),copyArrayContents(ie.image.data,this._colorsTexture.image.data))}setGeometrySize(_,J){const Z=[...this._geometryInfo].filter(ne=>ne.active);if(Math.max(...Z.map(ne=>ne.vertexStart+ne.reservedVertexCount))>_)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${J}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...Z.map(ie=>ie.indexStart+ie.reservedIndexCount))>J)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${J}. Cannot shrink further.`);const ee=this.geometry;ee.dispose(),this._maxVertexCount=_,this._maxIndexCount=J,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new BufferGeometry,this._initializeGeometry(ee));const te=this.geometry;ee.index&&copyArrayContents(ee.index.array,te.index.array);for(const ne in ee.attributes)copyArrayContents(ee.attributes[ne].array,te.attributes[ne].array)}raycast(_,J){const Z=this._instanceInfo,Q=this._geometryInfo,ee=this.matrixWorld,te=this.geometry;_mesh.material=this.material,_mesh.geometry.index=te.index,_mesh.geometry.attributes=te.attributes,_mesh.geometry.boundingBox===null&&(_mesh.geometry.boundingBox=new Box3),_mesh.geometry.boundingSphere===null&&(_mesh.geometry.boundingSphere=new Sphere$1);for(let ne=0,ie=Z.length;ne<ie;ne++){if(!Z[ne].visible||!Z[ne].active)continue;const re=Z[ne].geometryIndex,oe=Q[re];_mesh.geometry.setDrawRange(oe.start,oe.count),this.getMatrixAt(ne,_mesh.matrixWorld).premultiply(ee),this.getBoundingBoxAt(re,_mesh.geometry.boundingBox),this.getBoundingSphereAt(re,_mesh.geometry.boundingSphere),_mesh.raycast(_,_batchIntersects);for(let se=0,ae=_batchIntersects.length;se<ae;se++){const le=_batchIntersects[se];le.object=this,le.batchId=ne,J.push(le)}_batchIntersects.length=0}_mesh.material=null,_mesh.geometry.index=null,_mesh.geometry.attributes={},_mesh.geometry.setDrawRange(0,1/0)}copy(_){return super.copy(_),this.geometry=_.geometry.clone(),this.perObjectFrustumCulled=_.perObjectFrustumCulled,this.sortObjects=_.sortObjects,this.boundingBox=_.boundingBox!==null?_.boundingBox.clone():null,this.boundingSphere=_.boundingSphere!==null?_.boundingSphere.clone():null,this._geometryInfo=_._geometryInfo.map(J=>({...J,boundingBox:J.boundingBox!==null?J.boundingBox.clone():null,boundingSphere:J.boundingSphere!==null?J.boundingSphere.clone():null})),this._instanceInfo=_._instanceInfo.map(J=>({...J})),this._availableInstanceIds=_._availableInstanceIds.slice(),this._availableGeometryIds=_._availableGeometryIds.slice(),this._nextIndexStart=_._nextIndexStart,this._nextVertexStart=_._nextVertexStart,this._geometryCount=_._geometryCount,this._maxInstanceCount=_._maxInstanceCount,this._maxVertexCount=_._maxVertexCount,this._maxIndexCount=_._maxIndexCount,this._geometryInitialized=_._geometryInitialized,this._multiDrawCounts=_._multiDrawCounts.slice(),this._multiDrawStarts=_._multiDrawStarts.slice(),this._indirectTexture=_._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=_._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=_._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(_,J,Z,Q,ee){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const te=Q.getIndex(),ne=te===null?1:te.array.BYTES_PER_ELEMENT,ie=this._instanceInfo,re=this._multiDrawStarts,oe=this._multiDrawCounts,se=this._geometryInfo,ae=this.perObjectFrustumCulled,le=this._indirectTexture,ue=le.image.data,de=Z.isArrayCamera?_frustumArray:_frustum;ae&&!Z.isArrayCamera&&(_matrix$1.multiplyMatrices(Z.projectionMatrix,Z.matrixWorldInverse).multiply(this.matrixWorld),_frustum.setFromProjectionMatrix(_matrix$1,Z.coordinateSystem,Z.reversedDepth));let pe=0;if(this.sortObjects){_matrix$1.copy(this.matrixWorld).invert(),_vector$5.setFromMatrixPosition(Z.matrixWorld).applyMatrix4(_matrix$1),_forward$1.set(0,0,-1).transformDirection(Z.matrixWorld).transformDirection(_matrix$1);for(let ye=0,be=ie.length;ye<be;ye++)if(ie[ye].visible&&ie[ye].active){const Ae=ie[ye].geometryIndex;this.getMatrixAt(ye,_matrix$1),this.getBoundingSphereAt(Ae,_sphere$2).applyMatrix4(_matrix$1);let Ce=!1;if(ae&&(Ce=!de.intersectsSphere(_sphere$2,Z)),!Ce){const Ee=se[Ae],Re=_temp.subVectors(_sphere$2.center,_vector$5).dot(_forward$1);_renderList.push(Ee.start,Ee.count,Re,ye)}}const fe=_renderList.list,_e=this.customSort;_e===null?fe.sort(ee.transparent?sortTransparent:sortOpaque):_e.call(this,fe,Z);for(let ye=0,be=fe.length;ye<be;ye++){const Ae=fe[ye];re[pe]=Ae.start*ne,oe[pe]=Ae.count,ue[pe]=Ae.index,pe++}_renderList.reset()}else for(let fe=0,_e=ie.length;fe<_e;fe++)if(ie[fe].visible&&ie[fe].active){const ye=ie[fe].geometryIndex;let be=!1;if(ae&&(this.getMatrixAt(fe,_matrix$1),this.getBoundingSphereAt(ye,_sphere$2).applyMatrix4(_matrix$1),be=!de.intersectsSphere(_sphere$2,Z)),!be){const Ae=se[ye];re[pe]=Ae.start*ne,oe[pe]=Ae.count,ue[pe]=fe,pe++}}le.needsUpdate=!0,this._multiDrawCount=pe,this._visibilityChanged=!1}onBeforeShadow(_,J,Z,Q,ee,te){this.onBeforeRender(_,null,Q,ee,te)}}class LineBasicMaterial extends Material{constructor(_){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.linewidth=_.linewidth,this.linecap=_.linecap,this.linejoin=_.linejoin,this.fog=_.fog,this}}const _vStart=new Vector3,_vEnd=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1$1=new Ray,_sphere$1=new Sphere$1,_intersectPointOnRay=new Vector3,_intersectPointOnSegment=new Vector3;class Line extends Object3D{constructor(_=new BufferGeometry,J=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=_,this.material=J,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(_,J){return super.copy(_,J),this.material=Array.isArray(_.material)?_.material.slice():_.material,this.geometry=_.geometry,this}computeLineDistances(){const _=this.geometry;if(_.index===null){const J=_.attributes.position,Z=[0];for(let Q=1,ee=J.count;Q<ee;Q++)_vStart.fromBufferAttribute(J,Q-1),_vEnd.fromBufferAttribute(J,Q),Z[Q]=Z[Q-1],Z[Q]+=_vStart.distanceTo(_vEnd);_.setAttribute("lineDistance",new Float32BufferAttribute(Z,1))}else warn("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(_,J){const Z=this.geometry,Q=this.matrixWorld,ee=_.params.Line.threshold,te=Z.drawRange;if(Z.boundingSphere===null&&Z.computeBoundingSphere(),_sphere$1.copy(Z.boundingSphere),_sphere$1.applyMatrix4(Q),_sphere$1.radius+=ee,_.ray.intersectsSphere(_sphere$1)===!1)return;_inverseMatrix$1.copy(Q).invert(),_ray$1$1.copy(_.ray).applyMatrix4(_inverseMatrix$1);const ne=ee/((this.scale.x+this.scale.y+this.scale.z)/3),ie=ne*ne,re=this.isLineSegments?2:1,oe=Z.index,ae=Z.attributes.position;if(oe!==null){const le=Math.max(0,te.start),ue=Math.min(oe.count,te.start+te.count);for(let de=le,pe=ue-1;de<pe;de+=re){const fe=oe.getX(de),_e=oe.getX(de+1),ye=checkIntersection(this,_,_ray$1$1,ie,fe,_e,de);ye&&J.push(ye)}if(this.isLineLoop){const de=oe.getX(ue-1),pe=oe.getX(le),fe=checkIntersection(this,_,_ray$1$1,ie,de,pe,ue-1);fe&&J.push(fe)}}else{const le=Math.max(0,te.start),ue=Math.min(ae.count,te.start+te.count);for(let de=le,pe=ue-1;de<pe;de+=re){const fe=checkIntersection(this,_,_ray$1$1,ie,de,de+1,de);fe&&J.push(fe)}if(this.isLineLoop){const de=checkIntersection(this,_,_ray$1$1,ie,ue-1,le,ue-1);de&&J.push(de)}}}updateMorphTargets(){const J=this.geometry.morphAttributes,Z=Object.keys(J);if(Z.length>0){const Q=J[Z[0]];if(Q!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let ee=0,te=Q.length;ee<te;ee++){const ne=Q[ee].name||String(ee);this.morphTargetInfluences.push(0),this.morphTargetDictionary[ne]=ee}}}}}function checkIntersection(G,_,J,Z,Q,ee,te){const ne=G.geometry.attributes.position;if(_vStart.fromBufferAttribute(ne,Q),_vEnd.fromBufferAttribute(ne,ee),J.distanceSqToSegment(_vStart,_vEnd,_intersectPointOnRay,_intersectPointOnSegment)>Z)return;_intersectPointOnRay.applyMatrix4(G.matrixWorld);const re=_.ray.origin.distanceTo(_intersectPointOnRay);if(!(re<_.near||re>_.far))return{distance:re,point:_intersectPointOnSegment.clone().applyMatrix4(G.matrixWorld),index:te,face:null,faceIndex:null,barycoord:null,object:G}}const _start=new Vector3,_end=new Vector3;class LineSegments extends Line{constructor(_,J){super(_,J),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const _=this.geometry;if(_.index===null){const J=_.attributes.position,Z=[];for(let Q=0,ee=J.count;Q<ee;Q+=2)_start.fromBufferAttribute(J,Q),_end.fromBufferAttribute(J,Q+1),Z[Q]=Q===0?0:Z[Q-1],Z[Q+1]=Z[Q]+_start.distanceTo(_end);_.setAttribute("lineDistance",new Float32BufferAttribute(Z,1))}else warn("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LineLoop extends Line{constructor(_,J){super(_,J),this.isLineLoop=!0,this.type="LineLoop"}}class PointsMaterial extends Material{constructor(_){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.alphaMap=_.alphaMap,this.size=_.size,this.sizeAttenuation=_.sizeAttenuation,this.fog=_.fog,this}}const _inverseMatrix$4=new Matrix4,_ray$4=new Ray,_sphere$7=new Sphere$1,_position$2=new Vector3;let Points$1=class extends Object3D{constructor(_=new BufferGeometry,J=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=_,this.material=J,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(_,J){return super.copy(_,J),this.material=Array.isArray(_.material)?_.material.slice():_.material,this.geometry=_.geometry,this}raycast(_,J){const Z=this.geometry,Q=this.matrixWorld,ee=_.params.Points.threshold,te=Z.drawRange;if(Z.boundingSphere===null&&Z.computeBoundingSphere(),_sphere$7.copy(Z.boundingSphere),_sphere$7.applyMatrix4(Q),_sphere$7.radius+=ee,_.ray.intersectsSphere(_sphere$7)===!1)return;_inverseMatrix$4.copy(Q).invert(),_ray$4.copy(_.ray).applyMatrix4(_inverseMatrix$4);const ne=ee/((this.scale.x+this.scale.y+this.scale.z)/3),ie=ne*ne,re=Z.index,se=Z.attributes.position;if(re!==null){const ae=Math.max(0,te.start),le=Math.min(re.count,te.start+te.count);for(let ue=ae,de=le;ue<de;ue++){const pe=re.getX(ue);_position$2.fromBufferAttribute(se,pe),testPoint(_position$2,pe,ie,Q,_,J,this)}}else{const ae=Math.max(0,te.start),le=Math.min(se.count,te.start+te.count);for(let ue=ae,de=le;ue<de;ue++)_position$2.fromBufferAttribute(se,ue),testPoint(_position$2,ue,ie,Q,_,J,this)}}updateMorphTargets(){const J=this.geometry.morphAttributes,Z=Object.keys(J);if(Z.length>0){const Q=J[Z[0]];if(Q!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let ee=0,te=Q.length;ee<te;ee++){const ne=Q[ee].name||String(ee);this.morphTargetInfluences.push(0),this.morphTargetDictionary[ne]=ee}}}}};function testPoint(G,_,J,Z,Q,ee,te){const ne=_ray$4.distanceSqToPoint(G);if(ne<J){const ie=new Vector3;_ray$4.closestPointToPoint(G,ie),ie.applyMatrix4(Z);const re=Q.ray.origin.distanceTo(ie);if(re<Q.near||re>Q.far)return;ee.push({distance:re,distanceToRay:Math.sqrt(ne),point:ie,index:_,face:null,faceIndex:null,barycoord:null,object:te})}}class VideoTexture extends Texture{constructor(_,J,Z,Q,ee=LinearFilter,te=LinearFilter,ne,ie,re){super(_,J,Z,Q,ee,te,ne,ie,re),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const oe=this;function se(){oe.needsUpdate=!0,oe._requestVideoFrameCallbackId=_.requestVideoFrameCallback(se)}"requestVideoFrameCallback"in _&&(this._requestVideoFrameCallbackId=_.requestVideoFrameCallback(se))}clone(){return new this.constructor(this.image).copy(this)}update(){const _=this.image;"requestVideoFrameCallback"in _===!1&&_.readyState>=_.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class VideoFrameTexture extends VideoTexture{constructor(_,J,Z,Q,ee,te,ne,ie){super({},_,J,Z,Q,ee,te,ne,ie),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(_){this.image=_,this.needsUpdate=!0}}class FramebufferTexture extends Texture{constructor(_,J){super({width:_,height:J}),this.isFramebufferTexture=!0,this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.generateMipmaps=!1,this.needsUpdate=!0}}class CompressedTexture extends Texture{constructor(_,J,Z,Q,ee,te,ne,ie,re,oe,se,ae){super(null,te,ne,ie,re,oe,Q,ee,se,ae),this.isCompressedTexture=!0,this.image={width:J,height:Z},this.mipmaps=_,this.flipY=!1,this.generateMipmaps=!1}}class CompressedArrayTexture extends CompressedTexture{constructor(_,J,Z,Q,ee,te){super(_,J,Z,ee,te),this.isCompressedArrayTexture=!0,this.image.depth=Q,this.wrapR=ClampToEdgeWrapping,this.layerUpdates=new Set}addLayerUpdate(_){this.layerUpdates.add(_)}clearLayerUpdates(){this.layerUpdates.clear()}}class CompressedCubeTexture extends CompressedTexture{constructor(_,J,Z){super(void 0,_[0].width,_[0].height,J,Z,CubeReflectionMapping),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=_}}class CanvasTexture extends Texture{constructor(_,J,Z,Q,ee,te,ne,ie,re){super(_,J,Z,Q,ee,te,ne,ie,re),this.isCanvasTexture=!0,this.needsUpdate=!0}}class DepthTexture extends Texture{constructor(_,J,Z=UnsignedIntType,Q,ee,te,ne=NearestFilter,ie=NearestFilter,re,oe=DepthFormat,se=1){if(oe!==DepthFormat&&oe!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const ae={width:_,height:J,depth:se};super(ae,Q,ee,te,ne,ie,oe,Z,re),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(_){return super.copy(_),this.source=new Source(Object.assign({},_.image)),this.compareFunction=_.compareFunction,this}toJSON(_){const J=super.toJSON(_);return this.compareFunction!==null&&(J.compareFunction=this.compareFunction),J}}class ExternalTexture extends Texture{constructor(_=null){super(),this.sourceTexture=_,this.isExternalTexture=!0}copy(_){return super.copy(_),this.sourceTexture=_.sourceTexture,this}}class CapsuleGeometry extends BufferGeometry{constructor(_=1,J=1,Z=4,Q=8,ee=1){super(),this.type="CapsuleGeometry",this.parameters={radius:_,height:J,capSegments:Z,radialSegments:Q,heightSegments:ee},J=Math.max(0,J),Z=Math.max(1,Math.floor(Z)),Q=Math.max(3,Math.floor(Q)),ee=Math.max(1,Math.floor(ee));const te=[],ne=[],ie=[],re=[],oe=J/2,se=Math.PI/2*_,ae=J,le=2*se+ae,ue=Z*2+ee,de=Q+1,pe=new Vector3,fe=new Vector3;for(let _e=0;_e<=ue;_e++){let ye=0,be=0,Ae=0,Ce=0;if(_e<=Z){const Te=_e/Z,Me=Te*Math.PI/2;be=-oe-_*Math.cos(Me),Ae=_*Math.sin(Me),Ce=-_*Math.cos(Me),ye=Te*se}else if(_e<=Z+ee){const Te=(_e-Z)/ee;be=-oe+Te*J,Ae=_,Ce=0,ye=se+Te*ae}else{const Te=(_e-Z-ee)/Z,Me=Te*Math.PI/2;be=oe+_*Math.sin(Me),Ae=_*Math.cos(Me),Ce=_*Math.sin(Me),ye=se+ae+Te*se}const Ee=Math.max(0,Math.min(1,ye/le));let Re=0;_e===0?Re=.5/Q:_e===ue&&(Re=-.5/Q);for(let Te=0;Te<=Q;Te++){const Me=Te/Q,Ne=Me*Math.PI*2,Le=Math.sin(Ne),Ie=Math.cos(Ne);fe.x=-Ae*Ie,fe.y=be,fe.z=Ae*Le,ne.push(fe.x,fe.y,fe.z),pe.set(-Ae*Ie,Ce,Ae*Le),pe.normalize(),ie.push(pe.x,pe.y,pe.z),re.push(Me+Re,Ee)}if(_e>0){const Te=(_e-1)*de;for(let Me=0;Me<Q;Me++){const Ne=Te+Me,Le=Te+Me+1,Ie=_e*de+Me,Ge=_e*de+Me+1;te.push(Ne,Le,Ie),te.push(Le,Ge,Ie)}}}this.setIndex(te),this.setAttribute("position",new Float32BufferAttribute(ne,3)),this.setAttribute("normal",new Float32BufferAttribute(ie,3)),this.setAttribute("uv",new Float32BufferAttribute(re,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new CapsuleGeometry(_.radius,_.height,_.capSegments,_.radialSegments,_.heightSegments)}}class CircleGeometry extends BufferGeometry{constructor(_=1,J=32,Z=0,Q=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:_,segments:J,thetaStart:Z,thetaLength:Q},J=Math.max(3,J);const ee=[],te=[],ne=[],ie=[],re=new Vector3,oe=new Vector2;te.push(0,0,0),ne.push(0,0,1),ie.push(.5,.5);for(let se=0,ae=3;se<=J;se++,ae+=3){const le=Z+se/J*Q;re.x=_*Math.cos(le),re.y=_*Math.sin(le),te.push(re.x,re.y,re.z),ne.push(0,0,1),oe.x=(te[ae]/_+1)/2,oe.y=(te[ae+1]/_+1)/2,ie.push(oe.x,oe.y)}for(let se=1;se<=J;se++)ee.push(se,se+1,0);this.setIndex(ee),this.setAttribute("position",new Float32BufferAttribute(te,3)),this.setAttribute("normal",new Float32BufferAttribute(ne,3)),this.setAttribute("uv",new Float32BufferAttribute(ie,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new CircleGeometry(_.radius,_.segments,_.thetaStart,_.thetaLength)}}class CylinderGeometry extends BufferGeometry{constructor(_=1,J=1,Z=1,Q=32,ee=1,te=!1,ne=0,ie=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:_,radiusBottom:J,height:Z,radialSegments:Q,heightSegments:ee,openEnded:te,thetaStart:ne,thetaLength:ie};const re=this;Q=Math.floor(Q),ee=Math.floor(ee);const oe=[],se=[],ae=[],le=[];let ue=0;const de=[],pe=Z/2;let fe=0;_e(),te===!1&&(_>0&&ye(!0),J>0&&ye(!1)),this.setIndex(oe),this.setAttribute("position",new Float32BufferAttribute(se,3)),this.setAttribute("normal",new Float32BufferAttribute(ae,3)),this.setAttribute("uv",new Float32BufferAttribute(le,2));function _e(){const be=new Vector3,Ae=new Vector3;let Ce=0;const Ee=(J-_)/Z;for(let Re=0;Re<=ee;Re++){const Te=[],Me=Re/ee,Ne=Me*(J-_)+_;for(let Le=0;Le<=Q;Le++){const Ie=Le/Q,Ge=Ie*ie+ne,He=Math.sin(Ge),Be=Math.cos(Ge);Ae.x=Ne*He,Ae.y=-Me*Z+pe,Ae.z=Ne*Be,se.push(Ae.x,Ae.y,Ae.z),be.set(He,Ee,Be).normalize(),ae.push(be.x,be.y,be.z),le.push(Ie,1-Me),Te.push(ue++)}de.push(Te)}for(let Re=0;Re<Q;Re++)for(let Te=0;Te<ee;Te++){const Me=de[Te][Re],Ne=de[Te+1][Re],Le=de[Te+1][Re+1],Ie=de[Te][Re+1];(_>0||Te!==0)&&(oe.push(Me,Ne,Ie),Ce+=3),(J>0||Te!==ee-1)&&(oe.push(Ne,Le,Ie),Ce+=3)}re.addGroup(fe,Ce,0),fe+=Ce}function ye(be){const Ae=ue,Ce=new Vector2,Ee=new Vector3;let Re=0;const Te=be===!0?_:J,Me=be===!0?1:-1;for(let Le=1;Le<=Q;Le++)se.push(0,pe*Me,0),ae.push(0,Me,0),le.push(.5,.5),ue++;const Ne=ue;for(let Le=0;Le<=Q;Le++){const Ge=Le/Q*ie+ne,He=Math.cos(Ge),Be=Math.sin(Ge);Ee.x=Te*Be,Ee.y=pe*Me,Ee.z=Te*He,se.push(Ee.x,Ee.y,Ee.z),ae.push(0,Me,0),Ce.x=He*.5+.5,Ce.y=Be*.5*Me+.5,le.push(Ce.x,Ce.y),ue++}for(let Le=0;Le<Q;Le++){const Ie=Ae+Le,Ge=Ne+Le;be===!0?oe.push(Ge,Ge+1,Ie):oe.push(Ge+1,Ge,Ie),Re+=3}re.addGroup(fe,Re,be===!0?1:2),fe+=Re}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new CylinderGeometry(_.radiusTop,_.radiusBottom,_.height,_.radialSegments,_.heightSegments,_.openEnded,_.thetaStart,_.thetaLength)}}class ConeGeometry extends CylinderGeometry{constructor(_=1,J=1,Z=32,Q=1,ee=!1,te=0,ne=Math.PI*2){super(0,_,J,Z,Q,ee,te,ne),this.type="ConeGeometry",this.parameters={radius:_,height:J,radialSegments:Z,heightSegments:Q,openEnded:ee,thetaStart:te,thetaLength:ne}}static fromJSON(_){return new ConeGeometry(_.radius,_.height,_.radialSegments,_.heightSegments,_.openEnded,_.thetaStart,_.thetaLength)}}class PolyhedronGeometry extends BufferGeometry{constructor(_=[],J=[],Z=1,Q=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:_,indices:J,radius:Z,detail:Q};const ee=[],te=[];ne(Q),re(Z),oe(),this.setAttribute("position",new Float32BufferAttribute(ee,3)),this.setAttribute("normal",new Float32BufferAttribute(ee.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(te,2)),Q===0?this.computeVertexNormals():this.normalizeNormals();function ne(_e){const ye=new Vector3,be=new Vector3,Ae=new Vector3;for(let Ce=0;Ce<J.length;Ce+=3)le(J[Ce+0],ye),le(J[Ce+1],be),le(J[Ce+2],Ae),ie(ye,be,Ae,_e)}function ie(_e,ye,be,Ae){const Ce=Ae+1,Ee=[];for(let Re=0;Re<=Ce;Re++){Ee[Re]=[];const Te=_e.clone().lerp(be,Re/Ce),Me=ye.clone().lerp(be,Re/Ce),Ne=Ce-Re;for(let Le=0;Le<=Ne;Le++)Le===0&&Re===Ce?Ee[Re][Le]=Te:Ee[Re][Le]=Te.clone().lerp(Me,Le/Ne)}for(let Re=0;Re<Ce;Re++)for(let Te=0;Te<2*(Ce-Re)-1;Te++){const Me=Math.floor(Te/2);Te%2===0?(ae(Ee[Re][Me+1]),ae(Ee[Re+1][Me]),ae(Ee[Re][Me])):(ae(Ee[Re][Me+1]),ae(Ee[Re+1][Me+1]),ae(Ee[Re+1][Me]))}}function re(_e){const ye=new Vector3;for(let be=0;be<ee.length;be+=3)ye.x=ee[be+0],ye.y=ee[be+1],ye.z=ee[be+2],ye.normalize().multiplyScalar(_e),ee[be+0]=ye.x,ee[be+1]=ye.y,ee[be+2]=ye.z}function oe(){const _e=new Vector3;for(let ye=0;ye<ee.length;ye+=3){_e.x=ee[ye+0],_e.y=ee[ye+1],_e.z=ee[ye+2];const be=pe(_e)/2/Math.PI+.5,Ae=fe(_e)/Math.PI+.5;te.push(be,1-Ae)}ue(),se()}function se(){for(let _e=0;_e<te.length;_e+=6){const ye=te[_e+0],be=te[_e+2],Ae=te[_e+4],Ce=Math.max(ye,be,Ae),Ee=Math.min(ye,be,Ae);Ce>.9&&Ee<.1&&(ye<.2&&(te[_e+0]+=1),be<.2&&(te[_e+2]+=1),Ae<.2&&(te[_e+4]+=1))}}function ae(_e){ee.push(_e.x,_e.y,_e.z)}function le(_e,ye){const be=_e*3;ye.x=_[be+0],ye.y=_[be+1],ye.z=_[be+2]}function ue(){const _e=new Vector3,ye=new Vector3,be=new Vector3,Ae=new Vector3,Ce=new Vector2,Ee=new Vector2,Re=new Vector2;for(let Te=0,Me=0;Te<ee.length;Te+=9,Me+=6){_e.set(ee[Te+0],ee[Te+1],ee[Te+2]),ye.set(ee[Te+3],ee[Te+4],ee[Te+5]),be.set(ee[Te+6],ee[Te+7],ee[Te+8]),Ce.set(te[Me+0],te[Me+1]),Ee.set(te[Me+2],te[Me+3]),Re.set(te[Me+4],te[Me+5]),Ae.copy(_e).add(ye).add(be).divideScalar(3);const Ne=pe(Ae);de(Ce,Me+0,_e,Ne),de(Ee,Me+2,ye,Ne),de(Re,Me+4,be,Ne)}}function de(_e,ye,be,Ae){Ae<0&&_e.x===1&&(te[ye]=_e.x-1),be.x===0&&be.z===0&&(te[ye]=Ae/2/Math.PI+.5)}function pe(_e){return Math.atan2(_e.z,-_e.x)}function fe(_e){return Math.atan2(-_e.y,Math.sqrt(_e.x*_e.x+_e.z*_e.z))}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new PolyhedronGeometry(_.vertices,_.indices,_.radius,_.details)}}class DodecahedronGeometry extends PolyhedronGeometry{constructor(_=1,J=0){const Z=(1+Math.sqrt(5))/2,Q=1/Z,ee=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-Q,-Z,0,-Q,Z,0,Q,-Z,0,Q,Z,-Q,-Z,0,-Q,Z,0,Q,-Z,0,Q,Z,0,-Z,0,-Q,Z,0,-Q,-Z,0,Q,Z,0,Q],te=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(ee,te,_,J),this.type="DodecahedronGeometry",this.parameters={radius:_,detail:J}}static fromJSON(_){return new DodecahedronGeometry(_.radius,_.detail)}}const _v0$3=new Vector3,_v1$1=new Vector3,_normal=new Vector3,_triangle$1=new Triangle;class EdgesGeometry extends BufferGeometry{constructor(_=null,J=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:_,thresholdAngle:J},_!==null){const Q=Math.pow(10,4),ee=Math.cos(DEG2RAD*J),te=_.getIndex(),ne=_.getAttribute("position"),ie=te?te.count:ne.count,re=[0,0,0],oe=["a","b","c"],se=new Array(3),ae={},le=[];for(let ue=0;ue<ie;ue+=3){te?(re[0]=te.getX(ue),re[1]=te.getX(ue+1),re[2]=te.getX(ue+2)):(re[0]=ue,re[1]=ue+1,re[2]=ue+2);const{a:de,b:pe,c:fe}=_triangle$1;if(de.fromBufferAttribute(ne,re[0]),pe.fromBufferAttribute(ne,re[1]),fe.fromBufferAttribute(ne,re[2]),_triangle$1.getNormal(_normal),se[0]=`${Math.round(de.x*Q)},${Math.round(de.y*Q)},${Math.round(de.z*Q)}`,se[1]=`${Math.round(pe.x*Q)},${Math.round(pe.y*Q)},${Math.round(pe.z*Q)}`,se[2]=`${Math.round(fe.x*Q)},${Math.round(fe.y*Q)},${Math.round(fe.z*Q)}`,!(se[0]===se[1]||se[1]===se[2]||se[2]===se[0]))for(let _e=0;_e<3;_e++){const ye=(_e+1)%3,be=se[_e],Ae=se[ye],Ce=_triangle$1[oe[_e]],Ee=_triangle$1[oe[ye]],Re=`${be}_${Ae}`,Te=`${Ae}_${be}`;Te in ae&&ae[Te]?(_normal.dot(ae[Te].normal)<=ee&&(le.push(Ce.x,Ce.y,Ce.z),le.push(Ee.x,Ee.y,Ee.z)),ae[Te]=null):Re in ae||(ae[Re]={index0:re[_e],index1:re[ye],normal:_normal.clone()})}}for(const ue in ae)if(ae[ue]){const{index0:de,index1:pe}=ae[ue];_v0$3.fromBufferAttribute(ne,de),_v1$1.fromBufferAttribute(ne,pe),le.push(_v0$3.x,_v0$3.y,_v0$3.z),le.push(_v1$1.x,_v1$1.y,_v1$1.z)}this.setAttribute("position",new Float32BufferAttribute(le,3))}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}}class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){warn("Curve: .getPoint() not implemented.")}getPointAt(_,J){const Z=this.getUtoTmapping(_);return this.getPoint(Z,J)}getPoints(_=5){const J=[];for(let Z=0;Z<=_;Z++)J.push(this.getPoint(Z/_));return J}getSpacedPoints(_=5){const J=[];for(let Z=0;Z<=_;Z++)J.push(this.getPointAt(Z/_));return J}getLength(){const _=this.getLengths();return _[_.length-1]}getLengths(_=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===_+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const J=[];let Z,Q=this.getPoint(0),ee=0;J.push(0);for(let te=1;te<=_;te++)Z=this.getPoint(te/_),ee+=Z.distanceTo(Q),J.push(ee),Q=Z;return this.cacheArcLengths=J,J}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(_,J=null){const Z=this.getLengths();let Q=0;const ee=Z.length;let te;J?te=J:te=_*Z[ee-1];let ne=0,ie=ee-1,re;for(;ne<=ie;)if(Q=Math.floor(ne+(ie-ne)/2),re=Z[Q]-te,re<0)ne=Q+1;else if(re>0)ie=Q-1;else{ie=Q;break}if(Q=ie,Z[Q]===te)return Q/(ee-1);const oe=Z[Q],ae=Z[Q+1]-oe,le=(te-oe)/ae;return(Q+le)/(ee-1)}getTangent(_,J){let Q=_-1e-4,ee=_+1e-4;Q<0&&(Q=0),ee>1&&(ee=1);const te=this.getPoint(Q),ne=this.getPoint(ee),ie=J||(te.isVector2?new Vector2:new Vector3);return ie.copy(ne).sub(te).normalize(),ie}getTangentAt(_,J){const Z=this.getUtoTmapping(_);return this.getTangent(Z,J)}computeFrenetFrames(_,J=!1){const Z=new Vector3,Q=[],ee=[],te=[],ne=new Vector3,ie=new Matrix4;for(let le=0;le<=_;le++){const ue=le/_;Q[le]=this.getTangentAt(ue,new Vector3)}ee[0]=new Vector3,te[0]=new Vector3;let re=Number.MAX_VALUE;const oe=Math.abs(Q[0].x),se=Math.abs(Q[0].y),ae=Math.abs(Q[0].z);oe<=re&&(re=oe,Z.set(1,0,0)),se<=re&&(re=se,Z.set(0,1,0)),ae<=re&&Z.set(0,0,1),ne.crossVectors(Q[0],Z).normalize(),ee[0].crossVectors(Q[0],ne),te[0].crossVectors(Q[0],ee[0]);for(let le=1;le<=_;le++){if(ee[le]=ee[le-1].clone(),te[le]=te[le-1].clone(),ne.crossVectors(Q[le-1],Q[le]),ne.length()>Number.EPSILON){ne.normalize();const ue=Math.acos(clamp$1(Q[le-1].dot(Q[le]),-1,1));ee[le].applyMatrix4(ie.makeRotationAxis(ne,ue))}te[le].crossVectors(Q[le],ee[le])}if(J===!0){let le=Math.acos(clamp$1(ee[0].dot(ee[_]),-1,1));le/=_,Q[0].dot(ne.crossVectors(ee[0],ee[_]))>0&&(le=-le);for(let ue=1;ue<=_;ue++)ee[ue].applyMatrix4(ie.makeRotationAxis(Q[ue],le*ue)),te[ue].crossVectors(Q[ue],ee[ue])}return{tangents:Q,normals:ee,binormals:te}}clone(){return new this.constructor().copy(this)}copy(_){return this.arcLengthDivisions=_.arcLengthDivisions,this}toJSON(){const _={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return _.arcLengthDivisions=this.arcLengthDivisions,_.type=this.type,_}fromJSON(_){return this.arcLengthDivisions=_.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor(_=0,J=0,Z=1,Q=1,ee=0,te=Math.PI*2,ne=!1,ie=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=_,this.aY=J,this.xRadius=Z,this.yRadius=Q,this.aStartAngle=ee,this.aEndAngle=te,this.aClockwise=ne,this.aRotation=ie}getPoint(_,J=new Vector2){const Z=J,Q=Math.PI*2;let ee=this.aEndAngle-this.aStartAngle;const te=Math.abs(ee)<Number.EPSILON;for(;ee<0;)ee+=Q;for(;ee>Q;)ee-=Q;ee<Number.EPSILON&&(te?ee=0:ee=Q),this.aClockwise===!0&&!te&&(ee===Q?ee=-Q:ee=ee-Q);const ne=this.aStartAngle+_*ee;let ie=this.aX+this.xRadius*Math.cos(ne),re=this.aY+this.yRadius*Math.sin(ne);if(this.aRotation!==0){const oe=Math.cos(this.aRotation),se=Math.sin(this.aRotation),ae=ie-this.aX,le=re-this.aY;ie=ae*oe-le*se+this.aX,re=ae*se+le*oe+this.aY}return Z.set(ie,re)}copy(_){return super.copy(_),this.aX=_.aX,this.aY=_.aY,this.xRadius=_.xRadius,this.yRadius=_.yRadius,this.aStartAngle=_.aStartAngle,this.aEndAngle=_.aEndAngle,this.aClockwise=_.aClockwise,this.aRotation=_.aRotation,this}toJSON(){const _=super.toJSON();return _.aX=this.aX,_.aY=this.aY,_.xRadius=this.xRadius,_.yRadius=this.yRadius,_.aStartAngle=this.aStartAngle,_.aEndAngle=this.aEndAngle,_.aClockwise=this.aClockwise,_.aRotation=this.aRotation,_}fromJSON(_){return super.fromJSON(_),this.aX=_.aX,this.aY=_.aY,this.xRadius=_.xRadius,this.yRadius=_.yRadius,this.aStartAngle=_.aStartAngle,this.aEndAngle=_.aEndAngle,this.aClockwise=_.aClockwise,this.aRotation=_.aRotation,this}}class ArcCurve extends EllipseCurve{constructor(_,J,Z,Q,ee,te){super(_,J,Z,Z,Q,ee,te),this.isArcCurve=!0,this.type="ArcCurve"}}function CubicPoly(){let G=0,_=0,J=0,Z=0;function Q(ee,te,ne,ie){G=ee,_=ne,J=-3*ee+3*te-2*ne-ie,Z=2*ee-2*te+ne+ie}return{initCatmullRom:function(ee,te,ne,ie,re){Q(te,ne,re*(ne-ee),re*(ie-te))},initNonuniformCatmullRom:function(ee,te,ne,ie,re,oe,se){let ae=(te-ee)/re-(ne-ee)/(re+oe)+(ne-te)/oe,le=(ne-te)/oe-(ie-te)/(oe+se)+(ie-ne)/se;ae*=oe,le*=oe,Q(te,ne,ae,le)},calc:function(ee){const te=ee*ee,ne=te*ee;return G+_*ee+J*te+Z*ne}}}const tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(_=[],J=!1,Z="centripetal",Q=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=_,this.closed=J,this.curveType=Z,this.tension=Q}getPoint(_,J=new Vector3){const Z=J,Q=this.points,ee=Q.length,te=(ee-(this.closed?0:1))*_;let ne=Math.floor(te),ie=te-ne;this.closed?ne+=ne>0?0:(Math.floor(Math.abs(ne)/ee)+1)*ee:ie===0&&ne===ee-1&&(ne=ee-2,ie=1);let re,oe;this.closed||ne>0?re=Q[(ne-1)%ee]:(tmp.subVectors(Q[0],Q[1]).add(Q[0]),re=tmp);const se=Q[ne%ee],ae=Q[(ne+1)%ee];if(this.closed||ne+2<ee?oe=Q[(ne+2)%ee]:(tmp.subVectors(Q[ee-1],Q[ee-2]).add(Q[ee-1]),oe=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){const le=this.curveType==="chordal"?.5:.25;let ue=Math.pow(re.distanceToSquared(se),le),de=Math.pow(se.distanceToSquared(ae),le),pe=Math.pow(ae.distanceToSquared(oe),le);de<1e-4&&(de=1),ue<1e-4&&(ue=de),pe<1e-4&&(pe=de),px.initNonuniformCatmullRom(re.x,se.x,ae.x,oe.x,ue,de,pe),py.initNonuniformCatmullRom(re.y,se.y,ae.y,oe.y,ue,de,pe),pz.initNonuniformCatmullRom(re.z,se.z,ae.z,oe.z,ue,de,pe)}else this.curveType==="catmullrom"&&(px.initCatmullRom(re.x,se.x,ae.x,oe.x,this.tension),py.initCatmullRom(re.y,se.y,ae.y,oe.y,this.tension),pz.initCatmullRom(re.z,se.z,ae.z,oe.z,this.tension));return Z.set(px.calc(ie),py.calc(ie),pz.calc(ie)),Z}copy(_){super.copy(_),this.points=[];for(let J=0,Z=_.points.length;J<Z;J++){const Q=_.points[J];this.points.push(Q.clone())}return this.closed=_.closed,this.curveType=_.curveType,this.tension=_.tension,this}toJSON(){const _=super.toJSON();_.points=[];for(let J=0,Z=this.points.length;J<Z;J++){const Q=this.points[J];_.points.push(Q.toArray())}return _.closed=this.closed,_.curveType=this.curveType,_.tension=this.tension,_}fromJSON(_){super.fromJSON(_),this.points=[];for(let J=0,Z=_.points.length;J<Z;J++){const Q=_.points[J];this.points.push(new Vector3().fromArray(Q))}return this.closed=_.closed,this.curveType=_.curveType,this.tension=_.tension,this}}function CatmullRom(G,_,J,Z,Q){const ee=(Z-_)*.5,te=(Q-J)*.5,ne=G*G,ie=G*ne;return(2*J-2*Z+ee+te)*ie+(-3*J+3*Z-2*ee-te)*ne+ee*G+J}function QuadraticBezierP0(G,_){const J=1-G;return J*J*_}function QuadraticBezierP1(G,_){return 2*(1-G)*G*_}function QuadraticBezierP2(G,_){return G*G*_}function QuadraticBezier(G,_,J,Z){return QuadraticBezierP0(G,_)+QuadraticBezierP1(G,J)+QuadraticBezierP2(G,Z)}function CubicBezierP0(G,_){const J=1-G;return J*J*J*_}function CubicBezierP1(G,_){const J=1-G;return 3*J*J*G*_}function CubicBezierP2(G,_){return 3*(1-G)*G*G*_}function CubicBezierP3(G,_){return G*G*G*_}function CubicBezier(G,_,J,Z,Q){return CubicBezierP0(G,_)+CubicBezierP1(G,J)+CubicBezierP2(G,Z)+CubicBezierP3(G,Q)}class CubicBezierCurve extends Curve{constructor(_=new Vector2,J=new Vector2,Z=new Vector2,Q=new Vector2){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=_,this.v1=J,this.v2=Z,this.v3=Q}getPoint(_,J=new Vector2){const Z=J,Q=this.v0,ee=this.v1,te=this.v2,ne=this.v3;return Z.set(CubicBezier(_,Q.x,ee.x,te.x,ne.x),CubicBezier(_,Q.y,ee.y,te.y,ne.y)),Z}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this.v3.copy(_.v3),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_.v3=this.v3.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this.v3.fromArray(_.v3),this}}class CubicBezierCurve3 extends Curve{constructor(_=new Vector3,J=new Vector3,Z=new Vector3,Q=new Vector3){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=_,this.v1=J,this.v2=Z,this.v3=Q}getPoint(_,J=new Vector3){const Z=J,Q=this.v0,ee=this.v1,te=this.v2,ne=this.v3;return Z.set(CubicBezier(_,Q.x,ee.x,te.x,ne.x),CubicBezier(_,Q.y,ee.y,te.y,ne.y),CubicBezier(_,Q.z,ee.z,te.z,ne.z)),Z}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this.v3.copy(_.v3),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_.v3=this.v3.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this.v3.fromArray(_.v3),this}}class LineCurve extends Curve{constructor(_=new Vector2,J=new Vector2){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=_,this.v2=J}getPoint(_,J=new Vector2){const Z=J;return _===1?Z.copy(this.v2):(Z.copy(this.v2).sub(this.v1),Z.multiplyScalar(_).add(this.v1)),Z}getPointAt(_,J){return this.getPoint(_,J)}getTangent(_,J=new Vector2){return J.subVectors(this.v2,this.v1).normalize()}getTangentAt(_,J){return this.getTangent(_,J)}copy(_){return super.copy(_),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class LineCurve3 extends Curve{constructor(_=new Vector3,J=new Vector3){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=_,this.v2=J}getPoint(_,J=new Vector3){const Z=J;return _===1?Z.copy(this.v2):(Z.copy(this.v2).sub(this.v1),Z.multiplyScalar(_).add(this.v1)),Z}getPointAt(_,J){return this.getPoint(_,J)}getTangent(_,J=new Vector3){return J.subVectors(this.v2,this.v1).normalize()}getTangentAt(_,J){return this.getTangent(_,J)}copy(_){return super.copy(_),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class QuadraticBezierCurve extends Curve{constructor(_=new Vector2,J=new Vector2,Z=new Vector2){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=_,this.v1=J,this.v2=Z}getPoint(_,J=new Vector2){const Z=J,Q=this.v0,ee=this.v1,te=this.v2;return Z.set(QuadraticBezier(_,Q.x,ee.x,te.x),QuadraticBezier(_,Q.y,ee.y,te.y)),Z}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class QuadraticBezierCurve3 extends Curve{constructor(_=new Vector3,J=new Vector3,Z=new Vector3){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=_,this.v1=J,this.v2=Z}getPoint(_,J=new Vector3){const Z=J,Q=this.v0,ee=this.v1,te=this.v2;return Z.set(QuadraticBezier(_,Q.x,ee.x,te.x),QuadraticBezier(_,Q.y,ee.y,te.y),QuadraticBezier(_,Q.z,ee.z,te.z)),Z}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class SplineCurve extends Curve{constructor(_=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=_}getPoint(_,J=new Vector2){const Z=J,Q=this.points,ee=(Q.length-1)*_,te=Math.floor(ee),ne=ee-te,ie=Q[te===0?te:te-1],re=Q[te],oe=Q[te>Q.length-2?Q.length-1:te+1],se=Q[te>Q.length-3?Q.length-1:te+2];return Z.set(CatmullRom(ne,ie.x,re.x,oe.x,se.x),CatmullRom(ne,ie.y,re.y,oe.y,se.y)),Z}copy(_){super.copy(_),this.points=[];for(let J=0,Z=_.points.length;J<Z;J++){const Q=_.points[J];this.points.push(Q.clone())}return this}toJSON(){const _=super.toJSON();_.points=[];for(let J=0,Z=this.points.length;J<Z;J++){const Q=this.points[J];_.points.push(Q.toArray())}return _}fromJSON(_){super.fromJSON(_),this.points=[];for(let J=0,Z=_.points.length;J<Z;J++){const Q=_.points[J];this.points.push(new Vector2().fromArray(Q))}return this}}var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(_){this.curves.push(_)}closePath(){const _=this.curves[0].getPoint(0),J=this.curves[this.curves.length-1].getPoint(1);if(!_.equals(J)){const Z=_.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Curves[Z](J,_))}return this}getPoint(_,J){const Z=_*this.getLength(),Q=this.getCurveLengths();let ee=0;for(;ee<Q.length;){if(Q[ee]>=Z){const te=Q[ee]-Z,ne=this.curves[ee],ie=ne.getLength(),re=ie===0?0:1-te/ie;return ne.getPointAt(re,J)}ee++}return null}getLength(){const _=this.getCurveLengths();return _[_.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const _=[];let J=0;for(let Z=0,Q=this.curves.length;Z<Q;Z++)J+=this.curves[Z].getLength(),_.push(J);return this.cacheLengths=_,_}getSpacedPoints(_=40){const J=[];for(let Z=0;Z<=_;Z++)J.push(this.getPoint(Z/_));return this.autoClose&&J.push(J[0]),J}getPoints(_=12){const J=[];let Z;for(let Q=0,ee=this.curves;Q<ee.length;Q++){const te=ee[Q],ne=te.isEllipseCurve?_*2:te.isLineCurve||te.isLineCurve3?1:te.isSplineCurve?_*te.points.length:_,ie=te.getPoints(ne);for(let re=0;re<ie.length;re++){const oe=ie[re];Z&&Z.equals(oe)||(J.push(oe),Z=oe)}}return this.autoClose&&J.length>1&&!J[J.length-1].equals(J[0])&&J.push(J[0]),J}copy(_){super.copy(_),this.curves=[];for(let J=0,Z=_.curves.length;J<Z;J++){const Q=_.curves[J];this.curves.push(Q.clone())}return this.autoClose=_.autoClose,this}toJSON(){const _=super.toJSON();_.autoClose=this.autoClose,_.curves=[];for(let J=0,Z=this.curves.length;J<Z;J++){const Q=this.curves[J];_.curves.push(Q.toJSON())}return _}fromJSON(_){super.fromJSON(_),this.autoClose=_.autoClose,this.curves=[];for(let J=0,Z=_.curves.length;J<Z;J++){const Q=_.curves[J];this.curves.push(new Curves[Q.type]().fromJSON(Q))}return this}}class Path extends CurvePath{constructor(_){super(),this.type="Path",this.currentPoint=new Vector2,_&&this.setFromPoints(_)}setFromPoints(_){this.moveTo(_[0].x,_[0].y);for(let J=1,Z=_.length;J<Z;J++)this.lineTo(_[J].x,_[J].y);return this}moveTo(_,J){return this.currentPoint.set(_,J),this}lineTo(_,J){const Z=new LineCurve(this.currentPoint.clone(),new Vector2(_,J));return this.curves.push(Z),this.currentPoint.set(_,J),this}quadraticCurveTo(_,J,Z,Q){const ee=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(_,J),new Vector2(Z,Q));return this.curves.push(ee),this.currentPoint.set(Z,Q),this}bezierCurveTo(_,J,Z,Q,ee,te){const ne=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(_,J),new Vector2(Z,Q),new Vector2(ee,te));return this.curves.push(ne),this.currentPoint.set(ee,te),this}splineThru(_){const J=[this.currentPoint.clone()].concat(_),Z=new SplineCurve(J);return this.curves.push(Z),this.currentPoint.copy(_[_.length-1]),this}arc(_,J,Z,Q,ee,te){const ne=this.currentPoint.x,ie=this.currentPoint.y;return this.absarc(_+ne,J+ie,Z,Q,ee,te),this}absarc(_,J,Z,Q,ee,te){return this.absellipse(_,J,Z,Z,Q,ee,te),this}ellipse(_,J,Z,Q,ee,te,ne,ie){const re=this.currentPoint.x,oe=this.currentPoint.y;return this.absellipse(_+re,J+oe,Z,Q,ee,te,ne,ie),this}absellipse(_,J,Z,Q,ee,te,ne,ie){const re=new EllipseCurve(_,J,Z,Q,ee,te,ne,ie);if(this.curves.length>0){const se=re.getPoint(0);se.equals(this.currentPoint)||this.lineTo(se.x,se.y)}this.curves.push(re);const oe=re.getPoint(1);return this.currentPoint.copy(oe),this}copy(_){return super.copy(_),this.currentPoint.copy(_.currentPoint),this}toJSON(){const _=super.toJSON();return _.currentPoint=this.currentPoint.toArray(),_}fromJSON(_){return super.fromJSON(_),this.currentPoint.fromArray(_.currentPoint),this}}class Shape extends Path{constructor(_){super(_),this.uuid=generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(_){const J=[];for(let Z=0,Q=this.holes.length;Z<Q;Z++)J[Z]=this.holes[Z].getPoints(_);return J}extractPoints(_){return{shape:this.getPoints(_),holes:this.getPointsHoles(_)}}copy(_){super.copy(_),this.holes=[];for(let J=0,Z=_.holes.length;J<Z;J++){const Q=_.holes[J];this.holes.push(Q.clone())}return this}toJSON(){const _=super.toJSON();_.uuid=this.uuid,_.holes=[];for(let J=0,Z=this.holes.length;J<Z;J++){const Q=this.holes[J];_.holes.push(Q.toJSON())}return _}fromJSON(_){super.fromJSON(_),this.uuid=_.uuid,this.holes=[];for(let J=0,Z=_.holes.length;J<Z;J++){const Q=_.holes[J];this.holes.push(new Path().fromJSON(Q))}return this}}function earcut(G,_,J=2){const Z=_&&_.length,Q=Z?_[0]*J:G.length;let ee=linkedList(G,0,Q,J,!0);const te=[];if(!ee||ee.next===ee.prev)return te;let ne,ie,re;if(Z&&(ee=eliminateHoles(G,_,ee,J)),G.length>80*J){ne=G[0],ie=G[1];let oe=ne,se=ie;for(let ae=J;ae<Q;ae+=J){const le=G[ae],ue=G[ae+1];le<ne&&(ne=le),ue<ie&&(ie=ue),le>oe&&(oe=le),ue>se&&(se=ue)}re=Math.max(oe-ne,se-ie),re=re!==0?32767/re:0}return earcutLinked(ee,te,J,ne,ie,re,0),te}function linkedList(G,_,J,Z,Q){let ee;if(Q===signedArea(G,_,J,Z)>0)for(let te=_;te<J;te+=Z)ee=insertNode(te/Z|0,G[te],G[te+1],ee);else for(let te=J-Z;te>=_;te-=Z)ee=insertNode(te/Z|0,G[te],G[te+1],ee);return ee&&equals(ee,ee.next)&&(removeNode(ee),ee=ee.next),ee}function filterPoints(G,_){if(!G)return G;_||(_=G);let J=G,Z;do if(Z=!1,!J.steiner&&(equals(J,J.next)||area(J.prev,J,J.next)===0)){if(removeNode(J),J=_=J.prev,J===J.next)break;Z=!0}else J=J.next;while(Z||J!==_);return _}function earcutLinked(G,_,J,Z,Q,ee,te){if(!G)return;!te&&ee&&indexCurve(G,Z,Q,ee);let ne=G;for(;G.prev!==G.next;){const ie=G.prev,re=G.next;if(ee?isEarHashed(G,Z,Q,ee):isEar(G)){_.push(ie.i,G.i,re.i),removeNode(G),G=re.next,ne=re.next;continue}if(G=re,G===ne){te?te===1?(G=cureLocalIntersections(filterPoints(G),_),earcutLinked(G,_,J,Z,Q,ee,2)):te===2&&splitEarcut(G,_,J,Z,Q,ee):earcutLinked(filterPoints(G),_,J,Z,Q,ee,1);break}}}function isEar(G){const _=G.prev,J=G,Z=G.next;if(area(_,J,Z)>=0)return!1;const Q=_.x,ee=J.x,te=Z.x,ne=_.y,ie=J.y,re=Z.y,oe=Math.min(Q,ee,te),se=Math.min(ne,ie,re),ae=Math.max(Q,ee,te),le=Math.max(ne,ie,re);let ue=Z.next;for(;ue!==_;){if(ue.x>=oe&&ue.x<=ae&&ue.y>=se&&ue.y<=le&&pointInTriangleExceptFirst(Q,ne,ee,ie,te,re,ue.x,ue.y)&&area(ue.prev,ue,ue.next)>=0)return!1;ue=ue.next}return!0}function isEarHashed(G,_,J,Z){const Q=G.prev,ee=G,te=G.next;if(area(Q,ee,te)>=0)return!1;const ne=Q.x,ie=ee.x,re=te.x,oe=Q.y,se=ee.y,ae=te.y,le=Math.min(ne,ie,re),ue=Math.min(oe,se,ae),de=Math.max(ne,ie,re),pe=Math.max(oe,se,ae),fe=zOrder(le,ue,_,J,Z),_e=zOrder(de,pe,_,J,Z);let ye=G.prevZ,be=G.nextZ;for(;ye&&ye.z>=fe&&be&&be.z<=_e;){if(ye.x>=le&&ye.x<=de&&ye.y>=ue&&ye.y<=pe&&ye!==Q&&ye!==te&&pointInTriangleExceptFirst(ne,oe,ie,se,re,ae,ye.x,ye.y)&&area(ye.prev,ye,ye.next)>=0||(ye=ye.prevZ,be.x>=le&&be.x<=de&&be.y>=ue&&be.y<=pe&&be!==Q&&be!==te&&pointInTriangleExceptFirst(ne,oe,ie,se,re,ae,be.x,be.y)&&area(be.prev,be,be.next)>=0))return!1;be=be.nextZ}for(;ye&&ye.z>=fe;){if(ye.x>=le&&ye.x<=de&&ye.y>=ue&&ye.y<=pe&&ye!==Q&&ye!==te&&pointInTriangleExceptFirst(ne,oe,ie,se,re,ae,ye.x,ye.y)&&area(ye.prev,ye,ye.next)>=0)return!1;ye=ye.prevZ}for(;be&&be.z<=_e;){if(be.x>=le&&be.x<=de&&be.y>=ue&&be.y<=pe&&be!==Q&&be!==te&&pointInTriangleExceptFirst(ne,oe,ie,se,re,ae,be.x,be.y)&&area(be.prev,be,be.next)>=0)return!1;be=be.nextZ}return!0}function cureLocalIntersections(G,_){let J=G;do{const Z=J.prev,Q=J.next.next;!equals(Z,Q)&&intersects(Z,J,J.next,Q)&&locallyInside(Z,Q)&&locallyInside(Q,Z)&&(_.push(Z.i,J.i,Q.i),removeNode(J),removeNode(J.next),J=G=Q),J=J.next}while(J!==G);return filterPoints(J)}function splitEarcut(G,_,J,Z,Q,ee){let te=G;do{let ne=te.next.next;for(;ne!==te.prev;){if(te.i!==ne.i&&isValidDiagonal(te,ne)){let ie=splitPolygon(te,ne);te=filterPoints(te,te.next),ie=filterPoints(ie,ie.next),earcutLinked(te,_,J,Z,Q,ee,0),earcutLinked(ie,_,J,Z,Q,ee,0);return}ne=ne.next}te=te.next}while(te!==G)}function eliminateHoles(G,_,J,Z){const Q=[];for(let ee=0,te=_.length;ee<te;ee++){const ne=_[ee]*Z,ie=ee<te-1?_[ee+1]*Z:G.length,re=linkedList(G,ne,ie,Z,!1);re===re.next&&(re.steiner=!0),Q.push(getLeftmost(re))}Q.sort(compareXYSlope);for(let ee=0;ee<Q.length;ee++)J=eliminateHole(Q[ee],J);return J}function compareXYSlope(G,_){let J=G.x-_.x;if(J===0&&(J=G.y-_.y,J===0)){const Z=(G.next.y-G.y)/(G.next.x-G.x),Q=(_.next.y-_.y)/(_.next.x-_.x);J=Z-Q}return J}function eliminateHole(G,_){const J=findHoleBridge(G,_);if(!J)return _;const Z=splitPolygon(J,G);return filterPoints(Z,Z.next),filterPoints(J,J.next)}function findHoleBridge(G,_){let J=_;const Z=G.x,Q=G.y;let ee=-1/0,te;if(equals(G,J))return J;do{if(equals(G,J.next))return J.next;if(Q<=J.y&&Q>=J.next.y&&J.next.y!==J.y){const se=J.x+(Q-J.y)*(J.next.x-J.x)/(J.next.y-J.y);if(se<=Z&&se>ee&&(ee=se,te=J.x<J.next.x?J:J.next,se===Z))return te}J=J.next}while(J!==_);if(!te)return null;const ne=te,ie=te.x,re=te.y;let oe=1/0;J=te;do{if(Z>=J.x&&J.x>=ie&&Z!==J.x&&pointInTriangle(Q<re?Z:ee,Q,ie,re,Q<re?ee:Z,Q,J.x,J.y)){const se=Math.abs(Q-J.y)/(Z-J.x);locallyInside(J,G)&&(se<oe||se===oe&&(J.x>te.x||J.x===te.x&&sectorContainsSector(te,J)))&&(te=J,oe=se)}J=J.next}while(J!==ne);return te}function sectorContainsSector(G,_){return area(G.prev,G,_.prev)<0&&area(_.next,G,G.next)<0}function indexCurve(G,_,J,Z){let Q=G;do Q.z===0&&(Q.z=zOrder(Q.x,Q.y,_,J,Z)),Q.prevZ=Q.prev,Q.nextZ=Q.next,Q=Q.next;while(Q!==G);Q.prevZ.nextZ=null,Q.prevZ=null,sortLinked(Q)}function sortLinked(G){let _,J=1;do{let Z=G,Q;G=null;let ee=null;for(_=0;Z;){_++;let te=Z,ne=0;for(let re=0;re<J&&(ne++,te=te.nextZ,!!te);re++);let ie=J;for(;ne>0||ie>0&&te;)ne!==0&&(ie===0||!te||Z.z<=te.z)?(Q=Z,Z=Z.nextZ,ne--):(Q=te,te=te.nextZ,ie--),ee?ee.nextZ=Q:G=Q,Q.prevZ=ee,ee=Q;Z=te}ee.nextZ=null,J*=2}while(_>1);return G}function zOrder(G,_,J,Z,Q){return G=(G-J)*Q|0,_=(_-Z)*Q|0,G=(G|G<<8)&16711935,G=(G|G<<4)&252645135,G=(G|G<<2)&858993459,G=(G|G<<1)&1431655765,_=(_|_<<8)&16711935,_=(_|_<<4)&252645135,_=(_|_<<2)&858993459,_=(_|_<<1)&1431655765,G|_<<1}function getLeftmost(G){let _=G,J=G;do(_.x<J.x||_.x===J.x&&_.y<J.y)&&(J=_),_=_.next;while(_!==G);return J}function pointInTriangle(G,_,J,Z,Q,ee,te,ne){return(Q-te)*(_-ne)>=(G-te)*(ee-ne)&&(G-te)*(Z-ne)>=(J-te)*(_-ne)&&(J-te)*(ee-ne)>=(Q-te)*(Z-ne)}function pointInTriangleExceptFirst(G,_,J,Z,Q,ee,te,ne){return!(G===te&&_===ne)&&pointInTriangle(G,_,J,Z,Q,ee,te,ne)}function isValidDiagonal(G,_){return G.next.i!==_.i&&G.prev.i!==_.i&&!intersectsPolygon(G,_)&&(locallyInside(G,_)&&locallyInside(_,G)&&middleInside(G,_)&&(area(G.prev,G,_.prev)||area(G,_.prev,_))||equals(G,_)&&area(G.prev,G,G.next)>0&&area(_.prev,_,_.next)>0)}function area(G,_,J){return(_.y-G.y)*(J.x-_.x)-(_.x-G.x)*(J.y-_.y)}function equals(G,_){return G.x===_.x&&G.y===_.y}function intersects(G,_,J,Z){const Q=sign(area(G,_,J)),ee=sign(area(G,_,Z)),te=sign(area(J,Z,G)),ne=sign(area(J,Z,_));return!!(Q!==ee&&te!==ne||Q===0&&onSegment(G,J,_)||ee===0&&onSegment(G,Z,_)||te===0&&onSegment(J,G,Z)||ne===0&&onSegment(J,_,Z))}function onSegment(G,_,J){return _.x<=Math.max(G.x,J.x)&&_.x>=Math.min(G.x,J.x)&&_.y<=Math.max(G.y,J.y)&&_.y>=Math.min(G.y,J.y)}function sign(G){return G>0?1:G<0?-1:0}function intersectsPolygon(G,_){let J=G;do{if(J.i!==G.i&&J.next.i!==G.i&&J.i!==_.i&&J.next.i!==_.i&&intersects(J,J.next,G,_))return!0;J=J.next}while(J!==G);return!1}function locallyInside(G,_){return area(G.prev,G,G.next)<0?area(G,_,G.next)>=0&&area(G,G.prev,_)>=0:area(G,_,G.prev)<0||area(G,G.next,_)<0}function middleInside(G,_){let J=G,Z=!1;const Q=(G.x+_.x)/2,ee=(G.y+_.y)/2;do J.y>ee!=J.next.y>ee&&J.next.y!==J.y&&Q<(J.next.x-J.x)*(ee-J.y)/(J.next.y-J.y)+J.x&&(Z=!Z),J=J.next;while(J!==G);return Z}function splitPolygon(G,_){const J=createNode(G.i,G.x,G.y),Z=createNode(_.i,_.x,_.y),Q=G.next,ee=_.prev;return G.next=_,_.prev=G,J.next=Q,Q.prev=J,Z.next=J,J.prev=Z,ee.next=Z,Z.prev=ee,Z}function insertNode(G,_,J,Z){const Q=createNode(G,_,J);return Z?(Q.next=Z.next,Q.prev=Z,Z.next.prev=Q,Z.next=Q):(Q.prev=Q,Q.next=Q),Q}function removeNode(G){G.next.prev=G.prev,G.prev.next=G.next,G.prevZ&&(G.prevZ.nextZ=G.nextZ),G.nextZ&&(G.nextZ.prevZ=G.prevZ)}function createNode(G,_,J){return{i:G,x:_,y:J,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function signedArea(G,_,J,Z){let Q=0;for(let ee=_,te=J-Z;ee<J;ee+=Z)Q+=(G[te]-G[ee])*(G[ee+1]+G[te+1]),te=ee;return Q}class Earcut{static triangulate(_,J,Z=2){return earcut(_,J,Z)}}class ShapeUtils{static area(_){const J=_.length;let Z=0;for(let Q=J-1,ee=0;ee<J;Q=ee++)Z+=_[Q].x*_[ee].y-_[ee].x*_[Q].y;return Z*.5}static isClockWise(_){return ShapeUtils.area(_)<0}static triangulateShape(_,J){const Z=[],Q=[],ee=[];removeDupEndPts(_),addContour(Z,_);let te=_.length;J.forEach(removeDupEndPts);for(let ie=0;ie<J.length;ie++)Q.push(te),te+=J[ie].length,addContour(Z,J[ie]);const ne=Earcut.triangulate(Z,Q);for(let ie=0;ie<ne.length;ie+=3)ee.push(ne.slice(ie,ie+3));return ee}}function removeDupEndPts(G){const _=G.length;_>2&&G[_-1].equals(G[0])&&G.pop()}function addContour(G,_){for(let J=0;J<_.length;J++)G.push(_[J].x),G.push(_[J].y)}class ExtrudeGeometry extends BufferGeometry{constructor(_=new Shape([new Vector2(.5,.5),new Vector2(-.5,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),J={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:_,options:J},_=Array.isArray(_)?_:[_];const Z=this,Q=[],ee=[];for(let ne=0,ie=_.length;ne<ie;ne++){const re=_[ne];te(re)}this.setAttribute("position",new Float32BufferAttribute(Q,3)),this.setAttribute("uv",new Float32BufferAttribute(ee,2)),this.computeVertexNormals();function te(ne){const ie=[],re=J.curveSegments!==void 0?J.curveSegments:12,oe=J.steps!==void 0?J.steps:1,se=J.depth!==void 0?J.depth:1;let ae=J.bevelEnabled!==void 0?J.bevelEnabled:!0,le=J.bevelThickness!==void 0?J.bevelThickness:.2,ue=J.bevelSize!==void 0?J.bevelSize:le-.1,de=J.bevelOffset!==void 0?J.bevelOffset:0,pe=J.bevelSegments!==void 0?J.bevelSegments:3;const fe=J.extrudePath,_e=J.UVGenerator!==void 0?J.UVGenerator:WorldUVGenerator;let ye,be=!1,Ae,Ce,Ee,Re;fe&&(ye=fe.getSpacedPoints(oe),be=!0,ae=!1,Ae=fe.computeFrenetFrames(oe,!1),Ce=new Vector3,Ee=new Vector3,Re=new Vector3),ae||(pe=0,le=0,ue=0,de=0);const Te=ne.extractPoints(re);let Me=Te.shape;const Ne=Te.holes;if(!ShapeUtils.isClockWise(Me)){Me=Me.reverse();for(let pt=0,Ke=Ne.length;pt<Ke;pt++){const Mt=Ne[pt];ShapeUtils.isClockWise(Mt)&&(Ne[pt]=Mt.reverse())}}function Ie(pt){const Mt=10000000000000001e-36;let Bt=pt[0];for(let Lt=1;Lt<=pt.length;Lt++){const Ft=Lt%pt.length,ai=pt[Ft],Qt=ai.x-Bt.x,hi=ai.y-Bt.y,Qe=Qt*Qt+hi*hi,Ye=Math.max(Math.abs(ai.x),Math.abs(ai.y),Math.abs(Bt.x),Math.abs(Bt.y)),_t=Mt*Ye*Ye;if(Qe<=_t){pt.splice(Ft,1),Lt--;continue}Bt=ai}}Ie(Me),Ne.forEach(Ie);const Ge=Ne.length,He=Me;for(let pt=0;pt<Ge;pt++){const Ke=Ne[pt];Me=Me.concat(Ke)}function Be(pt,Ke,Mt){return Ke||error("ExtrudeGeometry: vec does not exist"),pt.clone().addScaledVector(Ke,Mt)}const ze=Me.length;function Fe(pt,Ke,Mt){let Bt,Lt,Ft;const ai=pt.x-Ke.x,Qt=pt.y-Ke.y,hi=Mt.x-pt.x,Qe=Mt.y-pt.y,Ye=ai*ai+Qt*Qt,_t=ai*Qe-Qt*hi;if(Math.abs(_t)>Number.EPSILON){const dt=Math.sqrt(Ye),yt=Math.sqrt(hi*hi+Qe*Qe),Nt=Ke.x-Qt/dt,fi=Ke.y+ai/dt,Zt=Mt.x-Qe/yt,Ut=Mt.y+hi/yt,qt=((Zt-Nt)*Qe-(Ut-fi)*hi)/(ai*Qe-Qt*hi);Bt=Nt+ai*qt-pt.x,Lt=fi+Qt*qt-pt.y;const Rt=Bt*Bt+Lt*Lt;if(Rt<=2)return new Vector2(Bt,Lt);Ft=Math.sqrt(Rt/2)}else{let dt=!1;ai>Number.EPSILON?hi>Number.EPSILON&&(dt=!0):ai<-Number.EPSILON?hi<-Number.EPSILON&&(dt=!0):Math.sign(Qt)===Math.sign(Qe)&&(dt=!0),dt?(Bt=-Qt,Lt=ai,Ft=Math.sqrt(Ye)):(Bt=ai,Lt=Qt,Ft=Math.sqrt(Ye/2))}return new Vector2(Bt/Ft,Lt/Ft)}const $e=[];for(let pt=0,Ke=He.length,Mt=Ke-1,Bt=pt+1;pt<Ke;pt++,Mt++,Bt++)Mt===Ke&&(Mt=0),Bt===Ke&&(Bt=0),$e[pt]=Fe(He[pt],He[Mt],He[Bt]);const Xe=[];let je,qe=$e.concat();for(let pt=0,Ke=Ge;pt<Ke;pt++){const Mt=Ne[pt];je=[];for(let Bt=0,Lt=Mt.length,Ft=Lt-1,ai=Bt+1;Bt<Lt;Bt++,Ft++,ai++)Ft===Lt&&(Ft=0),ai===Lt&&(ai=0),je[Bt]=Fe(Mt[Bt],Mt[Ft],Mt[ai]);Xe.push(je),qe=qe.concat(je)}let Ze;if(pe===0)Ze=ShapeUtils.triangulateShape(He,Ne);else{const pt=[],Ke=[];for(let Mt=0;Mt<pe;Mt++){const Bt=Mt/pe,Lt=le*Math.cos(Bt*Math.PI/2),Ft=ue*Math.sin(Bt*Math.PI/2)+de;for(let ai=0,Qt=He.length;ai<Qt;ai++){const hi=Be(He[ai],$e[ai],Ft);kt(hi.x,hi.y,-Lt),Bt===0&&pt.push(hi)}for(let ai=0,Qt=Ge;ai<Qt;ai++){const hi=Ne[ai];je=Xe[ai];const Qe=[];for(let Ye=0,_t=hi.length;Ye<_t;Ye++){const dt=Be(hi[Ye],je[Ye],Ft);kt(dt.x,dt.y,-Lt),Bt===0&&Qe.push(dt)}Bt===0&&Ke.push(Qe)}}Ze=ShapeUtils.triangulateShape(pt,Ke)}const st=Ze.length,St=ue+de;for(let pt=0;pt<ze;pt++){const Ke=ae?Be(Me[pt],qe[pt],St):Me[pt];be?(Ee.copy(Ae.normals[0]).multiplyScalar(Ke.x),Ce.copy(Ae.binormals[0]).multiplyScalar(Ke.y),Re.copy(ye[0]).add(Ee).add(Ce),kt(Re.x,Re.y,Re.z)):kt(Ke.x,Ke.y,0)}for(let pt=1;pt<=oe;pt++)for(let Ke=0;Ke<ze;Ke++){const Mt=ae?Be(Me[Ke],qe[Ke],St):Me[Ke];be?(Ee.copy(Ae.normals[pt]).multiplyScalar(Mt.x),Ce.copy(Ae.binormals[pt]).multiplyScalar(Mt.y),Re.copy(ye[pt]).add(Ee).add(Ce),kt(Re.x,Re.y,Re.z)):kt(Mt.x,Mt.y,se/oe*pt)}for(let pt=pe-1;pt>=0;pt--){const Ke=pt/pe,Mt=le*Math.cos(Ke*Math.PI/2),Bt=ue*Math.sin(Ke*Math.PI/2)+de;for(let Lt=0,Ft=He.length;Lt<Ft;Lt++){const ai=Be(He[Lt],$e[Lt],Bt);kt(ai.x,ai.y,se+Mt)}for(let Lt=0,Ft=Ne.length;Lt<Ft;Lt++){const ai=Ne[Lt];je=Xe[Lt];for(let Qt=0,hi=ai.length;Qt<hi;Qt++){const Qe=Be(ai[Qt],je[Qt],Bt);be?kt(Qe.x,Qe.y+ye[oe-1].y,ye[oe-1].x+Mt):kt(Qe.x,Qe.y,se+Mt)}}}it(),lt();function it(){const pt=Q.length/3;if(ae){let Ke=0,Mt=ze*Ke;for(let Bt=0;Bt<st;Bt++){const Lt=Ze[Bt];Ht(Lt[2]+Mt,Lt[1]+Mt,Lt[0]+Mt)}Ke=oe+pe*2,Mt=ze*Ke;for(let Bt=0;Bt<st;Bt++){const Lt=Ze[Bt];Ht(Lt[0]+Mt,Lt[1]+Mt,Lt[2]+Mt)}}else{for(let Ke=0;Ke<st;Ke++){const Mt=Ze[Ke];Ht(Mt[2],Mt[1],Mt[0])}for(let Ke=0;Ke<st;Ke++){const Mt=Ze[Ke];Ht(Mt[0]+ze*oe,Mt[1]+ze*oe,Mt[2]+ze*oe)}}Z.addGroup(pt,Q.length/3-pt,0)}function lt(){const pt=Q.length/3;let Ke=0;ft(He,Ke),Ke+=He.length;for(let Mt=0,Bt=Ne.length;Mt<Bt;Mt++){const Lt=Ne[Mt];ft(Lt,Ke),Ke+=Lt.length}Z.addGroup(pt,Q.length/3-pt,1)}function ft(pt,Ke){let Mt=pt.length;for(;--Mt>=0;){const Bt=Mt;let Lt=Mt-1;Lt<0&&(Lt=pt.length-1);for(let Ft=0,ai=oe+pe*2;Ft<ai;Ft++){const Qt=ze*Ft,hi=ze*(Ft+1),Qe=Ke+Bt+Qt,Ye=Ke+Lt+Qt,_t=Ke+Lt+hi,dt=Ke+Bt+hi;Wt(Qe,Ye,_t,dt)}}}function kt(pt,Ke,Mt){ie.push(pt),ie.push(Ke),ie.push(Mt)}function Ht(pt,Ke,Mt){ni(pt),ni(Ke),ni(Mt);const Bt=Q.length/3,Lt=_e.generateTopUV(Z,Q,Bt-3,Bt-2,Bt-1);jt(Lt[0]),jt(Lt[1]),jt(Lt[2])}function Wt(pt,Ke,Mt,Bt){ni(pt),ni(Ke),ni(Bt),ni(Ke),ni(Mt),ni(Bt);const Lt=Q.length/3,Ft=_e.generateSideWallUV(Z,Q,Lt-6,Lt-3,Lt-2,Lt-1);jt(Ft[0]),jt(Ft[1]),jt(Ft[3]),jt(Ft[1]),jt(Ft[2]),jt(Ft[3])}function ni(pt){Q.push(ie[pt*3+0]),Q.push(ie[pt*3+1]),Q.push(ie[pt*3+2])}function jt(pt){ee.push(pt.x),ee.push(pt.y)}}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}toJSON(){const _=super.toJSON(),J=this.parameters.shapes,Z=this.parameters.options;return toJSON$1(J,Z,_)}static fromJSON(_,J){const Z=[];for(let ee=0,te=_.shapes.length;ee<te;ee++){const ne=J[_.shapes[ee]];Z.push(ne)}const Q=_.options.extrudePath;return Q!==void 0&&(_.options.extrudePath=new Curves[Q.type]().fromJSON(Q)),new ExtrudeGeometry(Z,_.options)}}const WorldUVGenerator={generateTopUV:function(G,_,J,Z,Q){const ee=_[J*3],te=_[J*3+1],ne=_[Z*3],ie=_[Z*3+1],re=_[Q*3],oe=_[Q*3+1];return[new Vector2(ee,te),new Vector2(ne,ie),new Vector2(re,oe)]},generateSideWallUV:function(G,_,J,Z,Q,ee){const te=_[J*3],ne=_[J*3+1],ie=_[J*3+2],re=_[Z*3],oe=_[Z*3+1],se=_[Z*3+2],ae=_[Q*3],le=_[Q*3+1],ue=_[Q*3+2],de=_[ee*3],pe=_[ee*3+1],fe=_[ee*3+2];return Math.abs(ne-oe)<Math.abs(te-re)?[new Vector2(te,1-ie),new Vector2(re,1-se),new Vector2(ae,1-ue),new Vector2(de,1-fe)]:[new Vector2(ne,1-ie),new Vector2(oe,1-se),new Vector2(le,1-ue),new Vector2(pe,1-fe)]}};function toJSON$1(G,_,J){if(J.shapes=[],Array.isArray(G))for(let Z=0,Q=G.length;Z<Q;Z++){const ee=G[Z];J.shapes.push(ee.uuid)}else J.shapes.push(G.uuid);return J.options=Object.assign({},_),_.extrudePath!==void 0&&(J.options.extrudePath=_.extrudePath.toJSON()),J}class IcosahedronGeometry extends PolyhedronGeometry{constructor(_=1,J=0){const Z=(1+Math.sqrt(5))/2,Q=[-1,Z,0,1,Z,0,-1,-Z,0,1,-Z,0,0,-1,Z,0,1,Z,0,-1,-Z,0,1,-Z,Z,0,-1,Z,0,1,-Z,0,-1,-Z,0,1],ee=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(Q,ee,_,J),this.type="IcosahedronGeometry",this.parameters={radius:_,detail:J}}static fromJSON(_){return new IcosahedronGeometry(_.radius,_.detail)}}class LatheGeometry extends BufferGeometry{constructor(_=[new Vector2(0,-.5),new Vector2(.5,0),new Vector2(0,.5)],J=12,Z=0,Q=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:_,segments:J,phiStart:Z,phiLength:Q},J=Math.floor(J),Q=clamp$1(Q,0,Math.PI*2);const ee=[],te=[],ne=[],ie=[],re=[],oe=1/J,se=new Vector3,ae=new Vector2,le=new Vector3,ue=new Vector3,de=new Vector3;let pe=0,fe=0;for(let _e=0;_e<=_.length-1;_e++)switch(_e){case 0:pe=_[_e+1].x-_[_e].x,fe=_[_e+1].y-_[_e].y,le.x=fe*1,le.y=-pe,le.z=fe*0,de.copy(le),le.normalize(),ie.push(le.x,le.y,le.z);break;case _.length-1:ie.push(de.x,de.y,de.z);break;default:pe=_[_e+1].x-_[_e].x,fe=_[_e+1].y-_[_e].y,le.x=fe*1,le.y=-pe,le.z=fe*0,ue.copy(le),le.x+=de.x,le.y+=de.y,le.z+=de.z,le.normalize(),ie.push(le.x,le.y,le.z),de.copy(ue)}for(let _e=0;_e<=J;_e++){const ye=Z+_e*oe*Q,be=Math.sin(ye),Ae=Math.cos(ye);for(let Ce=0;Ce<=_.length-1;Ce++){se.x=_[Ce].x*be,se.y=_[Ce].y,se.z=_[Ce].x*Ae,te.push(se.x,se.y,se.z),ae.x=_e/J,ae.y=Ce/(_.length-1),ne.push(ae.x,ae.y);const Ee=ie[3*Ce+0]*be,Re=ie[3*Ce+1],Te=ie[3*Ce+0]*Ae;re.push(Ee,Re,Te)}}for(let _e=0;_e<J;_e++)for(let ye=0;ye<_.length-1;ye++){const be=ye+_e*_.length,Ae=be,Ce=be+_.length,Ee=be+_.length+1,Re=be+1;ee.push(Ae,Ce,Re),ee.push(Ee,Re,Ce)}this.setIndex(ee),this.setAttribute("position",new Float32BufferAttribute(te,3)),this.setAttribute("uv",new Float32BufferAttribute(ne,2)),this.setAttribute("normal",new Float32BufferAttribute(re,3))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new LatheGeometry(_.points,_.segments,_.phiStart,_.phiLength)}}class OctahedronGeometry extends PolyhedronGeometry{constructor(_=1,J=0){const Z=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],Q=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(Z,Q,_,J),this.type="OctahedronGeometry",this.parameters={radius:_,detail:J}}static fromJSON(_){return new OctahedronGeometry(_.radius,_.detail)}}class PlaneGeometry extends BufferGeometry{constructor(_=1,J=1,Z=1,Q=1){super(),this.type="PlaneGeometry",this.parameters={width:_,height:J,widthSegments:Z,heightSegments:Q};const ee=_/2,te=J/2,ne=Math.floor(Z),ie=Math.floor(Q),re=ne+1,oe=ie+1,se=_/ne,ae=J/ie,le=[],ue=[],de=[],pe=[];for(let fe=0;fe<oe;fe++){const _e=fe*ae-te;for(let ye=0;ye<re;ye++){const be=ye*se-ee;ue.push(be,-_e,0),de.push(0,0,1),pe.push(ye/ne),pe.push(1-fe/ie)}}for(let fe=0;fe<ie;fe++)for(let _e=0;_e<ne;_e++){const ye=_e+re*fe,be=_e+re*(fe+1),Ae=_e+1+re*(fe+1),Ce=_e+1+re*fe;le.push(ye,be,Ce),le.push(be,Ae,Ce)}this.setIndex(le),this.setAttribute("position",new Float32BufferAttribute(ue,3)),this.setAttribute("normal",new Float32BufferAttribute(de,3)),this.setAttribute("uv",new Float32BufferAttribute(pe,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new PlaneGeometry(_.width,_.height,_.widthSegments,_.heightSegments)}}class RingGeometry extends BufferGeometry{constructor(_=.5,J=1,Z=32,Q=1,ee=0,te=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:_,outerRadius:J,thetaSegments:Z,phiSegments:Q,thetaStart:ee,thetaLength:te},Z=Math.max(3,Z),Q=Math.max(1,Q);const ne=[],ie=[],re=[],oe=[];let se=_;const ae=(J-_)/Q,le=new Vector3,ue=new Vector2;for(let de=0;de<=Q;de++){for(let pe=0;pe<=Z;pe++){const fe=ee+pe/Z*te;le.x=se*Math.cos(fe),le.y=se*Math.sin(fe),ie.push(le.x,le.y,le.z),re.push(0,0,1),ue.x=(le.x/J+1)/2,ue.y=(le.y/J+1)/2,oe.push(ue.x,ue.y)}se+=ae}for(let de=0;de<Q;de++){const pe=de*(Z+1);for(let fe=0;fe<Z;fe++){const _e=fe+pe,ye=_e,be=_e+Z+1,Ae=_e+Z+2,Ce=_e+1;ne.push(ye,be,Ce),ne.push(be,Ae,Ce)}}this.setIndex(ne),this.setAttribute("position",new Float32BufferAttribute(ie,3)),this.setAttribute("normal",new Float32BufferAttribute(re,3)),this.setAttribute("uv",new Float32BufferAttribute(oe,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new RingGeometry(_.innerRadius,_.outerRadius,_.thetaSegments,_.phiSegments,_.thetaStart,_.thetaLength)}}class ShapeGeometry extends BufferGeometry{constructor(_=new Shape([new Vector2(0,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),J=12){super(),this.type="ShapeGeometry",this.parameters={shapes:_,curveSegments:J};const Z=[],Q=[],ee=[],te=[];let ne=0,ie=0;if(Array.isArray(_)===!1)re(_);else for(let oe=0;oe<_.length;oe++)re(_[oe]),this.addGroup(ne,ie,oe),ne+=ie,ie=0;this.setIndex(Z),this.setAttribute("position",new Float32BufferAttribute(Q,3)),this.setAttribute("normal",new Float32BufferAttribute(ee,3)),this.setAttribute("uv",new Float32BufferAttribute(te,2));function re(oe){const se=Q.length/3,ae=oe.extractPoints(J);let le=ae.shape;const ue=ae.holes;ShapeUtils.isClockWise(le)===!1&&(le=le.reverse());for(let pe=0,fe=ue.length;pe<fe;pe++){const _e=ue[pe];ShapeUtils.isClockWise(_e)===!0&&(ue[pe]=_e.reverse())}const de=ShapeUtils.triangulateShape(le,ue);for(let pe=0,fe=ue.length;pe<fe;pe++){const _e=ue[pe];le=le.concat(_e)}for(let pe=0,fe=le.length;pe<fe;pe++){const _e=le[pe];Q.push(_e.x,_e.y,0),ee.push(0,0,1),te.push(_e.x,_e.y)}for(let pe=0,fe=de.length;pe<fe;pe++){const _e=de[pe],ye=_e[0]+se,be=_e[1]+se,Ae=_e[2]+se;Z.push(ye,be,Ae),ie+=3}}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}toJSON(){const _=super.toJSON(),J=this.parameters.shapes;return toJSON(J,_)}static fromJSON(_,J){const Z=[];for(let Q=0,ee=_.shapes.length;Q<ee;Q++){const te=J[_.shapes[Q]];Z.push(te)}return new ShapeGeometry(Z,_.curveSegments)}}function toJSON(G,_){if(_.shapes=[],Array.isArray(G))for(let J=0,Z=G.length;J<Z;J++){const Q=G[J];_.shapes.push(Q.uuid)}else _.shapes.push(G.uuid);return _}class SphereGeometry extends BufferGeometry{constructor(_=1,J=32,Z=16,Q=0,ee=Math.PI*2,te=0,ne=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:_,widthSegments:J,heightSegments:Z,phiStart:Q,phiLength:ee,thetaStart:te,thetaLength:ne},J=Math.max(3,Math.floor(J)),Z=Math.max(2,Math.floor(Z));const ie=Math.min(te+ne,Math.PI);let re=0;const oe=[],se=new Vector3,ae=new Vector3,le=[],ue=[],de=[],pe=[];for(let fe=0;fe<=Z;fe++){const _e=[],ye=fe/Z;let be=0;fe===0&&te===0?be=.5/J:fe===Z&&ie===Math.PI&&(be=-.5/J);for(let Ae=0;Ae<=J;Ae++){const Ce=Ae/J;se.x=-_*Math.cos(Q+Ce*ee)*Math.sin(te+ye*ne),se.y=_*Math.cos(te+ye*ne),se.z=_*Math.sin(Q+Ce*ee)*Math.sin(te+ye*ne),ue.push(se.x,se.y,se.z),ae.copy(se).normalize(),de.push(ae.x,ae.y,ae.z),pe.push(Ce+be,1-ye),_e.push(re++)}oe.push(_e)}for(let fe=0;fe<Z;fe++)for(let _e=0;_e<J;_e++){const ye=oe[fe][_e+1],be=oe[fe][_e],Ae=oe[fe+1][_e],Ce=oe[fe+1][_e+1];(fe!==0||te>0)&&le.push(ye,be,Ce),(fe!==Z-1||ie<Math.PI)&&le.push(be,Ae,Ce)}this.setIndex(le),this.setAttribute("position",new Float32BufferAttribute(ue,3)),this.setAttribute("normal",new Float32BufferAttribute(de,3)),this.setAttribute("uv",new Float32BufferAttribute(pe,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new SphereGeometry(_.radius,_.widthSegments,_.heightSegments,_.phiStart,_.phiLength,_.thetaStart,_.thetaLength)}}class TetrahedronGeometry extends PolyhedronGeometry{constructor(_=1,J=0){const Z=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],Q=[2,1,0,0,3,2,1,3,0,2,3,1];super(Z,Q,_,J),this.type="TetrahedronGeometry",this.parameters={radius:_,detail:J}}static fromJSON(_){return new TetrahedronGeometry(_.radius,_.detail)}}class TorusGeometry extends BufferGeometry{constructor(_=1,J=.4,Z=12,Q=48,ee=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:_,tube:J,radialSegments:Z,tubularSegments:Q,arc:ee},Z=Math.floor(Z),Q=Math.floor(Q);const te=[],ne=[],ie=[],re=[],oe=new Vector3,se=new Vector3,ae=new Vector3;for(let le=0;le<=Z;le++)for(let ue=0;ue<=Q;ue++){const de=ue/Q*ee,pe=le/Z*Math.PI*2;se.x=(_+J*Math.cos(pe))*Math.cos(de),se.y=(_+J*Math.cos(pe))*Math.sin(de),se.z=J*Math.sin(pe),ne.push(se.x,se.y,se.z),oe.x=_*Math.cos(de),oe.y=_*Math.sin(de),ae.subVectors(se,oe).normalize(),ie.push(ae.x,ae.y,ae.z),re.push(ue/Q),re.push(le/Z)}for(let le=1;le<=Z;le++)for(let ue=1;ue<=Q;ue++){const de=(Q+1)*le+ue-1,pe=(Q+1)*(le-1)+ue-1,fe=(Q+1)*(le-1)+ue,_e=(Q+1)*le+ue;te.push(de,pe,_e),te.push(pe,fe,_e)}this.setIndex(te),this.setAttribute("position",new Float32BufferAttribute(ne,3)),this.setAttribute("normal",new Float32BufferAttribute(ie,3)),this.setAttribute("uv",new Float32BufferAttribute(re,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new TorusGeometry(_.radius,_.tube,_.radialSegments,_.tubularSegments,_.arc)}}class TorusKnotGeometry extends BufferGeometry{constructor(_=1,J=.4,Z=64,Q=8,ee=2,te=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:_,tube:J,tubularSegments:Z,radialSegments:Q,p:ee,q:te},Z=Math.floor(Z),Q=Math.floor(Q);const ne=[],ie=[],re=[],oe=[],se=new Vector3,ae=new Vector3,le=new Vector3,ue=new Vector3,de=new Vector3,pe=new Vector3,fe=new Vector3;for(let ye=0;ye<=Z;++ye){const be=ye/Z*ee*Math.PI*2;_e(be,ee,te,_,le),_e(be+.01,ee,te,_,ue),pe.subVectors(ue,le),fe.addVectors(ue,le),de.crossVectors(pe,fe),fe.crossVectors(de,pe),de.normalize(),fe.normalize();for(let Ae=0;Ae<=Q;++Ae){const Ce=Ae/Q*Math.PI*2,Ee=-J*Math.cos(Ce),Re=J*Math.sin(Ce);se.x=le.x+(Ee*fe.x+Re*de.x),se.y=le.y+(Ee*fe.y+Re*de.y),se.z=le.z+(Ee*fe.z+Re*de.z),ie.push(se.x,se.y,se.z),ae.subVectors(se,le).normalize(),re.push(ae.x,ae.y,ae.z),oe.push(ye/Z),oe.push(Ae/Q)}}for(let ye=1;ye<=Z;ye++)for(let be=1;be<=Q;be++){const Ae=(Q+1)*(ye-1)+(be-1),Ce=(Q+1)*ye+(be-1),Ee=(Q+1)*ye+be,Re=(Q+1)*(ye-1)+be;ne.push(Ae,Ce,Re),ne.push(Ce,Ee,Re)}this.setIndex(ne),this.setAttribute("position",new Float32BufferAttribute(ie,3)),this.setAttribute("normal",new Float32BufferAttribute(re,3)),this.setAttribute("uv",new Float32BufferAttribute(oe,2));function _e(ye,be,Ae,Ce,Ee){const Re=Math.cos(ye),Te=Math.sin(ye),Me=Ae/be*ye,Ne=Math.cos(Me);Ee.x=Ce*(2+Ne)*.5*Re,Ee.y=Ce*(2+Ne)*Te*.5,Ee.z=Ce*Math.sin(Me)*.5}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new TorusKnotGeometry(_.radius,_.tube,_.tubularSegments,_.radialSegments,_.p,_.q)}}class TubeGeometry extends BufferGeometry{constructor(_=new QuadraticBezierCurve3(new Vector3(-1,-1,0),new Vector3(-1,1,0),new Vector3(1,1,0)),J=64,Z=1,Q=8,ee=!1){super(),this.type="TubeGeometry",this.parameters={path:_,tubularSegments:J,radius:Z,radialSegments:Q,closed:ee};const te=_.computeFrenetFrames(J,ee);this.tangents=te.tangents,this.normals=te.normals,this.binormals=te.binormals;const ne=new Vector3,ie=new Vector3,re=new Vector2;let oe=new Vector3;const se=[],ae=[],le=[],ue=[];de(),this.setIndex(ue),this.setAttribute("position",new Float32BufferAttribute(se,3)),this.setAttribute("normal",new Float32BufferAttribute(ae,3)),this.setAttribute("uv",new Float32BufferAttribute(le,2));function de(){for(let ye=0;ye<J;ye++)pe(ye);pe(ee===!1?J:0),_e(),fe()}function pe(ye){oe=_.getPointAt(ye/J,oe);const be=te.normals[ye],Ae=te.binormals[ye];for(let Ce=0;Ce<=Q;Ce++){const Ee=Ce/Q*Math.PI*2,Re=Math.sin(Ee),Te=-Math.cos(Ee);ie.x=Te*be.x+Re*Ae.x,ie.y=Te*be.y+Re*Ae.y,ie.z=Te*be.z+Re*Ae.z,ie.normalize(),ae.push(ie.x,ie.y,ie.z),ne.x=oe.x+Z*ie.x,ne.y=oe.y+Z*ie.y,ne.z=oe.z+Z*ie.z,se.push(ne.x,ne.y,ne.z)}}function fe(){for(let ye=1;ye<=J;ye++)for(let be=1;be<=Q;be++){const Ae=(Q+1)*(ye-1)+(be-1),Ce=(Q+1)*ye+(be-1),Ee=(Q+1)*ye+be,Re=(Q+1)*(ye-1)+be;ue.push(Ae,Ce,Re),ue.push(Ce,Ee,Re)}}function _e(){for(let ye=0;ye<=J;ye++)for(let be=0;be<=Q;be++)re.x=ye/J,re.y=be/Q,le.push(re.x,re.y)}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}toJSON(){const _=super.toJSON();return _.path=this.parameters.path.toJSON(),_}static fromJSON(_){return new TubeGeometry(new Curves[_.path.type]().fromJSON(_.path),_.tubularSegments,_.radius,_.radialSegments,_.closed)}}class WireframeGeometry extends BufferGeometry{constructor(_=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:_},_!==null){const J=[],Z=new Set,Q=new Vector3,ee=new Vector3;if(_.index!==null){const te=_.attributes.position,ne=_.index;let ie=_.groups;ie.length===0&&(ie=[{start:0,count:ne.count,materialIndex:0}]);for(let re=0,oe=ie.length;re<oe;++re){const se=ie[re],ae=se.start,le=se.count;for(let ue=ae,de=ae+le;ue<de;ue+=3)for(let pe=0;pe<3;pe++){const fe=ne.getX(ue+pe),_e=ne.getX(ue+(pe+1)%3);Q.fromBufferAttribute(te,fe),ee.fromBufferAttribute(te,_e),isUniqueEdge(Q,ee,Z)===!0&&(J.push(Q.x,Q.y,Q.z),J.push(ee.x,ee.y,ee.z))}}}else{const te=_.attributes.position;for(let ne=0,ie=te.count/3;ne<ie;ne++)for(let re=0;re<3;re++){const oe=3*ne+re,se=3*ne+(re+1)%3;Q.fromBufferAttribute(te,oe),ee.fromBufferAttribute(te,se),isUniqueEdge(Q,ee,Z)===!0&&(J.push(Q.x,Q.y,Q.z),J.push(ee.x,ee.y,ee.z))}}this.setAttribute("position",new Float32BufferAttribute(J,3))}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}}function isUniqueEdge(G,_,J){const Z=`${G.x},${G.y},${G.z}-${_.x},${_.y},${_.z}`,Q=`${_.x},${_.y},${_.z}-${G.x},${G.y},${G.z}`;return J.has(Z)===!0||J.has(Q)===!0?!1:(J.add(Z),J.add(Q),!0)}var Geometries=Object.freeze({__proto__:null,BoxGeometry,CapsuleGeometry,CircleGeometry,ConeGeometry,CylinderGeometry,DodecahedronGeometry,EdgesGeometry,ExtrudeGeometry,IcosahedronGeometry,LatheGeometry,OctahedronGeometry,PlaneGeometry,PolyhedronGeometry,RingGeometry,ShapeGeometry,SphereGeometry,TetrahedronGeometry,TorusGeometry,TorusKnotGeometry,TubeGeometry,WireframeGeometry});class ShadowMaterial extends Material{constructor(_){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.fog=_.fog,this}}class RawShaderMaterial extends ShaderMaterial{constructor(_){super(_),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class MeshStandardMaterial extends Material{constructor(_){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.defines={STANDARD:""},this.color.copy(_.color),this.roughness=_.roughness,this.metalness=_.metalness,this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.roughnessMap=_.roughnessMap,this.metalnessMap=_.metalnessMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.envMapRotation.copy(_.envMapRotation),this.envMapIntensity=_.envMapIntensity,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.flatShading=_.flatShading,this.fog=_.fog,this}}class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(_){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp$1(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(J){this.ior=(1+.4*J)/(1-.4*J)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Color(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Color(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(_)}get anisotropy(){return this._anisotropy}set anisotropy(_){this._anisotropy>0!=_>0&&this.version++,this._anisotropy=_}get clearcoat(){return this._clearcoat}set clearcoat(_){this._clearcoat>0!=_>0&&this.version++,this._clearcoat=_}get iridescence(){return this._iridescence}set iridescence(_){this._iridescence>0!=_>0&&this.version++,this._iridescence=_}get dispersion(){return this._dispersion}set dispersion(_){this._dispersion>0!=_>0&&this.version++,this._dispersion=_}get sheen(){return this._sheen}set sheen(_){this._sheen>0!=_>0&&this.version++,this._sheen=_}get transmission(){return this._transmission}set transmission(_){this._transmission>0!=_>0&&this.version++,this._transmission=_}copy(_){return super.copy(_),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=_.anisotropy,this.anisotropyRotation=_.anisotropyRotation,this.anisotropyMap=_.anisotropyMap,this.clearcoat=_.clearcoat,this.clearcoatMap=_.clearcoatMap,this.clearcoatRoughness=_.clearcoatRoughness,this.clearcoatRoughnessMap=_.clearcoatRoughnessMap,this.clearcoatNormalMap=_.clearcoatNormalMap,this.clearcoatNormalScale.copy(_.clearcoatNormalScale),this.dispersion=_.dispersion,this.ior=_.ior,this.iridescence=_.iridescence,this.iridescenceMap=_.iridescenceMap,this.iridescenceIOR=_.iridescenceIOR,this.iridescenceThicknessRange=[..._.iridescenceThicknessRange],this.iridescenceThicknessMap=_.iridescenceThicknessMap,this.sheen=_.sheen,this.sheenColor.copy(_.sheenColor),this.sheenColorMap=_.sheenColorMap,this.sheenRoughness=_.sheenRoughness,this.sheenRoughnessMap=_.sheenRoughnessMap,this.transmission=_.transmission,this.transmissionMap=_.transmissionMap,this.thickness=_.thickness,this.thicknessMap=_.thicknessMap,this.attenuationDistance=_.attenuationDistance,this.attenuationColor.copy(_.attenuationColor),this.specularIntensity=_.specularIntensity,this.specularIntensityMap=_.specularIntensityMap,this.specularColor.copy(_.specularColor),this.specularColorMap=_.specularColorMap,this}}class MeshPhongMaterial extends Material{constructor(_){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.specular.copy(_.specular),this.shininess=_.shininess,this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.specularMap=_.specularMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.envMapRotation.copy(_.envMapRotation),this.combine=_.combine,this.reflectivity=_.reflectivity,this.refractionRatio=_.refractionRatio,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.flatShading=_.flatShading,this.fog=_.fog,this}}class MeshToonMaterial extends Material{constructor(_){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.gradientMap=_.gradientMap,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.alphaMap=_.alphaMap,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.fog=_.fog,this}}class MeshNormalMaterial extends Material{constructor(_){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(_)}copy(_){return super.copy(_),this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.flatShading=_.flatShading,this}}class MeshLambertMaterial extends Material{constructor(_){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.specularMap=_.specularMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.envMapRotation.copy(_.envMapRotation),this.combine=_.combine,this.reflectivity=_.reflectivity,this.refractionRatio=_.refractionRatio,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.flatShading=_.flatShading,this.fog=_.fog,this}}class MeshDepthMaterial extends Material{constructor(_){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(_)}copy(_){return super.copy(_),this.depthPacking=_.depthPacking,this.map=_.map,this.alphaMap=_.alphaMap,this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(_){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(_)}copy(_){return super.copy(_),this.map=_.map,this.alphaMap=_.alphaMap,this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this}}class MeshMatcapMaterial extends Material{constructor(_){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.defines={MATCAP:""},this.color.copy(_.color),this.matcap=_.matcap,this.map=_.map,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.alphaMap=_.alphaMap,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.flatShading=_.flatShading,this.fog=_.fog,this}}class LineDashedMaterial extends LineBasicMaterial{constructor(_){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(_)}copy(_){return super.copy(_),this.scale=_.scale,this.dashSize=_.dashSize,this.gapSize=_.gapSize,this}}function convertArray(G,_){return!G||G.constructor===_?G:typeof _.BYTES_PER_ELEMENT=="number"?new _(G):Array.prototype.slice.call(G)}function isTypedArray(G){return ArrayBuffer.isView(G)&&!(G instanceof DataView)}function getKeyframeOrder(G){function _(Q,ee){return G[Q]-G[ee]}const J=G.length,Z=new Array(J);for(let Q=0;Q!==J;++Q)Z[Q]=Q;return Z.sort(_),Z}function sortedArray(G,_,J){const Z=G.length,Q=new G.constructor(Z);for(let ee=0,te=0;te!==Z;++ee){const ne=J[ee]*_;for(let ie=0;ie!==_;++ie)Q[te++]=G[ne+ie]}return Q}function flattenJSON(G,_,J,Z){let Q=1,ee=G[0];for(;ee!==void 0&&ee[Z]===void 0;)ee=G[Q++];if(ee===void 0)return;let te=ee[Z];if(te!==void 0)if(Array.isArray(te))do te=ee[Z],te!==void 0&&(_.push(ee.time),J.push(...te)),ee=G[Q++];while(ee!==void 0);else if(te.toArray!==void 0)do te=ee[Z],te!==void 0&&(_.push(ee.time),te.toArray(J,J.length)),ee=G[Q++];while(ee!==void 0);else do te=ee[Z],te!==void 0&&(_.push(ee.time),J.push(te)),ee=G[Q++];while(ee!==void 0)}function subclip(G,_,J,Z,Q=30){const ee=G.clone();ee.name=_;const te=[];for(let ie=0;ie<ee.tracks.length;++ie){const re=ee.tracks[ie],oe=re.getValueSize(),se=[],ae=[];for(let le=0;le<re.times.length;++le){const ue=re.times[le]*Q;if(!(ue<J||ue>=Z)){se.push(re.times[le]);for(let de=0;de<oe;++de)ae.push(re.values[le*oe+de])}}se.length!==0&&(re.times=convertArray(se,re.times.constructor),re.values=convertArray(ae,re.values.constructor),te.push(re))}ee.tracks=te;let ne=1/0;for(let ie=0;ie<ee.tracks.length;++ie)ne>ee.tracks[ie].times[0]&&(ne=ee.tracks[ie].times[0]);for(let ie=0;ie<ee.tracks.length;++ie)ee.tracks[ie].shift(-1*ne);return ee.resetDuration(),ee}function makeClipAdditive(G,_=0,J=G,Z=30){Z<=0&&(Z=30);const Q=J.tracks.length,ee=_/Z;for(let te=0;te<Q;++te){const ne=J.tracks[te],ie=ne.ValueTypeName;if(ie==="bool"||ie==="string")continue;const re=G.tracks.find(function(fe){return fe.name===ne.name&&fe.ValueTypeName===ie});if(re===void 0)continue;let oe=0;const se=ne.getValueSize();ne.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(oe=se/3);let ae=0;const le=re.getValueSize();re.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(ae=le/3);const ue=ne.times.length-1;let de;if(ee<=ne.times[0]){const fe=oe,_e=se-oe;de=ne.values.slice(fe,_e)}else if(ee>=ne.times[ue]){const fe=ue*se+oe,_e=fe+se-oe;de=ne.values.slice(fe,_e)}else{const fe=ne.createInterpolant(),_e=oe,ye=se-oe;fe.evaluate(ee),de=fe.resultBuffer.slice(_e,ye)}ie==="quaternion"&&new Quaternion().fromArray(de).normalize().conjugate().toArray(de);const pe=re.times.length;for(let fe=0;fe<pe;++fe){const _e=fe*le+ae;if(ie==="quaternion")Quaternion.multiplyQuaternionsFlat(re.values,_e,de,0,re.values,_e);else{const ye=le-ae*2;for(let be=0;be<ye;++be)re.values[_e+be]-=de[be]}}}return G.blendMode=AdditiveAnimationBlendMode,G}class AnimationUtils{static convertArray(_,J){return convertArray(_,J)}static isTypedArray(_){return isTypedArray(_)}static getKeyframeOrder(_){return getKeyframeOrder(_)}static sortedArray(_,J,Z){return sortedArray(_,J,Z)}static flattenJSON(_,J,Z,Q){flattenJSON(_,J,Z,Q)}static subclip(_,J,Z,Q,ee=30){return subclip(_,J,Z,Q,ee)}static makeClipAdditive(_,J=0,Z=_,Q=30){return makeClipAdditive(_,J,Z,Q)}}class Interpolant{constructor(_,J,Z,Q){this.parameterPositions=_,this._cachedIndex=0,this.resultBuffer=Q!==void 0?Q:new J.constructor(Z),this.sampleValues=J,this.valueSize=Z,this.settings=null,this.DefaultSettings_={}}evaluate(_){const J=this.parameterPositions;let Z=this._cachedIndex,Q=J[Z],ee=J[Z-1];e:{t:{let te;i:{n:if(!(_<Q)){for(let ne=Z+2;;){if(Q===void 0){if(_<ee)break n;return Z=J.length,this._cachedIndex=Z,this.copySampleValue_(Z-1)}if(Z===ne)break;if(ee=Q,Q=J[++Z],_<Q)break t}te=J.length;break i}if(!(_>=ee)){const ne=J[1];_<ne&&(Z=2,ee=ne);for(let ie=Z-2;;){if(ee===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(Z===ie)break;if(Q=ee,ee=J[--Z-1],_>=ee)break t}te=Z,Z=0;break i}break e}for(;Z<te;){const ne=Z+te>>>1;_<J[ne]?te=ne:Z=ne+1}if(Q=J[Z],ee=J[Z-1],ee===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(Q===void 0)return Z=J.length,this._cachedIndex=Z,this.copySampleValue_(Z-1)}this._cachedIndex=Z,this.intervalChanged_(Z,ee,Q)}return this.interpolate_(Z,ee,_,Q)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(_){const J=this.resultBuffer,Z=this.sampleValues,Q=this.valueSize,ee=_*Q;for(let te=0;te!==Q;++te)J[te]=Z[ee+te];return J}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor(_,J,Z,Q){super(_,J,Z,Q),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding}}intervalChanged_(_,J,Z){const Q=this.parameterPositions;let ee=_-2,te=_+1,ne=Q[ee],ie=Q[te];if(ne===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:ee=_,ne=2*J-Z;break;case WrapAroundEnding:ee=Q.length-2,ne=J+Q[ee]-Q[ee+1];break;default:ee=_,ne=Z}if(ie===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:te=_,ie=2*Z-J;break;case WrapAroundEnding:te=1,ie=Z+Q[1]-Q[0];break;default:te=_-1,ie=J}const re=(Z-J)*.5,oe=this.valueSize;this._weightPrev=re/(J-ne),this._weightNext=re/(ie-Z),this._offsetPrev=ee*oe,this._offsetNext=te*oe}interpolate_(_,J,Z,Q){const ee=this.resultBuffer,te=this.sampleValues,ne=this.valueSize,ie=_*ne,re=ie-ne,oe=this._offsetPrev,se=this._offsetNext,ae=this._weightPrev,le=this._weightNext,ue=(Z-J)/(Q-J),de=ue*ue,pe=de*ue,fe=-ae*pe+2*ae*de-ae*ue,_e=(1+ae)*pe+(-1.5-2*ae)*de+(-.5+ae)*ue+1,ye=(-1-le)*pe+(1.5+le)*de+.5*ue,be=le*pe-le*de;for(let Ae=0;Ae!==ne;++Ae)ee[Ae]=fe*te[oe+Ae]+_e*te[re+Ae]+ye*te[ie+Ae]+be*te[se+Ae];return ee}}class LinearInterpolant extends Interpolant{constructor(_,J,Z,Q){super(_,J,Z,Q)}interpolate_(_,J,Z,Q){const ee=this.resultBuffer,te=this.sampleValues,ne=this.valueSize,ie=_*ne,re=ie-ne,oe=(Z-J)/(Q-J),se=1-oe;for(let ae=0;ae!==ne;++ae)ee[ae]=te[re+ae]*se+te[ie+ae]*oe;return ee}}class DiscreteInterpolant extends Interpolant{constructor(_,J,Z,Q){super(_,J,Z,Q)}interpolate_(_){return this.copySampleValue_(_-1)}}class KeyframeTrack{constructor(_,J,Z,Q){if(_===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(J===void 0||J.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+_);this.name=_,this.times=convertArray(J,this.TimeBufferType),this.values=convertArray(Z,this.ValueBufferType),this.setInterpolation(Q||this.DefaultInterpolation)}static toJSON(_){const J=_.constructor;let Z;if(J.toJSON!==this.toJSON)Z=J.toJSON(_);else{Z={name:_.name,times:convertArray(_.times,Array),values:convertArray(_.values,Array)};const Q=_.getInterpolation();Q!==_.DefaultInterpolation&&(Z.interpolation=Q)}return Z.type=_.ValueTypeName,Z}InterpolantFactoryMethodDiscrete(_){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),_)}InterpolantFactoryMethodLinear(_){return new LinearInterpolant(this.times,this.values,this.getValueSize(),_)}InterpolantFactoryMethodSmooth(_){return new CubicInterpolant(this.times,this.values,this.getValueSize(),_)}setInterpolation(_){let J;switch(_){case InterpolateDiscrete:J=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:J=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:J=this.InterpolantFactoryMethodSmooth;break}if(J===void 0){const Z="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(_!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(Z);return warn("KeyframeTrack:",Z),this}return this.createInterpolant=J,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}}getValueSize(){return this.values.length/this.times.length}shift(_){if(_!==0){const J=this.times;for(let Z=0,Q=J.length;Z!==Q;++Z)J[Z]+=_}return this}scale(_){if(_!==1){const J=this.times;for(let Z=0,Q=J.length;Z!==Q;++Z)J[Z]*=_}return this}trim(_,J){const Z=this.times,Q=Z.length;let ee=0,te=Q-1;for(;ee!==Q&&Z[ee]<_;)++ee;for(;te!==-1&&Z[te]>J;)--te;if(++te,ee!==0||te!==Q){ee>=te&&(te=Math.max(te,1),ee=te-1);const ne=this.getValueSize();this.times=Z.slice(ee,te),this.values=this.values.slice(ee*ne,te*ne)}return this}validate(){let _=!0;const J=this.getValueSize();J-Math.floor(J)!==0&&(error("KeyframeTrack: Invalid value size in track.",this),_=!1);const Z=this.times,Q=this.values,ee=Z.length;ee===0&&(error("KeyframeTrack: Track is empty.",this),_=!1);let te=null;for(let ne=0;ne!==ee;ne++){const ie=Z[ne];if(typeof ie=="number"&&isNaN(ie)){error("KeyframeTrack: Time is not a valid number.",this,ne,ie),_=!1;break}if(te!==null&&te>ie){error("KeyframeTrack: Out of order keys.",this,ne,ie,te),_=!1;break}te=ie}if(Q!==void 0&&isTypedArray(Q))for(let ne=0,ie=Q.length;ne!==ie;++ne){const re=Q[ne];if(isNaN(re)){error("KeyframeTrack: Value is not a valid number.",this,ne,re),_=!1;break}}return _}optimize(){const _=this.times.slice(),J=this.values.slice(),Z=this.getValueSize(),Q=this.getInterpolation()===InterpolateSmooth,ee=_.length-1;let te=1;for(let ne=1;ne<ee;++ne){let ie=!1;const re=_[ne],oe=_[ne+1];if(re!==oe&&(ne!==1||re!==_[0]))if(Q)ie=!0;else{const se=ne*Z,ae=se-Z,le=se+Z;for(let ue=0;ue!==Z;++ue){const de=J[se+ue];if(de!==J[ae+ue]||de!==J[le+ue]){ie=!0;break}}}if(ie){if(ne!==te){_[te]=_[ne];const se=ne*Z,ae=te*Z;for(let le=0;le!==Z;++le)J[ae+le]=J[se+le]}++te}}if(ee>0){_[te]=_[ee];for(let ne=ee*Z,ie=te*Z,re=0;re!==Z;++re)J[ie+re]=J[ne+re];++te}return te!==_.length?(this.times=_.slice(0,te),this.values=J.slice(0,te*Z)):(this.times=_,this.values=J),this}clone(){const _=this.times.slice(),J=this.values.slice(),Z=this.constructor,Q=new Z(this.name,_,J);return Q.createInterpolant=this.createInterpolant,Q}}KeyframeTrack.prototype.ValueTypeName="";KeyframeTrack.prototype.TimeBufferType=Float32Array;KeyframeTrack.prototype.ValueBufferType=Float32Array;KeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;class BooleanKeyframeTrack extends KeyframeTrack{constructor(_,J,Z){super(_,J,Z)}}BooleanKeyframeTrack.prototype.ValueTypeName="bool";BooleanKeyframeTrack.prototype.ValueBufferType=Array;BooleanKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{constructor(_,J,Z,Q){super(_,J,Z,Q)}}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{constructor(_,J,Z,Q){super(_,J,Z,Q)}}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(_,J,Z,Q){super(_,J,Z,Q)}interpolate_(_,J,Z,Q){const ee=this.resultBuffer,te=this.sampleValues,ne=this.valueSize,ie=(Z-J)/(Q-J);let re=_*ne;for(let oe=re+ne;re!==oe;re+=4)Quaternion.slerpFlat(ee,0,te,re-ne,te,re,ie);return ee}}class QuaternionKeyframeTrack extends KeyframeTrack{constructor(_,J,Z,Q){super(_,J,Z,Q)}InterpolantFactoryMethodLinear(_){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),_)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion";QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{constructor(_,J,Z){super(_,J,Z)}}StringKeyframeTrack.prototype.ValueTypeName="string";StringKeyframeTrack.prototype.ValueBufferType=Array;StringKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{constructor(_,J,Z,Q){super(_,J,Z,Q)}}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(_="",J=-1,Z=[],Q=NormalAnimationBlendMode){this.name=_,this.tracks=Z,this.duration=J,this.blendMode=Q,this.uuid=generateUUID(),this.userData={},this.duration<0&&this.resetDuration()}static parse(_){const J=[],Z=_.tracks,Q=1/(_.fps||1);for(let te=0,ne=Z.length;te!==ne;++te)J.push(parseKeyframeTrack(Z[te]).scale(Q));const ee=new this(_.name,_.duration,J,_.blendMode);return ee.uuid=_.uuid,ee.userData=JSON.parse(_.userData||"{}"),ee}static toJSON(_){const J=[],Z=_.tracks,Q={name:_.name,duration:_.duration,tracks:J,uuid:_.uuid,blendMode:_.blendMode,userData:JSON.stringify(_.userData)};for(let ee=0,te=Z.length;ee!==te;++ee)J.push(KeyframeTrack.toJSON(Z[ee]));return Q}static CreateFromMorphTargetSequence(_,J,Z,Q){const ee=J.length,te=[];for(let ne=0;ne<ee;ne++){let ie=[],re=[];ie.push((ne+ee-1)%ee,ne,(ne+1)%ee),re.push(0,1,0);const oe=getKeyframeOrder(ie);ie=sortedArray(ie,1,oe),re=sortedArray(re,1,oe),!Q&&ie[0]===0&&(ie.push(ee),re.push(re[0])),te.push(new NumberKeyframeTrack(".morphTargetInfluences["+J[ne].name+"]",ie,re).scale(1/Z))}return new this(_,-1,te)}static findByName(_,J){let Z=_;if(!Array.isArray(_)){const Q=_;Z=Q.geometry&&Q.geometry.animations||Q.animations}for(let Q=0;Q<Z.length;Q++)if(Z[Q].name===J)return Z[Q];return null}static CreateClipsFromMorphTargetSequences(_,J,Z){const Q={},ee=/^([\w-]*?)([\d]+)$/;for(let ne=0,ie=_.length;ne<ie;ne++){const re=_[ne],oe=re.name.match(ee);if(oe&&oe.length>1){const se=oe[1];let ae=Q[se];ae||(Q[se]=ae=[]),ae.push(re)}}const te=[];for(const ne in Q)te.push(this.CreateFromMorphTargetSequence(ne,Q[ne],J,Z));return te}static parseAnimation(_,J){if(warn("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!_)return error("AnimationClip: No animation in JSONLoader data."),null;const Z=function(se,ae,le,ue,de){if(le.length!==0){const pe=[],fe=[];flattenJSON(le,pe,fe,ue),pe.length!==0&&de.push(new se(ae,pe,fe))}},Q=[],ee=_.name||"default",te=_.fps||30,ne=_.blendMode;let ie=_.length||-1;const re=_.hierarchy||[];for(let se=0;se<re.length;se++){const ae=re[se].keys;if(!(!ae||ae.length===0))if(ae[0].morphTargets){const le={};let ue;for(ue=0;ue<ae.length;ue++)if(ae[ue].morphTargets)for(let de=0;de<ae[ue].morphTargets.length;de++)le[ae[ue].morphTargets[de]]=-1;for(const de in le){const pe=[],fe=[];for(let _e=0;_e!==ae[ue].morphTargets.length;++_e){const ye=ae[ue];pe.push(ye.time),fe.push(ye.morphTarget===de?1:0)}Q.push(new NumberKeyframeTrack(".morphTargetInfluence["+de+"]",pe,fe))}ie=le.length*te}else{const le=".bones["+J[se].name+"]";Z(VectorKeyframeTrack,le+".position",ae,"pos",Q),Z(QuaternionKeyframeTrack,le+".quaternion",ae,"rot",Q),Z(VectorKeyframeTrack,le+".scale",ae,"scl",Q)}}return Q.length===0?null:new this(ee,ie,Q,ne)}resetDuration(){const _=this.tracks;let J=0;for(let Z=0,Q=_.length;Z!==Q;++Z){const ee=this.tracks[Z];J=Math.max(J,ee.times[ee.times.length-1])}return this.duration=J,this}trim(){for(let _=0;_<this.tracks.length;_++)this.tracks[_].trim(0,this.duration);return this}validate(){let _=!0;for(let J=0;J<this.tracks.length;J++)_=_&&this.tracks[J].validate();return _}optimize(){for(let _=0;_<this.tracks.length;_++)this.tracks[_].optimize();return this}clone(){const _=[];for(let Z=0;Z<this.tracks.length;Z++)_.push(this.tracks[Z].clone());const J=new this.constructor(this.name,this.duration,_,this.blendMode);return J.userData=JSON.parse(JSON.stringify(this.userData)),J}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName(G){switch(G.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+G)}function parseKeyframeTrack(G){if(G.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const _=getTrackTypeForValueTypeName(G.type);if(G.times===void 0){const J=[],Z=[];flattenJSON(G.keys,J,Z,"value"),G.times=J,G.values=Z}return _.parse!==void 0?_.parse(G):new _(G.name,G.times,G.values,G.interpolation)}const Cache={enabled:!1,files:{},add:function(G,_){this.enabled!==!1&&(this.files[G]=_)},get:function(G){if(this.enabled!==!1)return this.files[G]},remove:function(G){delete this.files[G]},clear:function(){this.files={}}};class LoadingManager{constructor(_,J,Z){const Q=this;let ee=!1,te=0,ne=0,ie;const re=[];this.onStart=void 0,this.onLoad=_,this.onProgress=J,this.onError=Z,this._abortController=null,this.itemStart=function(oe){ne++,ee===!1&&Q.onStart!==void 0&&Q.onStart(oe,te,ne),ee=!0},this.itemEnd=function(oe){te++,Q.onProgress!==void 0&&Q.onProgress(oe,te,ne),te===ne&&(ee=!1,Q.onLoad!==void 0&&Q.onLoad())},this.itemError=function(oe){Q.onError!==void 0&&Q.onError(oe)},this.resolveURL=function(oe){return ie?ie(oe):oe},this.setURLModifier=function(oe){return ie=oe,this},this.addHandler=function(oe,se){return re.push(oe,se),this},this.removeHandler=function(oe){const se=re.indexOf(oe);return se!==-1&&re.splice(se,2),this},this.getHandler=function(oe){for(let se=0,ae=re.length;se<ae;se+=2){const le=re[se],ue=re[se+1];if(le.global&&(le.lastIndex=0),le.test(oe))return ue}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const DefaultLoadingManager=new LoadingManager;class Loader{constructor(_){this.manager=_!==void 0?_:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(_,J){const Z=this;return new Promise(function(Q,ee){Z.load(_,Q,J,ee)})}parse(){}setCrossOrigin(_){return this.crossOrigin=_,this}setWithCredentials(_){return this.withCredentials=_,this}setPath(_){return this.path=_,this}setResourcePath(_){return this.resourcePath=_,this}setRequestHeader(_){return this.requestHeader=_,this}abort(){return this}}Loader.DEFAULT_MATERIAL_NAME="__DEFAULT";const loading={};class HttpError extends Error{constructor(_,J){super(_),this.response=J}}class FileLoader extends Loader{constructor(_){super(_),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(_,J,Z,Q){_===void 0&&(_=""),this.path!==void 0&&(_=this.path+_),_=this.manager.resolveURL(_);const ee=Cache.get(`file:${_}`);if(ee!==void 0)return this.manager.itemStart(_),setTimeout(()=>{J&&J(ee),this.manager.itemEnd(_)},0),ee;if(loading[_]!==void 0){loading[_].push({onLoad:J,onProgress:Z,onError:Q});return}loading[_]=[],loading[_].push({onLoad:J,onProgress:Z,onError:Q});const te=new Request(_,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),ne=this.mimeType,ie=this.responseType;fetch(te).then(re=>{if(re.status===200||re.status===0){if(re.status===0&&warn("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||re.body===void 0||re.body.getReader===void 0)return re;const oe=loading[_],se=re.body.getReader(),ae=re.headers.get("X-File-Size")||re.headers.get("Content-Length"),le=ae?parseInt(ae):0,ue=le!==0;let de=0;const pe=new ReadableStream({start(fe){_e();function _e(){se.read().then(({done:ye,value:be})=>{if(ye)fe.close();else{de+=be.byteLength;const Ae=new ProgressEvent("progress",{lengthComputable:ue,loaded:de,total:le});for(let Ce=0,Ee=oe.length;Ce<Ee;Ce++){const Re=oe[Ce];Re.onProgress&&Re.onProgress(Ae)}fe.enqueue(be),_e()}},ye=>{fe.error(ye)})}}});return new Response(pe)}else throw new HttpError(`fetch for "${re.url}" responded with ${re.status}: ${re.statusText}`,re)}).then(re=>{switch(ie){case"arraybuffer":return re.arrayBuffer();case"blob":return re.blob();case"document":return re.text().then(oe=>new DOMParser().parseFromString(oe,ne));case"json":return re.json();default:if(ne==="")return re.text();{const se=/charset="?([^;"\s]*)"?/i.exec(ne),ae=se&&se[1]?se[1].toLowerCase():void 0,le=new TextDecoder(ae);return re.arrayBuffer().then(ue=>le.decode(ue))}}}).then(re=>{Cache.add(`file:${_}`,re);const oe=loading[_];delete loading[_];for(let se=0,ae=oe.length;se<ae;se++){const le=oe[se];le.onLoad&&le.onLoad(re)}}).catch(re=>{const oe=loading[_];if(oe===void 0)throw this.manager.itemError(_),re;delete loading[_];for(let se=0,ae=oe.length;se<ae;se++){const le=oe[se];le.onError&&le.onError(re)}this.manager.itemError(_)}).finally(()=>{this.manager.itemEnd(_)}),this.manager.itemStart(_)}setResponseType(_){return this.responseType=_,this}setMimeType(_){return this.mimeType=_,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class AnimationLoader extends Loader{constructor(_){super(_)}load(_,J,Z,Q){const ee=this,te=new FileLoader(this.manager);te.setPath(this.path),te.setRequestHeader(this.requestHeader),te.setWithCredentials(this.withCredentials),te.load(_,function(ne){try{J(ee.parse(JSON.parse(ne)))}catch(ie){Q?Q(ie):error(ie),ee.manager.itemError(_)}},Z,Q)}parse(_){const J=[];for(let Z=0;Z<_.length;Z++){const Q=AnimationClip.parse(_[Z]);J.push(Q)}return J}}class CompressedTextureLoader extends Loader{constructor(_){super(_)}load(_,J,Z,Q){const ee=this,te=[],ne=new CompressedTexture,ie=new FileLoader(this.manager);ie.setPath(this.path),ie.setResponseType("arraybuffer"),ie.setRequestHeader(this.requestHeader),ie.setWithCredentials(ee.withCredentials);let re=0;function oe(se){ie.load(_[se],function(ae){const le=ee.parse(ae,!0);te[se]={width:le.width,height:le.height,format:le.format,mipmaps:le.mipmaps},re+=1,re===6&&(le.mipmapCount===1&&(ne.minFilter=LinearFilter),ne.image=te,ne.format=le.format,ne.needsUpdate=!0,J&&J(ne))},Z,Q)}if(Array.isArray(_))for(let se=0,ae=_.length;se<ae;++se)oe(se);else ie.load(_,function(se){const ae=ee.parse(se,!0);if(ae.isCubemap){const le=ae.mipmaps.length/ae.mipmapCount;for(let ue=0;ue<le;ue++){te[ue]={mipmaps:[]};for(let de=0;de<ae.mipmapCount;de++)te[ue].mipmaps.push(ae.mipmaps[ue*ae.mipmapCount+de]),te[ue].format=ae.format,te[ue].width=ae.width,te[ue].height=ae.height}ne.image=te}else ne.image.width=ae.width,ne.image.height=ae.height,ne.mipmaps=ae.mipmaps;ae.mipmapCount===1&&(ne.minFilter=LinearFilter),ne.format=ae.format,ne.needsUpdate=!0,J&&J(ne)},Z,Q);return ne}}const _loading=new WeakMap;class ImageLoader extends Loader{constructor(_){super(_)}load(_,J,Z,Q){this.path!==void 0&&(_=this.path+_),_=this.manager.resolveURL(_);const ee=this,te=Cache.get(`image:${_}`);if(te!==void 0){if(te.complete===!0)ee.manager.itemStart(_),setTimeout(function(){J&&J(te),ee.manager.itemEnd(_)},0);else{let se=_loading.get(te);se===void 0&&(se=[],_loading.set(te,se)),se.push({onLoad:J,onError:Q})}return te}const ne=createElementNS("img");function ie(){oe(),J&&J(this);const se=_loading.get(this)||[];for(let ae=0;ae<se.length;ae++){const le=se[ae];le.onLoad&&le.onLoad(this)}_loading.delete(this),ee.manager.itemEnd(_)}function re(se){oe(),Q&&Q(se),Cache.remove(`image:${_}`);const ae=_loading.get(this)||[];for(let le=0;le<ae.length;le++){const ue=ae[le];ue.onError&&ue.onError(se)}_loading.delete(this),ee.manager.itemError(_),ee.manager.itemEnd(_)}function oe(){ne.removeEventListener("load",ie,!1),ne.removeEventListener("error",re,!1)}return ne.addEventListener("load",ie,!1),ne.addEventListener("error",re,!1),_.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(ne.crossOrigin=this.crossOrigin),Cache.add(`image:${_}`,ne),ee.manager.itemStart(_),ne.src=_,ne}}class CubeTextureLoader extends Loader{constructor(_){super(_)}load(_,J,Z,Q){const ee=new CubeTexture;ee.colorSpace=SRGBColorSpace;const te=new ImageLoader(this.manager);te.setCrossOrigin(this.crossOrigin),te.setPath(this.path);let ne=0;function ie(re){te.load(_[re],function(oe){ee.images[re]=oe,ne++,ne===6&&(ee.needsUpdate=!0,J&&J(ee))},void 0,Q)}for(let re=0;re<_.length;++re)ie(re);return ee}}class DataTextureLoader extends Loader{constructor(_){super(_)}load(_,J,Z,Q){const ee=this,te=new DataTexture,ne=new FileLoader(this.manager);return ne.setResponseType("arraybuffer"),ne.setRequestHeader(this.requestHeader),ne.setPath(this.path),ne.setWithCredentials(ee.withCredentials),ne.load(_,function(ie){let re;try{re=ee.parse(ie)}catch(oe){if(Q!==void 0)Q(oe);else{oe(oe);return}}re.image!==void 0?te.image=re.image:re.data!==void 0&&(te.image.width=re.width,te.image.height=re.height,te.image.data=re.data),te.wrapS=re.wrapS!==void 0?re.wrapS:ClampToEdgeWrapping,te.wrapT=re.wrapT!==void 0?re.wrapT:ClampToEdgeWrapping,te.magFilter=re.magFilter!==void 0?re.magFilter:LinearFilter,te.minFilter=re.minFilter!==void 0?re.minFilter:LinearFilter,te.anisotropy=re.anisotropy!==void 0?re.anisotropy:1,re.colorSpace!==void 0&&(te.colorSpace=re.colorSpace),re.flipY!==void 0&&(te.flipY=re.flipY),re.format!==void 0&&(te.format=re.format),re.type!==void 0&&(te.type=re.type),re.mipmaps!==void 0&&(te.mipmaps=re.mipmaps,te.minFilter=LinearMipmapLinearFilter),re.mipmapCount===1&&(te.minFilter=LinearFilter),re.generateMipmaps!==void 0&&(te.generateMipmaps=re.generateMipmaps),te.needsUpdate=!0,J&&J(te,re)},Z,Q),te}}class TextureLoader extends Loader{constructor(_){super(_)}load(_,J,Z,Q){const ee=new Texture,te=new ImageLoader(this.manager);return te.setCrossOrigin(this.crossOrigin),te.setPath(this.path),te.load(_,function(ne){ee.image=ne,ee.needsUpdate=!0,J!==void 0&&J(ee)},Z,Q),ee}}class Light extends Object3D{constructor(_,J=1){super(),this.isLight=!0,this.type="Light",this.color=new Color(_),this.intensity=J}dispose(){}copy(_,J){return super.copy(_,J),this.color.copy(_.color),this.intensity=_.intensity,this}toJSON(_){const J=super.toJSON(_);return J.object.color=this.color.getHex(),J.object.intensity=this.intensity,this.groundColor!==void 0&&(J.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(J.object.distance=this.distance),this.angle!==void 0&&(J.object.angle=this.angle),this.decay!==void 0&&(J.object.decay=this.decay),this.penumbra!==void 0&&(J.object.penumbra=this.penumbra),this.shadow!==void 0&&(J.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(J.object.target=this.target.uuid),J}}class HemisphereLight extends Light{constructor(_,J,Z){super(_,Z),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Color(J)}copy(_,J){return super.copy(_,J),this.groundColor.copy(_.groundColor),this}}const _projScreenMatrix$1=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(_){this.camera=_,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.mapType=UnsignedByteType,this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(_){const J=this.camera,Z=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(_.matrixWorld),J.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(_.target.matrixWorld),J.lookAt(_lookTarget$1),J.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(J.projectionMatrix,J.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1,J.coordinateSystem,J.reversedDepth),J.reversedDepth?Z.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):Z.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),Z.multiply(_projScreenMatrix$1)}getViewport(_){return this._viewports[_]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(_){return this.camera=_.camera.clone(),this.intensity=_.intensity,this.bias=_.bias,this.radius=_.radius,this.autoUpdate=_.autoUpdate,this.needsUpdate=_.needsUpdate,this.normalBias=_.normalBias,this.blurSamples=_.blurSamples,this.mapSize.copy(_.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const _={};return this.intensity!==1&&(_.intensity=this.intensity),this.bias!==0&&(_.bias=this.bias),this.normalBias!==0&&(_.normalBias=this.normalBias),this.radius!==1&&(_.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(_.mapSize=this.mapSize.toArray()),_.camera=this.camera.toJSON(!1).object,delete _.camera.matrix,_}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(_){const J=this.camera,Z=RAD2DEG*2*_.angle*this.focus,Q=this.mapSize.width/this.mapSize.height*this.aspect,ee=_.distance||J.far;(Z!==J.fov||Q!==J.aspect||ee!==J.far)&&(J.fov=Z,J.aspect=Q,J.far=ee,J.updateProjectionMatrix()),super.updateMatrices(_)}copy(_){return super.copy(_),this.focus=_.focus,this}}class SpotLight extends Light{constructor(_,J,Z=0,Q=Math.PI/3,ee=0,te=2){super(_,J),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.distance=Z,this.angle=Q,this.penumbra=ee,this.decay=te,this.map=null,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(_){this.intensity=_/Math.PI}dispose(){this.shadow.dispose()}copy(_,J){return super.copy(_,J),this.distance=_.distance,this.angle=_.angle,this.penumbra=_.penumbra,this.decay=_.decay,this.target=_.target.clone(),this.shadow=_.shadow.clone(),this}}const _projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(_,J=0){const Z=this.camera,Q=this.matrix,ee=_.distance||Z.far;ee!==Z.far&&(Z.far=ee,Z.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(_.matrixWorld),Z.position.copy(_lightPositionWorld),_lookTarget.copy(Z.position),_lookTarget.add(this._cubeDirections[J]),Z.up.copy(this._cubeUps[J]),Z.lookAt(_lookTarget),Z.updateMatrixWorld(),Q.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(Z.projectionMatrix,Z.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix,Z.coordinateSystem,Z.reversedDepth)}}class PointLight extends Light{constructor(_,J,Z=0,Q=2){super(_,J),this.isPointLight=!0,this.type="PointLight",this.distance=Z,this.decay=Q,this.shadow=new PointLightShadow}get power(){return this.intensity*4*Math.PI}set power(_){this.intensity=_/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(_,J){return super.copy(_,J),this.distance=_.distance,this.decay=_.decay,this.shadow=_.shadow.clone(),this}}class OrthographicCamera extends Camera{constructor(_=-1,J=1,Z=1,Q=-1,ee=.1,te=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=_,this.right=J,this.top=Z,this.bottom=Q,this.near=ee,this.far=te,this.updateProjectionMatrix()}copy(_,J){return super.copy(_,J),this.left=_.left,this.right=_.right,this.top=_.top,this.bottom=_.bottom,this.near=_.near,this.far=_.far,this.zoom=_.zoom,this.view=_.view===null?null:Object.assign({},_.view),this}setViewOffset(_,J,Z,Q,ee,te){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=_,this.view.fullHeight=J,this.view.offsetX=Z,this.view.offsetY=Q,this.view.width=ee,this.view.height=te,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const _=(this.right-this.left)/(2*this.zoom),J=(this.top-this.bottom)/(2*this.zoom),Z=(this.right+this.left)/2,Q=(this.top+this.bottom)/2;let ee=Z-_,te=Z+_,ne=Q+J,ie=Q-J;if(this.view!==null&&this.view.enabled){const re=(this.right-this.left)/this.view.fullWidth/this.zoom,oe=(this.top-this.bottom)/this.view.fullHeight/this.zoom;ee+=re*this.view.offsetX,te=ee+re*this.view.width,ne-=oe*this.view.offsetY,ie=ne-oe*this.view.height}this.projectionMatrix.makeOrthographic(ee,te,ne,ie,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(_){const J=super.toJSON(_);return J.object.zoom=this.zoom,J.object.left=this.left,J.object.right=this.right,J.object.top=this.top,J.object.bottom=this.bottom,J.object.near=this.near,J.object.far=this.far,this.view!==null&&(J.object.view=Object.assign({},this.view)),J}}class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class DirectionalLight extends Light{constructor(_,J){super(_,J),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(_){return super.copy(_),this.target=_.target.clone(),this.shadow=_.shadow.clone(),this}}class AmbientLight extends Light{constructor(_,J){super(_,J),this.isAmbientLight=!0,this.type="AmbientLight"}}class RectAreaLight extends Light{constructor(_,J,Z=10,Q=10){super(_,J),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=Z,this.height=Q}get power(){return this.intensity*this.width*this.height*Math.PI}set power(_){this.intensity=_/(this.width*this.height*Math.PI)}copy(_){return super.copy(_),this.width=_.width,this.height=_.height,this}toJSON(_){const J=super.toJSON(_);return J.object.width=this.width,J.object.height=this.height,J}}class SphericalHarmonics3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let _=0;_<9;_++)this.coefficients.push(new Vector3)}set(_){for(let J=0;J<9;J++)this.coefficients[J].copy(_[J]);return this}zero(){for(let _=0;_<9;_++)this.coefficients[_].set(0,0,0);return this}getAt(_,J){const Z=_.x,Q=_.y,ee=_.z,te=this.coefficients;return J.copy(te[0]).multiplyScalar(.282095),J.addScaledVector(te[1],.488603*Q),J.addScaledVector(te[2],.488603*ee),J.addScaledVector(te[3],.488603*Z),J.addScaledVector(te[4],1.092548*(Z*Q)),J.addScaledVector(te[5],1.092548*(Q*ee)),J.addScaledVector(te[6],.315392*(3*ee*ee-1)),J.addScaledVector(te[7],1.092548*(Z*ee)),J.addScaledVector(te[8],.546274*(Z*Z-Q*Q)),J}getIrradianceAt(_,J){const Z=_.x,Q=_.y,ee=_.z,te=this.coefficients;return J.copy(te[0]).multiplyScalar(.886227),J.addScaledVector(te[1],2*.511664*Q),J.addScaledVector(te[2],2*.511664*ee),J.addScaledVector(te[3],2*.511664*Z),J.addScaledVector(te[4],2*.429043*Z*Q),J.addScaledVector(te[5],2*.429043*Q*ee),J.addScaledVector(te[6],.743125*ee*ee-.247708),J.addScaledVector(te[7],2*.429043*Z*ee),J.addScaledVector(te[8],.429043*(Z*Z-Q*Q)),J}add(_){for(let J=0;J<9;J++)this.coefficients[J].add(_.coefficients[J]);return this}addScaledSH(_,J){for(let Z=0;Z<9;Z++)this.coefficients[Z].addScaledVector(_.coefficients[Z],J);return this}scale(_){for(let J=0;J<9;J++)this.coefficients[J].multiplyScalar(_);return this}lerp(_,J){for(let Z=0;Z<9;Z++)this.coefficients[Z].lerp(_.coefficients[Z],J);return this}equals(_){for(let J=0;J<9;J++)if(!this.coefficients[J].equals(_.coefficients[J]))return!1;return!0}copy(_){return this.set(_.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(_,J=0){const Z=this.coefficients;for(let Q=0;Q<9;Q++)Z[Q].fromArray(_,J+Q*3);return this}toArray(_=[],J=0){const Z=this.coefficients;for(let Q=0;Q<9;Q++)Z[Q].toArray(_,J+Q*3);return _}static getBasisAt(_,J){const Z=_.x,Q=_.y,ee=_.z;J[0]=.282095,J[1]=.488603*Q,J[2]=.488603*ee,J[3]=.488603*Z,J[4]=1.092548*Z*Q,J[5]=1.092548*Q*ee,J[6]=.315392*(3*ee*ee-1),J[7]=1.092548*Z*ee,J[8]=.546274*(Z*Z-Q*Q)}}class LightProbe extends Light{constructor(_=new SphericalHarmonics3,J=1){super(void 0,J),this.isLightProbe=!0,this.sh=_}copy(_){return super.copy(_),this.sh.copy(_.sh),this}fromJSON(_){return this.intensity=_.intensity,this.sh.fromArray(_.sh),this}toJSON(_){const J=super.toJSON(_);return J.object.sh=this.sh.toArray(),J}}class MaterialLoader extends Loader{constructor(_){super(_),this.textures={}}load(_,J,Z,Q){const ee=this,te=new FileLoader(ee.manager);te.setPath(ee.path),te.setRequestHeader(ee.requestHeader),te.setWithCredentials(ee.withCredentials),te.load(_,function(ne){try{J(ee.parse(JSON.parse(ne)))}catch(ie){Q?Q(ie):error(ie),ee.manager.itemError(_)}},Z,Q)}parse(_){const J=this.textures;function Z(ee){return J[ee]===void 0&&warn("MaterialLoader: Undefined texture",ee),J[ee]}const Q=this.createMaterialFromType(_.type);if(_.uuid!==void 0&&(Q.uuid=_.uuid),_.name!==void 0&&(Q.name=_.name),_.color!==void 0&&Q.color!==void 0&&Q.color.setHex(_.color),_.roughness!==void 0&&(Q.roughness=_.roughness),_.metalness!==void 0&&(Q.metalness=_.metalness),_.sheen!==void 0&&(Q.sheen=_.sheen),_.sheenColor!==void 0&&(Q.sheenColor=new Color().setHex(_.sheenColor)),_.sheenRoughness!==void 0&&(Q.sheenRoughness=_.sheenRoughness),_.emissive!==void 0&&Q.emissive!==void 0&&Q.emissive.setHex(_.emissive),_.specular!==void 0&&Q.specular!==void 0&&Q.specular.setHex(_.specular),_.specularIntensity!==void 0&&(Q.specularIntensity=_.specularIntensity),_.specularColor!==void 0&&Q.specularColor!==void 0&&Q.specularColor.setHex(_.specularColor),_.shininess!==void 0&&(Q.shininess=_.shininess),_.clearcoat!==void 0&&(Q.clearcoat=_.clearcoat),_.clearcoatRoughness!==void 0&&(Q.clearcoatRoughness=_.clearcoatRoughness),_.dispersion!==void 0&&(Q.dispersion=_.dispersion),_.iridescence!==void 0&&(Q.iridescence=_.iridescence),_.iridescenceIOR!==void 0&&(Q.iridescenceIOR=_.iridescenceIOR),_.iridescenceThicknessRange!==void 0&&(Q.iridescenceThicknessRange=_.iridescenceThicknessRange),_.transmission!==void 0&&(Q.transmission=_.transmission),_.thickness!==void 0&&(Q.thickness=_.thickness),_.attenuationDistance!==void 0&&(Q.attenuationDistance=_.attenuationDistance),_.attenuationColor!==void 0&&Q.attenuationColor!==void 0&&Q.attenuationColor.setHex(_.attenuationColor),_.anisotropy!==void 0&&(Q.anisotropy=_.anisotropy),_.anisotropyRotation!==void 0&&(Q.anisotropyRotation=_.anisotropyRotation),_.fog!==void 0&&(Q.fog=_.fog),_.flatShading!==void 0&&(Q.flatShading=_.flatShading),_.blending!==void 0&&(Q.blending=_.blending),_.combine!==void 0&&(Q.combine=_.combine),_.side!==void 0&&(Q.side=_.side),_.shadowSide!==void 0&&(Q.shadowSide=_.shadowSide),_.opacity!==void 0&&(Q.opacity=_.opacity),_.transparent!==void 0&&(Q.transparent=_.transparent),_.alphaTest!==void 0&&(Q.alphaTest=_.alphaTest),_.alphaHash!==void 0&&(Q.alphaHash=_.alphaHash),_.depthFunc!==void 0&&(Q.depthFunc=_.depthFunc),_.depthTest!==void 0&&(Q.depthTest=_.depthTest),_.depthWrite!==void 0&&(Q.depthWrite=_.depthWrite),_.colorWrite!==void 0&&(Q.colorWrite=_.colorWrite),_.blendSrc!==void 0&&(Q.blendSrc=_.blendSrc),_.blendDst!==void 0&&(Q.blendDst=_.blendDst),_.blendEquation!==void 0&&(Q.blendEquation=_.blendEquation),_.blendSrcAlpha!==void 0&&(Q.blendSrcAlpha=_.blendSrcAlpha),_.blendDstAlpha!==void 0&&(Q.blendDstAlpha=_.blendDstAlpha),_.blendEquationAlpha!==void 0&&(Q.blendEquationAlpha=_.blendEquationAlpha),_.blendColor!==void 0&&Q.blendColor!==void 0&&Q.blendColor.setHex(_.blendColor),_.blendAlpha!==void 0&&(Q.blendAlpha=_.blendAlpha),_.stencilWriteMask!==void 0&&(Q.stencilWriteMask=_.stencilWriteMask),_.stencilFunc!==void 0&&(Q.stencilFunc=_.stencilFunc),_.stencilRef!==void 0&&(Q.stencilRef=_.stencilRef),_.stencilFuncMask!==void 0&&(Q.stencilFuncMask=_.stencilFuncMask),_.stencilFail!==void 0&&(Q.stencilFail=_.stencilFail),_.stencilZFail!==void 0&&(Q.stencilZFail=_.stencilZFail),_.stencilZPass!==void 0&&(Q.stencilZPass=_.stencilZPass),_.stencilWrite!==void 0&&(Q.stencilWrite=_.stencilWrite),_.wireframe!==void 0&&(Q.wireframe=_.wireframe),_.wireframeLinewidth!==void 0&&(Q.wireframeLinewidth=_.wireframeLinewidth),_.wireframeLinecap!==void 0&&(Q.wireframeLinecap=_.wireframeLinecap),_.wireframeLinejoin!==void 0&&(Q.wireframeLinejoin=_.wireframeLinejoin),_.rotation!==void 0&&(Q.rotation=_.rotation),_.linewidth!==void 0&&(Q.linewidth=_.linewidth),_.dashSize!==void 0&&(Q.dashSize=_.dashSize),_.gapSize!==void 0&&(Q.gapSize=_.gapSize),_.scale!==void 0&&(Q.scale=_.scale),_.polygonOffset!==void 0&&(Q.polygonOffset=_.polygonOffset),_.polygonOffsetFactor!==void 0&&(Q.polygonOffsetFactor=_.polygonOffsetFactor),_.polygonOffsetUnits!==void 0&&(Q.polygonOffsetUnits=_.polygonOffsetUnits),_.dithering!==void 0&&(Q.dithering=_.dithering),_.alphaToCoverage!==void 0&&(Q.alphaToCoverage=_.alphaToCoverage),_.premultipliedAlpha!==void 0&&(Q.premultipliedAlpha=_.premultipliedAlpha),_.forceSinglePass!==void 0&&(Q.forceSinglePass=_.forceSinglePass),_.visible!==void 0&&(Q.visible=_.visible),_.toneMapped!==void 0&&(Q.toneMapped=_.toneMapped),_.userData!==void 0&&(Q.userData=_.userData),_.vertexColors!==void 0&&(typeof _.vertexColors=="number"?Q.vertexColors=_.vertexColors>0:Q.vertexColors=_.vertexColors),_.uniforms!==void 0)for(const ee in _.uniforms){const te=_.uniforms[ee];switch(Q.uniforms[ee]={},te.type){case"t":Q.uniforms[ee].value=Z(te.value);break;case"c":Q.uniforms[ee].value=new Color().setHex(te.value);break;case"v2":Q.uniforms[ee].value=new Vector2().fromArray(te.value);break;case"v3":Q.uniforms[ee].value=new Vector3().fromArray(te.value);break;case"v4":Q.uniforms[ee].value=new Vector4().fromArray(te.value);break;case"m3":Q.uniforms[ee].value=new Matrix3().fromArray(te.value);break;case"m4":Q.uniforms[ee].value=new Matrix4().fromArray(te.value);break;default:Q.uniforms[ee].value=te.value}}if(_.defines!==void 0&&(Q.defines=_.defines),_.vertexShader!==void 0&&(Q.vertexShader=_.vertexShader),_.fragmentShader!==void 0&&(Q.fragmentShader=_.fragmentShader),_.glslVersion!==void 0&&(Q.glslVersion=_.glslVersion),_.extensions!==void 0)for(const ee in _.extensions)Q.extensions[ee]=_.extensions[ee];if(_.lights!==void 0&&(Q.lights=_.lights),_.clipping!==void 0&&(Q.clipping=_.clipping),_.size!==void 0&&(Q.size=_.size),_.sizeAttenuation!==void 0&&(Q.sizeAttenuation=_.sizeAttenuation),_.map!==void 0&&(Q.map=Z(_.map)),_.matcap!==void 0&&(Q.matcap=Z(_.matcap)),_.alphaMap!==void 0&&(Q.alphaMap=Z(_.alphaMap)),_.bumpMap!==void 0&&(Q.bumpMap=Z(_.bumpMap)),_.bumpScale!==void 0&&(Q.bumpScale=_.bumpScale),_.normalMap!==void 0&&(Q.normalMap=Z(_.normalMap)),_.normalMapType!==void 0&&(Q.normalMapType=_.normalMapType),_.normalScale!==void 0){let ee=_.normalScale;Array.isArray(ee)===!1&&(ee=[ee,ee]),Q.normalScale=new Vector2().fromArray(ee)}return _.displacementMap!==void 0&&(Q.displacementMap=Z(_.displacementMap)),_.displacementScale!==void 0&&(Q.displacementScale=_.displacementScale),_.displacementBias!==void 0&&(Q.displacementBias=_.displacementBias),_.roughnessMap!==void 0&&(Q.roughnessMap=Z(_.roughnessMap)),_.metalnessMap!==void 0&&(Q.metalnessMap=Z(_.metalnessMap)),_.emissiveMap!==void 0&&(Q.emissiveMap=Z(_.emissiveMap)),_.emissiveIntensity!==void 0&&(Q.emissiveIntensity=_.emissiveIntensity),_.specularMap!==void 0&&(Q.specularMap=Z(_.specularMap)),_.specularIntensityMap!==void 0&&(Q.specularIntensityMap=Z(_.specularIntensityMap)),_.specularColorMap!==void 0&&(Q.specularColorMap=Z(_.specularColorMap)),_.envMap!==void 0&&(Q.envMap=Z(_.envMap)),_.envMapRotation!==void 0&&Q.envMapRotation.fromArray(_.envMapRotation),_.envMapIntensity!==void 0&&(Q.envMapIntensity=_.envMapIntensity),_.reflectivity!==void 0&&(Q.reflectivity=_.reflectivity),_.refractionRatio!==void 0&&(Q.refractionRatio=_.refractionRatio),_.lightMap!==void 0&&(Q.lightMap=Z(_.lightMap)),_.lightMapIntensity!==void 0&&(Q.lightMapIntensity=_.lightMapIntensity),_.aoMap!==void 0&&(Q.aoMap=Z(_.aoMap)),_.aoMapIntensity!==void 0&&(Q.aoMapIntensity=_.aoMapIntensity),_.gradientMap!==void 0&&(Q.gradientMap=Z(_.gradientMap)),_.clearcoatMap!==void 0&&(Q.clearcoatMap=Z(_.clearcoatMap)),_.clearcoatRoughnessMap!==void 0&&(Q.clearcoatRoughnessMap=Z(_.clearcoatRoughnessMap)),_.clearcoatNormalMap!==void 0&&(Q.clearcoatNormalMap=Z(_.clearcoatNormalMap)),_.clearcoatNormalScale!==void 0&&(Q.clearcoatNormalScale=new Vector2().fromArray(_.clearcoatNormalScale)),_.iridescenceMap!==void 0&&(Q.iridescenceMap=Z(_.iridescenceMap)),_.iridescenceThicknessMap!==void 0&&(Q.iridescenceThicknessMap=Z(_.iridescenceThicknessMap)),_.transmissionMap!==void 0&&(Q.transmissionMap=Z(_.transmissionMap)),_.thicknessMap!==void 0&&(Q.thicknessMap=Z(_.thicknessMap)),_.anisotropyMap!==void 0&&(Q.anisotropyMap=Z(_.anisotropyMap)),_.sheenColorMap!==void 0&&(Q.sheenColorMap=Z(_.sheenColorMap)),_.sheenRoughnessMap!==void 0&&(Q.sheenRoughnessMap=Z(_.sheenRoughnessMap)),Q}setTextures(_){return this.textures=_,this}createMaterialFromType(_){return MaterialLoader.createMaterialFromType(_)}static createMaterialFromType(_){const J={ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material};return new J[_]}}class LoaderUtils{static extractUrlBase(_){const J=_.lastIndexOf("/");return J===-1?"./":_.slice(0,J+1)}static resolveURL(_,J){return typeof _!="string"||_===""?"":(/^https?:\/\//i.test(J)&&/^\//.test(_)&&(J=J.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(_)||/^data:.*,.*$/i.test(_)||/^blob:.*$/i.test(_)?_:J+_)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(_){return super.copy(_),this.instanceCount=_.instanceCount,this}toJSON(){const _=super.toJSON();return _.instanceCount=this.instanceCount,_.isInstancedBufferGeometry=!0,_}}class BufferGeometryLoader extends Loader{constructor(_){super(_)}load(_,J,Z,Q){const ee=this,te=new FileLoader(ee.manager);te.setPath(ee.path),te.setRequestHeader(ee.requestHeader),te.setWithCredentials(ee.withCredentials),te.load(_,function(ne){try{J(ee.parse(JSON.parse(ne)))}catch(ie){Q?Q(ie):error(ie),ee.manager.itemError(_)}},Z,Q)}parse(_){const J={},Z={};function Q(le,ue){if(J[ue]!==void 0)return J[ue];const pe=le.interleavedBuffers[ue],fe=ee(le,pe.buffer),_e=getTypedArray(pe.type,fe),ye=new InterleavedBuffer(_e,pe.stride);return ye.uuid=pe.uuid,J[ue]=ye,ye}function ee(le,ue){if(Z[ue]!==void 0)return Z[ue];const pe=le.arrayBuffers[ue],fe=new Uint32Array(pe).buffer;return Z[ue]=fe,fe}const te=_.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,ne=_.data.index;if(ne!==void 0){const le=getTypedArray(ne.type,ne.array);te.setIndex(new BufferAttribute(le,1))}const ie=_.data.attributes;for(const le in ie){const ue=ie[le];let de;if(ue.isInterleavedBufferAttribute){const pe=Q(_.data,ue.data);de=new InterleavedBufferAttribute(pe,ue.itemSize,ue.offset,ue.normalized)}else{const pe=getTypedArray(ue.type,ue.array),fe=ue.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute;de=new fe(pe,ue.itemSize,ue.normalized)}ue.name!==void 0&&(de.name=ue.name),ue.usage!==void 0&&de.setUsage(ue.usage),te.setAttribute(le,de)}const re=_.data.morphAttributes;if(re)for(const le in re){const ue=re[le],de=[];for(let pe=0,fe=ue.length;pe<fe;pe++){const _e=ue[pe];let ye;if(_e.isInterleavedBufferAttribute){const be=Q(_.data,_e.data);ye=new InterleavedBufferAttribute(be,_e.itemSize,_e.offset,_e.normalized)}else{const be=getTypedArray(_e.type,_e.array);ye=new BufferAttribute(be,_e.itemSize,_e.normalized)}_e.name!==void 0&&(ye.name=_e.name),de.push(ye)}te.morphAttributes[le]=de}_.data.morphTargetsRelative&&(te.morphTargetsRelative=!0);const se=_.data.groups||_.data.drawcalls||_.data.offsets;if(se!==void 0)for(let le=0,ue=se.length;le!==ue;++le){const de=se[le];te.addGroup(de.start,de.count,de.materialIndex)}const ae=_.data.boundingSphere;return ae!==void 0&&(te.boundingSphere=new Sphere$1().fromJSON(ae)),_.name&&(te.name=_.name),_.userData&&(te.userData=_.userData),te}}class ObjectLoader extends Loader{constructor(_){super(_)}load(_,J,Z,Q){const ee=this,te=this.path===""?LoaderUtils.extractUrlBase(_):this.path;this.resourcePath=this.resourcePath||te;const ne=new FileLoader(this.manager);ne.setPath(this.path),ne.setRequestHeader(this.requestHeader),ne.setWithCredentials(this.withCredentials),ne.load(_,function(ie){let re=null;try{re=JSON.parse(ie)}catch(se){Q!==void 0&&Q(se),se("ObjectLoader: Can't parse "+_+".",se.message);return}const oe=re.metadata;if(oe===void 0||oe.type===void 0||oe.type.toLowerCase()==="geometry"){Q!==void 0&&Q(new Error("THREE.ObjectLoader: Can't load "+_)),error("ObjectLoader: Can't load "+_);return}ee.parse(re,J)},Z,Q)}async loadAsync(_,J){const Z=this,Q=this.path===""?LoaderUtils.extractUrlBase(_):this.path;this.resourcePath=this.resourcePath||Q;const ee=new FileLoader(this.manager);ee.setPath(this.path),ee.setRequestHeader(this.requestHeader),ee.setWithCredentials(this.withCredentials);const te=await ee.loadAsync(_,J),ne=JSON.parse(te),ie=ne.metadata;if(ie===void 0||ie.type===void 0||ie.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+_);return await Z.parseAsync(ne)}parse(_,J){const Z=this.parseAnimations(_.animations),Q=this.parseShapes(_.shapes),ee=this.parseGeometries(_.geometries,Q),te=this.parseImages(_.images,function(){J!==void 0&&J(re)}),ne=this.parseTextures(_.textures,te),ie=this.parseMaterials(_.materials,ne),re=this.parseObject(_.object,ee,ie,ne,Z),oe=this.parseSkeletons(_.skeletons,re);if(this.bindSkeletons(re,oe),this.bindLightTargets(re),J!==void 0){let se=!1;for(const ae in te)if(te[ae].data instanceof HTMLImageElement){se=!0;break}se===!1&&J(re)}return re}async parseAsync(_){const J=this.parseAnimations(_.animations),Z=this.parseShapes(_.shapes),Q=this.parseGeometries(_.geometries,Z),ee=await this.parseImagesAsync(_.images),te=this.parseTextures(_.textures,ee),ne=this.parseMaterials(_.materials,te),ie=this.parseObject(_.object,Q,ne,te,J),re=this.parseSkeletons(_.skeletons,ie);return this.bindSkeletons(ie,re),this.bindLightTargets(ie),ie}parseShapes(_){const J={};if(_!==void 0)for(let Z=0,Q=_.length;Z<Q;Z++){const ee=new Shape().fromJSON(_[Z]);J[ee.uuid]=ee}return J}parseSkeletons(_,J){const Z={},Q={};if(J.traverse(function(ee){ee.isBone&&(Q[ee.uuid]=ee)}),_!==void 0)for(let ee=0,te=_.length;ee<te;ee++){const ne=new Skeleton().fromJSON(_[ee],Q);Z[ne.uuid]=ne}return Z}parseGeometries(_,J){const Z={};if(_!==void 0){const Q=new BufferGeometryLoader;for(let ee=0,te=_.length;ee<te;ee++){let ne;const ie=_[ee];switch(ie.type){case"BufferGeometry":case"InstancedBufferGeometry":ne=Q.parse(ie);break;default:ie.type in Geometries?ne=Geometries[ie.type].fromJSON(ie,J):warn(`ObjectLoader: Unsupported geometry type "${ie.type}"`)}ne.uuid=ie.uuid,ie.name!==void 0&&(ne.name=ie.name),ie.userData!==void 0&&(ne.userData=ie.userData),Z[ie.uuid]=ne}}return Z}parseMaterials(_,J){const Z={},Q={};if(_!==void 0){const ee=new MaterialLoader;ee.setTextures(J);for(let te=0,ne=_.length;te<ne;te++){const ie=_[te];Z[ie.uuid]===void 0&&(Z[ie.uuid]=ee.parse(ie)),Q[ie.uuid]=Z[ie.uuid]}}return Q}parseAnimations(_){const J={};if(_!==void 0)for(let Z=0;Z<_.length;Z++){const Q=_[Z],ee=AnimationClip.parse(Q);J[ee.uuid]=ee}return J}parseImages(_,J){const Z=this,Q={};let ee;function te(ie){return Z.manager.itemStart(ie),ee.load(ie,function(){Z.manager.itemEnd(ie)},void 0,function(){Z.manager.itemError(ie),Z.manager.itemEnd(ie)})}function ne(ie){if(typeof ie=="string"){const re=ie,oe=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(re)?re:Z.resourcePath+re;return te(oe)}else return ie.data?{data:getTypedArray(ie.type,ie.data),width:ie.width,height:ie.height}:null}if(_!==void 0&&_.length>0){const ie=new LoadingManager(J);ee=new ImageLoader(ie),ee.setCrossOrigin(this.crossOrigin);for(let re=0,oe=_.length;re<oe;re++){const se=_[re],ae=se.url;if(Array.isArray(ae)){const le=[];for(let ue=0,de=ae.length;ue<de;ue++){const pe=ae[ue],fe=ne(pe);fe!==null&&(fe instanceof HTMLImageElement?le.push(fe):le.push(new DataTexture(fe.data,fe.width,fe.height)))}Q[se.uuid]=new Source(le)}else{const le=ne(se.url);Q[se.uuid]=new Source(le)}}}return Q}async parseImagesAsync(_){const J=this,Z={};let Q;async function ee(te){if(typeof te=="string"){const ne=te,ie=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(ne)?ne:J.resourcePath+ne;return await Q.loadAsync(ie)}else return te.data?{data:getTypedArray(te.type,te.data),width:te.width,height:te.height}:null}if(_!==void 0&&_.length>0){Q=new ImageLoader(this.manager),Q.setCrossOrigin(this.crossOrigin);for(let te=0,ne=_.length;te<ne;te++){const ie=_[te],re=ie.url;if(Array.isArray(re)){const oe=[];for(let se=0,ae=re.length;se<ae;se++){const le=re[se],ue=await ee(le);ue!==null&&(ue instanceof HTMLImageElement?oe.push(ue):oe.push(new DataTexture(ue.data,ue.width,ue.height)))}Z[ie.uuid]=new Source(oe)}else{const oe=await ee(ie.url);Z[ie.uuid]=new Source(oe)}}}return Z}parseTextures(_,J){function Z(ee,te){return typeof ee=="number"?ee:(warn("ObjectLoader.parseTexture: Constant should be in numeric form.",ee),te[ee])}const Q={};if(_!==void 0)for(let ee=0,te=_.length;ee<te;ee++){const ne=_[ee];ne.image===void 0&&warn('ObjectLoader: No "image" specified for',ne.uuid),J[ne.image]===void 0&&warn("ObjectLoader: Undefined image",ne.image);const ie=J[ne.image],re=ie.data;let oe;Array.isArray(re)?(oe=new CubeTexture,re.length===6&&(oe.needsUpdate=!0)):(re&&re.data?oe=new DataTexture:oe=new Texture,re&&(oe.needsUpdate=!0)),oe.source=ie,oe.uuid=ne.uuid,ne.name!==void 0&&(oe.name=ne.name),ne.mapping!==void 0&&(oe.mapping=Z(ne.mapping,TEXTURE_MAPPING)),ne.channel!==void 0&&(oe.channel=ne.channel),ne.offset!==void 0&&oe.offset.fromArray(ne.offset),ne.repeat!==void 0&&oe.repeat.fromArray(ne.repeat),ne.center!==void 0&&oe.center.fromArray(ne.center),ne.rotation!==void 0&&(oe.rotation=ne.rotation),ne.wrap!==void 0&&(oe.wrapS=Z(ne.wrap[0],TEXTURE_WRAPPING),oe.wrapT=Z(ne.wrap[1],TEXTURE_WRAPPING)),ne.format!==void 0&&(oe.format=ne.format),ne.internalFormat!==void 0&&(oe.internalFormat=ne.internalFormat),ne.type!==void 0&&(oe.type=ne.type),ne.colorSpace!==void 0&&(oe.colorSpace=ne.colorSpace),ne.minFilter!==void 0&&(oe.minFilter=Z(ne.minFilter,TEXTURE_FILTER)),ne.magFilter!==void 0&&(oe.magFilter=Z(ne.magFilter,TEXTURE_FILTER)),ne.anisotropy!==void 0&&(oe.anisotropy=ne.anisotropy),ne.flipY!==void 0&&(oe.flipY=ne.flipY),ne.generateMipmaps!==void 0&&(oe.generateMipmaps=ne.generateMipmaps),ne.premultiplyAlpha!==void 0&&(oe.premultiplyAlpha=ne.premultiplyAlpha),ne.unpackAlignment!==void 0&&(oe.unpackAlignment=ne.unpackAlignment),ne.compareFunction!==void 0&&(oe.compareFunction=ne.compareFunction),ne.userData!==void 0&&(oe.userData=ne.userData),Q[ne.uuid]=oe}return Q}parseObject(_,J,Z,Q,ee){let te;function ne(ae){return J[ae]===void 0&&warn("ObjectLoader: Undefined geometry",ae),J[ae]}function ie(ae){if(ae!==void 0){if(Array.isArray(ae)){const le=[];for(let ue=0,de=ae.length;ue<de;ue++){const pe=ae[ue];Z[pe]===void 0&&warn("ObjectLoader: Undefined material",pe),le.push(Z[pe])}return le}return Z[ae]===void 0&&warn("ObjectLoader: Undefined material",ae),Z[ae]}}function re(ae){return Q[ae]===void 0&&warn("ObjectLoader: Undefined texture",ae),Q[ae]}let oe,se;switch(_.type){case"Scene":te=new Scene,_.background!==void 0&&(Number.isInteger(_.background)?te.background=new Color(_.background):te.background=re(_.background)),_.environment!==void 0&&(te.environment=re(_.environment)),_.fog!==void 0&&(_.fog.type==="Fog"?te.fog=new Fog(_.fog.color,_.fog.near,_.fog.far):_.fog.type==="FogExp2"&&(te.fog=new FogExp2(_.fog.color,_.fog.density)),_.fog.name!==""&&(te.fog.name=_.fog.name)),_.backgroundBlurriness!==void 0&&(te.backgroundBlurriness=_.backgroundBlurriness),_.backgroundIntensity!==void 0&&(te.backgroundIntensity=_.backgroundIntensity),_.backgroundRotation!==void 0&&te.backgroundRotation.fromArray(_.backgroundRotation),_.environmentIntensity!==void 0&&(te.environmentIntensity=_.environmentIntensity),_.environmentRotation!==void 0&&te.environmentRotation.fromArray(_.environmentRotation);break;case"PerspectiveCamera":te=new PerspectiveCamera(_.fov,_.aspect,_.near,_.far),_.focus!==void 0&&(te.focus=_.focus),_.zoom!==void 0&&(te.zoom=_.zoom),_.filmGauge!==void 0&&(te.filmGauge=_.filmGauge),_.filmOffset!==void 0&&(te.filmOffset=_.filmOffset),_.view!==void 0&&(te.view=Object.assign({},_.view));break;case"OrthographicCamera":te=new OrthographicCamera(_.left,_.right,_.top,_.bottom,_.near,_.far),_.zoom!==void 0&&(te.zoom=_.zoom),_.view!==void 0&&(te.view=Object.assign({},_.view));break;case"AmbientLight":te=new AmbientLight(_.color,_.intensity);break;case"DirectionalLight":te=new DirectionalLight(_.color,_.intensity),te.target=_.target||"";break;case"PointLight":te=new PointLight(_.color,_.intensity,_.distance,_.decay);break;case"RectAreaLight":te=new RectAreaLight(_.color,_.intensity,_.width,_.height);break;case"SpotLight":te=new SpotLight(_.color,_.intensity,_.distance,_.angle,_.penumbra,_.decay),te.target=_.target||"";break;case"HemisphereLight":te=new HemisphereLight(_.color,_.groundColor,_.intensity);break;case"LightProbe":te=new LightProbe().fromJSON(_);break;case"SkinnedMesh":oe=ne(_.geometry),se=ie(_.material),te=new SkinnedMesh(oe,se),_.bindMode!==void 0&&(te.bindMode=_.bindMode),_.bindMatrix!==void 0&&te.bindMatrix.fromArray(_.bindMatrix),_.skeleton!==void 0&&(te.skeleton=_.skeleton);break;case"Mesh":oe=ne(_.geometry),se=ie(_.material),te=new Mesh(oe,se);break;case"InstancedMesh":oe=ne(_.geometry),se=ie(_.material);const ae=_.count,le=_.instanceMatrix,ue=_.instanceColor;te=new InstancedMesh(oe,se,ae),te.instanceMatrix=new InstancedBufferAttribute(new Float32Array(le.array),16),ue!==void 0&&(te.instanceColor=new InstancedBufferAttribute(new Float32Array(ue.array),ue.itemSize));break;case"BatchedMesh":oe=ne(_.geometry),se=ie(_.material),te=new BatchedMesh(_.maxInstanceCount,_.maxVertexCount,_.maxIndexCount,se),te.geometry=oe,te.perObjectFrustumCulled=_.perObjectFrustumCulled,te.sortObjects=_.sortObjects,te._drawRanges=_.drawRanges,te._reservedRanges=_.reservedRanges,te._geometryInfo=_.geometryInfo.map(de=>{let pe=null,fe=null;return de.boundingBox!==void 0&&(pe=new Box3().fromJSON(de.boundingBox)),de.boundingSphere!==void 0&&(fe=new Sphere$1().fromJSON(de.boundingSphere)),{...de,boundingBox:pe,boundingSphere:fe}}),te._instanceInfo=_.instanceInfo,te._availableInstanceIds=_._availableInstanceIds,te._availableGeometryIds=_._availableGeometryIds,te._nextIndexStart=_.nextIndexStart,te._nextVertexStart=_.nextVertexStart,te._geometryCount=_.geometryCount,te._maxInstanceCount=_.maxInstanceCount,te._maxVertexCount=_.maxVertexCount,te._maxIndexCount=_.maxIndexCount,te._geometryInitialized=_.geometryInitialized,te._matricesTexture=re(_.matricesTexture.uuid),te._indirectTexture=re(_.indirectTexture.uuid),_.colorsTexture!==void 0&&(te._colorsTexture=re(_.colorsTexture.uuid)),_.boundingSphere!==void 0&&(te.boundingSphere=new Sphere$1().fromJSON(_.boundingSphere)),_.boundingBox!==void 0&&(te.boundingBox=new Box3().fromJSON(_.boundingBox));break;case"LOD":te=new LOD;break;case"Line":te=new Line(ne(_.geometry),ie(_.material));break;case"LineLoop":te=new LineLoop(ne(_.geometry),ie(_.material));break;case"LineSegments":te=new LineSegments(ne(_.geometry),ie(_.material));break;case"PointCloud":case"Points":te=new Points$1(ne(_.geometry),ie(_.material));break;case"Sprite":te=new Sprite(ie(_.material));break;case"Group":te=new Group;break;case"Bone":te=new Bone;break;default:te=new Object3D}if(te.uuid=_.uuid,_.name!==void 0&&(te.name=_.name),_.matrix!==void 0?(te.matrix.fromArray(_.matrix),_.matrixAutoUpdate!==void 0&&(te.matrixAutoUpdate=_.matrixAutoUpdate),te.matrixAutoUpdate&&te.matrix.decompose(te.position,te.quaternion,te.scale)):(_.position!==void 0&&te.position.fromArray(_.position),_.rotation!==void 0&&te.rotation.fromArray(_.rotation),_.quaternion!==void 0&&te.quaternion.fromArray(_.quaternion),_.scale!==void 0&&te.scale.fromArray(_.scale)),_.up!==void 0&&te.up.fromArray(_.up),_.castShadow!==void 0&&(te.castShadow=_.castShadow),_.receiveShadow!==void 0&&(te.receiveShadow=_.receiveShadow),_.shadow&&(_.shadow.intensity!==void 0&&(te.shadow.intensity=_.shadow.intensity),_.shadow.bias!==void 0&&(te.shadow.bias=_.shadow.bias),_.shadow.normalBias!==void 0&&(te.shadow.normalBias=_.shadow.normalBias),_.shadow.radius!==void 0&&(te.shadow.radius=_.shadow.radius),_.shadow.mapSize!==void 0&&te.shadow.mapSize.fromArray(_.shadow.mapSize),_.shadow.camera!==void 0&&(te.shadow.camera=this.parseObject(_.shadow.camera))),_.visible!==void 0&&(te.visible=_.visible),_.frustumCulled!==void 0&&(te.frustumCulled=_.frustumCulled),_.renderOrder!==void 0&&(te.renderOrder=_.renderOrder),_.userData!==void 0&&(te.userData=_.userData),_.layers!==void 0&&(te.layers.mask=_.layers),_.children!==void 0){const ae=_.children;for(let le=0;le<ae.length;le++)te.add(this.parseObject(ae[le],J,Z,Q,ee))}if(_.animations!==void 0){const ae=_.animations;for(let le=0;le<ae.length;le++){const ue=ae[le];te.animations.push(ee[ue])}}if(_.type==="LOD"){_.autoUpdate!==void 0&&(te.autoUpdate=_.autoUpdate);const ae=_.levels;for(let le=0;le<ae.length;le++){const ue=ae[le],de=te.getObjectByProperty("uuid",ue.object);de!==void 0&&te.addLevel(de,ue.distance,ue.hysteresis)}}return te}bindSkeletons(_,J){Object.keys(J).length!==0&&_.traverse(function(Z){if(Z.isSkinnedMesh===!0&&Z.skeleton!==void 0){const Q=J[Z.skeleton];Q===void 0?warn("ObjectLoader: No skeleton found with UUID:",Z.skeleton):Z.bind(Q,Z.bindMatrix)}})}bindLightTargets(_){_.traverse(function(J){if(J.isDirectionalLight||J.isSpotLight){const Z=J.target,Q=_.getObjectByProperty("uuid",Z);Q!==void 0?J.target=Q:J.target=new Object3D}})}}const TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,CubeUVReflectionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter},_errorMap=new WeakMap;class ImageBitmapLoader extends Loader{constructor(_){super(_),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&warn("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&warn("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(_){return this.options=_,this}load(_,J,Z,Q){_===void 0&&(_=""),this.path!==void 0&&(_=this.path+_),_=this.manager.resolveURL(_);const ee=this,te=Cache.get(`image-bitmap:${_}`);if(te!==void 0){if(ee.manager.itemStart(_),te.then){te.then(re=>{if(_errorMap.has(te)===!0)Q&&Q(_errorMap.get(te)),ee.manager.itemError(_),ee.manager.itemEnd(_);else return J&&J(re),ee.manager.itemEnd(_),re});return}return setTimeout(function(){J&&J(te),ee.manager.itemEnd(_)},0),te}const ne={};ne.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",ne.headers=this.requestHeader,ne.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const ie=fetch(_,ne).then(function(re){return re.blob()}).then(function(re){return createImageBitmap(re,Object.assign(ee.options,{colorSpaceConversion:"none"}))}).then(function(re){return Cache.add(`image-bitmap:${_}`,re),J&&J(re),ee.manager.itemEnd(_),re}).catch(function(re){Q&&Q(re),_errorMap.set(ie,re),Cache.remove(`image-bitmap:${_}`),ee.manager.itemError(_),ee.manager.itemEnd(_)});Cache.add(`image-bitmap:${_}`,ie),ee.manager.itemStart(_)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let _context;class AudioContext{static getContext(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context}static setContext(_){_context=_}}class AudioLoader extends Loader{constructor(_){super(_)}load(_,J,Z,Q){const ee=this,te=new FileLoader(this.manager);te.setResponseType("arraybuffer"),te.setPath(this.path),te.setRequestHeader(this.requestHeader),te.setWithCredentials(this.withCredentials),te.load(_,function(ie){try{const re=ie.slice(0);AudioContext.getContext().decodeAudioData(re,function(se){J(se)}).catch(ne)}catch(re){ne(re)}},Z,Q);function ne(ie){Q?Q(ie):error(ie),ee.manager.itemError(_)}}}const _eyeRight=new Matrix4,_eyeLeft=new Matrix4,_projectionMatrix=new Matrix4;class StereoCamera{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(_){const J=this._cache;if(J.focus!==_.focus||J.fov!==_.fov||J.aspect!==_.aspect*this.aspect||J.near!==_.near||J.far!==_.far||J.zoom!==_.zoom||J.eyeSep!==this.eyeSep){J.focus=_.focus,J.fov=_.fov,J.aspect=_.aspect*this.aspect,J.near=_.near,J.far=_.far,J.zoom=_.zoom,J.eyeSep=this.eyeSep,_projectionMatrix.copy(_.projectionMatrix);const Q=J.eyeSep/2,ee=Q*J.near/J.focus,te=J.near*Math.tan(DEG2RAD*J.fov*.5)/J.zoom;let ne,ie;_eyeLeft.elements[12]=-Q,_eyeRight.elements[12]=Q,ne=-te*J.aspect+ee,ie=te*J.aspect+ee,_projectionMatrix.elements[0]=2*J.near/(ie-ne),_projectionMatrix.elements[8]=(ie+ne)/(ie-ne),this.cameraL.projectionMatrix.copy(_projectionMatrix),ne=-te*J.aspect-ee,ie=te*J.aspect-ee,_projectionMatrix.elements[0]=2*J.near/(ie-ne),_projectionMatrix.elements[8]=(ie+ne)/(ie-ne),this.cameraR.projectionMatrix.copy(_projectionMatrix)}this.cameraL.matrixWorld.copy(_.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(_.matrixWorld).multiply(_eyeRight)}}class ArrayCamera extends PerspectiveCamera{constructor(_=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=_}}class Clock{constructor(_=!0){this.autoStart=_,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let _=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const J=performance.now();_=(J-this.oldTime)/1e3,this.oldTime=J,this.elapsedTime+=_}return _}}const _position$1=new Vector3,_quaternion$1=new Quaternion,_scale$1=new Vector3,_forward=new Vector3,_up=new Vector3;class AudioListener extends Object3D{constructor(){super(),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(_){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=_,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(_){return this.gain.gain.setTargetAtTime(_,this.context.currentTime,.01),this}updateMatrixWorld(_){super.updateMatrixWorld(_);const J=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$1,_quaternion$1,_scale$1),_forward.set(0,0,-1).applyQuaternion(_quaternion$1),_up.set(0,1,0).applyQuaternion(_quaternion$1),J.positionX){const Z=this.context.currentTime+this.timeDelta;J.positionX.linearRampToValueAtTime(_position$1.x,Z),J.positionY.linearRampToValueAtTime(_position$1.y,Z),J.positionZ.linearRampToValueAtTime(_position$1.z,Z),J.forwardX.linearRampToValueAtTime(_forward.x,Z),J.forwardY.linearRampToValueAtTime(_forward.y,Z),J.forwardZ.linearRampToValueAtTime(_forward.z,Z),J.upX.linearRampToValueAtTime(_up.x,Z),J.upY.linearRampToValueAtTime(_up.y,Z),J.upZ.linearRampToValueAtTime(_up.z,Z)}else J.setPosition(_position$1.x,_position$1.y,_position$1.z),J.setOrientation(_forward.x,_forward.y,_forward.z,_up.x,_up.y,_up.z)}}class Audio extends Object3D{constructor(_){super(),this.type="Audio",this.listener=_,this.context=_.context,this.gain=this.context.createGain(),this.gain.connect(_.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(_){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=_,this.connect(),this}setMediaElementSource(_){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(_),this.connect(),this}setMediaStreamSource(_){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(_),this.connect(),this}setBuffer(_){return this.buffer=_,this.sourceType="buffer",this.autoplay&&this.play(),this}play(_=0){if(this.isPlaying===!0){warn("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){warn("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+_;const J=this.context.createBufferSource();return J.buffer=this.buffer,J.loop=this.loop,J.loopStart=this.loopStart,J.loopEnd=this.loopEnd,J.onended=this.onEnded.bind(this),J.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=J,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){warn("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(_=0){if(this.hasPlaybackControl===!1){warn("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+_),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let _=1,J=this.filters.length;_<J;_++)this.filters[_-1].connect(this.filters[_]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let _=1,J=this.filters.length;_<J;_++)this.filters[_-1].disconnect(this.filters[_]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(_){return _||(_=[]),this._connected===!0?(this.disconnect(),this.filters=_.slice(),this.connect()):this.filters=_.slice(),this}setDetune(_){return this.detune=_,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(_){return this.setFilters(_?[_]:[])}setPlaybackRate(_){if(this.hasPlaybackControl===!1){warn("Audio: this Audio has no playback control.");return}return this.playbackRate=_,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(warn("Audio: this Audio has no playback control."),!1):this.loop}setLoop(_){if(this.hasPlaybackControl===!1){warn("Audio: this Audio has no playback control.");return}return this.loop=_,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(_){return this.loopStart=_,this}setLoopEnd(_){return this.loopEnd=_,this}getVolume(){return this.gain.gain.value}setVolume(_){return this.gain.gain.setTargetAtTime(_,this.context.currentTime,.01),this}copy(_,J){return super.copy(_,J),_.sourceType!=="buffer"?(warn("Audio: Audio source type cannot be copied."),this):(this.autoplay=_.autoplay,this.buffer=_.buffer,this.detune=_.detune,this.loop=_.loop,this.loopStart=_.loopStart,this.loopEnd=_.loopEnd,this.offset=_.offset,this.duration=_.duration,this.playbackRate=_.playbackRate,this.hasPlaybackControl=_.hasPlaybackControl,this.sourceType=_.sourceType,this.filters=_.filters.slice(),this)}clone(_){return new this.constructor(this.listener).copy(this,_)}}const _position$4=new Vector3,_quaternion=new Quaternion,_scale=new Vector3,_orientation=new Vector3;class PositionalAudio extends Audio{constructor(_){super(_),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(_){return this.panner.refDistance=_,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(_){return this.panner.rolloffFactor=_,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(_){return this.panner.distanceModel=_,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(_){return this.panner.maxDistance=_,this}setDirectionalCone(_,J,Z){return this.panner.coneInnerAngle=_,this.panner.coneOuterAngle=J,this.panner.coneOuterGain=Z,this}updateMatrixWorld(_){if(super.updateMatrixWorld(_),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_position$4,_quaternion,_scale),_orientation.set(0,0,1).applyQuaternion(_quaternion);const J=this.panner;if(J.positionX){const Z=this.context.currentTime+this.listener.timeDelta;J.positionX.linearRampToValueAtTime(_position$4.x,Z),J.positionY.linearRampToValueAtTime(_position$4.y,Z),J.positionZ.linearRampToValueAtTime(_position$4.z,Z),J.orientationX.linearRampToValueAtTime(_orientation.x,Z),J.orientationY.linearRampToValueAtTime(_orientation.y,Z),J.orientationZ.linearRampToValueAtTime(_orientation.z,Z)}else J.setPosition(_position$4.x,_position$4.y,_position$4.z),J.setOrientation(_orientation.x,_orientation.y,_orientation.z)}}class AudioAnalyser{constructor(_,J=2048){this.analyser=_.context.createAnalyser(),this.analyser.fftSize=J,this.data=new Uint8Array(this.analyser.frequencyBinCount),_.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let _=0;const J=this.getFrequencyData();for(let Z=0;Z<J.length;Z++)_+=J[Z];return _/J.length}}class PropertyMixer{constructor(_,J,Z){this.binding=_,this.valueSize=Z;let Q,ee,te;switch(J){case"quaternion":Q=this._slerp,ee=this._slerpAdditive,te=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(Z*6),this._workIndex=5;break;case"string":case"bool":Q=this._select,ee=this._select,te=this._setAdditiveIdentityOther,this.buffer=new Array(Z*5);break;default:Q=this._lerp,ee=this._lerpAdditive,te=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(Z*5)}this._mixBufferRegion=Q,this._mixBufferRegionAdditive=ee,this._setIdentity=te,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(_,J){const Z=this.buffer,Q=this.valueSize,ee=_*Q+Q;let te=this.cumulativeWeight;if(te===0){for(let ne=0;ne!==Q;++ne)Z[ee+ne]=Z[ne];te=J}else{te+=J;const ne=J/te;this._mixBufferRegion(Z,ee,0,ne,Q)}this.cumulativeWeight=te}accumulateAdditive(_){const J=this.buffer,Z=this.valueSize,Q=Z*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(J,Q,0,_,Z),this.cumulativeWeightAdditive+=_}apply(_){const J=this.valueSize,Z=this.buffer,Q=_*J+J,ee=this.cumulativeWeight,te=this.cumulativeWeightAdditive,ne=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,ee<1){const ie=J*this._origIndex;this._mixBufferRegion(Z,Q,ie,1-ee,J)}te>0&&this._mixBufferRegionAdditive(Z,Q,this._addIndex*J,1,J);for(let ie=J,re=J+J;ie!==re;++ie)if(Z[ie]!==Z[ie+J]){ne.setValue(Z,Q);break}}saveOriginalState(){const _=this.binding,J=this.buffer,Z=this.valueSize,Q=Z*this._origIndex;_.getValue(J,Q);for(let ee=Z,te=Q;ee!==te;++ee)J[ee]=J[Q+ee%Z];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const _=this.valueSize*3;this.binding.setValue(this.buffer,_)}_setAdditiveIdentityNumeric(){const _=this._addIndex*this.valueSize,J=_+this.valueSize;for(let Z=_;Z<J;Z++)this.buffer[Z]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const _=this._origIndex*this.valueSize,J=this._addIndex*this.valueSize;for(let Z=0;Z<this.valueSize;Z++)this.buffer[J+Z]=this.buffer[_+Z]}_select(_,J,Z,Q,ee){if(Q>=.5)for(let te=0;te!==ee;++te)_[J+te]=_[Z+te]}_slerp(_,J,Z,Q){Quaternion.slerpFlat(_,J,_,J,_,Z,Q)}_slerpAdditive(_,J,Z,Q,ee){const te=this._workIndex*ee;Quaternion.multiplyQuaternionsFlat(_,te,_,J,_,Z),Quaternion.slerpFlat(_,J,_,J,_,te,Q)}_lerp(_,J,Z,Q,ee){const te=1-Q;for(let ne=0;ne!==ee;++ne){const ie=J+ne;_[ie]=_[ie]*te+_[Z+ne]*Q}}_lerpAdditive(_,J,Z,Q,ee){for(let te=0;te!==ee;++te){const ne=J+te;_[ne]=_[ne]+_[Z+te]*Q}}}const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones","map"];class Composite{constructor(_,J,Z){const Q=Z||PropertyBinding.parseTrackName(J);this._targetGroup=_,this._bindings=_.subscribe_(J,Q)}getValue(_,J){this.bind();const Z=this._targetGroup.nCachedObjects_,Q=this._bindings[Z];Q!==void 0&&Q.getValue(_,J)}setValue(_,J){const Z=this._bindings;for(let Q=this._targetGroup.nCachedObjects_,ee=Z.length;Q!==ee;++Q)Z[Q].setValue(_,J)}bind(){const _=this._bindings;for(let J=this._targetGroup.nCachedObjects_,Z=_.length;J!==Z;++J)_[J].bind()}unbind(){const _=this._bindings;for(let J=this._targetGroup.nCachedObjects_,Z=_.length;J!==Z;++J)_[J].unbind()}}class PropertyBinding{constructor(_,J,Z){this.path=J,this.parsedPath=Z||PropertyBinding.parseTrackName(J),this.node=PropertyBinding.findNode(_,this.parsedPath.nodeName),this.rootNode=_,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(_,J,Z){return _&&_.isAnimationObjectGroup?new PropertyBinding.Composite(_,J,Z):new PropertyBinding(_,J,Z)}static sanitizeNodeName(_){return _.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName(_){const J=_trackRe.exec(_);if(J===null)throw new Error("PropertyBinding: Cannot parse trackName: "+_);const Z={nodeName:J[2],objectName:J[3],objectIndex:J[4],propertyName:J[5],propertyIndex:J[6]},Q=Z.nodeName&&Z.nodeName.lastIndexOf(".");if(Q!==void 0&&Q!==-1){const ee=Z.nodeName.substring(Q+1);_supportedObjectNames.indexOf(ee)!==-1&&(Z.nodeName=Z.nodeName.substring(0,Q),Z.objectName=ee)}if(Z.propertyName===null||Z.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+_);return Z}static findNode(_,J){if(J===void 0||J===""||J==="."||J===-1||J===_.name||J===_.uuid)return _;if(_.skeleton){const Z=_.skeleton.getBoneByName(J);if(Z!==void 0)return Z}if(_.children){const Z=function(ee){for(let te=0;te<ee.length;te++){const ne=ee[te];if(ne.name===J||ne.uuid===J)return ne;const ie=Z(ne.children);if(ie)return ie}return null},Q=Z(_.children);if(Q)return Q}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(_,J){_[J]=this.targetObject[this.propertyName]}_getValue_array(_,J){const Z=this.resolvedProperty;for(let Q=0,ee=Z.length;Q!==ee;++Q)_[J++]=Z[Q]}_getValue_arrayElement(_,J){_[J]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(_,J){this.resolvedProperty.toArray(_,J)}_setValue_direct(_,J){this.targetObject[this.propertyName]=_[J]}_setValue_direct_setNeedsUpdate(_,J){this.targetObject[this.propertyName]=_[J],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(_,J){this.targetObject[this.propertyName]=_[J],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(_,J){const Z=this.resolvedProperty;for(let Q=0,ee=Z.length;Q!==ee;++Q)Z[Q]=_[J++]}_setValue_array_setNeedsUpdate(_,J){const Z=this.resolvedProperty;for(let Q=0,ee=Z.length;Q!==ee;++Q)Z[Q]=_[J++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(_,J){const Z=this.resolvedProperty;for(let Q=0,ee=Z.length;Q!==ee;++Q)Z[Q]=_[J++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(_,J){this.resolvedProperty[this.propertyIndex]=_[J]}_setValue_arrayElement_setNeedsUpdate(_,J){this.resolvedProperty[this.propertyIndex]=_[J],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(_,J){this.resolvedProperty[this.propertyIndex]=_[J],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(_,J){this.resolvedProperty.fromArray(_,J)}_setValue_fromArray_setNeedsUpdate(_,J){this.resolvedProperty.fromArray(_,J),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(_,J){this.resolvedProperty.fromArray(_,J),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(_,J){this.bind(),this.getValue(_,J)}_setValue_unbound(_,J){this.bind(),this.setValue(_,J)}bind(){let _=this.node;const J=this.parsedPath,Z=J.objectName,Q=J.propertyName;let ee=J.propertyIndex;if(_||(_=PropertyBinding.findNode(this.rootNode,J.nodeName),this.node=_),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!_){warn("PropertyBinding: No target node found for track: "+this.path+".");return}if(Z){let re=J.objectIndex;switch(Z){case"materials":if(!_.material){error("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!_.material.materials){error("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}_=_.material.materials;break;case"bones":if(!_.skeleton){error("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}_=_.skeleton.bones;for(let oe=0;oe<_.length;oe++)if(_[oe].name===re){re=oe;break}break;case"map":if("map"in _){_=_.map;break}if(!_.material){error("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!_.material.map){error("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}_=_.material.map;break;default:if(_[Z]===void 0){error("PropertyBinding: Can not bind to objectName of node undefined.",this);return}_=_[Z]}if(re!==void 0){if(_[re]===void 0){error("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,_);return}_=_[re]}}const te=_[Q];if(te===void 0){const re=J.nodeName;error("PropertyBinding: Trying to update property for track: "+re+"."+Q+" but it wasn't found.",_);return}let ne=this.Versioning.None;this.targetObject=_,_.isMaterial===!0?ne=this.Versioning.NeedsUpdate:_.isObject3D===!0&&(ne=this.Versioning.MatrixWorldNeedsUpdate);let ie=this.BindingType.Direct;if(ee!==void 0){if(Q==="morphTargetInfluences"){if(!_.geometry){error("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!_.geometry.morphAttributes){error("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}_.morphTargetDictionary[ee]!==void 0&&(ee=_.morphTargetDictionary[ee])}ie=this.BindingType.ArrayElement,this.resolvedProperty=te,this.propertyIndex=ee}else te.fromArray!==void 0&&te.toArray!==void 0?(ie=this.BindingType.HasFromToArray,this.resolvedProperty=te):Array.isArray(te)?(ie=this.BindingType.EntireArray,this.resolvedProperty=te):this.propertyName=Q;this.getValue=this.GetterByBindingType[ie],this.setValue=this.SetterByBindingTypeAndVersioning[ie][ne]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=Composite;PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray];PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AnimationObjectGroup{constructor(){this.isAnimationObjectGroup=!0,this.uuid=generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const _={};this._indicesByUUID=_;for(let Z=0,Q=arguments.length;Z!==Q;++Z)_[arguments[Z].uuid]=Z;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const J=this;this.stats={objects:{get total(){return J._objects.length},get inUse(){return this.total-J.nCachedObjects_}},get bindingsPerObject(){return J._bindings.length}}}add(){const _=this._objects,J=this._indicesByUUID,Z=this._paths,Q=this._parsedPaths,ee=this._bindings,te=ee.length;let ne,ie=_.length,re=this.nCachedObjects_;for(let oe=0,se=arguments.length;oe!==se;++oe){const ae=arguments[oe],le=ae.uuid;let ue=J[le];if(ue===void 0){ue=ie++,J[le]=ue,_.push(ae);for(let de=0,pe=te;de!==pe;++de)ee[de].push(new PropertyBinding(ae,Z[de],Q[de]))}else if(ue<re){ne=_[ue];const de=--re,pe=_[de];J[pe.uuid]=ue,_[ue]=pe,J[le]=de,_[de]=ae;for(let fe=0,_e=te;fe!==_e;++fe){const ye=ee[fe],be=ye[de];let Ae=ye[ue];ye[ue]=be,Ae===void 0&&(Ae=new PropertyBinding(ae,Z[fe],Q[fe])),ye[de]=Ae}}else _[ue]!==ne&&error("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=re}remove(){const _=this._objects,J=this._indicesByUUID,Z=this._bindings,Q=Z.length;let ee=this.nCachedObjects_;for(let te=0,ne=arguments.length;te!==ne;++te){const ie=arguments[te],re=ie.uuid,oe=J[re];if(oe!==void 0&&oe>=ee){const se=ee++,ae=_[se];J[ae.uuid]=oe,_[oe]=ae,J[re]=se,_[se]=ie;for(let le=0,ue=Q;le!==ue;++le){const de=Z[le],pe=de[se],fe=de[oe];de[oe]=pe,de[se]=fe}}}this.nCachedObjects_=ee}uncache(){const _=this._objects,J=this._indicesByUUID,Z=this._bindings,Q=Z.length;let ee=this.nCachedObjects_,te=_.length;for(let ne=0,ie=arguments.length;ne!==ie;++ne){const re=arguments[ne],oe=re.uuid,se=J[oe];if(se!==void 0)if(delete J[oe],se<ee){const ae=--ee,le=_[ae],ue=--te,de=_[ue];J[le.uuid]=se,_[se]=le,J[de.uuid]=ae,_[ae]=de,_.pop();for(let pe=0,fe=Q;pe!==fe;++pe){const _e=Z[pe],ye=_e[ae],be=_e[ue];_e[se]=ye,_e[ae]=be,_e.pop()}}else{const ae=--te,le=_[ae];ae>0&&(J[le.uuid]=se),_[se]=le,_.pop();for(let ue=0,de=Q;ue!==de;++ue){const pe=Z[ue];pe[se]=pe[ae],pe.pop()}}}this.nCachedObjects_=ee}subscribe_(_,J){const Z=this._bindingsIndicesByPath;let Q=Z[_];const ee=this._bindings;if(Q!==void 0)return ee[Q];const te=this._paths,ne=this._parsedPaths,ie=this._objects,re=ie.length,oe=this.nCachedObjects_,se=new Array(re);Q=ee.length,Z[_]=Q,te.push(_),ne.push(J),ee.push(se);for(let ae=oe,le=ie.length;ae!==le;++ae){const ue=ie[ae];se[ae]=new PropertyBinding(ue,_,J)}return se}unsubscribe_(_){const J=this._bindingsIndicesByPath,Z=J[_];if(Z!==void 0){const Q=this._paths,ee=this._parsedPaths,te=this._bindings,ne=te.length-1,ie=te[ne],re=_[ne];J[re]=Z,te[Z]=ie,te.pop(),ee[Z]=ee[ne],ee.pop(),Q[Z]=Q[ne],Q.pop()}}}class AnimationAction{constructor(_,J,Z=null,Q=J.blendMode){this._mixer=_,this._clip=J,this._localRoot=Z,this.blendMode=Q;const ee=J.tracks,te=ee.length,ne=new Array(te),ie={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding};for(let re=0;re!==te;++re){const oe=ee[re].createInterpolant(null);ne[re]=oe,oe.settings=ie}this._interpolantSettings=ie,this._interpolants=ne,this._propertyBindings=new Array(te),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(_){return this._startTime=_,this}setLoop(_,J){return this.loop=_,this.repetitions=J,this}setEffectiveWeight(_){return this.weight=_,this._effectiveWeight=this.enabled?_:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(_){return this._scheduleFading(_,0,1)}fadeOut(_){return this._scheduleFading(_,1,0)}crossFadeFrom(_,J,Z=!1){if(_.fadeOut(J),this.fadeIn(J),Z===!0){const Q=this._clip.duration,ee=_._clip.duration,te=ee/Q,ne=Q/ee;_.warp(1,te,J),this.warp(ne,1,J)}return this}crossFadeTo(_,J,Z=!1){return _.crossFadeFrom(this,J,Z)}stopFading(){const _=this._weightInterpolant;return _!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(_)),this}setEffectiveTimeScale(_){return this.timeScale=_,this._effectiveTimeScale=this.paused?0:_,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(_){return this.timeScale=this._clip.duration/_,this.stopWarping()}syncWith(_){return this.time=_.time,this.timeScale=_.timeScale,this.stopWarping()}halt(_){return this.warp(this._effectiveTimeScale,0,_)}warp(_,J,Z){const Q=this._mixer,ee=Q.time,te=this.timeScale;let ne=this._timeScaleInterpolant;ne===null&&(ne=Q._lendControlInterpolant(),this._timeScaleInterpolant=ne);const ie=ne.parameterPositions,re=ne.sampleValues;return ie[0]=ee,ie[1]=ee+Z,re[0]=_/te,re[1]=J/te,this}stopWarping(){const _=this._timeScaleInterpolant;return _!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(_)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(_,J,Z,Q){if(!this.enabled){this._updateWeight(_);return}const ee=this._startTime;if(ee!==null){const ie=(_-ee)*Z;ie<0||Z===0?J=0:(this._startTime=null,J=Z*ie)}J*=this._updateTimeScale(_);const te=this._updateTime(J),ne=this._updateWeight(_);if(ne>0){const ie=this._interpolants,re=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(let oe=0,se=ie.length;oe!==se;++oe)ie[oe].evaluate(te),re[oe].accumulateAdditive(ne);break;case NormalAnimationBlendMode:default:for(let oe=0,se=ie.length;oe!==se;++oe)ie[oe].evaluate(te),re[oe].accumulate(Q,ne)}}}_updateWeight(_){let J=0;if(this.enabled){J=this.weight;const Z=this._weightInterpolant;if(Z!==null){const Q=Z.evaluate(_)[0];J*=Q,_>Z.parameterPositions[1]&&(this.stopFading(),Q===0&&(this.enabled=!1))}}return this._effectiveWeight=J,J}_updateTimeScale(_){let J=0;if(!this.paused){J=this.timeScale;const Z=this._timeScaleInterpolant;if(Z!==null){const Q=Z.evaluate(_)[0];J*=Q,_>Z.parameterPositions[1]&&(this.stopWarping(),J===0?this.paused=!0:this.timeScale=J)}}return this._effectiveTimeScale=J,J}_updateTime(_){const J=this._clip.duration,Z=this.loop;let Q=this.time+_,ee=this._loopCount;const te=Z===LoopPingPong;if(_===0)return ee===-1?Q:te&&(ee&1)===1?J-Q:Q;if(Z===LoopOnce){ee===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(Q>=J)Q=J;else if(Q<0)Q=0;else{this.time=Q;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=Q,this._mixer.dispatchEvent({type:"finished",action:this,direction:_<0?-1:1})}}else{if(ee===-1&&(_>=0?(ee=0,this._setEndings(!0,this.repetitions===0,te)):this._setEndings(this.repetitions===0,!0,te)),Q>=J||Q<0){const ne=Math.floor(Q/J);Q-=J*ne,ee+=Math.abs(ne);const ie=this.repetitions-ee;if(ie<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,Q=_>0?J:0,this.time=Q,this._mixer.dispatchEvent({type:"finished",action:this,direction:_>0?1:-1});else{if(ie===1){const re=_<0;this._setEndings(re,!re,te)}else this._setEndings(!1,!1,te);this._loopCount=ee,this.time=Q,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:ne})}}else this.time=Q;if(te&&(ee&1)===1)return J-Q}return Q}_setEndings(_,J,Z){const Q=this._interpolantSettings;Z?(Q.endingStart=ZeroSlopeEnding,Q.endingEnd=ZeroSlopeEnding):(_?Q.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:Q.endingStart=WrapAroundEnding,J?Q.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:Q.endingEnd=WrapAroundEnding)}_scheduleFading(_,J,Z){const Q=this._mixer,ee=Q.time;let te=this._weightInterpolant;te===null&&(te=Q._lendControlInterpolant(),this._weightInterpolant=te);const ne=te.parameterPositions,ie=te.sampleValues;return ne[0]=ee,ie[0]=J,ne[1]=ee+_,ie[1]=Z,this}}const _controlInterpolantsResultBuffer=new Float32Array(1);class AnimationMixer extends EventDispatcher$1{constructor(_){super(),this._root=_,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(_,J){const Z=_._localRoot||this._root,Q=_._clip.tracks,ee=Q.length,te=_._propertyBindings,ne=_._interpolants,ie=Z.uuid,re=this._bindingsByRootAndName;let oe=re[ie];oe===void 0&&(oe={},re[ie]=oe);for(let se=0;se!==ee;++se){const ae=Q[se],le=ae.name;let ue=oe[le];if(ue!==void 0)++ue.referenceCount,te[se]=ue;else{if(ue=te[se],ue!==void 0){ue._cacheIndex===null&&(++ue.referenceCount,this._addInactiveBinding(ue,ie,le));continue}const de=J&&J._propertyBindings[se].binding.parsedPath;ue=new PropertyMixer(PropertyBinding.create(Z,le,de),ae.ValueTypeName,ae.getValueSize()),++ue.referenceCount,this._addInactiveBinding(ue,ie,le),te[se]=ue}ne[se].resultBuffer=ue.buffer}}_activateAction(_){if(!this._isActiveAction(_)){if(_._cacheIndex===null){const Z=(_._localRoot||this._root).uuid,Q=_._clip.uuid,ee=this._actionsByClip[Q];this._bindAction(_,ee&&ee.knownActions[0]),this._addInactiveAction(_,Q,Z)}const J=_._propertyBindings;for(let Z=0,Q=J.length;Z!==Q;++Z){const ee=J[Z];ee.useCount++===0&&(this._lendBinding(ee),ee.saveOriginalState())}this._lendAction(_)}}_deactivateAction(_){if(this._isActiveAction(_)){const J=_._propertyBindings;for(let Z=0,Q=J.length;Z!==Q;++Z){const ee=J[Z];--ee.useCount===0&&(ee.restoreOriginalState(),this._takeBackBinding(ee))}this._takeBackAction(_)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const _=this;this.stats={actions:{get total(){return _._actions.length},get inUse(){return _._nActiveActions}},bindings:{get total(){return _._bindings.length},get inUse(){return _._nActiveBindings}},controlInterpolants:{get total(){return _._controlInterpolants.length},get inUse(){return _._nActiveControlInterpolants}}}}_isActiveAction(_){const J=_._cacheIndex;return J!==null&&J<this._nActiveActions}_addInactiveAction(_,J,Z){const Q=this._actions,ee=this._actionsByClip;let te=ee[J];if(te===void 0)te={knownActions:[_],actionByRoot:{}},_._byClipCacheIndex=0,ee[J]=te;else{const ne=te.knownActions;_._byClipCacheIndex=ne.length,ne.push(_)}_._cacheIndex=Q.length,Q.push(_),te.actionByRoot[Z]=_}_removeInactiveAction(_){const J=this._actions,Z=J[J.length-1],Q=_._cacheIndex;Z._cacheIndex=Q,J[Q]=Z,J.pop(),_._cacheIndex=null;const ee=_._clip.uuid,te=this._actionsByClip,ne=te[ee],ie=ne.knownActions,re=ie[ie.length-1],oe=_._byClipCacheIndex;re._byClipCacheIndex=oe,ie[oe]=re,ie.pop(),_._byClipCacheIndex=null;const se=ne.actionByRoot,ae=(_._localRoot||this._root).uuid;delete se[ae],ie.length===0&&delete te[ee],this._removeInactiveBindingsForAction(_)}_removeInactiveBindingsForAction(_){const J=_._propertyBindings;for(let Z=0,Q=J.length;Z!==Q;++Z){const ee=J[Z];--ee.referenceCount===0&&this._removeInactiveBinding(ee)}}_lendAction(_){const J=this._actions,Z=_._cacheIndex,Q=this._nActiveActions++,ee=J[Q];_._cacheIndex=Q,J[Q]=_,ee._cacheIndex=Z,J[Z]=ee}_takeBackAction(_){const J=this._actions,Z=_._cacheIndex,Q=--this._nActiveActions,ee=J[Q];_._cacheIndex=Q,J[Q]=_,ee._cacheIndex=Z,J[Z]=ee}_addInactiveBinding(_,J,Z){const Q=this._bindingsByRootAndName,ee=this._bindings;let te=Q[J];te===void 0&&(te={},Q[J]=te),te[Z]=_,_._cacheIndex=ee.length,ee.push(_)}_removeInactiveBinding(_){const J=this._bindings,Z=_.binding,Q=Z.rootNode.uuid,ee=Z.path,te=this._bindingsByRootAndName,ne=te[Q],ie=J[J.length-1],re=_._cacheIndex;ie._cacheIndex=re,J[re]=ie,J.pop(),delete ne[ee],Object.keys(ne).length===0&&delete te[Q]}_lendBinding(_){const J=this._bindings,Z=_._cacheIndex,Q=this._nActiveBindings++,ee=J[Q];_._cacheIndex=Q,J[Q]=_,ee._cacheIndex=Z,J[Z]=ee}_takeBackBinding(_){const J=this._bindings,Z=_._cacheIndex,Q=--this._nActiveBindings,ee=J[Q];_._cacheIndex=Q,J[Q]=_,ee._cacheIndex=Z,J[Z]=ee}_lendControlInterpolant(){const _=this._controlInterpolants,J=this._nActiveControlInterpolants++;let Z=_[J];return Z===void 0&&(Z=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,_controlInterpolantsResultBuffer),Z.__cacheIndex=J,_[J]=Z),Z}_takeBackControlInterpolant(_){const J=this._controlInterpolants,Z=_.__cacheIndex,Q=--this._nActiveControlInterpolants,ee=J[Q];_.__cacheIndex=Q,J[Q]=_,ee.__cacheIndex=Z,J[Z]=ee}clipAction(_,J,Z){const Q=J||this._root,ee=Q.uuid;let te=typeof _=="string"?AnimationClip.findByName(Q,_):_;const ne=te!==null?te.uuid:_,ie=this._actionsByClip[ne];let re=null;if(Z===void 0&&(te!==null?Z=te.blendMode:Z=NormalAnimationBlendMode),ie!==void 0){const se=ie.actionByRoot[ee];if(se!==void 0&&se.blendMode===Z)return se;re=ie.knownActions[0],te===null&&(te=re._clip)}if(te===null)return null;const oe=new AnimationAction(this,te,J,Z);return this._bindAction(oe,re),this._addInactiveAction(oe,ne,ee),oe}existingAction(_,J){const Z=J||this._root,Q=Z.uuid,ee=typeof _=="string"?AnimationClip.findByName(Z,_):_,te=ee?ee.uuid:_,ne=this._actionsByClip[te];return ne!==void 0&&ne.actionByRoot[Q]||null}stopAllAction(){const _=this._actions,J=this._nActiveActions;for(let Z=J-1;Z>=0;--Z)_[Z].stop();return this}update(_){_*=this.timeScale;const J=this._actions,Z=this._nActiveActions,Q=this.time+=_,ee=Math.sign(_),te=this._accuIndex^=1;for(let re=0;re!==Z;++re)J[re]._update(Q,_,ee,te);const ne=this._bindings,ie=this._nActiveBindings;for(let re=0;re!==ie;++re)ne[re].apply(te);return this}setTime(_){this.time=0;for(let J=0;J<this._actions.length;J++)this._actions[J].time=0;return this.update(_)}getRoot(){return this._root}uncacheClip(_){const J=this._actions,Z=_.uuid,Q=this._actionsByClip,ee=Q[Z];if(ee!==void 0){const te=ee.knownActions;for(let ne=0,ie=te.length;ne!==ie;++ne){const re=te[ne];this._deactivateAction(re);const oe=re._cacheIndex,se=J[J.length-1];re._cacheIndex=null,re._byClipCacheIndex=null,se._cacheIndex=oe,J[oe]=se,J.pop(),this._removeInactiveBindingsForAction(re)}delete Q[Z]}}uncacheRoot(_){const J=_.uuid,Z=this._actionsByClip;for(const te in Z){const ne=Z[te].actionByRoot,ie=ne[J];ie!==void 0&&(this._deactivateAction(ie),this._removeInactiveAction(ie))}const Q=this._bindingsByRootAndName,ee=Q[J];if(ee!==void 0)for(const te in ee){const ne=ee[te];ne.restoreOriginalState(),this._removeInactiveBinding(ne)}}uncacheAction(_,J){const Z=this.existingAction(_,J);Z!==null&&(this._deactivateAction(Z),this._removeInactiveAction(Z))}}class RenderTarget3D extends RenderTarget{constructor(_=1,J=1,Z=1,Q={}){super(_,J,Q),this.isRenderTarget3D=!0,this.depth=Z,this.texture=new Data3DTexture(null,_,J,Z),this._setTextureOptions(Q),this.texture.isRenderTargetTexture=!0}}class Uniform{constructor(_){this.value=_}clone(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())}}let _id$3=0;class UniformsGroup extends EventDispatcher$1{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:_id$3++}),this.name="",this.usage=StaticDrawUsage,this.uniforms=[]}add(_){return this.uniforms.push(_),this}remove(_){const J=this.uniforms.indexOf(_);return J!==-1&&this.uniforms.splice(J,1),this}setName(_){return this.name=_,this}setUsage(_){return this.usage=_,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(_){this.name=_.name,this.usage=_.usage;const J=_.uniforms;this.uniforms.length=0;for(let Z=0,Q=J.length;Z<Q;Z++){const ee=Array.isArray(J[Z])?J[Z]:[J[Z]];for(let te=0;te<ee.length;te++)this.uniforms.push(ee[te].clone())}return this}clone(){return new this.constructor().copy(this)}}class InstancedInterleavedBuffer extends InterleavedBuffer{constructor(_,J,Z=1){super(_,J),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=Z}copy(_){return super.copy(_),this.meshPerAttribute=_.meshPerAttribute,this}clone(_){const J=super.clone(_);return J.meshPerAttribute=this.meshPerAttribute,J}toJSON(_){const J=super.toJSON(_);return J.isInstancedInterleavedBuffer=!0,J.meshPerAttribute=this.meshPerAttribute,J}}class GLBufferAttribute{constructor(_,J,Z,Q,ee,te=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=_,this.type=J,this.itemSize=Z,this.elementSize=Q,this.count=ee,this.normalized=te,this.version=0}set needsUpdate(_){_===!0&&this.version++}setBuffer(_){return this.buffer=_,this}setType(_,J){return this.type=_,this.elementSize=J,this}setItemSize(_){return this.itemSize=_,this}setCount(_){return this.count=_,this}}const _matrix=new Matrix4;class Raycaster{constructor(_,J,Z=0,Q=1/0){this.ray=new Ray(_,J),this.near=Z,this.far=Q,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(_,J){this.ray.set(_,J)}setFromCamera(_,J){J.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(J.matrixWorld),this.ray.direction.set(_.x,_.y,.5).unproject(J).sub(this.ray.origin).normalize(),this.camera=J):J.isOrthographicCamera?(this.ray.origin.set(_.x,_.y,(J.near+J.far)/(J.near-J.far)).unproject(J),this.ray.direction.set(0,0,-1).transformDirection(J.matrixWorld),this.camera=J):error("Raycaster: Unsupported camera type: "+J.type)}setFromXRController(_){return _matrix.identity().extractRotation(_.matrixWorld),this.ray.origin.setFromMatrixPosition(_.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(_matrix),this}intersectObject(_,J=!0,Z=[]){return intersect(_,this,Z,J),Z.sort(ascSort),Z}intersectObjects(_,J=!0,Z=[]){for(let Q=0,ee=_.length;Q<ee;Q++)intersect(_[Q],this,Z,J);return Z.sort(ascSort),Z}}function ascSort(G,_){return G.distance-_.distance}function intersect(G,_,J,Z){let Q=!0;if(G.layers.test(_.layers)&&G.raycast(_,J)===!1&&(Q=!1),Q===!0&&Z===!0){const ee=G.children;for(let te=0,ne=ee.length;te<ne;te++)intersect(ee[te],_,J,!0)}}class Timer{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(_){this._document=_,_.hidden!==void 0&&(this._pageVisibilityHandler=handleVisibilityChange.bind(this),_.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(_){return this._timescale=_,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(_){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(_!==void 0?_:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function handleVisibilityChange(){this._document.hidden===!1&&this.reset()}class Spherical{constructor(_=1,J=0,Z=0){this.radius=_,this.phi=J,this.theta=Z}set(_,J,Z){return this.radius=_,this.phi=J,this.theta=Z,this}copy(_){return this.radius=_.radius,this.phi=_.phi,this.theta=_.theta,this}makeSafe(){return this.phi=clamp$1(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(_){return this.setFromCartesianCoords(_.x,_.y,_.z)}setFromCartesianCoords(_,J,Z){return this.radius=Math.sqrt(_*_+J*J+Z*Z),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(_,Z),this.phi=Math.acos(clamp$1(J/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Cylindrical{constructor(_=1,J=0,Z=0){this.radius=_,this.theta=J,this.y=Z}set(_,J,Z){return this.radius=_,this.theta=J,this.y=Z,this}copy(_){return this.radius=_.radius,this.theta=_.theta,this.y=_.y,this}setFromVector3(_){return this.setFromCartesianCoords(_.x,_.y,_.z)}setFromCartesianCoords(_,J,Z){return this.radius=Math.sqrt(_*_+Z*Z),this.theta=Math.atan2(_,Z),this.y=J,this}clone(){return new this.constructor().copy(this)}}class Matrix2{constructor(_,J,Z,Q){Matrix2.prototype.isMatrix2=!0,this.elements=[1,0,0,1],_!==void 0&&this.set(_,J,Z,Q)}identity(){return this.set(1,0,0,1),this}fromArray(_,J=0){for(let Z=0;Z<4;Z++)this.elements[Z]=_[Z+J];return this}set(_,J,Z,Q){const ee=this.elements;return ee[0]=_,ee[2]=J,ee[1]=Z,ee[3]=Q,this}}const _vector$4=new Vector2;class Box2{constructor(_=new Vector2(1/0,1/0),J=new Vector2(-1/0,-1/0)){this.isBox2=!0,this.min=_,this.max=J}set(_,J){return this.min.copy(_),this.max.copy(J),this}setFromPoints(_){this.makeEmpty();for(let J=0,Z=_.length;J<Z;J++)this.expandByPoint(_[J]);return this}setFromCenterAndSize(_,J){const Z=_vector$4.copy(J).multiplyScalar(.5);return this.min.copy(_).sub(Z),this.max.copy(_).add(Z),this}clone(){return new this.constructor().copy(this)}copy(_){return this.min.copy(_.min),this.max.copy(_.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(_){return this.isEmpty()?_.set(0,0):_.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(_){return this.isEmpty()?_.set(0,0):_.subVectors(this.max,this.min)}expandByPoint(_){return this.min.min(_),this.max.max(_),this}expandByVector(_){return this.min.sub(_),this.max.add(_),this}expandByScalar(_){return this.min.addScalar(-_),this.max.addScalar(_),this}containsPoint(_){return _.x>=this.min.x&&_.x<=this.max.x&&_.y>=this.min.y&&_.y<=this.max.y}containsBox(_){return this.min.x<=_.min.x&&_.max.x<=this.max.x&&this.min.y<=_.min.y&&_.max.y<=this.max.y}getParameter(_,J){return J.set((_.x-this.min.x)/(this.max.x-this.min.x),(_.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(_){return _.max.x>=this.min.x&&_.min.x<=this.max.x&&_.max.y>=this.min.y&&_.min.y<=this.max.y}clampPoint(_,J){return J.copy(_).clamp(this.min,this.max)}distanceToPoint(_){return this.clampPoint(_,_vector$4).distanceTo(_)}intersect(_){return this.min.max(_.min),this.max.min(_.max),this.isEmpty()&&this.makeEmpty(),this}union(_){return this.min.min(_.min),this.max.max(_.max),this}translate(_){return this.min.add(_),this.max.add(_),this}equals(_){return _.min.equals(this.min)&&_.max.equals(this.max)}}const _startP=new Vector3,_startEnd=new Vector3,_d1=new Vector3,_d2=new Vector3,_r=new Vector3,_c1=new Vector3,_c2=new Vector3;class Line3{constructor(_=new Vector3,J=new Vector3){this.start=_,this.end=J}set(_,J){return this.start.copy(_),this.end.copy(J),this}copy(_){return this.start.copy(_.start),this.end.copy(_.end),this}getCenter(_){return _.addVectors(this.start,this.end).multiplyScalar(.5)}delta(_){return _.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(_,J){return this.delta(J).multiplyScalar(_).add(this.start)}closestPointToPointParameter(_,J){_startP.subVectors(_,this.start),_startEnd.subVectors(this.end,this.start);const Z=_startEnd.dot(_startEnd);let ee=_startEnd.dot(_startP)/Z;return J&&(ee=clamp$1(ee,0,1)),ee}closestPointToPoint(_,J,Z){const Q=this.closestPointToPointParameter(_,J);return this.delta(Z).multiplyScalar(Q).add(this.start)}distanceSqToLine3(_,J=_c1,Z=_c2){const Q=10000000000000001e-32;let ee,te;const ne=this.start,ie=_.start,re=this.end,oe=_.end;_d1.subVectors(re,ne),_d2.subVectors(oe,ie),_r.subVectors(ne,ie);const se=_d1.dot(_d1),ae=_d2.dot(_d2),le=_d2.dot(_r);if(se<=Q&&ae<=Q)return J.copy(ne),Z.copy(ie),J.sub(Z),J.dot(J);if(se<=Q)ee=0,te=le/ae,te=clamp$1(te,0,1);else{const ue=_d1.dot(_r);if(ae<=Q)te=0,ee=clamp$1(-ue/se,0,1);else{const de=_d1.dot(_d2),pe=se*ae-de*de;pe!==0?ee=clamp$1((de*le-ue*ae)/pe,0,1):ee=0,te=(de*ee+le)/ae,te<0?(te=0,ee=clamp$1(-ue/se,0,1)):te>1&&(te=1,ee=clamp$1((de-ue)/se,0,1))}}return J.copy(ne).add(_d1.multiplyScalar(ee)),Z.copy(ie).add(_d2.multiplyScalar(te)),J.sub(Z),J.dot(J)}applyMatrix4(_){return this.start.applyMatrix4(_),this.end.applyMatrix4(_),this}equals(_){return _.start.equals(this.start)&&_.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _vector$3=new Vector3;class SpotLightHelper extends Object3D{constructor(_,J){super(),this.light=_,this.matrixAutoUpdate=!1,this.color=J,this.type="SpotLightHelper";const Z=new BufferGeometry,Q=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let te=0,ne=1,ie=32;te<ie;te++,ne++){const re=te/ie*Math.PI*2,oe=ne/ie*Math.PI*2;Q.push(Math.cos(re),Math.sin(re),1,Math.cos(oe),Math.sin(oe),1)}Z.setAttribute("position",new Float32BufferAttribute(Q,3));const ee=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(Z,ee),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const _=this.light.distance?this.light.distance:1e3,J=_*Math.tan(this.light.angle);this.cone.scale.set(J,J,_),_vector$3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const _vector$2=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;class SkeletonHelper extends LineSegments{constructor(_){const J=getBoneList(_),Z=new BufferGeometry,Q=[],ee=[];for(let re=0;re<J.length;re++){const oe=J[re];oe.parent&&oe.parent.isBone&&(Q.push(0,0,0),Q.push(0,0,0),ee.push(0,0,0),ee.push(0,0,0))}Z.setAttribute("position",new Float32BufferAttribute(Q,3)),Z.setAttribute("color",new Float32BufferAttribute(ee,3));const te=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(Z,te),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=_,this.bones=J,this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1;const ne=new Color(255),ie=new Color(65280);this.setColors(ne,ie)}updateMatrixWorld(_){const J=this.bones,Z=this.geometry,Q=Z.getAttribute("position");_matrixWorldInv.copy(this.root.matrixWorld).invert();for(let ee=0,te=0;ee<J.length;ee++){const ne=J[ee];ne.parent&&ne.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,ne.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),Q.setXYZ(te,_vector$2.x,_vector$2.y,_vector$2.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,ne.parent.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),Q.setXYZ(te+1,_vector$2.x,_vector$2.y,_vector$2.z),te+=2)}Z.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(_)}setColors(_,J){const Q=this.geometry.getAttribute("color");for(let ee=0;ee<Q.count;ee+=2)Q.setXYZ(ee,_.r,_.g,_.b),Q.setXYZ(ee+1,J.r,J.g,J.b);return Q.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function getBoneList(G){const _=[];G.isBone===!0&&_.push(G);for(let J=0;J<G.children.length;J++)_.push(...getBoneList(G.children[J]));return _}class PointLightHelper extends Mesh{constructor(_,J,Z){const Q=new SphereGeometry(J,4,2),ee=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});super(Q,ee),this.light=_,this.color=Z,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _vector$1=new Vector3,_color1=new Color,_color2=new Color;class HemisphereLightHelper extends Object3D{constructor(_,J,Z){super(),this.light=_,this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1,this.color=Z,this.type="HemisphereLightHelper";const Q=new OctahedronGeometry(J);Q.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const ee=Q.getAttribute("position"),te=new Float32Array(ee.count*3);Q.setAttribute("color",new BufferAttribute(te,3)),this.add(new Mesh(Q,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const _=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const J=_.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(let Z=0,Q=J.count;Z<Q;Z++){const ee=Z<Q/2?_color1:_color2;J.setXYZ(Z,ee.r,ee.g,ee.b)}J.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),_.lookAt(_vector$1.setFromMatrixPosition(this.light.matrixWorld).negate())}}class GridHelper extends LineSegments{constructor(_=10,J=10,Z=4473924,Q=8947848){Z=new Color(Z),Q=new Color(Q);const ee=J/2,te=_/J,ne=_/2,ie=[],re=[];for(let ae=0,le=0,ue=-ne;ae<=J;ae++,ue+=te){ie.push(-ne,0,ue,ne,0,ue),ie.push(ue,0,-ne,ue,0,ne);const de=ae===ee?Z:Q;de.toArray(re,le),le+=3,de.toArray(re,le),le+=3,de.toArray(re,le),le+=3,de.toArray(re,le),le+=3}const oe=new BufferGeometry;oe.setAttribute("position",new Float32BufferAttribute(ie,3)),oe.setAttribute("color",new Float32BufferAttribute(re,3));const se=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(oe,se),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class PolarGridHelper extends LineSegments{constructor(_=10,J=16,Z=8,Q=64,ee=4473924,te=8947848){ee=new Color(ee),te=new Color(te);const ne=[],ie=[];if(J>1)for(let se=0;se<J;se++){const ae=se/J*(Math.PI*2),le=Math.sin(ae)*_,ue=Math.cos(ae)*_;ne.push(0,0,0),ne.push(le,0,ue);const de=se&1?ee:te;ie.push(de.r,de.g,de.b),ie.push(de.r,de.g,de.b)}for(let se=0;se<Z;se++){const ae=se&1?ee:te,le=_-_/Z*se;for(let ue=0;ue<Q;ue++){let de=ue/Q*(Math.PI*2),pe=Math.sin(de)*le,fe=Math.cos(de)*le;ne.push(pe,0,fe),ie.push(ae.r,ae.g,ae.b),de=(ue+1)/Q*(Math.PI*2),pe=Math.sin(de)*le,fe=Math.cos(de)*le,ne.push(pe,0,fe),ie.push(ae.r,ae.g,ae.b)}}const re=new BufferGeometry;re.setAttribute("position",new Float32BufferAttribute(ne,3)),re.setAttribute("color",new Float32BufferAttribute(ie,3));const oe=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(re,oe),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const _v1$8=new Vector3,_v2=new Vector3,_v3=new Vector3;class DirectionalLightHelper extends Object3D{constructor(_,J,Z){super(),this.light=_,this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1,this.color=Z,this.type="DirectionalLightHelper",J===void 0&&(J=1);let Q=new BufferGeometry;Q.setAttribute("position",new Float32BufferAttribute([-J,J,0,J,J,0,J,-J,0,-J,-J,0,-J,J,0],3));const ee=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line(Q,ee),this.add(this.lightPlane),Q=new BufferGeometry,Q.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line(Q,ee),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),_v1$8.setFromMatrixPosition(this.light.matrixWorld),_v2.setFromMatrixPosition(this.light.target.matrixWorld),_v3.subVectors(_v2,_v1$8),this.lightPlane.lookAt(_v2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2),this.targetLine.scale.z=_v3.length()}}const _vector=new Vector3,_camera=new Camera;class CameraHelper extends LineSegments{constructor(_){const J=new BufferGeometry,Z=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),Q=[],ee=[],te={};ne("n1","n2"),ne("n2","n4"),ne("n4","n3"),ne("n3","n1"),ne("f1","f2"),ne("f2","f4"),ne("f4","f3"),ne("f3","f1"),ne("n1","f1"),ne("n2","f2"),ne("n3","f3"),ne("n4","f4"),ne("p","n1"),ne("p","n2"),ne("p","n3"),ne("p","n4"),ne("u1","u2"),ne("u2","u3"),ne("u3","u1"),ne("c","t"),ne("p","c"),ne("cn1","cn2"),ne("cn3","cn4"),ne("cf1","cf2"),ne("cf3","cf4");function ne(ue,de){ie(ue),ie(de)}function ie(ue){Q.push(0,0,0),ee.push(0,0,0),te[ue]===void 0&&(te[ue]=[]),te[ue].push(Q.length/3-1)}J.setAttribute("position",new Float32BufferAttribute(Q,3)),J.setAttribute("color",new Float32BufferAttribute(ee,3)),super(J,Z),this.type="CameraHelper",this.camera=_,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=te,this.update();const re=new Color(16755200),oe=new Color(16711680),se=new Color(43775),ae=new Color(16777215),le=new Color(3355443);this.setColors(re,oe,se,ae,le)}setColors(_,J,Z,Q,ee){const ne=this.geometry.getAttribute("color");return ne.setXYZ(0,_.r,_.g,_.b),ne.setXYZ(1,_.r,_.g,_.b),ne.setXYZ(2,_.r,_.g,_.b),ne.setXYZ(3,_.r,_.g,_.b),ne.setXYZ(4,_.r,_.g,_.b),ne.setXYZ(5,_.r,_.g,_.b),ne.setXYZ(6,_.r,_.g,_.b),ne.setXYZ(7,_.r,_.g,_.b),ne.setXYZ(8,_.r,_.g,_.b),ne.setXYZ(9,_.r,_.g,_.b),ne.setXYZ(10,_.r,_.g,_.b),ne.setXYZ(11,_.r,_.g,_.b),ne.setXYZ(12,_.r,_.g,_.b),ne.setXYZ(13,_.r,_.g,_.b),ne.setXYZ(14,_.r,_.g,_.b),ne.setXYZ(15,_.r,_.g,_.b),ne.setXYZ(16,_.r,_.g,_.b),ne.setXYZ(17,_.r,_.g,_.b),ne.setXYZ(18,_.r,_.g,_.b),ne.setXYZ(19,_.r,_.g,_.b),ne.setXYZ(20,_.r,_.g,_.b),ne.setXYZ(21,_.r,_.g,_.b),ne.setXYZ(22,_.r,_.g,_.b),ne.setXYZ(23,_.r,_.g,_.b),ne.setXYZ(24,J.r,J.g,J.b),ne.setXYZ(25,J.r,J.g,J.b),ne.setXYZ(26,J.r,J.g,J.b),ne.setXYZ(27,J.r,J.g,J.b),ne.setXYZ(28,J.r,J.g,J.b),ne.setXYZ(29,J.r,J.g,J.b),ne.setXYZ(30,J.r,J.g,J.b),ne.setXYZ(31,J.r,J.g,J.b),ne.setXYZ(32,Z.r,Z.g,Z.b),ne.setXYZ(33,Z.r,Z.g,Z.b),ne.setXYZ(34,Z.r,Z.g,Z.b),ne.setXYZ(35,Z.r,Z.g,Z.b),ne.setXYZ(36,Z.r,Z.g,Z.b),ne.setXYZ(37,Z.r,Z.g,Z.b),ne.setXYZ(38,Q.r,Q.g,Q.b),ne.setXYZ(39,Q.r,Q.g,Q.b),ne.setXYZ(40,ee.r,ee.g,ee.b),ne.setXYZ(41,ee.r,ee.g,ee.b),ne.setXYZ(42,ee.r,ee.g,ee.b),ne.setXYZ(43,ee.r,ee.g,ee.b),ne.setXYZ(44,ee.r,ee.g,ee.b),ne.setXYZ(45,ee.r,ee.g,ee.b),ne.setXYZ(46,ee.r,ee.g,ee.b),ne.setXYZ(47,ee.r,ee.g,ee.b),ne.setXYZ(48,ee.r,ee.g,ee.b),ne.setXYZ(49,ee.r,ee.g,ee.b),ne.needsUpdate=!0,this}update(){const _=this.geometry,J=this.pointMap,Z=1,Q=1;let ee,te;if(_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)ee=1,te=0;else if(this.camera.coordinateSystem===WebGLCoordinateSystem)ee=-1,te=1;else if(this.camera.coordinateSystem===WebGPUCoordinateSystem)ee=0,te=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);setPoint("c",J,_,_camera,0,0,ee),setPoint("t",J,_,_camera,0,0,te),setPoint("n1",J,_,_camera,-Z,-Q,ee),setPoint("n2",J,_,_camera,Z,-Q,ee),setPoint("n3",J,_,_camera,-Z,Q,ee),setPoint("n4",J,_,_camera,Z,Q,ee),setPoint("f1",J,_,_camera,-Z,-Q,te),setPoint("f2",J,_,_camera,Z,-Q,te),setPoint("f3",J,_,_camera,-Z,Q,te),setPoint("f4",J,_,_camera,Z,Q,te),setPoint("u1",J,_,_camera,Z*.7,Q*1.1,ee),setPoint("u2",J,_,_camera,-Z*.7,Q*1.1,ee),setPoint("u3",J,_,_camera,0,Q*2,ee),setPoint("cf1",J,_,_camera,-Z,0,te),setPoint("cf2",J,_,_camera,Z,0,te),setPoint("cf3",J,_,_camera,0,-Q,te),setPoint("cf4",J,_,_camera,0,Q,te),setPoint("cn1",J,_,_camera,-Z,0,ee),setPoint("cn2",J,_,_camera,Z,0,ee),setPoint("cn3",J,_,_camera,0,-Q,ee),setPoint("cn4",J,_,_camera,0,Q,ee),_.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function setPoint(G,_,J,Z,Q,ee,te){_vector.set(Q,ee,te).unproject(Z);const ne=_[G];if(ne!==void 0){const ie=J.getAttribute("position");for(let re=0,oe=ne.length;re<oe;re++)ie.setXYZ(ne[re],_vector.x,_vector.y,_vector.z)}}const _box=new Box3;class BoxHelper extends LineSegments{constructor(_,J=16776960){const Z=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Q=new Float32Array(24),ee=new BufferGeometry;ee.setIndex(new BufferAttribute(Z,1)),ee.setAttribute("position",new BufferAttribute(Q,3)),super(ee,new LineBasicMaterial({color:J,toneMapped:!1})),this.object=_,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&_box.setFromObject(this.object),_box.isEmpty())return;const _=_box.min,J=_box.max,Z=this.geometry.attributes.position,Q=Z.array;Q[0]=J.x,Q[1]=J.y,Q[2]=J.z,Q[3]=_.x,Q[4]=J.y,Q[5]=J.z,Q[6]=_.x,Q[7]=_.y,Q[8]=J.z,Q[9]=J.x,Q[10]=_.y,Q[11]=J.z,Q[12]=J.x,Q[13]=J.y,Q[14]=_.z,Q[15]=_.x,Q[16]=J.y,Q[17]=_.z,Q[18]=_.x,Q[19]=_.y,Q[20]=_.z,Q[21]=J.x,Q[22]=_.y,Q[23]=_.z,Z.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(_){return this.object=_,this.update(),this}copy(_,J){return super.copy(_,J),this.object=_.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Box3Helper extends LineSegments{constructor(_,J=16776960){const Z=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Q=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],ee=new BufferGeometry;ee.setIndex(new BufferAttribute(Z,1)),ee.setAttribute("position",new Float32BufferAttribute(Q,3)),super(ee,new LineBasicMaterial({color:J,toneMapped:!1})),this.box=_,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(_){const J=this.box;J.isEmpty()||(J.getCenter(this.position),J.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(_))}dispose(){this.geometry.dispose(),this.material.dispose()}}class PlaneHelper extends Line{constructor(_,J=1,Z=16776960){const Q=Z,ee=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],te=new BufferGeometry;te.setAttribute("position",new Float32BufferAttribute(ee,3)),te.computeBoundingSphere(),super(te,new LineBasicMaterial({color:Q,toneMapped:!1})),this.type="PlaneHelper",this.plane=_,this.size=J;const ne=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],ie=new BufferGeometry;ie.setAttribute("position",new Float32BufferAttribute(ne,3)),ie.computeBoundingSphere(),this.add(new Mesh(ie,new MeshBasicMaterial({color:Q,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(_){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(_)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const _axis=new Vector3;let _lineGeometry,_coneGeometry;class ArrowHelper extends Object3D{constructor(_=new Vector3(0,0,1),J=new Vector3(0,0,0),Z=1,Q=16776960,ee=Z*.2,te=ee*.2){super(),this.type="ArrowHelper",_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new ConeGeometry(.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(J),this.line=new Line(_lineGeometry,new LineBasicMaterial({color:Q,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:Q,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(_),this.setLength(Z,ee,te)}setDirection(_){if(_.y>.99999)this.quaternion.set(0,0,0,1);else if(_.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(_.z,0,-_.x).normalize();const J=Math.acos(_.y);this.quaternion.setFromAxisAngle(_axis,J)}}setLength(_,J=_*.2,Z=J*.2){this.line.scale.set(1,Math.max(1e-4,_-J),1),this.line.updateMatrix(),this.cone.scale.set(Z,J,Z),this.cone.position.y=_,this.cone.updateMatrix()}setColor(_){this.line.material.color.set(_),this.cone.material.color.set(_)}copy(_){return super.copy(_,!1),this.line.copy(_.line),this.cone.copy(_.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class AxesHelper extends LineSegments{constructor(_=1){const J=[0,0,0,_,0,0,0,0,0,0,_,0,0,0,0,0,0,_],Z=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],Q=new BufferGeometry;Q.setAttribute("position",new Float32BufferAttribute(J,3)),Q.setAttribute("color",new Float32BufferAttribute(Z,3));const ee=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(Q,ee),this.type="AxesHelper"}setColors(_,J,Z){const Q=new Color,ee=this.geometry.attributes.color.array;return Q.set(_),Q.toArray(ee,0),Q.toArray(ee,3),Q.set(J),Q.toArray(ee,6),Q.toArray(ee,9),Q.set(Z),Q.toArray(ee,12),Q.toArray(ee,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ShapePath{constructor(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}moveTo(_,J){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(_,J),this}lineTo(_,J){return this.currentPath.lineTo(_,J),this}quadraticCurveTo(_,J,Z,Q){return this.currentPath.quadraticCurveTo(_,J,Z,Q),this}bezierCurveTo(_,J,Z,Q,ee,te){return this.currentPath.bezierCurveTo(_,J,Z,Q,ee,te),this}splineThru(_){return this.currentPath.splineThru(_),this}toShapes(_){function J(fe){const _e=[];for(let ye=0,be=fe.length;ye<be;ye++){const Ae=fe[ye],Ce=new Shape;Ce.curves=Ae.curves,_e.push(Ce)}return _e}function Z(fe,_e){const ye=_e.length;let be=!1;for(let Ae=ye-1,Ce=0;Ce<ye;Ae=Ce++){let Ee=_e[Ae],Re=_e[Ce],Te=Re.x-Ee.x,Me=Re.y-Ee.y;if(Math.abs(Me)>Number.EPSILON){if(Me<0&&(Ee=_e[Ce],Te=-Te,Re=_e[Ae],Me=-Me),fe.y<Ee.y||fe.y>Re.y)continue;if(fe.y===Ee.y){if(fe.x===Ee.x)return!0}else{const Ne=Me*(fe.x-Ee.x)-Te*(fe.y-Ee.y);if(Ne===0)return!0;if(Ne<0)continue;be=!be}}else{if(fe.y!==Ee.y)continue;if(Re.x<=fe.x&&fe.x<=Ee.x||Ee.x<=fe.x&&fe.x<=Re.x)return!0}}return be}const Q=ShapeUtils.isClockWise,ee=this.subPaths;if(ee.length===0)return[];let te,ne,ie;const re=[];if(ee.length===1)return ne=ee[0],ie=new Shape,ie.curves=ne.curves,re.push(ie),re;let oe=!Q(ee[0].getPoints());oe=_?!oe:oe;const se=[],ae=[];let le=[],ue=0,de;ae[ue]=void 0,le[ue]=[];for(let fe=0,_e=ee.length;fe<_e;fe++)ne=ee[fe],de=ne.getPoints(),te=Q(de),te=_?!te:te,te?(!oe&&ae[ue]&&ue++,ae[ue]={s:new Shape,p:de},ae[ue].s.curves=ne.curves,oe&&ue++,le[ue]=[]):le[ue].push({h:ne,p:de[0]});if(!ae[0])return J(ee);if(ae.length>1){let fe=!1,_e=0;for(let ye=0,be=ae.length;ye<be;ye++)se[ye]=[];for(let ye=0,be=ae.length;ye<be;ye++){const Ae=le[ye];for(let Ce=0;Ce<Ae.length;Ce++){const Ee=Ae[Ce];let Re=!0;for(let Te=0;Te<ae.length;Te++)Z(Ee.p,ae[Te].p)&&(ye!==Te&&_e++,Re?(Re=!1,se[Te].push(Ee)):fe=!0);Re&&se[ye].push(Ee)}}_e>0&&fe===!1&&(le=se)}let pe;for(let fe=0,_e=ae.length;fe<_e;fe++){ie=ae[fe].s,re.push(ie),pe=le[fe];for(let ye=0,be=pe.length;ye<be;ye++)ie.holes.push(pe[ye].h)}return re}}class Controls extends EventDispatcher$1{constructor(_,J=null){super(),this.object=_,this.domElement=J,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(_){if(_===void 0){warn("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=_}disconnect(){}dispose(){}update(){}}function contain(G,_){const J=G.image&&G.image.width?G.image.width/G.image.height:1;return J>_?(G.repeat.x=1,G.repeat.y=J/_,G.offset.x=0,G.offset.y=(1-G.repeat.y)/2):(G.repeat.x=_/J,G.repeat.y=1,G.offset.x=(1-G.repeat.x)/2,G.offset.y=0),G}function cover(G,_){const J=G.image&&G.image.width?G.image.width/G.image.height:1;return J>_?(G.repeat.x=_/J,G.repeat.y=1,G.offset.x=(1-G.repeat.x)/2,G.offset.y=0):(G.repeat.x=1,G.repeat.y=J/_,G.offset.x=0,G.offset.y=(1-G.repeat.y)/2),G}function fill(G){return G.repeat.x=1,G.repeat.y=1,G.offset.x=0,G.offset.y=0,G}function getByteLength(G,_,J,Z){const Q=getTextureTypeByteLength(Z);switch(J){case AlphaFormat:return G*_;case RedFormat:return G*_/Q.components*Q.byteLength;case RedIntegerFormat:return G*_/Q.components*Q.byteLength;case RGFormat:return G*_*2/Q.components*Q.byteLength;case RGIntegerFormat:return G*_*2/Q.components*Q.byteLength;case RGBFormat:return G*_*3/Q.components*Q.byteLength;case RGBAFormat:return G*_*4/Q.components*Q.byteLength;case RGBAIntegerFormat:return G*_*4/Q.components*Q.byteLength;case RGB_S3TC_DXT1_Format:case RGBA_S3TC_DXT1_Format:return Math.floor((G+3)/4)*Math.floor((_+3)/4)*8;case RGBA_S3TC_DXT3_Format:case RGBA_S3TC_DXT5_Format:return Math.floor((G+3)/4)*Math.floor((_+3)/4)*16;case RGB_PVRTC_2BPPV1_Format:case RGBA_PVRTC_2BPPV1_Format:return Math.max(G,16)*Math.max(_,8)/4;case RGB_PVRTC_4BPPV1_Format:case RGBA_PVRTC_4BPPV1_Format:return Math.max(G,8)*Math.max(_,8)/2;case RGB_ETC1_Format:case RGB_ETC2_Format:return Math.floor((G+3)/4)*Math.floor((_+3)/4)*8;case RGBA_ETC2_EAC_Format:return Math.floor((G+3)/4)*Math.floor((_+3)/4)*16;case RGBA_ASTC_4x4_Format:return Math.floor((G+3)/4)*Math.floor((_+3)/4)*16;case RGBA_ASTC_5x4_Format:return Math.floor((G+4)/5)*Math.floor((_+3)/4)*16;case RGBA_ASTC_5x5_Format:return Math.floor((G+4)/5)*Math.floor((_+4)/5)*16;case RGBA_ASTC_6x5_Format:return Math.floor((G+5)/6)*Math.floor((_+4)/5)*16;case RGBA_ASTC_6x6_Format:return Math.floor((G+5)/6)*Math.floor((_+5)/6)*16;case RGBA_ASTC_8x5_Format:return Math.floor((G+7)/8)*Math.floor((_+4)/5)*16;case RGBA_ASTC_8x6_Format:return Math.floor((G+7)/8)*Math.floor((_+5)/6)*16;case RGBA_ASTC_8x8_Format:return Math.floor((G+7)/8)*Math.floor((_+7)/8)*16;case RGBA_ASTC_10x5_Format:return Math.floor((G+9)/10)*Math.floor((_+4)/5)*16;case RGBA_ASTC_10x6_Format:return Math.floor((G+9)/10)*Math.floor((_+5)/6)*16;case RGBA_ASTC_10x8_Format:return Math.floor((G+9)/10)*Math.floor((_+7)/8)*16;case RGBA_ASTC_10x10_Format:return Math.floor((G+9)/10)*Math.floor((_+9)/10)*16;case RGBA_ASTC_12x10_Format:return Math.floor((G+11)/12)*Math.floor((_+9)/10)*16;case RGBA_ASTC_12x12_Format:return Math.floor((G+11)/12)*Math.floor((_+11)/12)*16;case RGBA_BPTC_Format:case RGB_BPTC_SIGNED_Format:case RGB_BPTC_UNSIGNED_Format:return Math.ceil(G/4)*Math.ceil(_/4)*16;case RED_RGTC1_Format:case SIGNED_RED_RGTC1_Format:return Math.ceil(G/4)*Math.ceil(_/4)*8;case RED_GREEN_RGTC2_Format:case SIGNED_RED_GREEN_RGTC2_Format:return Math.ceil(G/4)*Math.ceil(_/4)*16}throw new Error(`Unable to determine texture byte length for ${J} format.`)}function getTextureTypeByteLength(G){switch(G){case UnsignedByteType:case ByteType:return{byteLength:1,components:1};case UnsignedShortType:case ShortType:case HalfFloatType:return{byteLength:2,components:1};case UnsignedShort4444Type:case UnsignedShort5551Type:return{byteLength:2,components:4};case UnsignedIntType:case IntType:case FloatType:return{byteLength:4,components:1};case UnsignedInt5999Type:case UnsignedInt101111Type:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${G}.`)}class TextureUtils{static contain(_,J){return contain(_,J)}static cover(_,J){return cover(_,J)}static fill(_){return fill(_)}static getByteLength(_,J,Z,Q){return getByteLength(_,J,Z,Q)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));typeof window<"u"&&(window.__THREE__?warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);function WebGLAnimation(){let G=null,_=!1,J=null,Z=null;function Q(ee,te){J(ee,te),Z=G.requestAnimationFrame(Q)}return{start:function(){_!==!0&&J!==null&&(Z=G.requestAnimationFrame(Q),_=!0)},stop:function(){G.cancelAnimationFrame(Z),_=!1},setAnimationLoop:function(ee){J=ee},setContext:function(ee){G=ee}}}function WebGLAttributes(G){const _=new WeakMap;function J(ne,ie){const re=ne.array,oe=ne.usage,se=re.byteLength,ae=G.createBuffer();G.bindBuffer(ie,ae),G.bufferData(ie,re,oe),ne.onUploadCallback();let le;if(re instanceof Float32Array)le=G.FLOAT;else if(typeof Float16Array<"u"&&re instanceof Float16Array)le=G.HALF_FLOAT;else if(re instanceof Uint16Array)ne.isFloat16BufferAttribute?le=G.HALF_FLOAT:le=G.UNSIGNED_SHORT;else if(re instanceof Int16Array)le=G.SHORT;else if(re instanceof Uint32Array)le=G.UNSIGNED_INT;else if(re instanceof Int32Array)le=G.INT;else if(re instanceof Int8Array)le=G.BYTE;else if(re instanceof Uint8Array)le=G.UNSIGNED_BYTE;else if(re instanceof Uint8ClampedArray)le=G.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+re);return{buffer:ae,type:le,bytesPerElement:re.BYTES_PER_ELEMENT,version:ne.version,size:se}}function Z(ne,ie,re){const oe=ie.array,se=ie.updateRanges;if(G.bindBuffer(re,ne),se.length===0)G.bufferSubData(re,0,oe);else{se.sort((le,ue)=>le.start-ue.start);let ae=0;for(let le=1;le<se.length;le++){const ue=se[ae],de=se[le];de.start<=ue.start+ue.count+1?ue.count=Math.max(ue.count,de.start+de.count-ue.start):(++ae,se[ae]=de)}se.length=ae+1;for(let le=0,ue=se.length;le<ue;le++){const de=se[le];G.bufferSubData(re,de.start*oe.BYTES_PER_ELEMENT,oe,de.start,de.count)}ie.clearUpdateRanges()}ie.onUploadCallback()}function Q(ne){return ne.isInterleavedBufferAttribute&&(ne=ne.data),_.get(ne)}function ee(ne){ne.isInterleavedBufferAttribute&&(ne=ne.data);const ie=_.get(ne);ie&&(G.deleteBuffer(ie.buffer),_.delete(ne))}function te(ne,ie){if(ne.isInterleavedBufferAttribute&&(ne=ne.data),ne.isGLBufferAttribute){const oe=_.get(ne);(!oe||oe.version<ne.version)&&_.set(ne,{buffer:ne.buffer,type:ne.type,bytesPerElement:ne.elementSize,version:ne.version});return}const re=_.get(ne);if(re===void 0)_.set(ne,J(ne,ie));else if(re.version<ne.version){if(re.size!==ne.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");Z(re.buffer,ne,ie),re.version=ne.version}}return{get:Q,remove:ee,update:te}}var alphahash_fragment=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,alphahash_pars_fragment=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,batching_pars_vertex=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,batching_vertex=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,begin_vertex=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iridescence_fragment=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,colorspace_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,lights_physical_pars_fragment=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 uv = vec2( roughness, dotNV );
	return texture2D( dfgLUT, uv ).rg;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNV * dotNV), 0.0, dotNV), material.roughness );
	vec2 dfgL = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNL * dotNL), 0.0, dotNL), material.roughness );
	vec3 FssEss_V = material.specularColor * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColor * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColor + ( 1.0 - material.specularColor ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphinstance_vertex=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,morphcolor_vertex=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,normal_fragment_maps=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,iridescence_pars_fragment=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,opaque_fragment$1=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,shadowmap_pars_vertex=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,uv_pars_fragment=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_pars_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$h=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$h=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$g=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$g=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,vertex$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphahash_fragment,alphahash_pars_fragment,alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,batching_pars_vertex,batching_vertex,begin_vertex,beginnormal_vertex,bsdfs,iridescence_fragment,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,colorspace_fragment,colorspace_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_pars_fragment,lights_lambert_fragment,lights_lambert_pars_fragment,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphinstance_vertex,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,iridescence_pars_fragment,opaque_fragment:opaque_fragment$1,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Matrix3}},envmap:{envMap:{value:null},envMapRotation:{value:new Matrix3},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Matrix3}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Matrix3}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Matrix3},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Matrix3},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Matrix3},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Matrix3}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Matrix3}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Matrix3}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Matrix3}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Matrix3},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Matrix3},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Matrix3},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Matrix3},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Matrix3},sheen:{value:0},sheenColor:{value:new Color(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Matrix3},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Matrix3},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Matrix3},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Matrix3},attenuationDistance:{value:0},attenuationColor:{value:new Color(0)},specularColor:{value:new Color(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Matrix3},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Matrix3},anisotropyVector:{value:new Vector2},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Matrix3}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0},_e1$1=new Euler,_m1$1=new Matrix4;function WebGLBackground(G,_,J,Z,Q,ee,te){const ne=new Color(0);let ie=ee===!0?0:1,re,oe,se=null,ae=0,le=null;function ue(ye){let be=ye.isScene===!0?ye.background:null;return be&&be.isTexture&&(be=(ye.backgroundBlurriness>0?J:_).get(be)),be}function de(ye){let be=!1;const Ae=ue(ye);Ae===null?fe(ne,ie):Ae&&Ae.isColor&&(fe(Ae,1),be=!0);const Ce=G.xr.getEnvironmentBlendMode();Ce==="additive"?Z.buffers.color.setClear(0,0,0,1,te):Ce==="alpha-blend"&&Z.buffers.color.setClear(0,0,0,0,te),(G.autoClear||be)&&(Z.buffers.depth.setTest(!0),Z.buffers.depth.setMask(!0),Z.buffers.color.setMask(!0),G.clear(G.autoClearColor,G.autoClearDepth,G.autoClearStencil))}function pe(ye,be){const Ae=ue(be);Ae&&(Ae.isCubeTexture||Ae.mapping===CubeUVReflectionMapping)?(oe===void 0&&(oe=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),oe.geometry.deleteAttribute("normal"),oe.geometry.deleteAttribute("uv"),oe.onBeforeRender=function(Ce,Ee,Re){this.matrixWorld.copyPosition(Re.matrixWorld)},Object.defineProperty(oe.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),Q.update(oe)),_e1$1.copy(be.backgroundRotation),_e1$1.x*=-1,_e1$1.y*=-1,_e1$1.z*=-1,Ae.isCubeTexture&&Ae.isRenderTargetTexture===!1&&(_e1$1.y*=-1,_e1$1.z*=-1),oe.material.uniforms.envMap.value=Ae,oe.material.uniforms.flipEnvMap.value=Ae.isCubeTexture&&Ae.isRenderTargetTexture===!1?-1:1,oe.material.uniforms.backgroundBlurriness.value=be.backgroundBlurriness,oe.material.uniforms.backgroundIntensity.value=be.backgroundIntensity,oe.material.uniforms.backgroundRotation.value.setFromMatrix4(_m1$1.makeRotationFromEuler(_e1$1)),oe.material.toneMapped=ColorManagement.getTransfer(Ae.colorSpace)!==SRGBTransfer,(se!==Ae||ae!==Ae.version||le!==G.toneMapping)&&(oe.material.needsUpdate=!0,se=Ae,ae=Ae.version,le=G.toneMapping),oe.layers.enableAll(),ye.unshift(oe,oe.geometry,oe.material,0,0,null)):Ae&&Ae.isTexture&&(re===void 0&&(re=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),re.geometry.deleteAttribute("normal"),Object.defineProperty(re.material,"map",{get:function(){return this.uniforms.t2D.value}}),Q.update(re)),re.material.uniforms.t2D.value=Ae,re.material.uniforms.backgroundIntensity.value=be.backgroundIntensity,re.material.toneMapped=ColorManagement.getTransfer(Ae.colorSpace)!==SRGBTransfer,Ae.matrixAutoUpdate===!0&&Ae.updateMatrix(),re.material.uniforms.uvTransform.value.copy(Ae.matrix),(se!==Ae||ae!==Ae.version||le!==G.toneMapping)&&(re.material.needsUpdate=!0,se=Ae,ae=Ae.version,le=G.toneMapping),re.layers.enableAll(),ye.unshift(re,re.geometry,re.material,0,0,null))}function fe(ye,be){ye.getRGB(_rgb,getUnlitUniformColorSpace(G)),Z.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,be,te)}function _e(){oe!==void 0&&(oe.geometry.dispose(),oe.material.dispose(),oe=void 0),re!==void 0&&(re.geometry.dispose(),re.material.dispose(),re=void 0)}return{getClearColor:function(){return ne},setClearColor:function(ye,be=1){ne.set(ye),ie=be,fe(ne,ie)},getClearAlpha:function(){return ie},setClearAlpha:function(ye){ie=ye,fe(ne,ie)},render:de,addToRenderList:pe,dispose:_e}}function WebGLBindingStates(G,_){const J=G.getParameter(G.MAX_VERTEX_ATTRIBS),Z={},Q=ae(null);let ee=Q,te=!1;function ne(Me,Ne,Le,Ie,Ge){let He=!1;const Be=se(Ie,Le,Ne);ee!==Be&&(ee=Be,re(ee.object)),He=le(Me,Ie,Le,Ge),He&&ue(Me,Ie,Le,Ge),Ge!==null&&_.update(Ge,G.ELEMENT_ARRAY_BUFFER),(He||te)&&(te=!1,be(Me,Ne,Le,Ie),Ge!==null&&G.bindBuffer(G.ELEMENT_ARRAY_BUFFER,_.get(Ge).buffer))}function ie(){return G.createVertexArray()}function re(Me){return G.bindVertexArray(Me)}function oe(Me){return G.deleteVertexArray(Me)}function se(Me,Ne,Le){const Ie=Le.wireframe===!0;let Ge=Z[Me.id];Ge===void 0&&(Ge={},Z[Me.id]=Ge);let He=Ge[Ne.id];He===void 0&&(He={},Ge[Ne.id]=He);let Be=He[Ie];return Be===void 0&&(Be=ae(ie()),He[Ie]=Be),Be}function ae(Me){const Ne=[],Le=[],Ie=[];for(let Ge=0;Ge<J;Ge++)Ne[Ge]=0,Le[Ge]=0,Ie[Ge]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Ne,enabledAttributes:Le,attributeDivisors:Ie,object:Me,attributes:{},index:null}}function le(Me,Ne,Le,Ie){const Ge=ee.attributes,He=Ne.attributes;let Be=0;const ze=Le.getAttributes();for(const Fe in ze)if(ze[Fe].location>=0){const Xe=Ge[Fe];let je=He[Fe];if(je===void 0&&(Fe==="instanceMatrix"&&Me.instanceMatrix&&(je=Me.instanceMatrix),Fe==="instanceColor"&&Me.instanceColor&&(je=Me.instanceColor)),Xe===void 0||Xe.attribute!==je||je&&Xe.data!==je.data)return!0;Be++}return ee.attributesNum!==Be||ee.index!==Ie}function ue(Me,Ne,Le,Ie){const Ge={},He=Ne.attributes;let Be=0;const ze=Le.getAttributes();for(const Fe in ze)if(ze[Fe].location>=0){let Xe=He[Fe];Xe===void 0&&(Fe==="instanceMatrix"&&Me.instanceMatrix&&(Xe=Me.instanceMatrix),Fe==="instanceColor"&&Me.instanceColor&&(Xe=Me.instanceColor));const je={};je.attribute=Xe,Xe&&Xe.data&&(je.data=Xe.data),Ge[Fe]=je,Be++}ee.attributes=Ge,ee.attributesNum=Be,ee.index=Ie}function de(){const Me=ee.newAttributes;for(let Ne=0,Le=Me.length;Ne<Le;Ne++)Me[Ne]=0}function pe(Me){fe(Me,0)}function fe(Me,Ne){const Le=ee.newAttributes,Ie=ee.enabledAttributes,Ge=ee.attributeDivisors;Le[Me]=1,Ie[Me]===0&&(G.enableVertexAttribArray(Me),Ie[Me]=1),Ge[Me]!==Ne&&(G.vertexAttribDivisor(Me,Ne),Ge[Me]=Ne)}function _e(){const Me=ee.newAttributes,Ne=ee.enabledAttributes;for(let Le=0,Ie=Ne.length;Le<Ie;Le++)Ne[Le]!==Me[Le]&&(G.disableVertexAttribArray(Le),Ne[Le]=0)}function ye(Me,Ne,Le,Ie,Ge,He,Be){Be===!0?G.vertexAttribIPointer(Me,Ne,Le,Ge,He):G.vertexAttribPointer(Me,Ne,Le,Ie,Ge,He)}function be(Me,Ne,Le,Ie){de();const Ge=Ie.attributes,He=Le.getAttributes(),Be=Ne.defaultAttributeValues;for(const ze in He){const Fe=He[ze];if(Fe.location>=0){let $e=Ge[ze];if($e===void 0&&(ze==="instanceMatrix"&&Me.instanceMatrix&&($e=Me.instanceMatrix),ze==="instanceColor"&&Me.instanceColor&&($e=Me.instanceColor)),$e!==void 0){const Xe=$e.normalized,je=$e.itemSize,qe=_.get($e);if(qe===void 0)continue;const Ze=qe.buffer,st=qe.type,St=qe.bytesPerElement,it=st===G.INT||st===G.UNSIGNED_INT||$e.gpuType===IntType;if($e.isInterleavedBufferAttribute){const lt=$e.data,ft=lt.stride,kt=$e.offset;if(lt.isInstancedInterleavedBuffer){for(let Ht=0;Ht<Fe.locationSize;Ht++)fe(Fe.location+Ht,lt.meshPerAttribute);Me.isInstancedMesh!==!0&&Ie._maxInstanceCount===void 0&&(Ie._maxInstanceCount=lt.meshPerAttribute*lt.count)}else for(let Ht=0;Ht<Fe.locationSize;Ht++)pe(Fe.location+Ht);G.bindBuffer(G.ARRAY_BUFFER,Ze);for(let Ht=0;Ht<Fe.locationSize;Ht++)ye(Fe.location+Ht,je/Fe.locationSize,st,Xe,ft*St,(kt+je/Fe.locationSize*Ht)*St,it)}else{if($e.isInstancedBufferAttribute){for(let lt=0;lt<Fe.locationSize;lt++)fe(Fe.location+lt,$e.meshPerAttribute);Me.isInstancedMesh!==!0&&Ie._maxInstanceCount===void 0&&(Ie._maxInstanceCount=$e.meshPerAttribute*$e.count)}else for(let lt=0;lt<Fe.locationSize;lt++)pe(Fe.location+lt);G.bindBuffer(G.ARRAY_BUFFER,Ze);for(let lt=0;lt<Fe.locationSize;lt++)ye(Fe.location+lt,je/Fe.locationSize,st,Xe,je*St,je/Fe.locationSize*lt*St,it)}}else if(Be!==void 0){const Xe=Be[ze];if(Xe!==void 0)switch(Xe.length){case 2:G.vertexAttrib2fv(Fe.location,Xe);break;case 3:G.vertexAttrib3fv(Fe.location,Xe);break;case 4:G.vertexAttrib4fv(Fe.location,Xe);break;default:G.vertexAttrib1fv(Fe.location,Xe)}}}}_e()}function Ae(){Re();for(const Me in Z){const Ne=Z[Me];for(const Le in Ne){const Ie=Ne[Le];for(const Ge in Ie)oe(Ie[Ge].object),delete Ie[Ge];delete Ne[Le]}delete Z[Me]}}function Ce(Me){if(Z[Me.id]===void 0)return;const Ne=Z[Me.id];for(const Le in Ne){const Ie=Ne[Le];for(const Ge in Ie)oe(Ie[Ge].object),delete Ie[Ge];delete Ne[Le]}delete Z[Me.id]}function Ee(Me){for(const Ne in Z){const Le=Z[Ne];if(Le[Me.id]===void 0)continue;const Ie=Le[Me.id];for(const Ge in Ie)oe(Ie[Ge].object),delete Ie[Ge];delete Le[Me.id]}}function Re(){Te(),te=!0,ee!==Q&&(ee=Q,re(ee.object))}function Te(){Q.geometry=null,Q.program=null,Q.wireframe=!1}return{setup:ne,reset:Re,resetDefaultState:Te,dispose:Ae,releaseStatesOfGeometry:Ce,releaseStatesOfProgram:Ee,initAttributes:de,enableAttribute:pe,disableUnusedAttributes:_e}}function WebGLBufferRenderer(G,_,J){let Z;function Q(re){Z=re}function ee(re,oe){G.drawArrays(Z,re,oe),J.update(oe,Z,1)}function te(re,oe,se){se!==0&&(G.drawArraysInstanced(Z,re,oe,se),J.update(oe,Z,se))}function ne(re,oe,se){if(se===0)return;_.get("WEBGL_multi_draw").multiDrawArraysWEBGL(Z,re,0,oe,0,se);let le=0;for(let ue=0;ue<se;ue++)le+=oe[ue];J.update(le,Z,1)}function ie(re,oe,se,ae){if(se===0)return;const le=_.get("WEBGL_multi_draw");if(le===null)for(let ue=0;ue<re.length;ue++)te(re[ue],oe[ue],ae[ue]);else{le.multiDrawArraysInstancedWEBGL(Z,re,0,oe,0,ae,0,se);let ue=0;for(let de=0;de<se;de++)ue+=oe[de]*ae[de];J.update(ue,Z,1)}}this.setMode=Q,this.render=ee,this.renderInstances=te,this.renderMultiDraw=ne,this.renderMultiDrawInstances=ie}function WebGLCapabilities(G,_,J,Z){let Q;function ee(){if(Q!==void 0)return Q;if(_.has("EXT_texture_filter_anisotropic")===!0){const Ee=_.get("EXT_texture_filter_anisotropic");Q=G.getParameter(Ee.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else Q=0;return Q}function te(Ee){return!(Ee!==RGBAFormat&&Z.convert(Ee)!==G.getParameter(G.IMPLEMENTATION_COLOR_READ_FORMAT))}function ne(Ee){const Re=Ee===HalfFloatType&&(_.has("EXT_color_buffer_half_float")||_.has("EXT_color_buffer_float"));return!(Ee!==UnsignedByteType&&Z.convert(Ee)!==G.getParameter(G.IMPLEMENTATION_COLOR_READ_TYPE)&&Ee!==FloatType&&!Re)}function ie(Ee){if(Ee==="highp"){if(G.getShaderPrecisionFormat(G.VERTEX_SHADER,G.HIGH_FLOAT).precision>0&&G.getShaderPrecisionFormat(G.FRAGMENT_SHADER,G.HIGH_FLOAT).precision>0)return"highp";Ee="mediump"}return Ee==="mediump"&&G.getShaderPrecisionFormat(G.VERTEX_SHADER,G.MEDIUM_FLOAT).precision>0&&G.getShaderPrecisionFormat(G.FRAGMENT_SHADER,G.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let re=J.precision!==void 0?J.precision:"highp";const oe=ie(re);oe!==re&&(warn("WebGLRenderer:",re,"not supported, using",oe,"instead."),re=oe);const se=J.logarithmicDepthBuffer===!0,ae=J.reversedDepthBuffer===!0&&_.has("EXT_clip_control"),le=G.getParameter(G.MAX_TEXTURE_IMAGE_UNITS),ue=G.getParameter(G.MAX_VERTEX_TEXTURE_IMAGE_UNITS),de=G.getParameter(G.MAX_TEXTURE_SIZE),pe=G.getParameter(G.MAX_CUBE_MAP_TEXTURE_SIZE),fe=G.getParameter(G.MAX_VERTEX_ATTRIBS),_e=G.getParameter(G.MAX_VERTEX_UNIFORM_VECTORS),ye=G.getParameter(G.MAX_VARYING_VECTORS),be=G.getParameter(G.MAX_FRAGMENT_UNIFORM_VECTORS),Ae=ue>0,Ce=G.getParameter(G.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:ee,getMaxPrecision:ie,textureFormatReadable:te,textureTypeReadable:ne,precision:re,logarithmicDepthBuffer:se,reversedDepthBuffer:ae,maxTextures:le,maxVertexTextures:ue,maxTextureSize:de,maxCubemapSize:pe,maxAttributes:fe,maxVertexUniforms:_e,maxVaryings:ye,maxFragmentUniforms:be,vertexTextures:Ae,maxSamples:Ce}}function WebGLClipping(G){const _=this;let J=null,Z=0,Q=!1,ee=!1;const te=new Plane,ne=new Matrix3,ie={value:null,needsUpdate:!1};this.uniform=ie,this.numPlanes=0,this.numIntersection=0,this.init=function(se,ae){const le=se.length!==0||ae||Z!==0||Q;return Q=ae,Z=se.length,le},this.beginShadows=function(){ee=!0,oe(null)},this.endShadows=function(){ee=!1},this.setGlobalState=function(se,ae){J=oe(se,ae,0)},this.setState=function(se,ae,le){const ue=se.clippingPlanes,de=se.clipIntersection,pe=se.clipShadows,fe=G.get(se);if(!Q||ue===null||ue.length===0||ee&&!pe)ee?oe(null):re();else{const _e=ee?0:Z,ye=_e*4;let be=fe.clippingState||null;ie.value=be,be=oe(ue,ae,ye,le);for(let Ae=0;Ae!==ye;++Ae)be[Ae]=J[Ae];fe.clippingState=be,this.numIntersection=de?this.numPlanes:0,this.numPlanes+=_e}};function re(){ie.value!==J&&(ie.value=J,ie.needsUpdate=Z>0),_.numPlanes=Z,_.numIntersection=0}function oe(se,ae,le,ue){const de=se!==null?se.length:0;let pe=null;if(de!==0){if(pe=ie.value,ue!==!0||pe===null){const fe=le+de*4,_e=ae.matrixWorldInverse;ne.getNormalMatrix(_e),(pe===null||pe.length<fe)&&(pe=new Float32Array(fe));for(let ye=0,be=le;ye!==de;++ye,be+=4)te.copy(se[ye]).applyMatrix4(_e,ne),te.normal.toArray(pe,be),pe[be+3]=te.constant}ie.value=pe,ie.needsUpdate=!0}return _.numPlanes=de,_.numIntersection=0,pe}}function WebGLCubeMaps(G){let _=new WeakMap;function J(te,ne){return ne===EquirectangularReflectionMapping?te.mapping=CubeReflectionMapping:ne===EquirectangularRefractionMapping&&(te.mapping=CubeRefractionMapping),te}function Z(te){if(te&&te.isTexture){const ne=te.mapping;if(ne===EquirectangularReflectionMapping||ne===EquirectangularRefractionMapping)if(_.has(te)){const ie=_.get(te).texture;return J(ie,te.mapping)}else{const ie=te.image;if(ie&&ie.height>0){const re=new WebGLCubeRenderTarget(ie.height);return re.fromEquirectangularTexture(G,te),_.set(te,re),te.addEventListener("dispose",Q),J(re.texture,te.mapping)}else return null}}return te}function Q(te){const ne=te.target;ne.removeEventListener("dispose",Q);const ie=_.get(ne);ie!==void 0&&(_.delete(ne),ie.dispose())}function ee(){_=new WeakMap}return{get:Z,dispose:ee}}const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,GGX_SAMPLES=256,_flatCamera=new OrthographicCamera,_clearColor=new Color;let _oldTarget=null,_oldActiveCubeFace=0,_oldActiveMipmapLevel=0,_oldXrEnabled=!1;const _origin=new Vector3;class PMREMGenerator{constructor(_){this._renderer=_,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(_,J=0,Z=.1,Q=100,ee={}){const{size:te=256,position:ne=_origin}=ee;_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(te);const ie=this._allocateTargets();return ie.depthBuffer=!0,this._sceneToCubeUV(_,Z,Q,ie,ne),J>0&&this._blur(ie,0,0,J),this._applyPMREM(ie),this._cleanup(ie),ie}fromEquirectangular(_,J=null){return this._fromTexture(_,J)}fromCubemap(_,J=null){return this._fromTexture(_,J)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(_){this._lodMax=Math.floor(Math.log2(_)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let _=0;_<this._lodMeshes.length;_++)this._lodMeshes[_].geometry.dispose()}_cleanup(_){this._renderer.setRenderTarget(_oldTarget,_oldActiveCubeFace,_oldActiveMipmapLevel),this._renderer.xr.enabled=_oldXrEnabled,_.scissorTest=!1,_setViewport(_,0,0,_.width,_.height)}_fromTexture(_,J){_.mapping===CubeReflectionMapping||_.mapping===CubeRefractionMapping?this._setSize(_.image.length===0?16:_.image[0].width||_.image[0].image.width):this._setSize(_.image.width/4),_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const Z=J||this._allocateTargets();return this._textureToCubeUV(_,Z),this._applyPMREM(Z),this._cleanup(Z),Z}_allocateTargets(){const _=3*Math.max(this._cubeSize,112),J=4*this._cubeSize,Z={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,colorSpace:LinearSRGBColorSpace,depthBuffer:!1},Q=_createRenderTarget(_,J,Z);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==_||this._pingPongRenderTarget.height!==J){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(_,J,Z);const{_lodMax:ee}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=_createPlanes(ee)),this._blurMaterial=_getBlurShader(ee,_,J)}return Q}_compileMaterial(_){const J=new Mesh(new BufferGeometry,_);this._renderer.compile(J,_flatCamera)}_sceneToCubeUV(_,J,Z,Q,ee){const ie=new PerspectiveCamera(90,1,J,Z),re=[1,-1,1,1,1,1],oe=[1,1,1,-1,-1,-1],se=this._renderer,ae=se.autoClear,le=se.toneMapping;se.getClearColor(_clearColor),se.toneMapping=NoToneMapping,se.autoClear=!1,se.state.buffers.depth.getReversed()&&(se.setRenderTarget(Q),se.clearDepth(),se.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new Mesh(new BoxGeometry,new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1})));const de=this._backgroundBox,pe=de.material;let fe=!1;const _e=_.background;_e?_e.isColor&&(pe.color.copy(_e),_.background=null,fe=!0):(pe.color.copy(_clearColor),fe=!0);for(let ye=0;ye<6;ye++){const be=ye%3;be===0?(ie.up.set(0,re[ye],0),ie.position.set(ee.x,ee.y,ee.z),ie.lookAt(ee.x+oe[ye],ee.y,ee.z)):be===1?(ie.up.set(0,0,re[ye]),ie.position.set(ee.x,ee.y,ee.z),ie.lookAt(ee.x,ee.y+oe[ye],ee.z)):(ie.up.set(0,re[ye],0),ie.position.set(ee.x,ee.y,ee.z),ie.lookAt(ee.x,ee.y,ee.z+oe[ye]));const Ae=this._cubeSize;_setViewport(Q,be*Ae,ye>2?Ae:0,Ae,Ae),se.setRenderTarget(Q),fe&&se.render(de,ie),se.render(_,ie)}se.toneMapping=le,se.autoClear=ae,_.background=_e}_textureToCubeUV(_,J){const Z=this._renderer,Q=_.mapping===CubeReflectionMapping||_.mapping===CubeRefractionMapping;Q?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=_.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const ee=Q?this._cubemapMaterial:this._equirectMaterial,te=this._lodMeshes[0];te.material=ee;const ne=ee.uniforms;ne.envMap.value=_;const ie=this._cubeSize;_setViewport(J,0,0,3*ie,2*ie),Z.setRenderTarget(J),Z.render(te,_flatCamera)}_applyPMREM(_){const J=this._renderer,Z=J.autoClear;J.autoClear=!1;const Q=this._lodMeshes.length;for(let ee=1;ee<Q;ee++)this._applyGGXFilter(_,ee-1,ee);J.autoClear=Z}_applyGGXFilter(_,J,Z){const Q=this._renderer,ee=this._pingPongRenderTarget;if(this._ggxMaterial===null){const _e=3*Math.max(this._cubeSize,16),ye=4*this._cubeSize;this._ggxMaterial=_getGGXShader(this._lodMax,_e,ye)}const te=this._ggxMaterial,ne=this._lodMeshes[Z];ne.material=te;const ie=te.uniforms,re=Z/(this._lodMeshes.length-1),oe=J/(this._lodMeshes.length-1),se=Math.sqrt(re*re-oe*oe),ae=.05+re*.95,le=se*ae,{_lodMax:ue}=this,de=this._sizeLods[Z],pe=3*de*(Z>ue-LOD_MIN?Z-ue+LOD_MIN:0),fe=4*(this._cubeSize-de);ie.envMap.value=_.texture,ie.roughness.value=le,ie.mipInt.value=ue-J,_setViewport(ee,pe,fe,3*de,2*de),Q.setRenderTarget(ee),Q.render(ne,_flatCamera),ie.envMap.value=ee.texture,ie.roughness.value=0,ie.mipInt.value=ue-Z,_setViewport(_,pe,fe,3*de,2*de),Q.setRenderTarget(_),Q.render(ne,_flatCamera)}_blur(_,J,Z,Q,ee){const te=this._pingPongRenderTarget;this._halfBlur(_,te,J,Z,Q,"latitudinal",ee),this._halfBlur(te,_,Z,Z,Q,"longitudinal",ee)}_halfBlur(_,J,Z,Q,ee,te,ne){const ie=this._renderer,re=this._blurMaterial;te!=="latitudinal"&&te!=="longitudinal"&&error("blur direction must be either latitudinal or longitudinal!");const oe=3,se=this._lodMeshes[Q];se.material=re;const ae=re.uniforms,le=this._sizeLods[Z]-1,ue=isFinite(ee)?Math.PI/(2*le):2*Math.PI/(2*MAX_SAMPLES-1),de=ee/ue,pe=isFinite(ee)?1+Math.floor(oe*de):MAX_SAMPLES;pe>MAX_SAMPLES&&warn(`sigmaRadians, ${ee}, is too large and will clip, as it requested ${pe} samples when the maximum is set to ${MAX_SAMPLES}`);const fe=[];let _e=0;for(let Ee=0;Ee<MAX_SAMPLES;++Ee){const Re=Ee/de,Te=Math.exp(-Re*Re/2);fe.push(Te),Ee===0?_e+=Te:Ee<pe&&(_e+=2*Te)}for(let Ee=0;Ee<fe.length;Ee++)fe[Ee]=fe[Ee]/_e;ae.envMap.value=_.texture,ae.samples.value=pe,ae.weights.value=fe,ae.latitudinal.value=te==="latitudinal",ne&&(ae.poleAxis.value=ne);const{_lodMax:ye}=this;ae.dTheta.value=ue,ae.mipInt.value=ye-Z;const be=this._sizeLods[Q],Ae=3*be*(Q>ye-LOD_MIN?Q-ye+LOD_MIN:0),Ce=4*(this._cubeSize-be);_setViewport(J,Ae,Ce,3*be,2*be),ie.setRenderTarget(J),ie.render(se,_flatCamera)}}function _createPlanes(G){const _=[],J=[],Z=[];let Q=G;const ee=G-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let te=0;te<ee;te++){const ne=Math.pow(2,Q);_.push(ne);let ie=1/ne;te>G-LOD_MIN?ie=EXTRA_LOD_SIGMA[te-G+LOD_MIN-1]:te===0&&(ie=0),J.push(ie);const re=1/(ne-2),oe=-re,se=1+re,ae=[oe,oe,se,oe,se,se,oe,oe,se,se,oe,se],le=6,ue=6,de=3,pe=2,fe=1,_e=new Float32Array(de*ue*le),ye=new Float32Array(pe*ue*le),be=new Float32Array(fe*ue*le);for(let Ce=0;Ce<le;Ce++){const Ee=Ce%3*2/3-1,Re=Ce>2?0:-1,Te=[Ee,Re,0,Ee+2/3,Re,0,Ee+2/3,Re+1,0,Ee,Re,0,Ee+2/3,Re+1,0,Ee,Re+1,0];_e.set(Te,de*ue*Ce),ye.set(ae,pe*ue*Ce);const Me=[Ce,Ce,Ce,Ce,Ce,Ce];be.set(Me,fe*ue*Ce)}const Ae=new BufferGeometry;Ae.setAttribute("position",new BufferAttribute(_e,de)),Ae.setAttribute("uv",new BufferAttribute(ye,pe)),Ae.setAttribute("faceIndex",new BufferAttribute(be,fe)),Z.push(new Mesh(Ae,null)),Q>LOD_MIN&&Q--}return{lodMeshes:Z,sizeLods:_,sigmas:J}}function _createRenderTarget(G,_,J){const Z=new WebGLRenderTarget(G,_,J);return Z.texture.mapping=CubeUVReflectionMapping,Z.texture.name="PMREM.cubeUv",Z.scissorTest=!0,Z}function _setViewport(G,_,J,Z,Q){G.viewport.set(_,J,Z,Q),G.scissor.set(_,J,Z,Q)}function _getGGXShader(G,_,J){return new ShaderMaterial({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/_,CUBEUV_TEXEL_HEIGHT:1/J,CUBEUV_MAX_MIP:`${G}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getBlurShader(G,_,J){const Z=new Float32Array(MAX_SAMPLES),Q=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/_,CUBEUV_TEXEL_HEIGHT:1/J,CUBEUV_MAX_MIP:`${G}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:Z},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:Q}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WebGLCubeUVMaps(G){let _=new WeakMap,J=null;function Z(ne){if(ne&&ne.isTexture){const ie=ne.mapping,re=ie===EquirectangularReflectionMapping||ie===EquirectangularRefractionMapping,oe=ie===CubeReflectionMapping||ie===CubeRefractionMapping;if(re||oe){let se=_.get(ne);const ae=se!==void 0?se.texture.pmremVersion:0;if(ne.isRenderTargetTexture&&ne.pmremVersion!==ae)return J===null&&(J=new PMREMGenerator(G)),se=re?J.fromEquirectangular(ne,se):J.fromCubemap(ne,se),se.texture.pmremVersion=ne.pmremVersion,_.set(ne,se),se.texture;if(se!==void 0)return se.texture;{const le=ne.image;return re&&le&&le.height>0||oe&&le&&Q(le)?(J===null&&(J=new PMREMGenerator(G)),se=re?J.fromEquirectangular(ne):J.fromCubemap(ne),se.texture.pmremVersion=ne.pmremVersion,_.set(ne,se),ne.addEventListener("dispose",ee),se.texture):null}}}return ne}function Q(ne){let ie=0;const re=6;for(let oe=0;oe<re;oe++)ne[oe]!==void 0&&ie++;return ie===re}function ee(ne){const ie=ne.target;ie.removeEventListener("dispose",ee);const re=_.get(ie);re!==void 0&&(_.delete(ie),re.dispose())}function te(){_=new WeakMap,J!==null&&(J.dispose(),J=null)}return{get:Z,dispose:te}}function WebGLExtensions(G){const _={};function J(Z){if(_[Z]!==void 0)return _[Z];const Q=G.getExtension(Z);return _[Z]=Q,Q}return{has:function(Z){return J(Z)!==null},init:function(){J("EXT_color_buffer_float"),J("WEBGL_clip_cull_distance"),J("OES_texture_float_linear"),J("EXT_color_buffer_half_float"),J("WEBGL_multisampled_render_to_texture"),J("WEBGL_render_shared_exponent")},get:function(Z){const Q=J(Z);return Q===null&&warnOnce("WebGLRenderer: "+Z+" extension not supported."),Q}}}function WebGLGeometries(G,_,J,Z){const Q={},ee=new WeakMap;function te(se){const ae=se.target;ae.index!==null&&_.remove(ae.index);for(const ue in ae.attributes)_.remove(ae.attributes[ue]);ae.removeEventListener("dispose",te),delete Q[ae.id];const le=ee.get(ae);le&&(_.remove(le),ee.delete(ae)),Z.releaseStatesOfGeometry(ae),ae.isInstancedBufferGeometry===!0&&delete ae._maxInstanceCount,J.memory.geometries--}function ne(se,ae){return Q[ae.id]===!0||(ae.addEventListener("dispose",te),Q[ae.id]=!0,J.memory.geometries++),ae}function ie(se){const ae=se.attributes;for(const le in ae)_.update(ae[le],G.ARRAY_BUFFER)}function re(se){const ae=[],le=se.index,ue=se.attributes.position;let de=0;if(le!==null){const _e=le.array;de=le.version;for(let ye=0,be=_e.length;ye<be;ye+=3){const Ae=_e[ye+0],Ce=_e[ye+1],Ee=_e[ye+2];ae.push(Ae,Ce,Ce,Ee,Ee,Ae)}}else if(ue!==void 0){const _e=ue.array;de=ue.version;for(let ye=0,be=_e.length/3-1;ye<be;ye+=3){const Ae=ye+0,Ce=ye+1,Ee=ye+2;ae.push(Ae,Ce,Ce,Ee,Ee,Ae)}}else return;const pe=new(arrayNeedsUint32(ae)?Uint32BufferAttribute:Uint16BufferAttribute)(ae,1);pe.version=de;const fe=ee.get(se);fe&&_.remove(fe),ee.set(se,pe)}function oe(se){const ae=ee.get(se);if(ae){const le=se.index;le!==null&&ae.version<le.version&&re(se)}else re(se);return ee.get(se)}return{get:ne,update:ie,getWireframeAttribute:oe}}function WebGLIndexedBufferRenderer(G,_,J){let Z;function Q(ae){Z=ae}let ee,te;function ne(ae){ee=ae.type,te=ae.bytesPerElement}function ie(ae,le){G.drawElements(Z,le,ee,ae*te),J.update(le,Z,1)}function re(ae,le,ue){ue!==0&&(G.drawElementsInstanced(Z,le,ee,ae*te,ue),J.update(le,Z,ue))}function oe(ae,le,ue){if(ue===0)return;_.get("WEBGL_multi_draw").multiDrawElementsWEBGL(Z,le,0,ee,ae,0,ue);let pe=0;for(let fe=0;fe<ue;fe++)pe+=le[fe];J.update(pe,Z,1)}function se(ae,le,ue,de){if(ue===0)return;const pe=_.get("WEBGL_multi_draw");if(pe===null)for(let fe=0;fe<ae.length;fe++)re(ae[fe]/te,le[fe],de[fe]);else{pe.multiDrawElementsInstancedWEBGL(Z,le,0,ee,ae,0,de,0,ue);let fe=0;for(let _e=0;_e<ue;_e++)fe+=le[_e]*de[_e];J.update(fe,Z,1)}}this.setMode=Q,this.setIndex=ne,this.render=ie,this.renderInstances=re,this.renderMultiDraw=oe,this.renderMultiDrawInstances=se}function WebGLInfo(G){const _={geometries:0,textures:0},J={frame:0,calls:0,triangles:0,points:0,lines:0};function Z(ee,te,ne){switch(J.calls++,te){case G.TRIANGLES:J.triangles+=ne*(ee/3);break;case G.LINES:J.lines+=ne*(ee/2);break;case G.LINE_STRIP:J.lines+=ne*(ee-1);break;case G.LINE_LOOP:J.lines+=ne*ee;break;case G.POINTS:J.points+=ne*ee;break;default:error("WebGLInfo: Unknown draw mode:",te);break}}function Q(){J.calls=0,J.triangles=0,J.points=0,J.lines=0}return{memory:_,render:J,programs:null,autoReset:!0,reset:Q,update:Z}}function WebGLMorphtargets(G,_,J){const Z=new WeakMap,Q=new Vector4;function ee(te,ne,ie){const re=te.morphTargetInfluences,oe=ne.morphAttributes.position||ne.morphAttributes.normal||ne.morphAttributes.color,se=oe!==void 0?oe.length:0;let ae=Z.get(ne);if(ae===void 0||ae.count!==se){let Me=function(){Re.dispose(),Z.delete(ne),ne.removeEventListener("dispose",Me)};var le=Me;ae!==void 0&&ae.texture.dispose();const ue=ne.morphAttributes.position!==void 0,de=ne.morphAttributes.normal!==void 0,pe=ne.morphAttributes.color!==void 0,fe=ne.morphAttributes.position||[],_e=ne.morphAttributes.normal||[],ye=ne.morphAttributes.color||[];let be=0;ue===!0&&(be=1),de===!0&&(be=2),pe===!0&&(be=3);let Ae=ne.attributes.position.count*be,Ce=1;Ae>_.maxTextureSize&&(Ce=Math.ceil(Ae/_.maxTextureSize),Ae=_.maxTextureSize);const Ee=new Float32Array(Ae*Ce*4*se),Re=new DataArrayTexture(Ee,Ae,Ce,se);Re.type=FloatType,Re.needsUpdate=!0;const Te=be*4;for(let Ne=0;Ne<se;Ne++){const Le=fe[Ne],Ie=_e[Ne],Ge=ye[Ne],He=Ae*Ce*4*Ne;for(let Be=0;Be<Le.count;Be++){const ze=Be*Te;ue===!0&&(Q.fromBufferAttribute(Le,Be),Ee[He+ze+0]=Q.x,Ee[He+ze+1]=Q.y,Ee[He+ze+2]=Q.z,Ee[He+ze+3]=0),de===!0&&(Q.fromBufferAttribute(Ie,Be),Ee[He+ze+4]=Q.x,Ee[He+ze+5]=Q.y,Ee[He+ze+6]=Q.z,Ee[He+ze+7]=0),pe===!0&&(Q.fromBufferAttribute(Ge,Be),Ee[He+ze+8]=Q.x,Ee[He+ze+9]=Q.y,Ee[He+ze+10]=Q.z,Ee[He+ze+11]=Ge.itemSize===4?Q.w:1)}}ae={count:se,texture:Re,size:new Vector2(Ae,Ce)},Z.set(ne,ae),ne.addEventListener("dispose",Me)}if(te.isInstancedMesh===!0&&te.morphTexture!==null)ie.getUniforms().setValue(G,"morphTexture",te.morphTexture,J);else{let ue=0;for(let pe=0;pe<re.length;pe++)ue+=re[pe];const de=ne.morphTargetsRelative?1:1-ue;ie.getUniforms().setValue(G,"morphTargetBaseInfluence",de),ie.getUniforms().setValue(G,"morphTargetInfluences",re)}ie.getUniforms().setValue(G,"morphTargetsTexture",ae.texture,J),ie.getUniforms().setValue(G,"morphTargetsTextureSize",ae.size)}return{update:ee}}function WebGLObjects(G,_,J,Z){let Q=new WeakMap;function ee(ie){const re=Z.render.frame,oe=ie.geometry,se=_.get(ie,oe);if(Q.get(se)!==re&&(_.update(se),Q.set(se,re)),ie.isInstancedMesh&&(ie.hasEventListener("dispose",ne)===!1&&ie.addEventListener("dispose",ne),Q.get(ie)!==re&&(J.update(ie.instanceMatrix,G.ARRAY_BUFFER),ie.instanceColor!==null&&J.update(ie.instanceColor,G.ARRAY_BUFFER),Q.set(ie,re))),ie.isSkinnedMesh){const ae=ie.skeleton;Q.get(ae)!==re&&(ae.update(),Q.set(ae,re))}return se}function te(){Q=new WeakMap}function ne(ie){const re=ie.target;re.removeEventListener("dispose",ne),J.remove(re.instanceMatrix),re.instanceColor!==null&&J.remove(re.instanceColor)}return{update:ee,dispose:te}}const emptyTexture=new Texture,emptyShadowTexture=new DepthTexture(1,1),emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(G,_,J){const Z=G[0];if(Z<=0||Z>0)return G;const Q=_*J;let ee=arrayCacheF32[Q];if(ee===void 0&&(ee=new Float32Array(Q),arrayCacheF32[Q]=ee),_!==0){Z.toArray(ee,0);for(let te=1,ne=0;te!==_;++te)ne+=J,G[te].toArray(ee,ne)}return ee}function arraysEqual(G,_){if(G.length!==_.length)return!1;for(let J=0,Z=G.length;J<Z;J++)if(G[J]!==_[J])return!1;return!0}function copyArray(G,_){for(let J=0,Z=_.length;J<Z;J++)G[J]=_[J]}function allocTexUnits(G,_){let J=arrayCacheI32[_];J===void 0&&(J=new Int32Array(_),arrayCacheI32[_]=J);for(let Z=0;Z!==_;++Z)J[Z]=G.allocateTextureUnit();return J}function setValueV1f(G,_){const J=this.cache;J[0]!==_&&(G.uniform1f(this.addr,_),J[0]=_)}function setValueV2f(G,_){const J=this.cache;if(_.x!==void 0)(J[0]!==_.x||J[1]!==_.y)&&(G.uniform2f(this.addr,_.x,_.y),J[0]=_.x,J[1]=_.y);else{if(arraysEqual(J,_))return;G.uniform2fv(this.addr,_),copyArray(J,_)}}function setValueV3f(G,_){const J=this.cache;if(_.x!==void 0)(J[0]!==_.x||J[1]!==_.y||J[2]!==_.z)&&(G.uniform3f(this.addr,_.x,_.y,_.z),J[0]=_.x,J[1]=_.y,J[2]=_.z);else if(_.r!==void 0)(J[0]!==_.r||J[1]!==_.g||J[2]!==_.b)&&(G.uniform3f(this.addr,_.r,_.g,_.b),J[0]=_.r,J[1]=_.g,J[2]=_.b);else{if(arraysEqual(J,_))return;G.uniform3fv(this.addr,_),copyArray(J,_)}}function setValueV4f(G,_){const J=this.cache;if(_.x!==void 0)(J[0]!==_.x||J[1]!==_.y||J[2]!==_.z||J[3]!==_.w)&&(G.uniform4f(this.addr,_.x,_.y,_.z,_.w),J[0]=_.x,J[1]=_.y,J[2]=_.z,J[3]=_.w);else{if(arraysEqual(J,_))return;G.uniform4fv(this.addr,_),copyArray(J,_)}}function setValueM2(G,_){const J=this.cache,Z=_.elements;if(Z===void 0){if(arraysEqual(J,_))return;G.uniformMatrix2fv(this.addr,!1,_),copyArray(J,_)}else{if(arraysEqual(J,Z))return;mat2array.set(Z),G.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(J,Z)}}function setValueM3(G,_){const J=this.cache,Z=_.elements;if(Z===void 0){if(arraysEqual(J,_))return;G.uniformMatrix3fv(this.addr,!1,_),copyArray(J,_)}else{if(arraysEqual(J,Z))return;mat3array.set(Z),G.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(J,Z)}}function setValueM4(G,_){const J=this.cache,Z=_.elements;if(Z===void 0){if(arraysEqual(J,_))return;G.uniformMatrix4fv(this.addr,!1,_),copyArray(J,_)}else{if(arraysEqual(J,Z))return;mat4array.set(Z),G.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(J,Z)}}function setValueV1i(G,_){const J=this.cache;J[0]!==_&&(G.uniform1i(this.addr,_),J[0]=_)}function setValueV2i(G,_){const J=this.cache;if(_.x!==void 0)(J[0]!==_.x||J[1]!==_.y)&&(G.uniform2i(this.addr,_.x,_.y),J[0]=_.x,J[1]=_.y);else{if(arraysEqual(J,_))return;G.uniform2iv(this.addr,_),copyArray(J,_)}}function setValueV3i(G,_){const J=this.cache;if(_.x!==void 0)(J[0]!==_.x||J[1]!==_.y||J[2]!==_.z)&&(G.uniform3i(this.addr,_.x,_.y,_.z),J[0]=_.x,J[1]=_.y,J[2]=_.z);else{if(arraysEqual(J,_))return;G.uniform3iv(this.addr,_),copyArray(J,_)}}function setValueV4i(G,_){const J=this.cache;if(_.x!==void 0)(J[0]!==_.x||J[1]!==_.y||J[2]!==_.z||J[3]!==_.w)&&(G.uniform4i(this.addr,_.x,_.y,_.z,_.w),J[0]=_.x,J[1]=_.y,J[2]=_.z,J[3]=_.w);else{if(arraysEqual(J,_))return;G.uniform4iv(this.addr,_),copyArray(J,_)}}function setValueV1ui(G,_){const J=this.cache;J[0]!==_&&(G.uniform1ui(this.addr,_),J[0]=_)}function setValueV2ui(G,_){const J=this.cache;if(_.x!==void 0)(J[0]!==_.x||J[1]!==_.y)&&(G.uniform2ui(this.addr,_.x,_.y),J[0]=_.x,J[1]=_.y);else{if(arraysEqual(J,_))return;G.uniform2uiv(this.addr,_),copyArray(J,_)}}function setValueV3ui(G,_){const J=this.cache;if(_.x!==void 0)(J[0]!==_.x||J[1]!==_.y||J[2]!==_.z)&&(G.uniform3ui(this.addr,_.x,_.y,_.z),J[0]=_.x,J[1]=_.y,J[2]=_.z);else{if(arraysEqual(J,_))return;G.uniform3uiv(this.addr,_),copyArray(J,_)}}function setValueV4ui(G,_){const J=this.cache;if(_.x!==void 0)(J[0]!==_.x||J[1]!==_.y||J[2]!==_.z||J[3]!==_.w)&&(G.uniform4ui(this.addr,_.x,_.y,_.z,_.w),J[0]=_.x,J[1]=_.y,J[2]=_.z,J[3]=_.w);else{if(arraysEqual(J,_))return;G.uniform4uiv(this.addr,_),copyArray(J,_)}}function setValueT1(G,_,J){const Z=this.cache,Q=J.allocateTextureUnit();Z[0]!==Q&&(G.uniform1i(this.addr,Q),Z[0]=Q);let ee;this.type===G.SAMPLER_2D_SHADOW?(emptyShadowTexture.compareFunction=LessEqualCompare,ee=emptyShadowTexture):ee=emptyTexture,J.setTexture2D(_||ee,Q)}function setValueT3D1(G,_,J){const Z=this.cache,Q=J.allocateTextureUnit();Z[0]!==Q&&(G.uniform1i(this.addr,Q),Z[0]=Q),J.setTexture3D(_||empty3dTexture,Q)}function setValueT6(G,_,J){const Z=this.cache,Q=J.allocateTextureUnit();Z[0]!==Q&&(G.uniform1i(this.addr,Q),Z[0]=Q),J.setTextureCube(_||emptyCubeTexture,Q)}function setValueT2DArray1(G,_,J){const Z=this.cache,Q=J.allocateTextureUnit();Z[0]!==Q&&(G.uniform1i(this.addr,Q),Z[0]=Q),J.setTexture2DArray(_||emptyArrayTexture,Q)}function getSingularSetter(G){switch(G){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(G,_){G.uniform1fv(this.addr,_)}function setValueV2fArray(G,_){const J=flatten(_,this.size,2);G.uniform2fv(this.addr,J)}function setValueV3fArray(G,_){const J=flatten(_,this.size,3);G.uniform3fv(this.addr,J)}function setValueV4fArray(G,_){const J=flatten(_,this.size,4);G.uniform4fv(this.addr,J)}function setValueM2Array(G,_){const J=flatten(_,this.size,4);G.uniformMatrix2fv(this.addr,!1,J)}function setValueM3Array(G,_){const J=flatten(_,this.size,9);G.uniformMatrix3fv(this.addr,!1,J)}function setValueM4Array(G,_){const J=flatten(_,this.size,16);G.uniformMatrix4fv(this.addr,!1,J)}function setValueV1iArray(G,_){G.uniform1iv(this.addr,_)}function setValueV2iArray(G,_){G.uniform2iv(this.addr,_)}function setValueV3iArray(G,_){G.uniform3iv(this.addr,_)}function setValueV4iArray(G,_){G.uniform4iv(this.addr,_)}function setValueV1uiArray(G,_){G.uniform1uiv(this.addr,_)}function setValueV2uiArray(G,_){G.uniform2uiv(this.addr,_)}function setValueV3uiArray(G,_){G.uniform3uiv(this.addr,_)}function setValueV4uiArray(G,_){G.uniform4uiv(this.addr,_)}function setValueT1Array(G,_,J){const Z=this.cache,Q=_.length,ee=allocTexUnits(J,Q);arraysEqual(Z,ee)||(G.uniform1iv(this.addr,ee),copyArray(Z,ee));for(let te=0;te!==Q;++te)J.setTexture2D(_[te]||emptyTexture,ee[te])}function setValueT3DArray(G,_,J){const Z=this.cache,Q=_.length,ee=allocTexUnits(J,Q);arraysEqual(Z,ee)||(G.uniform1iv(this.addr,ee),copyArray(Z,ee));for(let te=0;te!==Q;++te)J.setTexture3D(_[te]||empty3dTexture,ee[te])}function setValueT6Array(G,_,J){const Z=this.cache,Q=_.length,ee=allocTexUnits(J,Q);arraysEqual(Z,ee)||(G.uniform1iv(this.addr,ee),copyArray(Z,ee));for(let te=0;te!==Q;++te)J.setTextureCube(_[te]||emptyCubeTexture,ee[te])}function setValueT2DArrayArray(G,_,J){const Z=this.cache,Q=_.length,ee=allocTexUnits(J,Q);arraysEqual(Z,ee)||(G.uniform1iv(this.addr,ee),copyArray(Z,ee));for(let te=0;te!==Q;++te)J.setTexture2DArray(_[te]||emptyArrayTexture,ee[te])}function getPureArraySetter(G){switch(G){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(_,J,Z){this.id=_,this.addr=Z,this.cache=[],this.type=J.type,this.setValue=getSingularSetter(J.type)}}class PureArrayUniform{constructor(_,J,Z){this.id=_,this.addr=Z,this.cache=[],this.type=J.type,this.size=J.size,this.setValue=getPureArraySetter(J.type)}}class StructuredUniform{constructor(_){this.id=_,this.seq=[],this.map={}}setValue(_,J,Z){const Q=this.seq;for(let ee=0,te=Q.length;ee!==te;++ee){const ne=Q[ee];ne.setValue(_,J[ne.id],Z)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(G,_){G.seq.push(_),G.map[_.id]=_}function parseUniform(G,_,J){const Z=G.name,Q=Z.length;for(RePathPart.lastIndex=0;;){const ee=RePathPart.exec(Z),te=RePathPart.lastIndex;let ne=ee[1];const ie=ee[2]==="]",re=ee[3];if(ie&&(ne=ne|0),re===void 0||re==="["&&te+2===Q){addUniform(J,re===void 0?new SingleUniform(ne,G,_):new PureArrayUniform(ne,G,_));break}else{let se=J.map[ne];se===void 0&&(se=new StructuredUniform(ne),addUniform(J,se)),J=se}}}class WebGLUniforms{constructor(_,J){this.seq=[],this.map={};const Z=_.getProgramParameter(J,_.ACTIVE_UNIFORMS);for(let Q=0;Q<Z;++Q){const ee=_.getActiveUniform(J,Q),te=_.getUniformLocation(J,ee.name);parseUniform(ee,te,this)}}setValue(_,J,Z,Q){const ee=this.map[J];ee!==void 0&&ee.setValue(_,Z,Q)}setOptional(_,J,Z){const Q=J[Z];Q!==void 0&&this.setValue(_,Z,Q)}static upload(_,J,Z,Q){for(let ee=0,te=J.length;ee!==te;++ee){const ne=J[ee],ie=Z[ne.id];ie.needsUpdate!==!1&&ne.setValue(_,ie.value,Q)}}static seqWithValue(_,J){const Z=[];for(let Q=0,ee=_.length;Q!==ee;++Q){const te=_[Q];te.id in J&&Z.push(te)}return Z}}function WebGLShader(G,_,J){const Z=G.createShader(_);return G.shaderSource(Z,J),G.compileShader(Z),Z}const COMPLETION_STATUS_KHR=37297;let programIdCount=0;function handleSource(G,_){const J=G.split(`
`),Z=[],Q=Math.max(_-6,0),ee=Math.min(_+6,J.length);for(let te=Q;te<ee;te++){const ne=te+1;Z.push(`${ne===_?">":" "} ${ne}: ${J[te]}`)}return Z.join(`
`)}const _m0=new Matrix3;function getEncodingComponents(G){ColorManagement._getMatrix(_m0,ColorManagement.workingColorSpace,G);const _=`mat3( ${_m0.elements.map(J=>J.toFixed(4))} )`;switch(ColorManagement.getTransfer(G)){case LinearTransfer:return[_,"LinearTransferOETF"];case SRGBTransfer:return[_,"sRGBTransferOETF"];default:return warn("WebGLProgram: Unsupported color space: ",G),[_,"LinearTransferOETF"]}}function getShaderErrors(G,_,J){const Z=G.getShaderParameter(_,G.COMPILE_STATUS),ee=(G.getShaderInfoLog(_)||"").trim();if(Z&&ee==="")return"";const te=/ERROR: 0:(\d+)/.exec(ee);if(te){const ne=parseInt(te[1]);return J.toUpperCase()+`

`+ee+`

`+handleSource(G.getShaderSource(_),ne)}else return ee}function getTexelEncodingFunction(G,_){const J=getEncodingComponents(_);return[`vec4 ${G}( vec4 value ) {`,`	return ${J[1]}( vec4( value.rgb * ${J[0]}, value.a ) );`,"}"].join(`
`)}function getToneMappingFunction(G,_){let J;switch(_){case LinearToneMapping:J="Linear";break;case ReinhardToneMapping:J="Reinhard";break;case CineonToneMapping:J="Cineon";break;case ACESFilmicToneMapping:J="ACESFilmic";break;case AgXToneMapping:J="AgX";break;case NeutralToneMapping:J="Neutral";break;case CustomToneMapping:J="Custom";break;default:warn("WebGLProgram: Unsupported toneMapping:",_),J="Linear"}return"vec3 "+G+"( vec3 color ) { return "+J+"ToneMapping( color ); }"}const _v0=new Vector3;function getLuminanceFunction(){ColorManagement.getLuminanceCoefficients(_v0);const G=_v0.x.toFixed(4),_=_v0.y.toFixed(4),J=_v0.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${G}, ${_}, ${J} );`,"	return dot( weights, rgb );","}"].join(`
`)}function generateVertexExtensions(G){return[G.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",G.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(filterEmptyLine).join(`
`)}function generateDefines(G){const _=[];for(const J in G){const Z=G[J];Z!==!1&&_.push("#define "+J+" "+Z)}return _.join(`
`)}function fetchAttributeLocations(G,_){const J={},Z=G.getProgramParameter(_,G.ACTIVE_ATTRIBUTES);for(let Q=0;Q<Z;Q++){const ee=G.getActiveAttrib(_,Q),te=ee.name;let ne=1;ee.type===G.FLOAT_MAT2&&(ne=2),ee.type===G.FLOAT_MAT3&&(ne=3),ee.type===G.FLOAT_MAT4&&(ne=4),J[te]={type:ee.type,location:G.getAttribLocation(_,te),locationSize:ne}}return J}function filterEmptyLine(G){return G!==""}function replaceLightNums(G,_){const J=_.numSpotLightShadows+_.numSpotLightMaps-_.numSpotLightShadowsWithMaps;return G.replace(/NUM_DIR_LIGHTS/g,_.numDirLights).replace(/NUM_SPOT_LIGHTS/g,_.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,_.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,J).replace(/NUM_RECT_AREA_LIGHTS/g,_.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,_.numPointLights).replace(/NUM_HEMI_LIGHTS/g,_.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,_.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,_.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,_.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,_.numPointLightShadows)}function replaceClippingPlaneNums(G,_){return G.replace(/NUM_CLIPPING_PLANES/g,_.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,_.numClippingPlanes-_.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(G){return G.replace(includePattern,includeReplacer)}const shaderChunkMap=new Map;function includeReplacer(G,_){let J=ShaderChunk[_];if(J===void 0){const Z=shaderChunkMap.get(_);if(Z!==void 0)J=ShaderChunk[Z],warn('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',_,Z);else throw new Error("Can not resolve #include <"+_+">")}return resolveIncludes(J)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(G){return G.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(G,_,J,Z){let Q="";for(let ee=parseInt(_);ee<parseInt(J);ee++)Q+=Z.replace(/\[\s*i\s*\]/g,"[ "+ee+" ]").replace(/UNROLLED_LOOP_INDEX/g,ee);return Q}function generatePrecision(G){let _=`precision ${G.precision} float;
	precision ${G.precision} int;
	precision ${G.precision} sampler2D;
	precision ${G.precision} samplerCube;
	precision ${G.precision} sampler3D;
	precision ${G.precision} sampler2DArray;
	precision ${G.precision} sampler2DShadow;
	precision ${G.precision} samplerCubeShadow;
	precision ${G.precision} sampler2DArrayShadow;
	precision ${G.precision} isampler2D;
	precision ${G.precision} isampler3D;
	precision ${G.precision} isamplerCube;
	precision ${G.precision} isampler2DArray;
	precision ${G.precision} usampler2D;
	precision ${G.precision} usampler3D;
	precision ${G.precision} usamplerCube;
	precision ${G.precision} usampler2DArray;
	`;return G.precision==="highp"?_+=`
#define HIGH_PRECISION`:G.precision==="mediump"?_+=`
#define MEDIUM_PRECISION`:G.precision==="lowp"&&(_+=`
#define LOW_PRECISION`),_}function generateShadowMapTypeDefine(G){let _="SHADOWMAP_TYPE_BASIC";return G.shadowMapType===PCFShadowMap?_="SHADOWMAP_TYPE_PCF":G.shadowMapType===PCFSoftShadowMap?_="SHADOWMAP_TYPE_PCF_SOFT":G.shadowMapType===VSMShadowMap&&(_="SHADOWMAP_TYPE_VSM"),_}function generateEnvMapTypeDefine(G){let _="ENVMAP_TYPE_CUBE";if(G.envMap)switch(G.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:_="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:_="ENVMAP_TYPE_CUBE_UV";break}return _}function generateEnvMapModeDefine(G){let _="ENVMAP_MODE_REFLECTION";if(G.envMap)switch(G.envMapMode){case CubeRefractionMapping:_="ENVMAP_MODE_REFRACTION";break}return _}function generateEnvMapBlendingDefine(G){let _="ENVMAP_BLENDING_NONE";if(G.envMap)switch(G.combine){case MultiplyOperation:_="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:_="ENVMAP_BLENDING_MIX";break;case AddOperation:_="ENVMAP_BLENDING_ADD";break}return _}function generateCubeUVSize(G){const _=G.envMapCubeUVHeight;if(_===null)return null;const J=Math.log2(_)-2,Z=1/_;return{texelWidth:1/(3*Math.max(Math.pow(2,J),112)),texelHeight:Z,maxMip:J}}function WebGLProgram(G,_,J,Z){const Q=G.getContext(),ee=J.defines;let te=J.vertexShader,ne=J.fragmentShader;const ie=generateShadowMapTypeDefine(J),re=generateEnvMapTypeDefine(J),oe=generateEnvMapModeDefine(J),se=generateEnvMapBlendingDefine(J),ae=generateCubeUVSize(J),le=generateVertexExtensions(J),ue=generateDefines(ee),de=Q.createProgram();let pe,fe,_e=J.glslVersion?"#version "+J.glslVersion+`
`:"";J.isRawShaderMaterial?(pe=["#define SHADER_TYPE "+J.shaderType,"#define SHADER_NAME "+J.shaderName,ue].filter(filterEmptyLine).join(`
`),pe.length>0&&(pe+=`
`),fe=["#define SHADER_TYPE "+J.shaderType,"#define SHADER_NAME "+J.shaderName,ue].filter(filterEmptyLine).join(`
`),fe.length>0&&(fe+=`
`)):(pe=[generatePrecision(J),"#define SHADER_TYPE "+J.shaderType,"#define SHADER_NAME "+J.shaderName,ue,J.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",J.batching?"#define USE_BATCHING":"",J.batchingColor?"#define USE_BATCHING_COLOR":"",J.instancing?"#define USE_INSTANCING":"",J.instancingColor?"#define USE_INSTANCING_COLOR":"",J.instancingMorph?"#define USE_INSTANCING_MORPH":"",J.useFog&&J.fog?"#define USE_FOG":"",J.useFog&&J.fogExp2?"#define FOG_EXP2":"",J.map?"#define USE_MAP":"",J.envMap?"#define USE_ENVMAP":"",J.envMap?"#define "+oe:"",J.lightMap?"#define USE_LIGHTMAP":"",J.aoMap?"#define USE_AOMAP":"",J.bumpMap?"#define USE_BUMPMAP":"",J.normalMap?"#define USE_NORMALMAP":"",J.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",J.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",J.displacementMap?"#define USE_DISPLACEMENTMAP":"",J.emissiveMap?"#define USE_EMISSIVEMAP":"",J.anisotropy?"#define USE_ANISOTROPY":"",J.anisotropyMap?"#define USE_ANISOTROPYMAP":"",J.clearcoatMap?"#define USE_CLEARCOATMAP":"",J.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",J.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",J.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",J.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",J.specularMap?"#define USE_SPECULARMAP":"",J.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",J.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",J.roughnessMap?"#define USE_ROUGHNESSMAP":"",J.metalnessMap?"#define USE_METALNESSMAP":"",J.alphaMap?"#define USE_ALPHAMAP":"",J.alphaHash?"#define USE_ALPHAHASH":"",J.transmission?"#define USE_TRANSMISSION":"",J.transmissionMap?"#define USE_TRANSMISSIONMAP":"",J.thicknessMap?"#define USE_THICKNESSMAP":"",J.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",J.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",J.mapUv?"#define MAP_UV "+J.mapUv:"",J.alphaMapUv?"#define ALPHAMAP_UV "+J.alphaMapUv:"",J.lightMapUv?"#define LIGHTMAP_UV "+J.lightMapUv:"",J.aoMapUv?"#define AOMAP_UV "+J.aoMapUv:"",J.emissiveMapUv?"#define EMISSIVEMAP_UV "+J.emissiveMapUv:"",J.bumpMapUv?"#define BUMPMAP_UV "+J.bumpMapUv:"",J.normalMapUv?"#define NORMALMAP_UV "+J.normalMapUv:"",J.displacementMapUv?"#define DISPLACEMENTMAP_UV "+J.displacementMapUv:"",J.metalnessMapUv?"#define METALNESSMAP_UV "+J.metalnessMapUv:"",J.roughnessMapUv?"#define ROUGHNESSMAP_UV "+J.roughnessMapUv:"",J.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+J.anisotropyMapUv:"",J.clearcoatMapUv?"#define CLEARCOATMAP_UV "+J.clearcoatMapUv:"",J.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+J.clearcoatNormalMapUv:"",J.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+J.clearcoatRoughnessMapUv:"",J.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+J.iridescenceMapUv:"",J.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+J.iridescenceThicknessMapUv:"",J.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+J.sheenColorMapUv:"",J.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+J.sheenRoughnessMapUv:"",J.specularMapUv?"#define SPECULARMAP_UV "+J.specularMapUv:"",J.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+J.specularColorMapUv:"",J.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+J.specularIntensityMapUv:"",J.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+J.transmissionMapUv:"",J.thicknessMapUv?"#define THICKNESSMAP_UV "+J.thicknessMapUv:"",J.vertexTangents&&J.flatShading===!1?"#define USE_TANGENT":"",J.vertexColors?"#define USE_COLOR":"",J.vertexAlphas?"#define USE_COLOR_ALPHA":"",J.vertexUv1s?"#define USE_UV1":"",J.vertexUv2s?"#define USE_UV2":"",J.vertexUv3s?"#define USE_UV3":"",J.pointsUvs?"#define USE_POINTS_UV":"",J.flatShading?"#define FLAT_SHADED":"",J.skinning?"#define USE_SKINNING":"",J.morphTargets?"#define USE_MORPHTARGETS":"",J.morphNormals&&J.flatShading===!1?"#define USE_MORPHNORMALS":"",J.morphColors?"#define USE_MORPHCOLORS":"",J.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+J.morphTextureStride:"",J.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+J.morphTargetsCount:"",J.doubleSided?"#define DOUBLE_SIDED":"",J.flipSided?"#define FLIP_SIDED":"",J.shadowMapEnabled?"#define USE_SHADOWMAP":"",J.shadowMapEnabled?"#define "+ie:"",J.sizeAttenuation?"#define USE_SIZEATTENUATION":"",J.numLightProbes>0?"#define USE_LIGHT_PROBES":"",J.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",J.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),fe=[generatePrecision(J),"#define SHADER_TYPE "+J.shaderType,"#define SHADER_NAME "+J.shaderName,ue,J.useFog&&J.fog?"#define USE_FOG":"",J.useFog&&J.fogExp2?"#define FOG_EXP2":"",J.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",J.map?"#define USE_MAP":"",J.matcap?"#define USE_MATCAP":"",J.envMap?"#define USE_ENVMAP":"",J.envMap?"#define "+re:"",J.envMap?"#define "+oe:"",J.envMap?"#define "+se:"",ae?"#define CUBEUV_TEXEL_WIDTH "+ae.texelWidth:"",ae?"#define CUBEUV_TEXEL_HEIGHT "+ae.texelHeight:"",ae?"#define CUBEUV_MAX_MIP "+ae.maxMip+".0":"",J.lightMap?"#define USE_LIGHTMAP":"",J.aoMap?"#define USE_AOMAP":"",J.bumpMap?"#define USE_BUMPMAP":"",J.normalMap?"#define USE_NORMALMAP":"",J.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",J.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",J.emissiveMap?"#define USE_EMISSIVEMAP":"",J.anisotropy?"#define USE_ANISOTROPY":"",J.anisotropyMap?"#define USE_ANISOTROPYMAP":"",J.clearcoat?"#define USE_CLEARCOAT":"",J.clearcoatMap?"#define USE_CLEARCOATMAP":"",J.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",J.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",J.dispersion?"#define USE_DISPERSION":"",J.iridescence?"#define USE_IRIDESCENCE":"",J.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",J.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",J.specularMap?"#define USE_SPECULARMAP":"",J.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",J.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",J.roughnessMap?"#define USE_ROUGHNESSMAP":"",J.metalnessMap?"#define USE_METALNESSMAP":"",J.alphaMap?"#define USE_ALPHAMAP":"",J.alphaTest?"#define USE_ALPHATEST":"",J.alphaHash?"#define USE_ALPHAHASH":"",J.sheen?"#define USE_SHEEN":"",J.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",J.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",J.transmission?"#define USE_TRANSMISSION":"",J.transmissionMap?"#define USE_TRANSMISSIONMAP":"",J.thicknessMap?"#define USE_THICKNESSMAP":"",J.vertexTangents&&J.flatShading===!1?"#define USE_TANGENT":"",J.vertexColors||J.instancingColor||J.batchingColor?"#define USE_COLOR":"",J.vertexAlphas?"#define USE_COLOR_ALPHA":"",J.vertexUv1s?"#define USE_UV1":"",J.vertexUv2s?"#define USE_UV2":"",J.vertexUv3s?"#define USE_UV3":"",J.pointsUvs?"#define USE_POINTS_UV":"",J.gradientMap?"#define USE_GRADIENTMAP":"",J.flatShading?"#define FLAT_SHADED":"",J.doubleSided?"#define DOUBLE_SIDED":"",J.flipSided?"#define FLIP_SIDED":"",J.shadowMapEnabled?"#define USE_SHADOWMAP":"",J.shadowMapEnabled?"#define "+ie:"",J.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",J.numLightProbes>0?"#define USE_LIGHT_PROBES":"",J.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",J.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",J.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",J.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",J.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",J.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",J.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",J.toneMapping):"",J.dithering?"#define DITHERING":"",J.opaque?"#define OPAQUE":"",ShaderChunk.colorspace_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",J.outputColorSpace),getLuminanceFunction(),J.useDepthPacking?"#define DEPTH_PACKING "+J.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),te=resolveIncludes(te),te=replaceLightNums(te,J),te=replaceClippingPlaneNums(te,J),ne=resolveIncludes(ne),ne=replaceLightNums(ne,J),ne=replaceClippingPlaneNums(ne,J),te=unrollLoops(te),ne=unrollLoops(ne),J.isRawShaderMaterial!==!0&&(_e=`#version 300 es
`,pe=[le,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+pe,fe=["#define varying in",J.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",J.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+fe);const ye=_e+pe+te,be=_e+fe+ne,Ae=WebGLShader(Q,Q.VERTEX_SHADER,ye),Ce=WebGLShader(Q,Q.FRAGMENT_SHADER,be);Q.attachShader(de,Ae),Q.attachShader(de,Ce),J.index0AttributeName!==void 0?Q.bindAttribLocation(de,0,J.index0AttributeName):J.morphTargets===!0&&Q.bindAttribLocation(de,0,"position"),Q.linkProgram(de);function Ee(Ne){if(G.debug.checkShaderErrors){const Le=Q.getProgramInfoLog(de)||"",Ie=Q.getShaderInfoLog(Ae)||"",Ge=Q.getShaderInfoLog(Ce)||"",He=Le.trim(),Be=Ie.trim(),ze=Ge.trim();let Fe=!0,$e=!0;if(Q.getProgramParameter(de,Q.LINK_STATUS)===!1)if(Fe=!1,typeof G.debug.onShaderError=="function")G.debug.onShaderError(Q,de,Ae,Ce);else{const Xe=getShaderErrors(Q,Ae,"vertex"),je=getShaderErrors(Q,Ce,"fragment");error("THREE.WebGLProgram: Shader Error "+Q.getError()+" - VALIDATE_STATUS "+Q.getProgramParameter(de,Q.VALIDATE_STATUS)+`

Material Name: `+Ne.name+`
Material Type: `+Ne.type+`

Program Info Log: `+He+`
`+Xe+`
`+je)}else He!==""?warn("WebGLProgram: Program Info Log:",He):(Be===""||ze==="")&&($e=!1);$e&&(Ne.diagnostics={runnable:Fe,programLog:He,vertexShader:{log:Be,prefix:pe},fragmentShader:{log:ze,prefix:fe}})}Q.deleteShader(Ae),Q.deleteShader(Ce),Re=new WebGLUniforms(Q,de),Te=fetchAttributeLocations(Q,de)}let Re;this.getUniforms=function(){return Re===void 0&&Ee(this),Re};let Te;this.getAttributes=function(){return Te===void 0&&Ee(this),Te};let Me=J.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return Me===!1&&(Me=Q.getProgramParameter(de,COMPLETION_STATUS_KHR)),Me},this.destroy=function(){Z.releaseStatesOfProgram(this),Q.deleteProgram(de),this.program=void 0},this.type=J.shaderType,this.name=J.shaderName,this.id=programIdCount++,this.cacheKey=_,this.usedTimes=1,this.program=de,this.vertexShader=Ae,this.fragmentShader=Ce,this}let _id=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(_){const J=_.vertexShader,Z=_.fragmentShader,Q=this._getShaderStage(J),ee=this._getShaderStage(Z),te=this._getShaderCacheForMaterial(_);return te.has(Q)===!1&&(te.add(Q),Q.usedTimes++),te.has(ee)===!1&&(te.add(ee),ee.usedTimes++),this}remove(_){const J=this.materialCache.get(_);for(const Z of J)Z.usedTimes--,Z.usedTimes===0&&this.shaderCache.delete(Z.code);return this.materialCache.delete(_),this}getVertexShaderID(_){return this._getShaderStage(_.vertexShader).id}getFragmentShaderID(_){return this._getShaderStage(_.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(_){const J=this.materialCache;let Z=J.get(_);return Z===void 0&&(Z=new Set,J.set(_,Z)),Z}_getShaderStage(_){const J=this.shaderCache;let Z=J.get(_);return Z===void 0&&(Z=new WebGLShaderStage(_),J.set(_,Z)),Z}}class WebGLShaderStage{constructor(_){this.id=_id++,this.code=_,this.usedTimes=0}}function WebGLPrograms(G,_,J,Z,Q,ee,te){const ne=new Layers,ie=new WebGLShaderCache,re=new Set,oe=[],se=Q.logarithmicDepthBuffer,ae=Q.vertexTextures;let le=Q.precision;const ue={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function de(Te){return re.add(Te),Te===0?"uv":`uv${Te}`}function pe(Te,Me,Ne,Le,Ie){const Ge=Le.fog,He=Ie.geometry,Be=Te.isMeshStandardMaterial?Le.environment:null,ze=(Te.isMeshStandardMaterial?J:_).get(Te.envMap||Be),Fe=ze&&ze.mapping===CubeUVReflectionMapping?ze.image.height:null,$e=ue[Te.type];Te.precision!==null&&(le=Q.getMaxPrecision(Te.precision),le!==Te.precision&&warn("WebGLProgram.getParameters:",Te.precision,"not supported, using",le,"instead."));const Xe=He.morphAttributes.position||He.morphAttributes.normal||He.morphAttributes.color,je=Xe!==void 0?Xe.length:0;let qe=0;He.morphAttributes.position!==void 0&&(qe=1),He.morphAttributes.normal!==void 0&&(qe=2),He.morphAttributes.color!==void 0&&(qe=3);let Ze,st,St,it;if($e){const Si=ShaderLib[$e];Ze=Si.vertexShader,st=Si.fragmentShader}else Ze=Te.vertexShader,st=Te.fragmentShader,ie.update(Te),St=ie.getVertexShaderID(Te),it=ie.getFragmentShaderID(Te);const lt=G.getRenderTarget(),ft=G.state.buffers.depth.getReversed(),kt=Ie.isInstancedMesh===!0,Ht=Ie.isBatchedMesh===!0,Wt=!!Te.map,ni=!!Te.matcap,jt=!!ze,pt=!!Te.aoMap,Ke=!!Te.lightMap,Mt=!!Te.bumpMap,Bt=!!Te.normalMap,Lt=!!Te.displacementMap,Ft=!!Te.emissiveMap,ai=!!Te.metalnessMap,Qt=!!Te.roughnessMap,hi=Te.anisotropy>0,Qe=Te.clearcoat>0,Ye=Te.dispersion>0,_t=Te.iridescence>0,dt=Te.sheen>0,yt=Te.transmission>0,Nt=hi&&!!Te.anisotropyMap,fi=Qe&&!!Te.clearcoatMap,Zt=Qe&&!!Te.clearcoatNormalMap,Ut=Qe&&!!Te.clearcoatRoughnessMap,qt=_t&&!!Te.iridescenceMap,Rt=_t&&!!Te.iridescenceThicknessMap,Pt=dt&&!!Te.sheenColorMap,vt=dt&&!!Te.sheenRoughnessMap,tt=!!Te.specularMap,et=!!Te.specularColorMap,ei=!!Te.specularIntensityMap,rt=yt&&!!Te.transmissionMap,ti=yt&&!!Te.thicknessMap,zt=!!Te.gradientMap,ii=!!Te.alphaMap,Kt=Te.alphaTest>0,Vt=!!Te.alphaHash,di=!!Te.extensions;let pi=NoToneMapping;Te.toneMapped&&(lt===null||lt.isXRRenderTarget===!0)&&(pi=G.toneMapping);const Di={shaderID:$e,shaderType:Te.type,shaderName:Te.name,vertexShader:Ze,fragmentShader:st,defines:Te.defines,customVertexShaderID:St,customFragmentShaderID:it,isRawShaderMaterial:Te.isRawShaderMaterial===!0,glslVersion:Te.glslVersion,precision:le,batching:Ht,batchingColor:Ht&&Ie._colorsTexture!==null,instancing:kt,instancingColor:kt&&Ie.instanceColor!==null,instancingMorph:kt&&Ie.morphTexture!==null,supportsVertexTextures:ae,outputColorSpace:lt===null?G.outputColorSpace:lt.isXRRenderTarget===!0?lt.texture.colorSpace:LinearSRGBColorSpace,alphaToCoverage:!!Te.alphaToCoverage,map:Wt,matcap:ni,envMap:jt,envMapMode:jt&&ze.mapping,envMapCubeUVHeight:Fe,aoMap:pt,lightMap:Ke,bumpMap:Mt,normalMap:Bt,displacementMap:ae&&Lt,emissiveMap:Ft,normalMapObjectSpace:Bt&&Te.normalMapType===ObjectSpaceNormalMap,normalMapTangentSpace:Bt&&Te.normalMapType===TangentSpaceNormalMap,metalnessMap:ai,roughnessMap:Qt,anisotropy:hi,anisotropyMap:Nt,clearcoat:Qe,clearcoatMap:fi,clearcoatNormalMap:Zt,clearcoatRoughnessMap:Ut,dispersion:Ye,iridescence:_t,iridescenceMap:qt,iridescenceThicknessMap:Rt,sheen:dt,sheenColorMap:Pt,sheenRoughnessMap:vt,specularMap:tt,specularColorMap:et,specularIntensityMap:ei,transmission:yt,transmissionMap:rt,thicknessMap:ti,gradientMap:zt,opaque:Te.transparent===!1&&Te.blending===NormalBlending&&Te.alphaToCoverage===!1,alphaMap:ii,alphaTest:Kt,alphaHash:Vt,combine:Te.combine,mapUv:Wt&&de(Te.map.channel),aoMapUv:pt&&de(Te.aoMap.channel),lightMapUv:Ke&&de(Te.lightMap.channel),bumpMapUv:Mt&&de(Te.bumpMap.channel),normalMapUv:Bt&&de(Te.normalMap.channel),displacementMapUv:Lt&&de(Te.displacementMap.channel),emissiveMapUv:Ft&&de(Te.emissiveMap.channel),metalnessMapUv:ai&&de(Te.metalnessMap.channel),roughnessMapUv:Qt&&de(Te.roughnessMap.channel),anisotropyMapUv:Nt&&de(Te.anisotropyMap.channel),clearcoatMapUv:fi&&de(Te.clearcoatMap.channel),clearcoatNormalMapUv:Zt&&de(Te.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ut&&de(Te.clearcoatRoughnessMap.channel),iridescenceMapUv:qt&&de(Te.iridescenceMap.channel),iridescenceThicknessMapUv:Rt&&de(Te.iridescenceThicknessMap.channel),sheenColorMapUv:Pt&&de(Te.sheenColorMap.channel),sheenRoughnessMapUv:vt&&de(Te.sheenRoughnessMap.channel),specularMapUv:tt&&de(Te.specularMap.channel),specularColorMapUv:et&&de(Te.specularColorMap.channel),specularIntensityMapUv:ei&&de(Te.specularIntensityMap.channel),transmissionMapUv:rt&&de(Te.transmissionMap.channel),thicknessMapUv:ti&&de(Te.thicknessMap.channel),alphaMapUv:ii&&de(Te.alphaMap.channel),vertexTangents:!!He.attributes.tangent&&(Bt||hi),vertexColors:Te.vertexColors,vertexAlphas:Te.vertexColors===!0&&!!He.attributes.color&&He.attributes.color.itemSize===4,pointsUvs:Ie.isPoints===!0&&!!He.attributes.uv&&(Wt||ii),fog:!!Ge,useFog:Te.fog===!0,fogExp2:!!Ge&&Ge.isFogExp2,flatShading:Te.flatShading===!0&&Te.wireframe===!1,sizeAttenuation:Te.sizeAttenuation===!0,logarithmicDepthBuffer:se,reversedDepthBuffer:ft,skinning:Ie.isSkinnedMesh===!0,morphTargets:He.morphAttributes.position!==void 0,morphNormals:He.morphAttributes.normal!==void 0,morphColors:He.morphAttributes.color!==void 0,morphTargetsCount:je,morphTextureStride:qe,numDirLights:Me.directional.length,numPointLights:Me.point.length,numSpotLights:Me.spot.length,numSpotLightMaps:Me.spotLightMap.length,numRectAreaLights:Me.rectArea.length,numHemiLights:Me.hemi.length,numDirLightShadows:Me.directionalShadowMap.length,numPointLightShadows:Me.pointShadowMap.length,numSpotLightShadows:Me.spotShadowMap.length,numSpotLightShadowsWithMaps:Me.numSpotLightShadowsWithMaps,numLightProbes:Me.numLightProbes,numClippingPlanes:te.numPlanes,numClipIntersection:te.numIntersection,dithering:Te.dithering,shadowMapEnabled:G.shadowMap.enabled&&Ne.length>0,shadowMapType:G.shadowMap.type,toneMapping:pi,decodeVideoTexture:Wt&&Te.map.isVideoTexture===!0&&ColorManagement.getTransfer(Te.map.colorSpace)===SRGBTransfer,decodeVideoTextureEmissive:Ft&&Te.emissiveMap.isVideoTexture===!0&&ColorManagement.getTransfer(Te.emissiveMap.colorSpace)===SRGBTransfer,premultipliedAlpha:Te.premultipliedAlpha,doubleSided:Te.side===DoubleSide,flipSided:Te.side===BackSide,useDepthPacking:Te.depthPacking>=0,depthPacking:Te.depthPacking||0,index0AttributeName:Te.index0AttributeName,extensionClipCullDistance:di&&Te.extensions.clipCullDistance===!0&&Z.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(di&&Te.extensions.multiDraw===!0||Ht)&&Z.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:Z.has("KHR_parallel_shader_compile"),customProgramCacheKey:Te.customProgramCacheKey()};return Di.vertexUv1s=re.has(1),Di.vertexUv2s=re.has(2),Di.vertexUv3s=re.has(3),re.clear(),Di}function fe(Te){const Me=[];if(Te.shaderID?Me.push(Te.shaderID):(Me.push(Te.customVertexShaderID),Me.push(Te.customFragmentShaderID)),Te.defines!==void 0)for(const Ne in Te.defines)Me.push(Ne),Me.push(Te.defines[Ne]);return Te.isRawShaderMaterial===!1&&(_e(Me,Te),ye(Me,Te),Me.push(G.outputColorSpace)),Me.push(Te.customProgramCacheKey),Me.join()}function _e(Te,Me){Te.push(Me.precision),Te.push(Me.outputColorSpace),Te.push(Me.envMapMode),Te.push(Me.envMapCubeUVHeight),Te.push(Me.mapUv),Te.push(Me.alphaMapUv),Te.push(Me.lightMapUv),Te.push(Me.aoMapUv),Te.push(Me.bumpMapUv),Te.push(Me.normalMapUv),Te.push(Me.displacementMapUv),Te.push(Me.emissiveMapUv),Te.push(Me.metalnessMapUv),Te.push(Me.roughnessMapUv),Te.push(Me.anisotropyMapUv),Te.push(Me.clearcoatMapUv),Te.push(Me.clearcoatNormalMapUv),Te.push(Me.clearcoatRoughnessMapUv),Te.push(Me.iridescenceMapUv),Te.push(Me.iridescenceThicknessMapUv),Te.push(Me.sheenColorMapUv),Te.push(Me.sheenRoughnessMapUv),Te.push(Me.specularMapUv),Te.push(Me.specularColorMapUv),Te.push(Me.specularIntensityMapUv),Te.push(Me.transmissionMapUv),Te.push(Me.thicknessMapUv),Te.push(Me.combine),Te.push(Me.fogExp2),Te.push(Me.sizeAttenuation),Te.push(Me.morphTargetsCount),Te.push(Me.morphAttributeCount),Te.push(Me.numDirLights),Te.push(Me.numPointLights),Te.push(Me.numSpotLights),Te.push(Me.numSpotLightMaps),Te.push(Me.numHemiLights),Te.push(Me.numRectAreaLights),Te.push(Me.numDirLightShadows),Te.push(Me.numPointLightShadows),Te.push(Me.numSpotLightShadows),Te.push(Me.numSpotLightShadowsWithMaps),Te.push(Me.numLightProbes),Te.push(Me.shadowMapType),Te.push(Me.toneMapping),Te.push(Me.numClippingPlanes),Te.push(Me.numClipIntersection),Te.push(Me.depthPacking)}function ye(Te,Me){ne.disableAll(),Me.supportsVertexTextures&&ne.enable(0),Me.instancing&&ne.enable(1),Me.instancingColor&&ne.enable(2),Me.instancingMorph&&ne.enable(3),Me.matcap&&ne.enable(4),Me.envMap&&ne.enable(5),Me.normalMapObjectSpace&&ne.enable(6),Me.normalMapTangentSpace&&ne.enable(7),Me.clearcoat&&ne.enable(8),Me.iridescence&&ne.enable(9),Me.alphaTest&&ne.enable(10),Me.vertexColors&&ne.enable(11),Me.vertexAlphas&&ne.enable(12),Me.vertexUv1s&&ne.enable(13),Me.vertexUv2s&&ne.enable(14),Me.vertexUv3s&&ne.enable(15),Me.vertexTangents&&ne.enable(16),Me.anisotropy&&ne.enable(17),Me.alphaHash&&ne.enable(18),Me.batching&&ne.enable(19),Me.dispersion&&ne.enable(20),Me.batchingColor&&ne.enable(21),Me.gradientMap&&ne.enable(22),Te.push(ne.mask),ne.disableAll(),Me.fog&&ne.enable(0),Me.useFog&&ne.enable(1),Me.flatShading&&ne.enable(2),Me.logarithmicDepthBuffer&&ne.enable(3),Me.reversedDepthBuffer&&ne.enable(4),Me.skinning&&ne.enable(5),Me.morphTargets&&ne.enable(6),Me.morphNormals&&ne.enable(7),Me.morphColors&&ne.enable(8),Me.premultipliedAlpha&&ne.enable(9),Me.shadowMapEnabled&&ne.enable(10),Me.doubleSided&&ne.enable(11),Me.flipSided&&ne.enable(12),Me.useDepthPacking&&ne.enable(13),Me.dithering&&ne.enable(14),Me.transmission&&ne.enable(15),Me.sheen&&ne.enable(16),Me.opaque&&ne.enable(17),Me.pointsUvs&&ne.enable(18),Me.decodeVideoTexture&&ne.enable(19),Me.decodeVideoTextureEmissive&&ne.enable(20),Me.alphaToCoverage&&ne.enable(21),Te.push(ne.mask)}function be(Te){const Me=ue[Te.type];let Ne;if(Me){const Le=ShaderLib[Me];Ne=UniformsUtils.clone(Le.uniforms)}else Ne=Te.uniforms;return Ne}function Ae(Te,Me){let Ne;for(let Le=0,Ie=oe.length;Le<Ie;Le++){const Ge=oe[Le];if(Ge.cacheKey===Me){Ne=Ge,++Ne.usedTimes;break}}return Ne===void 0&&(Ne=new WebGLProgram(G,Me,Te,ee),oe.push(Ne)),Ne}function Ce(Te){if(--Te.usedTimes===0){const Me=oe.indexOf(Te);oe[Me]=oe[oe.length-1],oe.pop(),Te.destroy()}}function Ee(Te){ie.remove(Te)}function Re(){ie.dispose()}return{getParameters:pe,getProgramCacheKey:fe,getUniforms:be,acquireProgram:Ae,releaseProgram:Ce,releaseShaderCache:Ee,programs:oe,dispose:Re}}function WebGLProperties(){let G=new WeakMap;function _(te){return G.has(te)}function J(te){let ne=G.get(te);return ne===void 0&&(ne={},G.set(te,ne)),ne}function Z(te){G.delete(te)}function Q(te,ne,ie){G.get(te)[ne]=ie}function ee(){G=new WeakMap}return{has:_,get:J,remove:Z,update:Q,dispose:ee}}function painterSortStable(G,_){return G.groupOrder!==_.groupOrder?G.groupOrder-_.groupOrder:G.renderOrder!==_.renderOrder?G.renderOrder-_.renderOrder:G.material.id!==_.material.id?G.material.id-_.material.id:G.z!==_.z?G.z-_.z:G.id-_.id}function reversePainterSortStable(G,_){return G.groupOrder!==_.groupOrder?G.groupOrder-_.groupOrder:G.renderOrder!==_.renderOrder?G.renderOrder-_.renderOrder:G.z!==_.z?_.z-G.z:G.id-_.id}function WebGLRenderList(){const G=[];let _=0;const J=[],Z=[],Q=[];function ee(){_=0,J.length=0,Z.length=0,Q.length=0}function te(se,ae,le,ue,de,pe){let fe=G[_];return fe===void 0?(fe={id:se.id,object:se,geometry:ae,material:le,groupOrder:ue,renderOrder:se.renderOrder,z:de,group:pe},G[_]=fe):(fe.id=se.id,fe.object=se,fe.geometry=ae,fe.material=le,fe.groupOrder=ue,fe.renderOrder=se.renderOrder,fe.z=de,fe.group=pe),_++,fe}function ne(se,ae,le,ue,de,pe){const fe=te(se,ae,le,ue,de,pe);le.transmission>0?Z.push(fe):le.transparent===!0?Q.push(fe):J.push(fe)}function ie(se,ae,le,ue,de,pe){const fe=te(se,ae,le,ue,de,pe);le.transmission>0?Z.unshift(fe):le.transparent===!0?Q.unshift(fe):J.unshift(fe)}function re(se,ae){J.length>1&&J.sort(se||painterSortStable),Z.length>1&&Z.sort(ae||reversePainterSortStable),Q.length>1&&Q.sort(ae||reversePainterSortStable)}function oe(){for(let se=_,ae=G.length;se<ae;se++){const le=G[se];if(le.id===null)break;le.id=null,le.object=null,le.geometry=null,le.material=null,le.group=null}}return{opaque:J,transmissive:Z,transparent:Q,init:ee,push:ne,unshift:ie,finish:oe,sort:re}}function WebGLRenderLists(){let G=new WeakMap;function _(Z,Q){const ee=G.get(Z);let te;return ee===void 0?(te=new WebGLRenderList,G.set(Z,[te])):Q>=ee.length?(te=new WebGLRenderList,ee.push(te)):te=ee[Q],te}function J(){G=new WeakMap}return{get:_,dispose:J}}function UniformsCache(){const G={};return{get:function(_){if(G[_.id]!==void 0)return G[_.id];let J;switch(_.type){case"DirectionalLight":J={direction:new Vector3,color:new Color};break;case"SpotLight":J={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":J={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":J={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":J={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return G[_.id]=J,J}}}function ShadowUniformsCache(){const G={};return{get:function(_){if(G[_.id]!==void 0)return G[_.id];let J;switch(_.type){case"DirectionalLight":J={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":J={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":J={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return G[_.id]=J,J}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst(G,_){return(_.castShadow?2:0)-(G.castShadow?2:0)+(_.map?1:0)-(G.map?1:0)}function WebGLLights(G){const _=new UniformsCache,J=ShadowUniformsCache(),Z={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let re=0;re<9;re++)Z.probe.push(new Vector3);const Q=new Vector3,ee=new Matrix4,te=new Matrix4;function ne(re){let oe=0,se=0,ae=0;for(let Te=0;Te<9;Te++)Z.probe[Te].set(0,0,0);let le=0,ue=0,de=0,pe=0,fe=0,_e=0,ye=0,be=0,Ae=0,Ce=0,Ee=0;re.sort(shadowCastingAndTexturingLightsFirst);for(let Te=0,Me=re.length;Te<Me;Te++){const Ne=re[Te],Le=Ne.color,Ie=Ne.intensity,Ge=Ne.distance,He=Ne.shadow&&Ne.shadow.map?Ne.shadow.map.texture:null;if(Ne.isAmbientLight)oe+=Le.r*Ie,se+=Le.g*Ie,ae+=Le.b*Ie;else if(Ne.isLightProbe){for(let Be=0;Be<9;Be++)Z.probe[Be].addScaledVector(Ne.sh.coefficients[Be],Ie);Ee++}else if(Ne.isDirectionalLight){const Be=_.get(Ne);if(Be.color.copy(Ne.color).multiplyScalar(Ne.intensity),Ne.castShadow){const ze=Ne.shadow,Fe=J.get(Ne);Fe.shadowIntensity=ze.intensity,Fe.shadowBias=ze.bias,Fe.shadowNormalBias=ze.normalBias,Fe.shadowRadius=ze.radius,Fe.shadowMapSize=ze.mapSize,Z.directionalShadow[le]=Fe,Z.directionalShadowMap[le]=He,Z.directionalShadowMatrix[le]=Ne.shadow.matrix,_e++}Z.directional[le]=Be,le++}else if(Ne.isSpotLight){const Be=_.get(Ne);Be.position.setFromMatrixPosition(Ne.matrixWorld),Be.color.copy(Le).multiplyScalar(Ie),Be.distance=Ge,Be.coneCos=Math.cos(Ne.angle),Be.penumbraCos=Math.cos(Ne.angle*(1-Ne.penumbra)),Be.decay=Ne.decay,Z.spot[de]=Be;const ze=Ne.shadow;if(Ne.map&&(Z.spotLightMap[Ae]=Ne.map,Ae++,ze.updateMatrices(Ne),Ne.castShadow&&Ce++),Z.spotLightMatrix[de]=ze.matrix,Ne.castShadow){const Fe=J.get(Ne);Fe.shadowIntensity=ze.intensity,Fe.shadowBias=ze.bias,Fe.shadowNormalBias=ze.normalBias,Fe.shadowRadius=ze.radius,Fe.shadowMapSize=ze.mapSize,Z.spotShadow[de]=Fe,Z.spotShadowMap[de]=He,be++}de++}else if(Ne.isRectAreaLight){const Be=_.get(Ne);Be.color.copy(Le).multiplyScalar(Ie),Be.halfWidth.set(Ne.width*.5,0,0),Be.halfHeight.set(0,Ne.height*.5,0),Z.rectArea[pe]=Be,pe++}else if(Ne.isPointLight){const Be=_.get(Ne);if(Be.color.copy(Ne.color).multiplyScalar(Ne.intensity),Be.distance=Ne.distance,Be.decay=Ne.decay,Ne.castShadow){const ze=Ne.shadow,Fe=J.get(Ne);Fe.shadowIntensity=ze.intensity,Fe.shadowBias=ze.bias,Fe.shadowNormalBias=ze.normalBias,Fe.shadowRadius=ze.radius,Fe.shadowMapSize=ze.mapSize,Fe.shadowCameraNear=ze.camera.near,Fe.shadowCameraFar=ze.camera.far,Z.pointShadow[ue]=Fe,Z.pointShadowMap[ue]=He,Z.pointShadowMatrix[ue]=Ne.shadow.matrix,ye++}Z.point[ue]=Be,ue++}else if(Ne.isHemisphereLight){const Be=_.get(Ne);Be.skyColor.copy(Ne.color).multiplyScalar(Ie),Be.groundColor.copy(Ne.groundColor).multiplyScalar(Ie),Z.hemi[fe]=Be,fe++}}pe>0&&(G.has("OES_texture_float_linear")===!0?(Z.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,Z.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):(Z.rectAreaLTC1=UniformsLib.LTC_HALF_1,Z.rectAreaLTC2=UniformsLib.LTC_HALF_2)),Z.ambient[0]=oe,Z.ambient[1]=se,Z.ambient[2]=ae;const Re=Z.hash;(Re.directionalLength!==le||Re.pointLength!==ue||Re.spotLength!==de||Re.rectAreaLength!==pe||Re.hemiLength!==fe||Re.numDirectionalShadows!==_e||Re.numPointShadows!==ye||Re.numSpotShadows!==be||Re.numSpotMaps!==Ae||Re.numLightProbes!==Ee)&&(Z.directional.length=le,Z.spot.length=de,Z.rectArea.length=pe,Z.point.length=ue,Z.hemi.length=fe,Z.directionalShadow.length=_e,Z.directionalShadowMap.length=_e,Z.pointShadow.length=ye,Z.pointShadowMap.length=ye,Z.spotShadow.length=be,Z.spotShadowMap.length=be,Z.directionalShadowMatrix.length=_e,Z.pointShadowMatrix.length=ye,Z.spotLightMatrix.length=be+Ae-Ce,Z.spotLightMap.length=Ae,Z.numSpotLightShadowsWithMaps=Ce,Z.numLightProbes=Ee,Re.directionalLength=le,Re.pointLength=ue,Re.spotLength=de,Re.rectAreaLength=pe,Re.hemiLength=fe,Re.numDirectionalShadows=_e,Re.numPointShadows=ye,Re.numSpotShadows=be,Re.numSpotMaps=Ae,Re.numLightProbes=Ee,Z.version=nextVersion++)}function ie(re,oe){let se=0,ae=0,le=0,ue=0,de=0;const pe=oe.matrixWorldInverse;for(let fe=0,_e=re.length;fe<_e;fe++){const ye=re[fe];if(ye.isDirectionalLight){const be=Z.directional[se];be.direction.setFromMatrixPosition(ye.matrixWorld),Q.setFromMatrixPosition(ye.target.matrixWorld),be.direction.sub(Q),be.direction.transformDirection(pe),se++}else if(ye.isSpotLight){const be=Z.spot[le];be.position.setFromMatrixPosition(ye.matrixWorld),be.position.applyMatrix4(pe),be.direction.setFromMatrixPosition(ye.matrixWorld),Q.setFromMatrixPosition(ye.target.matrixWorld),be.direction.sub(Q),be.direction.transformDirection(pe),le++}else if(ye.isRectAreaLight){const be=Z.rectArea[ue];be.position.setFromMatrixPosition(ye.matrixWorld),be.position.applyMatrix4(pe),te.identity(),ee.copy(ye.matrixWorld),ee.premultiply(pe),te.extractRotation(ee),be.halfWidth.set(ye.width*.5,0,0),be.halfHeight.set(0,ye.height*.5,0),be.halfWidth.applyMatrix4(te),be.halfHeight.applyMatrix4(te),ue++}else if(ye.isPointLight){const be=Z.point[ae];be.position.setFromMatrixPosition(ye.matrixWorld),be.position.applyMatrix4(pe),ae++}else if(ye.isHemisphereLight){const be=Z.hemi[de];be.direction.setFromMatrixPosition(ye.matrixWorld),be.direction.transformDirection(pe),de++}}}return{setup:ne,setupView:ie,state:Z}}function WebGLRenderState(G){const _=new WebGLLights(G),J=[],Z=[];function Q(oe){re.camera=oe,J.length=0,Z.length=0}function ee(oe){J.push(oe)}function te(oe){Z.push(oe)}function ne(){_.setup(J)}function ie(oe){_.setupView(J,oe)}const re={lightsArray:J,shadowsArray:Z,camera:null,lights:_,transmissionRenderTarget:{}};return{init:Q,state:re,setupLights:ne,setupLightsView:ie,pushLight:ee,pushShadow:te}}function WebGLRenderStates(G){let _=new WeakMap;function J(Q,ee=0){const te=_.get(Q);let ne;return te===void 0?(ne=new WebGLRenderState(G),_.set(Q,[ne])):ee>=te.length?(ne=new WebGLRenderState(G),te.push(ne)):ne=te[ee],ne}function Z(){_=new WeakMap}return{get:J,dispose:Z}}const vertex=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WebGLShadowMap(G,_,J){let Z=new Frustum;const Q=new Vector2,ee=new Vector2,te=new Vector4,ne=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),ie=new MeshDistanceMaterial,re={},oe=J.maxTextureSize,se={[FrontSide]:BackSide,[BackSide]:FrontSide,[DoubleSide]:DoubleSide},ae=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),le=ae.clone();le.defines.HORIZONTAL_PASS=1;const ue=new BufferGeometry;ue.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const de=new Mesh(ue,ae),pe=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap;let fe=this.type;this.render=function(Ce,Ee,Re){if(pe.enabled===!1||pe.autoUpdate===!1&&pe.needsUpdate===!1||Ce.length===0)return;const Te=G.getRenderTarget(),Me=G.getActiveCubeFace(),Ne=G.getActiveMipmapLevel(),Le=G.state;Le.setBlending(NoBlending),Le.buffers.depth.getReversed()===!0?Le.buffers.color.setClear(0,0,0,0):Le.buffers.color.setClear(1,1,1,1),Le.buffers.depth.setTest(!0),Le.setScissorTest(!1);const Ie=fe!==VSMShadowMap&&this.type===VSMShadowMap,Ge=fe===VSMShadowMap&&this.type!==VSMShadowMap;for(let He=0,Be=Ce.length;He<Be;He++){const ze=Ce[He],Fe=ze.shadow;if(Fe===void 0){warn("WebGLShadowMap:",ze,"has no shadow.");continue}if(Fe.autoUpdate===!1&&Fe.needsUpdate===!1)continue;Q.copy(Fe.mapSize);const $e=Fe.getFrameExtents();if(Q.multiply($e),ee.copy(Fe.mapSize),(Q.x>oe||Q.y>oe)&&(Q.x>oe&&(ee.x=Math.floor(oe/$e.x),Q.x=ee.x*$e.x,Fe.mapSize.x=ee.x),Q.y>oe&&(ee.y=Math.floor(oe/$e.y),Q.y=ee.y*$e.y,Fe.mapSize.y=ee.y)),Fe.map===null||Ie===!0||Ge===!0){const je=this.type!==VSMShadowMap?{minFilter:NearestFilter,magFilter:NearestFilter}:{};Fe.map!==null&&Fe.map.dispose(),Fe.map=new WebGLRenderTarget(Q.x,Q.y,je),Fe.map.texture.name=ze.name+".shadowMap",Fe.camera.updateProjectionMatrix()}G.setRenderTarget(Fe.map),G.clear();const Xe=Fe.getViewportCount();for(let je=0;je<Xe;je++){const qe=Fe.getViewport(je);te.set(ee.x*qe.x,ee.y*qe.y,ee.x*qe.z,ee.y*qe.w),Le.viewport(te),Fe.updateMatrices(ze,je),Z=Fe.getFrustum(),be(Ee,Re,Fe.camera,ze,this.type)}Fe.isPointLightShadow!==!0&&this.type===VSMShadowMap&&_e(Fe,Re),Fe.needsUpdate=!1}fe=this.type,pe.needsUpdate=!1,G.setRenderTarget(Te,Me,Ne)};function _e(Ce,Ee){const Re=_.update(de);ae.defines.VSM_SAMPLES!==Ce.blurSamples&&(ae.defines.VSM_SAMPLES=Ce.blurSamples,le.defines.VSM_SAMPLES=Ce.blurSamples,ae.needsUpdate=!0,le.needsUpdate=!0),Ce.mapPass===null&&(Ce.mapPass=new WebGLRenderTarget(Q.x,Q.y)),ae.uniforms.shadow_pass.value=Ce.map.texture,ae.uniforms.resolution.value=Ce.mapSize,ae.uniforms.radius.value=Ce.radius,G.setRenderTarget(Ce.mapPass),G.clear(),G.renderBufferDirect(Ee,null,Re,ae,de,null),le.uniforms.shadow_pass.value=Ce.mapPass.texture,le.uniforms.resolution.value=Ce.mapSize,le.uniforms.radius.value=Ce.radius,G.setRenderTarget(Ce.map),G.clear(),G.renderBufferDirect(Ee,null,Re,le,de,null)}function ye(Ce,Ee,Re,Te){let Me=null;const Ne=Re.isPointLight===!0?Ce.customDistanceMaterial:Ce.customDepthMaterial;if(Ne!==void 0)Me=Ne;else if(Me=Re.isPointLight===!0?ie:ne,G.localClippingEnabled&&Ee.clipShadows===!0&&Array.isArray(Ee.clippingPlanes)&&Ee.clippingPlanes.length!==0||Ee.displacementMap&&Ee.displacementScale!==0||Ee.alphaMap&&Ee.alphaTest>0||Ee.map&&Ee.alphaTest>0||Ee.alphaToCoverage===!0){const Le=Me.uuid,Ie=Ee.uuid;let Ge=re[Le];Ge===void 0&&(Ge={},re[Le]=Ge);let He=Ge[Ie];He===void 0&&(He=Me.clone(),Ge[Ie]=He,Ee.addEventListener("dispose",Ae)),Me=He}if(Me.visible=Ee.visible,Me.wireframe=Ee.wireframe,Te===VSMShadowMap?Me.side=Ee.shadowSide!==null?Ee.shadowSide:Ee.side:Me.side=Ee.shadowSide!==null?Ee.shadowSide:se[Ee.side],Me.alphaMap=Ee.alphaMap,Me.alphaTest=Ee.alphaToCoverage===!0?.5:Ee.alphaTest,Me.map=Ee.map,Me.clipShadows=Ee.clipShadows,Me.clippingPlanes=Ee.clippingPlanes,Me.clipIntersection=Ee.clipIntersection,Me.displacementMap=Ee.displacementMap,Me.displacementScale=Ee.displacementScale,Me.displacementBias=Ee.displacementBias,Me.wireframeLinewidth=Ee.wireframeLinewidth,Me.linewidth=Ee.linewidth,Re.isPointLight===!0&&Me.isMeshDistanceMaterial===!0){const Le=G.properties.get(Me);Le.light=Re}return Me}function be(Ce,Ee,Re,Te,Me){if(Ce.visible===!1)return;if(Ce.layers.test(Ee.layers)&&(Ce.isMesh||Ce.isLine||Ce.isPoints)&&(Ce.castShadow||Ce.receiveShadow&&Me===VSMShadowMap)&&(!Ce.frustumCulled||Z.intersectsObject(Ce))){Ce.modelViewMatrix.multiplyMatrices(Re.matrixWorldInverse,Ce.matrixWorld);const Ie=_.update(Ce),Ge=Ce.material;if(Array.isArray(Ge)){const He=Ie.groups;for(let Be=0,ze=He.length;Be<ze;Be++){const Fe=He[Be],$e=Ge[Fe.materialIndex];if($e&&$e.visible){const Xe=ye(Ce,$e,Te,Me);Ce.onBeforeShadow(G,Ce,Ee,Re,Ie,Xe,Fe),G.renderBufferDirect(Re,null,Ie,Xe,Ce,Fe),Ce.onAfterShadow(G,Ce,Ee,Re,Ie,Xe,Fe)}}}else if(Ge.visible){const He=ye(Ce,Ge,Te,Me);Ce.onBeforeShadow(G,Ce,Ee,Re,Ie,He,null),G.renderBufferDirect(Re,null,Ie,He,Ce,null),Ce.onAfterShadow(G,Ce,Ee,Re,Ie,He,null)}}const Le=Ce.children;for(let Ie=0,Ge=Le.length;Ie<Ge;Ie++)be(Le[Ie],Ee,Re,Te,Me)}function Ae(Ce){Ce.target.removeEventListener("dispose",Ae);for(const Re in re){const Te=re[Re],Me=Ce.target.uuid;Me in Te&&(Te[Me].dispose(),delete Te[Me])}}}const reversedFuncs={[NeverDepth]:AlwaysDepth,[LessDepth]:GreaterDepth,[EqualDepth]:NotEqualDepth,[LessEqualDepth]:GreaterEqualDepth,[AlwaysDepth]:NeverDepth,[GreaterDepth]:LessDepth,[NotEqualDepth]:EqualDepth,[GreaterEqualDepth]:LessEqualDepth};function WebGLState(G,_){function J(){let rt=!1;const ti=new Vector4;let zt=null;const ii=new Vector4(0,0,0,0);return{setMask:function(Kt){zt!==Kt&&!rt&&(G.colorMask(Kt,Kt,Kt,Kt),zt=Kt)},setLocked:function(Kt){rt=Kt},setClear:function(Kt,Vt,di,pi,Di){Di===!0&&(Kt*=pi,Vt*=pi,di*=pi),ti.set(Kt,Vt,di,pi),ii.equals(ti)===!1&&(G.clearColor(Kt,Vt,di,pi),ii.copy(ti))},reset:function(){rt=!1,zt=null,ii.set(-1,0,0,0)}}}function Z(){let rt=!1,ti=!1,zt=null,ii=null,Kt=null;return{setReversed:function(Vt){if(ti!==Vt){const di=_.get("EXT_clip_control");Vt?di.clipControlEXT(di.LOWER_LEFT_EXT,di.ZERO_TO_ONE_EXT):di.clipControlEXT(di.LOWER_LEFT_EXT,di.NEGATIVE_ONE_TO_ONE_EXT),ti=Vt;const pi=Kt;Kt=null,this.setClear(pi)}},getReversed:function(){return ti},setTest:function(Vt){Vt?lt(G.DEPTH_TEST):ft(G.DEPTH_TEST)},setMask:function(Vt){zt!==Vt&&!rt&&(G.depthMask(Vt),zt=Vt)},setFunc:function(Vt){if(ti&&(Vt=reversedFuncs[Vt]),ii!==Vt){switch(Vt){case NeverDepth:G.depthFunc(G.NEVER);break;case AlwaysDepth:G.depthFunc(G.ALWAYS);break;case LessDepth:G.depthFunc(G.LESS);break;case LessEqualDepth:G.depthFunc(G.LEQUAL);break;case EqualDepth:G.depthFunc(G.EQUAL);break;case GreaterEqualDepth:G.depthFunc(G.GEQUAL);break;case GreaterDepth:G.depthFunc(G.GREATER);break;case NotEqualDepth:G.depthFunc(G.NOTEQUAL);break;default:G.depthFunc(G.LEQUAL)}ii=Vt}},setLocked:function(Vt){rt=Vt},setClear:function(Vt){Kt!==Vt&&(ti&&(Vt=1-Vt),G.clearDepth(Vt),Kt=Vt)},reset:function(){rt=!1,zt=null,ii=null,Kt=null,ti=!1}}}function Q(){let rt=!1,ti=null,zt=null,ii=null,Kt=null,Vt=null,di=null,pi=null,Di=null;return{setTest:function(Si){rt||(Si?lt(G.STENCIL_TEST):ft(G.STENCIL_TEST))},setMask:function(Si){ti!==Si&&!rt&&(G.stencilMask(Si),ti=Si)},setFunc:function(Si,Ui,vn){(zt!==Si||ii!==Ui||Kt!==vn)&&(G.stencilFunc(Si,Ui,vn),zt=Si,ii=Ui,Kt=vn)},setOp:function(Si,Ui,vn){(Vt!==Si||di!==Ui||pi!==vn)&&(G.stencilOp(Si,Ui,vn),Vt=Si,di=Ui,pi=vn)},setLocked:function(Si){rt=Si},setClear:function(Si){Di!==Si&&(G.clearStencil(Si),Di=Si)},reset:function(){rt=!1,ti=null,zt=null,ii=null,Kt=null,Vt=null,di=null,pi=null,Di=null}}}const ee=new J,te=new Z,ne=new Q,ie=new WeakMap,re=new WeakMap;let oe={},se={},ae=new WeakMap,le=[],ue=null,de=!1,pe=null,fe=null,_e=null,ye=null,be=null,Ae=null,Ce=null,Ee=new Color(0,0,0),Re=0,Te=!1,Me=null,Ne=null,Le=null,Ie=null,Ge=null;const He=G.getParameter(G.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Be=!1,ze=0;const Fe=G.getParameter(G.VERSION);Fe.indexOf("WebGL")!==-1?(ze=parseFloat(/^WebGL (\d)/.exec(Fe)[1]),Be=ze>=1):Fe.indexOf("OpenGL ES")!==-1&&(ze=parseFloat(/^OpenGL ES (\d)/.exec(Fe)[1]),Be=ze>=2);let $e=null,Xe={};const je=G.getParameter(G.SCISSOR_BOX),qe=G.getParameter(G.VIEWPORT),Ze=new Vector4().fromArray(je),st=new Vector4().fromArray(qe);function St(rt,ti,zt,ii){const Kt=new Uint8Array(4),Vt=G.createTexture();G.bindTexture(rt,Vt),G.texParameteri(rt,G.TEXTURE_MIN_FILTER,G.NEAREST),G.texParameteri(rt,G.TEXTURE_MAG_FILTER,G.NEAREST);for(let di=0;di<zt;di++)rt===G.TEXTURE_3D||rt===G.TEXTURE_2D_ARRAY?G.texImage3D(ti,0,G.RGBA,1,1,ii,0,G.RGBA,G.UNSIGNED_BYTE,Kt):G.texImage2D(ti+di,0,G.RGBA,1,1,0,G.RGBA,G.UNSIGNED_BYTE,Kt);return Vt}const it={};it[G.TEXTURE_2D]=St(G.TEXTURE_2D,G.TEXTURE_2D,1),it[G.TEXTURE_CUBE_MAP]=St(G.TEXTURE_CUBE_MAP,G.TEXTURE_CUBE_MAP_POSITIVE_X,6),it[G.TEXTURE_2D_ARRAY]=St(G.TEXTURE_2D_ARRAY,G.TEXTURE_2D_ARRAY,1,1),it[G.TEXTURE_3D]=St(G.TEXTURE_3D,G.TEXTURE_3D,1,1),ee.setClear(0,0,0,1),te.setClear(1),ne.setClear(0),lt(G.DEPTH_TEST),te.setFunc(LessEqualDepth),Mt(!1),Bt(CullFaceBack),lt(G.CULL_FACE),pt(NoBlending);function lt(rt){oe[rt]!==!0&&(G.enable(rt),oe[rt]=!0)}function ft(rt){oe[rt]!==!1&&(G.disable(rt),oe[rt]=!1)}function kt(rt,ti){return se[rt]!==ti?(G.bindFramebuffer(rt,ti),se[rt]=ti,rt===G.DRAW_FRAMEBUFFER&&(se[G.FRAMEBUFFER]=ti),rt===G.FRAMEBUFFER&&(se[G.DRAW_FRAMEBUFFER]=ti),!0):!1}function Ht(rt,ti){let zt=le,ii=!1;if(rt){zt=ae.get(ti),zt===void 0&&(zt=[],ae.set(ti,zt));const Kt=rt.textures;if(zt.length!==Kt.length||zt[0]!==G.COLOR_ATTACHMENT0){for(let Vt=0,di=Kt.length;Vt<di;Vt++)zt[Vt]=G.COLOR_ATTACHMENT0+Vt;zt.length=Kt.length,ii=!0}}else zt[0]!==G.BACK&&(zt[0]=G.BACK,ii=!0);ii&&G.drawBuffers(zt)}function Wt(rt){return ue!==rt?(G.useProgram(rt),ue=rt,!0):!1}const ni={[AddEquation]:G.FUNC_ADD,[SubtractEquation]:G.FUNC_SUBTRACT,[ReverseSubtractEquation]:G.FUNC_REVERSE_SUBTRACT};ni[MinEquation]=G.MIN,ni[MaxEquation]=G.MAX;const jt={[ZeroFactor]:G.ZERO,[OneFactor]:G.ONE,[SrcColorFactor]:G.SRC_COLOR,[SrcAlphaFactor]:G.SRC_ALPHA,[SrcAlphaSaturateFactor]:G.SRC_ALPHA_SATURATE,[DstColorFactor]:G.DST_COLOR,[DstAlphaFactor]:G.DST_ALPHA,[OneMinusSrcColorFactor]:G.ONE_MINUS_SRC_COLOR,[OneMinusSrcAlphaFactor]:G.ONE_MINUS_SRC_ALPHA,[OneMinusDstColorFactor]:G.ONE_MINUS_DST_COLOR,[OneMinusDstAlphaFactor]:G.ONE_MINUS_DST_ALPHA,[ConstantColorFactor]:G.CONSTANT_COLOR,[OneMinusConstantColorFactor]:G.ONE_MINUS_CONSTANT_COLOR,[ConstantAlphaFactor]:G.CONSTANT_ALPHA,[OneMinusConstantAlphaFactor]:G.ONE_MINUS_CONSTANT_ALPHA};function pt(rt,ti,zt,ii,Kt,Vt,di,pi,Di,Si){if(rt===NoBlending){de===!0&&(ft(G.BLEND),de=!1);return}if(de===!1&&(lt(G.BLEND),de=!0),rt!==CustomBlending){if(rt!==pe||Si!==Te){if((fe!==AddEquation||be!==AddEquation)&&(G.blendEquation(G.FUNC_ADD),fe=AddEquation,be=AddEquation),Si)switch(rt){case NormalBlending:G.blendFuncSeparate(G.ONE,G.ONE_MINUS_SRC_ALPHA,G.ONE,G.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:G.blendFunc(G.ONE,G.ONE);break;case SubtractiveBlending:G.blendFuncSeparate(G.ZERO,G.ONE_MINUS_SRC_COLOR,G.ZERO,G.ONE);break;case MultiplyBlending:G.blendFuncSeparate(G.DST_COLOR,G.ONE_MINUS_SRC_ALPHA,G.ZERO,G.ONE);break;default:error("WebGLState: Invalid blending: ",rt);break}else switch(rt){case NormalBlending:G.blendFuncSeparate(G.SRC_ALPHA,G.ONE_MINUS_SRC_ALPHA,G.ONE,G.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:G.blendFuncSeparate(G.SRC_ALPHA,G.ONE,G.ONE,G.ONE);break;case SubtractiveBlending:error("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case MultiplyBlending:error("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:error("WebGLState: Invalid blending: ",rt);break}_e=null,ye=null,Ae=null,Ce=null,Ee.set(0,0,0),Re=0,pe=rt,Te=Si}return}Kt=Kt||ti,Vt=Vt||zt,di=di||ii,(ti!==fe||Kt!==be)&&(G.blendEquationSeparate(ni[ti],ni[Kt]),fe=ti,be=Kt),(zt!==_e||ii!==ye||Vt!==Ae||di!==Ce)&&(G.blendFuncSeparate(jt[zt],jt[ii],jt[Vt],jt[di]),_e=zt,ye=ii,Ae=Vt,Ce=di),(pi.equals(Ee)===!1||Di!==Re)&&(G.blendColor(pi.r,pi.g,pi.b,Di),Ee.copy(pi),Re=Di),pe=rt,Te=!1}function Ke(rt,ti){rt.side===DoubleSide?ft(G.CULL_FACE):lt(G.CULL_FACE);let zt=rt.side===BackSide;ti&&(zt=!zt),Mt(zt),rt.blending===NormalBlending&&rt.transparent===!1?pt(NoBlending):pt(rt.blending,rt.blendEquation,rt.blendSrc,rt.blendDst,rt.blendEquationAlpha,rt.blendSrcAlpha,rt.blendDstAlpha,rt.blendColor,rt.blendAlpha,rt.premultipliedAlpha),te.setFunc(rt.depthFunc),te.setTest(rt.depthTest),te.setMask(rt.depthWrite),ee.setMask(rt.colorWrite);const ii=rt.stencilWrite;ne.setTest(ii),ii&&(ne.setMask(rt.stencilWriteMask),ne.setFunc(rt.stencilFunc,rt.stencilRef,rt.stencilFuncMask),ne.setOp(rt.stencilFail,rt.stencilZFail,rt.stencilZPass)),Ft(rt.polygonOffset,rt.polygonOffsetFactor,rt.polygonOffsetUnits),rt.alphaToCoverage===!0?lt(G.SAMPLE_ALPHA_TO_COVERAGE):ft(G.SAMPLE_ALPHA_TO_COVERAGE)}function Mt(rt){Me!==rt&&(rt?G.frontFace(G.CW):G.frontFace(G.CCW),Me=rt)}function Bt(rt){rt!==CullFaceNone?(lt(G.CULL_FACE),rt!==Ne&&(rt===CullFaceBack?G.cullFace(G.BACK):rt===CullFaceFront?G.cullFace(G.FRONT):G.cullFace(G.FRONT_AND_BACK))):ft(G.CULL_FACE),Ne=rt}function Lt(rt){rt!==Le&&(Be&&G.lineWidth(rt),Le=rt)}function Ft(rt,ti,zt){rt?(lt(G.POLYGON_OFFSET_FILL),(Ie!==ti||Ge!==zt)&&(G.polygonOffset(ti,zt),Ie=ti,Ge=zt)):ft(G.POLYGON_OFFSET_FILL)}function ai(rt){rt?lt(G.SCISSOR_TEST):ft(G.SCISSOR_TEST)}function Qt(rt){rt===void 0&&(rt=G.TEXTURE0+He-1),$e!==rt&&(G.activeTexture(rt),$e=rt)}function hi(rt,ti,zt){zt===void 0&&($e===null?zt=G.TEXTURE0+He-1:zt=$e);let ii=Xe[zt];ii===void 0&&(ii={type:void 0,texture:void 0},Xe[zt]=ii),(ii.type!==rt||ii.texture!==ti)&&($e!==zt&&(G.activeTexture(zt),$e=zt),G.bindTexture(rt,ti||it[rt]),ii.type=rt,ii.texture=ti)}function Qe(){const rt=Xe[$e];rt!==void 0&&rt.type!==void 0&&(G.bindTexture(rt.type,null),rt.type=void 0,rt.texture=void 0)}function Ye(){try{G.compressedTexImage2D(...arguments)}catch(rt){rt("WebGLState:",rt)}}function _t(){try{G.compressedTexImage3D(...arguments)}catch(rt){rt("WebGLState:",rt)}}function dt(){try{G.texSubImage2D(...arguments)}catch(rt){rt("WebGLState:",rt)}}function yt(){try{G.texSubImage3D(...arguments)}catch(rt){rt("WebGLState:",rt)}}function Nt(){try{G.compressedTexSubImage2D(...arguments)}catch(rt){rt("WebGLState:",rt)}}function fi(){try{G.compressedTexSubImage3D(...arguments)}catch(rt){rt("WebGLState:",rt)}}function Zt(){try{G.texStorage2D(...arguments)}catch(rt){rt("WebGLState:",rt)}}function Ut(){try{G.texStorage3D(...arguments)}catch(rt){rt("WebGLState:",rt)}}function qt(){try{G.texImage2D(...arguments)}catch(rt){rt("WebGLState:",rt)}}function Rt(){try{G.texImage3D(...arguments)}catch(rt){rt("WebGLState:",rt)}}function Pt(rt){Ze.equals(rt)===!1&&(G.scissor(rt.x,rt.y,rt.z,rt.w),Ze.copy(rt))}function vt(rt){st.equals(rt)===!1&&(G.viewport(rt.x,rt.y,rt.z,rt.w),st.copy(rt))}function tt(rt,ti){let zt=re.get(ti);zt===void 0&&(zt=new WeakMap,re.set(ti,zt));let ii=zt.get(rt);ii===void 0&&(ii=G.getUniformBlockIndex(ti,rt.name),zt.set(rt,ii))}function et(rt,ti){const ii=re.get(ti).get(rt);ie.get(ti)!==ii&&(G.uniformBlockBinding(ti,ii,rt.__bindingPointIndex),ie.set(ti,ii))}function ei(){G.disable(G.BLEND),G.disable(G.CULL_FACE),G.disable(G.DEPTH_TEST),G.disable(G.POLYGON_OFFSET_FILL),G.disable(G.SCISSOR_TEST),G.disable(G.STENCIL_TEST),G.disable(G.SAMPLE_ALPHA_TO_COVERAGE),G.blendEquation(G.FUNC_ADD),G.blendFunc(G.ONE,G.ZERO),G.blendFuncSeparate(G.ONE,G.ZERO,G.ONE,G.ZERO),G.blendColor(0,0,0,0),G.colorMask(!0,!0,!0,!0),G.clearColor(0,0,0,0),G.depthMask(!0),G.depthFunc(G.LESS),te.setReversed(!1),G.clearDepth(1),G.stencilMask(4294967295),G.stencilFunc(G.ALWAYS,0,4294967295),G.stencilOp(G.KEEP,G.KEEP,G.KEEP),G.clearStencil(0),G.cullFace(G.BACK),G.frontFace(G.CCW),G.polygonOffset(0,0),G.activeTexture(G.TEXTURE0),G.bindFramebuffer(G.FRAMEBUFFER,null),G.bindFramebuffer(G.DRAW_FRAMEBUFFER,null),G.bindFramebuffer(G.READ_FRAMEBUFFER,null),G.useProgram(null),G.lineWidth(1),G.scissor(0,0,G.canvas.width,G.canvas.height),G.viewport(0,0,G.canvas.width,G.canvas.height),oe={},$e=null,Xe={},se={},ae=new WeakMap,le=[],ue=null,de=!1,pe=null,fe=null,_e=null,ye=null,be=null,Ae=null,Ce=null,Ee=new Color(0,0,0),Re=0,Te=!1,Me=null,Ne=null,Le=null,Ie=null,Ge=null,Ze.set(0,0,G.canvas.width,G.canvas.height),st.set(0,0,G.canvas.width,G.canvas.height),ee.reset(),te.reset(),ne.reset()}return{buffers:{color:ee,depth:te,stencil:ne},enable:lt,disable:ft,bindFramebuffer:kt,drawBuffers:Ht,useProgram:Wt,setBlending:pt,setMaterial:Ke,setFlipSided:Mt,setCullFace:Bt,setLineWidth:Lt,setPolygonOffset:Ft,setScissorTest:ai,activeTexture:Qt,bindTexture:hi,unbindTexture:Qe,compressedTexImage2D:Ye,compressedTexImage3D:_t,texImage2D:qt,texImage3D:Rt,updateUBOMapping:tt,uniformBlockBinding:et,texStorage2D:Zt,texStorage3D:Ut,texSubImage2D:dt,texSubImage3D:yt,compressedTexSubImage2D:Nt,compressedTexSubImage3D:fi,scissor:Pt,viewport:vt,reset:ei}}function WebGLTextures(G,_,J,Z,Q,ee,te){const ne=_.has("WEBGL_multisampled_render_to_texture")?_.get("WEBGL_multisampled_render_to_texture"):null,ie=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),re=new Vector2,oe=new WeakMap;let se;const ae=new WeakMap;let le=!1;try{le=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function ue(Qe,Ye){return le?new OffscreenCanvas(Qe,Ye):createElementNS("canvas")}function de(Qe,Ye,_t){let dt=1;const yt=hi(Qe);if((yt.width>_t||yt.height>_t)&&(dt=_t/Math.max(yt.width,yt.height)),dt<1)if(typeof HTMLImageElement<"u"&&Qe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Qe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Qe instanceof ImageBitmap||typeof VideoFrame<"u"&&Qe instanceof VideoFrame){const Nt=Math.floor(dt*yt.width),fi=Math.floor(dt*yt.height);se===void 0&&(se=ue(Nt,fi));const Zt=Ye?ue(Nt,fi):se;return Zt.width=Nt,Zt.height=fi,Zt.getContext("2d").drawImage(Qe,0,0,Nt,fi),warn("WebGLRenderer: Texture has been resized from ("+yt.width+"x"+yt.height+") to ("+Nt+"x"+fi+")."),Zt}else return"data"in Qe&&warn("WebGLRenderer: Image in DataTexture is too big ("+yt.width+"x"+yt.height+")."),Qe;return Qe}function pe(Qe){return Qe.generateMipmaps}function fe(Qe){G.generateMipmap(Qe)}function _e(Qe){return Qe.isWebGLCubeRenderTarget?G.TEXTURE_CUBE_MAP:Qe.isWebGL3DRenderTarget?G.TEXTURE_3D:Qe.isWebGLArrayRenderTarget||Qe.isCompressedArrayTexture?G.TEXTURE_2D_ARRAY:G.TEXTURE_2D}function ye(Qe,Ye,_t,dt,yt=!1){if(Qe!==null){if(G[Qe]!==void 0)return G[Qe];warn("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Qe+"'")}let Nt=Ye;if(Ye===G.RED&&(_t===G.FLOAT&&(Nt=G.R32F),_t===G.HALF_FLOAT&&(Nt=G.R16F),_t===G.UNSIGNED_BYTE&&(Nt=G.R8)),Ye===G.RED_INTEGER&&(_t===G.UNSIGNED_BYTE&&(Nt=G.R8UI),_t===G.UNSIGNED_SHORT&&(Nt=G.R16UI),_t===G.UNSIGNED_INT&&(Nt=G.R32UI),_t===G.BYTE&&(Nt=G.R8I),_t===G.SHORT&&(Nt=G.R16I),_t===G.INT&&(Nt=G.R32I)),Ye===G.RG&&(_t===G.FLOAT&&(Nt=G.RG32F),_t===G.HALF_FLOAT&&(Nt=G.RG16F),_t===G.UNSIGNED_BYTE&&(Nt=G.RG8)),Ye===G.RG_INTEGER&&(_t===G.UNSIGNED_BYTE&&(Nt=G.RG8UI),_t===G.UNSIGNED_SHORT&&(Nt=G.RG16UI),_t===G.UNSIGNED_INT&&(Nt=G.RG32UI),_t===G.BYTE&&(Nt=G.RG8I),_t===G.SHORT&&(Nt=G.RG16I),_t===G.INT&&(Nt=G.RG32I)),Ye===G.RGB_INTEGER&&(_t===G.UNSIGNED_BYTE&&(Nt=G.RGB8UI),_t===G.UNSIGNED_SHORT&&(Nt=G.RGB16UI),_t===G.UNSIGNED_INT&&(Nt=G.RGB32UI),_t===G.BYTE&&(Nt=G.RGB8I),_t===G.SHORT&&(Nt=G.RGB16I),_t===G.INT&&(Nt=G.RGB32I)),Ye===G.RGBA_INTEGER&&(_t===G.UNSIGNED_BYTE&&(Nt=G.RGBA8UI),_t===G.UNSIGNED_SHORT&&(Nt=G.RGBA16UI),_t===G.UNSIGNED_INT&&(Nt=G.RGBA32UI),_t===G.BYTE&&(Nt=G.RGBA8I),_t===G.SHORT&&(Nt=G.RGBA16I),_t===G.INT&&(Nt=G.RGBA32I)),Ye===G.RGB&&(_t===G.UNSIGNED_INT_5_9_9_9_REV&&(Nt=G.RGB9_E5),_t===G.UNSIGNED_INT_10F_11F_11F_REV&&(Nt=G.R11F_G11F_B10F)),Ye===G.RGBA){const fi=yt?LinearTransfer:ColorManagement.getTransfer(dt);_t===G.FLOAT&&(Nt=G.RGBA32F),_t===G.HALF_FLOAT&&(Nt=G.RGBA16F),_t===G.UNSIGNED_BYTE&&(Nt=fi===SRGBTransfer?G.SRGB8_ALPHA8:G.RGBA8),_t===G.UNSIGNED_SHORT_4_4_4_4&&(Nt=G.RGBA4),_t===G.UNSIGNED_SHORT_5_5_5_1&&(Nt=G.RGB5_A1)}return(Nt===G.R16F||Nt===G.R32F||Nt===G.RG16F||Nt===G.RG32F||Nt===G.RGBA16F||Nt===G.RGBA32F)&&_.get("EXT_color_buffer_float"),Nt}function be(Qe,Ye){let _t;return Qe?Ye===null||Ye===UnsignedIntType||Ye===UnsignedInt248Type?_t=G.DEPTH24_STENCIL8:Ye===FloatType?_t=G.DEPTH32F_STENCIL8:Ye===UnsignedShortType&&(_t=G.DEPTH24_STENCIL8,warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Ye===null||Ye===UnsignedIntType||Ye===UnsignedInt248Type?_t=G.DEPTH_COMPONENT24:Ye===FloatType?_t=G.DEPTH_COMPONENT32F:Ye===UnsignedShortType&&(_t=G.DEPTH_COMPONENT16),_t}function Ae(Qe,Ye){return pe(Qe)===!0||Qe.isFramebufferTexture&&Qe.minFilter!==NearestFilter&&Qe.minFilter!==LinearFilter?Math.log2(Math.max(Ye.width,Ye.height))+1:Qe.mipmaps!==void 0&&Qe.mipmaps.length>0?Qe.mipmaps.length:Qe.isCompressedTexture&&Array.isArray(Qe.image)?Ye.mipmaps.length:1}function Ce(Qe){const Ye=Qe.target;Ye.removeEventListener("dispose",Ce),Re(Ye),Ye.isVideoTexture&&oe.delete(Ye)}function Ee(Qe){const Ye=Qe.target;Ye.removeEventListener("dispose",Ee),Me(Ye)}function Re(Qe){const Ye=Z.get(Qe);if(Ye.__webglInit===void 0)return;const _t=Qe.source,dt=ae.get(_t);if(dt){const yt=dt[Ye.__cacheKey];yt.usedTimes--,yt.usedTimes===0&&Te(Qe),Object.keys(dt).length===0&&ae.delete(_t)}Z.remove(Qe)}function Te(Qe){const Ye=Z.get(Qe);G.deleteTexture(Ye.__webglTexture);const _t=Qe.source,dt=ae.get(_t);delete dt[Ye.__cacheKey],te.memory.textures--}function Me(Qe){const Ye=Z.get(Qe);if(Qe.depthTexture&&(Qe.depthTexture.dispose(),Z.remove(Qe.depthTexture)),Qe.isWebGLCubeRenderTarget)for(let dt=0;dt<6;dt++){if(Array.isArray(Ye.__webglFramebuffer[dt]))for(let yt=0;yt<Ye.__webglFramebuffer[dt].length;yt++)G.deleteFramebuffer(Ye.__webglFramebuffer[dt][yt]);else G.deleteFramebuffer(Ye.__webglFramebuffer[dt]);Ye.__webglDepthbuffer&&G.deleteRenderbuffer(Ye.__webglDepthbuffer[dt])}else{if(Array.isArray(Ye.__webglFramebuffer))for(let dt=0;dt<Ye.__webglFramebuffer.length;dt++)G.deleteFramebuffer(Ye.__webglFramebuffer[dt]);else G.deleteFramebuffer(Ye.__webglFramebuffer);if(Ye.__webglDepthbuffer&&G.deleteRenderbuffer(Ye.__webglDepthbuffer),Ye.__webglMultisampledFramebuffer&&G.deleteFramebuffer(Ye.__webglMultisampledFramebuffer),Ye.__webglColorRenderbuffer)for(let dt=0;dt<Ye.__webglColorRenderbuffer.length;dt++)Ye.__webglColorRenderbuffer[dt]&&G.deleteRenderbuffer(Ye.__webglColorRenderbuffer[dt]);Ye.__webglDepthRenderbuffer&&G.deleteRenderbuffer(Ye.__webglDepthRenderbuffer)}const _t=Qe.textures;for(let dt=0,yt=_t.length;dt<yt;dt++){const Nt=Z.get(_t[dt]);Nt.__webglTexture&&(G.deleteTexture(Nt.__webglTexture),te.memory.textures--),Z.remove(_t[dt])}Z.remove(Qe)}let Ne=0;function Le(){Ne=0}function Ie(){const Qe=Ne;return Qe>=Q.maxTextures&&warn("WebGLTextures: Trying to use "+Qe+" texture units while this GPU supports only "+Q.maxTextures),Ne+=1,Qe}function Ge(Qe){const Ye=[];return Ye.push(Qe.wrapS),Ye.push(Qe.wrapT),Ye.push(Qe.wrapR||0),Ye.push(Qe.magFilter),Ye.push(Qe.minFilter),Ye.push(Qe.anisotropy),Ye.push(Qe.internalFormat),Ye.push(Qe.format),Ye.push(Qe.type),Ye.push(Qe.generateMipmaps),Ye.push(Qe.premultiplyAlpha),Ye.push(Qe.flipY),Ye.push(Qe.unpackAlignment),Ye.push(Qe.colorSpace),Ye.join()}function He(Qe,Ye){const _t=Z.get(Qe);if(Qe.isVideoTexture&&ai(Qe),Qe.isRenderTargetTexture===!1&&Qe.isExternalTexture!==!0&&Qe.version>0&&_t.__version!==Qe.version){const dt=Qe.image;if(dt===null)warn("WebGLRenderer: Texture marked for update but no image data found.");else if(dt.complete===!1)warn("WebGLRenderer: Texture marked for update but image is incomplete");else{it(_t,Qe,Ye);return}}else Qe.isExternalTexture&&(_t.__webglTexture=Qe.sourceTexture?Qe.sourceTexture:null);J.bindTexture(G.TEXTURE_2D,_t.__webglTexture,G.TEXTURE0+Ye)}function Be(Qe,Ye){const _t=Z.get(Qe);if(Qe.isRenderTargetTexture===!1&&Qe.version>0&&_t.__version!==Qe.version){it(_t,Qe,Ye);return}else Qe.isExternalTexture&&(_t.__webglTexture=Qe.sourceTexture?Qe.sourceTexture:null);J.bindTexture(G.TEXTURE_2D_ARRAY,_t.__webglTexture,G.TEXTURE0+Ye)}function ze(Qe,Ye){const _t=Z.get(Qe);if(Qe.isRenderTargetTexture===!1&&Qe.version>0&&_t.__version!==Qe.version){it(_t,Qe,Ye);return}J.bindTexture(G.TEXTURE_3D,_t.__webglTexture,G.TEXTURE0+Ye)}function Fe(Qe,Ye){const _t=Z.get(Qe);if(Qe.version>0&&_t.__version!==Qe.version){lt(_t,Qe,Ye);return}J.bindTexture(G.TEXTURE_CUBE_MAP,_t.__webglTexture,G.TEXTURE0+Ye)}const $e={[RepeatWrapping]:G.REPEAT,[ClampToEdgeWrapping]:G.CLAMP_TO_EDGE,[MirroredRepeatWrapping]:G.MIRRORED_REPEAT},Xe={[NearestFilter]:G.NEAREST,[NearestMipmapNearestFilter]:G.NEAREST_MIPMAP_NEAREST,[NearestMipmapLinearFilter]:G.NEAREST_MIPMAP_LINEAR,[LinearFilter]:G.LINEAR,[LinearMipmapNearestFilter]:G.LINEAR_MIPMAP_NEAREST,[LinearMipmapLinearFilter]:G.LINEAR_MIPMAP_LINEAR},je={[NeverCompare]:G.NEVER,[AlwaysCompare]:G.ALWAYS,[LessCompare]:G.LESS,[LessEqualCompare]:G.LEQUAL,[EqualCompare]:G.EQUAL,[GreaterEqualCompare]:G.GEQUAL,[GreaterCompare]:G.GREATER,[NotEqualCompare]:G.NOTEQUAL};function qe(Qe,Ye){if(Ye.type===FloatType&&_.has("OES_texture_float_linear")===!1&&(Ye.magFilter===LinearFilter||Ye.magFilter===LinearMipmapNearestFilter||Ye.magFilter===NearestMipmapLinearFilter||Ye.magFilter===LinearMipmapLinearFilter||Ye.minFilter===LinearFilter||Ye.minFilter===LinearMipmapNearestFilter||Ye.minFilter===NearestMipmapLinearFilter||Ye.minFilter===LinearMipmapLinearFilter)&&warn("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),G.texParameteri(Qe,G.TEXTURE_WRAP_S,$e[Ye.wrapS]),G.texParameteri(Qe,G.TEXTURE_WRAP_T,$e[Ye.wrapT]),(Qe===G.TEXTURE_3D||Qe===G.TEXTURE_2D_ARRAY)&&G.texParameteri(Qe,G.TEXTURE_WRAP_R,$e[Ye.wrapR]),G.texParameteri(Qe,G.TEXTURE_MAG_FILTER,Xe[Ye.magFilter]),G.texParameteri(Qe,G.TEXTURE_MIN_FILTER,Xe[Ye.minFilter]),Ye.compareFunction&&(G.texParameteri(Qe,G.TEXTURE_COMPARE_MODE,G.COMPARE_REF_TO_TEXTURE),G.texParameteri(Qe,G.TEXTURE_COMPARE_FUNC,je[Ye.compareFunction])),_.has("EXT_texture_filter_anisotropic")===!0){if(Ye.magFilter===NearestFilter||Ye.minFilter!==NearestMipmapLinearFilter&&Ye.minFilter!==LinearMipmapLinearFilter||Ye.type===FloatType&&_.has("OES_texture_float_linear")===!1)return;if(Ye.anisotropy>1||Z.get(Ye).__currentAnisotropy){const _t=_.get("EXT_texture_filter_anisotropic");G.texParameterf(Qe,_t.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Ye.anisotropy,Q.getMaxAnisotropy())),Z.get(Ye).__currentAnisotropy=Ye.anisotropy}}}function Ze(Qe,Ye){let _t=!1;Qe.__webglInit===void 0&&(Qe.__webglInit=!0,Ye.addEventListener("dispose",Ce));const dt=Ye.source;let yt=ae.get(dt);yt===void 0&&(yt={},ae.set(dt,yt));const Nt=Ge(Ye);if(Nt!==Qe.__cacheKey){yt[Nt]===void 0&&(yt[Nt]={texture:G.createTexture(),usedTimes:0},te.memory.textures++,_t=!0),yt[Nt].usedTimes++;const fi=yt[Qe.__cacheKey];fi!==void 0&&(yt[Qe.__cacheKey].usedTimes--,fi.usedTimes===0&&Te(Ye)),Qe.__cacheKey=Nt,Qe.__webglTexture=yt[Nt].texture}return _t}function st(Qe,Ye,_t){return Math.floor(Math.floor(Qe/_t)/Ye)}function St(Qe,Ye,_t,dt){const Nt=Qe.updateRanges;if(Nt.length===0)J.texSubImage2D(G.TEXTURE_2D,0,0,0,Ye.width,Ye.height,_t,dt,Ye.data);else{Nt.sort((Rt,Pt)=>Rt.start-Pt.start);let fi=0;for(let Rt=1;Rt<Nt.length;Rt++){const Pt=Nt[fi],vt=Nt[Rt],tt=Pt.start+Pt.count,et=st(vt.start,Ye.width,4),ei=st(Pt.start,Ye.width,4);vt.start<=tt+1&&et===ei&&st(vt.start+vt.count-1,Ye.width,4)===et?Pt.count=Math.max(Pt.count,vt.start+vt.count-Pt.start):(++fi,Nt[fi]=vt)}Nt.length=fi+1;const Zt=G.getParameter(G.UNPACK_ROW_LENGTH),Ut=G.getParameter(G.UNPACK_SKIP_PIXELS),qt=G.getParameter(G.UNPACK_SKIP_ROWS);G.pixelStorei(G.UNPACK_ROW_LENGTH,Ye.width);for(let Rt=0,Pt=Nt.length;Rt<Pt;Rt++){const vt=Nt[Rt],tt=Math.floor(vt.start/4),et=Math.ceil(vt.count/4),ei=tt%Ye.width,rt=Math.floor(tt/Ye.width),ti=et,zt=1;G.pixelStorei(G.UNPACK_SKIP_PIXELS,ei),G.pixelStorei(G.UNPACK_SKIP_ROWS,rt),J.texSubImage2D(G.TEXTURE_2D,0,ei,rt,ti,zt,_t,dt,Ye.data)}Qe.clearUpdateRanges(),G.pixelStorei(G.UNPACK_ROW_LENGTH,Zt),G.pixelStorei(G.UNPACK_SKIP_PIXELS,Ut),G.pixelStorei(G.UNPACK_SKIP_ROWS,qt)}}function it(Qe,Ye,_t){let dt=G.TEXTURE_2D;(Ye.isDataArrayTexture||Ye.isCompressedArrayTexture)&&(dt=G.TEXTURE_2D_ARRAY),Ye.isData3DTexture&&(dt=G.TEXTURE_3D);const yt=Ze(Qe,Ye),Nt=Ye.source;J.bindTexture(dt,Qe.__webglTexture,G.TEXTURE0+_t);const fi=Z.get(Nt);if(Nt.version!==fi.__version||yt===!0){J.activeTexture(G.TEXTURE0+_t);const Zt=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),Ut=Ye.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(Ye.colorSpace),qt=Ye.colorSpace===NoColorSpace||Zt===Ut?G.NONE:G.BROWSER_DEFAULT_WEBGL;G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,Ye.flipY),G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ye.premultiplyAlpha),G.pixelStorei(G.UNPACK_ALIGNMENT,Ye.unpackAlignment),G.pixelStorei(G.UNPACK_COLORSPACE_CONVERSION_WEBGL,qt);let Rt=de(Ye.image,!1,Q.maxTextureSize);Rt=Qt(Ye,Rt);const Pt=ee.convert(Ye.format,Ye.colorSpace),vt=ee.convert(Ye.type);let tt=ye(Ye.internalFormat,Pt,vt,Ye.colorSpace,Ye.isVideoTexture);qe(dt,Ye);let et;const ei=Ye.mipmaps,rt=Ye.isVideoTexture!==!0,ti=fi.__version===void 0||yt===!0,zt=Nt.dataReady,ii=Ae(Ye,Rt);if(Ye.isDepthTexture)tt=be(Ye.format===DepthStencilFormat,Ye.type),ti&&(rt?J.texStorage2D(G.TEXTURE_2D,1,tt,Rt.width,Rt.height):J.texImage2D(G.TEXTURE_2D,0,tt,Rt.width,Rt.height,0,Pt,vt,null));else if(Ye.isDataTexture)if(ei.length>0){rt&&ti&&J.texStorage2D(G.TEXTURE_2D,ii,tt,ei[0].width,ei[0].height);for(let Kt=0,Vt=ei.length;Kt<Vt;Kt++)et=ei[Kt],rt?zt&&J.texSubImage2D(G.TEXTURE_2D,Kt,0,0,et.width,et.height,Pt,vt,et.data):J.texImage2D(G.TEXTURE_2D,Kt,tt,et.width,et.height,0,Pt,vt,et.data);Ye.generateMipmaps=!1}else rt?(ti&&J.texStorage2D(G.TEXTURE_2D,ii,tt,Rt.width,Rt.height),zt&&St(Ye,Rt,Pt,vt)):J.texImage2D(G.TEXTURE_2D,0,tt,Rt.width,Rt.height,0,Pt,vt,Rt.data);else if(Ye.isCompressedTexture)if(Ye.isCompressedArrayTexture){rt&&ti&&J.texStorage3D(G.TEXTURE_2D_ARRAY,ii,tt,ei[0].width,ei[0].height,Rt.depth);for(let Kt=0,Vt=ei.length;Kt<Vt;Kt++)if(et=ei[Kt],Ye.format!==RGBAFormat)if(Pt!==null)if(rt){if(zt)if(Ye.layerUpdates.size>0){const di=getByteLength(et.width,et.height,Ye.format,Ye.type);for(const pi of Ye.layerUpdates){const Di=et.data.subarray(pi*di/et.data.BYTES_PER_ELEMENT,(pi+1)*di/et.data.BYTES_PER_ELEMENT);J.compressedTexSubImage3D(G.TEXTURE_2D_ARRAY,Kt,0,0,pi,et.width,et.height,1,Pt,Di)}Ye.clearLayerUpdates()}else J.compressedTexSubImage3D(G.TEXTURE_2D_ARRAY,Kt,0,0,0,et.width,et.height,Rt.depth,Pt,et.data)}else J.compressedTexImage3D(G.TEXTURE_2D_ARRAY,Kt,tt,et.width,et.height,Rt.depth,0,et.data,0,0);else warn("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else rt?zt&&J.texSubImage3D(G.TEXTURE_2D_ARRAY,Kt,0,0,0,et.width,et.height,Rt.depth,Pt,vt,et.data):J.texImage3D(G.TEXTURE_2D_ARRAY,Kt,tt,et.width,et.height,Rt.depth,0,Pt,vt,et.data)}else{rt&&ti&&J.texStorage2D(G.TEXTURE_2D,ii,tt,ei[0].width,ei[0].height);for(let Kt=0,Vt=ei.length;Kt<Vt;Kt++)et=ei[Kt],Ye.format!==RGBAFormat?Pt!==null?rt?zt&&J.compressedTexSubImage2D(G.TEXTURE_2D,Kt,0,0,et.width,et.height,Pt,et.data):J.compressedTexImage2D(G.TEXTURE_2D,Kt,tt,et.width,et.height,0,et.data):warn("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):rt?zt&&J.texSubImage2D(G.TEXTURE_2D,Kt,0,0,et.width,et.height,Pt,vt,et.data):J.texImage2D(G.TEXTURE_2D,Kt,tt,et.width,et.height,0,Pt,vt,et.data)}else if(Ye.isDataArrayTexture)if(rt){if(ti&&J.texStorage3D(G.TEXTURE_2D_ARRAY,ii,tt,Rt.width,Rt.height,Rt.depth),zt)if(Ye.layerUpdates.size>0){const Kt=getByteLength(Rt.width,Rt.height,Ye.format,Ye.type);for(const Vt of Ye.layerUpdates){const di=Rt.data.subarray(Vt*Kt/Rt.data.BYTES_PER_ELEMENT,(Vt+1)*Kt/Rt.data.BYTES_PER_ELEMENT);J.texSubImage3D(G.TEXTURE_2D_ARRAY,0,0,0,Vt,Rt.width,Rt.height,1,Pt,vt,di)}Ye.clearLayerUpdates()}else J.texSubImage3D(G.TEXTURE_2D_ARRAY,0,0,0,0,Rt.width,Rt.height,Rt.depth,Pt,vt,Rt.data)}else J.texImage3D(G.TEXTURE_2D_ARRAY,0,tt,Rt.width,Rt.height,Rt.depth,0,Pt,vt,Rt.data);else if(Ye.isData3DTexture)rt?(ti&&J.texStorage3D(G.TEXTURE_3D,ii,tt,Rt.width,Rt.height,Rt.depth),zt&&J.texSubImage3D(G.TEXTURE_3D,0,0,0,0,Rt.width,Rt.height,Rt.depth,Pt,vt,Rt.data)):J.texImage3D(G.TEXTURE_3D,0,tt,Rt.width,Rt.height,Rt.depth,0,Pt,vt,Rt.data);else if(Ye.isFramebufferTexture){if(ti)if(rt)J.texStorage2D(G.TEXTURE_2D,ii,tt,Rt.width,Rt.height);else{let Kt=Rt.width,Vt=Rt.height;for(let di=0;di<ii;di++)J.texImage2D(G.TEXTURE_2D,di,tt,Kt,Vt,0,Pt,vt,null),Kt>>=1,Vt>>=1}}else if(ei.length>0){if(rt&&ti){const Kt=hi(ei[0]);J.texStorage2D(G.TEXTURE_2D,ii,tt,Kt.width,Kt.height)}for(let Kt=0,Vt=ei.length;Kt<Vt;Kt++)et=ei[Kt],rt?zt&&J.texSubImage2D(G.TEXTURE_2D,Kt,0,0,Pt,vt,et):J.texImage2D(G.TEXTURE_2D,Kt,tt,Pt,vt,et);Ye.generateMipmaps=!1}else if(rt){if(ti){const Kt=hi(Rt);J.texStorage2D(G.TEXTURE_2D,ii,tt,Kt.width,Kt.height)}zt&&J.texSubImage2D(G.TEXTURE_2D,0,0,0,Pt,vt,Rt)}else J.texImage2D(G.TEXTURE_2D,0,tt,Pt,vt,Rt);pe(Ye)&&fe(dt),fi.__version=Nt.version,Ye.onUpdate&&Ye.onUpdate(Ye)}Qe.__version=Ye.version}function lt(Qe,Ye,_t){if(Ye.image.length!==6)return;const dt=Ze(Qe,Ye),yt=Ye.source;J.bindTexture(G.TEXTURE_CUBE_MAP,Qe.__webglTexture,G.TEXTURE0+_t);const Nt=Z.get(yt);if(yt.version!==Nt.__version||dt===!0){J.activeTexture(G.TEXTURE0+_t);const fi=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),Zt=Ye.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(Ye.colorSpace),Ut=Ye.colorSpace===NoColorSpace||fi===Zt?G.NONE:G.BROWSER_DEFAULT_WEBGL;G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,Ye.flipY),G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ye.premultiplyAlpha),G.pixelStorei(G.UNPACK_ALIGNMENT,Ye.unpackAlignment),G.pixelStorei(G.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ut);const qt=Ye.isCompressedTexture||Ye.image[0].isCompressedTexture,Rt=Ye.image[0]&&Ye.image[0].isDataTexture,Pt=[];for(let Vt=0;Vt<6;Vt++)!qt&&!Rt?Pt[Vt]=de(Ye.image[Vt],!0,Q.maxCubemapSize):Pt[Vt]=Rt?Ye.image[Vt].image:Ye.image[Vt],Pt[Vt]=Qt(Ye,Pt[Vt]);const vt=Pt[0],tt=ee.convert(Ye.format,Ye.colorSpace),et=ee.convert(Ye.type),ei=ye(Ye.internalFormat,tt,et,Ye.colorSpace),rt=Ye.isVideoTexture!==!0,ti=Nt.__version===void 0||dt===!0,zt=yt.dataReady;let ii=Ae(Ye,vt);qe(G.TEXTURE_CUBE_MAP,Ye);let Kt;if(qt){rt&&ti&&J.texStorage2D(G.TEXTURE_CUBE_MAP,ii,ei,vt.width,vt.height);for(let Vt=0;Vt<6;Vt++){Kt=Pt[Vt].mipmaps;for(let di=0;di<Kt.length;di++){const pi=Kt[di];Ye.format!==RGBAFormat?tt!==null?rt?zt&&J.compressedTexSubImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,di,0,0,pi.width,pi.height,tt,pi.data):J.compressedTexImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,di,ei,pi.width,pi.height,0,pi.data):warn("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):rt?zt&&J.texSubImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,di,0,0,pi.width,pi.height,tt,et,pi.data):J.texImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,di,ei,pi.width,pi.height,0,tt,et,pi.data)}}}else{if(Kt=Ye.mipmaps,rt&&ti){Kt.length>0&&ii++;const Vt=hi(Pt[0]);J.texStorage2D(G.TEXTURE_CUBE_MAP,ii,ei,Vt.width,Vt.height)}for(let Vt=0;Vt<6;Vt++)if(Rt){rt?zt&&J.texSubImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,0,0,0,Pt[Vt].width,Pt[Vt].height,tt,et,Pt[Vt].data):J.texImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,0,ei,Pt[Vt].width,Pt[Vt].height,0,tt,et,Pt[Vt].data);for(let di=0;di<Kt.length;di++){const Di=Kt[di].image[Vt].image;rt?zt&&J.texSubImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,di+1,0,0,Di.width,Di.height,tt,et,Di.data):J.texImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,di+1,ei,Di.width,Di.height,0,tt,et,Di.data)}}else{rt?zt&&J.texSubImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,0,0,0,tt,et,Pt[Vt]):J.texImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,0,ei,tt,et,Pt[Vt]);for(let di=0;di<Kt.length;di++){const pi=Kt[di];rt?zt&&J.texSubImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,di+1,0,0,tt,et,pi.image[Vt]):J.texImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,di+1,ei,tt,et,pi.image[Vt])}}}pe(Ye)&&fe(G.TEXTURE_CUBE_MAP),Nt.__version=yt.version,Ye.onUpdate&&Ye.onUpdate(Ye)}Qe.__version=Ye.version}function ft(Qe,Ye,_t,dt,yt,Nt){const fi=ee.convert(_t.format,_t.colorSpace),Zt=ee.convert(_t.type),Ut=ye(_t.internalFormat,fi,Zt,_t.colorSpace),qt=Z.get(Ye),Rt=Z.get(_t);if(Rt.__renderTarget=Ye,!qt.__hasExternalTextures){const Pt=Math.max(1,Ye.width>>Nt),vt=Math.max(1,Ye.height>>Nt);yt===G.TEXTURE_3D||yt===G.TEXTURE_2D_ARRAY?J.texImage3D(yt,Nt,Ut,Pt,vt,Ye.depth,0,fi,Zt,null):J.texImage2D(yt,Nt,Ut,Pt,vt,0,fi,Zt,null)}J.bindFramebuffer(G.FRAMEBUFFER,Qe),Ft(Ye)?ne.framebufferTexture2DMultisampleEXT(G.FRAMEBUFFER,dt,yt,Rt.__webglTexture,0,Lt(Ye)):(yt===G.TEXTURE_2D||yt>=G.TEXTURE_CUBE_MAP_POSITIVE_X&&yt<=G.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&G.framebufferTexture2D(G.FRAMEBUFFER,dt,yt,Rt.__webglTexture,Nt),J.bindFramebuffer(G.FRAMEBUFFER,null)}function kt(Qe,Ye,_t){if(G.bindRenderbuffer(G.RENDERBUFFER,Qe),Ye.depthBuffer){const dt=Ye.depthTexture,yt=dt&&dt.isDepthTexture?dt.type:null,Nt=be(Ye.stencilBuffer,yt),fi=Ye.stencilBuffer?G.DEPTH_STENCIL_ATTACHMENT:G.DEPTH_ATTACHMENT,Zt=Lt(Ye);Ft(Ye)?ne.renderbufferStorageMultisampleEXT(G.RENDERBUFFER,Zt,Nt,Ye.width,Ye.height):_t?G.renderbufferStorageMultisample(G.RENDERBUFFER,Zt,Nt,Ye.width,Ye.height):G.renderbufferStorage(G.RENDERBUFFER,Nt,Ye.width,Ye.height),G.framebufferRenderbuffer(G.FRAMEBUFFER,fi,G.RENDERBUFFER,Qe)}else{const dt=Ye.textures;for(let yt=0;yt<dt.length;yt++){const Nt=dt[yt],fi=ee.convert(Nt.format,Nt.colorSpace),Zt=ee.convert(Nt.type),Ut=ye(Nt.internalFormat,fi,Zt,Nt.colorSpace),qt=Lt(Ye);_t&&Ft(Ye)===!1?G.renderbufferStorageMultisample(G.RENDERBUFFER,qt,Ut,Ye.width,Ye.height):Ft(Ye)?ne.renderbufferStorageMultisampleEXT(G.RENDERBUFFER,qt,Ut,Ye.width,Ye.height):G.renderbufferStorage(G.RENDERBUFFER,Ut,Ye.width,Ye.height)}}G.bindRenderbuffer(G.RENDERBUFFER,null)}function Ht(Qe,Ye){if(Ye&&Ye.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(J.bindFramebuffer(G.FRAMEBUFFER,Qe),!(Ye.depthTexture&&Ye.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const dt=Z.get(Ye.depthTexture);dt.__renderTarget=Ye,(!dt.__webglTexture||Ye.depthTexture.image.width!==Ye.width||Ye.depthTexture.image.height!==Ye.height)&&(Ye.depthTexture.image.width=Ye.width,Ye.depthTexture.image.height=Ye.height,Ye.depthTexture.needsUpdate=!0),He(Ye.depthTexture,0);const yt=dt.__webglTexture,Nt=Lt(Ye);if(Ye.depthTexture.format===DepthFormat)Ft(Ye)?ne.framebufferTexture2DMultisampleEXT(G.FRAMEBUFFER,G.DEPTH_ATTACHMENT,G.TEXTURE_2D,yt,0,Nt):G.framebufferTexture2D(G.FRAMEBUFFER,G.DEPTH_ATTACHMENT,G.TEXTURE_2D,yt,0);else if(Ye.depthTexture.format===DepthStencilFormat)Ft(Ye)?ne.framebufferTexture2DMultisampleEXT(G.FRAMEBUFFER,G.DEPTH_STENCIL_ATTACHMENT,G.TEXTURE_2D,yt,0,Nt):G.framebufferTexture2D(G.FRAMEBUFFER,G.DEPTH_STENCIL_ATTACHMENT,G.TEXTURE_2D,yt,0);else throw new Error("Unknown depthTexture format")}function Wt(Qe){const Ye=Z.get(Qe),_t=Qe.isWebGLCubeRenderTarget===!0;if(Ye.__boundDepthTexture!==Qe.depthTexture){const dt=Qe.depthTexture;if(Ye.__depthDisposeCallback&&Ye.__depthDisposeCallback(),dt){const yt=()=>{delete Ye.__boundDepthTexture,delete Ye.__depthDisposeCallback,dt.removeEventListener("dispose",yt)};dt.addEventListener("dispose",yt),Ye.__depthDisposeCallback=yt}Ye.__boundDepthTexture=dt}if(Qe.depthTexture&&!Ye.__autoAllocateDepthBuffer){if(_t)throw new Error("target.depthTexture not supported in Cube render targets");const dt=Qe.texture.mipmaps;dt&&dt.length>0?Ht(Ye.__webglFramebuffer[0],Qe):Ht(Ye.__webglFramebuffer,Qe)}else if(_t){Ye.__webglDepthbuffer=[];for(let dt=0;dt<6;dt++)if(J.bindFramebuffer(G.FRAMEBUFFER,Ye.__webglFramebuffer[dt]),Ye.__webglDepthbuffer[dt]===void 0)Ye.__webglDepthbuffer[dt]=G.createRenderbuffer(),kt(Ye.__webglDepthbuffer[dt],Qe,!1);else{const yt=Qe.stencilBuffer?G.DEPTH_STENCIL_ATTACHMENT:G.DEPTH_ATTACHMENT,Nt=Ye.__webglDepthbuffer[dt];G.bindRenderbuffer(G.RENDERBUFFER,Nt),G.framebufferRenderbuffer(G.FRAMEBUFFER,yt,G.RENDERBUFFER,Nt)}}else{const dt=Qe.texture.mipmaps;if(dt&&dt.length>0?J.bindFramebuffer(G.FRAMEBUFFER,Ye.__webglFramebuffer[0]):J.bindFramebuffer(G.FRAMEBUFFER,Ye.__webglFramebuffer),Ye.__webglDepthbuffer===void 0)Ye.__webglDepthbuffer=G.createRenderbuffer(),kt(Ye.__webglDepthbuffer,Qe,!1);else{const yt=Qe.stencilBuffer?G.DEPTH_STENCIL_ATTACHMENT:G.DEPTH_ATTACHMENT,Nt=Ye.__webglDepthbuffer;G.bindRenderbuffer(G.RENDERBUFFER,Nt),G.framebufferRenderbuffer(G.FRAMEBUFFER,yt,G.RENDERBUFFER,Nt)}}J.bindFramebuffer(G.FRAMEBUFFER,null)}function ni(Qe,Ye,_t){const dt=Z.get(Qe);Ye!==void 0&&ft(dt.__webglFramebuffer,Qe,Qe.texture,G.COLOR_ATTACHMENT0,G.TEXTURE_2D,0),_t!==void 0&&Wt(Qe)}function jt(Qe){const Ye=Qe.texture,_t=Z.get(Qe),dt=Z.get(Ye);Qe.addEventListener("dispose",Ee);const yt=Qe.textures,Nt=Qe.isWebGLCubeRenderTarget===!0,fi=yt.length>1;if(fi||(dt.__webglTexture===void 0&&(dt.__webglTexture=G.createTexture()),dt.__version=Ye.version,te.memory.textures++),Nt){_t.__webglFramebuffer=[];for(let Zt=0;Zt<6;Zt++)if(Ye.mipmaps&&Ye.mipmaps.length>0){_t.__webglFramebuffer[Zt]=[];for(let Ut=0;Ut<Ye.mipmaps.length;Ut++)_t.__webglFramebuffer[Zt][Ut]=G.createFramebuffer()}else _t.__webglFramebuffer[Zt]=G.createFramebuffer()}else{if(Ye.mipmaps&&Ye.mipmaps.length>0){_t.__webglFramebuffer=[];for(let Zt=0;Zt<Ye.mipmaps.length;Zt++)_t.__webglFramebuffer[Zt]=G.createFramebuffer()}else _t.__webglFramebuffer=G.createFramebuffer();if(fi)for(let Zt=0,Ut=yt.length;Zt<Ut;Zt++){const qt=Z.get(yt[Zt]);qt.__webglTexture===void 0&&(qt.__webglTexture=G.createTexture(),te.memory.textures++)}if(Qe.samples>0&&Ft(Qe)===!1){_t.__webglMultisampledFramebuffer=G.createFramebuffer(),_t.__webglColorRenderbuffer=[],J.bindFramebuffer(G.FRAMEBUFFER,_t.__webglMultisampledFramebuffer);for(let Zt=0;Zt<yt.length;Zt++){const Ut=yt[Zt];_t.__webglColorRenderbuffer[Zt]=G.createRenderbuffer(),G.bindRenderbuffer(G.RENDERBUFFER,_t.__webglColorRenderbuffer[Zt]);const qt=ee.convert(Ut.format,Ut.colorSpace),Rt=ee.convert(Ut.type),Pt=ye(Ut.internalFormat,qt,Rt,Ut.colorSpace,Qe.isXRRenderTarget===!0),vt=Lt(Qe);G.renderbufferStorageMultisample(G.RENDERBUFFER,vt,Pt,Qe.width,Qe.height),G.framebufferRenderbuffer(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0+Zt,G.RENDERBUFFER,_t.__webglColorRenderbuffer[Zt])}G.bindRenderbuffer(G.RENDERBUFFER,null),Qe.depthBuffer&&(_t.__webglDepthRenderbuffer=G.createRenderbuffer(),kt(_t.__webglDepthRenderbuffer,Qe,!0)),J.bindFramebuffer(G.FRAMEBUFFER,null)}}if(Nt){J.bindTexture(G.TEXTURE_CUBE_MAP,dt.__webglTexture),qe(G.TEXTURE_CUBE_MAP,Ye);for(let Zt=0;Zt<6;Zt++)if(Ye.mipmaps&&Ye.mipmaps.length>0)for(let Ut=0;Ut<Ye.mipmaps.length;Ut++)ft(_t.__webglFramebuffer[Zt][Ut],Qe,Ye,G.COLOR_ATTACHMENT0,G.TEXTURE_CUBE_MAP_POSITIVE_X+Zt,Ut);else ft(_t.__webglFramebuffer[Zt],Qe,Ye,G.COLOR_ATTACHMENT0,G.TEXTURE_CUBE_MAP_POSITIVE_X+Zt,0);pe(Ye)&&fe(G.TEXTURE_CUBE_MAP),J.unbindTexture()}else if(fi){for(let Zt=0,Ut=yt.length;Zt<Ut;Zt++){const qt=yt[Zt],Rt=Z.get(qt);let Pt=G.TEXTURE_2D;(Qe.isWebGL3DRenderTarget||Qe.isWebGLArrayRenderTarget)&&(Pt=Qe.isWebGL3DRenderTarget?G.TEXTURE_3D:G.TEXTURE_2D_ARRAY),J.bindTexture(Pt,Rt.__webglTexture),qe(Pt,qt),ft(_t.__webglFramebuffer,Qe,qt,G.COLOR_ATTACHMENT0+Zt,Pt,0),pe(qt)&&fe(Pt)}J.unbindTexture()}else{let Zt=G.TEXTURE_2D;if((Qe.isWebGL3DRenderTarget||Qe.isWebGLArrayRenderTarget)&&(Zt=Qe.isWebGL3DRenderTarget?G.TEXTURE_3D:G.TEXTURE_2D_ARRAY),J.bindTexture(Zt,dt.__webglTexture),qe(Zt,Ye),Ye.mipmaps&&Ye.mipmaps.length>0)for(let Ut=0;Ut<Ye.mipmaps.length;Ut++)ft(_t.__webglFramebuffer[Ut],Qe,Ye,G.COLOR_ATTACHMENT0,Zt,Ut);else ft(_t.__webglFramebuffer,Qe,Ye,G.COLOR_ATTACHMENT0,Zt,0);pe(Ye)&&fe(Zt),J.unbindTexture()}Qe.depthBuffer&&Wt(Qe)}function pt(Qe){const Ye=Qe.textures;for(let _t=0,dt=Ye.length;_t<dt;_t++){const yt=Ye[_t];if(pe(yt)){const Nt=_e(Qe),fi=Z.get(yt).__webglTexture;J.bindTexture(Nt,fi),fe(Nt),J.unbindTexture()}}}const Ke=[],Mt=[];function Bt(Qe){if(Qe.samples>0){if(Ft(Qe)===!1){const Ye=Qe.textures,_t=Qe.width,dt=Qe.height;let yt=G.COLOR_BUFFER_BIT;const Nt=Qe.stencilBuffer?G.DEPTH_STENCIL_ATTACHMENT:G.DEPTH_ATTACHMENT,fi=Z.get(Qe),Zt=Ye.length>1;if(Zt)for(let qt=0;qt<Ye.length;qt++)J.bindFramebuffer(G.FRAMEBUFFER,fi.__webglMultisampledFramebuffer),G.framebufferRenderbuffer(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0+qt,G.RENDERBUFFER,null),J.bindFramebuffer(G.FRAMEBUFFER,fi.__webglFramebuffer),G.framebufferTexture2D(G.DRAW_FRAMEBUFFER,G.COLOR_ATTACHMENT0+qt,G.TEXTURE_2D,null,0);J.bindFramebuffer(G.READ_FRAMEBUFFER,fi.__webglMultisampledFramebuffer);const Ut=Qe.texture.mipmaps;Ut&&Ut.length>0?J.bindFramebuffer(G.DRAW_FRAMEBUFFER,fi.__webglFramebuffer[0]):J.bindFramebuffer(G.DRAW_FRAMEBUFFER,fi.__webglFramebuffer);for(let qt=0;qt<Ye.length;qt++){if(Qe.resolveDepthBuffer&&(Qe.depthBuffer&&(yt|=G.DEPTH_BUFFER_BIT),Qe.stencilBuffer&&Qe.resolveStencilBuffer&&(yt|=G.STENCIL_BUFFER_BIT)),Zt){G.framebufferRenderbuffer(G.READ_FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.RENDERBUFFER,fi.__webglColorRenderbuffer[qt]);const Rt=Z.get(Ye[qt]).__webglTexture;G.framebufferTexture2D(G.DRAW_FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.TEXTURE_2D,Rt,0)}G.blitFramebuffer(0,0,_t,dt,0,0,_t,dt,yt,G.NEAREST),ie===!0&&(Ke.length=0,Mt.length=0,Ke.push(G.COLOR_ATTACHMENT0+qt),Qe.depthBuffer&&Qe.resolveDepthBuffer===!1&&(Ke.push(Nt),Mt.push(Nt),G.invalidateFramebuffer(G.DRAW_FRAMEBUFFER,Mt)),G.invalidateFramebuffer(G.READ_FRAMEBUFFER,Ke))}if(J.bindFramebuffer(G.READ_FRAMEBUFFER,null),J.bindFramebuffer(G.DRAW_FRAMEBUFFER,null),Zt)for(let qt=0;qt<Ye.length;qt++){J.bindFramebuffer(G.FRAMEBUFFER,fi.__webglMultisampledFramebuffer),G.framebufferRenderbuffer(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0+qt,G.RENDERBUFFER,fi.__webglColorRenderbuffer[qt]);const Rt=Z.get(Ye[qt]).__webglTexture;J.bindFramebuffer(G.FRAMEBUFFER,fi.__webglFramebuffer),G.framebufferTexture2D(G.DRAW_FRAMEBUFFER,G.COLOR_ATTACHMENT0+qt,G.TEXTURE_2D,Rt,0)}J.bindFramebuffer(G.DRAW_FRAMEBUFFER,fi.__webglMultisampledFramebuffer)}else if(Qe.depthBuffer&&Qe.resolveDepthBuffer===!1&&ie){const Ye=Qe.stencilBuffer?G.DEPTH_STENCIL_ATTACHMENT:G.DEPTH_ATTACHMENT;G.invalidateFramebuffer(G.DRAW_FRAMEBUFFER,[Ye])}}}function Lt(Qe){return Math.min(Q.maxSamples,Qe.samples)}function Ft(Qe){const Ye=Z.get(Qe);return Qe.samples>0&&_.has("WEBGL_multisampled_render_to_texture")===!0&&Ye.__useRenderToTexture!==!1}function ai(Qe){const Ye=te.render.frame;oe.get(Qe)!==Ye&&(oe.set(Qe,Ye),Qe.update())}function Qt(Qe,Ye){const _t=Qe.colorSpace,dt=Qe.format,yt=Qe.type;return Qe.isCompressedTexture===!0||Qe.isVideoTexture===!0||_t!==LinearSRGBColorSpace&&_t!==NoColorSpace&&(ColorManagement.getTransfer(_t)===SRGBTransfer?(dt!==RGBAFormat||yt!==UnsignedByteType)&&warn("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):error("WebGLTextures: Unsupported texture color space:",_t)),Ye}function hi(Qe){return typeof HTMLImageElement<"u"&&Qe instanceof HTMLImageElement?(re.width=Qe.naturalWidth||Qe.width,re.height=Qe.naturalHeight||Qe.height):typeof VideoFrame<"u"&&Qe instanceof VideoFrame?(re.width=Qe.displayWidth,re.height=Qe.displayHeight):(re.width=Qe.width,re.height=Qe.height),re}this.allocateTextureUnit=Ie,this.resetTextureUnits=Le,this.setTexture2D=He,this.setTexture2DArray=Be,this.setTexture3D=ze,this.setTextureCube=Fe,this.rebindTextures=ni,this.setupRenderTarget=jt,this.updateRenderTargetMipmap=pt,this.updateMultisampleRenderTarget=Bt,this.setupDepthRenderbuffer=Wt,this.setupFrameBufferTexture=ft,this.useMultisampledRTT=Ft}function WebGLUtils(G,_){function J(Z,Q=NoColorSpace){let ee;const te=ColorManagement.getTransfer(Q);if(Z===UnsignedByteType)return G.UNSIGNED_BYTE;if(Z===UnsignedShort4444Type)return G.UNSIGNED_SHORT_4_4_4_4;if(Z===UnsignedShort5551Type)return G.UNSIGNED_SHORT_5_5_5_1;if(Z===UnsignedInt5999Type)return G.UNSIGNED_INT_5_9_9_9_REV;if(Z===UnsignedInt101111Type)return G.UNSIGNED_INT_10F_11F_11F_REV;if(Z===ByteType)return G.BYTE;if(Z===ShortType)return G.SHORT;if(Z===UnsignedShortType)return G.UNSIGNED_SHORT;if(Z===IntType)return G.INT;if(Z===UnsignedIntType)return G.UNSIGNED_INT;if(Z===FloatType)return G.FLOAT;if(Z===HalfFloatType)return G.HALF_FLOAT;if(Z===AlphaFormat)return G.ALPHA;if(Z===RGBFormat)return G.RGB;if(Z===RGBAFormat)return G.RGBA;if(Z===DepthFormat)return G.DEPTH_COMPONENT;if(Z===DepthStencilFormat)return G.DEPTH_STENCIL;if(Z===RedFormat)return G.RED;if(Z===RedIntegerFormat)return G.RED_INTEGER;if(Z===RGFormat)return G.RG;if(Z===RGIntegerFormat)return G.RG_INTEGER;if(Z===RGBAIntegerFormat)return G.RGBA_INTEGER;if(Z===RGB_S3TC_DXT1_Format||Z===RGBA_S3TC_DXT1_Format||Z===RGBA_S3TC_DXT3_Format||Z===RGBA_S3TC_DXT5_Format)if(te===SRGBTransfer)if(ee=_.get("WEBGL_compressed_texture_s3tc_srgb"),ee!==null){if(Z===RGB_S3TC_DXT1_Format)return ee.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(Z===RGBA_S3TC_DXT1_Format)return ee.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(Z===RGBA_S3TC_DXT3_Format)return ee.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(Z===RGBA_S3TC_DXT5_Format)return ee.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(ee=_.get("WEBGL_compressed_texture_s3tc"),ee!==null){if(Z===RGB_S3TC_DXT1_Format)return ee.COMPRESSED_RGB_S3TC_DXT1_EXT;if(Z===RGBA_S3TC_DXT1_Format)return ee.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(Z===RGBA_S3TC_DXT3_Format)return ee.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(Z===RGBA_S3TC_DXT5_Format)return ee.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(Z===RGB_PVRTC_4BPPV1_Format||Z===RGB_PVRTC_2BPPV1_Format||Z===RGBA_PVRTC_4BPPV1_Format||Z===RGBA_PVRTC_2BPPV1_Format)if(ee=_.get("WEBGL_compressed_texture_pvrtc"),ee!==null){if(Z===RGB_PVRTC_4BPPV1_Format)return ee.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(Z===RGB_PVRTC_2BPPV1_Format)return ee.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(Z===RGBA_PVRTC_4BPPV1_Format)return ee.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(Z===RGBA_PVRTC_2BPPV1_Format)return ee.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(Z===RGB_ETC1_Format||Z===RGB_ETC2_Format||Z===RGBA_ETC2_EAC_Format)if(ee=_.get("WEBGL_compressed_texture_etc"),ee!==null){if(Z===RGB_ETC1_Format||Z===RGB_ETC2_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ETC2:ee.COMPRESSED_RGB8_ETC2;if(Z===RGBA_ETC2_EAC_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:ee.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(Z===RGBA_ASTC_4x4_Format||Z===RGBA_ASTC_5x4_Format||Z===RGBA_ASTC_5x5_Format||Z===RGBA_ASTC_6x5_Format||Z===RGBA_ASTC_6x6_Format||Z===RGBA_ASTC_8x5_Format||Z===RGBA_ASTC_8x6_Format||Z===RGBA_ASTC_8x8_Format||Z===RGBA_ASTC_10x5_Format||Z===RGBA_ASTC_10x6_Format||Z===RGBA_ASTC_10x8_Format||Z===RGBA_ASTC_10x10_Format||Z===RGBA_ASTC_12x10_Format||Z===RGBA_ASTC_12x12_Format)if(ee=_.get("WEBGL_compressed_texture_astc"),ee!==null){if(Z===RGBA_ASTC_4x4_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:ee.COMPRESSED_RGBA_ASTC_4x4_KHR;if(Z===RGBA_ASTC_5x4_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:ee.COMPRESSED_RGBA_ASTC_5x4_KHR;if(Z===RGBA_ASTC_5x5_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:ee.COMPRESSED_RGBA_ASTC_5x5_KHR;if(Z===RGBA_ASTC_6x5_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:ee.COMPRESSED_RGBA_ASTC_6x5_KHR;if(Z===RGBA_ASTC_6x6_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:ee.COMPRESSED_RGBA_ASTC_6x6_KHR;if(Z===RGBA_ASTC_8x5_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:ee.COMPRESSED_RGBA_ASTC_8x5_KHR;if(Z===RGBA_ASTC_8x6_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:ee.COMPRESSED_RGBA_ASTC_8x6_KHR;if(Z===RGBA_ASTC_8x8_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:ee.COMPRESSED_RGBA_ASTC_8x8_KHR;if(Z===RGBA_ASTC_10x5_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:ee.COMPRESSED_RGBA_ASTC_10x5_KHR;if(Z===RGBA_ASTC_10x6_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:ee.COMPRESSED_RGBA_ASTC_10x6_KHR;if(Z===RGBA_ASTC_10x8_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:ee.COMPRESSED_RGBA_ASTC_10x8_KHR;if(Z===RGBA_ASTC_10x10_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:ee.COMPRESSED_RGBA_ASTC_10x10_KHR;if(Z===RGBA_ASTC_12x10_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:ee.COMPRESSED_RGBA_ASTC_12x10_KHR;if(Z===RGBA_ASTC_12x12_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:ee.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(Z===RGBA_BPTC_Format||Z===RGB_BPTC_SIGNED_Format||Z===RGB_BPTC_UNSIGNED_Format)if(ee=_.get("EXT_texture_compression_bptc"),ee!==null){if(Z===RGBA_BPTC_Format)return te===SRGBTransfer?ee.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:ee.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(Z===RGB_BPTC_SIGNED_Format)return ee.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(Z===RGB_BPTC_UNSIGNED_Format)return ee.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(Z===RED_RGTC1_Format||Z===SIGNED_RED_RGTC1_Format||Z===RED_GREEN_RGTC2_Format||Z===SIGNED_RED_GREEN_RGTC2_Format)if(ee=_.get("EXT_texture_compression_rgtc"),ee!==null){if(Z===RED_RGTC1_Format)return ee.COMPRESSED_RED_RGTC1_EXT;if(Z===SIGNED_RED_RGTC1_Format)return ee.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(Z===RED_GREEN_RGTC2_Format)return ee.COMPRESSED_RED_GREEN_RGTC2_EXT;if(Z===SIGNED_RED_GREEN_RGTC2_Format)return ee.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return Z===UnsignedInt248Type?G.UNSIGNED_INT_24_8:G[Z]!==void 0?G[Z]:null}return{convert:J}}const _occlusion_vertex=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,_occlusion_fragment=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class WebXRDepthSensing{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(_,J){if(this.texture===null){const Z=new ExternalTexture(_.texture);(_.depthNear!==J.depthNear||_.depthFar!==J.depthFar)&&(this.depthNear=_.depthNear,this.depthFar=_.depthFar),this.texture=Z}}getMesh(_){if(this.texture!==null&&this.mesh===null){const J=_.cameras[0].viewport,Z=new ShaderMaterial({vertexShader:_occlusion_vertex,fragmentShader:_occlusion_fragment,uniforms:{depthColor:{value:this.texture},depthWidth:{value:J.z},depthHeight:{value:J.w}}});this.mesh=new Mesh(new PlaneGeometry(20,20),Z)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class WebXRManager extends EventDispatcher$1{constructor(_,J){super();const Z=this;let Q=null,ee=1,te=null,ne="local-floor",ie=1,re=null,oe=null,se=null,ae=null,le=null,ue=null;const de=typeof XRWebGLBinding<"u",pe=new WebXRDepthSensing,fe={},_e=J.getContextAttributes();let ye=null,be=null;const Ae=[],Ce=[],Ee=new Vector2;let Re=null;const Te=new PerspectiveCamera;Te.viewport=new Vector4;const Me=new PerspectiveCamera;Me.viewport=new Vector4;const Ne=[Te,Me],Le=new ArrayCamera;let Ie=null,Ge=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(it){let lt=Ae[it];return lt===void 0&&(lt=new WebXRController,Ae[it]=lt),lt.getTargetRaySpace()},this.getControllerGrip=function(it){let lt=Ae[it];return lt===void 0&&(lt=new WebXRController,Ae[it]=lt),lt.getGripSpace()},this.getHand=function(it){let lt=Ae[it];return lt===void 0&&(lt=new WebXRController,Ae[it]=lt),lt.getHandSpace()};function He(it){const lt=Ce.indexOf(it.inputSource);if(lt===-1)return;const ft=Ae[lt];ft!==void 0&&(ft.update(it.inputSource,it.frame,re||te),ft.dispatchEvent({type:it.type,data:it.inputSource}))}function Be(){Q.removeEventListener("select",He),Q.removeEventListener("selectstart",He),Q.removeEventListener("selectend",He),Q.removeEventListener("squeeze",He),Q.removeEventListener("squeezestart",He),Q.removeEventListener("squeezeend",He),Q.removeEventListener("end",Be),Q.removeEventListener("inputsourceschange",ze);for(let it=0;it<Ae.length;it++){const lt=Ce[it];lt!==null&&(Ce[it]=null,Ae[it].disconnect(lt))}Ie=null,Ge=null,pe.reset();for(const it in fe)delete fe[it];_.setRenderTarget(ye),le=null,ae=null,se=null,Q=null,be=null,St.stop(),Z.isPresenting=!1,_.setPixelRatio(Re),_.setSize(Ee.width,Ee.height,!1),Z.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(it){ee=it,Z.isPresenting===!0&&warn("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(it){ne=it,Z.isPresenting===!0&&warn("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return re||te},this.setReferenceSpace=function(it){re=it},this.getBaseLayer=function(){return ae!==null?ae:le},this.getBinding=function(){return se===null&&de&&(se=new XRWebGLBinding(Q,J)),se},this.getFrame=function(){return ue},this.getSession=function(){return Q},this.setSession=async function(it){if(Q=it,Q!==null){if(ye=_.getRenderTarget(),Q.addEventListener("select",He),Q.addEventListener("selectstart",He),Q.addEventListener("selectend",He),Q.addEventListener("squeeze",He),Q.addEventListener("squeezestart",He),Q.addEventListener("squeezeend",He),Q.addEventListener("end",Be),Q.addEventListener("inputsourceschange",ze),_e.xrCompatible!==!0&&await J.makeXRCompatible(),Re=_.getPixelRatio(),_.getSize(Ee),de&&"createProjectionLayer"in XRWebGLBinding.prototype){let ft=null,kt=null,Ht=null;_e.depth&&(Ht=_e.stencil?J.DEPTH24_STENCIL8:J.DEPTH_COMPONENT24,ft=_e.stencil?DepthStencilFormat:DepthFormat,kt=_e.stencil?UnsignedInt248Type:UnsignedIntType);const Wt={colorFormat:J.RGBA8,depthFormat:Ht,scaleFactor:ee};se=this.getBinding(),ae=se.createProjectionLayer(Wt),Q.updateRenderState({layers:[ae]}),_.setPixelRatio(1),_.setSize(ae.textureWidth,ae.textureHeight,!1),be=new WebGLRenderTarget(ae.textureWidth,ae.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(ae.textureWidth,ae.textureHeight,kt,void 0,void 0,void 0,void 0,void 0,void 0,ft),stencilBuffer:_e.stencil,colorSpace:_.outputColorSpace,samples:_e.antialias?4:0,resolveDepthBuffer:ae.ignoreDepthValues===!1,resolveStencilBuffer:ae.ignoreDepthValues===!1})}else{const ft={antialias:_e.antialias,alpha:!0,depth:_e.depth,stencil:_e.stencil,framebufferScaleFactor:ee};le=new XRWebGLLayer(Q,J,ft),Q.updateRenderState({baseLayer:le}),_.setPixelRatio(1),_.setSize(le.framebufferWidth,le.framebufferHeight,!1),be=new WebGLRenderTarget(le.framebufferWidth,le.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,colorSpace:_.outputColorSpace,stencilBuffer:_e.stencil,resolveDepthBuffer:le.ignoreDepthValues===!1,resolveStencilBuffer:le.ignoreDepthValues===!1})}be.isXRRenderTarget=!0,this.setFoveation(ie),re=null,te=await Q.requestReferenceSpace(ne),St.setContext(Q),St.start(),Z.isPresenting=!0,Z.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(Q!==null)return Q.environmentBlendMode},this.getDepthTexture=function(){return pe.getDepthTexture()};function ze(it){for(let lt=0;lt<it.removed.length;lt++){const ft=it.removed[lt],kt=Ce.indexOf(ft);kt>=0&&(Ce[kt]=null,Ae[kt].disconnect(ft))}for(let lt=0;lt<it.added.length;lt++){const ft=it.added[lt];let kt=Ce.indexOf(ft);if(kt===-1){for(let Wt=0;Wt<Ae.length;Wt++)if(Wt>=Ce.length){Ce.push(ft),kt=Wt;break}else if(Ce[Wt]===null){Ce[Wt]=ft,kt=Wt;break}if(kt===-1)break}const Ht=Ae[kt];Ht&&Ht.connect(ft)}}const Fe=new Vector3,$e=new Vector3;function Xe(it,lt,ft){Fe.setFromMatrixPosition(lt.matrixWorld),$e.setFromMatrixPosition(ft.matrixWorld);const kt=Fe.distanceTo($e),Ht=lt.projectionMatrix.elements,Wt=ft.projectionMatrix.elements,ni=Ht[14]/(Ht[10]-1),jt=Ht[14]/(Ht[10]+1),pt=(Ht[9]+1)/Ht[5],Ke=(Ht[9]-1)/Ht[5],Mt=(Ht[8]-1)/Ht[0],Bt=(Wt[8]+1)/Wt[0],Lt=ni*Mt,Ft=ni*Bt,ai=kt/(-Mt+Bt),Qt=ai*-Mt;if(lt.matrixWorld.decompose(it.position,it.quaternion,it.scale),it.translateX(Qt),it.translateZ(ai),it.matrixWorld.compose(it.position,it.quaternion,it.scale),it.matrixWorldInverse.copy(it.matrixWorld).invert(),Ht[10]===-1)it.projectionMatrix.copy(lt.projectionMatrix),it.projectionMatrixInverse.copy(lt.projectionMatrixInverse);else{const hi=ni+ai,Qe=jt+ai,Ye=Lt-Qt,_t=Ft+(kt-Qt),dt=pt*jt/Qe*hi,yt=Ke*jt/Qe*hi;it.projectionMatrix.makePerspective(Ye,_t,dt,yt,hi,Qe),it.projectionMatrixInverse.copy(it.projectionMatrix).invert()}}function je(it,lt){lt===null?it.matrixWorld.copy(it.matrix):it.matrixWorld.multiplyMatrices(lt.matrixWorld,it.matrix),it.matrixWorldInverse.copy(it.matrixWorld).invert()}this.updateCamera=function(it){if(Q===null)return;let lt=it.near,ft=it.far;pe.texture!==null&&(pe.depthNear>0&&(lt=pe.depthNear),pe.depthFar>0&&(ft=pe.depthFar)),Le.near=Me.near=Te.near=lt,Le.far=Me.far=Te.far=ft,(Ie!==Le.near||Ge!==Le.far)&&(Q.updateRenderState({depthNear:Le.near,depthFar:Le.far}),Ie=Le.near,Ge=Le.far),Le.layers.mask=it.layers.mask|6,Te.layers.mask=Le.layers.mask&3,Me.layers.mask=Le.layers.mask&5;const kt=it.parent,Ht=Le.cameras;je(Le,kt);for(let Wt=0;Wt<Ht.length;Wt++)je(Ht[Wt],kt);Ht.length===2?Xe(Le,Te,Me):Le.projectionMatrix.copy(Te.projectionMatrix),qe(it,Le,kt)};function qe(it,lt,ft){ft===null?it.matrix.copy(lt.matrixWorld):(it.matrix.copy(ft.matrixWorld),it.matrix.invert(),it.matrix.multiply(lt.matrixWorld)),it.matrix.decompose(it.position,it.quaternion,it.scale),it.updateMatrixWorld(!0),it.projectionMatrix.copy(lt.projectionMatrix),it.projectionMatrixInverse.copy(lt.projectionMatrixInverse),it.isPerspectiveCamera&&(it.fov=RAD2DEG*2*Math.atan(1/it.projectionMatrix.elements[5]),it.zoom=1)}this.getCamera=function(){return Le},this.getFoveation=function(){if(!(ae===null&&le===null))return ie},this.setFoveation=function(it){ie=it,ae!==null&&(ae.fixedFoveation=it),le!==null&&le.fixedFoveation!==void 0&&(le.fixedFoveation=it)},this.hasDepthSensing=function(){return pe.texture!==null},this.getDepthSensingMesh=function(){return pe.getMesh(Le)},this.getCameraTexture=function(it){return fe[it]};let Ze=null;function st(it,lt){if(oe=lt.getViewerPose(re||te),ue=lt,oe!==null){const ft=oe.views;le!==null&&(_.setRenderTargetFramebuffer(be,le.framebuffer),_.setRenderTarget(be));let kt=!1;ft.length!==Le.cameras.length&&(Le.cameras.length=0,kt=!0);for(let jt=0;jt<ft.length;jt++){const pt=ft[jt];let Ke=null;if(le!==null)Ke=le.getViewport(pt);else{const Bt=se.getViewSubImage(ae,pt);Ke=Bt.viewport,jt===0&&(_.setRenderTargetTextures(be,Bt.colorTexture,Bt.depthStencilTexture),_.setRenderTarget(be))}let Mt=Ne[jt];Mt===void 0&&(Mt=new PerspectiveCamera,Mt.layers.enable(jt),Mt.viewport=new Vector4,Ne[jt]=Mt),Mt.matrix.fromArray(pt.transform.matrix),Mt.matrix.decompose(Mt.position,Mt.quaternion,Mt.scale),Mt.projectionMatrix.fromArray(pt.projectionMatrix),Mt.projectionMatrixInverse.copy(Mt.projectionMatrix).invert(),Mt.viewport.set(Ke.x,Ke.y,Ke.width,Ke.height),jt===0&&(Le.matrix.copy(Mt.matrix),Le.matrix.decompose(Le.position,Le.quaternion,Le.scale)),kt===!0&&Le.cameras.push(Mt)}const Ht=Q.enabledFeatures;if(Ht&&Ht.includes("depth-sensing")&&Q.depthUsage=="gpu-optimized"&&de){se=Z.getBinding();const jt=se.getDepthInformation(ft[0]);jt&&jt.isValid&&jt.texture&&pe.init(jt,Q.renderState)}if(Ht&&Ht.includes("camera-access")&&de){_.state.unbindTexture(),se=Z.getBinding();for(let jt=0;jt<ft.length;jt++){const pt=ft[jt].camera;if(pt){let Ke=fe[pt];Ke||(Ke=new ExternalTexture,fe[pt]=Ke);const Mt=se.getCameraImage(pt);Ke.sourceTexture=Mt}}}}for(let ft=0;ft<Ae.length;ft++){const kt=Ce[ft],Ht=Ae[ft];kt!==null&&Ht!==void 0&&Ht.update(kt,lt,re||te)}Ze&&Ze(it,lt),lt.detectedPlanes&&Z.dispatchEvent({type:"planesdetected",data:lt}),ue=null}const St=new WebGLAnimation;St.setAnimationLoop(st),this.setAnimationLoop=function(it){Ze=it},this.dispose=function(){}}}const _e1=new Euler,_m1=new Matrix4;function WebGLMaterials(G,_){function J(pe,fe){pe.matrixAutoUpdate===!0&&pe.updateMatrix(),fe.value.copy(pe.matrix)}function Z(pe,fe){fe.color.getRGB(pe.fogColor.value,getUnlitUniformColorSpace(G)),fe.isFog?(pe.fogNear.value=fe.near,pe.fogFar.value=fe.far):fe.isFogExp2&&(pe.fogDensity.value=fe.density)}function Q(pe,fe,_e,ye,be){fe.isMeshBasicMaterial||fe.isMeshLambertMaterial?ee(pe,fe):fe.isMeshToonMaterial?(ee(pe,fe),se(pe,fe)):fe.isMeshPhongMaterial?(ee(pe,fe),oe(pe,fe)):fe.isMeshStandardMaterial?(ee(pe,fe),ae(pe,fe),fe.isMeshPhysicalMaterial&&le(pe,fe,be)):fe.isMeshMatcapMaterial?(ee(pe,fe),ue(pe,fe)):fe.isMeshDepthMaterial?ee(pe,fe):fe.isMeshDistanceMaterial?(ee(pe,fe),de(pe,fe)):fe.isMeshNormalMaterial?ee(pe,fe):fe.isLineBasicMaterial?(te(pe,fe),fe.isLineDashedMaterial&&ne(pe,fe)):fe.isPointsMaterial?ie(pe,fe,_e,ye):fe.isSpriteMaterial?re(pe,fe):fe.isShadowMaterial?(pe.color.value.copy(fe.color),pe.opacity.value=fe.opacity):fe.isShaderMaterial&&(fe.uniformsNeedUpdate=!1)}function ee(pe,fe){pe.opacity.value=fe.opacity,fe.color&&pe.diffuse.value.copy(fe.color),fe.emissive&&pe.emissive.value.copy(fe.emissive).multiplyScalar(fe.emissiveIntensity),fe.map&&(pe.map.value=fe.map,J(fe.map,pe.mapTransform)),fe.alphaMap&&(pe.alphaMap.value=fe.alphaMap,J(fe.alphaMap,pe.alphaMapTransform)),fe.bumpMap&&(pe.bumpMap.value=fe.bumpMap,J(fe.bumpMap,pe.bumpMapTransform),pe.bumpScale.value=fe.bumpScale,fe.side===BackSide&&(pe.bumpScale.value*=-1)),fe.normalMap&&(pe.normalMap.value=fe.normalMap,J(fe.normalMap,pe.normalMapTransform),pe.normalScale.value.copy(fe.normalScale),fe.side===BackSide&&pe.normalScale.value.negate()),fe.displacementMap&&(pe.displacementMap.value=fe.displacementMap,J(fe.displacementMap,pe.displacementMapTransform),pe.displacementScale.value=fe.displacementScale,pe.displacementBias.value=fe.displacementBias),fe.emissiveMap&&(pe.emissiveMap.value=fe.emissiveMap,J(fe.emissiveMap,pe.emissiveMapTransform)),fe.specularMap&&(pe.specularMap.value=fe.specularMap,J(fe.specularMap,pe.specularMapTransform)),fe.alphaTest>0&&(pe.alphaTest.value=fe.alphaTest);const _e=_.get(fe),ye=_e.envMap,be=_e.envMapRotation;ye&&(pe.envMap.value=ye,_e1.copy(be),_e1.x*=-1,_e1.y*=-1,_e1.z*=-1,ye.isCubeTexture&&ye.isRenderTargetTexture===!1&&(_e1.y*=-1,_e1.z*=-1),pe.envMapRotation.value.setFromMatrix4(_m1.makeRotationFromEuler(_e1)),pe.flipEnvMap.value=ye.isCubeTexture&&ye.isRenderTargetTexture===!1?-1:1,pe.reflectivity.value=fe.reflectivity,pe.ior.value=fe.ior,pe.refractionRatio.value=fe.refractionRatio),fe.lightMap&&(pe.lightMap.value=fe.lightMap,pe.lightMapIntensity.value=fe.lightMapIntensity,J(fe.lightMap,pe.lightMapTransform)),fe.aoMap&&(pe.aoMap.value=fe.aoMap,pe.aoMapIntensity.value=fe.aoMapIntensity,J(fe.aoMap,pe.aoMapTransform))}function te(pe,fe){pe.diffuse.value.copy(fe.color),pe.opacity.value=fe.opacity,fe.map&&(pe.map.value=fe.map,J(fe.map,pe.mapTransform))}function ne(pe,fe){pe.dashSize.value=fe.dashSize,pe.totalSize.value=fe.dashSize+fe.gapSize,pe.scale.value=fe.scale}function ie(pe,fe,_e,ye){pe.diffuse.value.copy(fe.color),pe.opacity.value=fe.opacity,pe.size.value=fe.size*_e,pe.scale.value=ye*.5,fe.map&&(pe.map.value=fe.map,J(fe.map,pe.uvTransform)),fe.alphaMap&&(pe.alphaMap.value=fe.alphaMap,J(fe.alphaMap,pe.alphaMapTransform)),fe.alphaTest>0&&(pe.alphaTest.value=fe.alphaTest)}function re(pe,fe){pe.diffuse.value.copy(fe.color),pe.opacity.value=fe.opacity,pe.rotation.value=fe.rotation,fe.map&&(pe.map.value=fe.map,J(fe.map,pe.mapTransform)),fe.alphaMap&&(pe.alphaMap.value=fe.alphaMap,J(fe.alphaMap,pe.alphaMapTransform)),fe.alphaTest>0&&(pe.alphaTest.value=fe.alphaTest)}function oe(pe,fe){pe.specular.value.copy(fe.specular),pe.shininess.value=Math.max(fe.shininess,1e-4)}function se(pe,fe){fe.gradientMap&&(pe.gradientMap.value=fe.gradientMap)}function ae(pe,fe){pe.metalness.value=fe.metalness,fe.metalnessMap&&(pe.metalnessMap.value=fe.metalnessMap,J(fe.metalnessMap,pe.metalnessMapTransform)),pe.roughness.value=fe.roughness,fe.roughnessMap&&(pe.roughnessMap.value=fe.roughnessMap,J(fe.roughnessMap,pe.roughnessMapTransform)),fe.envMap&&(pe.envMapIntensity.value=fe.envMapIntensity)}function le(pe,fe,_e){pe.ior.value=fe.ior,fe.sheen>0&&(pe.sheenColor.value.copy(fe.sheenColor).multiplyScalar(fe.sheen),pe.sheenRoughness.value=fe.sheenRoughness,fe.sheenColorMap&&(pe.sheenColorMap.value=fe.sheenColorMap,J(fe.sheenColorMap,pe.sheenColorMapTransform)),fe.sheenRoughnessMap&&(pe.sheenRoughnessMap.value=fe.sheenRoughnessMap,J(fe.sheenRoughnessMap,pe.sheenRoughnessMapTransform))),fe.clearcoat>0&&(pe.clearcoat.value=fe.clearcoat,pe.clearcoatRoughness.value=fe.clearcoatRoughness,fe.clearcoatMap&&(pe.clearcoatMap.value=fe.clearcoatMap,J(fe.clearcoatMap,pe.clearcoatMapTransform)),fe.clearcoatRoughnessMap&&(pe.clearcoatRoughnessMap.value=fe.clearcoatRoughnessMap,J(fe.clearcoatRoughnessMap,pe.clearcoatRoughnessMapTransform)),fe.clearcoatNormalMap&&(pe.clearcoatNormalMap.value=fe.clearcoatNormalMap,J(fe.clearcoatNormalMap,pe.clearcoatNormalMapTransform),pe.clearcoatNormalScale.value.copy(fe.clearcoatNormalScale),fe.side===BackSide&&pe.clearcoatNormalScale.value.negate())),fe.dispersion>0&&(pe.dispersion.value=fe.dispersion),fe.iridescence>0&&(pe.iridescence.value=fe.iridescence,pe.iridescenceIOR.value=fe.iridescenceIOR,pe.iridescenceThicknessMinimum.value=fe.iridescenceThicknessRange[0],pe.iridescenceThicknessMaximum.value=fe.iridescenceThicknessRange[1],fe.iridescenceMap&&(pe.iridescenceMap.value=fe.iridescenceMap,J(fe.iridescenceMap,pe.iridescenceMapTransform)),fe.iridescenceThicknessMap&&(pe.iridescenceThicknessMap.value=fe.iridescenceThicknessMap,J(fe.iridescenceThicknessMap,pe.iridescenceThicknessMapTransform))),fe.transmission>0&&(pe.transmission.value=fe.transmission,pe.transmissionSamplerMap.value=_e.texture,pe.transmissionSamplerSize.value.set(_e.width,_e.height),fe.transmissionMap&&(pe.transmissionMap.value=fe.transmissionMap,J(fe.transmissionMap,pe.transmissionMapTransform)),pe.thickness.value=fe.thickness,fe.thicknessMap&&(pe.thicknessMap.value=fe.thicknessMap,J(fe.thicknessMap,pe.thicknessMapTransform)),pe.attenuationDistance.value=fe.attenuationDistance,pe.attenuationColor.value.copy(fe.attenuationColor)),fe.anisotropy>0&&(pe.anisotropyVector.value.set(fe.anisotropy*Math.cos(fe.anisotropyRotation),fe.anisotropy*Math.sin(fe.anisotropyRotation)),fe.anisotropyMap&&(pe.anisotropyMap.value=fe.anisotropyMap,J(fe.anisotropyMap,pe.anisotropyMapTransform))),pe.specularIntensity.value=fe.specularIntensity,pe.specularColor.value.copy(fe.specularColor),fe.specularColorMap&&(pe.specularColorMap.value=fe.specularColorMap,J(fe.specularColorMap,pe.specularColorMapTransform)),fe.specularIntensityMap&&(pe.specularIntensityMap.value=fe.specularIntensityMap,J(fe.specularIntensityMap,pe.specularIntensityMapTransform))}function ue(pe,fe){fe.matcap&&(pe.matcap.value=fe.matcap)}function de(pe,fe){const _e=_.get(fe).light;pe.referencePosition.value.setFromMatrixPosition(_e.matrixWorld),pe.nearDistance.value=_e.shadow.camera.near,pe.farDistance.value=_e.shadow.camera.far}return{refreshFogUniforms:Z,refreshMaterialUniforms:Q}}function WebGLUniformsGroups(G,_,J,Z){let Q={},ee={},te=[];const ne=G.getParameter(G.MAX_UNIFORM_BUFFER_BINDINGS);function ie(_e,ye){const be=ye.program;Z.uniformBlockBinding(_e,be)}function re(_e,ye){let be=Q[_e.id];be===void 0&&(ue(_e),be=oe(_e),Q[_e.id]=be,_e.addEventListener("dispose",pe));const Ae=ye.program;Z.updateUBOMapping(_e,Ae);const Ce=_.render.frame;ee[_e.id]!==Ce&&(ae(_e),ee[_e.id]=Ce)}function oe(_e){const ye=se();_e.__bindingPointIndex=ye;const be=G.createBuffer(),Ae=_e.__size,Ce=_e.usage;return G.bindBuffer(G.UNIFORM_BUFFER,be),G.bufferData(G.UNIFORM_BUFFER,Ae,Ce),G.bindBuffer(G.UNIFORM_BUFFER,null),G.bindBufferBase(G.UNIFORM_BUFFER,ye,be),be}function se(){for(let _e=0;_e<ne;_e++)if(te.indexOf(_e)===-1)return te.push(_e),_e;return error("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function ae(_e){const ye=Q[_e.id],be=_e.uniforms,Ae=_e.__cache;G.bindBuffer(G.UNIFORM_BUFFER,ye);for(let Ce=0,Ee=be.length;Ce<Ee;Ce++){const Re=Array.isArray(be[Ce])?be[Ce]:[be[Ce]];for(let Te=0,Me=Re.length;Te<Me;Te++){const Ne=Re[Te];if(le(Ne,Ce,Te,Ae)===!0){const Le=Ne.__offset,Ie=Array.isArray(Ne.value)?Ne.value:[Ne.value];let Ge=0;for(let He=0;He<Ie.length;He++){const Be=Ie[He],ze=de(Be);typeof Be=="number"||typeof Be=="boolean"?(Ne.__data[0]=Be,G.bufferSubData(G.UNIFORM_BUFFER,Le+Ge,Ne.__data)):Be.isMatrix3?(Ne.__data[0]=Be.elements[0],Ne.__data[1]=Be.elements[1],Ne.__data[2]=Be.elements[2],Ne.__data[3]=0,Ne.__data[4]=Be.elements[3],Ne.__data[5]=Be.elements[4],Ne.__data[6]=Be.elements[5],Ne.__data[7]=0,Ne.__data[8]=Be.elements[6],Ne.__data[9]=Be.elements[7],Ne.__data[10]=Be.elements[8],Ne.__data[11]=0):(Be.toArray(Ne.__data,Ge),Ge+=ze.storage/Float32Array.BYTES_PER_ELEMENT)}G.bufferSubData(G.UNIFORM_BUFFER,Le,Ne.__data)}}}G.bindBuffer(G.UNIFORM_BUFFER,null)}function le(_e,ye,be,Ae){const Ce=_e.value,Ee=ye+"_"+be;if(Ae[Ee]===void 0)return typeof Ce=="number"||typeof Ce=="boolean"?Ae[Ee]=Ce:Ae[Ee]=Ce.clone(),!0;{const Re=Ae[Ee];if(typeof Ce=="number"||typeof Ce=="boolean"){if(Re!==Ce)return Ae[Ee]=Ce,!0}else if(Re.equals(Ce)===!1)return Re.copy(Ce),!0}return!1}function ue(_e){const ye=_e.uniforms;let be=0;const Ae=16;for(let Ee=0,Re=ye.length;Ee<Re;Ee++){const Te=Array.isArray(ye[Ee])?ye[Ee]:[ye[Ee]];for(let Me=0,Ne=Te.length;Me<Ne;Me++){const Le=Te[Me],Ie=Array.isArray(Le.value)?Le.value:[Le.value];for(let Ge=0,He=Ie.length;Ge<He;Ge++){const Be=Ie[Ge],ze=de(Be),Fe=be%Ae,$e=Fe%ze.boundary,Xe=Fe+$e;be+=$e,Xe!==0&&Ae-Xe<ze.storage&&(be+=Ae-Xe),Le.__data=new Float32Array(ze.storage/Float32Array.BYTES_PER_ELEMENT),Le.__offset=be,be+=ze.storage}}}const Ce=be%Ae;return Ce>0&&(be+=Ae-Ce),_e.__size=be,_e.__cache={},this}function de(_e){const ye={boundary:0,storage:0};return typeof _e=="number"||typeof _e=="boolean"?(ye.boundary=4,ye.storage=4):_e.isVector2?(ye.boundary=8,ye.storage=8):_e.isVector3||_e.isColor?(ye.boundary=16,ye.storage=12):_e.isVector4?(ye.boundary=16,ye.storage=16):_e.isMatrix3?(ye.boundary=48,ye.storage=48):_e.isMatrix4?(ye.boundary=64,ye.storage=64):_e.isTexture?warn("WebGLRenderer: Texture samplers can not be part of an uniforms group."):warn("WebGLRenderer: Unsupported uniform value type.",_e),ye}function pe(_e){const ye=_e.target;ye.removeEventListener("dispose",pe);const be=te.indexOf(ye.__bindingPointIndex);te.splice(be,1),G.deleteBuffer(Q[ye.id]),delete Q[ye.id],delete ee[ye.id]}function fe(){for(const _e in Q)G.deleteBuffer(Q[_e]);te=[],Q={},ee={}}return{bind:ie,update:re,dispose:fe}}const DATA=new Uint16Array([11481,15204,11534,15171,11808,15015,12385,14843,12894,14716,13396,14600,13693,14483,13976,14366,14237,14171,14405,13961,14511,13770,14605,13598,14687,13444,14760,13305,14822,13066,14876,12857,14923,12675,14963,12517,14997,12379,15025,12230,15049,12023,15070,11843,15086,11687,15100,11551,15111,11433,15120,11330,15127,11217,15132,11060,15135,10922,15138,10801,15139,10695,15139,10600,13012,14923,13020,14917,13064,14886,13176,14800,13349,14666,13513,14526,13724,14398,13960,14230,14200,14020,14383,13827,14488,13651,14583,13491,14667,13348,14740,13132,14803,12908,14856,12713,14901,12542,14938,12394,14968,12241,14992,12017,15010,11822,15024,11654,15034,11507,15041,11380,15044,11269,15044,11081,15042,10913,15037,10764,15031,10635,15023,10520,15014,10419,15003,10330,13657,14676,13658,14673,13670,14660,13698,14622,13750,14547,13834,14442,13956,14317,14112,14093,14291,13889,14407,13704,14499,13538,14586,13389,14664,13201,14733,12966,14792,12758,14842,12577,14882,12418,14915,12272,14940,12033,14959,11826,14972,11646,14980,11490,14983,11355,14983,11212,14979,11008,14971,10830,14961,10675,14950,10540,14936,10420,14923,10315,14909,10204,14894,10041,14089,14460,14090,14459,14096,14452,14112,14431,14141,14388,14186,14305,14252,14130,14341,13941,14399,13756,14467,13585,14539,13430,14610,13272,14677,13026,14737,12808,14790,12617,14833,12449,14869,12303,14896,12065,14916,11845,14929,11655,14937,11490,14939,11347,14936,11184,14930,10970,14921,10783,14912,10621,14900,10480,14885,10356,14867,10247,14848,10062,14827,9894,14805,9745,14400,14208,14400,14206,14402,14198,14406,14174,14415,14122,14427,14035,14444,13913,14469,13767,14504,13613,14548,13463,14598,13324,14651,13082,14704,12858,14752,12658,14795,12483,14831,12330,14860,12106,14881,11875,14895,11675,14903,11501,14905,11351,14903,11178,14900,10953,14892,10757,14880,10589,14865,10442,14847,10313,14827,10162,14805,9965,14782,9792,14757,9642,14731,9507,14562,13883,14562,13883,14563,13877,14566,13862,14570,13830,14576,13773,14584,13689,14595,13582,14613,13461,14637,13336,14668,13120,14704,12897,14741,12695,14776,12516,14808,12358,14835,12150,14856,11910,14870,11701,14878,11519,14882,11361,14884,11187,14880,10951,14871,10748,14858,10572,14842,10418,14823,10286,14801,10099,14777,9897,14751,9722,14725,9567,14696,9430,14666,9309,14702,13604,14702,13604,14702,13600,14703,13591,14705,13570,14707,13533,14709,13477,14712,13400,14718,13305,14727,13106,14743,12907,14762,12716,14784,12539,14807,12380,14827,12190,14844,11943,14855,11727,14863,11539,14870,11376,14871,11204,14868,10960,14858,10748,14845,10565,14829,10406,14809,10269,14786,10058,14761,9852,14734,9671,14705,9512,14674,9374,14641,9253,14608,9076,14821,13366,14821,13365,14821,13364,14821,13358,14821,13344,14821,13320,14819,13252,14817,13145,14815,13011,14814,12858,14817,12698,14823,12539,14832,12389,14841,12214,14850,11968,14856,11750,14861,11558,14866,11390,14867,11226,14862,10972,14853,10754,14840,10565,14823,10401,14803,10259,14780,10032,14754,9820,14725,9635,14694,9473,14661,9333,14627,9203,14593,8988,14557,8798,14923,13014,14922,13014,14922,13012,14922,13004,14920,12987,14919,12957,14915,12907,14909,12834,14902,12738,14894,12623,14888,12498,14883,12370,14880,12203,14878,11970,14875,11759,14873,11569,14874,11401,14872,11243,14865,10986,14855,10762,14842,10568,14825,10401,14804,10255,14781,10017,14754,9799,14725,9611,14692,9445,14658,9301,14623,9139,14587,8920,14548,8729,14509,8562,15008,12672,15008,12672,15008,12671,15007,12667,15005,12656,15001,12637,14997,12605,14989,12556,14978,12490,14966,12407,14953,12313,14940,12136,14927,11934,14914,11742,14903,11563,14896,11401,14889,11247,14879,10992,14866,10767,14851,10570,14833,10400,14812,10252,14789,10007,14761,9784,14731,9592,14698,9424,14663,9279,14627,9088,14588,8868,14548,8676,14508,8508,14467,8360,15080,12386,15080,12386,15079,12385,15078,12383,15076,12378,15072,12367,15066,12347,15057,12315,15045,12253,15030,12138,15012,11998,14993,11845,14972,11685,14951,11530,14935,11383,14920,11228,14904,10981,14887,10762,14870,10567,14850,10397,14827,10248,14803,9997,14774,9771,14743,9578,14710,9407,14674,9259,14637,9048,14596,8826,14555,8632,14514,8464,14471,8317,14427,8182,15139,12008,15139,12008,15138,12008,15137,12007,15135,12003,15130,11990,15124,11969,15115,11929,15102,11872,15086,11794,15064,11693,15041,11581,15013,11459,14987,11336,14966,11170,14944,10944,14921,10738,14898,10552,14875,10387,14850,10239,14824,9983,14794,9758,14762,9563,14728,9392,14692,9244,14653,9014,14611,8791,14569,8597,14526,8427,14481,8281,14436,8110,14391,7885,15188,11617,15188,11617,15187,11617,15186,11618,15183,11617,15179,11612,15173,11601,15163,11581,15150,11546,15133,11495,15110,11427,15083,11346,15051,11246,15024,11057,14996,10868,14967,10687,14938,10517,14911,10362,14882,10206,14853,9956,14821,9737,14787,9543,14752,9375,14715,9228,14675,8980,14632,8760,14589,8565,14544,8395,14498,8248,14451,8049,14404,7824,14357,7630,15228,11298,15228,11298,15227,11299,15226,11301,15223,11303,15219,11302,15213,11299,15204,11290,15191,11271,15174,11217,15150,11129,15119,11015,15087,10886,15057,10744,15024,10599,14990,10455,14957,10318,14924,10143,14891,9911,14856,9701,14820,9516,14782,9352,14744,9200,14703,8946,14659,8725,14615,8533,14568,8366,14521,8220,14472,7992,14423,7770,14374,7578,14315,7408,15260,10819,15260,10819,15259,10822,15258,10826,15256,10832,15251,10836,15246,10841,15237,10838,15225,10821,15207,10788,15183,10734,15151,10660,15120,10571,15087,10469,15049,10359,15012,10249,14974,10041,14937,9837,14900,9647,14860,9475,14820,9320,14779,9147,14736,8902,14691,8688,14646,8499,14598,8335,14549,8189,14499,7940,14448,7720,14397,7529,14347,7363,14256,7218,15285,10410,15285,10411,15285,10413,15284,10418,15282,10425,15278,10434,15272,10442,15264,10449,15252,10445,15235,10433,15210,10403,15179,10358,15149,10301,15113,10218,15073,10059,15033,9894,14991,9726,14951,9565,14909,9413,14865,9273,14822,9073,14777,8845,14730,8641,14682,8459,14633,8300,14583,8129,14531,7883,14479,7670,14426,7482,14373,7321,14305,7176,14201,6939,15305,9939,15305,9940,15305,9945,15304,9955,15302,9967,15298,9989,15293,10010,15286,10033,15274,10044,15258,10045,15233,10022,15205,9975,15174,9903,15136,9808,15095,9697,15053,9578,15009,9451,14965,9327,14918,9198,14871,8973,14825,8766,14775,8579,14725,8408,14675,8259,14622,8058,14569,7821,14515,7615,14460,7435,14405,7276,14350,7108,14256,6866,14149,6653,15321,9444,15321,9445,15321,9448,15320,9458,15317,9470,15314,9490,15310,9515,15302,9540,15292,9562,15276,9579,15251,9577,15226,9559,15195,9519,15156,9463,15116,9389,15071,9304,15025,9208,14978,9023,14927,8838,14878,8661,14827,8496,14774,8344,14722,8206,14667,7973,14612,7749,14556,7555,14499,7382,14443,7229,14385,7025,14322,6791,14210,6588,14100,6409,15333,8920,15333,8921,15332,8927,15332,8943,15329,8965,15326,9002,15322,9048,15316,9106,15307,9162,15291,9204,15267,9221,15244,9221,15212,9196,15175,9134,15133,9043,15088,8930,15040,8801,14990,8665,14938,8526,14886,8391,14830,8261,14775,8087,14719,7866,14661,7664,14603,7482,14544,7322,14485,7178,14426,6936,14367,6713,14281,6517,14166,6348,14054,6198,15341,8360,15341,8361,15341,8366,15341,8379,15339,8399,15336,8431,15332,8473,15326,8527,15318,8585,15302,8632,15281,8670,15258,8690,15227,8690,15191,8664,15149,8612,15104,8543,15055,8456,15001,8360,14948,8259,14892,8122,14834,7923,14776,7734,14716,7558,14656,7397,14595,7250,14534,7070,14472,6835,14410,6628,14350,6443,14243,6283,14125,6135,14010,5889,15348,7715,15348,7717,15348,7725,15347,7745,15345,7780,15343,7836,15339,7905,15334,8e3,15326,8103,15310,8193,15293,8239,15270,8270,15240,8287,15204,8283,15163,8260,15118,8223,15067,8143,15014,8014,14958,7873,14899,7723,14839,7573,14778,7430,14715,7293,14652,7164,14588,6931,14524,6720,14460,6531,14396,6362,14330,6210,14207,6015,14086,5781,13969,5576,15352,7114,15352,7116,15352,7128,15352,7159,15350,7195,15348,7237,15345,7299,15340,7374,15332,7457,15317,7544,15301,7633,15280,7703,15251,7754,15216,7775,15176,7767,15131,7733,15079,7670,15026,7588,14967,7492,14906,7387,14844,7278,14779,7171,14714,6965,14648,6770,14581,6587,14515,6420,14448,6269,14382,6123,14299,5881,14172,5665,14049,5477,13929,5310,15355,6329,15355,6330,15355,6339,15355,6362,15353,6410,15351,6472,15349,6572,15344,6688,15337,6835,15323,6985,15309,7142,15287,7220,15260,7277,15226,7310,15188,7326,15142,7318,15090,7285,15036,7239,14976,7177,14914,7045,14849,6892,14782,6736,14714,6581,14645,6433,14576,6293,14506,6164,14438,5946,14369,5733,14270,5540,14140,5369,14014,5216,13892,5043,15357,5483,15357,5484,15357,5496,15357,5528,15356,5597,15354,5692,15351,5835,15347,6011,15339,6195,15328,6317,15314,6446,15293,6566,15268,6668,15235,6746,15197,6796,15152,6811,15101,6790,15046,6748,14985,6673,14921,6583,14854,6479,14785,6371,14714,6259,14643,6149,14571,5946,14499,5750,14428,5567,14358,5401,14242,5250,14109,5111,13980,4870,13856,4657,15359,4555,15359,4557,15358,4573,15358,4633,15357,4715,15355,4841,15353,5061,15349,5216,15342,5391,15331,5577,15318,5770,15299,5967,15274,6150,15243,6223,15206,6280,15161,6310,15111,6317,15055,6300,14994,6262,14928,6208,14860,6141,14788,5994,14715,5838,14641,5684,14566,5529,14492,5384,14418,5247,14346,5121,14216,4892,14079,4682,13948,4496,13822,4330,15359,3498,15359,3501,15359,3520,15359,3598,15358,3719,15356,3860,15355,4137,15351,4305,15344,4563,15334,4809,15321,5116,15303,5273,15280,5418,15250,5547,15214,5653,15170,5722,15120,5761,15064,5763,15002,5733,14935,5673,14865,5597,14792,5504,14716,5400,14640,5294,14563,5185,14486,5041,14410,4841,14335,4655,14191,4482,14051,4325,13918,4183,13790,4012,15360,2282,15360,2285,15360,2306,15360,2401,15359,2547,15357,2748,15355,3103,15352,3349,15345,3675,15336,4020,15324,4272,15307,4496,15285,4716,15255,4908,15220,5086,15178,5170,15128,5214,15072,5234,15010,5231,14943,5206,14871,5166,14796,5102,14718,4971,14639,4833,14559,4687,14480,4541,14402,4401,14315,4268,14167,4142,14025,3958,13888,3747,13759,3556,15360,923,15360,925,15360,946,15360,1052,15359,1214,15357,1494,15356,1892,15352,2274,15346,2663,15338,3099,15326,3393,15309,3679,15288,3980,15260,4183,15226,4325,15185,4437,15136,4517,15080,4570,15018,4591,14950,4581,14877,4545,14800,4485,14720,4411,14638,4325,14556,4231,14475,4136,14395,3988,14297,3803,14145,3628,13999,3465,13861,3314,13729,3177,15360,263,15360,264,15360,272,15360,325,15359,407,15358,548,15356,780,15352,1144,15347,1580,15339,2099,15328,2425,15312,2795,15292,3133,15264,3329,15232,3517,15191,3689,15143,3819,15088,3923,15025,3978,14956,3999,14882,3979,14804,3931,14722,3855,14639,3756,14554,3645,14470,3529,14388,3409,14279,3289,14124,3173,13975,3055,13834,2848,13701,2658,15360,49,15360,49,15360,52,15360,75,15359,111,15358,201,15356,283,15353,519,15348,726,15340,1045,15329,1415,15314,1795,15295,2173,15269,2410,15237,2649,15197,2866,15150,3054,15095,3140,15032,3196,14963,3228,14888,3236,14808,3224,14725,3191,14639,3146,14553,3088,14466,2976,14382,2836,14262,2692,14103,2549,13952,2409,13808,2278,13674,2154,15360,4,15360,4,15360,4,15360,13,15359,33,15358,59,15357,112,15353,199,15348,302,15341,456,15331,628,15316,827,15297,1082,15272,1332,15241,1601,15202,1851,15156,2069,15101,2172,15039,2256,14970,2314,14894,2348,14813,2358,14728,2344,14640,2311,14551,2263,14463,2203,14376,2133,14247,2059,14084,1915,13930,1761,13784,1609,13648,1464,15360,0,15360,0,15360,0,15360,3,15359,18,15358,26,15357,53,15354,80,15348,97,15341,165,15332,238,15318,326,15299,427,15275,529,15245,654,15207,771,15161,885,15108,994,15046,1089,14976,1170,14900,1229,14817,1266,14731,1284,14641,1282,14550,1260,14460,1223,14370,1174,14232,1116,14066,1050,13909,981,13761,910,13623,839]);let lut=null;function getDFGLUT(){return lut===null&&(lut=new DataTexture(DATA,32,32,RGFormat,HalfFloatType),lut.minFilter=LinearFilter,lut.magFilter=LinearFilter,lut.wrapS=ClampToEdgeWrapping,lut.wrapT=ClampToEdgeWrapping,lut.generateMipmaps=!1,lut.needsUpdate=!0),lut}class WebGLRenderer{constructor(_={}){const{canvas:J=createCanvasElement(),context:Z=null,depth:Q=!0,stencil:ee=!1,alpha:te=!1,antialias:ne=!1,premultipliedAlpha:ie=!0,preserveDrawingBuffer:re=!1,powerPreference:oe="default",failIfMajorPerformanceCaveat:se=!1,reversedDepthBuffer:ae=!1}=_;this.isWebGLRenderer=!0;let le;if(Z!==null){if(typeof WebGLRenderingContext<"u"&&Z instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");le=Z.getContextAttributes().alpha}else le=te;const ue=new Set([RGBAIntegerFormat,RGIntegerFormat,RedIntegerFormat]),de=new Set([UnsignedByteType,UnsignedIntType,UnsignedShortType,UnsignedInt248Type,UnsignedShort4444Type,UnsignedShort5551Type]),pe=new Uint32Array(4),fe=new Int32Array(4);let _e=null,ye=null;const be=[],Ae=[];this.domElement=J,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const Ce=this;let Ee=!1;this._outputColorSpace=SRGBColorSpace;let Re=0,Te=0,Me=null,Ne=-1,Le=null;const Ie=new Vector4,Ge=new Vector4;let He=null;const Be=new Color(0);let ze=0,Fe=J.width,$e=J.height,Xe=1,je=null,qe=null;const Ze=new Vector4(0,0,Fe,$e),st=new Vector4(0,0,Fe,$e);let St=!1;const it=new Frustum;let lt=!1,ft=!1;const kt=new Matrix4,Ht=new Vector3,Wt=new Vector4,ni={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let jt=!1;function pt(){return Me===null?Xe:1}let Ke=Z;function Mt(Ve,nt){return J.getContext(Ve,nt)}try{const Ve={alpha:!0,depth:Q,stencil:ee,antialias:ne,premultipliedAlpha:ie,preserveDrawingBuffer:re,powerPreference:oe,failIfMajorPerformanceCaveat:se};if("setAttribute"in J&&J.setAttribute("data-engine",`three.js r${REVISION}`),J.addEventListener("webglcontextlost",Kt,!1),J.addEventListener("webglcontextrestored",Vt,!1),J.addEventListener("webglcontextcreationerror",di,!1),Ke===null){const nt="webgl2";if(Ke=Mt(nt,Ve),Ke===null)throw Mt(nt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Ve){throw Ve("WebGLRenderer: "+Ve.message),Ve}let Bt,Lt,Ft,ai,Qt,hi,Qe,Ye,_t,dt,yt,Nt,fi,Zt,Ut,qt,Rt,Pt,vt,tt,et,ei,rt,ti;function zt(){Bt=new WebGLExtensions(Ke),Bt.init(),ei=new WebGLUtils(Ke,Bt),Lt=new WebGLCapabilities(Ke,Bt,_,ei),Ft=new WebGLState(Ke,Bt),Lt.reversedDepthBuffer&&ae&&Ft.buffers.depth.setReversed(!0),ai=new WebGLInfo(Ke),Qt=new WebGLProperties,hi=new WebGLTextures(Ke,Bt,Ft,Qt,Lt,ei,ai),Qe=new WebGLCubeMaps(Ce),Ye=new WebGLCubeUVMaps(Ce),_t=new WebGLAttributes(Ke),rt=new WebGLBindingStates(Ke,_t),dt=new WebGLGeometries(Ke,_t,ai,rt),yt=new WebGLObjects(Ke,dt,_t,ai),vt=new WebGLMorphtargets(Ke,Lt,hi),qt=new WebGLClipping(Qt),Nt=new WebGLPrograms(Ce,Qe,Ye,Bt,Lt,rt,qt),fi=new WebGLMaterials(Ce,Qt),Zt=new WebGLRenderLists,Ut=new WebGLRenderStates(Bt),Pt=new WebGLBackground(Ce,Qe,Ye,Ft,yt,le,ie),Rt=new WebGLShadowMap(Ce,yt,Lt),ti=new WebGLUniformsGroups(Ke,ai,Lt,Ft),tt=new WebGLBufferRenderer(Ke,Bt,ai),et=new WebGLIndexedBufferRenderer(Ke,Bt,ai),ai.programs=Nt.programs,Ce.capabilities=Lt,Ce.extensions=Bt,Ce.properties=Qt,Ce.renderLists=Zt,Ce.shadowMap=Rt,Ce.state=Ft,Ce.info=ai}zt();const ii=new WebXRManager(Ce,Ke);this.xr=ii,this.getContext=function(){return Ke},this.getContextAttributes=function(){return Ke.getContextAttributes()},this.forceContextLoss=function(){const Ve=Bt.get("WEBGL_lose_context");Ve&&Ve.loseContext()},this.forceContextRestore=function(){const Ve=Bt.get("WEBGL_lose_context");Ve&&Ve.restoreContext()},this.getPixelRatio=function(){return Xe},this.setPixelRatio=function(Ve){Ve!==void 0&&(Xe=Ve,this.setSize(Fe,$e,!1))},this.getSize=function(Ve){return Ve.set(Fe,$e)},this.setSize=function(Ve,nt,gt=!0){if(ii.isPresenting){warn("WebGLRenderer: Can't change size while VR device is presenting.");return}Fe=Ve,$e=nt,J.width=Math.floor(Ve*Xe),J.height=Math.floor(nt*Xe),gt===!0&&(J.style.width=Ve+"px",J.style.height=nt+"px"),this.setViewport(0,0,Ve,nt)},this.getDrawingBufferSize=function(Ve){return Ve.set(Fe*Xe,$e*Xe).floor()},this.setDrawingBufferSize=function(Ve,nt,gt){Fe=Ve,$e=nt,Xe=gt,J.width=Math.floor(Ve*gt),J.height=Math.floor(nt*gt),this.setViewport(0,0,Ve,nt)},this.getCurrentViewport=function(Ve){return Ve.copy(Ie)},this.getViewport=function(Ve){return Ve.copy(Ze)},this.setViewport=function(Ve,nt,gt,mt){Ve.isVector4?Ze.set(Ve.x,Ve.y,Ve.z,Ve.w):Ze.set(Ve,nt,gt,mt),Ft.viewport(Ie.copy(Ze).multiplyScalar(Xe).round())},this.getScissor=function(Ve){return Ve.copy(st)},this.setScissor=function(Ve,nt,gt,mt){Ve.isVector4?st.set(Ve.x,Ve.y,Ve.z,Ve.w):st.set(Ve,nt,gt,mt),Ft.scissor(Ge.copy(st).multiplyScalar(Xe).round())},this.getScissorTest=function(){return St},this.setScissorTest=function(Ve){Ft.setScissorTest(St=Ve)},this.setOpaqueSort=function(Ve){je=Ve},this.setTransparentSort=function(Ve){qe=Ve},this.getClearColor=function(Ve){return Ve.copy(Pt.getClearColor())},this.setClearColor=function(){Pt.setClearColor(...arguments)},this.getClearAlpha=function(){return Pt.getClearAlpha()},this.setClearAlpha=function(){Pt.setClearAlpha(...arguments)},this.clear=function(Ve=!0,nt=!0,gt=!0){let mt=0;if(Ve){let ut=!1;if(Me!==null){const ri=Me.texture.format;ut=ue.has(ri)}if(ut){const ri=Me.texture.type,ci=de.has(ri),ui=Pt.getClearColor(),oi=Pt.getClearAlpha(),vi=ui.r,Ti=ui.g,bi=ui.b;ci?(pe[0]=vi,pe[1]=Ti,pe[2]=bi,pe[3]=oi,Ke.clearBufferuiv(Ke.COLOR,0,pe)):(fe[0]=vi,fe[1]=Ti,fe[2]=bi,fe[3]=oi,Ke.clearBufferiv(Ke.COLOR,0,fe))}else mt|=Ke.COLOR_BUFFER_BIT}nt&&(mt|=Ke.DEPTH_BUFFER_BIT),gt&&(mt|=Ke.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Ke.clear(mt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){J.removeEventListener("webglcontextlost",Kt,!1),J.removeEventListener("webglcontextrestored",Vt,!1),J.removeEventListener("webglcontextcreationerror",di,!1),Pt.dispose(),Zt.dispose(),Ut.dispose(),Qt.dispose(),Qe.dispose(),Ye.dispose(),yt.dispose(),rt.dispose(),ti.dispose(),Nt.dispose(),ii.dispose(),ii.removeEventListener("sessionstart",Ln),ii.removeEventListener("sessionend",wr),_n.stop()};function Kt(Ve){Ve.preventDefault(),log("WebGLRenderer: Context Lost."),Ee=!0}function Vt(){log("WebGLRenderer: Context Restored."),Ee=!1;const Ve=ai.autoReset,nt=Rt.enabled,gt=Rt.autoUpdate,mt=Rt.needsUpdate,ut=Rt.type;zt(),ai.autoReset=Ve,Rt.enabled=nt,Rt.autoUpdate=gt,Rt.needsUpdate=mt,Rt.type=ut}function di(Ve){error("WebGLRenderer: A WebGL context could not be created. Reason: ",Ve.statusMessage)}function pi(Ve){const nt=Ve.target;nt.removeEventListener("dispose",pi),Di(nt)}function Di(Ve){Si(Ve),Qt.remove(Ve)}function Si(Ve){const nt=Qt.get(Ve).programs;nt!==void 0&&(nt.forEach(function(gt){Nt.releaseProgram(gt)}),Ve.isShaderMaterial&&Nt.releaseShaderCache(Ve))}this.renderBufferDirect=function(Ve,nt,gt,mt,ut,ri){nt===null&&(nt=ni);const ci=ut.isMesh&&ut.matrixWorld.determinant()<0,ui=ra(Ve,nt,gt,mt,ut);Ft.setMaterial(mt,ci);let oi=gt.index,vi=1;if(mt.wireframe===!0){if(oi=dt.getWireframeAttribute(gt),oi===void 0)return;vi=2}const Ti=gt.drawRange,bi=gt.attributes.position;let Ii=Ti.start*vi,Ji=(Ti.start+Ti.count)*vi;ri!==null&&(Ii=Math.max(Ii,ri.start*vi),Ji=Math.min(Ji,(ri.start+ri.count)*vi)),oi!==null?(Ii=Math.max(Ii,0),Ji=Math.min(Ji,oi.count)):bi!=null&&(Ii=Math.max(Ii,0),Ji=Math.min(Ji,bi.count));const Ki=Ji-Ii;if(Ki<0||Ki===1/0)return;rt.setup(ut,mt,ui,gt,oi);let Hi,on=tt;if(oi!==null&&(Hi=_t.get(oi),on=et,on.setIndex(Hi)),ut.isMesh)mt.wireframe===!0?(Ft.setLineWidth(mt.wireframeLinewidth*pt()),on.setMode(Ke.LINES)):on.setMode(Ke.TRIANGLES);else if(ut.isLine){let Mi=mt.linewidth;Mi===void 0&&(Mi=1),Ft.setLineWidth(Mi*pt()),ut.isLineSegments?on.setMode(Ke.LINES):ut.isLineLoop?on.setMode(Ke.LINE_LOOP):on.setMode(Ke.LINE_STRIP)}else ut.isPoints?on.setMode(Ke.POINTS):ut.isSprite&&on.setMode(Ke.TRIANGLES);if(ut.isBatchedMesh)if(ut._multiDrawInstances!==null)warnOnce("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),on.renderMultiDrawInstances(ut._multiDrawStarts,ut._multiDrawCounts,ut._multiDrawCount,ut._multiDrawInstances);else if(Bt.get("WEBGL_multi_draw"))on.renderMultiDraw(ut._multiDrawStarts,ut._multiDrawCounts,ut._multiDrawCount);else{const Mi=ut._multiDrawStarts,pn=ut._multiDrawCounts,Yi=ut._multiDrawCount,Wn=oi?_t.get(oi).bytesPerElement:1,aa=Qt.get(mt).currentProgram.getUniforms();for(let yn=0;yn<Yi;yn++)aa.setValue(Ke,"_gl_DrawID",yn),on.render(Mi[yn]/Wn,pn[yn])}else if(ut.isInstancedMesh)on.renderInstances(Ii,Ki,ut.count);else if(gt.isInstancedBufferGeometry){const Mi=gt._maxInstanceCount!==void 0?gt._maxInstanceCount:1/0,pn=Math.min(gt.instanceCount,Mi);on.renderInstances(Ii,Ki,pn)}else on.render(Ii,Ki)};function Ui(Ve,nt,gt){Ve.transparent===!0&&Ve.side===DoubleSide&&Ve.forceSinglePass===!1?(Ve.side=BackSide,Ve.needsUpdate=!0,On(Ve,nt,gt),Ve.side=FrontSide,Ve.needsUpdate=!0,On(Ve,nt,gt),Ve.side=DoubleSide):On(Ve,nt,gt)}this.compile=function(Ve,nt,gt=null){gt===null&&(gt=Ve),ye=Ut.get(gt),ye.init(nt),Ae.push(ye),gt.traverseVisible(function(ut){ut.isLight&&ut.layers.test(nt.layers)&&(ye.pushLight(ut),ut.castShadow&&ye.pushShadow(ut))}),Ve!==gt&&Ve.traverseVisible(function(ut){ut.isLight&&ut.layers.test(nt.layers)&&(ye.pushLight(ut),ut.castShadow&&ye.pushShadow(ut))}),ye.setupLights();const mt=new Set;return Ve.traverse(function(ut){if(!(ut.isMesh||ut.isPoints||ut.isLine||ut.isSprite))return;const ri=ut.material;if(ri)if(Array.isArray(ri))for(let ci=0;ci<ri.length;ci++){const ui=ri[ci];Ui(ui,gt,ut),mt.add(ui)}else Ui(ri,gt,ut),mt.add(ri)}),ye=Ae.pop(),mt},this.compileAsync=function(Ve,nt,gt=null){const mt=this.compile(Ve,nt,gt);return new Promise(ut=>{function ri(){if(mt.forEach(function(ci){Qt.get(ci).currentProgram.isReady()&&mt.delete(ci)}),mt.size===0){ut(Ve);return}setTimeout(ri,10)}Bt.get("KHR_parallel_shader_compile")!==null?ri():setTimeout(ri,10)})};let vn=null;function Tr(Ve){vn&&vn(Ve)}function Ln(){_n.stop()}function wr(){_n.start()}const _n=new WebGLAnimation;_n.setAnimationLoop(Tr),typeof self<"u"&&_n.setContext(self),this.setAnimationLoop=function(Ve){vn=Ve,ii.setAnimationLoop(Ve),Ve===null?_n.stop():_n.start()},ii.addEventListener("sessionstart",Ln),ii.addEventListener("sessionend",wr),this.render=function(Ve,nt){if(nt!==void 0&&nt.isCamera!==!0){error("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(Ee===!0)return;if(Ve.matrixWorldAutoUpdate===!0&&Ve.updateMatrixWorld(),nt.parent===null&&nt.matrixWorldAutoUpdate===!0&&nt.updateMatrixWorld(),ii.enabled===!0&&ii.isPresenting===!0&&(ii.cameraAutoUpdate===!0&&ii.updateCamera(nt),nt=ii.getCamera()),Ve.isScene===!0&&Ve.onBeforeRender(Ce,Ve,nt,Me),ye=Ut.get(Ve,Ae.length),ye.init(nt),Ae.push(ye),kt.multiplyMatrices(nt.projectionMatrix,nt.matrixWorldInverse),it.setFromProjectionMatrix(kt,WebGLCoordinateSystem,nt.reversedDepth),ft=this.localClippingEnabled,lt=qt.init(this.clippingPlanes,ft),_e=Zt.get(Ve,be.length),_e.init(),be.push(_e),ii.enabled===!0&&ii.isPresenting===!0){const ri=Ce.xr.getDepthSensingMesh();ri!==null&&Ir(ri,nt,-1/0,Ce.sortObjects)}Ir(Ve,nt,0,Ce.sortObjects),_e.finish(),Ce.sortObjects===!0&&_e.sort(je,qe),jt=ii.enabled===!1||ii.isPresenting===!1||ii.hasDepthSensing()===!1,jt&&Pt.addToRenderList(_e,Ve),this.info.render.frame++,lt===!0&&qt.beginShadows();const gt=ye.state.shadowsArray;Rt.render(gt,Ve,nt),lt===!0&&qt.endShadows(),this.info.autoReset===!0&&this.info.reset();const mt=_e.opaque,ut=_e.transmissive;if(ye.setupLights(),nt.isArrayCamera){const ri=nt.cameras;if(ut.length>0)for(let ci=0,ui=ri.length;ci<ui;ci++){const oi=ri[ci];$n(mt,ut,Ve,oi)}jt&&Pt.render(Ve);for(let ci=0,ui=ri.length;ci<ui;ci++){const oi=ri[ci];Bn(_e,Ve,oi,oi.viewport)}}else ut.length>0&&$n(mt,ut,Ve,nt),jt&&Pt.render(Ve),Bn(_e,Ve,nt);Me!==null&&Te===0&&(hi.updateMultisampleRenderTarget(Me),hi.updateRenderTargetMipmap(Me)),Ve.isScene===!0&&Ve.onAfterRender(Ce,Ve,nt),rt.resetDefaultState(),Ne=-1,Le=null,Ae.pop(),Ae.length>0?(ye=Ae[Ae.length-1],lt===!0&&qt.setGlobalState(Ce.clippingPlanes,ye.state.camera)):ye=null,be.pop(),be.length>0?_e=be[be.length-1]:_e=null};function Ir(Ve,nt,gt,mt){if(Ve.visible===!1)return;if(Ve.layers.test(nt.layers)){if(Ve.isGroup)gt=Ve.renderOrder;else if(Ve.isLOD)Ve.autoUpdate===!0&&Ve.update(nt);else if(Ve.isLight)ye.pushLight(Ve),Ve.castShadow&&ye.pushShadow(Ve);else if(Ve.isSprite){if(!Ve.frustumCulled||it.intersectsSprite(Ve)){mt&&Wt.setFromMatrixPosition(Ve.matrixWorld).applyMatrix4(kt);const ci=yt.update(Ve),ui=Ve.material;ui.visible&&_e.push(Ve,ci,ui,gt,Wt.z,null)}}else if((Ve.isMesh||Ve.isLine||Ve.isPoints)&&(!Ve.frustumCulled||it.intersectsObject(Ve))){const ci=yt.update(Ve),ui=Ve.material;if(mt&&(Ve.boundingSphere!==void 0?(Ve.boundingSphere===null&&Ve.computeBoundingSphere(),Wt.copy(Ve.boundingSphere.center)):(ci.boundingSphere===null&&ci.computeBoundingSphere(),Wt.copy(ci.boundingSphere.center)),Wt.applyMatrix4(Ve.matrixWorld).applyMatrix4(kt)),Array.isArray(ui)){const oi=ci.groups;for(let vi=0,Ti=oi.length;vi<Ti;vi++){const bi=oi[vi],Ii=ui[bi.materialIndex];Ii&&Ii.visible&&_e.push(Ve,ci,Ii,gt,Wt.z,bi)}}else ui.visible&&_e.push(Ve,ci,ui,gt,Wt.z,null)}}const ri=Ve.children;for(let ci=0,ui=ri.length;ci<ui;ci++)Ir(ri[ci],nt,gt,mt)}function Bn(Ve,nt,gt,mt){const{opaque:ut,transmissive:ri,transparent:ci}=Ve;ye.setupLightsView(gt),lt===!0&&qt.setGlobalState(Ce.clippingPlanes,gt),mt&&Ft.viewport(Ie.copy(mt)),ut.length>0&&Mn(ut,nt,gt),ri.length>0&&Mn(ri,nt,gt),ci.length>0&&Mn(ci,nt,gt),Ft.buffers.depth.setTest(!0),Ft.buffers.depth.setMask(!0),Ft.buffers.color.setMask(!0),Ft.setPolygonOffset(!1)}function $n(Ve,nt,gt,mt){if((gt.isScene===!0?gt.overrideMaterial:null)!==null)return;ye.state.transmissionRenderTarget[mt.id]===void 0&&(ye.state.transmissionRenderTarget[mt.id]=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:Bt.has("EXT_color_buffer_half_float")||Bt.has("EXT_color_buffer_float")?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:4,stencilBuffer:ee,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ColorManagement.workingColorSpace}));const ri=ye.state.transmissionRenderTarget[mt.id],ci=mt.viewport||Ie;ri.setSize(ci.z*Ce.transmissionResolutionScale,ci.w*Ce.transmissionResolutionScale);const ui=Ce.getRenderTarget(),oi=Ce.getActiveCubeFace(),vi=Ce.getActiveMipmapLevel();Ce.setRenderTarget(ri),Ce.getClearColor(Be),ze=Ce.getClearAlpha(),ze<1&&Ce.setClearColor(16777215,.5),Ce.clear(),jt&&Pt.render(gt);const Ti=Ce.toneMapping;Ce.toneMapping=NoToneMapping;const bi=mt.viewport;if(mt.viewport!==void 0&&(mt.viewport=void 0),ye.setupLightsView(mt),lt===!0&&qt.setGlobalState(Ce.clippingPlanes,mt),Mn(Ve,gt,mt),hi.updateMultisampleRenderTarget(ri),hi.updateRenderTargetMipmap(ri),Bt.has("WEBGL_multisampled_render_to_texture")===!1){let Ii=!1;for(let Ji=0,Ki=nt.length;Ji<Ki;Ji++){const Hi=nt[Ji],{object:on,geometry:Mi,material:pn,group:Yi}=Hi;if(pn.side===DoubleSide&&on.layers.test(mt.layers)){const Wn=pn.side;pn.side=BackSide,pn.needsUpdate=!0,ki(on,gt,mt,Mi,pn,Yi),pn.side=Wn,pn.needsUpdate=!0,Ii=!0}}Ii===!0&&(hi.updateMultisampleRenderTarget(ri),hi.updateRenderTargetMipmap(ri))}Ce.setRenderTarget(ui,oi,vi),Ce.setClearColor(Be,ze),bi!==void 0&&(mt.viewport=bi),Ce.toneMapping=Ti}function Mn(Ve,nt,gt){const mt=nt.isScene===!0?nt.overrideMaterial:null;for(let ut=0,ri=Ve.length;ut<ri;ut++){const ci=Ve[ut],{object:ui,geometry:oi,group:vi}=ci;let Ti=ci.material;Ti.allowOverride===!0&&mt!==null&&(Ti=mt),ui.layers.test(gt.layers)&&ki(ui,nt,gt,oi,Ti,vi)}}function ki(Ve,nt,gt,mt,ut,ri){Ve.onBeforeRender(Ce,nt,gt,mt,ut,ri),Ve.modelViewMatrix.multiplyMatrices(gt.matrixWorldInverse,Ve.matrixWorld),Ve.normalMatrix.getNormalMatrix(Ve.modelViewMatrix),ut.onBeforeRender(Ce,nt,gt,mt,Ve,ri),ut.transparent===!0&&ut.side===DoubleSide&&ut.forceSinglePass===!1?(ut.side=BackSide,ut.needsUpdate=!0,Ce.renderBufferDirect(gt,nt,mt,ut,Ve,ri),ut.side=FrontSide,ut.needsUpdate=!0,Ce.renderBufferDirect(gt,nt,mt,ut,Ve,ri),ut.side=DoubleSide):Ce.renderBufferDirect(gt,nt,mt,ut,Ve,ri),Ve.onAfterRender(Ce,nt,gt,mt,ut,ri)}function On(Ve,nt,gt){nt.isScene!==!0&&(nt=ni);const mt=Qt.get(Ve),ut=ye.state.lights,ri=ye.state.shadowsArray,ci=ut.state.version,ui=Nt.getParameters(Ve,ut.state,ri,nt,gt),oi=Nt.getProgramCacheKey(ui);let vi=mt.programs;mt.environment=Ve.isMeshStandardMaterial?nt.environment:null,mt.fog=nt.fog,mt.envMap=(Ve.isMeshStandardMaterial?Ye:Qe).get(Ve.envMap||mt.environment),mt.envMapRotation=mt.environment!==null&&Ve.envMap===null?nt.environmentRotation:Ve.envMapRotation,vi===void 0&&(Ve.addEventListener("dispose",pi),vi=new Map,mt.programs=vi);let Ti=vi.get(oi);if(Ti!==void 0){if(mt.currentProgram===Ti&&mt.lightsStateVersion===ci)return ks(Ve,ui),Ti}else ui.uniforms=Nt.getUniforms(Ve),Ve.onBeforeCompile(ui,Ce),Ti=Nt.acquireProgram(ui,oi),vi.set(oi,Ti),mt.uniforms=ui.uniforms;const bi=mt.uniforms;return(!Ve.isShaderMaterial&&!Ve.isRawShaderMaterial||Ve.clipping===!0)&&(bi.clippingPlanes=qt.uniform),ks(Ve,ui),mt.needsLights=sa(Ve),mt.lightsStateVersion=ci,mt.needsLights&&(bi.ambientLightColor.value=ut.state.ambient,bi.lightProbe.value=ut.state.probe,bi.directionalLights.value=ut.state.directional,bi.directionalLightShadows.value=ut.state.directionalShadow,bi.spotLights.value=ut.state.spot,bi.spotLightShadows.value=ut.state.spotShadow,bi.rectAreaLights.value=ut.state.rectArea,bi.ltc_1.value=ut.state.rectAreaLTC1,bi.ltc_2.value=ut.state.rectAreaLTC2,bi.pointLights.value=ut.state.point,bi.pointLightShadows.value=ut.state.pointShadow,bi.hemisphereLights.value=ut.state.hemi,bi.directionalShadowMap.value=ut.state.directionalShadowMap,bi.directionalShadowMatrix.value=ut.state.directionalShadowMatrix,bi.spotShadowMap.value=ut.state.spotShadowMap,bi.spotLightMatrix.value=ut.state.spotLightMatrix,bi.spotLightMap.value=ut.state.spotLightMap,bi.pointShadowMap.value=ut.state.pointShadowMap,bi.pointShadowMatrix.value=ut.state.pointShadowMatrix),mt.currentProgram=Ti,mt.uniformsList=null,Ti}function Ur(Ve){if(Ve.uniformsList===null){const nt=Ve.currentProgram.getUniforms();Ve.uniformsList=WebGLUniforms.seqWithValue(nt.seq,Ve.uniforms)}return Ve.uniformsList}function ks(Ve,nt){const gt=Qt.get(Ve);gt.outputColorSpace=nt.outputColorSpace,gt.batching=nt.batching,gt.batchingColor=nt.batchingColor,gt.instancing=nt.instancing,gt.instancingColor=nt.instancingColor,gt.instancingMorph=nt.instancingMorph,gt.skinning=nt.skinning,gt.morphTargets=nt.morphTargets,gt.morphNormals=nt.morphNormals,gt.morphColors=nt.morphColors,gt.morphTargetsCount=nt.morphTargetsCount,gt.numClippingPlanes=nt.numClippingPlanes,gt.numIntersection=nt.numClipIntersection,gt.vertexAlphas=nt.vertexAlphas,gt.vertexTangents=nt.vertexTangents,gt.toneMapping=nt.toneMapping}function ra(Ve,nt,gt,mt,ut){nt.isScene!==!0&&(nt=ni),hi.resetTextureUnits();const ri=nt.fog,ci=mt.isMeshStandardMaterial?nt.environment:null,ui=Me===null?Ce.outputColorSpace:Me.isXRRenderTarget===!0?Me.texture.colorSpace:LinearSRGBColorSpace,oi=(mt.isMeshStandardMaterial?Ye:Qe).get(mt.envMap||ci),vi=mt.vertexColors===!0&&!!gt.attributes.color&&gt.attributes.color.itemSize===4,Ti=!!gt.attributes.tangent&&(!!mt.normalMap||mt.anisotropy>0),bi=!!gt.morphAttributes.position,Ii=!!gt.morphAttributes.normal,Ji=!!gt.morphAttributes.color;let Ki=NoToneMapping;mt.toneMapped&&(Me===null||Me.isXRRenderTarget===!0)&&(Ki=Ce.toneMapping);const Hi=gt.morphAttributes.position||gt.morphAttributes.normal||gt.morphAttributes.color,on=Hi!==void 0?Hi.length:0,Mi=Qt.get(mt),pn=ye.state.lights;if(lt===!0&&(ft===!0||Ve!==Le)){const tr=Ve===Le&&mt.id===Ne;qt.setState(mt,Ve,tr)}let Yi=!1;mt.version===Mi.__version?(Mi.needsLights&&Mi.lightsStateVersion!==pn.state.version||Mi.outputColorSpace!==ui||ut.isBatchedMesh&&Mi.batching===!1||!ut.isBatchedMesh&&Mi.batching===!0||ut.isBatchedMesh&&Mi.batchingColor===!0&&ut.colorTexture===null||ut.isBatchedMesh&&Mi.batchingColor===!1&&ut.colorTexture!==null||ut.isInstancedMesh&&Mi.instancing===!1||!ut.isInstancedMesh&&Mi.instancing===!0||ut.isSkinnedMesh&&Mi.skinning===!1||!ut.isSkinnedMesh&&Mi.skinning===!0||ut.isInstancedMesh&&Mi.instancingColor===!0&&ut.instanceColor===null||ut.isInstancedMesh&&Mi.instancingColor===!1&&ut.instanceColor!==null||ut.isInstancedMesh&&Mi.instancingMorph===!0&&ut.morphTexture===null||ut.isInstancedMesh&&Mi.instancingMorph===!1&&ut.morphTexture!==null||Mi.envMap!==oi||mt.fog===!0&&Mi.fog!==ri||Mi.numClippingPlanes!==void 0&&(Mi.numClippingPlanes!==qt.numPlanes||Mi.numIntersection!==qt.numIntersection)||Mi.vertexAlphas!==vi||Mi.vertexTangents!==Ti||Mi.morphTargets!==bi||Mi.morphNormals!==Ii||Mi.morphColors!==Ji||Mi.toneMapping!==Ki||Mi.morphTargetsCount!==on)&&(Yi=!0):(Yi=!0,Mi.__version=mt.version);let Wn=Mi.currentProgram;Yi===!0&&(Wn=On(mt,nt,ut));let aa=!1,yn=!1,Is=!1;const bn=Wn.getUniforms(),Qn=Mi.uniforms;if(Ft.useProgram(Wn.program)&&(aa=!0,yn=!0,Is=!0),mt.id!==Ne&&(Ne=mt.id,yn=!0),aa||Le!==Ve){Ft.buffers.depth.getReversed()&&Ve.reversedDepth!==!0&&(Ve._reversedDepth=!0,Ve.updateProjectionMatrix()),bn.setValue(Ke,"projectionMatrix",Ve.projectionMatrix),bn.setValue(Ke,"viewMatrix",Ve.matrixWorldInverse);const kn=bn.map.cameraPosition;kn!==void 0&&kn.setValue(Ke,Ht.setFromMatrixPosition(Ve.matrixWorld)),Lt.logarithmicDepthBuffer&&bn.setValue(Ke,"logDepthBufFC",2/(Math.log(Ve.far+1)/Math.LN2)),(mt.isMeshPhongMaterial||mt.isMeshToonMaterial||mt.isMeshLambertMaterial||mt.isMeshBasicMaterial||mt.isMeshStandardMaterial||mt.isShaderMaterial)&&bn.setValue(Ke,"isOrthographic",Ve.isOrthographicCamera===!0),Le!==Ve&&(Le=Ve,yn=!0,Is=!0)}if(ut.isSkinnedMesh){bn.setOptional(Ke,ut,"bindMatrix"),bn.setOptional(Ke,ut,"bindMatrixInverse");const tr=ut.skeleton;tr&&(tr.boneTexture===null&&tr.computeBoneTexture(),bn.setValue(Ke,"boneTexture",tr.boneTexture,hi))}ut.isBatchedMesh&&(bn.setOptional(Ke,ut,"batchingTexture"),bn.setValue(Ke,"batchingTexture",ut._matricesTexture,hi),bn.setOptional(Ke,ut,"batchingIdTexture"),bn.setValue(Ke,"batchingIdTexture",ut._indirectTexture,hi),bn.setOptional(Ke,ut,"batchingColorTexture"),ut._colorsTexture!==null&&bn.setValue(Ke,"batchingColorTexture",ut._colorsTexture,hi));const er=gt.morphAttributes;if((er.position!==void 0||er.normal!==void 0||er.color!==void 0)&&vt.update(ut,gt,Wn),(yn||Mi.receiveShadow!==ut.receiveShadow)&&(Mi.receiveShadow=ut.receiveShadow,bn.setValue(Ke,"receiveShadow",ut.receiveShadow)),mt.isMeshGouraudMaterial&&mt.envMap!==null&&(Qn.envMap.value=oi,Qn.flipEnvMap.value=oi.isCubeTexture&&oi.isRenderTargetTexture===!1?-1:1),mt.isMeshStandardMaterial&&mt.envMap===null&&nt.environment!==null&&(Qn.envMapIntensity.value=nt.environmentIntensity),Qn.dfgLUT!==void 0&&(Qn.dfgLUT.value=getDFGLUT()),yn&&(bn.setValue(Ke,"toneMappingExposure",Ce.toneMappingExposure),Mi.needsLights&&Al(Qn,Is),ri&&mt.fog===!0&&fi.refreshFogUniforms(Qn,ri),fi.refreshMaterialUniforms(Qn,mt,Xe,$e,ye.state.transmissionRenderTarget[Ve.id]),WebGLUniforms.upload(Ke,Ur(Mi),Qn,hi)),mt.isShaderMaterial&&mt.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(Ke,Ur(Mi),Qn,hi),mt.uniformsNeedUpdate=!1),mt.isSpriteMaterial&&bn.setValue(Ke,"center",ut.center),bn.setValue(Ke,"modelViewMatrix",ut.modelViewMatrix),bn.setValue(Ke,"normalMatrix",ut.normalMatrix),bn.setValue(Ke,"modelMatrix",ut.matrixWorld),mt.isShaderMaterial||mt.isRawShaderMaterial){const tr=mt.uniformsGroups;for(let kn=0,Cs=tr.length;kn<Cs;kn++){const ms=tr[kn];ti.update(ms,Wn),ti.bind(ms,Wn)}}return Wn}function Al(Ve,nt){Ve.ambientLightColor.needsUpdate=nt,Ve.lightProbe.needsUpdate=nt,Ve.directionalLights.needsUpdate=nt,Ve.directionalLightShadows.needsUpdate=nt,Ve.pointLights.needsUpdate=nt,Ve.pointLightShadows.needsUpdate=nt,Ve.spotLights.needsUpdate=nt,Ve.spotLightShadows.needsUpdate=nt,Ve.rectAreaLights.needsUpdate=nt,Ve.hemisphereLights.needsUpdate=nt}function sa(Ve){return Ve.isMeshLambertMaterial||Ve.isMeshToonMaterial||Ve.isMeshPhongMaterial||Ve.isMeshStandardMaterial||Ve.isShadowMaterial||Ve.isShaderMaterial&&Ve.lights===!0}this.getActiveCubeFace=function(){return Re},this.getActiveMipmapLevel=function(){return Te},this.getRenderTarget=function(){return Me},this.setRenderTargetTextures=function(Ve,nt,gt){const mt=Qt.get(Ve);mt.__autoAllocateDepthBuffer=Ve.resolveDepthBuffer===!1,mt.__autoAllocateDepthBuffer===!1&&(mt.__useRenderToTexture=!1),Qt.get(Ve.texture).__webglTexture=nt,Qt.get(Ve.depthTexture).__webglTexture=mt.__autoAllocateDepthBuffer?void 0:gt,mt.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(Ve,nt){const gt=Qt.get(Ve);gt.__webglFramebuffer=nt,gt.__useDefaultFramebuffer=nt===void 0};const ct=Ke.createFramebuffer();this.setRenderTarget=function(Ve,nt=0,gt=0){Me=Ve,Re=nt,Te=gt;let mt=!0,ut=null,ri=!1,ci=!1;if(Ve){const oi=Qt.get(Ve);if(oi.__useDefaultFramebuffer!==void 0)Ft.bindFramebuffer(Ke.FRAMEBUFFER,null),mt=!1;else if(oi.__webglFramebuffer===void 0)hi.setupRenderTarget(Ve);else if(oi.__hasExternalTextures)hi.rebindTextures(Ve,Qt.get(Ve.texture).__webglTexture,Qt.get(Ve.depthTexture).__webglTexture);else if(Ve.depthBuffer){const bi=Ve.depthTexture;if(oi.__boundDepthTexture!==bi){if(bi!==null&&Qt.has(bi)&&(Ve.width!==bi.image.width||Ve.height!==bi.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");hi.setupDepthRenderbuffer(Ve)}}const vi=Ve.texture;(vi.isData3DTexture||vi.isDataArrayTexture||vi.isCompressedArrayTexture)&&(ci=!0);const Ti=Qt.get(Ve).__webglFramebuffer;Ve.isWebGLCubeRenderTarget?(Array.isArray(Ti[nt])?ut=Ti[nt][gt]:ut=Ti[nt],ri=!0):Ve.samples>0&&hi.useMultisampledRTT(Ve)===!1?ut=Qt.get(Ve).__webglMultisampledFramebuffer:Array.isArray(Ti)?ut=Ti[gt]:ut=Ti,Ie.copy(Ve.viewport),Ge.copy(Ve.scissor),He=Ve.scissorTest}else Ie.copy(Ze).multiplyScalar(Xe).floor(),Ge.copy(st).multiplyScalar(Xe).floor(),He=St;if(gt!==0&&(ut=ct),Ft.bindFramebuffer(Ke.FRAMEBUFFER,ut)&&mt&&Ft.drawBuffers(Ve,ut),Ft.viewport(Ie),Ft.scissor(Ge),Ft.setScissorTest(He),ri){const oi=Qt.get(Ve.texture);Ke.framebufferTexture2D(Ke.FRAMEBUFFER,Ke.COLOR_ATTACHMENT0,Ke.TEXTURE_CUBE_MAP_POSITIVE_X+nt,oi.__webglTexture,gt)}else if(ci){const oi=nt;for(let vi=0;vi<Ve.textures.length;vi++){const Ti=Qt.get(Ve.textures[vi]);Ke.framebufferTextureLayer(Ke.FRAMEBUFFER,Ke.COLOR_ATTACHMENT0+vi,Ti.__webglTexture,gt,oi)}}else if(Ve!==null&&gt!==0){const oi=Qt.get(Ve.texture);Ke.framebufferTexture2D(Ke.FRAMEBUFFER,Ke.COLOR_ATTACHMENT0,Ke.TEXTURE_2D,oi.__webglTexture,gt)}Ne=-1},this.readRenderTargetPixels=function(Ve,nt,gt,mt,ut,ri,ci,ui=0){if(!(Ve&&Ve.isWebGLRenderTarget)){error("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let oi=Qt.get(Ve).__webglFramebuffer;if(Ve.isWebGLCubeRenderTarget&&ci!==void 0&&(oi=oi[ci]),oi){Ft.bindFramebuffer(Ke.FRAMEBUFFER,oi);try{const vi=Ve.textures[ui],Ti=vi.format,bi=vi.type;if(!Lt.textureFormatReadable(Ti)){error("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Lt.textureTypeReadable(bi)){error("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}nt>=0&&nt<=Ve.width-mt&&gt>=0&&gt<=Ve.height-ut&&(Ve.textures.length>1&&Ke.readBuffer(Ke.COLOR_ATTACHMENT0+ui),Ke.readPixels(nt,gt,mt,ut,ei.convert(Ti),ei.convert(bi),ri))}finally{const vi=Me!==null?Qt.get(Me).__webglFramebuffer:null;Ft.bindFramebuffer(Ke.FRAMEBUFFER,vi)}}},this.readRenderTargetPixelsAsync=async function(Ve,nt,gt,mt,ut,ri,ci,ui=0){if(!(Ve&&Ve.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let oi=Qt.get(Ve).__webglFramebuffer;if(Ve.isWebGLCubeRenderTarget&&ci!==void 0&&(oi=oi[ci]),oi)if(nt>=0&&nt<=Ve.width-mt&&gt>=0&&gt<=Ve.height-ut){Ft.bindFramebuffer(Ke.FRAMEBUFFER,oi);const vi=Ve.textures[ui],Ti=vi.format,bi=vi.type;if(!Lt.textureFormatReadable(Ti))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Lt.textureTypeReadable(bi))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Ii=Ke.createBuffer();Ke.bindBuffer(Ke.PIXEL_PACK_BUFFER,Ii),Ke.bufferData(Ke.PIXEL_PACK_BUFFER,ri.byteLength,Ke.STREAM_READ),Ve.textures.length>1&&Ke.readBuffer(Ke.COLOR_ATTACHMENT0+ui),Ke.readPixels(nt,gt,mt,ut,ei.convert(Ti),ei.convert(bi),0);const Ji=Me!==null?Qt.get(Me).__webglFramebuffer:null;Ft.bindFramebuffer(Ke.FRAMEBUFFER,Ji);const Ki=Ke.fenceSync(Ke.SYNC_GPU_COMMANDS_COMPLETE,0);return Ke.flush(),await probeAsync(Ke,Ki,4),Ke.bindBuffer(Ke.PIXEL_PACK_BUFFER,Ii),Ke.getBufferSubData(Ke.PIXEL_PACK_BUFFER,0,ri),Ke.deleteBuffer(Ii),Ke.deleteSync(Ki),ri}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(Ve,nt=null,gt=0){const mt=Math.pow(2,-gt),ut=Math.floor(Ve.image.width*mt),ri=Math.floor(Ve.image.height*mt),ci=nt!==null?nt.x:0,ui=nt!==null?nt.y:0;hi.setTexture2D(Ve,0),Ke.copyTexSubImage2D(Ke.TEXTURE_2D,gt,0,0,ci,ui,ut,ri),Ft.unbindTexture()};const Tt=Ke.createFramebuffer(),Xt=Ke.createFramebuffer();this.copyTextureToTexture=function(Ve,nt,gt=null,mt=null,ut=0,ri=null){ri===null&&(ut!==0?(warnOnce("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),ri=ut,ut=0):ri=0);let ci,ui,oi,vi,Ti,bi,Ii,Ji,Ki;const Hi=Ve.isCompressedTexture?Ve.mipmaps[ri]:Ve.image;if(gt!==null)ci=gt.max.x-gt.min.x,ui=gt.max.y-gt.min.y,oi=gt.isBox3?gt.max.z-gt.min.z:1,vi=gt.min.x,Ti=gt.min.y,bi=gt.isBox3?gt.min.z:0;else{const er=Math.pow(2,-ut);ci=Math.floor(Hi.width*er),ui=Math.floor(Hi.height*er),Ve.isDataArrayTexture?oi=Hi.depth:Ve.isData3DTexture?oi=Math.floor(Hi.depth*er):oi=1,vi=0,Ti=0,bi=0}mt!==null?(Ii=mt.x,Ji=mt.y,Ki=mt.z):(Ii=0,Ji=0,Ki=0);const on=ei.convert(nt.format),Mi=ei.convert(nt.type);let pn;nt.isData3DTexture?(hi.setTexture3D(nt,0),pn=Ke.TEXTURE_3D):nt.isDataArrayTexture||nt.isCompressedArrayTexture?(hi.setTexture2DArray(nt,0),pn=Ke.TEXTURE_2D_ARRAY):(hi.setTexture2D(nt,0),pn=Ke.TEXTURE_2D),Ke.pixelStorei(Ke.UNPACK_FLIP_Y_WEBGL,nt.flipY),Ke.pixelStorei(Ke.UNPACK_PREMULTIPLY_ALPHA_WEBGL,nt.premultiplyAlpha),Ke.pixelStorei(Ke.UNPACK_ALIGNMENT,nt.unpackAlignment);const Yi=Ke.getParameter(Ke.UNPACK_ROW_LENGTH),Wn=Ke.getParameter(Ke.UNPACK_IMAGE_HEIGHT),aa=Ke.getParameter(Ke.UNPACK_SKIP_PIXELS),yn=Ke.getParameter(Ke.UNPACK_SKIP_ROWS),Is=Ke.getParameter(Ke.UNPACK_SKIP_IMAGES);Ke.pixelStorei(Ke.UNPACK_ROW_LENGTH,Hi.width),Ke.pixelStorei(Ke.UNPACK_IMAGE_HEIGHT,Hi.height),Ke.pixelStorei(Ke.UNPACK_SKIP_PIXELS,vi),Ke.pixelStorei(Ke.UNPACK_SKIP_ROWS,Ti),Ke.pixelStorei(Ke.UNPACK_SKIP_IMAGES,bi);const bn=Ve.isDataArrayTexture||Ve.isData3DTexture,Qn=nt.isDataArrayTexture||nt.isData3DTexture;if(Ve.isDepthTexture){const er=Qt.get(Ve),tr=Qt.get(nt),kn=Qt.get(er.__renderTarget),Cs=Qt.get(tr.__renderTarget);Ft.bindFramebuffer(Ke.READ_FRAMEBUFFER,kn.__webglFramebuffer),Ft.bindFramebuffer(Ke.DRAW_FRAMEBUFFER,Cs.__webglFramebuffer);for(let ms=0;ms<oi;ms++)bn&&(Ke.framebufferTextureLayer(Ke.READ_FRAMEBUFFER,Ke.COLOR_ATTACHMENT0,Qt.get(Ve).__webglTexture,ut,bi+ms),Ke.framebufferTextureLayer(Ke.DRAW_FRAMEBUFFER,Ke.COLOR_ATTACHMENT0,Qt.get(nt).__webglTexture,ri,Ki+ms)),Ke.blitFramebuffer(vi,Ti,ci,ui,Ii,Ji,ci,ui,Ke.DEPTH_BUFFER_BIT,Ke.NEAREST);Ft.bindFramebuffer(Ke.READ_FRAMEBUFFER,null),Ft.bindFramebuffer(Ke.DRAW_FRAMEBUFFER,null)}else if(ut!==0||Ve.isRenderTargetTexture||Qt.has(Ve)){const er=Qt.get(Ve),tr=Qt.get(nt);Ft.bindFramebuffer(Ke.READ_FRAMEBUFFER,Tt),Ft.bindFramebuffer(Ke.DRAW_FRAMEBUFFER,Xt);for(let kn=0;kn<oi;kn++)bn?Ke.framebufferTextureLayer(Ke.READ_FRAMEBUFFER,Ke.COLOR_ATTACHMENT0,er.__webglTexture,ut,bi+kn):Ke.framebufferTexture2D(Ke.READ_FRAMEBUFFER,Ke.COLOR_ATTACHMENT0,Ke.TEXTURE_2D,er.__webglTexture,ut),Qn?Ke.framebufferTextureLayer(Ke.DRAW_FRAMEBUFFER,Ke.COLOR_ATTACHMENT0,tr.__webglTexture,ri,Ki+kn):Ke.framebufferTexture2D(Ke.DRAW_FRAMEBUFFER,Ke.COLOR_ATTACHMENT0,Ke.TEXTURE_2D,tr.__webglTexture,ri),ut!==0?Ke.blitFramebuffer(vi,Ti,ci,ui,Ii,Ji,ci,ui,Ke.COLOR_BUFFER_BIT,Ke.NEAREST):Qn?Ke.copyTexSubImage3D(pn,ri,Ii,Ji,Ki+kn,vi,Ti,ci,ui):Ke.copyTexSubImage2D(pn,ri,Ii,Ji,vi,Ti,ci,ui);Ft.bindFramebuffer(Ke.READ_FRAMEBUFFER,null),Ft.bindFramebuffer(Ke.DRAW_FRAMEBUFFER,null)}else Qn?Ve.isDataTexture||Ve.isData3DTexture?Ke.texSubImage3D(pn,ri,Ii,Ji,Ki,ci,ui,oi,on,Mi,Hi.data):nt.isCompressedArrayTexture?Ke.compressedTexSubImage3D(pn,ri,Ii,Ji,Ki,ci,ui,oi,on,Hi.data):Ke.texSubImage3D(pn,ri,Ii,Ji,Ki,ci,ui,oi,on,Mi,Hi):Ve.isDataTexture?Ke.texSubImage2D(Ke.TEXTURE_2D,ri,Ii,Ji,ci,ui,on,Mi,Hi.data):Ve.isCompressedTexture?Ke.compressedTexSubImage2D(Ke.TEXTURE_2D,ri,Ii,Ji,Hi.width,Hi.height,on,Hi.data):Ke.texSubImage2D(Ke.TEXTURE_2D,ri,Ii,Ji,ci,ui,on,Mi,Hi);Ke.pixelStorei(Ke.UNPACK_ROW_LENGTH,Yi),Ke.pixelStorei(Ke.UNPACK_IMAGE_HEIGHT,Wn),Ke.pixelStorei(Ke.UNPACK_SKIP_PIXELS,aa),Ke.pixelStorei(Ke.UNPACK_SKIP_ROWS,yn),Ke.pixelStorei(Ke.UNPACK_SKIP_IMAGES,Is),ri===0&&nt.generateMipmaps&&Ke.generateMipmap(pn),Ft.unbindTexture()},this.initRenderTarget=function(Ve){Qt.get(Ve).__webglFramebuffer===void 0&&hi.setupRenderTarget(Ve)},this.initTexture=function(Ve){Ve.isCubeTexture?hi.setTextureCube(Ve,0):Ve.isData3DTexture?hi.setTexture3D(Ve,0):Ve.isDataArrayTexture||Ve.isCompressedArrayTexture?hi.setTexture2DArray(Ve,0):hi.setTexture2D(Ve,0),Ft.unbindTexture()},this.resetState=function(){Re=0,Te=0,Me=null,Ft.reset(),rt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return WebGLCoordinateSystem}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(_){this._outputColorSpace=_;const J=this.getContext();J.drawingBufferColorSpace=ColorManagement._getDrawingBufferColorSpace(_),J.unpackColorSpace=ColorManagement._getUnpackColorSpace()}}const THREE=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AgXToneMapping,AlphaFormat,AlwaysCompare,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AnimationAction,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,AttachedBindMode,Audio,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,BackSide,BasicDepthPacking,BasicShadowMap,BatchedMesh,Bone,BooleanKeyframeTrack,Box2,Box3,Box3Helper,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasTexture,CapsuleGeometry,CatmullRomCurve3,CineonToneMapping,CircleGeometry,ClampToEdgeWrapping,Clock,Color,ColorKeyframeTrack,ColorManagement,CompressedArrayTexture,CompressedCubeTexture,CompressedTexture,CompressedTextureLoader,ConeGeometry,ConstantAlphaFactor,ConstantColorFactor,Controls,CubeCamera,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CustomToneMapping,CylinderGeometry,Cylindrical,Data3DTexture,DataArrayTexture,DataTexture,DataTextureLoader,DataUtils,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DetachedBindMode,DirectionalLight,DirectionalLightHelper,DiscreteInterpolant,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EllipseCurve,EqualCompare,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher:EventDispatcher$1,ExternalTexture,ExtrudeGeometry,FileLoader,Float16BufferAttribute,Float32BufferAttribute,FloatType,Fog,FogExp2,FramebufferTexture,FrontSide,Frustum,FrustumArray,GLBufferAttribute,GLSL1,GLSL3,GreaterCompare,GreaterDepth,GreaterEqualCompare,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group,HalfFloatType,HemisphereLight,HemisphereLightHelper,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16BufferAttribute,Int32BufferAttribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InterpolationSamplingMode,InterpolationSamplingType,InvertStencilOp,KeepStencilOp,KeyframeTrack,LOD,LatheGeometry,Layers,LessCompare,LessDepth,LessEqualCompare,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,Line,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LineSegments,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearSRGBColorSpace,LinearToneMapping,LinearTransfer,Loader,LoaderUtils,LoadingManager,LoopOnce,LoopPingPong,LoopRepeat,MOUSE,Material,MaterialLoader,MathUtils,Matrix2,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeutralToneMapping,NeverCompare,NeverDepth,NeverStencilFunc,NoBlending,NoColorSpace,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualCompare,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronGeometry,OneFactor,OneMinusConstantAlphaFactor,OneMinusConstantColorFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,Path,PerspectiveCamera,Plane,PlaneGeometry,PlaneHelper,PointLight,PointLightHelper,Points:Points$1,PointsMaterial,PolarGridHelper,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,RED_GREEN_RGTC2_Format,RED_RGTC1_Format,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGBDepthPacking,RGBFormat,RGBIntegerFormat,RGB_BPTC_SIGNED_Format,RGB_BPTC_UNSIGNED_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGDepthPacking,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RenderTarget,RenderTarget3D,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingGeometry,SIGNED_RED_GREEN_RGTC2_Format,SIGNED_RED_RGTC1_Format,SRGBColorSpace,SRGBTransfer,Scene,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,Source,Sphere:Sphere$1,SphereGeometry,Spherical,SphericalHarmonics3,SplineCurve,SpotLight,SpotLightHelper,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronGeometry,Texture,TextureLoader,TextureUtils,Timer,TimestampQuery,TorusGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeGeometry,UVMapping,Uint16BufferAttribute,Uint32BufferAttribute,Uint8BufferAttribute,Uint8ClampedBufferAttribute,Uniform,UniformsGroup,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt101111Type,UnsignedInt248Type,UnsignedInt5999Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,VideoFrameTexture,VideoTexture,WebGL3DRenderTarget,WebGLArrayRenderTarget,WebGLCoordinateSystem,WebGLCubeRenderTarget,WebGLRenderTarget,WebGLRenderer,WebGLUtils,WebGPUCoordinateSystem,WebXRController,WireframeGeometry,WrapAroundEnding,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,createCanvasElement,error,getConsoleFunction,log,setConsoleFunction,warn,warnOnce},Symbol.toStringTag,{value:"Module"}));var withSelector={exports:{}},withSelector_production={},shim={exports:{}},useSyncExternalStoreShim_production={};var hasRequiredUseSyncExternalStoreShim_production;function requireUseSyncExternalStoreShim_production(){if(hasRequiredUseSyncExternalStoreShim_production)return useSyncExternalStoreShim_production;hasRequiredUseSyncExternalStoreShim_production=1;var G=requireReact();function _(se,ae){return se===ae&&(se!==0||1/se===1/ae)||se!==se&&ae!==ae}var J=typeof Object.is=="function"?Object.is:_,Z=G.useState,Q=G.useEffect,ee=G.useLayoutEffect,te=G.useDebugValue;function ne(se,ae){var le=ae(),ue=Z({inst:{value:le,getSnapshot:ae}}),de=ue[0].inst,pe=ue[1];return ee(function(){de.value=le,de.getSnapshot=ae,ie(de)&&pe({inst:de})},[se,le,ae]),Q(function(){return ie(de)&&pe({inst:de}),se(function(){ie(de)&&pe({inst:de})})},[se]),te(le),le}function ie(se){var ae=se.getSnapshot;se=se.value;try{var le=ae();return!J(se,le)}catch{return!0}}function re(se,ae){return ae()}var oe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?re:ne;return useSyncExternalStoreShim_production.useSyncExternalStore=G.useSyncExternalStore!==void 0?G.useSyncExternalStore:oe,useSyncExternalStoreShim_production}var hasRequiredShim;function requireShim(){return hasRequiredShim||(hasRequiredShim=1,shim.exports=requireUseSyncExternalStoreShim_production()),shim.exports}var hasRequiredWithSelector_production;function requireWithSelector_production(){if(hasRequiredWithSelector_production)return withSelector_production;hasRequiredWithSelector_production=1;var G=requireReact(),_=requireShim();function J(re,oe){return re===oe&&(re!==0||1/re===1/oe)||re!==re&&oe!==oe}var Z=typeof Object.is=="function"?Object.is:J,Q=_.useSyncExternalStore,ee=G.useRef,te=G.useEffect,ne=G.useMemo,ie=G.useDebugValue;return withSelector_production.useSyncExternalStoreWithSelector=function(re,oe,se,ae,le){var ue=ee(null);if(ue.current===null){var de={hasValue:!1,value:null};ue.current=de}else de=ue.current;ue=ne(function(){function fe(Ce){if(!_e){if(_e=!0,ye=Ce,Ce=ae(Ce),le!==void 0&&de.hasValue){var Ee=de.value;if(le(Ee,Ce))return be=Ee}return be=Ce}if(Ee=be,Z(ye,Ce))return Ee;var Re=ae(Ce);return le!==void 0&&le(Ee,Re)?(ye=Ce,Ee):(ye=Ce,be=Re)}var _e=!1,ye,be,Ae=se===void 0?null:se;return[function(){return fe(oe())},Ae===null?void 0:function(){return fe(Ae())}]},[oe,se,ae,le]);var pe=Q(re,ue[0],ue[1]);return te(function(){de.hasValue=!0,de.value=pe},[pe]),ie(pe),pe},withSelector_production}var hasRequiredWithSelector;function requireWithSelector(){return hasRequiredWithSelector||(hasRequiredWithSelector=1,withSelector.exports=requireWithSelector_production()),withSelector.exports}var withSelectorExports=requireWithSelector();const useSyncExternalStoreExports=getDefaultExportFromCjs(withSelectorExports),createStoreImpl=G=>{let _;const J=new Set,Z=(re,oe)=>{const se=typeof re=="function"?re(_):re;if(!Object.is(se,_)){const ae=_;_=oe??(typeof se!="object"||se===null)?se:Object.assign({},_,se),J.forEach(le=>le(_,ae))}},Q=()=>_,ne={setState:Z,getState:Q,getInitialState:()=>ie,subscribe:re=>(J.add(re),()=>J.delete(re))},ie=_=G(Z,Q,ne);return ne},createStore$1=(G=>G?createStoreImpl(G):createStoreImpl),{useSyncExternalStoreWithSelector}=useSyncExternalStoreExports,identity$2=G=>G;function useStoreWithEqualityFn(G,_=identity$2,J){const Z=useSyncExternalStoreWithSelector(G.subscribe,G.getState,G.getInitialState,_,J);return React.useDebugValue(Z),Z}const createWithEqualityFnImpl=(G,_)=>{const J=createStore$1(G),Z=(Q,ee=_)=>useStoreWithEqualityFn(J,Q,ee);return Object.assign(Z,J),Z},createWithEqualityFn=((G,_)=>G?createWithEqualityFnImpl(G,_):createWithEqualityFnImpl);var reactReconciler={exports:{}},reactReconciler_production={exports:{}},scheduler$1={exports:{}},scheduler_production$1={};var hasRequiredScheduler_production$1;function requireScheduler_production$1(){return hasRequiredScheduler_production$1||(hasRequiredScheduler_production$1=1,(function(G){function _(Be,ze){var Fe=Be.length;Be.push(ze);e:for(;0<Fe;){var $e=Fe-1>>>1,Xe=Be[$e];if(0<Q(Xe,ze))Be[$e]=ze,Be[Fe]=Xe,Fe=$e;else break e}}function J(Be){return Be.length===0?null:Be[0]}function Z(Be){if(Be.length===0)return null;var ze=Be[0],Fe=Be.pop();if(Fe!==ze){Be[0]=Fe;e:for(var $e=0,Xe=Be.length,je=Xe>>>1;$e<je;){var qe=2*($e+1)-1,Ze=Be[qe],st=qe+1,St=Be[st];if(0>Q(Ze,Fe))st<Xe&&0>Q(St,Ze)?(Be[$e]=St,Be[st]=Fe,$e=st):(Be[$e]=Ze,Be[qe]=Fe,$e=qe);else if(st<Xe&&0>Q(St,Fe))Be[$e]=St,Be[st]=Fe,$e=st;else break e}}return ze}function Q(Be,ze){var Fe=Be.sortIndex-ze.sortIndex;return Fe!==0?Fe:Be.id-ze.id}if(G.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var ee=performance;G.unstable_now=function(){return ee.now()}}else{var te=Date,ne=te.now();G.unstable_now=function(){return te.now()-ne}}var ie=[],re=[],oe=1,se=null,ae=3,le=!1,ue=!1,de=!1,pe=typeof setTimeout=="function"?setTimeout:null,fe=typeof clearTimeout=="function"?clearTimeout:null,_e=typeof setImmediate<"u"?setImmediate:null;function ye(Be){for(var ze=J(re);ze!==null;){if(ze.callback===null)Z(re);else if(ze.startTime<=Be)Z(re),ze.sortIndex=ze.expirationTime,_(ie,ze);else break;ze=J(re)}}function be(Be){if(de=!1,ye(Be),!ue)if(J(ie)!==null)ue=!0,Ge();else{var ze=J(re);ze!==null&&He(be,ze.startTime-Be)}}var Ae=!1,Ce=-1,Ee=5,Re=-1;function Te(){return!(G.unstable_now()-Re<Ee)}function Me(){if(Ae){var Be=G.unstable_now();Re=Be;var ze=!0;try{e:{ue=!1,de&&(de=!1,fe(Ce),Ce=-1),le=!0;var Fe=ae;try{t:{for(ye(Be),se=J(ie);se!==null&&!(se.expirationTime>Be&&Te());){var $e=se.callback;if(typeof $e=="function"){se.callback=null,ae=se.priorityLevel;var Xe=$e(se.expirationTime<=Be);if(Be=G.unstable_now(),typeof Xe=="function"){se.callback=Xe,ye(Be),ze=!0;break t}se===J(ie)&&Z(ie),ye(Be)}else Z(ie);se=J(ie)}if(se!==null)ze=!0;else{var je=J(re);je!==null&&He(be,je.startTime-Be),ze=!1}}break e}finally{se=null,ae=Fe,le=!1}ze=void 0}}finally{ze?Ne():Ae=!1}}}var Ne;if(typeof _e=="function")Ne=function(){_e(Me)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,Ie=Le.port2;Le.port1.onmessage=Me,Ne=function(){Ie.postMessage(null)}}else Ne=function(){pe(Me,0)};function Ge(){Ae||(Ae=!0,Ne())}function He(Be,ze){Ce=pe(function(){Be(G.unstable_now())},ze)}G.unstable_IdlePriority=5,G.unstable_ImmediatePriority=1,G.unstable_LowPriority=4,G.unstable_NormalPriority=3,G.unstable_Profiling=null,G.unstable_UserBlockingPriority=2,G.unstable_cancelCallback=function(Be){Be.callback=null},G.unstable_continueExecution=function(){ue||le||(ue=!0,Ge())},G.unstable_forceFrameRate=function(Be){0>Be||125<Be?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ee=0<Be?Math.floor(1e3/Be):5},G.unstable_getCurrentPriorityLevel=function(){return ae},G.unstable_getFirstCallbackNode=function(){return J(ie)},G.unstable_next=function(Be){switch(ae){case 1:case 2:case 3:var ze=3;break;default:ze=ae}var Fe=ae;ae=ze;try{return Be()}finally{ae=Fe}},G.unstable_pauseExecution=function(){},G.unstable_requestPaint=function(){},G.unstable_runWithPriority=function(Be,ze){switch(Be){case 1:case 2:case 3:case 4:case 5:break;default:Be=3}var Fe=ae;ae=Be;try{return ze()}finally{ae=Fe}},G.unstable_scheduleCallback=function(Be,ze,Fe){var $e=G.unstable_now();switch(typeof Fe=="object"&&Fe!==null?(Fe=Fe.delay,Fe=typeof Fe=="number"&&0<Fe?$e+Fe:$e):Fe=$e,Be){case 1:var Xe=-1;break;case 2:Xe=250;break;case 5:Xe=1073741823;break;case 4:Xe=1e4;break;default:Xe=5e3}return Xe=Fe+Xe,Be={id:oe++,callback:ze,priorityLevel:Be,startTime:Fe,expirationTime:Xe,sortIndex:-1},Fe>$e?(Be.sortIndex=Fe,_(re,Be),J(ie)===null&&Be===J(re)&&(de?(fe(Ce),Ce=-1):de=!0,He(be,Fe-$e))):(Be.sortIndex=Xe,_(ie,Be),ue||le||(ue=!0,Ge())),Be},G.unstable_shouldYield=Te,G.unstable_wrapCallback=function(Be){var ze=ae;return function(){var Fe=ae;ae=ze;try{return Be.apply(this,arguments)}finally{ae=Fe}}}})(scheduler_production$1)),scheduler_production$1}var hasRequiredScheduler$1;function requireScheduler$1(){return hasRequiredScheduler$1||(hasRequiredScheduler$1=1,scheduler$1.exports=requireScheduler_production$1()),scheduler$1.exports}var hasRequiredReactReconciler_production;function requireReactReconciler_production(){return hasRequiredReactReconciler_production||(hasRequiredReactReconciler_production=1,(function(G){G.exports=function(_){function J(me,ge,Se,Pe){return new $u(me,ge,Se,Pe)}function Z(){}function Q(me){var ge="https://react.dev/errors/"+me;if(1<arguments.length){ge+="?args[]="+encodeURIComponent(arguments[1]);for(var Se=2;Se<arguments.length;Se++)ge+="&args[]="+encodeURIComponent(arguments[Se])}return"Minified React error #"+me+"; visit "+ge+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ee(me){return me===null||typeof me!="object"?null:(me=th&&me[th]||me["@@iterator"],typeof me=="function"?me:null)}function te(me){if(me==null)return null;if(typeof me=="function")return me.$$typeof===So?null:me.displayName||me.name||null;if(typeof me=="string")return me;switch(me){case Qo:return"Fragment";case ws:return"Portal";case eh:return"Profiler";case Qu:return"StrictMode";case Gc:return"Suspense";case qa:return"SuspenseList"}if(typeof me=="object")switch(me.$$typeof){case Ys:return(me.displayName||"Context")+".Provider";case Xa:return(me._context.displayName||"Context")+".Consumer";case el:var ge=me.render;return me=me.displayName,me||(me=ge.displayName||ge.name||"",me=me!==""?"ForwardRef("+me+")":"ForwardRef"),me;case Hl:return ge=me.displayName||null,ge!==null?ge:te(me.type)||"Memo";case Ps:ge=me._payload,me=me._init;try{return te(me(ge))}catch{}}return null}function ne(me){if(Hc===void 0)try{throw Error()}catch(Se){var ge=Se.stack.trim().match(/\n( *(at )?)/);Hc=ge&&ge[1]||"",ih=-1<Se.stack.indexOf(`
    at`)?" (<anonymous>)":-1<Se.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hc+me+ih}function ie(me,ge){if(!me||$a)return"";$a=!0;var Se=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var Pe={DetermineComponentFrameRoot:function(){try{if(ge){var mi=function(){throw Error()};if(Object.defineProperty(mi.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(mi,[])}catch(Li){var gi=Li}Reflect.construct(me,[],mi)}else{try{mi.call()}catch(Li){gi=Li}me.call(mi.prototype)}}else{try{throw Error()}catch(Li){gi=Li}(mi=me())&&typeof mi.catch=="function"&&mi.catch(function(){})}}catch(Li){if(Li&&gi&&typeof Li.stack=="string")return[Li.stack,gi.stack]}return[null,null]}};Pe.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var De=Object.getOwnPropertyDescriptor(Pe.DetermineComponentFrameRoot,"name");De&&De.configurable&&Object.defineProperty(Pe.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var ke=Pe.DetermineComponentFrameRoot(),Je=ke[0],at=ke[1];if(Je&&at){var At=Je.split(`
`),Yt=at.split(`
`);for(De=Pe=0;Pe<At.length&&!At[Pe].includes("DetermineComponentFrameRoot");)Pe++;for(;De<Yt.length&&!Yt[De].includes("DetermineComponentFrameRoot");)De++;if(Pe===At.length||De===Yt.length)for(Pe=At.length-1,De=Yt.length-1;1<=Pe&&0<=De&&At[Pe]!==Yt[De];)De--;for(;1<=Pe&&0<=De;Pe--,De--)if(At[Pe]!==Yt[De]){if(Pe!==1||De!==1)do if(Pe--,De--,0>De||At[Pe]!==Yt[De]){var li=`
`+At[Pe].replace(" at new "," at ");return me.displayName&&li.includes("<anonymous>")&&(li=li.replace("<anonymous>",me.displayName)),li}while(1<=Pe&&0<=De);break}}}finally{$a=!1,Error.prepareStackTrace=Se}return(Se=me?me.displayName||me.name:"")?ne(Se):""}function re(me){switch(me.tag){case 26:case 27:case 5:return ne(me.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 15:return me=ie(me.type,!1),me;case 11:return me=ie(me.type.render,!1),me;case 1:return me=ie(me.type,!0),me;default:return""}}function oe(me){try{var ge="";do ge+=re(me),me=me.return;while(me);return ge}catch(Se){return`
Error generating stack: `+Se.message+`
`+Se.stack}}function se(me){var ge=me,Se=me;if(me.alternate)for(;ge.return;)ge=ge.return;else{me=ge;do ge=me,(ge.flags&4098)!==0&&(Se=ge.return),me=ge.return;while(me)}return ge.tag===3?Se:null}function ae(me){if(se(me)!==me)throw Error(Q(188))}function le(me){var ge=me.alternate;if(!ge){if(ge=se(me),ge===null)throw Error(Q(188));return ge!==me?null:me}for(var Se=me,Pe=ge;;){var De=Se.return;if(De===null)break;var ke=De.alternate;if(ke===null){if(Pe=De.return,Pe!==null){Se=Pe;continue}break}if(De.child===ke.child){for(ke=De.child;ke;){if(ke===Se)return ae(De),me;if(ke===Pe)return ae(De),ge;ke=ke.sibling}throw Error(Q(188))}if(Se.return!==Pe.return)Se=De,Pe=ke;else{for(var Je=!1,at=De.child;at;){if(at===Se){Je=!0,Se=De,Pe=ke;break}if(at===Pe){Je=!0,Pe=De,Se=ke;break}at=at.sibling}if(!Je){for(at=ke.child;at;){if(at===Se){Je=!0,Se=ke,Pe=De;break}if(at===Pe){Je=!0,Pe=ke,Se=De;break}at=at.sibling}if(!Je)throw Error(Q(189))}}if(Se.alternate!==Pe)throw Error(Q(190))}if(Se.tag!==3)throw Error(Q(188));return Se.stateNode.current===Se?me:ge}function ue(me){var ge=me.tag;if(ge===5||ge===26||ge===27||ge===6)return me;for(me=me.child;me!==null;){if(ge=ue(me),ge!==null)return ge;me=me.sibling}return null}function de(me){var ge=me.tag;if(ge===5||ge===26||ge===27||ge===6)return me;for(me=me.child;me!==null;){if(me.tag!==4&&(ge=de(me),ge!==null))return ge;me=me.sibling}return null}function pe(me){return{current:me}}function fe(me){0>ba||(me.current=Ql[ba],Ql[ba]=null,ba--)}function _e(me,ge){ba++,Ql[ba]=me.current,me.current=ge}function ye(me){return me>>>=0,me===0?32:31-(ec(me)/Fd|0)|0}function be(me){var ge=me&42;if(ge!==0)return ge;switch(me&-me){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return me&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return me&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return me}}function Ae(me,ge){var Se=me.pendingLanes;if(Se===0)return 0;var Pe=0,De=me.suspendedLanes,ke=me.pingedLanes,Je=me.warmLanes;me=me.finishedLanes!==0;var at=Se&134217727;return at!==0?(Se=at&~De,Se!==0?Pe=be(Se):(ke&=at,ke!==0?Pe=be(ke):me||(Je=at&~Je,Je!==0&&(Pe=be(Je))))):(at=Se&~De,at!==0?Pe=be(at):ke!==0?Pe=be(ke):me||(Je=Se&~Je,Je!==0&&(Pe=be(Je)))),Pe===0?0:ge!==0&&ge!==Pe&&(ge&De)===0&&(De=Pe&-Pe,Je=ge&-ge,De>=Je||De===32&&(Je&4194176)!==0)?ge:Pe}function Ce(me,ge){return(me.pendingLanes&~(me.suspendedLanes&~me.pingedLanes)&ge)===0}function Ee(me,ge){switch(me){case 1:case 2:case 4:case 8:return ge+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return ge+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Re(){var me=rl;return rl<<=1,(rl&4194176)===0&&(rl=128),me}function Te(){var me=tc;return tc<<=1,(tc&62914560)===0&&(tc=4194304),me}function Me(me){for(var ge=[],Se=0;31>Se;Se++)ge.push(me);return ge}function Ne(me,ge){me.pendingLanes|=ge,ge!==268435456&&(me.suspendedLanes=0,me.pingedLanes=0,me.warmLanes=0)}function Le(me,ge,Se,Pe,De,ke){var Je=me.pendingLanes;me.pendingLanes=Se,me.suspendedLanes=0,me.pingedLanes=0,me.warmLanes=0,me.expiredLanes&=Se,me.entangledLanes&=Se,me.errorRecoveryDisabledLanes&=Se,me.shellSuspendCounter=0;var at=me.entanglements,At=me.expirationTimes,Yt=me.hiddenUpdates;for(Se=Je&~Se;0<Se;){var li=31-Gr(Se),mi=1<<li;at[li]=0,At[li]=-1;var gi=Yt[li];if(gi!==null)for(Yt[li]=null,li=0;li<gi.length;li++){var Li=gi[li];Li!==null&&(Li.lane&=-536870913)}Se&=~mi}Pe!==0&&Ie(me,Pe,0),ke!==0&&De===0&&me.tag!==0&&(me.suspendedLanes|=ke&~(Je&~ge))}function Ie(me,ge,Se){me.pendingLanes|=ge,me.suspendedLanes&=~ge;var Pe=31-Gr(ge);me.entangledLanes|=ge,me.entanglements[Pe]=me.entanglements[Pe]|1073741824|Se&4194218}function Ge(me,ge){var Se=me.entangledLanes|=ge;for(me=me.entanglements;Se;){var Pe=31-Gr(Se),De=1<<Pe;De&ge|me[Pe]&ge&&(me[Pe]|=ge),Se&=~De}}function He(me){return me&=-me,2<me?8<me?(me&134217727)!==0?32:268435456:8:2}function Be(me){if(Hr&&typeof Hr.onCommitFiberRoot=="function")try{Hr.onCommitFiberRoot(al,me,void 0,(me.current.flags&128)===128)}catch{}}function ze(me){if(typeof Yd=="function"&&Lh(me),Hr&&typeof Hr.setStrictMode=="function")try{Hr.setStrictMode(al,me)}catch{}}function Fe(me,ge){return me===ge&&(me!==0||1/me===1/ge)||me!==me&&ge!==ge}function $e(me,ge){if(typeof me=="object"&&me!==null){var Se=ou.get(me);return Se!==void 0?Se:(ge={value:me,source:ge,stack:oe(ge)},ou.set(me,ge),ge)}return{value:me,source:ge,stack:oe(ge)}}function Xe(me,ge){Pn[zn++]=rc,Pn[zn++]=nc,nc=me,rc=ge}function je(me,ge,Se){ss[as++]=Js,ss[as++]=_s,ss[as++]=Rs,Rs=me;var Pe=Js;me=_s;var De=32-Gr(Pe)-1;Pe&=~(1<<De),Se+=1;var ke=32-Gr(ge)+De;if(30<ke){var Je=De-De%5;ke=(Pe&(1<<Je)-1).toString(32),Pe>>=Je,De-=Je,Js=1<<32-Gr(ge)+De|Se<<De|Pe,_s=ke+me}else Js=1<<ke|Se<<De|Pe,_s=me}function qe(me){me.return!==null&&(Xe(me,1),je(me,1,0))}function Ze(me){for(;me===nc;)nc=Pn[--zn],Pn[zn]=null,rc=Pn[--zn],Pn[zn]=null;for(;me===Rs;)Rs=ss[--as],ss[as]=null,_s=ss[--as],ss[as]=null,Js=ss[--as],ss[as]=null}function st(me,ge){_e(Os,ge),_e(sc,me),_e(cr,null),me=Co(ge),fe(cr),_e(cr,me)}function St(){fe(cr),fe(sc),fe(Os)}function it(me){me.memoizedState!==null&&_e(ol,me);var ge=cr.current,Se=bd(ge,me.type);ge!==Se&&(_e(sc,me),_e(cr,Se))}function lt(me){sc.current===me&&(fe(cr),fe(sc)),ol.current===me&&(fe(ol),qs?Oi._currentValue=Vr:Oi._currentValue2=Vr)}function ft(me){var ge=Error(Q(418,""));throw jt($e(ge,me)),ac}function kt(me,ge){if(!Nr)throw Error(Q(175));_f(me.stateNode,me.type,me.memoizedProps,ge,me)||ft(me)}function Ht(me){for(Sr=me.return;Sr;)switch(Sr.tag){case 3:case 27:ys=!0;return;case 5:case 13:ys=!1;return;default:Sr=Sr.return}}function Wt(me){if(!Nr||me!==Sr)return!1;if(!tn)return Ht(me),tn=!0,!1;var ge=!1;if(pr?me.tag!==3&&me.tag!==27&&(me.tag!==5||kd(me.type)&&!Ka(me.type,me.memoizedProps))&&(ge=!0):me.tag!==3&&(me.tag!==5||kd(me.type)&&!Ka(me.type,me.memoizedProps))&&(ge=!0),ge&&gr&&ft(me),Ht(me),me.tag===13){if(!Nr)throw Error(Q(316));if(me=me.memoizedState,me=me!==null?me.dehydrated:null,!me)throw Error(Q(317));gr=Ld(me)}else gr=Sr?xh(me.stateNode):null;return!0}function ni(){Nr&&(gr=Sr=null,tn=!1)}function jt(me){os===null?os=[me]:os.push(me)}function pt(){for(var me=Qa,ge=ll=Qa=0;ge<me;){var Se=ls[ge];ls[ge++]=null;var Pe=ls[ge];ls[ge++]=null;var De=ls[ge];ls[ge++]=null;var ke=ls[ge];if(ls[ge++]=null,Pe!==null&&De!==null){var Je=Pe.pending;Je===null?De.next=De:(De.next=Je.next,Je.next=De),Pe.pending=De}ke!==0&&Lt(Se,De,ke)}}function Ke(me,ge,Se,Pe){ls[Qa++]=me,ls[Qa++]=ge,ls[Qa++]=Se,ls[Qa++]=Pe,ll|=Pe,me.lanes|=Pe,me=me.alternate,me!==null&&(me.lanes|=Pe)}function Mt(me,ge,Se,Pe){return Ke(me,ge,Se,Pe),Ft(me)}function Bt(me,ge){return Ke(me,null,null,ge),Ft(me)}function Lt(me,ge,Se){me.lanes|=Se;var Pe=me.alternate;Pe!==null&&(Pe.lanes|=Se);for(var De=!1,ke=me.return;ke!==null;)ke.childLanes|=Se,Pe=ke.alternate,Pe!==null&&(Pe.childLanes|=Se),ke.tag===22&&(me=ke.stateNode,me===null||me._visibility&1||(De=!0)),me=ke,ke=ke.return;De&&ge!==null&&me.tag===3&&(ke=me.stateNode,De=31-Gr(Se),ke=ke.hiddenUpdates,me=ke[De],me===null?ke[De]=[ge]:me.push(ge),ge.lane=Se|536870912)}function Ft(me){if(50<Bo)throw Bo=0,Br=null,Error(Q(185));for(var ge=me.return;ge!==null;)me=ge,ge=me.return;return me.tag===3?me.stateNode:null}function ai(me){me!==wo&&me.next===null&&(wo===null?cl=wo=me:wo=wo.next=me),lc=!0,oc||(oc=!0,dt(hi))}function Qt(me,ge){if(!Ns&&lc){Ns=!0;do for(var Se=!1,Pe=cl;Pe!==null;){if(me!==0){var De=Pe.pendingLanes;if(De===0)var ke=0;else{var Je=Pe.suspendedLanes,at=Pe.pingedLanes;ke=(1<<31-Gr(42|me)+1)-1,ke&=De&~(Je&~at),ke=ke&201326677?ke&201326677|1:ke?ke|2:0}ke!==0&&(Se=!0,_t(Pe,ke))}else ke=Fi,ke=Ae(Pe,Pe===Gi?ke:0),(ke&3)===0||Ce(Pe,ke)||(Se=!0,_t(Pe,ke));Pe=Pe.next}while(Se);Ns=!1}}function hi(){lc=oc=!1;var me=0;eo!==0&&(Za()&&(me=eo),eo=0);for(var ge=mr(),Se=null,Pe=cl;Pe!==null;){var De=Pe.next,ke=Qe(Pe,ge);ke===0?(Pe.next=null,Se===null?cl=De:Se.next=De,De===null&&(wo=Se)):(Se=Pe,(me!==0||(ke&3)!==0)&&(lc=!0)),Pe=De}Qt(me)}function Qe(me,ge){for(var Se=me.suspendedLanes,Pe=me.pingedLanes,De=me.expirationTimes,ke=me.pendingLanes&-62914561;0<ke;){var Je=31-Gr(ke),at=1<<Je,At=De[Je];At===-1?((at&Se)===0||(at&Pe)!==0)&&(De[Je]=Ee(at,ge)):At<=ge&&(me.expiredLanes|=at),ke&=~at}if(ge=Gi,Se=Fi,Se=Ae(me,me===ge?Se:0),Pe=me.callbackNode,Se===0||me===ge&&gn===2||me.cancelPendingCommit!==null)return Pe!==null&&Pe!==null&&ic(Pe),me.callbackNode=null,me.callbackPriority=0;if((Se&3)===0||Ce(me,Se)){if(ge=Se&-Se,ge===me.callbackPriority)return ge;switch(Pe!==null&&ic(Pe),He(Se)){case 2:case 8:Se=Hd;break;case 32:Se=su;break;case 268435456:Se=au;break;default:Se=su}return Pe=Ye.bind(null,me),Se=sl(Se,Pe),me.callbackPriority=ge,me.callbackNode=Se,ge}return Pe!==null&&Pe!==null&&ic(Pe),me.callbackPriority=2,me.callbackNode=null,2}function Ye(me,ge){var Se=me.callbackNode;if(or()&&me.callbackNode!==Se)return null;var Pe=Fi;return Pe=Ae(me,me===Gi?Pe:0),Pe===0?null:(zl(me,Pe,ge),Qe(me,mr()),me.callbackNode!=null&&me.callbackNode===Se?Ye.bind(null,me):null)}function _t(me,ge){if(or())return null;zl(me,ge,!0)}function dt(me){Jn?$c(function(){(Ei&6)!==0?sl(Dh,me):me()}):sl(Dh,me)}function yt(){return eo===0&&(eo=Re()),eo}function Nt(me,ge){if(cc===null){var Se=cc=[];lu=0,Yr=yt(),io={status:"pending",value:void 0,then:function(Pe){Se.push(Pe)}}}return lu++,ge.then(fi,fi),ge}function fi(){if(--lu===0&&cc!==null){io!==null&&(io.status="fulfilled");var me=cc;cc=null,Yr=0,io=null;for(var ge=0;ge<me.length;ge++)(0,me[ge])()}}function Zt(me,ge){var Se=[],Pe={status:"pending",value:null,reason:null,then:function(De){Se.push(De)}};return me.then(function(){Pe.status="fulfilled",Pe.value=ge;for(var De=0;De<Se.length;De++)(0,Se[De])(ge)},function(De){for(Pe.status="rejected",Pe.reason=De,De=0;De<Se.length;De++)(0,Se[De])(void 0)}),Pe}function Ut(me){me.updateQueue={baseState:me.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qt(me,ge){me=me.updateQueue,ge.updateQueue===me&&(ge.updateQueue={baseState:me.baseState,firstBaseUpdate:me.firstBaseUpdate,lastBaseUpdate:me.lastBaseUpdate,shared:me.shared,callbacks:null})}function Rt(me){return{lane:me,tag:0,payload:null,callback:null,next:null}}function Pt(me,ge,Se){var Pe=me.updateQueue;if(Pe===null)return null;if(Pe=Pe.shared,(Ei&2)!==0){var De=Pe.pending;return De===null?ge.next=ge:(ge.next=De.next,De.next=ge),Pe.pending=ge,ge=Ft(me),Lt(me,null,Se),ge}return Ke(me,Pe,ge,Se),Ft(me)}function vt(me,ge,Se){if(ge=ge.updateQueue,ge!==null&&(ge=ge.shared,(Se&4194176)!==0)){var Pe=ge.lanes;Pe&=me.pendingLanes,Se|=Pe,ge.lanes=Se,Ge(me,Se)}}function tt(me,ge){var Se=me.updateQueue,Pe=me.alternate;if(Pe!==null&&(Pe=Pe.updateQueue,Se===Pe)){var De=null,ke=null;if(Se=Se.firstBaseUpdate,Se!==null){do{var Je={lane:Se.lane,tag:Se.tag,payload:Se.payload,callback:null,next:null};ke===null?De=ke=Je:ke=ke.next=Je,Se=Se.next}while(Se!==null);ke===null?De=ke=ge:ke=ke.next=ge}else De=ke=ge;Se={baseState:Pe.baseState,firstBaseUpdate:De,lastBaseUpdate:ke,shared:Pe.shared,callbacks:Pe.callbacks},me.updateQueue=Se;return}me=Se.lastBaseUpdate,me===null?Se.firstBaseUpdate=ge:me.next=ge,Se.lastBaseUpdate=ge}function et(){if(ul){var me=io;if(me!==null)throw me}}function ei(me,ge,Se,Pe){ul=!1;var De=me.updateQueue;xa=!1;var ke=De.firstBaseUpdate,Je=De.lastBaseUpdate,at=De.shared.pending;if(at!==null){De.shared.pending=null;var At=at,Yt=At.next;At.next=null,Je===null?ke=Yt:Je.next=Yt,Je=At;var li=me.alternate;li!==null&&(li=li.updateQueue,at=li.lastBaseUpdate,at!==Je&&(at===null?li.firstBaseUpdate=Yt:at.next=Yt,li.lastBaseUpdate=At))}if(ke!==null){var mi=De.baseState;Je=0,li=Yt=At=null,at=ke;do{var gi=at.lane&-536870913,Li=gi!==at.lane;if(Li?(Fi&gi)===gi:(Pe&gi)===gi){gi!==0&&gi===Yr&&(ul=!0),li!==null&&(li=li.next={lane:0,tag:at.tag,payload:at.payload,callback:null,next:null});e:{var Wr=me,fc=at;gi=ge;var ko=Se;switch(fc.tag){case 1:if(Wr=fc.payload,typeof Wr=="function"){mi=Wr.call(ko,mi,gi);break e}mi=Wr;break e;case 3:Wr.flags=Wr.flags&-65537|128;case 0:if(Wr=fc.payload,gi=typeof Wr=="function"?Wr.call(ko,mi,gi):Wr,gi==null)break e;mi=Ao({},mi,gi);break e;case 2:xa=!0}}gi=at.callback,gi!==null&&(me.flags|=64,Li&&(me.flags|=8192),Li=De.callbacks,Li===null?De.callbacks=[gi]:Li.push(gi))}else Li={lane:gi,tag:at.tag,payload:at.payload,callback:at.callback,next:null},li===null?(Yt=li=Li,At=mi):li=li.next=Li,Je|=gi;if(at=at.next,at===null){if(at=De.shared.pending,at===null)break;Li=at,at=Li.next,Li.next=null,De.lastBaseUpdate=Li,De.shared.pending=null}}while(!0);li===null&&(At=mi),De.baseState=At,De.firstBaseUpdate=Yt,De.lastBaseUpdate=li,ke===null&&(De.shared.lanes=0),ds|=Je,me.lanes=Je,me.memoizedState=mi}}function rt(me,ge){if(typeof me!="function")throw Error(Q(191,me));me.call(ge)}function ti(me,ge){var Se=me.callbacks;if(Se!==null)for(me.callbacks=null,me=0;me<Se.length;me++)rt(Se[me],ge)}function zt(me,ge){if(rs(me,ge))return!0;if(typeof me!="object"||me===null||typeof ge!="object"||ge===null)return!1;var Se=Object.keys(me),Pe=Object.keys(ge);if(Se.length!==Pe.length)return!1;for(Pe=0;Pe<Se.length;Pe++){var De=Se[Pe];if(!uc.call(ge,De)||!rs(me[De],ge[De]))return!1}return!0}function ii(me){return me=me.status,me==="fulfilled"||me==="rejected"}function Kt(){}function Vt(me,ge,Se){switch(Se=me[Se],Se===void 0?me.push(ge):Se!==ge&&(ge.then(Kt,Kt),ge=Se),ge.status){case"fulfilled":return ge.value;case"rejected":throw me=ge.reason,me===fn?Error(Q(483)):me;default:if(typeof ge.status=="string")ge.then(Kt,Kt);else{if(me=Gi,me!==null&&100<me.shellSuspendCounter)throw Error(Q(482));me=ge,me.status="pending",me.then(function(Pe){if(ge.status==="pending"){var De=ge;De.status="fulfilled",De.value=Pe}},function(Pe){if(ge.status==="pending"){var De=ge;De.status="rejected",De.reason=Pe}})}switch(ge.status){case"fulfilled":return ge.value;case"rejected":throw me=ge.reason,me===fn?Error(Q(483)):me}throw Po=ge,fn}}function di(){if(Po===null)throw Error(Q(459));var me=Po;return Po=null,me}function pi(me){var ge=bs;return bs+=1,Ks===null&&(Ks=[]),Vt(Ks,me,ge)}function Di(me,ge){ge=ge.props.ref,me.ref=ge!==void 0?ge:null}function Si(me,ge){throw ge.$$typeof===Zu?Error(Q(525)):(me=Object.prototype.toString.call(ge),Error(Q(31,me==="[object Object]"?"object with keys {"+Object.keys(ge).join(", ")+"}":me)))}function Ui(me){var ge=me._init;return ge(me._payload)}function vn(me){function ge(wt,bt){if(me){var Dt=wt.deletions;Dt===null?(wt.deletions=[bt],wt.flags|=16):Dt.push(bt)}}function Se(wt,bt){if(!me)return null;for(;bt!==null;)ge(wt,bt),bt=bt.sibling;return null}function Pe(wt){for(var bt=new Map;wt!==null;)wt.key!==null?bt.set(wt.key,wt):bt.set(wt.index,wt),wt=wt.sibling;return bt}function De(wt,bt){return wt=xr(wt,bt),wt.index=0,wt.sibling=null,wt}function ke(wt,bt,Dt){return wt.index=Dt,me?(Dt=wt.alternate,Dt!==null?(Dt=Dt.index,Dt<bt?(wt.flags|=33554434,bt):Dt):(wt.flags|=33554434,bt)):(wt.flags|=1048576,bt)}function Je(wt){return me&&wt.alternate===null&&(wt.flags|=33554434),wt}function at(wt,bt,Dt,si){return bt===null||bt.tag!==6?(bt=Ya(Dt,wt.mode,si),bt.return=wt,bt):(bt=De(bt,Dt),bt.return=wt,bt)}function At(wt,bt,Dt,si){var Ai=Dt.type;return Ai===Qo?li(wt,bt,Dt.props.children,si,Dt.key):bt!==null&&(bt.elementType===Ai||typeof Ai=="object"&&Ai!==null&&Ai.$$typeof===Ps&&Ui(Ai)===bt.type)?(bt=De(bt,Dt.props),Di(bt,Dt),bt.return=wt,bt):(bt=gs(Dt.type,Dt.key,Dt.props,null,wt.mode,si),Di(bt,Dt),bt.return=wt,bt)}function Yt(wt,bt,Dt,si){return bt===null||bt.tag!==4||bt.stateNode.containerInfo!==Dt.containerInfo||bt.stateNode.implementation!==Dt.implementation?(bt=Zo(Dt,wt.mode,si),bt.return=wt,bt):(bt=De(bt,Dt.children||[]),bt.return=wt,bt)}function li(wt,bt,Dt,si,Ai){return bt===null||bt.tag!==7?(bt=ma(Dt,wt.mode,si,Ai),bt.return=wt,bt):(bt=De(bt,Dt),bt.return=wt,bt)}function mi(wt,bt,Dt){if(typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint")return bt=Ya(""+bt,wt.mode,Dt),bt.return=wt,bt;if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case ga:return Dt=gs(bt.type,bt.key,bt.props,null,wt.mode,Dt),Di(Dt,bt),Dt.return=wt,Dt;case ws:return bt=Zo(bt,wt.mode,Dt),bt.return=wt,bt;case Ps:var si=bt._init;return bt=si(bt._payload),mi(wt,bt,Dt)}if(Wa(bt)||ee(bt))return bt=ma(bt,wt.mode,Dt,null),bt.return=wt,bt;if(typeof bt.then=="function")return mi(wt,pi(bt),Dt);if(bt.$$typeof===Ys)return mi(wt,Ll(wt,bt),Dt);Si(wt,bt)}return null}function gi(wt,bt,Dt,si){var Ai=bt!==null?bt.key:null;if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint")return Ai!==null?null:at(wt,bt,""+Dt,si);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case ga:return Dt.key===Ai?At(wt,bt,Dt,si):null;case ws:return Dt.key===Ai?Yt(wt,bt,Dt,si):null;case Ps:return Ai=Dt._init,Dt=Ai(Dt._payload),gi(wt,bt,Dt,si)}if(Wa(Dt)||ee(Dt))return Ai!==null?null:li(wt,bt,Dt,si,null);if(typeof Dt.then=="function")return gi(wt,bt,pi(Dt),si);if(Dt.$$typeof===Ys)return gi(wt,bt,Ll(wt,Dt),si);Si(wt,Dt)}return null}function Li(wt,bt,Dt,si,Ai){if(typeof si=="string"&&si!==""||typeof si=="number"||typeof si=="bigint")return wt=wt.get(Dt)||null,at(bt,wt,""+si,Ai);if(typeof si=="object"&&si!==null){switch(si.$$typeof){case ga:return wt=wt.get(si.key===null?Dt:si.key)||null,At(bt,wt,si,Ai);case ws:return wt=wt.get(si.key===null?Dt:si.key)||null,Yt(bt,wt,si,Ai);case Ps:var Sn=si._init;return si=Sn(si._payload),Li(wt,bt,Dt,si,Ai)}if(Wa(si)||ee(si))return wt=wt.get(Dt)||null,li(bt,wt,si,Ai,null);if(typeof si.then=="function")return Li(wt,bt,Dt,pi(si),Ai);if(si.$$typeof===Ys)return Li(wt,bt,Dt,Ll(bt,si),Ai);Si(bt,si)}return null}function Wr(wt,bt,Dt,si){for(var Ai=null,Sn=null,Ni=bt,rn=bt=0,rr=null;Ni!==null&&rn<Dt.length;rn++){Ni.index>rn?(rr=Ni,Ni=null):rr=Ni.sibling;var sn=gi(wt,Ni,Dt[rn],si);if(sn===null){Ni===null&&(Ni=rr);break}me&&Ni&&sn.alternate===null&&ge(wt,Ni),bt=ke(sn,bt,rn),Sn===null?Ai=sn:Sn.sibling=sn,Sn=sn,Ni=rr}if(rn===Dt.length)return Se(wt,Ni),tn&&Xe(wt,rn),Ai;if(Ni===null){for(;rn<Dt.length;rn++)Ni=mi(wt,Dt[rn],si),Ni!==null&&(bt=ke(Ni,bt,rn),Sn===null?Ai=Ni:Sn.sibling=Ni,Sn=Ni);return tn&&Xe(wt,rn),Ai}for(Ni=Pe(Ni);rn<Dt.length;rn++)rr=Li(Ni,wt,rn,Dt[rn],si),rr!==null&&(me&&rr.alternate!==null&&Ni.delete(rr.key===null?rn:rr.key),bt=ke(rr,bt,rn),Sn===null?Ai=rr:Sn.sibling=rr,Sn=rr);return me&&Ni.forEach(function(wa){return ge(wt,wa)}),tn&&Xe(wt,rn),Ai}function fc(wt,bt,Dt,si){if(Dt==null)throw Error(Q(151));for(var Ai=null,Sn=null,Ni=bt,rn=bt=0,rr=null,sn=Dt.next();Ni!==null&&!sn.done;rn++,sn=Dt.next()){Ni.index>rn?(rr=Ni,Ni=null):rr=Ni.sibling;var wa=gi(wt,Ni,sn.value,si);if(wa===null){Ni===null&&(Ni=rr);break}me&&Ni&&wa.alternate===null&&ge(wt,Ni),bt=ke(wa,bt,rn),Sn===null?Ai=wa:Sn.sibling=wa,Sn=wa,Ni=rr}if(sn.done)return Se(wt,Ni),tn&&Xe(wt,rn),Ai;if(Ni===null){for(;!sn.done;rn++,sn=Dt.next())sn=mi(wt,sn.value,si),sn!==null&&(bt=ke(sn,bt,rn),Sn===null?Ai=sn:Sn.sibling=sn,Sn=sn);return tn&&Xe(wt,rn),Ai}for(Ni=Pe(Ni);!sn.done;rn++,sn=Dt.next())sn=Li(Ni,wt,rn,sn.value,si),sn!==null&&(me&&sn.alternate!==null&&Ni.delete(sn.key===null?rn:sn.key),bt=ke(sn,bt,rn),Sn===null?Ai=sn:Sn.sibling=sn,Sn=sn);return me&&Ni.forEach(function(vu){return ge(wt,vu)}),tn&&Xe(wt,rn),Ai}function ko(wt,bt,Dt,si){if(typeof Dt=="object"&&Dt!==null&&Dt.type===Qo&&Dt.key===null&&(Dt=Dt.props.children),typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case ga:e:{for(var Ai=Dt.key;bt!==null;){if(bt.key===Ai){if(Ai=Dt.type,Ai===Qo){if(bt.tag===7){Se(wt,bt.sibling),si=De(bt,Dt.props.children),si.return=wt,wt=si;break e}}else if(bt.elementType===Ai||typeof Ai=="object"&&Ai!==null&&Ai.$$typeof===Ps&&Ui(Ai)===bt.type){Se(wt,bt.sibling),si=De(bt,Dt.props),Di(si,Dt),si.return=wt,wt=si;break e}Se(wt,bt);break}else ge(wt,bt);bt=bt.sibling}Dt.type===Qo?(si=ma(Dt.props.children,wt.mode,si,Dt.key),si.return=wt,wt=si):(si=gs(Dt.type,Dt.key,Dt.props,null,wt.mode,si),Di(si,Dt),si.return=wt,wt=si)}return Je(wt);case ws:e:{for(Ai=Dt.key;bt!==null;){if(bt.key===Ai)if(bt.tag===4&&bt.stateNode.containerInfo===Dt.containerInfo&&bt.stateNode.implementation===Dt.implementation){Se(wt,bt.sibling),si=De(bt,Dt.children||[]),si.return=wt,wt=si;break e}else{Se(wt,bt);break}else ge(wt,bt);bt=bt.sibling}si=Zo(Dt,wt.mode,si),si.return=wt,wt=si}return Je(wt);case Ps:return Ai=Dt._init,Dt=Ai(Dt._payload),ko(wt,bt,Dt,si)}if(Wa(Dt))return Wr(wt,bt,Dt,si);if(ee(Dt)){if(Ai=ee(Dt),typeof Ai!="function")throw Error(Q(150));return Dt=Ai.call(Dt),fc(wt,bt,Dt,si)}if(typeof Dt.then=="function")return ko(wt,bt,pi(Dt),si);if(Dt.$$typeof===Ys)return ko(wt,bt,Ll(wt,Dt),si);Si(wt,Dt)}return typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint"?(Dt=""+Dt,bt!==null&&bt.tag===6?(Se(wt,bt.sibling),si=De(bt,Dt),si.return=wt,wt=si):(Se(wt,bt),si=Ya(Dt,wt.mode,si),si.return=wt,wt=si),Je(wt)):Se(wt,bt)}return function(wt,bt,Dt,si){try{bs=0;var Ai=ko(wt,bt,Dt,si);return Ks=null,Ai}catch(Ni){if(Ni===fn)throw Ni;var Sn=J(29,Ni,null,wt.mode);return Sn.lanes=si,Sn.return=wt,Sn}finally{}}}function Tr(me,ge){me=Ds,_e(cs,me),_e(Zs,ge),Ds=me|ge.baseLanes}function Ln(){_e(cs,Ds),_e(Zs,Zs.current)}function wr(){Ds=cs.current,fe(Zs),fe(cs)}function _n(me){var ge=me.alternate;_e(Kn,Kn.current&1),_e(us,me),xs===null&&(ge===null||Zs.current!==null||ge.memoizedState!==null)&&(xs=me)}function Ir(me){if(me.tag===22){if(_e(Kn,Kn.current),_e(us,me),xs===null){var ge=me.alternate;ge!==null&&ge.memoizedState!==null&&(xs=me)}}else Bn()}function Bn(){_e(Kn,Kn.current),_e(us,us.current)}function $n(me){fe(us),xs===me&&(xs=null),fe(Kn)}function Mn(me){for(var ge=me;ge!==null;){if(ge.tag===13){var Se=ge.memoizedState;if(Se!==null&&(Se=Se.dehydrated,Se===null||Qc(Se)||Zl(Se)))return ge}else if(ge.tag===19&&ge.memoizedProps.revealOrder!==void 0){if((ge.flags&128)!==0)return ge}else if(ge.child!==null){ge.child.return=ge,ge=ge.child;continue}if(ge===me)break;for(;ge.sibling===null;){if(ge.return===null||ge.return===me)return null;ge=ge.return}ge.sibling.return=ge.return,ge=ge.sibling}return null}function ki(){throw Error(Q(321))}function On(me,ge){if(ge===null)return!1;for(var Se=0;Se<ge.length&&Se<me.length;Se++)if(!rs(me[Se],ge[Se]))return!1;return!0}function Ur(me,ge,Se,Pe,De,ke){return Qs=ke,zi=ge,ge.memoizedState=null,ge.updateQueue=null,ge.lanes=0,Pi.H=me===null||me.memoizedState===null?Zn:Cr,Aa=!1,ke=Se(Pe,De),Aa=!1,Rn&&(ke=ra(ge,Se,Pe,De)),ks(me),ke}function ks(me){Pi.H=nn;var ge=an!==null&&an.next!==null;if(Qs=0,Hn=an=zi=null,As=!1,jn=0,hl=null,ge)throw Error(Q(300));me===null||Yn||(me=me.dependencies,me!==null&&La(me)&&(Yn=!0))}function ra(me,ge,Se,Pe){zi=me;var De=0;do{if(Rn&&(hl=null),jn=0,Rn=!1,25<=De)throw Error(Q(301));if(De+=1,Hn=an=null,me.updateQueue!=null){var ke=me.updateQueue;ke.lastEffect=null,ke.events=null,ke.stores=null,ke.memoCache!=null&&(ke.memoCache.index=0)}Pi.H=so,ke=ge(Se,Pe)}while(Rn);return ke}function Al(){var me=Pi.H,ge=me.useState()[0];return ge=typeof ge.then=="function"?nt(ge):ge,me=me.useState()[0],(an!==null?an.memoizedState:null)!==me&&(zi.flags|=1024),ge}function sa(){var me=hc!==0;return hc=0,me}function ct(me,ge,Se){ge.updateQueue=me.updateQueue,ge.flags&=-2053,me.lanes&=~Se}function Tt(me){if(As){for(me=me.memoizedState;me!==null;){var ge=me.queue;ge!==null&&(ge.pending=null),me=me.next}As=!1}Qs=0,Hn=an=zi=null,Rn=!1,jn=hc=0,hl=null}function Xt(){var me={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?zi.memoizedState=Hn=me:Hn=Hn.next=me,Hn}function Ve(){if(an===null){var me=zi.alternate;me=me!==null?me.memoizedState:null}else me=an.next;var ge=Hn===null?zi.memoizedState:Hn.next;if(ge!==null)Hn=ge,an=me;else{if(me===null)throw zi.alternate===null?Error(Q(467)):Error(Q(310));an=me,me={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},Hn===null?zi.memoizedState=Hn=me:Hn=Hn.next=me}return Hn}function nt(me){var ge=jn;return jn+=1,hl===null&&(hl=[]),me=Vt(hl,me,ge),ge=zi,(Hn===null?ge.memoizedState:Hn.next)===null&&(ge=ge.alternate,Pi.H=ge===null||ge.memoizedState===null?Zn:Cr),me}function gt(me){if(me!==null&&typeof me=="object"){if(typeof me.then=="function")return nt(me);if(me.$$typeof===Ys)return hr(me)}throw Error(Q(438,String(me)))}function mt(me){var ge=null,Se=zi.updateQueue;if(Se!==null&&(ge=Se.memoCache),ge==null){var Pe=zi.alternate;Pe!==null&&(Pe=Pe.updateQueue,Pe!==null&&(Pe=Pe.memoCache,Pe!=null&&(ge={data:Pe.data.map(function(De){return De.slice()}),index:0})))}if(ge==null&&(ge={data:[],index:0}),Se===null&&(Se=uu(),zi.updateQueue=Se),Se.memoCache=ge,Se=ge.data[ge.index],Se===void 0)for(Se=ge.data[ge.index]=Array(me),Pe=0;Pe<me;Pe++)Se[Pe]=yd;return ge.index++,Se}function ut(me,ge){return typeof ge=="function"?ge(me):ge}function ri(me){var ge=Ve();return ci(ge,an,me)}function ci(me,ge,Se){var Pe=me.queue;if(Pe===null)throw Error(Q(311));Pe.lastRenderedReducer=Se;var De=me.baseQueue,ke=Pe.pending;if(ke!==null){if(De!==null){var Je=De.next;De.next=ke.next,ke.next=Je}ge.baseQueue=De=ke,Pe.pending=null}if(ke=me.baseState,De===null)me.memoizedState=ke;else{ge=De.next;var at=Je=null,At=null,Yt=ge,li=!1;do{var mi=Yt.lane&-536870913;if(mi!==Yt.lane?(Fi&mi)===mi:(Qs&mi)===mi){var gi=Yt.revertLane;if(gi===0)At!==null&&(At=At.next={lane:0,revertLane:0,action:Yt.action,hasEagerState:Yt.hasEagerState,eagerState:Yt.eagerState,next:null}),mi===Yr&&(li=!0);else if((Qs&gi)===gi){Yt=Yt.next,gi===Yr&&(li=!0);continue}else mi={lane:0,revertLane:Yt.revertLane,action:Yt.action,hasEagerState:Yt.hasEagerState,eagerState:Yt.eagerState,next:null},At===null?(at=At=mi,Je=ke):At=At.next=mi,zi.lanes|=gi,ds|=gi;mi=Yt.action,Aa&&Se(ke,mi),ke=Yt.hasEagerState?Yt.eagerState:Se(ke,mi)}else gi={lane:mi,revertLane:Yt.revertLane,action:Yt.action,hasEagerState:Yt.hasEagerState,eagerState:Yt.eagerState,next:null},At===null?(at=At=gi,Je=ke):At=At.next=gi,zi.lanes|=mi,ds|=mi;Yt=Yt.next}while(Yt!==null&&Yt!==ge);if(At===null?Je=ke:At.next=at,!rs(ke,me.memoizedState)&&(Yn=!0,li&&(Se=io,Se!==null)))throw Se;me.memoizedState=ke,me.baseState=Je,me.baseQueue=At,Pe.lastRenderedState=ke}return De===null&&(Pe.lanes=0),[me.memoizedState,Pe.dispatch]}function ui(me){var ge=Ve(),Se=ge.queue;if(Se===null)throw Error(Q(311));Se.lastRenderedReducer=me;var Pe=Se.dispatch,De=Se.pending,ke=ge.memoizedState;if(De!==null){Se.pending=null;var Je=De=De.next;do ke=me(ke,Je.action),Je=Je.next;while(Je!==De);rs(ke,ge.memoizedState)||(Yn=!0),ge.memoizedState=ke,ge.baseQueue===null&&(ge.baseState=ke),Se.lastRenderedState=ke}return[ke,Pe]}function oi(me,ge,Se){var Pe=zi,De=Ve(),ke=tn;if(ke){if(Se===void 0)throw Error(Q(407));Se=Se()}else Se=ge();var Je=!rs((an||De).memoizedState,Se);if(Je&&(De.memoizedState=Se,Yn=!0),De=De.queue,Cl(bi.bind(null,Pe,De,me),[me]),De.getSnapshot!==ge||Je||Hn!==null&&Hn.memoizedState.tag&1){if(Pe.flags|=2048,kn(9,Ti.bind(null,Pe,De,Se,ge),{destroy:void 0},null),Gi===null)throw Error(Q(349));ke||(Qs&60)!==0||vi(Pe,ge,Se)}return Se}function vi(me,ge,Se){me.flags|=16384,me={getSnapshot:ge,value:Se},ge=zi.updateQueue,ge===null?(ge=uu(),zi.updateQueue=ge,ge.stores=[me]):(Se=ge.stores,Se===null?ge.stores=[me]:Se.push(me))}function Ti(me,ge,Se,Pe){ge.value=Se,ge.getSnapshot=Pe,Ii(ge)&&Ji(me)}function bi(me,ge,Se){return Se(function(){Ii(ge)&&Ji(me)})}function Ii(me){var ge=me.getSnapshot;me=me.value;try{var Se=ge();return!rs(me,Se)}catch{return!0}}function Ji(me){var ge=Bt(me,2);ge!==null&&br(ge,me,2)}function Ki(me){var ge=Xt();if(typeof me=="function"){var Se=me;if(me=Se(),Aa){ze(!0);try{Se()}finally{ze(!1)}}}return ge.memoizedState=ge.baseState=me,ge.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ut,lastRenderedState:me},ge}function Hi(me,ge,Se,Pe){return me.baseState=Se,ci(me,an,typeof Pe=="function"?Pe:ut)}function on(me,ge,Se,Pe,De){if(ho(me))throw Error(Q(485));if(me=ge.action,me!==null){var ke={payload:De,action:me,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Je){ke.listeners.push(Je)}};Pi.T!==null?Se(!0):ke.isTransition=!1,Pe(ke),Se=ge.pending,Se===null?(ke.next=ge.pending=ke,Mi(ge,ke)):(ke.next=Se.next,ge.pending=Se.next=ke)}}function Mi(me,ge){var Se=ge.action,Pe=ge.payload,De=me.state;if(ge.isTransition){var ke=Pi.T,Je={};Pi.T=Je;try{var at=Se(De,Pe),At=Pi.S;At!==null&&At(Je,at),pn(me,ge,at)}catch(Yt){Wn(me,ge,Yt)}finally{Pi.T=ke}}else try{ke=Se(De,Pe),pn(me,ge,ke)}catch(Yt){Wn(me,ge,Yt)}}function pn(me,ge,Se){Se!==null&&typeof Se=="object"&&typeof Se.then=="function"?Se.then(function(Pe){Yi(me,ge,Pe)},function(Pe){return Wn(me,ge,Pe)}):Yi(me,ge,Se)}function Yi(me,ge,Se){ge.status="fulfilled",ge.value=Se,aa(ge),me.state=Se,ge=me.pending,ge!==null&&(Se=ge.next,Se===ge?me.pending=null:(Se=Se.next,ge.next=Se,Mi(me,Se)))}function Wn(me,ge,Se){var Pe=me.pending;if(me.pending=null,Pe!==null){Pe=Pe.next;do ge.status="rejected",ge.reason=Se,aa(ge),ge=ge.next;while(ge!==Pe)}me.action=null}function aa(me){me=me.listeners;for(var ge=0;ge<me.length;ge++)(0,me[ge])()}function yn(me,ge){return ge}function Is(me,ge){if(tn){var Se=Gi.formState;if(Se!==null){e:{var Pe=zi;if(tn){if(gr){var De=Md(gr,ys);if(De){gr=xh(De),Pe=Td(De);break e}}ft(Pe)}Pe=!1}Pe&&(ge=Se[0])}}Se=Xt(),Se.memoizedState=Se.baseState=ge,Pe={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yn,lastRenderedState:ge},Se.queue=Pe,Se=vc.bind(null,zi,Pe),Pe.dispatch=Se,Pe=Ki(!1);var ke=_c.bind(null,zi,!1,Pe.queue);return Pe=Xt(),De={state:ge,dispatch:null,action:me,pending:null},Pe.queue=De,Se=on.bind(null,zi,De,ke,Se),De.dispatch=Se,Pe.memoizedState=me,[ge,Se,!1]}function bn(me){var ge=Ve();return Qn(ge,an,me)}function Qn(me,ge,Se){ge=ci(me,ge,yn)[0],me=ri(ut)[0],ge=typeof ge=="object"&&ge!==null&&typeof ge.then=="function"?nt(ge):ge;var Pe=Ve(),De=Pe.queue,ke=De.dispatch;return Se!==Pe.memoizedState&&(zi.flags|=2048,kn(9,er.bind(null,De,Se),{destroy:void 0},null)),[ge,ke,me]}function er(me,ge){me.action=ge}function tr(me){var ge=Ve(),Se=an;if(Se!==null)return Qn(ge,Se,me);Ve(),ge=ge.memoizedState,Se=Ve();var Pe=Se.queue.dispatch;return Se.memoizedState=me,[ge,Pe,!1]}function kn(me,ge,Se,Pe){return me={tag:me,create:ge,inst:Se,deps:Pe,next:null},ge=zi.updateQueue,ge===null&&(ge=uu(),zi.updateQueue=ge),Se=ge.lastEffect,Se===null?ge.lastEffect=me.next=me:(Pe=Se.next,Se.next=me,me.next=Pe,ge.lastEffect=me),me}function Cs(){return Ve().memoizedState}function ms(me,ge,Se,Pe){var De=Xt();zi.flags|=me,De.memoizedState=kn(1|ge,Se,{destroy:void 0},Pe===void 0?null:Pe)}function Sl(me,ge,Se,Pe){var De=Ve();Pe=Pe===void 0?null:Pe;var ke=De.memoizedState.inst;an!==null&&Pe!==null&&On(Pe,an.memoizedState.deps)?De.memoizedState=kn(ge,Se,ke,Pe):(zi.flags|=me,De.memoizedState=kn(1|ge,Se,ke,Pe))}function Su(me,ge){ms(8390656,8,me,ge)}function Cl(me,ge){Sl(2048,8,me,ge)}function $h(me,ge){return Sl(4,2,me,ge)}function Wh(me,ge){return Sl(4,4,me,ge)}function El(me,ge){if(typeof ge=="function"){me=me();var Se=ge(me);return function(){typeof Se=="function"?Se():ge(null)}}if(ge!=null)return me=me(),ge.current=me,function(){ge.current=null}}function Us(me,ge,Se){Se=Se!=null?Se.concat([me]):null,Sl(4,4,El.bind(null,ge,me),Se)}function Ml(){}function pc(me,ge){var Se=Ve();ge=ge===void 0?null:ge;var Pe=Se.memoizedState;return ge!==null&&On(ge,Pe[1])?Pe[0]:(Se.memoizedState=[me,ge],me)}function co(me,ge){var Se=Ve();ge=ge===void 0?null:ge;var Pe=Se.memoizedState;if(ge!==null&&On(ge,Pe[1]))return Pe[0];if(Pe=me(),Aa){ze(!0);try{me()}finally{ze(!1)}}return Se.memoizedState=[Pe,ge],Pe}function Pa(me,ge,Se){return Se===void 0||(Qs&1073741824)!==0?me.memoizedState=ge:(me.memoizedState=Se,me=Fs(),zi.lanes|=me,ds|=me,Se)}function Cu(me,ge,Se,Pe){return rs(Se,ge)?Se:Zs.current!==null?(me=Pa(me,Se,Pe),rs(me,ge)||(Yn=!0),me):(Qs&42)===0?(Yn=!0,me.memoizedState=Se):(me=Fs(),zi.lanes|=me,ds|=me,ge)}function mc(me,ge,Se,Pe,De){var ke=ir();Ar(ke!==0&&8>ke?ke:8);var Je=Pi.T,at={};Pi.T=at,_c(me,!1,ge,Se);try{var At=De(),Yt=Pi.S;if(Yt!==null&&Yt(at,At),At!==null&&typeof At=="object"&&typeof At.then=="function"){var li=Zt(At,Pe);Oa(me,ge,li,Or(me))}else Oa(me,ge,Pe,Or(me))}catch(mi){Oa(me,ge,{then:function(){},status:"rejected",reason:mi},Or())}finally{Ar(ke),Pi.T=Je}}function Eu(me){var ge=me.memoizedState;if(ge!==null)return ge;ge={memoizedState:Vr,baseState:Vr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ut,lastRenderedState:Vr},next:null};var Se={};return ge.next={memoizedState:Se,baseState:Se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ut,lastRenderedState:Se},next:null},me.memoizedState=ge,me=me.alternate,me!==null&&(me.memoizedState=ge),ge}function uo(){return hr(Oi)}function zs(){return Ve().memoizedState}function gc(){return Ve().memoizedState}function Tl(me){for(var ge=me.return;ge!==null;){switch(ge.tag){case 24:case 3:var Se=Or();me=Rt(Se);var Pe=Pt(ge,me,Se);Pe!==null&&(br(Pe,ge,Se),vt(Pe,ge,Se)),ge={cache:Cc()},me.payload=ge;return}ge=ge.return}}function Ra(me,ge,Se){var Pe=Or();Se={lane:Pe,revertLane:0,action:Se,hasEagerState:!1,eagerState:null,next:null},ho(me)?wl(ge,Se):(Se=Mt(me,ge,Se,Pe),Se!==null&&(br(Se,me,Pe),Mu(Se,ge,Pe)))}function vc(me,ge,Se){var Pe=Or();Oa(me,ge,Se,Pe)}function Oa(me,ge,Se,Pe){var De={lane:Pe,revertLane:0,action:Se,hasEagerState:!1,eagerState:null,next:null};if(ho(me))wl(ge,De);else{var ke=me.alternate;if(me.lanes===0&&(ke===null||ke.lanes===0)&&(ke=ge.lastRenderedReducer,ke!==null))try{var Je=ge.lastRenderedState,at=ke(Je,Se);if(De.hasEagerState=!0,De.eagerState=at,rs(at,Je))return Ke(me,ge,De,0),Gi===null&&pt(),!1}catch{}finally{}if(Se=Mt(me,ge,De,Pe),Se!==null)return br(Se,me,Pe),Mu(Se,ge,Pe),!0}return!1}function _c(me,ge,Se,Pe){if(Pe={lane:2,revertLane:yt(),action:Pe,hasEagerState:!1,eagerState:null,next:null},ho(me)){if(ge)throw Error(Q(479))}else ge=Mt(me,Se,Pe,2),ge!==null&&br(ge,me,2)}function ho(me){var ge=me.alternate;return me===zi||ge!==null&&ge===zi}function wl(me,ge){Rn=As=!0;var Se=me.pending;Se===null?ge.next=ge:(ge.next=Se.next,Se.next=ge),me.pending=ge}function Mu(me,ge,Se){if((Se&4194176)!==0){var Pe=ge.lanes;Pe&=me.pendingLanes,Se|=Pe,ge.lanes=Se,Ge(me,Se)}}function vr(me,ge,Se,Pe){ge=me.memoizedState,Se=Se(Pe,ge),Se=Se==null?ge:Ao({},ge,Se),me.memoizedState=Se,me.lanes===0&&(me.updateQueue.baseState=Se)}function Na(me,ge,Se,Pe,De,ke,Je){return me=me.stateNode,typeof me.shouldComponentUpdate=="function"?me.shouldComponentUpdate(Pe,ke,Je):ge.prototype&&ge.prototype.isPureReactComponent?!zt(Se,Pe)||!zt(De,ke):!0}function Pl(me,ge,Se,Pe){me=ge.state,typeof ge.componentWillReceiveProps=="function"&&ge.componentWillReceiveProps(Se,Pe),typeof ge.UNSAFE_componentWillReceiveProps=="function"&&ge.UNSAFE_componentWillReceiveProps(Se,Pe),ge.state!==me&&hu.enqueueReplaceState(ge,ge.state,null)}function Es(me,ge){var Se=ge;if("ref"in ge){Se={};for(var Pe in ge)Pe!=="ref"&&(Se[Pe]=ge[Pe])}if(me=me.defaultProps){Se===ge&&(Se=Ao({},Se));for(var De in me)Se[De]===void 0&&(Se[De]=me[De])}return Se}function yc(me,ge){try{var Se=me.onUncaughtError;Se(ge.value,{componentStack:ge.stack})}catch(Pe){setTimeout(function(){throw Pe})}}function bc(me,ge,Se){try{var Pe=me.onCaughtError;Pe(Se.value,{componentStack:Se.stack,errorBoundary:ge.tag===1?ge.stateNode:null})}catch(De){setTimeout(function(){throw De})}}function Rl(me,ge,Se){return Se=Rt(Se),Se.tag=3,Se.payload={element:null},Se.callback=function(){yc(me,ge)},Se}function Uo(me){return me=Rt(me),me.tag=3,me}function Ol(me,ge,Se,Pe){var De=Se.type.getDerivedStateFromError;if(typeof De=="function"){var ke=Pe.value;me.payload=function(){return De(ke)},me.callback=function(){bc(ge,Se,Pe)}}var Je=Se.stateNode;Je!==null&&typeof Je.componentDidCatch=="function"&&(me.callback=function(){bc(ge,Se,Pe),typeof De!="function"&&(ps===null?ps=new Set([this]):ps.add(this));var at=Pe.stack;this.componentDidCatch(Pe.value,{componentStack:at!==null?at:""})})}function Jh(me,ge,Se,Pe,De){if(Se.flags|=32768,Pe!==null&&typeof Pe=="object"&&typeof Pe.then=="function"){if(ge=Se.alternate,ge!==null&&fo(ge,Se,De,!0),Se=us.current,Se!==null){switch(Se.tag){case 13:return xs===null?Fr():Se.alternate===null&&Qi===0&&(Qi=3),Se.flags&=-257,Se.flags|=65536,Se.lanes=De,Pe===cu?Se.flags|=16384:(ge=Se.updateQueue,ge===null?Se.updateQueue=new Set([Pe]):ge.add(Pe),Fc(me,Pe,De)),!1;case 22:return Se.flags|=65536,Pe===cu?Se.flags|=16384:(ge=Se.updateQueue,ge===null?(ge={transitions:null,markerInstances:null,retryQueue:new Set([Pe])},Se.updateQueue=ge):(Se=ge.retryQueue,Se===null?ge.retryQueue=new Set([Pe]):Se.add(Pe)),Fc(me,Pe,De)),!1}throw Error(Q(435,Se.tag))}return Fc(me,Pe,De),Fr(),!1}if(tn)return ge=us.current,ge!==null?((ge.flags&65536)===0&&(ge.flags|=256),ge.flags|=65536,ge.lanes=De,Pe!==ac&&(me=Error(Q(422),{cause:Pe}),jt($e(me,Se)))):(Pe!==ac&&(ge=Error(Q(423),{cause:Pe}),jt($e(ge,Se))),me=me.current.alternate,me.flags|=65536,De&=-De,me.lanes|=De,Pe=$e(Pe,Se),De=Rl(me.stateNode,Pe,De),tt(me,De),Qi!==4&&(Qi=2)),!1;var ke=Error(Q(520),{cause:Pe});if(ke=$e(ke,Se),fl===null?fl=[ke]:fl.push(ke),Qi!==4&&(Qi=2),ge===null)return!0;Pe=$e(Pe,Se),Se=ge;do{switch(Se.tag){case 3:return Se.flags|=65536,me=De&-De,Se.lanes|=me,me=Rl(Se.stateNode,Pe,me),tt(Se,me),!1;case 1:if(ge=Se.type,ke=Se.stateNode,(Se.flags&128)===0&&(typeof ge.getDerivedStateFromError=="function"||ke!==null&&typeof ke.componentDidCatch=="function"&&(ps===null||!ps.has(ke))))return Se.flags|=65536,De&=-De,Se.lanes|=De,De=Uo(De),Ol(De,me,Se,Pe),tt(Se,De),!1}Se=Se.return}while(Se!==null);return!1}function ur(me,ge,Se,Pe){ge.child=me===null?kh(ge,null,Se,Pe):ro(ge,me.child,Se,Pe)}function Kh(me,ge,Se,Pe,De){Se=Se.render;var ke=ge.ref;if("ref"in Pe){var Je={};for(var at in Pe)at!=="ref"&&(Je[at]=Pe[at])}else Je=Pe;return po(ge),Pe=Ur(me,ge,Se,Je,ke,De),at=sa(),me!==null&&!Yn?(ct(me,ge,De),oa(me,ge,De)):(tn&&at&&qe(ge),ge.flags|=1,ur(me,ge,Pe,De),ge.child)}function Zh(me,ge,Se,Pe,De){if(me===null){var ke=Se.type;return typeof ke=="function"&&!fa(ke)&&ke.defaultProps===void 0&&Se.compare===null?(ge.tag=15,ge.type=ke,xc(me,ge,ke,Pe,De)):(me=gs(Se.type,null,Pe,ge,ge.mode,De),me.ref=ge.ref,me.return=ge,ge.child=me)}if(ke=me.child,!Du(me,De)){var Je=ke.memoizedProps;if(Se=Se.compare,Se=Se!==null?Se:zt,Se(Je,Pe)&&me.ref===ge.ref)return oa(me,ge,De)}return ge.flags|=1,me=xr(ke,Pe),me.ref=ge.ref,me.return=ge,ge.child=me}function xc(me,ge,Se,Pe,De){if(me!==null){var ke=me.memoizedProps;if(zt(ke,Pe)&&me.ref===ge.ref)if(Yn=!1,ge.pendingProps=Pe=ke,Du(me,De))(me.flags&131072)!==0&&(Yn=!0);else return ge.lanes=me.lanes,oa(me,ge,De)}return Tu(me,ge,Se,Pe,De)}function Qh(me,ge,Se){var Pe=ge.pendingProps,De=Pe.children,ke=(ge.stateNode._pendingVisibility&2)!==0,Je=me!==null?me.memoizedState:null;if(Nl(me,ge),Pe.mode==="hidden"||ke){if((ge.flags&128)!==0){if(Pe=Je!==null?Je.baseLanes|Se:Se,me!==null){for(De=ge.child=me.child,ke=0;De!==null;)ke=ke|De.lanes|De.childLanes,De=De.sibling;ge.childLanes=ke&~Pe}else ge.childLanes=0,ge.child=null;return ed(me,ge,Pe,Se)}if((Se&536870912)!==0)ge.memoizedState={baseLanes:0,cachePool:null},me!==null&&Ec(ge,Je!==null?Je.cachePool:null),Je!==null?Tr(ge,Je):Ln(),Ir(ge);else return ge.lanes=ge.childLanes=536870912,ed(me,ge,Je!==null?Je.baseLanes|Se:Se,Se)}else Je!==null?(Ec(ge,Je.cachePool),Tr(ge,Je),Bn(),ge.memoizedState=null):(me!==null&&Ec(ge,null),Ln(),Bn());return ur(me,ge,De,Se),ge.child}function ed(me,ge,Se,Pe){var De=Ba();return De=De===null?null:{parent:qs?ln._currentValue:ln._currentValue2,pool:De},ge.memoizedState={baseLanes:Se,cachePool:De},me!==null&&Ec(ge,null),Ln(),Ir(ge),me!==null&&fo(me,ge,Pe,!0),null}function Nl(me,ge){var Se=ge.ref;if(Se===null)me!==null&&me.ref!==null&&(ge.flags|=2097664);else{if(typeof Se!="function"&&typeof Se!="object")throw Error(Q(284));(me===null||me.ref!==Se)&&(ge.flags|=2097664)}}function Tu(me,ge,Se,Pe,De){return po(ge),Se=Ur(me,ge,Se,Pe,void 0,De),Pe=sa(),me!==null&&!Yn?(ct(me,ge,De),oa(me,ge,De)):(tn&&Pe&&qe(ge),ge.flags|=1,ur(me,ge,Se,De),ge.child)}function td(me,ge,Se,Pe,De,ke){return po(ge),ge.updateQueue=null,Se=ra(ge,Pe,Se,De),ks(me),Pe=sa(),me!==null&&!Yn?(ct(me,ge,ke),oa(me,ge,ke)):(tn&&Pe&&qe(ge),ge.flags|=1,ur(me,ge,Se,ke),ge.child)}function wu(me,ge,Se,Pe,De){if(po(ge),ge.stateNode===null){var ke=To,Je=Se.contextType;typeof Je=="object"&&Je!==null&&(ke=hr(Je)),ke=new Se(Pe,ke),ge.memoizedState=ke.state!==null&&ke.state!==void 0?ke.state:null,ke.updater=hu,ge.stateNode=ke,ke._reactInternals=ge,ke=ge.stateNode,ke.props=Pe,ke.state=ge.memoizedState,ke.refs={},Ut(ge),Je=Se.contextType,ke.context=typeof Je=="object"&&Je!==null?hr(Je):To,ke.state=ge.memoizedState,Je=Se.getDerivedStateFromProps,typeof Je=="function"&&(vr(ge,Se,Je,Pe),ke.state=ge.memoizedState),typeof Se.getDerivedStateFromProps=="function"||typeof ke.getSnapshotBeforeUpdate=="function"||typeof ke.UNSAFE_componentWillMount!="function"&&typeof ke.componentWillMount!="function"||(Je=ke.state,typeof ke.componentWillMount=="function"&&ke.componentWillMount(),typeof ke.UNSAFE_componentWillMount=="function"&&ke.UNSAFE_componentWillMount(),Je!==ke.state&&hu.enqueueReplaceState(ke,ke.state,null),ei(ge,Pe,ke,De),et(),ke.state=ge.memoizedState),typeof ke.componentDidMount=="function"&&(ge.flags|=4194308),Pe=!0}else if(me===null){ke=ge.stateNode;var at=ge.memoizedProps,At=Es(Se,at);ke.props=At;var Yt=ke.context,li=Se.contextType;Je=To,typeof li=="object"&&li!==null&&(Je=hr(li));var mi=Se.getDerivedStateFromProps;li=typeof mi=="function"||typeof ke.getSnapshotBeforeUpdate=="function",at=ge.pendingProps!==at,li||typeof ke.UNSAFE_componentWillReceiveProps!="function"&&typeof ke.componentWillReceiveProps!="function"||(at||Yt!==Je)&&Pl(ge,ke,Pe,Je),xa=!1;var gi=ge.memoizedState;ke.state=gi,ei(ge,Pe,ke,De),et(),Yt=ge.memoizedState,at||gi!==Yt||xa?(typeof mi=="function"&&(vr(ge,Se,mi,Pe),Yt=ge.memoizedState),(At=xa||Na(ge,Se,At,Pe,gi,Yt,Je))?(li||typeof ke.UNSAFE_componentWillMount!="function"&&typeof ke.componentWillMount!="function"||(typeof ke.componentWillMount=="function"&&ke.componentWillMount(),typeof ke.UNSAFE_componentWillMount=="function"&&ke.UNSAFE_componentWillMount()),typeof ke.componentDidMount=="function"&&(ge.flags|=4194308)):(typeof ke.componentDidMount=="function"&&(ge.flags|=4194308),ge.memoizedProps=Pe,ge.memoizedState=Yt),ke.props=Pe,ke.state=Yt,ke.context=Je,Pe=At):(typeof ke.componentDidMount=="function"&&(ge.flags|=4194308),Pe=!1)}else{ke=ge.stateNode,qt(me,ge),Je=ge.memoizedProps,li=Es(Se,Je),ke.props=li,mi=ge.pendingProps,gi=ke.context,Yt=Se.contextType,At=To,typeof Yt=="object"&&Yt!==null&&(At=hr(Yt)),at=Se.getDerivedStateFromProps,(Yt=typeof at=="function"||typeof ke.getSnapshotBeforeUpdate=="function")||typeof ke.UNSAFE_componentWillReceiveProps!="function"&&typeof ke.componentWillReceiveProps!="function"||(Je!==mi||gi!==At)&&Pl(ge,ke,Pe,At),xa=!1,gi=ge.memoizedState,ke.state=gi,ei(ge,Pe,ke,De),et();var Li=ge.memoizedState;Je!==mi||gi!==Li||xa||me!==null&&me.dependencies!==null&&La(me.dependencies)?(typeof at=="function"&&(vr(ge,Se,at,Pe),Li=ge.memoizedState),(li=xa||Na(ge,Se,li,Pe,gi,Li,At)||me!==null&&me.dependencies!==null&&La(me.dependencies))?(Yt||typeof ke.UNSAFE_componentWillUpdate!="function"&&typeof ke.componentWillUpdate!="function"||(typeof ke.componentWillUpdate=="function"&&ke.componentWillUpdate(Pe,Li,At),typeof ke.UNSAFE_componentWillUpdate=="function"&&ke.UNSAFE_componentWillUpdate(Pe,Li,At)),typeof ke.componentDidUpdate=="function"&&(ge.flags|=4),typeof ke.getSnapshotBeforeUpdate=="function"&&(ge.flags|=1024)):(typeof ke.componentDidUpdate!="function"||Je===me.memoizedProps&&gi===me.memoizedState||(ge.flags|=4),typeof ke.getSnapshotBeforeUpdate!="function"||Je===me.memoizedProps&&gi===me.memoizedState||(ge.flags|=1024),ge.memoizedProps=Pe,ge.memoizedState=Li),ke.props=Pe,ke.state=Li,ke.context=At,Pe=li):(typeof ke.componentDidUpdate!="function"||Je===me.memoizedProps&&gi===me.memoizedState||(ge.flags|=4),typeof ke.getSnapshotBeforeUpdate!="function"||Je===me.memoizedProps&&gi===me.memoizedState||(ge.flags|=1024),Pe=!1)}return ke=Pe,Nl(me,ge),Pe=(ge.flags&128)!==0,ke||Pe?(ke=ge.stateNode,Se=Pe&&typeof Se.getDerivedStateFromError!="function"?null:ke.render(),ge.flags|=1,me!==null&&Pe?(ge.child=ro(ge,me.child,null,De),ge.child=ro(ge,null,Se,De)):ur(me,ge,Se,De),ge.memoizedState=ke.state,me=ge.child):me=oa(me,ge,De),me}function id(me,ge,Se,Pe){return ni(),ge.flags|=256,ur(me,ge,Se,Pe),ge.child}function Pu(me){return{baseLanes:me,cachePool:od()}}function Ru(me,ge,Se){return me=me!==null?me.childLanes&~Se:0,ge&&(me|=$r),me}function nd(me,ge,Se){var Pe=ge.pendingProps,De=!1,ke=(ge.flags&128)!==0,Je;if((Je=ke)||(Je=me!==null&&me.memoizedState===null?!1:(Kn.current&2)!==0),Je&&(De=!0,ge.flags&=-129),Je=(ge.flags&32)!==0,ge.flags&=-33,me===null){if(tn){if(De?_n(ge):Bn(),tn){var at=gr,At;(At=at)&&(at=Nd(at,ys),at!==null?(ge.memoizedState={dehydrated:at,treeContext:Rs!==null?{id:Js,overflow:_s}:null,retryLane:536870912},At=J(18,null,null,0),At.stateNode=at,At.return=ge,ge.child=At,Sr=ge,gr=null,At=!0):At=!1),At||ft(ge)}if(at=ge.memoizedState,at!==null&&(at=at.dehydrated,at!==null))return Zl(at)?ge.lanes=16:ge.lanes=536870912,null;$n(ge)}return at=Pe.children,Pe=Pe.fallback,De?(Bn(),De=ge.mode,at=Ou({mode:"hidden",children:at},De),Pe=ma(Pe,De,Se,null),at.return=ge,Pe.return=ge,at.sibling=Pe,ge.child=at,De=ge.child,De.memoizedState=Pu(Se),De.childLanes=Ru(me,Je,Se),ge.memoizedState=Er,Pe):(_n(ge),Dl(ge,at))}if(At=me.memoizedState,At!==null&&(at=At.dehydrated,at!==null)){if(ke)ge.flags&256?(_n(ge),ge.flags&=-257,ge=Nu(me,ge,Se)):ge.memoizedState!==null?(Bn(),ge.child=me.child,ge.flags|=128,ge=null):(Bn(),De=Pe.fallback,at=ge.mode,Pe=Ou({mode:"visible",children:Pe.children},at),De=ma(De,at,Se,null),De.flags|=2,Pe.return=ge,De.return=ge,Pe.sibling=De,ge.child=Pe,ro(ge,me.child,null,Se),Pe=ge.child,Pe.memoizedState=Pu(Se),Pe.childLanes=Ru(me,Je,Se),ge.memoizedState=Er,ge=De);else if(_n(ge),Zl(at))Je=Ed(at).digest,Pe=Error(Q(419)),Pe.stack="",Pe.digest=Je,jt({value:Pe,source:null,stack:null}),ge=Nu(me,ge,Se);else if(Yn||fo(me,ge,Se,!1),Je=(Se&me.childLanes)!==0,Yn||Je){if(Je=Gi,Je!==null){if(Pe=Se&-Se,(Pe&42)!==0)Pe=1;else switch(Pe){case 2:Pe=1;break;case 8:Pe=4;break;case 32:Pe=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:Pe=64;break;case 268435456:Pe=134217728;break;default:Pe=0}if(Pe=(Pe&(Je.suspendedLanes|Se))!==0?0:Pe,Pe!==0&&Pe!==At.retryLane)throw At.retryLane=Pe,Bt(me,Pe),br(Je,me,Pe),qd}Qc(at)||Fr(),ge=Nu(me,ge,Se)}else Qc(at)?(ge.flags|=128,ge.child=me.child,ge=bo.bind(null,me),vf(at,ge),ge=null):(me=At.treeContext,Nr&&(gr=Pd(at),Sr=ge,tn=!0,os=null,ys=!1,me!==null&&(ss[as++]=Js,ss[as++]=_s,ss[as++]=Rs,Js=me.id,_s=me.overflow,Rs=ge)),ge=Dl(ge,Pe.children),ge.flags|=4096);return ge}return De?(Bn(),De=Pe.fallback,at=ge.mode,At=me.child,ke=At.sibling,Pe=xr(At,{mode:"hidden",children:Pe.children}),Pe.subtreeFlags=At.subtreeFlags&31457280,ke!==null?De=xr(ke,De):(De=ma(De,at,Se,null),De.flags|=2),De.return=ge,Pe.return=ge,Pe.sibling=De,ge.child=Pe,Pe=De,De=ge.child,at=me.child.memoizedState,at===null?at=Pu(Se):(At=at.cachePool,At!==null?(ke=qs?ln._currentValue:ln._currentValue2,At=At.parent!==ke?{parent:ke,pool:ke}:At):At=od(),at={baseLanes:at.baseLanes|Se,cachePool:At}),De.memoizedState=at,De.childLanes=Ru(me,Je,Se),ge.memoizedState=Er,Pe):(_n(ge),Se=me.child,me=Se.sibling,Se=xr(Se,{mode:"visible",children:Pe.children}),Se.return=ge,Se.sibling=null,me!==null&&(Je=ge.deletions,Je===null?(ge.deletions=[me],ge.flags|=16):Je.push(me)),ge.child=Se,ge.memoizedState=null,Se)}function Dl(me,ge){return ge=Ou({mode:"visible",children:ge},me.mode),ge.return=me,me.child=ge}function Ou(me,ge){return Vc(me,ge,0,null)}function Nu(me,ge,Se){return ro(ge,me.child,null,Se),me=Dl(ge,ge.pendingProps.children),me.flags|=2,ge.memoizedState=null,me}function rd(me,ge,Se){me.lanes|=ge;var Pe=me.alternate;Pe!==null&&(Pe.lanes|=ge),Lu(me.return,ge,Se)}function Ac(me,ge,Se,Pe,De){var ke=me.memoizedState;ke===null?me.memoizedState={isBackwards:ge,rendering:null,renderingStartTime:0,last:Pe,tail:Se,tailMode:De}:(ke.isBackwards=ge,ke.rendering=null,ke.renderingStartTime=0,ke.last=Pe,ke.tail=Se,ke.tailMode=De)}function sd(me,ge,Se){var Pe=ge.pendingProps,De=Pe.revealOrder,ke=Pe.tail;if(ur(me,ge,Pe.children,Se),Pe=Kn.current,(Pe&2)!==0)Pe=Pe&1|2,ge.flags|=128;else{if(me!==null&&(me.flags&128)!==0)e:for(me=ge.child;me!==null;){if(me.tag===13)me.memoizedState!==null&&rd(me,Se,ge);else if(me.tag===19)rd(me,Se,ge);else if(me.child!==null){me.child.return=me,me=me.child;continue}if(me===ge)break e;for(;me.sibling===null;){if(me.return===null||me.return===ge)break e;me=me.return}me.sibling.return=me.return,me=me.sibling}Pe&=1}switch(_e(Kn,Pe),De){case"forwards":for(Se=ge.child,De=null;Se!==null;)me=Se.alternate,me!==null&&Mn(me)===null&&(De=Se),Se=Se.sibling;Se=De,Se===null?(De=ge.child,ge.child=null):(De=Se.sibling,Se.sibling=null),Ac(ge,!1,De,Se,ke);break;case"backwards":for(Se=null,De=ge.child,ge.child=null;De!==null;){if(me=De.alternate,me!==null&&Mn(me)===null){ge.child=De;break}me=De.sibling,De.sibling=Se,Se=De,De=me}Ac(ge,!0,Se,null,ke);break;case"together":Ac(ge,!1,null,null,void 0);break;default:ge.memoizedState=null}return ge.child}function oa(me,ge,Se){if(me!==null&&(ge.dependencies=me.dependencies),ds|=ge.lanes,(Se&ge.childLanes)===0)if(me!==null){if(fo(me,ge,Se,!1),(Se&ge.childLanes)===0)return null}else return null;if(me!==null&&ge.child!==me.child)throw Error(Q(153));if(ge.child!==null){for(me=ge.child,Se=xr(me,me.pendingProps),ge.child=Se,Se.return=ge;me.sibling!==null;)me=me.sibling,Se=Se.sibling=xr(me,me.pendingProps),Se.return=ge;Se.sibling=null}return ge.child}function Du(me,ge){return(me.lanes&ge)!==0?!0:(me=me.dependencies,!!(me!==null&&La(me)))}function pf(me,ge,Se){switch(ge.tag){case 3:st(ge,ge.stateNode.containerInfo),Da(ge,ln,me.memoizedState.cache),ni();break;case 27:case 5:it(ge);break;case 4:st(ge,ge.stateNode.containerInfo);break;case 10:Da(ge,ge.type,ge.memoizedProps.value);break;case 13:var Pe=ge.memoizedState;if(Pe!==null)return Pe.dehydrated!==null?(_n(ge),ge.flags|=128,null):(Se&ge.child.childLanes)!==0?nd(me,ge,Se):(_n(ge),me=oa(me,ge,Se),me!==null?me.sibling:null);_n(ge);break;case 19:var De=(me.flags&128)!==0;if(Pe=(Se&ge.childLanes)!==0,Pe||(fo(me,ge,Se,!1),Pe=(Se&ge.childLanes)!==0),De){if(Pe)return sd(me,ge,Se);ge.flags|=128}if(De=ge.memoizedState,De!==null&&(De.rendering=null,De.tail=null,De.lastEffect=null),_e(Kn,Kn.current),Pe)break;return null;case 22:case 23:return ge.lanes=0,Qh(me,ge,Se);case 24:Da(ge,ln,me.memoizedState.cache)}return oa(me,ge,Se)}function ad(me,ge,Se){if(me!==null)if(me.memoizedProps!==ge.pendingProps)Yn=!0;else{if(!Du(me,Se)&&(ge.flags&128)===0)return Yn=!1,pf(me,ge,Se);Yn=(me.flags&131072)!==0}else Yn=!1,tn&&(ge.flags&1048576)!==0&&je(ge,rc,ge.index);switch(ge.lanes=0,ge.tag){case 16:e:{me=ge.pendingProps;var Pe=ge.elementType,De=Pe._init;if(Pe=De(Pe._payload),ge.type=Pe,typeof Pe=="function")fa(Pe)?(me=Es(Pe,me),ge.tag=1,ge=wu(null,ge,Pe,me,Se)):(ge.tag=0,ge=Tu(null,ge,Pe,me,Se));else{if(Pe!=null){if(De=Pe.$$typeof,De===el){ge.tag=11,ge=Kh(null,ge,Pe,me,Se);break e}else if(De===Hl){ge.tag=14,ge=Zh(null,ge,Pe,me,Se);break e}}throw ge=te(Pe)||Pe,Error(Q(306,ge,""))}}return ge;case 0:return Tu(me,ge,ge.type,ge.pendingProps,Se);case 1:return Pe=ge.type,De=Es(Pe,ge.pendingProps),wu(me,ge,Pe,De,Se);case 3:e:{if(st(ge,ge.stateNode.containerInfo),me===null)throw Error(Q(387));var ke=ge.pendingProps;De=ge.memoizedState,Pe=De.element,qt(me,ge),ei(ge,ke,null,Se);var Je=ge.memoizedState;if(ke=Je.cache,Da(ge,ln,ke),ke!==De.cache&&Bu(ge,[ln],Se,!0),et(),ke=Je.element,Nr&&De.isDehydrated)if(De={element:ke,isDehydrated:!1,cache:Je.cache},ge.updateQueue.baseState=De,ge.memoizedState=De,ge.flags&256){ge=id(me,ge,ke,Se);break e}else if(ke!==Pe){Pe=$e(Error(Q(424)),ge),jt(Pe),ge=id(me,ge,ke,Se);break e}else for(Nr&&(gr=wd(ge.stateNode.containerInfo),Sr=ge,tn=!0,os=null,ys=!0),Se=kh(ge,null,ke,Se),ge.child=Se;Se;)Se.flags=Se.flags&-3|4096,Se=Se.sibling;else{if(ni(),ke===Pe){ge=oa(me,ge,Se);break e}ur(me,ge,ke,Se)}ge=ge.child}return ge;case 26:if(ns)return Nl(me,ge),me===null?(Se=ru(ge.type,null,ge.pendingProps,null))?ge.memoizedState=Se:tn||(ge.stateNode=yf(ge.type,ge.pendingProps,Os.current,ge)):ge.memoizedState=ru(ge.type,me.memoizedProps,ge.pendingProps,me.memoizedState),null;case 27:if(pr)return it(ge),me===null&&pr&&tn&&(Pe=ge.stateNode=Nh(ge.type,ge.pendingProps,Os.current,cr.current,!1),Sr=ge,ys=!0,gr=eu(Pe)),Pe=ge.pendingProps.children,me!==null||tn?ur(me,ge,Pe,Se):ge.child=ro(ge,null,Pe,Se),Nl(me,ge),ge.child;case 5:return me===null&&tn&&(Id(ge.type,ge.pendingProps,cr.current),(De=Pe=gr)&&(Pe=Rd(Pe,ge.type,ge.pendingProps,ys),Pe!==null?(ge.stateNode=Pe,Sr=ge,gr=eu(Pe),ys=!1,De=!0):De=!1),De||ft(ge)),it(ge),De=ge.type,ke=ge.pendingProps,Je=me!==null?me.memoizedProps:null,Pe=ke.children,Ka(De,ke)?Pe=null:Je!==null&&Ka(De,Je)&&(ge.flags|=32),ge.memoizedState!==null&&(De=Ur(me,ge,Al,null,null,Se),qs?Oi._currentValue=De:Oi._currentValue2=De),Nl(me,ge),ur(me,ge,Pe,Se),ge.child;case 6:return me===null&&tn&&(Ud(ge.pendingProps,cr.current),(me=Se=gr)&&(Se=Od(Se,ge.pendingProps,ys),Se!==null?(ge.stateNode=Se,Sr=ge,gr=null,me=!0):me=!1),me||ft(ge)),null;case 13:return nd(me,ge,Se);case 4:return st(ge,ge.stateNode.containerInfo),Pe=ge.pendingProps,me===null?ge.child=ro(ge,null,Pe,Se):ur(me,ge,Pe,Se),ge.child;case 11:return Kh(me,ge,ge.type,ge.pendingProps,Se);case 7:return ur(me,ge,ge.pendingProps,Se),ge.child;case 8:return ur(me,ge,ge.pendingProps.children,Se),ge.child;case 12:return ur(me,ge,ge.pendingProps.children,Se),ge.child;case 10:return Pe=ge.pendingProps,Da(ge,ge.type,Pe.value),ur(me,ge,Pe.children,Se),ge.child;case 9:return De=ge.type._context,Pe=ge.pendingProps.children,po(ge),De=hr(De),Pe=Pe(De),ge.flags|=1,ur(me,ge,Pe,Se),ge.child;case 14:return Zh(me,ge,ge.type,ge.pendingProps,Se);case 15:return xc(me,ge,ge.type,ge.pendingProps,Se);case 19:return sd(me,ge,Se);case 22:return Qh(me,ge,Se);case 24:return po(ge),Pe=hr(ln),me===null?(De=Ba(),De===null&&(De=Gi,ke=Cc(),De.pooledCache=ke,ke.refCount++,ke!==null&&(De.pooledCacheLanes|=Se),De=ke),ge.memoizedState={parent:Pe,cache:De},Ut(ge),Da(ge,ln,De)):((me.lanes&Se)!==0&&(qt(me,ge),ei(ge,null,null,Se),et()),De=me.memoizedState,ke=ge.memoizedState,De.parent!==Pe?(De={parent:Pe,cache:Pe},ge.memoizedState=De,ge.lanes===0&&(ge.memoizedState=ge.updateQueue.baseState=De),Da(ge,ln,Pe)):(Pe=ke.cache,Da(ge,ln,Pe),Pe!==De.cache&&Bu(ge,[ln],Se,!0))),ur(me,ge,ge.pendingProps.children,Se),ge.child;case 29:throw ge.pendingProps}throw Error(Q(156,ge.tag))}function Da(me,ge,Se){qs?(_e(Xr,ge._currentValue),ge._currentValue=Se):(_e(Xr,ge._currentValue2),ge._currentValue2=Se)}function la(me){var ge=Xr.current;qs?me._currentValue=ge:me._currentValue2=ge,fe(Xr)}function Lu(me,ge,Se){for(;me!==null;){var Pe=me.alternate;if((me.childLanes&ge)!==ge?(me.childLanes|=ge,Pe!==null&&(Pe.childLanes|=ge)):Pe!==null&&(Pe.childLanes&ge)!==ge&&(Pe.childLanes|=ge),me===Se)break;me=me.return}}function Bu(me,ge,Se,Pe){var De=me.child;for(De!==null&&(De.return=me);De!==null;){var ke=De.dependencies;if(ke!==null){var Je=De.child;ke=ke.firstContext;e:for(;ke!==null;){var at=ke;ke=De;for(var At=0;At<ge.length;At++)if(at.context===ge[At]){ke.lanes|=Se,at=ke.alternate,at!==null&&(at.lanes|=Se),Lu(ke.return,Se,me),Pe||(Je=null);break e}ke=at.next}}else if(De.tag===18){if(Je=De.return,Je===null)throw Error(Q(341));Je.lanes|=Se,ke=Je.alternate,ke!==null&&(ke.lanes|=Se),Lu(Je,Se,me),Je=null}else Je=De.child;if(Je!==null)Je.return=De;else for(Je=De;Je!==null;){if(Je===me){Je=null;break}if(De=Je.sibling,De!==null){De.return=Je.return,Je=De;break}Je=Je.return}De=Je}}function fo(me,ge,Se,Pe){me=null;for(var De=ge,ke=!1;De!==null;){if(!ke){if((De.flags&524288)!==0)ke=!0;else if((De.flags&262144)!==0)break}if(De.tag===10){var Je=De.alternate;if(Je===null)throw Error(Q(387));if(Je=Je.memoizedProps,Je!==null){var at=De.type;rs(De.pendingProps.value,Je.value)||(me!==null?me.push(at):me=[at])}}else if(De===ol.current){if(Je=De.alternate,Je===null)throw Error(Q(387));Je.memoizedState.memoizedState!==De.memoizedState.memoizedState&&(me!==null?me.push(Oi):me=[Oi])}De=De.return}me!==null&&Bu(ge,me,Se,Pe),ge.flags|=262144}function La(me){for(me=me.firstContext;me!==null;){var ge=me.context;if(!rs(qs?ge._currentValue:ge._currentValue2,me.memoizedValue))return!0;me=me.next}return!1}function po(me){ao=me,Fn=null,me=me.dependencies,me!==null&&(me.firstContext=null)}function hr(me){return ku(ao,me)}function Ll(me,ge){return ao===null&&po(me),ku(me,ge)}function ku(me,ge){var Se=qs?ge._currentValue:ge._currentValue2;if(ge={context:ge,memoizedValue:Se,next:null},Fn===null){if(me===null)throw Error(Q(308));Fn=ge,me.dependencies={lanes:0,firstContext:ge},me.flags|=524288}else Fn=Fn.next=ge;return Se}function Cc(){return{controller:new $d,data:new Map,refCount:0}}function zo(me){me.refCount--,me.refCount===0&&Sa(Ro,function(){me.controller.abort()})}function Ba(){var me=Ca.current;return me!==null?me:Gi.pooledCache}function Ec(me,ge){ge===null?_e(Ca,Ca.current):_e(Ca,ge.pool)}function od(){var me=Ba();return me===null?null:{parent:qs?ln._currentValue:ln._currentValue2,pool:me}}function Jr(me){me.flags|=4}function Iu(me,ge){if(me!==null&&me.child===ge.child)return!1;if((ge.flags&16)!==0)return!0;for(me=ge.child;me!==null;){if((me.flags&13878)!==0||(me.subtreeFlags&13878)!==0)return!0;me=me.sibling}return!1}function Mc(me,ge,Se,Pe){if(fr)for(Se=ge.child;Se!==null;){if(Se.tag===5||Se.tag===6)Xs(me,Se.stateNode);else if(!(Se.tag===4||pr&&Se.tag===27)&&Se.child!==null){Se.child.return=Se,Se=Se.child;continue}if(Se===ge)break;for(;Se.sibling===null;){if(Se.return===null||Se.return===ge)return;Se=Se.return}Se.sibling.return=Se.return,Se=Se.sibling}else if(Qr)for(var De=ge.child;De!==null;){if(De.tag===5){var ke=De.stateNode;Se&&Pe&&(ke=yh(ke,De.type,De.memoizedProps)),Xs(me,ke)}else if(De.tag===6)ke=De.stateNode,Se&&Pe&&(ke=bh(ke,De.memoizedProps)),Xs(me,ke);else if(De.tag!==4){if(De.tag===22&&De.memoizedState!==null)ke=De.child,ke!==null&&(ke.return=De),Mc(me,De,!0,!0);else if(De.child!==null){De.child.return=De,De=De.child;continue}}if(De===ge)break;for(;De.sibling===null;){if(De.return===null||De.return===ge)return;De=De.return}De.sibling.return=De.return,De=De.sibling}}function jo(me,ge,Se,Pe){if(Qr)for(var De=ge.child;De!==null;){if(De.tag===5){var ke=De.stateNode;Se&&Pe&&(ke=yh(ke,De.type,De.memoizedProps)),vh(me,ke)}else if(De.tag===6)ke=De.stateNode,Se&&Pe&&(ke=bh(ke,De.memoizedProps)),vh(me,ke);else if(De.tag!==4){if(De.tag===22&&De.memoizedState!==null)ke=De.child,ke!==null&&(ke.return=De),jo(me,De,!(De.memoizedProps!==null&&De.memoizedProps.mode==="manual"),!0);else if(De.child!==null){De.child.return=De,De=De.child;continue}}if(De===ge)break;for(;De.sibling===null;){if(De.return===null||De.return===ge)return;De=De.return}De.sibling.return=De.return,De=De.sibling}}function Fo(me,ge){if(Qr&&Iu(me,ge)){me=ge.stateNode;var Se=me.containerInfo,Pe=Zc();jo(Pe,ge,!1,!1),me.pendingChildren=Pe,Jr(ge),Cd(Se,Pe)}}function Uu(me,ge,Se,Pe){if(fr)me.memoizedProps!==Pe&&Jr(ge);else if(Qr){var De=me.stateNode,ke=me.memoizedProps;if((me=Iu(me,ge))||ke!==Pe){var Je=cr.current;ke=gh(De,Se,ke,Pe,!me,null),ke===De?ge.stateNode=De:(va(ke,Se,Pe,Je)&&Jr(ge),ge.stateNode=ke,me?Mc(ke,ge,!1,!1):Jr(ge))}else ge.stateNode=De}}function Vo(me,ge,Se){if(xd(ge,Se)){if(me.flags|=16777216,!_a(ge,Se))if(jl())me.flags|=8192;else throw Po=cu,Bh}else me.flags&=-16777217}function zu(me,ge){if(zd(ge)){if(me.flags|=16777216,!Rh(ge))if(jl())me.flags|=8192;else throw Po=cu,Bh}else me.flags&=-16777217}function Bl(me,ge){ge!==null&&(me.flags|=4),me.flags&16384&&(ge=me.tag!==22?Te():536870912,me.lanes|=ge,Ma|=ge)}function mo(me,ge){if(!tn)switch(me.tailMode){case"hidden":ge=me.tail;for(var Se=null;ge!==null;)ge.alternate!==null&&(Se=ge),ge=ge.sibling;Se===null?me.tail=null:Se.sibling=null;break;case"collapsed":Se=me.tail;for(var Pe=null;Se!==null;)Se.alternate!==null&&(Pe=Se),Se=Se.sibling;Pe===null?ge||me.tail===null?me.tail=null:me.tail.sibling=null:Pe.sibling=null}}function Tn(me){var ge=me.alternate!==null&&me.alternate.child===me.child,Se=0,Pe=0;if(ge)for(var De=me.child;De!==null;)Se|=De.lanes|De.childLanes,Pe|=De.subtreeFlags&31457280,Pe|=De.flags&31457280,De.return=me,De=De.sibling;else for(De=me.child;De!==null;)Se|=De.lanes|De.childLanes,Pe|=De.subtreeFlags,Pe|=De.flags,De.return=me,De=De.sibling;return me.subtreeFlags|=Pe,me.childLanes=Se,ge}function ld(me,ge,Se){var Pe=ge.pendingProps;switch(Ze(ge),ge.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tn(ge),null;case 1:return Tn(ge),null;case 3:return Se=ge.stateNode,Pe=null,me!==null&&(Pe=me.memoizedState.cache),ge.memoizedState.cache!==Pe&&(ge.flags|=2048),la(ln),St(),Se.pendingContext&&(Se.context=Se.pendingContext,Se.pendingContext=null),(me===null||me.child===null)&&(Wt(ge)?Jr(ge):me===null||me.memoizedState.isDehydrated&&(ge.flags&256)===0||(ge.flags|=1024,os!==null&&(ua(os),os=null))),Fo(me,ge),Tn(ge),null;case 26:if(ns){Se=ge.type;var De=ge.memoizedState;return me===null?(Jr(ge),De!==null?(Tn(ge),zu(ge,De)):(Tn(ge),Vo(ge,Se,Pe))):De?De!==me.memoizedState?(Jr(ge),Tn(ge),zu(ge,De)):(Tn(ge),ge.flags&=-16777217):(fr?me.memoizedProps!==Pe&&Jr(ge):Uu(me,ge,Se,Pe),Tn(ge),Vo(ge,Se,Pe)),null}case 27:if(pr){if(lt(ge),Se=Os.current,De=ge.type,me!==null&&ge.stateNode!=null)fr?me.memoizedProps!==Pe&&Jr(ge):Uu(me,ge,De,Pe);else{if(!Pe){if(ge.stateNode===null)throw Error(Q(166));return Tn(ge),null}me=cr.current,Wt(ge)?kt(ge,me):(me=Nh(De,Pe,Se,me,!0),ge.stateNode=me,Jr(ge))}return Tn(ge),null}case 5:if(lt(ge),Se=ge.type,me!==null&&ge.stateNode!=null)Uu(me,ge,Se,Pe);else{if(!Pe){if(ge.stateNode===null)throw Error(Q(166));return Tn(ge),null}me=cr.current,Wt(ge)?kt(ge,me):(De=rh(Se,Pe,Os.current,me,ge),Mc(De,ge,!1,!1),ge.stateNode=De,va(De,Se,Pe,me)&&Jr(ge))}return Tn(ge),Vo(ge,ge.type,ge.pendingProps),null;case 6:if(me&&ge.stateNode!=null)Se=me.memoizedProps,fr?Se!==Pe&&Jr(ge):Qr&&(Se!==Pe?(ge.stateNode=Xc(Pe,Os.current,cr.current,ge),Jr(ge)):ge.stateNode=me.stateNode);else{if(typeof Pe!="string"&&ge.stateNode===null)throw Error(Q(166));if(me=Os.current,Se=cr.current,Wt(ge)){if(!Nr)throw Error(Q(176));if(me=ge.stateNode,Se=ge.memoizedProps,Pe=null,De=Sr,De!==null)switch(De.tag){case 27:case 5:Pe=De.memoizedProps}Dd(me,Se,ge,Pe)||ft(ge)}else ge.stateNode=Xc(Pe,me,Se,ge)}return Tn(ge),null;case 13:if(Pe=ge.memoizedState,me===null||me.memoizedState!==null&&me.memoizedState.dehydrated!==null){if(De=Wt(ge),Pe!==null&&Pe.dehydrated!==null){if(me===null){if(!De)throw Error(Q(318));if(!Nr)throw Error(Q(344));if(De=ge.memoizedState,De=De!==null?De.dehydrated:null,!De)throw Error(Q(317));il(De,ge)}else ni(),(ge.flags&128)===0&&(ge.memoizedState=null),ge.flags|=4;Tn(ge),De=!1}else os!==null&&(ua(os),os=null),De=!0;if(!De)return ge.flags&256?($n(ge),ge):($n(ge),null)}if($n(ge),(ge.flags&128)!==0)return ge.lanes=Se,ge;if(Se=Pe!==null,me=me!==null&&me.memoizedState!==null,Se){Pe=ge.child,De=null,Pe.alternate!==null&&Pe.alternate.memoizedState!==null&&Pe.alternate.memoizedState.cachePool!==null&&(De=Pe.alternate.memoizedState.cachePool.pool);var ke=null;Pe.memoizedState!==null&&Pe.memoizedState.cachePool!==null&&(ke=Pe.memoizedState.cachePool.pool),ke!==De&&(Pe.flags|=2048)}return Se!==me&&Se&&(ge.child.flags|=8192),Bl(ge,ge.updateQueue),Tn(ge),null;case 4:return St(),Fo(me,ge),me===null&&oh(ge.stateNode.containerInfo),Tn(ge),null;case 10:return la(ge.type),Tn(ge),null;case 19:if(fe(Kn),De=ge.memoizedState,De===null)return Tn(ge),null;if(Pe=(ge.flags&128)!==0,ke=De.rendering,ke===null)if(Pe)mo(De,!1);else{if(Qi!==0||me!==null&&(me.flags&128)!==0)for(me=ge.child;me!==null;){if(ke=Mn(me),ke!==null){for(ge.flags|=128,mo(De,!1),me=ke.updateQueue,ge.updateQueue=me,Bl(ge,me),ge.subtreeFlags=0,me=Se,Se=ge.child;Se!==null;)pa(Se,me),Se=Se.sibling;return _e(Kn,Kn.current&1|2),ge.child}me=me.sibling}De.tail!==null&&mr()>Dn&&(ge.flags|=128,Pe=!0,mo(De,!1),ge.lanes=4194304)}else{if(!Pe)if(me=Mn(ke),me!==null){if(ge.flags|=128,Pe=!0,me=me.updateQueue,ge.updateQueue=me,Bl(ge,me),mo(De,!0),De.tail===null&&De.tailMode==="hidden"&&!ke.alternate&&!tn)return Tn(ge),null}else 2*mr()-De.renderingStartTime>Dn&&Se!==536870912&&(ge.flags|=128,Pe=!0,mo(De,!1),ge.lanes=4194304);De.isBackwards?(ke.sibling=ge.child,ge.child=ke):(me=De.last,me!==null?me.sibling=ke:ge.child=ke,De.last=ke)}return De.tail!==null?(ge=De.tail,De.rendering=ge,De.tail=ge.sibling,De.renderingStartTime=mr(),ge.sibling=null,me=Kn.current,_e(Kn,Pe?me&1|2:me&1),ge):(Tn(ge),null);case 22:case 23:return $n(ge),wr(),Pe=ge.memoizedState!==null,me!==null?me.memoizedState!==null!==Pe&&(ge.flags|=8192):Pe&&(ge.flags|=8192),Pe?(Se&536870912)!==0&&(ge.flags&128)===0&&(Tn(ge),ge.subtreeFlags&6&&(ge.flags|=8192)):Tn(ge),Se=ge.updateQueue,Se!==null&&Bl(ge,Se.retryQueue),Se=null,me!==null&&me.memoizedState!==null&&me.memoizedState.cachePool!==null&&(Se=me.memoizedState.cachePool.pool),Pe=null,ge.memoizedState!==null&&ge.memoizedState.cachePool!==null&&(Pe=ge.memoizedState.cachePool.pool),Pe!==Se&&(ge.flags|=2048),me!==null&&fe(Ca),null;case 24:return Se=null,me!==null&&(Se=me.memoizedState.cache),ge.memoizedState.cache!==Se&&(ge.flags|=2048),la(ln),Tn(ge),null;case 25:return null}throw Error(Q(156,ge.tag))}function cd(me,ge){switch(Ze(ge),ge.tag){case 1:return me=ge.flags,me&65536?(ge.flags=me&-65537|128,ge):null;case 3:return la(ln),St(),me=ge.flags,(me&65536)!==0&&(me&128)===0?(ge.flags=me&-65537|128,ge):null;case 26:case 27:case 5:return lt(ge),null;case 13:if($n(ge),me=ge.memoizedState,me!==null&&me.dehydrated!==null){if(ge.alternate===null)throw Error(Q(340));ni()}return me=ge.flags,me&65536?(ge.flags=me&-65537|128,ge):null;case 19:return fe(Kn),null;case 4:return St(),null;case 10:return la(ge.type),null;case 22:case 23:return $n(ge),wr(),me!==null&&fe(Ca),me=ge.flags,me&65536?(ge.flags=me&-65537|128,ge):null;case 24:return la(ln),null;case 25:return null;default:return null}}function ju(me,ge){switch(Ze(ge),ge.tag){case 3:la(ln),St();break;case 26:case 27:case 5:lt(ge);break;case 4:St();break;case 13:$n(ge);break;case 19:fe(Kn);break;case 10:la(ge.type);break;case 22:case 23:$n(ge),wr(),me!==null&&fe(Ca);break;case 24:la(ln)}}function kl(me,ge){try{var Se=ge.updateQueue,Pe=Se!==null?Se.lastEffect:null;if(Pe!==null){var De=Pe.next;Se=De;do{if((Se.tag&me)===me){Pe=void 0;var ke=Se.create,Je=Se.inst;Pe=ke(),Je.destroy=Pe}Se=Se.next}while(Se!==De)}}catch(at){Xi(ge,ge.return,at)}}function ka(me,ge,Se){try{var Pe=ge.updateQueue,De=Pe!==null?Pe.lastEffect:null;if(De!==null){var ke=De.next;Pe=ke;do{if((Pe.tag&me)===me){var Je=Pe.inst,at=Je.destroy;if(at!==void 0){Je.destroy=void 0,De=ge;var At=Se;try{at()}catch(Yt){Xi(De,At,Yt)}}}Pe=Pe.next}while(Pe!==ke)}}catch(Yt){Xi(ge,ge.return,Yt)}}function ud(me){var ge=me.updateQueue;if(ge!==null){var Se=me.stateNode;try{ti(ge,Se)}catch(Pe){Xi(me,me.return,Pe)}}}function hd(me,ge,Se){Se.props=Es(me.type,me.memoizedProps),Se.state=me.memoizedState;try{Se.componentWillUnmount()}catch(Pe){Xi(me,ge,Pe)}}function go(me,ge){try{var Se=me.ref;if(Se!==null){var Pe=me.stateNode;switch(me.tag){case 26:case 27:case 5:var De=tl(Pe);break;default:De=Pe}typeof Se=="function"?me.refCleanup=Se(De):Se.current=De}}catch(ke){Xi(me,ge,ke)}}function wn(me,ge){var Se=me.ref,Pe=me.refCleanup;if(Se!==null)if(typeof Pe=="function")try{Pe()}catch(De){Xi(me,ge,De)}finally{me.refCleanup=null,me=me.alternate,me!=null&&(me.refCleanup=null)}else if(typeof Se=="function")try{Se(null)}catch(De){Xi(me,ge,De)}else Se.current=null}function Go(me){var ge=me.type,Se=me.memoizedProps,Pe=me.stateNode;try{gf(Pe,ge,Se,me)}catch(De){Xi(me,me.return,De)}}function Fu(me,ge,Se){try{dh(me.stateNode,me.type,Se,ge,me)}catch(Pe){Xi(me,me.return,Pe)}}function Vu(me){return me.tag===5||me.tag===3||(ns?me.tag===26:!1)||(pr?me.tag===27:!1)||me.tag===4}function wc(me){e:for(;;){for(;me.sibling===null;){if(me.return===null||Vu(me.return))return null;me=me.return}for(me.sibling.return=me.return,me=me.sibling;me.tag!==5&&me.tag!==6&&(!pr||me.tag!==27)&&me.tag!==18;){if(me.flags&2||me.child===null||me.tag===4)continue e;me.child.return=me,me=me.child}if(!(me.flags&2))return me.stateNode}}function Pc(me,ge,Se){var Pe=me.tag;if(Pe===5||Pe===6)me=me.stateNode,ge?ph(Se,me,ge):Ad(Se,me);else if(!(Pe===4||pr&&Pe===27)&&(me=me.child,me!==null))for(Pc(me,ge,Se),me=me.sibling;me!==null;)Pc(me,ge,Se),me=me.sibling}function Ho(me,ge,Se){var Pe=me.tag;if(Pe===5||Pe===6)me=me.stateNode,ge?fh(Se,me,ge):hh(Se,me);else if(!(Pe===4||pr&&Pe===27)&&(me=me.child,me!==null))for(Ho(me,ge,Se),me=me.sibling;me!==null;)Ho(me,ge,Se),me=me.sibling}function dd(me,ge,Se){me=me.containerInfo;try{_h(me,Se)}catch(Pe){Xi(ge,ge.return,Pe)}}function Yo(me,ge){for(Ja(me.containerInfo),Vn=ge;Vn!==null;)if(me=Vn,ge=me.child,(me.subtreeFlags&1028)!==0&&ge!==null)ge.return=me,Vn=ge;else for(;Vn!==null;){me=Vn;var Se=me.alternate;switch(ge=me.flags,me.tag){case 0:break;case 11:case 15:break;case 1:if((ge&1024)!==0&&Se!==null){ge=void 0;var Pe=me,De=Se.memoizedProps;Se=Se.memoizedState;var ke=Pe.stateNode;try{var Je=Es(Pe.type,De,Pe.elementType===Pe.type);ge=ke.getSnapshotBeforeUpdate(Je,Se),ke.__reactInternalSnapshotBeforeUpdate=ge}catch(at){Xi(Pe,Pe.return,at)}}break;case 3:(ge&1024)!==0&&fr&&Kc(me.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((ge&1024)!==0)throw Error(Q(163))}if(ge=me.sibling,ge!==null){ge.return=me.return,Vn=ge;break}Vn=me.return}return Je=Oo,Oo=!1,Je}function Rc(me,ge,Se){var Pe=Se.flags;switch(Se.tag){case 0:case 11:case 15:js(me,Se),Pe&4&&kl(5,Se);break;case 1:if(js(me,Se),Pe&4)if(me=Se.stateNode,ge===null)try{me.componentDidMount()}catch(at){Xi(Se,Se.return,at)}else{var De=Es(Se.type,ge.memoizedProps);ge=ge.memoizedState;try{me.componentDidUpdate(De,ge,me.__reactInternalSnapshotBeforeUpdate)}catch(at){Xi(Se,Se.return,at)}}Pe&64&&ud(Se),Pe&512&&go(Se,Se.return);break;case 3:if(js(me,Se),Pe&64&&(Pe=Se.updateQueue,Pe!==null)){if(me=null,Se.child!==null)switch(Se.child.tag){case 27:case 5:me=tl(Se.child.stateNode);break;case 1:me=Se.child.stateNode}try{ti(Pe,me)}catch(at){Xi(Se,Se.return,at)}}break;case 26:if(ns){js(me,Se),Pe&512&&go(Se,Se.return);break}case 27:case 5:js(me,Se),ge===null&&Pe&4&&Go(Se),Pe&512&&go(Se,Se.return);break;case 12:js(me,Se);break;case 13:js(me,Se),Pe&4&&Ia(me,Se);break;case 22:if(De=Se.memoizedState!==null||nr,!De){ge=ge!==null&&ge.memoizedState!==null||Nn;var ke=nr,Je=Nn;nr=De,(Nn=ge)&&!Je?za(me,Se,(Se.subtreeFlags&8772)!==0):js(me,Se),nr=ke,Nn=Je}Pe&512&&(Se.memoizedProps.mode==="manual"?go(Se,Se.return):wn(Se,Se.return));break;default:js(me,Se)}}function Xo(me){var ge=me.alternate;ge!==null&&(me.alternate=null,Xo(ge)),me.child=null,me.deletions=null,me.sibling=null,me.tag===5&&(ge=me.stateNode,ge!==null&&lh(ge)),me.stateNode=null,me.return=null,me.dependencies=null,me.memoizedProps=null,me.memoizedState=null,me.pendingProps=null,me.stateNode=null,me.updateQueue=null}function Kr(me,ge,Se){for(Se=Se.child;Se!==null;)Oc(me,ge,Se),Se=Se.sibling}function Oc(me,ge,Se){if(Hr&&typeof Hr.onCommitFiberUnmount=="function")try{Hr.onCommitFiberUnmount(al,Se)}catch{}switch(Se.tag){case 26:if(ns){Nn||wn(Se,ge),Kr(me,ge,Se),Se.memoizedState?Eh(Se.memoizedState):Se.stateNode&&wh(Se.stateNode);break}case 27:if(pr){Nn||wn(Se,ge);var Pe=Xn,De=qr;Xn=Se.stateNode,Kr(me,ge,Se),jd(Se.stateNode),Xn=Pe,qr=De;break}case 5:Nn||wn(Se,ge);case 6:if(fr){if(Pe=Xn,De=qr,Xn=null,Kr(me,ge,Se),Xn=Pe,qr=De,Xn!==null)if(qr)try{Gn(Xn,Se.stateNode)}catch(ke){Xi(Se,ge,ke)}else try{Dr(Xn,Se.stateNode)}catch(ke){Xi(Se,ge,ke)}}else Kr(me,ge,Se);break;case 18:fr&&Xn!==null&&(qr?Ah(Xn,Se.stateNode):Bd(Xn,Se.stateNode));break;case 4:fr?(Pe=Xn,De=qr,Xn=Se.stateNode.containerInfo,qr=!0,Kr(me,ge,Se),Xn=Pe,qr=De):(Qr&&dd(Se.stateNode,Se,Zc()),Kr(me,ge,Se));break;case 0:case 11:case 14:case 15:Nn||ka(2,Se,ge),Nn||ka(4,Se,ge),Kr(me,ge,Se);break;case 1:Nn||(wn(Se,ge),Pe=Se.stateNode,typeof Pe.componentWillUnmount=="function"&&hd(Se,ge,Pe)),Kr(me,ge,Se);break;case 21:Kr(me,ge,Se);break;case 22:Nn||wn(Se,ge),Nn=(Pe=Nn)||Se.memoizedState!==null,Kr(me,ge,Se),Nn=Pe;break;default:Kr(me,ge,Se)}}function Ia(me,ge){if(Nr&&ge.memoizedState===null&&(me=ge.alternate,me!==null&&(me=me.memoizedState,me!==null&&(me=me.dehydrated,me!==null))))try{iu(me)}catch(Se){Xi(ge,ge.return,Se)}}function qo(me){switch(me.tag){case 13:case 19:var ge=me.stateNode;return ge===null&&(ge=me.stateNode=new dl),ge;case 22:return me=me.stateNode,ge=me._retryCache,ge===null&&(ge=me._retryCache=new dl),ge;default:throw Error(Q(435,me.tag))}}function Il(me,ge){var Se=qo(me);ge.forEach(function(Pe){var De=qu.bind(null,me,Pe);Se.has(Pe)||(Se.add(Pe),Pe.then(De,De))})}function Pr(me,ge){var Se=ge.deletions;if(Se!==null)for(var Pe=0;Pe<Se.length;Pe++){var De=Se[Pe],ke=me,Je=ge;if(fr){var at=Je;e:for(;at!==null;){switch(at.tag){case 27:case 5:Xn=at.stateNode,qr=!1;break e;case 3:Xn=at.stateNode.containerInfo,qr=!0;break e;case 4:Xn=at.stateNode.containerInfo,qr=!0;break e}at=at.return}if(Xn===null)throw Error(Q(160));Oc(ke,Je,De),Xn=null,qr=!1}else Oc(ke,Je,De);ke=De.alternate,ke!==null&&(ke.return=null),De.return=null}if(ge.subtreeFlags&13878)for(ge=ge.child;ge!==null;)Ua(ge,me),ge=ge.sibling}function Ua(me,ge){var Se=me.alternate,Pe=me.flags;switch(me.tag){case 0:case 11:case 14:case 15:Pr(ge,me),zr(me),Pe&4&&(ka(3,me,me.return),kl(3,me),ka(5,me,me.return));break;case 1:Pr(ge,me),zr(me),Pe&512&&(Nn||Se===null||wn(Se,Se.return)),Pe&64&&nr&&(me=me.updateQueue,me!==null&&(Pe=me.callbacks,Pe!==null&&(Se=me.shared.hiddenCallbacks,me.shared.hiddenCallbacks=Se===null?Pe:Se.concat(Pe))));break;case 26:if(ns){var De=Lr;Pr(ge,me),zr(me),Pe&512&&(Nn||Se===null||wn(Se,Se.return)),Pe&4&&(Pe=Se!==null?Se.memoizedState:null,ge=me.memoizedState,Se===null?ge===null?me.stateNode===null?me.stateNode=Mh(De,me.type,me.memoizedProps,me):Th(De,me.type,me.stateNode):me.stateNode=Ch(De,ge,me.memoizedProps):Pe!==ge?(Pe===null?Se.stateNode!==null&&wh(Se.stateNode):Eh(Pe),ge===null?Th(De,me.type,me.stateNode):Ch(De,ge,me.memoizedProps)):ge===null&&me.stateNode!==null&&Fu(me,me.memoizedProps,Se.memoizedProps));break}case 27:if(pr&&Pe&4&&me.alternate===null){De=me.stateNode;var ke=me.memoizedProps;try{bf(De),xf(me.type,ke,De,me)}catch(li){Xi(me,me.return,li)}}case 5:if(Pr(ge,me),zr(me),Pe&512&&(Nn||Se===null||wn(Se,Se.return)),fr){if(me.flags&32){ge=me.stateNode;try{Jl(ge)}catch(li){Xi(me,me.return,li)}}Pe&4&&me.stateNode!=null&&(ge=me.memoizedProps,Fu(me,ge,Se!==null?Se.memoizedProps:ge)),Pe&1024&&(oo=!0)}break;case 6:if(Pr(ge,me),zr(me),Pe&4&&fr){if(me.stateNode===null)throw Error(Q(162));Pe=me.memoizedProps,Se=Se!==null?Se.memoizedProps:Pe,ge=me.stateNode;try{Sd(ge,Se,Pe)}catch(li){Xi(me,me.return,li)}}break;case 3:if(ns?(Ph(),De=Lr,Lr=nu(ge.containerInfo),Pr(ge,me),Lr=De):Pr(ge,me),zr(me),Pe&4){if(fr&&Nr&&Se!==null&&Se.memoizedState.isDehydrated)try{tu(ge.containerInfo)}catch(li){Xi(me,me.return,li)}if(Qr){Pe=ge.containerInfo,Se=ge.pendingChildren;try{_h(Pe,Se)}catch(li){Xi(me,me.return,li)}}}oo&&(oo=!1,Gu(me));break;case 4:ns?(Se=Lr,Lr=nu(me.stateNode.containerInfo),Pr(ge,me),zr(me),Lr=Se):(Pr(ge,me),zr(me)),Pe&4&&Qr&&dd(me.stateNode,me,me.stateNode.pendingChildren);break;case 12:Pr(ge,me),zr(me);break;case 13:Pr(ge,me),zr(me),me.child.flags&8192&&me.memoizedState!==null!=(Se!==null&&Se.memoizedState!==null)&&(ea=mr()),Pe&4&&(Pe=me.updateQueue,Pe!==null&&(me.updateQueue=null,Il(me,Pe)));break;case 22:Pe&512&&(Nn||Se===null||wn(Se,Se.return)),De=me.memoizedState!==null;var Je=Se!==null&&Se.memoizedState!==null,at=nr,At=Nn;if(nr=at||De,Nn=At||Je,Pr(ge,me),Nn=At,nr=at,zr(me),ge=me.stateNode,ge._current=me,ge._visibility&=-3,ge._visibility|=ge._pendingVisibility&2,Pe&8192&&(ge._visibility=De?ge._visibility&-2:ge._visibility|1,De&&(ge=nr||Nn,Se===null||Je||ge||$o(me)),fr&&(me.memoizedProps===null||me.memoizedProps.mode!=="manual"))){e:if(Se=null,fr)for(ge=me;;){if(ge.tag===5||ns&&ge.tag===26||pr&&ge.tag===27){if(Se===null){Je=Se=ge;try{ke=Je.stateNode,De?Kl(ke):mh(Je.stateNode,Je.memoizedProps)}catch(li){Xi(Je,Je.return,li)}}}else if(ge.tag===6){if(Se===null){Je=ge;try{var Yt=Je.stateNode;De?Jc(Yt):ya(Yt,Je.memoizedProps)}catch(li){Xi(Je,Je.return,li)}}}else if((ge.tag!==22&&ge.tag!==23||ge.memoizedState===null||ge===me)&&ge.child!==null){ge.child.return=ge,ge=ge.child;continue}if(ge===me)break e;for(;ge.sibling===null;){if(ge.return===null||ge.return===me)break e;Se===ge&&(Se=null),ge=ge.return}Se===ge&&(Se=null),ge.sibling.return=ge.return,ge=ge.sibling}}Pe&4&&(Pe=me.updateQueue,Pe!==null&&(Se=Pe.retryQueue,Se!==null&&(Pe.retryQueue=null,Il(me,Se))));break;case 19:Pr(ge,me),zr(me),Pe&4&&(Pe=me.updateQueue,Pe!==null&&(me.updateQueue=null,Il(me,Pe)));break;case 21:break;default:Pr(ge,me),zr(me)}}function zr(me){var ge=me.flags;if(ge&2){try{if(fr&&(!pr||me.tag!==27)){e:{for(var Se=me.return;Se!==null;){if(Vu(Se)){var Pe=Se;break e}Se=Se.return}throw Error(Q(160))}switch(Pe.tag){case 27:if(pr){var De=Pe.stateNode,ke=wc(me);Ho(me,ke,De);break}case 5:var Je=Pe.stateNode;Pe.flags&32&&(Jl(Je),Pe.flags&=-33);var at=wc(me);Ho(me,at,Je);break;case 3:case 4:var At=Pe.stateNode.containerInfo,Yt=wc(me);Pc(me,Yt,At);break;default:throw Error(Q(161))}}}catch(li){Xi(me,me.return,li)}me.flags&=-3}ge&4096&&(me.flags&=-4097)}function Gu(me){if(me.subtreeFlags&1024)for(me=me.child;me!==null;){var ge=me;Gu(ge),ge.tag===5&&ge.flags&1024&&mn(ge.stateNode),me=me.sibling}}function js(me,ge){if(ge.subtreeFlags&8772)for(ge=ge.child;ge!==null;)Rc(me,ge.alternate,ge),ge=ge.sibling}function $o(me){for(me=me.child;me!==null;){var ge=me;switch(ge.tag){case 0:case 11:case 14:case 15:ka(4,ge,ge.return),$o(ge);break;case 1:wn(ge,ge.return);var Se=ge.stateNode;typeof Se.componentWillUnmount=="function"&&hd(ge,ge.return,Se),$o(ge);break;case 26:case 27:case 5:wn(ge,ge.return),$o(ge);break;case 22:wn(ge,ge.return),ge.memoizedState===null&&$o(ge);break;default:$o(ge)}me=me.sibling}}function za(me,ge,Se){for(Se=Se&&(ge.subtreeFlags&8772)!==0,ge=ge.child;ge!==null;){var Pe=ge.alternate,De=me,ke=ge,Je=ke.flags;switch(ke.tag){case 0:case 11:case 15:za(De,ke,Se),kl(4,ke);break;case 1:if(za(De,ke,Se),Pe=ke,De=Pe.stateNode,typeof De.componentDidMount=="function")try{De.componentDidMount()}catch(Yt){Xi(Pe,Pe.return,Yt)}if(Pe=ke,De=Pe.updateQueue,De!==null){var at=Pe.stateNode;try{var At=De.shared.hiddenCallbacks;if(At!==null)for(De.shared.hiddenCallbacks=null,De=0;De<At.length;De++)rt(At[De],at)}catch(Yt){Xi(Pe,Pe.return,Yt)}}Se&&Je&64&&ud(ke),go(ke,ke.return);break;case 26:case 27:case 5:za(De,ke,Se),Se&&Pe===null&&Je&4&&Go(ke),go(ke,ke.return);break;case 12:za(De,ke,Se);break;case 13:za(De,ke,Se),Se&&Je&4&&Ia(De,ke);break;case 22:ke.memoizedState===null&&za(De,ke,Se),go(ke,ke.return);break;default:za(De,ke,Se)}ge=ge.sibling}}function Hu(me,ge){var Se=null;me!==null&&me.memoizedState!==null&&me.memoizedState.cachePool!==null&&(Se=me.memoizedState.cachePool.pool),me=null,ge.memoizedState!==null&&ge.memoizedState.cachePool!==null&&(me=ge.memoizedState.cachePool.pool),me!==Se&&(me!=null&&me.refCount++,Se!=null&&zo(Se))}function Nc(me,ge){me=null,ge.alternate!==null&&(me=ge.alternate.memoizedState.cache),ge=ge.memoizedState.cache,ge!==me&&(ge.refCount++,me!=null&&zo(me))}function ca(me,ge,Se,Pe){if(ge.subtreeFlags&10256)for(ge=ge.child;ge!==null;)Lc(me,ge,Se,Pe),ge=ge.sibling}function Lc(me,ge,Se,Pe){var De=ge.flags;switch(ge.tag){case 0:case 11:case 15:ca(me,ge,Se,Pe),De&2048&&kl(9,ge);break;case 3:ca(me,ge,Se,Pe),De&2048&&(me=null,ge.alternate!==null&&(me=ge.alternate.memoizedState.cache),ge=ge.memoizedState.cache,ge!==me&&(ge.refCount++,me!=null&&zo(me)));break;case 12:if(De&2048){ca(me,ge,Se,Pe),me=ge.stateNode;try{var ke=ge.memoizedProps,Je=ke.id,at=ke.onPostCommit;typeof at=="function"&&at(Je,ge.alternate===null?"mount":"update",me.passiveEffectDuration,-0)}catch(At){Xi(ge,ge.return,At)}}else ca(me,ge,Se,Pe);break;case 23:break;case 22:ke=ge.stateNode,ge.memoizedState!==null?ke._visibility&4?ca(me,ge,Se,Pe):ja(me,ge):ke._visibility&4?ca(me,ge,Se,Pe):(ke._visibility|=4,yr(me,ge,Se,Pe,(ge.subtreeFlags&10256)!==0)),De&2048&&Hu(ge.alternate,ge);break;case 24:ca(me,ge,Se,Pe),De&2048&&Nc(ge.alternate,ge);break;default:ca(me,ge,Se,Pe)}}function yr(me,ge,Se,Pe,De){for(De=De&&(ge.subtreeFlags&10256)!==0,ge=ge.child;ge!==null;){var ke=me,Je=ge,at=Se,At=Pe,Yt=Je.flags;switch(Je.tag){case 0:case 11:case 15:yr(ke,Je,at,At,De),kl(8,Je);break;case 23:break;case 22:var li=Je.stateNode;Je.memoizedState!==null?li._visibility&4?yr(ke,Je,at,At,De):ja(ke,Je):(li._visibility|=4,yr(ke,Je,at,At,De)),De&&Yt&2048&&Hu(Je.alternate,Je);break;case 24:yr(ke,Je,at,At,De),De&&Yt&2048&&Nc(Je.alternate,Je);break;default:yr(ke,Je,at,At,De)}ge=ge.sibling}}function ja(me,ge){if(ge.subtreeFlags&10256)for(ge=ge.child;ge!==null;){var Se=me,Pe=ge,De=Pe.flags;switch(Pe.tag){case 22:ja(Se,Pe),De&2048&&Hu(Pe.alternate,Pe);break;case 24:ja(Se,Pe),De&2048&&Nc(Pe.alternate,Pe);break;default:ja(Se,Pe)}ge=ge.sibling}}function sr(me){if(me.subtreeFlags&No)for(me=me.child;me!==null;)vo(me),me=me.sibling}function vo(me){switch(me.tag){case 26:sr(me),me.flags&No&&(me.memoizedState!==null?Oh(Lr,me.memoizedState,me.memoizedProps):In(me.type,me.memoizedProps));break;case 5:sr(me),me.flags&No&&In(me.type,me.memoizedProps);break;case 3:case 4:if(ns){var ge=Lr;Lr=nu(me.stateNode.containerInfo),sr(me),Lr=ge}else sr(me);break;case 22:me.memoizedState===null&&(ge=me.alternate,ge!==null&&ge.memoizedState!==null?(ge=No,No=16777216,sr(me),No=ge):sr(me));break;default:sr(me)}}function Bc(me){var ge=me.alternate;if(ge!==null&&(me=ge.child,me!==null)){ge.child=null;do ge=me.sibling,me.sibling=null,me=ge;while(me!==null)}}function Fa(me){var ge=me.deletions;if((me.flags&16)!==0){if(ge!==null)for(var Se=0;Se<ge.length;Se++){var Pe=ge[Se];Vn=Pe,Va(Pe,me)}Bc(me)}if(me.subtreeFlags&10256)for(me=me.child;me!==null;)Ul(me),me=me.sibling}function Ul(me){switch(me.tag){case 0:case 11:case 15:Fa(me),me.flags&2048&&ka(9,me,me.return);break;case 3:Fa(me);break;case 12:Fa(me);break;case 22:var ge=me.stateNode;me.memoizedState!==null&&ge._visibility&4&&(me.return===null||me.return.tag!==13)?(ge._visibility&=-5,Wo(me)):Fa(me);break;default:Fa(me)}}function Wo(me){var ge=me.deletions;if((me.flags&16)!==0){if(ge!==null)for(var Se=0;Se<ge.length;Se++){var Pe=ge[Se];Vn=Pe,Va(Pe,me)}Bc(me)}for(me=me.child;me!==null;){switch(ge=me,ge.tag){case 0:case 11:case 15:ka(8,ge,ge.return),Wo(ge);break;case 22:Se=ge.stateNode,Se._visibility&4&&(Se._visibility&=-5,Wo(ge));break;default:Wo(ge)}me=me.sibling}}function Va(me,ge){for(;Vn!==null;){var Se=Vn;switch(Se.tag){case 0:case 11:case 15:ka(8,Se,ge);break;case 23:case 22:if(Se.memoizedState!==null&&Se.memoizedState.cachePool!==null){var Pe=Se.memoizedState.cachePool.pool;Pe!=null&&Pe.refCount++}break;case 24:zo(Se.memoizedState.cache)}if(Pe=Se.child,Pe!==null)Pe.return=Se,Vn=Pe;else e:for(Se=me;Vn!==null;){Pe=Vn;var De=Pe.sibling,ke=Pe.return;if(Xo(Pe),Pe===Se){Vn=null;break e}if(De!==null){De.return=ke,Vn=De;break e}Vn=ke}}}function kc(me){var ge=ah(me);if(ge!=null){if(typeof ge.memoizedProps["data-testname"]!="string")throw Error(Q(364));return ge}if(me=Mo(me),me===null)throw Error(Q(362));return me.stateNode.current}function Jo(me,ge){var Se=me.tag;switch(ge.$$typeof){case dc:if(me.type===ge.value)return!0;break;case pu:e:{for(ge=ge.value,me=[me,0],Se=0;Se<me.length;){var Pe=me[Se++],De=Pe.tag,ke=me[Se++],Je=ge[ke];if(De!==5&&De!==26&&De!==27||!Ws(Pe)){for(;Je!=null&&Jo(Pe,Je);)ke++,Je=ge[ke];if(ke===ge.length){ge=!0;break e}else for(Pe=Pe.child;Pe!==null;)me.push(Pe,ke),Pe=Pe.sibling}}ge=!1}return ge;case mu:if((Se===5||Se===26||Se===27)&&mf(me.stateNode,ge.value))return!0;break;case cn:if((Se===5||Se===6||Se===26||Se===27)&&(me=Wl(me),me!==null&&0<=me.indexOf(ge.value)))return!0;break;case Zi:if((Se===5||Se===26||Se===27)&&(me=me.memoizedProps["data-testname"],typeof me=="string"&&me.toLowerCase()===ge.value.toLowerCase()))return!0;break;default:throw Error(Q(365))}return!1}function Ga(me){switch(me.$$typeof){case dc:return"<"+(te(me.value)||"Unknown")+">";case pu:return":has("+(Ga(me)||"")+")";case mu:return'[role="'+me.value+'"]';case cn:return'"'+me.value+'"';case Zi:return'[data-testname="'+me.value+'"]';default:throw Error(Q(365))}}function fd(me,ge){var Se=[];me=[me,0];for(var Pe=0;Pe<me.length;){var De=me[Pe++],ke=De.tag,Je=me[Pe++],at=ge[Je];if(ke!==5&&ke!==26&&ke!==27||!Ws(De)){for(;at!=null&&Jo(De,at);)Je++,at=ge[Je];if(Je===ge.length)Se.push(De);else for(De=De.child;De!==null;)me.push(De,Je),De=De.sibling}}return Se}function Rr(me,ge){if(!$s)throw Error(Q(363));me=kc(me),me=fd(me,ge),ge=[],me=Array.from(me);for(var Se=0;Se<me.length;){var Pe=me[Se++],De=Pe.tag;if(De===5||De===26||De===27)Ws(Pe)||ge.push(Pe.stateNode);else for(Pe=Pe.child;Pe!==null;)me.push(Pe),Pe=Pe.sibling}return ge}function Or(){if((Ei&2)!==0&&Fi!==0)return Fi&-Fi;if(Pi.T!==null){var me=Yr;return me!==0?me:yt()}return vs()}function Fs(){$r===0&&($r=(Fi&536870912)===0||tn?Re():536870912);var me=us.current;return me!==null&&(me.flags|=32),$r}function br(me,ge,Se){(me===Gi&&gn===2||me.cancelPendingCommit!==null)&&(Ts(me,0),Ms(me,Fi,$r,!1)),Ne(me,Se),((Ei&2)===0||me!==Gi)&&(me===Gi&&((Ei&2)===0&&(Ls|=Se),Qi===4&&Ms(me,Fi,$r,!1)),ai(me))}function zl(me,ge,Se){if((Ei&6)!==0)throw Error(Q(327));var Pe=!Se&&(ge&60)===0&&(ge&me.expiredLanes)===0||Ce(me,ge),De=Pe?Hs(me,ge):Vs(me,ge,!0),ke=Pe;do{if(De===0){hs&&!Pe&&Ms(me,ge,0,!1);break}else if(De===6)Ms(me,ge,0,!un);else{if(Se=me.current.alternate,ke&&!pd(Se)){De=Vs(me,ge,!1),ke=!1;continue}if(De===2){if(ke=ge,me.errorRecoveryDisabledLanes&ke)var Je=0;else Je=me.pendingLanes&-536870913,Je=Je!==0?Je:Je&536870912?536870912:0;if(Je!==0){ge=Je;e:{var at=me;De=fl;var At=Nr&&at.current.memoizedState.isDehydrated;if(At&&(Ts(at,Je).flags|=256),Je=Vs(at,Je,!1),Je!==2){if(Ea&&!At){at.errorRecoveryDisabledLanes|=ke,Ls|=ke,De=4;break e}ke=fs,fs=De,ke!==null&&ua(ke)}De=Je}if(ke=!1,De!==2)continue}}if(De===1){Ts(me,0),Ms(me,ge,0,!0);break}e:{switch(Pe=me,De){case 0:case 1:throw Error(Q(345));case 4:if((ge&4194176)===ge){Ms(Pe,ge,$r,!un);break e}break;case 2:fs=null;break;case 3:case 5:break;default:throw Error(Q(329))}if(Pe.finishedWork=Se,Pe.finishedLanes=ge,(ge&62914560)===ge&&(ke=ea+300-mr(),10<ke)){if(Ms(Pe,ge,$r,!un),Ae(Pe,0)!==0)break e;Pe.timeoutHandle=sh(Ic.bind(null,Pe,Se,fs,Bs,pl,ge,$r,Ls,Ma,un,2,-0,0),ke);break e}Ic(Pe,Se,fs,Bs,pl,ge,$r,Ls,Ma,un,0,-0,0)}}break}while(!0);ai(me)}function ua(me){fs===null?fs=me:fs.push.apply(fs,me)}function Ic(me,ge,Se,Pe,De,ke,Je,at,At,Yt,li,mi,gi){var Li=ge.subtreeFlags;if((Li&8192||(Li&16785408)===16785408)&&(es(),vo(ge),ge=qc(),ge!==null)){me.cancelPendingCommit=ge(An.bind(null,me,Se,Pe,De,Je,at,At,1,mi,gi)),Ms(me,ke,Je,!Yt);return}An(me,Se,Pe,De,Je,at,At,li,mi,gi)}function pd(me){for(var ge=me;;){var Se=ge.tag;if((Se===0||Se===11||Se===15)&&ge.flags&16384&&(Se=ge.updateQueue,Se!==null&&(Se=Se.stores,Se!==null)))for(var Pe=0;Pe<Se.length;Pe++){var De=Se[Pe],ke=De.getSnapshot;De=De.value;try{if(!rs(ke(),De))return!1}catch{return!1}}if(Se=ge.child,ge.subtreeFlags&16384&&Se!==null)Se.return=ge,ge=Se;else{if(ge===me)break;for(;ge.sibling===null;){if(ge.return===null||ge.return===me)return!0;ge=ge.return}ge.sibling.return=ge.return,ge=ge.sibling}}return!0}function Ms(me,ge,Se,Pe){ge&=~Mr,ge&=~Ls,me.suspendedLanes|=ge,me.pingedLanes&=~ge,Pe&&(me.warmLanes|=ge),Pe=me.expirationTimes;for(var De=ge;0<De;){var ke=31-Gr(De),Je=1<<ke;Pe[ke]=-1,De&=~Je}Se!==0&&Ie(me,Se,ge)}function Yu(){return(Ei&6)===0?(Qt(0),!1):!0}function jr(){if(Bi!==null){if(gn===0)var me=Bi.return;else me=Bi,Fn=ao=null,Tt(me),Ks=null,bs=0,me=Bi;for(;me!==null;)ju(me.alternate,me),me=me.return;Bi=null}}function Ts(me,ge){me.finishedWork=null,me.finishedLanes=0;var Se=me.timeoutHandle;Se!==Eo&&(me.timeoutHandle=Eo,$l(Se)),Se=me.cancelPendingCommit,Se!==null&&(me.cancelPendingCommit=null,Se()),jr(),Gi=me,Bi=Se=xr(me.current,null),Fi=ge,gn=0,qn=null,un=!1,hs=Ce(me,ge),Ea=!1,Ma=$r=Mr=Ls=ds=Qi=0,fs=fl=null,pl=!1,(ge&8)!==0&&(ge|=ge&32);var Pe=me.entangledLanes;if(Pe!==0)for(me=me.entanglements,Pe&=ge;0<Pe;){var De=31-Gr(Pe),ke=1<<De;ge|=me[De],Pe&=~ke}return Ds=ge,pt(),Se}function _o(me,ge){zi=null,Pi.H=nn,ge===fn?(ge=di(),gn=3):ge===Bh?(ge=di(),gn=4):gn=ge===qd?8:ge!==null&&typeof ge=="object"&&typeof ge.then=="function"?6:1,qn=ge,Bi===null&&(Qi=1,yc(me,$e(ge,me.current)))}function jl(){var me=us.current;return me===null?!0:(Fi&4194176)===Fi?xs===null:(Fi&62914560)===Fi||(Fi&536870912)!==0?me===xs:!1}function Ko(){var me=Pi.H;return Pi.H=nn,me===null?nn:me}function Zr(){var me=Pi.A;return Pi.A=fu,me}function Fr(){Qi=4,un||(Fi&4194176)!==Fi&&us.current!==null||(hs=!0),(ds&134217727)===0&&(Ls&134217727)===0||Gi===null||Ms(Gi,Fi,$r,!1)}function Vs(me,ge,Se){var Pe=Ei;Ei|=2;var De=Ko(),ke=Zr();(Gi!==me||Fi!==ge)&&(Bs=null,Ts(me,ge)),ge=!1;var Je=Qi;e:do try{if(gn!==0&&Bi!==null){var at=Bi,At=qn;switch(gn){case 8:jr(),Je=6;break e;case 3:case 2:case 6:us.current===null&&(ge=!0);var Yt=gn;if(gn=0,qn=null,Ha(me,at,At,Yt),Se&&hs){Je=0;break e}break;default:Yt=gn,gn=0,qn=null,Ha(me,at,At,Yt)}}Gs(),Je=Qi;break}catch(li){_o(me,li)}while(!0);return ge&&me.shellSuspendCounter++,Fn=ao=null,Ei=Pe,Pi.H=De,Pi.A=ke,Bi===null&&(Gi=null,Fi=0,pt()),Je}function Gs(){for(;Bi!==null;)Xu(Bi)}function Hs(me,ge){var Se=Ei;Ei|=2;var Pe=Ko(),De=Zr();Gi!==me||Fi!==ge?(Bs=null,Dn=mr()+500,Ts(me,ge)):hs=Ce(me,ge);e:do try{if(gn!==0&&Bi!==null){ge=Bi;var ke=qn;t:switch(gn){case 1:gn=0,qn=null,Ha(me,ge,ke,1);break;case 2:if(ii(ke)){gn=0,qn=null,Uc(ge);break}ge=function(){gn===2&&Gi===me&&(gn=7),ai(me)},ke.then(ge,ge);break e;case 3:gn=7;break e;case 4:gn=5;break e;case 7:ii(ke)?(gn=0,qn=null,Uc(ge)):(gn=0,qn=null,Ha(me,ge,ke,7));break;case 5:var Je=null;switch(Bi.tag){case 26:Je=Bi.memoizedState;case 5:case 27:var at=Bi,At=at.type,Yt=at.pendingProps;if(Je?Rh(Je):_a(At,Yt)){gn=0,qn=null;var li=at.sibling;if(li!==null)Bi=li;else{var mi=at.return;mi!==null?(Bi=mi,Fl(mi)):Bi=null}break t}}gn=0,qn=null,Ha(me,ge,ke,5);break;case 6:gn=0,qn=null,Ha(me,ge,ke,6);break;case 8:jr(),Qi=6;break e;default:throw Error(Q(462))}}ha();break}catch(gi){_o(me,gi)}while(!0);return Fn=ao=null,Pi.H=Pe,Pi.A=De,Ei=Se,Bi!==null?0:(Gi=null,Fi=0,pt(),Qi)}function ha(){for(;Bi!==null&&!Vd();)Xu(Bi)}function Xu(me){var ge=ad(me.alternate,me,Ds);me.memoizedProps=me.pendingProps,ge===null?Fl(me):Bi=ge}function Uc(me){var ge=me,Se=ge.alternate;switch(ge.tag){case 15:case 0:ge=td(Se,ge,ge.pendingProps,ge.type,void 0,Fi);break;case 11:ge=td(Se,ge,ge.pendingProps,ge.type.render,ge.ref,Fi);break;case 5:Tt(ge);default:ju(Se,ge),ge=Bi=pa(ge,Ds),ge=ad(Se,ge,Ds)}me.memoizedProps=me.pendingProps,ge===null?Fl(me):Bi=ge}function Ha(me,ge,Se,Pe){Fn=ao=null,Tt(ge),Ks=null,bs=0;var De=ge.return;try{if(Jh(me,De,ge,Se,Fi)){Qi=1,yc(me,$e(Se,me.current)),Bi=null;return}}catch(ke){if(De!==null)throw Bi=De,ke;Qi=1,yc(me,$e(Se,me.current)),Bi=null;return}ge.flags&32768?(tn||Pe===1?me=!0:hs||(Fi&536870912)!==0?me=!1:(un=me=!0,(Pe===2||Pe===3||Pe===6)&&(Pe=us.current,Pe!==null&&Pe.tag===13&&(Pe.flags|=16384))),ar(ge,me)):Fl(ge)}function Fl(me){var ge=me;do{if((ge.flags&32768)!==0){ar(ge,un);return}me=ge.return;var Se=ld(ge.alternate,ge,Ds);if(Se!==null){Bi=Se;return}if(ge=ge.sibling,ge!==null){Bi=ge;return}Bi=ge=me}while(ge!==null);Qi===0&&(Qi=5)}function ar(me,ge){do{var Se=cd(me.alternate,me);if(Se!==null){Se.flags&=32767,Bi=Se;return}if(Se=me.return,Se!==null&&(Se.flags|=32768,Se.subtreeFlags=0,Se.deletions=null),!ge&&(me=me.sibling,me!==null)){Bi=me;return}Bi=me=Se}while(me!==null);Qi=6,Bi=null}function An(me,ge,Se,Pe,De,ke,Je,at,At,Yt){var li=Pi.T,mi=ir();try{Ar(2),Pi.T=null,$i(me,ge,Se,Pe,mi,De,ke,Je,at,At,Yt)}finally{Pi.T=li,Ar(mi)}}function $i(me,ge,Se,Pe,De,ke,Je,at){do or();while(Ta!==null);if((Ei&6)!==0)throw Error(Q(327));var At=me.finishedWork;if(Pe=me.finishedLanes,At===null)return null;if(me.finishedWork=null,me.finishedLanes=0,At===me.current)throw Error(Q(177));me.callbackNode=null,me.callbackPriority=0,me.cancelPendingCommit=null;var Yt=At.lanes|At.childLanes;if(Yt|=ll,Le(me,Pe,Yt,ke,Je,at),me===Gi&&(Bi=Gi=null,Fi=0),(At.subtreeFlags&10256)===0&&(At.flags&10256)===0||Ss||(Ss=!0,gu=Yt,Lo=Se,Vl(su,function(){return or(),null})),Se=(At.flags&15990)!==0,(At.subtreeFlags&15990)!==0||Se?(Se=Pi.T,Pi.T=null,ke=ir(),Ar(2),Je=Ei,Ei|=4,Yo(me,At),Ua(At,me),nh(me.containerInfo),me.current=At,Rc(me,At.alternate,At),Gd(),Ei=Je,Ar(ke),Pi.T=Se):me.current=At,Ss?(Ss=!1,Ta=me,Do=Pe):da(me,Yt),Yt=me.pendingLanes,Yt===0&&(ps=null),Be(At.stateNode),ai(me),ge!==null)for(De=me.onRecoverableError,At=0;At<ge.length;At++)Yt=ge[At],De(Yt.value,{componentStack:Yt.stack});return(Do&3)!==0&&or(),Yt=me.pendingLanes,(Pe&4194218)!==0&&(Yt&42)!==0?me===Br?Bo++:(Bo=0,Br=me):Bo=0,Qt(0),null}function da(me,ge){(me.pooledCacheLanes&=ge)===0&&(ge=me.pooledCache,ge!=null&&(me.pooledCache=null,zo(ge)))}function or(){if(Ta!==null){var me=Ta,ge=gu;gu=0;var Se=He(Do),Pe=32>Se?32:Se;Se=Pi.T;var De=ir();try{if(Ar(Pe),Pi.T=null,Ta===null)var ke=!1;else{Pe=Lo,Lo=null;var Je=Ta,at=Do;if(Ta=null,Do=0,(Ei&6)!==0)throw Error(Q(331));var At=Ei;if(Ei|=4,Ul(Je.current),Lc(Je,Je.current,at,Pe),Ei=At,Qt(0,!1),Hr&&typeof Hr.onPostCommitFiberRoot=="function")try{Hr.onPostCommitFiberRoot(al,Je)}catch{}ke=!0}return ke}finally{Ar(De),Pi.T=Se,da(me,ge)}}return!1}function zc(me,ge,Se){ge=$e(Se,ge),ge=Rl(me.stateNode,ge,2),me=Pt(me,ge,2),me!==null&&(Ne(me,2),ai(me))}function Xi(me,ge,Se){if(me.tag===3)zc(me,me,Se);else for(;ge!==null;){if(ge.tag===3){zc(ge,me,Se);break}else if(ge.tag===1){var Pe=ge.stateNode;if(typeof ge.type.getDerivedStateFromError=="function"||typeof Pe.componentDidCatch=="function"&&(ps===null||!ps.has(Pe))){me=$e(Se,me),Se=Uo(2),Pe=Pt(ge,Se,2),Pe!==null&&(Ol(Se,Pe,ge,me),Ne(Pe,2),ai(Pe));break}}ge=ge.return}}function Fc(me,ge,Se){var Pe=me.pingCache;if(Pe===null){Pe=me.pingCache=new qi;var De=new Set;Pe.set(ge,De)}else De=Pe.get(ge),De===void 0&&(De=new Set,Pe.set(ge,De));De.has(Se)||(Ea=!0,De.add(Se),me=md.bind(null,me,ge,Se),ge.then(me,me))}function md(me,ge,Se){var Pe=me.pingCache;Pe!==null&&Pe.delete(ge),me.pingedLanes|=me.suspendedLanes&Se,me.warmLanes&=~Se,Gi===me&&(Fi&Se)===Se&&(Qi===4||Qi===3&&(Fi&62914560)===Fi&&300>mr()-ea?(Ei&2)===0&&Ts(me,0):Mr|=Se,Ma===Fi&&(Ma=0)),ai(me)}function yo(me,ge){ge===0&&(ge=Te()),me=Bt(me,ge),me!==null&&(Ne(me,ge),ai(me))}function bo(me){var ge=me.memoizedState,Se=0;ge!==null&&(Se=ge.retryLane),yo(me,Se)}function qu(me,ge){var Se=0;switch(me.tag){case 13:var Pe=me.stateNode,De=me.memoizedState;De!==null&&(Se=De.retryLane);break;case 19:Pe=me.stateNode;break;case 22:Pe=me.stateNode._retryCache;break;default:throw Error(Q(314))}Pe!==null&&Pe.delete(ge),yo(me,Se)}function Vl(me,ge){return sl(me,ge)}function $u(me,ge,Se,Pe){this.tag=me,this.key=Se,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=ge,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Pe,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fa(me){return me=me.prototype,!(!me||!me.isReactComponent)}function xr(me,ge){var Se=me.alternate;return Se===null?(Se=J(me.tag,ge,me.key,me.mode),Se.elementType=me.elementType,Se.type=me.type,Se.stateNode=me.stateNode,Se.alternate=me,me.alternate=Se):(Se.pendingProps=ge,Se.type=me.type,Se.flags=0,Se.subtreeFlags=0,Se.deletions=null),Se.flags=me.flags&31457280,Se.childLanes=me.childLanes,Se.lanes=me.lanes,Se.child=me.child,Se.memoizedProps=me.memoizedProps,Se.memoizedState=me.memoizedState,Se.updateQueue=me.updateQueue,ge=me.dependencies,Se.dependencies=ge===null?null:{lanes:ge.lanes,firstContext:ge.firstContext},Se.sibling=me.sibling,Se.index=me.index,Se.ref=me.ref,Se.refCleanup=me.refCleanup,Se}function pa(me,ge){me.flags&=31457282;var Se=me.alternate;return Se===null?(me.childLanes=0,me.lanes=ge,me.child=null,me.subtreeFlags=0,me.memoizedProps=null,me.memoizedState=null,me.updateQueue=null,me.dependencies=null,me.stateNode=null):(me.childLanes=Se.childLanes,me.lanes=Se.lanes,me.child=Se.child,me.subtreeFlags=0,me.deletions=null,me.memoizedProps=Se.memoizedProps,me.memoizedState=Se.memoizedState,me.updateQueue=Se.updateQueue,me.type=Se.type,ge=Se.dependencies,me.dependencies=ge===null?null:{lanes:ge.lanes,firstContext:ge.firstContext}),me}function gs(me,ge,Se,Pe,De,ke){var Je=0;if(Pe=me,typeof me=="function")fa(me)&&(Je=1);else if(typeof me=="string")Je=ns&&pr?Sh(me,Se,cr.current)?26:nl(me)?27:5:ns?Sh(me,Se,cr.current)?26:5:pr&&nl(me)?27:5;else e:switch(me){case Qo:return ma(Se.children,De,ke,ge);case Qu:Je=8,De|=24;break;case eh:return me=J(12,Se,ge,De|2),me.elementType=eh,me.lanes=ke,me;case Gc:return me=J(13,Se,ge,De),me.elementType=Gc,me.lanes=ke,me;case qa:return me=J(19,Se,ge,De),me.elementType=qa,me.lanes=ke,me;case Yl:return Vc(Se,De,ke,ge);default:if(typeof me=="object"&&me!==null)switch(me.$$typeof){case _d:case Ys:Je=10;break e;case Xa:Je=9;break e;case el:Je=11;break e;case Hl:Je=14;break e;case Ps:Je=16,Pe=null;break e}Je=29,Se=Error(Q(130,me===null?"null":typeof me,"")),Pe=null}return ge=J(Je,Se,ge,De),ge.elementType=me,ge.type=Pe,ge.lanes=ke,ge}function ma(me,ge,Se,Pe){return me=J(7,me,Pe,ge),me.lanes=Se,me}function Vc(me,ge,Se,Pe){me=J(22,me,Pe,ge),me.elementType=Yl,me.lanes=Se;var De={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var ke=De._current;if(ke===null)throw Error(Q(456));if((De._pendingVisibility&2)===0){var Je=Bt(ke,2);Je!==null&&(De._pendingVisibility|=2,br(Je,ke,2))}},attach:function(){var ke=De._current;if(ke===null)throw Error(Q(456));if((De._pendingVisibility&2)!==0){var Je=Bt(ke,2);Je!==null&&(De._pendingVisibility&=-3,br(Je,ke,2))}}};return me.stateNode=De,me}function Ya(me,ge,Se){return me=J(6,me,null,ge),me.lanes=Se,me}function Zo(me,ge,Se){return ge=J(4,me.children!==null?me.children:[],me.key,ge),ge.lanes=Se,ge.stateNode={containerInfo:me.containerInfo,pendingChildren:null,implementation:me.implementation},ge}function xo(me,ge,Se,Pe,De,ke,Je,at){this.tag=1,this.containerInfo=me,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Eo,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Me(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Me(0),this.hiddenUpdates=Me(null),this.identifierPrefix=Pe,this.onUncaughtError=De,this.onCaughtError=ke,this.onRecoverableError=Je,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=at,this.incompleteTransitions=new Map}function lr(me,ge,Se,Pe,De,ke,Je,at,At,Yt,li,mi){return me=new xo(me,ge,Se,Je,at,At,Yt,mi),ge=1,ke===!0&&(ge|=24),ke=J(3,null,null,ge),me.current=ke,ke.stateNode=me,ge=Cc(),ge.refCount++,me.pooledCache=ge,ge.refCount++,ke.memoizedState={element:Pe,isDehydrated:Se,cache:ge},Ut(ke),me}function Gl(me){return me?(me=To,me):To}function Wu(me){var ge=me._reactInternals;if(ge===void 0)throw typeof me.render=="function"?Error(Q(188)):(me=Object.keys(me).join(","),Error(Q(268,me)));return me=le(ge),me=me!==null?ue(me):null,me===null?null:tl(me.stateNode)}function gd(me,ge,Se,Pe,De,ke){De=Gl(De),Pe.context===null?Pe.context=De:Pe.pendingContext=De,Pe=Rt(ge),Pe.payload={element:Se},ke=ke===void 0?null:ke,ke!==null&&(Pe.callback=ke),Se=Pt(me,Pe,ge),Se!==null&&(br(Se,me,ge),vt(Se,me,ge))}function vd(me,ge){if(me=me.memoizedState,me!==null&&me.dehydrated!==null){var Se=me.retryLane;me.retryLane=Se!==0&&Se<ge?Se:ge}}function Ju(me,ge){vd(me,ge),(me=me.alternate)&&vd(me,ge)}var Ci={},Ku=requireReact(),dr=requireScheduler$1(),Ao=Object.assign,Zu=Symbol.for("react.element"),ga=Symbol.for("react.transitional.element"),ws=Symbol.for("react.portal"),Qo=Symbol.for("react.fragment"),Qu=Symbol.for("react.strict_mode"),eh=Symbol.for("react.profiler"),_d=Symbol.for("react.provider"),Xa=Symbol.for("react.consumer"),Ys=Symbol.for("react.context"),el=Symbol.for("react.forward_ref"),Gc=Symbol.for("react.suspense"),qa=Symbol.for("react.suspense_list"),Hl=Symbol.for("react.memo"),Ps=Symbol.for("react.lazy"),Yl=Symbol.for("react.offscreen"),yd=Symbol.for("react.memo_cache_sentinel"),th=Symbol.iterator,So=Symbol.for("react.client.reference"),Pi=Ku.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Hc,ih,$a=!1,Wa=Array.isArray,Yc=_.rendererVersion,Xl=_.rendererPackageName,ql=_.extraDevToolsConfig,tl=_.getPublicInstance,Co=_.getRootHostContext,bd=_.getChildHostContext,Ja=_.prepareForCommit,nh=_.resetAfterCommit,rh=_.createInstance,Xs=_.appendInitialChild,va=_.finalizeInitialChildren,Ka=_.shouldSetTextContent,Xc=_.createTextInstance,sh=_.scheduleTimeout,$l=_.cancelTimeout,Eo=_.noTimeout,qs=_.isPrimaryRenderer;_.warnsIfNotActing;var fr=_.supportsMutation,Qr=_.supportsPersistence,Nr=_.supportsHydration,ah=_.getInstanceFromNode;_.beforeActiveInstanceBlur,_.afterActiveInstanceBlur;var oh=_.preparePortalMount;_.prepareScopeUpdate,_.getInstanceFromScope;var Ar=_.setCurrentUpdatePriority,ir=_.getCurrentUpdatePriority,vs=_.resolveUpdatePriority;_.resolveEventType,_.resolveEventTimeStamp;var Za=_.shouldAttemptEagerTransition,lh=_.detachDeletedInstance;_.requestPostPaintCallback;var xd=_.maySuspendCommit,_a=_.preloadInstance,es=_.startSuspendingCommit,In=_.suspendInstance,qc=_.waitForCommitToBeReady,Vr=_.NotPendingTransition,Oi=_.HostTransitionContext,mn=_.resetFormInstance;_.bindToConsole;var Jn=_.supportsMicrotasks,$c=_.scheduleMicrotask,$s=_.supportsTestSelectors,Mo=_.findFiberRoot,Wc=_.getBoundingRect,Wl=_.getTextContent,Ws=_.isHiddenSubtree,mf=_.matchAccessibilityRole,Un=_.setFocusIfFocusable,uh=_.setupIntersectionObserver,hh=_.appendChild,Ad=_.appendChildToContainer,Sd=_.commitTextUpdate,gf=_.commitMount,dh=_.commitUpdate,fh=_.insertBefore,ph=_.insertInContainerBefore,Dr=_.removeChild,Gn=_.removeChildFromContainer,Jl=_.resetTextContent,Kl=_.hideInstance,Jc=_.hideTextInstance,mh=_.unhideInstance,ya=_.unhideTextInstance,Kc=_.clearContainer,gh=_.cloneInstance,Zc=_.createContainerChildSet,vh=_.appendChildToContainerChildSet,Cd=_.finalizeContainerChildren,_h=_.replaceContainerChildren,yh=_.cloneHiddenInstance,bh=_.cloneHiddenTextInstance,Qc=_.isSuspenseInstancePending,Zl=_.isSuspenseInstanceFallback,Ed=_.getSuspenseInstanceFallbackErrorDetails,vf=_.registerSuspenseInstanceRetry,Md=_.canHydrateFormStateMarker,Td=_.isFormStateMarkerMatching,xh=_.getNextHydratableSibling,eu=_.getFirstHydratableChild,wd=_.getFirstHydratableChildWithinContainer,Pd=_.getFirstHydratableChildWithinSuspenseInstance,Rd=_.canHydrateInstance,Od=_.canHydrateTextInstance,Nd=_.canHydrateSuspenseInstance,_f=_.hydrateInstance,Dd=_.hydrateTextInstance,il=_.hydrateSuspenseInstance,Ld=_.getNextHydratableInstanceAfterSuspenseInstance,tu=_.commitHydratedContainer,iu=_.commitHydratedSuspenseInstance,Bd=_.clearSuspenseBoundary,Ah=_.clearSuspenseBoundaryFromContainer,kd=_.shouldDeleteUnhydratedTailInstances;_.diffHydratedPropsForDevWarnings,_.diffHydratedTextForDevWarnings,_.describeHydratableInstanceForDevWarnings;var Id=_.validateHydratableInstance,Ud=_.validateHydratableTextInstance,ns=_.supportsResources,Sh=_.isHostHoistableType,nu=_.getHoistableRoot,ru=_.getResource,Ch=_.acquireResource,Eh=_.releaseResource,Mh=_.hydrateHoistable,Th=_.mountHoistable,wh=_.unmountHoistable,yf=_.createHoistableInstance,Ph=_.prepareToCommitHoistables,zd=_.mayResourceSuspendCommit,Rh=_.preloadResource,Oh=_.suspendResource,pr=_.supportsSingletons,Nh=_.resolveSingletonInstance,bf=_.clearSingleton,xf=_.acquireSingletonInstance,jd=_.releaseSingletonInstance,nl=_.isHostSingletonType,Ql=[],ba=-1,To={},Gr=Math.clz32?Math.clz32:ye,ec=Math.log,Fd=Math.LN2,rl=128,tc=4194304,sl=dr.unstable_scheduleCallback,ic=dr.unstable_cancelCallback,Vd=dr.unstable_shouldYield,Gd=dr.unstable_requestPaint,mr=dr.unstable_now,Dh=dr.unstable_ImmediatePriority,Hd=dr.unstable_UserBlockingPriority,su=dr.unstable_NormalPriority,au=dr.unstable_IdlePriority,Yd=dr.log,Lh=dr.unstable_setDisableYieldValue,al=null,Hr=null,rs=typeof Object.is=="function"?Object.is:Fe,ou=new WeakMap,Pn=[],zn=0,nc=null,rc=0,ss=[],as=0,Rs=null,Js=1,_s="",cr=pe(null),sc=pe(null),Os=pe(null),ol=pe(null),Sr=null,gr=null,tn=!1,os=null,ys=!1,ac=Error(Q(519)),ls=[],Qa=0,ll=0,cl=null,wo=null,oc=!1,lc=!1,Ns=!1,eo=0,cc=null,lu=0,Yr=0,io=null,xa=!1,ul=!1,uc=Object.prototype.hasOwnProperty,fn=Error(Q(460)),Bh=Error(Q(474)),cu={then:function(){}},Po=null,Ks=null,bs=0,ro=vn(!0),kh=vn(!1),Zs=pe(null),cs=pe(0),us=pe(null),xs=null,Kn=pe(0),Qs=0,zi=null,an=null,Hn=null,As=!1,Rn=!1,Aa=!1,hc=0,jn=0,hl=null,Xd=0,uu=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},nn={readContext:hr,use:gt,useCallback:ki,useContext:ki,useEffect:ki,useImperativeHandle:ki,useLayoutEffect:ki,useInsertionEffect:ki,useMemo:ki,useReducer:ki,useRef:ki,useState:ki,useDebugValue:ki,useDeferredValue:ki,useTransition:ki,useSyncExternalStore:ki,useId:ki};nn.useCacheRefresh=ki,nn.useMemoCache=ki,nn.useHostTransitionStatus=ki,nn.useFormState=ki,nn.useActionState=ki,nn.useOptimistic=ki;var Zn={readContext:hr,use:gt,useCallback:function(me,ge){return Xt().memoizedState=[me,ge===void 0?null:ge],me},useContext:hr,useEffect:Su,useImperativeHandle:function(me,ge,Se){Se=Se!=null?Se.concat([me]):null,ms(4194308,4,El.bind(null,ge,me),Se)},useLayoutEffect:function(me,ge){return ms(4194308,4,me,ge)},useInsertionEffect:function(me,ge){ms(4,2,me,ge)},useMemo:function(me,ge){var Se=Xt();ge=ge===void 0?null:ge;var Pe=me();if(Aa){ze(!0);try{me()}finally{ze(!1)}}return Se.memoizedState=[Pe,ge],Pe},useReducer:function(me,ge,Se){var Pe=Xt();if(Se!==void 0){var De=Se(ge);if(Aa){ze(!0);try{Se(ge)}finally{ze(!1)}}}else De=ge;return Pe.memoizedState=Pe.baseState=De,me={pending:null,lanes:0,dispatch:null,lastRenderedReducer:me,lastRenderedState:De},Pe.queue=me,me=me.dispatch=Ra.bind(null,zi,me),[Pe.memoizedState,me]},useRef:function(me){var ge=Xt();return me={current:me},ge.memoizedState=me},useState:function(me){me=Ki(me);var ge=me.queue,Se=vc.bind(null,zi,ge);return ge.dispatch=Se,[me.memoizedState,Se]},useDebugValue:Ml,useDeferredValue:function(me,ge){var Se=Xt();return Pa(Se,me,ge)},useTransition:function(){var me=Ki(!1);return me=mc.bind(null,zi,me.queue,!0,!1),Xt().memoizedState=me,[!1,me]},useSyncExternalStore:function(me,ge,Se){var Pe=zi,De=Xt();if(tn){if(Se===void 0)throw Error(Q(407));Se=Se()}else{if(Se=ge(),Gi===null)throw Error(Q(349));(Fi&60)!==0||vi(Pe,ge,Se)}De.memoizedState=Se;var ke={value:Se,getSnapshot:ge};return De.queue=ke,Su(bi.bind(null,Pe,ke,me),[me]),Pe.flags|=2048,kn(9,Ti.bind(null,Pe,ke,Se,ge),{destroy:void 0},null),Se},useId:function(){var me=Xt(),ge=Gi.identifierPrefix;if(tn){var Se=_s,Pe=Js;Se=(Pe&~(1<<32-Gr(Pe)-1)).toString(32)+Se,ge=":"+ge+"R"+Se,Se=hc++,0<Se&&(ge+="H"+Se.toString(32)),ge+=":"}else Se=Xd++,ge=":"+ge+"r"+Se.toString(32)+":";return me.memoizedState=ge},useCacheRefresh:function(){return Xt().memoizedState=Tl.bind(null,zi)}};Zn.useMemoCache=mt,Zn.useHostTransitionStatus=uo,Zn.useFormState=Is,Zn.useActionState=Is,Zn.useOptimistic=function(me){var ge=Xt();ge.memoizedState=ge.baseState=me;var Se={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return ge.queue=Se,ge=_c.bind(null,zi,!0,Se),Se.dispatch=ge,[me,ge]};var Cr={readContext:hr,use:gt,useCallback:pc,useContext:hr,useEffect:Cl,useImperativeHandle:Us,useInsertionEffect:$h,useLayoutEffect:Wh,useMemo:co,useReducer:ri,useRef:Cs,useState:function(){return ri(ut)},useDebugValue:Ml,useDeferredValue:function(me,ge){var Se=Ve();return Cu(Se,an.memoizedState,me,ge)},useTransition:function(){var me=ri(ut)[0],ge=Ve().memoizedState;return[typeof me=="boolean"?me:nt(me),ge]},useSyncExternalStore:oi,useId:zs};Cr.useCacheRefresh=gc,Cr.useMemoCache=mt,Cr.useHostTransitionStatus=uo,Cr.useFormState=bn,Cr.useActionState=bn,Cr.useOptimistic=function(me,ge){var Se=Ve();return Hi(Se,an,me,ge)};var so={readContext:hr,use:gt,useCallback:pc,useContext:hr,useEffect:Cl,useImperativeHandle:Us,useInsertionEffect:$h,useLayoutEffect:Wh,useMemo:co,useReducer:ui,useRef:Cs,useState:function(){return ui(ut)},useDebugValue:Ml,useDeferredValue:function(me,ge){var Se=Ve();return an===null?Pa(Se,me,ge):Cu(Se,an.memoizedState,me,ge)},useTransition:function(){var me=ui(ut)[0],ge=Ve().memoizedState;return[typeof me=="boolean"?me:nt(me),ge]},useSyncExternalStore:oi,useId:zs};so.useCacheRefresh=gc,so.useMemoCache=mt,so.useHostTransitionStatus=uo,so.useFormState=tr,so.useActionState=tr,so.useOptimistic=function(me,ge){var Se=Ve();return an!==null?Hi(Se,an,me,ge):(Se.baseState=me,[me,Se.queue.dispatch])};var hu={isMounted:function(me){return(me=me._reactInternals)?se(me)===me:!1},enqueueSetState:function(me,ge,Se){me=me._reactInternals;var Pe=Or(),De=Rt(Pe);De.payload=ge,Se!=null&&(De.callback=Se),ge=Pt(me,De,Pe),ge!==null&&(br(ge,me,Pe),vt(ge,me,Pe))},enqueueReplaceState:function(me,ge,Se){me=me._reactInternals;var Pe=Or(),De=Rt(Pe);De.tag=1,De.payload=ge,Se!=null&&(De.callback=Se),ge=Pt(me,De,Pe),ge!==null&&(br(ge,me,Pe),vt(ge,me,Pe))},enqueueForceUpdate:function(me,ge){me=me._reactInternals;var Se=Or(),Pe=Rt(Se);Pe.tag=2,ge!=null&&(Pe.callback=ge),ge=Pt(me,Pe,Se),ge!==null&&(br(ge,me,Se),vt(ge,me,Se))}},Ih=typeof reportError=="function"?reportError:function(me){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ge=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof me=="object"&&me!==null&&typeof me.message=="string"?String(me.message):String(me),error:me});if(!window.dispatchEvent(ge))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",me);return}console.error(me)},qd=Error(Q(461)),Yn=!1,Er={dehydrated:null,treeContext:null,retryLane:0},Xr=pe(null),ao=null,Fn=null,$d=typeof AbortController<"u"?AbortController:function(){var me=[],ge=this.signal={aborted:!1,addEventListener:function(Se,Pe){me.push(Pe)}};this.abort=function(){ge.aborted=!0,me.forEach(function(Se){return Se()})}},Sa=dr.unstable_scheduleCallback,Ro=dr.unstable_NormalPriority,ln={$$typeof:Ys,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},du=Pi.S;Pi.S=function(me,ge){typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&Nt(me,ge),du!==null&&du(me,ge)};var Ca=pe(null),nr=!1,Nn=!1,oo=!1,dl=typeof WeakSet=="function"?WeakSet:Set,Vn=null,Oo=!1,Xn=null,qr=!1,Lr=null,No=8192,fu={getCacheForType:function(me){var ge=hr(ln),Se=ge.data.get(me);return Se===void 0&&(Se=me(),ge.data.set(me,Se)),Se}},dc=0,pu=1,mu=2,Zi=3,cn=4;if(typeof Symbol=="function"&&Symbol.for){var ji=Symbol.for;dc=ji("selector.component"),pu=ji("selector.has_pseudo_class"),mu=ji("selector.role"),Zi=ji("selector.test_id"),cn=ji("selector.text")}var qi=typeof WeakMap=="function"?WeakMap:Map,Ei=0,Gi=null,Bi=null,Fi=0,gn=0,qn=null,un=!1,hs=!1,Ea=!1,Ds=0,Qi=0,ds=0,Ls=0,Mr=0,$r=0,Ma=0,fl=null,fs=null,pl=!1,ea=0,Dn=1/0,Bs=null,ps=null,Ss=!1,Ta=null,Do=0,gu=0,Lo=null,Bo=0,Br=null;return Ci.attemptContinuousHydration=function(me){if(me.tag===13){var ge=Bt(me,67108864);ge!==null&&br(ge,me,67108864),Ju(me,67108864)}},Ci.attemptHydrationAtCurrentPriority=function(me){if(me.tag===13){var ge=Or(),Se=Bt(me,ge);Se!==null&&br(Se,me,ge),Ju(me,ge)}},Ci.attemptSynchronousHydration=function(me){switch(me.tag){case 3:if(me=me.stateNode,me.current.memoizedState.isDehydrated){var ge=be(me.pendingLanes);if(ge!==0){for(me.pendingLanes|=2,me.entangledLanes|=2;ge;){var Se=1<<31-Gr(ge);me.entanglements[1]|=Se,ge&=~Se}ai(me),(Ei&6)===0&&(Dn=mr()+500,Qt(0))}}break;case 13:ge=Bt(me,2),ge!==null&&br(ge,me,2),Yu(),Ju(me,2)}},Ci.batchedUpdates=function(me,ge){return me(ge)},Ci.createComponentSelector=function(me){return{$$typeof:dc,value:me}},Ci.createContainer=function(me,ge,Se,Pe,De,ke,Je,at,At,Yt){return lr(me,ge,!1,null,Se,Pe,ke,Je,at,At,Yt,null)},Ci.createHasPseudoClassSelector=function(me){return{$$typeof:pu,value:me}},Ci.createHydrationContainer=function(me,ge,Se,Pe,De,ke,Je,at,At,Yt,li,mi,gi){return me=lr(Se,Pe,!0,me,De,ke,at,At,Yt,li,mi,gi),me.context=Gl(null),Se=me.current,Pe=Or(),De=Rt(Pe),De.callback=ge??null,Pt(Se,De,Pe),me.current.lanes=Pe,Ne(me,Pe),ai(me),me},Ci.createPortal=function(me,ge,Se){var Pe=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ws,key:Pe==null?null:""+Pe,children:me,containerInfo:ge,implementation:Se}},Ci.createRoleSelector=function(me){return{$$typeof:mu,value:me}},Ci.createTestNameSelector=function(me){return{$$typeof:Zi,value:me}},Ci.createTextSelector=function(me){return{$$typeof:cn,value:me}},Ci.defaultOnCaughtError=function(me){console.error(me)},Ci.defaultOnRecoverableError=function(me){Ih(me)},Ci.defaultOnUncaughtError=function(me){Ih(me)},Ci.deferredUpdates=function(me){var ge=Pi.T,Se=ir();try{return Ar(32),Pi.T=null,me()}finally{Ar(Se),Pi.T=ge}},Ci.discreteUpdates=function(me,ge,Se,Pe,De){var ke=Pi.T,Je=ir();try{return Ar(2),Pi.T=null,me(ge,Se,Pe,De)}finally{Ar(Je),Pi.T=ke,Ei===0&&(Dn=mr()+500)}},Ci.findAllNodes=Rr,Ci.findBoundingRects=function(me,ge){if(!$s)throw Error(Q(363));ge=Rr(me,ge),me=[];for(var Se=0;Se<ge.length;Se++)me.push(Wc(ge[Se]));for(ge=me.length-1;0<ge;ge--){Se=me[ge];for(var Pe=Se.x,De=Pe+Se.width,ke=Se.y,Je=ke+Se.height,at=ge-1;0<=at;at--)if(ge!==at){var At=me[at],Yt=At.x,li=Yt+At.width,mi=At.y,gi=mi+At.height;if(Pe>=Yt&&ke>=mi&&De<=li&&Je<=gi){me.splice(ge,1);break}else if(Pe!==Yt||Se.width!==At.width||gi<ke||mi>Je){if(!(ke!==mi||Se.height!==At.height||li<Pe||Yt>De)){Yt>Pe&&(At.width+=Yt-Pe,At.x=Pe),li<De&&(At.width=De-Yt),me.splice(ge,1);break}}else{mi>ke&&(At.height+=mi-ke,At.y=ke),gi<Je&&(At.height=Je-mi),me.splice(ge,1);break}}}return me},Ci.findHostInstance=Wu,Ci.findHostInstanceWithNoPortals=function(me){return me=le(me),me=me!==null?de(me):null,me===null?null:tl(me.stateNode)},Ci.findHostInstanceWithWarning=function(me){return Wu(me)},Ci.flushPassiveEffects=or,Ci.flushSyncFromReconciler=function(me){var ge=Ei;Ei|=1;var Se=Pi.T,Pe=ir();try{if(Ar(2),Pi.T=null,me)return me()}finally{Ar(Pe),Pi.T=Se,Ei=ge,(Ei&6)===0&&Qt(0)}},Ci.flushSyncWork=Yu,Ci.focusWithin=function(me,ge){if(!$s)throw Error(Q(363));for(me=kc(me),ge=fd(me,ge),ge=Array.from(ge),me=0;me<ge.length;){var Se=ge[me++],Pe=Se.tag;if(!Ws(Se)){if((Pe===5||Pe===26||Pe===27)&&Un(Se.stateNode))return!0;for(Se=Se.child;Se!==null;)ge.push(Se),Se=Se.sibling}}return!1},Ci.getFindAllNodesFailureDescription=function(me,ge){if(!$s)throw Error(Q(363));var Se=0,Pe=[];me=[kc(me),0];for(var De=0;De<me.length;){var ke=me[De++],Je=ke.tag,at=me[De++],At=ge[at];if((Je!==5&&Je!==26&&Je!==27||!Ws(ke))&&(Jo(ke,At)&&(Pe.push(Ga(At)),at++,at>Se&&(Se=at)),at<ge.length))for(ke=ke.child;ke!==null;)me.push(ke,at),ke=ke.sibling}if(Se<ge.length){for(me=[];Se<ge.length;Se++)me.push(Ga(ge[Se]));return`findAllNodes was able to match part of the selector:
  `+(Pe.join(" > ")+`

No matching component was found for:
  `)+me.join(" > ")}return null},Ci.getPublicRootInstance=function(me){if(me=me.current,!me.child)return null;switch(me.child.tag){case 27:case 5:return tl(me.child.stateNode);default:return me.child.stateNode}},Ci.injectIntoDevTools=function(){var me={bundleType:0,version:Yc,rendererPackageName:Xl,currentDispatcherRef:Pi,findFiberByHostInstance:ah,reconcilerVersion:"19.0.0"};if(ql!==null&&(me.rendererConfig=ql),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")me=!1;else{var ge=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(ge.isDisabled||!ge.supportsFiber)me=!0;else{try{al=ge.inject(me),Hr=ge}catch{}me=!!ge.checkDCE}}return me},Ci.isAlreadyRendering=function(){return!1},Ci.observeVisibleRects=function(me,ge,Se,Pe){if(!$s)throw Error(Q(363));me=Rr(me,ge);var De=uh(me,Se,Pe).disconnect;return{disconnect:function(){De()}}},Ci.shouldError=function(){return null},Ci.shouldSuspend=function(){return!1},Ci.startHostTransition=function(me,ge,Se,Pe){if(me.tag!==5)throw Error(Q(476));var De=Eu(me).queue;mc(me,De,ge,Vr,Se===null?Z:function(){var ke=Eu(me).next.queue;return Oa(me,ke,{},Or()),Se(Pe)})},Ci.updateContainer=function(me,ge,Se,Pe){var De=ge.current,ke=Or();return gd(De,ke,me,ge,Se,Pe),ke},Ci.updateContainerSync=function(me,ge,Se,Pe){return ge.tag===0&&or(),gd(ge.current,2,me,ge,Se,Pe),2},Ci},G.exports.default=G.exports,Object.defineProperty(G.exports,"__esModule",{value:!0})})(reactReconciler_production)),reactReconciler_production.exports}var hasRequiredReactReconciler;function requireReactReconciler(){return hasRequiredReactReconciler||(hasRequiredReactReconciler=1,reactReconciler.exports=requireReactReconciler_production()),reactReconciler.exports}var reactReconcilerExports=requireReactReconciler();const Reconciler=getDefaultExportFromCjs(reactReconcilerExports);var scheduler={exports:{}},scheduler_production={};var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(G){function _(Be,ze){var Fe=Be.length;Be.push(ze);e:for(;0<Fe;){var $e=Fe-1>>>1,Xe=Be[$e];if(0<Q(Xe,ze))Be[$e]=ze,Be[Fe]=Xe,Fe=$e;else break e}}function J(Be){return Be.length===0?null:Be[0]}function Z(Be){if(Be.length===0)return null;var ze=Be[0],Fe=Be.pop();if(Fe!==ze){Be[0]=Fe;e:for(var $e=0,Xe=Be.length,je=Xe>>>1;$e<je;){var qe=2*($e+1)-1,Ze=Be[qe],st=qe+1,St=Be[st];if(0>Q(Ze,Fe))st<Xe&&0>Q(St,Ze)?(Be[$e]=St,Be[st]=Fe,$e=st):(Be[$e]=Ze,Be[qe]=Fe,$e=qe);else if(st<Xe&&0>Q(St,Fe))Be[$e]=St,Be[st]=Fe,$e=st;else break e}}return ze}function Q(Be,ze){var Fe=Be.sortIndex-ze.sortIndex;return Fe!==0?Fe:Be.id-ze.id}if(G.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var ee=performance;G.unstable_now=function(){return ee.now()}}else{var te=Date,ne=te.now();G.unstable_now=function(){return te.now()-ne}}var ie=[],re=[],oe=1,se=null,ae=3,le=!1,ue=!1,de=!1,pe=typeof setTimeout=="function"?setTimeout:null,fe=typeof clearTimeout=="function"?clearTimeout:null,_e=typeof setImmediate<"u"?setImmediate:null;function ye(Be){for(var ze=J(re);ze!==null;){if(ze.callback===null)Z(re);else if(ze.startTime<=Be)Z(re),ze.sortIndex=ze.expirationTime,_(ie,ze);else break;ze=J(re)}}function be(Be){if(de=!1,ye(Be),!ue)if(J(ie)!==null)ue=!0,Ge();else{var ze=J(re);ze!==null&&He(be,ze.startTime-Be)}}var Ae=!1,Ce=-1,Ee=5,Re=-1;function Te(){return!(G.unstable_now()-Re<Ee)}function Me(){if(Ae){var Be=G.unstable_now();Re=Be;var ze=!0;try{e:{ue=!1,de&&(de=!1,fe(Ce),Ce=-1),le=!0;var Fe=ae;try{t:{for(ye(Be),se=J(ie);se!==null&&!(se.expirationTime>Be&&Te());){var $e=se.callback;if(typeof $e=="function"){se.callback=null,ae=se.priorityLevel;var Xe=$e(se.expirationTime<=Be);if(Be=G.unstable_now(),typeof Xe=="function"){se.callback=Xe,ye(Be),ze=!0;break t}se===J(ie)&&Z(ie),ye(Be)}else Z(ie);se=J(ie)}if(se!==null)ze=!0;else{var je=J(re);je!==null&&He(be,je.startTime-Be),ze=!1}}break e}finally{se=null,ae=Fe,le=!1}ze=void 0}}finally{ze?Ne():Ae=!1}}}var Ne;if(typeof _e=="function")Ne=function(){_e(Me)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,Ie=Le.port2;Le.port1.onmessage=Me,Ne=function(){Ie.postMessage(null)}}else Ne=function(){pe(Me,0)};function Ge(){Ae||(Ae=!0,Ne())}function He(Be,ze){Ce=pe(function(){Be(G.unstable_now())},ze)}G.unstable_IdlePriority=5,G.unstable_ImmediatePriority=1,G.unstable_LowPriority=4,G.unstable_NormalPriority=3,G.unstable_Profiling=null,G.unstable_UserBlockingPriority=2,G.unstable_cancelCallback=function(Be){Be.callback=null},G.unstable_continueExecution=function(){ue||le||(ue=!0,Ge())},G.unstable_forceFrameRate=function(Be){0>Be||125<Be?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ee=0<Be?Math.floor(1e3/Be):5},G.unstable_getCurrentPriorityLevel=function(){return ae},G.unstable_getFirstCallbackNode=function(){return J(ie)},G.unstable_next=function(Be){switch(ae){case 1:case 2:case 3:var ze=3;break;default:ze=ae}var Fe=ae;ae=ze;try{return Be()}finally{ae=Fe}},G.unstable_pauseExecution=function(){},G.unstable_requestPaint=function(){},G.unstable_runWithPriority=function(Be,ze){switch(Be){case 1:case 2:case 3:case 4:case 5:break;default:Be=3}var Fe=ae;ae=Be;try{return ze()}finally{ae=Fe}},G.unstable_scheduleCallback=function(Be,ze,Fe){var $e=G.unstable_now();switch(typeof Fe=="object"&&Fe!==null?(Fe=Fe.delay,Fe=typeof Fe=="number"&&0<Fe?$e+Fe:$e):Fe=$e,Be){case 1:var Xe=-1;break;case 2:Xe=250;break;case 5:Xe=1073741823;break;case 4:Xe=1e4;break;default:Xe=5e3}return Xe=Fe+Xe,Be={id:oe++,callback:ze,priorityLevel:Be,startTime:Fe,expirationTime:Xe,sortIndex:-1},Fe>$e?(Be.sortIndex=Fe,_(re,Be),J(ie)===null&&Be===J(re)&&(de?(fe(Ce),Ce=-1):de=!0,He(be,Fe-$e))):(Be.sortIndex=Xe,_(ie,Be),ue||le||(ue=!0,Ge())),Be},G.unstable_shouldYield=Te,G.unstable_wrapCallback=function(Be){var ze=ae;return function(){var Fe=ae;ae=ze;try{return Be.apply(this,arguments)}finally{ae=Fe}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var schedulerExports=requireScheduler();function i$2(G,_,J){if(!G)return;if(J(G)===!0)return G;let Z=_?G.return:G.child;for(;Z;){const Q=i$2(Z,_,J);if(Q)return Q;Z=_?null:Z.sibling}}function l(G){try{return Object.defineProperties(G,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return G}}const a=l(reactExports.createContext(null));class m extends reactExports.Component{render(){return reactExports.createElement(a.Provider,{value:this._reactInternals},this.props.children)}}function c(){const G=reactExports.useContext(a);if(G===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const _=reactExports.useId();return reactExports.useMemo(()=>{for(const J of[G,G?.alternate]){if(!J)continue;const Z=i$2(J,!1,Q=>{let ee=Q.memoizedState;for(;ee;){if(ee.memoizedState===_)return!0;ee=ee.next}});if(Z)return Z}},[G,_])}const p=Symbol.for("react.context"),b=G=>G!==null&&typeof G=="object"&&"$$typeof"in G&&G.$$typeof===p;function h(){const G=c(),[_]=reactExports.useState(()=>new Map);_.clear();let J=G;for(;J;){const Z=J.type;b(Z)&&Z!==a&&!_.has(Z)&&_.set(Z,reactExports.use(l(Z))),J=J.return}return _}function x(){const G=h();return reactExports.useMemo(()=>Array.from(G.keys()).reduce((_,J)=>Z=>reactExports.createElement(_,null,reactExports.createElement(J.Provider,{...Z,value:G.get(J)})),_=>reactExports.createElement(m,{..._})),[G])}function findInitialRoot(G){let _=G.root;for(;_.getState().previousRoot;)_=_.getState().previousRoot;return _}const isOrthographicCamera=G=>G&&G.isOrthographicCamera,isRef=G=>G&&G.hasOwnProperty("current"),isColorRepresentation=G=>G!=null&&(typeof G=="string"||typeof G=="number"||G.isColor),useIsomorphicLayoutEffect$1=((G,_)=>typeof window<"u"&&(((G=window.document)==null?void 0:G.createElement)||((_=window.navigator)==null?void 0:_.product)==="ReactNative"))()?reactExports.useLayoutEffect:reactExports.useEffect;function useMutableCallback(G){const _=reactExports.useRef(G);return useIsomorphicLayoutEffect$1(()=>void(_.current=G),[G]),_}function useBridge(){const G=c(),_=x();return reactExports.useMemo(()=>({children:J})=>{const Q=!!i$2(G,!0,ee=>ee.type===reactExports.StrictMode)?reactExports.StrictMode:reactExports.Fragment;return jsxRuntimeExports.jsx(Q,{children:jsxRuntimeExports.jsx(_,{children:J})})},[G,_])}function Block({set:G}){return useIsomorphicLayoutEffect$1(()=>(G(new Promise(()=>null)),()=>G(!1)),[G]),null}const ErrorBoundary=(G=>(G=class extends reactExports.Component{constructor(...J){super(...J),this.state={error:!1}}componentDidCatch(J){this.props.set(J)}render(){return this.state.error?null:this.props.children}},G.getDerivedStateFromError=()=>({error:!0}),G))();function calculateDpr(G){var _;const J=typeof window<"u"?(_=window.devicePixelRatio)!=null?_:2:1;return Array.isArray(G)?Math.min(Math.max(G[0],J),G[1]):G}function getRootState(G){var _;return(_=G.__r3f)==null?void 0:_.root.getState()}const is$1={obj:G=>G===Object(G)&&!is$1.arr(G)&&typeof G!="function",fun:G=>typeof G=="function",str:G=>typeof G=="string",num:G=>typeof G=="number",boo:G=>typeof G=="boolean",und:G=>G===void 0,nul:G=>G===null,arr:G=>Array.isArray(G),equ(G,_,{arrays:J="shallow",objects:Z="reference",strict:Q=!0}={}){if(typeof G!=typeof _||!!G!=!!_)return!1;if(is$1.str(G)||is$1.num(G)||is$1.boo(G))return G===_;const ee=is$1.obj(G);if(ee&&Z==="reference")return G===_;const te=is$1.arr(G);if(te&&J==="reference")return G===_;if((te||ee)&&G===_)return!0;let ne;for(ne in G)if(!(ne in _))return!1;if(ee&&J==="shallow"&&Z==="shallow"){for(ne in Q?_:G)if(!is$1.equ(G[ne],_[ne],{strict:Q,objects:"reference"}))return!1}else for(ne in Q?_:G)if(G[ne]!==_[ne])return!1;if(is$1.und(ne)){if(te&&G.length===0&&_.length===0||ee&&Object.keys(G).length===0&&Object.keys(_).length===0)return!0;if(G!==_)return!1}return!0}};function dispose(G){G.type!=="Scene"&&(G.dispose==null||G.dispose());for(const _ in G){const J=G[_];J?.type!=="Scene"&&(J==null||J.dispose==null||J.dispose())}}const REACT_INTERNAL_PROPS=["children","key","ref"];function getInstanceProps(G){const _={};for(const J in G)REACT_INTERNAL_PROPS.includes(J)||(_[J]=G[J]);return _}function prepare(G,_,J,Z){const Q=G;let ee=Q?.__r3f;return ee||(ee={root:_,type:J,parent:null,children:[],props:getInstanceProps(Z),object:Q,eventCount:0,handlers:{},isHidden:!1},Q&&(Q.__r3f=ee)),ee}function resolve(G,_){if(!_.includes("-"))return{root:G,key:_,target:G[_]};if(_ in G)return{root:G,key:_,target:G[_]};let J=G;const Z=_.split("-");for(const Q of Z){if(typeof J!="object"||J===null){if(J!==void 0){const ee=Z.slice(Z.indexOf(Q)).join("-");return{root:J,key:ee,target:void 0}}return{root:G,key:_,target:void 0}}_=Q,G=J,J=J[_]}return{root:G,key:_,target:J}}const INDEX_REGEX=/-\d+$/;function attach(G,_){if(is$1.str(_.props.attach)){if(INDEX_REGEX.test(_.props.attach)){const Q=_.props.attach.replace(INDEX_REGEX,""),{root:ee,key:te}=resolve(G.object,Q);Array.isArray(ee[te])||(ee[te]=[])}const{root:J,key:Z}=resolve(G.object,_.props.attach);_.previousAttach=J[Z],J[Z]=_.object}else is$1.fun(_.props.attach)&&(_.previousAttach=_.props.attach(G.object,_.object))}function detach(G,_){if(is$1.str(_.props.attach)){const{root:J,key:Z}=resolve(G.object,_.props.attach),Q=_.previousAttach;Q===void 0?delete J[Z]:J[Z]=Q}else _.previousAttach==null||_.previousAttach(G.object,_.object);delete _.previousAttach}const RESERVED_PROPS$1=[...REACT_INTERNAL_PROPS,"args","dispose","attach","object","onUpdate","dispose"],MEMOIZED_PROTOTYPES=new Map;function getMemoizedPrototype(G){let _=MEMOIZED_PROTOTYPES.get(G.constructor);try{_||(_=new G.constructor,MEMOIZED_PROTOTYPES.set(G.constructor,_))}catch{}return _}function diffProps(G,_){const J={};for(const Z in _)if(!RESERVED_PROPS$1.includes(Z)&&!is$1.equ(_[Z],G.props[Z])){J[Z]=_[Z];for(const Q in _)Q.startsWith(`${Z}-`)&&(J[Q]=_[Q])}for(const Z in G.props){if(RESERVED_PROPS$1.includes(Z)||_.hasOwnProperty(Z))continue;const{root:Q,key:ee}=resolve(G.object,Z);if(Q.constructor&&Q.constructor.length===0){const te=getMemoizedPrototype(Q);is$1.und(te)||(J[ee]=te[ee])}else J[ee]=0}return J}const colorMaps=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],EVENT_REGEX=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function applyProps(G,_){var J;const Z=G.__r3f,Q=Z&&findInitialRoot(Z).getState(),ee=Z?.eventCount;for(const ne in _){let ie=_[ne];if(RESERVED_PROPS$1.includes(ne))continue;if(Z&&EVENT_REGEX.test(ne)){typeof ie=="function"?Z.handlers[ne]=ie:delete Z.handlers[ne],Z.eventCount=Object.keys(Z.handlers).length;continue}if(ie===void 0)continue;let{root:re,key:oe,target:se}=resolve(G,ne);if(se===void 0&&(typeof re!="object"||re===null))throw Error(`R3F: Cannot set "${ne}". Ensure it is an object before setting "${oe}".`);if(se instanceof Layers&&ie instanceof Layers)se.mask=ie.mask;else if(se instanceof Color&&isColorRepresentation(ie))se.set(ie);else if(se!==null&&typeof se=="object"&&typeof se.set=="function"&&typeof se.copy=="function"&&ie!=null&&ie.constructor&&se.constructor===ie.constructor)se.copy(ie);else if(se!==null&&typeof se=="object"&&typeof se.set=="function"&&Array.isArray(ie))typeof se.fromArray=="function"?se.fromArray(ie):se.set(...ie);else if(se!==null&&typeof se=="object"&&typeof se.set=="function"&&typeof ie=="number")typeof se.setScalar=="function"?se.setScalar(ie):se.set(ie);else{var te;re[oe]=ie,Q&&!Q.linear&&colorMaps.includes(oe)&&(te=re[oe])!=null&&te.isTexture&&re[oe].format===RGBAFormat&&re[oe].type===UnsignedByteType&&(re[oe].colorSpace=SRGBColorSpace)}}if(Z!=null&&Z.parent&&Q!=null&&Q.internal&&(J=Z.object)!=null&&J.isObject3D&&ee!==Z.eventCount){const ne=Z.object,ie=Q.internal.interaction.indexOf(ne);ie>-1&&Q.internal.interaction.splice(ie,1),Z.eventCount&&ne.raycast!==null&&Q.internal.interaction.push(ne)}return Z&&Z.props.attach===void 0&&(Z.object.isBufferGeometry?Z.props.attach="geometry":Z.object.isMaterial&&(Z.props.attach="material")),Z&&invalidateInstance(Z),G}function invalidateInstance(G){var _;if(!G.parent)return;G.props.onUpdate==null||G.props.onUpdate(G.object);const J=(_=G.root)==null||_.getState==null?void 0:_.getState();J&&J.internal.frames===0&&J.invalidate()}function updateCamera(G,_){G.manual||(isOrthographicCamera(G)?(G.left=_.width/-2,G.right=_.width/2,G.top=_.height/2,G.bottom=_.height/-2):G.aspect=_.width/_.height,G.updateProjectionMatrix())}const isObject3D=G=>G?.isObject3D;function makeId(G){return(G.eventObject||G.object).uuid+"/"+G.index+G.instanceId}function releaseInternalPointerCapture(G,_,J,Z){const Q=J.get(_);Q&&(J.delete(_),J.size===0&&(G.delete(Z),Q.target.releasePointerCapture(Z)))}function removeInteractivity(G,_){const{internal:J}=G.getState();J.interaction=J.interaction.filter(Z=>Z!==_),J.initialHits=J.initialHits.filter(Z=>Z!==_),J.hovered.forEach((Z,Q)=>{(Z.eventObject===_||Z.object===_)&&J.hovered.delete(Q)}),J.capturedMap.forEach((Z,Q)=>{releaseInternalPointerCapture(J.capturedMap,_,Z,Q)})}function createEvents(G){function _(ie){const{internal:re}=G.getState(),oe=ie.offsetX-re.initialClick[0],se=ie.offsetY-re.initialClick[1];return Math.round(Math.sqrt(oe*oe+se*se))}function J(ie){return ie.filter(re=>["Move","Over","Enter","Out","Leave"].some(oe=>{var se;return(se=re.__r3f)==null?void 0:se.handlers["onPointer"+oe]}))}function Z(ie,re){const oe=G.getState(),se=new Set,ae=[],le=re?re(oe.internal.interaction):oe.internal.interaction;for(let fe=0;fe<le.length;fe++){const _e=getRootState(le[fe]);_e&&(_e.raycaster.camera=void 0)}oe.previousRoot||oe.events.compute==null||oe.events.compute(ie,oe);function ue(fe){const _e=getRootState(fe);if(!_e||!_e.events.enabled||_e.raycaster.camera===null)return[];if(_e.raycaster.camera===void 0){var ye;_e.events.compute==null||_e.events.compute(ie,_e,(ye=_e.previousRoot)==null?void 0:ye.getState()),_e.raycaster.camera===void 0&&(_e.raycaster.camera=null)}return _e.raycaster.camera?_e.raycaster.intersectObject(fe,!0):[]}let de=le.flatMap(ue).sort((fe,_e)=>{const ye=getRootState(fe.object),be=getRootState(_e.object);return!ye||!be?fe.distance-_e.distance:be.events.priority-ye.events.priority||fe.distance-_e.distance}).filter(fe=>{const _e=makeId(fe);return se.has(_e)?!1:(se.add(_e),!0)});oe.events.filter&&(de=oe.events.filter(de,oe));for(const fe of de){let _e=fe.object;for(;_e;){var pe;(pe=_e.__r3f)!=null&&pe.eventCount&&ae.push({...fe,eventObject:_e}),_e=_e.parent}}if("pointerId"in ie&&oe.internal.capturedMap.has(ie.pointerId))for(let fe of oe.internal.capturedMap.get(ie.pointerId).values())se.has(makeId(fe.intersection))||ae.push(fe.intersection);return ae}function Q(ie,re,oe,se){if(ie.length){const ae={stopped:!1};for(const le of ie){let ue=getRootState(le.object);if(ue||le.object.traverseAncestors(de=>{const pe=getRootState(de);if(pe)return ue=pe,!1}),ue){const{raycaster:de,pointer:pe,camera:fe,internal:_e}=ue,ye=new Vector3(pe.x,pe.y,0).unproject(fe),be=Te=>{var Me,Ne;return(Me=(Ne=_e.capturedMap.get(Te))==null?void 0:Ne.has(le.eventObject))!=null?Me:!1},Ae=Te=>{const Me={intersection:le,target:re.target};_e.capturedMap.has(Te)?_e.capturedMap.get(Te).set(le.eventObject,Me):_e.capturedMap.set(Te,new Map([[le.eventObject,Me]])),re.target.setPointerCapture(Te)},Ce=Te=>{const Me=_e.capturedMap.get(Te);Me&&releaseInternalPointerCapture(_e.capturedMap,le.eventObject,Me,Te)};let Ee={};for(let Te in re){let Me=re[Te];typeof Me!="function"&&(Ee[Te]=Me)}let Re={...le,...Ee,pointer:pe,intersections:ie,stopped:ae.stopped,delta:oe,unprojectedPoint:ye,ray:de.ray,camera:fe,stopPropagation(){const Te="pointerId"in re&&_e.capturedMap.get(re.pointerId);if((!Te||Te.has(le.eventObject))&&(Re.stopped=ae.stopped=!0,_e.hovered.size&&Array.from(_e.hovered.values()).find(Me=>Me.eventObject===le.eventObject))){const Me=ie.slice(0,ie.indexOf(le));ee([...Me,le])}},target:{hasPointerCapture:be,setPointerCapture:Ae,releasePointerCapture:Ce},currentTarget:{hasPointerCapture:be,setPointerCapture:Ae,releasePointerCapture:Ce},nativeEvent:re};if(se(Re),ae.stopped===!0)break}}}return ie}function ee(ie){const{internal:re}=G.getState();for(const oe of re.hovered.values())if(!ie.length||!ie.find(se=>se.object===oe.object&&se.index===oe.index&&se.instanceId===oe.instanceId)){const ae=oe.eventObject.__r3f;if(re.hovered.delete(makeId(oe)),ae!=null&&ae.eventCount){const le=ae.handlers,ue={...oe,intersections:ie};le.onPointerOut==null||le.onPointerOut(ue),le.onPointerLeave==null||le.onPointerLeave(ue)}}}function te(ie,re){for(let oe=0;oe<re.length;oe++){const se=re[oe].__r3f;se==null||se.handlers.onPointerMissed==null||se.handlers.onPointerMissed(ie)}}function ne(ie){switch(ie){case"onPointerLeave":case"onPointerCancel":return()=>ee([]);case"onLostPointerCapture":return re=>{const{internal:oe}=G.getState();"pointerId"in re&&oe.capturedMap.has(re.pointerId)&&requestAnimationFrame(()=>{oe.capturedMap.has(re.pointerId)&&(oe.capturedMap.delete(re.pointerId),ee([]))})}}return function(oe){const{onPointerMissed:se,internal:ae}=G.getState();ae.lastEvent.current=oe;const le=ie==="onPointerMove",ue=ie==="onClick"||ie==="onContextMenu"||ie==="onDoubleClick",pe=Z(oe,le?J:void 0),fe=ue?_(oe):0;ie==="onPointerDown"&&(ae.initialClick=[oe.offsetX,oe.offsetY],ae.initialHits=pe.map(ye=>ye.eventObject)),ue&&!pe.length&&fe<=2&&(te(oe,ae.interaction),se&&se(oe)),le&&ee(pe);function _e(ye){const be=ye.eventObject,Ae=be.__r3f;if(!(Ae!=null&&Ae.eventCount))return;const Ce=Ae.handlers;if(le){if(Ce.onPointerOver||Ce.onPointerEnter||Ce.onPointerOut||Ce.onPointerLeave){const Ee=makeId(ye),Re=ae.hovered.get(Ee);Re?Re.stopped&&ye.stopPropagation():(ae.hovered.set(Ee,ye),Ce.onPointerOver==null||Ce.onPointerOver(ye),Ce.onPointerEnter==null||Ce.onPointerEnter(ye))}Ce.onPointerMove==null||Ce.onPointerMove(ye)}else{const Ee=Ce[ie];Ee?(!ue||ae.initialHits.includes(be))&&(te(oe,ae.interaction.filter(Re=>!ae.initialHits.includes(Re))),Ee(ye)):ue&&ae.initialHits.includes(be)&&te(oe,ae.interaction.filter(Re=>!ae.initialHits.includes(Re)))}}Q(pe,oe,fe,_e)}}return{handlePointer:ne}}const isRenderer=G=>!!(G!=null&&G.render),context$1=reactExports.createContext(null),createStore=(G,_)=>{const J=createWithEqualityFn((ne,ie)=>{const re=new Vector3,oe=new Vector3,se=new Vector3;function ae(fe=ie().camera,_e=oe,ye=ie().size){const{width:be,height:Ae,top:Ce,left:Ee}=ye,Re=be/Ae;_e.isVector3?se.copy(_e):se.set(..._e);const Te=fe.getWorldPosition(re).distanceTo(se);if(isOrthographicCamera(fe))return{width:be/fe.zoom,height:Ae/fe.zoom,top:Ce,left:Ee,factor:1,distance:Te,aspect:Re};{const Me=fe.fov*Math.PI/180,Ne=2*Math.tan(Me/2)*Te,Le=Ne*(be/Ae);return{width:Le,height:Ne,top:Ce,left:Ee,factor:be/Le,distance:Te,aspect:Re}}}let le;const ue=fe=>ne(_e=>({performance:{..._e.performance,current:fe}})),de=new Vector2;return{set:ne,get:ie,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(fe=1)=>G(ie(),fe),advance:(fe,_e)=>_(fe,_e,ie()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Clock,pointer:de,mouse:de,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const fe=ie();le&&clearTimeout(le),fe.performance.current!==fe.performance.min&&ue(fe.performance.min),le=setTimeout(()=>ue(ie().performance.max),fe.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:ae},setEvents:fe=>ne(_e=>({..._e,events:{..._e.events,...fe}})),setSize:(fe,_e,ye=0,be=0)=>{const Ae=ie().camera,Ce={width:fe,height:_e,top:ye,left:be};ne(Ee=>({size:Ce,viewport:{...Ee.viewport,...ae(Ae,oe,Ce)}}))},setDpr:fe=>ne(_e=>{const ye=calculateDpr(fe);return{viewport:{..._e.viewport,dpr:ye,initialDpr:_e.viewport.initialDpr||ye}}}),setFrameloop:(fe="always")=>{const _e=ie().clock;_e.stop(),_e.elapsedTime=0,fe!=="never"&&(_e.start(),_e.elapsedTime=0),ne(()=>({frameloop:fe}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:reactExports.createRef(),active:!1,frames:0,priority:0,subscribe:(fe,_e,ye)=>{const be=ie().internal;return be.priority=be.priority+(_e>0?1:0),be.subscribers.push({ref:fe,priority:_e,store:ye}),be.subscribers=be.subscribers.sort((Ae,Ce)=>Ae.priority-Ce.priority),()=>{const Ae=ie().internal;Ae!=null&&Ae.subscribers&&(Ae.priority=Ae.priority-(_e>0?1:0),Ae.subscribers=Ae.subscribers.filter(Ce=>Ce.ref!==fe))}}}}}),Z=J.getState();let Q=Z.size,ee=Z.viewport.dpr,te=Z.camera;return J.subscribe(()=>{const{camera:ne,size:ie,viewport:re,gl:oe,set:se}=J.getState();if(ie.width!==Q.width||ie.height!==Q.height||re.dpr!==ee){Q=ie,ee=re.dpr,updateCamera(ne,ie),re.dpr>0&&oe.setPixelRatio(re.dpr);const ae=typeof HTMLCanvasElement<"u"&&oe.domElement instanceof HTMLCanvasElement;oe.setSize(ie.width,ie.height,ae)}ne!==te&&(te=ne,se(ae=>({viewport:{...ae.viewport,...ae.viewport.getCurrentViewport(ne)}})))}),J.subscribe(ne=>G(ne)),J};function useStore$2(){const G=reactExports.useContext(context$1);if(!G)throw new Error("R3F: Hooks can only be used within the Canvas component!");return G}function useThree(G=J=>J,_){return useStore$2()(G,_)}function useFrame(G,_=0){const J=useStore$2(),Z=J.getState().internal.subscribe,Q=useMutableCallback(G);return useIsomorphicLayoutEffect$1(()=>Z(Q,_,J),[_,Z,J]),null}function createReconciler(G){const _=Reconciler(G);return _.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:reactExports.version}),_}const NoEventPriority=0,catalogue={},PREFIX_REGEX=/^three(?=[A-Z])/,toPascalCase=G=>`${G[0].toUpperCase()}${G.slice(1)}`;let i$1=0;const isConstructor=G=>typeof G=="function";function extend(G){if(isConstructor(G)){const _=`${i$1++}`;return catalogue[_]=G,_}else Object.assign(catalogue,G)}function validateInstance(G,_){const J=toPascalCase(G),Z=catalogue[J];if(G!=="primitive"&&!Z)throw new Error(`R3F: ${J} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(G==="primitive"&&!_.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(_.args!==void 0&&!Array.isArray(_.args))throw new Error("R3F: The args prop must be an array!")}function createInstance(G,_,J){var Z;return G=toPascalCase(G)in catalogue?G:G.replace(PREFIX_REGEX,""),validateInstance(G,_),G==="primitive"&&(Z=_.object)!=null&&Z.__r3f&&delete _.object.__r3f,prepare(_.object,J,G,_)}function hideInstance(G){if(!G.isHidden){var _;G.props.attach&&(_=G.parent)!=null&&_.object?detach(G.parent,G):isObject3D(G.object)&&(G.object.visible=!1),G.isHidden=!0,invalidateInstance(G)}}function unhideInstance(G){if(G.isHidden){var _;G.props.attach&&(_=G.parent)!=null&&_.object?attach(G.parent,G):isObject3D(G.object)&&G.props.visible!==!1&&(G.object.visible=!0),G.isHidden=!1,invalidateInstance(G)}}function handleContainerEffects(G,_,J){const Z=_.root.getState();if(!(!G.parent&&G.object!==Z.scene)){if(!_.object){var Q,ee;const te=catalogue[toPascalCase(_.type)];_.object=(Q=_.props.object)!=null?Q:new te(...(ee=_.props.args)!=null?ee:[]),_.object.__r3f=_}if(applyProps(_.object,_.props),_.props.attach)attach(G,_);else if(isObject3D(_.object)&&isObject3D(G.object)){const te=G.object.children.indexOf(J?.object);if(J&&te!==-1){const ne=G.object.children.indexOf(_.object);if(ne!==-1){G.object.children.splice(ne,1);const ie=ne<te?te-1:te;G.object.children.splice(ie,0,_.object)}else _.object.parent=G.object,G.object.children.splice(te,0,_.object),_.object.dispatchEvent({type:"added"}),G.object.dispatchEvent({type:"childadded",child:_.object})}else G.object.add(_.object)}for(const te of _.children)handleContainerEffects(_,te);invalidateInstance(_)}}function appendChild(G,_){_&&(_.parent=G,G.children.push(_),handleContainerEffects(G,_))}function insertBefore(G,_,J){if(!_||!J)return;_.parent=G;const Z=G.children.indexOf(J);Z!==-1?G.children.splice(Z,0,_):G.children.push(_),handleContainerEffects(G,_,J)}function disposeOnIdle(G){if(typeof G.dispose=="function"){const _=()=>{try{G.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?_():schedulerExports.unstable_scheduleCallback(schedulerExports.unstable_IdlePriority,_)}}function removeChild(G,_,J){if(!_)return;_.parent=null;const Z=G.children.indexOf(_);Z!==-1&&G.children.splice(Z,1),_.props.attach?detach(G,_):isObject3D(_.object)&&isObject3D(G.object)&&(G.object.remove(_.object),removeInteractivity(findInitialRoot(_),_.object));const Q=_.props.dispose!==null&&J!==!1;for(let ee=_.children.length-1;ee>=0;ee--){const te=_.children[ee];removeChild(_,te,Q)}_.children.length=0,delete _.object.__r3f,Q&&_.type!=="primitive"&&_.object.type!=="Scene"&&disposeOnIdle(_.object),J===void 0&&invalidateInstance(_)}function setFiberRef(G,_){for(const J of[G,G.alternate])if(J!==null)if(typeof J.ref=="function"){J.refCleanup==null||J.refCleanup();const Z=J.ref(_);typeof Z=="function"&&(J.refCleanup=Z)}else J.ref&&(J.ref.current=_)}const reconstructed=[];function swapInstances(){for(const[J]of reconstructed){const Z=J.parent;if(Z){J.props.attach?detach(Z,J):isObject3D(J.object)&&isObject3D(Z.object)&&Z.object.remove(J.object);for(const Q of J.children)Q.props.attach?detach(J,Q):isObject3D(Q.object)&&isObject3D(J.object)&&J.object.remove(Q.object)}J.isHidden&&unhideInstance(J),J.object.__r3f&&delete J.object.__r3f,J.type!=="primitive"&&disposeOnIdle(J.object)}for(const[J,Z,Q]of reconstructed){J.props=Z;const ee=J.parent;if(ee){var G,_;const te=catalogue[toPascalCase(J.type)];J.object=(G=J.props.object)!=null?G:new te(...(_=J.props.args)!=null?_:[]),J.object.__r3f=J,setFiberRef(Q,J.object),applyProps(J.object,J.props),J.props.attach?attach(ee,J):isObject3D(J.object)&&isObject3D(ee.object)&&ee.object.add(J.object);for(const ne of J.children)ne.props.attach?attach(J,ne):isObject3D(ne.object)&&isObject3D(J.object)&&J.object.add(ne.object);invalidateInstance(J)}}reconstructed.length=0}const handleTextInstance=()=>{},NO_CONTEXT={};let currentUpdatePriority=NoEventPriority;const NoFlags=0,Update=4,reconciler=createReconciler({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance,removeChild,appendChild,appendInitialChild:appendChild,insertBefore,appendChildToContainer(G,_){const J=G.getState().scene.__r3f;!_||!J||appendChild(J,_)},removeChildFromContainer(G,_){const J=G.getState().scene.__r3f;!_||!J||removeChild(J,_)},insertInContainerBefore(G,_,J){const Z=G.getState().scene.__r3f;!_||!J||!Z||insertBefore(Z,_,J)},getRootHostContext:()=>NO_CONTEXT,getChildHostContext:()=>NO_CONTEXT,commitUpdate(G,_,J,Z,Q){var ee,te,ne;validateInstance(_,Z);let ie=!1;if((G.type==="primitive"&&J.object!==Z.object||((ee=Z.args)==null?void 0:ee.length)!==((te=J.args)==null?void 0:te.length)||(ne=Z.args)!=null&&ne.some((oe,se)=>{var ae;return oe!==((ae=J.args)==null?void 0:ae[se])}))&&(ie=!0),ie)reconstructed.push([G,{...Z},Q]);else{const oe=diffProps(G,Z);Object.keys(oe).length&&(Object.assign(G.props,oe),applyProps(G.object,oe))}(Q.sibling===null||(Q.flags&Update)===NoFlags)&&swapInstances()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:G=>G?.object,prepareForCommit:()=>null,preparePortalMount:G=>prepare(G.getState().scene,G,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance,unhideInstance,createTextInstance:handleTextInstance,hideTextInstance:handleTextInstance,unhideTextInstance:handleTextInstance,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:reactExports.createContext(null),setCurrentUpdatePriority(G){currentUpdatePriority=G},getCurrentUpdatePriority(){return currentUpdatePriority},resolveUpdatePriority(){var G;if(currentUpdatePriority!==NoEventPriority)return currentUpdatePriority;switch(typeof window<"u"&&((G=window.event)==null?void 0:G.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return constantsExports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return constantsExports.ContinuousEventPriority;default:return constantsExports.DefaultEventPriority}},resetFormInstance(){}}),_roots=new Map,shallowLoose={objects:"shallow",strict:!1};function computeInitialSize(G,_){if(!_&&typeof HTMLCanvasElement<"u"&&G instanceof HTMLCanvasElement&&G.parentElement){const{width:J,height:Z,top:Q,left:ee}=G.parentElement.getBoundingClientRect();return{width:J,height:Z,top:Q,left:ee}}else if(!_&&typeof OffscreenCanvas<"u"&&G instanceof OffscreenCanvas)return{width:G.width,height:G.height,top:0,left:0};return{width:0,height:0,top:0,left:0,..._}}function createRoot(G){const _=_roots.get(G),J=_?.fiber,Z=_?.store;_&&console.warn("R3F.createRoot should only be called once!");const Q=typeof reportError=="function"?reportError:console.error,ee=Z||createStore(invalidate,advance$1),te=J||reconciler.createContainer(ee,constantsExports.ConcurrentRoot,null,!1,null,"",Q,Q,Q,null);_||_roots.set(G,{fiber:te,store:ee});let ne,ie,re=!1,oe=null;return{async configure(se={}){let ae;oe=new Promise(je=>ae=je);let{gl:le,size:ue,scene:de,events:pe,onCreated:fe,shadows:_e=!1,linear:ye=!1,flat:be=!1,legacy:Ae=!1,orthographic:Ce=!1,frameloop:Ee="always",dpr:Re=[1,2],performance:Te,raycaster:Me,camera:Ne,onPointerMissed:Le}=se,Ie=ee.getState(),Ge=Ie.gl;if(!Ie.gl){const je={canvas:G,powerPreference:"high-performance",antialias:!0,alpha:!0},qe=typeof le=="function"?await le(je):le;isRenderer(qe)?Ge=qe:Ge=new WebGLRenderer({...je,...le}),Ie.set({gl:Ge})}let He=Ie.raycaster;He||Ie.set({raycaster:He=new Raycaster});const{params:Be,...ze}=Me||{};if(is$1.equ(ze,He,shallowLoose)||applyProps(He,{...ze}),is$1.equ(Be,He.params,shallowLoose)||applyProps(He,{params:{...He.params,...Be}}),!Ie.camera||Ie.camera===ie&&!is$1.equ(ie,Ne,shallowLoose)){ie=Ne;const je=Ne?.isCamera,qe=je?Ne:Ce?new OrthographicCamera(0,0,0,0,.1,1e3):new PerspectiveCamera(75,0,.1,1e3);je||(qe.position.z=5,Ne&&(applyProps(qe,Ne),qe.manual||("aspect"in Ne||"left"in Ne||"right"in Ne||"bottom"in Ne||"top"in Ne)&&(qe.manual=!0,qe.updateProjectionMatrix())),!Ie.camera&&!(Ne!=null&&Ne.rotation)&&qe.lookAt(0,0,0)),Ie.set({camera:qe}),He.camera=qe}if(!Ie.scene){let je;de!=null&&de.isScene?(je=de,prepare(je,ee,"",{})):(je=new Scene,prepare(je,ee,"",{}),de&&applyProps(je,de)),Ie.set({scene:je})}pe&&!Ie.events.handlers&&Ie.set({events:pe(ee)});const Fe=computeInitialSize(G,ue);if(is$1.equ(Fe,Ie.size,shallowLoose)||Ie.setSize(Fe.width,Fe.height,Fe.top,Fe.left),Re&&Ie.viewport.dpr!==calculateDpr(Re)&&Ie.setDpr(Re),Ie.frameloop!==Ee&&Ie.setFrameloop(Ee),Ie.onPointerMissed||Ie.set({onPointerMissed:Le}),Te&&!is$1.equ(Te,Ie.performance,shallowLoose)&&Ie.set(je=>({performance:{...je.performance,...Te}})),!Ie.xr){var $e;const je=(st,St)=>{const it=ee.getState();it.frameloop!=="never"&&advance$1(st,!0,it,St)},qe=()=>{const st=ee.getState();st.gl.xr.enabled=st.gl.xr.isPresenting,st.gl.xr.setAnimationLoop(st.gl.xr.isPresenting?je:null),st.gl.xr.isPresenting||invalidate(st)},Ze={connect(){const st=ee.getState().gl;st.xr.addEventListener("sessionstart",qe),st.xr.addEventListener("sessionend",qe)},disconnect(){const st=ee.getState().gl;st.xr.removeEventListener("sessionstart",qe),st.xr.removeEventListener("sessionend",qe)}};typeof(($e=Ge.xr)==null?void 0:$e.addEventListener)=="function"&&Ze.connect(),Ie.set({xr:Ze})}if(Ge.shadowMap){const je=Ge.shadowMap.enabled,qe=Ge.shadowMap.type;if(Ge.shadowMap.enabled=!!_e,is$1.boo(_e))Ge.shadowMap.type=PCFSoftShadowMap;else if(is$1.str(_e)){var Xe;const Ze={basic:BasicShadowMap,percentage:PCFShadowMap,soft:PCFSoftShadowMap,variance:VSMShadowMap};Ge.shadowMap.type=(Xe=Ze[_e])!=null?Xe:PCFSoftShadowMap}else is$1.obj(_e)&&Object.assign(Ge.shadowMap,_e);(je!==Ge.shadowMap.enabled||qe!==Ge.shadowMap.type)&&(Ge.shadowMap.needsUpdate=!0)}return ColorManagement.enabled=!Ae,re||(Ge.outputColorSpace=ye?LinearSRGBColorSpace:SRGBColorSpace,Ge.toneMapping=be?NoToneMapping:ACESFilmicToneMapping),Ie.legacy!==Ae&&Ie.set(()=>({legacy:Ae})),Ie.linear!==ye&&Ie.set(()=>({linear:ye})),Ie.flat!==be&&Ie.set(()=>({flat:be})),le&&!is$1.fun(le)&&!isRenderer(le)&&!is$1.equ(le,Ge,shallowLoose)&&applyProps(Ge,le),ne=fe,re=!0,ae(),this},render(se){return!re&&!oe&&this.configure(),oe.then(()=>{reconciler.updateContainer(jsxRuntimeExports.jsx(Provider,{store:ee,children:se,onCreated:ne,rootElement:G}),te,null,()=>{})}),ee},unmount(){unmountComponentAtNode(G)}}}function Provider({store:G,children:_,onCreated:J,rootElement:Z}){return useIsomorphicLayoutEffect$1(()=>{const Q=G.getState();Q.set(ee=>({internal:{...ee.internal,active:!0}})),J&&J(Q),G.getState().events.connected||Q.events.connect==null||Q.events.connect(Z)},[]),jsxRuntimeExports.jsx(context$1.Provider,{value:G,children:_})}function unmountComponentAtNode(G,_){const J=_roots.get(G),Z=J?.fiber;if(Z){const Q=J?.store.getState();Q&&(Q.internal.active=!1),reconciler.updateContainer(null,Z,null,()=>{Q&&setTimeout(()=>{try{var ee,te,ne,ie;Q.events.disconnect==null||Q.events.disconnect(),(ee=Q.gl)==null||(te=ee.renderLists)==null||te.dispose==null||te.dispose(),(ne=Q.gl)==null||ne.forceContextLoss==null||ne.forceContextLoss(),(ie=Q.gl)!=null&&ie.xr&&Q.xr.disconnect(),dispose(Q.scene),_roots.delete(G)}catch{}},500)})}}function createSubs(G,_){const J={callback:G};return _.add(J),()=>void _.delete(J)}const globalEffects=new Set,globalAfterEffects=new Set,globalTailEffects=new Set,addEffect=G=>createSubs(G,globalEffects);function run(G,_){if(G.size)for(const{callback:J}of G.values())J(_)}function flushGlobalEffects(G,_){switch(G){case"before":return run(globalEffects,_);case"after":return run(globalAfterEffects,_);case"tail":return run(globalTailEffects,_)}}let subscribers,subscription;function update$1(G,_,J){let Z=_.clock.getDelta();_.frameloop==="never"&&typeof G=="number"&&(Z=G-_.clock.elapsedTime,_.clock.oldTime=_.clock.elapsedTime,_.clock.elapsedTime=G),subscribers=_.internal.subscribers;for(let Q=0;Q<subscribers.length;Q++)subscription=subscribers[Q],subscription.ref.current(subscription.store.getState(),Z,J);return!_.internal.priority&&_.gl.render&&_.gl.render(_.scene,_.camera),_.internal.frames=Math.max(0,_.internal.frames-1),_.frameloop==="always"?1:_.internal.frames}let running=!1,useFrameInProgress=!1,repeat,frame,state;function loop$1(G){frame=requestAnimationFrame(loop$1),running=!0,repeat=0,flushGlobalEffects("before",G),useFrameInProgress=!0;for(const J of _roots.values()){var _;state=J.store.getState(),state.internal.active&&(state.frameloop==="always"||state.internal.frames>0)&&!((_=state.gl.xr)!=null&&_.isPresenting)&&(repeat+=update$1(G,state))}if(useFrameInProgress=!1,flushGlobalEffects("after",G),repeat===0)return flushGlobalEffects("tail",G),running=!1,cancelAnimationFrame(frame)}function invalidate(G,_=1){var J;if(!G)return _roots.forEach(Z=>invalidate(Z.store.getState(),_));(J=G.gl.xr)!=null&&J.isPresenting||!G.internal.active||G.frameloop==="never"||(_>1?G.internal.frames=Math.min(60,G.internal.frames+_):useFrameInProgress?G.internal.frames=2:G.internal.frames=1,running||(running=!0,requestAnimationFrame(loop$1)))}function advance$1(G,_=!0,J,Z){if(_&&flushGlobalEffects("before",G),J)update$1(G,J,Z);else for(const Q of _roots.values())update$1(G,Q.store.getState());_&&flushGlobalEffects("after",G)}const DOM_EVENTS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function createPointerEvents(G){const{handlePointer:_}=createEvents(G);return{priority:1,enabled:!0,compute(J,Z,Q){Z.pointer.set(J.offsetX/Z.size.width*2-1,-(J.offsetY/Z.size.height)*2+1),Z.raycaster.setFromCamera(Z.pointer,Z.camera)},connected:void 0,handlers:Object.keys(DOM_EVENTS).reduce((J,Z)=>({...J,[Z]:_(Z)}),{}),update:()=>{var J;const{events:Z,internal:Q}=G.getState();(J=Q.lastEvent)!=null&&J.current&&Z.handlers&&Z.handlers.onPointerMove(Q.lastEvent.current)},connect:J=>{const{set:Z,events:Q}=G.getState();if(Q.disconnect==null||Q.disconnect(),Z(ee=>({events:{...ee.events,connected:J}})),Q.handlers)for(const ee in Q.handlers){const te=Q.handlers[ee],[ne,ie]=DOM_EVENTS[ee];J.addEventListener(ne,te,{passive:ie})}},disconnect:()=>{const{set:J,events:Z}=G.getState();if(Z.connected){if(Z.handlers)for(const Q in Z.handlers){const ee=Z.handlers[Q],[te]=DOM_EVENTS[Q];Z.connected.removeEventListener(te,ee)}J(Q=>({events:{...Q.events,connected:void 0}}))}}}}function g(G,_){let J;return(...Z)=>{window.clearTimeout(J),J=window.setTimeout(()=>G(...Z),_)}}function j({debounce:G,scroll:_,polyfill:J,offsetSize:Z}={debounce:0,scroll:!1,offsetSize:!1}){const Q=J||(typeof window>"u"?class{}:window.ResizeObserver);if(!Q)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[ee,te]=reactExports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),ne=reactExports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:ee,orientationHandler:null}),ie=G?typeof G=="number"?G:G.scroll:null,re=G?typeof G=="number"?G:G.resize:null,oe=reactExports.useRef(!1);reactExports.useEffect(()=>(oe.current=!0,()=>void(oe.current=!1)));const[se,ae,le]=reactExports.useMemo(()=>{const fe=()=>{if(!ne.current.element)return;const{left:_e,top:ye,width:be,height:Ae,bottom:Ce,right:Ee,x:Re,y:Te}=ne.current.element.getBoundingClientRect(),Me={left:_e,top:ye,width:be,height:Ae,bottom:Ce,right:Ee,x:Re,y:Te};ne.current.element instanceof HTMLElement&&Z&&(Me.height=ne.current.element.offsetHeight,Me.width=ne.current.element.offsetWidth),Object.freeze(Me),oe.current&&!D(ne.current.lastBounds,Me)&&te(ne.current.lastBounds=Me)};return[fe,re?g(fe,re):fe,ie?g(fe,ie):fe]},[te,Z,ie,re]);function ue(){ne.current.scrollContainers&&(ne.current.scrollContainers.forEach(fe=>fe.removeEventListener("scroll",le,!0)),ne.current.scrollContainers=null),ne.current.resizeObserver&&(ne.current.resizeObserver.disconnect(),ne.current.resizeObserver=null),ne.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",ne.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",ne.current.orientationHandler))}function de(){ne.current.element&&(ne.current.resizeObserver=new Q(le),ne.current.resizeObserver.observe(ne.current.element),_&&ne.current.scrollContainers&&ne.current.scrollContainers.forEach(fe=>fe.addEventListener("scroll",le,{capture:!0,passive:!0})),ne.current.orientationHandler=()=>{le()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",ne.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",ne.current.orientationHandler))}const pe=fe=>{!fe||fe===ne.current.element||(ue(),ne.current.element=fe,ne.current.scrollContainers=E(fe),de())};return X(le,!!_),W(ae),reactExports.useEffect(()=>{ue(),de()},[_,le,ae]),reactExports.useEffect(()=>ue,[]),[pe,ee,se]}function W(G){reactExports.useEffect(()=>{const _=G;return window.addEventListener("resize",_),()=>void window.removeEventListener("resize",_)},[G])}function X(G,_){reactExports.useEffect(()=>{if(_){const J=G;return window.addEventListener("scroll",J,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",J,!0)}},[G,_])}function E(G){const _=[];if(!G||G===document.body)return _;const{overflow:J,overflowX:Z,overflowY:Q}=window.getComputedStyle(G);return[J,Z,Q].some(ee=>ee==="auto"||ee==="scroll")&&_.push(G),[..._,...E(G.parentElement)]}const k=["x","y","top","bottom","left","right","width","height"],D=(G,_)=>k.every(J=>G[J]===_[J]);function CanvasImpl({ref:G,children:_,fallback:J,resize:Z,style:Q,gl:ee,events:te=createPointerEvents,eventSource:ne,eventPrefix:ie,shadows:re,linear:oe,flat:se,legacy:ae,orthographic:le,frameloop:ue,dpr:de,performance:pe,raycaster:fe,camera:_e,scene:ye,onPointerMissed:be,onCreated:Ae,...Ce}){reactExports.useMemo(()=>extend(THREE),[]);const Ee=useBridge(),[Re,Te]=j({scroll:!0,debounce:{scroll:50,resize:0},...Z}),Me=reactExports.useRef(null),Ne=reactExports.useRef(null);reactExports.useImperativeHandle(G,()=>Me.current);const Le=useMutableCallback(be),[Ie,Ge]=reactExports.useState(!1),[He,Be]=reactExports.useState(!1);if(Ie)throw Ie;if(He)throw He;const ze=reactExports.useRef(null);useIsomorphicLayoutEffect$1(()=>{const $e=Me.current;if(Te.width>0&&Te.height>0&&$e){ze.current||(ze.current=createRoot($e));async function Xe(){await ze.current.configure({gl:ee,scene:ye,events:te,shadows:re,linear:oe,flat:se,legacy:ae,orthographic:le,frameloop:ue,dpr:de,performance:pe,raycaster:fe,camera:_e,size:Te,onPointerMissed:(...je)=>Le.current==null?void 0:Le.current(...je),onCreated:je=>{je.events.connect==null||je.events.connect(ne?isRef(ne)?ne.current:ne:Ne.current),ie&&je.setEvents({compute:(qe,Ze)=>{const st=qe[ie+"X"],St=qe[ie+"Y"];Ze.pointer.set(st/Ze.size.width*2-1,-(St/Ze.size.height)*2+1),Ze.raycaster.setFromCamera(Ze.pointer,Ze.camera)}}),Ae?.(je)}}),ze.current.render(jsxRuntimeExports.jsx(Ee,{children:jsxRuntimeExports.jsx(ErrorBoundary,{set:Be,children:jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(Block,{set:Ge}),children:_??null})})}))}Xe()}}),reactExports.useEffect(()=>{const $e=Me.current;if($e)return()=>unmountComponentAtNode($e)},[]);const Fe=ne?"none":"auto";return jsxRuntimeExports.jsx("div",{ref:Ne,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Fe,...Q},...Ce,children:jsxRuntimeExports.jsx("div",{ref:Re,style:{width:"100%",height:"100%"},children:jsxRuntimeExports.jsx("canvas",{ref:Me,style:{display:"block"},children:J})})})}function Canvas(G){return jsxRuntimeExports.jsx(m,{children:jsxRuntimeExports.jsx(CanvasImpl,{...G})})}function _extends(){return _extends=Object.assign?Object.assign.bind():function(G){for(var _=1;_<arguments.length;_++){var J=arguments[_];for(var Z in J)({}).hasOwnProperty.call(J,Z)&&(G[Z]=J[Z])}return G},_extends.apply(null,arguments)}const v1=new Vector3,v2=new Vector3,v3=new Vector3,v4=new Vector2;function defaultCalculatePosition(G,_,J){const Z=v1.setFromMatrixPosition(G.matrixWorld);Z.project(_);const Q=J.width/2,ee=J.height/2;return[Z.x*Q+Q,-(Z.y*ee)+ee]}function isObjectBehindCamera(G,_){const J=v1.setFromMatrixPosition(G.matrixWorld),Z=v2.setFromMatrixPosition(_.matrixWorld),Q=J.sub(Z),ee=_.getWorldDirection(v3);return Q.angleTo(ee)>Math.PI/2}function isObjectVisible(G,_,J,Z){const Q=v1.setFromMatrixPosition(G.matrixWorld),ee=Q.clone();ee.project(_),v4.set(ee.x,ee.y),J.setFromCamera(v4,_);const te=J.intersectObjects(Z,!0);if(te.length){const ne=te[0].distance;return Q.distanceTo(J.ray.origin)<ne}return!0}function objectScale(G,_){if(_ instanceof OrthographicCamera)return _.zoom;if(_ instanceof PerspectiveCamera){const J=v1.setFromMatrixPosition(G.matrixWorld),Z=v2.setFromMatrixPosition(_.matrixWorld),Q=_.fov*Math.PI/180,ee=J.distanceTo(Z);return 1/(2*Math.tan(Q/2)*ee)}else return 1}function objectZIndex(G,_,J){if(_ instanceof PerspectiveCamera||_ instanceof OrthographicCamera){const Z=v1.setFromMatrixPosition(G.matrixWorld),Q=v2.setFromMatrixPosition(_.matrixWorld),ee=Z.distanceTo(Q),te=(J[1]-J[0])/(_.far-_.near),ne=J[1]-te*_.far;return Math.round(te*ee+ne)}}const epsilon=G=>Math.abs(G)<1e-10?0:G;function getCSSMatrix(G,_,J=""){let Z="matrix3d(";for(let Q=0;Q!==16;Q++)Z+=epsilon(_[Q]*G.elements[Q])+(Q!==15?",":")");return J+Z}const getCameraCSSMatrix=(G=>_=>getCSSMatrix(_,G))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),getObjectCSSMatrix=(G=>(_,J)=>getCSSMatrix(_,G(J),"translate(-50%,-50%)"))(G=>[1/G,1/G,1/G,1,-1/G,-1/G,-1/G,-1,1/G,1/G,1/G,1,1,1,1,1]);function isRefObject(G){return G&&typeof G=="object"&&"current"in G}const Html=reactExports.forwardRef(({children:G,eps:_=.001,style:J,className:Z,prepend:Q,center:ee,fullscreen:te,portal:ne,distanceFactor:ie,sprite:re=!1,transform:oe=!1,occlude:se,onOcclude:ae,castShadow:le,receiveShadow:ue,material:de,geometry:pe,zIndexRange:fe=[16777271,0],calculatePosition:_e=defaultCalculatePosition,as:ye="div",wrapperClass:be,pointerEvents:Ae="auto",...Ce},Ee)=>{const{gl:Re,camera:Te,scene:Me,size:Ne,raycaster:Le,events:Ie,viewport:Ge}=useThree(),[He]=reactExports.useState(()=>document.createElement(ye)),Be=reactExports.useRef(null),ze=reactExports.useRef(null),Fe=reactExports.useRef(0),$e=reactExports.useRef([0,0]),Xe=reactExports.useRef(null),je=reactExports.useRef(null),qe=ne?.current||Ie.connected||Re.domElement.parentNode,Ze=reactExports.useRef(null),st=reactExports.useRef(!1),St=reactExports.useMemo(()=>se&&se!=="blending"||Array.isArray(se)&&se.length&&isRefObject(se[0]),[se]);reactExports.useLayoutEffect(()=>{const Ht=Re.domElement;se&&se==="blending"?(Ht.style.zIndex=`${Math.floor(fe[0]/2)}`,Ht.style.position="absolute",Ht.style.pointerEvents="none"):(Ht.style.zIndex=null,Ht.style.position=null,Ht.style.pointerEvents=null)},[se]),reactExports.useLayoutEffect(()=>{if(ze.current){const Ht=Be.current=clientExports.createRoot(He);if(Me.updateMatrixWorld(),oe)He.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Wt=_e(ze.current,Te,Ne);He.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Wt[0]}px,${Wt[1]}px,0);transform-origin:0 0;`}return qe&&(Q?qe.prepend(He):qe.appendChild(He)),()=>{qe&&qe.removeChild(He),Ht.unmount()}}},[qe,oe]),reactExports.useLayoutEffect(()=>{be&&(He.className=be)},[be]);const it=reactExports.useMemo(()=>oe?{position:"absolute",top:0,left:0,width:Ne.width,height:Ne.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:ee?"translate3d(-50%,-50%,0)":"none",...te&&{top:-Ne.height/2,left:-Ne.width/2,width:Ne.width,height:Ne.height},...J},[J,ee,te,Ne,oe]),lt=reactExports.useMemo(()=>({position:"absolute",pointerEvents:Ae}),[Ae]);reactExports.useLayoutEffect(()=>{if(st.current=!1,oe){var Ht;(Ht=Be.current)==null||Ht.render(reactExports.createElement("div",{ref:Xe,style:it},reactExports.createElement("div",{ref:je,style:lt},reactExports.createElement("div",{ref:Ee,className:Z,style:J,children:G}))))}else{var Wt;(Wt=Be.current)==null||Wt.render(reactExports.createElement("div",{ref:Ee,style:it,className:Z,children:G}))}});const ft=reactExports.useRef(!0);useFrame(Ht=>{if(ze.current){Te.updateMatrixWorld(),ze.current.updateWorldMatrix(!0,!1);const Wt=oe?$e.current:_e(ze.current,Te,Ne);if(oe||Math.abs(Fe.current-Te.zoom)>_||Math.abs($e.current[0]-Wt[0])>_||Math.abs($e.current[1]-Wt[1])>_){const ni=isObjectBehindCamera(ze.current,Te);let jt=!1;St&&(Array.isArray(se)?jt=se.map(Bt=>Bt.current):se!=="blending"&&(jt=[Me]));const pt=ft.current;if(jt){const Bt=isObjectVisible(ze.current,Te,Le,jt);ft.current=Bt&&!ni}else ft.current=!ni;pt!==ft.current&&(ae?ae(!ft.current):He.style.display=ft.current?"block":"none");const Ke=Math.floor(fe[0]/2),Mt=se?St?[fe[0],Ke]:[Ke-1,0]:fe;if(He.style.zIndex=`${objectZIndex(ze.current,Te,Mt)}`,oe){const[Bt,Lt]=[Ne.width/2,Ne.height/2],Ft=Te.projectionMatrix.elements[5]*Lt,{isOrthographicCamera:ai,top:Qt,left:hi,bottom:Qe,right:Ye}=Te,_t=getCameraCSSMatrix(Te.matrixWorldInverse),dt=ai?`scale(${Ft})translate(${epsilon(-(Ye+hi)/2)}px,${epsilon((Qt+Qe)/2)}px)`:`translateZ(${Ft}px)`;let yt=ze.current.matrixWorld;re&&(yt=Te.matrixWorldInverse.clone().transpose().copyPosition(yt).scale(ze.current.scale),yt.elements[3]=yt.elements[7]=yt.elements[11]=0,yt.elements[15]=1),He.style.width=Ne.width+"px",He.style.height=Ne.height+"px",He.style.perspective=ai?"":`${Ft}px`,Xe.current&&je.current&&(Xe.current.style.transform=`${dt}${_t}translate(${Bt}px,${Lt}px)`,je.current.style.transform=getObjectCSSMatrix(yt,1/((ie||10)/400)))}else{const Bt=ie===void 0?1:objectScale(ze.current,Te)*ie;He.style.transform=`translate3d(${Wt[0]}px,${Wt[1]}px,0) scale(${Bt})`}$e.current=Wt,Fe.current=Te.zoom}}if(!St&&Ze.current&&!st.current)if(oe){if(Xe.current){const Wt=Xe.current.children[0];if(Wt!=null&&Wt.clientWidth&&Wt!=null&&Wt.clientHeight){const{isOrthographicCamera:ni}=Te;if(ni||pe)Ce.scale&&(Array.isArray(Ce.scale)?Ce.scale instanceof Vector3?Ze.current.scale.copy(Ce.scale.clone().divideScalar(1)):Ze.current.scale.set(1/Ce.scale[0],1/Ce.scale[1],1/Ce.scale[2]):Ze.current.scale.setScalar(1/Ce.scale));else{const jt=(ie||10)/400,pt=Wt.clientWidth*jt,Ke=Wt.clientHeight*jt;Ze.current.scale.set(pt,Ke,1)}st.current=!0}}}else{const Wt=He.children[0];if(Wt!=null&&Wt.clientWidth&&Wt!=null&&Wt.clientHeight){const ni=1/Ge.factor,jt=Wt.clientWidth*ni,pt=Wt.clientHeight*ni;Ze.current.scale.set(jt,pt,1),st.current=!0}Ze.current.lookAt(Ht.camera.position)}});const kt=reactExports.useMemo(()=>({vertexShader:oe?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[oe]);return reactExports.createElement("group",_extends({},Ce,{ref:ze}),se&&!St&&reactExports.createElement("mesh",{castShadow:le,receiveShadow:ue,ref:Ze},pe||reactExports.createElement("planeGeometry",null),de||reactExports.createElement("shaderMaterial",{side:DoubleSide,vertexShader:kt.vertexShader,fragmentShader:kt.fragmentShader})))}),identity$1=G=>G;function useStore$1(G,_=identity$1){const J=React.useSyncExternalStore(G.subscribe,React.useCallback(()=>_(G.getState()),[G,_]),React.useCallback(()=>_(G.getInitialState()),[G,_]));return React.useDebugValue(J),J}const createImpl=G=>{const _=createStore$1(G),J=Z=>useStore$1(_,Z);return Object.assign(J,_),J},create$1=(G=>G?createImpl(G):createImpl);function clamp(G,_,J){return Math.max(_,Math.min(G,J))}const V={toVector(G,_){return G===void 0&&(G=_),Array.isArray(G)?G:[G,G]},add(G,_){return[G[0]+_[0],G[1]+_[1]]},sub(G,_){return[G[0]-_[0],G[1]-_[1]]},addTo(G,_){G[0]+=_[0],G[1]+=_[1]},subTo(G,_){G[0]-=_[0],G[1]-=_[1]}};function rubberband(G,_,J){return _===0||Math.abs(_)===1/0?Math.pow(G,J*5):G*_*J/(_+J*G)}function rubberbandIfOutOfBounds(G,_,J,Z=.15){return Z===0?clamp(G,_,J):G<_?-rubberband(_-G,J-_,Z)+_:G>J?+rubberband(G-J,J-_,Z)+J:G}function computeRubberband(G,[_,J],[Z,Q]){const[[ee,te],[ne,ie]]=G;return[rubberbandIfOutOfBounds(_,ee,te,Z),rubberbandIfOutOfBounds(J,ne,ie,Q)]}function _toPrimitive(G,_){if(typeof G!="object"||G===null)return G;var J=G[Symbol.toPrimitive];if(J!==void 0){var Z=J.call(G,_);if(typeof Z!="object")return Z;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(G)}function _toPropertyKey(G){var _=_toPrimitive(G,"string");return typeof _=="symbol"?_:String(_)}function _defineProperty(G,_,J){return _=_toPropertyKey(_),_ in G?Object.defineProperty(G,_,{value:J,enumerable:!0,configurable:!0,writable:!0}):G[_]=J,G}function ownKeys(G,_){var J=Object.keys(G);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(G);_&&(Z=Z.filter(function(Q){return Object.getOwnPropertyDescriptor(G,Q).enumerable})),J.push.apply(J,Z)}return J}function _objectSpread2(G){for(var _=1;_<arguments.length;_++){var J=arguments[_]!=null?arguments[_]:{};_%2?ownKeys(Object(J),!0).forEach(function(Z){_defineProperty(G,Z,J[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(J)):ownKeys(Object(J)).forEach(function(Z){Object.defineProperty(G,Z,Object.getOwnPropertyDescriptor(J,Z))})}return G}const EVENT_TYPE_MAP={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function capitalize(G){return G?G[0].toUpperCase()+G.slice(1):""}const actionsWithoutCaptureSupported=["enter","leave"];function hasCapture(G=!1,_){return G&&!actionsWithoutCaptureSupported.includes(_)}function toHandlerProp(G,_="",J=!1){const Z=EVENT_TYPE_MAP[G],Q=Z&&Z[_]||_;return"on"+capitalize(G)+capitalize(Q)+(hasCapture(J,Q)?"Capture":"")}const pointerCaptureEvents=["gotpointercapture","lostpointercapture"];function parseProp(G){let _=G.substring(2).toLowerCase();const J=!!~_.indexOf("passive");J&&(_=_.replace("passive",""));const Z=pointerCaptureEvents.includes(_)?"capturecapture":"capture",Q=!!~_.indexOf(Z);return Q&&(_=_.replace("capture","")),{device:_,capture:Q,passive:J}}function toDomEventType(G,_=""){const J=EVENT_TYPE_MAP[G],Z=J&&J[_]||_;return G+Z}function isTouch(G){return"touches"in G}function getPointerType(G){return isTouch(G)?"touch":"pointerType"in G?G.pointerType:"mouse"}function getCurrentTargetTouchList(G){return Array.from(G.touches).filter(_=>{var J,Z;return _.target===G.currentTarget||((J=G.currentTarget)===null||J===void 0||(Z=J.contains)===null||Z===void 0?void 0:Z.call(J,_.target))})}function getTouchList(G){return G.type==="touchend"||G.type==="touchcancel"?G.changedTouches:G.targetTouches}function getValueEvent(G){return isTouch(G)?getTouchList(G)[0]:G}function distanceAngle(G,_){try{const J=_.clientX-G.clientX,Z=_.clientY-G.clientY,Q=(_.clientX+G.clientX)/2,ee=(_.clientY+G.clientY)/2,te=Math.hypot(J,Z);return{angle:-(Math.atan2(J,Z)*180)/Math.PI,distance:te,origin:[Q,ee]}}catch{}return null}function touchIds(G){return getCurrentTargetTouchList(G).map(_=>_.identifier)}function touchDistanceAngle(G,_){const[J,Z]=Array.from(G.touches).filter(Q=>_.includes(Q.identifier));return distanceAngle(J,Z)}function pointerId(G){const _=getValueEvent(G);return isTouch(G)?_.identifier:_.pointerId}function pointerValues(G){const _=getValueEvent(G);return[_.clientX,_.clientY]}const LINE_HEIGHT=40,PAGE_HEIGHT=800;function wheelValues(G){let{deltaX:_,deltaY:J,deltaMode:Z}=G;return Z===1?(_*=LINE_HEIGHT,J*=LINE_HEIGHT):Z===2&&(_*=PAGE_HEIGHT,J*=PAGE_HEIGHT),[_,J]}function scrollValues(G){var _,J;const{scrollX:Z,scrollY:Q,scrollLeft:ee,scrollTop:te}=G.currentTarget;return[(_=Z??ee)!==null&&_!==void 0?_:0,(J=Q??te)!==null&&J!==void 0?J:0]}function getEventDetails(G){const _={};if("buttons"in G&&(_.buttons=G.buttons),"shiftKey"in G){const{shiftKey:J,altKey:Z,metaKey:Q,ctrlKey:ee}=G;Object.assign(_,{shiftKey:J,altKey:Z,metaKey:Q,ctrlKey:ee})}return _}function call$1(G,..._){return typeof G=="function"?G(..._):G}function noop$1(){}function chain(...G){return G.length===0?noop$1:G.length===1?G[0]:function(){let _;for(const J of G)_=J.apply(this,arguments)||_;return _}}function assignDefault(G,_){return Object.assign({},_,G||{})}const BEFORE_LAST_KINEMATICS_DELAY=32;class Engine{constructor(_,J,Z){this.ctrl=_,this.args=J,this.key=Z,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(_){this.ctrl.state[this.key]=_}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:_,shared:J,ingKey:Z,args:Q}=this;J[Z]=_._active=_.active=_._blocked=_._force=!1,_._step=[!1,!1],_.intentional=!1,_._movement=[0,0],_._distance=[0,0],_._direction=[0,0],_._delta=[0,0],_._bounds=[[-1/0,1/0],[-1/0,1/0]],_.args=Q,_.axis=void 0,_.memo=void 0,_.elapsedTime=_.timeDelta=0,_.direction=[0,0],_.distance=[0,0],_.overflow=[0,0],_._movementBound=[!1,!1],_.velocity=[0,0],_.movement=[0,0],_.delta=[0,0],_.timeStamp=0}start(_){const J=this.state,Z=this.config;J._active||(this.reset(),this.computeInitial(),J._active=!0,J.target=_.target,J.currentTarget=_.currentTarget,J.lastOffset=Z.from?call$1(Z.from,J):J.offset,J.offset=J.lastOffset,J.startTime=J.timeStamp=_.timeStamp)}computeValues(_){const J=this.state;J._values=_,J.values=this.config.transform(_)}computeInitial(){const _=this.state;_._initial=_._values,_.initial=_.values}compute(_){const{state:J,config:Z,shared:Q}=this;J.args=this.args;let ee=0;if(_&&(J.event=_,Z.preventDefault&&_.cancelable&&J.event.preventDefault(),J.type=_.type,Q.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,Q.locked=!!document.pointerLockElement,Object.assign(Q,getEventDetails(_)),Q.down=Q.pressed=Q.buttons%2===1||Q.touches>0,ee=_.timeStamp-J.timeStamp,J.timeStamp=_.timeStamp,J.elapsedTime=J.timeStamp-J.startTime),J._active){const Ce=J._delta.map(Math.abs);V.addTo(J._distance,Ce)}this.axisIntent&&this.axisIntent(_);const[te,ne]=J._movement,[ie,re]=Z.threshold,{_step:oe,values:se}=J;if(Z.hasCustomTransform?(oe[0]===!1&&(oe[0]=Math.abs(te)>=ie&&se[0]),oe[1]===!1&&(oe[1]=Math.abs(ne)>=re&&se[1])):(oe[0]===!1&&(oe[0]=Math.abs(te)>=ie&&Math.sign(te)*ie),oe[1]===!1&&(oe[1]=Math.abs(ne)>=re&&Math.sign(ne)*re)),J.intentional=oe[0]!==!1||oe[1]!==!1,!J.intentional)return;const ae=[0,0];if(Z.hasCustomTransform){const[Ce,Ee]=se;ae[0]=oe[0]!==!1?Ce-oe[0]:0,ae[1]=oe[1]!==!1?Ee-oe[1]:0}else ae[0]=oe[0]!==!1?te-oe[0]:0,ae[1]=oe[1]!==!1?ne-oe[1]:0;this.restrictToAxis&&!J._blocked&&this.restrictToAxis(ae);const le=J.offset,ue=J._active&&!J._blocked||J.active;ue&&(J.first=J._active&&!J.active,J.last=!J._active&&J.active,J.active=Q[this.ingKey]=J._active,_&&(J.first&&("bounds"in Z&&(J._bounds=call$1(Z.bounds,J)),this.setup&&this.setup()),J.movement=ae,this.computeOffset()));const[de,pe]=J.offset,[[fe,_e],[ye,be]]=J._bounds;J.overflow=[de<fe?-1:de>_e?1:0,pe<ye?-1:pe>be?1:0],J._movementBound[0]=J.overflow[0]?J._movementBound[0]===!1?J._movement[0]:J._movementBound[0]:!1,J._movementBound[1]=J.overflow[1]?J._movementBound[1]===!1?J._movement[1]:J._movementBound[1]:!1;const Ae=J._active?Z.rubberband||[0,0]:[0,0];if(J.offset=computeRubberband(J._bounds,J.offset,Ae),J.delta=V.sub(J.offset,le),this.computeMovement(),ue&&(!J.last||ee>BEFORE_LAST_KINEMATICS_DELAY)){J.delta=V.sub(J.offset,le);const Ce=J.delta.map(Math.abs);V.addTo(J.distance,Ce),J.direction=J.delta.map(Math.sign),J._direction=J._delta.map(Math.sign),!J.first&&ee>0&&(J.velocity=[Ce[0]/ee,Ce[1]/ee],J.timeDelta=ee)}}emit(){const _=this.state,J=this.shared,Z=this.config;if(_._active||this.clean(),(_._blocked||!_.intentional)&&!_._force&&!Z.triggerAllEvents)return;const Q=this.handler(_objectSpread2(_objectSpread2(_objectSpread2({},J),_),{},{[this.aliasKey]:_.values}));Q!==void 0&&(_.memo=Q)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function selectAxis([G,_],J){const Z=Math.abs(G),Q=Math.abs(_);if(Z>Q&&Z>J)return"x";if(Q>Z&&Q>J)return"y"}class CoordinatesEngine extends Engine{constructor(..._){super(..._),_defineProperty(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=V.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=V.sub(this.state.offset,this.state.lastOffset)}axisIntent(_){const J=this.state,Z=this.config;if(!J.axis&&_){const Q=typeof Z.axisThreshold=="object"?Z.axisThreshold[getPointerType(_)]:Z.axisThreshold;J.axis=selectAxis(J._movement,Q)}J._blocked=(Z.lockDirection||!!Z.axis)&&!J.axis||!!Z.axis&&Z.axis!==J.axis}restrictToAxis(_){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":_[1]=0;break;case"y":_[0]=0;break}}}const identity=G=>G,DEFAULT_RUBBERBAND=.15,commonConfigResolver={enabled(G=!0){return G},eventOptions(G,_,J){return _objectSpread2(_objectSpread2({},J.shared.eventOptions),G)},preventDefault(G=!1){return G},triggerAllEvents(G=!1){return G},rubberband(G=0){switch(G){case!0:return[DEFAULT_RUBBERBAND,DEFAULT_RUBBERBAND];case!1:return[0,0];default:return V.toVector(G)}},from(G){if(typeof G=="function")return G;if(G!=null)return V.toVector(G)},transform(G,_,J){const Z=G||J.shared.transform;return this.hasCustomTransform=!!Z,Z||identity},threshold(G){return V.toVector(G,0)}},DEFAULT_AXIS_THRESHOLD=0,coordinatesConfigResolver=_objectSpread2(_objectSpread2({},commonConfigResolver),{},{axis(G,_,{axis:J}){if(this.lockDirection=J==="lock",!this.lockDirection)return J},axisThreshold(G=DEFAULT_AXIS_THRESHOLD){return G},bounds(G={}){if(typeof G=="function")return ee=>coordinatesConfigResolver.bounds(G(ee));if("current"in G)return()=>G.current;if(typeof HTMLElement=="function"&&G instanceof HTMLElement)return G;const{left:_=-1/0,right:J=1/0,top:Z=-1/0,bottom:Q=1/0}=G;return[[_,J],[Z,Q]]}}),KEYS_DELTA_MAP={ArrowRight:(G,_=1)=>[G*_,0],ArrowLeft:(G,_=1)=>[-1*G*_,0],ArrowUp:(G,_=1)=>[0,-1*G*_],ArrowDown:(G,_=1)=>[0,G*_]};class DragEngine extends CoordinatesEngine{constructor(..._){super(..._),_defineProperty(this,"ingKey","dragging")}reset(){super.reset();const _=this.state;_._pointerId=void 0,_._pointerActive=!1,_._keyboardActive=!1,_._preventScroll=!1,_._delayed=!1,_.swipe=[0,0],_.tap=!1,_.canceled=!1,_.cancel=this.cancel.bind(this)}setup(){const _=this.state;if(_._bounds instanceof HTMLElement){const J=_._bounds.getBoundingClientRect(),Z=_.currentTarget.getBoundingClientRect(),Q={left:J.left-Z.left+_.offset[0],right:J.right-Z.right+_.offset[0],top:J.top-Z.top+_.offset[1],bottom:J.bottom-Z.bottom+_.offset[1]};_._bounds=coordinatesConfigResolver.bounds(Q)}}cancel(){const _=this.state;_.canceled||(_.canceled=!0,_._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(_){const J=this.config,Z=this.state;if(_.buttons!=null&&(Array.isArray(J.pointerButtons)?!J.pointerButtons.includes(_.buttons):J.pointerButtons!==-1&&J.pointerButtons!==_.buttons))return;const Q=this.ctrl.setEventIds(_);J.pointerCapture&&_.target.setPointerCapture(_.pointerId),!(Q&&Q.size>1&&Z._pointerActive)&&(this.start(_),this.setupPointer(_),Z._pointerId=pointerId(_),Z._pointerActive=!0,this.computeValues(pointerValues(_)),this.computeInitial(),J.preventScrollAxis&&getPointerType(_)!=="mouse"?(Z._active=!1,this.setupScrollPrevention(_)):J.delay>0?(this.setupDelayTrigger(_),J.triggerAllEvents&&(this.compute(_),this.emit())):this.startPointerDrag(_))}startPointerDrag(_){const J=this.state;J._active=!0,J._preventScroll=!0,J._delayed=!1,this.compute(_),this.emit()}pointerMove(_){const J=this.state,Z=this.config;if(!J._pointerActive)return;const Q=pointerId(_);if(J._pointerId!==void 0&&Q!==J._pointerId)return;const ee=pointerValues(_);if(document.pointerLockElement===_.target?J._delta=[_.movementX,_.movementY]:(J._delta=V.sub(ee,J._values),this.computeValues(ee)),V.addTo(J._movement,J._delta),this.compute(_),J._delayed&&J.intentional){this.timeoutStore.remove("dragDelay"),J.active=!1,this.startPointerDrag(_);return}if(Z.preventScrollAxis&&!J._preventScroll)if(J.axis)if(J.axis===Z.preventScrollAxis||Z.preventScrollAxis==="xy"){J._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(_);return}else return;this.emit()}pointerUp(_){this.ctrl.setEventIds(_);try{this.config.pointerCapture&&_.target.hasPointerCapture(_.pointerId)&&_.target.releasePointerCapture(_.pointerId)}catch{}const J=this.state,Z=this.config;if(!J._active||!J._pointerActive)return;const Q=pointerId(_);if(J._pointerId!==void 0&&Q!==J._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(_);const[ee,te]=J._distance;if(J.tap=ee<=Z.tapsThreshold&&te<=Z.tapsThreshold,J.tap&&Z.filterTaps)J._force=!0;else{const[ne,ie]=J._delta,[re,oe]=J._movement,[se,ae]=Z.swipe.velocity,[le,ue]=Z.swipe.distance,de=Z.swipe.duration;if(J.elapsedTime<de){const pe=Math.abs(ne/J.timeDelta),fe=Math.abs(ie/J.timeDelta);pe>se&&Math.abs(re)>le&&(J.swipe[0]=Math.sign(ne)),fe>ae&&Math.abs(oe)>ue&&(J.swipe[1]=Math.sign(ie))}}this.emit()}pointerClick(_){!this.state.tap&&_.detail>0&&(_.preventDefault(),_.stopPropagation())}setupPointer(_){const J=this.config,Z=J.device;J.pointerLock&&_.currentTarget.requestPointerLock(),J.pointerCapture||(this.eventStore.add(this.sharedConfig.window,Z,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,Z,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,Z,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(_){this.state._preventScroll&&_.cancelable&&_.preventDefault()}setupScrollPrevention(_){this.state._preventScroll=!1,persistEvent(_);const J=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",J),this.eventStore.add(this.sharedConfig.window,"touch","cancel",J),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,_)}setupDelayTrigger(_){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(_)},this.config.delay)}keyDown(_){const J=KEYS_DELTA_MAP[_.key];if(J){const Z=this.state,Q=_.shiftKey?10:_.altKey?.1:1;this.start(_),Z._delta=J(this.config.keyboardDisplacement,Q),Z._keyboardActive=!0,V.addTo(Z._movement,Z._delta),this.compute(_),this.emit()}}keyUp(_){_.key in KEYS_DELTA_MAP&&(this.state._keyboardActive=!1,this.setActive(),this.compute(_),this.emit())}bind(_){const J=this.config.device;_(J,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(_(J,"change",this.pointerMove.bind(this)),_(J,"end",this.pointerUp.bind(this)),_(J,"cancel",this.pointerUp.bind(this)),_("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(_("key","down",this.keyDown.bind(this)),_("key","up",this.keyUp.bind(this))),this.config.filterTaps&&_("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function persistEvent(G){"persist"in G&&typeof G.persist=="function"&&G.persist()}const isBrowser=typeof window<"u"&&window.document&&window.document.createElement;function supportsTouchEvents(){return isBrowser&&"ontouchstart"in window}function isTouchScreen(){return supportsTouchEvents()||isBrowser&&window.navigator.maxTouchPoints>1}function supportsPointerEvents(){return isBrowser&&"onpointerdown"in window}function supportsPointerLock(){return isBrowser&&"exitPointerLock"in window.document}function supportsGestureEvents(){try{return"constructor"in GestureEvent}catch{return!1}}const SUPPORT={isBrowser,gesture:supportsGestureEvents(),touch:supportsTouchEvents(),touchscreen:isTouchScreen(),pointer:supportsPointerEvents(),pointerLock:supportsPointerLock()},DEFAULT_PREVENT_SCROLL_DELAY=250,DEFAULT_DRAG_DELAY=180,DEFAULT_SWIPE_VELOCITY=.5,DEFAULT_SWIPE_DISTANCE=50,DEFAULT_SWIPE_DURATION=250,DEFAULT_KEYBOARD_DISPLACEMENT=10,DEFAULT_DRAG_AXIS_THRESHOLD={mouse:0,touch:0,pen:8},dragConfigResolver=_objectSpread2(_objectSpread2({},coordinatesConfigResolver),{},{device(G,_,{pointer:{touch:J=!1,lock:Z=!1,mouse:Q=!1}={}}){return this.pointerLock=Z&&SUPPORT.pointerLock,SUPPORT.touch&&J?"touch":this.pointerLock?"mouse":SUPPORT.pointer&&!Q?"pointer":SUPPORT.touch?"touch":"mouse"},preventScrollAxis(G,_,{preventScroll:J}){if(this.preventScrollDelay=typeof J=="number"?J:J||J===void 0&&G?DEFAULT_PREVENT_SCROLL_DELAY:void 0,!(!SUPPORT.touchscreen||J===!1))return G||(J!==void 0?"y":void 0)},pointerCapture(G,_,{pointer:{capture:J=!0,buttons:Z=1,keys:Q=!0}={}}){return this.pointerButtons=Z,this.keys=Q,!this.pointerLock&&this.device==="pointer"&&J},threshold(G,_,{filterTaps:J=!1,tapsThreshold:Z=3,axis:Q=void 0}){const ee=V.toVector(G,J?Z:Q?1:0);return this.filterTaps=J,this.tapsThreshold=Z,ee},swipe({velocity:G=DEFAULT_SWIPE_VELOCITY,distance:_=DEFAULT_SWIPE_DISTANCE,duration:J=DEFAULT_SWIPE_DURATION}={}){return{velocity:this.transform(V.toVector(G)),distance:this.transform(V.toVector(_)),duration:J}},delay(G=0){switch(G){case!0:return DEFAULT_DRAG_DELAY;case!1:return 0;default:return G}},axisThreshold(G){return G?_objectSpread2(_objectSpread2({},DEFAULT_DRAG_AXIS_THRESHOLD),G):DEFAULT_DRAG_AXIS_THRESHOLD},keyboardDisplacement(G=DEFAULT_KEYBOARD_DISPLACEMENT){return G}});function clampStateInternalMovementToBounds(G){const[_,J]=G.overflow,[Z,Q]=G._delta,[ee,te]=G._direction;(_<0&&Z>0&&ee<0||_>0&&Z<0&&ee>0)&&(G._movement[0]=G._movementBound[0]),(J<0&&Q>0&&te<0||J>0&&Q<0&&te>0)&&(G._movement[1]=G._movementBound[1])}const SCALE_ANGLE_RATIO_INTENT_DEG=30,PINCH_WHEEL_RATIO=100;class PinchEngine extends Engine{constructor(..._){super(..._),_defineProperty(this,"ingKey","pinching"),_defineProperty(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const _=this.state;_._touchIds=[],_.canceled=!1,_.cancel=this.cancel.bind(this),_.turns=0}computeOffset(){const{type:_,movement:J,lastOffset:Z}=this.state;_==="wheel"?this.state.offset=V.add(J,Z):this.state.offset=[(1+J[0])*Z[0],J[1]+Z[1]]}computeMovement(){const{offset:_,lastOffset:J}=this.state;this.state.movement=[_[0]/J[0],_[1]-J[1]]}axisIntent(){const _=this.state,[J,Z]=_._movement;if(!_.axis){const Q=Math.abs(J)*SCALE_ANGLE_RATIO_INTENT_DEG-Math.abs(Z);Q<0?_.axis="angle":Q>0&&(_.axis="scale")}}restrictToAxis(_){this.config.lockDirection&&(this.state.axis==="scale"?_[1]=0:this.state.axis==="angle"&&(_[0]=0))}cancel(){const _=this.state;_.canceled||setTimeout(()=>{_.canceled=!0,_._active=!1,this.compute(),this.emit()},0)}touchStart(_){this.ctrl.setEventIds(_);const J=this.state,Z=this.ctrl.touchIds;if(J._active&&J._touchIds.every(ee=>Z.has(ee))||Z.size<2)return;this.start(_),J._touchIds=Array.from(Z).slice(0,2);const Q=touchDistanceAngle(_,J._touchIds);Q&&this.pinchStart(_,Q)}pointerStart(_){if(_.buttons!=null&&_.buttons%2!==1)return;this.ctrl.setEventIds(_),_.target.setPointerCapture(_.pointerId);const J=this.state,Z=J._pointerEvents,Q=this.ctrl.pointerIds;if(J._active&&Array.from(Z.keys()).every(te=>Q.has(te))||(Z.size<2&&Z.set(_.pointerId,_),J._pointerEvents.size<2))return;this.start(_);const ee=distanceAngle(...Array.from(Z.values()));ee&&this.pinchStart(_,ee)}pinchStart(_,J){const Z=this.state;Z.origin=J.origin,this.computeValues([J.distance,J.angle]),this.computeInitial(),this.compute(_),this.emit()}touchMove(_){if(!this.state._active)return;const J=touchDistanceAngle(_,this.state._touchIds);J&&this.pinchMove(_,J)}pointerMove(_){const J=this.state._pointerEvents;if(J.has(_.pointerId)&&J.set(_.pointerId,_),!this.state._active)return;const Z=distanceAngle(...Array.from(J.values()));Z&&this.pinchMove(_,Z)}pinchMove(_,J){const Z=this.state,Q=Z._values[1],ee=J.angle-Q;let te=0;Math.abs(ee)>270&&(te+=Math.sign(ee)),this.computeValues([J.distance,J.angle-360*te]),Z.origin=J.origin,Z.turns=te,Z._movement=[Z._values[0]/Z._initial[0]-1,Z._values[1]-Z._initial[1]],this.compute(_),this.emit()}touchEnd(_){this.ctrl.setEventIds(_),this.state._active&&this.state._touchIds.some(J=>!this.ctrl.touchIds.has(J))&&(this.state._active=!1,this.compute(_),this.emit())}pointerEnd(_){const J=this.state;this.ctrl.setEventIds(_);try{_.target.releasePointerCapture(_.pointerId)}catch{}J._pointerEvents.has(_.pointerId)&&J._pointerEvents.delete(_.pointerId),J._active&&J._pointerEvents.size<2&&(J._active=!1,this.compute(_),this.emit())}gestureStart(_){_.cancelable&&_.preventDefault();const J=this.state;J._active||(this.start(_),this.computeValues([_.scale,_.rotation]),J.origin=[_.clientX,_.clientY],this.compute(_),this.emit())}gestureMove(_){if(_.cancelable&&_.preventDefault(),!this.state._active)return;const J=this.state;this.computeValues([_.scale,_.rotation]),J.origin=[_.clientX,_.clientY];const Z=J._movement;J._movement=[_.scale-1,_.rotation],J._delta=V.sub(J._movement,Z),this.compute(_),this.emit()}gestureEnd(_){this.state._active&&(this.state._active=!1,this.compute(_),this.emit())}wheel(_){const J=this.config.modifierKey;J&&(Array.isArray(J)?!J.find(Z=>_[Z]):!_[J])||(this.state._active?this.wheelChange(_):this.wheelStart(_),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(_){this.start(_),this.wheelChange(_)}wheelChange(_){"uv"in _||_.cancelable&&_.preventDefault();const Z=this.state;Z._delta=[-wheelValues(_)[1]/PINCH_WHEEL_RATIO*Z.offset[0],0],V.addTo(Z._movement,Z._delta),clampStateInternalMovementToBounds(Z),this.state.origin=[_.clientX,_.clientY],this.compute(_),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(_){const J=this.config.device;J&&(_(J,"start",this[J+"Start"].bind(this)),_(J,"change",this[J+"Move"].bind(this)),_(J,"end",this[J+"End"].bind(this)),_(J,"cancel",this[J+"End"].bind(this)),_("lostPointerCapture","",this[J+"End"].bind(this))),this.config.pinchOnWheel&&_("wheel","",this.wheel.bind(this),{passive:!1})}}const pinchConfigResolver=_objectSpread2(_objectSpread2({},commonConfigResolver),{},{device(G,_,{shared:J,pointer:{touch:Z=!1}={}}){if(J.target&&!SUPPORT.touch&&SUPPORT.gesture)return"gesture";if(SUPPORT.touch&&Z)return"touch";if(SUPPORT.touchscreen){if(SUPPORT.pointer)return"pointer";if(SUPPORT.touch)return"touch"}},bounds(G,_,{scaleBounds:J={},angleBounds:Z={}}){const Q=te=>{const ne=assignDefault(call$1(J,te),{min:-1/0,max:1/0});return[ne.min,ne.max]},ee=te=>{const ne=assignDefault(call$1(Z,te),{min:-1/0,max:1/0});return[ne.min,ne.max]};return typeof J!="function"&&typeof Z!="function"?[Q(),ee()]:te=>[Q(te),ee(te)]},threshold(G,_,J){return this.lockDirection=J.axis==="lock",V.toVector(G,this.lockDirection?[.1,3]:0)},modifierKey(G){return G===void 0?"ctrlKey":G},pinchOnWheel(G=!0){return G}});class MoveEngine extends CoordinatesEngine{constructor(..._){super(..._),_defineProperty(this,"ingKey","moving")}move(_){this.config.mouseOnly&&_.pointerType!=="mouse"||(this.state._active?this.moveChange(_):this.moveStart(_),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(_){this.start(_),this.computeValues(pointerValues(_)),this.compute(_),this.computeInitial(),this.emit()}moveChange(_){if(!this.state._active)return;const J=pointerValues(_),Z=this.state;Z._delta=V.sub(J,Z._values),V.addTo(Z._movement,Z._delta),this.computeValues(J),this.compute(_),this.emit()}moveEnd(_){this.state._active&&(this.state._active=!1,this.compute(_),this.emit())}bind(_){_("pointer","change",this.move.bind(this)),_("pointer","leave",this.moveEnd.bind(this))}}const moveConfigResolver=_objectSpread2(_objectSpread2({},coordinatesConfigResolver),{},{mouseOnly:(G=!0)=>G});class ScrollEngine extends CoordinatesEngine{constructor(..._){super(..._),_defineProperty(this,"ingKey","scrolling")}scroll(_){this.state._active||this.start(_),this.scrollChange(_),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(_){_.cancelable&&_.preventDefault();const J=this.state,Z=scrollValues(_);J._delta=V.sub(Z,J._values),V.addTo(J._movement,J._delta),this.computeValues(Z),this.compute(_),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(_){_("scroll","",this.scroll.bind(this))}}const scrollConfigResolver=coordinatesConfigResolver;class WheelEngine extends CoordinatesEngine{constructor(..._){super(..._),_defineProperty(this,"ingKey","wheeling")}wheel(_){this.state._active||this.start(_),this.wheelChange(_),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(_){const J=this.state;J._delta=wheelValues(_),V.addTo(J._movement,J._delta),clampStateInternalMovementToBounds(J),this.compute(_),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(_){_("wheel","",this.wheel.bind(this))}}const wheelConfigResolver=coordinatesConfigResolver;class HoverEngine extends CoordinatesEngine{constructor(..._){super(..._),_defineProperty(this,"ingKey","hovering")}enter(_){this.config.mouseOnly&&_.pointerType!=="mouse"||(this.start(_),this.computeValues(pointerValues(_)),this.compute(_),this.emit())}leave(_){if(this.config.mouseOnly&&_.pointerType!=="mouse")return;const J=this.state;if(!J._active)return;J._active=!1;const Z=pointerValues(_);J._movement=J._delta=V.sub(Z,J._values),this.computeValues(Z),this.compute(_),J.delta=J.movement,this.emit()}bind(_){_("pointer","enter",this.enter.bind(this)),_("pointer","leave",this.leave.bind(this))}}const hoverConfigResolver=_objectSpread2(_objectSpread2({},coordinatesConfigResolver),{},{mouseOnly:(G=!0)=>G}),EngineMap=new Map,ConfigResolverMap=new Map;function registerAction(G){EngineMap.set(G.key,G.engine),ConfigResolverMap.set(G.key,G.resolver)}const dragAction={key:"drag",engine:DragEngine,resolver:dragConfigResolver},hoverAction={key:"hover",engine:HoverEngine,resolver:hoverConfigResolver},moveAction={key:"move",engine:MoveEngine,resolver:moveConfigResolver},pinchAction={key:"pinch",engine:PinchEngine,resolver:pinchConfigResolver},scrollAction={key:"scroll",engine:ScrollEngine,resolver:scrollConfigResolver},wheelAction={key:"wheel",engine:WheelEngine,resolver:wheelConfigResolver};function _objectWithoutPropertiesLoose(G,_){if(G==null)return{};var J={},Z=Object.keys(G),Q,ee;for(ee=0;ee<Z.length;ee++)Q=Z[ee],!(_.indexOf(Q)>=0)&&(J[Q]=G[Q]);return J}function _objectWithoutProperties(G,_){if(G==null)return{};var J=_objectWithoutPropertiesLoose(G,_),Z,Q;if(Object.getOwnPropertySymbols){var ee=Object.getOwnPropertySymbols(G);for(Q=0;Q<ee.length;Q++)Z=ee[Q],!(_.indexOf(Z)>=0)&&Object.prototype.propertyIsEnumerable.call(G,Z)&&(J[Z]=G[Z])}return J}const sharedConfigResolver={target(G){if(G)return()=>"current"in G?G.current:G},enabled(G=!0){return G},window(G=SUPPORT.isBrowser?window:void 0){return G},eventOptions({passive:G=!0,capture:_=!1}={}){return{passive:G,capture:_}},transform(G){return G}},_excluded=["target","eventOptions","window","enabled","transform"];function resolveWith(G={},_){const J={};for(const[Z,Q]of Object.entries(_))switch(typeof Q){case"function":J[Z]=Q.call(J,G[Z],Z,G);break;case"object":J[Z]=resolveWith(G[Z],Q);break;case"boolean":Q&&(J[Z]=G[Z]);break}return J}function parse(G,_,J={}){const Z=G,{target:Q,eventOptions:ee,window:te,enabled:ne,transform:ie}=Z,re=_objectWithoutProperties(Z,_excluded);if(J.shared=resolveWith({target:Q,eventOptions:ee,window:te,enabled:ne,transform:ie},sharedConfigResolver),_){const oe=ConfigResolverMap.get(_);J[_]=resolveWith(_objectSpread2({shared:J.shared},re),oe)}else for(const oe in re){const se=ConfigResolverMap.get(oe);se&&(J[oe]=resolveWith(_objectSpread2({shared:J.shared},re[oe]),se))}return J}class EventStore{constructor(_,J){_defineProperty(this,"_listeners",new Set),this._ctrl=_,this._gestureKey=J}add(_,J,Z,Q,ee){const te=this._listeners,ne=toDomEventType(J,Z),ie=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},re=_objectSpread2(_objectSpread2({},ie),ee);_.addEventListener(ne,Q,re);const oe=()=>{_.removeEventListener(ne,Q,re),te.delete(oe)};return te.add(oe),oe}clean(){this._listeners.forEach(_=>_()),this._listeners.clear()}}class TimeoutStore{constructor(){_defineProperty(this,"_timeouts",new Map)}add(_,J,Z=140,...Q){this.remove(_),this._timeouts.set(_,window.setTimeout(J,Z,...Q))}remove(_){const J=this._timeouts.get(_);J&&window.clearTimeout(J)}clean(){this._timeouts.forEach(_=>void window.clearTimeout(_)),this._timeouts.clear()}}let Controller$1=class{constructor(_){_defineProperty(this,"gestures",new Set),_defineProperty(this,"_targetEventStore",new EventStore(this)),_defineProperty(this,"gestureEventStores",{}),_defineProperty(this,"gestureTimeoutStores",{}),_defineProperty(this,"handlers",{}),_defineProperty(this,"config",{}),_defineProperty(this,"pointerIds",new Set),_defineProperty(this,"touchIds",new Set),_defineProperty(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),resolveGestures(this,_)}setEventIds(_){if(isTouch(_))return this.touchIds=new Set(touchIds(_)),this.touchIds;if("pointerId"in _)return _.type==="pointerup"||_.type==="pointercancel"?this.pointerIds.delete(_.pointerId):_.type==="pointerdown"&&this.pointerIds.add(_.pointerId),this.pointerIds}applyHandlers(_,J){this.handlers=_,this.nativeHandlers=J}applyConfig(_,J){this.config=parse(_,J,this.config)}clean(){this._targetEventStore.clean();for(const _ of this.gestures)this.gestureEventStores[_].clean(),this.gestureTimeoutStores[_].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(..._){const J=this.config.shared,Z={};let Q;if(!(J.target&&(Q=J.target(),!Q))){if(J.enabled){for(const te of this.gestures){const ne=this.config[te],ie=bindToProps(Z,ne.eventOptions,!!Q);if(ne.enabled){const re=EngineMap.get(te);new re(this,_,te).bind(ie)}}const ee=bindToProps(Z,J.eventOptions,!!Q);for(const te in this.nativeHandlers)ee(te,"",ne=>this.nativeHandlers[te](_objectSpread2(_objectSpread2({},this.state.shared),{},{event:ne,args:_})),void 0,!0)}for(const ee in Z)Z[ee]=chain(...Z[ee]);if(!Q)return Z;for(const ee in Z){const{device:te,capture:ne,passive:ie}=parseProp(ee);this._targetEventStore.add(Q,te,"",Z[ee],{capture:ne,passive:ie})}}}};function setupGesture(G,_){G.gestures.add(_),G.gestureEventStores[_]=new EventStore(G,_),G.gestureTimeoutStores[_]=new TimeoutStore}function resolveGestures(G,_){_.drag&&setupGesture(G,"drag"),_.wheel&&setupGesture(G,"wheel"),_.scroll&&setupGesture(G,"scroll"),_.move&&setupGesture(G,"move"),_.pinch&&setupGesture(G,"pinch"),_.hover&&setupGesture(G,"hover")}const bindToProps=(G,_,J)=>(Z,Q,ee,te={},ne=!1)=>{var ie,re;const oe=(ie=te.capture)!==null&&ie!==void 0?ie:_.capture,se=(re=te.passive)!==null&&re!==void 0?re:_.passive;let ae=ne?Z:toHandlerProp(Z,Q,oe);J&&se&&(ae+="Passive"),G[ae]=G[ae]||[],G[ae].push(ee)},RE_NOT_NATIVE=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function sortHandlers(G){const _={},J={},Z=new Set;for(let Q in G)RE_NOT_NATIVE.test(Q)?(Z.add(RegExp.lastMatch),J[Q]=G[Q]):_[Q]=G[Q];return[J,_,Z]}function registerGesture(G,_,J,Z,Q,ee){if(!G.has(J)||!EngineMap.has(Z))return;const te=J+"Start",ne=J+"End",ie=re=>{let oe;return re.first&&te in _&&_[te](re),J in _&&(oe=_[J](re)),re.last&&ne in _&&_[ne](re),oe};Q[Z]=ie,ee[Z]=ee[Z]||{}}function parseMergedHandlers(G,_){const[J,Z,Q]=sortHandlers(G),ee={};return registerGesture(Q,J,"onDrag","drag",ee,_),registerGesture(Q,J,"onWheel","wheel",ee,_),registerGesture(Q,J,"onScroll","scroll",ee,_),registerGesture(Q,J,"onPinch","pinch",ee,_),registerGesture(Q,J,"onMove","move",ee,_),registerGesture(Q,J,"onHover","hover",ee,_),{handlers:ee,config:_,nativeHandlers:Z}}function useRecognizers(G,_={},J,Z){const Q=React.useMemo(()=>new Controller$1(G),[]);if(Q.applyHandlers(G,Z),Q.applyConfig(_,J),React.useEffect(Q.effect.bind(Q)),React.useEffect(()=>Q.clean.bind(Q),[]),_.target===void 0)return Q.bind.bind(Q)}function createUseGesture(G){return G.forEach(registerAction),function(J,Z){const{handlers:Q,nativeHandlers:ee,config:te}=parseMergedHandlers(J,Z||{});return useRecognizers(Q,te,void 0,ee)}}function useGesture(G,_){return createUseGesture([dragAction,pinchAction,scrollAction,wheelAction,moveAction,hoverAction])(G,_||{})}const initialModelPosition=new Vector3,mousePosition2D=new Vector2,mousePosition3D=new Vector3,dragOffset=new Vector3,dragPlaneNormal=new Vector3,dragPlane=new Plane,DragControls=reactExports.forwardRef(({autoTransform:G=!0,matrix:_,axisLock:J,dragLimits:Z,onHover:Q,onDragStart:ee,onDrag:te,onDragEnd:ne,children:ie,dragConfig:re,...oe},se)=>{const ae=useThree(ye=>ye.controls),{camera:le,size:ue,raycaster:de,invalidate:pe}=useThree(),fe=reactExports.useRef(null),_e=useGesture({onHover:({hovering:ye})=>Q&&Q(ye??!1),onDragStart:({event:ye})=>{ae&&(ae.enabled=!1);const{point:be}=ye;fe.current.matrix.decompose(initialModelPosition,new Quaternion,new Vector3),mousePosition3D.copy(be),dragOffset.copy(mousePosition3D).sub(initialModelPosition),ee&&ee(initialModelPosition),pe()},onDrag:({xy:[ye,be],intentional:Ae})=>{if(!Ae)return;const Ce=(ye-ue.left)/ue.width*2-1,Ee=-((be-ue.top)/ue.height)*2+1;if(mousePosition2D.set(Ce,Ee),de.setFromCamera(mousePosition2D,le),!J)le.getWorldDirection(dragPlaneNormal).negate();else switch(J){case"x":dragPlaneNormal.set(1,0,0);break;case"y":dragPlaneNormal.set(0,1,0);break;case"z":dragPlaneNormal.set(0,0,1);break}dragPlane.setFromNormalAndCoplanarPoint(dragPlaneNormal,mousePosition3D),de.ray.intersectPlane(dragPlane,mousePosition3D);const Re=fe.current.matrix.clone(),Te=fe.current.matrixWorld.clone(),Me=new Vector3(mousePosition3D.x-dragOffset.x,mousePosition3D.y-dragOffset.y,mousePosition3D.z-dragOffset.z);if(Z&&(Me.x=Z[0]?Math.max(Math.min(Me.x,Z[0][1]),Z[0][0]):Me.x,Me.y=Z[1]?Math.max(Math.min(Me.y,Z[1][1]),Z[1][0]):Me.y,Me.z=Z[2]?Math.max(Math.min(Me.z,Z[2][1]),Z[2][0]):Me.z),G){fe.current.matrix.setPosition(Me);const Ne=fe.current.matrix.clone().multiply(Re.invert()),Le=fe.current.matrix.clone().multiply(Te.invert());te&&te(fe.current.matrix,Ne,fe.current.matrixWorld,Le)}else{const Ne=new Matrix4().copy(fe.current.matrix);Ne.setPosition(Me);const Le=Ne.clone().multiply(Re.invert()),Ie=Ne.clone().multiply(Te.invert());te&&te(Ne,Le,fe.current.matrixWorld,Ie)}pe()},onDragEnd:()=>{ae&&(ae.enabled=!0),ne&&ne(),pe()}},{drag:{filterTaps:!0,threshold:1,...typeof re=="object"?re:{}}});return reactExports.useImperativeHandle(se,()=>fe.current,[]),reactExports.useLayoutEffect(()=>{_&&(fe.current.matrix=_)},[_]),reactExports.createElement("group",_extends({ref:fe},_e(),{matrix:_,matrixAutoUpdate:!1},oe),ie)});var __defProp$2=Object.defineProperty,__defNormalProp$1=(G,_,J)=>_ in G?__defProp$2(G,_,{enumerable:!0,configurable:!0,writable:!0,value:J}):G[_]=J,__publicField$1=(G,_,J)=>(__defNormalProp$1(G,_+"",J),J);class EventDispatcher{constructor(){__publicField$1(this,"_listeners")}addEventListener(_,J){this._listeners===void 0&&(this._listeners={});const Z=this._listeners;Z[_]===void 0&&(Z[_]=[]),Z[_].indexOf(J)===-1&&Z[_].push(J)}hasEventListener(_,J){if(this._listeners===void 0)return!1;const Z=this._listeners;return Z[_]!==void 0&&Z[_].indexOf(J)!==-1}removeEventListener(_,J){if(this._listeners===void 0)return;const Q=this._listeners[_];if(Q!==void 0){const ee=Q.indexOf(J);ee!==-1&&Q.splice(ee,1)}}dispatchEvent(_){if(this._listeners===void 0)return;const Z=this._listeners[_.type];if(Z!==void 0){_.target=this;const Q=Z.slice(0);for(let ee=0,te=Q.length;ee<te;ee++)Q[ee].call(this,_);_.target=null}}}var __defProp$1=Object.defineProperty,__defNormalProp=(G,_,J)=>_ in G?__defProp$1(G,_,{enumerable:!0,configurable:!0,writable:!0,value:J}):G[_]=J,__publicField=(G,_,J)=>(__defNormalProp(G,typeof _!="symbol"?_+"":_,J),J);const _ray$1=new Ray,_plane$1=new Plane,TILT_LIMIT=Math.cos(70*(Math.PI/180)),moduloWrapAround=(G,_)=>(G%_+_)%_;let OrbitControls$1=class extends EventDispatcher{constructor(_,J){super(),__publicField(this,"object"),__publicField(this,"domElement"),__publicField(this,"enabled",!0),__publicField(this,"target",new Vector3),__publicField(this,"minDistance",0),__publicField(this,"maxDistance",1/0),__publicField(this,"minZoom",0),__publicField(this,"maxZoom",1/0),__publicField(this,"minPolarAngle",0),__publicField(this,"maxPolarAngle",Math.PI),__publicField(this,"minAzimuthAngle",-1/0),__publicField(this,"maxAzimuthAngle",1/0),__publicField(this,"enableDamping",!1),__publicField(this,"dampingFactor",.05),__publicField(this,"enableZoom",!0),__publicField(this,"zoomSpeed",1),__publicField(this,"enableRotate",!0),__publicField(this,"rotateSpeed",1),__publicField(this,"enablePan",!0),__publicField(this,"panSpeed",1),__publicField(this,"screenSpacePanning",!0),__publicField(this,"keyPanSpeed",7),__publicField(this,"zoomToCursor",!1),__publicField(this,"autoRotate",!1),__publicField(this,"autoRotateSpeed",2),__publicField(this,"reverseOrbit",!1),__publicField(this,"reverseHorizontalOrbit",!1),__publicField(this,"reverseVerticalOrbit",!1),__publicField(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),__publicField(this,"mouseButtons",{LEFT:MOUSE.ROTATE,MIDDLE:MOUSE.DOLLY,RIGHT:MOUSE.PAN}),__publicField(this,"touches",{ONE:TOUCH.ROTATE,TWO:TOUCH.DOLLY_PAN}),__publicField(this,"target0"),__publicField(this,"position0"),__publicField(this,"zoom0"),__publicField(this,"_domElementKeyEvents",null),__publicField(this,"getPolarAngle"),__publicField(this,"getAzimuthalAngle"),__publicField(this,"setPolarAngle"),__publicField(this,"setAzimuthalAngle"),__publicField(this,"getDistance"),__publicField(this,"getZoomScale"),__publicField(this,"listenToKeyEvents"),__publicField(this,"stopListenToKeyEvents"),__publicField(this,"saveState"),__publicField(this,"reset"),__publicField(this,"update"),__publicField(this,"connect"),__publicField(this,"dispose"),__publicField(this,"dollyIn"),__publicField(this,"dollyOut"),__publicField(this,"getScale"),__publicField(this,"setScale"),this.object=_,this.domElement=J,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>oe.phi,this.getAzimuthalAngle=()=>oe.theta,this.setPolarAngle=tt=>{let et=moduloWrapAround(tt,2*Math.PI),ei=oe.phi;ei<0&&(ei+=2*Math.PI),et<0&&(et+=2*Math.PI);let rt=Math.abs(et-ei);2*Math.PI-rt<rt&&(et<ei?et+=2*Math.PI:ei+=2*Math.PI),se.phi=et-ei,Z.update()},this.setAzimuthalAngle=tt=>{let et=moduloWrapAround(tt,2*Math.PI),ei=oe.theta;ei<0&&(ei+=2*Math.PI),et<0&&(et+=2*Math.PI);let rt=Math.abs(et-ei);2*Math.PI-rt<rt&&(et<ei?et+=2*Math.PI:ei+=2*Math.PI),se.theta=et-ei,Z.update()},this.getDistance=()=>Z.object.position.distanceTo(Z.target),this.listenToKeyEvents=tt=>{tt.addEventListener("keydown",Nt),this._domElementKeyEvents=tt},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Nt),this._domElementKeyEvents=null},this.saveState=()=>{Z.target0.copy(Z.target),Z.position0.copy(Z.object.position),Z.zoom0=Z.object.zoom},this.reset=()=>{Z.target.copy(Z.target0),Z.object.position.copy(Z.position0),Z.object.zoom=Z.zoom0,Z.object.updateProjectionMatrix(),Z.dispatchEvent(Q),Z.update(),ie=ne.NONE},this.update=(()=>{const tt=new Vector3,et=new Vector3(0,1,0),ei=new Quaternion().setFromUnitVectors(_.up,et),rt=ei.clone().invert(),ti=new Vector3,zt=new Quaternion,ii=2*Math.PI;return function(){const Vt=Z.object.position;ei.setFromUnitVectors(_.up,et),rt.copy(ei).invert(),tt.copy(Vt).sub(Z.target),tt.applyQuaternion(ei),oe.setFromVector3(tt),Z.autoRotate&&ie===ne.NONE&&Ge(Le()),Z.enableDamping?(oe.theta+=se.theta*Z.dampingFactor,oe.phi+=se.phi*Z.dampingFactor):(oe.theta+=se.theta,oe.phi+=se.phi);let di=Z.minAzimuthAngle,pi=Z.maxAzimuthAngle;isFinite(di)&&isFinite(pi)&&(di<-Math.PI?di+=ii:di>Math.PI&&(di-=ii),pi<-Math.PI?pi+=ii:pi>Math.PI&&(pi-=ii),di<=pi?oe.theta=Math.max(di,Math.min(pi,oe.theta)):oe.theta=oe.theta>(di+pi)/2?Math.max(di,oe.theta):Math.min(pi,oe.theta)),oe.phi=Math.max(Z.minPolarAngle,Math.min(Z.maxPolarAngle,oe.phi)),oe.makeSafe(),Z.enableDamping===!0?Z.target.addScaledVector(le,Z.dampingFactor):Z.target.add(le),Z.zoomToCursor&&Te||Z.object.isOrthographicCamera?oe.radius=Ze(oe.radius):oe.radius=Ze(oe.radius*ae),tt.setFromSpherical(oe),tt.applyQuaternion(rt),Vt.copy(Z.target).add(tt),Z.object.matrixAutoUpdate||Z.object.updateMatrix(),Z.object.lookAt(Z.target),Z.enableDamping===!0?(se.theta*=1-Z.dampingFactor,se.phi*=1-Z.dampingFactor,le.multiplyScalar(1-Z.dampingFactor)):(se.set(0,0,0),le.set(0,0,0));let Di=!1;if(Z.zoomToCursor&&Te){let Si=null;if(Z.object instanceof PerspectiveCamera&&Z.object.isPerspectiveCamera){const Ui=tt.length();Si=Ze(Ui*ae);const vn=Ui-Si;Z.object.position.addScaledVector(Ee,vn),Z.object.updateMatrixWorld()}else if(Z.object.isOrthographicCamera){const Ui=new Vector3(Re.x,Re.y,0);Ui.unproject(Z.object),Z.object.zoom=Math.max(Z.minZoom,Math.min(Z.maxZoom,Z.object.zoom/ae)),Z.object.updateProjectionMatrix(),Di=!0;const vn=new Vector3(Re.x,Re.y,0);vn.unproject(Z.object),Z.object.position.sub(vn).add(Ui),Z.object.updateMatrixWorld(),Si=tt.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),Z.zoomToCursor=!1;Si!==null&&(Z.screenSpacePanning?Z.target.set(0,0,-1).transformDirection(Z.object.matrix).multiplyScalar(Si).add(Z.object.position):(_ray$1.origin.copy(Z.object.position),_ray$1.direction.set(0,0,-1).transformDirection(Z.object.matrix),Math.abs(Z.object.up.dot(_ray$1.direction))<TILT_LIMIT?_.lookAt(Z.target):(_plane$1.setFromNormalAndCoplanarPoint(Z.object.up,Z.target),_ray$1.intersectPlane(_plane$1,Z.target))))}else Z.object instanceof OrthographicCamera&&Z.object.isOrthographicCamera&&(Di=ae!==1,Di&&(Z.object.zoom=Math.max(Z.minZoom,Math.min(Z.maxZoom,Z.object.zoom/ae)),Z.object.updateProjectionMatrix()));return ae=1,Te=!1,Di||ti.distanceToSquared(Z.object.position)>re||8*(1-zt.dot(Z.object.quaternion))>re?(Z.dispatchEvent(Q),ti.copy(Z.object.position),zt.copy(Z.object.quaternion),Di=!1,!0):!1}})(),this.connect=tt=>{Z.domElement=tt,Z.domElement.style.touchAction="none",Z.domElement.addEventListener("contextmenu",Ut),Z.domElement.addEventListener("pointerdown",hi),Z.domElement.addEventListener("pointercancel",Ye),Z.domElement.addEventListener("wheel",yt)},this.dispose=()=>{var tt,et,ei,rt,ti,zt;Z.domElement&&(Z.domElement.style.touchAction="auto"),(tt=Z.domElement)==null||tt.removeEventListener("contextmenu",Ut),(et=Z.domElement)==null||et.removeEventListener("pointerdown",hi),(ei=Z.domElement)==null||ei.removeEventListener("pointercancel",Ye),(rt=Z.domElement)==null||rt.removeEventListener("wheel",yt),(ti=Z.domElement)==null||ti.ownerDocument.removeEventListener("pointermove",Qe),(zt=Z.domElement)==null||zt.ownerDocument.removeEventListener("pointerup",Ye),Z._domElementKeyEvents!==null&&Z._domElementKeyEvents.removeEventListener("keydown",Nt)};const Z=this,Q={type:"change"},ee={type:"start"},te={type:"end"},ne={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let ie=ne.NONE;const re=1e-6,oe=new Spherical,se=new Spherical;let ae=1;const le=new Vector3,ue=new Vector2,de=new Vector2,pe=new Vector2,fe=new Vector2,_e=new Vector2,ye=new Vector2,be=new Vector2,Ae=new Vector2,Ce=new Vector2,Ee=new Vector3,Re=new Vector2;let Te=!1;const Me=[],Ne={};function Le(){return 2*Math.PI/60/60*Z.autoRotateSpeed}function Ie(){return Math.pow(.95,Z.zoomSpeed)}function Ge(tt){Z.reverseOrbit||Z.reverseHorizontalOrbit?se.theta+=tt:se.theta-=tt}function He(tt){Z.reverseOrbit||Z.reverseVerticalOrbit?se.phi+=tt:se.phi-=tt}const Be=(()=>{const tt=new Vector3;return function(ei,rt){tt.setFromMatrixColumn(rt,0),tt.multiplyScalar(-ei),le.add(tt)}})(),ze=(()=>{const tt=new Vector3;return function(ei,rt){Z.screenSpacePanning===!0?tt.setFromMatrixColumn(rt,1):(tt.setFromMatrixColumn(rt,0),tt.crossVectors(Z.object.up,tt)),tt.multiplyScalar(ei),le.add(tt)}})(),Fe=(()=>{const tt=new Vector3;return function(ei,rt){const ti=Z.domElement;if(ti&&Z.object instanceof PerspectiveCamera&&Z.object.isPerspectiveCamera){const zt=Z.object.position;tt.copy(zt).sub(Z.target);let ii=tt.length();ii*=Math.tan(Z.object.fov/2*Math.PI/180),Be(2*ei*ii/ti.clientHeight,Z.object.matrix),ze(2*rt*ii/ti.clientHeight,Z.object.matrix)}else ti&&Z.object instanceof OrthographicCamera&&Z.object.isOrthographicCamera?(Be(ei*(Z.object.right-Z.object.left)/Z.object.zoom/ti.clientWidth,Z.object.matrix),ze(rt*(Z.object.top-Z.object.bottom)/Z.object.zoom/ti.clientHeight,Z.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),Z.enablePan=!1)}})();function $e(tt){Z.object instanceof PerspectiveCamera&&Z.object.isPerspectiveCamera||Z.object instanceof OrthographicCamera&&Z.object.isOrthographicCamera?ae=tt:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),Z.enableZoom=!1)}function Xe(tt){$e(ae/tt)}function je(tt){$e(ae*tt)}function qe(tt){if(!Z.zoomToCursor||!Z.domElement)return;Te=!0;const et=Z.domElement.getBoundingClientRect(),ei=tt.clientX-et.left,rt=tt.clientY-et.top,ti=et.width,zt=et.height;Re.x=ei/ti*2-1,Re.y=-(rt/zt)*2+1,Ee.set(Re.x,Re.y,1).unproject(Z.object).sub(Z.object.position).normalize()}function Ze(tt){return Math.max(Z.minDistance,Math.min(Z.maxDistance,tt))}function st(tt){ue.set(tt.clientX,tt.clientY)}function St(tt){qe(tt),be.set(tt.clientX,tt.clientY)}function it(tt){fe.set(tt.clientX,tt.clientY)}function lt(tt){de.set(tt.clientX,tt.clientY),pe.subVectors(de,ue).multiplyScalar(Z.rotateSpeed);const et=Z.domElement;et&&(Ge(2*Math.PI*pe.x/et.clientHeight),He(2*Math.PI*pe.y/et.clientHeight)),ue.copy(de),Z.update()}function ft(tt){Ae.set(tt.clientX,tt.clientY),Ce.subVectors(Ae,be),Ce.y>0?Xe(Ie()):Ce.y<0&&je(Ie()),be.copy(Ae),Z.update()}function kt(tt){_e.set(tt.clientX,tt.clientY),ye.subVectors(_e,fe).multiplyScalar(Z.panSpeed),Fe(ye.x,ye.y),fe.copy(_e),Z.update()}function Ht(tt){qe(tt),tt.deltaY<0?je(Ie()):tt.deltaY>0&&Xe(Ie()),Z.update()}function Wt(tt){let et=!1;switch(tt.code){case Z.keys.UP:Fe(0,Z.keyPanSpeed),et=!0;break;case Z.keys.BOTTOM:Fe(0,-Z.keyPanSpeed),et=!0;break;case Z.keys.LEFT:Fe(Z.keyPanSpeed,0),et=!0;break;case Z.keys.RIGHT:Fe(-Z.keyPanSpeed,0),et=!0;break}et&&(tt.preventDefault(),Z.update())}function ni(){if(Me.length==1)ue.set(Me[0].pageX,Me[0].pageY);else{const tt=.5*(Me[0].pageX+Me[1].pageX),et=.5*(Me[0].pageY+Me[1].pageY);ue.set(tt,et)}}function jt(){if(Me.length==1)fe.set(Me[0].pageX,Me[0].pageY);else{const tt=.5*(Me[0].pageX+Me[1].pageX),et=.5*(Me[0].pageY+Me[1].pageY);fe.set(tt,et)}}function pt(){const tt=Me[0].pageX-Me[1].pageX,et=Me[0].pageY-Me[1].pageY,ei=Math.sqrt(tt*tt+et*et);be.set(0,ei)}function Ke(){Z.enableZoom&&pt(),Z.enablePan&&jt()}function Mt(){Z.enableZoom&&pt(),Z.enableRotate&&ni()}function Bt(tt){if(Me.length==1)de.set(tt.pageX,tt.pageY);else{const ei=vt(tt),rt=.5*(tt.pageX+ei.x),ti=.5*(tt.pageY+ei.y);de.set(rt,ti)}pe.subVectors(de,ue).multiplyScalar(Z.rotateSpeed);const et=Z.domElement;et&&(Ge(2*Math.PI*pe.x/et.clientHeight),He(2*Math.PI*pe.y/et.clientHeight)),ue.copy(de)}function Lt(tt){if(Me.length==1)_e.set(tt.pageX,tt.pageY);else{const et=vt(tt),ei=.5*(tt.pageX+et.x),rt=.5*(tt.pageY+et.y);_e.set(ei,rt)}ye.subVectors(_e,fe).multiplyScalar(Z.panSpeed),Fe(ye.x,ye.y),fe.copy(_e)}function Ft(tt){const et=vt(tt),ei=tt.pageX-et.x,rt=tt.pageY-et.y,ti=Math.sqrt(ei*ei+rt*rt);Ae.set(0,ti),Ce.set(0,Math.pow(Ae.y/be.y,Z.zoomSpeed)),Xe(Ce.y),be.copy(Ae)}function ai(tt){Z.enableZoom&&Ft(tt),Z.enablePan&&Lt(tt)}function Qt(tt){Z.enableZoom&&Ft(tt),Z.enableRotate&&Bt(tt)}function hi(tt){var et,ei;Z.enabled!==!1&&(Me.length===0&&((et=Z.domElement)==null||et.ownerDocument.addEventListener("pointermove",Qe),(ei=Z.domElement)==null||ei.ownerDocument.addEventListener("pointerup",Ye)),qt(tt),tt.pointerType==="touch"?fi(tt):_t(tt))}function Qe(tt){Z.enabled!==!1&&(tt.pointerType==="touch"?Zt(tt):dt(tt))}function Ye(tt){var et,ei,rt;Rt(tt),Me.length===0&&((et=Z.domElement)==null||et.releasePointerCapture(tt.pointerId),(ei=Z.domElement)==null||ei.ownerDocument.removeEventListener("pointermove",Qe),(rt=Z.domElement)==null||rt.ownerDocument.removeEventListener("pointerup",Ye)),Z.dispatchEvent(te),ie=ne.NONE}function _t(tt){let et;switch(tt.button){case 0:et=Z.mouseButtons.LEFT;break;case 1:et=Z.mouseButtons.MIDDLE;break;case 2:et=Z.mouseButtons.RIGHT;break;default:et=-1}switch(et){case MOUSE.DOLLY:if(Z.enableZoom===!1)return;St(tt),ie=ne.DOLLY;break;case MOUSE.ROTATE:if(tt.ctrlKey||tt.metaKey||tt.shiftKey){if(Z.enablePan===!1)return;it(tt),ie=ne.PAN}else{if(Z.enableRotate===!1)return;st(tt),ie=ne.ROTATE}break;case MOUSE.PAN:if(tt.ctrlKey||tt.metaKey||tt.shiftKey){if(Z.enableRotate===!1)return;st(tt),ie=ne.ROTATE}else{if(Z.enablePan===!1)return;it(tt),ie=ne.PAN}break;default:ie=ne.NONE}ie!==ne.NONE&&Z.dispatchEvent(ee)}function dt(tt){if(Z.enabled!==!1)switch(ie){case ne.ROTATE:if(Z.enableRotate===!1)return;lt(tt);break;case ne.DOLLY:if(Z.enableZoom===!1)return;ft(tt);break;case ne.PAN:if(Z.enablePan===!1)return;kt(tt);break}}function yt(tt){Z.enabled===!1||Z.enableZoom===!1||ie!==ne.NONE&&ie!==ne.ROTATE||(tt.preventDefault(),Z.dispatchEvent(ee),Ht(tt),Z.dispatchEvent(te))}function Nt(tt){Z.enabled===!1||Z.enablePan===!1||Wt(tt)}function fi(tt){switch(Pt(tt),Me.length){case 1:switch(Z.touches.ONE){case TOUCH.ROTATE:if(Z.enableRotate===!1)return;ni(),ie=ne.TOUCH_ROTATE;break;case TOUCH.PAN:if(Z.enablePan===!1)return;jt(),ie=ne.TOUCH_PAN;break;default:ie=ne.NONE}break;case 2:switch(Z.touches.TWO){case TOUCH.DOLLY_PAN:if(Z.enableZoom===!1&&Z.enablePan===!1)return;Ke(),ie=ne.TOUCH_DOLLY_PAN;break;case TOUCH.DOLLY_ROTATE:if(Z.enableZoom===!1&&Z.enableRotate===!1)return;Mt(),ie=ne.TOUCH_DOLLY_ROTATE;break;default:ie=ne.NONE}break;default:ie=ne.NONE}ie!==ne.NONE&&Z.dispatchEvent(ee)}function Zt(tt){switch(Pt(tt),ie){case ne.TOUCH_ROTATE:if(Z.enableRotate===!1)return;Bt(tt),Z.update();break;case ne.TOUCH_PAN:if(Z.enablePan===!1)return;Lt(tt),Z.update();break;case ne.TOUCH_DOLLY_PAN:if(Z.enableZoom===!1&&Z.enablePan===!1)return;ai(tt),Z.update();break;case ne.TOUCH_DOLLY_ROTATE:if(Z.enableZoom===!1&&Z.enableRotate===!1)return;Qt(tt),Z.update();break;default:ie=ne.NONE}}function Ut(tt){Z.enabled!==!1&&tt.preventDefault()}function qt(tt){Me.push(tt)}function Rt(tt){delete Ne[tt.pointerId];for(let et=0;et<Me.length;et++)if(Me[et].pointerId==tt.pointerId){Me.splice(et,1);return}}function Pt(tt){let et=Ne[tt.pointerId];et===void 0&&(et=new Vector2,Ne[tt.pointerId]=et),et.set(tt.pageX,tt.pageY)}function vt(tt){const et=tt.pointerId===Me[0].pointerId?Me[1]:Me[0];return Ne[et.pointerId]}this.dollyIn=(tt=Ie())=>{je(tt),Z.update()},this.dollyOut=(tt=Ie())=>{Xe(tt),Z.update()},this.getScale=()=>ae,this.setScale=tt=>{$e(tt),Z.update()},this.getZoomScale=()=>Ie(),J!==void 0&&this.connect(J),this.update()}};function shaderMaterial(G,_,J,Z){var Q;return Q=class extends ShaderMaterial{constructor(ee){super({vertexShader:_,fragmentShader:J,...ee});for(const te in G)this.uniforms[te]=new Uniform(G[te]),Object.defineProperty(this,te,{get(){return this.uniforms[te].value},set(ne){this.uniforms[te].value=ne}});this.uniforms=UniformsUtils.clone(this.uniforms)}},Q.key=MathUtils.generateUUID(),Q}const getVersion=()=>parseInt(REVISION.replace(/\D+/g,"")),version=getVersion(),OrbitControls=reactExports.forwardRef(({makeDefault:G,camera:_,regress:J,domElement:Z,enableDamping:Q=!0,keyEvents:ee=!1,onChange:te,onStart:ne,onEnd:ie,...re},oe)=>{const se=useThree(Ce=>Ce.invalidate),ae=useThree(Ce=>Ce.camera),le=useThree(Ce=>Ce.gl),ue=useThree(Ce=>Ce.events),de=useThree(Ce=>Ce.setEvents),pe=useThree(Ce=>Ce.set),fe=useThree(Ce=>Ce.get),_e=useThree(Ce=>Ce.performance),ye=_||ae,be=Z||ue.connected||le.domElement,Ae=reactExports.useMemo(()=>new OrbitControls$1(ye),[ye]);return useFrame(()=>{Ae.enabled&&Ae.update()},-1),reactExports.useEffect(()=>(ee&&Ae.connect(ee===!0?be:ee),Ae.connect(be),()=>void Ae.dispose()),[ee,be,J,Ae,se]),reactExports.useEffect(()=>{const Ce=Te=>{se(),J&&_e.regress(),te&&te(Te)},Ee=Te=>{ne&&ne(Te)},Re=Te=>{ie&&ie(Te)};return Ae.addEventListener("change",Ce),Ae.addEventListener("start",Ee),Ae.addEventListener("end",Re),()=>{Ae.removeEventListener("start",Ee),Ae.removeEventListener("end",Re),Ae.removeEventListener("change",Ce)}},[te,ne,ie,Ae,se,de]),reactExports.useEffect(()=>{if(G){const Ce=fe().controls;return pe({controls:Ae}),()=>pe({controls:Ce})}},[G,Ae]),reactExports.createElement("primitive",_extends({ref:oe,object:Ae,enableDamping:Q},re))}),GridMaterial=shaderMaterial({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,fadeFrom:1,cellThickness:.5,sectionThickness:1,cellColor:new Color,sectionColor:new Color,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new Vector3,worldPlanePosition:new Vector3},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float fadeFrom;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      vec3 from = worldCamProjPosition*vec3(fadeFrom);
      float dist = distance(from, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${version>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),Grid=reactExports.forwardRef(({args:G,cellColor:_="#000000",sectionColor:J="#2080ff",cellSize:Z=.5,sectionSize:Q=1,followCamera:ee=!1,infiniteGrid:te=!1,fadeDistance:ne=100,fadeStrength:ie=1,fadeFrom:re=1,cellThickness:oe=.5,sectionThickness:se=1,side:ae=BackSide,...le},ue)=>{extend({GridMaterial});const de=reactExports.useRef(null);reactExports.useImperativeHandle(ue,()=>de.current,[]);const pe=new Plane,fe=new Vector3(0,1,0),_e=new Vector3(0,0,0);useFrame(Ae=>{pe.setFromNormalAndCoplanarPoint(fe,_e).applyMatrix4(de.current.matrixWorld);const Ce=de.current.material,Ee=Ce.uniforms.worldCamProjPosition,Re=Ce.uniforms.worldPlanePosition;pe.projectPoint(Ae.camera.position,Ee.value),Re.value.set(0,0,0).applyMatrix4(de.current.matrixWorld)});const ye={cellSize:Z,sectionSize:Q,cellColor:_,sectionColor:J,cellThickness:oe,sectionThickness:se},be={fadeDistance:ne,fadeStrength:ie,fadeFrom:re,infiniteGrid:te,followCamera:ee};return reactExports.createElement("mesh",_extends({ref:de,frustumCulled:!1},le),reactExports.createElement("gridMaterial",_extends({transparent:!0,"extensions-derivatives":!0,side:ae},ye,be)),reactExports.createElement("planeGeometry",{args:G}))}),opaque_fragment=version>=154?"opaque_fragment":"output_fragment";class PointMaterialImpl extends PointsMaterial{constructor(_){super(_),this.onBeforeCompile=(J,Z)=>{const{isWebGL2:Q}=Z.capabilities;J.fragmentShader=J.fragmentShader.replace(`#include <${opaque_fragment}>`,`
        ${Q?`#include <${opaque_fragment}>`:`#extension GL_OES_standard_derivatives : enable
#include <${opaque_fragment}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${version>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const PointMaterial=reactExports.forwardRef((G,_)=>{const[J]=reactExports.useState(()=>new PointMaterialImpl(null));return reactExports.createElement("primitive",_extends({},G,{object:J,ref:_,attach:"material"}))});function create(G,_){const J=G+"Geometry";return reactExports.forwardRef(({args:Z,children:Q,...ee},te)=>{const ne=reactExports.useRef(null);return reactExports.useImperativeHandle(te,()=>ne.current),reactExports.useLayoutEffect(()=>void _?.(ne.current)),reactExports.createElement("mesh",_extends({ref:ne},ee),reactExports.createElement(J,{attach:"geometry",args:Z}),Q)})}const Box=create("box"),Sphere=create("sphere"),_inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere$1,_position=new Vector3;class PositionPoint extends Group{constructor(){super(),this.size=0,this.color=new Color("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var _;return(_=this.instance.current)==null?void 0:_.geometry}raycast(_,J){var Z,Q;const ee=this.instance.current;if(!ee||!ee.geometry)return;const te=ee.userData.instances.indexOf(this.instanceKey);if(te===-1||te>ee.geometry.drawRange.count)return;const ne=(Z=(Q=_.params.Points)==null?void 0:Q.threshold)!==null&&Z!==void 0?Z:1;if(_sphere.set(this.getWorldPosition(_position),ne),_.ray.intersectsSphere(_sphere)===!1)return;_inverseMatrix.copy(ee.matrixWorld).invert(),_ray.copy(_.ray).applyMatrix4(_inverseMatrix);const ie=ne/((this.scale.x+this.scale.y+this.scale.z)/3),re=ie*ie,oe=_ray.distanceSqToPoint(this.position);if(oe<re){const se=new Vector3;_ray.closestPointToPoint(this.position,se),se.applyMatrix4(this.matrixWorld);const ae=_.ray.origin.distanceTo(se);if(ae<_.near||ae>_.far)return;J.push({distance:ae,distanceToRay:Math.sqrt(oe),point:se,index:te,face:null,object:this})}}}let i,positionRef;const context=reactExports.createContext(null),parentMatrix=new Matrix4,position=new Vector3,PointsInstances=reactExports.forwardRef(({children:G,range:_,limit:J=1e3,...Z},Q)=>{const ee=reactExports.useRef(null);reactExports.useImperativeHandle(Q,()=>ee.current,[]);const[te,ne]=reactExports.useState([]),[[ie,re,oe]]=reactExports.useState(()=>[new Float32Array(J*3),Float32Array.from({length:J*3},()=>1),Float32Array.from({length:J},()=>1)]);reactExports.useEffect(()=>{ee.current.geometry.attributes.position.needsUpdate=!0}),useFrame(()=>{for(ee.current.updateMatrix(),ee.current.updateMatrixWorld(),parentMatrix.copy(ee.current.matrixWorld).invert(),ee.current.geometry.drawRange.count=Math.min(J,_!==void 0?_:J,te.length),i=0;i<te.length;i++)positionRef=te[i].current,positionRef.getWorldPosition(position).applyMatrix4(parentMatrix),position.toArray(ie,i*3),ee.current.geometry.attributes.position.needsUpdate=!0,positionRef.matrixWorldNeedsUpdate=!0,positionRef.color.toArray(re,i*3),ee.current.geometry.attributes.color.needsUpdate=!0,oe.set([positionRef.size],i),ee.current.geometry.attributes.size.needsUpdate=!0});const se=reactExports.useMemo(()=>({getParent:()=>ee,subscribe:ae=>(ne(le=>[...le,ae]),()=>ne(le=>le.filter(ue=>ue.current!==ae.current)))}),[]);return reactExports.createElement("points",_extends({userData:{instances:te},matrixAutoUpdate:!1,ref:ee,raycast:()=>null},Z),reactExports.createElement("bufferGeometry",null,reactExports.createElement("bufferAttribute",{attach:"attributes-position",args:[ie,3],usage:DynamicDrawUsage}),reactExports.createElement("bufferAttribute",{attach:"attributes-color",args:[re,3],usage:DynamicDrawUsage}),reactExports.createElement("bufferAttribute",{attach:"attributes-size",args:[oe,1],usage:DynamicDrawUsage})),reactExports.createElement(context.Provider,{value:se},G))}),Point=reactExports.forwardRef(({children:G,..._},J)=>{reactExports.useMemo(()=>extend({PositionPoint}),[]);const Z=reactExports.useRef(null);reactExports.useImperativeHandle(J,()=>Z.current,[]);const{subscribe:Q,getParent:ee}=reactExports.useContext(context);return reactExports.useLayoutEffect(()=>Q(Z),[]),reactExports.createElement("positionPoint",_extends({instance:ee(),instanceKey:Z,ref:Z},_),G)}),PointsBuffer=reactExports.forwardRef(({children:G,positions:_,colors:J,sizes:Z,stride:Q=3,...ee},te)=>{const ne=reactExports.useRef(null);return reactExports.useImperativeHandle(te,()=>ne.current,[]),useFrame(()=>{const ie=ne.current.geometry.attributes;ie.position.needsUpdate=!0,J&&(ie.color.needsUpdate=!0),Z&&(ie.size.needsUpdate=!0)}),reactExports.createElement("points",_extends({ref:ne},ee),reactExports.createElement("bufferGeometry",null,reactExports.createElement("bufferAttribute",{attach:"attributes-position",args:[_,Q],usage:DynamicDrawUsage}),J&&reactExports.createElement("bufferAttribute",{attach:"attributes-color",args:[J,Q],count:J.length/Q,usage:DynamicDrawUsage}),Z&&reactExports.createElement("bufferAttribute",{attach:"attributes-size",args:[Z,1],count:Z.length/Q,usage:DynamicDrawUsage})),G)}),Points=reactExports.forwardRef((G,_)=>G.positions instanceof Float32Array?reactExports.createElement(PointsBuffer,_extends({},G,{ref:_})):reactExports.createElement(PointsInstances,_extends({},G,{ref:_})));var updateQueue=makeQueue(),raf=G=>schedule(G,updateQueue),writeQueue=makeQueue();raf.write=G=>schedule(G,writeQueue);var onStartQueue=makeQueue();raf.onStart=G=>schedule(G,onStartQueue);var onFrameQueue=makeQueue();raf.onFrame=G=>schedule(G,onFrameQueue);var onFinishQueue=makeQueue();raf.onFinish=G=>schedule(G,onFinishQueue);var timeouts=[];raf.setTimeout=(G,_)=>{const J=raf.now()+_,Z=()=>{const ee=timeouts.findIndex(te=>te.cancel==Z);~ee&&timeouts.splice(ee,1),pendingCount-=~ee?1:0},Q={time:J,handler:G,cancel:Z};return timeouts.splice(findTimeout(J),0,Q),pendingCount+=1,start(),Q};var findTimeout=G=>~(~timeouts.findIndex(_=>_.time>G)||~timeouts.length);raf.cancel=G=>{onStartQueue.delete(G),onFrameQueue.delete(G),onFinishQueue.delete(G),updateQueue.delete(G),writeQueue.delete(G)};raf.sync=G=>{sync=!0,raf.batchedUpdates(G),sync=!1};raf.throttle=G=>{let _;function J(){try{G(..._)}finally{_=null}}function Z(...Q){_=Q,raf.onStart(J)}return Z.handler=G,Z.cancel=()=>{onStartQueue.delete(J),_=null},Z};var nativeRaf=typeof window<"u"?window.requestAnimationFrame:(()=>{});raf.use=G=>nativeRaf=G;raf.now=typeof performance<"u"?()=>performance.now():Date.now;raf.batchedUpdates=G=>G();raf.catch=console.error;raf.frameLoop="always";raf.advance=()=>{raf.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):update()};var ts=-1,pendingCount=0,sync=!1;function schedule(G,_){sync?(_.delete(G),G(0)):(_.add(G),start())}function start(){ts<0&&(ts=0,raf.frameLoop!=="demand"&&nativeRaf(loop))}function stop(){ts=-1}function loop(){~ts&&(nativeRaf(loop),raf.batchedUpdates(update))}function update(){const G=ts;ts=raf.now();const _=findTimeout(ts);if(_&&(eachSafely(timeouts.splice(0,_),J=>J.handler()),pendingCount-=_),!pendingCount){stop();return}onStartQueue.flush(),updateQueue.flush(G?Math.min(64,ts-G):16.667),onFrameQueue.flush(),writeQueue.flush(),onFinishQueue.flush()}function makeQueue(){let G=new Set,_=G;return{add(J){pendingCount+=_==G&&!G.has(J)?1:0,G.add(J)},delete(J){return pendingCount-=_==G&&G.has(J)?1:0,G.delete(J)},flush(J){_.size&&(G=new Set,pendingCount-=_.size,eachSafely(_,Z=>Z(J)&&G.add(Z)),pendingCount+=G.size,_=G)}}}function eachSafely(G,_){G.forEach(J=>{try{_(J)}catch(Z){raf.catch(Z)}})}var __defProp=Object.defineProperty,__export=(G,_)=>{for(var J in _)__defProp(G,J,{get:_[J],enumerable:!0})},globals_exports={};__export(globals_exports,{assign:()=>assign,colors:()=>colors,createStringInterpolator:()=>createStringInterpolator,skipAnimation:()=>skipAnimation,to:()=>to,willAdvance:()=>willAdvance});function noop(){}var defineHidden=(G,_,J)=>Object.defineProperty(G,_,{value:J,writable:!0,configurable:!0}),is={arr:Array.isArray,obj:G=>!!G&&G.constructor.name==="Object",fun:G=>typeof G=="function",str:G=>typeof G=="string",num:G=>typeof G=="number",und:G=>G===void 0};function isEqual(G,_){if(is.arr(G)){if(!is.arr(_)||G.length!==_.length)return!1;for(let J=0;J<G.length;J++)if(G[J]!==_[J])return!1;return!0}return G===_}var each=(G,_)=>G.forEach(_);function eachProp(G,_,J){if(is.arr(G)){for(let Z=0;Z<G.length;Z++)_.call(J,G[Z],`${Z}`);return}for(const Z in G)G.hasOwnProperty(Z)&&_.call(J,G[Z],Z)}var toArray=G=>is.und(G)?[]:is.arr(G)?G:[G];function flush(G,_){if(G.size){const J=Array.from(G);G.clear(),each(J,_)}}var flushCalls=(G,..._)=>flush(G,J=>J(..._)),isSSR=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),createStringInterpolator,to,colors=null,skipAnimation=!1,willAdvance=noop,assign=G=>{G.to&&(to=G.to),G.now&&(raf.now=G.now),G.colors!==void 0&&(colors=G.colors),G.skipAnimation!=null&&(skipAnimation=G.skipAnimation),G.createStringInterpolator&&(createStringInterpolator=G.createStringInterpolator),G.requestAnimationFrame&&raf.use(G.requestAnimationFrame),G.batchedUpdates&&(raf.batchedUpdates=G.batchedUpdates),G.willAdvance&&(willAdvance=G.willAdvance),G.frameLoop&&(raf.frameLoop=G.frameLoop)},startQueue=new Set,currentFrame=[],prevFrame=[],priority=0,frameLoop={get idle(){return!startQueue.size&&!currentFrame.length},start(G){priority>G.priority?(startQueue.add(G),raf.onStart(flushStartQueue)):(startSafely(G),raf(advance))},advance,sort(G){if(priority)raf.onFrame(()=>frameLoop.sort(G));else{const _=currentFrame.indexOf(G);~_&&(currentFrame.splice(_,1),startUnsafely(G))}},clear(){currentFrame=[],startQueue.clear()}};function flushStartQueue(){startQueue.forEach(startSafely),startQueue.clear(),raf(advance)}function startSafely(G){currentFrame.includes(G)||startUnsafely(G)}function startUnsafely(G){currentFrame.splice(findIndex(currentFrame,_=>_.priority>G.priority),0,G)}function advance(G){const _=prevFrame;for(let J=0;J<currentFrame.length;J++){const Z=currentFrame[J];priority=Z.priority,Z.idle||(willAdvance(Z),Z.advance(G),Z.idle||_.push(Z))}return priority=0,prevFrame=currentFrame,prevFrame.length=0,currentFrame=_,currentFrame.length>0}function findIndex(G,_){const J=G.findIndex(_);return J<0?G.length:J}var colors2={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},NUMBER="[-+]?\\d*\\.?\\d+",PERCENTAGE=NUMBER+"%";function call(...G){return"\\(\\s*("+G.join(")\\s*,\\s*(")+")\\s*\\)"}var rgb=new RegExp("rgb"+call(NUMBER,NUMBER,NUMBER)),rgba=new RegExp("rgba"+call(NUMBER,NUMBER,NUMBER,NUMBER)),hsl=new RegExp("hsl"+call(NUMBER,PERCENTAGE,PERCENTAGE)),hsla=new RegExp("hsla"+call(NUMBER,PERCENTAGE,PERCENTAGE,NUMBER)),hex3=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6=/^#([0-9a-fA-F]{6})$/,hex8=/^#([0-9a-fA-F]{8})$/;function normalizeColor(G){let _;return typeof G=="number"?G>>>0===G&&G>=0&&G<=4294967295?G:null:(_=hex6.exec(G))?parseInt(_[1]+"ff",16)>>>0:colors&&colors[G]!==void 0?colors[G]:(_=rgb.exec(G))?(parse255(_[1])<<24|parse255(_[2])<<16|parse255(_[3])<<8|255)>>>0:(_=rgba.exec(G))?(parse255(_[1])<<24|parse255(_[2])<<16|parse255(_[3])<<8|parse1(_[4]))>>>0:(_=hex3.exec(G))?parseInt(_[1]+_[1]+_[2]+_[2]+_[3]+_[3]+"ff",16)>>>0:(_=hex8.exec(G))?parseInt(_[1],16)>>>0:(_=hex4.exec(G))?parseInt(_[1]+_[1]+_[2]+_[2]+_[3]+_[3]+_[4]+_[4],16)>>>0:(_=hsl.exec(G))?(hslToRgb(parse360(_[1]),parsePercentage(_[2]),parsePercentage(_[3]))|255)>>>0:(_=hsla.exec(G))?(hslToRgb(parse360(_[1]),parsePercentage(_[2]),parsePercentage(_[3]))|parse1(_[4]))>>>0:null}function hue2rgb(G,_,J){return J<0&&(J+=1),J>1&&(J-=1),J<1/6?G+(_-G)*6*J:J<1/2?_:J<2/3?G+(_-G)*(2/3-J)*6:G}function hslToRgb(G,_,J){const Z=J<.5?J*(1+_):J+_-J*_,Q=2*J-Z,ee=hue2rgb(Q,Z,G+1/3),te=hue2rgb(Q,Z,G),ne=hue2rgb(Q,Z,G-1/3);return Math.round(ee*255)<<24|Math.round(te*255)<<16|Math.round(ne*255)<<8}function parse255(G){const _=parseInt(G,10);return _<0?0:_>255?255:_}function parse360(G){return(parseFloat(G)%360+360)%360/360}function parse1(G){const _=parseFloat(G);return _<0?0:_>1?255:Math.round(_*255)}function parsePercentage(G){const _=parseFloat(G);return _<0?0:_>100?1:_/100}function colorToRgba(G){let _=normalizeColor(G);if(_===null)return G;_=_||0;const J=(_&4278190080)>>>24,Z=(_&16711680)>>>16,Q=(_&65280)>>>8,ee=(_&255)/255;return`rgba(${J}, ${Z}, ${Q}, ${ee})`}var createInterpolator=(G,_,J)=>{if(is.fun(G))return G;if(is.arr(G))return createInterpolator({range:G,output:_,extrapolate:J});if(is.str(G.output[0]))return createStringInterpolator(G);const Z=G,Q=Z.output,ee=Z.range||[0,1],te=Z.extrapolateLeft||Z.extrapolate||"extend",ne=Z.extrapolateRight||Z.extrapolate||"extend",ie=Z.easing||(re=>re);return re=>{const oe=findRange(re,ee);return interpolate(re,ee[oe],ee[oe+1],Q[oe],Q[oe+1],ie,te,ne,Z.map)}};function interpolate(G,_,J,Z,Q,ee,te,ne,ie){let re=ie?ie(G):G;if(re<_){if(te==="identity")return re;te==="clamp"&&(re=_)}if(re>J){if(ne==="identity")return re;ne==="clamp"&&(re=J)}return Z===Q?Z:_===J?G<=_?Z:Q:(_===-1/0?re=-re:J===1/0?re=re-_:re=(re-_)/(J-_),re=ee(re),Z===-1/0?re=-re:Q===1/0?re=re+Z:re=re*(Q-Z)+Z,re)}function findRange(G,_){for(var J=1;J<_.length-1&&!(_[J]>=G);++J);return J-1}var easings={linear:G=>G},$get=Symbol.for("FluidValue.get"),$observers=Symbol.for("FluidValue.observers"),hasFluidValue=G=>!!(G&&G[$get]),getFluidValue=G=>G&&G[$get]?G[$get]():G,getFluidObservers=G=>G[$observers]||null;function callFluidObserver(G,_){G.eventObserved?G.eventObserved(_):G(_)}function callFluidObservers(G,_){const J=G[$observers];J&&J.forEach(Z=>{callFluidObserver(Z,_)})}var FluidValue=class{constructor(G){if(!G&&!(G=this.get))throw Error("Unknown getter");setFluidGetter(this,G)}},setFluidGetter=(G,_)=>setHidden(G,$get,_);function addFluidObserver(G,_){if(G[$get]){let J=G[$observers];J||setHidden(G,$observers,J=new Set),J.has(_)||(J.add(_),G.observerAdded&&G.observerAdded(J.size,_))}return _}function removeFluidObserver(G,_){const J=G[$observers];if(J&&J.has(_)){const Z=J.size-1;Z?J.delete(_):G[$observers]=null,G.observerRemoved&&G.observerRemoved(Z,_)}}var setHidden=(G,_,J)=>Object.defineProperty(G,_,{value:J,writable:!0,configurable:!0}),numberRegex=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,colorRegex=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,unitRegex=new RegExp(`(${numberRegex.source})(%|[a-z]+)`,"i"),rgbaRegex=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,cssVariableRegex=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,variableToRgba=G=>{const[_,J]=parseCSSVariable(G);if(!_||isSSR())return G;const Z=window.getComputedStyle(document.documentElement).getPropertyValue(_);if(Z)return Z.trim();if(J&&J.startsWith("--")){const Q=window.getComputedStyle(document.documentElement).getPropertyValue(J);return Q||G}else{if(J&&cssVariableRegex.test(J))return variableToRgba(J);if(J)return J}return G},parseCSSVariable=G=>{const _=cssVariableRegex.exec(G);if(!_)return[,];const[,J,Z]=_;return[J,Z]},namedColorRegex,rgbaRound=(G,_,J,Z,Q)=>`rgba(${Math.round(_)}, ${Math.round(J)}, ${Math.round(Z)}, ${Q})`,createStringInterpolator2=G=>{namedColorRegex||(namedColorRegex=colors?new RegExp(`(${Object.keys(colors).join("|")})(?!\\w)`,"g"):/^\b$/);const _=G.output.map(ee=>getFluidValue(ee).replace(cssVariableRegex,variableToRgba).replace(colorRegex,colorToRgba).replace(namedColorRegex,colorToRgba)),J=_.map(ee=>ee.match(numberRegex).map(Number)),Q=J[0].map((ee,te)=>J.map(ne=>{if(!(te in ne))throw Error('The arity of each "output" value must be equal');return ne[te]})).map(ee=>createInterpolator({...G,output:ee}));return ee=>{const te=!unitRegex.test(_[0])&&_.find(ie=>unitRegex.test(ie))?.replace(numberRegex,"");let ne=0;return _[0].replace(numberRegex,()=>`${Q[ne++](ee)}${te||""}`).replace(rgbaRegex,rgbaRound)}},prefix="react-spring: ",once=G=>{const _=G;let J=!1;if(typeof _!="function")throw new TypeError(`${prefix}once requires a function parameter`);return(...Z)=>{J||(_(...Z),J=!0)}},warnInterpolate=once(console.warn);function deprecateInterpolate(){warnInterpolate(`${prefix}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var warnDirectCall=once(console.warn);function deprecateDirectCall(){warnDirectCall(`${prefix}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function isAnimatedString(G){return is.str(G)&&(G[0]=="#"||/\d/.test(G)||!isSSR()&&cssVariableRegex.test(G)||G in(colors||{}))}var useIsomorphicLayoutEffect=isSSR()?reactExports.useEffect:reactExports.useLayoutEffect,useIsMounted=()=>{const G=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>(G.current=!0,()=>{G.current=!1}),[]),G};function useForceUpdate(){const G=reactExports.useState()[1],_=useIsMounted();return()=>{_.current&&G(Math.random())}}var useOnce=G=>reactExports.useEffect(G,emptyDeps),emptyDeps=[];function usePrev(G){const _=reactExports.useRef(void 0);return reactExports.useEffect(()=>{_.current=G}),_.current}var $node=Symbol.for("Animated:node"),isAnimated=G=>!!G&&G[$node]===G,getAnimated=G=>G&&G[$node],setAnimated=(G,_)=>defineHidden(G,$node,_),getPayload=G=>G&&G[$node]&&G[$node].getPayload(),Animated=class{constructor(){setAnimated(this,this)}getPayload(){return this.payload||[]}},AnimatedValue=class F0 extends Animated{constructor(_){super(),this._value=_,this.done=!0,this.durationProgress=0,is.num(this._value)&&(this.lastPosition=this._value)}static create(_){return new F0(_)}getPayload(){return[this]}getValue(){return this._value}setValue(_,J){return is.num(_)&&(this.lastPosition=_,J&&(_=Math.round(_/J)*J,this.done&&(this.lastPosition=_))),this._value===_?!1:(this._value=_,!0)}reset(){const{done:_}=this;this.done=!1,is.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,_&&(this.lastVelocity=null),this.v0=null)}},AnimatedString=class V0 extends AnimatedValue{constructor(_){super(0),this._string=null,this._toString=createInterpolator({output:[_,_]})}static create(_){return new V0(_)}getValue(){const _=this._string;return _??(this._string=this._toString(this._value))}setValue(_){if(is.str(_)){if(_==this._string)return!1;this._string=_,this._value=1}else if(super.setValue(_))this._string=null;else return!1;return!0}reset(_){_&&(this._toString=createInterpolator({output:[this.getValue(),_]})),this._value=0,super.reset()}},TreeContext={dependencies:null},AnimatedObject=class extends Animated{constructor(G){super(),this.source=G,this.setValue(G)}getValue(G){const _={};return eachProp(this.source,(J,Z)=>{isAnimated(J)?_[Z]=J.getValue(G):hasFluidValue(J)?_[Z]=getFluidValue(J):G||(_[Z]=J)}),_}setValue(G){this.source=G,this.payload=this._makePayload(G)}reset(){this.payload&&each(this.payload,G=>G.reset())}_makePayload(G){if(G){const _=new Set;return eachProp(G,this._addToPayload,_),Array.from(_)}}_addToPayload(G){TreeContext.dependencies&&hasFluidValue(G)&&TreeContext.dependencies.add(G);const _=getPayload(G);_&&each(_,J=>this.add(J))}},AnimatedArray=class G0 extends AnimatedObject{constructor(_){super(_)}static create(_){return new G0(_)}getValue(){return this.source.map(_=>_.getValue())}setValue(_){const J=this.getPayload();return _.length==J.length?J.map((Z,Q)=>Z.setValue(_[Q])).some(Boolean):(super.setValue(_.map(makeAnimated)),!0)}};function makeAnimated(G){return(isAnimatedString(G)?AnimatedString:AnimatedValue).create(G)}function getAnimatedType(G){const _=getAnimated(G);return _?_.constructor:is.arr(G)?AnimatedArray:isAnimatedString(G)?AnimatedString:AnimatedValue}var withAnimated=(G,_)=>{const J=!is.fun(G)||G.prototype&&G.prototype.isReactComponent;return reactExports.forwardRef((Z,Q)=>{const ee=reactExports.useRef(null),te=J&&reactExports.useCallback(ue=>{ee.current=updateRef(Q,ue)},[Q]),[ne,ie]=getAnimatedState(Z,_),re=useForceUpdate(),oe=()=>{const ue=ee.current;if(J&&!ue)return;(ue?_.applyAnimatedValues(ue,ne.getValue(!0)):!1)===!1&&re()},se=new PropsObserver(oe,ie),ae=reactExports.useRef(void 0);useIsomorphicLayoutEffect(()=>(ae.current=se,each(ie,ue=>addFluidObserver(ue,se)),()=>{ae.current&&(each(ae.current.deps,ue=>removeFluidObserver(ue,ae.current)),raf.cancel(ae.current.update))})),reactExports.useEffect(oe,[]),useOnce(()=>()=>{const ue=ae.current;each(ue.deps,de=>removeFluidObserver(de,ue))});const le=_.getComponentProps(ne.getValue());return reactExports.createElement(G,{...le,ref:te})})},PropsObserver=class{constructor(G,_){this.update=G,this.deps=_}eventObserved(G){G.type=="change"&&raf.write(this.update)}};function getAnimatedState(G,_){const J=new Set;return TreeContext.dependencies=J,G.style&&(G={...G,style:_.createAnimatedStyle(G.style)}),G=new AnimatedObject(G),TreeContext.dependencies=null,[G,J]}function updateRef(G,_){return G&&(is.fun(G)?G(_):G.current=_),_}var cacheKey=Symbol.for("AnimatedComponent"),createHost=(G,{applyAnimatedValues:_=()=>!1,createAnimatedStyle:J=Q=>new AnimatedObject(Q),getComponentProps:Z=Q=>Q}={})=>{const Q={applyAnimatedValues:_,createAnimatedStyle:J,getComponentProps:Z},ee=te=>{const ne=getDisplayName(te)||"Anonymous";return is.str(te)?te=ee[te]||(ee[te]=withAnimated(te,Q)):te=te[cacheKey]||(te[cacheKey]=withAnimated(te,Q)),te.displayName=`Animated(${ne})`,te};return eachProp(G,(te,ne)=>{is.arr(G)&&(ne=getDisplayName(te)),ee[ne]=ee(te)}),{animated:ee}},getDisplayName=G=>is.str(G)?G:G&&is.str(G.displayName)?G.displayName:is.fun(G)&&G.name||null;function callProp(G,..._){return is.fun(G)?G(..._):G}var matchProp=(G,_)=>G===!0||!!(_&&G&&(is.fun(G)?G(_):toArray(G).includes(_))),resolveProp=(G,_)=>is.obj(G)?_&&G[_]:G,getDefaultProp=(G,_)=>G.default===!0?G[_]:G.default?G.default[_]:void 0,noopTransform=G=>G,getDefaultProps=(G,_=noopTransform)=>{let J=DEFAULT_PROPS;G.default&&G.default!==!0&&(G=G.default,J=Object.keys(G));const Z={};for(const Q of J){const ee=_(G[Q],Q);is.und(ee)||(Z[Q]=ee)}return Z},DEFAULT_PROPS=["config","onProps","onStart","onChange","onPause","onResume","onRest"],RESERVED_PROPS={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function getForwardProps(G){const _={};let J=0;if(eachProp(G,(Z,Q)=>{RESERVED_PROPS[Q]||(_[Q]=Z,J++)}),J)return _}function inferTo(G){const _=getForwardProps(G);if(_){const J={to:_};return eachProp(G,(Z,Q)=>Q in _||(J[Q]=Z)),J}return{...G}}function computeGoal(G){return G=getFluidValue(G),is.arr(G)?G.map(computeGoal):isAnimatedString(G)?globals_exports.createStringInterpolator({range:[0,1],output:[G,G]})(1):G}function hasProps(G){for(const _ in G)return!0;return!1}function isAsyncTo(G){return is.fun(G)||is.arr(G)&&is.obj(G[0])}function detachRefs(G,_){G.ref?.delete(G),_?.delete(G)}function replaceRef(G,_){_&&G.ref!==_&&(G.ref?.delete(G),_.add(G),G.ref=_)}var config={default:{tension:170,friction:26}},defaults={...config.default,mass:1,damping:1,easing:easings.linear,clamp:!1},AnimationConfig=class{constructor(){this.velocity=0,Object.assign(this,defaults)}};function mergeConfig(G,_,J){J&&(J={...J},sanitizeConfig(J,_),_={...J,..._}),sanitizeConfig(G,_),Object.assign(G,_);for(const te in defaults)G[te]==null&&(G[te]=defaults[te]);let{frequency:Z,damping:Q}=G;const{mass:ee}=G;return is.und(Z)||(Z<.01&&(Z=.01),Q<0&&(Q=0),G.tension=Math.pow(2*Math.PI/Z,2)*ee,G.friction=4*Math.PI*Q*ee/Z),G}function sanitizeConfig(G,_){if(!is.und(_.decay))G.duration=void 0;else{const J=!is.und(_.tension)||!is.und(_.friction);(J||!is.und(_.frequency)||!is.und(_.damping)||!is.und(_.mass))&&(G.duration=void 0,G.decay=void 0),J&&(G.frequency=void 0)}}var emptyArray=[],Animation=class{constructor(){this.changed=!1,this.values=emptyArray,this.toValues=null,this.fromValues=emptyArray,this.config=new AnimationConfig,this.immediate=!1}};function scheduleProps(G,{key:_,props:J,defaultProps:Z,state:Q,actions:ee}){return new Promise((te,ne)=>{let ie,re,oe=matchProp(J.cancel??Z?.cancel,_);if(oe)le();else{is.und(J.pause)||(Q.paused=matchProp(J.pause,_));let ue=Z?.pause;ue!==!0&&(ue=Q.paused||matchProp(ue,_)),ie=callProp(J.delay||0,_),ue?(Q.resumeQueue.add(ae),ee.pause()):(ee.resume(),ae())}function se(){Q.resumeQueue.add(ae),Q.timeouts.delete(re),re.cancel(),ie=re.time-raf.now()}function ae(){ie>0&&!globals_exports.skipAnimation?(Q.delayed=!0,re=raf.setTimeout(le,ie),Q.pauseQueue.add(se),Q.timeouts.add(re)):le()}function le(){Q.delayed&&(Q.delayed=!1),Q.pauseQueue.delete(se),Q.timeouts.delete(re),G<=(Q.cancelId||0)&&(oe=!0);try{ee.start({...J,callId:G,cancel:oe},te)}catch(ue){ne(ue)}}})}var getCombinedResult=(G,_)=>_.length==1?_[0]:_.some(J=>J.cancelled)?getCancelledResult(G.get()):_.every(J=>J.noop)?getNoopResult(G.get()):getFinishedResult(G.get(),_.every(J=>J.finished)),getNoopResult=G=>({value:G,noop:!0,finished:!0,cancelled:!1}),getFinishedResult=(G,_,J=!1)=>({value:G,finished:_,cancelled:J}),getCancelledResult=G=>({value:G,cancelled:!0,finished:!1});function runAsync(G,_,J,Z){const{callId:Q,parentId:ee,onRest:te}=_,{asyncTo:ne,promise:ie}=J;return!ee&&G===ne&&!_.reset?ie:J.promise=(async()=>{J.asyncId=Q,J.asyncTo=G;const re=getDefaultProps(_,(pe,fe)=>fe==="onRest"?void 0:pe);let oe,se;const ae=new Promise((pe,fe)=>(oe=pe,se=fe)),le=pe=>{const fe=Q<=(J.cancelId||0)&&getCancelledResult(Z)||Q!==J.asyncId&&getFinishedResult(Z,!1);if(fe)throw pe.result=fe,se(pe),pe},ue=(pe,fe)=>{const _e=new BailSignal,ye=new SkipAnimationSignal;return(async()=>{if(globals_exports.skipAnimation)throw stopAsync(J),ye.result=getFinishedResult(Z,!1),se(ye),ye;le(_e);const be=is.obj(pe)?{...pe}:{...fe,to:pe};be.parentId=Q,eachProp(re,(Ce,Ee)=>{is.und(be[Ee])&&(be[Ee]=Ce)});const Ae=await Z.start(be);return le(_e),J.paused&&await new Promise(Ce=>{J.resumeQueue.add(Ce)}),Ae})()};let de;if(globals_exports.skipAnimation)return stopAsync(J),getFinishedResult(Z,!1);try{let pe;is.arr(G)?pe=(async fe=>{for(const _e of fe)await ue(_e)})(G):pe=Promise.resolve(G(ue,Z.stop.bind(Z))),await Promise.all([pe.then(oe),ae]),de=getFinishedResult(Z.get(),!0,!1)}catch(pe){if(pe instanceof BailSignal)de=pe.result;else if(pe instanceof SkipAnimationSignal)de=pe.result;else throw pe}finally{Q==J.asyncId&&(J.asyncId=ee,J.asyncTo=ee?ne:void 0,J.promise=ee?ie:void 0)}return is.fun(te)&&raf.batchedUpdates(()=>{te(de,Z,Z.item)}),de})()}function stopAsync(G,_){flush(G.timeouts,J=>J.cancel()),G.pauseQueue.clear(),G.resumeQueue.clear(),G.asyncId=G.asyncTo=G.promise=void 0,_&&(G.cancelId=_)}var BailSignal=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},SkipAnimationSignal=class extends Error{constructor(){super("SkipAnimationSignal")}},isFrameValue=G=>G instanceof FrameValue,nextId=1,FrameValue=class extends FluidValue{constructor(){super(...arguments),this.id=nextId++,this._priority=0}get priority(){return this._priority}set priority(G){this._priority!=G&&(this._priority=G,this._onPriorityChange(G))}get(){const G=getAnimated(this);return G&&G.getValue()}to(...G){return globals_exports.to(this,G)}interpolate(...G){return deprecateInterpolate(),globals_exports.to(this,G)}toJSON(){return this.get()}observerAdded(G){G==1&&this._attach()}observerRemoved(G){G==0&&this._detach()}_attach(){}_detach(){}_onChange(G,_=!1){callFluidObservers(this,{type:"change",parent:this,value:G,idle:_})}_onPriorityChange(G){this.idle||frameLoop.sort(this),callFluidObservers(this,{type:"priority",parent:this,priority:G})}},$P=Symbol.for("SpringPhase"),HAS_ANIMATED=1,IS_ANIMATING=2,IS_PAUSED=4,hasAnimated=G=>(G[$P]&HAS_ANIMATED)>0,isAnimating=G=>(G[$P]&IS_ANIMATING)>0,isPaused=G=>(G[$P]&IS_PAUSED)>0,setActiveBit=(G,_)=>_?G[$P]|=IS_ANIMATING|HAS_ANIMATED:G[$P]&=~IS_ANIMATING,setPausedBit=(G,_)=>_?G[$P]|=IS_PAUSED:G[$P]&=~IS_PAUSED,SpringValue=class extends FrameValue{constructor(G,_){if(super(),this.animation=new Animation,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!is.und(G)||!is.und(_)){const J=is.obj(G)?{...G}:{..._,from:G};is.und(J.default)&&(J.default=!0),this.start(J)}}get idle(){return!(isAnimating(this)||this._state.asyncTo)||isPaused(this)}get goal(){return getFluidValue(this.animation.to)}get velocity(){const G=getAnimated(this);return G instanceof AnimatedValue?G.lastVelocity||0:G.getPayload().map(_=>_.lastVelocity||0)}get hasAnimated(){return hasAnimated(this)}get isAnimating(){return isAnimating(this)}get isPaused(){return isPaused(this)}get isDelayed(){return this._state.delayed}advance(G){let _=!0,J=!1;const Z=this.animation;let{toValues:Q}=Z;const{config:ee}=Z,te=getPayload(Z.to);!te&&hasFluidValue(Z.to)&&(Q=toArray(getFluidValue(Z.to))),Z.values.forEach((re,oe)=>{if(re.done)return;const se=re.constructor==AnimatedString?1:te?te[oe].lastPosition:Q[oe];let ae=Z.immediate,le=se;if(!ae){if(le=re.lastPosition,ee.tension<=0){re.done=!0;return}let ue=re.elapsedTime+=G;const de=Z.fromValues[oe],pe=re.v0!=null?re.v0:re.v0=is.arr(ee.velocity)?ee.velocity[oe]:ee.velocity;let fe;const _e=ee.precision||(de==se?.005:Math.min(1,Math.abs(se-de)*.001));if(is.und(ee.duration))if(ee.decay){const ye=ee.decay===!0?.998:ee.decay,be=Math.exp(-(1-ye)*ue);le=de+pe/(1-ye)*(1-be),ae=Math.abs(re.lastPosition-le)<=_e,fe=pe*be}else{fe=re.lastVelocity==null?pe:re.lastVelocity;const ye=ee.restVelocity||_e/10,be=ee.clamp?0:ee.bounce,Ae=!is.und(be),Ce=de==se?re.v0>0:de<se;let Ee,Re=!1;const Te=1,Me=Math.ceil(G/Te);for(let Ne=0;Ne<Me&&(Ee=Math.abs(fe)>ye,!(!Ee&&(ae=Math.abs(se-le)<=_e,ae)));++Ne){Ae&&(Re=le==se||le>se==Ce,Re&&(fe=-fe*be,le=se));const Le=-ee.tension*1e-6*(le-se),Ie=-ee.friction*.001*fe,Ge=(Le+Ie)/ee.mass;fe=fe+Ge*Te,le=le+fe*Te}}else{let ye=1;ee.duration>0&&(this._memoizedDuration!==ee.duration&&(this._memoizedDuration=ee.duration,re.durationProgress>0&&(re.elapsedTime=ee.duration*re.durationProgress,ue=re.elapsedTime+=G)),ye=(ee.progress||0)+ue/this._memoizedDuration,ye=ye>1?1:ye<0?0:ye,re.durationProgress=ye),le=de+ee.easing(ye)*(se-de),fe=(le-re.lastPosition)/G,ae=ye==1}re.lastVelocity=fe,Number.isNaN(le)&&(console.warn("Got NaN while animating:",this),ae=!0)}te&&!te[oe].done&&(ae=!1),ae?re.done=!0:_=!1,re.setValue(le,ee.round)&&(J=!0)});const ne=getAnimated(this),ie=ne.getValue();if(_){const re=getFluidValue(Z.to);(ie!==re||J)&&!ee.decay?(ne.setValue(re),this._onChange(re)):J&&ee.decay&&this._onChange(ie),this._stop()}else J&&this._onChange(ie)}set(G){return raf.batchedUpdates(()=>{this._stop(),this._focus(G),this._set(G)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(isAnimating(this)){const{to:G,config:_}=this.animation;raf.batchedUpdates(()=>{this._onStart(),_.decay||this._set(G,!1),this._stop()})}return this}update(G){return(this.queue||(this.queue=[])).push(G),this}start(G,_){let J;return is.und(G)?(J=this.queue||[],this.queue=[]):J=[is.obj(G)?G:{..._,to:G}],Promise.all(J.map(Z=>this._update(Z))).then(Z=>getCombinedResult(this,Z))}stop(G){const{to:_}=this.animation;return this._focus(this.get()),stopAsync(this._state,G&&this._lastCallId),raf.batchedUpdates(()=>this._stop(_,G)),this}reset(){this._update({reset:!0})}eventObserved(G){G.type=="change"?this._start():G.type=="priority"&&(this.priority=G.priority+1)}_prepareNode(G){const _=this.key||"";let{to:J,from:Z}=G;J=is.obj(J)?J[_]:J,(J==null||isAsyncTo(J))&&(J=void 0),Z=is.obj(Z)?Z[_]:Z,Z==null&&(Z=void 0);const Q={to:J,from:Z};return hasAnimated(this)||(G.reverse&&([J,Z]=[Z,J]),Z=getFluidValue(Z),is.und(Z)?getAnimated(this)||this._set(J):this._set(Z)),Q}_update({...G},_){const{key:J,defaultProps:Z}=this;G.default&&Object.assign(Z,getDefaultProps(G,(te,ne)=>/^on/.test(ne)?resolveProp(te,J):te)),mergeActiveFn(this,G,"onProps"),sendEvent(this,"onProps",G,this);const Q=this._prepareNode(G);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const ee=this._state;return scheduleProps(++this._lastCallId,{key:J,props:G,defaultProps:Z,state:ee,actions:{pause:()=>{isPaused(this)||(setPausedBit(this,!0),flushCalls(ee.pauseQueue),sendEvent(this,"onPause",getFinishedResult(this,checkFinished(this,this.animation.to)),this))},resume:()=>{isPaused(this)&&(setPausedBit(this,!1),isAnimating(this)&&this._resume(),flushCalls(ee.resumeQueue),sendEvent(this,"onResume",getFinishedResult(this,checkFinished(this,this.animation.to)),this))},start:this._merge.bind(this,Q)}}).then(te=>{if(G.loop&&te.finished&&!(_&&te.noop)){const ne=createLoopUpdate(G);if(ne)return this._update(ne,!0)}return te})}_merge(G,_,J){if(_.cancel)return this.stop(!0),J(getCancelledResult(this));const Z=!is.und(G.to),Q=!is.und(G.from);if(Z||Q)if(_.callId>this._lastToId)this._lastToId=_.callId;else return J(getCancelledResult(this));const{key:ee,defaultProps:te,animation:ne}=this,{to:ie,from:re}=ne;let{to:oe=ie,from:se=re}=G;Q&&!Z&&(!_.default||is.und(oe))&&(oe=se),_.reverse&&([oe,se]=[se,oe]);const ae=!isEqual(se,re);ae&&(ne.from=se),se=getFluidValue(se);const le=!isEqual(oe,ie);le&&this._focus(oe);const ue=isAsyncTo(_.to),{config:de}=ne,{decay:pe,velocity:fe}=de;(Z||Q)&&(de.velocity=0),_.config&&!ue&&mergeConfig(de,callProp(_.config,ee),_.config!==te.config?callProp(te.config,ee):void 0);let _e=getAnimated(this);if(!_e||is.und(oe))return J(getFinishedResult(this,!0));const ye=is.und(_.reset)?Q&&!_.default:!is.und(se)&&matchProp(_.reset,ee),be=ye?se:this.get(),Ae=computeGoal(oe),Ce=is.num(Ae)||is.arr(Ae)||isAnimatedString(Ae),Ee=!ue&&(!Ce||matchProp(te.immediate||_.immediate,ee));if(le){const Ne=getAnimatedType(oe);if(Ne!==_e.constructor)if(Ee)_e=this._set(Ae);else throw Error(`Cannot animate between ${_e.constructor.name} and ${Ne.name}, as the "to" prop suggests`)}const Re=_e.constructor;let Te=hasFluidValue(oe),Me=!1;if(!Te){const Ne=ye||!hasAnimated(this)&&ae;(le||Ne)&&(Me=isEqual(computeGoal(be),Ae),Te=!Me),(!isEqual(ne.immediate,Ee)&&!Ee||!isEqual(de.decay,pe)||!isEqual(de.velocity,fe))&&(Te=!0)}if(Me&&isAnimating(this)&&(ne.changed&&!ye?Te=!0:Te||this._stop(ie)),!ue&&((Te||hasFluidValue(ie))&&(ne.values=_e.getPayload(),ne.toValues=hasFluidValue(oe)?null:Re==AnimatedString?[1]:toArray(Ae)),ne.immediate!=Ee&&(ne.immediate=Ee,!Ee&&!ye&&this._set(ie)),Te)){const{onRest:Ne}=ne;each(ACTIVE_EVENTS,Ie=>mergeActiveFn(this,_,Ie));const Le=getFinishedResult(this,checkFinished(this,ie));flushCalls(this._pendingCalls,Le),this._pendingCalls.add(J),ne.changed&&raf.batchedUpdates(()=>{ne.changed=!ye,Ne?.(Le,this),ye?callProp(te.onRest,Le):ne.onStart?.(Le,this)})}ye&&this._set(be),ue?J(runAsync(_.to,_,this._state,this)):Te?this._start():isAnimating(this)&&!le?this._pendingCalls.add(J):J(getNoopResult(be))}_focus(G){const _=this.animation;G!==_.to&&(getFluidObservers(this)&&this._detach(),_.to=G,getFluidObservers(this)&&this._attach())}_attach(){let G=0;const{to:_}=this.animation;hasFluidValue(_)&&(addFluidObserver(_,this),isFrameValue(_)&&(G=_.priority+1)),this.priority=G}_detach(){const{to:G}=this.animation;hasFluidValue(G)&&removeFluidObserver(G,this)}_set(G,_=!0){const J=getFluidValue(G);if(!is.und(J)){const Z=getAnimated(this);if(!Z||!isEqual(J,Z.getValue())){const Q=getAnimatedType(J);!Z||Z.constructor!=Q?setAnimated(this,Q.create(J)):Z.setValue(J),Z&&raf.batchedUpdates(()=>{this._onChange(J,_)})}}return getAnimated(this)}_onStart(){const G=this.animation;G.changed||(G.changed=!0,sendEvent(this,"onStart",getFinishedResult(this,checkFinished(this,G.to)),this))}_onChange(G,_){_||(this._onStart(),callProp(this.animation.onChange,G,this)),callProp(this.defaultProps.onChange,G,this),super._onChange(G,_)}_start(){const G=this.animation;getAnimated(this).reset(getFluidValue(G.to)),G.immediate||(G.fromValues=G.values.map(_=>_.lastPosition)),isAnimating(this)||(setActiveBit(this,!0),isPaused(this)||this._resume())}_resume(){globals_exports.skipAnimation?this.finish():frameLoop.start(this)}_stop(G,_){if(isAnimating(this)){setActiveBit(this,!1);const J=this.animation;each(J.values,Q=>{Q.done=!0}),J.toValues&&(J.onChange=J.onPause=J.onResume=void 0),callFluidObservers(this,{type:"idle",parent:this});const Z=_?getCancelledResult(this.get()):getFinishedResult(this.get(),checkFinished(this,G??J.to));flushCalls(this._pendingCalls,Z),J.changed&&(J.changed=!1,sendEvent(this,"onRest",Z,this))}}};function checkFinished(G,_){const J=computeGoal(_),Z=computeGoal(G.get());return isEqual(Z,J)}function createLoopUpdate(G,_=G.loop,J=G.to){const Z=callProp(_);if(Z){const Q=Z!==!0&&inferTo(Z),ee=(Q||G).reverse,te=!Q||Q.reset;return createUpdate({...G,loop:_,default:!1,pause:void 0,to:!ee||isAsyncTo(J)?J:void 0,from:te?G.from:void 0,reset:te,...Q})}}function createUpdate(G){const{to:_,from:J}=G=inferTo(G),Z=new Set;return is.obj(_)&&findDefined(_,Z),is.obj(J)&&findDefined(J,Z),G.keys=Z.size?Array.from(Z):null,G}function declareUpdate(G){const _=createUpdate(G);return is.und(_.default)&&(_.default=getDefaultProps(_)),_}function findDefined(G,_){eachProp(G,(J,Z)=>J!=null&&_.add(Z))}var ACTIVE_EVENTS=["onStart","onRest","onChange","onPause","onResume"];function mergeActiveFn(G,_,J){G.animation[J]=_[J]!==getDefaultProp(_,J)?resolveProp(_[J],G.key):void 0}function sendEvent(G,_,...J){G.animation[_]?.(...J),G.defaultProps[_]?.(...J)}var BATCHED_EVENTS=["onStart","onChange","onRest"],nextId2=1,Controller=class{constructor(G,_){this.id=nextId2++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),_&&(this._flush=_),G&&this.start({default:!0,...G})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(G=>G.idle&&!G.isDelayed&&!G.isPaused)}get item(){return this._item}set item(G){this._item=G}get(){const G={};return this.each((_,J)=>G[J]=_.get()),G}set(G){for(const _ in G){const J=G[_];is.und(J)||this.springs[_].set(J)}}update(G){return G&&this.queue.push(createUpdate(G)),this}start(G){let{queue:_}=this;return G?_=toArray(G).map(createUpdate):this.queue=[],this._flush?this._flush(this,_):(prepareKeys(this,_),flushUpdateQueue(this,_))}stop(G,_){if(G!==!!G&&(_=G),_){const J=this.springs;each(toArray(_),Z=>J[Z].stop(!!G))}else stopAsync(this._state,this._lastAsyncId),this.each(J=>J.stop(!!G));return this}pause(G){if(is.und(G))this.start({pause:!0});else{const _=this.springs;each(toArray(G),J=>_[J].pause())}return this}resume(G){if(is.und(G))this.start({pause:!1});else{const _=this.springs;each(toArray(G),J=>_[J].resume())}return this}each(G){eachProp(this.springs,G)}_onFrame(){const{onStart:G,onChange:_,onRest:J}=this._events,Z=this._active.size>0,Q=this._changed.size>0;(Z&&!this._started||Q&&!this._started)&&(this._started=!0,flush(G,([ne,ie])=>{ie.value=this.get(),ne(ie,this,this._item)}));const ee=!Z&&this._started,te=Q||ee&&J.size?this.get():null;Q&&_.size&&flush(_,([ne,ie])=>{ie.value=te,ne(ie,this,this._item)}),ee&&(this._started=!1,flush(J,([ne,ie])=>{ie.value=te,ne(ie,this,this._item)}))}eventObserved(G){if(G.type=="change")this._changed.add(G.parent),G.idle||this._active.add(G.parent);else if(G.type=="idle")this._active.delete(G.parent);else return;raf.onFrame(this._onFrame)}};function flushUpdateQueue(G,_){return Promise.all(_.map(J=>flushUpdate(G,J))).then(J=>getCombinedResult(G,J))}async function flushUpdate(G,_,J){const{keys:Z,to:Q,from:ee,loop:te,onRest:ne,onResolve:ie}=_,re=is.obj(_.default)&&_.default;te&&(_.loop=!1),Q===!1&&(_.to=null),ee===!1&&(_.from=null);const oe=is.arr(Q)||is.fun(Q)?Q:void 0;oe?(_.to=void 0,_.onRest=void 0,re&&(re.onRest=void 0)):each(BATCHED_EVENTS,de=>{const pe=_[de];if(is.fun(pe)){const fe=G._events[de];_[de]=({finished:_e,cancelled:ye})=>{const be=fe.get(pe);be?(_e||(be.finished=!1),ye&&(be.cancelled=!0)):fe.set(pe,{value:null,finished:_e||!1,cancelled:ye||!1})},re&&(re[de]=_[de])}});const se=G._state;_.pause===!se.paused?(se.paused=_.pause,flushCalls(_.pause?se.pauseQueue:se.resumeQueue)):se.paused&&(_.pause=!0);const ae=(Z||Object.keys(G.springs)).map(de=>G.springs[de].start(_)),le=_.cancel===!0||getDefaultProp(_,"cancel")===!0;(oe||le&&se.asyncId)&&ae.push(scheduleProps(++G._lastAsyncId,{props:_,state:se,actions:{pause:noop,resume:noop,start(de,pe){le?(stopAsync(se,G._lastAsyncId),pe(getCancelledResult(G))):(de.onRest=ne,pe(runAsync(oe,de,se,G)))}}})),se.paused&&await new Promise(de=>{se.resumeQueue.add(de)});const ue=getCombinedResult(G,await Promise.all(ae));if(te&&ue.finished&&!(J&&ue.noop)){const de=createLoopUpdate(_,te,Q);if(de)return prepareKeys(G,[de]),flushUpdate(G,de,!0)}return ie&&raf.batchedUpdates(()=>ie(ue,G,G.item)),ue}function getSprings(G,_){const J={...G.springs};return _&&each(toArray(_),Z=>{is.und(Z.keys)&&(Z=createUpdate(Z)),is.obj(Z.to)||(Z={...Z,to:void 0}),prepareSprings(J,Z,Q=>createSpring(Q))}),setSprings(G,J),J}function setSprings(G,_){eachProp(_,(J,Z)=>{G.springs[Z]||(G.springs[Z]=J,addFluidObserver(J,G))})}function createSpring(G,_){const J=new SpringValue;return J.key=G,_&&addFluidObserver(J,_),J}function prepareSprings(G,_,J){_.keys&&each(_.keys,Z=>{(G[Z]||(G[Z]=J(Z)))._prepareNode(_)})}function prepareKeys(G,_){each(_,J=>{prepareSprings(G.springs,J,Z=>createSpring(Z,G))})}var SpringContext=reactExports.createContext({pause:!1,immediate:!1}),SpringRef=()=>{const G=[],_=function(Z){deprecateDirectCall();const Q=[];return each(G,(ee,te)=>{if(is.und(Z))Q.push(ee.start());else{const ne=J(Z,ee,te);ne&&Q.push(ee.start(ne))}}),Q};_.current=G,_.add=function(Z){G.includes(Z)||G.push(Z)},_.delete=function(Z){const Q=G.indexOf(Z);~Q&&G.splice(Q,1)},_.pause=function(){return each(G,Z=>Z.pause(...arguments)),this},_.resume=function(){return each(G,Z=>Z.resume(...arguments)),this},_.set=function(Z){each(G,(Q,ee)=>{const te=is.fun(Z)?Z(ee,Q):Z;te&&Q.set(te)})},_.start=function(Z){const Q=[];return each(G,(ee,te)=>{if(is.und(Z))Q.push(ee.start());else{const ne=this._getProps(Z,ee,te);ne&&Q.push(ee.start(ne))}}),Q},_.stop=function(){return each(G,Z=>Z.stop(...arguments)),this},_.update=function(Z){return each(G,(Q,ee)=>Q.update(this._getProps(Z,Q,ee))),this};const J=function(Z,Q,ee){return is.fun(Z)?Z(ee,Q):Z};return _._getProps=J,_};function useSprings(G,_,J){const Z=is.fun(_)&&_;Z&&!J&&(J=[]);const Q=reactExports.useMemo(()=>Z||arguments.length==3?SpringRef():void 0,[]),ee=reactExports.useRef(0),te=useForceUpdate(),ne=reactExports.useMemo(()=>({ctrls:[],queue:[],flush(fe,_e){const ye=getSprings(fe,_e);return ee.current>0&&!ne.queue.length&&!Object.keys(ye).some(Ae=>!fe.springs[Ae])?flushUpdateQueue(fe,_e):new Promise(Ae=>{setSprings(fe,ye),ne.queue.push(()=>{Ae(flushUpdateQueue(fe,_e))}),te()})}}),[]),ie=reactExports.useRef([...ne.ctrls]),re=reactExports.useRef([]),oe=usePrev(G)||0;reactExports.useMemo(()=>{each(ie.current.slice(G,oe),fe=>{detachRefs(fe,Q),fe.stop(!0)}),ie.current.length=G,se(oe,G)},[G]),reactExports.useMemo(()=>{se(0,Math.min(oe,G))},J);function se(fe,_e){for(let ye=fe;ye<_e;ye++){const be=ie.current[ye]||(ie.current[ye]=new Controller(null,ne.flush)),Ae=Z?Z(ye,be):_[ye];Ae&&(re.current[ye]=declareUpdate(Ae))}}const ae=ie.current.map((fe,_e)=>getSprings(fe,re.current[_e])),le=reactExports.useContext(SpringContext),ue=usePrev(le),de=le!==ue&&hasProps(le);useIsomorphicLayoutEffect(()=>{ee.current++,ne.ctrls=ie.current;const{queue:fe}=ne;fe.length&&(ne.queue=[],each(fe,_e=>_e())),each(ie.current,(_e,ye)=>{Q?.add(_e),de&&_e.start({default:le});const be=re.current[ye];be&&(replaceRef(_e,be.ref),_e.ref?_e.queue.push(be):_e.start(be))})}),useOnce(()=>()=>{each(ne.ctrls,fe=>fe.stop(!0))});const pe=ae.map(fe=>({...fe}));return Q?[pe,Q]:pe}function useSpring(G,_){const J=is.fun(G),[[Z],Q]=useSprings(1,J?G:[G],J?[]:_);return J||arguments.length==2?[Z,Q]:Z}var Interpolation=class extends FrameValue{constructor(G,_){super(),this.source=G,this.idle=!0,this._active=new Set,this.calc=createInterpolator(..._);const J=this._get(),Z=getAnimatedType(J);setAnimated(this,Z.create(J))}advance(G){const _=this._get(),J=this.get();isEqual(_,J)||(getAnimated(this).setValue(_),this._onChange(_,this.idle)),!this.idle&&checkIdle(this._active)&&becomeIdle(this)}_get(){const G=is.arr(this.source)?this.source.map(getFluidValue):toArray(getFluidValue(this.source));return this.calc(...G)}_start(){this.idle&&!checkIdle(this._active)&&(this.idle=!1,each(getPayload(this),G=>{G.done=!1}),globals_exports.skipAnimation?(raf.batchedUpdates(()=>this.advance()),becomeIdle(this)):frameLoop.start(this))}_attach(){let G=1;each(toArray(this.source),_=>{hasFluidValue(_)&&addFluidObserver(_,this),isFrameValue(_)&&(_.idle||this._active.add(_),G=Math.max(G,_.priority+1))}),this.priority=G,this._start()}_detach(){each(toArray(this.source),G=>{hasFluidValue(G)&&removeFluidObserver(G,this)}),this._active.clear(),becomeIdle(this)}eventObserved(G){G.type=="change"?G.idle?this.advance():(this._active.add(G.parent),this._start()):G.type=="idle"?this._active.delete(G.parent):G.type=="priority"&&(this.priority=toArray(this.source).reduce((_,J)=>Math.max(_,(isFrameValue(J)?J.priority:0)+1),0))}};function isIdle(G){return G.idle!==!1}function checkIdle(G){return!G.size||Array.from(G).every(isIdle)}function becomeIdle(G){G.idle||(G.idle=!0,each(getPayload(G),_=>{_.done=!0}),callFluidObservers(G,{type:"idle",parent:G}))}globals_exports.assign({createStringInterpolator:createStringInterpolator2,to:(G,_)=>new Interpolation(G,_)});var primitives=["primitive"].concat(Object.keys(THREE).filter(G=>/^[A-Z]/.test(G)).map(G=>G[0].toLowerCase()+G.slice(1)));globals_exports.assign({createStringInterpolator:createStringInterpolator2,colors:colors2,frameLoop:"demand"});addEffect(()=>{raf.advance()});var host=createHost(primitives,{applyAnimatedValues:applyProps}),animated=host.animated;const Visible=0,Deleted=1,_v1=new Vector3,_line3=new Line3,_plane=new Plane,_closestPoint=new Vector3,_triangle=new Triangle;class ConvexHull{constructor(){this.tolerance=-1,this.faces=[],this.newFaces=[],this.assigned=new VertexList,this.unassigned=new VertexList,this.vertices=[]}setFromPoints(_){if(_.length>=4){this.makeEmpty();for(let J=0,Z=_.length;J<Z;J++)this.vertices.push(new VertexNode(_[J]));this._compute()}return this}setFromObject(_){const J=[];return _.updateMatrixWorld(!0),_.traverse(function(Z){const Q=Z.geometry;if(Q!==void 0){const ee=Q.attributes.position;if(ee!==void 0)for(let te=0,ne=ee.count;te<ne;te++){const ie=new Vector3;ie.fromBufferAttribute(ee,te).applyMatrix4(Z.matrixWorld),J.push(ie)}}}),this.setFromPoints(J)}containsPoint(_){const J=this.faces;for(let Z=0,Q=J.length;Z<Q;Z++)if(J[Z].distanceToPoint(_)>this.tolerance)return!1;return!0}intersectRay(_,J){const Z=this.faces;let Q=-1/0,ee=1/0;for(let te=0,ne=Z.length;te<ne;te++){const ie=Z[te],re=ie.distanceToPoint(_.origin),oe=ie.normal.dot(_.direction);if(re>0&&oe>=0)return null;const se=oe!==0?-re/oe:0;if(!(se<=0)&&(oe>0?ee=Math.min(se,ee):Q=Math.max(se,Q),Q>ee))return null}return Q!==-1/0?_.at(Q,J):_.at(ee,J),J}intersectsRay(_){return this.intersectRay(_,_v1)!==null}makeEmpty(){return this.faces=[],this.vertices=[],this}_addVertexToFace(_,J){return _.face=J,J.outside===null?this.assigned.append(_):this.assigned.insertBefore(J.outside,_),J.outside=_,this}_removeVertexFromFace(_,J){return _===J.outside&&(_.next!==null&&_.next.face===J?J.outside=_.next:J.outside=null),this.assigned.remove(_),this}_removeAllVerticesFromFace(_){if(_.outside!==null){const J=_.outside;let Z=_.outside;for(;Z.next!==null&&Z.next.face===_;)Z=Z.next;return this.assigned.removeSubList(J,Z),J.prev=Z.next=null,_.outside=null,J}}_deleteFaceVertices(_,J){const Z=this._removeAllVerticesFromFace(_);if(Z!==void 0)if(J===void 0)this.unassigned.appendChain(Z);else{let Q=Z;do{const ee=Q.next;J.distanceToPoint(Q.point)>this.tolerance?this._addVertexToFace(Q,J):this.unassigned.append(Q),Q=ee}while(Q!==null)}return this}_resolveUnassignedPoints(_){if(this.unassigned.isEmpty()===!1){let J=this.unassigned.first();do{const Z=J.next;let Q=this.tolerance,ee=null;for(let te=0;te<_.length;te++){const ne=_[te];if(ne.mark===Visible){const ie=ne.distanceToPoint(J.point);if(ie>Q&&(Q=ie,ee=ne),Q>1e3*this.tolerance)break}}ee!==null&&this._addVertexToFace(J,ee),J=Z}while(J!==null)}return this}_computeExtremes(){const _=new Vector3,J=new Vector3,Z=[],Q=[];for(let ee=0;ee<3;ee++)Z[ee]=Q[ee]=this.vertices[0];_.copy(this.vertices[0].point),J.copy(this.vertices[0].point);for(let ee=0,te=this.vertices.length;ee<te;ee++){const ne=this.vertices[ee],ie=ne.point;for(let re=0;re<3;re++)ie.getComponent(re)<_.getComponent(re)&&(_.setComponent(re,ie.getComponent(re)),Z[re]=ne);for(let re=0;re<3;re++)ie.getComponent(re)>J.getComponent(re)&&(J.setComponent(re,ie.getComponent(re)),Q[re]=ne)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(_.x),Math.abs(J.x))+Math.max(Math.abs(_.y),Math.abs(J.y))+Math.max(Math.abs(_.z),Math.abs(J.z))),{min:Z,max:Q}}_computeInitialHull(){const _=this.vertices,J=this._computeExtremes(),Z=J.min,Q=J.max;let ee=0,te=0;for(let ae=0;ae<3;ae++){const le=Q[ae].point.getComponent(ae)-Z[ae].point.getComponent(ae);le>ee&&(ee=le,te=ae)}const ne=Z[te],ie=Q[te];let re,oe;ee=0,_line3.set(ne.point,ie.point);for(let ae=0,le=this.vertices.length;ae<le;ae++){const ue=_[ae];if(ue!==ne&&ue!==ie){_line3.closestPointToPoint(ue.point,!0,_closestPoint);const de=_closestPoint.distanceToSquared(ue.point);de>ee&&(ee=de,re=ue)}}ee=-1,_plane.setFromCoplanarPoints(ne.point,ie.point,re.point);for(let ae=0,le=this.vertices.length;ae<le;ae++){const ue=_[ae];if(ue!==ne&&ue!==ie&&ue!==re){const de=Math.abs(_plane.distanceToPoint(ue.point));de>ee&&(ee=de,oe=ue)}}const se=[];if(_plane.distanceToPoint(oe.point)<0){se.push(Face.create(ne,ie,re),Face.create(oe,ie,ne),Face.create(oe,re,ie),Face.create(oe,ne,re));for(let ae=0;ae<3;ae++){const le=(ae+1)%3;se[ae+1].getEdge(2).setTwin(se[0].getEdge(le)),se[ae+1].getEdge(1).setTwin(se[le+1].getEdge(0))}}else{se.push(Face.create(ne,re,ie),Face.create(oe,ne,ie),Face.create(oe,ie,re),Face.create(oe,re,ne));for(let ae=0;ae<3;ae++){const le=(ae+1)%3;se[ae+1].getEdge(2).setTwin(se[0].getEdge((3-ae)%3)),se[ae+1].getEdge(0).setTwin(se[le+1].getEdge(1))}}for(let ae=0;ae<4;ae++)this.faces.push(se[ae]);for(let ae=0,le=_.length;ae<le;ae++){const ue=_[ae];if(ue!==ne&&ue!==ie&&ue!==re&&ue!==oe){ee=this.tolerance;let de=null;for(let pe=0;pe<4;pe++){const fe=this.faces[pe].distanceToPoint(ue.point);fe>ee&&(ee=fe,de=this.faces[pe])}de!==null&&this._addVertexToFace(ue,de)}}return this}_reindexFaces(){const _=[];for(let J=0;J<this.faces.length;J++){const Z=this.faces[J];Z.mark===Visible&&_.push(Z)}return this.faces=_,this}_nextVertexToAdd(){if(this.assigned.isEmpty()===!1){let _,J=0;const Z=this.assigned.first().face;let Q=Z.outside;do{const ee=Z.distanceToPoint(Q.point);ee>J&&(J=ee,_=Q),Q=Q.next}while(Q!==null&&Q.face===Z);return _}}_computeHorizon(_,J,Z,Q){this._deleteFaceVertices(Z),Z.mark=Deleted;let ee;J===null?ee=J=Z.getEdge(0):ee=J.next;do{const te=ee.twin,ne=te.face;ne.mark===Visible&&(ne.distanceToPoint(_)>this.tolerance?this._computeHorizon(_,te,ne,Q):Q.push(ee)),ee=ee.next}while(ee!==J);return this}_addAdjoiningFace(_,J){const Z=Face.create(_,J.tail(),J.head());return this.faces.push(Z),Z.getEdge(-1).setTwin(J.twin),Z.getEdge(0)}_addNewFaces(_,J){this.newFaces=[];let Z=null,Q=null;for(let ee=0;ee<J.length;ee++){const te=J[ee],ne=this._addAdjoiningFace(_,te);Z===null?Z=ne:ne.next.setTwin(Q),this.newFaces.push(ne.face),Q=ne}return Z.next.setTwin(Q),this}_addVertexToHull(_){const J=[];return this.unassigned.clear(),this._removeVertexFromFace(_,_.face),this._computeHorizon(_.point,null,_.face,J),this._addNewFaces(_,J),this._resolveUnassignedPoints(this.newFaces),this}_cleanup(){return this.assigned.clear(),this.unassigned.clear(),this.newFaces=[],this}_compute(){let _;for(this._computeInitialHull();(_=this._nextVertexToAdd())!==void 0;)this._addVertexToHull(_);return this._reindexFaces(),this._cleanup(),this}}class Face{constructor(){this.normal=new Vector3,this.midpoint=new Vector3,this.area=0,this.constant=0,this.outside=null,this.mark=Visible,this.edge=null}static create(_,J,Z){const Q=new Face,ee=new HalfEdge(_,Q),te=new HalfEdge(J,Q),ne=new HalfEdge(Z,Q);return ee.next=ne.prev=te,te.next=ee.prev=ne,ne.next=te.prev=ee,Q.edge=ee,Q.compute()}getEdge(_){let J=this.edge;for(;_>0;)J=J.next,_--;for(;_<0;)J=J.prev,_++;return J}compute(){const _=this.edge.tail(),J=this.edge.head(),Z=this.edge.next.head();return _triangle.set(_.point,J.point,Z.point),_triangle.getNormal(this.normal),_triangle.getMidpoint(this.midpoint),this.area=_triangle.getArea(),this.constant=this.normal.dot(this.midpoint),this}distanceToPoint(_){return this.normal.dot(_)-this.constant}}class HalfEdge{constructor(_,J){this.vertex=_,this.prev=null,this.next=null,this.twin=null,this.face=J}head(){return this.vertex}tail(){return this.prev?this.prev.vertex:null}length(){const _=this.head(),J=this.tail();return J!==null?J.point.distanceTo(_.point):-1}lengthSquared(){const _=this.head(),J=this.tail();return J!==null?J.point.distanceToSquared(_.point):-1}setTwin(_){return this.twin=_,_.twin=this,this}}class VertexNode{constructor(_){this.point=_,this.prev=null,this.next=null,this.face=null}}class VertexList{constructor(){this.head=null,this.tail=null}first(){return this.head}last(){return this.tail}clear(){return this.head=this.tail=null,this}insertBefore(_,J){return J.prev=_.prev,J.next=_,J.prev===null?this.head=J:J.prev.next=J,_.prev=J,this}insertAfter(_,J){return J.prev=_,J.next=_.next,J.next===null?this.tail=J:J.next.prev=J,_.next=J,this}append(_){return this.head===null?this.head=_:this.tail.next=_,_.prev=this.tail,_.next=null,this.tail=_,this}appendChain(_){for(this.head===null?this.head=_:this.tail.next=_,_.prev=this.tail;_.next!==null;)_=_.next;return this.tail=_,this}remove(_){return _.prev===null?this.head=_.next:_.prev.next=_.next,_.next===null?this.tail=_.prev:_.next.prev=_.prev,this}removeSubList(_,J){return _.prev===null?this.head=J.next:_.prev.next=J.next,J.next===null?this.tail=_.prev:J.next.prev=_.prev,this}isEmpty(){return this.head===null}}class ConvexGeometry extends BufferGeometry{constructor(_=[]){super();const J=[],Z=[],ee=new ConvexHull().setFromPoints(_).faces;for(let te=0;te<ee.length;te++){const ne=ee[te];let ie=ne.edge;do{const re=ie.head().point;J.push(re.x,re.y,re.z),Z.push(ne.normal.x,ne.normal.y,ne.normal.z),ie=ie.next}while(ie!==ne.edge)}this.setAttribute("position",new Float32BufferAttribute(J,3)),this.setAttribute("normal",new Float32BufferAttribute(Z,3))}}const EPS=1e-8;function planeFromInequality(G,_,J,Z={}){const[Q,ee,te]=J,ne=G[Q]||0,ie=G[ee]||0,re=G[te]||0;let oe=_||0;for(let le=0;le<G.length;le++){if(le===le||le===ee||le===te)continue;const ue=Z.hasOwnProperty(le)?Z[le]:0;oe+=(G[le]||0)*ue}const se=new Vector3(ne,ie,re),ae=-oe;return{normal:se,d:ae}}function solve3x3(G,_){const J=G,Z=_.x,Q=_.y,ee=_.z,te=J[0],ne=J[1],ie=J[2],re=J[3],oe=J[4],se=J[5],ae=J[6],le=J[7],ue=J[8],de=te*(oe*ue-se*le)-ne*(re*ue-se*ae)+ie*(re*le-oe*ae);if(Math.abs(de)<EPS)return null;const pe=1/de,fe=(Z*(oe*ue-se*le)-ne*(Q*ue-se*ee)+ie*(Q*le-oe*ee))*pe,_e=(te*(Q*ue-se*ee)-Z*(re*ue-se*ae)+ie*(re*ee-Q*ae))*pe,ye=(te*(oe*ee-Q*le)-ne*(re*ee-Q*ae)+Z*(re*le-oe*ae))*pe;return new Vector3(fe,_e,ye)}function computeFeasibleVertices(G){const _=[],J=G.length;for(let Z=0;Z<J;Z++)for(let Q=Z+1;Q<J;Q++)for(let ee=Q+1;ee<J;ee++){const te=G[Z].normal,ne=G[Q].normal,ie=G[ee].normal,re=[te.x,te.y,te.z,ne.x,ne.y,ne.z,ie.x,ie.y,ie.z],oe=new Vector3(-G[Z].d,-G[Q].d,-G[ee].d),se=solve3x3(re,oe);if(!se)continue;let ae=!0;for(let ue=0;ue<J;ue++)if(G[ue].normal.dot(se)+G[ue].d>1e-6){ae=!1;break}if(!ae)continue;let le=!1;for(const ue of _)if(ue.distanceToSquared(se)<1e-10){le=!0;break}le||_.push(se)}return _}function HalfPlane({normal:G,d:_,size:J=10,color:Z="orange",opacity:Q=.5,showNormal:ee=!0,showArrows:te=!0}){const ne=G.clone(),ie=ne.lengthSq(),re=1+.02,oe=ie>EPS?ne.clone().multiplyScalar(-_/ie*re):new Vector3,se=new Vector3(0,0,1),ae=new Quaternion;return ne.length()>EPS&&ae.setFromUnitVectors(se,ne.clone().normalize()),jsxRuntimeExports.jsxs("group",{children:[jsxRuntimeExports.jsxs("mesh",{position:oe.toArray(),quaternion:ae,children:[jsxRuntimeExports.jsx("circleGeometry",{args:[J,30]}),jsxRuntimeExports.jsx("meshStandardMaterial",{color:Z,transparent:!0,depthTest:!0,depthWrite:!1,opacity:Q,side:DoubleSide})]}),ee&&ne.length()>EPS&&jsxRuntimeExports.jsx("mesh",{position:oe.toArray(),children:te&&jsxRuntimeExports.jsx("primitive",{object:new ArrowHelper(ne.clone().normalize(),new Vector3(0,0,0),1,Z)})})]})}function feasibleGeometry(G){if(!G||G.length<4)return null;const _=G.map(J=>new Vector3(J.x,J.y,J.z));try{const J=new ConvexGeometry(_);return J.computeVertexNormals(),J}catch(J){return console.warn("ConvexGeometry failed",J),null}}function FeasibleVolume({vertices:G,color:_="royalblue",simple:J,opacity:Z=.35,showEdges:Q=!0}){const ee=reactExports.useMemo(()=>feasibleGeometry(G),[G]);return ee?jsxRuntimeExports.jsxs("mesh",{geometry:ee,children:[J?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("meshBasicMaterial",{color:_,side:DoubleSide})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("meshStandardMaterial",{color:_,transparent:!0,depthTest:!0,depthWrite:!0,opacity:Z,side:DoubleSide})}),Q&&jsxRuntimeExports.jsxs("lineSegments",{children:[jsxRuntimeExports.jsx("edgesGeometry",{args:[ee]}),jsxRuntimeExports.jsx("lineBasicMaterial",{linewidth:2,color:"black"})]})]}):null}function PointGrid({colour:G="black",xmin:_=-10,xmax:J=10,ymin:Z=0,ymax:Q=0,zmin:ee=-10,zmax:te=10}){let ne=[];for(let ie=_;ie<=J;ie++)for(let re=Z;re<=Q;re++)for(let oe=ee;oe<=te;oe++)ne.push([ie,re+.01,oe]);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(Points,{limit:ne.length,range:1e3,children:[ne.map((ie,re)=>jsxRuntimeExports.jsx(Point,{position:ie},"point"+re)),jsxRuntimeExports.jsx(PointMaterial,{transparent:!0,vertexColors:!0,size:5,sizeAttenuation:!1,depthWrite:!1,color:G})]})})}const AnimatedHalfPlane=animated(HalfPlane),useStore=create$1(G=>({position:[0,10,0],setPosition:_=>G({position:_})}));function ReactiveCamera({controllable:G}){const[_,J,Z]=useStore(Q=>Q.position);useFrame(Q=>{G||(Q.camera.position.lerp({x:_,y:J,z:Z},.05),Q.camera.lookAt(0,0,0),Q.camera.updateProjectionMatrix())})}function Setting({A:G,b:_,c:J,varIndices:Z,phase:Q,style:ee}){const re=[0,10,-.01],oe=[0,4,-8],se=reactExports.useMemo(()=>{if(!G||!_)return[];const fe=[];for(let _e=0;_e<G.length;_e++){const ye=planeFromInequality(G[_e],J*_[_e],Z);fe.push(ye)}return fe},[G,_,J,Z]),ae=reactExports.useMemo(()=>computeFeasibleVertices(se),[se]),le=useStore(fe=>fe.setPosition),[ue,de]=reactExports.useState(!1);reactExports.useEffect(()=>{Q<2?(le(re),setTimeout(()=>{de(!1)},500)):(le(oe),setTimeout(()=>{de(!0)},500))},[Q]);const pe=useSpring({size:Q<2?0:Q<3?1:5,opacity:Q<3?.9:.2});return jsxRuntimeExports.jsx("div",{style:{height:"100vh",width:"100%"},children:jsxRuntimeExports.jsxs(Canvas,{camera:{position:re,fov:45},children:[jsxRuntimeExports.jsx(ReactiveCamera,{controllable:ue}),jsxRuntimeExports.jsx("ambientLight",{intensity:Math.PI/2}),jsxRuntimeExports.jsx("spotLight",{position:[10,10,10],angle:.15,penumbra:1,decay:0,intensity:Math.PI}),jsxRuntimeExports.jsx("pointLight",{position:[-10,-10,-10],decay:0,intensity:Math.PI}),se.map((fe,_e)=>jsxRuntimeExports.jsx(AnimatedHalfPlane,{normal:fe.normal,d:fe.d,color:"orange",opacity:pe.opacity,size:pe.size,showArrows:Q>=2},_e)),Q===1&&jsxRuntimeExports.jsx(PointGrid,{}),jsxRuntimeExports.jsx(FeasibleVolume,{vertices:ae,simple:Q<2,color:"royalblue",opacity:.5}),jsxRuntimeExports.jsx(OrbitControls,{enabled:Q>=2,enablePan:!1}),jsxRuntimeExports.jsx(Grid,{cellSize:50,infiniteGrid:!0,side:2,sectionColor:"#ffffff",position:[0,0,0]})]})})}function DragMove({onPointerDown:G=()=>{},onPointerUp:_=()=>{},onPointerMove:J=()=>{},onDragMove:Z=()=>{},style:Q,className:ee,children:te,grabber:ne}){const[ie,re]=reactExports.useState(!1),oe=reactExports.useRef(!1);reactExports.useEffect(()=>{oe.current=ie},[ie]);const se=ue=>{re(!0),G(ue)},ae=ue=>{re(!1),_(ue)},le=ue=>{oe.current&&Z(ue),J(ue)};return reactExports.useEffect(()=>(window.addEventListener("pointerup",ae),window.addEventListener("mousemove",le),()=>{window.removeEventListener("pointerup",ae),window.removeEventListener("mousemove",le)}),[]),jsxRuntimeExports.jsxs("div",{style:{userSelect:"none",cursor:ie?"grabbing":"grab",...Q},className:ee,children:[jsxRuntimeExports.jsx("div",{onPointerDown:se,children:ne}),te]})}function CubeGraph({name:G="cubegraph1",fixedE:_=!1}){const J=()=>{const Q=-6*(_?.4:1),ee=6*(_?.4:1),te=-4*(_?.4:1),ne=4*(_?.4:1),ie=_?10:.4,re=_?1:7,oe=_?.5:re/3,se=_?.01:.3,ae=JXG.JSXGraph.initBoard(G,{boundingbox:[Q,ne,ee,te],axis:!0,grid:!0,gridX:1,gridY:1,showCopyright:!1,showNavigation:!1}),le=[[-12*ie,-6*ie],[-6*ie,8*ie],[6*ie,9*ie],[12*ie,2*ie],[8*ie,-8*ie],[-2*ie,-9*ie]],ue=le.map((Ge,He)=>ae.create("point",Ge,{visible:!1,fixed:!0}));ae.create("polygon",ue,{fillColor:"#eee",strokeColor:"royalblue",opacity:.3,borders:{strokeWidth:2}});const de=_?.2:.5,pe=_?1:2,fe=ae.create("slider",[[Q+de,te+de],[Q+pe+de,te+de],[se,oe,re]],{name:"e",withLabel:!0,label:{fontSize:20}}),_e=ae.create("point",[0,0],{name:"$\\vec{z}$",size:7,face:"o",color:"red",snapSizeX:0,snapSizeY:0,label:{fontSize:30,offset:[10,-20],opacity:.5}}),ye=ae.create("point",[Math.round(_e.X()),Math.round(_e.Y())],{name:"$\\lceil \\vec{z} \\rfloor$",size:3,face:"o",fixed:!0,color:"green",snapSizeX:1,snapSizeY:1,label:{visible:!0,fontSize:20,offset:[-40,30],cssClass:"rounded_jsx"}});function be(){return fe.Value()}const Ae=()=>be()/2,Ce=ae.create("point",[()=>_e.X()-Ae(),()=>_e.Y()-Ae()],{visible:!1}),Ee=ae.create("point",[()=>_e.X()+Ae(),()=>_e.Y()-Ae()],{visible:!1}),Re=ae.create("point",[()=>_e.X()+Ae(),()=>_e.Y()+Ae()],{visible:!1}),Te=ae.create("point",[()=>_e.X()-Ae(),()=>_e.Y()+Ae()],{visible:!1});ae.create("polygon",[Ce,Ee,Re,Te],{opacity:.6,fillColor:"#fdd",strokeColor:"#a33"});function Me(Ge,He){for(var Be=Ge[0],ze=Ge[1],Fe=!1,$e=0,Xe=He.length-1;$e<He.length;Xe=$e++){var je=He[$e][0],qe=He[$e][1],Ze=He[Xe][0],st=He[Xe][1],St=qe>ze!=st>ze&&Be<(Ze-je)*(ze-qe)/(st-qe)+je;St&&(Fe=!Fe)}return Fe}function Ne(Ge=be(),He=_e.X(),Be=_e.Y()){let ze=Ge/2;return Me([He-ze,Be-ze],le)&&Me([He+ze,Be-ze],le)&&Me([He-ze,Be+ze],le)&&Me([He+ze,Be+ze],le)}let Le=_e.X(),Ie=_e.Y();if(_e.on("drag",Ge=>{if(Ne())Le=_e.X(),Ie=_e.Y();else{const He=be(),Be=_e.X(),ze=_e.Y();let Fe=Be,$e=ze;for(;!Ne(He,Fe,$e);)Fe-=.01*(Be-Le),$e-=.01*(ze-Ie);_e.setPosition(JXG.COORDS_BY_USER,[Fe,$e])}ye.setPosition(JXG.COORDS_BY_USER,[Math.round(_e.X()),Math.round(_e.Y())]),ae.update()}),!_){let Ge=be();fe.on("drag",He=>{if(Ne())Ge=be();else{const Be=be();let ze=Be;for(;!Ne(ze);)ze-=.01*(Be-Ge);fe.setValue(ze)}ae.update()})}ae.update()};let Z=reactExports.useRef(null);return reactExports.useEffect(()=>{Z.current&&J()},[Z]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{ref:Z,id:G,className:"jxgbox",style:{width:"100vmin",aspectRatio:1.5,marginTop:50}})})}function SingleConstraint({}){let G=reactExports.useRef(null);const _=()=>{const J=G.current.clientWidth/G.current.clientHeight,Z=2,Q=Z/J,ee=Z,te=.2,ne=JXG.JSXGraph.initBoard("singleconstraint",{boundingbox:[-Z,Q,Z,-Q],axis:!0,grid:!0,gridX:1,gridY:1,showCopyright:!1,showNavigation:!1}),ie=ne.create("slider",[[-Z+te,-Q+te],[-Z+te*5,-Q+te],[0,ee/4,ee]],{name:"e",withLabel:!0,label:{fontSize:20}}),re=ne.create("point",[-1,1],{name:"$z$",size:7,face:"o"}),oe=ne.create("point",[0,0],{visible:!1,fixed:!0}),se=ne.create("point",[.8,.3],{name:"$\\vec{a}$",size:1.5,face:"o",color:"royalblue"});ne.create("line",[oe,se],{color:"black",opacity:.3});const ae=()=>ie.Value()/2,le=20,ue=!1,de=ne.create("point",[()=>re.X()-ae(),()=>re.Y()-ae()],{name:"x",label:{visible:ue,fontsize:le}}),pe=ne.create("point",[()=>re.X()+ae(),()=>re.Y()-ae()],{name:"x",label:{visible:ue,fontsize:le}}),fe=ne.create("point",[()=>re.X()+ae(),()=>re.Y()+ae()],{name:"x",label:{visible:ue,fontsize:le}}),_e=ne.create("point",[()=>re.X()-ae(),()=>re.Y()+ae()],{name:"x",label:{visible:ue,fontsize:le}}),ye=(Ne,Le)=>Le.X()*Ne.X()+Le.Y()*Ne.Y(),be=()=>Math.sqrt(se.X()*se.X()+se.Y()*se.Y()),Ae=(Ne,Le,Ie)=>ye(Ne,Le)*(Ie?Ne.X():Ne.Y())/be(),Ce={color:"black",opacity:.1},Ee={name:"",layer:13},Re=[de,pe,fe,_e];for(const Ne of Re){const Le=ne.create("point",[()=>Ae(se,Ne,!0),()=>Ae(se,Ne,!1)],Ee);ne.create("segment",[Ne,Le],Ce)}const Te=()=>Re.map(Ne=>ye(se,Ne)).reduce((Ne,Le)=>Ne<Le?Ne:Le),Me=()=>Re.map(Ne=>ye(se,Ne)).reduce((Ne,Le)=>Ne>Le?Ne:Le);ne.create("segment",[[()=>Te()*se.X()/be(),()=>Te()*se.Y()/be()],[()=>Me()*se.X()/be(),()=>Me()*se.Y()/be()]],{color:"#faa",strokeWidth:8,opacity:.5,layer:11}),ne.create("polygon",[de,pe,fe,_e],{opacity:.5,fillColor:"#faa",strokeColor:"#a33"}),ne.create("arrow",[oe,se],{name:"$\\vec{a}$",strokeWidth:3,color:"royalblue",layer:10}),ne.update()};return reactExports.useEffect(()=>{G.current&&_()},[G]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{ref:G,id:"singleconstraint",className:"jxgbox",style:{width:"40vw",height:"min(60vh, 40vw)"}})})}function CubeTransform3D({A:G,b:_,e:J,setE:Z,varIndices:Q,chebyshev:ee,style:te}){const ne=[0,4,-8],ie=ye=>ye.reduce((be,Ae)=>Math.abs(be)+Math.abs(Ae),0),re=ye=>Math.sqrt(ye.reduce((be,Ae)=>be+Ae*Ae,0)),oe=(ye,be,Ae)=>be.map((Ce,Ee)=>Ce[0]-Ae[0][0]*.5*(ee?re(ye[Ee]):ie(ye[Ee]))),se=reactExports.useMemo(()=>{const ye=[];for(let be=0;be<G.length;be++)ye.push(planeFromInequality(G[be],_[be],Q));return ye},[G,_]),ae=reactExports.useMemo(()=>computeFeasibleVertices(se),[se]),le=reactExports.useMemo(()=>{const ye=[];for(let be=0;be<G.length;be++)ye.push(planeFromInequality(G[be],oe(G,_,J)[be],Q));return ye},[G,_,J,Q,ee]),ue=reactExports.useMemo(()=>computeFeasibleVertices(le),[le]),[de,pe]=reactExports.useState(ue),[fe,_e]=reactExports.useState(J);return reactExports.useEffect(()=>{ue.length>0?(pe(ue.slice()),_e(J)):Z(fe)},[ue]),jsxRuntimeExports.jsx("div",{style:{height:"100vh",width:"100%"},children:jsxRuntimeExports.jsxs(Canvas,{camera:{position:ne,fov:45},children:[jsxRuntimeExports.jsx("ambientLight",{intensity:Math.PI/2}),jsxRuntimeExports.jsx("spotLight",{position:[10,10,10],angle:.15,penumbra:1,decay:0,intensity:Math.PI}),jsxRuntimeExports.jsx("pointLight",{position:[-10,-10,-10],decay:0,intensity:Math.PI}),jsxRuntimeExports.jsx(FeasibleVolume,{vertices:ue,simple:!0,color:"royalblue",opacity:1}),jsxRuntimeExports.jsx(FeasibleVolume,{vertices:ae,color:"royalblue",opacity:.1,showEdges:!1}),ee?de.map((ye,be)=>jsxRuntimeExports.jsx(Sphere,{position:[ye.x,ye.y,ye.z],scale:fe[0][0]/2,children:jsxRuntimeExports.jsx("meshStandardMaterial",{wireframe:!0,color:"orange"})},be)):de.map((ye,be)=>jsxRuntimeExports.jsx(Box,{position:[ye.x,ye.y,ye.z],scale:fe[0][0],children:jsxRuntimeExports.jsx("meshStandardMaterial",{wireframe:!0,color:"orange"})},be)),jsxRuntimeExports.jsx(OrbitControls,{enabled:!0,enablePan:!1}),jsxRuntimeExports.jsx(Grid,{cellSize:50,infiniteGrid:!0,side:2,sectionColor:"#ffffff",position:[0,0,0]})]})})}function objective(G,_,J,Z){return G*Z[0]+_*Z[1]+J*Z[2]}function getColour(G,_,J,Z,Q,ee){const te=new Color("orange"),ie=.6*(1-(objective(G,_,J,Z)-Q)/(ee-Q))+.1;return te.setHSL(ie,1,.5),te}function DirectionColouredVolume({vertices:G,c:_,setFmin:J,setFmax:Z}){const Q=(te,ne,ie)=>te*_[0]+ne*_[1]+ie*_[2],ee=reactExports.useMemo(()=>{const te=feasibleGeometry(G);if(te==null)return null;const ne=te.index?te.toNonIndexed():te,re=ne.getAttribute("position").count,oe=new Float32Array(re*3),se=ne.getAttribute("position"),ae=[];for(let fe=0;fe<re;fe++)ae.push([se.getX(fe),se.getY(fe),se.getZ(fe)]);if(ae.length==0)return null;const le=ae.map(([fe,_e,ye])=>Q(fe,_e,ye)),ue=Math.min.apply(null,le),de=Math.max.apply(null,le);J(ue),Z(de);for(let fe=0;fe<re;fe++){const _e=getColour(ae[fe][0],ae[fe][1],ae[fe][2],_,ue,de);oe[fe*3+0]=_e.r,oe[fe*3+1]=_e.g,oe[fe*3+2]=_e.b}const pe=new BufferAttribute(oe,3);return pe.needsUpdate=!0,ne.setAttribute("color",pe),ne},[G,_]);return ee?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("mesh",{geometry:ee,children:jsxRuntimeExports.jsx("meshStandardMaterial",{transparent:!0,opacity:.5,vertexColors:!0,side:DoubleSide})}),jsxRuntimeExports.jsxs("lineSegments",{children:[jsxRuntimeExports.jsx("edgesGeometry",{args:[ee]}),jsxRuntimeExports.jsx("lineBasicMaterial",{linewidth:2,color:"black"})]})]}):null}function Label3d({children:G,x:_,y:J,z:Z}){return jsxRuntimeExports.jsx(Html,{position:[_,J+.2,Z],center:!0,transform:!1,distanceFactor:10,occlude:!1,zIndexRange:[100,0],style:{pointerEvents:"none"},children:jsxRuntimeExports.jsx("div",{style:{padding:"5px 10px",background:"rgba(0,0,0,0.1)",color:"black",borderRadius:6,fontSize:14,transform:"translateY(-50%)"},children:G})})}function OrientableArrow({colour:G="red",c:_,setC:J}){const[Z,Q]=reactExports.useState(()=>new Vector3(_[0],_[1],_[2]).normalize()),[ee,te]=reactExports.useState(()=>Math.sqrt(_[0]*_[0]+_[1]*_[1]+_[2]*_[2]));return reactExports.useEffect(()=>{const ne=new Vector3(_[0],_[1],_[2]);ne.lengthSq()>0&&ne.normalize(),Q(ne),te(2*Math.sqrt(_[0]*_[0]+_[1]*_[1]+_[2]*_[2]))},[_]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Math.abs(_[0])+Math.abs(_[1])+Math.abs(_[2])>0&&jsxRuntimeExports.jsx("arrowHelper",{args:[Z,new Vector3(0,0,0),1,G]}),jsxRuntimeExports.jsxs(DragControls,{onDrag:(ne,ie,re,oe)=>{const se=new Vector3;se.setFromMatrixPosition(re),J([se.x,se.y,se.z])},children:[jsxRuntimeExports.jsx(Sphere,{position:_,scale:.1,children:jsxRuntimeExports.jsx("meshStandardMaterial",{color:G,transparent:!0,opacity:1,side:DoubleSide})}),jsxRuntimeExports.jsx(Label3d,{x:_[0],y:_[1],z:_[2],children:"c"})]})]})}function Simplex({A:G,b:_,varIndices:J,style:Z}){const Q=[0,4,-8],ee=0,[te,ne]=reactExports.useState([ee,ee,ee]),[ie,re]=reactExports.useState(0),[oe,se]=reactExports.useState(1),ae=reactExports.useMemo(()=>{const de=[];for(let pe=0;pe<G.length;pe++)de.push(planeFromInequality(G[pe],_[pe],J));return de},[G,_]),le=reactExports.useMemo(()=>computeFeasibleVertices(ae),[ae]),ue=reactExports.useMemo(()=>{let de=le[0],pe=-99999,fe=le[0],_e=99999;for(const be of le){const Ae=objective(be.x,be.y,be.z,te);Ae>pe&&(pe=Ae,de=be),Ae<_e&&(_e=Ae,fe=be)}const ye=(be,Ae)=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Sphere,{position:be,scale:.1,children:jsxRuntimeExports.jsx("meshBasicMaterial",{color:getColour(be.x,be.y,be.z,te,ie,oe),side:DoubleSide})}),jsxRuntimeExports.jsx(Label3d,{x:be.x,y:be.y,z:be.z,children:Ae})]});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Math.abs(te[0])+Math.abs(te[1])+Math.abs(te[2])>0&&ye(de,"maximizer"),Math.abs(te[0])+Math.abs(te[1])+Math.abs(te[2])>0&&ye(fe,"minimizer")]})},[le,te]);return jsxRuntimeExports.jsxs("div",{style:{height:"100vh",width:"100%",...Z},children:[jsxRuntimeExports.jsx("div",{style:{position:"absolute",width:800,height:10,bottom:180,left:"50vw",transform:"translateX(-50%)",background:"linear-gradient(90deg in hsl longer hue, hsla(261, 100%, 50%, 1.00), hsl(36,100%,50%))",borderRadius:15}}),jsxRuntimeExports.jsxs(Canvas,{camera:{position:Q,fov:45},children:[jsxRuntimeExports.jsx("ambientLight",{intensity:Math.PI/2}),jsxRuntimeExports.jsx("spotLight",{position:[10,10,10],angle:.15,penumbra:1,decay:0,intensity:Math.PI}),jsxRuntimeExports.jsx("pointLight",{position:[-10,-10,-10],decay:0,intensity:Math.PI}),jsxRuntimeExports.jsx(DirectionColouredVolume,{vertices:le,c:te,setFmin:re,setFmax:se}),ue,jsxRuntimeExports.jsx(OrientableArrow,{c:te,setC:ne}),jsxRuntimeExports.jsx(OrbitControls,{enabled:!0,enablePan:!0,makeDefault:!0}),jsxRuntimeExports.jsx(Grid,{cellSize:50,infiniteGrid:!0,side:2,sectionColor:"#ffffff",position:[0,0,0]})]})]})}const NAMES=["CAV-2009","DILLIG","PRIME-CONE","SLACKS","ROTATE"],INSTANCES=[503,229,19,229,229],ORIG_INSTANCES=[591,233,37,233,229],SOLVERS=["SPASS-IQ-0.1+uc","SPASS-IQ-0.1","ctrl-ergo","cvc4-1.4","mathsat5-3.9","yices-2.4.2","z3-4.4.0"],TIMES={"SPASS-IQ-0.1+uc":[22,9,.4,26,9],"SPASS-IQ-0.1":[713,218,.4,95,214],"ctrl-ergo":[12,5,.4,46,6760],"cvc4-1.4":[12903,4146,3,4061,6964],"mathsat5-3.9":[6409,2314,3.5,4577,1513],"yices-2.4.2":[11461,2563,.1,5767,10171],"z3-4.4.0":[764,525,.2,383,528]},TIME_MINS=[SOLVERS.map(G=>TIMES[G][0]).reduce((G,_)=>Math.min(G,_)),SOLVERS.map(G=>TIMES[G][1]).reduce((G,_)=>Math.min(G,_)),SOLVERS.map(G=>TIMES[G][2]).reduce((G,_)=>Math.min(G,_)),SOLVERS.map(G=>TIMES[G][3]).reduce((G,_)=>Math.min(G,_)),SOLVERS.map(G=>TIMES[G][4]).reduce((G,_)=>Math.min(G,_))];function colourTimes(G){return G>.5?"#000000ff":"#048304ff"}const fontsize="4.2vmin";function ResultsTime({style:G}){const[_,J]=reactExports.useState(!1);return jsxRuntimeExports.jsxs("div",{style:{position:"relative",...G},children:[jsxRuntimeExports.jsx("button",{style:{position:"absolute",right:"-6vmin",top:fontsize,width:fontsize,height:fontsize,fontSize:"2vmin",cursor:"pointer",background:"transparent",border:"1px solid #333",borderRadius:5},onClick:Z=>J(Q=>!Q),children:"%"}),jsxRuntimeExports.jsxs("div",{style:{position:"absolute",right:"-5vmin",top:"10vmin",fontSize:"4vmin",textAlign:"center",cursor:"pointer"},className:"tooltip",children:["?",jsxRuntimeExports.jsx("span",{className:"tooltiptext",style:{width:200},children:"10min 32x2.4GHz 512GB RAM"})]}),jsxRuntimeExports.jsxs("table",{style:{fontSize:fontsize,borderCollapse:"collapse"},children:[jsxRuntimeExports.jsxs("thead",{children:[jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Benchmark"}),NAMES.map((Z,Q)=>jsxRuntimeExports.jsx("th",{children:Z},Q))]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsxs("th",{className:"tooltip",children:["Instances",jsxRuntimeExports.jsx("span",{className:"tooltiptext",children:"with Infinite Lattice Width (or ROTATE)"})]}),INSTANCES.map((Z,Q)=>jsxRuntimeExports.jsx("th",{children:_?jsxRuntimeExports.jsxs("div",{className:"tooltip",children:[(Z/ORIG_INSTANCES[Q]).toFixed(2)*100+"%",jsxRuntimeExports.jsx("span",{className:"tooltiptext",children:`${Z}/${ORIG_INSTANCES[Q]}`})]}):Z},Q))]}),jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("th",{colSpan:NAMES.length+1,style:{textAlign:"center"},children:_?"Speedup":"Time Taken"})})]}),jsxRuntimeExports.jsx("tbody",{children:SOLVERS.map((Z,Q)=>jsxRuntimeExports.jsxs("tr",{style:{border:Q==0?"solid 2px black":""},children:[jsxRuntimeExports.jsx("td",{children:Z}),TIMES[Z].map((ee,te)=>jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("span",{style:{textDecoration:Math.abs(TIME_MINS[te]-ee)<1e-6?"underline":"none",color:Z==="ctrl-ergo"&&te==INSTANCES.length-1?"blue":colourTimes(ee/TIMES["SPASS-IQ-0.1"][te])},children:_?(TIMES["SPASS-IQ-0.1"][te]/ee*100).toFixed(0)+"%":ee+"s"})},te))]},Q))})]})]})}const Summary1="/cubetests/assets/summary_constraint-D3UoOb8H.png",Summary2="/cubetests/assets/summary_geometry-CAbWiF1L.png",Summary3="/cubetests/assets/summary_box-DfRPTYim.png";function gaussian(G=0,_=1){const J=1-Math.random(),Z=Math.random();return Math.sqrt(-2*Math.log(J))*Math.cos(2*Math.PI*Z)*_+G}function Matrix({mat:G,setMat:_,label:J,style:Z,lower_bound:Q=null,matReset:ee=null,initiallyExpanded:te=!1,showShuffle:ne=!0}){const ie=G[0].length,re=G.length,[oe,se]=reactExports.useState(G.map(function(ye){return ye.slice()})),ae=(ye,be,Ae,Ce)=>{var Ee=ye.map(function(Re){return Re.slice()});return Ee[be][Ae]=Q!==null?Math.max(Q,Ce):Ce,Ee},[le,ue]=reactExports.useState(te),[de,pe]=reactExports.useState({x:0,y:0}),fe=ye=>{pe(be=>({x:be.x+ye.movementX,y:be.y+ye.movementY}))},_e=.1;return jsxRuntimeExports.jsxs(DragMove,{onDragMove:fe,style:{transform:`translateX(${de.x}px) translateY(${de.y}px)`,position:"absolute",top:15,left:15,background:le?"white":"rgba(255, 255, 255, 0.7)",borderRadius:15,padding:15,zIndex:le?2:1,...Z},grabber:jsxRuntimeExports.jsx("span",{style:{cursor:"pointer"},onClick:()=>{ue(ye=>!ye)},onDoubleClick:()=>{_(ee||oe)},children:J}),children:[ne&&jsxRuntimeExports.jsx("button",{style:{transition:"max-height 0.3s ease, opacity 0.2s ease, height 500ms ease",maxHeight:le?"30px":"0px",opacity:le?1:0,height:le?"30px":"0px",width:le?"30px":"0px",display:le?"inline-block":"none",border:"2px solid black",borderRadius:10,position:"absolute",left:"50%",transform:"translateX(-50%)",top:110,cursor:"pointer",background:` center / contain no-repeat url("${ShuffleIcon}")`},onClick:ye=>{let be=G.map(function(Ae){return Ae.slice().map(Ee=>Ee+gaussian(0,_e))});_(be)},title:`Add (=0,=${(_e*100).toFixed(0)}%)`}),jsxRuntimeExports.jsx("div",{className:"matrix-container",style:{marginTop:le&&ne?30:0,gridTemplateColumns:"auto ".repeat(ie),maxHeight:le?"1000px":"0px",opacity:le?1:0,zIndex:le?5:0,overflow:"hidden",transition:"max-height 0.3s ease, opacity 0.2s ease, height 500ms ease",pointerEvents:le?"auto":"none"},children:Array.from(Array(re).keys()).flatMap(ye=>Array.from(Array(ie).keys()).flatMap(be=>jsxRuntimeExports.jsx(DragInput,{value:G[ye][be],setValue:Ae=>{_(Ce=>ae(Ce,ye,be,Ae))},init:oe[ye][be]},ye.toString()+be.toString())))})]})}function DragInput({init:G=0,value:_,setValue:J}){const[Z,Q]=reactExports.useState(_),[ee,te]=reactExports.useState(-1);return reactExports.useEffect(()=>{const ne=re=>{ee>=0&&J(Z+(re.clientX-ee)/100),re.stopPropagation()},ie=()=>{te(-1)};return document.addEventListener("pointermove",ne),document.addEventListener("pointerup",ie),()=>{document.removeEventListener("pointermove",ne),document.removeEventListener("pointerup",ie)}},[ee,J,Z]),jsxRuntimeExports.jsx("span",{onMouseDown:ne=>{te(ne.clientX),Q(_)},onDoubleClick:()=>{J(G)},style:{cursor:"ew-resize",userSelect:"none",textAlign:"right"},children:_.toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})})}function Bordered({children:G,style:_,dataId:J}){return jsxRuntimeExports.jsx("div",{style:{border:"2px black solid",borderRadius:"20px",padding:"3vmin",margin:"5vmin",position:"relative",textAlign:"center",..._},"data-id":J,children:G})}function LinearCubeTransform({style:G}){return jsxRuntimeExports.jsxs(Bordered,{style:{margin:"15vmin",...G},children:[jsxRuntimeExports.jsx("span",{style:{position:"absolute",top:"-8vmin",width:"100%",left:0,fontWeight:"bold"},children:"Linear Cube Transformation"}),`$$ \\begin{aligned}
      C_e^N(\\vec{z})\\subseteq P^{A}_{b}
      \\Longleftrightarrow 
      &A\\vec{z} \\le \\vec{b}'\\\\
      \\text{where: }\\quad&b_i'  b_i - \\frac{e}{2}\\left|\\left| a_i\\right|\\right|_1 
      \\end{aligned}$$ `]})}function App(){const G=reactExports.useRef(null),_=reactExports.useRef(null),[J,Z]=reactExports.useState(!1),[Q,ee]=reactExports.useState(0);reactExports.useEffect(()=>{if(_.current)return;_.current=new X$1(G.current,{transition:"fade",controls:!1,slideNumber:"c/t",jumpToSlide:!0,disableLayout:!0,hash:!0,autoAnimateEasing:"ease",autoAnimateDuration:.5,transitionSpeed:"fast",hideInactiveCursor:!1,katex:{local:void 0,delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]},plugins:[RevealMath.KaTeX]}),_.current.initialize().then(()=>{setTimeout(()=>{Z(!0)},100)});const Ce=()=>{setTimeout(()=>{const Ee=document.getElementsByClassName("current-fragment"),Re=Ee.length==0?-1:parseInt(Ee[0].getAttribute("data-fragment-index"));ee(Re+1)},50)};return _.current.on("fragmentshown",Ce),_.current.on("fragmenthidden",Ce),_.current.on("slidechanged",Ce),()=>{try{_.current&&(_.current.destroy(),_.current=null)}catch{console.warn("Reveal.js destroy call failed.")}}},[]);let te=[[1,0,-.7],[-.5,0,.1],[0,0,1],[0,0,-.6],[0,1,0],[0,-1,0]],ne=te,ie=[[1],[1],[1],[1],[1],[1]],re=[[1]],oe=[[0]];const[se,ae]=reactExports.useState(te),[le,ue]=reactExports.useState(ie),[de,pe]=reactExports.useState(re),[fe,_e]=reactExports.useState([[0]]);let ye=[0,1,2];const[be,Ae]=reactExports.useState(!1);return jsxRuntimeExports.jsx("div",{className:"reveal",ref:G,children:jsxRuntimeExports.jsxs("div",{className:"slides",children:[jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,children:[jsxRuntimeExports.jsxs("h1",{"data-id":"h1",id:"h1-title",children:["Fast Cube Tests for",jsxRuntimeExports.jsx("br",{}),"LIA Constraint Solving"]}),jsxRuntimeExports.jsx("h3",{children:"Julian Karrer"}),jsxRuntimeExports.jsx("h5",{style:{marginTop:"10vmin"},children:"Paper by Martin Bromberger and Christoph Weidenbach"})]}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,style:{justifyContent:"flex-start"},children:[jsxRuntimeExports.jsx("h1",{className:"top","data-id":"h1",children:Q==0?"Setting":Q==1?"Integers Only":Q==2?"Polyhedra":Q==3?"Half-Spaces":""}),jsxRuntimeExports.jsx(Matrix,{mat:se,setMat:ae,label:"$A$",matReset:ne,style:{opacity:Q<2?0:1,pointerEvents:Q<2?"none":"auto"}}),jsxRuntimeExports.jsx(Matrix,{mat:le,setMat:ue,label:"$b$",style:{left:340,opacity:Q<2?0:1,pointerEvents:Q<2?"none":"auto"}}),jsxRuntimeExports.jsx(Matrix,{mat:de,setMat:pe,label:"$c$",style:{right:100,left:"auto",opacity:Q<2?0:1,pointerEvents:Q<2?"none":"auto"}}),jsxRuntimeExports.jsx(Setting,{A:se,b:le,c:de[0],varIndices:ye,phase:Q}),jsxRuntimeExports.jsx(Annotated,{style:{opacity:Q>=2?0:1,pointerEvents:Q>=2?"none":"auto",position:"absolute",bottom:"8vh",background:"#f0f0f0ee",padding:"20px",paddingTop:"10px",borderRadius:"20px"},glossary:{"\\le":"\\text{component-wise} \\le",x:"x \\in \\mathbb{Z}^N",A:"A \\in \\mathbb{Q}^{M\\times N}",b:"b \\in  \\mathbb{Q}^{M}"},content:"$A \\vec{x} \\le \\vec{b}$ with $x \\in \\mathbb{Z}^N$",revealReady:J}),jsxRuntimeExports.jsx(Annotated,{style:{opacity:Q<2?0:1,pointerEvents:Q<2?"none":"auto",position:"absolute",bottom:"8vh",background:"#f0f0f0ee",padding:"20px",paddingTop:"10px",borderRadius:"20px"},glossary:{"\\le":"\\text{component-wise} \\le",x:"x \\in \\mathbb{Z}^N",A:"A \\in \\mathbb{Q}^{M\\times N}",b:"b \\in  \\mathbb{Q}^{M}",c:"c \\in  \\mathbb{Q}"},content:"$A \\vec{x} \\le \\vec{b} \\cdot c$",revealReady:J}),jsxRuntimeExports.jsx("span",{className:"fragment"}),jsxRuntimeExports.jsx("span",{className:"fragment"}),jsxRuntimeExports.jsx("span",{className:"fragment"})]}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,children:[jsxRuntimeExports.jsx("h1",{"data-id":"h1",children:"Cube Tests"}),jsxRuntimeExports.jsxs("div",{className:"leftbound",children:[jsxRuntimeExports.jsxs("div",{className:"top-space",children:["Cube Definition:",jsxRuntimeExports.jsx(Annotated,{content:`$
              \\begin{aligned}
                C_e^N(\\vec{z}) & \\left\\{ \\vec{x} \\in \\mathbb{R}^N \\, \\middle | \\,  \\forall j \\in \\mathbb{N} _1^N :\\quad | \\vec{x}_j-\\vec{z}_j | \\le \\frac{e}{2} \\right \\} \\\\
                =&\\left\\{ \\vec{x} \\in \\mathbb{R}^N \\, \\middle | \\,  
                  \\left|\\left| \\vec{x} - \\vec{z} \\right|\\right|_\\infty \\le \\frac{e}{2}
                \\right \\}
              \\end{aligned}
                $`,glossary:{e:"e\\in\\mathbb{R}_{\\ge 0}",x:"\\vec{x} \\in \\mathbb{R}^N",z:"\\vec{z} \\in \\mathbb{R}^N"},revealReady:J})]}),jsxRuntimeExports.jsx("div",{className:"top-space",children:"Polyhedron Definition: "}),jsxRuntimeExports.jsx(Annotated,{content:"$P^A_b  \\left\\{ \\vec{x} \\in \\mathbb{R}^N \\, \\middle | \\,  A\\vec{x}-\\vec{b} \\le 0 \\right \\}$",glossary:{A:"A \\in \\mathbb{Q}^{M\\times N}",b:"b \\in  \\mathbb{Q}^{M}",e:"e \\in  \\mathbb{R}_+",c:"c \\in \\mathbb{R}",x:"x \\in \\mathbb{R}^N","\\le":"\\text{component - wise} \\le"},revealReady:J}),jsxRuntimeExports.jsxs("p",{className:"top-space",children:["We test for ","$C_e^N(\\vec{z}) \\subseteq P^A_b$"," ","$\\qquad$"," ","$\\lceil \\vec{z} \\rfloor \\in \\mathbb{Z}^N$"," is candidate"]})]})]}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,children:[jsxRuntimeExports.jsx("h1",{"data-id":"h1",children:"Motivation"}),jsxRuntimeExports.jsx(CubeGraph,{})]}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,children:[jsxRuntimeExports.jsx("h1",{"data-id":"h1",children:"Single Constraint"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",width:"100vw",marginTop:"5vmin"},children:[jsxRuntimeExports.jsx("div",{style:{width:"40vw",height:"60vh",display:"flex",alignItems:"center",marginLeft:"50px"},children:jsxRuntimeExports.jsx(SingleConstraint,{})}),jsxRuntimeExports.jsxs("div",{style:{maxWidth:"60vw",marginLeft:"50px",textAlign:"left"},children:[jsxRuntimeExports.jsx(Annotated,{content:`$\\begin{aligned}
            &\\forall \\vec{x} \\in C_e^N(\\vec{z}): 
            \\underbrace{\\vec{a}_i \\cdot \\vec{x}}_{\\textit{objective}} \\le \\underbrace{b_i}_{\\textit{upper bound}} \\\\ \\\\

            &\\Longleftrightarrow\\max_{x\\in C_e^N(\\vec{z})} \\left\\{\\vec{a}_i \\cdot \\vec{x}\\right\\}  \\le b_i  \\\\
            \\end{aligned}$`,glossary:{},style:{marginBottom:"50px"},revealReady:J}),jsxRuntimeExports.jsxs("div",{"data-id":"vertex-set",children:[jsxRuntimeExports.jsx("span",{style:{width:"100%"},children:"Vertex Set:"}),jsxRuntimeExports.jsx("br",{}),` $$\\mathbb{V}\\left(\\vec{z}, e\\right)   \\left\\{  \\left( z_1 \\pm \\frac{e}{2}, \\dots , z_N \\pm \\frac{e}{2}\\right)^T
              \\right \\}  $$`]})]})]})]}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,style:{textAlign:"left"},children:[jsxRuntimeExports.jsx("h1",{"data-id":"h1",children:"Single Constraint"}),jsxRuntimeExports.jsxs("div",{"data-id":"vertex-set",style:{marginTop:"5vmin"},children:[jsxRuntimeExports.jsx("span",{style:{width:"100%"},children:"Vertex Set into Objective:"}),jsxRuntimeExports.jsx("br",{}),` $$
             \\max_{\\vec{x}\\in\\mathbb{V}\\left(\\vec{z}, e\\right)} \\vec{a}_i^T \\vec{x}
             = \\max\\left\\{ \\vec{a}_i \\cdot \\left( z_1 \\pm \\frac{e}{2}, \\dots , z_N \\pm \\frac{e}{2}\\right)^T
              \\right \\}  $$`]}),jsxRuntimeExports.jsxs("div",{style:{marginTop:"50px"},children:[`$$=
             \\vec{a}_i \\cdot \\vec{z} +  \\frac{e}{2}\\max\\left\\{ 
             \\sum_{j=1}^N \\pm a_{ij}
            \\right\\}$$`,jsxRuntimeExports.jsx("span",{"data-id":"cube-transform-1d-res",children:"$$= \\vec{a}_i\\cdot\\vec{z} + \\frac{e}{2}\\sum_{j=1}^N \\left|a_{ij}\\right|$$"})]})]}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,style:{textAlign:"left"},children:[jsxRuntimeExports.jsx("h1",{"data-id":"h1",children:"Multiple Constraints"}),jsxRuntimeExports.jsx("span",{"data-id":"cube-transform-1d-res",style:{marginTop:"10vmin"},children:`$$
            C_e^N(\\vec{z})\\subseteq P^{a_i}_{b_i}
            \\quad\\Longleftrightarrow \\quad
            \\vec{a}_i\\cdot\\vec{z} + \\frac{e}{2}\\left|\\left| a_i\\right|\\right|_1 \\le b_i 
            $$ `}),jsxRuntimeExports.jsx(LinearCubeTransform,{})]}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,children:[jsxRuntimeExports.jsx("h1",{"data-id":"h1",className:"top",children:"Geometric Meaning"}),jsxRuntimeExports.jsx(CubeTransform3D,{A:se,b:le,e:fe,setE:_e,varIndices:ye,chebyshev:be}),jsxRuntimeExports.jsx(Matrix,{mat:se,setMat:ae,label:"$A$",initiallyExpanded:!1,matReset:ne,style:{top:"calc(50% - 180px)"}}),jsxRuntimeExports.jsx(Matrix,{mat:le,setMat:ue,label:"$b$",initiallyExpanded:!1,style:{top:"50%",left:15}}),jsxRuntimeExports.jsx(Matrix,{mat:fe,setMat:_e,label:"$e$",initiallyExpanded:!0,lower_bound:0,matReset:oe,showShuffle:!1,style:{top:"50%",left:175}}),jsxRuntimeExports.jsxs("div",{style:{position:"absolute",left:15,bottom:15,fontSize:"calc(var(--r-main-font-size) * 0.75)"},children:["Chebyshev",jsxRuntimeExports.jsx("input",{type:"checkbox",checked:be,onChange:Ce=>Ae(Ce.target.checked),style:{width:"calc(var(--r-main-font-size) * 0.5)",height:"calc(var(--r-main-font-size) * 0.5)",marginLeft:10}})]})]}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,children:[jsxRuntimeExports.jsx("h1",{"data-id":"h1",children:"Largest Cube Test"}),jsxRuntimeExports.jsx(Bordered,{children:`$$\\begin{aligned}
            e^* \\coloneqq \\max_{e\\in\\mathbb{R},\\, \\vec{z}\\in\\mathbb{R}^N} \\qquad &e  \\\\
            \\text{st.}  \\qquad A\\vec{z} + \\frac{e}{2}\\vec{a}' &\\le b \\quad\\textit{where}\\quad \\vec{a}_i' \\coloneqq \\left|\\left|\\vec{a}_i\\right|\\right|_1\\\\
             0 &\\le e
          \\end{aligned}$$`}),jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsxs("li",{children:["Solution with Simplex since ","$\\vec{z}\\in\\mathbb{R}^N$"]}),jsxRuntimeExports.jsxs("li",{children:["$\\Omega(e) \\subseteq P^A_b$"," and ","$\\Omega(e=0) = P^A_b$"]}),jsxRuntimeExports.jsxs("li",{children:["Find feasible ","$\\vec{z}$"," even for ","$e^*=\\infty$"]})]})]}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,children:[jsxRuntimeExports.jsx("h1",{"data-id":"h1",className:"top",children:"Simplex Algorithm"}),jsxRuntimeExports.jsx(Matrix,{mat:se,setMat:ae,label:"$A$",initiallyExpanded:!1,matReset:ne,style:{top:"calc(50% - 180px)"}}),jsxRuntimeExports.jsx(Matrix,{mat:le,setMat:ue,label:"$b$",initiallyExpanded:!1,style:{top:"50%",left:15}}),jsxRuntimeExports.jsx(Simplex,{A:se,b:le,varIndices:ye}),jsxRuntimeExports.jsx("div",{style:{top:"50%",position:"absolute",right:40,background:"rgba(255, 255, 255, 0.6)",borderRadius:20,transform:"translateY(-50%)"},children:jsxRuntimeExports.jsxs(Bordered,{style:{margin:0},children:[`$$\\begin{aligned}
            \\max_{\\vec{x}\\in\\mathbb{R}^N} \\quad\\vec{c} &\\cdot \\vec{x}\\\\
            A\\vec{x}&\\le \\vec{b}
              `,`
            \\end{aligned}$$`]})}),jsxRuntimeExports.jsxs("ol",{style:{position:"absolute",margin:0,bottom:10},children:[jsxRuntimeExports.jsx("li",{children:"Find Basic Feasible Solution"}),jsxRuntimeExports.jsx("li",{children:"Pivot along increasing edges"})]})]}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,children:[jsxRuntimeExports.jsx("h1",{"data-id":"h1",children:"Motivation"}),jsxRuntimeExports.jsx(CubeGraph,{name:"cubegraph2",fixedE:!0})]}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,children:[jsxRuntimeExports.jsx("h1",{"data-id":"h1",children:"Closest point Lemma"}),jsxRuntimeExports.jsxs("span",{"data-id":"int-solution-guarantee",children:["For ","$\\vec{x}\\in\\mathbb{R}^N$",", ","$\\left\\lceil\\vec{x}\\right\\rfloor$"," is the closest integer to ","$\\vec{x}$"]}),jsxRuntimeExports.jsx(Bordered,{children:jsxRuntimeExports.jsx(Annotated,{content:"$\\forall \\vec{x}'\\in\\mathbb{Z}^N:  \\left |\\left | \\vec{x} -  \\left\\lceil\\vec{x}\\right\\rfloor \\right |\\right |_p \\le \\left |\\left | \\vec{x} -  \\vec{x}' \\right |\\right |_p$",glossary:{p:"p\\in\\mathbb{N^+} \\cup \\{\\infty\\}"},style:{},revealReady:J})}),"Holds due to monotonicity of norms if:",jsxRuntimeExports.jsxs(Bordered,{dataId:"closest-point",children:[jsxRuntimeExports.jsx("span",{style:{display:Q!==1?"inline-block":"none"},children:"$\\forall x_j'\\in\\mathbb{Z}:$"}),jsxRuntimeExports.jsx("span",{style:{display:Q!==1?"none":"inline-block"},children:"$\\forall x'\\in\\mathbb{Z}^N:$"}),jsxRuntimeExports.jsx("span",{className:"fragment fragment-grow","data-fragment-index":"1",children:"$\\sup_{j\\in\\mathbb{N}_1^N}\\{$"}),"$| x_j -  \\lceil x_j\\rfloor | $",jsxRuntimeExports.jsx("span",{className:"fragment fragment-grow","data-fragment-index":"1",children:"$\\}$"}),"$\\le $",jsxRuntimeExports.jsx("span",{className:"fragment fragment-grow","data-fragment-index":"1",children:"$\\sup_{j\\in\\mathbb{N}_1^N}\\{$"}),"$\\left | x_j -  x_j' \\right |$",jsxRuntimeExports.jsx("span",{className:"fragment fragment-grow","data-fragment-index":"1",children:"$\\}$"})]})]}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,children:[jsxRuntimeExports.jsx("h1",{"data-id":"h1",children:"Proof: One Dimension"}),jsxRuntimeExports.jsx(Bordered,{style:{margin:10},dataId:"closest-point",children:"$$\\forall x_j'\\in\\mathbb{Z}:   | \\underbrace{x_j -  \\lceil x_j\\rfloor }_{\\eqqcolon d_j \\in  \\left[-\\frac{1}{2}, \\frac{1}{2}\\right]} | \\le \\left | x_j -  x_j' \\right |$$"}),jsxRuntimeExports.jsx("ul",{style:{marginBottom:60},children:jsxRuntimeExports.jsx("li",{children:"$\\exists z_j \\in\\mathbb{Z}: x_j' =  \\lceil x_j\\rfloor - z_j$"})}),jsxRuntimeExports.jsx("span",{children:`$\\begin{aligned}
            z=0: &\\quad
            |x_j - \\lceil x_j\\rfloor | \\le |x_j - \\lceil x_j\\rfloor - \\cancel{z_j}| \\\\ 
            
            z\\neq0: &\\quad
            |x_j - x_j' | 
            = | \\underbrace{x_j - \\lceil x_j\\rfloor}_{d_j} - z_j|
            \\overset{\\text{triangle}}{\\ge} \\underbrace{ |z_j| }_{\\ge 1} - \\underbrace{|d_j|}_{\\le \\frac{1}{2}} 
            \\ge \\underbrace{|d_j|}_{\\le \\frac{1}{2}} 

            \\end{aligned}
            $`})]}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,children:[jsxRuntimeExports.jsx("h1",{"data-id":"h1",children:"The tightest Cube"}),jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsxs("li",{children:["$C_e^N(\\vec{z})$"," contains integer point iff.",jsxRuntimeExports.jsx("br",{})," ",`$
          \\begin{aligned}
          \\lceil\\vec{z}\\rfloor \\in \\left\\{ \\vec{x}\\in\\mathbb{R}^N \\middle| \\left|\\left| \\vec{x} - \\vec{z} \\right|\\right|_\\infty \\le \\frac{e}{2} \\right\\} \\\\
          \\Longleftrightarrow\\qquad \\left|\\left| \\lceil\\vec{z}\\rfloor - \\vec{z} \\right|\\right|_\\infty \\le \\frac{e}{2}
          \\end{aligned}
          $`]}),jsxRuntimeExports.jsx("li",{children:"$\\forall \\vec{z}\\in\\mathbb{R}^N:\\quad \\begin{aligned}\\left|\\left| \\lceil\\vec{z}\\rfloor - \\vec{z} \\right|\\right|_\\infty \\le \\frac{1}{2}\\end{aligned}$"})]}),jsxRuntimeExports.jsx(Bordered,{children:jsxRuntimeExports.jsxs("span",{"data-id":"int-solution-guarantee",children:["$C_1^N(\\vec{z}) \\subseteq P^A_b$"," guarantees integer solution ","$\\left\\lceil \\vec{z} \\right\\rfloor$"]})})]}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,children:[jsxRuntimeExports.jsx("h1",{"data-id":"h1",children:"Unit Cube Test"}),jsxRuntimeExports.jsx(Bordered,{children:"$$A\\vec{z} \\le \\vec{b}' \\quad\\textit{where}\\quad \\vec{b}_i' \\coloneqq \\vec{b}_i - \\frac{1}{2} \\left|\\left|\\vec{a}_i\\right|\\right|_1$$"}),jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{children:"Feasibility, no objective function"}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsxs("span",{"data-id":"int-solution-guarantee",children:["Guarantees integer solution ","$\\left\\lceil \\vec{z} \\right\\rfloor$"]})})]})]}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,children:[jsxRuntimeExports.jsx("h1",{"data-id":"h1",children:"Infinite Lattice Width"}),jsxRuntimeExports.jsx("img",{style:{marginTop:50,minWidth:"90vw"},src:Boundedness}),jsxRuntimeExports.jsxs("div",{style:{minWidth:"90vw",position:"relative",fontSize:"5vmin",display:"flex"},children:[jsxRuntimeExports.jsx("span",{style:{flex:1},children:"partially bounded"}),jsxRuntimeExports.jsx("span",{style:{flex:1},children:"bounded"}),jsxRuntimeExports.jsx("span",{style:{flex:1},children:"absolutely unbounded"})]}),jsxRuntimeExports.jsx("span",{style:{marginTop:"5vmin",fontSize:"large",color:"rgba(0,0,0,0.6)"},children:'"Decision Procedures for Linear Arithmetic" [Martin Bromberger 2019, Dissertation, p.48]'})]}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,children:[jsxRuntimeExports.jsx("h1",{"data-id":"h1",className:"top",children:"Results  Time Taken"}),jsxRuntimeExports.jsx(ResultsTime,{style:{marginTop:200}})]}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,children:[jsxRuntimeExports.jsx("h1",{"data-id":"h1",children:"Summary"}),jsxRuntimeExports.jsxs("div",{style:{width:"100vw",display:"flex",marginTop:50},children:[jsxRuntimeExports.jsxs("div",{style:{flex:1,width:"20vw",margin:"1vw"},children:[jsxRuntimeExports.jsx("img",{src:Summary1}),jsxRuntimeExports.jsxs("span",{children:["Fit Cubes in ","$P_b^A$"]})]}),jsxRuntimeExports.jsxs("div",{style:{flex:1,width:"20vw",margin:"1vw"},children:[jsxRuntimeExports.jsx("img",{src:Summary2}),jsxRuntimeExports.jsxs("span",{children:["Find ","$C^N_e(\\vec{z}) \\subseteq P_b^A$"]})]}),jsxRuntimeExports.jsxs("div",{style:{flex:1,width:"20vw",margin:"1vw"},children:[jsxRuntimeExports.jsx("img",{src:Summary3}),jsxRuntimeExports.jsxs("span",{children:["$C^N_1(\\vec{z}) \\subseteq P_b^A$"," yields ","$\\lceil \\vec{z} \\rfloor $"]})]})]})]}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,"data-visibility":"uncounted",children:[jsxRuntimeExports.jsx("h1",{"data-id":"h1",children:"Appendix:  Paper"}),jsxRuntimeExports.jsx("embed",{src:paper,style:{width:"80vw",height:"80vh"},type:"application/pdf"})]}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,"data-visibility":"uncounted",children:[jsxRuntimeExports.jsx("h1",{"data-id":"h1",children:"Appendix:  Thesis"}),jsxRuntimeExports.jsx("embed",{src:thesis,style:{width:"80vw",height:"80vh"},type:"application/pdf"})]}),jsxRuntimeExports.jsxs("section",{"data-auto-animate":!0,"data-visibility":"uncounted",children:[jsxRuntimeExports.jsx("h1",{"data-id":"h1",children:"Appendix:  CTRL-ERGO"}),jsxRuntimeExports.jsx("embed",{src:ctrlErgo,style:{width:"80vw",height:"80vh"},type:"application/pdf"})]})]})})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(App,{}))});export default kp();
